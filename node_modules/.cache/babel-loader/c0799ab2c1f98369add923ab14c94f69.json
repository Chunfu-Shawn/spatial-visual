{"ast":null,"code":"var __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __pow = Math.pow;\n\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, {\n  enumerable: true,\n  configurable: true,\n  writable: true,\n  value\n}) : obj[key] = value;\n\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {})) if (__hasOwnProp.call(b, prop)) __defNormalProp(a, prop, b[prop]);\n\n  if (__getOwnPropSymbols) for (var prop of __getOwnPropSymbols(b)) {\n    if (__propIsEnum.call(b, prop)) __defNormalProp(a, prop, b[prop]);\n  }\n  return a;\n};\n\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\n\nvar __require = typeof require !== \"undefined\" ? require : x => {\n  throw new Error('Dynamic require of \"' + x + '\" is not supported');\n};\n\nvar __objRest = (source, exclude) => {\n  var target = {};\n\n  for (var prop in source) if (__hasOwnProp.call(source, prop) && exclude.indexOf(prop) < 0) target[prop] = source[prop];\n\n  if (source != null && __getOwnPropSymbols) for (var prop of __getOwnPropSymbols(source)) {\n    if (exclude.indexOf(prop) < 0 && __propIsEnum.call(source, prop)) target[prop] = source[prop];\n  }\n  return target;\n};\n\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n\n  return value;\n};\n\nvar __async = (__this, __arguments, generator) => {\n  return new Promise((resolve, reject) => {\n    var fulfilled = value => {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n\n    var rejected = value => {\n      try {\n        step(generator.throw(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n\n    var step = x => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);\n\n    step((generator = generator.apply(__this, __arguments)).next());\n  });\n}; // src/components/heatmap/HeatmapSubscriber.js\n\n\nimport React14, { useEffect as useEffect5, useState as useState7, useCallback as useCallback5, useMemo as useMemo5 } from \"react\"; // src/components/TitleInfo.js\n\nimport React3, { useState as useState2 } from \"react\";\nimport { makeStyles as makeStyles2 } from \"@material-ui/core/styles\";\nimport CloudDownloadIcon from \"@material-ui/icons/CloudDownload\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport IconButton2 from \"@material-ui/core/IconButton\";\nimport Link from \"@material-ui/core/Link\";\nimport ArrowDropDownIcon from \"@material-ui/icons/ArrowDropDown\";\nimport ArrowDropUpIcon from \"@material-ui/icons/ArrowDropUp\";\nimport SettingsIcon from \"@material-ui/icons/Settings\";\nimport CloseIcon from \"@material-ui/icons/Close\"; // src/components/classNames.js\n\nvar TOOLTIP_ANCESTOR = \"tooltip-ancestor\";\nvar CARD = `card card-body my-2 ${TOOLTIP_ANCESTOR}`;\nvar PRIMARY_CARD = `${CARD} bg-primary`;\nvar SECONDARY_CARD = `${CARD} bg-secondary`;\nvar BLACK_CARD = `${CARD} bg-black`;\nvar SCROLL_CARD = `${PRIMARY_CARD} scroll`;\nvar VITESSCE_CONTAINER = \"vitessce-container\"; // src/components/LoadingIndicator.js\n\nimport React from \"react\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\n\nfunction LoadingIndicator() {\n  return /* @__PURE__ */React.createElement(\"div\", {\n    className: \"loading-indicator-backdrop\"\n  }, /* @__PURE__ */React.createElement(\"div\", {\n    className: \"loading-indicator-container\"\n  }, /* @__PURE__ */React.createElement(CircularProgress, null)));\n} // src/components/shared-mui/components.js\n\n\nimport React2, { useRef as useRef3 } from \"react\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Popper from \"@material-ui/core/Popper\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport MenuList from \"@material-ui/core/MenuList\";\nimport ClickAwayListener from \"@material-ui/core/ClickAwayListener\";\nimport Fade from \"@material-ui/core/Fade\"; // src/components/hooks.js\n\nimport { useRef as useRef2, useState, useEffect, useCallback as useCallback2, useMemo as useMemo2 } from \"react\";\nimport debounce from \"lodash/debounce\"; // src/app/state/hooks.js\n\nimport { useRef, useCallback, useMemo } from \"react\";\nimport create from \"zustand\";\nimport createContext from \"zustand/context\";\nimport shallow from \"zustand/shallow\"; // src/utils.js\n\nfunction fromEntries(iterable) {\n  return [...iterable].reduce((obj, _ref) => {\n    let {\n      0: key,\n      1: val\n    } = _ref;\n    return Object.assign(obj, {\n      [key]: val\n    });\n  }, {});\n}\n\nfunction range(length) {\n  return [...Array(length).keys()];\n}\n\nfunction pluralize(singular, plural, count) {\n  return count === 1 ? singular : plural;\n}\n\nfunction capitalize(word) {\n  return word.charAt(0).toUpperCase() + word.slice(1);\n}\n\nfunction getNextScope(prevScopes) {\n  const chars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZ\";\n  const nextCharIndices = [0];\n\n  function next() {\n    const r = [];\n    nextCharIndices.forEach(charIndex => {\n      r.unshift(chars[charIndex]);\n    });\n    let increment = true;\n\n    for (let i = 0; i < nextCharIndices.length; i++) {\n      const val = ++nextCharIndices[i];\n\n      if (val >= chars.length) {\n        nextCharIndices[i] = 0;\n      } else {\n        increment = false;\n        break;\n      }\n    }\n\n    if (increment) {\n      nextCharIndices.push(0);\n    }\n\n    return r.join(\"\");\n  }\n\n  let nextScope;\n\n  do {\n    nextScope = next();\n  } while (prevScopes.includes(nextScope));\n\n  return nextScope;\n}\n\nfunction getSourceFromLoader(loader, level) {\n  const {\n    data\n  } = loader;\n  const source = Array.isArray(data) ? data[level || data.length - 1] : data;\n  return source;\n}\n\nfunction isRgb(loader) {\n  const source = getSourceFromLoader(loader);\n  const {\n    shape,\n    dtype,\n    labels\n  } = source;\n  const channelSize = shape[labels.indexOf(\"c\")];\n  return channelSize === 3 && dtype === \"Uint8\";\n} // src/app/state/hooks.js\n\n\nvar {\n  Provider: ViewConfigProviderLocal,\n  useStore: useViewConfigStoreLocal,\n  useStoreApi: useViewConfigStoreApiLocal\n} = createContext();\nvar ViewConfigProvider = ViewConfigProviderLocal;\nvar useViewConfigStore = useViewConfigStoreLocal;\nvar useViewConfigStoreApi = useViewConfigStoreApiLocal;\nvar {\n  Provider: AuxiliaryProviderLocal,\n  useStore: useAuxiliaryStoreLocal\n} = createContext();\nvar AuxiliaryProvider = AuxiliaryProviderLocal;\nvar useAuxiliaryStore = useAuxiliaryStoreLocal;\n\nvar createViewConfigStore = () => create(set => ({\n  viewConfig: null,\n  loaders: null,\n  setViewConfig: viewConfig => set({\n    viewConfig\n  }),\n  setLoaders: loaders => set({\n    loaders\n  }),\n  setCoordinationValue: _ref2 => {\n    let {\n      parameter,\n      scope,\n      value\n    } = _ref2;\n    return set(state => ({\n      viewConfig: __spreadProps(__spreadValues({}, state.viewConfig), {\n        coordinationSpace: __spreadProps(__spreadValues({}, state.viewConfig.coordinationSpace), {\n          [parameter]: __spreadProps(__spreadValues({}, state.viewConfig.coordinationSpace[parameter]), {\n            [scope]: value\n          })\n        })\n      })\n    }));\n  },\n  removeComponent: i => set(state => {\n    const newLayout = state.viewConfig.layout.slice();\n    newLayout.splice(i, 1);\n    return {\n      viewConfig: __spreadProps(__spreadValues({}, state.viewConfig), {\n        layout: newLayout\n      })\n    };\n  }),\n  changeLayout: newComponentProps => set(state => {\n    const newLayout = state.viewConfig.layout.slice();\n    newComponentProps.forEach(_ref3 => {\n      let [i, newProps] = _ref3;\n      newLayout[i] = __spreadValues(__spreadValues({}, newLayout[i]), newProps);\n    });\n    return {\n      viewConfig: __spreadProps(__spreadValues({}, state.viewConfig), {\n        layout: newLayout\n      })\n    };\n  })\n}));\n\nvar useComponentLayout = (component, scopes, coordinationScopes) => useViewConfigStore(state => state.viewConfig.layout.filter(l => l.component === component).filter(l => scopes.every(scope => l.coordinationScopes[scope] === coordinationScopes[scope])));\n\nvar createAuxiliaryStore = () => create(set => ({\n  auxiliaryStore: null,\n  setCoordinationValue: _ref4 => {\n    let {\n      parameter,\n      scope,\n      value\n    } = _ref4;\n    return set(state => ({\n      auxiliaryStore: __spreadProps(__spreadValues({}, state.auxiliaryStore), {\n        [parameter]: {\n          [scope]: value\n        }\n      })\n    }));\n  }\n}));\n\nvar useHoverStore = create(set => ({\n  componentHover: null,\n  setComponentHover: componentHover => set({\n    componentHover\n  })\n}));\nvar useWarnStore = create(set => ({\n  warning: null,\n  setWarning: warning => set({\n    warning\n  })\n}));\nvar useViewInfoStore = create(set => ({\n  viewInfo: {},\n  setComponentViewInfo: (uuid, viewInfo) => set(state => ({\n    viewInfo: __spreadProps(__spreadValues({}, state.viewInfo), {\n      [uuid]: viewInfo\n    })\n  }))\n}));\nvar useGridSizeStore = create(set => ({\n  resizeCount: {},\n  incrementResizeCount: () => set(state => ({\n    resizeCount: state.resizeCount + 1\n  }))\n}));\n\nfunction useCoordination(parameters, coordinationScopes) {\n  const setCoordinationValue = useViewConfigStore(state => state.setCoordinationValue);\n  const values = useViewConfigStore(state => {\n    const {\n      coordinationSpace\n    } = state.viewConfig;\n    return fromEntries(parameters.map(parameter => {\n      if (coordinationSpace && coordinationSpace[parameter]) {\n        const value = coordinationSpace[parameter][coordinationScopes[parameter]];\n        return [parameter, value];\n      }\n\n      return [parameter, void 0];\n    }));\n  }, shallow);\n  const setters = useMemo(() => fromEntries(parameters.map(parameter => {\n    const setterName = `set${capitalize(parameter)}`;\n\n    const setterFunc = value => setCoordinationValue({\n      parameter,\n      scope: coordinationScopes[parameter],\n      value\n    });\n\n    return [setterName, setterFunc];\n  })), [parameters, coordinationScopes]);\n  return [values, setters];\n}\n\nvar AUXILIARY_COORDINATION_TYPES_MAP = {\n  spatialRasterLayers: [\"rasterLayersCallbacks\", \"areLoadingRasterChannnels\"]\n};\n\nvar mapCoordinationScopes = coordinationScopes => {\n  const newCoordinationScopes = {};\n  Object.keys(coordinationScopes).forEach(key => {\n    const newCoordinationTypes = AUXILIARY_COORDINATION_TYPES_MAP[key] || [];\n    newCoordinationTypes.forEach(coordinationType => {\n      newCoordinationScopes[coordinationType || key] = coordinationScopes[key];\n    });\n  });\n  return newCoordinationScopes;\n};\n\nvar mapParameters = parameters => parameters.map(parameter => AUXILIARY_COORDINATION_TYPES_MAP[parameter]).filter(Boolean).flat();\n\nfunction useAuxiliaryCoordination(parameters, coordinationScopes) {\n  const setCoordinationValue = useAuxiliaryStore(state => state.setCoordinationValue);\n  const mappedCoordinationScopes = mapCoordinationScopes(coordinationScopes);\n  const mappedParameters = mapParameters(parameters);\n  const values = useAuxiliaryStore(state => {\n    const {\n      auxiliaryStore\n    } = state;\n    return fromEntries(mappedParameters.map(parameter => {\n      if (auxiliaryStore && auxiliaryStore[parameter]) {\n        const value = auxiliaryStore[parameter][mappedCoordinationScopes[parameter]];\n        return [parameter, value];\n      }\n\n      return [parameter, void 0];\n    }));\n  }, shallow);\n  const setters = useMemo(() => fromEntries(mappedParameters.map(parameter => {\n    const setterName = `set${capitalize(parameter)}`;\n\n    const setterFunc = value => setCoordinationValue({\n      parameter,\n      scope: mappedCoordinationScopes[parameter],\n      value\n    });\n\n    return [setterName, setterFunc];\n  })), [parameters, coordinationScopes]);\n  return [values, setters];\n}\n\nfunction useLoaders() {\n  return useViewConfigStore(state => state.loaders);\n}\n\nfunction useLayout() {\n  return useViewConfigStore(state => {\n    var _a2;\n\n    return (_a2 = state.viewConfig) == null ? void 0 : _a2.layout;\n  });\n}\n\nfunction useRemoveComponent() {\n  return useViewConfigStore(state => state.removeComponent);\n}\n\nfunction useChangeLayout() {\n  return useViewConfigStore(state => state.changeLayout);\n}\n\nfunction useSetLoaders() {\n  return useViewConfigStore(state => state.setLoaders);\n}\n\nfunction useSetViewConfig(viewConfigStoreApi) {\n  const setViewConfigRef = useRef(viewConfigStoreApi.getState().setViewConfig);\n  const setViewConfig = setViewConfigRef.current;\n  return setViewConfig;\n}\n\nfunction useComponentHover() {\n  return useHoverStore(state => state.componentHover);\n}\n\nfunction useSetComponentHover() {\n  return useHoverStore(state => state.setComponentHover);\n}\n\nfunction useWarning() {\n  return useWarnStore(state => state.warning);\n}\n\nfunction useSetWarning() {\n  return useWarnStore(state => state.setWarning);\n}\n\nfunction useComponentViewInfo(uuid) {\n  return useViewInfoStore(useCallback(state => state.viewInfo[uuid], [uuid]));\n}\n\nfunction useSetComponentViewInfo(uuid) {\n  const setViewInfoRef = useRef(useViewInfoStore.getState().setComponentViewInfo);\n\n  const setComponentViewInfo = viewInfo => setViewInfoRef.current(uuid, viewInfo);\n\n  return setComponentViewInfo;\n}\n\nfunction useGridResize() {\n  return useGridSizeStore(state => state.resizeCount);\n}\n\nfunction useEmitGridResize() {\n  return useGridSizeStore(state => state.incrementResizeCount);\n} // src/components/hooks.js\n\n\nfunction getWindowDimensions() {\n  const {\n    innerWidth: width,\n    innerHeight: height\n  } = window;\n  return {\n    width,\n    height\n  };\n}\n\nfunction useVitessceContainer(ref) {\n  return useCallback2(() => {\n    if (ref.current) {\n      return ref.current.closest(`.${VITESSCE_CONTAINER}`);\n    }\n\n    return null;\n  }, [ref]);\n}\n\nfunction useWindowDimensions() {\n  const [windowDimensions, setWindowDimensions] = useState(getWindowDimensions());\n  useEffect(() => {\n    function handleResize() {\n      setWindowDimensions(getWindowDimensions());\n    }\n\n    const onResizeDebounced = debounce(handleResize, 100, {\n      trailing: true\n    });\n    window.addEventListener(\"resize\", onResizeDebounced);\n    return () => window.removeEventListener(\"resize\", onResizeDebounced);\n  }, []);\n  return windowDimensions;\n}\n\nfunction useGridItemSize() {\n  const containerRef = useRef2();\n  const [height, setHeight] = useState();\n  const [width, setWidth] = useState();\n  const resizeCount = useGridResize();\n  const incrementResizeCount = useEmitGridResize();\n  useEffect(() => {\n    function onWindowResize() {\n      incrementResizeCount();\n    }\n\n    const onResizeDebounced = debounce(onWindowResize, 100, {\n      trailing: true\n    });\n    window.addEventListener(\"resize\", onResizeDebounced);\n    onWindowResize();\n    return () => {\n      window.removeEventListener(\"resize\", onResizeDebounced);\n    };\n  }, [incrementResizeCount]);\n  useEffect(() => {\n    if (!containerRef.current) return;\n    const container = containerRef.current;\n    const containerRect = container.getBoundingClientRect();\n    setHeight(containerRect.height);\n    setWidth(containerRect.width);\n  }, [resizeCount]);\n  return [width, height, containerRef];\n}\n\nfunction useDeckCanvasSize() {\n  const deckRef = useRef2();\n  const [height, setHeight] = useState();\n  const [width, setWidth] = useState();\n  const resizeCount = useGridResize();\n  const incrementResizeCount = useEmitGridResize();\n  useEffect(() => {\n    function onWindowResize() {\n      incrementResizeCount();\n    }\n\n    const onResizeDebounced = debounce(onWindowResize, 100, {\n      trailing: true\n    });\n    window.addEventListener(\"resize\", onResizeDebounced);\n    onWindowResize();\n    return () => {\n      window.removeEventListener(\"resize\", onResizeDebounced);\n    };\n  }, [incrementResizeCount]);\n  useEffect(() => {\n    if (!deckRef.current) return;\n    const {\n      canvas\n    } = deckRef.current.deck;\n    const canvasRect = canvas.getBoundingClientRect();\n    setHeight(canvasRect.height);\n    setWidth(canvasRect.width);\n  }, [resizeCount]);\n  return [width, height, deckRef];\n}\n\nfunction useReady(supportedItems) {\n  const items2 = supportedItems;\n  const [waiting, setWaiting] = useState(items2);\n  const setItemIsReady = useCallback2(readyItem => {\n    setWaiting(waitingItems => {\n      const nextWaitingItems = waitingItems.filter(item => item !== readyItem);\n      console.log(`cleared ${readyItem}; waiting on ${nextWaitingItems.length}: ${JSON.stringify(nextWaitingItems)}`);\n      return nextWaitingItems;\n    });\n  }, [setWaiting]);\n  const setItemIsNotReady = useCallback2(notReadyItem => {\n    setWaiting(waitingItems => {\n      const nextWaitingItems = [...waitingItems, notReadyItem];\n      console.log(`waiting on ${nextWaitingItems.length}: ${JSON.stringify(nextWaitingItems)}`);\n      return nextWaitingItems;\n    });\n  }, [setWaiting]);\n  const resetReadyItems = useCallback2(() => {\n    setWaiting(items2);\n    console.log(`waiting on ${items2.length}: ${JSON.stringify(items2)}`);\n  }, [setWaiting, items2]);\n  const isReady = waiting.length === 0;\n  return [isReady, setItemIsReady, setItemIsNotReady, resetReadyItems];\n}\n\nfunction useUrls() {\n  const [urls, setUrls] = useState([]);\n  const addUrl = useCallback2((url, name2) => {\n    if (url) {\n      setUrls(prev => [...prev, {\n        url,\n        name: name2\n      }]);\n    }\n  }, [setUrls]);\n  const resetUrls = useCallback2(() => {\n    setUrls([]);\n  }, [setUrls]);\n  return [urls, addUrl, resetUrls];\n}\n\nfunction useClosestVitessceContainerSize(ref) {\n  const [height, setHeight] = useState();\n  const [width, setWidth] = useState();\n  useEffect(() => {\n    function onWindowResize() {\n      if (ref.current) {\n        const {\n          clientHeight: componentHeight,\n          clientWidth: componentWidth\n        } = ref.current.closest(\".vitessce-container\");\n        setWidth(componentWidth);\n        setHeight(componentHeight);\n      }\n    }\n\n    const onResizeDebounced = debounce(onWindowResize, 100, {\n      trailing: true\n    });\n    window.addEventListener(\"resize\", onResizeDebounced);\n    onWindowResize();\n    return () => {\n      window.removeEventListener(\"resize\", onResizeDebounced);\n    };\n  }, [ref]);\n  return [width, height];\n}\n\nfunction useExpressionValueGetter(_ref5) {\n  let {\n    attrs,\n    expressionData\n  } = _ref5;\n  const cellIdMap = useMemo2(() => {\n    const result = {};\n\n    if (attrs && attrs.rows) {\n      for (let i = 0; i < attrs.rows.length; i++) {\n        result[attrs.rows[i]] = i;\n      }\n    }\n\n    return result;\n  }, [attrs]);\n  const getExpressionValue = useCallback2(entry => {\n    const cellId = entry[0];\n\n    if (cellIdMap && expressionData && expressionData[0]) {\n      const cellIndex = cellIdMap[cellId];\n      const val = expressionData[0][cellIndex];\n      return val;\n    }\n\n    return 0;\n  }, [cellIdMap, expressionData]);\n  return getExpressionValue;\n} // src/components/shared-mui/styles.js\n\n\nimport { makeStyles, createMuiTheme } from \"@material-ui/core/styles\";\nimport { grey } from \"@material-ui/core/colors\";\nvar styles = makeStyles(() => ({\n  paper: {\n    maxHeight: 200,\n    overflow: \"auto\"\n  },\n  container: {\n    position: \"relative\",\n    left: 0,\n    top: 0\n  },\n  span: {\n    width: \"70px\",\n    textAlign: \"center\",\n    paddingLeft: \"2px\",\n    paddingRight: \"2px\"\n  }\n}));\nvar muiTheme = {\n  dark: createMuiTheme({\n    palette: {\n      type: \"dark\",\n      primary: grey,\n      secondary: grey,\n      primaryBackground: \"#222222\",\n      primaryBackgroundHighlight: \"#000000\",\n      primaryBackgroundInput: \"#D3D3D3\",\n      primaryBackgroundDim: \"#333333\",\n      primaryBackgroundLight: \"#757575\",\n      primaryForeground: \"#D3D3D3\",\n      primaryForegroundDim: \"#000000\",\n      primaryForegroundActive: \"#9bb7d6\",\n      secondaryBackground: \"#000000\",\n      secondaryBackgroundDim: \"#444444\",\n      secondaryForeground: \"#D3D3D3\"\n    },\n    props: {\n      MuiButtonBase: {\n        disableRipple: true\n      }\n    }\n  }),\n  light: createMuiTheme({\n    palette: {\n      type: \"light\",\n      primary: grey,\n      secondary: grey,\n      primaryBackground: \"#F1F1F1\",\n      primaryBackgroundHighlight: \"#FFFFFF\",\n      primaryBackgroundInput: \"#FFFFFF\",\n      primaryBackgroundDim: \"#8A8A8A\",\n      primaryBackgroundLight: \"#e0e0e0\",\n      primaryForeground: \"#333333\",\n      primaryForegroundDim: \"#808080\",\n      primaryForegroundActive: \"#0074D9\",\n      secondaryBackground: \"#F1F1F1\",\n      secondaryBackgroundDim: \"#C0C0C0\",\n      secondaryForeground: \"#222222\"\n    },\n    props: {\n      MuiButtonBase: {\n        disableRipple: true\n      }\n    }\n  })\n}; // src/components/shared-mui/components.js\n\nfunction MuiSpan(props) {\n  const {\n    children\n  } = props;\n  const classes = styles();\n  return /* @__PURE__ */React2.createElement(\"span\", {\n    className: classes.span\n  }, children);\n}\n\nfunction PopperMenu(props) {\n  const {\n    buttonIcon,\n    open,\n    setOpen,\n    children,\n    buttonClassName\n  } = props;\n  const classes = styles();\n  const anchorRef = useRef3();\n\n  const handleClick = () => {\n    setOpen(prev => !prev);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  const id = open ? \"v-popover-menu\" : void 0;\n  const getTooltipContainer = useVitessceContainer(anchorRef);\n  return /* @__PURE__ */React2.createElement(\"div\", {\n    ref: anchorRef,\n    className: classes.container\n  }, /* @__PURE__ */React2.createElement(IconButton, {\n    \"aria-describedby\": id,\n    onClick: handleClick,\n    size: \"small\",\n    className: buttonClassName\n  }, buttonIcon), /* @__PURE__ */React2.createElement(Popper, {\n    id,\n    open,\n    anchorEl: anchorRef && anchorRef.current,\n    container: getTooltipContainer,\n    onClose: handleClose,\n    placement: \"bottom-end\",\n    transition: true\n  }, _ref6 => {\n    let {\n      TransitionProps\n    } = _ref6;\n    return /* @__PURE__ */React2.createElement(ClickAwayListener, {\n      onClickAway: handleClose\n    }, /* @__PURE__ */React2.createElement(Fade, __spreadProps(__spreadValues({}, TransitionProps), {\n      timeout: 100\n    }), /* @__PURE__ */React2.createElement(Paper, {\n      elevation: 4,\n      className: classes.paper\n    }, /* @__PURE__ */React2.createElement(MenuList, null, children))));\n  }));\n} // src/components/TitleInfo.js\n\n\nvar useStyles = makeStyles2(theme => ({\n  iconButton: {\n    border: \"none\",\n    marginLeft: 0,\n    background: \"none\",\n    color: theme.palette.primaryForeground,\n    paddingLeft: \"0.25em\",\n    paddingRight: \"0.25em\",\n    borderRadius: \"2px\",\n    \"&:hover\": {\n      backgroundColor: theme.palette.primaryBackgroundLight\n    },\n    \"&:first-child\": {\n      marginLeft: \"0.25em\"\n    },\n    \"&:last-child\": {\n      marginRight: \"0.25em\"\n    },\n    \"& svg\": {\n      width: \"0.7em\",\n      height: \"0.7em\",\n      verticalAlign: \"middle\",\n      overflow: \"visible\"\n    }\n  },\n  downloadLink: {\n    color: theme.palette.primaryForeground\n  }\n}));\n\nfunction SettingsIconWithArrow(_ref7) {\n  let {\n    open\n  } = _ref7;\n  return /* @__PURE__ */React3.createElement(React3.Fragment, null, /* @__PURE__ */React3.createElement(SettingsIcon, null), open ? /* @__PURE__ */React3.createElement(ArrowDropUpIcon, null) : /* @__PURE__ */React3.createElement(ArrowDropDownIcon, null));\n}\n\nfunction PlotOptions(props) {\n  const {\n    options\n  } = props;\n  const [open, setOpen] = useState2(false);\n  const classes = useStyles();\n  return /* @__PURE__ */React3.createElement(PopperMenu, {\n    open,\n    setOpen,\n    buttonIcon: /* @__PURE__ */React3.createElement(SettingsIconWithArrow, {\n      open\n    }),\n    buttonClassName: classes.iconButton,\n    placement: \"bottom-end\"\n  }, options);\n}\n\nfunction CloudDownloadIconWithArrow(_ref8) {\n  let {\n    open\n  } = _ref8;\n  return /* @__PURE__ */React3.createElement(React3.Fragment, null, /* @__PURE__ */React3.createElement(CloudDownloadIcon, null), open ? /* @__PURE__ */React3.createElement(ArrowDropUpIcon, null) : /* @__PURE__ */React3.createElement(ArrowDropDownIcon, null));\n}\n\nfunction DownloadOptions(props) {\n  const {\n    urls\n  } = props;\n  const [open, setOpen] = useState2(false);\n  const classes = useStyles();\n  return /* @__PURE__ */React3.createElement(PopperMenu, {\n    open,\n    setOpen,\n    buttonIcon: /* @__PURE__ */React3.createElement(CloudDownloadIconWithArrow, {\n      open\n    }),\n    buttonClassName: classes.iconButton,\n    placement: \"bottom-end\"\n  }, urls.map(_ref9 => {\n    let {\n      url,\n      name: name2\n    } = _ref9;\n    return /* @__PURE__ */React3.createElement(MenuItem, {\n      dense: true,\n      key: url\n    }, /* @__PURE__ */React3.createElement(Link, {\n      underline: \"none\",\n      href: url,\n      target: \"_blank\",\n      rel: \"noopener\",\n      className: classes.downloadLink\n    }, \"Download \", name2));\n  }));\n}\n\nfunction ClosePaneButton(props) {\n  const {\n    removeGridComponent\n  } = props;\n  const classes = useStyles();\n  return /* @__PURE__ */React3.createElement(IconButton2, {\n    onClick: removeGridComponent,\n    size: \"small\",\n    className: classes.iconButton,\n    title: \"close\"\n  }, /* @__PURE__ */React3.createElement(CloseIcon, null));\n}\n\nfunction TitleInfo(props) {\n  const {\n    title: title16,\n    info,\n    children,\n    isScroll,\n    isSpatial,\n    removeGridComponent,\n    urls,\n    isReady,\n    options\n  } = props;\n  const childClassName = isScroll ? SCROLL_CARD : isSpatial ? BLACK_CARD : SECONDARY_CARD;\n  return /* @__PURE__ */React3.createElement(React3.Fragment, null, /* @__PURE__ */React3.createElement(\"div\", {\n    className: \"title\"\n  }, /* @__PURE__ */React3.createElement(\"div\", {\n    className: \"title-left\"\n  }, title16), /* @__PURE__ */React3.createElement(\"div\", {\n    className: \"title-info\",\n    title: info\n  }, info), /* @__PURE__ */React3.createElement(\"div\", {\n    className: \"title-buttons\"\n  }, options && /* @__PURE__ */React3.createElement(PlotOptions, {\n    options\n  }), urls && urls.length > 0 && /* @__PURE__ */React3.createElement(DownloadOptions, {\n    urls\n  }), /* @__PURE__ */React3.createElement(ClosePaneButton, {\n    removeGridComponent\n  }))), /* @__PURE__ */React3.createElement(\"div\", {\n    className: childClassName\n  }, !isReady && /* @__PURE__ */React3.createElement(LoadingIndicator, null), children));\n} // src/components/utils.js\n\n\nimport React4 from \"react\";\nimport { COORDINATE_SYSTEM } from \"@deck.gl/core\"; // src/schemas/cell-sets.schema.json\n\nvar $schema = \"http://json-schema.org/draft-07/schema#\";\nvar $id = \"https://github.com/vitessce/vitessce/#cell-sets\";\nvar title = \"Vitessce cell sets data\";\nvar type = \"object\";\nvar definitions = {\n  stringArray: {\n    type: \"array\",\n    items: {\n      type: \"string\"\n    }\n  },\n  stringProbabilityTupleArray: {\n    type: \"array\",\n    items: {\n      type: \"array\",\n      additionalItems: false,\n      items: [{\n        type: \"string\"\n      }, {\n        oneOf: [{\n          type: \"number\",\n          minimum: 0,\n          maximum: 1\n        }, {\n          type: \"null\"\n        }]\n      }]\n    }\n  },\n  colorArray: {\n    type: \"array\",\n    items: {\n      type: \"integer\",\n      minimum: 0,\n      maximum: 255\n    },\n    minItems: 3,\n    maxItems: 3\n  },\n  treeNodeLeaf: {\n    type: \"object\",\n    additionalProperties: false,\n    required: [\"name\"],\n    properties: {\n      name: {\n        type: \"string\"\n      },\n      color: {\n        $ref: \"#/definitions/colorArray\"\n      },\n      set: {\n        $ref: \"#/definitions/stringArray\"\n      }\n    }\n  },\n  treeNodeNonLeaf: {\n    type: \"object\",\n    additionalProperties: false,\n    required: [\"name\"],\n    properties: {\n      name: {\n        type: \"string\"\n      },\n      color: {\n        $ref: \"#/definitions/colorArray\"\n      },\n      children: {\n        type: \"array\",\n        items: {\n          $ref: \"#/definitions/treeNode\"\n        }\n      }\n    }\n  },\n  treeNode: {\n    oneOf: [{\n      $ref: \"#/definitions/treeNodeNonLeaf\"\n    }, {\n      $ref: \"#/definitions/treeNodeLeaf\"\n    }]\n  },\n  \"version0.1.2\": {\n    type: \"object\",\n    additionalProperties: false,\n    required: [\"version\", \"datatype\", \"tree\"],\n    properties: {\n      dataset: {\n        type: \"string\"\n      },\n      version: {\n        type: \"string\",\n        enum: [\"0.1.2\"]\n      },\n      datatype: {\n        type: \"string\",\n        enum: [\"cell\"]\n      },\n      tree: {\n        type: \"array\",\n        items: {\n          $ref: \"#/definitions/treeNodeNonLeaf\"\n        }\n      }\n    }\n  },\n  treeNodeLeafProbabilistic: {\n    type: \"object\",\n    additionalProperties: false,\n    required: [\"name\"],\n    properties: {\n      name: {\n        type: \"string\"\n      },\n      color: {\n        $ref: \"#/definitions/colorArray\"\n      },\n      set: {\n        $ref: \"#/definitions/stringProbabilityTupleArray\"\n      }\n    }\n  },\n  treeNodeNonLeafProbabilistic: {\n    type: \"object\",\n    additionalProperties: false,\n    required: [\"name\"],\n    properties: {\n      name: {\n        type: \"string\"\n      },\n      color: {\n        $ref: \"#/definitions/colorArray\"\n      },\n      children: {\n        type: \"array\",\n        items: {\n          $ref: \"#/definitions/treeNodeProbabilistic\"\n        }\n      }\n    }\n  },\n  treeNodeProbabilistic: {\n    oneOf: [{\n      $ref: \"#/definitions/treeNodeNonLeafProbabilistic\"\n    }, {\n      $ref: \"#/definitions/treeNodeLeafProbabilistic\"\n    }]\n  },\n  \"version0.1.3\": {\n    type: \"object\",\n    additionalProperties: false,\n    required: [\"version\", \"datatype\", \"tree\"],\n    properties: {\n      dataset: {\n        type: \"string\"\n      },\n      version: {\n        type: \"string\",\n        enum: [\"0.1.3\"]\n      },\n      datatype: {\n        type: \"string\",\n        enum: [\"cell\"]\n      },\n      tree: {\n        type: \"array\",\n        items: {\n          $ref: \"#/definitions/treeNodeNonLeafProbabilistic\"\n        }\n      }\n    }\n  }\n};\nvar oneOf = [{\n  $ref: \"#/definitions/version0.1.2\"\n}, {\n  $ref: \"#/definitions/version0.1.3\"\n}];\nvar cell_sets_schema_default = {\n  $schema,\n  $id,\n  title,\n  type,\n  definitions,\n  oneOf\n}; // src/schemas/cell-sets-tabular.schema.json\n\nvar $schema2 = \"http://json-schema.org/draft-07/schema#\";\nvar $id2 = \"https://github.com/vitessce/vitessce/#cell-sets-tabular\";\nvar title2 = \"Vitessce cell sets data, tabular format\";\nvar definitions2 = {\n  colorArray: {\n    type: \"array\",\n    items: {\n      type: \"integer\",\n      minimum: 0,\n      maximum: 255\n    },\n    minItems: 3,\n    maxItems: 3\n  }\n};\nvar type2 = \"array\";\nvar items = {\n  type: \"object\",\n  additionalProperties: false,\n  required: [\"groupName\", \"setName\", \"obsId\"],\n  properties: {\n    groupName: {\n      type: \"string\"\n    },\n    setName: {\n      type: \"string\"\n    },\n    setColor: {\n      $ref: \"#/definitions/colorArray\"\n    },\n    obsId: {\n      type: \"string\"\n    },\n    predictionScore: {\n      oneOf: [{\n        type: \"number\",\n        minimum: 0,\n        maximum: 1\n      }, {\n        type: \"null\"\n      }]\n    }\n  }\n};\nvar cell_sets_tabular_schema_default = {\n  $schema: $schema2,\n  $id: $id2,\n  title: title2,\n  definitions: definitions2,\n  type: type2,\n  items\n}; // src/components/sets/constants.js\n\nvar FILE_EXTENSION_JSON = \"json\";\nvar MIME_TYPE_JSON = \"application/json\";\nvar FILE_EXTENSION_TABULAR = \"csv\";\nvar MIME_TYPE_TABULAR = \"text/csv\";\nvar SEPARATOR_TABULAR = \",\";\nvar NA_VALUE_TABULAR = \"NA\";\nvar SETS_DATATYPE_CELL = \"cell\";\nvar HIERARCHICAL_SCHEMAS = {\n  cell: {\n    latestVersion: \"0.1.3\",\n    schema: cell_sets_schema_default\n  }\n};\nvar TABULAR_SCHEMAS = {\n  cell: {\n    schema: cell_sets_tabular_schema_default\n  }\n}; // src/components/utils.js\n\nfunction makeCellStatusMessage(cellInfoFactors) {\n  return Object.entries(cellInfoFactors).map(_ref10 => {\n    let [factor, value] = _ref10;\n    return `${factor}: ${value}`;\n  }).join(\"; \");\n}\n\nfunction cellLayerDefaultProps(cells, updateStatus, setCellHighlight, setComponentHover) {\n  return {\n    coordinateSystem: COORDINATE_SYSTEM.CARTESIAN,\n    data: cells,\n    pickable: true,\n    autoHighlight: true,\n    stroked: true,\n    filled: true,\n    getElevation: 0,\n    onHover: info => {\n      if (setComponentHover) {\n        setComponentHover();\n      }\n\n      if (info.object) {\n        const [cellId, cellInfo] = info.object;\n        const {\n          factors = {}\n        } = cellInfo;\n\n        if (updateStatus) {\n          updateStatus(makeCellStatusMessage(factors));\n        }\n\n        if (setCellHighlight) {\n          setCellHighlight(cellId);\n        }\n      } else if (setCellHighlight) {\n        setCellHighlight(\"\");\n      }\n    }\n  };\n}\n\nvar DEFAULT_DARK_COLOR = [50, 50, 50];\nvar DEFAULT_LIGHT_COLOR = [200, 200, 200];\n\nfunction getDefaultColor(theme) {\n  return theme === \"dark\" ? DEFAULT_DARK_COLOR : DEFAULT_LIGHT_COLOR;\n}\n\nvar PALETTE = [[68, 119, 170], [136, 204, 238], [68, 170, 153], [17, 119, 51], [153, 153, 51], [221, 204, 119], [204, 102, 119], [136, 34, 85], [170, 68, 153]];\nvar VIEWER_PALETTE = [[0, 0, 255], [0, 255, 0], [255, 0, 255], [255, 255, 0], [0, 255, 255], [255, 255, 255], [255, 128, 0], [255, 0, 0]];\nvar COLORMAP_OPTIONS = [\"viridis\", \"greys\", \"magma\", \"jet\", \"hot\", \"bone\", \"copper\", \"summer\", \"density\", \"inferno\"];\nvar DEFAULT_GL_OPTIONS = {\n  webgl2: true\n};\n\nfunction createDefaultUpdateCellsHover(componentName) {\n  return hoverInfo => console.warn(`${componentName} updateCellsHover: ${hoverInfo.cellId}`);\n}\n\nfunction createDefaultUpdateGenesHover(componentName) {\n  return hoverInfo => console.warn(`${componentName} updateGenesHover: ${hoverInfo.geneId}`);\n}\n\nfunction createDefaultUpdateViewInfo(componentName) {\n  return viewInfo => console.warn(`${componentName} updateViewInfo: ${viewInfo}`);\n}\n\nfunction copyUint8Array(arr) {\n  const newBuffer = new ArrayBuffer(arr.buffer.byteLength);\n  const newArr = new Uint8Array(newBuffer);\n  newArr.set(arr);\n  return newArr;\n}\n\nfunction getNextNumberedNodeName(nodes, prefix) {\n  let i = 1;\n\n  if (nodes) {\n    while (nodes.find(n => n.name === `${prefix}${i}`)) {\n      i++;\n    }\n  }\n\n  return `${prefix}${i}`;\n}\n\nfunction setCellSelection(cellSelection, additionalCellSets, cellSetColor, setCellSetSelection, setAdditionalCellSets, setCellSetColor, setCellColorEncoding) {\n  let prefix = arguments.length > 7 && arguments[7] !== undefined ? arguments[7] : \"Selection \";\n  const CELL_SELECTIONS_LEVEL_ZERO_NAME = \"My Selections\";\n  const selectionsLevelZeroNode = additionalCellSets == null ? void 0 : additionalCellSets.tree.find(n => n.name === CELL_SELECTIONS_LEVEL_ZERO_NAME);\n  const nextAdditionalCellSets = {\n    version: HIERARCHICAL_SCHEMAS[SETS_DATATYPE_CELL].latestVersion,\n    datatype: SETS_DATATYPE_CELL,\n    tree: [...(additionalCellSets ? additionalCellSets.tree : [])]\n  };\n  const nextName = getNextNumberedNodeName(selectionsLevelZeroNode == null ? void 0 : selectionsLevelZeroNode.children, prefix);\n  let colorIndex = 0;\n\n  if (selectionsLevelZeroNode) {\n    colorIndex = selectionsLevelZeroNode.children.length;\n    selectionsLevelZeroNode.children.push({\n      name: nextName,\n      set: cellSelection.map(d => [d, null])\n    });\n  } else {\n    nextAdditionalCellSets.tree.push({\n      name: CELL_SELECTIONS_LEVEL_ZERO_NAME,\n      children: [{\n        name: nextName,\n        set: cellSelection.map(d => [d, null])\n      }]\n    });\n  }\n\n  setAdditionalCellSets(nextAdditionalCellSets);\n  const nextPath = [\"My Selections\", nextName];\n  setCellSetColor([...(cellSetColor || []), {\n    path: nextPath,\n    color: PALETTE[colorIndex % PALETTE.length]\n  }]);\n  setCellSetSelection([nextPath]);\n  setCellColorEncoding(\"cellSetSelection\");\n}\n\nfunction mergeCellSets(cellSets, additionalCellSets) {\n  return {\n    version: HIERARCHICAL_SCHEMAS[SETS_DATATYPE_CELL].latestVersion,\n    datatype: SETS_DATATYPE_CELL,\n    tree: [...(cellSets ? cellSets.tree : []), ...(additionalCellSets ? additionalCellSets.tree : [])]\n  };\n}\n\nfunction createWarningComponent(props) {\n  return () => {\n    const {\n      title: title16,\n      message\n    } = props;\n    return /* @__PURE__ */React4.createElement(\"div\", {\n      className: PRIMARY_CARD\n    }, /* @__PURE__ */React4.createElement(\"h1\", null, title16), /* @__PURE__ */React4.createElement(\"div\", null, message));\n  };\n}\n\nfunction asEsModule(component) {\n  return {\n    __esModule: true,\n    default: component\n  };\n}\n\nfunction formatBytes(bytes) {\n  let decimals = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 2;\n  if (bytes === 0) return \"0 Bytes\";\n  const k = 1024;\n  const dm = decimals < 0 ? 0 : decimals;\n  const sizes = [\"Bytes\", \"KB\", \"MB\", \"GB\"];\n  const i = Math.floor(Math.log(bytes) / Math.log(k));\n  return `${parseFloat((bytes / Math.pow(k, i)).toFixed(dm))} ${sizes[i]}`;\n}\n\nvar getStatsForResolution = (loader, resolution) => {\n  const {\n    shape,\n    labels\n  } = loader[resolution];\n  const height = shape[labels.indexOf(\"y\")];\n  const width = shape[labels.indexOf(\"x\")];\n  const depth = shape[labels.indexOf(\"z\")];\n  const depthDownsampled = Math.max(1, depth >> resolution);\n  const totalBytes = 4 * height * width * depthDownsampled;\n  return {\n    height,\n    width,\n    depthDownsampled,\n    totalBytes\n  };\n};\n\nvar canLoadResolution = (loader, resolution) => {\n  var _a2, _b2, _c;\n\n  const {\n    totalBytes,\n    height,\n    width,\n    depthDownsampled\n  } = getStatsForResolution(loader, resolution);\n  const maxHeapSize = ((_a2 = window.performance) == null ? void 0 : _a2.memory) && ((_c = (_b2 = window.performance) == null ? void 0 : _b2.memory) == null ? void 0 : _c.jsHeapSizeLimit) / 2;\n  const maxSize = maxHeapSize || __pow(2, 31) - 1;\n  return totalBytes < maxSize && height <= 2048 && depthDownsampled <= 2048 && width <= 2048 && depthDownsampled > 1;\n}; // src/components/data-hooks.js\n\n\nimport { useState as useState4, useEffect as useEffect2 } from \"react\";\nimport equal2 from \"fast-deep-equal\"; // src/loaders/errors/AbstractLoaderError.js\n\nvar AbstractLoaderError = class {\n  constructor(message) {\n    this.message = message;\n  }\n\n  warnInConsole() {\n    throw new Error(\"The warnInConsole() method has not been implemented.\");\n  }\n\n}; // src/loaders/errors/LoaderValidationError.js\n\nvar LoaderValidationError = class extends AbstractLoaderError {\n  constructor(datasetType, datasetFileType, datasetUrl, reason) {\n    super(`Error while validating ${datasetType}.`);\n    this.name = \"LoaderValidationError\";\n    this.datasetType = datasetType;\n    this.datasetFileType = datasetFileType;\n    this.datasetUrl = datasetUrl;\n    this.reason = reason;\n  }\n\n  warnInConsole() {\n    const {\n      datasetType,\n      datasetUrl,\n      reason\n    } = this;\n    console.warn(`${datasetType} from ${datasetUrl}: validation failed`, JSON.stringify(reason, null, 2));\n  }\n\n}; // src/loaders/errors/LoaderNotFoundError.js\n\nvar LoaderNotFoundError = class extends AbstractLoaderError {\n  constructor(datasetType, datasetFileType, datasetUrl) {\n    super(`Error finding loader for ${datasetType}.`);\n    this.name = \"LoaderNotFoundError\";\n    this.datasetType = datasetType;\n    this.datasetFileType = datasetFileType;\n    this.datasetUrl = datasetUrl;\n  }\n\n  warnInConsole() {\n    const {\n      datasetType,\n      datasetFileType,\n      datasetUrl\n    } = this;\n\n    if (datasetFileType && datasetUrl) {\n      console.warn(`${datasetType} from ${datasetUrl}: unable to find loader for fileType ${datasetFileType}`);\n    } else {\n      console.warn(`${datasetType}: unable to find loader`);\n    }\n  }\n\n}; // node_modules/@hms-dbmi/viv/dist/viv.es.js\n\nimport { COORDINATE_SYSTEM as COORDINATE_SYSTEM2, Layer, project32, picking, CompositeLayer, OrthographicView, Controller, OrbitView } from \"@deck.gl/core\";\nimport { Matrix4 } from \"math.gl\";\nimport GL from \"@luma.gl/constants\";\nimport { TileLayer } from \"@deck.gl/geo-layers\";\nimport { Model, Geometry, Texture2D, isWebGL2, Texture3D } from \"@luma.gl/core\";\nimport { hasFeature, FEATURES } from \"@luma.gl/webgl\";\nimport { BitmapLayer as BitmapLayer$1, PolygonLayer, LineLayer, TextLayer } from \"@deck.gl/layers\";\nimport quickselect from \"quickselect\";\nimport { Plane } from \"@math.gl/culling\";\nimport React5, { PureComponent, useState as useState3, useMemo as useMemo3 } from \"react\";\nimport DeckGL from \"@deck.gl/react\";\nimport equal from \"fast-deep-equal\";\nimport { fromUrl, fromBlob } from \"geotiff\";\nimport parser from \"fast-xml-parser\";\nimport { KeyError, openGroup, BoundsCheckError, slice, HTTPStore } from \"zarr\";\nvar fsColormap1 = \"#define SHADER_NAME xr-layer-fragment-shader-colormap\\nprecision highp float;\\n#define GLSLIFY 1\\nuniform sampler2D channel0;uniform sampler2D channel1;uniform sampler2D channel2;uniform sampler2D channel3;uniform sampler2D channel4;uniform sampler2D channel5;uniform vec2 contrastLimits[6];uniform float opacity;uniform float divisor;uniform bool useTransparentColor;varying vec2 vTexCoord;void main(){float intensityValue0=sample_and_apply_contrast_limits(channel0,vTexCoord,contrastLimits[0]);float intensityValue1=sample_and_apply_contrast_limits(channel1,vTexCoord,contrastLimits[1]);float intensityValue2=sample_and_apply_contrast_limits(channel2,vTexCoord,contrastLimits[2]);float intensityValue3=sample_and_apply_contrast_limits(channel3,vTexCoord,contrastLimits[3]);float intensityValue4=sample_and_apply_contrast_limits(channel4,vTexCoord,contrastLimits[4]);float intensityValue5=sample_and_apply_contrast_limits(channel5,vTexCoord,contrastLimits[5]);float intensityCombo=0.;intensityCombo+=max(0.,intensityValue0);intensityCombo+=max(0.,intensityValue1);intensityCombo+=max(0.,intensityValue2);intensityCombo+=max(0.,intensityValue3);intensityCombo+=max(0.,intensityValue4);intensityCombo+=max(0.,intensityValue5);gl_FragColor=colormap(intensityCombo,opacity,useTransparentColor);geometry.uv=vTexCoord;DECKGL_FILTER_COLOR(gl_FragColor,geometry);}\";\nvar fsColormap2 = \"#version 300 es\\n#define SHADER_NAME xr-layer-fragment-shader\\nprecision highp float;precision highp int;precision highp SAMPLER_TYPE;\\n#define GLSLIFY 1\\nuniform SAMPLER_TYPE channel0;uniform SAMPLER_TYPE channel1;uniform SAMPLER_TYPE channel2;uniform SAMPLER_TYPE channel3;uniform SAMPLER_TYPE channel4;uniform SAMPLER_TYPE channel5;uniform vec2 contrastLimits[6];uniform float opacity;uniform bool useTransparentColor;in vec2 vTexCoord;out vec4 color;void main(){float intensityValue0=sample_and_apply_contrast_limits(channel0,vTexCoord,contrastLimits[0]);float intensityValue1=sample_and_apply_contrast_limits(channel1,vTexCoord,contrastLimits[1]);float intensityValue2=sample_and_apply_contrast_limits(channel2,vTexCoord,contrastLimits[2]);float intensityValue3=sample_and_apply_contrast_limits(channel3,vTexCoord,contrastLimits[3]);float intensityValue4=sample_and_apply_contrast_limits(channel4,vTexCoord,contrastLimits[4]);float intensityValue5=sample_and_apply_contrast_limits(channel5,vTexCoord,contrastLimits[5]);float intensityArray[6]=float[6](intensityValue0,intensityValue1,intensityValue2,intensityValue3,intensityValue4,intensityValue5);float intensityCombo=0.;for(int i=0;i<6;i++){intensityCombo+=max(0.,intensityArray[i]);}color=colormap(intensityCombo,opacity,useTransparentColor);geometry.uv=vTexCoord;DECKGL_FILTER_COLOR(color,geometry);}\";\nvar fs1 = \"#define SHADER_NAME xr-layer-fragment-shader\\nprecision highp float;\\n#define GLSLIFY 1\\nuniform sampler2D channel0;uniform sampler2D channel1;uniform sampler2D channel2;uniform sampler2D channel3;uniform sampler2D channel4;uniform sampler2D channel5;uniform vec2 contrastLimits[6];uniform vec3 colors[6];uniform float intensityArray[6];uniform float opacity;uniform float majorLensAxis;uniform float minorLensAxis;uniform vec2 lensCenter;uniform bool isLensOn;uniform int lensSelection;uniform vec3 lensBorderColor;uniform float lensBorderRadius;uniform vec3 transparentColor;uniform bool useTransparentColor;varying vec2 vTexCoord;void main(){float intensityValue0=sample_and_apply_contrast_limits(channel0,vTexCoord,contrastLimits[0]);float intensityValue1=sample_and_apply_contrast_limits(channel1,vTexCoord,contrastLimits[1]);float intensityValue2=sample_and_apply_contrast_limits(channel2,vTexCoord,contrastLimits[2]);float intensityValue3=sample_and_apply_contrast_limits(channel3,vTexCoord,contrastLimits[3]);float intensityValue4=sample_and_apply_contrast_limits(channel4,vTexCoord,contrastLimits[4]);float intensityValue5=sample_and_apply_contrast_limits(channel5,vTexCoord,contrastLimits[5]);bool isFragInLensBounds=frag_in_lens_bounds(lensCenter,vTexCoord,majorLensAxis,minorLensAxis,lensBorderRadius);bool isFragOnLensBounds=frag_on_lens_bounds(lensCenter,vTexCoord,majorLensAxis,minorLensAxis,lensBorderRadius);bool inLensAndUseLens=isLensOn&&isFragInLensBounds;vec3 rgbCombo=process_channel_intensity(intensityValue0,colors[0],0,inLensAndUseLens,lensSelection);rgbCombo+=process_channel_intensity(intensityValue1,colors[1],1,inLensAndUseLens,lensSelection);rgbCombo+=process_channel_intensity(intensityValue2,colors[2],2,inLensAndUseLens,lensSelection);rgbCombo+=process_channel_intensity(intensityValue3,colors[3],3,inLensAndUseLens,lensSelection);rgbCombo+=process_channel_intensity(intensityValue4,colors[4],4,inLensAndUseLens,lensSelection);rgbCombo+=process_channel_intensity(intensityValue5,colors[5],5,inLensAndUseLens,lensSelection);rgbCombo=(isLensOn&&isFragOnLensBounds)? lensBorderColor : rgbCombo;gl_FragColor=apply_opacity(rgbCombo,useTransparentColor,transparentColor,opacity);geometry.uv=vTexCoord;DECKGL_FILTER_COLOR(gl_FragColor,geometry);}\";\nvar fs2 = \"#version 300 es\\n#define SHADER_NAME xr-layer-fragment-shader\\nprecision highp float;precision highp int;precision highp SAMPLER_TYPE;\\n#define GLSLIFY 1\\nuniform SAMPLER_TYPE channel0;uniform SAMPLER_TYPE channel1;uniform SAMPLER_TYPE channel2;uniform SAMPLER_TYPE channel3;uniform SAMPLER_TYPE channel4;uniform SAMPLER_TYPE channel5;uniform vec2 contrastLimits[6];uniform vec3 colors[6];uniform float opacity;uniform float majorLensAxis;uniform float minorLensAxis;uniform vec2 lensCenter;uniform bool isLensOn;uniform int lensSelection;uniform vec3 lensBorderColor;uniform float lensBorderRadius;uniform vec3 transparentColor;uniform bool useTransparentColor;in vec2 vTexCoord;out vec4 color;void main(){float intensityValue0=sample_and_apply_contrast_limits(channel0,vTexCoord,contrastLimits[0]);float intensityValue1=sample_and_apply_contrast_limits(channel1,vTexCoord,contrastLimits[1]);float intensityValue2=sample_and_apply_contrast_limits(channel2,vTexCoord,contrastLimits[2]);float intensityValue3=sample_and_apply_contrast_limits(channel3,vTexCoord,contrastLimits[3]);float intensityValue4=sample_and_apply_contrast_limits(channel4,vTexCoord,contrastLimits[4]);float intensityValue5=sample_and_apply_contrast_limits(channel5,vTexCoord,contrastLimits[5]);float intensityArray[6]=float[6](intensityValue0,intensityValue1,intensityValue2,intensityValue3,intensityValue4,intensityValue5);bool isFragInLensBounds=frag_in_lens_bounds(lensCenter,vTexCoord,majorLensAxis,minorLensAxis,lensBorderRadius);bool isFragOnLensBounds=frag_on_lens_bounds(lensCenter,vTexCoord,majorLensAxis,minorLensAxis,lensBorderRadius);bool inLensAndUseLens=isLensOn&&isFragInLensBounds;vec3 rgbCombo=vec3(0.);for(int i=0;i<6;i++){rgbCombo+=process_channel_intensity(intensityArray[i],colors[i],i,inLensAndUseLens,lensSelection);}rgbCombo=(isLensOn&&isFragOnLensBounds)? lensBorderColor : rgbCombo;color=apply_opacity(rgbCombo,useTransparentColor,transparentColor,opacity);geometry.uv=vTexCoord;DECKGL_FILTER_COLOR(color,geometry);}\";\nvar vs1 = \"#define GLSLIFY 1\\n#define SHADER_NAME xr-layer-vertex-shader\\nattribute vec2 texCoords;attribute vec3 positions;attribute vec3 positions64Low;attribute vec3 instancePickingColors;varying vec2 vTexCoord;void main(void){geometry.worldPosition=positions;geometry.uv=texCoords;geometry.pickingColor=instancePickingColors;gl_Position=project_position_to_clipspace(positions,positions64Low,vec3(0.),geometry.position);DECKGL_FILTER_GL_POSITION(gl_Position,geometry);vTexCoord=texCoords;vec4 color=vec4(0.);DECKGL_FILTER_COLOR(color,geometry);}\";\nvar vs2 = \"#version 300 es\\n#define GLSLIFY 1\\n#define SHADER_NAME xr-layer-vertex-shader\\nin vec2 texCoords;in vec3 positions;in vec3 positions64Low;in vec3 instancePickingColors;out vec2 vTexCoord;void main(void){geometry.worldPosition=positions;geometry.uv=texCoords;geometry.pickingColor=instancePickingColors;gl_Position=project_position_to_clipspace(positions,positions64Low,vec3(0.),geometry.position);DECKGL_FILTER_GL_POSITION(gl_Position,geometry);vTexCoord=texCoords;vec4 color=vec4(0.);DECKGL_FILTER_COLOR(color,geometry);}\";\nvar fs$3 = \"#define GLSLIFY 1\\nvec4 jet(float x_17){const float e0=0.0;const vec4 v0=vec4(0,0,0.5137254901960784,1);const float e1=0.125;const vec4 v1=vec4(0,0.23529411764705882,0.6666666666666666,1);const float e2=0.375;const vec4 v2=vec4(0.0196078431372549,1,1,1);const float e3=0.625;const vec4 v3=vec4(1,1,0,1);const float e4=0.875;const vec4 v4=vec4(0.9803921568627451,0,0,1);const float e5=1.0;const vec4 v5=vec4(0.5019607843137255,0,0,1);float a0=smoothstep(e0,e1,x_17);float a1=smoothstep(e1,e2,x_17);float a2=smoothstep(e2,e3,x_17);float a3=smoothstep(e3,e4,x_17);float a4=smoothstep(e4,e5,x_17);return max(mix(v0,v1,a0)*step(e0,x_17)*step(x_17,e1),max(mix(v1,v2,a1)*step(e1,x_17)*step(x_17,e2),max(mix(v2,v3,a2)*step(e2,x_17)*step(x_17,e3),max(mix(v3,v4,a3)*step(e3,x_17)*step(x_17,e4),mix(v4,v5,a4)*step(e4,x_17)*step(x_17,e5)))));}vec4 hsv(float x_18){const float e0=0.0;const vec4 v0=vec4(1,0,0,1);const float e1=0.169;const vec4 v1=vec4(0.9921568627450981,1,0.00784313725490196,1);const float e2=0.173;const vec4 v2=vec4(0.9686274509803922,1,0.00784313725490196,1);const float e3=0.337;const vec4 v3=vec4(0,0.9882352941176471,0.01568627450980392,1);const float e4=0.341;const vec4 v4=vec4(0,0.9882352941176471,0.0392156862745098,1);const float e5=0.506;const vec4 v5=vec4(0.00392156862745098,0.9764705882352941,1,1);const float e6=0.671;const vec4 v6=vec4(0.00784313725490196,0,0.9921568627450981,1);const float e7=0.675;const vec4 v7=vec4(0.03137254901960784,0,0.9921568627450981,1);const float e8=0.839;const vec4 v8=vec4(1,0,0.984313725490196,1);const float e9=0.843;const vec4 v9=vec4(1,0,0.9607843137254902,1);const float e10=1.0;const vec4 v10=vec4(1,0,0.023529411764705882,1);float a0=smoothstep(e0,e1,x_18);float a1=smoothstep(e1,e2,x_18);float a2=smoothstep(e2,e3,x_18);float a3=smoothstep(e3,e4,x_18);float a4=smoothstep(e4,e5,x_18);float a5=smoothstep(e5,e6,x_18);float a6=smoothstep(e6,e7,x_18);float a7=smoothstep(e7,e8,x_18);float a8=smoothstep(e8,e9,x_18);float a9=smoothstep(e9,e10,x_18);return max(mix(v0,v1,a0)*step(e0,x_18)*step(x_18,e1),max(mix(v1,v2,a1)*step(e1,x_18)*step(x_18,e2),max(mix(v2,v3,a2)*step(e2,x_18)*step(x_18,e3),max(mix(v3,v4,a3)*step(e3,x_18)*step(x_18,e4),max(mix(v4,v5,a4)*step(e4,x_18)*step(x_18,e5),max(mix(v5,v6,a5)*step(e5,x_18)*step(x_18,e6),max(mix(v6,v7,a6)*step(e6,x_18)*step(x_18,e7),max(mix(v7,v8,a7)*step(e7,x_18)*step(x_18,e8),max(mix(v8,v9,a8)*step(e8,x_18)*step(x_18,e9),mix(v9,v10,a9)*step(e9,x_18)*step(x_18,e10))))))))));}vec4 hot(float x_13){const float e0=0.0;const vec4 v0=vec4(0,0,0,1);const float e1=0.3;const vec4 v1=vec4(0.9019607843137255,0,0,1);const float e2=0.6;const vec4 v2=vec4(1,0.8235294117647058,0,1);const float e3=1.0;const vec4 v3=vec4(1,1,1,1);float a0=smoothstep(e0,e1,x_13);float a1=smoothstep(e1,e2,x_13);float a2=smoothstep(e2,e3,x_13);return max(mix(v0,v1,a0)*step(e0,x_13)*step(x_13,e1),max(mix(v1,v2,a1)*step(e1,x_13)*step(x_13,e2),mix(v2,v3,a2)*step(e2,x_13)*step(x_13,e3)));}vec4 cool(float x_24){const float e0=0.0;const vec4 v0=vec4(0.49019607843137253,0,0.7019607843137254,1);const float e1=0.13;const vec4 v1=vec4(0.4549019607843137,0,0.8549019607843137,1);const float e2=0.25;const vec4 v2=vec4(0.3843137254901961,0.2901960784313726,0.9294117647058824,1);const float e3=0.38;const vec4 v3=vec4(0.26666666666666666,0.5725490196078431,0.9058823529411765,1);const float e4=0.5;const vec4 v4=vec4(0,0.8,0.7725490196078432,1);const float e5=0.63;const vec4 v5=vec4(0,0.9686274509803922,0.5725490196078431,1);const float e6=0.75;const vec4 v6=vec4(0,1,0.34509803921568627,1);const float e7=0.88;const vec4 v7=vec4(0.1568627450980392,1,0.03137254901960784,1);const float e8=1.0;const vec4 v8=vec4(0.5764705882352941,1,0,1);float a0=smoothstep(e0,e1,x_24);float a1=smoothstep(e1,e2,x_24);float a2=smoothstep(e2,e3,x_24);float a3=smoothstep(e3,e4,x_24);float a4=smoothstep(e4,e5,x_24);float a5=smoothstep(e5,e6,x_24);float a6=smoothstep(e6,e7,x_24);float a7=smoothstep(e7,e8,x_24);return max(mix(v0,v1,a0)*step(e0,x_24)*step(x_24,e1),max(mix(v1,v2,a1)*step(e1,x_24)*step(x_24,e2),max(mix(v2,v3,a2)*step(e2,x_24)*step(x_24,e3),max(mix(v3,v4,a3)*step(e3,x_24)*step(x_24,e4),max(mix(v4,v5,a4)*step(e4,x_24)*step(x_24,e5),max(mix(v5,v6,a5)*step(e5,x_24)*step(x_24,e6),max(mix(v6,v7,a6)*step(e6,x_24)*step(x_24,e7),mix(v7,v8,a7)*step(e7,x_24)*step(x_24,e8))))))));}vec4 spring(float x_5){const float e0=0.0;const vec4 v0=vec4(1,0,1,1);const float e1=1.0;const vec4 v1=vec4(1,1,0,1);float a0=smoothstep(e0,e1,x_5);return mix(v0,v1,a0)*step(e0,x_5)*step(x_5,e1);}vec4 summer(float x_12){const float e0=0.0;const vec4 v0=vec4(0,0.5019607843137255,0.4,1);const float e1=1.0;const vec4 v1=vec4(1,1,0.4,1);float a0=smoothstep(e0,e1,x_12);return mix(v0,v1,a0)*step(e0,x_12)*step(x_12,e1);}vec4 autumn(float x_25){const float e0=0.0;const vec4 v0=vec4(1,0,0,1);const float e1=1.0;const vec4 v1=vec4(1,1,0,1);float a0=smoothstep(e0,e1,x_25);return mix(v0,v1,a0)*step(e0,x_25)*step(x_25,e1);}vec4 winter(float x_16){const float e0=0.0;const vec4 v0=vec4(0,0,1,1);const float e1=1.0;const vec4 v1=vec4(0,1,0.5019607843137255,1);float a0=smoothstep(e0,e1,x_16);return mix(v0,v1,a0)*step(e0,x_16)*step(x_16,e1);}vec4 bone(float x_15){const float e0=0.0;const vec4 v0=vec4(0,0,0,1);const float e1=0.376;const vec4 v1=vec4(0.32941176470588235,0.32941176470588235,0.4549019607843137,1);const float e2=0.753;const vec4 v2=vec4(0.6627450980392157,0.7843137254901961,0.7843137254901961,1);const float e3=1.0;const vec4 v3=vec4(1,1,1,1);float a0=smoothstep(e0,e1,x_15);float a1=smoothstep(e1,e2,x_15);float a2=smoothstep(e2,e3,x_15);return max(mix(v0,v1,a0)*step(e0,x_15)*step(x_15,e1),max(mix(v1,v2,a1)*step(e1,x_15)*step(x_15,e2),mix(v2,v3,a2)*step(e2,x_15)*step(x_15,e3)));}vec4 copper(float x_10){const float e0=0.0;const vec4 v0=vec4(0,0,0,1);const float e1=0.804;const vec4 v1=vec4(1,0.6274509803921569,0.4,1);const float e2=1.0;const vec4 v2=vec4(1,0.7803921568627451,0.4980392156862745,1);float a0=smoothstep(e0,e1,x_10);float a1=smoothstep(e1,e2,x_10);return max(mix(v0,v1,a0)*step(e0,x_10)*step(x_10,e1),mix(v1,v2,a1)*step(e1,x_10)*step(x_10,e2));}vec4 greys(float x_4){const float e0=0.0;const vec4 v0=vec4(0,0,0,1);const float e1=1.0;const vec4 v1=vec4(1,1,1,1);float a0=smoothstep(e0,e1,x_4);return mix(v0,v1,a0)*step(e0,x_4)*step(x_4,e1);}vec4 yignbu(float x_32){const float e0=0.0;const vec4 v0=vec4(0.03137254901960784,0.11372549019607843,0.34509803921568627,1);const float e1=0.125;const vec4 v1=vec4(0.1450980392156863,0.20392156862745098,0.5803921568627451,1);const float e2=0.25;const vec4 v2=vec4(0.13333333333333333,0.3686274509803922,0.6588235294117647,1);const float e3=0.375;const vec4 v3=vec4(0.11372549019607843,0.5686274509803921,0.7529411764705882,1);const float e4=0.5;const vec4 v4=vec4(0.2549019607843137,0.7137254901960784,0.7686274509803922,1);const float e5=0.625;const vec4 v5=vec4(0.4980392156862745,0.803921568627451,0.7333333333333333,1);const float e6=0.75;const vec4 v6=vec4(0.7803921568627451,0.9137254901960784,0.7058823529411765,1);const float e7=0.875;const vec4 v7=vec4(0.9294117647058824,0.9725490196078431,0.8509803921568627,1);const float e8=1.0;const vec4 v8=vec4(1,1,0.8509803921568627,1);float a0=smoothstep(e0,e1,x_32);float a1=smoothstep(e1,e2,x_32);float a2=smoothstep(e2,e3,x_32);float a3=smoothstep(e3,e4,x_32);float a4=smoothstep(e4,e5,x_32);float a5=smoothstep(e5,e6,x_32);float a6=smoothstep(e6,e7,x_32);float a7=smoothstep(e7,e8,x_32);return max(mix(v0,v1,a0)*step(e0,x_32)*step(x_32,e1),max(mix(v1,v2,a1)*step(e1,x_32)*step(x_32,e2),max(mix(v2,v3,a2)*step(e2,x_32)*step(x_32,e3),max(mix(v3,v4,a3)*step(e3,x_32)*step(x_32,e4),max(mix(v4,v5,a4)*step(e4,x_32)*step(x_32,e5),max(mix(v5,v6,a5)*step(e5,x_32)*step(x_32,e6),max(mix(v6,v7,a6)*step(e6,x_32)*step(x_32,e7),mix(v7,v8,a7)*step(e7,x_32)*step(x_32,e8))))))));}vec4 greens(float x_34){const float e0=0.0;const vec4 v0=vec4(0,0.26666666666666666,0.10588235294117647,1);const float e1=0.125;const vec4 v1=vec4(0,0.42745098039215684,0.17254901960784313,1);const float e2=0.25;const vec4 v2=vec4(0.13725490196078433,0.5450980392156862,0.27058823529411763,1);const float e3=0.375;const vec4 v3=vec4(0.2549019607843137,0.6705882352941176,0.36470588235294116,1);const float e4=0.5;const vec4 v4=vec4(0.4549019607843137,0.7686274509803922,0.4627450980392157,1);const float e5=0.625;const vec4 v5=vec4(0.6313725490196078,0.8509803921568627,0.6078431372549019,1);const float e6=0.75;const vec4 v6=vec4(0.7803921568627451,0.9137254901960784,0.7529411764705882,1);const float e7=0.875;const vec4 v7=vec4(0.8980392156862745,0.9607843137254902,0.8784313725490196,1);const float e8=1.0;const vec4 v8=vec4(0.9686274509803922,0.9882352941176471,0.9607843137254902,1);float a0=smoothstep(e0,e1,x_34);float a1=smoothstep(e1,e2,x_34);float a2=smoothstep(e2,e3,x_34);float a3=smoothstep(e3,e4,x_34);float a4=smoothstep(e4,e5,x_34);float a5=smoothstep(e5,e6,x_34);float a6=smoothstep(e6,e7,x_34);float a7=smoothstep(e7,e8,x_34);return max(mix(v0,v1,a0)*step(e0,x_34)*step(x_34,e1),max(mix(v1,v2,a1)*step(e1,x_34)*step(x_34,e2),max(mix(v2,v3,a2)*step(e2,x_34)*step(x_34,e3),max(mix(v3,v4,a3)*step(e3,x_34)*step(x_34,e4),max(mix(v4,v5,a4)*step(e4,x_34)*step(x_34,e5),max(mix(v5,v6,a5)*step(e5,x_34)*step(x_34,e6),max(mix(v6,v7,a6)*step(e6,x_34)*step(x_34,e7),mix(v7,v8,a7)*step(e7,x_34)*step(x_34,e8))))))));}vec4 yiorrd(float x_41){const float e0=0.0;const vec4 v0=vec4(0.5019607843137255,0,0.14901960784313725,1);const float e1=0.125;const vec4 v1=vec4(0.7411764705882353,0,0.14901960784313725,1);const float e2=0.25;const vec4 v2=vec4(0.8901960784313725,0.10196078431372549,0.10980392156862745,1);const float e3=0.375;const vec4 v3=vec4(0.9882352941176471,0.3058823529411765,0.16470588235294117,1);const float e4=0.5;const vec4 v4=vec4(0.9921568627450981,0.5529411764705883,0.23529411764705882,1);const float e5=0.625;const vec4 v5=vec4(0.996078431372549,0.6980392156862745,0.2980392156862745,1);const float e6=0.75;const vec4 v6=vec4(0.996078431372549,0.8509803921568627,0.4627450980392157,1);const float e7=0.875;const vec4 v7=vec4(1,0.9294117647058824,0.6274509803921569,1);const float e8=1.0;const vec4 v8=vec4(1,1,0.8,1);float a0=smoothstep(e0,e1,x_41);float a1=smoothstep(e1,e2,x_41);float a2=smoothstep(e2,e3,x_41);float a3=smoothstep(e3,e4,x_41);float a4=smoothstep(e4,e5,x_41);float a5=smoothstep(e5,e6,x_41);float a6=smoothstep(e6,e7,x_41);float a7=smoothstep(e7,e8,x_41);return max(mix(v0,v1,a0)*step(e0,x_41)*step(x_41,e1),max(mix(v1,v2,a1)*step(e1,x_41)*step(x_41,e2),max(mix(v2,v3,a2)*step(e2,x_41)*step(x_41,e3),max(mix(v3,v4,a3)*step(e3,x_41)*step(x_41,e4),max(mix(v4,v5,a4)*step(e4,x_41)*step(x_41,e5),max(mix(v5,v6,a5)*step(e5,x_41)*step(x_41,e6),max(mix(v6,v7,a6)*step(e6,x_41)*step(x_41,e7),mix(v7,v8,a7)*step(e7,x_41)*step(x_41,e8))))))));}vec4 bluered(float x_23){const float e0=0.0;const vec4 v0=vec4(0,0,1,1);const float e1=1.0;const vec4 v1=vec4(1,0,0,1);float a0=smoothstep(e0,e1,x_23);return mix(v0,v1,a0)*step(e0,x_23)*step(x_23,e1);}vec4 rdbu(float x_1){const float e0=0.0;const vec4 v0=vec4(0.0196078431372549,0.0392156862745098,0.6745098039215687,1);const float e1=0.35;const vec4 v1=vec4(0.41568627450980394,0.5372549019607843,0.9686274509803922,1);const float e2=0.5;const vec4 v2=vec4(0.7450980392156863,0.7450980392156863,0.7450980392156863,1);const float e3=0.6;const vec4 v3=vec4(0.8627450980392157,0.6666666666666666,0.5176470588235295,1);const float e4=0.7;const vec4 v4=vec4(0.9019607843137255,0.5686274509803921,0.35294117647058826,1);const float e5=1.0;const vec4 v5=vec4(0.6980392156862745,0.0392156862745098,0.10980392156862745,1);float a0=smoothstep(e0,e1,x_1);float a1=smoothstep(e1,e2,x_1);float a2=smoothstep(e2,e3,x_1);float a3=smoothstep(e3,e4,x_1);float a4=smoothstep(e4,e5,x_1);return max(mix(v0,v1,a0)*step(e0,x_1)*step(x_1,e1),max(mix(v1,v2,a1)*step(e1,x_1)*step(x_1,e2),max(mix(v2,v3,a2)*step(e2,x_1)*step(x_1,e3),max(mix(v3,v4,a3)*step(e3,x_1)*step(x_1,e4),mix(v4,v5,a4)*step(e4,x_1)*step(x_1,e5)))));}vec4 picnic(float x_42){const float e0=0.0;const vec4 v0=vec4(0,0,1,1);const float e1=0.1;const vec4 v1=vec4(0.2,0.6,1,1);const float e2=0.2;const vec4 v2=vec4(0.4,0.8,1,1);const float e3=0.3;const vec4 v3=vec4(0.6,0.8,1,1);const float e4=0.4;const vec4 v4=vec4(0.8,0.8,1,1);const float e5=0.5;const vec4 v5=vec4(1,1,1,1);const float e6=0.6;const vec4 v6=vec4(1,0.8,1,1);const float e7=0.7;const vec4 v7=vec4(1,0.6,1,1);const float e8=0.8;const vec4 v8=vec4(1,0.4,0.8,1);const float e9=0.9;const vec4 v9=vec4(1,0.4,0.4,1);const float e10=1.0;const vec4 v10=vec4(1,0,0,1);float a0=smoothstep(e0,e1,x_42);float a1=smoothstep(e1,e2,x_42);float a2=smoothstep(e2,e3,x_42);float a3=smoothstep(e3,e4,x_42);float a4=smoothstep(e4,e5,x_42);float a5=smoothstep(e5,e6,x_42);float a6=smoothstep(e6,e7,x_42);float a7=smoothstep(e7,e8,x_42);float a8=smoothstep(e8,e9,x_42);float a9=smoothstep(e9,e10,x_42);return max(mix(v0,v1,a0)*step(e0,x_42)*step(x_42,e1),max(mix(v1,v2,a1)*step(e1,x_42)*step(x_42,e2),max(mix(v2,v3,a2)*step(e2,x_42)*step(x_42,e3),max(mix(v3,v4,a3)*step(e3,x_42)*step(x_42,e4),max(mix(v4,v5,a4)*step(e4,x_42)*step(x_42,e5),max(mix(v5,v6,a5)*step(e5,x_42)*step(x_42,e6),max(mix(v6,v7,a6)*step(e6,x_42)*step(x_42,e7),max(mix(v7,v8,a7)*step(e7,x_42)*step(x_42,e8),max(mix(v8,v9,a8)*step(e8,x_42)*step(x_42,e9),mix(v9,v10,a9)*step(e9,x_42)*step(x_42,e10))))))))));}vec4 rainbow(float x_31){const float e0=0.0;const vec4 v0=vec4(0.5882352941176471,0,0.35294117647058826,1);const float e1=0.125;const vec4 v1=vec4(0,0,0.7843137254901961,1);const float e2=0.25;const vec4 v2=vec4(0,0.09803921568627451,1,1);const float e3=0.375;const vec4 v3=vec4(0,0.596078431372549,1,1);const float e4=0.5;const vec4 v4=vec4(0.17254901960784313,1,0.5882352941176471,1);const float e5=0.625;const vec4 v5=vec4(0.592156862745098,1,0,1);const float e6=0.75;const vec4 v6=vec4(1,0.9176470588235294,0,1);const float e7=0.875;const vec4 v7=vec4(1,0.43529411764705883,0,1);const float e8=1.0;const vec4 v8=vec4(1,0,0,1);float a0=smoothstep(e0,e1,x_31);float a1=smoothstep(e1,e2,x_31);float a2=smoothstep(e2,e3,x_31);float a3=smoothstep(e3,e4,x_31);float a4=smoothstep(e4,e5,x_31);float a5=smoothstep(e5,e6,x_31);float a6=smoothstep(e6,e7,x_31);float a7=smoothstep(e7,e8,x_31);return max(mix(v0,v1,a0)*step(e0,x_31)*step(x_31,e1),max(mix(v1,v2,a1)*step(e1,x_31)*step(x_31,e2),max(mix(v2,v3,a2)*step(e2,x_31)*step(x_31,e3),max(mix(v3,v4,a3)*step(e3,x_31)*step(x_31,e4),max(mix(v4,v5,a4)*step(e4,x_31)*step(x_31,e5),max(mix(v5,v6,a5)*step(e5,x_31)*step(x_31,e6),max(mix(v6,v7,a6)*step(e6,x_31)*step(x_31,e7),mix(v7,v8,a7)*step(e7,x_31)*step(x_31,e8))))))));}vec4 portland(float x_21){const float e0=0.0;const vec4 v0=vec4(0.047058823529411764,0.2,0.5137254901960784,1);const float e1=0.25;const vec4 v1=vec4(0.0392156862745098,0.5333333333333333,0.7294117647058823,1);const float e2=0.5;const vec4 v2=vec4(0.9490196078431372,0.8274509803921568,0.2196078431372549,1);const float e3=0.75;const vec4 v3=vec4(0.9490196078431372,0.5607843137254902,0.2196078431372549,1);const float e4=1.0;const vec4 v4=vec4(0.8509803921568627,0.11764705882352941,0.11764705882352941,1);float a0=smoothstep(e0,e1,x_21);float a1=smoothstep(e1,e2,x_21);float a2=smoothstep(e2,e3,x_21);float a3=smoothstep(e3,e4,x_21);return max(mix(v0,v1,a0)*step(e0,x_21)*step(x_21,e1),max(mix(v1,v2,a1)*step(e1,x_21)*step(x_21,e2),max(mix(v2,v3,a2)*step(e2,x_21)*step(x_21,e3),mix(v3,v4,a3)*step(e3,x_21)*step(x_21,e4))));}vec4 blackbody(float x_38){const float e0=0.0;const vec4 v0=vec4(0,0,0,1);const float e1=0.2;const vec4 v1=vec4(0.9019607843137255,0,0,1);const float e2=0.4;const vec4 v2=vec4(0.9019607843137255,0.8235294117647058,0,1);const float e3=0.7;const vec4 v3=vec4(1,1,1,1);const float e4=1.0;const vec4 v4=vec4(0.6274509803921569,0.7843137254901961,1,1);float a0=smoothstep(e0,e1,x_38);float a1=smoothstep(e1,e2,x_38);float a2=smoothstep(e2,e3,x_38);float a3=smoothstep(e3,e4,x_38);return max(mix(v0,v1,a0)*step(e0,x_38)*step(x_38,e1),max(mix(v1,v2,a1)*step(e1,x_38)*step(x_38,e2),max(mix(v2,v3,a2)*step(e2,x_38)*step(x_38,e3),mix(v3,v4,a3)*step(e3,x_38)*step(x_38,e4))));}vec4 earth(float x_29){const float e0=0.0;const vec4 v0=vec4(0,0,0.5098039215686274,1);const float e1=0.1;const vec4 v1=vec4(0,0.7058823529411765,0.7058823529411765,1);const float e2=0.2;const vec4 v2=vec4(0.1568627450980392,0.8235294117647058,0.1568627450980392,1);const float e3=0.4;const vec4 v3=vec4(0.9019607843137255,0.9019607843137255,0.19607843137254902,1);const float e4=0.6;const vec4 v4=vec4(0.47058823529411764,0.27450980392156865,0.0784313725490196,1);const float e5=1.0;const vec4 v5=vec4(1,1,1,1);float a0=smoothstep(e0,e1,x_29);float a1=smoothstep(e1,e2,x_29);float a2=smoothstep(e2,e3,x_29);float a3=smoothstep(e3,e4,x_29);float a4=smoothstep(e4,e5,x_29);return max(mix(v0,v1,a0)*step(e0,x_29)*step(x_29,e1),max(mix(v1,v2,a1)*step(e1,x_29)*step(x_29,e2),max(mix(v2,v3,a2)*step(e2,x_29)*step(x_29,e3),max(mix(v3,v4,a3)*step(e3,x_29)*step(x_29,e4),mix(v4,v5,a4)*step(e4,x_29)*step(x_29,e5)))));}vec4 electric(float x_9){const float e0=0.0;const vec4 v0=vec4(0,0,0,1);const float e1=0.15;const vec4 v1=vec4(0.11764705882352941,0,0.39215686274509803,1);const float e2=0.4;const vec4 v2=vec4(0.47058823529411764,0,0.39215686274509803,1);const float e3=0.6;const vec4 v3=vec4(0.6274509803921569,0.35294117647058826,0,1);const float e4=0.8;const vec4 v4=vec4(0.9019607843137255,0.7843137254901961,0,1);const float e5=1.0;const vec4 v5=vec4(1,0.9803921568627451,0.8627450980392157,1);float a0=smoothstep(e0,e1,x_9);float a1=smoothstep(e1,e2,x_9);float a2=smoothstep(e2,e3,x_9);float a3=smoothstep(e3,e4,x_9);float a4=smoothstep(e4,e5,x_9);return max(mix(v0,v1,a0)*step(e0,x_9)*step(x_9,e1),max(mix(v1,v2,a1)*step(e1,x_9)*step(x_9,e2),max(mix(v2,v3,a2)*step(e2,x_9)*step(x_9,e3),max(mix(v3,v4,a3)*step(e3,x_9)*step(x_9,e4),mix(v4,v5,a4)*step(e4,x_9)*step(x_9,e5)))));}vec4 alpha(float x_0){const float e0=0.0;const vec4 v0=vec4(1,1,1,0);const float e1=1.0;const vec4 v1=vec4(1,1,1,1);float a0=smoothstep(e0,e1,x_0);return mix(v0,v1,a0)*step(e0,x_0)*step(x_0,e1);}vec4 viridis(float x_22){const float e0=0.0;const vec4 v0=vec4(0.26666666666666666,0.00392156862745098,0.32941176470588235,1);const float e1=0.13;const vec4 v1=vec4(0.2784313725490196,0.17254901960784313,0.47843137254901963,1);const float e2=0.25;const vec4 v2=vec4(0.23137254901960785,0.3176470588235294,0.5450980392156862,1);const float e3=0.38;const vec4 v3=vec4(0.17254901960784313,0.44313725490196076,0.5568627450980392,1);const float e4=0.5;const vec4 v4=vec4(0.12941176470588237,0.5647058823529412,0.5529411764705883,1);const float e5=0.63;const vec4 v5=vec4(0.15294117647058825,0.6784313725490196,0.5058823529411764,1);const float e6=0.75;const vec4 v6=vec4(0.3607843137254902,0.7843137254901961,0.38823529411764707,1);const float e7=0.88;const vec4 v7=vec4(0.6666666666666666,0.8627450980392157,0.19607843137254902,1);const float e8=1.0;const vec4 v8=vec4(0.9921568627450981,0.9058823529411765,0.1450980392156863,1);float a0=smoothstep(e0,e1,x_22);float a1=smoothstep(e1,e2,x_22);float a2=smoothstep(e2,e3,x_22);float a3=smoothstep(e3,e4,x_22);float a4=smoothstep(e4,e5,x_22);float a5=smoothstep(e5,e6,x_22);float a6=smoothstep(e6,e7,x_22);float a7=smoothstep(e7,e8,x_22);return max(mix(v0,v1,a0)*step(e0,x_22)*step(x_22,e1),max(mix(v1,v2,a1)*step(e1,x_22)*step(x_22,e2),max(mix(v2,v3,a2)*step(e2,x_22)*step(x_22,e3),max(mix(v3,v4,a3)*step(e3,x_22)*step(x_22,e4),max(mix(v4,v5,a4)*step(e4,x_22)*step(x_22,e5),max(mix(v5,v6,a5)*step(e5,x_22)*step(x_22,e6),max(mix(v6,v7,a6)*step(e6,x_22)*step(x_22,e7),mix(v7,v8,a7)*step(e7,x_22)*step(x_22,e8))))))));}vec4 inferno(float x_30){const float e0=0.0;const vec4 v0=vec4(0,0,0.01568627450980392,1);const float e1=0.13;const vec4 v1=vec4(0.12156862745098039,0.047058823529411764,0.2823529411764706,1);const float e2=0.25;const vec4 v2=vec4(0.3333333333333333,0.058823529411764705,0.42745098039215684,1);const float e3=0.38;const vec4 v3=vec4(0.5333333333333333,0.13333333333333333,0.41568627450980394,1);const float e4=0.5;const vec4 v4=vec4(0.7294117647058823,0.21176470588235294,0.3333333333333333,1);const float e5=0.63;const vec4 v5=vec4(0.8901960784313725,0.34901960784313724,0.2,1);const float e6=0.75;const vec4 v6=vec4(0.9764705882352941,0.5490196078431373,0.0392156862745098,1);const float e7=0.88;const vec4 v7=vec4(0.9764705882352941,0.788235294117647,0.19607843137254902,1);const float e8=1.0;const vec4 v8=vec4(0.9882352941176471,1,0.6431372549019608,1);float a0=smoothstep(e0,e1,x_30);float a1=smoothstep(e1,e2,x_30);float a2=smoothstep(e2,e3,x_30);float a3=smoothstep(e3,e4,x_30);float a4=smoothstep(e4,e5,x_30);float a5=smoothstep(e5,e6,x_30);float a6=smoothstep(e6,e7,x_30);float a7=smoothstep(e7,e8,x_30);return max(mix(v0,v1,a0)*step(e0,x_30)*step(x_30,e1),max(mix(v1,v2,a1)*step(e1,x_30)*step(x_30,e2),max(mix(v2,v3,a2)*step(e2,x_30)*step(x_30,e3),max(mix(v3,v4,a3)*step(e3,x_30)*step(x_30,e4),max(mix(v4,v5,a4)*step(e4,x_30)*step(x_30,e5),max(mix(v5,v6,a5)*step(e5,x_30)*step(x_30,e6),max(mix(v6,v7,a6)*step(e6,x_30)*step(x_30,e7),mix(v7,v8,a7)*step(e7,x_30)*step(x_30,e8))))))));}vec4 magma(float x_33){const float e0=0.0;const vec4 v0=vec4(0,0,0.01568627450980392,1);const float e1=0.13;const vec4 v1=vec4(0.10980392156862745,0.06274509803921569,0.26666666666666666,1);const float e2=0.25;const vec4 v2=vec4(0.30980392156862746,0.07058823529411765,0.4823529411764706,1);const float e3=0.38;const vec4 v3=vec4(0.5058823529411764,0.1450980392156863,0.5058823529411764,1);const float e4=0.5;const vec4 v4=vec4(0.7098039215686275,0.21176470588235294,0.47843137254901963,1);const float e5=0.63;const vec4 v5=vec4(0.8980392156862745,0.3137254901960784,0.39215686274509803,1);const float e6=0.75;const vec4 v6=vec4(0.984313725490196,0.5294117647058824,0.3803921568627451,1);const float e7=0.88;const vec4 v7=vec4(0.996078431372549,0.7607843137254902,0.5294117647058824,1);const float e8=1.0;const vec4 v8=vec4(0.9882352941176471,0.9921568627450981,0.7490196078431373,1);float a0=smoothstep(e0,e1,x_33);float a1=smoothstep(e1,e2,x_33);float a2=smoothstep(e2,e3,x_33);float a3=smoothstep(e3,e4,x_33);float a4=smoothstep(e4,e5,x_33);float a5=smoothstep(e5,e6,x_33);float a6=smoothstep(e6,e7,x_33);float a7=smoothstep(e7,e8,x_33);return max(mix(v0,v1,a0)*step(e0,x_33)*step(x_33,e1),max(mix(v1,v2,a1)*step(e1,x_33)*step(x_33,e2),max(mix(v2,v3,a2)*step(e2,x_33)*step(x_33,e3),max(mix(v3,v4,a3)*step(e3,x_33)*step(x_33,e4),max(mix(v4,v5,a4)*step(e4,x_33)*step(x_33,e5),max(mix(v5,v6,a5)*step(e5,x_33)*step(x_33,e6),max(mix(v6,v7,a6)*step(e6,x_33)*step(x_33,e7),mix(v7,v8,a7)*step(e7,x_33)*step(x_33,e8))))))));}vec4 plasma(float x_3){const float e0=0.0;const vec4 v0=vec4(0.050980392156862744,0.03137254901960784,0.5294117647058824,1);const float e1=0.13;const vec4 v1=vec4(0.29411764705882354,0.011764705882352941,0.6313725490196078,1);const float e2=0.25;const vec4 v2=vec4(0.49019607843137253,0.011764705882352941,0.6588235294117647,1);const float e3=0.38;const vec4 v3=vec4(0.6588235294117647,0.13333333333333333,0.5882352941176471,1);const float e4=0.5;const vec4 v4=vec4(0.796078431372549,0.27450980392156865,0.4745098039215686,1);const float e5=0.63;const vec4 v5=vec4(0.8980392156862745,0.4196078431372549,0.36470588235294116,1);const float e6=0.75;const vec4 v6=vec4(0.9725490196078431,0.5803921568627451,0.2549019607843137,1);const float e7=0.88;const vec4 v7=vec4(0.9921568627450981,0.7647058823529411,0.1568627450980392,1);const float e8=1.0;const vec4 v8=vec4(0.9411764705882353,0.9764705882352941,0.12941176470588237,1);float a0=smoothstep(e0,e1,x_3);float a1=smoothstep(e1,e2,x_3);float a2=smoothstep(e2,e3,x_3);float a3=smoothstep(e3,e4,x_3);float a4=smoothstep(e4,e5,x_3);float a5=smoothstep(e5,e6,x_3);float a6=smoothstep(e6,e7,x_3);float a7=smoothstep(e7,e8,x_3);return max(mix(v0,v1,a0)*step(e0,x_3)*step(x_3,e1),max(mix(v1,v2,a1)*step(e1,x_3)*step(x_3,e2),max(mix(v2,v3,a2)*step(e2,x_3)*step(x_3,e3),max(mix(v3,v4,a3)*step(e3,x_3)*step(x_3,e4),max(mix(v4,v5,a4)*step(e4,x_3)*step(x_3,e5),max(mix(v5,v6,a5)*step(e5,x_3)*step(x_3,e6),max(mix(v6,v7,a6)*step(e6,x_3)*step(x_3,e7),mix(v7,v8,a7)*step(e7,x_3)*step(x_3,e8))))))));}vec4 warm(float x_43){const float e0=0.0;const vec4 v0=vec4(0.49019607843137253,0,0.7019607843137254,1);const float e1=0.13;const vec4 v1=vec4(0.6745098039215687,0,0.7333333333333333,1);const float e2=0.25;const vec4 v2=vec4(0.8588235294117647,0,0.6666666666666666,1);const float e3=0.38;const vec4 v3=vec4(1,0,0.5098039215686274,1);const float e4=0.5;const vec4 v4=vec4(1,0.24705882352941178,0.2901960784313726,1);const float e5=0.63;const vec4 v5=vec4(1,0.4823529411764706,0,1);const float e6=0.75;const vec4 v6=vec4(0.9176470588235294,0.6901960784313725,0,1);const float e7=0.88;const vec4 v7=vec4(0.7450980392156863,0.8941176470588236,0,1);const float e8=1.0;const vec4 v8=vec4(0.5764705882352941,1,0,1);float a0=smoothstep(e0,e1,x_43);float a1=smoothstep(e1,e2,x_43);float a2=smoothstep(e2,e3,x_43);float a3=smoothstep(e3,e4,x_43);float a4=smoothstep(e4,e5,x_43);float a5=smoothstep(e5,e6,x_43);float a6=smoothstep(e6,e7,x_43);float a7=smoothstep(e7,e8,x_43);return max(mix(v0,v1,a0)*step(e0,x_43)*step(x_43,e1),max(mix(v1,v2,a1)*step(e1,x_43)*step(x_43,e2),max(mix(v2,v3,a2)*step(e2,x_43)*step(x_43,e3),max(mix(v3,v4,a3)*step(e3,x_43)*step(x_43,e4),max(mix(v4,v5,a4)*step(e4,x_43)*step(x_43,e5),max(mix(v5,v6,a5)*step(e5,x_43)*step(x_43,e6),max(mix(v6,v7,a6)*step(e6,x_43)*step(x_43,e7),mix(v7,v8,a7)*step(e7,x_43)*step(x_43,e8))))))));}vec4 rainbow_soft_1310269270(float x_14){const float e0=0.0;const vec4 v0=vec4(0.49019607843137253,0,0.7019607843137254,1);const float e1=0.1;const vec4 v1=vec4(0.7803921568627451,0,0.7058823529411765,1);const float e2=0.2;const vec4 v2=vec4(1,0,0.4745098039215686,1);const float e3=0.3;const vec4 v3=vec4(1,0.4235294117647059,0,1);const float e4=0.4;const vec4 v4=vec4(0.8705882352941177,0.7607843137254902,0,1);const float e5=0.5;const vec4 v5=vec4(0.5882352941176471,1,0,1);const float e6=0.6;const vec4 v6=vec4(0,1,0.21568627450980393,1);const float e7=0.7;const vec4 v7=vec4(0,0.9647058823529412,0.5882352941176471,1);const float e8=0.8;const vec4 v8=vec4(0.19607843137254902,0.6549019607843137,0.8705882352941177,1);const float e9=0.9;const vec4 v9=vec4(0.403921568627451,0.2,0.9215686274509803,1);const float e10=1.0;const vec4 v10=vec4(0.48627450980392156,0,0.7294117647058823,1);float a0=smoothstep(e0,e1,x_14);float a1=smoothstep(e1,e2,x_14);float a2=smoothstep(e2,e3,x_14);float a3=smoothstep(e3,e4,x_14);float a4=smoothstep(e4,e5,x_14);float a5=smoothstep(e5,e6,x_14);float a6=smoothstep(e6,e7,x_14);float a7=smoothstep(e7,e8,x_14);float a8=smoothstep(e8,e9,x_14);float a9=smoothstep(e9,e10,x_14);return max(mix(v0,v1,a0)*step(e0,x_14)*step(x_14,e1),max(mix(v1,v2,a1)*step(e1,x_14)*step(x_14,e2),max(mix(v2,v3,a2)*step(e2,x_14)*step(x_14,e3),max(mix(v3,v4,a3)*step(e3,x_14)*step(x_14,e4),max(mix(v4,v5,a4)*step(e4,x_14)*step(x_14,e5),max(mix(v5,v6,a5)*step(e5,x_14)*step(x_14,e6),max(mix(v6,v7,a6)*step(e6,x_14)*step(x_14,e7),max(mix(v7,v8,a7)*step(e7,x_14)*step(x_14,e8),max(mix(v8,v9,a8)*step(e8,x_14)*step(x_14,e9),mix(v9,v10,a9)*step(e9,x_14)*step(x_14,e10))))))))));}vec4 bathymetry(float x_36){const float e0=0.0;const vec4 v0=vec4(0.1568627450980392,0.10196078431372549,0.17254901960784313,1);const float e1=0.13;const vec4 v1=vec4(0.23137254901960785,0.19215686274509805,0.35294117647058826,1);const float e2=0.25;const vec4 v2=vec4(0.25098039215686274,0.2980392156862745,0.5450980392156862,1);const float e3=0.38;const vec4 v3=vec4(0.24705882352941178,0.43137254901960786,0.592156862745098,1);const float e4=0.5;const vec4 v4=vec4(0.2823529411764706,0.5568627450980392,0.6196078431372549,1);const float e5=0.63;const vec4 v5=vec4(0.3333333333333333,0.6823529411764706,0.6392156862745098,1);const float e6=0.75;const vec4 v6=vec4(0.47058823529411764,0.807843137254902,0.6392156862745098,1);const float e7=0.88;const vec4 v7=vec4(0.7333333333333333,0.9019607843137255,0.6745098039215687,1);const float e8=1.0;const vec4 v8=vec4(0.9921568627450981,0.996078431372549,0.8,1);float a0=smoothstep(e0,e1,x_36);float a1=smoothstep(e1,e2,x_36);float a2=smoothstep(e2,e3,x_36);float a3=smoothstep(e3,e4,x_36);float a4=smoothstep(e4,e5,x_36);float a5=smoothstep(e5,e6,x_36);float a6=smoothstep(e6,e7,x_36);float a7=smoothstep(e7,e8,x_36);return max(mix(v0,v1,a0)*step(e0,x_36)*step(x_36,e1),max(mix(v1,v2,a1)*step(e1,x_36)*step(x_36,e2),max(mix(v2,v3,a2)*step(e2,x_36)*step(x_36,e3),max(mix(v3,v4,a3)*step(e3,x_36)*step(x_36,e4),max(mix(v4,v5,a4)*step(e4,x_36)*step(x_36,e5),max(mix(v5,v6,a5)*step(e5,x_36)*step(x_36,e6),max(mix(v6,v7,a6)*step(e6,x_36)*step(x_36,e7),mix(v7,v8,a7)*step(e7,x_36)*step(x_36,e8))))))));}vec4 cdom(float x_7){const float e0=0.0;const vec4 v0=vec4(0.1843137254901961,0.058823529411764705,0.24313725490196078,1);const float e1=0.13;const vec4 v1=vec4(0.3411764705882353,0.09019607843137255,0.33725490196078434,1);const float e2=0.25;const vec4 v2=vec4(0.5098039215686274,0.10980392156862745,0.38823529411764707,1);const float e3=0.38;const vec4 v3=vec4(0.6705882352941176,0.1607843137254902,0.3764705882352941,1);const float e4=0.5;const vec4 v4=vec4(0.807843137254902,0.2627450980392157,0.33725490196078434,1);const float e5=0.63;const vec4 v5=vec4(0.9019607843137255,0.41568627450980394,0.32941176470588235,1);const float e6=0.75;const vec4 v6=vec4(0.9490196078431372,0.5843137254901961,0.403921568627451,1);const float e7=0.88;const vec4 v7=vec4(0.9764705882352941,0.7568627450980392,0.5294117647058824,1);const float e8=1.0;const vec4 v8=vec4(0.996078431372549,0.9294117647058824,0.6901960784313725,1);float a0=smoothstep(e0,e1,x_7);float a1=smoothstep(e1,e2,x_7);float a2=smoothstep(e2,e3,x_7);float a3=smoothstep(e3,e4,x_7);float a4=smoothstep(e4,e5,x_7);float a5=smoothstep(e5,e6,x_7);float a6=smoothstep(e6,e7,x_7);float a7=smoothstep(e7,e8,x_7);return max(mix(v0,v1,a0)*step(e0,x_7)*step(x_7,e1),max(mix(v1,v2,a1)*step(e1,x_7)*step(x_7,e2),max(mix(v2,v3,a2)*step(e2,x_7)*step(x_7,e3),max(mix(v3,v4,a3)*step(e3,x_7)*step(x_7,e4),max(mix(v4,v5,a4)*step(e4,x_7)*step(x_7,e5),max(mix(v5,v6,a5)*step(e5,x_7)*step(x_7,e6),max(mix(v6,v7,a6)*step(e6,x_7)*step(x_7,e7),mix(v7,v8,a7)*step(e7,x_7)*step(x_7,e8))))))));}vec4 chlorophyll(float x_6){const float e0=0.0;const vec4 v0=vec4(0.07058823529411765,0.1411764705882353,0.0784313725490196,1);const float e1=0.13;const vec4 v1=vec4(0.09803921568627451,0.24705882352941178,0.1607843137254902,1);const float e2=0.25;const vec4 v2=vec4(0.09411764705882353,0.3568627450980392,0.23137254901960785,1);const float e3=0.38;const vec4 v3=vec4(0.050980392156862744,0.4666666666666667,0.2823529411764706,1);const float e4=0.5;const vec4 v4=vec4(0.07058823529411765,0.5803921568627451,0.3137254901960784,1);const float e5=0.63;const vec4 v5=vec4(0.3137254901960784,0.6784313725490196,0.34901960784313724,1);const float e6=0.75;const vec4 v6=vec4(0.5176470588235295,0.7686274509803922,0.47843137254901963,1);const float e7=0.88;const vec4 v7=vec4(0.6862745098039216,0.8666666666666667,0.6352941176470588,1);const float e8=1.0;const vec4 v8=vec4(0.8431372549019608,0.9764705882352941,0.8156862745098039,1);float a0=smoothstep(e0,e1,x_6);float a1=smoothstep(e1,e2,x_6);float a2=smoothstep(e2,e3,x_6);float a3=smoothstep(e3,e4,x_6);float a4=smoothstep(e4,e5,x_6);float a5=smoothstep(e5,e6,x_6);float a6=smoothstep(e6,e7,x_6);float a7=smoothstep(e7,e8,x_6);return max(mix(v0,v1,a0)*step(e0,x_6)*step(x_6,e1),max(mix(v1,v2,a1)*step(e1,x_6)*step(x_6,e2),max(mix(v2,v3,a2)*step(e2,x_6)*step(x_6,e3),max(mix(v3,v4,a3)*step(e3,x_6)*step(x_6,e4),max(mix(v4,v5,a4)*step(e4,x_6)*step(x_6,e5),max(mix(v5,v6,a5)*step(e5,x_6)*step(x_6,e6),max(mix(v6,v7,a6)*step(e6,x_6)*step(x_6,e7),mix(v7,v8,a7)*step(e7,x_6)*step(x_6,e8))))))));}vec4 density(float x_19){const float e0=0.0;const vec4 v0=vec4(0.21176470588235294,0.054901960784313725,0.1411764705882353,1);const float e1=0.13;const vec4 v1=vec4(0.34901960784313724,0.09019607843137255,0.3137254901960784,1);const float e2=0.25;const vec4 v2=vec4(0.43137254901960786,0.17647058823529413,0.5176470588235295,1);const float e3=0.38;const vec4 v3=vec4(0.47058823529411764,0.30196078431372547,0.6980392156862745,1);const float e4=0.5;const vec4 v4=vec4(0.47058823529411764,0.44313725490196076,0.8352941176470589,1);const float e5=0.63;const vec4 v5=vec4(0.45098039215686275,0.592156862745098,0.8941176470588236,1);const float e6=0.75;const vec4 v6=vec4(0.5254901960784314,0.7254901960784313,0.8901960784313725,1);const float e7=0.88;const vec4 v7=vec4(0.6941176470588235,0.8392156862745098,0.8901960784313725,1);const float e8=1.0;const vec4 v8=vec4(0.9019607843137255,0.9450980392156862,0.9450980392156862,1);float a0=smoothstep(e0,e1,x_19);float a1=smoothstep(e1,e2,x_19);float a2=smoothstep(e2,e3,x_19);float a3=smoothstep(e3,e4,x_19);float a4=smoothstep(e4,e5,x_19);float a5=smoothstep(e5,e6,x_19);float a6=smoothstep(e6,e7,x_19);float a7=smoothstep(e7,e8,x_19);return max(mix(v0,v1,a0)*step(e0,x_19)*step(x_19,e1),max(mix(v1,v2,a1)*step(e1,x_19)*step(x_19,e2),max(mix(v2,v3,a2)*step(e2,x_19)*step(x_19,e3),max(mix(v3,v4,a3)*step(e3,x_19)*step(x_19,e4),max(mix(v4,v5,a4)*step(e4,x_19)*step(x_19,e5),max(mix(v5,v6,a5)*step(e5,x_19)*step(x_19,e6),max(mix(v6,v7,a6)*step(e6,x_19)*step(x_19,e7),mix(v7,v8,a7)*step(e7,x_19)*step(x_19,e8))))))));}vec4 freesurface_blue_3154355989(float x_35){const float e0=0.0;const vec4 v0=vec4(0.11764705882352941,0.01568627450980392,0.43137254901960786,1);const float e1=0.13;const vec4 v1=vec4(0.1843137254901961,0.054901960784313725,0.6901960784313725,1);const float e2=0.25;const vec4 v2=vec4(0.1607843137254902,0.17647058823529413,0.9254901960784314,1);const float e3=0.38;const vec4 v3=vec4(0.09803921568627451,0.38823529411764707,0.8313725490196079,1);const float e4=0.5;const vec4 v4=vec4(0.26666666666666666,0.5137254901960784,0.7843137254901961,1);const float e5=0.63;const vec4 v5=vec4(0.4470588235294118,0.611764705882353,0.7725490196078432,1);const float e6=0.75;const vec4 v6=vec4(0.615686274509804,0.7098039215686275,0.796078431372549,1);const float e7=0.88;const vec4 v7=vec4(0.7843137254901961,0.8156862745098039,0.8470588235294118,1);const float e8=1.0;const vec4 v8=vec4(0.9450980392156862,0.9294117647058824,0.9254901960784314,1);float a0=smoothstep(e0,e1,x_35);float a1=smoothstep(e1,e2,x_35);float a2=smoothstep(e2,e3,x_35);float a3=smoothstep(e3,e4,x_35);float a4=smoothstep(e4,e5,x_35);float a5=smoothstep(e5,e6,x_35);float a6=smoothstep(e6,e7,x_35);float a7=smoothstep(e7,e8,x_35);return max(mix(v0,v1,a0)*step(e0,x_35)*step(x_35,e1),max(mix(v1,v2,a1)*step(e1,x_35)*step(x_35,e2),max(mix(v2,v3,a2)*step(e2,x_35)*step(x_35,e3),max(mix(v3,v4,a3)*step(e3,x_35)*step(x_35,e4),max(mix(v4,v5,a4)*step(e4,x_35)*step(x_35,e5),max(mix(v5,v6,a5)*step(e5,x_35)*step(x_35,e6),max(mix(v6,v7,a6)*step(e6,x_35)*step(x_35,e7),mix(v7,v8,a7)*step(e7,x_35)*step(x_35,e8))))))));}vec4 freesurface_red_1679163293(float x_20){const float e0=0.0;const vec4 v0=vec4(0.23529411764705882,0.03529411764705882,0.07058823529411765,1);const float e1=0.13;const vec4 v1=vec4(0.39215686274509803,0.06666666666666667,0.10588235294117647,1);const float e2=0.25;const vec4 v2=vec4(0.5568627450980392,0.0784313725490196,0.11372549019607843,1);const float e3=0.38;const vec4 v3=vec4(0.6941176470588235,0.16862745098039217,0.10588235294117647,1);const float e4=0.5;const vec4 v4=vec4(0.7529411764705882,0.3411764705882353,0.24705882352941178,1);const float e5=0.63;const vec4 v5=vec4(0.803921568627451,0.49019607843137253,0.4117647058823529,1);const float e6=0.75;const vec4 v6=vec4(0.8470588235294118,0.6352941176470588,0.5803921568627451,1);const float e7=0.88;const vec4 v7=vec4(0.8901960784313725,0.7803921568627451,0.7568627450980392,1);const float e8=1.0;const vec4 v8=vec4(0.9450980392156862,0.9294117647058824,0.9254901960784314,1);float a0=smoothstep(e0,e1,x_20);float a1=smoothstep(e1,e2,x_20);float a2=smoothstep(e2,e3,x_20);float a3=smoothstep(e3,e4,x_20);float a4=smoothstep(e4,e5,x_20);float a5=smoothstep(e5,e6,x_20);float a6=smoothstep(e6,e7,x_20);float a7=smoothstep(e7,e8,x_20);return max(mix(v0,v1,a0)*step(e0,x_20)*step(x_20,e1),max(mix(v1,v2,a1)*step(e1,x_20)*step(x_20,e2),max(mix(v2,v3,a2)*step(e2,x_20)*step(x_20,e3),max(mix(v3,v4,a3)*step(e3,x_20)*step(x_20,e4),max(mix(v4,v5,a4)*step(e4,x_20)*step(x_20,e5),max(mix(v5,v6,a5)*step(e5,x_20)*step(x_20,e6),max(mix(v6,v7,a6)*step(e6,x_20)*step(x_20,e7),mix(v7,v8,a7)*step(e7,x_20)*step(x_20,e8))))))));}vec4 oxygen(float x_11){const float e0=0.0;const vec4 v0=vec4(0.25098039215686274,0.0196078431372549,0.0196078431372549,1);const float e1=0.13;const vec4 v1=vec4(0.41568627450980394,0.023529411764705882,0.058823529411764705,1);const float e2=0.25;const vec4 v2=vec4(0.5647058823529412,0.10196078431372549,0.027450980392156862,1);const float e3=0.38;const vec4 v3=vec4(0.6588235294117647,0.25098039215686274,0.011764705882352941,1);const float e4=0.5;const vec4 v4=vec4(0.7372549019607844,0.39215686274509803,0.01568627450980392,1);const float e5=0.63;const vec4 v5=vec4(0.807843137254902,0.5333333333333333,0.043137254901960784,1);const float e6=0.75;const vec4 v6=vec4(0.8627450980392157,0.6823529411764706,0.09803921568627451,1);const float e7=0.88;const vec4 v7=vec4(0.9058823529411765,0.8431372549019608,0.17254901960784313,1);const float e8=1.0;const vec4 v8=vec4(0.9725490196078431,0.996078431372549,0.4117647058823529,1);float a0=smoothstep(e0,e1,x_11);float a1=smoothstep(e1,e2,x_11);float a2=smoothstep(e2,e3,x_11);float a3=smoothstep(e3,e4,x_11);float a4=smoothstep(e4,e5,x_11);float a5=smoothstep(e5,e6,x_11);float a6=smoothstep(e6,e7,x_11);float a7=smoothstep(e7,e8,x_11);return max(mix(v0,v1,a0)*step(e0,x_11)*step(x_11,e1),max(mix(v1,v2,a1)*step(e1,x_11)*step(x_11,e2),max(mix(v2,v3,a2)*step(e2,x_11)*step(x_11,e3),max(mix(v3,v4,a3)*step(e3,x_11)*step(x_11,e4),max(mix(v4,v5,a4)*step(e4,x_11)*step(x_11,e5),max(mix(v5,v6,a5)*step(e5,x_11)*step(x_11,e6),max(mix(v6,v7,a6)*step(e6,x_11)*step(x_11,e7),mix(v7,v8,a7)*step(e7,x_11)*step(x_11,e8))))))));}vec4 par(float x_28){const float e0=0.0;const vec4 v0=vec4(0.2,0.0784313725490196,0.09411764705882353,1);const float e1=0.13;const vec4 v1=vec4(0.35294117647058826,0.12549019607843137,0.13725490196078433,1);const float e2=0.25;const vec4 v2=vec4(0.5058823529411764,0.17254901960784313,0.13333333333333333,1);const float e3=0.38;const vec4 v3=vec4(0.6235294117647059,0.26666666666666666,0.09803921568627451,1);const float e4=0.5;const vec4 v4=vec4(0.7137254901960784,0.38823529411764707,0.07450980392156863,1);const float e5=0.63;const vec4 v5=vec4(0.7803921568627451,0.5254901960784314,0.08627450980392157,1);const float e6=0.75;const vec4 v6=vec4(0.8313725490196079,0.6705882352941176,0.13725490196078433,1);const float e7=0.88;const vec4 v7=vec4(0.8666666666666667,0.8235294117647058,0.21176470588235294,1);const float e8=1.0;const vec4 v8=vec4(0.8823529411764706,0.9921568627450981,0.29411764705882354,1);float a0=smoothstep(e0,e1,x_28);float a1=smoothstep(e1,e2,x_28);float a2=smoothstep(e2,e3,x_28);float a3=smoothstep(e3,e4,x_28);float a4=smoothstep(e4,e5,x_28);float a5=smoothstep(e5,e6,x_28);float a6=smoothstep(e6,e7,x_28);float a7=smoothstep(e7,e8,x_28);return max(mix(v0,v1,a0)*step(e0,x_28)*step(x_28,e1),max(mix(v1,v2,a1)*step(e1,x_28)*step(x_28,e2),max(mix(v2,v3,a2)*step(e2,x_28)*step(x_28,e3),max(mix(v3,v4,a3)*step(e3,x_28)*step(x_28,e4),max(mix(v4,v5,a4)*step(e4,x_28)*step(x_28,e5),max(mix(v5,v6,a5)*step(e5,x_28)*step(x_28,e6),max(mix(v6,v7,a6)*step(e6,x_28)*step(x_28,e7),mix(v7,v8,a7)*step(e7,x_28)*step(x_28,e8))))))));}vec4 phase(float x_39){const float e0=0.0;const vec4 v0=vec4(0.5686274509803921,0.4117647058823529,0.07058823529411765,1);const float e1=0.13;const vec4 v1=vec4(0.7215686274509804,0.2784313725490196,0.14901960784313725,1);const float e2=0.25;const vec4 v2=vec4(0.7294117647058823,0.22745098039215686,0.45098039215686275,1);const float e3=0.38;const vec4 v3=vec4(0.6274509803921569,0.2784313725490196,0.7254901960784313,1);const float e4=0.5;const vec4 v4=vec4(0.43137254901960786,0.3803921568627451,0.8549019607843137,1);const float e5=0.63;const vec4 v5=vec4(0.19607843137254902,0.4823529411764706,0.6431372549019608,1);const float e6=0.75;const vec4 v6=vec4(0.12156862745098039,0.5137254901960784,0.43137254901960786,1);const float e7=0.88;const vec4 v7=vec4(0.30196078431372547,0.5058823529411764,0.13333333333333333,1);const float e8=1.0;const vec4 v8=vec4(0.5686274509803921,0.4117647058823529,0.07058823529411765,1);float a0=smoothstep(e0,e1,x_39);float a1=smoothstep(e1,e2,x_39);float a2=smoothstep(e2,e3,x_39);float a3=smoothstep(e3,e4,x_39);float a4=smoothstep(e4,e5,x_39);float a5=smoothstep(e5,e6,x_39);float a6=smoothstep(e6,e7,x_39);float a7=smoothstep(e7,e8,x_39);return max(mix(v0,v1,a0)*step(e0,x_39)*step(x_39,e1),max(mix(v1,v2,a1)*step(e1,x_39)*step(x_39,e2),max(mix(v2,v3,a2)*step(e2,x_39)*step(x_39,e3),max(mix(v3,v4,a3)*step(e3,x_39)*step(x_39,e4),max(mix(v4,v5,a4)*step(e4,x_39)*step(x_39,e5),max(mix(v5,v6,a5)*step(e5,x_39)*step(x_39,e6),max(mix(v6,v7,a6)*step(e6,x_39)*step(x_39,e7),mix(v7,v8,a7)*step(e7,x_39)*step(x_39,e8))))))));}vec4 salinity(float x_26){const float e0=0.0;const vec4 v0=vec4(0.16470588235294117,0.09411764705882353,0.4235294117647059,1);const float e1=0.13;const vec4 v1=vec4(0.12941176470588237,0.19607843137254902,0.6352941176470588,1);const float e2=0.25;const vec4 v2=vec4(0.058823529411764705,0.35294117647058826,0.5686274509803921,1);const float e3=0.38;const vec4 v3=vec4(0.1568627450980392,0.4627450980392157,0.5372549019607843,1);const float e4=0.5;const vec4 v4=vec4(0.23137254901960785,0.5725490196078431,0.5294117647058824,1);const float e5=0.63;const vec4 v5=vec4(0.30980392156862746,0.6862745098039216,0.49411764705882355,1);const float e6=0.75;const vec4 v6=vec4(0.47058823529411764,0.796078431372549,0.40784313725490196,1);const float e7=0.88;const vec4 v7=vec4(0.7568627450980392,0.8666666666666667,0.39215686274509803,1);const float e8=1.0;const vec4 v8=vec4(0.9921568627450981,0.9372549019607843,0.6039215686274509,1);float a0=smoothstep(e0,e1,x_26);float a1=smoothstep(e1,e2,x_26);float a2=smoothstep(e2,e3,x_26);float a3=smoothstep(e3,e4,x_26);float a4=smoothstep(e4,e5,x_26);float a5=smoothstep(e5,e6,x_26);float a6=smoothstep(e6,e7,x_26);float a7=smoothstep(e7,e8,x_26);return max(mix(v0,v1,a0)*step(e0,x_26)*step(x_26,e1),max(mix(v1,v2,a1)*step(e1,x_26)*step(x_26,e2),max(mix(v2,v3,a2)*step(e2,x_26)*step(x_26,e3),max(mix(v3,v4,a3)*step(e3,x_26)*step(x_26,e4),max(mix(v4,v5,a4)*step(e4,x_26)*step(x_26,e5),max(mix(v5,v6,a5)*step(e5,x_26)*step(x_26,e6),max(mix(v6,v7,a6)*step(e6,x_26)*step(x_26,e7),mix(v7,v8,a7)*step(e7,x_26)*step(x_26,e8))))))));}vec4 temperature(float x_8){const float e0=0.0;const vec4 v0=vec4(0.01568627450980392,0.13725490196078433,0.2,1);const float e1=0.13;const vec4 v1=vec4(0.09019607843137255,0.2,0.47843137254901963,1);const float e2=0.25;const vec4 v2=vec4(0.3333333333333333,0.23137254901960785,0.615686274509804,1);const float e3=0.38;const vec4 v3=vec4(0.5058823529411764,0.30980392156862746,0.5607843137254902,1);const float e4=0.5;const vec4 v4=vec4(0.6862745098039216,0.37254901960784315,0.5098039215686274,1);const float e5=0.63;const vec4 v5=vec4(0.8705882352941177,0.4392156862745098,0.396078431372549,1);const float e6=0.75;const vec4 v6=vec4(0.9764705882352941,0.5725490196078431,0.25882352941176473,1);const float e7=0.88;const vec4 v7=vec4(0.9764705882352941,0.7686274509803922,0.2549019607843137,1);const float e8=1.0;const vec4 v8=vec4(0.9098039215686274,0.9803921568627451,0.3568627450980392,1);float a0=smoothstep(e0,e1,x_8);float a1=smoothstep(e1,e2,x_8);float a2=smoothstep(e2,e3,x_8);float a3=smoothstep(e3,e4,x_8);float a4=smoothstep(e4,e5,x_8);float a5=smoothstep(e5,e6,x_8);float a6=smoothstep(e6,e7,x_8);float a7=smoothstep(e7,e8,x_8);return max(mix(v0,v1,a0)*step(e0,x_8)*step(x_8,e1),max(mix(v1,v2,a1)*step(e1,x_8)*step(x_8,e2),max(mix(v2,v3,a2)*step(e2,x_8)*step(x_8,e3),max(mix(v3,v4,a3)*step(e3,x_8)*step(x_8,e4),max(mix(v4,v5,a4)*step(e4,x_8)*step(x_8,e5),max(mix(v5,v6,a5)*step(e5,x_8)*step(x_8,e6),max(mix(v6,v7,a6)*step(e6,x_8)*step(x_8,e7),mix(v7,v8,a7)*step(e7,x_8)*step(x_8,e8))))))));}vec4 turbidity(float x_40){const float e0=0.0;const vec4 v0=vec4(0.13333333333333333,0.12156862745098039,0.10588235294117647,1);const float e1=0.13;const vec4 v1=vec4(0.2549019607843137,0.19607843137254902,0.1607843137254902,1);const float e2=0.25;const vec4 v2=vec4(0.3843137254901961,0.27058823529411763,0.20392156862745098,1);const float e3=0.38;const vec4 v3=vec4(0.5137254901960784,0.34901960784313724,0.2235294117647059,1);const float e4=0.5;const vec4 v4=vec4(0.6313725490196078,0.4392156862745098,0.23137254901960785,1);const float e5=0.63;const vec4 v5=vec4(0.7254901960784313,0.5490196078431373,0.25882352941176473,1);const float e6=0.75;const vec4 v6=vec4(0.792156862745098,0.6823529411764706,0.34509803921568627,1);const float e7=0.88;const vec4 v7=vec4(0.8470588235294118,0.8196078431372549,0.49411764705882355,1);const float e8=1.0;const vec4 v8=vec4(0.9137254901960784,0.9647058823529412,0.6705882352941176,1);float a0=smoothstep(e0,e1,x_40);float a1=smoothstep(e1,e2,x_40);float a2=smoothstep(e2,e3,x_40);float a3=smoothstep(e3,e4,x_40);float a4=smoothstep(e4,e5,x_40);float a5=smoothstep(e5,e6,x_40);float a6=smoothstep(e6,e7,x_40);float a7=smoothstep(e7,e8,x_40);return max(mix(v0,v1,a0)*step(e0,x_40)*step(x_40,e1),max(mix(v1,v2,a1)*step(e1,x_40)*step(x_40,e2),max(mix(v2,v3,a2)*step(e2,x_40)*step(x_40,e3),max(mix(v3,v4,a3)*step(e3,x_40)*step(x_40,e4),max(mix(v4,v5,a4)*step(e4,x_40)*step(x_40,e5),max(mix(v5,v6,a5)*step(e5,x_40)*step(x_40,e6),max(mix(v6,v7,a6)*step(e6,x_40)*step(x_40,e7),mix(v7,v8,a7)*step(e7,x_40)*step(x_40,e8))))))));}vec4 velocity_blue_297387650(float x_2){const float e0=0.0;const vec4 v0=vec4(0.06666666666666667,0.12549019607843137,0.25098039215686274,1);const float e1=0.13;const vec4 v1=vec4(0.13725490196078433,0.20392156862745098,0.4549019607843137,1);const float e2=0.25;const vec4 v2=vec4(0.11372549019607843,0.3176470588235294,0.611764705882353,1);const float e3=0.38;const vec4 v3=vec4(0.12156862745098039,0.44313725490196076,0.6352941176470588,1);const float e4=0.5;const vec4 v4=vec4(0.19607843137254902,0.5647058823529412,0.6627450980392157,1);const float e5=0.63;const vec4 v5=vec4(0.3411764705882353,0.6784313725490196,0.6901960784313725,1);const float e6=0.75;const vec4 v6=vec4(0.5843137254901961,0.7686274509803922,0.7411764705882353,1);const float e7=0.88;const vec4 v7=vec4(0.796078431372549,0.8666666666666667,0.8274509803921568,1);const float e8=1.0;const vec4 v8=vec4(0.996078431372549,0.984313725490196,0.9019607843137255,1);float a0=smoothstep(e0,e1,x_2);float a1=smoothstep(e1,e2,x_2);float a2=smoothstep(e2,e3,x_2);float a3=smoothstep(e3,e4,x_2);float a4=smoothstep(e4,e5,x_2);float a5=smoothstep(e5,e6,x_2);float a6=smoothstep(e6,e7,x_2);float a7=smoothstep(e7,e8,x_2);return max(mix(v0,v1,a0)*step(e0,x_2)*step(x_2,e1),max(mix(v1,v2,a1)*step(e1,x_2)*step(x_2,e2),max(mix(v2,v3,a2)*step(e2,x_2)*step(x_2,e3),max(mix(v3,v4,a3)*step(e3,x_2)*step(x_2,e4),max(mix(v4,v5,a4)*step(e4,x_2)*step(x_2,e5),max(mix(v5,v6,a5)*step(e5,x_2)*step(x_2,e6),max(mix(v6,v7,a6)*step(e6,x_2)*step(x_2,e7),mix(v7,v8,a7)*step(e7,x_2)*step(x_2,e8))))))));}vec4 velocity_green_2558432129(float x_27){const float e0=0.0;const vec4 v0=vec4(0.09019607843137255,0.13725490196078433,0.07450980392156863,1);const float e1=0.13;const vec4 v1=vec4(0.09411764705882353,0.25098039215686274,0.14901960784313725,1);const float e2=0.25;const vec4 v2=vec4(0.043137254901960784,0.37254901960784315,0.17647058823529413,1);const float e3=0.38;const vec4 v3=vec4(0.15294117647058825,0.4823529411764706,0.13725490196078433,1);const float e4=0.5;const vec4 v4=vec4(0.37254901960784315,0.5725490196078431,0.047058823529411764,1);const float e5=0.63;const vec4 v5=vec4(0.596078431372549,0.6470588235294118,0.07058823529411765,1);const float e6=0.75;const vec4 v6=vec4(0.788235294117647,0.7294117647058823,0.27058823529411763,1);const float e7=0.88;const vec4 v7=vec4(0.9137254901960784,0.8470588235294118,0.5372549019607843,1);const float e8=1.0;const vec4 v8=vec4(1,0.9921568627450981,0.803921568627451,1);float a0=smoothstep(e0,e1,x_27);float a1=smoothstep(e1,e2,x_27);float a2=smoothstep(e2,e3,x_27);float a3=smoothstep(e3,e4,x_27);float a4=smoothstep(e4,e5,x_27);float a5=smoothstep(e5,e6,x_27);float a6=smoothstep(e6,e7,x_27);float a7=smoothstep(e7,e8,x_27);return max(mix(v0,v1,a0)*step(e0,x_27)*step(x_27,e1),max(mix(v1,v2,a1)*step(e1,x_27)*step(x_27,e2),max(mix(v2,v3,a2)*step(e2,x_27)*step(x_27,e3),max(mix(v3,v4,a3)*step(e3,x_27)*step(x_27,e4),max(mix(v4,v5,a4)*step(e4,x_27)*step(x_27,e5),max(mix(v5,v6,a5)*step(e5,x_27)*step(x_27,e6),max(mix(v6,v7,a6)*step(e6,x_27)*step(x_27,e7),mix(v7,v8,a7)*step(e7,x_27)*step(x_27,e8))))))));}vec4 cubehelix(float x_37){const float e0=0.0;const vec4 v0=vec4(0,0,0,1);const float e1=0.07;const vec4 v1=vec4(0.08627450980392157,0.0196078431372549,0.23137254901960785,1);const float e2=0.13;const vec4 v2=vec4(0.23529411764705882,0.01568627450980392,0.4117647058823529,1);const float e3=0.2;const vec4 v3=vec4(0.42745098039215684,0.00392156862745098,0.5294117647058824,1);const float e4=0.27;const vec4 v4=vec4(0.6313725490196078,0,0.5764705882352941,1);const float e5=0.33;const vec4 v5=vec4(0.8235294117647058,0.00784313725490196,0.5568627450980392,1);const float e6=0.4;const vec4 v6=vec4(0.984313725490196,0.043137254901960784,0.4823529411764706,1);const float e7=0.47;const vec4 v7=vec4(1,0.11372549019607843,0.3803921568627451,1);const float e8=0.53;const vec4 v8=vec4(1,0.21176470588235294,0.27058823529411763,1);const float e9=0.6;const vec4 v9=vec4(1,0.3333333333333333,0.1803921568627451,1);const float e10=0.67;const vec4 v10=vec4(1,0.47058823529411764,0.13333333333333333,1);const float e11=0.73;const vec4 v11=vec4(1,0.615686274509804,0.1450980392156863,1);const float e12=0.8;const vec4 v12=vec4(0.9450980392156862,0.7490196078431373,0.2235294117647059,1);const float e13=0.87;const vec4 v13=vec4(0.8784313725490196,0.8627450980392157,0.36470588235294116,1);const float e14=0.93;const vec4 v14=vec4(0.8549019607843137,0.9450980392156862,0.5568627450980392,1);const float e15=1.0;const vec4 v15=vec4(0.8901960784313725,0.9921568627450981,0.7764705882352941,1);float a0=smoothstep(e0,e1,x_37);float a1=smoothstep(e1,e2,x_37);float a2=smoothstep(e2,e3,x_37);float a3=smoothstep(e3,e4,x_37);float a4=smoothstep(e4,e5,x_37);float a5=smoothstep(e5,e6,x_37);float a6=smoothstep(e6,e7,x_37);float a7=smoothstep(e7,e8,x_37);float a8=smoothstep(e8,e9,x_37);float a9=smoothstep(e9,e10,x_37);float a10=smoothstep(e10,e11,x_37);float a11=smoothstep(e11,e12,x_37);float a12=smoothstep(e12,e13,x_37);float a13=smoothstep(e13,e14,x_37);float a14=smoothstep(e14,e15,x_37);return max(mix(v0,v1,a0)*step(e0,x_37)*step(x_37,e1),max(mix(v1,v2,a1)*step(e1,x_37)*step(x_37,e2),max(mix(v2,v3,a2)*step(e2,x_37)*step(x_37,e3),max(mix(v3,v4,a3)*step(e3,x_37)*step(x_37,e4),max(mix(v4,v5,a4)*step(e4,x_37)*step(x_37,e5),max(mix(v5,v6,a5)*step(e5,x_37)*step(x_37,e6),max(mix(v6,v7,a6)*step(e6,x_37)*step(x_37,e7),max(mix(v7,v8,a7)*step(e7,x_37)*step(x_37,e8),max(mix(v8,v9,a8)*step(e8,x_37)*step(x_37,e9),max(mix(v9,v10,a9)*step(e9,x_37)*step(x_37,e10),max(mix(v10,v11,a10)*step(e10,x_37)*step(x_37,e11),max(mix(v11,v12,a11)*step(e11,x_37)*step(x_37,e12),max(mix(v12,v13,a12)*step(e12,x_37)*step(x_37,e13),max(mix(v13,v14,a13)*step(e13,x_37)*step(x_37,e14),mix(v14,v15,a14)*step(e14,x_37)*step(x_37,e15)))))))))))))));}float sample_and_apply_contrast_limits(SAMPLER_TYPE channel,vec2 vTexCoord,vec2 contrastLimits){float fragIntensity=float(texture(channel,vTexCoord).r);float contrastLimitsAppliedToIntensity=(fragIntensity-contrastLimits[0])/max(0.0005,(contrastLimits[1]-contrastLimits[0]));return max(0.,contrastLimitsAppliedToIntensity);}vec3 process_channel_intensity(float intensity,vec3 colors,int channelIndex,bool inLensAndUseLens,int lensSelection){float useColorValue=float(int((inLensAndUseLens&&channelIndex==lensSelection)||(!inLensAndUseLens)));vec3 rgb=max(0.,min(1.,intensity))*max(vec3(colors),(1.-useColorValue)*vec3(1.,1.,1.));return rgb;}vec4 apply_opacity(vec3 color,bool useTransparentColor,vec3 transparentColor,float opacity){return vec4(color,(color==transparentColor&&useTransparentColor)? 0. : opacity);}vec4 colormap(float intensity,float opacity,bool useTransparentColor){return apply_opacity(COLORMAP_FUNCTION(min(1.,intensity)).xyz,useTransparentColor,COLORMAP_FUNCTION(0.).xyz,opacity);}\";\nvar channels$1 = {\n  name: \"channel-intensity-module\",\n  defines: {\n    SAMPLER_TYPE: \"usampler2D\",\n    COLORMAP_FUNCTION: \"\"\n  },\n  fs: fs$3\n};\nvar fs$2 = \"#define GLSLIFY 1\\nbool frag_in_lens_bounds(vec2 lensCenter,vec2 vTexCoord,float majorLensAxis,float minorLensAxis,float lensBorderRadius){return pow((lensCenter.x-vTexCoord.x)/majorLensAxis,2.)+pow((lensCenter.y-vTexCoord.y)/minorLensAxis,2.)<(1.-lensBorderRadius);}bool frag_on_lens_bounds(vec2 lensCenter,vec2 vTexCoord,float majorLensAxis,float minorLensAxis,float lensBorderRadius){float ellipseDistance=pow((lensCenter.x-vTexCoord.x)/majorLensAxis,2.)+pow((lensCenter.y-vTexCoord.y)/minorLensAxis,2.);return ellipseDistance<=1.&&ellipseDistance>=(1.-lensBorderRadius);}\";\nvar lens = {\n  name: \"lens-module\",\n  defines: {\n    SAMPLER_TYPE: \"usampler2D\"\n  },\n  fs: fs$2\n};\nvar MAX_COLOR_INTENSITY = 255;\nvar DEFAULT_COLOR_OFF = [0, 0, 0];\nvar MAX_CHANNELS = 6;\nvar DEFAULT_FONT_FAMILY = \"-apple-system, 'Helvetica Neue', Arial, sans-serif\";\nvar DTYPE_VALUES = {\n  Uint8: {\n    format: GL.R8UI,\n    dataFormat: GL.RED_INTEGER,\n    type: GL.UNSIGNED_BYTE,\n    max: __pow(2, 8) - 1,\n    sampler: \"usampler2D\"\n  },\n  Uint16: {\n    format: GL.R16UI,\n    dataFormat: GL.RED_INTEGER,\n    type: GL.UNSIGNED_SHORT,\n    max: __pow(2, 16) - 1,\n    sampler: \"usampler2D\"\n  },\n  Uint32: {\n    format: GL.R32UI,\n    dataFormat: GL.RED_INTEGER,\n    type: GL.UNSIGNED_INT,\n    max: __pow(2, 32) - 1,\n    sampler: \"usampler2D\"\n  },\n  Float32: {\n    format: GL.R32F,\n    dataFormat: GL.RED,\n    type: GL.FLOAT,\n    max: 3.4 * __pow(10, 38),\n    sampler: \"sampler2D\"\n  },\n  Int8: {\n    format: GL.R8I,\n    dataFormat: GL.RED_INTEGER,\n    type: GL.BYTE,\n    max: __pow(2, 8 - 1) - 1,\n    sampler: \"isampler2D\"\n  },\n  Int16: {\n    format: GL.R16I,\n    dataFormat: GL.RED_INTEGER,\n    type: GL.SHORT,\n    max: __pow(2, 16 - 1) - 1,\n    sampler: \"isampler2D\"\n  },\n  Int32: {\n    format: GL.R32I,\n    dataFormat: GL.RED_INTEGER,\n    type: GL.INT,\n    max: __pow(2, 32 - 1) - 1,\n    sampler: \"isampler2D\"\n  },\n  Float64: {\n    format: GL.R32F,\n    dataFormat: GL.RED,\n    type: GL.FLOAT,\n    max: 3.4 * __pow(10, 38),\n    sampler: \"sampler2D\",\n    cast: data => new Float32Array(data)\n  }\n};\nvar COLORMAPS = [\"jet\", \"hsv\", \"hot\", \"cool\", \"spring\", \"summer\", \"autumn\", \"winter\", \"bone\", \"copper\", \"greys\", \"yignbu\", \"greens\", \"yiorrd\", \"bluered\", \"rdbu\", \"picnic\", \"rainbow\", \"portland\", \"blackbody\", \"earth\", \"electric\", \"alpha\", \"viridis\", \"inferno\", \"magma\", \"plasma\", \"warm\", \"rainbow-soft\", \"bathymetry\", \"cdom\", \"chlorophyll\", \"density\", \"freesurface-blue\", \"freesurface-red\", \"oxygen\", \"par\", \"phase\", \"salinity\", \"temperature\", \"turbidity\", \"velocity-blue\", \"velocity-green\", \"cubehelix\"];\nvar RENDERING_MODES;\n\n(function (RENDERING_MODES2) {\n  RENDERING_MODES2[\"MAX_INTENSITY_PROJECTION\"] = \"Maximum Intensity Projection\";\n  RENDERING_MODES2[\"MIN_INTENSITY_PROJECTION\"] = \"Minimum Intensity Projection\";\n  RENDERING_MODES2[\"ADDITIVE\"] = \"Additive\";\n})(RENDERING_MODES || (RENDERING_MODES = {}));\n\nfunction range2(len) {\n  return [...Array(len).keys()];\n}\n\nfunction padWithDefault(arr, defaultValue, padWidth) {\n  for (let i = 0; i < padWidth; i += 1) {\n    arr.push(defaultValue);\n  }\n\n  return arr;\n}\n\nfunction getDtypeValues(dtype) {\n  const values = DTYPE_VALUES[dtype];\n\n  if (!values) {\n    const valid = Object.keys(DTYPE_VALUES);\n    throw Error(`Dtype not supported, got ${dtype}. Must be one of ${valid}.`);\n  }\n\n  return values;\n}\n\nfunction padColorsAndWindows(_ref11) {\n  let {\n    contrastLimits,\n    colors,\n    channelsVisible,\n    domain,\n    dtype\n  } = _ref11;\n  const lengths = [contrastLimits.length, colors.length];\n\n  if (lengths.every(l => l !== lengths[0])) {\n    throw Error(\"Inconsistent number of slider values and colors provided\");\n  }\n\n  const newColors = colors.map((color, i) => channelsVisible[i] ? color.map(c => c / MAX_COLOR_INTENSITY) : DEFAULT_COLOR_OFF);\n  const maxSliderValue = domain && domain[1] || getDtypeValues(dtype).max;\n  const newContrastLimits = contrastLimits.map((slider, i) => channelsVisible[i] ? slider : [maxSliderValue, maxSliderValue]);\n  const padSize = MAX_CHANNELS - newColors.length;\n\n  if (padSize < 0) {\n    throw Error(`${lengths} channels passed in, but only 6 are allowed.`);\n  }\n\n  const paddedColors = padWithDefault(newColors, DEFAULT_COLOR_OFF, padSize);\n  const paddedContrastLimits = padWithDefault(newContrastLimits, [maxSliderValue, maxSliderValue], padSize);\n  const paddedColorsAndWindows = {\n    paddedContrastLimits: paddedContrastLimits.reduce((acc, val) => acc.concat(val), []),\n    paddedColors: paddedColors.reduce((acc, val) => acc.concat(val), [])\n  };\n  return paddedColorsAndWindows;\n}\n\nfunction onPointer(layer) {\n  const {\n    viewportId,\n    lensRadius\n  } = layer.props;\n\n  if (!viewportId) {\n    layer.setState({\n      unprojectLensBounds: [0, 0, 0, 0]\n    });\n    return;\n  }\n\n  const {\n    mousePosition\n  } = layer.context;\n  const layerView = layer.context.deck.viewManager.views.filter(view => view.id === viewportId)[0];\n  const viewState = layer.context.deck.viewManager.viewState[viewportId];\n  const viewport = layerView.makeViewport(__spreadProps(__spreadValues({}, viewState), {\n    viewState\n  }));\n\n  if (mousePosition && viewport.containsPixel(mousePosition)) {\n    const offsetMousePosition = {\n      x: mousePosition.x - viewport.x,\n      y: mousePosition.y - viewport.y\n    };\n    const mousePositionBounds = [[offsetMousePosition.x - lensRadius, offsetMousePosition.y], [offsetMousePosition.x, offsetMousePosition.y + lensRadius], [offsetMousePosition.x + lensRadius, offsetMousePosition.y], [offsetMousePosition.x, offsetMousePosition.y - lensRadius]];\n    const unprojectLensBounds = mousePositionBounds.map((bounds, i) => viewport.unproject(bounds)[i % 2]);\n    layer.setState({\n      unprojectLensBounds\n    });\n  } else {\n    layer.setState({\n      unprojectLensBounds: [0, 0, 0, 0]\n    });\n  }\n}\n\nfunction getPhysicalSizeScalingMatrix(loader) {\n  var _a2, _b2;\n\n  const {\n    x,\n    y,\n    z\n  } = (_b2 = (_a2 = loader == null ? void 0 : loader.meta) == null ? void 0 : _a2.physicalSizes) != null ? _b2 : {};\n\n  if ((x == null ? void 0 : x.size) && (y == null ? void 0 : y.size) && (z == null ? void 0 : z.size)) {\n    const min = Math.min(z.size, x.size, y.size);\n    const ratio = [x.size / min, y.size / min, z.size / min];\n    return new Matrix4().scale(ratio);\n  }\n\n  return new Matrix4().identity();\n}\n\nvar SHADER_MODULES = [{\n  fs: fs1,\n  fscmap: fsColormap1,\n  vs: vs1\n}, {\n  fs: fs2,\n  fscmap: fsColormap2,\n  vs: vs2\n}];\n\nfunction validateWebGL2Filter(gl, interpolation) {\n  const canShowFloat = hasFeature(gl, FEATURES.TEXTURE_FLOAT);\n  const canShowLinear = hasFeature(gl, FEATURES.TEXTURE_FILTER_LINEAR_FLOAT);\n\n  if (!canShowFloat) {\n    throw new Error(\"WebGL1 context does not support floating point textures.  Unable to display raster data.\");\n  }\n\n  if (!canShowLinear && interpolation === GL.LINEAR) {\n    console.warn(\"LINEAR filtering not supported in WebGL1 context.  Falling back to NEAREST.\");\n    return GL.NEAREST;\n  }\n\n  return interpolation;\n}\n\nfunction getRenderingAttrs$1(dtype, gl, interpolation) {\n  const isLinear = interpolation === GL.LINEAR;\n\n  if (!isWebGL2(gl)) {\n    return {\n      format: GL.LUMINANCE,\n      dataFormat: GL.LUMINANCE,\n      type: GL.FLOAT,\n      sampler: \"sampler2D\",\n      shaderModule: SHADER_MODULES[0],\n      filter: validateWebGL2Filter(gl, interpolation),\n      cast: data => new Float32Array(data)\n    };\n  }\n\n  const values = getDtypeValues(isLinear ? \"Float32\" : dtype);\n  return __spreadProps(__spreadValues({}, values), {\n    shaderModule: SHADER_MODULES[1],\n    filter: interpolation,\n    cast: isLinear ? data => new Float32Array(data) : data => data\n  });\n}\n\nvar defaultProps$8 = {\n  pickable: {\n    type: \"boolean\",\n    value: true,\n    compare: true\n  },\n  coordinateSystem: COORDINATE_SYSTEM2.CARTESIAN,\n  channelData: {\n    type: \"object\",\n    value: {},\n    compare: true\n  },\n  bounds: {\n    type: \"array\",\n    value: [0, 0, 1, 1],\n    compare: true\n  },\n  colors: {\n    type: \"array\",\n    value: [],\n    compare: true\n  },\n  contrastLimits: {\n    type: \"array\",\n    value: [],\n    compare: true\n  },\n  channelsVisible: {\n    type: \"array\",\n    value: [],\n    compare: true\n  },\n  opacity: {\n    type: \"number\",\n    value: 1,\n    compare: true\n  },\n  dtype: {\n    type: \"string\",\n    value: \"Uint16\",\n    compare: true\n  },\n  colormap: {\n    type: \"string\",\n    value: \"\",\n    compare: true\n  },\n  isLensOn: {\n    type: \"boolean\",\n    value: false,\n    compare: true\n  },\n  lensSelection: {\n    type: \"number\",\n    value: 0,\n    compare: true\n  },\n  lensBorderColor: {\n    type: \"array\",\n    value: [255, 255, 255],\n    compare: true\n  },\n  lensBorderRadius: {\n    type: \"number\",\n    value: 0.02,\n    compare: true\n  },\n  unprojectLensBounds: {\n    type: \"array\",\n    value: [0, 0, 0, 0],\n    compare: true\n  },\n  transparentColor: {\n    type: \"array\",\n    value: null,\n    compare: true\n  },\n  interpolation: {\n    type: \"number\",\n    value: GL.NEAREST,\n    compare: true\n  }\n};\nvar XRLayer = class extends Layer {\n  getShaders() {\n    const {\n      colormap,\n      dtype,\n      interpolation\n    } = this.props;\n    const {\n      shaderModule,\n      sampler\n    } = getRenderingAttrs$1(dtype, this.context.gl, interpolation);\n    return super.getShaders({\n      fs: colormap ? shaderModule.fscmap : shaderModule.fs,\n      vs: shaderModule.vs,\n      defines: {\n        SAMPLER_TYPE: sampler,\n        COLORMAP_FUNCTION: colormap || \"viridis\"\n      },\n      modules: [project32, picking, channels$1, lens]\n    });\n  }\n\n  initializeState() {\n    const {\n      gl\n    } = this.context;\n    gl.pixelStorei(GL.UNPACK_ALIGNMENT, 1);\n    gl.pixelStorei(GL.PACK_ALIGNMENT, 1);\n    const attributeManager = this.getAttributeManager();\n    attributeManager.add({\n      positions: {\n        size: 3,\n        type: GL.DOUBLE,\n        fp64: this.use64bitPositions(),\n        update: this.calculatePositions,\n        noAlloc: true\n      }\n    });\n    this.setState({\n      numInstances: 1,\n      positions: new Float64Array(12)\n    });\n  }\n\n  finalizeState() {\n    super.finalizeState();\n\n    if (this.state.textures) {\n      Object.values(this.state.textures).forEach(tex => tex && tex.delete());\n    }\n  }\n\n  updateState(_ref12) {\n    let {\n      props,\n      oldProps,\n      changeFlags\n    } = _ref12;\n\n    var _a2, _b2;\n\n    if (changeFlags.extensionsChanged || props.colormap !== oldProps.colormap || props.interpolation !== oldProps.interpolation) {\n      const {\n        gl\n      } = this.context;\n\n      if (this.state.model) {\n        this.state.model.delete();\n      }\n\n      this.setState({\n        model: this._getModel(gl)\n      });\n      this.getAttributeManager().invalidateAll();\n    }\n\n    if (props.channelData !== oldProps.channelData && ((_a2 = props.channelData) == null ? void 0 : _a2.data) !== ((_b2 = oldProps.channelData) == null ? void 0 : _b2.data) || props.interpolation !== oldProps.interpolation) {\n      this.loadChannelTextures(props.channelData);\n    }\n\n    const attributeManager = this.getAttributeManager();\n\n    if (props.bounds !== oldProps.bounds) {\n      attributeManager.invalidate(\"positions\");\n    }\n  }\n\n  _getModel(gl) {\n    if (!gl) {\n      return null;\n    }\n\n    return new Model(gl, __spreadProps(__spreadValues({}, this.getShaders()), {\n      id: this.props.id,\n      geometry: new Geometry({\n        drawMode: GL.TRIANGLE_FAN,\n        vertexCount: 4,\n        attributes: {\n          texCoords: new Float32Array([0, 1, 0, 0, 1, 0, 1, 1])\n        }\n      }),\n      isInstanced: false\n    }));\n  }\n\n  calculatePositions(attributes) {\n    const {\n      positions\n    } = this.state;\n    const {\n      bounds\n    } = this.props;\n    positions[0] = bounds[0];\n    positions[1] = bounds[1];\n    positions[2] = 0;\n    positions[3] = bounds[0];\n    positions[4] = bounds[3];\n    positions[5] = 0;\n    positions[6] = bounds[2];\n    positions[7] = bounds[3];\n    positions[8] = 0;\n    positions[9] = bounds[2];\n    positions[10] = bounds[1];\n    positions[11] = 0;\n    attributes.value = positions;\n  }\n\n  draw(_ref13) {\n    let {\n      uniforms\n    } = _ref13;\n    const {\n      textures,\n      model\n    } = this.state;\n\n    if (textures && model) {\n      const {\n        contrastLimits,\n        colors,\n        opacity,\n        domain,\n        dtype,\n        channelsVisible,\n        unprojectLensBounds,\n        bounds,\n        isLensOn,\n        lensSelection,\n        lensBorderColor,\n        lensBorderRadius,\n        transparentColor\n      } = this.props;\n      const numTextures = Object.values(textures).filter(t => t).length;\n      const {\n        paddedContrastLimits,\n        paddedColors\n      } = padColorsAndWindows({\n        contrastLimits: contrastLimits.slice(0, numTextures),\n        colors: colors.slice(0, numTextures),\n        channelsVisible: channelsVisible.slice(0, numTextures),\n        domain,\n        dtype\n      });\n      const [leftMouseBound, bottomMouseBound, rightMouseBound, topMouseBound] = unprojectLensBounds;\n      const [left, bottom, right, top] = bounds;\n      const leftMouseBoundScaled = (leftMouseBound - left) / (right - left);\n      const bottomMouseBoundScaled = (bottomMouseBound - top) / (bottom - top);\n      const rightMouseBoundScaled = (rightMouseBound - left) / (right - left);\n      const topMouseBoundScaled = (topMouseBound - top) / (bottom - top);\n      model.setUniforms(__spreadValues(__spreadProps(__spreadValues({}, uniforms), {\n        colors: paddedColors,\n        contrastLimits: paddedContrastLimits,\n        opacity,\n        majorLensAxis: (rightMouseBoundScaled - leftMouseBoundScaled) / 2,\n        minorLensAxis: (bottomMouseBoundScaled - topMouseBoundScaled) / 2,\n        lensCenter: [(rightMouseBoundScaled + leftMouseBoundScaled) / 2, (bottomMouseBoundScaled + topMouseBoundScaled) / 2],\n        isLensOn,\n        lensSelection,\n        lensBorderColor,\n        lensBorderRadius,\n        transparentColor: (transparentColor || [0, 0, 0]).map(i => i / 255),\n        useTransparentColor: Boolean(transparentColor)\n      }), textures)).draw();\n    }\n  }\n\n  loadChannelTextures(channelData) {\n    const textures = {\n      channel0: null,\n      channel1: null,\n      channel2: null,\n      channel3: null,\n      channel4: null,\n      channel5: null\n    };\n\n    if (this.state.textures) {\n      Object.values(this.state.textures).forEach(tex => tex && tex.delete());\n    }\n\n    if (channelData && Object.keys(channelData).length > 0 && channelData.data) {\n      channelData.data.forEach((d, i) => {\n        textures[`channel${i}`] = this.dataToTexture(d, channelData.width, channelData.height);\n      }, this);\n      this.setState({\n        textures\n      });\n    }\n  }\n\n  dataToTexture(data, width, height) {\n    var _a2, _b2;\n\n    const {\n      interpolation\n    } = this.props;\n    const attrs = getRenderingAttrs$1(this.props.dtype, this.context.gl, interpolation);\n    return new Texture2D(this.context.gl, {\n      width,\n      height,\n      data: (_b2 = (_a2 = attrs.cast) == null ? void 0 : _a2.call(attrs, data)) != null ? _b2 : data,\n      mipmaps: false,\n      parameters: {\n        [GL.TEXTURE_MIN_FILTER]: attrs.filter,\n        [GL.TEXTURE_MAG_FILTER]: attrs.filter,\n        [GL.TEXTURE_WRAP_S]: GL.CLAMP_TO_EDGE,\n        [GL.TEXTURE_WRAP_T]: GL.CLAMP_TO_EDGE\n      },\n      format: attrs.format,\n      dataFormat: attrs.dataFormat,\n      type: attrs.type\n    });\n  }\n\n};\nXRLayer.layerName = \"XRLayer\";\nXRLayer.defaultProps = defaultProps$8;\nvar PHOTOMETRIC_INTERPRETATIONS = {\n  WhiteIsZero: 0,\n  BlackIsZero: 1,\n  RGB: 2,\n  Palette: 3,\n  TransparencyMask: 4,\n  CMYK: 5,\n  YCbCr: 6,\n  CIELab: 8,\n  ICCLab: 9\n};\n\nvar defaultProps$7 = __spreadProps(__spreadValues({}, BitmapLayer$1.defaultProps), {\n  pickable: {\n    type: \"boolean\",\n    value: true,\n    compare: true\n  },\n  coordinateSystem: COORDINATE_SYSTEM2.CARTESIAN\n});\n\nvar getPhotometricInterpretationShader = (photometricInterpretation, transparentColorInHook) => {\n  const useTransparentColor = transparentColorInHook ? \"true\" : \"false\";\n  const transparentColorVector = `vec3(${(transparentColorInHook || [0, 0, 0]).map(i => String(i / 255)).join(\",\")})`;\n\n  switch (photometricInterpretation) {\n    case PHOTOMETRIC_INTERPRETATIONS.RGB:\n      return `color[3] = (${useTransparentColor} && (color.rgb == ${transparentColorVector})) ? 0.0 : color.a;`;\n\n    case PHOTOMETRIC_INTERPRETATIONS.WhiteIsZero:\n      return `          float value = 1.0 - (color.r / 256.0);\n          color = vec4(value, value, value, (${useTransparentColor} && vec3(value, value, value) == ${transparentColorVector}) ? 0.0 : color.a);\n        `;\n\n    case PHOTOMETRIC_INTERPRETATIONS.BlackIsZero:\n      return `          float value = (color.r / 256.0);\n          color = vec4(value, value, value, (${useTransparentColor} && vec3(value, value, value) == ${transparentColorVector}) ? 0.0 : color.a);\n        `;\n\n    case PHOTOMETRIC_INTERPRETATIONS.YCbCr:\n      return `          float y = color[0];\n          float cb = color[1];\n          float cr = color[2];\n          color[0] = (y + (1.40200 * (cr - .5)));\n          color[1] = (y - (0.34414 * (cb - .5)) - (0.71414 * (cr - .5)));\n          color[2] = (y + (1.77200 * (cb - .5)));\n          color[3] = (${useTransparentColor} && distance(color.rgb, ${transparentColorVector}) < 0.01) ? 0.0 : color.a;\n        `;\n\n    default:\n      console.error(\"Unsupported photometric interpretation or none provided.  No transformation will be done to image data\");\n      return \"\";\n  }\n};\n\nvar getTransparentColor = photometricInterpretation => {\n  switch (photometricInterpretation) {\n    case PHOTOMETRIC_INTERPRETATIONS.RGB:\n      return [0, 0, 0, 0];\n\n    case PHOTOMETRIC_INTERPRETATIONS.WhiteIsZero:\n      return [255, 255, 255, 0];\n\n    case PHOTOMETRIC_INTERPRETATIONS.BlackIsZero:\n      return [0, 0, 0, 0];\n\n    case PHOTOMETRIC_INTERPRETATIONS.YCbCr:\n      return [16, 128, 128, 0];\n\n    default:\n      console.error(\"Unsupported photometric interpretation or none provided.  No transformation will be done to image data\");\n      return [0, 0, 0, 0];\n  }\n};\n\nvar BitmapLayerWrapper = class extends BitmapLayer$1 {\n  _getModel(gl) {\n    const {\n      photometricInterpretation,\n      transparentColorInHook\n    } = this.props;\n    const photometricInterpretationShader = getPhotometricInterpretationShader(photometricInterpretation, transparentColorInHook);\n\n    if (!gl) {\n      return null;\n    }\n\n    return new Model(gl, __spreadProps(__spreadValues({}, this.getShaders()), {\n      id: this.props.id,\n      geometry: new Geometry({\n        drawMode: GL.TRIANGLES,\n        vertexCount: 6\n      }),\n      isInstanced: false,\n      inject: {\n        \"fs:DECKGL_FILTER_COLOR\": photometricInterpretationShader\n      }\n    }));\n  }\n\n};\nvar BitmapLayer = class extends CompositeLayer {\n  initializeState(args) {\n    const {\n      gl\n    } = this.context;\n    gl.pixelStorei(GL.UNPACK_ALIGNMENT, 1);\n    gl.pixelStorei(GL.PACK_ALIGNMENT, 1);\n    super.initializeState(args);\n  }\n\n  renderLayers() {\n    const {\n      photometricInterpretation,\n      transparentColor: transparentColorInHook\n    } = this.props;\n    const transparentColor = getTransparentColor(photometricInterpretation);\n    return new BitmapLayerWrapper(this.props, {\n      transparentColor,\n      transparentColorInHook,\n      id: `${this.props.id}-wrapped`\n    });\n  }\n\n};\nBitmapLayer.layerName = \"BitmapLayer\";\nBitmapLayer.PHOTOMETRIC_INTERPRETATIONS = PHOTOMETRIC_INTERPRETATIONS;\nBitmapLayer.defaultProps = __spreadProps(__spreadValues({}, defaultProps$7), {\n  image: {\n    type: \"object\",\n    value: {},\n    compare: true\n  },\n  transparentColor: {\n    type: \"array\",\n    value: [0, 0, 0],\n    compare: true\n  },\n  photometricInterpretation: {\n    type: \"number\",\n    value: 2,\n    compare: true\n  }\n});\nBitmapLayerWrapper.defaultProps = defaultProps$7;\nBitmapLayerWrapper.layerName = \"BitmapLayerWrapper\";\n\nfunction getChannelStats(arr) {\n  let len = arr.length;\n  let min = Infinity;\n  let max2 = -Infinity;\n  let total = 0;\n\n  while (len--) {\n    if (arr[len] < min) {\n      min = arr[len];\n    }\n\n    if (arr[len] > max2) {\n      max2 = arr[len];\n    }\n\n    total += arr[len];\n  }\n\n  const mean = total / arr.length;\n  len = arr.length;\n  let sumSquared = 0;\n\n  while (len--) {\n    sumSquared += __pow(arr[len] - mean, 2);\n  }\n\n  const sd = __pow(sumSquared / arr.length, 0.5);\n\n  const mid = Math.floor(arr.length / 2);\n  const firstQuartileLocation = Math.floor(arr.length / 4);\n  const thirdQuartileLocation = 3 * Math.floor(arr.length / 4);\n  quickselect(arr, mid);\n  const median = arr[mid];\n  quickselect(arr, firstQuartileLocation, 0, mid);\n  const q1 = arr[firstQuartileLocation];\n  quickselect(arr, thirdQuartileLocation, mid, arr.length - 1);\n  const q3 = arr[thirdQuartileLocation];\n  const cutoffArr = arr.filter(i => i > 0);\n  const cutoffPercentile = 5e-4;\n  const topCutoffLocation = Math.floor(cutoffArr.length * (1 - cutoffPercentile));\n  const bottomCutoffLocation = Math.floor(cutoffArr.length * cutoffPercentile);\n  quickselect(cutoffArr, topCutoffLocation);\n  quickselect(cutoffArr, bottomCutoffLocation, 0, topCutoffLocation);\n  const contrastLimits = [cutoffArr[bottomCutoffLocation] || 0, cutoffArr[topCutoffLocation] || 0];\n  return {\n    mean,\n    sd,\n    q1,\n    q3,\n    median,\n    domain: [min, max2],\n    contrastLimits\n  };\n}\n\nfunction ensureArray(x) {\n  return Array.isArray(x) ? x : [x];\n}\n\nfunction intToRgba(int) {\n  if (!Number.isInteger(int)) {\n    throw Error(\"Not an integer.\");\n  }\n\n  const buffer = new ArrayBuffer(4);\n  const view = new DataView(buffer);\n  view.setInt32(0, int, false);\n  const bytes = new Uint8Array(buffer);\n  return Array.from(bytes);\n}\n\nfunction isInterleaved(shape) {\n  const lastDimSize = shape[shape.length - 1];\n  return lastDimSize === 3 || lastDimSize === 4;\n}\n\nfunction getLabels(dimOrder) {\n  return dimOrder.toLowerCase().split(\"\").reverse();\n}\n\nfunction getDims(labels) {\n  const lookup = new Map(labels.map((name2, i) => [name2, i]));\n\n  if (lookup.size !== labels.length) {\n    throw Error(\"Labels must be unique, found duplicated label.\");\n  }\n\n  return name2 => {\n    const index = lookup.get(name2);\n\n    if (index === void 0) {\n      throw Error(\"Invalid dimension.\");\n    }\n\n    return index;\n  };\n}\n\nfunction getImageSize(source) {\n  const interleaved = isInterleaved(source.shape);\n  const [height, width] = source.shape.slice(interleaved ? -3 : -2);\n  return {\n    height,\n    width\n  };\n}\n\nfunction prevPowerOf2(x) {\n  return __pow(2, Math.floor(Math.log2(x)));\n}\n\nvar SIGNAL_ABORTED = \"__vivSignalAborted\";\n\nfunction renderSubLayers(props) {\n  const {\n    bbox: {\n      left,\n      top,\n      right,\n      bottom\n    },\n    x,\n    y,\n    z\n  } = props.tile;\n  const {\n    data,\n    id,\n    loader,\n    maxZoom\n  } = props;\n\n  if ([left, bottom, right, top].some(v => v < 0) || !data) {\n    return null;\n  }\n\n  const base = loader[0];\n  const {\n    height,\n    width\n  } = getImageSize(base);\n  const bounds = [left, data.height < base.tileSize ? height : bottom, data.width < base.tileSize ? width : right, top];\n\n  if (isInterleaved(base.shape)) {\n    const {\n      photometricInterpretation = 2\n    } = base.meta;\n    return new BitmapLayer(props, {\n      image: data,\n      photometricInterpretation,\n      bounds,\n      id: `tile-sub-layer-${bounds}-${id}`,\n      tileId: {\n        x,\n        y,\n        z\n      }\n    });\n  }\n\n  return new XRLayer(props, {\n    channelData: data,\n    bounds,\n    id: `tile-sub-layer-${bounds}-${id}`,\n    tileId: {\n      x,\n      y,\n      z\n    },\n    interpolation: z === maxZoom ? GL.NEAREST : GL.LINEAR\n  });\n}\n\nvar defaultProps$6 = {\n  pickable: {\n    type: \"boolean\",\n    value: true,\n    compare: true\n  },\n  coordinateSystem: COORDINATE_SYSTEM2.CARTESIAN,\n  contrastLimits: {\n    type: \"array\",\n    value: [],\n    compare: true\n  },\n  colors: {\n    type: \"array\",\n    value: [],\n    compare: true\n  },\n  channelsVisible: {\n    type: \"array\",\n    value: [],\n    compare: true\n  },\n  renderSubLayers: {\n    type: \"function\",\n    value: renderSubLayers,\n    compare: false\n  },\n  colormap: {\n    type: \"string\",\n    value: \"\",\n    compare: true\n  },\n  dtype: {\n    type: \"string\",\n    value: \"Uint16\",\n    compare: true\n  },\n  domain: {\n    type: \"array\",\n    value: [],\n    compare: true\n  },\n  viewportId: {\n    type: \"string\",\n    value: \"\",\n    compare: true\n  },\n  unprojectLensBounds: {\n    type: \"array\",\n    value: [0, 0, 0, 0],\n    compare: true\n  },\n  isLensOn: {\n    type: \"boolean\",\n    value: false,\n    compare: true\n  },\n  lensSelection: {\n    type: \"number\",\n    value: 0,\n    compare: true\n  },\n  lensRadius: {\n    type: \"number\",\n    value: 100,\n    compare: true\n  },\n  lensBorderColor: {\n    type: \"array\",\n    value: [255, 255, 255],\n    compare: true\n  },\n  lensBorderRadius: {\n    type: \"number\",\n    value: 0.02,\n    compare: true\n  },\n  transparentColor: {\n    type: \"array\",\n    value: null,\n    compare: true\n  },\n  interpolation: {\n    type: \"number\",\n    value: null,\n    compare: true\n  }\n};\nvar MultiscaleImageLayerBase = class extends TileLayer {\n  _updateTileset() {\n    if (!this.props.viewportId) {\n      super._updateTileset();\n    }\n\n    if (this.props.viewportId && this.context.viewport.id === this.props.viewportId || !this.state.tileset._viewport) {\n      super._updateTileset();\n    }\n  }\n\n};\nMultiscaleImageLayerBase.layerName = \"MultiscaleImageLayerBase\";\nMultiscaleImageLayerBase.defaultProps = defaultProps$6;\nvar defaultProps$5 = {\n  pickable: {\n    type: \"boolean\",\n    value: true,\n    compare: true\n  },\n  coordinateSystem: COORDINATE_SYSTEM2.CARTESIAN,\n  contrastLimits: {\n    type: \"array\",\n    value: [],\n    compare: true\n  },\n  channelsVisible: {\n    type: \"array\",\n    value: [],\n    compare: true\n  },\n  colors: {\n    type: \"array\",\n    value: [],\n    compare: true\n  },\n  selections: {\n    type: \"array\",\n    value: [],\n    compare: true\n  },\n  colormap: {\n    type: \"string\",\n    value: \"\",\n    compare: true\n  },\n  domain: {\n    type: \"array\",\n    value: [],\n    compare: true\n  },\n  viewportId: {\n    type: \"string\",\n    value: \"\",\n    compare: true\n  },\n  loader: {\n    type: \"object\",\n    value: {\n      getRaster: () => __async(void 0, null, function* () {\n        return {\n          data: [],\n          height: 0,\n          width: 0\n        };\n      }),\n      dtype: \"Uint16\"\n    },\n    compare: true\n  },\n  isLensOn: {\n    type: \"boolean\",\n    value: false,\n    compare: true\n  },\n  lensSelection: {\n    type: \"number\",\n    value: 0,\n    compare: true\n  },\n  lensRadius: {\n    type: \"number\",\n    value: 100,\n    compare: true\n  },\n  lensBorderColor: {\n    type: \"array\",\n    value: [255, 255, 255],\n    compare: true\n  },\n  lensBorderRadius: {\n    type: \"number\",\n    value: 0.02,\n    compare: true\n  },\n  onClick: {\n    type: \"function\",\n    value: null,\n    compare: true\n  },\n  transparentColor: {\n    type: \"array\",\n    value: null,\n    compare: true\n  },\n  onViewportLoad: {\n    type: \"function\",\n    value: null,\n    compare: true\n  },\n  interpolation: {\n    type: \"number\",\n    value: GL.NEAREST,\n    compare: true\n  }\n};\nvar ImageLayer = class extends CompositeLayer {\n  initializeState() {\n    this.state = {\n      unprojectLensBounds: [0, 0, 0, 0],\n      width: 0,\n      height: 0,\n      data: []\n    };\n\n    if (this.context.deck) {\n      this.context.deck.eventManager.on({\n        pointermove: () => onPointer(this),\n        pointerleave: () => onPointer(this),\n        wheel: () => onPointer(this)\n      });\n    }\n  }\n\n  finalizeState() {\n    this.state.abortController.abort();\n  }\n\n  updateState(_ref14) {\n    let {\n      props,\n      oldProps\n    } = _ref14;\n    const loaderChanged = props.loader !== oldProps.loader;\n    const selectionsChanged = props.selections !== oldProps.selections;\n\n    if (loaderChanged || selectionsChanged) {\n      const {\n        loader,\n        selections = [],\n        onViewportLoad\n      } = this.props;\n      const abortController = new AbortController();\n      this.setState({\n        abortController\n      });\n      const {\n        signal\n      } = abortController;\n\n      const getRaster = selection => loader.getRaster({\n        selection,\n        signal\n      });\n\n      const dataPromises = selections.map(getRaster);\n      Promise.all(dataPromises).then(rasters => {\n        const raster = {\n          data: rasters.map(d => d.data),\n          width: rasters[0].width,\n          height: rasters[0].height\n        };\n\n        if (isInterleaved(loader.shape)) {\n          raster.data = raster.data[0];\n\n          if (raster.data.length === raster.width * raster.height * 3) {\n            raster.format = GL.RGB;\n            raster.dataFormat = GL.RGB;\n          }\n        }\n\n        if (onViewportLoad) {\n          onViewportLoad(raster);\n        }\n\n        this.setState(__spreadValues({}, raster));\n      }).catch(e => {\n        if (e !== SIGNAL_ABORTED) {\n          throw e;\n        }\n      });\n    }\n  }\n\n  getPickingInfo(_ref15) {\n    let {\n      info,\n      sourceLayer\n    } = _ref15;\n    info.sourceLayer = sourceLayer;\n    info.tile = sourceLayer.props.tile;\n    return info;\n  }\n\n  renderLayers() {\n    const {\n      loader,\n      id\n    } = this.props;\n    const {\n      dtype\n    } = loader;\n    const {\n      width,\n      height,\n      data,\n      unprojectLensBounds\n    } = this.state;\n    if (!(width && height)) return null;\n    const bounds = [0, height, width, 0];\n\n    if (isInterleaved(loader.shape)) {\n      const {\n        photometricInterpretation = 2\n      } = loader.meta;\n      return new BitmapLayer(this.props, {\n        image: this.state,\n        photometricInterpretation,\n        bounds,\n        id: `image-sub-layer-${bounds}-${id}`\n      });\n    }\n\n    return new XRLayer(this.props, {\n      channelData: {\n        data,\n        height,\n        width\n      },\n      bounds,\n      id: `image-sub-layer-${bounds}-${id}`,\n      dtype,\n      unprojectLensBounds\n    });\n  }\n\n};\nImageLayer.layerName = \"ImageLayer\";\nImageLayer.defaultProps = defaultProps$5;\nvar defaultProps$4 = {\n  pickable: {\n    type: \"boolean\",\n    value: true,\n    compare: true\n  },\n  onHover: {\n    type: \"function\",\n    value: null,\n    compare: false\n  },\n  contrastLimits: {\n    type: \"array\",\n    value: [],\n    compare: true\n  },\n  colors: {\n    type: \"array\",\n    value: [],\n    compare: true\n  },\n  channelsVisible: {\n    type: \"array\",\n    value: [],\n    compare: true\n  },\n  opacity: {\n    type: \"number\",\n    value: 1,\n    compare: true\n  },\n  colormap: {\n    type: \"string\",\n    value: \"\",\n    compare: true\n  },\n  domain: {\n    type: \"array\",\n    value: [],\n    compare: true\n  },\n  viewportId: {\n    type: \"string\",\n    value: \"\",\n    compare: true\n  },\n  isLensOn: {\n    type: \"boolean\",\n    value: false,\n    compare: true\n  },\n  lensSelection: {\n    type: \"number\",\n    value: 0,\n    compare: true\n  },\n  lensRadius: {\n    type: \"number\",\n    value: 100,\n    compare: true\n  },\n  lensBorderColor: {\n    type: \"array\",\n    value: [255, 255, 255],\n    compare: true\n  },\n  lensBorderRadius: {\n    type: \"number\",\n    value: 0.02,\n    compare: true\n  },\n  maxRequests: {\n    type: \"number\",\n    value: 10,\n    compare: true\n  },\n  onClick: {\n    type: \"function\",\n    value: null,\n    compare: true\n  },\n  transparentColor: {\n    type: \"array\",\n    value: null,\n    compare: true\n  },\n  refinementStrategy: {\n    type: \"string\",\n    value: null,\n    compare: true\n  },\n  excludeBackground: {\n    type: \"boolean\",\n    value: false,\n    compare: true\n  }\n};\nvar MultiscaleImageLayer = class extends CompositeLayer {\n  initializeState() {\n    this.state = {\n      unprojectLensBounds: [0, 0, 0, 0]\n    };\n\n    if (this.context.deck) {\n      this.context.deck.eventManager.on({\n        pointermove: () => onPointer(this),\n        pointerleave: () => onPointer(this),\n        wheel: () => onPointer(this)\n      });\n    }\n  }\n\n  renderLayers() {\n    const {\n      loader,\n      selections,\n      opacity,\n      viewportId,\n      onTileError,\n      onHover,\n      id,\n      onClick,\n      modelMatrix,\n      transparentColor,\n      excludeBackground,\n      refinementStrategy\n    } = this.props;\n    const {\n      tileSize,\n      dtype\n    } = loader[0];\n    const {\n      unprojectLensBounds\n    } = this.state;\n\n    const getTileData = _0 => __async(this, [_0], function* (_ref16) {\n      let {\n        x,\n        y,\n        z,\n        signal\n      } = _ref16;\n\n      if (!selections || selections.length === 0) {\n        return null;\n      }\n\n      const resolution = Math.round(-z);\n\n      const getTile = selection => {\n        const config = {\n          x,\n          y,\n          selection,\n          signal\n        };\n        return loader[resolution].getTile(config);\n      };\n\n      try {\n        const tiles = yield Promise.all(selections.map(getTile));\n        const tile = {\n          data: tiles.map(d => d.data),\n          width: tiles[0].width,\n          height: tiles[0].height\n        };\n\n        if (isInterleaved(loader[resolution].shape)) {\n          tile.data = tile.data[0];\n\n          if (tile.data.length === tile.width * tile.height * 3) {\n            tile.format = GL.RGB;\n            tile.dataFormat = GL.RGB;\n          }\n\n          return tile;\n        }\n\n        return tile;\n      } catch (err) {\n        if (err === SIGNAL_ABORTED) {\n          return null;\n        }\n\n        throw err;\n      }\n    });\n\n    const {\n      height,\n      width\n    } = getImageSize(loader[0]);\n    const tiledLayer = new MultiscaleImageLayerBase(this.props, {\n      id: `Tiled-Image-${id}`,\n      getTileData,\n      dtype,\n      tileSize,\n      zoomOffset: Math.round(Math.log2(modelMatrix ? modelMatrix.getScale()[0] : 1)),\n      extent: [0, 0, width, height],\n      minZoom: Math.round(-(loader.length - 1)),\n      maxZoom: 0,\n      refinementStrategy: refinementStrategy || (opacity === 1 ? \"best-available\" : \"no-overlap\"),\n      updateTriggers: {\n        getTileData: [loader, selections]\n      },\n      onTileError: onTileError || loader[0].onTileError,\n      unprojectLensBounds\n    });\n    const lowestResolution = loader[loader.length - 1];\n    const implementsGetRaster = typeof lowestResolution.getRaster === \"function\";\n    const layerModelMatrix = modelMatrix ? modelMatrix.clone() : new Matrix4();\n    const baseLayer = implementsGetRaster && !excludeBackground && new ImageLayer(this.props, {\n      id: `Background-Image-${id}`,\n      loader: lowestResolution,\n      modelMatrix: layerModelMatrix.scale(__pow(2, loader.length - 1)),\n      visible: opacity === 1 && (!viewportId || this.context.viewport.id === viewportId) && !transparentColor,\n      pickable: {\n        type: \"boolean\",\n        value: true,\n        compare: true\n      },\n      onHover,\n      onClick,\n      interpolation: GL.LINEAR\n    });\n    const layers = [baseLayer, tiledLayer];\n    return layers;\n  }\n\n};\nMultiscaleImageLayer.layerName = \"MultiscaleImageLayer\";\nMultiscaleImageLayer.defaultProps = defaultProps$4;\nvar defaultProps$3 = {\n  pickable: {\n    type: \"boolean\",\n    value: true,\n    compare: true\n  },\n  loader: {\n    type: \"object\",\n    value: {\n      getRaster: () => __async(void 0, null, function* () {\n        return {\n          data: [],\n          height: 0,\n          width: 0\n        };\n      }),\n      getRasterSize: () => ({\n        height: 0,\n        width: 0\n      }),\n      dtype: \"<u2\"\n    },\n    compare: true\n  },\n  id: {\n    type: \"string\",\n    value: \"\",\n    compare: true\n  },\n  boundingBox: {\n    type: \"array\",\n    value: [[0, 0], [0, 1], [1, 1], [1, 0]],\n    compare: true\n  },\n  boundingBoxColor: {\n    type: \"array\",\n    value: [255, 0, 0],\n    compare: true\n  },\n  boundingBoxOutlineWidth: {\n    type: \"number\",\n    value: 1,\n    compare: true\n  },\n  viewportOutlineColor: {\n    type: \"array\",\n    value: [255, 190, 0],\n    compare: true\n  },\n  viewportOutlineWidth: {\n    type: \"number\",\n    value: 2,\n    compare: true\n  },\n  overviewScale: {\n    type: \"number\",\n    value: 1,\n    compare: true\n  },\n  zoom: {\n    type: \"number\",\n    value: 1,\n    compare: true\n  }\n};\nvar OverviewLayer = class extends CompositeLayer {\n  renderLayers() {\n    const {\n      loader,\n      id,\n      zoom,\n      boundingBox,\n      boundingBoxColor,\n      boundingBoxOutlineWidth,\n      viewportOutlineColor,\n      viewportOutlineWidth,\n      overviewScale\n    } = this.props;\n    const {\n      width,\n      height\n    } = getImageSize(loader[0]);\n    const z = loader.length - 1;\n    const lowestResolution = loader[z];\n    const overview = new ImageLayer(this.props, {\n      id: `viewport-${id}`,\n      modelMatrix: new Matrix4().scale(__pow(2, z) * overviewScale),\n      loader: lowestResolution\n    });\n    const boundingBoxOutline = new PolygonLayer({\n      id: `bounding-box-overview-${id}`,\n      coordinateSystem: COORDINATE_SYSTEM2.CARTESIAN,\n      data: [boundingBox],\n      getPolygon: f => f,\n      filled: false,\n      stroked: true,\n      getLineColor: boundingBoxColor,\n      getLineWidth: boundingBoxOutlineWidth * __pow(2, zoom)\n    });\n    const viewportOutline = new PolygonLayer({\n      id: `viewport-outline-${id}`,\n      coordinateSystem: COORDINATE_SYSTEM2.CARTESIAN,\n      data: [[[0, 0], [width * overviewScale, 0], [width * overviewScale, height * overviewScale], [0, height * overviewScale]]],\n      getPolygon: f => f,\n      filled: false,\n      stroked: true,\n      getLineColor: viewportOutlineColor,\n      getLineWidth: viewportOutlineWidth * __pow(2, zoom)\n    });\n    const layers = [overview, boundingBoxOutline, viewportOutline];\n    return layers;\n  }\n\n};\nOverviewLayer.layerName = \"OverviewLayer\";\nOverviewLayer.defaultProps = defaultProps$3;\n\nfunction makeBoundingBox(viewState) {\n  const viewport = new OrthographicView().makeViewport({\n    viewState,\n    height: viewState.height,\n    width: viewState.width\n  });\n  return [viewport.unproject([0, 0]), viewport.unproject([viewport.width, 0]), viewport.unproject([viewport.width, viewport.height]), viewport.unproject([0, viewport.height])];\n}\n\nfunction getDefaultInitialViewState(loader, viewSize) {\n  let zoomBackOff = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n  let use3d = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n  let modelMatrix = arguments.length > 4 ? arguments[4] : undefined;\n  const source = Array.isArray(loader) ? loader[0] : loader;\n  const {\n    width,\n    height\n  } = getImageSize(source);\n  const depth = source.shape[source.labels.indexOf(\"z\")];\n  const zoom = Math.log2(Math.min(viewSize.width / width, viewSize.height / height)) - zoomBackOff;\n  const physicalSizeScalingMatrix = getPhysicalSizeScalingMatrix(source);\n  const loaderInitialViewState = {\n    target: (modelMatrix || new Matrix4()).transformPoint((use3d ? physicalSizeScalingMatrix : new Matrix4()).transformPoint([width / 2, height / 2, use3d ? depth / 2 : 0])),\n    zoom\n  };\n  return loaderInitialViewState;\n}\n\nfunction getPosition(boundingBox, position, length) {\n  const viewLength = boundingBox[2][0] - boundingBox[0][0];\n\n  switch (position) {\n    case \"bottom-right\":\n      {\n        const yCoord = boundingBox[2][1] - (boundingBox[2][1] - boundingBox[0][1]) * length;\n        const xLeftCoord = boundingBox[2][0] - viewLength * length;\n        return [yCoord, xLeftCoord];\n      }\n\n    case \"top-right\":\n      {\n        const yCoord = (boundingBox[2][1] - boundingBox[0][1]) * length;\n        const xLeftCoord = boundingBox[2][0] - viewLength * length;\n        return [yCoord, xLeftCoord];\n      }\n\n    case \"top-left\":\n      {\n        const yCoord = (boundingBox[2][1] - boundingBox[0][1]) * length;\n        const xLeftCoord = viewLength * length;\n        return [yCoord, xLeftCoord];\n      }\n\n    case \"bottom-left\":\n      {\n        const yCoord = boundingBox[2][1] - (boundingBox[2][1] - boundingBox[0][1]) * length;\n        const xLeftCoord = viewLength * length;\n        return [yCoord, xLeftCoord];\n      }\n\n    default:\n      {\n        throw new Error(`Position ${position} not found`);\n      }\n  }\n}\n\nvar defaultProps$2 = {\n  pickable: {\n    type: \"boolean\",\n    value: true,\n    compare: true\n  },\n  viewState: {\n    type: \"object\",\n    value: {\n      zoom: 0,\n      target: [0, 0, 0]\n    },\n    compare: true\n  },\n  unit: {\n    type: \"string\",\n    value: \"\",\n    compare: true\n  },\n  size: {\n    type: \"number\",\n    value: 1,\n    compare: true\n  },\n  position: {\n    type: \"string\",\n    value: \"bottom-right\",\n    compare: true\n  },\n  length: {\n    type: \"number\",\n    value: 0.085,\n    compare: true\n  }\n};\nvar ScaleBarLayer = class extends CompositeLayer {\n  renderLayers() {\n    const {\n      id,\n      unit: unit2,\n      size,\n      position,\n      viewState,\n      length\n    } = this.props;\n    const boundingBox = makeBoundingBox(viewState);\n    const {\n      zoom\n    } = viewState;\n    const viewLength = boundingBox[2][0] - boundingBox[0][0];\n    const barLength = viewLength * 0.05;\n    const barHeight = Math.max(__pow(2, -zoom + 1.5), (boundingBox[2][1] - boundingBox[0][1]) * 7e-3);\n    const numUnits = barLength * size;\n    const [yCoord, xLeftCoord] = getPosition(boundingBox, position, length);\n    const lengthBar = new LineLayer({\n      id: `scale-bar-length-${id}`,\n      coordinateSystem: COORDINATE_SYSTEM2.CARTESIAN,\n      data: [[[xLeftCoord, yCoord], [xLeftCoord + barLength, yCoord]]],\n      getSourcePosition: d => d[0],\n      getTargetPosition: d => d[1],\n      getWidth: 2,\n      getColor: [220, 220, 220]\n    });\n    const tickBoundsLeft = new LineLayer({\n      id: `scale-bar-height-left-${id}`,\n      coordinateSystem: COORDINATE_SYSTEM2.CARTESIAN,\n      data: [[[xLeftCoord, yCoord - barHeight], [xLeftCoord, yCoord + barHeight]]],\n      getSourcePosition: d => d[0],\n      getTargetPosition: d => d[1],\n      getWidth: 2,\n      getColor: [220, 220, 220]\n    });\n    const tickBoundsRight = new LineLayer({\n      id: `scale-bar-height-right-${id}`,\n      coordinateSystem: COORDINATE_SYSTEM2.CARTESIAN,\n      data: [[[xLeftCoord + barLength, yCoord - barHeight], [xLeftCoord + barLength, yCoord + barHeight]]],\n      getSourcePosition: d => d[0],\n      getTargetPosition: d => d[1],\n      getWidth: 2,\n      getColor: [220, 220, 220]\n    });\n    const textLayer = new TextLayer({\n      id: `units-label-layer-${id}`,\n      coordinateSystem: COORDINATE_SYSTEM2.CARTESIAN,\n      data: [{\n        text: String(numUnits).slice(0, 5).replace(/\\.$/, \"\") + unit2,\n        position: [xLeftCoord + barLength * 0.5, yCoord + barHeight * 4]\n      }],\n      getColor: [220, 220, 220, 255],\n      getSize: 12,\n      fontFamily: DEFAULT_FONT_FAMILY,\n      sizeUnits: \"meters\",\n      sizeScale: __pow(2, -zoom),\n      characterSet: [...unit2.split(\"\"), ...range2(10).map(i => String(i)), \".\"]\n    });\n    return [lengthBar, tickBoundsLeft, tickBoundsRight, textLayer];\n  }\n\n};\nScaleBarLayer.layerName = \"ScaleBarLayer\";\nScaleBarLayer.defaultProps = defaultProps$2;\nvar vs = '#version 300 es\\n#define GLSLIFY 1\\n#define SHADER_NAME xr-layer-vertex-shader\\nin vec3 positions;uniform vec3 eye_pos;uniform mat4 proj;uniform mat4 model;uniform mat4 view;uniform mat4 scale;uniform mat4 resolution;out vec3 vray_dir;flat out vec3 transformed_eye;void main(){gl_Position=proj*view*model*scale*resolution*vec4(positions,1.);/*This first diagram is a skewed volume(i.e a \"shear\" model matrix applied)top down with the eye marked as #,all in world space^___|__\\\\|\\\\\\\\|\\\\|____|||\\n#\\nThis next diagram shows the volume after the inverse model matrix has placed it back in model coordinates,but the eye still in world space.^___|___|||||||__|__||||\\n#\\nFinally,we apply the inverse model matrix transformation to the eye as well to bring it too into world space.Notice that the ray here matches the \"voxels\" through which the first ray also passes,as desired.^____/__|/||/||/____|///\\n#\\n*/transformed_eye=(inverse(resolution)*inverse(scale)*inverse(model)*(vec4(eye_pos,1.))).xyz;vray_dir=positions-transformed_eye;}';\nvar fs$1 = \"#version 300 es\\nprecision highp int;precision highp float;precision highp SAMPLER_TYPE;\\n#define GLSLIFY 1\\nuniform highp SAMPLER_TYPE volume0;uniform highp SAMPLER_TYPE volume1;uniform highp SAMPLER_TYPE volume2;uniform highp SAMPLER_TYPE volume3;uniform highp SAMPLER_TYPE volume4;uniform highp SAMPLER_TYPE volume5;uniform vec3 scaledDimensions;uniform mat4 scale;uniform vec3 normals[NUM_PLANES];uniform float distances[NUM_PLANES];uniform vec2 contrastLimits[6];uniform vec3 colors[6];uniform vec2 xSlice;uniform vec2 ySlice;uniform vec2 zSlice;in vec3 vray_dir;flat in vec3 transformed_eye;out vec4 color;vec2 intersect_box(vec3 orig,vec3 dir){vec3 box_min=vec3(xSlice[0],ySlice[0],zSlice[0]);vec3 box_max=vec3(xSlice[1],ySlice[1],zSlice[1]);vec3 inv_dir=1./dir;vec3 tmin_tmp=(box_min-orig)*inv_dir;vec3 tmax_tmp=(box_max-orig)*inv_dir;vec3 tmin=min(tmin_tmp,tmax_tmp);vec3 tmax=max(tmin_tmp,tmax_tmp);float t0=max(tmin.x,max(tmin.y,tmin.z));float t1=min(tmax.x,min(tmax.y,tmax.z));vec2 val=vec2(t0,t1);return val;}float linear_to_srgb(float x){if(x<=0.0031308f){return 12.92f*x;}return 1.055f*pow(x,1.f/2.4f)-0.055f;}float wang_hash(int seed){seed=(seed ^ 61)^(seed>>16);seed*=9;seed=seed ^(seed>>4);seed*=0x27d4eb2d;seed=seed ^(seed>>15);return float(seed % 2147483647)/float(2147483647);}void main(void){vec3 ray_dir=normalize(vray_dir);vec2 t_hit=intersect_box(transformed_eye,ray_dir);if(t_hit.x>t_hit.y){discard;}t_hit.x=max(t_hit.x,0.);vec3 dt_vec=1./(scale*vec4(abs(ray_dir),1.)).xyz;float dt=1.*min(dt_vec.x,min(dt_vec.y,dt_vec.z));float offset=wang_hash(int(gl_FragCoord.x+640.*gl_FragCoord.y));vec3 p=transformed_eye+(t_hit.x+offset*dt)*ray_dir;_BEFORE_RENDERfor(float t=t_hit.x;t<t_hit.y;t+=dt){float canShow=1.;for(int i=0;i<NUM_PLANES;i+=1){canShow*=max(0.,sign(dot(normals[i],p)+distances[i]));}float canShowXCoordinate=max(p.x-0.,0.)*max(1.-p.x,0.);float canShowYCoordinate=max(p.y-0.,0.)*max(1.-p.y,0.);float canShowZCoordinate=max(p.z-0.,0.)*max(1.-p.z,0.);float canShowCoordinate=float(ceil(canShowXCoordinate*canShowYCoordinate*canShowZCoordinate));canShow=canShowCoordinate*canShow;float intensityValue0=canShow*sample_and_apply_contrast_limits(volume0,p,contrastLimits[0]);float intensityValue1=canShow*sample_and_apply_contrast_limits(volume1,p,contrastLimits[1]);float intensityValue2=canShow*sample_and_apply_contrast_limits(volume2,p,contrastLimits[2]);float intensityValue3=canShow*sample_and_apply_contrast_limits(volume3,p,contrastLimits[3]);float intensityValue4=canShow*sample_and_apply_contrast_limits(volume4,p,contrastLimits[4]);float intensityValue5=canShow*sample_and_apply_contrast_limits(volume5,p,contrastLimits[5]);_RENDERp+=ray_dir*dt;}_AFTER_RENDERcolor.r=linear_to_srgb(color.r);color.g=linear_to_srgb(color.g);color.b=linear_to_srgb(color.b);}\";\nvar fs = \"#define GLSLIFY 1\\nvec4 jet(float x_17){const float e0=0.0;const vec4 v0=vec4(0,0,0.5137254901960784,1);const float e1=0.125;const vec4 v1=vec4(0,0.23529411764705882,0.6666666666666666,1);const float e2=0.375;const vec4 v2=vec4(0.0196078431372549,1,1,1);const float e3=0.625;const vec4 v3=vec4(1,1,0,1);const float e4=0.875;const vec4 v4=vec4(0.9803921568627451,0,0,1);const float e5=1.0;const vec4 v5=vec4(0.5019607843137255,0,0,1);float a0=smoothstep(e0,e1,x_17);float a1=smoothstep(e1,e2,x_17);float a2=smoothstep(e2,e3,x_17);float a3=smoothstep(e3,e4,x_17);float a4=smoothstep(e4,e5,x_17);return max(mix(v0,v1,a0)*step(e0,x_17)*step(x_17,e1),max(mix(v1,v2,a1)*step(e1,x_17)*step(x_17,e2),max(mix(v2,v3,a2)*step(e2,x_17)*step(x_17,e3),max(mix(v3,v4,a3)*step(e3,x_17)*step(x_17,e4),mix(v4,v5,a4)*step(e4,x_17)*step(x_17,e5)))));}vec4 hsv(float x_18){const float e0=0.0;const vec4 v0=vec4(1,0,0,1);const float e1=0.169;const vec4 v1=vec4(0.9921568627450981,1,0.00784313725490196,1);const float e2=0.173;const vec4 v2=vec4(0.9686274509803922,1,0.00784313725490196,1);const float e3=0.337;const vec4 v3=vec4(0,0.9882352941176471,0.01568627450980392,1);const float e4=0.341;const vec4 v4=vec4(0,0.9882352941176471,0.0392156862745098,1);const float e5=0.506;const vec4 v5=vec4(0.00392156862745098,0.9764705882352941,1,1);const float e6=0.671;const vec4 v6=vec4(0.00784313725490196,0,0.9921568627450981,1);const float e7=0.675;const vec4 v7=vec4(0.03137254901960784,0,0.9921568627450981,1);const float e8=0.839;const vec4 v8=vec4(1,0,0.984313725490196,1);const float e9=0.843;const vec4 v9=vec4(1,0,0.9607843137254902,1);const float e10=1.0;const vec4 v10=vec4(1,0,0.023529411764705882,1);float a0=smoothstep(e0,e1,x_18);float a1=smoothstep(e1,e2,x_18);float a2=smoothstep(e2,e3,x_18);float a3=smoothstep(e3,e4,x_18);float a4=smoothstep(e4,e5,x_18);float a5=smoothstep(e5,e6,x_18);float a6=smoothstep(e6,e7,x_18);float a7=smoothstep(e7,e8,x_18);float a8=smoothstep(e8,e9,x_18);float a9=smoothstep(e9,e10,x_18);return max(mix(v0,v1,a0)*step(e0,x_18)*step(x_18,e1),max(mix(v1,v2,a1)*step(e1,x_18)*step(x_18,e2),max(mix(v2,v3,a2)*step(e2,x_18)*step(x_18,e3),max(mix(v3,v4,a3)*step(e3,x_18)*step(x_18,e4),max(mix(v4,v5,a4)*step(e4,x_18)*step(x_18,e5),max(mix(v5,v6,a5)*step(e5,x_18)*step(x_18,e6),max(mix(v6,v7,a6)*step(e6,x_18)*step(x_18,e7),max(mix(v7,v8,a7)*step(e7,x_18)*step(x_18,e8),max(mix(v8,v9,a8)*step(e8,x_18)*step(x_18,e9),mix(v9,v10,a9)*step(e9,x_18)*step(x_18,e10))))))))));}vec4 hot(float x_13){const float e0=0.0;const vec4 v0=vec4(0,0,0,1);const float e1=0.3;const vec4 v1=vec4(0.9019607843137255,0,0,1);const float e2=0.6;const vec4 v2=vec4(1,0.8235294117647058,0,1);const float e3=1.0;const vec4 v3=vec4(1,1,1,1);float a0=smoothstep(e0,e1,x_13);float a1=smoothstep(e1,e2,x_13);float a2=smoothstep(e2,e3,x_13);return max(mix(v0,v1,a0)*step(e0,x_13)*step(x_13,e1),max(mix(v1,v2,a1)*step(e1,x_13)*step(x_13,e2),mix(v2,v3,a2)*step(e2,x_13)*step(x_13,e3)));}vec4 cool(float x_24){const float e0=0.0;const vec4 v0=vec4(0.49019607843137253,0,0.7019607843137254,1);const float e1=0.13;const vec4 v1=vec4(0.4549019607843137,0,0.8549019607843137,1);const float e2=0.25;const vec4 v2=vec4(0.3843137254901961,0.2901960784313726,0.9294117647058824,1);const float e3=0.38;const vec4 v3=vec4(0.26666666666666666,0.5725490196078431,0.9058823529411765,1);const float e4=0.5;const vec4 v4=vec4(0,0.8,0.7725490196078432,1);const float e5=0.63;const vec4 v5=vec4(0,0.9686274509803922,0.5725490196078431,1);const float e6=0.75;const vec4 v6=vec4(0,1,0.34509803921568627,1);const float e7=0.88;const vec4 v7=vec4(0.1568627450980392,1,0.03137254901960784,1);const float e8=1.0;const vec4 v8=vec4(0.5764705882352941,1,0,1);float a0=smoothstep(e0,e1,x_24);float a1=smoothstep(e1,e2,x_24);float a2=smoothstep(e2,e3,x_24);float a3=smoothstep(e3,e4,x_24);float a4=smoothstep(e4,e5,x_24);float a5=smoothstep(e5,e6,x_24);float a6=smoothstep(e6,e7,x_24);float a7=smoothstep(e7,e8,x_24);return max(mix(v0,v1,a0)*step(e0,x_24)*step(x_24,e1),max(mix(v1,v2,a1)*step(e1,x_24)*step(x_24,e2),max(mix(v2,v3,a2)*step(e2,x_24)*step(x_24,e3),max(mix(v3,v4,a3)*step(e3,x_24)*step(x_24,e4),max(mix(v4,v5,a4)*step(e4,x_24)*step(x_24,e5),max(mix(v5,v6,a5)*step(e5,x_24)*step(x_24,e6),max(mix(v6,v7,a6)*step(e6,x_24)*step(x_24,e7),mix(v7,v8,a7)*step(e7,x_24)*step(x_24,e8))))))));}vec4 spring(float x_5){const float e0=0.0;const vec4 v0=vec4(1,0,1,1);const float e1=1.0;const vec4 v1=vec4(1,1,0,1);float a0=smoothstep(e0,e1,x_5);return mix(v0,v1,a0)*step(e0,x_5)*step(x_5,e1);}vec4 summer(float x_12){const float e0=0.0;const vec4 v0=vec4(0,0.5019607843137255,0.4,1);const float e1=1.0;const vec4 v1=vec4(1,1,0.4,1);float a0=smoothstep(e0,e1,x_12);return mix(v0,v1,a0)*step(e0,x_12)*step(x_12,e1);}vec4 autumn(float x_25){const float e0=0.0;const vec4 v0=vec4(1,0,0,1);const float e1=1.0;const vec4 v1=vec4(1,1,0,1);float a0=smoothstep(e0,e1,x_25);return mix(v0,v1,a0)*step(e0,x_25)*step(x_25,e1);}vec4 winter(float x_16){const float e0=0.0;const vec4 v0=vec4(0,0,1,1);const float e1=1.0;const vec4 v1=vec4(0,1,0.5019607843137255,1);float a0=smoothstep(e0,e1,x_16);return mix(v0,v1,a0)*step(e0,x_16)*step(x_16,e1);}vec4 bone(float x_15){const float e0=0.0;const vec4 v0=vec4(0,0,0,1);const float e1=0.376;const vec4 v1=vec4(0.32941176470588235,0.32941176470588235,0.4549019607843137,1);const float e2=0.753;const vec4 v2=vec4(0.6627450980392157,0.7843137254901961,0.7843137254901961,1);const float e3=1.0;const vec4 v3=vec4(1,1,1,1);float a0=smoothstep(e0,e1,x_15);float a1=smoothstep(e1,e2,x_15);float a2=smoothstep(e2,e3,x_15);return max(mix(v0,v1,a0)*step(e0,x_15)*step(x_15,e1),max(mix(v1,v2,a1)*step(e1,x_15)*step(x_15,e2),mix(v2,v3,a2)*step(e2,x_15)*step(x_15,e3)));}vec4 copper(float x_10){const float e0=0.0;const vec4 v0=vec4(0,0,0,1);const float e1=0.804;const vec4 v1=vec4(1,0.6274509803921569,0.4,1);const float e2=1.0;const vec4 v2=vec4(1,0.7803921568627451,0.4980392156862745,1);float a0=smoothstep(e0,e1,x_10);float a1=smoothstep(e1,e2,x_10);return max(mix(v0,v1,a0)*step(e0,x_10)*step(x_10,e1),mix(v1,v2,a1)*step(e1,x_10)*step(x_10,e2));}vec4 greys(float x_4){const float e0=0.0;const vec4 v0=vec4(0,0,0,1);const float e1=1.0;const vec4 v1=vec4(1,1,1,1);float a0=smoothstep(e0,e1,x_4);return mix(v0,v1,a0)*step(e0,x_4)*step(x_4,e1);}vec4 yignbu(float x_32){const float e0=0.0;const vec4 v0=vec4(0.03137254901960784,0.11372549019607843,0.34509803921568627,1);const float e1=0.125;const vec4 v1=vec4(0.1450980392156863,0.20392156862745098,0.5803921568627451,1);const float e2=0.25;const vec4 v2=vec4(0.13333333333333333,0.3686274509803922,0.6588235294117647,1);const float e3=0.375;const vec4 v3=vec4(0.11372549019607843,0.5686274509803921,0.7529411764705882,1);const float e4=0.5;const vec4 v4=vec4(0.2549019607843137,0.7137254901960784,0.7686274509803922,1);const float e5=0.625;const vec4 v5=vec4(0.4980392156862745,0.803921568627451,0.7333333333333333,1);const float e6=0.75;const vec4 v6=vec4(0.7803921568627451,0.9137254901960784,0.7058823529411765,1);const float e7=0.875;const vec4 v7=vec4(0.9294117647058824,0.9725490196078431,0.8509803921568627,1);const float e8=1.0;const vec4 v8=vec4(1,1,0.8509803921568627,1);float a0=smoothstep(e0,e1,x_32);float a1=smoothstep(e1,e2,x_32);float a2=smoothstep(e2,e3,x_32);float a3=smoothstep(e3,e4,x_32);float a4=smoothstep(e4,e5,x_32);float a5=smoothstep(e5,e6,x_32);float a6=smoothstep(e6,e7,x_32);float a7=smoothstep(e7,e8,x_32);return max(mix(v0,v1,a0)*step(e0,x_32)*step(x_32,e1),max(mix(v1,v2,a1)*step(e1,x_32)*step(x_32,e2),max(mix(v2,v3,a2)*step(e2,x_32)*step(x_32,e3),max(mix(v3,v4,a3)*step(e3,x_32)*step(x_32,e4),max(mix(v4,v5,a4)*step(e4,x_32)*step(x_32,e5),max(mix(v5,v6,a5)*step(e5,x_32)*step(x_32,e6),max(mix(v6,v7,a6)*step(e6,x_32)*step(x_32,e7),mix(v7,v8,a7)*step(e7,x_32)*step(x_32,e8))))))));}vec4 greens(float x_34){const float e0=0.0;const vec4 v0=vec4(0,0.26666666666666666,0.10588235294117647,1);const float e1=0.125;const vec4 v1=vec4(0,0.42745098039215684,0.17254901960784313,1);const float e2=0.25;const vec4 v2=vec4(0.13725490196078433,0.5450980392156862,0.27058823529411763,1);const float e3=0.375;const vec4 v3=vec4(0.2549019607843137,0.6705882352941176,0.36470588235294116,1);const float e4=0.5;const vec4 v4=vec4(0.4549019607843137,0.7686274509803922,0.4627450980392157,1);const float e5=0.625;const vec4 v5=vec4(0.6313725490196078,0.8509803921568627,0.6078431372549019,1);const float e6=0.75;const vec4 v6=vec4(0.7803921568627451,0.9137254901960784,0.7529411764705882,1);const float e7=0.875;const vec4 v7=vec4(0.8980392156862745,0.9607843137254902,0.8784313725490196,1);const float e8=1.0;const vec4 v8=vec4(0.9686274509803922,0.9882352941176471,0.9607843137254902,1);float a0=smoothstep(e0,e1,x_34);float a1=smoothstep(e1,e2,x_34);float a2=smoothstep(e2,e3,x_34);float a3=smoothstep(e3,e4,x_34);float a4=smoothstep(e4,e5,x_34);float a5=smoothstep(e5,e6,x_34);float a6=smoothstep(e6,e7,x_34);float a7=smoothstep(e7,e8,x_34);return max(mix(v0,v1,a0)*step(e0,x_34)*step(x_34,e1),max(mix(v1,v2,a1)*step(e1,x_34)*step(x_34,e2),max(mix(v2,v3,a2)*step(e2,x_34)*step(x_34,e3),max(mix(v3,v4,a3)*step(e3,x_34)*step(x_34,e4),max(mix(v4,v5,a4)*step(e4,x_34)*step(x_34,e5),max(mix(v5,v6,a5)*step(e5,x_34)*step(x_34,e6),max(mix(v6,v7,a6)*step(e6,x_34)*step(x_34,e7),mix(v7,v8,a7)*step(e7,x_34)*step(x_34,e8))))))));}vec4 yiorrd(float x_41){const float e0=0.0;const vec4 v0=vec4(0.5019607843137255,0,0.14901960784313725,1);const float e1=0.125;const vec4 v1=vec4(0.7411764705882353,0,0.14901960784313725,1);const float e2=0.25;const vec4 v2=vec4(0.8901960784313725,0.10196078431372549,0.10980392156862745,1);const float e3=0.375;const vec4 v3=vec4(0.9882352941176471,0.3058823529411765,0.16470588235294117,1);const float e4=0.5;const vec4 v4=vec4(0.9921568627450981,0.5529411764705883,0.23529411764705882,1);const float e5=0.625;const vec4 v5=vec4(0.996078431372549,0.6980392156862745,0.2980392156862745,1);const float e6=0.75;const vec4 v6=vec4(0.996078431372549,0.8509803921568627,0.4627450980392157,1);const float e7=0.875;const vec4 v7=vec4(1,0.9294117647058824,0.6274509803921569,1);const float e8=1.0;const vec4 v8=vec4(1,1,0.8,1);float a0=smoothstep(e0,e1,x_41);float a1=smoothstep(e1,e2,x_41);float a2=smoothstep(e2,e3,x_41);float a3=smoothstep(e3,e4,x_41);float a4=smoothstep(e4,e5,x_41);float a5=smoothstep(e5,e6,x_41);float a6=smoothstep(e6,e7,x_41);float a7=smoothstep(e7,e8,x_41);return max(mix(v0,v1,a0)*step(e0,x_41)*step(x_41,e1),max(mix(v1,v2,a1)*step(e1,x_41)*step(x_41,e2),max(mix(v2,v3,a2)*step(e2,x_41)*step(x_41,e3),max(mix(v3,v4,a3)*step(e3,x_41)*step(x_41,e4),max(mix(v4,v5,a4)*step(e4,x_41)*step(x_41,e5),max(mix(v5,v6,a5)*step(e5,x_41)*step(x_41,e6),max(mix(v6,v7,a6)*step(e6,x_41)*step(x_41,e7),mix(v7,v8,a7)*step(e7,x_41)*step(x_41,e8))))))));}vec4 bluered(float x_23){const float e0=0.0;const vec4 v0=vec4(0,0,1,1);const float e1=1.0;const vec4 v1=vec4(1,0,0,1);float a0=smoothstep(e0,e1,x_23);return mix(v0,v1,a0)*step(e0,x_23)*step(x_23,e1);}vec4 rdbu(float x_1){const float e0=0.0;const vec4 v0=vec4(0.0196078431372549,0.0392156862745098,0.6745098039215687,1);const float e1=0.35;const vec4 v1=vec4(0.41568627450980394,0.5372549019607843,0.9686274509803922,1);const float e2=0.5;const vec4 v2=vec4(0.7450980392156863,0.7450980392156863,0.7450980392156863,1);const float e3=0.6;const vec4 v3=vec4(0.8627450980392157,0.6666666666666666,0.5176470588235295,1);const float e4=0.7;const vec4 v4=vec4(0.9019607843137255,0.5686274509803921,0.35294117647058826,1);const float e5=1.0;const vec4 v5=vec4(0.6980392156862745,0.0392156862745098,0.10980392156862745,1);float a0=smoothstep(e0,e1,x_1);float a1=smoothstep(e1,e2,x_1);float a2=smoothstep(e2,e3,x_1);float a3=smoothstep(e3,e4,x_1);float a4=smoothstep(e4,e5,x_1);return max(mix(v0,v1,a0)*step(e0,x_1)*step(x_1,e1),max(mix(v1,v2,a1)*step(e1,x_1)*step(x_1,e2),max(mix(v2,v3,a2)*step(e2,x_1)*step(x_1,e3),max(mix(v3,v4,a3)*step(e3,x_1)*step(x_1,e4),mix(v4,v5,a4)*step(e4,x_1)*step(x_1,e5)))));}vec4 picnic(float x_42){const float e0=0.0;const vec4 v0=vec4(0,0,1,1);const float e1=0.1;const vec4 v1=vec4(0.2,0.6,1,1);const float e2=0.2;const vec4 v2=vec4(0.4,0.8,1,1);const float e3=0.3;const vec4 v3=vec4(0.6,0.8,1,1);const float e4=0.4;const vec4 v4=vec4(0.8,0.8,1,1);const float e5=0.5;const vec4 v5=vec4(1,1,1,1);const float e6=0.6;const vec4 v6=vec4(1,0.8,1,1);const float e7=0.7;const vec4 v7=vec4(1,0.6,1,1);const float e8=0.8;const vec4 v8=vec4(1,0.4,0.8,1);const float e9=0.9;const vec4 v9=vec4(1,0.4,0.4,1);const float e10=1.0;const vec4 v10=vec4(1,0,0,1);float a0=smoothstep(e0,e1,x_42);float a1=smoothstep(e1,e2,x_42);float a2=smoothstep(e2,e3,x_42);float a3=smoothstep(e3,e4,x_42);float a4=smoothstep(e4,e5,x_42);float a5=smoothstep(e5,e6,x_42);float a6=smoothstep(e6,e7,x_42);float a7=smoothstep(e7,e8,x_42);float a8=smoothstep(e8,e9,x_42);float a9=smoothstep(e9,e10,x_42);return max(mix(v0,v1,a0)*step(e0,x_42)*step(x_42,e1),max(mix(v1,v2,a1)*step(e1,x_42)*step(x_42,e2),max(mix(v2,v3,a2)*step(e2,x_42)*step(x_42,e3),max(mix(v3,v4,a3)*step(e3,x_42)*step(x_42,e4),max(mix(v4,v5,a4)*step(e4,x_42)*step(x_42,e5),max(mix(v5,v6,a5)*step(e5,x_42)*step(x_42,e6),max(mix(v6,v7,a6)*step(e6,x_42)*step(x_42,e7),max(mix(v7,v8,a7)*step(e7,x_42)*step(x_42,e8),max(mix(v8,v9,a8)*step(e8,x_42)*step(x_42,e9),mix(v9,v10,a9)*step(e9,x_42)*step(x_42,e10))))))))));}vec4 rainbow(float x_31){const float e0=0.0;const vec4 v0=vec4(0.5882352941176471,0,0.35294117647058826,1);const float e1=0.125;const vec4 v1=vec4(0,0,0.7843137254901961,1);const float e2=0.25;const vec4 v2=vec4(0,0.09803921568627451,1,1);const float e3=0.375;const vec4 v3=vec4(0,0.596078431372549,1,1);const float e4=0.5;const vec4 v4=vec4(0.17254901960784313,1,0.5882352941176471,1);const float e5=0.625;const vec4 v5=vec4(0.592156862745098,1,0,1);const float e6=0.75;const vec4 v6=vec4(1,0.9176470588235294,0,1);const float e7=0.875;const vec4 v7=vec4(1,0.43529411764705883,0,1);const float e8=1.0;const vec4 v8=vec4(1,0,0,1);float a0=smoothstep(e0,e1,x_31);float a1=smoothstep(e1,e2,x_31);float a2=smoothstep(e2,e3,x_31);float a3=smoothstep(e3,e4,x_31);float a4=smoothstep(e4,e5,x_31);float a5=smoothstep(e5,e6,x_31);float a6=smoothstep(e6,e7,x_31);float a7=smoothstep(e7,e8,x_31);return max(mix(v0,v1,a0)*step(e0,x_31)*step(x_31,e1),max(mix(v1,v2,a1)*step(e1,x_31)*step(x_31,e2),max(mix(v2,v3,a2)*step(e2,x_31)*step(x_31,e3),max(mix(v3,v4,a3)*step(e3,x_31)*step(x_31,e4),max(mix(v4,v5,a4)*step(e4,x_31)*step(x_31,e5),max(mix(v5,v6,a5)*step(e5,x_31)*step(x_31,e6),max(mix(v6,v7,a6)*step(e6,x_31)*step(x_31,e7),mix(v7,v8,a7)*step(e7,x_31)*step(x_31,e8))))))));}vec4 portland(float x_21){const float e0=0.0;const vec4 v0=vec4(0.047058823529411764,0.2,0.5137254901960784,1);const float e1=0.25;const vec4 v1=vec4(0.0392156862745098,0.5333333333333333,0.7294117647058823,1);const float e2=0.5;const vec4 v2=vec4(0.9490196078431372,0.8274509803921568,0.2196078431372549,1);const float e3=0.75;const vec4 v3=vec4(0.9490196078431372,0.5607843137254902,0.2196078431372549,1);const float e4=1.0;const vec4 v4=vec4(0.8509803921568627,0.11764705882352941,0.11764705882352941,1);float a0=smoothstep(e0,e1,x_21);float a1=smoothstep(e1,e2,x_21);float a2=smoothstep(e2,e3,x_21);float a3=smoothstep(e3,e4,x_21);return max(mix(v0,v1,a0)*step(e0,x_21)*step(x_21,e1),max(mix(v1,v2,a1)*step(e1,x_21)*step(x_21,e2),max(mix(v2,v3,a2)*step(e2,x_21)*step(x_21,e3),mix(v3,v4,a3)*step(e3,x_21)*step(x_21,e4))));}vec4 blackbody(float x_38){const float e0=0.0;const vec4 v0=vec4(0,0,0,1);const float e1=0.2;const vec4 v1=vec4(0.9019607843137255,0,0,1);const float e2=0.4;const vec4 v2=vec4(0.9019607843137255,0.8235294117647058,0,1);const float e3=0.7;const vec4 v3=vec4(1,1,1,1);const float e4=1.0;const vec4 v4=vec4(0.6274509803921569,0.7843137254901961,1,1);float a0=smoothstep(e0,e1,x_38);float a1=smoothstep(e1,e2,x_38);float a2=smoothstep(e2,e3,x_38);float a3=smoothstep(e3,e4,x_38);return max(mix(v0,v1,a0)*step(e0,x_38)*step(x_38,e1),max(mix(v1,v2,a1)*step(e1,x_38)*step(x_38,e2),max(mix(v2,v3,a2)*step(e2,x_38)*step(x_38,e3),mix(v3,v4,a3)*step(e3,x_38)*step(x_38,e4))));}vec4 earth(float x_29){const float e0=0.0;const vec4 v0=vec4(0,0,0.5098039215686274,1);const float e1=0.1;const vec4 v1=vec4(0,0.7058823529411765,0.7058823529411765,1);const float e2=0.2;const vec4 v2=vec4(0.1568627450980392,0.8235294117647058,0.1568627450980392,1);const float e3=0.4;const vec4 v3=vec4(0.9019607843137255,0.9019607843137255,0.19607843137254902,1);const float e4=0.6;const vec4 v4=vec4(0.47058823529411764,0.27450980392156865,0.0784313725490196,1);const float e5=1.0;const vec4 v5=vec4(1,1,1,1);float a0=smoothstep(e0,e1,x_29);float a1=smoothstep(e1,e2,x_29);float a2=smoothstep(e2,e3,x_29);float a3=smoothstep(e3,e4,x_29);float a4=smoothstep(e4,e5,x_29);return max(mix(v0,v1,a0)*step(e0,x_29)*step(x_29,e1),max(mix(v1,v2,a1)*step(e1,x_29)*step(x_29,e2),max(mix(v2,v3,a2)*step(e2,x_29)*step(x_29,e3),max(mix(v3,v4,a3)*step(e3,x_29)*step(x_29,e4),mix(v4,v5,a4)*step(e4,x_29)*step(x_29,e5)))));}vec4 electric(float x_9){const float e0=0.0;const vec4 v0=vec4(0,0,0,1);const float e1=0.15;const vec4 v1=vec4(0.11764705882352941,0,0.39215686274509803,1);const float e2=0.4;const vec4 v2=vec4(0.47058823529411764,0,0.39215686274509803,1);const float e3=0.6;const vec4 v3=vec4(0.6274509803921569,0.35294117647058826,0,1);const float e4=0.8;const vec4 v4=vec4(0.9019607843137255,0.7843137254901961,0,1);const float e5=1.0;const vec4 v5=vec4(1,0.9803921568627451,0.8627450980392157,1);float a0=smoothstep(e0,e1,x_9);float a1=smoothstep(e1,e2,x_9);float a2=smoothstep(e2,e3,x_9);float a3=smoothstep(e3,e4,x_9);float a4=smoothstep(e4,e5,x_9);return max(mix(v0,v1,a0)*step(e0,x_9)*step(x_9,e1),max(mix(v1,v2,a1)*step(e1,x_9)*step(x_9,e2),max(mix(v2,v3,a2)*step(e2,x_9)*step(x_9,e3),max(mix(v3,v4,a3)*step(e3,x_9)*step(x_9,e4),mix(v4,v5,a4)*step(e4,x_9)*step(x_9,e5)))));}vec4 alpha(float x_0){const float e0=0.0;const vec4 v0=vec4(1,1,1,0);const float e1=1.0;const vec4 v1=vec4(1,1,1,1);float a0=smoothstep(e0,e1,x_0);return mix(v0,v1,a0)*step(e0,x_0)*step(x_0,e1);}vec4 viridis(float x_22){const float e0=0.0;const vec4 v0=vec4(0.26666666666666666,0.00392156862745098,0.32941176470588235,1);const float e1=0.13;const vec4 v1=vec4(0.2784313725490196,0.17254901960784313,0.47843137254901963,1);const float e2=0.25;const vec4 v2=vec4(0.23137254901960785,0.3176470588235294,0.5450980392156862,1);const float e3=0.38;const vec4 v3=vec4(0.17254901960784313,0.44313725490196076,0.5568627450980392,1);const float e4=0.5;const vec4 v4=vec4(0.12941176470588237,0.5647058823529412,0.5529411764705883,1);const float e5=0.63;const vec4 v5=vec4(0.15294117647058825,0.6784313725490196,0.5058823529411764,1);const float e6=0.75;const vec4 v6=vec4(0.3607843137254902,0.7843137254901961,0.38823529411764707,1);const float e7=0.88;const vec4 v7=vec4(0.6666666666666666,0.8627450980392157,0.19607843137254902,1);const float e8=1.0;const vec4 v8=vec4(0.9921568627450981,0.9058823529411765,0.1450980392156863,1);float a0=smoothstep(e0,e1,x_22);float a1=smoothstep(e1,e2,x_22);float a2=smoothstep(e2,e3,x_22);float a3=smoothstep(e3,e4,x_22);float a4=smoothstep(e4,e5,x_22);float a5=smoothstep(e5,e6,x_22);float a6=smoothstep(e6,e7,x_22);float a7=smoothstep(e7,e8,x_22);return max(mix(v0,v1,a0)*step(e0,x_22)*step(x_22,e1),max(mix(v1,v2,a1)*step(e1,x_22)*step(x_22,e2),max(mix(v2,v3,a2)*step(e2,x_22)*step(x_22,e3),max(mix(v3,v4,a3)*step(e3,x_22)*step(x_22,e4),max(mix(v4,v5,a4)*step(e4,x_22)*step(x_22,e5),max(mix(v5,v6,a5)*step(e5,x_22)*step(x_22,e6),max(mix(v6,v7,a6)*step(e6,x_22)*step(x_22,e7),mix(v7,v8,a7)*step(e7,x_22)*step(x_22,e8))))))));}vec4 inferno(float x_30){const float e0=0.0;const vec4 v0=vec4(0,0,0.01568627450980392,1);const float e1=0.13;const vec4 v1=vec4(0.12156862745098039,0.047058823529411764,0.2823529411764706,1);const float e2=0.25;const vec4 v2=vec4(0.3333333333333333,0.058823529411764705,0.42745098039215684,1);const float e3=0.38;const vec4 v3=vec4(0.5333333333333333,0.13333333333333333,0.41568627450980394,1);const float e4=0.5;const vec4 v4=vec4(0.7294117647058823,0.21176470588235294,0.3333333333333333,1);const float e5=0.63;const vec4 v5=vec4(0.8901960784313725,0.34901960784313724,0.2,1);const float e6=0.75;const vec4 v6=vec4(0.9764705882352941,0.5490196078431373,0.0392156862745098,1);const float e7=0.88;const vec4 v7=vec4(0.9764705882352941,0.788235294117647,0.19607843137254902,1);const float e8=1.0;const vec4 v8=vec4(0.9882352941176471,1,0.6431372549019608,1);float a0=smoothstep(e0,e1,x_30);float a1=smoothstep(e1,e2,x_30);float a2=smoothstep(e2,e3,x_30);float a3=smoothstep(e3,e4,x_30);float a4=smoothstep(e4,e5,x_30);float a5=smoothstep(e5,e6,x_30);float a6=smoothstep(e6,e7,x_30);float a7=smoothstep(e7,e8,x_30);return max(mix(v0,v1,a0)*step(e0,x_30)*step(x_30,e1),max(mix(v1,v2,a1)*step(e1,x_30)*step(x_30,e2),max(mix(v2,v3,a2)*step(e2,x_30)*step(x_30,e3),max(mix(v3,v4,a3)*step(e3,x_30)*step(x_30,e4),max(mix(v4,v5,a4)*step(e4,x_30)*step(x_30,e5),max(mix(v5,v6,a5)*step(e5,x_30)*step(x_30,e6),max(mix(v6,v7,a6)*step(e6,x_30)*step(x_30,e7),mix(v7,v8,a7)*step(e7,x_30)*step(x_30,e8))))))));}vec4 magma(float x_33){const float e0=0.0;const vec4 v0=vec4(0,0,0.01568627450980392,1);const float e1=0.13;const vec4 v1=vec4(0.10980392156862745,0.06274509803921569,0.26666666666666666,1);const float e2=0.25;const vec4 v2=vec4(0.30980392156862746,0.07058823529411765,0.4823529411764706,1);const float e3=0.38;const vec4 v3=vec4(0.5058823529411764,0.1450980392156863,0.5058823529411764,1);const float e4=0.5;const vec4 v4=vec4(0.7098039215686275,0.21176470588235294,0.47843137254901963,1);const float e5=0.63;const vec4 v5=vec4(0.8980392156862745,0.3137254901960784,0.39215686274509803,1);const float e6=0.75;const vec4 v6=vec4(0.984313725490196,0.5294117647058824,0.3803921568627451,1);const float e7=0.88;const vec4 v7=vec4(0.996078431372549,0.7607843137254902,0.5294117647058824,1);const float e8=1.0;const vec4 v8=vec4(0.9882352941176471,0.9921568627450981,0.7490196078431373,1);float a0=smoothstep(e0,e1,x_33);float a1=smoothstep(e1,e2,x_33);float a2=smoothstep(e2,e3,x_33);float a3=smoothstep(e3,e4,x_33);float a4=smoothstep(e4,e5,x_33);float a5=smoothstep(e5,e6,x_33);float a6=smoothstep(e6,e7,x_33);float a7=smoothstep(e7,e8,x_33);return max(mix(v0,v1,a0)*step(e0,x_33)*step(x_33,e1),max(mix(v1,v2,a1)*step(e1,x_33)*step(x_33,e2),max(mix(v2,v3,a2)*step(e2,x_33)*step(x_33,e3),max(mix(v3,v4,a3)*step(e3,x_33)*step(x_33,e4),max(mix(v4,v5,a4)*step(e4,x_33)*step(x_33,e5),max(mix(v5,v6,a5)*step(e5,x_33)*step(x_33,e6),max(mix(v6,v7,a6)*step(e6,x_33)*step(x_33,e7),mix(v7,v8,a7)*step(e7,x_33)*step(x_33,e8))))))));}vec4 plasma(float x_3){const float e0=0.0;const vec4 v0=vec4(0.050980392156862744,0.03137254901960784,0.5294117647058824,1);const float e1=0.13;const vec4 v1=vec4(0.29411764705882354,0.011764705882352941,0.6313725490196078,1);const float e2=0.25;const vec4 v2=vec4(0.49019607843137253,0.011764705882352941,0.6588235294117647,1);const float e3=0.38;const vec4 v3=vec4(0.6588235294117647,0.13333333333333333,0.5882352941176471,1);const float e4=0.5;const vec4 v4=vec4(0.796078431372549,0.27450980392156865,0.4745098039215686,1);const float e5=0.63;const vec4 v5=vec4(0.8980392156862745,0.4196078431372549,0.36470588235294116,1);const float e6=0.75;const vec4 v6=vec4(0.9725490196078431,0.5803921568627451,0.2549019607843137,1);const float e7=0.88;const vec4 v7=vec4(0.9921568627450981,0.7647058823529411,0.1568627450980392,1);const float e8=1.0;const vec4 v8=vec4(0.9411764705882353,0.9764705882352941,0.12941176470588237,1);float a0=smoothstep(e0,e1,x_3);float a1=smoothstep(e1,e2,x_3);float a2=smoothstep(e2,e3,x_3);float a3=smoothstep(e3,e4,x_3);float a4=smoothstep(e4,e5,x_3);float a5=smoothstep(e5,e6,x_3);float a6=smoothstep(e6,e7,x_3);float a7=smoothstep(e7,e8,x_3);return max(mix(v0,v1,a0)*step(e0,x_3)*step(x_3,e1),max(mix(v1,v2,a1)*step(e1,x_3)*step(x_3,e2),max(mix(v2,v3,a2)*step(e2,x_3)*step(x_3,e3),max(mix(v3,v4,a3)*step(e3,x_3)*step(x_3,e4),max(mix(v4,v5,a4)*step(e4,x_3)*step(x_3,e5),max(mix(v5,v6,a5)*step(e5,x_3)*step(x_3,e6),max(mix(v6,v7,a6)*step(e6,x_3)*step(x_3,e7),mix(v7,v8,a7)*step(e7,x_3)*step(x_3,e8))))))));}vec4 warm(float x_43){const float e0=0.0;const vec4 v0=vec4(0.49019607843137253,0,0.7019607843137254,1);const float e1=0.13;const vec4 v1=vec4(0.6745098039215687,0,0.7333333333333333,1);const float e2=0.25;const vec4 v2=vec4(0.8588235294117647,0,0.6666666666666666,1);const float e3=0.38;const vec4 v3=vec4(1,0,0.5098039215686274,1);const float e4=0.5;const vec4 v4=vec4(1,0.24705882352941178,0.2901960784313726,1);const float e5=0.63;const vec4 v5=vec4(1,0.4823529411764706,0,1);const float e6=0.75;const vec4 v6=vec4(0.9176470588235294,0.6901960784313725,0,1);const float e7=0.88;const vec4 v7=vec4(0.7450980392156863,0.8941176470588236,0,1);const float e8=1.0;const vec4 v8=vec4(0.5764705882352941,1,0,1);float a0=smoothstep(e0,e1,x_43);float a1=smoothstep(e1,e2,x_43);float a2=smoothstep(e2,e3,x_43);float a3=smoothstep(e3,e4,x_43);float a4=smoothstep(e4,e5,x_43);float a5=smoothstep(e5,e6,x_43);float a6=smoothstep(e6,e7,x_43);float a7=smoothstep(e7,e8,x_43);return max(mix(v0,v1,a0)*step(e0,x_43)*step(x_43,e1),max(mix(v1,v2,a1)*step(e1,x_43)*step(x_43,e2),max(mix(v2,v3,a2)*step(e2,x_43)*step(x_43,e3),max(mix(v3,v4,a3)*step(e3,x_43)*step(x_43,e4),max(mix(v4,v5,a4)*step(e4,x_43)*step(x_43,e5),max(mix(v5,v6,a5)*step(e5,x_43)*step(x_43,e6),max(mix(v6,v7,a6)*step(e6,x_43)*step(x_43,e7),mix(v7,v8,a7)*step(e7,x_43)*step(x_43,e8))))))));}vec4 rainbow_soft_1310269270(float x_14){const float e0=0.0;const vec4 v0=vec4(0.49019607843137253,0,0.7019607843137254,1);const float e1=0.1;const vec4 v1=vec4(0.7803921568627451,0,0.7058823529411765,1);const float e2=0.2;const vec4 v2=vec4(1,0,0.4745098039215686,1);const float e3=0.3;const vec4 v3=vec4(1,0.4235294117647059,0,1);const float e4=0.4;const vec4 v4=vec4(0.8705882352941177,0.7607843137254902,0,1);const float e5=0.5;const vec4 v5=vec4(0.5882352941176471,1,0,1);const float e6=0.6;const vec4 v6=vec4(0,1,0.21568627450980393,1);const float e7=0.7;const vec4 v7=vec4(0,0.9647058823529412,0.5882352941176471,1);const float e8=0.8;const vec4 v8=vec4(0.19607843137254902,0.6549019607843137,0.8705882352941177,1);const float e9=0.9;const vec4 v9=vec4(0.403921568627451,0.2,0.9215686274509803,1);const float e10=1.0;const vec4 v10=vec4(0.48627450980392156,0,0.7294117647058823,1);float a0=smoothstep(e0,e1,x_14);float a1=smoothstep(e1,e2,x_14);float a2=smoothstep(e2,e3,x_14);float a3=smoothstep(e3,e4,x_14);float a4=smoothstep(e4,e5,x_14);float a5=smoothstep(e5,e6,x_14);float a6=smoothstep(e6,e7,x_14);float a7=smoothstep(e7,e8,x_14);float a8=smoothstep(e8,e9,x_14);float a9=smoothstep(e9,e10,x_14);return max(mix(v0,v1,a0)*step(e0,x_14)*step(x_14,e1),max(mix(v1,v2,a1)*step(e1,x_14)*step(x_14,e2),max(mix(v2,v3,a2)*step(e2,x_14)*step(x_14,e3),max(mix(v3,v4,a3)*step(e3,x_14)*step(x_14,e4),max(mix(v4,v5,a4)*step(e4,x_14)*step(x_14,e5),max(mix(v5,v6,a5)*step(e5,x_14)*step(x_14,e6),max(mix(v6,v7,a6)*step(e6,x_14)*step(x_14,e7),max(mix(v7,v8,a7)*step(e7,x_14)*step(x_14,e8),max(mix(v8,v9,a8)*step(e8,x_14)*step(x_14,e9),mix(v9,v10,a9)*step(e9,x_14)*step(x_14,e10))))))))));}vec4 bathymetry(float x_36){const float e0=0.0;const vec4 v0=vec4(0.1568627450980392,0.10196078431372549,0.17254901960784313,1);const float e1=0.13;const vec4 v1=vec4(0.23137254901960785,0.19215686274509805,0.35294117647058826,1);const float e2=0.25;const vec4 v2=vec4(0.25098039215686274,0.2980392156862745,0.5450980392156862,1);const float e3=0.38;const vec4 v3=vec4(0.24705882352941178,0.43137254901960786,0.592156862745098,1);const float e4=0.5;const vec4 v4=vec4(0.2823529411764706,0.5568627450980392,0.6196078431372549,1);const float e5=0.63;const vec4 v5=vec4(0.3333333333333333,0.6823529411764706,0.6392156862745098,1);const float e6=0.75;const vec4 v6=vec4(0.47058823529411764,0.807843137254902,0.6392156862745098,1);const float e7=0.88;const vec4 v7=vec4(0.7333333333333333,0.9019607843137255,0.6745098039215687,1);const float e8=1.0;const vec4 v8=vec4(0.9921568627450981,0.996078431372549,0.8,1);float a0=smoothstep(e0,e1,x_36);float a1=smoothstep(e1,e2,x_36);float a2=smoothstep(e2,e3,x_36);float a3=smoothstep(e3,e4,x_36);float a4=smoothstep(e4,e5,x_36);float a5=smoothstep(e5,e6,x_36);float a6=smoothstep(e6,e7,x_36);float a7=smoothstep(e7,e8,x_36);return max(mix(v0,v1,a0)*step(e0,x_36)*step(x_36,e1),max(mix(v1,v2,a1)*step(e1,x_36)*step(x_36,e2),max(mix(v2,v3,a2)*step(e2,x_36)*step(x_36,e3),max(mix(v3,v4,a3)*step(e3,x_36)*step(x_36,e4),max(mix(v4,v5,a4)*step(e4,x_36)*step(x_36,e5),max(mix(v5,v6,a5)*step(e5,x_36)*step(x_36,e6),max(mix(v6,v7,a6)*step(e6,x_36)*step(x_36,e7),mix(v7,v8,a7)*step(e7,x_36)*step(x_36,e8))))))));}vec4 cdom(float x_7){const float e0=0.0;const vec4 v0=vec4(0.1843137254901961,0.058823529411764705,0.24313725490196078,1);const float e1=0.13;const vec4 v1=vec4(0.3411764705882353,0.09019607843137255,0.33725490196078434,1);const float e2=0.25;const vec4 v2=vec4(0.5098039215686274,0.10980392156862745,0.38823529411764707,1);const float e3=0.38;const vec4 v3=vec4(0.6705882352941176,0.1607843137254902,0.3764705882352941,1);const float e4=0.5;const vec4 v4=vec4(0.807843137254902,0.2627450980392157,0.33725490196078434,1);const float e5=0.63;const vec4 v5=vec4(0.9019607843137255,0.41568627450980394,0.32941176470588235,1);const float e6=0.75;const vec4 v6=vec4(0.9490196078431372,0.5843137254901961,0.403921568627451,1);const float e7=0.88;const vec4 v7=vec4(0.9764705882352941,0.7568627450980392,0.5294117647058824,1);const float e8=1.0;const vec4 v8=vec4(0.996078431372549,0.9294117647058824,0.6901960784313725,1);float a0=smoothstep(e0,e1,x_7);float a1=smoothstep(e1,e2,x_7);float a2=smoothstep(e2,e3,x_7);float a3=smoothstep(e3,e4,x_7);float a4=smoothstep(e4,e5,x_7);float a5=smoothstep(e5,e6,x_7);float a6=smoothstep(e6,e7,x_7);float a7=smoothstep(e7,e8,x_7);return max(mix(v0,v1,a0)*step(e0,x_7)*step(x_7,e1),max(mix(v1,v2,a1)*step(e1,x_7)*step(x_7,e2),max(mix(v2,v3,a2)*step(e2,x_7)*step(x_7,e3),max(mix(v3,v4,a3)*step(e3,x_7)*step(x_7,e4),max(mix(v4,v5,a4)*step(e4,x_7)*step(x_7,e5),max(mix(v5,v6,a5)*step(e5,x_7)*step(x_7,e6),max(mix(v6,v7,a6)*step(e6,x_7)*step(x_7,e7),mix(v7,v8,a7)*step(e7,x_7)*step(x_7,e8))))))));}vec4 chlorophyll(float x_6){const float e0=0.0;const vec4 v0=vec4(0.07058823529411765,0.1411764705882353,0.0784313725490196,1);const float e1=0.13;const vec4 v1=vec4(0.09803921568627451,0.24705882352941178,0.1607843137254902,1);const float e2=0.25;const vec4 v2=vec4(0.09411764705882353,0.3568627450980392,0.23137254901960785,1);const float e3=0.38;const vec4 v3=vec4(0.050980392156862744,0.4666666666666667,0.2823529411764706,1);const float e4=0.5;const vec4 v4=vec4(0.07058823529411765,0.5803921568627451,0.3137254901960784,1);const float e5=0.63;const vec4 v5=vec4(0.3137254901960784,0.6784313725490196,0.34901960784313724,1);const float e6=0.75;const vec4 v6=vec4(0.5176470588235295,0.7686274509803922,0.47843137254901963,1);const float e7=0.88;const vec4 v7=vec4(0.6862745098039216,0.8666666666666667,0.6352941176470588,1);const float e8=1.0;const vec4 v8=vec4(0.8431372549019608,0.9764705882352941,0.8156862745098039,1);float a0=smoothstep(e0,e1,x_6);float a1=smoothstep(e1,e2,x_6);float a2=smoothstep(e2,e3,x_6);float a3=smoothstep(e3,e4,x_6);float a4=smoothstep(e4,e5,x_6);float a5=smoothstep(e5,e6,x_6);float a6=smoothstep(e6,e7,x_6);float a7=smoothstep(e7,e8,x_6);return max(mix(v0,v1,a0)*step(e0,x_6)*step(x_6,e1),max(mix(v1,v2,a1)*step(e1,x_6)*step(x_6,e2),max(mix(v2,v3,a2)*step(e2,x_6)*step(x_6,e3),max(mix(v3,v4,a3)*step(e3,x_6)*step(x_6,e4),max(mix(v4,v5,a4)*step(e4,x_6)*step(x_6,e5),max(mix(v5,v6,a5)*step(e5,x_6)*step(x_6,e6),max(mix(v6,v7,a6)*step(e6,x_6)*step(x_6,e7),mix(v7,v8,a7)*step(e7,x_6)*step(x_6,e8))))))));}vec4 density(float x_19){const float e0=0.0;const vec4 v0=vec4(0.21176470588235294,0.054901960784313725,0.1411764705882353,1);const float e1=0.13;const vec4 v1=vec4(0.34901960784313724,0.09019607843137255,0.3137254901960784,1);const float e2=0.25;const vec4 v2=vec4(0.43137254901960786,0.17647058823529413,0.5176470588235295,1);const float e3=0.38;const vec4 v3=vec4(0.47058823529411764,0.30196078431372547,0.6980392156862745,1);const float e4=0.5;const vec4 v4=vec4(0.47058823529411764,0.44313725490196076,0.8352941176470589,1);const float e5=0.63;const vec4 v5=vec4(0.45098039215686275,0.592156862745098,0.8941176470588236,1);const float e6=0.75;const vec4 v6=vec4(0.5254901960784314,0.7254901960784313,0.8901960784313725,1);const float e7=0.88;const vec4 v7=vec4(0.6941176470588235,0.8392156862745098,0.8901960784313725,1);const float e8=1.0;const vec4 v8=vec4(0.9019607843137255,0.9450980392156862,0.9450980392156862,1);float a0=smoothstep(e0,e1,x_19);float a1=smoothstep(e1,e2,x_19);float a2=smoothstep(e2,e3,x_19);float a3=smoothstep(e3,e4,x_19);float a4=smoothstep(e4,e5,x_19);float a5=smoothstep(e5,e6,x_19);float a6=smoothstep(e6,e7,x_19);float a7=smoothstep(e7,e8,x_19);return max(mix(v0,v1,a0)*step(e0,x_19)*step(x_19,e1),max(mix(v1,v2,a1)*step(e1,x_19)*step(x_19,e2),max(mix(v2,v3,a2)*step(e2,x_19)*step(x_19,e3),max(mix(v3,v4,a3)*step(e3,x_19)*step(x_19,e4),max(mix(v4,v5,a4)*step(e4,x_19)*step(x_19,e5),max(mix(v5,v6,a5)*step(e5,x_19)*step(x_19,e6),max(mix(v6,v7,a6)*step(e6,x_19)*step(x_19,e7),mix(v7,v8,a7)*step(e7,x_19)*step(x_19,e8))))))));}vec4 freesurface_blue_3154355989(float x_35){const float e0=0.0;const vec4 v0=vec4(0.11764705882352941,0.01568627450980392,0.43137254901960786,1);const float e1=0.13;const vec4 v1=vec4(0.1843137254901961,0.054901960784313725,0.6901960784313725,1);const float e2=0.25;const vec4 v2=vec4(0.1607843137254902,0.17647058823529413,0.9254901960784314,1);const float e3=0.38;const vec4 v3=vec4(0.09803921568627451,0.38823529411764707,0.8313725490196079,1);const float e4=0.5;const vec4 v4=vec4(0.26666666666666666,0.5137254901960784,0.7843137254901961,1);const float e5=0.63;const vec4 v5=vec4(0.4470588235294118,0.611764705882353,0.7725490196078432,1);const float e6=0.75;const vec4 v6=vec4(0.615686274509804,0.7098039215686275,0.796078431372549,1);const float e7=0.88;const vec4 v7=vec4(0.7843137254901961,0.8156862745098039,0.8470588235294118,1);const float e8=1.0;const vec4 v8=vec4(0.9450980392156862,0.9294117647058824,0.9254901960784314,1);float a0=smoothstep(e0,e1,x_35);float a1=smoothstep(e1,e2,x_35);float a2=smoothstep(e2,e3,x_35);float a3=smoothstep(e3,e4,x_35);float a4=smoothstep(e4,e5,x_35);float a5=smoothstep(e5,e6,x_35);float a6=smoothstep(e6,e7,x_35);float a7=smoothstep(e7,e8,x_35);return max(mix(v0,v1,a0)*step(e0,x_35)*step(x_35,e1),max(mix(v1,v2,a1)*step(e1,x_35)*step(x_35,e2),max(mix(v2,v3,a2)*step(e2,x_35)*step(x_35,e3),max(mix(v3,v4,a3)*step(e3,x_35)*step(x_35,e4),max(mix(v4,v5,a4)*step(e4,x_35)*step(x_35,e5),max(mix(v5,v6,a5)*step(e5,x_35)*step(x_35,e6),max(mix(v6,v7,a6)*step(e6,x_35)*step(x_35,e7),mix(v7,v8,a7)*step(e7,x_35)*step(x_35,e8))))))));}vec4 freesurface_red_1679163293(float x_20){const float e0=0.0;const vec4 v0=vec4(0.23529411764705882,0.03529411764705882,0.07058823529411765,1);const float e1=0.13;const vec4 v1=vec4(0.39215686274509803,0.06666666666666667,0.10588235294117647,1);const float e2=0.25;const vec4 v2=vec4(0.5568627450980392,0.0784313725490196,0.11372549019607843,1);const float e3=0.38;const vec4 v3=vec4(0.6941176470588235,0.16862745098039217,0.10588235294117647,1);const float e4=0.5;const vec4 v4=vec4(0.7529411764705882,0.3411764705882353,0.24705882352941178,1);const float e5=0.63;const vec4 v5=vec4(0.803921568627451,0.49019607843137253,0.4117647058823529,1);const float e6=0.75;const vec4 v6=vec4(0.8470588235294118,0.6352941176470588,0.5803921568627451,1);const float e7=0.88;const vec4 v7=vec4(0.8901960784313725,0.7803921568627451,0.7568627450980392,1);const float e8=1.0;const vec4 v8=vec4(0.9450980392156862,0.9294117647058824,0.9254901960784314,1);float a0=smoothstep(e0,e1,x_20);float a1=smoothstep(e1,e2,x_20);float a2=smoothstep(e2,e3,x_20);float a3=smoothstep(e3,e4,x_20);float a4=smoothstep(e4,e5,x_20);float a5=smoothstep(e5,e6,x_20);float a6=smoothstep(e6,e7,x_20);float a7=smoothstep(e7,e8,x_20);return max(mix(v0,v1,a0)*step(e0,x_20)*step(x_20,e1),max(mix(v1,v2,a1)*step(e1,x_20)*step(x_20,e2),max(mix(v2,v3,a2)*step(e2,x_20)*step(x_20,e3),max(mix(v3,v4,a3)*step(e3,x_20)*step(x_20,e4),max(mix(v4,v5,a4)*step(e4,x_20)*step(x_20,e5),max(mix(v5,v6,a5)*step(e5,x_20)*step(x_20,e6),max(mix(v6,v7,a6)*step(e6,x_20)*step(x_20,e7),mix(v7,v8,a7)*step(e7,x_20)*step(x_20,e8))))))));}vec4 oxygen(float x_11){const float e0=0.0;const vec4 v0=vec4(0.25098039215686274,0.0196078431372549,0.0196078431372549,1);const float e1=0.13;const vec4 v1=vec4(0.41568627450980394,0.023529411764705882,0.058823529411764705,1);const float e2=0.25;const vec4 v2=vec4(0.5647058823529412,0.10196078431372549,0.027450980392156862,1);const float e3=0.38;const vec4 v3=vec4(0.6588235294117647,0.25098039215686274,0.011764705882352941,1);const float e4=0.5;const vec4 v4=vec4(0.7372549019607844,0.39215686274509803,0.01568627450980392,1);const float e5=0.63;const vec4 v5=vec4(0.807843137254902,0.5333333333333333,0.043137254901960784,1);const float e6=0.75;const vec4 v6=vec4(0.8627450980392157,0.6823529411764706,0.09803921568627451,1);const float e7=0.88;const vec4 v7=vec4(0.9058823529411765,0.8431372549019608,0.17254901960784313,1);const float e8=1.0;const vec4 v8=vec4(0.9725490196078431,0.996078431372549,0.4117647058823529,1);float a0=smoothstep(e0,e1,x_11);float a1=smoothstep(e1,e2,x_11);float a2=smoothstep(e2,e3,x_11);float a3=smoothstep(e3,e4,x_11);float a4=smoothstep(e4,e5,x_11);float a5=smoothstep(e5,e6,x_11);float a6=smoothstep(e6,e7,x_11);float a7=smoothstep(e7,e8,x_11);return max(mix(v0,v1,a0)*step(e0,x_11)*step(x_11,e1),max(mix(v1,v2,a1)*step(e1,x_11)*step(x_11,e2),max(mix(v2,v3,a2)*step(e2,x_11)*step(x_11,e3),max(mix(v3,v4,a3)*step(e3,x_11)*step(x_11,e4),max(mix(v4,v5,a4)*step(e4,x_11)*step(x_11,e5),max(mix(v5,v6,a5)*step(e5,x_11)*step(x_11,e6),max(mix(v6,v7,a6)*step(e6,x_11)*step(x_11,e7),mix(v7,v8,a7)*step(e7,x_11)*step(x_11,e8))))))));}vec4 par(float x_28){const float e0=0.0;const vec4 v0=vec4(0.2,0.0784313725490196,0.09411764705882353,1);const float e1=0.13;const vec4 v1=vec4(0.35294117647058826,0.12549019607843137,0.13725490196078433,1);const float e2=0.25;const vec4 v2=vec4(0.5058823529411764,0.17254901960784313,0.13333333333333333,1);const float e3=0.38;const vec4 v3=vec4(0.6235294117647059,0.26666666666666666,0.09803921568627451,1);const float e4=0.5;const vec4 v4=vec4(0.7137254901960784,0.38823529411764707,0.07450980392156863,1);const float e5=0.63;const vec4 v5=vec4(0.7803921568627451,0.5254901960784314,0.08627450980392157,1);const float e6=0.75;const vec4 v6=vec4(0.8313725490196079,0.6705882352941176,0.13725490196078433,1);const float e7=0.88;const vec4 v7=vec4(0.8666666666666667,0.8235294117647058,0.21176470588235294,1);const float e8=1.0;const vec4 v8=vec4(0.8823529411764706,0.9921568627450981,0.29411764705882354,1);float a0=smoothstep(e0,e1,x_28);float a1=smoothstep(e1,e2,x_28);float a2=smoothstep(e2,e3,x_28);float a3=smoothstep(e3,e4,x_28);float a4=smoothstep(e4,e5,x_28);float a5=smoothstep(e5,e6,x_28);float a6=smoothstep(e6,e7,x_28);float a7=smoothstep(e7,e8,x_28);return max(mix(v0,v1,a0)*step(e0,x_28)*step(x_28,e1),max(mix(v1,v2,a1)*step(e1,x_28)*step(x_28,e2),max(mix(v2,v3,a2)*step(e2,x_28)*step(x_28,e3),max(mix(v3,v4,a3)*step(e3,x_28)*step(x_28,e4),max(mix(v4,v5,a4)*step(e4,x_28)*step(x_28,e5),max(mix(v5,v6,a5)*step(e5,x_28)*step(x_28,e6),max(mix(v6,v7,a6)*step(e6,x_28)*step(x_28,e7),mix(v7,v8,a7)*step(e7,x_28)*step(x_28,e8))))))));}vec4 phase(float x_39){const float e0=0.0;const vec4 v0=vec4(0.5686274509803921,0.4117647058823529,0.07058823529411765,1);const float e1=0.13;const vec4 v1=vec4(0.7215686274509804,0.2784313725490196,0.14901960784313725,1);const float e2=0.25;const vec4 v2=vec4(0.7294117647058823,0.22745098039215686,0.45098039215686275,1);const float e3=0.38;const vec4 v3=vec4(0.6274509803921569,0.2784313725490196,0.7254901960784313,1);const float e4=0.5;const vec4 v4=vec4(0.43137254901960786,0.3803921568627451,0.8549019607843137,1);const float e5=0.63;const vec4 v5=vec4(0.19607843137254902,0.4823529411764706,0.6431372549019608,1);const float e6=0.75;const vec4 v6=vec4(0.12156862745098039,0.5137254901960784,0.43137254901960786,1);const float e7=0.88;const vec4 v7=vec4(0.30196078431372547,0.5058823529411764,0.13333333333333333,1);const float e8=1.0;const vec4 v8=vec4(0.5686274509803921,0.4117647058823529,0.07058823529411765,1);float a0=smoothstep(e0,e1,x_39);float a1=smoothstep(e1,e2,x_39);float a2=smoothstep(e2,e3,x_39);float a3=smoothstep(e3,e4,x_39);float a4=smoothstep(e4,e5,x_39);float a5=smoothstep(e5,e6,x_39);float a6=smoothstep(e6,e7,x_39);float a7=smoothstep(e7,e8,x_39);return max(mix(v0,v1,a0)*step(e0,x_39)*step(x_39,e1),max(mix(v1,v2,a1)*step(e1,x_39)*step(x_39,e2),max(mix(v2,v3,a2)*step(e2,x_39)*step(x_39,e3),max(mix(v3,v4,a3)*step(e3,x_39)*step(x_39,e4),max(mix(v4,v5,a4)*step(e4,x_39)*step(x_39,e5),max(mix(v5,v6,a5)*step(e5,x_39)*step(x_39,e6),max(mix(v6,v7,a6)*step(e6,x_39)*step(x_39,e7),mix(v7,v8,a7)*step(e7,x_39)*step(x_39,e8))))))));}vec4 salinity(float x_26){const float e0=0.0;const vec4 v0=vec4(0.16470588235294117,0.09411764705882353,0.4235294117647059,1);const float e1=0.13;const vec4 v1=vec4(0.12941176470588237,0.19607843137254902,0.6352941176470588,1);const float e2=0.25;const vec4 v2=vec4(0.058823529411764705,0.35294117647058826,0.5686274509803921,1);const float e3=0.38;const vec4 v3=vec4(0.1568627450980392,0.4627450980392157,0.5372549019607843,1);const float e4=0.5;const vec4 v4=vec4(0.23137254901960785,0.5725490196078431,0.5294117647058824,1);const float e5=0.63;const vec4 v5=vec4(0.30980392156862746,0.6862745098039216,0.49411764705882355,1);const float e6=0.75;const vec4 v6=vec4(0.47058823529411764,0.796078431372549,0.40784313725490196,1);const float e7=0.88;const vec4 v7=vec4(0.7568627450980392,0.8666666666666667,0.39215686274509803,1);const float e8=1.0;const vec4 v8=vec4(0.9921568627450981,0.9372549019607843,0.6039215686274509,1);float a0=smoothstep(e0,e1,x_26);float a1=smoothstep(e1,e2,x_26);float a2=smoothstep(e2,e3,x_26);float a3=smoothstep(e3,e4,x_26);float a4=smoothstep(e4,e5,x_26);float a5=smoothstep(e5,e6,x_26);float a6=smoothstep(e6,e7,x_26);float a7=smoothstep(e7,e8,x_26);return max(mix(v0,v1,a0)*step(e0,x_26)*step(x_26,e1),max(mix(v1,v2,a1)*step(e1,x_26)*step(x_26,e2),max(mix(v2,v3,a2)*step(e2,x_26)*step(x_26,e3),max(mix(v3,v4,a3)*step(e3,x_26)*step(x_26,e4),max(mix(v4,v5,a4)*step(e4,x_26)*step(x_26,e5),max(mix(v5,v6,a5)*step(e5,x_26)*step(x_26,e6),max(mix(v6,v7,a6)*step(e6,x_26)*step(x_26,e7),mix(v7,v8,a7)*step(e7,x_26)*step(x_26,e8))))))));}vec4 temperature(float x_8){const float e0=0.0;const vec4 v0=vec4(0.01568627450980392,0.13725490196078433,0.2,1);const float e1=0.13;const vec4 v1=vec4(0.09019607843137255,0.2,0.47843137254901963,1);const float e2=0.25;const vec4 v2=vec4(0.3333333333333333,0.23137254901960785,0.615686274509804,1);const float e3=0.38;const vec4 v3=vec4(0.5058823529411764,0.30980392156862746,0.5607843137254902,1);const float e4=0.5;const vec4 v4=vec4(0.6862745098039216,0.37254901960784315,0.5098039215686274,1);const float e5=0.63;const vec4 v5=vec4(0.8705882352941177,0.4392156862745098,0.396078431372549,1);const float e6=0.75;const vec4 v6=vec4(0.9764705882352941,0.5725490196078431,0.25882352941176473,1);const float e7=0.88;const vec4 v7=vec4(0.9764705882352941,0.7686274509803922,0.2549019607843137,1);const float e8=1.0;const vec4 v8=vec4(0.9098039215686274,0.9803921568627451,0.3568627450980392,1);float a0=smoothstep(e0,e1,x_8);float a1=smoothstep(e1,e2,x_8);float a2=smoothstep(e2,e3,x_8);float a3=smoothstep(e3,e4,x_8);float a4=smoothstep(e4,e5,x_8);float a5=smoothstep(e5,e6,x_8);float a6=smoothstep(e6,e7,x_8);float a7=smoothstep(e7,e8,x_8);return max(mix(v0,v1,a0)*step(e0,x_8)*step(x_8,e1),max(mix(v1,v2,a1)*step(e1,x_8)*step(x_8,e2),max(mix(v2,v3,a2)*step(e2,x_8)*step(x_8,e3),max(mix(v3,v4,a3)*step(e3,x_8)*step(x_8,e4),max(mix(v4,v5,a4)*step(e4,x_8)*step(x_8,e5),max(mix(v5,v6,a5)*step(e5,x_8)*step(x_8,e6),max(mix(v6,v7,a6)*step(e6,x_8)*step(x_8,e7),mix(v7,v8,a7)*step(e7,x_8)*step(x_8,e8))))))));}vec4 turbidity(float x_40){const float e0=0.0;const vec4 v0=vec4(0.13333333333333333,0.12156862745098039,0.10588235294117647,1);const float e1=0.13;const vec4 v1=vec4(0.2549019607843137,0.19607843137254902,0.1607843137254902,1);const float e2=0.25;const vec4 v2=vec4(0.3843137254901961,0.27058823529411763,0.20392156862745098,1);const float e3=0.38;const vec4 v3=vec4(0.5137254901960784,0.34901960784313724,0.2235294117647059,1);const float e4=0.5;const vec4 v4=vec4(0.6313725490196078,0.4392156862745098,0.23137254901960785,1);const float e5=0.63;const vec4 v5=vec4(0.7254901960784313,0.5490196078431373,0.25882352941176473,1);const float e6=0.75;const vec4 v6=vec4(0.792156862745098,0.6823529411764706,0.34509803921568627,1);const float e7=0.88;const vec4 v7=vec4(0.8470588235294118,0.8196078431372549,0.49411764705882355,1);const float e8=1.0;const vec4 v8=vec4(0.9137254901960784,0.9647058823529412,0.6705882352941176,1);float a0=smoothstep(e0,e1,x_40);float a1=smoothstep(e1,e2,x_40);float a2=smoothstep(e2,e3,x_40);float a3=smoothstep(e3,e4,x_40);float a4=smoothstep(e4,e5,x_40);float a5=smoothstep(e5,e6,x_40);float a6=smoothstep(e6,e7,x_40);float a7=smoothstep(e7,e8,x_40);return max(mix(v0,v1,a0)*step(e0,x_40)*step(x_40,e1),max(mix(v1,v2,a1)*step(e1,x_40)*step(x_40,e2),max(mix(v2,v3,a2)*step(e2,x_40)*step(x_40,e3),max(mix(v3,v4,a3)*step(e3,x_40)*step(x_40,e4),max(mix(v4,v5,a4)*step(e4,x_40)*step(x_40,e5),max(mix(v5,v6,a5)*step(e5,x_40)*step(x_40,e6),max(mix(v6,v7,a6)*step(e6,x_40)*step(x_40,e7),mix(v7,v8,a7)*step(e7,x_40)*step(x_40,e8))))))));}vec4 velocity_blue_297387650(float x_2){const float e0=0.0;const vec4 v0=vec4(0.06666666666666667,0.12549019607843137,0.25098039215686274,1);const float e1=0.13;const vec4 v1=vec4(0.13725490196078433,0.20392156862745098,0.4549019607843137,1);const float e2=0.25;const vec4 v2=vec4(0.11372549019607843,0.3176470588235294,0.611764705882353,1);const float e3=0.38;const vec4 v3=vec4(0.12156862745098039,0.44313725490196076,0.6352941176470588,1);const float e4=0.5;const vec4 v4=vec4(0.19607843137254902,0.5647058823529412,0.6627450980392157,1);const float e5=0.63;const vec4 v5=vec4(0.3411764705882353,0.6784313725490196,0.6901960784313725,1);const float e6=0.75;const vec4 v6=vec4(0.5843137254901961,0.7686274509803922,0.7411764705882353,1);const float e7=0.88;const vec4 v7=vec4(0.796078431372549,0.8666666666666667,0.8274509803921568,1);const float e8=1.0;const vec4 v8=vec4(0.996078431372549,0.984313725490196,0.9019607843137255,1);float a0=smoothstep(e0,e1,x_2);float a1=smoothstep(e1,e2,x_2);float a2=smoothstep(e2,e3,x_2);float a3=smoothstep(e3,e4,x_2);float a4=smoothstep(e4,e5,x_2);float a5=smoothstep(e5,e6,x_2);float a6=smoothstep(e6,e7,x_2);float a7=smoothstep(e7,e8,x_2);return max(mix(v0,v1,a0)*step(e0,x_2)*step(x_2,e1),max(mix(v1,v2,a1)*step(e1,x_2)*step(x_2,e2),max(mix(v2,v3,a2)*step(e2,x_2)*step(x_2,e3),max(mix(v3,v4,a3)*step(e3,x_2)*step(x_2,e4),max(mix(v4,v5,a4)*step(e4,x_2)*step(x_2,e5),max(mix(v5,v6,a5)*step(e5,x_2)*step(x_2,e6),max(mix(v6,v7,a6)*step(e6,x_2)*step(x_2,e7),mix(v7,v8,a7)*step(e7,x_2)*step(x_2,e8))))))));}vec4 velocity_green_2558432129(float x_27){const float e0=0.0;const vec4 v0=vec4(0.09019607843137255,0.13725490196078433,0.07450980392156863,1);const float e1=0.13;const vec4 v1=vec4(0.09411764705882353,0.25098039215686274,0.14901960784313725,1);const float e2=0.25;const vec4 v2=vec4(0.043137254901960784,0.37254901960784315,0.17647058823529413,1);const float e3=0.38;const vec4 v3=vec4(0.15294117647058825,0.4823529411764706,0.13725490196078433,1);const float e4=0.5;const vec4 v4=vec4(0.37254901960784315,0.5725490196078431,0.047058823529411764,1);const float e5=0.63;const vec4 v5=vec4(0.596078431372549,0.6470588235294118,0.07058823529411765,1);const float e6=0.75;const vec4 v6=vec4(0.788235294117647,0.7294117647058823,0.27058823529411763,1);const float e7=0.88;const vec4 v7=vec4(0.9137254901960784,0.8470588235294118,0.5372549019607843,1);const float e8=1.0;const vec4 v8=vec4(1,0.9921568627450981,0.803921568627451,1);float a0=smoothstep(e0,e1,x_27);float a1=smoothstep(e1,e2,x_27);float a2=smoothstep(e2,e3,x_27);float a3=smoothstep(e3,e4,x_27);float a4=smoothstep(e4,e5,x_27);float a5=smoothstep(e5,e6,x_27);float a6=smoothstep(e6,e7,x_27);float a7=smoothstep(e7,e8,x_27);return max(mix(v0,v1,a0)*step(e0,x_27)*step(x_27,e1),max(mix(v1,v2,a1)*step(e1,x_27)*step(x_27,e2),max(mix(v2,v3,a2)*step(e2,x_27)*step(x_27,e3),max(mix(v3,v4,a3)*step(e3,x_27)*step(x_27,e4),max(mix(v4,v5,a4)*step(e4,x_27)*step(x_27,e5),max(mix(v5,v6,a5)*step(e5,x_27)*step(x_27,e6),max(mix(v6,v7,a6)*step(e6,x_27)*step(x_27,e7),mix(v7,v8,a7)*step(e7,x_27)*step(x_27,e8))))))));}vec4 cubehelix(float x_37){const float e0=0.0;const vec4 v0=vec4(0,0,0,1);const float e1=0.07;const vec4 v1=vec4(0.08627450980392157,0.0196078431372549,0.23137254901960785,1);const float e2=0.13;const vec4 v2=vec4(0.23529411764705882,0.01568627450980392,0.4117647058823529,1);const float e3=0.2;const vec4 v3=vec4(0.42745098039215684,0.00392156862745098,0.5294117647058824,1);const float e4=0.27;const vec4 v4=vec4(0.6313725490196078,0,0.5764705882352941,1);const float e5=0.33;const vec4 v5=vec4(0.8235294117647058,0.00784313725490196,0.5568627450980392,1);const float e6=0.4;const vec4 v6=vec4(0.984313725490196,0.043137254901960784,0.4823529411764706,1);const float e7=0.47;const vec4 v7=vec4(1,0.11372549019607843,0.3803921568627451,1);const float e8=0.53;const vec4 v8=vec4(1,0.21176470588235294,0.27058823529411763,1);const float e9=0.6;const vec4 v9=vec4(1,0.3333333333333333,0.1803921568627451,1);const float e10=0.67;const vec4 v10=vec4(1,0.47058823529411764,0.13333333333333333,1);const float e11=0.73;const vec4 v11=vec4(1,0.615686274509804,0.1450980392156863,1);const float e12=0.8;const vec4 v12=vec4(0.9450980392156862,0.7490196078431373,0.2235294117647059,1);const float e13=0.87;const vec4 v13=vec4(0.8784313725490196,0.8627450980392157,0.36470588235294116,1);const float e14=0.93;const vec4 v14=vec4(0.8549019607843137,0.9450980392156862,0.5568627450980392,1);const float e15=1.0;const vec4 v15=vec4(0.8901960784313725,0.9921568627450981,0.7764705882352941,1);float a0=smoothstep(e0,e1,x_37);float a1=smoothstep(e1,e2,x_37);float a2=smoothstep(e2,e3,x_37);float a3=smoothstep(e3,e4,x_37);float a4=smoothstep(e4,e5,x_37);float a5=smoothstep(e5,e6,x_37);float a6=smoothstep(e6,e7,x_37);float a7=smoothstep(e7,e8,x_37);float a8=smoothstep(e8,e9,x_37);float a9=smoothstep(e9,e10,x_37);float a10=smoothstep(e10,e11,x_37);float a11=smoothstep(e11,e12,x_37);float a12=smoothstep(e12,e13,x_37);float a13=smoothstep(e13,e14,x_37);float a14=smoothstep(e14,e15,x_37);return max(mix(v0,v1,a0)*step(e0,x_37)*step(x_37,e1),max(mix(v1,v2,a1)*step(e1,x_37)*step(x_37,e2),max(mix(v2,v3,a2)*step(e2,x_37)*step(x_37,e3),max(mix(v3,v4,a3)*step(e3,x_37)*step(x_37,e4),max(mix(v4,v5,a4)*step(e4,x_37)*step(x_37,e5),max(mix(v5,v6,a5)*step(e5,x_37)*step(x_37,e6),max(mix(v6,v7,a6)*step(e6,x_37)*step(x_37,e7),max(mix(v7,v8,a7)*step(e7,x_37)*step(x_37,e8),max(mix(v8,v9,a8)*step(e8,x_37)*step(x_37,e9),max(mix(v9,v10,a9)*step(e9,x_37)*step(x_37,e10),max(mix(v10,v11,a10)*step(e10,x_37)*step(x_37,e11),max(mix(v11,v12,a11)*step(e11,x_37)*step(x_37,e12),max(mix(v12,v13,a12)*step(e12,x_37)*step(x_37,e13),max(mix(v13,v14,a13)*step(e13,x_37)*step(x_37,e14),mix(v14,v15,a14)*step(e14,x_37)*step(x_37,e15)))))))))))))));}float sample_and_apply_contrast_limits(SAMPLER_TYPE channel,vec3 vTexCoord,vec2 contrastLimits){float fragIntensity=float(texture(channel,vTexCoord).r);float contrastLimitsAppliedToIntensity=(fragIntensity-contrastLimits[0])/max(0.0005,(contrastLimits[1]-contrastLimits[0]));return max(0.,contrastLimitsAppliedToIntensity);}vec4 colormap(float intensity,float opacity){return vec4(COLORMAP_FUNCTION(min(1.,intensity)).xyz,opacity);}\";\nvar channels = {\n  name: \"channel-intensity-module\",\n  fs\n};\nvar RENDERING_MODES_BLEND = {\n  [RENDERING_MODES.MAX_INTENSITY_PROJECTION]: {\n    _BEFORE_RENDER: `      float maxVals[6] = float[6](-1.0, -1.0, -1.0, -1.0, -1.0, -1.0);\n    `,\n    _RENDER: `    \n      float intensityArray[6] = float[6](intensityValue0, intensityValue1, intensityValue2, intensityValue3, intensityValue4, intensityValue5);\n\n      for(int i = 0; i < 6; i++) {\n        if(intensityArray[i] > maxVals[i]) {\n          maxVals[i] = intensityArray[i];\n        }\n      }\n    `,\n    _AFTER_RENDER: `      vec3 rgbCombo = vec3(0.0);\n      for(int i = 0; i < 6; i++) {\n        rgbCombo += max(0.0, min(1.0, maxVals[i])) * vec3(colors[i]);\n      }\n      color = vec4(rgbCombo, 1.0);\n    `\n  },\n  [RENDERING_MODES.MIN_INTENSITY_PROJECTION]: {\n    _BEFORE_RENDER: `      float minVals[6] = float[6](1. / 0., 1. / 0., 1. / 0., 1. / 0., 1. / 0., 1. / 0.);\n    `,\n    _RENDER: `    \n      float intensityArray[6] = float[6](intensityValue0, intensityValue1, intensityValue2, intensityValue3, intensityValue4, intensityValue5);\n\n      for(int i = 0; i < 6; i++) {\n        if(intensityArray[i] < minVals[i]) {\n          minVals[i] = intensityArray[i];\n        }\n      }\n    `,\n    _AFTER_RENDER: `      vec3 rgbCombo = vec3(0.0);\n      for(int i = 0; i < 6; i++) {\n        rgbCombo += max(0.0, min(1.0, minVals[i])) * vec3(colors[i]);\n      }\n      color = vec4(rgbCombo, 1.0);\n    `\n  },\n  [RENDERING_MODES.ADDITIVE]: {\n    _BEFORE_RENDER: ``,\n    _RENDER: `      vec3 rgbCombo = vec3(0.0);\n      vec3 hsvCombo = vec3(0.0);\n      float intensityArray[6] = float[6](intensityValue0, intensityValue1, intensityValue2, intensityValue3, intensityValue4, intensityValue5);\n      float total = 0.0;\n      for(int i = 0; i < 6; i++) {\n        float intensityValue = intensityArray[i];\n        rgbCombo += max(0.0, min(1.0, intensityValue)) * colors[i];\n        total += intensityValue;\n      }\n      // Do not go past 1 in opacity.\n      total = min(total, 1.0);\n      vec4 val_color = vec4(rgbCombo, total);\n      // Opacity correction\n      val_color.a = 1.0 - pow(1.0 - val_color.a, 1.0);\n      color.rgb += (1.0 - color.a) * val_color.a * val_color.rgb;\n      color.a += (1.0 - color.a) * val_color.a;\n      if (color.a >= 0.95) {\n        break;\n      }\n    `,\n    _AFTER_RENDER: ``\n  }\n};\nvar RENDERING_MODES_COLORMAP = {\n  [RENDERING_MODES.MAX_INTENSITY_PROJECTION]: {\n    _BEFORE_RENDER: `      float maxVals[6] = float[6](-1.0, -1.0, -1.0, -1.0, -1.0, -1.0);\n    `,\n    _RENDER: `    \n      float intensityArray[6] = float[6](intensityValue0, intensityValue1, intensityValue2, intensityValue3, intensityValue4, intensityValue5);\n\n      for(int i = 0; i < 6; i++) {\n        if(intensityArray[i] > maxVals[i]) {\n          maxVals[i] = intensityArray[i];\n        }\n      }\n    `,\n    _AFTER_RENDER: `      float total = 0.0;\n      for(int i = 0; i < 6; i++) {\n        total += maxVals[i];\n      }\n      // Do not go past 1 in opacity/colormap value.\n      total = min(total, 1.0);\n      color = colormap(total, total);\n    `\n  },\n  [RENDERING_MODES.MIN_INTENSITY_PROJECTION]: {\n    _BEFORE_RENDER: `      float minVals[6] = float[6](1. / 0., 1. / 0., 1. / 0., 1. / 0., 1. / 0., 1. / 0.);\n    `,\n    _RENDER: `    \n      float intensityArray[6] = float[6](intensityValue0, intensityValue1, intensityValue2, intensityValue3, intensityValue4, intensityValue5);\n\n      for(int i = 0; i < 6; i++) {\n        if(intensityArray[i] < minVals[i]) {\n          minVals[i] = intensityArray[i];\n        }\n      }\n    `,\n    _AFTER_RENDER: `      float total = 0.0;\n      for(int i = 0; i < 6; i++) {\n        total += minVals[i];\n      }\n      // Do not go past 1 in opacity/colormap value.\n      total = min(total, 1.0);\n      color = colormap(total, total);\n    `\n  },\n  [RENDERING_MODES.ADDITIVE]: {\n    _BEFORE_RENDER: ``,\n    _RENDER: `    float intensityArray[6] = float[6](intensityValue0, intensityValue1, intensityValue2, intensityValue3, intensityValue4, intensityValue5);\n\t\tfloat total = 0.0;\n\n\t\tfor(int i = 0; i < 6; i++) {\n\t\t\ttotal += intensityArray[i];\n\t\t}\n\t\t// Do not go past 1 in opacity/colormap value.\n\t\ttotal = min(total, 1.0);\n\n\t\tvec4 val_color = colormap(total, total);\n\n\t\t// Opacity correction\n\t\tval_color.a = 1.0 - pow(1.0 - val_color.a, 1.0);\n\t\tcolor.rgb += (1.0 - color.a) * val_color.a * val_color.rgb;\n\t\tcolor.a += (1.0 - color.a) * val_color.a;\n\t\tif (color.a >= 0.95) {\n\t\t\tbreak;\n\t\t}\n    p += ray_dir * dt;\n    `,\n    _AFTER_RENDER: ``\n  }\n};\nvar CUBE_STRIP = [1, 1, 0, 0, 1, 0, 1, 1, 1, 0, 1, 1, 0, 0, 1, 0, 1, 0, 0, 0, 0, 1, 1, 0, 1, 0, 0, 1, 1, 1, 1, 0, 1, 0, 0, 1, 1, 0, 0, 0, 0, 0];\nvar NUM_PLANES_DEFAULT = 1;\nvar defaultProps$1 = {\n  pickable: false,\n  coordinateSystem: COORDINATE_SYSTEM2.CARTESIAN,\n  channelData: {\n    type: \"object\",\n    value: {},\n    compare: true\n  },\n  colors: {\n    type: \"array\",\n    value: [],\n    compare: true\n  },\n  contrastLimits: {\n    type: \"array\",\n    value: [],\n    compare: true\n  },\n  dtype: {\n    type: \"string\",\n    value: \"Uint8\",\n    compare: true\n  },\n  colormap: {\n    type: \"string\",\n    value: \"\",\n    compare: true\n  },\n  xSlice: {\n    type: \"array\",\n    value: null,\n    compare: true\n  },\n  ySlice: {\n    type: \"array\",\n    value: null,\n    compare: true\n  },\n  zSlice: {\n    type: \"array\",\n    value: null,\n    compare: true\n  },\n  clippingPlanes: {\n    type: \"array\",\n    value: [],\n    compare: true\n  },\n  renderingMode: {\n    type: \"string\",\n    value: RENDERING_MODES.ADDITIVE,\n    compare: true\n  },\n  resolutionMatrix: {\n    type: \"object\",\n    value: new Matrix4(),\n    compare: true\n  }\n};\n\nfunction getRenderingAttrs() {\n  const values = getDtypeValues(\"Float32\");\n  return __spreadProps(__spreadValues({}, values), {\n    sampler: values.sampler.replace(\"2D\", \"3D\"),\n    cast: data => new Float32Array(data)\n  });\n}\n\nfunction removeExtraColormapFunctionsFromShader(colormap) {\n  const discardColormaps = COLORMAPS.filter(i => i !== (colormap || \"viridis\")).map(i => i.replace(/-/g, \"_\"));\n  const discardRegex = new RegExp(`vec4 (${discardColormaps.join(\"(_([0-9]*))?|\")})\\\\(float x_[0-9]+\\\\){([^}]+)}`, \"g\");\n\n  const channelsModules = __spreadProps(__spreadValues({}, channels), {\n    fs: channels.fs.replace(discardRegex, \"\"),\n    defines: {\n      COLORMAP_FUNCTION: colormap || \"viridis\"\n    }\n  });\n\n  return channelsModules;\n}\n\nvar XR3DLayer = class extends Layer {\n  initializeState() {\n    const {\n      gl\n    } = this.context;\n    this.setState({\n      model: this._getModel(gl)\n    });\n    gl.pixelStorei(GL.UNPACK_ALIGNMENT, 1);\n    gl.pixelStorei(GL.PACK_ALIGNMENT, 1);\n  }\n\n  getShaders() {\n    const {\n      colormap,\n      renderingMode,\n      clippingPlanes\n    } = this.props;\n    const {\n      sampler\n    } = getRenderingAttrs();\n    const {\n      _BEFORE_RENDER,\n      _RENDER,\n      _AFTER_RENDER\n    } = colormap ? RENDERING_MODES_COLORMAP[renderingMode] : RENDERING_MODES_BLEND[renderingMode];\n    const channelsModules = removeExtraColormapFunctionsFromShader(colormap);\n    return super.getShaders({\n      vs,\n      fs: fs$1.replace(\"_BEFORE_RENDER\", _BEFORE_RENDER).replace(\"_RENDER\", _RENDER).replace(\"_AFTER_RENDER\", _AFTER_RENDER),\n      defines: {\n        SAMPLER_TYPE: sampler,\n        COLORMAP_FUNCTION: colormap || \"viridis\",\n        NUM_PLANES: String(clippingPlanes.length || NUM_PLANES_DEFAULT)\n      },\n      modules: [channelsModules]\n    });\n  }\n\n  finalizeState() {\n    super.finalizeState();\n\n    if (this.state.textures) {\n      Object.values(this.state.textures).forEach(tex => tex && tex.delete());\n    }\n  }\n\n  updateState(_ref17) {\n    let {\n      props,\n      oldProps,\n      changeFlags\n    } = _ref17;\n\n    var _a2, _b2;\n\n    if (changeFlags.extensionsChanged || props.colormap !== oldProps.colormap || props.renderingMode !== oldProps.renderingMode || props.clippingPlanes.length !== oldProps.clippingPlanes.length) {\n      const {\n        gl\n      } = this.context;\n\n      if (this.state.model) {\n        this.state.model.delete();\n      }\n\n      this.setState({\n        model: this._getModel(gl)\n      });\n    }\n\n    if (props.channelData && ((_a2 = props == null ? void 0 : props.channelData) == null ? void 0 : _a2.data) !== ((_b2 = oldProps == null ? void 0 : oldProps.channelData) == null ? void 0 : _b2.data)) {\n      this.loadTexture(props.channelData);\n    }\n  }\n\n  _getModel(gl) {\n    if (!gl) {\n      return null;\n    }\n\n    return new Model(gl, __spreadProps(__spreadValues({}, this.getShaders()), {\n      geometry: new Geometry({\n        drawMode: gl.TRIANGLE_STRIP,\n        attributes: {\n          positions: new Float32Array(CUBE_STRIP)\n        }\n      })\n    }));\n  }\n\n  draw(_ref18) {\n    let {\n      uniforms\n    } = _ref18;\n    const {\n      textures,\n      model,\n      scaleMatrix\n    } = this.state;\n    const {\n      contrastLimits,\n      colors,\n      xSlice,\n      ySlice,\n      zSlice,\n      modelMatrix,\n      channelsVisible,\n      domain,\n      dtype,\n      clippingPlanes,\n      resolutionMatrix\n    } = this.props;\n    const {\n      viewMatrix,\n      viewMatrixInverse,\n      projectionMatrix\n    } = this.context.viewport;\n\n    if (textures && model && scaleMatrix) {\n      const {\n        paddedContrastLimits,\n        paddedColors\n      } = padColorsAndWindows({\n        contrastLimits,\n        colors,\n        channelsVisible,\n        domain,\n        dtype\n      });\n      const invertedScaleMatrix = scaleMatrix.clone().invert();\n      const invertedResolutionMatrix = resolutionMatrix.clone().invert();\n      const paddedClippingPlanes = padWithDefault(clippingPlanes.map(p => p.clone().transform(invertedScaleMatrix).transform(invertedResolutionMatrix)), new Plane([1, 0, 0]), clippingPlanes.length || NUM_PLANES_DEFAULT);\n      const normals = paddedClippingPlanes.map(plane => plane.normal).flat();\n      const distances = paddedClippingPlanes.map(plane => plane.distance);\n      model.setUniforms(__spreadProps(__spreadValues(__spreadValues({}, uniforms), textures), {\n        contrastLimits: paddedContrastLimits,\n        colors: paddedColors,\n        xSlice: new Float32Array(xSlice ? xSlice.map(i => i / scaleMatrix[0] / resolutionMatrix[0]) : [0, 1]),\n        ySlice: new Float32Array(ySlice ? ySlice.map(i => i / scaleMatrix[5] / resolutionMatrix[5]) : [0, 1]),\n        zSlice: new Float32Array(zSlice ? zSlice.map(i => i / scaleMatrix[10] / resolutionMatrix[10]) : [0, 1]),\n        eye_pos: new Float32Array([viewMatrixInverse[12], viewMatrixInverse[13], viewMatrixInverse[14]]),\n        view: viewMatrix,\n        proj: projectionMatrix,\n        scale: scaleMatrix,\n        resolution: resolutionMatrix,\n        model: modelMatrix || new Matrix4(),\n        normals,\n        distances\n      })).draw();\n    }\n  }\n\n  loadTexture(channelData) {\n    const textures = {\n      volume0: null,\n      volume1: null,\n      volume2: null,\n      volume3: null,\n      volume4: null,\n      volume5: null\n    };\n\n    if (this.state.textures) {\n      Object.values(this.state.textures).forEach(tex => tex && tex.delete());\n    }\n\n    if (channelData && Object.keys(channelData).length > 0 && channelData.data) {\n      const {\n        height,\n        width,\n        depth\n      } = channelData;\n      channelData.data.forEach((d, i) => {\n        textures[`volume${i}`] = this.dataToTexture(d, width, height, depth);\n      }, this);\n      this.setState({\n        textures,\n        scaleMatrix: new Matrix4().scale(this.props.physicalSizeScalingMatrix.transformPoint([width, height, depth]))\n      });\n    }\n  }\n\n  dataToTexture(data, width, height, depth) {\n    var _a2, _b2;\n\n    const attrs = getRenderingAttrs();\n    const texture = new Texture3D(this.context.gl, {\n      width,\n      height,\n      depth,\n      data: (_b2 = (_a2 = attrs.cast) == null ? void 0 : _a2.call(attrs, data)) != null ? _b2 : data,\n      format: attrs.dataFormat,\n      dataFormat: attrs.format,\n      type: attrs.type,\n      mipmaps: false,\n      parameters: {\n        [GL.TEXTURE_MIN_FILTER]: GL.LINEAR,\n        [GL.TEXTURE_MAG_FILTER]: GL.LINEAR,\n        [GL.TEXTURE_WRAP_S]: GL.CLAMP_TO_EDGE,\n        [GL.TEXTURE_WRAP_T]: GL.CLAMP_TO_EDGE,\n        [GL.TEXTURE_WRAP_R]: GL.CLAMP_TO_EDGE\n      }\n    });\n    return texture;\n  }\n\n};\nXR3DLayer.layerName = \"XR3DLayer\";\nXR3DLayer.defaultProps = defaultProps$1;\n\nfunction getVolume(_0) {\n  return __async(this, arguments, function* (_ref19) {\n    let {\n      source,\n      selection,\n      onUpdate = () => {},\n      downsampleDepth = 1,\n      signal\n    } = _ref19;\n    const {\n      shape,\n      labels,\n      dtype\n    } = source;\n    const {\n      height,\n      width\n    } = getImageSize(source);\n    const depth = shape[labels.indexOf(\"z\")];\n    const depthDownsampled = Math.max(1, Math.floor(depth / downsampleDepth));\n    const rasterSize = height * width;\n    const name2 = `${dtype}Array`;\n    const TypedArray = globalThis[name2];\n    const volumeData = new TypedArray(rasterSize * depthDownsampled);\n    yield Promise.all(new Array(depthDownsampled).fill(0).map((_, z) => __async(this, null, function* () {\n      const depthSelection = __spreadProps(__spreadValues({}, selection), {\n        z: z * downsampleDepth\n      });\n\n      const {\n        data: rasterData\n      } = yield source.getRaster({\n        selection: depthSelection,\n        signal\n      });\n      let r = 0;\n      onUpdate();\n\n      while (r < rasterSize) {\n        const volIndex = z * rasterSize + (rasterSize - r - 1);\n        const rasterIndex = (width - r - 1) % width + width * Math.floor(r / width);\n        volumeData[volIndex] = rasterData[rasterIndex];\n        r += 1;\n      }\n\n      onUpdate();\n    })));\n    return {\n      data: volumeData,\n      height,\n      width,\n      depth: depthDownsampled\n    };\n  });\n}\n\nvar getTextLayer = (text, viewport, id) => {\n  return new TextLayer({\n    id: `text-${id}`,\n    coordinateSystem: COORDINATE_SYSTEM2.CARTESIAN,\n    data: [{\n      text,\n      position: viewport.position\n    }],\n    getColor: [220, 220, 220, 255],\n    getSize: 25,\n    sizeUnits: \"meters\",\n    sizeScale: __pow(2, -viewport.zoom),\n    fontFamily: \"Helvetica\"\n  });\n};\n\nvar defaultProps = {\n  pickable: false,\n  coordinateSystem: COORDINATE_SYSTEM2.CARTESIAN,\n  contrastLimits: {\n    type: \"array\",\n    value: [],\n    compare: true\n  },\n  channelsVisible: {\n    type: \"array\",\n    value: [],\n    compare: true\n  },\n  colors: {\n    type: \"array\",\n    value: [],\n    compare: true\n  },\n  colormap: {\n    type: \"string\",\n    value: \"\",\n    compare: true\n  },\n  selections: {\n    type: \"array\",\n    value: [],\n    compare: true\n  },\n  resolution: {\n    type: \"number\",\n    value: 0,\n    compare: true\n  },\n  domain: {\n    type: \"array\",\n    value: [],\n    compare: true\n  },\n  loader: {\n    type: \"object\",\n    value: [{\n      getRaster: () => __async(void 0, null, function* () {\n        return {\n          data: [],\n          height: 0,\n          width: 0\n        };\n      }),\n      dtype: \"Uint16\",\n      shape: [1],\n      labels: [\"z\"]\n    }],\n    compare: true\n  },\n  xSlice: {\n    type: \"array\",\n    value: null,\n    compare: true\n  },\n  ySlice: {\n    type: \"array\",\n    value: null,\n    compare: true\n  },\n  zSlice: {\n    type: \"array\",\n    value: null,\n    compare: true\n  },\n  clippingPlanes: {\n    type: \"array\",\n    value: [],\n    compare: true\n  },\n  renderingMode: {\n    type: \"string\",\n    value: RENDERING_MODES.MAX_INTENSITY_PROJECTION,\n    compare: true\n  },\n  onUpdate: {\n    type: \"function\",\n    value: () => {},\n    compare: true\n  },\n  useProgressIndicator: {\n    type: \"boolean\",\n    value: true,\n    compare: true\n  },\n  useWebGL1Warning: {\n    type: \"boolean\",\n    value: true,\n    compare: true\n  }\n};\nvar VolumeLayer = class extends CompositeLayer {\n  clearState() {\n    this.setState({\n      height: null,\n      width: null,\n      depth: null,\n      data: null,\n      physicalSizeScalingMatrix: null,\n      resolutionMatrix: null,\n      progress: 0,\n      abortController: null\n    });\n  }\n\n  finalizeState() {\n    this.state.abortController.abort();\n  }\n\n  updateState(_ref20) {\n    let {\n      oldProps,\n      props\n    } = _ref20;\n    const loaderChanged = props.loader !== oldProps.loader;\n    const resolutionChanged = props.resolution !== oldProps.resolution;\n    const selectionsChanged = props.selections !== oldProps.selections;\n\n    if (resolutionChanged) {\n      this.clearState();\n    }\n\n    if (loaderChanged || selectionsChanged || resolutionChanged) {\n      const {\n        loader,\n        selections = [],\n        resolution,\n        onViewportLoad\n      } = this.props;\n      const source = loader[resolution];\n      let progress = 0;\n      const totalRequests = (source.shape[source.labels.indexOf(\"z\")] >> resolution) * selections.length;\n\n      const onUpdate = () => {\n        progress += 0.5 / totalRequests;\n\n        if (this.props.onUpdate) {\n          this.props.onUpdate({\n            progress\n          });\n        }\n\n        this.setState({\n          progress\n        });\n      };\n\n      const abortController = new AbortController();\n      this.setState({\n        abortController\n      });\n      const {\n        signal\n      } = abortController;\n      const volumePromises = selections.map(selection => getVolume({\n        selection,\n        source,\n        onUpdate,\n        downsampleDepth: __pow(2, resolution),\n        signal\n      }));\n      const physicalSizeScalingMatrix = getPhysicalSizeScalingMatrix(loader[resolution]);\n      Promise.all(volumePromises).then(volumes => {\n        if (onViewportLoad) {\n          onViewportLoad(volumes);\n        }\n\n        const volume = {\n          data: volumes.map(d => d.data),\n          width: volumes[0].width,\n          height: volumes[0].height,\n          depth: volumes[0].depth\n        };\n        this.setState(__spreadProps(__spreadValues({}, volume), {\n          physicalSizeScalingMatrix,\n          resolutionMatrix: new Matrix4().scale(__pow(2, resolution))\n        }));\n      });\n    }\n  }\n\n  renderLayers() {\n    const {\n      loader,\n      id,\n      resolution,\n      useProgressIndicator,\n      useWebGL1Warning\n    } = this.props;\n    const {\n      dtype\n    } = loader[resolution];\n    const {\n      data,\n      width,\n      height,\n      depth,\n      progress,\n      physicalSizeScalingMatrix,\n      resolutionMatrix\n    } = this.state;\n    const {\n      gl\n    } = this.context;\n\n    if (!isWebGL2(gl) && useWebGL1Warning) {\n      const {\n        viewport\n      } = this.context;\n      return getTextLayer([\"Volume rendering is only available on browsers that support WebGL2. If you\", \"are using Safari, you can turn on WebGL2 by navigating in the top menubar\", \"to check Develop > Experimental Features > WebGL 2.0 and then refreshing\", \"the page.\"].join(\"\\n\"), viewport, id);\n    }\n\n    if (!(width && height) && useProgressIndicator) {\n      const {\n        viewport\n      } = this.context;\n      return getTextLayer(`Loading Volume ${String((progress || 0) * 100).slice(0, 5)}%...`, viewport, id);\n    }\n\n    return new XR3DLayer(this.props, {\n      channelData: {\n        data,\n        width,\n        height,\n        depth\n      },\n      id: `XR3DLayer-${0}-${height}-${width}-${0}-${resolution}-${id}`,\n      physicalSizeScalingMatrix,\n      parameters: {\n        [GL.CULL_FACE]: true,\n        [GL.CULL_FACE_MODE]: GL.FRONT,\n        [GL.DEPTH_TEST]: false,\n        blendFunc: [GL.SRC_ALPHA, GL.ONE],\n        blend: true\n      },\n      resolutionMatrix,\n      dtype\n    });\n  }\n\n};\nVolumeLayer.layerName = \"VolumeLayer\";\nVolumeLayer.defaultProps = defaultProps;\nvar VIV_PROXY_KEY = \"__viv\";\nvar OFFSETS_PROXY_KEY = `${VIV_PROXY_KEY}-offsets`;\n\nfunction checkProxies(tiff) {\n  if (!isProxy(tiff, OFFSETS_PROXY_KEY)) {\n    console.warn(\"GeoTIFF source is missing offsets proxy.\");\n  }\n}\n\nfunction isProxy(tiff, proxyFlag) {\n  return tiff[proxyFlag];\n}\n\nfunction createOffsetsProxy(tiff, offsets) {\n  const get = (target, key) => {\n    if (key === \"getImage\") {\n      return index => {\n        if (!(index in target.ifdRequests) && index in offsets) {\n          const offset = offsets[index];\n          target.ifdRequests[index] = target.parseFileDirectoryAt(offset);\n        }\n\n        return target.getImage(index);\n      };\n    }\n\n    if (key === OFFSETS_PROXY_KEY) {\n      return true;\n    }\n\n    return Reflect.get(target, key);\n  };\n\n  return new Proxy(tiff, {\n    get\n  });\n}\n\nvar encodedJs = \"KGZ1bmN0aW9uICgpIHsKICAndXNlIHN0cmljdCc7CgogIGZ1bmN0aW9uIGRlY29kZVJvd0FjYyhyb3csIHN0cmlkZSkgewogICAgbGV0IGxlbmd0aCA9IHJvdy5sZW5ndGggLSBzdHJpZGU7CiAgICBsZXQgb2Zmc2V0ID0gMDsKICAgIGRvIHsKICAgICAgZm9yIChsZXQgaSA9IHN0cmlkZTsgaSA+IDA7IGktLSkgewogICAgICAgIHJvd1tvZmZzZXQgKyBzdHJpZGVdICs9IHJvd1tvZmZzZXRdOwogICAgICAgIG9mZnNldCsrOwogICAgICB9CgogICAgICBsZW5ndGggLT0gc3RyaWRlOwogICAgfSB3aGlsZSAobGVuZ3RoID4gMCk7CiAgfQoKICBmdW5jdGlvbiBkZWNvZGVSb3dGbG9hdGluZ1BvaW50KHJvdywgc3RyaWRlLCBieXRlc1BlclNhbXBsZSkgewogICAgbGV0IGluZGV4ID0gMDsKICAgIGxldCBjb3VudCA9IHJvdy5sZW5ndGg7CiAgICBjb25zdCB3YyA9IGNvdW50IC8gYnl0ZXNQZXJTYW1wbGU7CgogICAgd2hpbGUgKGNvdW50ID4gc3RyaWRlKSB7CiAgICAgIGZvciAobGV0IGkgPSBzdHJpZGU7IGkgPiAwOyAtLWkpIHsKICAgICAgICByb3dbaW5kZXggKyBzdHJpZGVdICs9IHJvd1tpbmRleF07CiAgICAgICAgKytpbmRleDsKICAgICAgfQogICAgICBjb3VudCAtPSBzdHJpZGU7CiAgICB9CgogICAgY29uc3QgY29weSA9IHJvdy5zbGljZSgpOwogICAgZm9yIChsZXQgaSA9IDA7IGkgPCB3YzsgKytpKSB7CiAgICAgIGZvciAobGV0IGIgPSAwOyBiIDwgYnl0ZXNQZXJTYW1wbGU7ICsrYikgewogICAgICAgIHJvd1soYnl0ZXNQZXJTYW1wbGUgKiBpKSArIGJdID0gY29weVsoKGJ5dGVzUGVyU2FtcGxlIC0gYiAtIDEpICogd2MpICsgaV07CiAgICAgIH0KICAgIH0KICB9CgogIGZ1bmN0aW9uIGFwcGx5UHJlZGljdG9yKGJsb2NrLCBwcmVkaWN0b3IsIHdpZHRoLCBoZWlnaHQsIGJpdHNQZXJTYW1wbGUsCiAgICBwbGFuYXJDb25maWd1cmF0aW9uKSB7CiAgICBpZiAoIXByZWRpY3RvciB8fCBwcmVkaWN0b3IgPT09IDEpIHsKICAgICAgcmV0dXJuIGJsb2NrOwogICAgfQoKICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYml0c1BlclNhbXBsZS5sZW5ndGg7ICsraSkgewogICAgICBpZiAoYml0c1BlclNhbXBsZVtpXSAlIDggIT09IDApIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1doZW4gZGVjb2Rpbmcgd2l0aCBwcmVkaWN0b3IsIG9ubHkgbXVsdGlwbGUgb2YgOCBiaXRzIGFyZSBzdXBwb3J0ZWQuJyk7CiAgICAgIH0KICAgICAgaWYgKGJpdHNQZXJTYW1wbGVbaV0gIT09IGJpdHNQZXJTYW1wbGVbMF0pIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1doZW4gZGVjb2Rpbmcgd2l0aCBwcmVkaWN0b3IsIGFsbCBzYW1wbGVzIG11c3QgaGF2ZSB0aGUgc2FtZSBzaXplLicpOwogICAgICB9CiAgICB9CgogICAgY29uc3QgYnl0ZXNQZXJTYW1wbGUgPSBiaXRzUGVyU2FtcGxlWzBdIC8gODsKICAgIGNvbnN0IHN0cmlkZSA9IHBsYW5hckNvbmZpZ3VyYXRpb24gPT09IDIgPyAxIDogYml0c1BlclNhbXBsZS5sZW5ndGg7CgogICAgZm9yIChsZXQgaSA9IDA7IGkgPCBoZWlnaHQ7ICsraSkgewogICAgICAvLyBMYXN0IHN0cmlwIHdpbGwgYmUgdHJ1bmNhdGVkIGlmIGhlaWdodCAlIHN0cmlwSGVpZ2h0ICE9IDAKICAgICAgaWYgKGkgKiBzdHJpZGUgKiB3aWR0aCAqIGJ5dGVzUGVyU2FtcGxlID49IGJsb2NrLmJ5dGVMZW5ndGgpIHsKICAgICAgICBicmVhazsKICAgICAgfQogICAgICBsZXQgcm93OwogICAgICBpZiAocHJlZGljdG9yID09PSAyKSB7IC8vIGhvcml6b250YWwgcHJlZGljdGlvbgogICAgICAgIHN3aXRjaCAoYml0c1BlclNhbXBsZVswXSkgewogICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICByb3cgPSBuZXcgVWludDhBcnJheSgKICAgICAgICAgICAgICBibG9jaywgaSAqIHN0cmlkZSAqIHdpZHRoICogYnl0ZXNQZXJTYW1wbGUsIHN0cmlkZSAqIHdpZHRoICogYnl0ZXNQZXJTYW1wbGUsCiAgICAgICAgICAgICk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAxNjoKICAgICAgICAgICAgcm93ID0gbmV3IFVpbnQxNkFycmF5KAogICAgICAgICAgICAgIGJsb2NrLCBpICogc3RyaWRlICogd2lkdGggKiBieXRlc1BlclNhbXBsZSwgc3RyaWRlICogd2lkdGggKiBieXRlc1BlclNhbXBsZSAvIDIsCiAgICAgICAgICAgICk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAzMjoKICAgICAgICAgICAgcm93ID0gbmV3IFVpbnQzMkFycmF5KAogICAgICAgICAgICAgIGJsb2NrLCBpICogc3RyaWRlICogd2lkdGggKiBieXRlc1BlclNhbXBsZSwgc3RyaWRlICogd2lkdGggKiBieXRlc1BlclNhbXBsZSAvIDQsCiAgICAgICAgICAgICk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBQcmVkaWN0b3IgMiBub3QgYWxsb3dlZCB3aXRoICR7Yml0c1BlclNhbXBsZVswXX0gYml0cyBwZXIgc2FtcGxlLmApOwogICAgICAgIH0KICAgICAgICBkZWNvZGVSb3dBY2Mocm93LCBzdHJpZGUpOwogICAgICB9IGVsc2UgaWYgKHByZWRpY3RvciA9PT0gMykgeyAvLyBob3Jpem9udGFsIGZsb2F0aW5nIHBvaW50CiAgICAgICAgcm93ID0gbmV3IFVpbnQ4QXJyYXkoCiAgICAgICAgICBibG9jaywgaSAqIHN0cmlkZSAqIHdpZHRoICogYnl0ZXNQZXJTYW1wbGUsIHN0cmlkZSAqIHdpZHRoICogYnl0ZXNQZXJTYW1wbGUsCiAgICAgICAgKTsKICAgICAgICBkZWNvZGVSb3dGbG9hdGluZ1BvaW50KHJvdywgc3RyaWRlLCBieXRlc1BlclNhbXBsZSk7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBibG9jazsKICB9CgogIGNsYXNzIEJhc2VEZWNvZGVyIHsKICAgIGFzeW5jIGRlY29kZShmaWxlRGlyZWN0b3J5LCBidWZmZXIpIHsKICAgICAgY29uc3QgZGVjb2RlZCA9IGF3YWl0IHRoaXMuZGVjb2RlQmxvY2soYnVmZmVyKTsKICAgICAgY29uc3QgcHJlZGljdG9yID0gZmlsZURpcmVjdG9yeS5QcmVkaWN0b3IgfHwgMTsKICAgICAgaWYgKHByZWRpY3RvciAhPT0gMSkgewogICAgICAgIGNvbnN0IGlzVGlsZWQgPSAhZmlsZURpcmVjdG9yeS5TdHJpcE9mZnNldHM7CiAgICAgICAgY29uc3QgdGlsZVdpZHRoID0gaXNUaWxlZCA/IGZpbGVEaXJlY3RvcnkuVGlsZVdpZHRoIDogZmlsZURpcmVjdG9yeS5JbWFnZVdpZHRoOwogICAgICAgIGNvbnN0IHRpbGVIZWlnaHQgPSBpc1RpbGVkID8gZmlsZURpcmVjdG9yeS5UaWxlTGVuZ3RoIDogKAogICAgICAgICAgZmlsZURpcmVjdG9yeS5Sb3dzUGVyU3RyaXAgfHwgZmlsZURpcmVjdG9yeS5JbWFnZUxlbmd0aAogICAgICAgICk7CiAgICAgICAgcmV0dXJuIGFwcGx5UHJlZGljdG9yKAogICAgICAgICAgZGVjb2RlZCwgcHJlZGljdG9yLCB0aWxlV2lkdGgsIHRpbGVIZWlnaHQsIGZpbGVEaXJlY3RvcnkuQml0c1BlclNhbXBsZSwKICAgICAgICAgIGZpbGVEaXJlY3RvcnkuUGxhbmFyQ29uZmlndXJhdGlvbiwKICAgICAgICApOwogICAgICB9CiAgICAgIHJldHVybiBkZWNvZGVkOwogICAgfQogIH0KCiAgY2xhc3MgUmF3RGVjb2RlciBleHRlbmRzIEJhc2VEZWNvZGVyIHsKICAgIGRlY29kZUJsb2NrKGJ1ZmZlcikgewogICAgICByZXR1cm4gYnVmZmVyOwogICAgfQogIH0KCiAgbGV0IEEsST1udWxsO2Z1bmN0aW9uIGcoKXtyZXR1cm4gbnVsbCE9PUkmJkkuYnVmZmVyPT09QS5tZW1vcnkuYnVmZmVyfHwoST1uZXcgVWludDhBcnJheShBLm1lbW9yeS5idWZmZXIpKSxJfWxldCBCPTA7bGV0IFE9bnVsbDtmdW5jdGlvbiBDKCl7cmV0dXJuIG51bGwhPT1RJiZRLmJ1ZmZlcj09PUEubWVtb3J5LmJ1ZmZlcnx8KFE9bmV3IEludDMyQXJyYXkoQS5tZW1vcnkuYnVmZmVyKSksUX1hc3luYyBmdW5jdGlvbiBFKEkpe3ZvaWQgMD09PUkmJihJPSIiLnJlcGxhY2UoL1wuanMkLywiX2JnLndhc20iKSk7KCJzdHJpbmciPT10eXBlb2YgSXx8ImZ1bmN0aW9uIj09dHlwZW9mIFJlcXVlc3QmJkkgaW5zdGFuY2VvZiBSZXF1ZXN0fHwiZnVuY3Rpb24iPT10eXBlb2YgVVJMJiZJIGluc3RhbmNlb2YgVVJMKSYmKEk9ZmV0Y2goSSkpO2NvbnN0e2luc3RhbmNlOmcsbW9kdWxlOkJ9PWF3YWl0IGFzeW5jIGZ1bmN0aW9uKEEsSSl7aWYoImZ1bmN0aW9uIj09dHlwZW9mIFJlc3BvbnNlJiZBIGluc3RhbmNlb2YgUmVzcG9uc2Upe2lmKCJmdW5jdGlvbiI9PXR5cGVvZiBXZWJBc3NlbWJseS5pbnN0YW50aWF0ZVN0cmVhbWluZyl0cnl7cmV0dXJuIGF3YWl0IFdlYkFzc2VtYmx5Lmluc3RhbnRpYXRlU3RyZWFtaW5nKEEsSSl9Y2F0Y2goSSl7aWYoImFwcGxpY2F0aW9uL3dhc20iPT1BLmhlYWRlcnMuZ2V0KCJDb250ZW50LVR5cGUiKSl0aHJvdyBJO2NvbnNvbGUud2FybigiYFdlYkFzc2VtYmx5Lmluc3RhbnRpYXRlU3RyZWFtaW5nYCBmYWlsZWQgYmVjYXVzZSB5b3VyIHNlcnZlciBkb2VzIG5vdCBzZXJ2ZSB3YXNtIHdpdGggYGFwcGxpY2F0aW9uL3dhc21gIE1JTUUgdHlwZS4gRmFsbGluZyBiYWNrIHRvIGBXZWJBc3NlbWJseS5pbnN0YW50aWF0ZWAgd2hpY2ggaXMgc2xvd2VyLiBPcmlnaW5hbCBlcnJvcjpcbiIsSSk7fWNvbnN0IGc9YXdhaXQgQS5hcnJheUJ1ZmZlcigpO3JldHVybiBhd2FpdCBXZWJBc3NlbWJseS5pbnN0YW50aWF0ZShnLEkpfXtjb25zdCBnPWF3YWl0IFdlYkFzc2VtYmx5Lmluc3RhbnRpYXRlKEEsSSk7cmV0dXJuIGcgaW5zdGFuY2VvZiBXZWJBc3NlbWJseS5JbnN0YW5jZT97aW5zdGFuY2U6Zyxtb2R1bGU6QX06Z319KGF3YWl0IEkse30pO3JldHVybiBBPWcuZXhwb3J0cyxFLl9fd2JpbmRnZW5fd2FzbV9tb2R1bGU9QixBfXZhciBEPU9iamVjdC5mcmVlemUoe19fcHJvdG9fXzpudWxsLGRlY29tcHJlc3M6ZnVuY3Rpb24oSSxRKXt0cnl7Y29uc3QgRj1BLl9fd2JpbmRnZW5fYWRkX3RvX3N0YWNrX3BvaW50ZXIoLTE2KTt2YXIgRT1mdW5jdGlvbihBLEkpe2NvbnN0IFE9SSgxKkEubGVuZ3RoKTtyZXR1cm4gZygpLnNldChBLFEvMSksQj1BLmxlbmd0aCxRfShJLEEuX193YmluZGdlbl9tYWxsb2MpLEQ9QjtBLmRlY29tcHJlc3MoRixFLEQsUSk7dmFyIGk9QygpW0YvNCswXSx3PUMoKVtGLzQrMV0sRz0obz1pLE49dyxnKCkuc3ViYXJyYXkoby8xLG8vMStOKSkuc2xpY2UoKTtyZXR1cm4gQS5fX3diaW5kZ2VuX2ZyZWUoaSwxKncpLEd9ZmluYWxseXtBLl9fd2JpbmRnZW5fYWRkX3RvX3N0YWNrX3BvaW50ZXIoMTYpO312YXIgbyxOO30sZGVmYXVsdDpFfSk7Y29uc3QgaT1bNjIsMCwwLDAsNjMsNTIsNTMsNTQsNTUsNTYsNTcsNTgsNTksNjAsNjEsMCwwLDAsMCwwLDAsMCwwLDEsMiwzLDQsNSw2LDcsOCw5LDEwLDExLDEyLDEzLDE0LDE1LDE2LDE3LDE4LDE5LDIwLDIxLDIyLDIzLDI0LDI1LDAsMCwwLDAsMCwwLDI2LDI3LDI4LDI5LDMwLDMxLDMyLDMzLDM0LDM1LDM2LDM3LDM4LDM5LDQwLDQxLDQyLDQzLDQ0LDQ1LDQ2LDQ3LDQ4LDQ5LDUwLDUxXTtmdW5jdGlvbiB3KEEpe3JldHVybiBpW0EtNDNdfWNvbnN0IEc9ZnVuY3Rpb24oQSl7bGV0IEksZz1BLmVuZHNXaXRoKCI9PSIpPzI6QS5lbmRzV2l0aCgiPSIpPzE6MCxCPUEubGVuZ3RoLFE9bmV3IFVpbnQ4QXJyYXkoQi80KjMpO2ZvcihsZXQgZz0wLEM9MDtnPEI7Zys9NCxDKz0zKUk9dyhBLmNoYXJDb2RlQXQoZykpPDwxOHx3KEEuY2hhckNvZGVBdChnKzEpKTw8MTJ8dyhBLmNoYXJDb2RlQXQoZysyKSk8PDZ8dyhBLmNoYXJDb2RlQXQoZyszKSksUVtDXT1JPj4xNixRW0MrMV09ST4+OCYyNTUsUVtDKzJdPTI1NSZJO3JldHVybiBRLnN1YmFycmF5KDAsUS5sZW5ndGgtZyl9KCJBR0Z6YlFFQUFBQUJXUTVnQW45L0FYOWdBMzkvZndGL1lBSi9md0JnQVg4QVlBTi9mMzhBWUFGL0FYOWdCSDkvZjM4QVlBUi9mMzkvQVg5Z0JuOS9mMzkvZndCZ0FYOEJmbUFBQUdBRmYzOS9mMzhBWUFWL2YzOS9md0YvWUFKK2Z3Ri9BMjFzQlFnSUN3TUJBZ1VNQVFBQkFBSUFCUUFDQWdZR0RRWURBZ0FDQUFBRUJBUUNBZ1lHQUFZQkJnSUhBd1FEQkFRREF3QURCUU1EQkFRRUJBUUNBZ0FIQUFRQUFnTUJBZ2NGQkFJREFRVUNBZ0lEQWdJREF3Y0NBUUFBQkFJQUNnQUFBUUFGQWdBREJRa0pDUU1DQkFVQmNBRXJLd1VEQVFBUkJna0Jmd0ZCZ0lEQUFBc0hYd1VHYldWdGIzSjVBZ0FLWkdWamIyMXdjbVZ6Y3dBbkgxOWZkMkpwYm1SblpXNWZZV1JrWDNSdlgzTjBZV05yWDNCdmFXNTBaWElBWWhGZlgzZGlhVzVrWjJWdVgyMWhiR3h2WXdCTUQxOWZkMkpwYm1SblpXNWZabkpsWlFCV0NUQUJBRUVCQ3lwcUpEVUNabVZETlFGbVpVTmhhMnBYREQxcFZCb2hTVnRUYUdkZlhERU9YbGhxYVFzY1FXQWJQMlFLc3VnQmJOTXFBZ2gvQVg0Q1FBSkFBa0FDUUNBQVFmVUJUd1JBSUFCQnpmOTdUdzBDSUFCQkMyb2lBRUY0Y1NFR1FaQ253QUFvQWdBaUNFVU5BVUVBSUFacklRUUNRQUpBQW45QkFDQUFRUWgySWdCRkRRQWFRUjhnQmtILy8vOEhTdzBBR2lBR1FRWWdBR2NpQUd0QkgzRjJRUUZ4SUFCQkFYUnJRVDVxQ3lJSFFRSjBRWnlwd0FCcUtBSUFJZ0FFUUNBR1FRQkJHU0FIUVFGMmEwRWZjU0FIUVI5R0czUWhBZ05BQWtBZ0FFRUVhaWdDQUVGNGNTSUZJQVpKRFFBZ0JTQUdheUlGSUFSUERRQWdBQ0VESUFVaUJBMEFRUUFoQkF3REN5QUFRUlJxS0FJQUlnVWdBU0FGSUFBZ0FrRWRka0VFY1dwQkVHb29BZ0FpQUVjYklBRWdCUnNoQVNBQ1FRRjBJUUlnQUEwQUN5QUJCRUFnQVNFQURBSUxJQU1OQWd0QkFDRURRUUlnQjBFZmNYUWlBRUVBSUFCcmNpQUljU0lBUlEwRElBQkJBQ0FBYTNGb1FRSjBRWnlwd0FCcUtBSUFJZ0JGRFFNTEEwQWdBQ0FESUFCQkJHb29BZ0JCZUhFaUFpQUdUeUFDSUFacklnSWdCRWx4SWdFYklRTWdBaUFFSUFFYklRUWdBQ2dDRUNJQ0JIOGdBZ1VnQUVFVWFpZ0NBQXNpQUEwQUN5QURSUTBDQzBHY3FzQUFLQUlBSWdBZ0JrOUJBQ0FFSUFBZ0JtdFBHdzBCSUFNb0FoZ2hCd0pBQWtBZ0F5QURLQUlNSWdGR0JFQWdBMEVVUVJBZ0EwRVVhaUlDS0FJQUlnRWJhaWdDQUNJQURRRkJBQ0VCREFJTElBTW9BZ2dpQUNBQk5nSU1JQUVnQURZQ0NBd0JDeUFDSUFOQkVHb2dBUnNoQWdOQUlBSWhCU0FBSWdGQkZHb2lBaWdDQUNJQVJRUkFJQUZCRUdvaEFpQUJLQUlRSVFBTElBQU5BQXNnQlVFQU5nSUFDd0pBSUFkRkRRQUNRQ0FESUFNb0FoeEJBblJCbktuQUFHb2lBQ2dDQUVjRVFDQUhRUkJCRkNBSEtBSVFJQU5HRzJvZ0FUWUNBQ0FCUlEwQ0RBRUxJQUFnQVRZQ0FDQUJEUUJCa0tmQUFFR1FwOEFBS0FJQVFYNGdBeWdDSEhkeE5nSUFEQUVMSUFFZ0J6WUNHQ0FES0FJUUlnQUVRQ0FCSUFBMkFoQWdBQ0FCTmdJWUN5QURRUlJxS0FJQUlnQkZEUUFnQVVFVWFpQUFOZ0lBSUFBZ0FUWUNHQXNDUUNBRVFSQlBCRUFnQXlBR1FRTnlOZ0lFSUFNZ0Jtb2lCU0FFUVFGeU5nSUVJQVFnQldvZ0JEWUNBQ0FFUVlBQ1R3UkFJQVZDQURjQ0VDQUZBbjlCQUNBRVFRaDJJZ0JGRFFBYVFSOGdCRUgvLy84SFN3MEFHaUFFUVFZZ0FHY2lBR3RCSDNGMlFRRnhJQUJCQVhSclFUNXFDeUlBTmdJY0lBQkJBblJCbktuQUFHb2hBZ0pBQWtBQ1FBSkFRWkNud0FBb0FnQWlBVUVCSUFCQkgzRjBJZ1p4QkVBZ0FpZ0NBQ0lDUVFScUtBSUFRWGh4SUFSSERRRWdBaUVBREFJTFFaQ253QUFnQVNBR2NqWUNBQ0FDSUFVMkFnQU1Bd3NnQkVFQVFSa2dBRUVCZG10QkgzRWdBRUVmUmh0MElRRURRQ0FDSUFGQkhYWkJCSEZxUVJCcUlnWW9BZ0FpQUVVTkFpQUJRUUYwSVFFZ0FDRUNJQUJCQkdvb0FnQkJlSEVnQkVjTkFBc0xJQUFvQWdnaUFpQUZOZ0lNSUFBZ0JUWUNDQ0FGUVFBMkFoZ2dCU0FBTmdJTUlBVWdBallDQ0F3RUN5QUdJQVUyQWdBTElBVWdBallDR0NBRklBVTJBZ3dnQlNBRk5nSUlEQUlMSUFSQkEzWWlBa0VEZEVHVXA4QUFhaUVBQW45QmpLZkFBQ2dDQUNJQlFRRWdBblFpQW5FRVFDQUFLQUlJREFFTFFZeW53QUFnQVNBQ2NqWUNBQ0FBQ3lFQ0lBQWdCVFlDQ0NBQ0lBVTJBZ3dnQlNBQU5nSU1JQVVnQWpZQ0NBd0JDeUFESUFRZ0Jtb2lBRUVEY2pZQ0JDQUFJQU5xSWdBZ0FDZ0NCRUVCY2pZQ0JBc2dBMEVJYWc4TEFrQUNRRUdNcDhBQUtBSUFJZ0ZCRUNBQVFRdHFRWGh4SUFCQkMwa2JJZ1pCQTNZaUFIWWlBa0VEY1VVRVFDQUdRWnlxd0FBb0FnQk5EUU1nQWcwQlFaQ253QUFvQWdBaUFFVU5BeUFBUVFBZ0FHdHhhRUVDZEVHY3FjQUFhaWdDQUNJQlFRUnFLQUlBUVhoeElBWnJJUVFnQVNFQ0EwQWdBU2dDRUNJQVJRUkFJQUZCRkdvb0FnQWlBRVVOQkFzZ0FFRUVhaWdDQUVGNGNTQUdheUlCSUFRZ0FTQUVTU0lCR3lFRUlBQWdBaUFCR3lFQ0lBQWhBUXdBQ3dBTEFrQWdBa0YvYzBFQmNTQUFhaUlBUVFOMFFZeW53QUJxSWdOQkVHb29BZ0FpQWtFSWFpSUZLQUlBSWdRZ0EwRUlhaUlEUndSQUlBUWdBellDRENBRElBUTJBZ2dNQVF0QmpLZkFBQ0FCUVg0Z0FIZHhOZ0lBQ3lBQ0lBQkJBM1FpQUVFRGNqWUNCQ0FBSUFKcUlnQWdBQ2dDQkVFQmNqWUNCQ0FGRHdzQ1FFRUNJQUIwSWdSQkFDQUVhM0lnQWlBQWRIRWlBRUVBSUFCcmNXZ2lBa0VEZEVHTXA4QUFhaUlEUVJCcUtBSUFJZ0JCQ0dvaUJTZ0NBQ0lFSUFOQkNHb2lBMGNFUUNBRUlBTTJBZ3dnQXlBRU5nSUlEQUVMUVl5bndBQWdBVUYrSUFKM2NUWUNBQXNnQUNBR1FRTnlOZ0lFSUFBZ0Jtb2lBeUFDUVFOMElnSWdCbXNpQVVFQmNqWUNCQ0FBSUFKcUlBRTJBZ0JCbktyQUFDZ0NBQ0lBQkVBZ0FFRURkaUlFUVFOMFFaU253QUJxSVFCQnBLckFBQ2dDQUNFQ0FuOUJqS2ZBQUNnQ0FDSUdRUUVnQkVFZmNYUWlCSEVFUUNBQUtBSUlEQUVMUVl5bndBQWdCQ0FHY2pZQ0FDQUFDeUVFSUFBZ0FqWUNDQ0FFSUFJMkFnd2dBaUFBTmdJTUlBSWdCRFlDQ0F0QnBLckFBQ0FETmdJQVFaeXF3QUFnQVRZQ0FDQUZEd3NnQWlnQ0dDRUhBa0FDUUNBQ0lBSW9BZ3dpQVVZRVFDQUNRUlJCRUNBQ1FSUnFJZ0VvQWdBaUF4dHFLQUlBSWdBTkFVRUFJUUVNQWdzZ0FpZ0NDQ0lBSUFFMkFnd2dBU0FBTmdJSURBRUxJQUVnQWtFUWFpQURHeUVEQTBBZ0F5RUZJQUFpQVVFVWFpSURLQUlBSWdCRkJFQWdBVUVRYWlFRElBRW9BaEFoQUFzZ0FBMEFDeUFGUVFBMkFnQUxJQWRGRFFNZ0FpQUNLQUljUVFKMFFaeXB3QUJxSWdBb0FnQkhCRUFnQjBFUVFSUWdCeWdDRUNBQ1JodHFJQUUyQWdBZ0FVVU5CQXdEQ3lBQUlBRTJBZ0FnQVEwQ1FaQ253QUJCa0tmQUFDZ0NBRUYrSUFJb0FoeDNjVFlDQUF3REN3SkFBa0FDUUFKQUFrQkJuS3JBQUNnQ0FDSUFJQVpKQkVCQm9LckFBQ2dDQUNJQUlBWkxEUU5CQUNFQ0lBWkJyNEFFYWlJQVFSQjJRQUFpQVVGL1JnMEdJQUZCRUhRaUJVVU5Ca0dzcXNBQUlBQkJnSUI4Y1NJRVFheXF3QUFvQWdCcUlnQTJBZ0JCc0tyQUFFR3dxc0FBS0FJQUlnRWdBQ0FCSUFCTEd6WUNBRUdvcXNBQUtBSUFJZ05GRFFGQnRLckFBQ0VBQTBBZ0FDZ0NBQ0lCSUFBb0FnUWlCMm9nQlVZTkF5QUFLQUlJSWdBTkFBc01CQXRCcEtyQUFDZ0NBQ0VDQW44Z0FDQUdheUlCUVE5TkJFQkJwS3JBQUVFQU5nSUFRWnlxd0FCQkFEWUNBQ0FDSUFCQkEzSTJBZ1FnQUNBQ2FpSUJRUVJxSVFBZ0FTZ0NCRUVCY2d3QkMwR2Nxc0FBSUFFMkFnQkJwS3JBQUNBQ0lBWnFJZ1EyQWdBZ0JDQUJRUUZ5TmdJRUlBQWdBbW9nQVRZQ0FDQUNRUVJxSVFBZ0JrRURjZ3NoQVNBQUlBRTJBZ0FnQWtFSWFnOExRY2lxd0FBb0FnQWlBRUVBSUFBZ0JVMGJSUVJBUWNpcXdBQWdCVFlDQUF0QnpLckFBRUgvSHpZQ0FFRzBxc0FBSUFVMkFnQkJ3S3JBQUVFQU5nSUFRYmlxd0FBZ0JEWUNBRUdncDhBQVFaU253QUEyQWdCQnFLZkFBRUdjcDhBQU5nSUFRWnlud0FCQmxLZkFBRFlDQUVHd3A4QUFRYVNud0FBMkFnQkJwS2ZBQUVHY3A4QUFOZ0lBUWJpbndBQkJyS2ZBQURZQ0FFR3NwOEFBUWFTbndBQTJBZ0JCd0tmQUFFRzBwOEFBTmdJQVFiU253QUJCcktmQUFEWUNBRUhJcDhBQVFieW53QUEyQWdCQnZLZkFBRUcwcDhBQU5nSUFRZENud0FCQnhLZkFBRFlDQUVIRXA4QUFRYnlud0FBMkFnQkIyS2ZBQUVITXA4QUFOZ0lBUWN5bndBQkJ4S2ZBQURZQ0FFSGdwOEFBUWRTbndBQTJBZ0JCMUtmQUFFSE1wOEFBTmdJQVFkeW53QUJCMUtmQUFEWUNBRUhvcDhBQVFkeW53QUEyQWdCQjVLZkFBRUhjcDhBQU5nSUFRZkNud0FCQjVLZkFBRFlDQUVIc3A4QUFRZVNud0FBMkFnQkIrS2ZBQUVIc3A4QUFOZ0lBUWZTbndBQkI3S2ZBQURZQ0FFR0FxTUFBUWZTbndBQTJBZ0JCL0tmQUFFSDBwOEFBTmdJQVFZaW93QUJCL0tmQUFEWUNBRUdFcU1BQVFmeW53QUEyQWdCQmtLakFBRUdFcU1BQU5nSUFRWXlvd0FCQmhLakFBRFlDQUVHWXFNQUFRWXlvd0FBMkFnQkJsS2pBQUVHTXFNQUFOZ0lBUWFDb3dBQkJsS2pBQURZQ0FFR29xTUFBUVp5b3dBQTJBZ0JCbktqQUFFR1VxTUFBTmdJQVFiQ293QUJCcEtqQUFEWUNBRUdrcU1BQVFaeW93QUEyQWdCQnVLakFBRUdzcU1BQU5nSUFRYXlvd0FCQnBLakFBRFlDQUVIQXFNQUFRYlNvd0FBMkFnQkJ0S2pBQUVHc3FNQUFOZ0lBUWNpb3dBQkJ2S2pBQURZQ0FFRzhxTUFBUWJTb3dBQTJBZ0JCMEtqQUFFSEVxTUFBTmdJQVFjU293QUJCdktqQUFEWUNBRUhZcU1BQVFjeW93QUEyQWdCQnpLakFBRUhFcU1BQU5nSUFRZUNvd0FCQjFLakFBRFlDQUVIVXFNQUFRY3lvd0FBMkFnQkI2S2pBQUVIY3FNQUFOZ0lBUWR5b3dBQkIxS2pBQURZQ0FFSHdxTUFBUWVTb3dBQTJBZ0JCNUtqQUFFSGNxTUFBTmdJQVFmaW93QUJCN0tqQUFEWUNBRUhzcU1BQVFlU293QUEyQWdCQmdLbkFBRUgwcU1BQU5nSUFRZlNvd0FCQjdLakFBRFlDQUVHSXFjQUFRZnlvd0FBMkFnQkIvS2pBQUVIMHFNQUFOZ0lBUVpDcHdBQkJoS25BQURZQ0FFR0VxY0FBUWZ5b3dBQTJBZ0JCbUtuQUFFR01xY0FBTmdJQVFZeXB3QUJCaEtuQUFEWUNBRUdvcXNBQUlBVTJBZ0JCbEtuQUFFR01xY0FBTmdJQVFhQ3F3QUFnQkVGWWFpSUFOZ0lBSUFVZ0FFRUJjallDQkNBQUlBVnFRU2cyQWdSQnhLckFBRUdBZ0lBQk5nSUFEQU1MSUFCQkRHb29BZ0FnQlNBRFRYSWdBU0FEUzNJTkFTQUFJQVFnQjJvMkFnUkJxS3JBQUVHb3FzQUFLQUlBSWdCQkQycEJlSEVpQVVGNGFqWUNBRUdncXNBQVFhQ3F3QUFvQWdBZ0JHb2lCQ0FBSUFGcmFrRUlhaUlETmdJQUlBRkJmR29nQTBFQmNqWUNBQ0FBSUFScVFTZzJBZ1JCeEtyQUFFR0FnSUFCTmdJQURBSUxRYUNxd0FBZ0FDQUdheUlDTmdJQVFhaXF3QUJCcUtyQUFDZ0NBQ0lBSUFacUlnRTJBZ0FnQVNBQ1FRRnlOZ0lFSUFBZ0JrRURjallDQkNBQVFRaHFJUUlNQWd0QnlLckFBRUhJcXNBQUtBSUFJZ0FnQlNBQUlBVkpHellDQUNBRUlBVnFJUUZCdEtyQUFDRUFBa0FEUUNBQklBQW9BZ0JIQkVBZ0FDZ0NDQ0lBRFFFTUFnc0xJQUJCREdvb0FnQU5BQ0FBSUFVMkFnQWdBQ0FBS0FJRUlBUnFOZ0lFSUFVZ0JrRURjallDQkNBRklBWnFJUUFnQVNBRmF5QUdheUVHQWtBQ1FDQUJRYWlxd0FBb0FnQkhCRUJCcEtyQUFDZ0NBQ0FCUmcwQklBRkJCR29vQWdBaUFrRURjVUVCUmdSQUlBRWdBa0Y0Y1NJQ0VCRWdBaUFHYWlFR0lBRWdBbW9oQVFzZ0FTQUJLQUlFUVg1eE5nSUVJQUFnQmtFQmNqWUNCQ0FBSUFacUlBWTJBZ0FnQmtHQUFrOEVRQ0FBUWdBM0FoQWdBQUovUVFBZ0JrRUlkaUlDUlEwQUdrRWZJQVpCLy8vL0Iwc05BQm9nQmtFR0lBSm5JZ0pyUVI5eGRrRUJjU0FDUVFGMGEwRSthZ3NpQVRZQ0hDQUJRUUowUVp5cHdBQnFJUUlDUUFKQUFrQUNRRUdRcDhBQUtBSUFJZ1JCQVNBQlFSOXhkQ0lEY1FSQUlBSW9BZ0FpQWtFRWFpZ0NBRUY0Y1NBR1J3MEJJQUloQkF3Q0MwR1FwOEFBSUFNZ0JISTJBZ0FnQWlBQU5nSUFEQU1MSUFaQkFFRVpJQUZCQVhaclFSOXhJQUZCSDBZYmRDRUJBMEFnQWlBQlFSMTJRUVJ4YWtFUWFpSURLQUlBSWdSRkRRSWdBVUVCZENFQklBUWlBa0VFYWlnQ0FFRjRjU0FHUncwQUN3c2dCQ2dDQ0NJQ0lBQTJBZ3dnQkNBQU5nSUlJQUJCQURZQ0dDQUFJQVEyQWd3Z0FDQUNOZ0lJREFVTElBTWdBRFlDQUFzZ0FDQUNOZ0lZSUFBZ0FEWUNEQ0FBSUFBMkFnZ01Bd3NnQmtFRGRpSUJRUU4wUVpTbndBQnFJUUlDZjBHTXA4QUFLQUlBSWdSQkFTQUJkQ0lCY1FSQUlBSW9BZ2dNQVF0QmpLZkFBQ0FCSUFSeU5nSUFJQUlMSVFFZ0FpQUFOZ0lJSUFFZ0FEWUNEQ0FBSUFJMkFnd2dBQ0FCTmdJSURBSUxRYWlxd0FBZ0FEWUNBRUdncXNBQVFhQ3F3QUFvQWdBZ0Jtb2lBallDQUNBQUlBSkJBWEkyQWdRTUFRdEJwS3JBQUNBQU5nSUFRWnlxd0FCQm5LckFBQ2dDQUNBR2FpSUNOZ0lBSUFBZ0FrRUJjallDQkNBQUlBSnFJQUkyQWdBTElBVkJDR29QQzBHMHFzQUFJUUFEUUFKQUlBQW9BZ0FpQVNBRFRRUkFJQUVnQUNnQ0JHb2lCeUFEU3cwQkN5QUFLQUlJSVFBTUFRc0xRYWlxd0FBZ0JUWUNBRUdncXNBQUlBUkJXR29pQURZQ0FDQUZJQUJCQVhJMkFnUWdBQ0FGYWtFb05nSUVRY1Nxd0FCQmdJQ0FBVFlDQUNBRElBZEJZR3BCZUhGQmVHb2lBQ0FBSUFOQkVHcEpHeUlCUVJzMkFnUkJ0S3JBQUNrQ0FDRUpJQUZCRUdwQnZLckFBQ2tDQURjQ0FDQUJJQWszQWdoQndLckFBRUVBTmdJQVFiaXF3QUFnQkRZQ0FFRzBxc0FBSUFVMkFnQkJ2S3JBQUNBQlFRaHFOZ0lBSUFGQkhHb2hBQU5BSUFCQkJ6WUNBQ0FISUFCQkJHb2lBRXNOQUFzZ0FTQURSZzBBSUFFZ0FTZ0NCRUYrY1RZQ0JDQURJQUVnQTJzaUJVRUJjallDQkNBQklBVTJBZ0FnQlVHQUFrOEVRQ0FEUWdBM0FoQWdBMEVjYWdKL1FRQWdCVUVJZGlJQVJRMEFHa0VmSUFWQi8vLy9CMHNOQUJvZ0JVRUdJQUJuSWdCclFSOXhka0VCY1NBQVFRRjBhMEUrYWdzaUFEWUNBQ0FBUVFKMFFaeXB3QUJxSVFFQ1FBSkFBa0FDUUVHUXA4QUFLQUlBSWdSQkFTQUFRUjl4ZENJSGNRUkFJQUVvQWdBaUJFRUVhaWdDQUVGNGNTQUZSdzBCSUFRaEFBd0NDMEdRcDhBQUlBUWdCM0kyQWdBZ0FTQUROZ0lBSUFOQkdHb2dBVFlDQUF3REN5QUZRUUJCR1NBQVFRRjJhMEVmY1NBQVFSOUdHM1FoQVFOQUlBUWdBVUVkZGtFRWNXcEJFR29pQnlnQ0FDSUFSUTBDSUFGQkFYUWhBU0FBSVFRZ0FFRUVhaWdDQUVGNGNTQUZSdzBBQ3dzZ0FDZ0NDQ0lCSUFNMkFnd2dBQ0FETmdJSUlBTkJHR3BCQURZQ0FDQURJQUEyQWd3Z0F5QUJOZ0lJREFNTElBY2dBellDQUNBRFFSaHFJQVEyQWdBTElBTWdBellDRENBRElBTTJBZ2dNQVFzZ0JVRURkaUlCUVFOMFFaU253QUJxSVFBQ2YwR01wOEFBS0FJQUlnUkJBU0FCZENJQmNRUkFJQUFvQWdnTUFRdEJqS2ZBQUNBQklBUnlOZ0lBSUFBTElRRWdBQ0FETmdJSUlBRWdBellDRENBRElBQTJBZ3dnQXlBQk5nSUlDMEdncXNBQUtBSUFJZ0FnQmswTkFFR2dxc0FBSUFBZ0Jtc2lBallDQUVHb3FzQUFRYWlxd0FBb0FnQWlBQ0FHYWlJQk5nSUFJQUVnQWtFQmNqWUNCQ0FBSUFaQkEzSTJBZ1FnQUVFSWFnOExJQUlQQ3lBQklBYzJBaGdnQWlnQ0VDSUFCRUFnQVNBQU5nSVFJQUFnQVRZQ0dBc2dBa0VVYWlnQ0FDSUFSUTBBSUFGQkZHb2dBRFlDQUNBQUlBRTJBaGdMQWtBZ0JFRVFUd1JBSUFJZ0JrRURjallDQkNBQ0lBWnFJZ01nQkVFQmNqWUNCQ0FESUFScUlBUTJBZ0JCbktyQUFDZ0NBQ0lBQkVBZ0FFRURkaUlGUVFOMFFaU253QUJxSVFCQnBLckFBQ2dDQUNFQkFuOUJqS2ZBQUNnQ0FDSUdRUUVnQlVFZmNYUWlCWEVFUUNBQUtBSUlEQUVMUVl5bndBQWdCU0FHY2pZQ0FDQUFDeUVGSUFBZ0FUWUNDQ0FGSUFFMkFnd2dBU0FBTmdJTUlBRWdCVFlDQ0F0QnBLckFBQ0FETmdJQVFaeXF3QUFnQkRZQ0FBd0JDeUFDSUFRZ0Jtb2lBRUVEY2pZQ0JDQUFJQUpxSWdBZ0FDZ0NCRUVCY2pZQ0JBc2dBa0VJYWd2aEVBSVNmd0orSXdCQmdBRnJJZ1lrQUNBR0lBTTJBaXdnQmlBQ05nSW9Ba0FDZndKQUFrQUNRQUpBSUFFdEFFZEZCRUFnQVNrRE9DRVlJQUZDQURjRE9BSi9JQmhDLy84RGcxQkZCRUFnR0VJd2lLY2hFU0FZUWhDSXB5RU1JQmhDSUlpbkRBRUxJQVpCSUdvZ0FTQUdRU2hxRUNzZ0JpOEJJRVVFUUVFQklRME1CZ3RCQXlFTklBWXZBU0lpRENJQ0lBRXZBVUJQRFFVZ0FpQUJMd0ZDUmcwQ0lBRXZBVVFnREVILy93TnhSZzBESUFGQkdHb29BZ0JGRFFVZ0FVRW9haUFCUVJCcUlnY2dEQkFtR2lBQktBSVlJZ0lnREVILy93TnhJZ3BORFFRZ0J5Z0NBQ0FLUVFKMGFpSUNMUUFDSVJFZ0FpOEJBQXNoRXlBR1FSaHFJQUZCS0dvUVFpQUdLQUlZSVFJQ1FDQUdLQUljSWdjZ0JVMEVRQ0FIRFFGQkFTRVNRUUVoRFNBRklRZEJBUXdIQ3lBRlJRUkFRUUVoRFVFQUlRZEJBUXdIQ3lBRUlBSWdCUkJMR2lBQlFUQnFJZ0lnQWlnQ0FDQUZhallDQUVHSWc4QUFJUVJCQUNFTlFRQWhCMEVCREFZTElBUWdBaUFIRUVzZ0FVRXdhaUlDSUFJb0FnQWdCMm8yQWdBZ0Iyb2hCQ0FGSUFkcklRZEJBQ0VOUVFFTUJRc2dBRUVDT2dBSUlBQkNBRGNDQUF3RkN5QUJJQUV0QUVZaUIwRUJhaUlDT2dBS0lBRkJBU0FIUVE5eGRFRUNhanNCUUNBQlFYOGdBa0VQY1hSQmYzTTdBUWdnQVVFUWFpQUhFQTFCQUNFTVFRQWhEU0FGSVFkQkFBd0RDeUFCUVFFNkFFZEJBaUVOREFFTElBb2dBa0hvaHNBQUVEWUFDMEVBSVF3Z0JTRUhRUUFMSVFJZ0JrRTRha0VBTmdJQUlBWkNBRGNETUNBR1FjZ0Fha0VBTmdJQUlBWkNBRGNEUUNBR1Fmd0Fha0VBTmdJQUlBWkI5QUJxUVFBMkFnQWdCa0hzQUdwQkFEWUNBQ0FHUWVRQWFrRUFOZ0lBSUFaQjNBQnFRUUEyQWdBZ0JrSFlpY0FBTmdKNElBWkIySW5BQURZQ2NDQUdRZGlKd0FBMkFtZ2dCa0hZaWNBQU5nSmdJQVpCMkluQUFEWUNXQ0FHUVFBMkFsUWdCa0hZaWNBQU5nSlFBa0FDZndKQUlBSkZEUUFnQVVFUWFpRVVJQUZCS0dvaEZTQUdRY2dBYWlFWElBWkJQbW9oRmdKQUFrQUNRQUpBQWtBQ1FBSkFBa0FEUUFKQUFrQWdCdzBBSUFaQkVHb2dGUkJDSUFZb0FoUkZEUUJCQUNFSERBRUxJQUVnQmtFb2FoQVlRUUFoQ3lBWElSQkJBQ0VPQWtBQ1FBSkFBa0FDUUFKQUFrQUNRQUpBQTBBZ0FTMEFDeUlDSUFFdEFBb2lDRWtOQVNBQklBSWdDR3M2QUFzZ0JrRXdhaUFMYWlJS0lBRXZBUWdpQWlBQktRTUFJQWl0aVNJWXAzRTdBUUFnQVNBWUlBS3RRbitGUW9DQWZJU0ROd01BSUE0RVFDQU9RWDlxUVFWTERRVWdCeUFMSUJacUx3RUFJZ0pKRFFZZ0VDQUVOZ0lBSUJCQkJHb2dBallDQUNBSElBSnJJUWNnQWlBRWFpRUVDeUFCTHdGQUlnSWdEbXBCLy84RGNTQUJMd0VJSUFFdEFFaHJRZi8vQTNGR0RRSWdDaThCQUNJS0lBRXZBVUpHSUFvZ0FrOXlEUUlnQ2lBQkx3RkVSZzBDSUFFb0FpUWlBaUFLVFEwR0lBY2dBU2dDSENBS1FRRjBhaThCQUNJQ1NRMENJQTVCQVdvaERpQUxJQlpxUVFKcUlBSTdBUUFnRUVFSWFpRVFJQXRCQW1vaUMwRU1SdzBBQzBFR0lRNUJCU0VRSUFZdkFUb2hDQXdIQ3lBT0RRRkJBU0FOSUJJYklRME1DQXNnRGtFQmFpRU9DeUFPUVFkUERRTWdCa0V3YWlBT1FYOXFJaEJCQVhScUx3RUFJUWdnRUEwRUlBd2hDZ3dGQ3lBT1FYOXFRUVpCbUlUQUFCQTJBQXRCNklIQUFFRWpRZmlDd0FBUVNBQUxJQW9nQWtHb2hNQUFFRFlBQ3lBT1FRWkJ1SVRBQUJBM0FBc2dCa0hRQUdvaEFpQUdRVEJxSVFzRFFDQUdRUWhxSUJRZ0ZDQUxMd0VBSWdvZ0FpZ0NBQ0FDUVFScUtBSUFFQ2tnREJBaklBWXRBQW9oRVNBR0x3RUlJUk1nQVNBQkx3RkFRUUZxT3dGQUlBdEJBbW9oQ3lBQ1FRaHFJUUlnQ2lFTUlCQkJmMm9pRUEwQUN5QU9RUU4wSUFacVFVQnJJZ0lvQWdRaENTQUNRUUEyQWdRZ0FpZ0NBQ0VQSUFKQmlJUEFBRFlDQUFzZ0NDSU1JQUV2QVVKR0RRTUNRQ0FCTHdGRUlBaEhCRUFnQ0NBQkx3RkFJZ0pORFFGQkF5RU5RUUFNRFFzZ0FVRUJPZ0JIUVFJaERVRUFEQXdMQW44Z0J3Si9Ba0FDUUNBQ0lBaEhCRUFnQVNnQ0pDSUNJQWhMRFFFZ0NDQUNRZGlFd0FBUU5nQUxJQUVvQWlRaUFpQUtRZi8vQTNFaUNFME5DQ0FISUFFb0Fod2dDRUVCZEdvdkFRQkJBV3BCLy84RGNTSUNUdzBCSUE4RVFDQUJLQUlzSWdJZ0NVa05DaUFCS0FJb0lBOGdDUkJMR2lBQklBazJBakFnQVNBSk5nSTBDMEVBSVE4Z0ZSQXpJUXRCQVF3REN5QUhJQUVvQWh3Z0NFRUJkR292QVFBaUFra0VRRUVBSVE4Z0ZTQVVJQXdRSmlFTFFRRU1Bd3NnRkNBTUlBUWdBaEFwSVFzZ0Fnd0JDeUFQUlFSQUlBRW9BaXdpQ0NBQktBSTBJZ2xKRFFrZ0ZTZ0NBQ0VQQ3lBSlJRMEVJQWtnQWtzTkNTQVBMUUFBSVFzZ0JDQVBJQWtRU3lBQ0lBbEdEUW9nQ1dvZ0N6b0FBQ0FDQ3lJSmF5RUhJQWtnQkNJUGFpRUVRUUFMSUFFb0FoaEIveDlOQkVBZ0JpQVVJQXNnQ2hBaklBRXZBVUFoRUNBR0xRQUNJUkVnQmk4QkFDRVRBa0FnQVMwQUNpSUlRUXRMRFFBZ0VDQUJMd0VJSWdvZ0FTMEFTR3RCLy84RGNVY05BQ0FCSUFoQkFXbzZBQW9nQVNBS1FRRjBRUUZ5T3dFSUN5QUJJQkJCQVdvN0FVQUxRUUFoRWtVTkFRc0xRZ0VoR1NBUFJRMEtJQUVvQWl3aUFpQUpTUTBISUFFb0FpZ2dEeUFKRUVzYUlBRWdDVFlDTUNBQklBazJBalFNQ2d0QkFFRUFRWWlGd0FBUU5nQUxJQUVRTkF3R0N5QUlJQUpCeUlUQUFCQTJBQXNnQ1NBQ1FlaUV3QUFRTndBTElBa2dDRUg0aE1BQUVEY0FDeUFKSUFKQm1JWEFBQkEzQUF0QkFFRUFRYWlGd0FBUU5nQUxJQWtnQWtHNGhjQUFFRGNBQzBFQUN5RU1RUUFoRTBFQUlSRUxJQUFnQlNBSGF6WUNCQ0FBSUFNZ0JpZ0NMQ0lDYXpZQ0FDQUFRUUFnRFNBRElBSkxHeUFOSUExQkFVWWJPZ0FJSUFFZ0RLMUMvLzhEZzBJUWhpQVpoQ0FUclVMLy93T0RRaUNHaENBUnJVTC9BWU5DTUlhRU53TTRDeUFHUVlBQmFpUUFDOVlRQWhGL0FuNGpBRUdBQVdzaUJpUUFJQVlnQXpZQ0xDQUdJQUkyQWlnQ1FBSi9Ba0FDUUFKQUFrQWdBUzBBUjBVRVFDQUJLUU00SVJjZ0FVSUFOd000QW44Z0YwTC8vd09EVUVVRVFDQVhRakNJcHlFUklCZENFSWluSVF3Z0YwSWdpS2NNQVFzZ0JrRWdhaUFCSUFaQktHb1FMaUFHTHdFZ1JRUkFRUUVoRFF3R0MwRURJUTBnQmk4QklpSU1JZ0lnQVM4QlFFOE5CU0FDSUFFdkFVSkdEUUlnQVM4QlJDQU1RZi8vQTNGR0RRTWdBVUVZYWlnQ0FFVU5CU0FCUVNocUlBRkJFR29pQnlBTUVDWWFJQUVvQWhnaUFpQU1RZi8vQTNFaUNVME5CQ0FIS0FJQUlBbEJBblJxSWdJdEFBSWhFU0FDTHdFQUN5RVNJQVpCR0dvZ0FVRW9haEJDSUFZb0FoZ2hBZ0pBSUFZb0Fod2lCeUFGVFFSQUlBY05BVUVCSVFoQkFTRU5JQVVoQjBFQkRBY0xJQVZGQkVCQkFTRU5RUUFoQjBFQkRBY0xJQVFnQWlBRkVFc2FJQUZCTUdvaUFpQUNLQUlBSUFWcU5nSUFRWWlEd0FBaEJFRUFJUTFCQUNFSFFRRU1CZ3NnQkNBQ0lBY1FTeUFCUVRCcUlnSWdBaWdDQUNBSGFqWUNBQ0FIYWlFRUlBVWdCMnNoQjBFQUlRMUJBUXdGQ3lBQVFRSTZBQWdnQUVJQU53SUFEQVVMSUFFZ0FTMEFSaUlIUVFGcUlnSTZBQW9nQVVFQklBZEJEM0YwUVFKcU93RkFJQUZCZnlBQ1FROXhkRUYvY3pzQkNDQUJRUkJxSUFjUURVRUFJUXhCQUNFTklBVWhCMEVBREFNTElBRkJBVG9BUjBFQ0lRME1BUXNnQ1NBQ1FlaUd3QUFRTmdBTFFRQWhEQ0FGSVFkQkFBc2hBaUFHUVRocVFRQTJBZ0FnQmtJQU53TXdJQVpCeUFCcVFRQTJBZ0FnQmtJQU53TkFJQVpCL0FCcVFRQTJBZ0FnQmtIMEFHcEJBRFlDQUNBR1Fld0Fha0VBTmdJQUlBWkI1QUJxUVFBMkFnQWdCa0hjQUdwQkFEWUNBQ0FHUWRpSndBQTJBbmdnQmtIWWljQUFOZ0p3SUFaQjJJbkFBRFlDYUNBR1FkaUp3QUEyQW1BZ0JrSFlpY0FBTmdKWUlBWkJBRFlDVkNBR1FkaUp3QUEyQWxBQ1FBSi9Ba0FnQWtVTkFDQUJRUkJxSVJNZ0FVRW9haUVVSUFaQnlBQnFJUllnQmtFK2FpRVZBa0FDUUFKQUFrQUNRQUpBQWtBQ1FBTkFBa0FDUUNBSERRQWdCa0VRYWlBVUVFSWdCaWdDRkVVTkFFRUFJUWNNQVFzZ0FTQUdRU2hxRUNCQkFDRUxJQlloRUVFQUlRNENRQUpBQWtBQ1FBSkFBa0FDUUFKQUFrQURRQ0FCTFFBTElnSWdBUzBBQ2lJSlNRMEJJQUVnQWlBSmF6b0FDeUFCSUFFcEF3QWlGeUFKclVJL2c0ZzNBd0FnQmtFd2FpQUxhaUlKSUFFdkFRZ2dGNmR4T3dFQUlBNEVRQ0FPUVg5cVFRVkxEUVVnQnlBTElCVnFMd0VBSWdKSkRRWWdFQ0FFTmdJQUlCQkJCR29nQWpZQ0FDQUhJQUpySVFjZ0FpQUVhaUVFQ3lBQkx3RkFJZ0lnRG1wQi8vOERjU0FCTHdFSUlBRXRBRWhyUWYvL0EzRkdEUUlnQ1M4QkFDSUpJQUV2QVVKR0lBa2dBazl5RFFJZ0NTQUJMd0ZFUmcwQ0lBRW9BaVFpQWlBSlRRMEdJQWNnQVNnQ0hDQUpRUUYwYWk4QkFDSUNTUTBDSUE1QkFXb2hEaUFMSUJWcVFRSnFJQUk3QVFBZ0VFRUlhaUVRSUF0QkFtb2lDMEVNUncwQUMwRUdJUTVCQlNFUUlBWXZBVG9oQ0F3SEN5QU9EUUZCQVNBTklBZ2JJUTBNQ0FzZ0RrRUJhaUVPQ3lBT1FRZFBEUU1nQmtFd2FpQU9RWDlxSWhCQkFYUnFMd0VBSVFnZ0VBMEVJQXdoQ1F3RkN5QU9RWDlxUVFaQm1JVEFBQkEyQUF0QjZJSEFBRUVqUWZpQ3dBQVFTQUFMSUFrZ0FrR29oTUFBRURZQUN5QU9RUVpCdUlUQUFCQTNBQXNnQmtIUUFHb2hBaUFHUVRCcUlRc0RRQ0FHUVFocUlCTWdFeUFMTHdFQUlna2dBaWdDQUNBQ1FRUnFLQUlBRUNrZ0RCQWpJQVl0QUFvaEVTQUdMd0VJSVJJZ0FTQUJMd0ZBUVFGcU93RkFJQXRCQW1vaEN5QUNRUWhxSVFJZ0NTRU1JQkJCZjJvaUVBMEFDeUFPUVFOMElBWnFRVUJySWdJb0FnUWhDaUFDUVFBMkFnUWdBaWdDQUNFUElBSkJpSVBBQURZQ0FBc2dDQ0lNSUFFdkFVSkdEUU1DUUNBQkx3RkVJQWhIQkVBZ0NDQUJMd0ZBSWdKTkRRRkJBeUVOUVFBTURRc2dBVUVCT2dCSFFRSWhEVUVBREF3TEFuOGdCd0ovQWtBQ1FDQUNJQWhIQkVBZ0FTZ0NKQ0lDSUFoTERRRWdDQ0FDUWRpRXdBQVFOZ0FMSUFFb0FpUWlBaUFKUWYvL0EzRWlDRTBOQ0NBSElBRW9BaHdnQ0VFQmRHb3ZBUUJCQVdwQi8vOERjU0lDVHcwQklBOEVRQ0FCS0FJc0lnSWdDa2tOQ2lBQktBSW9JQThnQ2hCTEdpQUJJQW8yQWpBZ0FTQUtOZ0kwQzBFQUlROGdGQkF6SVF0QkFRd0RDeUFISUFFb0Fod2dDRUVCZEdvdkFRQWlBa2tFUUVFQUlROGdGQ0FUSUF3UUppRUxRUUVNQXdzZ0V5QU1JQVFnQWhBcElRc2dBZ3dCQ3lBUFJRUkFJQUVvQWl3aUNDQUJLQUkwSWdwSkRRa2dGQ2dDQUNFUEN5QUtSUTBFSUFvZ0Frc05DU0FQTFFBQUlRc2dCQ0FQSUFvUVN5QUNJQXBHRFFvZ0Ntb2dDem9BQUNBQ0N5SUtheUVISUFvZ0JDSVBhaUVFUVFBTElBRW9BaGhCL3g5TkJFQWdCaUFUSUFzZ0NSQWpJQUV2QVVBaEVDQUdMUUFDSVJFZ0JpOEJBQ0VTQWtBZ0FTMEFDaUlJUVF0TERRQWdFQ0FCTHdFSUlna2dBUzBBU0d0Qi8vOERjVWNOQUNBQklBaEJBV282QUFvZ0FTQUpRUUYwUVFGeU93RUlDeUFCSUJCQkFXbzdBVUFMUVFBaENFVU5BUXNMUWdFaEdDQVBSUTBLSUFFb0Fpd2lBaUFLU1EwSElBRW9BaWdnRHlBS0VFc2FJQUVnQ2pZQ01DQUJJQW8yQWpRTUNndEJBRUVBUVlpRndBQVFOZ0FMSUFFUU5Bd0dDeUFJSUFKQnlJVEFBQkEyQUFzZ0NpQUNRZWlFd0FBUU53QUxJQW9nQ0VINGhNQUFFRGNBQ3lBS0lBSkJtSVhBQUJBM0FBdEJBRUVBUWFpRndBQVFOZ0FMSUFvZ0FrRzRoY0FBRURjQUMwRUFDeUVNUVFBaEVrRUFJUkVMSUFBZ0JTQUhhellDQkNBQUlBTWdCaWdDTENJQ2F6WUNBQ0FBUVFBZ0RTQURJQUpMR3lBTklBMUJBVVliT2dBSUlBRWdESzFDLy84RGcwSVFoaUFZaENBU3JVTC8vd09EUWlDR2hDQVJyVUwvQVlOQ01JYUVOd000Q3lBR1FZQUJhaVFBQzZvSUFRWi9Jd0JCOEFCcklnVWtBQ0FGSUFNMkFnd2dCU0FDTmdJSVFRRWhCeUFCSVFZQ1FDQUJRWUVDU1EwQVFRQWdBV3NoQ1VHQUFpRUlBMEFDUUNBSUlBRlBEUUJCQUNFSElBQWdDR29zQUFCQnYzOU1EUUFnQ0NFR0RBSUxJQWhCZjJvaEJrRUFJUWNnQ0VFQlJnMEJJQWdnQ1dvZ0JpRUlRUUZIRFFBTEN5QUZJQVkyQWhRZ0JTQUFOZ0lRSUFWQkFFRUZJQWNiTmdJY0lBVkI4SXZBQUVIQWtzQUFJQWNiTmdJWUFrQUNmd0pBQWtBZ0FpQUJTeUlISUFNZ0FVdHlSUVJBSUFJZ0Ewc05BUUpBSUFKRklBRWdBa1p5UlFSQUlBRWdBazBOQVNBQUlBSnFMQUFBUVVCSURRRUxJQU1oQWdzZ0JTQUNOZ0lnSUFKQkFDQUJJQUpIRzBVRVFDQUNJUWNNQXdzZ0FVRUJhaUVEQTBBQ1FDQUNJQUZQRFFBZ0FDQUNhaXdBQUVGQVNBMEFJQUloQnlBRlFTUnFEQVVMSUFKQmYyb2hCeUFDUVFGR0RRTWdBaUFEUmlBSElRSkZEUUFMREFJTElBVWdBaUFESUFjYk5nSW9JQVZCeEFCcVFRTTJBZ0FnQlVIY0FHcEJIVFlDQUNBRlFkUUFha0VkTmdJQUlBVkNBemNDTkNBRlFlaVN3QUEyQWpBZ0JVRWNOZ0pNSUFVZ0JVSElBR28yQWtBZ0JTQUZRUmhxTmdKWUlBVWdCVUVRYWpZQ1VDQUZJQVZCS0dvMkFrZ01Bd3NnQlVIa0FHcEJIVFlDQUNBRlFkd0Fha0VkTmdJQUlBVkIxQUJxUVJ3MkFnQWdCVUhFQUdwQkJEWUNBQ0FGUWdRM0FqUWdCVUdrazhBQU5nSXdJQVZCSERZQ1RDQUZJQVZCeUFCcU5nSkFJQVVnQlVFWWFqWUNZQ0FGSUFWQkVHbzJBbGdnQlNBRlFReHFOZ0pRSUFVZ0JVRUlhallDU0F3Q0N5QUZRU1JxQ3lFSUFrQWdBU0FIUmcwQVFRRWhBd0pBQWtBQ1FDQUFJQWRxSWdZc0FBQWlBa0YvVEFSQVFRQWhBeUFBSUFGcUlnRWhBQ0FCSUFaQkFXcEhCRUFnQmkwQUFVRS9jU0VESUFaQkFtb2hBQXNnQWtFZmNTRUpJQUpCL3dGeFFkOEJTdzBCSUFNZ0NVRUdkSEloQWd3Q0N5QUZJQUpCL3dGeE5nSWtJQVZCS0dvaEFRd0NDMEVBSVFvZ0FTRUdJQUFnQVVjRVFDQUFMUUFBUVQ5eElRb2dBRUVCYWlFR0N5QUtJQU5CQm5SeUlRQWdBa0gvQVhGQjhBRkpCRUFnQUNBSlFReDBjaUVDREFFTFFRQWhBaUFCSUFaSEJIOGdCaTBBQUVFL2NRVkJBQXNnQ1VFU2RFR0FnUEFBY1NBQVFRWjBjbklpQWtHQWdNUUFSZzBDQ3lBRklBSTJBaVJCQVNFRElBVkJLR29oQVNBQ1FZQUJTUTBBUVFJaEF5QUNRWUFRU1EwQVFRTkJCQ0FDUVlDQUJFa2JJUU1MSUFVZ0J6WUNLQ0FGSUFNZ0IybzJBaXdnQlVIRUFHcEJCVFlDQUNBRlFld0Fha0VkTmdJQUlBVkI1QUJxUVIwMkFnQWdCVUhjQUdwQkhqWUNBQ0FGUWRRQWFrRWZOZ0lBSUFWQ0JUY0NOQ0FGUWZpVHdBQTJBakFnQlNBQk5nSllJQVVnQ0RZQ1VDQUZRUncyQWt3Z0JTQUZRY2dBYWpZQ1FDQUZJQVZCR0dvMkFtZ2dCU0FGUVJCcU5nSmdJQVVnQlVFZ2FqWUNTQXdCQzBIOGk4QUFRU3NnQkJCSUFBc2dCVUV3YWlBRUVGRUFDOUlJQVFWL0lBQkJlR29pQVNBQVFYeHFLQUlBSWdOQmVIRWlBR29oQWdKQUFrQWdBMEVCY1EwQUlBTkJBM0ZGRFFFZ0FTZ0NBQ0lESUFCcUlRQWdBU0FEYXlJQlFhU3F3QUFvQWdCR0JFQWdBaWdDQkVFRGNVRURSdzBCUVp5cXdBQWdBRFlDQUNBQ0lBSW9BZ1JCZm5FMkFnUWdBU0FBUVFGeU5nSUVJQUFnQVdvZ0FEWUNBQThMSUFFZ0F4QVJDd0pBSUFKQkJHb2lCQ2dDQUNJRFFRSnhCRUFnQkNBRFFYNXhOZ0lBSUFFZ0FFRUJjallDQkNBQUlBRnFJQUEyQWdBTUFRc0NRQ0FDUWFpcXdBQW9BZ0JIQkVCQnBLckFBQ2dDQUNBQ1JnMEJJQUlnQTBGNGNTSUNFQkVnQVNBQUlBSnFJZ0JCQVhJMkFnUWdBQ0FCYWlBQU5nSUFJQUZCcEtyQUFDZ0NBRWNOQWtHY3FzQUFJQUEyQWdBUEMwR29xc0FBSUFFMkFnQkJvS3JBQUVHZ3FzQUFLQUlBSUFCcUlnQTJBZ0FnQVNBQVFRRnlOZ0lFUWFTcXdBQW9BZ0FnQVVZRVFFR2Nxc0FBUVFBMkFnQkJwS3JBQUVFQU5nSUFDMEhFcXNBQUtBSUFJZ0lnQUU4TkFrR29xc0FBS0FJQUlnQkZEUUlDUUVHZ3FzQUFLQUlBSWdOQktVa05BRUcwcXNBQUlRRURRQ0FCS0FJQUlnUWdBRTBFUUNBRUlBRW9BZ1JxSUFCTERRSUxJQUVvQWdnaUFRMEFDd3RCektyQUFBSi9RZjhmUWJ5cXdBQW9BZ0FpQUVVTkFCcEJBQ0VCQTBBZ0FVRUJhaUVCSUFBb0FnZ2lBQTBBQ3lBQlFmOGZJQUZCL3g5TEd3czJBZ0FnQXlBQ1RRMENRY1Nxd0FCQmZ6WUNBQThMUWFTcXdBQWdBVFlDQUVHY3FzQUFRWnlxd0FBb0FnQWdBR29pQURZQ0FDQUJJQUJCQVhJMkFnUWdBQ0FCYWlBQU5nSUFEd3RCektyQUFBSi9Ba0FnQUVHQUFrOEVRQ0FCUWdBM0FoQWdBVUVjYWdKL1FRQWdBRUVJZGlJQ1JRMEFHa0VmSUFCQi8vLy9CMHNOQUJvZ0FFRUdJQUpuSWdKclFSOXhka0VCY1NBQ1FRRjBhMEUrYWdzaUF6WUNBQ0FEUVFKMFFaeXB3QUJxSVFJQ1FBSkFBa0FDUUFKQVFaQ253QUFvQWdBaUJFRUJJQU5CSDNGMElnVnhCRUFnQWlnQ0FDSUNRUVJxS0FJQVFYaHhJQUJIRFFFZ0FpRUREQUlMUVpDbndBQWdCQ0FGY2pZQ0FDQUNJQUUyQWdBTUF3c2dBRUVBUVJrZ0EwRUJkbXRCSDNFZ0EwRWZSaHQwSVFRRFFDQUNJQVJCSFhaQkJIRnFRUkJxSWdVb0FnQWlBMFVOQWlBRVFRRjBJUVFnQXlJQ1FRUnFLQUlBUVhoeElBQkhEUUFMQ3lBREtBSUlJZ0FnQVRZQ0RDQURJQUUyQWdnZ0FVRVlha0VBTmdJQUlBRWdBellDRENBQklBQTJBZ2dNQWdzZ0JTQUJOZ0lBQ3lBQlFSaHFJQUkyQWdBZ0FTQUJOZ0lNSUFFZ0FUWUNDQXRCektyQUFFSE1xc0FBS0FJQVFYOXFJZ0EyQWdBZ0FBMERRYnlxd0FBb0FnQWlBQTBCUWY4ZkRBSUxJQUJCQTNZaUFrRURkRUdVcDhBQWFpRUFBbjlCaktmQUFDZ0NBQ0lEUVFFZ0FuUWlBbkVFUUNBQUtBSUlEQUVMUVl5bndBQWdBaUFEY2pZQ0FDQUFDeUVDSUFBZ0FUWUNDQ0FDSUFFMkFnd2dBU0FBTmdJTUlBRWdBallDQ0E4TFFRQWhBUU5BSUFGQkFXb2hBU0FBS0FJSUlnQU5BQXNnQVVIL0h5QUJRZjhmU3hzTE5nSUFDd3VXQndFS2Z5QUFLQUlRSVFNQ1FBSkFBa0FnQUNnQ0NDSU1RUUZIQkVBZ0EwRUJSZzBCREFNTElBTkJBVWNOQVFzZ0FTQUNhaUVEQWtBQ1FDQUFRUlJxS0FJQUlnaEZCRUFnQVNFRURBRUxJQUVoQkFOQUlBTWdCQ0lIUmcwQ0lBZEJBV29oQkFKQUlBY3NBQUFpQmtGL1NnMEFJQVpCL3dGeElRa0NmeUFESUFSR0JFQkJBQ0VLSUFNTUFRc2dCeTBBQVVFL2NTRUtJQWRCQW1vaUJBc2hCaUFKUWVBQlNRMEFBbjhnQXlBR1JnUkFRUUFoQ3lBRERBRUxJQVl0QUFCQlAzRWhDeUFHUVFGcUlnUUxJUVlnQ1VId0FVa05BQ0FESUFaR0JIOUJBQVVnQmtFQmFpRUVJQVl0QUFCQlAzRUxJQWxCRW5SQmdJRHdBSEVnQ2tFTWRISWdDMEVHZEhKeVFZQ0F4QUJHRFFNTElBUWdCMnNnQldvaEJTQUlRWDlxSWdnTkFBc0xJQU1nQkVZTkFBSkFJQVFzQUFBaUIwRi9TZzBBQW44Z0F5QUVRUUZxUmdSQUlBTWhDRUVBREFFTElBUkJBbW9oQ0NBRUxRQUJRVDl4UVFaMEN5QUhRZjhCY1VIZ0FVa05BQUovSUFNZ0NFWUVRQ0FESVFaQkFBd0JDeUFJUVFGcUlRWWdDQzBBQUVFL2NRc2dCMEgvQVhGQjhBRkpEUUFnQjBIL0FYRWhCM0loQkNBRElBWkdCSDlCQUFVZ0JpMEFBRUUvY1FzZ0IwRVNkRUdBZ1BBQWNTQUVRUVowY25KQmdJREVBRVlOQVFzQ1FDQUZSU0FDSUFWR2NrVUVRRUVBSVFNZ0JTQUNUdzBCSUFFZ0JXb3NBQUJCUUVnTkFRc2dBU0VEQ3lBRklBSWdBeHNoQWlBRElBRWdBeHNoQVFzZ0RFRUJSZzBBREFFTEFrQWdBZ1JBUVFBaEJDQUNJUVVnQVNFREEwQWdCQ0FETFFBQVFjQUJjVUdBQVVacUlRUWdBMEVCYWlFRElBVkJmMm9pQlEwQUN5QUNJQVJySUFBb0Fnd2lCazhOQWtFQUlRUWdBaUVGSUFFaEF3TkFJQVFnQXkwQUFFSEFBWEZCZ0FGR2FpRUVJQU5CQVdvaEF5QUZRWDlxSWdVTkFBc01BUXRCQUNFRUlBQW9BZ3dpQmcwQURBRUxRUUFoQXlBRUlBSnJJQVpxSWdRaEJRSkFBa0FDUUVFQUlBQXRBQ0FpQmlBR1FRTkdHMEVEY1VFQmF3NERBUUFCQWdzZ0JFRUJkaUVESUFSQkFXcEJBWFloQlF3QkMwRUFJUVVnQkNFREN5QURRUUZxSVFNQ1FBTkFJQU5CZjJvaUF3UkFJQUFvQWhnZ0FDZ0NCQ0FBS0FJY0tBSVFFUUFBUlEwQkRBSUxDeUFBS0FJRUlRUWdBQ2dDR0NBQklBSWdBQ2dDSENnQ0RCRUJBQTBBSUFWQkFXb2hBeUFBS0FJY0lRRWdBQ2dDR0NFQUEwQWdBMEYvYWlJRFJRUkFRUUFQQ3lBQUlBUWdBU2dDRUJFQUFFVU5BQXNMUVFFUEN5QUFLQUlZSUFFZ0FpQUFRUnhxS0FJQUtBSU1FUUVBQzdzR0FRUi9JQUFnQVdvaEFnSkFBa0FnQUVFRWFpZ0NBQ0lEUVFGeERRQWdBMEVEY1VVTkFTQUFLQUlBSWdNZ0FXb2hBU0FBSUFOcklnQkJwS3JBQUNnQ0FFWUVRQ0FDS0FJRVFRTnhRUU5IRFFGQm5LckFBQ0FCTmdJQUlBSWdBaWdDQkVGK2NUWUNCQ0FBSUFGQkFYSTJBZ1FnQWlBQk5nSUFEd3NnQUNBREVCRUxBa0FnQWtFRWFpZ0NBQ0lEUVFKeEJFQWdBa0VFYWlBRFFYNXhOZ0lBSUFBZ0FVRUJjallDQkNBQUlBRnFJQUUyQWdBTUFRc0NRQ0FDUWFpcXdBQW9BZ0JIQkVCQnBLckFBQ2dDQUNBQ1JnMEJJQUlnQTBGNGNTSUNFQkVnQUNBQklBSnFJZ0ZCQVhJMkFnUWdBQ0FCYWlBQk5nSUFJQUJCcEtyQUFDZ0NBRWNOQWtHY3FzQUFJQUUyQWdBUEMwR29xc0FBSUFBMkFnQkJvS3JBQUVHZ3FzQUFLQUlBSUFGcUlnRTJBZ0FnQUNBQlFRRnlOZ0lFSUFCQnBLckFBQ2dDQUVjTkFrR2Nxc0FBUVFBMkFnQkJwS3JBQUVFQU5nSUFEd3RCcEtyQUFDQUFOZ0lBUVp5cXdBQkJuS3JBQUNnQ0FDQUJhaUlCTmdJQUlBQWdBVUVCY2pZQ0JDQUFJQUZxSUFFMkFnQVBDeUFCUVlBQ1R3UkFJQUJDQURjQ0VDQUFRUnhxQW45QkFDQUJRUWgySWdKRkRRQWFRUjhnQVVILy8vOEhTdzBBR2lBQlFRWWdBbWNpQW10QkgzRjJRUUZ4SUFKQkFYUnJRVDVxQ3lJRE5nSUFJQU5CQW5SQm5LbkFBR29oQWdKQUFrQUNRQUpBUVpDbndBQW9BZ0FpQkVFQklBTkJIM0YwSWdWeEJFQWdBaWdDQUNJQ1FRUnFLQUlBUVhoeElBRkhEUUVnQWlFRERBSUxRWkNud0FBZ0JDQUZjallDQUNBQ0lBQTJBZ0FNQXdzZ0FVRUFRUmtnQTBFQmRtdEJIM0VnQTBFZlJodDBJUVFEUUNBQ0lBUkJIWFpCQkhGcVFSQnFJZ1VvQWdBaUEwVU5BaUFFUVFGMElRUWdBeUlDUVFScUtBSUFRWGh4SUFGSERRQUxDeUFES0FJSUlnRWdBRFlDRENBRElBQTJBZ2dnQUVFWWFrRUFOZ0lBSUFBZ0F6WUNEQ0FBSUFFMkFnZ1BDeUFGSUFBMkFnQUxJQUJCR0dvZ0FqWUNBQ0FBSUFBMkFnd2dBQ0FBTmdJSUR3c2dBVUVEZGlJQ1FRTjBRWlNud0FCcUlRRUNmMEdNcDhBQUtBSUFJZ05CQVNBQ2RDSUNjUVJBSUFFb0FnZ01BUXRCaktmQUFDQUNJQU55TmdJQUlBRUxJUUlnQVNBQU5nSUlJQUlnQURZQ0RDQUFJQUUyQWd3Z0FDQUNOZ0lJQ3d1cUJnRUhmd0pBQWtBQ1FBSkFBa0FDUUFKQUFrQWdBRUdBZ0FSUEJFQWdBRUdBZ0FoSkRRRWdBRUcxMlhOcVFiWGJLMGtnQUVIaWkzUnFRZUlMU1hJZ0FFR2ZxSFJxUVo4WVNTQUFRZDdpZEdwQkRrbHljaUFBUWY3Ly93QnhRWjd3Q2tZZ0FFR2lzblZxUVNKSmNpQUFRY3VSZFdwQkMwbHljZzBDSUFCQjhJTTRTUThMSUFCQmdQNERjVUVJZGlFR1FlaVV3QUFoQVNBQVFmOEJjU0VIQTBBQ1FDQUJRUUpxSVFVZ0FpQUJMUUFCSWdScUlRTWdCaUFCTFFBQUlnRkhCRUFnQVNBR1N3MEJJQU1oQWlBRklnRkJ1cFhBQUVjTkFnd0JDeUFESUFKSkRRUWdBMEdpQWtzTkJTQUNRYnFWd0FCcUlRRUNRQU5BSUFSRkRRRWdCRUYvYWlFRUlBRXRBQUFnQVVFQmFpRUJJQWRIRFFBTFFRQWhCQXdFQ3lBRElRSWdCU0lCUWJxVndBQkhEUUVMQ3lBQVFmLy9BM0VoQTBIY2w4QUFJUUZCQVNFRUEwQWdBVUVCYWlFQUFuOGdBQ0FCTFFBQUlnSkJHSFJCR0hVaUJVRUFUZzBBR2lBQVFaR2F3QUJHRFFZZ0FTMEFBU0FGUWY4QWNVRUlkSEloQWlBQlFRSnFDeUVCSUFNZ0Ftc2lBMEVBU0EwQ0lBUkJBWE1oQkNBQlFaR2F3QUJIRFFBTERBRUxJQUJCZ1A0RGNVRUlkaUVHUVpHYXdBQWhBU0FBUWY4QmNTRUhBMEFDUUNBQlFRSnFJUVVnQWlBQkxRQUJJZ1JxSVFNZ0JpQUJMUUFBSWdGSEJFQWdBU0FHU3cwQklBTWhBaUFGSWdGQjNackFBRWNOQWd3QkN5QURJQUpKRFFZZ0EwR3ZBVXNOQnlBQ1FkMmF3QUJxSVFFQ1FBTkFJQVJGRFFFZ0JFRi9haUVFSUFFdEFBQWdBVUVCYWlFQklBZEhEUUFMUVFBaEJBd0RDeUFESVFJZ0JTSUJRZDJhd0FCSERRRUxDeUFBUWYvL0EzRWhBMEdNbk1BQUlRRkJBU0VFQTBBZ0FVRUJhaUVBQW44Z0FDQUJMUUFBSWdKQkdIUkJHSFVpQlVFQVRnMEFHaUFBUWErZndBQkdEUWdnQVMwQUFTQUZRZjhBY1VFSWRISWhBaUFCUVFKcUN5RUJJQU1nQW1zaUEwRUFTQTBCSUFSQkFYTWhCQ0FCUWErZndBQkhEUUFMQ3lBRVFRRnhEd3NnQWlBRFFjaVV3QUFRT0FBTElBTkJvZ0pCeUpUQUFCQTNBQXRCL0l2QUFFRXJRZGlVd0FBUVNBQUxJQUlnQTBISWxNQUFFRGdBQ3lBRFFhOEJRY2lVd0FBUU53QUxRZnlMd0FCQkswSFlsTUFBRUVnQUM3RUZBUWQvUVN0QmdJREVBQ0FBS0FJQUlnbEJBWEVpQlJzaENpQUVJQVZxSVFnQ1FDQUpRUVJ4UlFSQVFRQWhBUXdCQ3lBQ0JFQWdBaUVHSUFFaEJRTkFJQWNnQlMwQUFFSEFBWEZCZ0FGR2FpRUhJQVZCQVdvaEJTQUdRWDlxSWdZTkFBc0xJQUlnQ0dvZ0Iyc2hDQXNDUUFKQUlBQW9BZ2hCQVVjRVFDQUFJQW9nQVNBQ0VFWU5BUXdDQ3lBQVFReHFLQUlBSWdZZ0NFMEVRQ0FBSUFvZ0FTQUNFRVlOQVF3Q0N3SkFBa0FDUUFKQUlBbEJDSEVFUUNBQUtBSUVJUWtnQUVFd05nSUVJQUF0QUNBaEN5QUFRUUU2QUNBZ0FDQUtJQUVnQWhCR0RRVkJBQ0VGSUFZZ0NHc2lBU0VDUVFFZ0FDMEFJQ0lHSUFaQkEwWWJRUU54UVFGckRnTUNBUUlEQzBFQUlRVWdCaUFJYXlJR0lRZ0NRQUpBQWtCQkFTQUFMUUFnSWdjZ0IwRURSaHRCQTNGQkFXc09Bd0VBQVFJTElBWkJBWFloQlNBR1FRRnFRUUYySVFnTUFRdEJBQ0VJSUFZaEJRc2dCVUVCYWlFRkEwQWdCVUYvYWlJRlJRMEVJQUFvQWhnZ0FDZ0NCQ0FBS0FJY0tBSVFFUUFBUlEwQUMwRUJEd3NnQVVFQmRpRUZJQUZCQVdwQkFYWWhBZ3dCQzBFQUlRSWdBU0VGQ3lBRlFRRnFJUVVDUUFOQUlBVkJmMm9pQlVVTkFTQUFLQUlZSUFBb0FnUWdBQ2dDSENnQ0VCRUFBRVVOQUF0QkFROExJQUFvQWdRaEFTQUFLQUlZSUFNZ0JDQUFLQUljS0FJTUVRRUFEUUVnQWtFQmFpRUhJQUFvQWh3aEFpQUFLQUlZSVFNRFFDQUhRWDlxSWdjRVFDQURJQUVnQWlnQ0VCRUFBRVVOQVF3REN3c2dBQ0FMT2dBZ0lBQWdDVFlDQkVFQUR3c2dBQ2dDQkNFRklBQWdDaUFCSUFJUVJnMEFJQUFvQWhnZ0F5QUVJQUFvQWh3b0Fnd1JBUUFOQUNBSVFRRnFJUWNnQUNnQ0hDRUJJQUFvQWhnaEFBTkFJQWRCZjJvaUIwVUVRRUVBRHdzZ0FDQUZJQUVvQWhBUkFBQkZEUUFMQzBFQkR3c2dBQ2dDR0NBRElBUWdBRUVjYWlnQ0FDZ0NEQkVCQUF2MEJRRUtmeU1BUVRCcklnTWtBQ0FEUVNScUlBRTJBZ0FnQTBFRE9nQW9JQU5DZ0lDQWdJQUVOd01JSUFNZ0FEWUNJQ0FEUVFBMkFoZ2dBMEVBTmdJUUFuOENRQUpBQWtBZ0FpZ0NDQ0lFQkVBZ0FpZ0NBQ0VHSUFJb0FnUWlDQ0FDUVF4cUtBSUFJZ1VnQlNBSVN4c2lCVVVOQVNBQUlBWW9BZ0FnQmlnQ0JDQUJLQUlNRVFFQURRTWdCa0VNYWlFQUlBSW9BaFFoQnlBQ0tBSVFJUW9nQlNFSkEwQWdBeUFFUVJ4cUxRQUFPZ0FvSUFNZ0JFRUVhaWtDQUVJZ2lUY0RDQ0FFUVJocUtBSUFJUUpCQUNFTFFRQWhBUUpBQWtBQ1FDQUVRUlJxS0FJQVFRRnJEZ0lBQWdFTElBSWdCMDhFUUNBQ0lBZEJ0SkRBQUJBMkFBc2dBa0VEZENBS2FpSU1LQUlFUVNCSERRRWdEQ2dDQUNnQ0FDRUNDMEVCSVFFTElBTWdBallDRkNBRElBRTJBaEFnQkVFUWFpZ0NBQ0VDQWtBQ1FBSkFJQVJCREdvb0FnQkJBV3NPQWdBQ0FRc2dBaUFIVHdSQUlBSWdCMEcwa01BQUVEWUFDeUFDUVFOMElBcHFJZ0VvQWdSQklFY05BU0FCS0FJQUtBSUFJUUlMUVFFaEN3c2dBeUFDTmdJY0lBTWdDellDR0NBRUtBSUFJZ0VnQjBrRVFDQUtJQUZCQTNScUlnRW9BZ0FnQTBFSWFpQUJLQUlFRVFBQURRVWdDVUYvYWlJSlJRMEVJQVJCSUdvaEJDQUFRWHhxSVFFZ0FDZ0NBQ0VDSUFCQkNHb2hBQ0FES0FJZ0lBRW9BZ0FnQWlBREtBSWtLQUlNRVFFQVJRMEJEQVVMQ3lBQklBZEJwSkRBQUJBMkFBc2dBaWdDQUNFR0lBSW9BZ1FpQ0NBQ1FSUnFLQUlBSWdVZ0JTQUlTeHNpQlVVTkFDQUNLQUlRSVFRZ0FDQUdLQUlBSUFZb0FnUWdBU2dDREJFQkFBMENJQVpCREdvaEFDQUZJUUlEUUNBRUtBSUFJQU5CQ0dvZ0JFRUVhaWdDQUJFQUFBMERJQUpCZjJvaUFrVU5BaUFFUVFocUlRUWdBRUY4YWlFQklBQW9BZ0FoQ1NBQVFRaHFJUUFnQXlnQ0lDQUJLQUlBSUFrZ0F5Z0NKQ2dDREJFQkFFVU5BQXNNQWd0QkFDRUZDeUFJSUFWTEJFQWdBeWdDSUNBR0lBVkJBM1JxSWdBb0FnQWdBQ2dDQkNBREtBSWtLQUlNRVFFQURRRUxRUUFNQVF0QkFRc2dBMEV3YWlRQUM0MEZBUWQvQWtBZ0FVSE0vM3RMRFFCQkVDQUJRUXRxUVhoeElBRkJDMGtiSVFJZ0FFRjhhaUlGS0FJQUlnWkJlSEVoQXdKQUFrQUNRQUpBQWtBQ1FDQUdRUU54QkVBZ0FFRjRhaUlISUFOcUlRZ2dBeUFDVHcwQlFhaXF3QUFvQWdBZ0NFWU5Ba0drcXNBQUtBSUFJQWhHRFFNZ0NFRUVhaWdDQUNJR1FRSnhEUVlnQmtGNGNTSUdJQU5xSWdNZ0FrOE5CQXdHQ3lBQ1FZQUNTU0FESUFKQkJISkpjaUFESUFKclFZR0FDRTl5RFFVTUJBc2dBeUFDYXlJQlFSQkpEUU1nQlNBQ0lBWkJBWEZ5UVFKeU5nSUFJQUlnQjJvaUJDQUJRUU55TmdJRUlBZ2dDQ2dDQkVFQmNqWUNCQ0FFSUFFUUJnd0RDMEdncXNBQUtBSUFJQU5xSWdNZ0FrME5BeUFGSUFJZ0JrRUJjWEpCQW5JMkFnQWdBaUFIYWlJQklBTWdBbXNpQkVFQmNqWUNCRUdncXNBQUlBUTJBZ0JCcUtyQUFDQUJOZ0lBREFJTFFaeXF3QUFvQWdBZ0Eyb2lBeUFDU1EwQ0FrQWdBeUFDYXlJQlFROU5CRUFnQlNBR1FRRnhJQU55UVFKeU5nSUFJQU1nQjJvaUFTQUJLQUlFUVFGeU5nSUVRUUFoQVF3QkN5QUZJQUlnQmtFQmNYSkJBbkkyQWdBZ0FpQUhhaUlFSUFGQkFYSTJBZ1FnQXlBSGFpSUNJQUUyQWdBZ0FpQUNLQUlFUVg1eE5nSUVDMEdrcXNBQUlBUTJBZ0JCbktyQUFDQUJOZ0lBREFFTElBZ2dCaEFSSUFNZ0Ftc2lBVUVRVHdSQUlBVWdBaUFGS0FJQVFRRnhja0VDY2pZQ0FDQUNJQWRxSWdRZ0FVRURjallDQkNBRElBZHFJZ0lnQWlnQ0JFRUJjallDQkNBRUlBRVFCZ3dCQ3lBRklBTWdCU2dDQUVFQmNYSkJBbkkyQWdBZ0F5QUhhaUlCSUFFb0FnUkJBWEkyQWdRTElBQWhCQXdCQ3lBQkVBQWlBa1VOQUNBQ0lBQWdBVUY4UVhnZ0JTZ0NBQ0lFUVFOeEd5QUVRWGh4YWlJRUlBUWdBVXNiRUVzZ0FCQUVEd3NnQkF2MEJBRUpmeU1BUVRCcklnUWtBQUpBQW44Z0FnUkFJQVJCS0dvaENRTkFBa0FnQUNnQ0NDMEFBRVVOQUNBQUtBSUFRY2lOd0FCQkJDQUFLQUlFS0FJTUVRRUFSUTBBUVFFTUF3c2dCRUVLTmdJb0lBUkNpb0NBZ0JBM0F5QWdCQ0FDTmdJY1FRQWhCU0FFUVFBMkFoZ2dCQ0FDTmdJVUlBUWdBVFlDRUVFQklRY2dBU0VHSUFJaUF5RUlBbjhDUUFKQUEwQWdCU0FHYWlFR0lBUWdCMnBCSjJvdEFBQWhDZ0pBQWtBQ1FDQURRUWROQkVBZ0EwVU5BU0FJSUFWcklRdEJBQ0VEQTBBZ0F5QUdhaTBBQUNBS1JnMEVJQXNnQTBFQmFpSURSdzBBQ3d3QkN5QUVRUWhxSUFvZ0JpQURFQlFnQkNnQ0NFRUJSZzBCSUFRb0Fod2hDQXNnQkNBSU5nSVlEQVFMSUFRb0Fnd2hBeUFFS0FJa0lRY2dCQ2dDR0NFRkN5QUVJQU1nQldwQkFXb2lCVFlDR0FKQUFrQWdCU0FIU1FSQUlBUW9BaFFoQXd3QkN5QUVLQUlVSWdNZ0JVa05BQ0FIUVFWUERRTWdCU0FIYXlJR0lBUW9BaEJxSWdnZ0NVWU5BU0FJSUFrZ0J4QkVSUTBCQ3lBRUtBSWNJZ2dnQlVrZ0F5QUlTWElOQXlBSUlBVnJJUU1nQkNnQ0VDRUdEQUVMQ3lBQUtBSUlRUUU2QUFBZ0JrRUJhZ3dDQ3lBSFFRUkJzSkxBQUJBM0FBc2dBQ2dDQ0VFQU9nQUFJQUlMSVFNZ0FDZ0NCQ0VHSUFBb0FnQWhCUUpBQWtBZ0EwVWdBaUFEUm5KRkJFQWdBaUFEU3dSQUlBRWdBMm9pQnl3QUFFRy9mMG9OQWdzZ0FTQUNRUUFnQTBITWpjQUFFQU1BQ3lBRklBRWdBeUFHS0FJTUVRRUFSUTBCUVFFTUJBdEJBU0FGSUFFZ0F5QUdLQUlNRVFFQURRTWFJQWNzQUFCQnYzOU1EUVFMSUFFZ0Eyb2hBU0FDSUFOcklnSU5BQXNMUVFBTElBUkJNR29rQUE4TElBRWdBaUFESUFKQjNJM0FBQkFEQUF1NkF3RUVmeU1BUVJCcklnSWtBQ0FBS0FJQUlRUUNRQUpBQWtBQ2Z3SkFBa0FnQVVHQUFVOEVRQ0FDUVFBMkFnd2dBVUdBRUVrTkFTQUNRUXhxSVFBZ0FVR0FnQVJKQkVBZ0FpQUJRVDl4UVlBQmNqb0FEaUFDSUFGQkRIWkI0QUZ5T2dBTUlBSWdBVUVHZGtFL2NVR0FBWEk2QUExQkF5RUJEQVlMSUFJZ0FVRS9jVUdBQVhJNkFBOGdBaUFCUVJKMlFmQUJjam9BRENBQ0lBRkJCblpCUDNGQmdBRnlPZ0FPSUFJZ0FVRU1ka0UvY1VHQUFYSTZBQTFCQkNFQkRBVUxJQVFvQWdnaUFDQUVRUVJxS0FJQVJ3UkFJQVFvQWdBaEJRd0VDd0pBSUFCQkFXb2lBeUFBU1EwQUlBQkJBWFFpQlNBRElBVWdBMHNiSWdOQkNDQURRUWhMR3lFRElBQUVRQ0FEUVFCSURRRWdCQ2dDQUNJRlJRMERJQVVnQUVFQklBTVFWUXdFQ3lBRFFRQk9EUUlMRUYwQUN5QUNJQUZCUDNGQmdBRnlPZ0FOSUFJZ0FVRUdka0hBQVhJNkFBd2dBa0VNYWlFQVFRSWhBUXdEQ3lBRFFRRVFXUXNpQlFSQUlBUWdCVFlDQUNBRVFRUnFJQU0yQWdBZ0JDZ0NDQ0VBREFFTElBTkJBUkJqQUFzZ0FDQUZhaUFCT2dBQUlBUWdCQ2dDQ0VFQmFqWUNDQXdCQ3lBRUlBQWdBQ0FCYWhBZkN5QUNRUkJxSkFCQkFBdTBBd0VFZnlBQVFRQTJBZ2dnQUVFVWFrRUFOZ0lBSUFGQkQzRWhCQ0FBUVF4cUlRSkJBQ0VCQTBBZ0FDZ0NCQ0FCUmdSQUlBQWdBUkE4SUFBb0FnZ2hBUXNnQUNnQ0FDQUJRUUowYWlJQklBTTZBQUlnQVVFQU93RUFJQUFnQUNnQ0NFRUJhallDQ0NBQUtBSVVJZ0VnQUNnQ0VFWUVRQ0FDSUFFUU95QUFLQUlVSVFFTElBQW9BZ3dnQVVFQmRHcEJBVHNCQUNBQUlBQW9BaFJCQVdvMkFoUWdBQ2dDQ0NFQklBTkJBV29pQlNFRElBVkIvLzhEY1NBRWRrVU5BQXNnQUNnQ0JDQUJSZ1JBSUFBZ0FSQThJQUFvQWdnaEFRc2dBQ2dDQUNBQlFRSjBhaUlCUVFBNkFBSWdBVUVBT3dFQUlBQWdBQ2dDQ0VFQmFqWUNDQ0FBS0FJVUlnRWdBQ2dDRUVZRVFDQUNJQUVRT3lBQUtBSVVJUUVMSUFBb0Fnd2dBVUVCZEdwQkFEc0JBQ0FBSUFBb0FoUkJBV28yQWhRZ0FDZ0NDQ0lCSUFBb0FnUkdCRUFnQUNBQkVEd2dBQ2dDQ0NFQkN5QUFLQUlBSUFGQkFuUnFJZ0ZCQURvQUFpQUJRUUE3QVFBZ0FDQUFLQUlJUVFGcU5nSUlJQUFvQWhRaUFTQUFLQUlRUmdSQUlBSWdBUkE3SUFBb0FoUWhBUXNnQUNnQ0RDQUJRUUYwYWtFQU93RUFJQUFnQUNnQ0ZFRUJhallDRkF2K0F3SURmd0YrSUFFb0FoaEJKeUFCUVJ4cUtBSUFLQUlRRVFBQVJRUkFRZlFBSVFOQkFpRUNBa0FDUUFKQUFrQUNRQUpBSUFBb0FnQWlBRUYzYWc0ZkJRRURBd0FEQXdNREF3TURBd01EQXdNREF3TURBd01EQXdRREF3TURCQUlMUWZJQUlRTU1CQXRCN2dBaEF3d0RDeUFBUWR3QVJnMEJDd0ovQW40Q1FDQUFFQTlGQkVBZ0FCQUhSUTBCUVFFTUF3c2dBRUVCY21kQkFuWkJCM090UW9DQWdJRFFBSVFNQVFzZ0FFRUJjbWRCQW5aQkIzT3RRb0NBZ0lEUUFJUUxJUVZCQXdzaEFpQUFJUU1NQVFzZ0FDRURDd05BSUFJaEJFSGNBQ0VBUVFFaEFnSkFBbjRDUUFKQUFrQUNRQ0FFUVFGckRnTUJCUUFDQ3dKQUFrQUNRQUpBSUFWQ0lJaW5RZjhCY1VFQmF3NEZBd0lCQUFZRkMwSDFBQ0VBSUFWQy8vLy8vNDlnZzBLQWdJQ0FNSVFNQmd0Qit3QWhBQ0FGUXYvLy8vK1BZSU5DZ0lDQWdDQ0VEQVVMUVRCQjF3QWdBeUFGcHlJRVFRSjBRUnh4ZGtFUGNTSUFRUXBKR3lBQWFpRUFJQVZDZjN4Qy8vLy8vdytESUFWQ2dJQ0FnSENEaENBRURRUWFJQVZDLy8vLy80OWdnMEtBZ0lDQUVJUU1CQXRCL1FBaEFDQUZRdi8vLy8rUFlJTU1Bd3RCQUNFQ0lBTWhBQXdEQ3lBQktBSVlRU2NnQVNnQ0hDZ0NFQkVBQUE4TElBVkMvLy8vLzQ5Z2cwS0FnSUNBd0FDRUN5RUZRUU1oQWdzZ0FTZ0NHQ0FBSUFFb0Fod29BaEFSQUFCRkRRQUxDMEVCQzZBREFRVi9Ba0FDUUVFQVFROGdBRUdrbWdSSkd5SUJJQUZCQ0dvaUFTQUJRUUowUVppZ3dBQnFLQUlBUVF0MElBQkJDM1FpQWtzYklnRWdBVUVFYWlJQklBRkJBblJCbUtEQUFHb29BZ0JCQzNRZ0Frc2JJZ0VnQVVFQ2FpSUJJQUZCQW5SQm1LREFBR29vQWdCQkMzUWdBa3NiSWdFZ0FVRUJhaUlCSUFGQkFuUkJtS0RBQUdvb0FnQkJDM1FnQWtzYklnTkJBblJCbUtEQUFHb29BZ0JCQzNRaUFTQUNSaUFCSUFKSmFpQURhaUlDUVI1TkJFQkJzUVVoQkNBQ1FSNUhCRUFnQWtFQ2RFR2NvTUFBYWlnQ0FFRVZkaUVFQzBFQUlRRWdBa0YvYWlJRElBSk5CRUFnQTBFZlR3MERJQU5CQW5SQm1LREFBR29vQWdCQi8vLy9BSEVoQVFzQ1FDQUVJQUpCQW5SQm1LREFBR29vQWdCQkZYWWlBMEVCYWtZTkFDQUFJQUZySVFJZ0EwR3hCU0FEUWJFRlN4c2hCU0FFUVg5cUlRRkJBQ0VBQTBBZ0F5QUZSZzBESUFBZ0EwR1VvY0FBYWkwQUFHb2lBQ0FDU3cwQklBRWdBMEVCYWlJRFJ3MEFDeUFCSVFNTElBTkJBWEVQQ3lBQ1FSOUIySi9BQUJBMkFBc2dCVUd4QlVIb244QUFFRFlBQ3lBRFFSOUIrSi9BQUJBMkFBdm9BZ0VGZndKQVFjMy9leUFBUVJBZ0FFRVFTeHNpQUdzZ0FVME5BQ0FBUVJBZ0FVRUxha0Y0Y1NBQlFRdEpHeUlFYWtFTWFoQUFJZ0pGRFFBZ0FrRjRhaUVCQWtBZ0FFRi9haUlESUFKeFJRUkFJQUVoQUF3QkN5QUNRWHhxSWdVb0FnQWlCa0Y0Y1NBQ0lBTnFRUUFnQUd0eFFYaHFJZ0lnQUNBQ2FpQUNJQUZyUVJCTEd5SUFJQUZySWdKcklRTWdCa0VEY1FSQUlBQWdBeUFBS0FJRVFRRnhja0VDY2pZQ0JDQUFJQU5xSWdNZ0F5Z0NCRUVCY2pZQ0JDQUZJQUlnQlNnQ0FFRUJjWEpCQW5JMkFnQWdBQ0FBS0FJRVFRRnlOZ0lFSUFFZ0FoQUdEQUVMSUFFb0FnQWhBU0FBSUFNMkFnUWdBQ0FCSUFKcU5nSUFDd0pBSUFCQkJHb29BZ0FpQVVFRGNVVU5BQ0FCUVhoeElnSWdCRUVRYWswTkFDQUFRUVJxSUFRZ0FVRUJjWEpCQW5JMkFnQWdBQ0FFYWlJQklBSWdCR3NpQkVFRGNqWUNCQ0FBSUFKcUlnSWdBaWdDQkVFQmNqWUNCQ0FCSUFRUUJnc2dBRUVJYWlFREN5QURDNFVEQVFSL0FrQUNRQ0FCUVlBQ1R3UkFJQUJCR0dvb0FnQWhCQUpBQWtBZ0FDQUFLQUlNSWdKR0JFQWdBRUVVUVJBZ0FFRVVhaUlDS0FJQUlnTWJhaWdDQUNJQkRRRkJBQ0VDREFJTElBQW9BZ2dpQVNBQ05nSU1JQUlnQVRZQ0NBd0JDeUFDSUFCQkVHb2dBeHNoQXdOQUlBTWhCU0FCSWdKQkZHb2lBeWdDQUNJQlJRUkFJQUpCRUdvaEF5QUNLQUlRSVFFTElBRU5BQXNnQlVFQU5nSUFDeUFFUlEwQ0lBQWdBRUVjYWlnQ0FFRUNkRUdjcWNBQWFpSUJLQUlBUndSQUlBUkJFRUVVSUFRb0FoQWdBRVliYWlBQ05nSUFJQUpGRFFNTUFnc2dBU0FDTmdJQUlBSU5BVUdRcDhBQVFaQ253QUFvQWdCQmZpQUFLQUljZDNFMkFnQVBDeUFBUVF4cUtBSUFJZ0lnQUVFSWFpZ0NBQ0lBUndSQUlBQWdBallDRENBQ0lBQTJBZ2dQQzBHTXA4QUFRWXlud0FBb0FnQkJmaUFCUVFOMmQzRTJBZ0FNQVFzZ0FpQUVOZ0lZSUFBb0FoQWlBUVJBSUFJZ0FUWUNFQ0FCSUFJMkFoZ0xJQUJCRkdvb0FnQWlBRVVOQUNBQ1FSUnFJQUEyQWdBZ0FDQUNOZ0lZQ3d1akF3SUVmd0orSXdCQlFHb2lBaVFBUVFFaEJBSkFJQUF0QUFRTkFDQUFMUUFGSVFVZ0FDZ0NBQ0lETFFBQVFRUnhSUVJBSUFNb0FoaEI4WTNBQUVIempjQUFJQVViUVFKQkF5QUZHeUFEUVJ4cUtBSUFLQUlNRVFFQURRRWdBQ2dDQUNJREtBSVlRYzZtd0FCQkJ5QURRUnhxS0FJQUtBSU1FUUVBRFFFZ0FDZ0NBQ0lES0FJWVFhZU13QUJCQWlBRFFSeHFLQUlBS0FJTUVRRUFEUUVnQVNBQUtBSUFRWlNnd0FBb0FnQVJBQUFoQkF3QkN5QUZSUVJBSUFNb0FoaEI3STNBQUVFRElBTkJIR29vQWdBb0Fnd1JBUUFOQVNBQUtBSUFJUU1MSUFKQkFUb0FGeUFDUVRScVFiQ053QUEyQWdBZ0FpQURLUUlZTndNSUlBSWdBa0VYYWpZQ0VDQURLUUlJSVFZZ0F5a0NFQ0VISUFJZ0F5MEFJRG9BT0NBQ0lBYzNBeWdnQWlBR053TWdJQUlnQXlrQ0FEY0RHQ0FDSUFKQkNHbzJBakFnQWtFSWFrSE9wc0FBUVFjUUN3MEFJQUpCQ0dwQnA0ekFBRUVDRUFzTkFDQUJJQUpCR0dwQmxLREFBQ2dDQUJFQUFBMEFJQUlvQWpCQjc0M0FBRUVDSUFJb0FqUW9BZ3dSQVFBaEJBc2dBRUVCT2dBRklBQWdCRG9BQkNBQ1FVQnJKQUFMNWdJQ0JuOEJmaU1BUVRCcklnUWtBQ0FFUVJCcUVDb2dCQ0FFS0FJVUlnVTJBaHdnQkNBRUtBSVFJZ1kyQWhnZ0JFRUlhaUFEUVFBUVFDQUVLUU1JSVFvZ0FFRUFOZ0lJSUFBZ0NqY0NBQUpBQWtBZ0F3UkFRUUFoQmtFQUlRVURRQ0FBSUFWQmdDQVFPaUFBSUFNZ0FDZ0NCQ0lISUFjZ0Ewc2JFRThnQmlBQ1N3MENJQUFvQWdBaENDQUFLQUlJSWdjZ0JVa05BeUFFUVNCcUlBUkJHR29pQ1NnQ0FDQUJJQVpxSUFJZ0Jtc2dCU0FJYWlBSElBVnJJQWtvQWdRb0Fnd1JDQUFnQkNnQ0pDQUZhaUVISUFRb0FpQWhDQ0FBS0FJSUlnVWdCMDhFUUNBQUtBSUFHaUFBSUFjMkFnZ2dCeUVGQ3lBRUxRQW9RUUpIQkVBZ0JpQUlhaUVHSUFVZ0Ewa05BUXNMSUFRb0FoZ2hCaUFFS0FJY0lRVUxJQVlnQlNnQ0FCRURBQ0FFS0FJY0lnQW9BZ2dhSUFRb0FoZ2hBU0FBS0FJRUJFQWdBUkFFQ3lBRVFUQnFKQUFQQ3lBR0lBSkJ5SUhBQUJBNUFBc2dCU0FIUWRpQndBQVFPUUFMMkFJQkJYOENRQUpBQWtBQ1FBSkFJQUpCQTJwQmZIRWdBbXNpQkVVTkFDQURJQVFnQkNBRFN4c2lCVVVOQUVFQUlRUWdBVUgvQVhFaEJnSkFBMEFnQWlBRWFpMEFBQ0FHUmcwQklBVWdCRUVCYWlJRVJ3MEFDeUFGSUFOQmVHb2lCRTBOQWd3REMwRUJJUWNNQXdzZ0EwRjRhaUVFUVFBaEJRc2dBVUgvQVhGQmdZS0VDR3doQmdOQUlBSWdCV29pQjBFRWFpZ0NBQ0FHY3lJSVFYOXpJQWhCLy8zN2QycHhJQWNvQWdBZ0JuTWlCMEYvY3lBSFFmLzkrM2RxY1hKQmdJR0NoSGh4UlFSQUlBVkJDR29pQlNBRVRRMEJDd3NnQlNBRFN3MENDMEVBSVFZQ2YwRUFJQU1nQlVZTkFCb2dBaUFGYWlFQ0lBTWdCV3NoQmtFQUlRUWdBVUgvQVhFaEFRSkFBMEFnQWlBRWFpMEFBQ0FCUmcwQklBWWdCRUVCYWlJRVJ3MEFDMEVBREFFTElBUWhCa0VCQ3lFSElBVWdCbW9oQkFzZ0FDQUVOZ0lFSUFBZ0J6WUNBQThMSUFVZ0EwSG9rTUFBRURrQUM3NENBZ1YvQVg0akFFRXdheUlFSkFCQkp5RUNBa0FnQUVLUXpnQlVCRUFnQUNFSERBRUxBMEFnQkVFSmFpQUNhaUlEUVh4cUlBQWdBRUtRemdDQUlnZENrTTRBZm4ybklnVkIvLzhEY1VIa0FHNGlCa0VCZEVHbWpzQUFhaThBQURzQUFDQURRWDVxSUFVZ0JrSGtBR3hyUWYvL0EzRkJBWFJCcG83QUFHb3ZBQUE3QUFBZ0FrRjhhaUVDSUFCQy84SFhMMVlnQnlFQURRQUxDeUFIcHlJRFFlTUFTZ1JBSUFKQmZtb2lBaUFFUVFscWFpQUhweUlESUFOQi8vOERjVUhrQUc0aUEwSGtBR3hyUWYvL0EzRkJBWFJCcG83QUFHb3ZBQUE3QUFBTEFrQWdBMEVLVGdSQUlBSkJmbW9pQWlBRVFRbHFhaUFEUVFGMFFhYU93QUJxTHdBQU93QUFEQUVMSUFKQmYyb2lBaUFFUVFscWFpQURRVEJxT2dBQUN5QUJRZkNMd0FCQkFDQUVRUWxxSUFKcVFTY2dBbXNRQ0NBRVFUQnFKQUFMb3dJQ0JIOEJmaU1BUVVCcUlnUWtBQUpBQWtBQ1FDQUNJQU5xSWdNZ0FrOEVRQ0FCS0FJRUlRVWdCRUVZYWtLQmdJQ0FFRGNEQUNBRUtBSWNJZ0pCZjJvaUJpQUVLQUlZYWtFQUlBSnJJZ2R4clNBRlFRRjBJZ1VnQXlBRklBTkxHeUlEUVFnZ0EwRUlTeHV0ZmlJSVFpQ0lweUFDUlhJTkFTQUNhVUVCUmdSQUlBaW5JQVpxSUFkeElRTU1Bd3NnQkVFd2FoQXdBQXNnQkVFSWFpQURRUUFRV2lBQUlBUXBBd2czQWdSQkFTRUNEQUlMUVFBaEFnc2dCRUV3YWlBQkVFMGdCRUVnYWlBRElBSWdCRUV3YWhBbFFRRWhBaUFFUVNocUtBSUFJUU1nQkNnQ0pDRUZJQVFvQWlCQkFVY0VRQ0FCSUFVZ0F4QmFRUUFoQWd3QkN5QUVRUkJxSUFVZ0F4QmFJQUFnQkNrREVEY0NCQXNnQUNBQ05nSUFJQVJCUUdza0FBdXVBZ0VJZnlNQVFUQnJJZ0VrQUVHQUlDRUNJQUZCR0dvUUx5QUJLQUljSVFRZ0FTZ0NHQ0VGSUFGQkVHb1FNaUFCS0FJVUlRWWdBU2dDRUNFSElBRkJDR3BCZ0NCQkFSQkFJQUZCZ0NBMkFpZ2dBU0FCS0FJTUlnZzJBaVFnQVNBQktBSUlJZ00yQWlBZ0NFR0JJRThFUUNBQlFTQnFRWUFnRUVVZ0FTZ0NJQ0VESUFFb0FpZ2hBZ3NnQUVFQU93QkhJQUJCQURzQk9DQUFJQU0yQWlnZ0FDQUZOZ0lRSUFCQkNEb0FSaUFBUVFBNkFBc2dBRUlBTndNQUlBQkJNR3BDQURjREFDQUFRU3hxSUFJMkFnQWdBRUVrYWtFQU5nSUFJQUJCSUdvZ0JqWUNBQ0FBUVJ4cUlBYzJBZ0FnQUVFWWFrRUFOZ0lBSUFCQkZHb2dCRFlDQUNBQVFRazZBQW9nQUVHQUFqc0JRaUFBUVlFQ093RkVJQUJCZ2dJN0FVQWdBRUgvQXpzQkNDQUJRVEJxSkFBTHh3SUNCWDhCZmlNQVFSQnJJZ01rQUNBQUxRQUxJUUlnQTBJQU53TUlJQUVvQWdBaEJRSkFBa0FnQUFKL0lBRW9BZ1FpQkVIQUFDQUNheUlHUWZnQmNVRURkaUlDU1FSQUlBUkJDVThOQWlBRFFRaHFJQVVnQkJCTEdpQUJRUUEyQWdRZ0FVR0lnOEFBTmdJQUlBUkJBM1FNQVFzZ0JrSC9BWEZCeUFCUERRSWdBMEVJYWlBRklBSVFTeG9nQVNBRUlBSnJOZ0lFSUFFZ0FpQUZhallDQUNBR1FmZ0JjUXNnQUMwQUN5SUJham9BQ3lBQUlBQXBBd0FnQXlrRENDSUhRamlHSUFkQ0tJWkNnSUNBZ0lDQXdQOEFnNFFnQjBJWWhrS0FnSUNBZ09BL2d5QUhRZ2lHUW9DQWdJRHdINE9FaENBSFFnaUlRb0NBZ1BnUGd5QUhRaGlJUW9DQS9BZURoQ0FIUWlpSVFvRCtBNE1nQjBJNGlJU0VoQ0FCUVQ5eHJZaUVOd01BSUFOQkVHb2tBQThMSUFSQkNFSFloY0FBRURjQUN5QUNRUWhCeUlYQUFCQTNBQXVxQWdFRGZ5TUFRWUFCYXlJRUpBQUNRQUpBQW44Q1FDQUJLQUlBSWdOQkVIRkZCRUFnQUNnQ0FDRUNJQU5CSUhFTkFTQUNyU0FCRUJVTUFnc2dBQ2dDQUNFQ1FRQWhBQU5BSUFBZ0JHcEIvd0JxSUFKQkQzRWlBMEV3Y2lBRFFkY0FhaUFEUVFwSkd6b0FBQ0FBUVg5cUlRQWdBa0VFZGlJQ0RRQUxJQUJCZ0FGcUlnSkJnUUZQRFFJZ0FVR2tqc0FBUVFJZ0FDQUVha0dBQVdwQkFDQUFheEFJREFFTFFRQWhBQU5BSUFBZ0JHcEIvd0JxSUFKQkQzRWlBMEV3Y2lBRFFUZHFJQU5CQ2trYk9nQUFJQUJCZjJvaEFDQUNRUVIySWdJTkFBc2dBRUdBQVdvaUFrR0JBVThOQWlBQlFhU093QUJCQWlBQUlBUnFRWUFCYWtFQUlBQnJFQWdMSUFSQmdBRnFKQUFQQ3lBQ1FZQUJRWlNPd0FBUU9RQUxJQUpCZ0FGQmxJN0FBQkE1QUF1eEFnRUVmeU1BUVVCcUlnSWtBQ0FCS0FJRUlnTkZCRUFnQVVFRWFpRURJQUVvQWdBaEJDQUNRUUEyQWlBZ0FrSUJOd01ZSUFJZ0FrRVlhallDSkNBQ1FUaHFJQVJCRUdvcEFnQTNBd0FnQWtFd2FpQUVRUWhxS1FJQU53TUFJQUlnQkNrQ0FEY0RLQ0FDUVNScVFkaUp3QUFnQWtFb2FoQUpHaUFDUVJCcUlnUWdBaWdDSURZQ0FDQUNJQUlwQXhnM0F3Z0NRQ0FCS0FJRUlnVkZEUUFnQVVFSWFpZ0NBRVVOQUNBRkVBUUxJQU1nQWlrRENEY0NBQ0FEUVFocUlBUW9BZ0EyQWdBZ0F5Z0NBQ0VEQ3lBQlFRRTJBZ1FnQVVFTWFpZ0NBQ0VFSUFGQkNHb2lBU2dDQUNFRklBRkNBRGNDQUVFTVFRUVFXU0lCUlFSQVFReEJCQkJqQUFzZ0FTQUVOZ0lJSUFFZ0JUWUNCQ0FCSUFNMkFnQWdBRUdRaThBQU5nSUVJQUFnQVRZQ0FDQUNRVUJySkFBTC9BRUJBbjhqQUVFUWF5SUNKQUFnQUNnQ0FDQUNRUUEyQWd3Q2Z3SkFBa0FnQVVHQUFVOEVRQ0FCUVlBUVNRMEJJQUpCREdvaEFDQUJRWUNBQkU4TkFpQUNJQUZCUDNGQmdBRnlPZ0FPSUFJZ0FVRU1ka0hnQVhJNkFBd2dBaUFCUVFaMlFUOXhRWUFCY2pvQURVRUREQU1MSUFJZ0FUb0FEQ0FDUVF4cUlRQkJBUXdDQ3lBQ0lBRkJQM0ZCZ0FGeU9nQU5JQUlnQVVFR2RrSEFBWEk2QUF3Z0FrRU1haUVBUVFJTUFRc2dBaUFCUVQ5eFFZQUJjam9BRHlBQ0lBRkJFblpCOEFGeU9nQU1JQUlnQVVFR2RrRS9jVUdBQVhJNkFBNGdBaUFCUVF4MlFUOXhRWUFCY2pvQURVRUVDeUVCSUFBZ0FSQUxJQUpCRUdva0FBdjVBUUVDZnlNQVFSQnJJZ0lrQUNBQ1FRQTJBZ3dDZndKQUFrQWdBVUdBQVU4RVFDQUJRWUFRU1EwQklBSkJER29oQXlBQlFZQ0FCRThOQWlBQ0lBRkJQM0ZCZ0FGeU9nQU9JQUlnQVVFTWRrSGdBWEk2QUF3Z0FpQUJRUVoyUVQ5eFFZQUJjam9BRFVFRERBTUxJQUlnQVRvQURDQUNRUXhxSVFOQkFRd0NDeUFDSUFGQlAzRkJnQUZ5T2dBTklBSWdBVUVHZGtIQUFYSTZBQXdnQWtFTWFpRURRUUlNQVFzZ0FpQUJRVDl4UVlBQmNqb0FEeUFDSUFGQkVuWkI4QUZ5T2dBTUlBSWdBVUVHZGtFL2NVR0FBWEk2QUE0Z0FpQUJRUXgyUVQ5eFFZQUJjam9BRFVFRUN5RUJJQUFnQXlBQkVBc2dBa0VRYWlRQUMvd0JBUU4vSXdCQklHc2lCQ1FBQWtBZ0FrRUJhaUlESUFKUEJFQWdBU2dDQkNJQ1FRRjBJZ1VnQXlBRklBTkxHeUlEUVFRZ0EwRUVTeHNpQTBILy8vLy9BM0VnQTBaQkFYUWhCU0FEUVFKMElRTUNRQ0FDQkVBZ0JFRVlha0VDTmdJQUlBUWdBa0VDZERZQ0ZDQUVJQUVvQWdBMkFoQU1BUXNnQkVFQU5nSVFDeUFFSUFNZ0JTQUVRUkJxRUNWQkFTRUNJQVJCQ0dvb0FnQWhBeUFFS0FJRUlRVWdCQ2dDQUVFQlJ3UkFJQUVnQlRZQ0FDQUJJQU5CQW5ZMkFnUkJBQ0VDREFJTElBQWdCVFlDQkNBQVFRaHFJQU0yQWdBTUFRc2dBQ0FETmdJRUlBQkJDR3BCQURZQ0FFRUJJUUlMSUFBZ0FqWUNBQ0FFUVNCcUpBQUw4QUVCQkg4akFFRWdheUlFSkFBQ1FDQUNRUUZxSWdNZ0FrOEVRQ0FCS0FJRUlnVkJBWFFpQWlBRElBSWdBMHNiSWdOQkJDQURRUVJMR3lJRElBTnFJZ1lnQTA5QkFYUWhBd0pBSUFVRVFDQUVRUmhxUVFJMkFnQWdCQ0FDTmdJVUlBUWdBU2dDQURZQ0VBd0JDeUFFUVFBMkFoQUxJQVFnQmlBRElBUkJFR29RSlVFQklRSWdCRUVJYWlnQ0FDRURJQVFvQWdRaEJTQUVLQUlBUVFGSEJFQWdBU0FGTmdJQUlBRWdBMEVCZGpZQ0JFRUFJUUlNQWdzZ0FDQUZOZ0lFSUFCQkNHb2dBellDQUF3QkN5QUFJQU0yQWdRZ0FFRUlha0VBTmdJQVFRRWhBZ3NnQUNBQ05nSUFJQVJCSUdva0FBdlpBUUVEZndKQUlBQkJCR29vQWdBaUJDQUFRUWhxS0FJQUlnTnJJQUlnQVdzaUJVOEVRQ0FBS0FJQUlRUU1BUXNDZndKQUFrQWdBeUFGYWlJQ0lBTkpEUUFnQkVFQmRDSURJQUlnQXlBQ1N4c2lBa0VJSUFKQkNFc2JJUUlnQkFSQUlBSkJBRWdOQVNBQUtBSUFJZ05GRFFJZ0F5QUVRUUVnQWhCVkRBTUxJQUpCQUU0TkFRc1FYUUFMSUFKQkFSQlpDeUlFQkVBZ0FDQUVOZ0lBSUFCQkJHb2dBallDQUNBQVFRaHFLQUlBSVFNTUFRc2dBa0VCRUdNQUN5QURJQVJxSUFFZ0JSQkxHaUFBUVFocUlnQWdBQ2dDQUNBRmFqWUNBQXZvQVFFRmZ5TUFRUkJySWdNa0FDQUFMUUFMSVFJZ0EwSUFOd01JSUFFb0FnQWhCUUpBQWtBZ0FBSi9JQUVvQWdRaUJFSEFBQ0FDYXlJR1FmZ0JjVUVEZGlJQ1NRUkFJQVJCQ1U4TkFpQURRUWhxSUFVZ0JCQkxHaUFCUVFBMkFnUWdBVUdJZzhBQU5nSUFJQVJCQTNRTUFRc2dCa0gvQVhGQnlBQlBEUUlnQTBFSWFpQUZJQUlRU3hvZ0FTQUVJQUpyTmdJRUlBRWdBaUFGYWpZQ0FDQUdRZmdCY1FzZ0FDMEFDeUlCYWpvQUN5QUFJQUFwQXdBZ0F5a0RDQ0FCUVQ5eHJZYUVOd01BSUFOQkVHb2tBQThMSUFSQkNFSDRoY0FBRURjQUN5QUNRUWhCNklYQUFCQTNBQXZjQVFFRWZ5TUFRVUJxSWdJa0FDQUJRUVJxSVFRZ0FTZ0NCRVVFUUNBQktBSUFJUU1nQWtFQU5nSWdJQUpDQVRjREdDQUNJQUpCR0dvMkFpUWdBa0U0YWlBRFFSQnFLUUlBTndNQUlBSkJNR29nQTBFSWFpa0NBRGNEQUNBQ0lBTXBBZ0EzQXlnZ0FrRWtha0hZaWNBQUlBSkJLR29RQ1JvZ0FrRVFhaUlESUFJb0FpQTJBZ0FnQWlBQ0tRTVlOd01JQWtBZ0FTZ0NCQ0lGUlEwQUlBRkJDR29vQWdCRkRRQWdCUkFFQ3lBRUlBSXBBd2czQWdBZ0JFRUlhaUFES0FJQU5nSUFDeUFBUVpDTHdBQTJBZ1FnQUNBRU5nSUFJQUpCUUdza0FBdVlBZ0VDZnlNQVFTQnJJZ1FrQUVFQklRVkJpS2ZBQUVHSXA4QUFLQUlBUVFGcU5nSUFBa0FDUUFKQVFkQ3F3QUFvQWdCQkFVY0VRRUhRcXNBQVFvR0FnSUFRTndNQURBRUxRZFNxd0FCQjFLckFBQ2dDQUVFQmFpSUZOZ0lBSUFWQkFrc05BUXNnQkNBRE5nSWNJQVFnQWpZQ0dDQUVRZkNKd0FBMkFoUWdCRUh3aWNBQU5nSVFRZnltd0FBb0FnQWlBa0YvVEEwQVFmeW13QUFnQWtFQmFpSUNOZ0lBUWZ5bXdBQkJoS2ZBQUNnQ0FDSURCSDlCZ0tmQUFDZ0NBQ0FFUVFocUlBQWdBU2dDRUJFQ0FDQUVJQVFwQXdnM0F4QWdCRUVRYWlBREtBSU1FUUlBUWZ5bXdBQW9BZ0FGSUFJTFFYOXFOZ0lBSUFWQkFVME5BUXNBQ3lNQVFSQnJJZ0lrQUNBQ0lBRTJBZ3dnQWlBQU5nSUlBQXZNQVFFQ2Z5QUJRUlJxS0FJQUlnVWdBMEgvL3dOeElnUkxCRUFnQVNnQ0RDQUVRUUYwYWk4QkFDRUZJQUVvQWdnaUJDQUJLQUlFUmdSQUlBRWdCQkE4SUFFb0FnZ2hCQXNnQVNnQ0FDQUVRUUowYWlJRUlBSTZBQUlnQkNBRE93RUFJQUVnQVNnQ0NFRUJhallDQ0NBQktBSVVJZ1FnQVVFUWFpZ0NBRVlFUUNBQlFReHFJQVFRT3lBQktBSVVJUVFMSUFFb0Fnd2dCRUVCZEdvZ0JVRUJhanNCQUNBQklBRW9BaFJCQVdvMkFoUWdBQ0FDT2dBQ0lBQWdBenNCQUE4TElBUWdCVUg0aHNBQUVEWUFDOFFCQVFKL0l3QkJFR3NpQWlRQUlBSWdBYTFDZ0lDQWdCQkNBQ0FCS0FJWVFjV213QUJCQ1NBQlFSeHFLQUlBS0FJTUVRRUFHNFEzQXdBZ0FpQUFOZ0lNSUFJZ0FrRU1haEFTSUFJdEFBUWhBU0FDTFFBRkJFQWdBVUgvQVhFaEFDQUNBbjlCQVNBQURRQWFJQUlvQWdBaUFFRWNhaWdDQUNnQ0RDRUJJQUFvQWhnaEF5QUFMUUFBUVFSeFJRUkFJQU5COTQzQUFFRUNJQUVSQVFBTUFRc2dBMEgyamNBQVFRRWdBUkVCQUFzaUFUb0FCQXNnQWtFUWFpUUFJQUZCL3dGeFFRQkhDNm9CQVFKL0FrQUNRQUpBSUFJRVFFRUJJUVFnQVVFQVRnMEJEQUlMSUFBZ0FUWUNCRUVCSVFRTUFRc0NRQUpBQWtBQ1FBSkFJQU1vQWdBaUJVVUVRQ0FCUlEwQkRBTUxJQU1vQWdRaUF3MEJJQUVOQWdzZ0FpRUREQU1MSUFVZ0F5QUNJQUVRVlNJRFJRMEJEQUlMSUFFZ0FoQlpJZ01OQVFzZ0FDQUJOZ0lFSUFJaEFRd0NDeUFBSUFNMkFnUkJBQ0VFREFFTFFRQWhBUXNnQUNBRU5nSUFJQUJCQ0dvZ0FUWUNBQXVmQVFFRGZ5QUFRZ0EzQWdnQ1FDQUJRUlJxS0FJQUlnUWdBa0gvL3dOeElnTkxCRUFnQVNnQ0RDQURRUUYwYWk4QkFDRURJQUFvQWdRaEJDQUFRUUEyQWdRZ0FDZ0NBQ0VGSUFCQkFUWUNBQ0FFSUFOSkRRRWdBU0FDSUFVZ0F4QXBJQUFvQWdRRVFDQUFLQUlBRUFRTElBQWdBellDRENBQUlBUTJBZ1FnQUNBRk5nSUFEd3NnQXlBRVFiaUd3QUFRTmdBTElBTWdCRUhJaHNBQUVEY0FDNGNCQVFKL0l3QkJNR3NpQkNRQUlBUkJJR29pQlNBQ05nSUlJQVVnQWpZQ0JDQUZJQUUyQWdBZ0JFRUlhaUFFUVNCcUVFNGdCRUVRYWlBRUtBSUlJZ0VnQkNnQ0RDSUNJQU1RRXlBQ0JFQWdBUkFFQ3lBRVFTaHFJQVJCR0dvb0FnQTJBZ0FnQkNBRUtRTVFOd01nSUFRZ0JFRWdhaEJPSUFBZ0JDa0RBRGNEQUNBRVFUQnFKQUFMZ2dFQkJuOGpBRUVRYXlJREpBQWdBQ0FBS0FJSUlBRVFPaUFBS0FJQUlRVWdBQ2dDQ0NFQ0lBTkJDR3BCQVNBQkVGb2dBaUFGYWlFRUlBTW9BZ3dpQmlBREtBSUlJZ2RMQkVBZ0JDQUdJQWRyRUZJZ0JTQUNJQVpxSUFkcklnSnFJUVFMSUFBZ0FRUi9JQVJCQURvQUFDQUNRUUZxQlNBQ0N6WUNDQ0FEUVJCcUpBQUxqZ0VCQTM4Z0FDZ0NDQ0lFSUFGQi8vOERjU0lGU3dSQUlBTUVRQ0FBS0FJQUlRUWdBa0YvYWlFRklBRWhBQU5BSUFRZ0FFSC8vd054UVFKMGFpSUdMd0VBSVFBZ0F5QUZhaUFHTFFBQ09nQUFJQUFnQVNBQUlBRkIvLzhEY1VrYklRQWdBMEYvYWlJRERRQUxJQUl0QUFBUEMwRUFRUUJCbUlmQUFCQTJBQXNnQlVFQmFpQUVRWWlId0FBUU53QUxhQUVDZnlNQVFkQUFheUlDSkFBakFFRXdheUlCSkFBZ0FVRUlPZ0FQSUFGQk1Hb2tBQ0FDRUJkQjBBQkJDQkJaSWdFRVFDQUJJQUpCMEFBUVN4b2dBVUVCT2dCSUlBQkJwSVBBQURZQ0JDQUFJQUUyQWdBZ0FrSFFBR29rQUE4TFFkQUFRUWdRWXdBTGdBRUNBbjhCZmlBQkxRQUxJZ1FnQVMwQUNpSURTUVJBSUFFZ0FoQVlJQUV0QUFzaEJDQUJMUUFLSVFNTElBUWdBMEgvQVhGSkJIOUJBQVVnQVNBRUlBTnJPZ0FMSUFFZ0FTa0RBQ0FEcllraUJTQUJMd0VJSWdHdFFuK0ZRb0NBZklTRE53TUFJQUVnQmFkeElRTkJBUXNoQVNBQUlBTTdBUUlnQUNBQk93RUFDNklCQVFOL0l3QkJFR3NpQVNRQUlBQW9BZ0FpQWtFVWFpZ0NBQ0VEQWtBQ2Z3SkFBa0FnQWlnQ0JBNENBQUVEQ3lBRERRSkJBQ0VDUWZDSndBQU1BUXNnQXcwQklBSW9BZ0FpQXlnQ0JDRUNJQU1vQWdBTElRTWdBU0FDTmdJRUlBRWdBellDQUNBQlFmeUt3QUFnQUNnQ0JDZ0NDQ0FBS0FJSUVDSUFDeUFCUVFBMkFnUWdBU0FDTmdJQUlBRkI2SXJBQUNBQUtBSUVLQUlJSUFBb0FnZ1FJZ0FMZ1FFQkEzOGdBU2dDQkNJRElBSlBCRUFDUUNBRFJRMEFJQUVvQWdBaEJBSkFBa0FnQWtVRVFFRUJJUU1nQkJBRURBRUxJQVFnQTBFQklBSVFWU0lEUlEwQkN5QUJJQUkyQWdRZ0FTQUROZ0lBREFFTElBQWdBallDQkNBQVFRaHFRUUUyQWdCQkFTRUZDeUFBSUFVMkFnQVBDMEdVaU1BQVFTUkJ1SWpBQUJCSUFBdDFBZ0ovQVg0Z0FTMEFDeUlFSUFFdEFBb2lBMGtFUUNBQklBSVFJQ0FCTFFBTElRUWdBUzBBQ2lFREN5QUVJQU5CL3dGeFNRUi9RUUFGSUFFZ0JDQURhem9BQ3lBQklBRXBBd0FpQlNBRHJVSS9nNGczQXdBZ0FTOEJDQ0FGcDNFaEEwRUJDeUVCSUFBZ0F6c0JBaUFBSUFFN0FRQUxNQUVCZndKQUFrQkJnSUFCUVFJUVdTSUJEUUVNQUF0QmdJQUJRUUlRWXdBTElBQWdBVFlDQUNBQVFZQWdOZ0lFQzRZQkFRRi9Jd0JCUUdvaUFTUUFJQUZCS3pZQ0RDQUJRWUNCd0FBMkFnZ2dBVUdzZ2NBQU5nSVVJQUVnQURZQ0VDQUJRU3hxUVFJMkFnQWdBVUU4YWtFaE5nSUFJQUZDQWpjQ0hDQUJRYXlNd0FBMkFoZ2dBVUVkTmdJMElBRWdBVUV3YWpZQ0tDQUJJQUZCRUdvMkFqZ2dBU0FCUVFocU5nSXdJQUZCR0dwQjhJREFBQkJSQUF0eEFRTi9Jd0JCSUdzaUFpUUFBa0FnQUNBQkVCa05BQ0FCUVJ4cUtBSUFJUU1nQVNnQ0dDQUNRUnhxUVFBMkFnQWdBa0h3aThBQU5nSVlJQUpDQVRjQ0RDQUNRZlNMd0FBMkFnZ2dBeUFDUVFocUVBa05BQ0FBUVFScUlBRVFHU0FDUVNCcUpBQVBDeUFDUVNCcUpBQkJBUXN3QVFGL0FrQUNRRUdBd0FCQkFoQlpJZ0VOQVF3QUMwR0F3QUJCQWhCakFBc2dBQ0FCTmdJQUlBQkJnQ0EyQWdRTGV3RUNmd0pBQWtBZ0FDZ0NCQ0lCQkVBZ0FDZ0NEQ0lDSUFGUERRRWdBQ2dDQUNJQklBSnFJQUV0QUFBNkFBQWdBRUVBTmdJSUlBQWdBQ2dDREVFQmFqWUNEQ0FBS0FJRVJRMENJQUFvQWdBdEFBQVBDMEVBUVFCQmlJYkFBQkEyQUFzZ0FpQUJRWmlHd0FBUU5nQUxRUUJCQUVHb2hzQUFFRFlBQzJnQkFuOGdBQ0FBTFFCR0lnRkJBV29pQWpvQUNpQUFRUUVnQVVFUGNYUkJBbW9pQVRzQlFDQUFRWDhnQWtFUGNYUkJmM003QVFnZ0FFRVlhaWdDQUNBQlFmLy9BM0VpQVU4RVFDQUFJQUUyQWhnTElBQkJKR29vQWdBZ0FVOEVRQ0FBSUFFMkFpUUxDMUFCQVg4Z0FFRVVhaWdDQUNJQlJTQUJRUUowUlhKRkJFQWdBQ2dDRUJBRUN5QUFRU0JxS0FJQUlnRkZJQUZCQVhSRmNrVUVRQ0FBS0FJY0VBUUxJQUJCTEdvb0FnQUVRQ0FBS0FJb0VBUUxDMndCQVg4akFFRXdheUlESkFBZ0F5QUJOZ0lFSUFNZ0FEWUNBQ0FEUVJ4cVFRSTJBZ0FnQTBFc2FrRWNOZ0lBSUFOQ0FqY0NEQ0FEUVlDTndBQTJBZ2dnQTBFY05nSWtJQU1nQTBFZ2FqWUNHQ0FESUFNMkFpZ2dBeUFEUVFScU5nSWdJQU5CQ0dvZ0FoQlJBQXRzQVFGL0l3QkJNR3NpQXlRQUlBTWdBVFlDQkNBRElBQTJBZ0FnQTBFY2FrRUNOZ0lBSUFOQkxHcEJIRFlDQUNBRFFnSTNBZ3dnQTBITWtjQUFOZ0lJSUFOQkhEWUNKQ0FESUFOQklHbzJBaGdnQXlBRFFRUnFOZ0lvSUFNZ0F6WUNJQ0FEUVFocUlBSVFVUUFMYkFFQmZ5TUFRVEJySWdNa0FDQURJQUUyQWdRZ0F5QUFOZ0lBSUFOQkhHcEJBallDQUNBRFFTeHFRUncyQWdBZ0EwSUNOd0lNSUFOQmdKTEFBRFlDQ0NBRFFSdzJBaVFnQXlBRFFTQnFOZ0lZSUFNZ0EwRUVhallDS0NBRElBTTJBaUFnQTBFSWFpQUNFRkVBQzJ3QkFYOGpBRUV3YXlJREpBQWdBeUFCTmdJRUlBTWdBRFlDQUNBRFFSeHFRUUkyQWdBZ0EwRXNha0VjTmdJQUlBTkNBamNDRENBRFFheVJ3QUEyQWdnZ0EwRWNOZ0lrSUFNZ0EwRWdhallDR0NBRElBTkJCR28yQWlnZ0F5QUROZ0lnSUFOQkNHb2dBaEJSQUF0Y0FRRi9Jd0JCRUdzaUF5UUFBa0FnQUNnQ0JDQUJheUFDVHdSQUlBTkJBRFlDQUF3QkN5QURJQUFnQVNBQ0VCWWdBeWdDQUVFQlJ3MEFJQU5CQ0dvb0FnQWlBQVJBSUFNb0FnUWdBQkJqQUFzUVhRQUxJQU5CRUdva0FBdGFBUUYvSXdCQkVHc2lBaVFBQWtBZ0FDZ0NCQ0FCYTBFQlR3UkFJQUpCQURZQ0FBd0JDeUFDSUFBZ0FSQWVJQUlvQWdCQkFVY05BQ0FDUVFocUtBSUFJZ0FFUUNBQ0tBSUVJQUFRWXdBTEVGMEFDeUFDUVJCcUpBQUxXZ0VCZnlNQVFSQnJJZ0lrQUFKQUlBQW9BZ1FnQVd0QkFVOEVRQ0FDUVFBMkFnQU1BUXNnQWlBQUlBRVFIU0FDS0FJQVFRRkhEUUFnQWtFSWFpZ0NBQ0lBQkVBZ0FpZ0NCQ0FBRUdNQUN4QmRBQXNnQWtFUWFpUUFDMWtCQVg4akFFRWdheUlDSkFBZ0FpQUFLQUlBTmdJRUlBSkJHR29nQVVFUWFpa0NBRGNEQUNBQ1FSQnFJQUZCQ0dvcEFnQTNBd0FnQWlBQktRSUFOd01JSUFKQkJHcEIySW5BQUNBQ1FRaHFFQWtnQWtFZ2FpUUFDMFlBQWtCQkNDQUNTUVJBQW45QkNDQUNTUVJBSUFJZ0F4QVFEQUVMSUFNUUFBc2lBZzBCUVFBUEN5QUFJQU1RQ2c4TElBSWdBQ0FESUFFZ0FTQURTeHNRU3lBQUVBUUxXUUVCZnlNQVFTQnJJZ0lrQUNBQ0lBQW9BZ0EyQWdRZ0FrRVlhaUFCUVJCcUtRSUFOd01BSUFKQkVHb2dBVUVJYWlrQ0FEY0RBQ0FDSUFFcEFnQTNBd2dnQWtFRWFrSHdqOEFBSUFKQkNHb1FDU0FDUVNCcUpBQUxXUUFDUUFKQUFrQWdBVUYvU2dSQUFrQWdBZ1JBSUFFTkFRd0VDeUFCUlEwRElBRkJBUkJaSWdJTkJBd0NDeUFCRUVjaUFrVU5BUXdEQ3hCZEFBc2dBVUVCRUdNQUMwRUJJUUlMSUFBZ0FUWUNCQ0FBSUFJMkFnQUxWZ0VCZnlNQVFTQnJJZ0lrQUNBQ0lBQTJBZ1FnQWtFWWFpQUJRUkJxS1FJQU53TUFJQUpCRUdvZ0FVRUlhaWtDQURjREFDQUNJQUVwQWdBM0F3Z2dBa0VFYWtId2o4QUFJQUpCQ0dvUUNTQUNRU0JxSkFBTFdRRURmd0pBSUFFb0Fnd2lBaUFCS0FJSUlnTlBCRUFnQVNnQ0JDSUVJQUpKRFFFZ0FTZ0NBQ0VCSUFBZ0FpQURhellDQkNBQUlBRWdBMm8yQWdBUEN5QURJQUpCMkliQUFCQTRBQXNnQWlBRVFkaUd3QUFRTndBTFZRRUJmeUFBUVJCcUlBQXRBRVlRRFNBQVFRQTZBRWNnQUVFQU93RTRJQUJCTUdwQ0FEY0RBQ0FBUVFBNkFBc2dBRUlBTndNQUlBQWdBQzBBUmtFQmFpSUJPZ0FLSUFCQmZ5QUJRUTl4ZEVGL2N6c0JDQXREQVFOL0FrQWdBa1VOQUFOQUlBQXRBQUFpQkNBQkxRQUFJZ1ZHQkVBZ0FFRUJhaUVBSUFGQkFXb2hBU0FDUVg5cUlnSU5BUXdDQ3dzZ0JDQUZheUVEQ3lBREMwVUJBWDhqQUVFUWF5SUNKQUFnQWlBQUlBRVFMUUpBSUFJb0FnQkJBVVlFUUNBQ1FRaHFLQUlBSWdCRkRRRWdBaWdDQkNBQUVHTUFDeUFDUVJCcUpBQVBDeEJkQUF0S0FBSi9JQUZCZ0lERUFFY0VRRUVCSUFBb0FoZ2dBU0FBUVJ4cUtBSUFLQUlRRVFBQURRRWFDeUFDUlFSQVFRQVBDeUFBS0FJWUlBSWdBeUFBUVJ4cUtBSUFLQUlNRVFFQUN3c21BUUYvQWtBZ0FCQUFJZ0ZGRFFBZ0FVRjhhaTBBQUVFRGNVVU5BQ0FCSUFBUVVnc2dBUXRIQVFGL0l3QkJJR3NpQXlRQUlBTkJGR3BCQURZQ0FDQURRZkNMd0FBMkFoQWdBMElCTndJRUlBTWdBVFlDSENBRElBQTJBaGdnQXlBRFFSaHFOZ0lBSUFNZ0FoQlJBQXRFQVFKL0lBRW9BZ1FoQWlBQktBSUFJUU5CQ0VFRUVGa2lBVVVFUUVFSVFRUVFZd0FMSUFFZ0FqWUNCQ0FCSUFNMkFnQWdBRUdnaThBQU5nSUVJQUFnQVRZQ0FBdGJBUU4vSXdCQkVHc2lBU1FBSUFBb0Fnd2lBa1VFUUVHQWlzQUFRU3RCeUlyQUFCQklBQXNnQUNnQ0NDSURSUVJBUVlDS3dBQkJLMEhZaXNBQUVFZ0FDeUFCSUFJMkFnZ2dBU0FBTmdJRUlBRWdBellDQUNBQkVGQUFDek1CQVg4Z0FnUkFJQUFoQXdOQUlBTWdBUzBBQURvQUFDQUJRUUZxSVFFZ0EwRUJhaUVESUFKQmYyb2lBZzBBQ3dzZ0FBc3NBQUpBSUFCQmZFMEVRQ0FBUlFSQVFRUWhBQXdDQ3lBQUlBQkJmVWxCQW5RUVdTSUFEUUVMQUFzZ0FBc3hBUUYvSUFFb0FnUWlBZ1JBSUFBZ0FqWUNCQ0FBUVFocVFRRTJBZ0FnQUNBQktBSUFOZ0lBRHdzZ0FFRUFOZ0lBQ3pFQkFYOGdBQ0FCS0FJRUlBRW9BZ2dpQWtzRWZ5QUJJQUlRUlNBQktBSUlCU0FDQ3pZQ0JDQUFJQUVvQWdBMkFnQUxLQUVCZnlBQUtBSUlJZ0lnQVU4RVFDQUFLQUlBR2lBQUlBRTJBZ2dQQ3lBQUlBRWdBbXNRS0Fzc0FRRi9Jd0JCRUdzaUFTUUFJQUZCQ0dvZ0FFRUlhaWdDQURZQ0FDQUJJQUFwQWdBM0F3QWdBUkFzQUFzMEFRRi9Jd0JCRUdzaUFpUUFJQUlnQVRZQ0RDQUNJQUEyQWdnZ0FrRzhqTUFBTmdJRUlBSkI4SXZBQURZQ0FDQUNFRW9BQ3lFQUlBRUVRQU5BSUFCQkFEb0FBQ0FBUVFGcUlRQWdBVUYvYWlJQkRRQUxDd3NnQVFGL0FrQWdBQ2dDQUNJQlJRMEFJQUJCQkdvb0FnQkZEUUFnQVJBRUN3c2dBUUYvQWtBZ0FDZ0NCQ0lCUlEwQUlBQkJDR29vQWdCRkRRQWdBUkFFQ3dzTUFDQUFJQUVnQWlBREVENExDd0FnQVFSQUlBQVFCQXNMRWdBZ0FDZ0NBQ0FCSUFFZ0Ftb1FIMEVBQ3hRQUlBQW9BZ0FnQVNBQUtBSUVLQUlNRVFBQUN4a0FBbjlCQ0NBQlNRUkFJQUVnQUJBUURBRUxJQUFRQUFzTEVBQWdBQ0FDTmdJRUlBQWdBVFlDQUFzVEFDQUFRYUNMd0FBMkFnUWdBQ0FCTmdJQUN4QUFJQUVnQUNnQ0FDQUFLQUlFRUFVTEVRQkJ6SXZBQUVFUlFlQ0x3QUFRU0FBTERnQWdBQ2dDQUJvRFFBd0FDd0FMQ3dBZ0FEVUNBQ0FCRUJVTERRQWdBQ2dDQUNBQklBSVFDd3NMQUNBQU1RQUFJQUVRRlFzTEFDQUFJd0JxSkFBakFBc1pBQ0FBSUFGQitLYkFBQ2dDQUNJQVFRNGdBQnNSQWdBQUN3MEFJQUZCeEpEQUFFRUNFQVVMQ1FBZ0FFRUFPZ0JIQ3djQUlBQXRBRWNMRFFCQzlQbWU1dTZqcXZuK0FBc05BRUwzdU83NnFzelY3dVVBQ3d3QVF1blFvdHZNb3VxN1Jnc0RBQUVMQXdBQkN3dmZKZ0VBUVlDQXdBQUwxU1l2VlhObGNuTXZabTA0TVRNdkxuSjFjM1IxY0M5MGIyOXNZMmhoYVc1ekwzTjBZV0pzWlMxNE9EWmZOalF0WVhCd2JHVXRaR0Z5ZDJsdUwyeHBZaTl5ZFhOMGJHbGlMM055WXk5eWRYTjBMMnhwWW5KaGNua3ZZMjl5WlM5emNtTXZZV3hzYjJNdmJHRjViM1YwTG5KekFBQVFBSEFBQUFBTEFRQUFPUUFBQUdOaGJHeGxaQ0JnVW1WemRXeDBPanAxYm5keVlYQW9LV0FnYjI0Z1lXNGdZRVZ5Y21BZ2RtRnNkV1VBQVFBQUFBQUFBQUFCQUFBQUFnQUFBSE55WXk5c2FXSXVjbk1BQUx3QUVBQUtBQUFBR3dBQUFBNEFBQUM4QUJBQUNnQUFBQndBQUFBU0FBQUFZWE56WlhKMGFXOXVJR1poYVd4bFpEb2diV2xrSUR3OUlITmxiR1l1YkdWdUtDa3ZWWE5sY25NdlptMDRNVE12TG5KMWMzUjFjQzkwYjI5c1kyaGhhVzV6TDNOMFlXSnNaUzE0T0RaZk5qUXRZWEJ3YkdVdFpHRnlkMmx1TDJ4cFlpOXlkWE4wYkdsaUwzTnlZeTl5ZFhOMEwyeHBZbkpoY25rdlkyOXlaUzl6Y21NdmMyeHBZMlV2Ylc5a0xuSnpDd0VRQUcwQUFBRDlCQUFBQ1FBQUFBTUFBQUJRQUFBQUNBQUFBQVFBQUFBRkFBQUFCZ0FBQUFjQUFBQUlBQUFBVUFBQUFBZ0FBQUFKQUFBQUNnQUFBQXNBQUFBTUFBQUFMMVZ6WlhKekwyWnRPREV6THk1allYSm5ieTl5WldkcGMzUnllUzl6Y21NdloybDBhSFZpTG1OdmJTMHhaV05qTmpJNU9XUmlPV1ZqT0RJekwzZGxaWHBzTFRBdU1TNDBMM055WXk5a1pXTnZaR1V1Y25NQUFNQUJFQUJXQUFBQVdnSUFBQjhBQUFEQUFSQUFWZ0FBQUcwQ0FBQWJBQUFBd0FFUUFGWUFBQUNDQWdBQUpnQUFBTUFCRUFCV0FBQUFxd0lBQUJFQUFBREFBUkFBVmdBQUFLMENBQUFSQUFBQXdBRVFBRllBQUFDNUFnQUFHUUFBQU1BQkVBQldBQUFBelFJQUFDSUFBQURBQVJBQVZnQUFBTThDQUFBYkFBQUF3QUVRQUZZQUFBRFFBZ0FBRlFBQUFNQUJFQUJXQUFBQTBRSUFBQlVBQUFEQUFSQUFWZ0FBQVBvQ0FBQU5BQUFBd0FFUUFGWUFBQUJGQXdBQUVRQUFBTUFCRUFCV0FBQUFTd01BQUJFQUFBREFBUkFBVmdBQUFJb0RBQUFSQUFBQXdBRVFBRllBQUFDUUF3QUFFUUFBQU1BQkVBQldBQUFBdkFNQUFDY0FBQURBQVJBQVZnQUFBTHdEQUFBSkFBQUF3QUVRQUZZQUFBQy9Bd0FBQ1FBQUFNQUJFQUJXQUFBQXhnTUFBQlVBQUFEQUFSQUFWZ0FBQU1rREFBQVlBQUFBd0FFUUFGWUFBQURTQXdBQUNnQUFBTUFCRUFCV0FBQUErQU1BQUFvQUFBREFBUkFBVmdBQUFBVUVBQUFWQUFBQXdBRVFBRllBQUFBTkJBQUFGZ0FBQU1BQkVBQldBQUFBR0FRQUFBa0FBQUF2VlhObGNuTXZabTA0TVRNdkxuSjFjM1IxY0M5MGIyOXNZMmhoYVc1ekwzTjBZV0pzWlMxNE9EWmZOalF0WVhCd2JHVXRaR0Z5ZDJsdUwyeHBZaTl5ZFhOMGJHbGlMM055WXk5eWRYTjBMMnhwWW5KaGNua3ZZV3hzYjJNdmMzSmpMM0poZDE5MlpXTXVjbk5VY21sbFpDQjBieUJ6YUhKcGJtc2dkRzhnWVNCc1lYSm5aWElnWTJGd1lXTnBkSG1vQXhBQWJBQUFBTVVCQUFBSkFBQUFUV0Y0YVcxMWJTQmpiMlJsSUhOcGVtVWdNVElnY21WeGRXbHlaV1FzSUdkdmRDQUFTQVFRQUNNQUFBQXZWWE5sY25NdlptMDRNVE12TG1OaGNtZHZMM0psWjJsemRISjVMM055WXk5bmFYUm9kV0l1WTI5dExURmxZMk0yTWprNVpHSTVaV000TWpNdmQyVmxlbXd0TUM0eExqUXZjM0pqTDJ4cFlpNXljd0IwQkJBQVV3QUFBRTBBQUFBRkFBQUFEd0FBQUFRQUFBQUVBQUFBRUFBQUFCRUFBQUFTQUFBQUR3QUFBQUFBQUFBQkFBQUFFd0FBQUdOaGJHeGxaQ0JnVDNCMGFXOXVPanAxYm5keVlYQW9LV0FnYjI0Z1lTQmdUbTl1WldBZ2RtRnNkV1ZzYVdKeVlYSjVMM04wWkM5emNtTXZjR0Z1YVdOcmFXNW5Mbkp6QUNzRkVBQWNBQUFBN1FFQUFCOEFBQUFyQlJBQUhBQUFBTzRCQUFBZUFBQUFGQUFBQUJBQUFBQUVBQUFBRlFBQUFCWUFBQUFQQUFBQUNBQUFBQVFBQUFBWEFBQUFHQUFBQUJrQUFBQU1BQUFBQkFBQUFCb0FBQUFQQUFBQUNBQUFBQVFBQUFBYkFBQUFiR2xpY21GeWVTOWhiR3h2WXk5emNtTXZjbUYzWDNabFl5NXljMk5oY0dGamFYUjVJRzkyWlhKbWJHOTNBQUFBc0FVUUFCd0FBQUFlQWdBQUJRQUFBR0F1TGdEeEJSQUFBZ0FBQUdOaGJHeGxaQ0JnVDNCMGFXOXVPanAxYm5keVlYQW9LV0FnYjI0Z1lTQmdUbTl1WldBZ2RtRnNkV1U2SUFBQUFQQUZFQUFBQUFBQUp3WVFBQUlBQUFBaUFBQUFBQUFBQUFFQUFBQWpBQUFBYVc1a1pYZ2diM1YwSUc5bUlHSnZkVzVrY3pvZ2RHaGxJR3hsYmlCcGN5QWdZblYwSUhSb1pTQnBibVJsZUNCcGN5QUFBRXdHRUFBZ0FBQUFiQVlRQUJJQUFBQnNhV0p5WVhKNUwyTnZjbVV2YzNKakwyWnRkQzlpZFdsc1pHVnljeTV5Y3lJQUFBQU1BQUFBQkFBQUFDUUFBQUFsQUFBQUpnQUFBQ0FnSUNDUUJoQUFJQUFBQURJQUFBQWhBQUFBa0FZUUFDQUFBQUF6QUFBQUVnQUFBQ0I3Q2l3S0xDQWdleUI5SUgxc2FXSnlZWEo1TDJOdmNtVXZjM0pqTDJadGRDOXVkVzB1Y25QNUJoQUFHd0FBQUdVQUFBQVVBQUFBTUhnd01EQXhNREl3TXpBME1EVXdOakEzTURnd09URXdNVEV4TWpFek1UUXhOVEUyTVRjeE9ERTVNakF5TVRJeU1qTXlOREkxTWpZeU56STRNamt6TURNeE16SXpNek0wTXpVek5qTTNNemd6T1RRd05ERTBNalF6TkRRME5UUTJORGMwT0RRNU5UQTFNVFV5TlRNMU5EVTFOVFkxTnpVNE5UazJNRFl4TmpJMk16WTBOalUyTmpZM05qZzJPVGN3TnpFM01qY3pOelEzTlRjMk56YzNPRGM1T0RBNE1UZ3lPRE00TkRnMU9EWTROemc0T0RrNU1Ea3hPVEk1TXprME9UVTVOamszT1RnNU9RQUFJZ0FBQUFRQUFBQUVBQUFBSndBQUFDZ0FBQUFwQUFBQWJHbGljbUZ5ZVM5amIzSmxMM055WXk5bWJYUXZiVzlrTG5KekFBZ0lFQUFiQUFBQVZRUUFBQkVBQUFBSUNCQUFHd0FBQUY4RUFBQWtBQUFBS0Nsc2FXSnlZWEo1TDJOdmNtVXZjM0pqTDNOc2FXTmxMMjFsYldOb2NpNXljd0FBUmdnUUFDQUFBQUJhQUFBQUJRQUFBSEpoYm1kbElITjBZWEowSUdsdVpHVjRJQ0J2ZFhRZ2IyWWdjbUZ1WjJVZ1ptOXlJSE5zYVdObElHOW1JR3hsYm1kMGFDQjRDQkFBRWdBQUFJb0lFQUFpQUFBQWNtRnVaMlVnWlc1a0lHbHVaR1Y0SUx3SUVBQVFBQUFBaWdnUUFDSUFBQUJ6YkdsalpTQnBibVJsZUNCemRHRnlkSE1nWVhRZ0lHSjFkQ0JsYm1SeklHRjBJQURjQ0JBQUZnQUFBUElJRUFBTkFBQUFiR2xpY21GeWVTOWpiM0psTDNOeVl5OXpkSEl2Y0dGMGRHVnliaTV5Y3dBUUNSQUFId0FBQUxBQkFBQW1BQUFBV3k0dUxsMWllWFJsSUdsdVpHVjRJQ0JwY3lCdmRYUWdiMllnWW05MWJtUnpJRzltSUdBQUFFVUpFQUFMQUFBQVVBa1FBQllBQUFEd0JSQUFBUUFBQUdKbFoybHVJRHc5SUdWdVpDQW9JRHc5SUNrZ2QyaGxiaUJ6YkdsamFXNW5JR0FBQUlBSkVBQU9BQUFBamdrUUFBUUFBQUNTQ1JBQUVBQUFBUEFGRUFBQkFBQUFJR2x6SUc1dmRDQmhJR05vWVhJZ1ltOTFibVJoY25rN0lHbDBJR2x6SUdsdWMybGtaU0FnS0dKNWRHVnpJQ2tnYjJZZ1lFVUpFQUFMQUFBQXhBa1FBQ1lBQUFEcUNSQUFDQUFBQVBJSkVBQUdBQUFBOEFVUUFBRUFBQUJzYVdKeVlYSjVMMk52Y21VdmMzSmpMM1Z1YVdOdlpHVXZjSEpwYm5SaFlteGxMbkp6QUFBQUlBb1FBQ1VBQUFBS0FBQUFIQUFBQUNBS0VBQWxBQUFBR2dBQUFEWUFBQUFBQVFNRkJRWUdBd2NHQ0FnSkVRb2NDeGtNRkEwUURnMFBCQkFERWhJVENSWUJGd1VZQWhrREdnY2NBaDBCSHhZZ0F5c0RMQUl0Q3k0Qk1BTXhBaklCcHdLcEFxb0Vxd2o2QXZzRi9RVCtBLzhKclhoNWk0MmlNRmRZaTR5UUhCM2REZzlMVFB2OExpOC9YRjFmdGVLRWpZNlJrcW14dXJ2RnhzbkszdVRsL3dBRUVSSXBNVFEzT2pzOVNVcGRoSTZTcWJHMHVydkd5czdQNU9VQUJBME9FUklwTVRRNk8wVkdTVXBlWkdXRWtadWR5YzdQRFJFcFJVbFhaR1dOa2FtMHVydkZ5ZC9rNWZBTkVVVkpaR1dBaExLOHZyL1YxL0R4ZzRXTHBLYSt2OFhIenMvYTIwaVl2YzNHenM5SlRrOVhXVjVmaVk2UHNiYTN2OEhHeDljUkZoZGJYUGIzL3YrQURXMXgzdDhPRHg5dWJ4d2RYMzErcnErN3ZQb1dGeDRmUmtkT1QxaGFYRjUrZjdYRjFOWGM4UEgxY25PUGRIV1dMMThtTGkrbnI3ZS94OC9YMzVwQWw1Z3dqeC9Bd2M3L1RrOWFXd2NJRHhBbkwrN3ZibTgzUFQ5Q1JaQ1IvdjlUWjNYSXlkRFIyTm5uL3Y4QUlGOGlndDhFZ2tRSUd3UUdFWUdzRG9Dck5TZ0xnT0FER1FnQkJDOEVOQVFIQXdFSEJnY1JDbEFQRWdkVkJ3TUVIQW9KQXdnREJ3TUNBd01EREFRRkF3c0dBUTRWQlRvREVRY0dCUkFIVndjQ0J4VU5VQVJEQXkwREFRUVJCZzhNT2dRZEpWOGdiUVJxSllESUJZS3dBeG9HZ3YwRFdRY1ZDeGNKRkF3VURHb0dDZ1lhQmxrSEt3VkdDaXdFREFRQkF6RUxMQVFhQmdzRGdLd0dDZ1loUDB3RUxRTjBDRHdERHdNOEJ6Z0lLd1dDL3hFWUNDOFJMUU1nRUNFUGdJd0VncGNaQ3hXSWxBVXZCVHNIQWc0WUNZQ3pMWFFNZ05ZYURBV0Evd1dBM3d6dURRT0VqUU0zQ1lGY0ZJQzRDSURMS2pnRENnWTRDRVlJREFaMEN4NERXZ1JaQ1lDREdCd0tGZ2xNQklDS0JxdWtEQmNFTWFFRWdkb21Cd3dGQllDbEVZRnRFSGdvS2daTUJJQ05CSUMrQXhzRER3MEFCZ0VCQXdFRUFnZ0lDUUlLQlFzQ0RnUVFBUkVDRWdVVEVSUUJGUUlYQWhrTkhBVWRDQ1FCYWdOckFyd0MwUUxVRE5VSjFnTFhBdG9CNEFYaEF1Z0M3aUR3QlBnQytRTDZBdnNCRENjN1BrNVBqNTZlbndZSENUWTlQbGJ6ME5FRUZCZzJOMVpYZjZxdXI3MDE0QktIaVk2ZUJBME9FUklwTVRRNlJVWkpTazVQWkdWY3RyY2JIQWNJQ2dzVUZ6WTVPcWlwMk5rSk41Q1JxQWNLT3o1bWFZK1NiMS91NzFwaW1wc25LRldkb0tHanBLZW9yYnE4eEFZTERCVWRPajlGVWFhbnpNMmdCeGthSWlVK1A4WEdCQ0FqSlNZb016ZzZTRXBNVUZOVlZsaGFYRjVnWTJWbWEzTjRmWCtLcEtxdnNNRFFycTk1ekc1dmsxNGlld1VEQkMwRFpnTUJMeTZBZ2gwRE1ROGNCQ1FKSGdVckJVUUVEaXFBcWdZa0JDUUVLQWcwQ3dHQWtJRTNDUllLQ0lDWU9RTmpDQWt3RmdVaEF4c0ZBVUE0QkVzRkx3UUtCd2tIUUNBbkJBd0pOZ002QlJvSEJBd0hVRWszTXcwekJ5NElDb0VtVWs0b0NDcFdIQlFYQ1U0RUhnOUREaGtIQ2daSUNDY0pkUXMvUVNvR093VUtCbEVHQVFVUUF3V0FpMkllU0FnS2dLWmVJa1VMQ2dZTkV6a0hDallzQkJDQXdEeGtVd3hJQ1FwR1JSdElDRk1kT1lFSFJnb2RBMGRKTndNT0NBb0dPUWNLZ1RZWmdMY0JEeklOZzV0bWRRdUF4SXE4aEMrUDBZSkhvYm1DT1FjcUJBSmdKZ3BHQ2lnRkU0S3dXMlZMQkRrSEVVQUZDd0lPbC9nSWhOWXFDYUwzZ1I4eEF4RUVDSUdNaVFSckJRMERDUWNRazJDQTlncHpDRzRYUm9DYUZBeFhDUm1BaDRGSEE0VkNEeFdGVUN1QTFTMERHZ1FDZ1hBNkJRR0ZBSURYS1V3RUNnUUNneEZFVEQyQXdqd0dBUVJWQlJzMEFvRU9MQVJrREZZS2dLNDRIUTBzQkFrSEFnNEdnSnFEMkFnTkF3MERkQXhaQnd3VURBUTRDQW9HS0FnaVRvRlVEQlVEQXdVSENSa0hCd2tERFFjcGdNc2xDb1FHYkdsaWNtRnllUzlqYjNKbEwzTnlZeTkxYm1samIyUmxMM1Z1YVdOdlpHVmZaR0YwWVM1eWN3Q3ZEeEFBS0FBQUFFc0FBQUFvQUFBQXJ3OFFBQ2dBQUFCWEFBQUFGZ0FBQUs4UEVBQW9BQUFBVWdBQUFENEFBQUFpQUFBQUJBQUFBQVFBQUFBcUFBQUFBQU1BQUlNRUlBQ1JCV0FBWFJPZ0FCSVhvQjRNSU9BZTd5d2dLeW93b0N0dnBtQXNBcWpnTEI3NzRDMEEvcUExbnYvZ05mMEJZVFlCQ3FFMkpBMWhONnNPNFRndkdDRTVNQnhoUnZNZW9VcndhbUZPVDIraFRwMjhJVTlsMGVGUEFOb2hVQURnNFZFdzRXRlQ3T0toVk5EbzRWUWdBQzVWOEFHL1ZRQndBQWNBTFFFQkFRSUJBZ0VCU0Fzd0ZSQUJaUWNDQmdJQ0FRUWpBUjRiV3dzNkNRa0JHQVFCQ1FFREFRVXJBM2NQQVNBM0FRRUJCQWdFQVFNSENnSWRBVG9CQVFFQ0JBZ0JDUUVLQWhvQkFnSTVBUVFDQkFJQ0F3TUJIZ0lEQVFzQ09RRUVCUUVDQkFFVUFoWUdBUUU2QVFFQ0FRUUlBUWNEQ2dJZUFUc0JBUUVNQVFrQktBRURBVGtEQlFNQkJBY0NDd0lkQVRvQkFnRUNBUU1CQlFJSEFnc0NIQUk1QWdFQkFnUUlBUWtCQ2dJZEFVZ0JCQUVDQXdFQkNBRlJBUUlIREFoaUFRSUpDd1pLQWhzQkFRRUJBVGNPQVFVQkFnVUxBU1FKQVdZRUFRWUJBZ0lDR1FJRUF4QUVEUUVDQWdZQkR3RUFBd0FESFFNZEFoNENRQUlCQndnQkFnc0pBUzBEZHdJaUFYWURCQUlKQVFZRDJ3SUNBVG9CQVFjQkFRRUJBZ2dHQ2dJQk1CRS9CREFIQVFFRkFTZ0pEQUlnQkFJQ0FRTTRBUUVDQXdFQkF6b0lBZ0tZQXdFTkFRY0VBUVlCQXdMR09nRUZBQUhESVFBRGpRRmdJQUFHYVFJQUJBRUtJQUpRQWdBQkF3RUVBUmtDQlFHWEFob1NEUUVtQ0JrTExnTXdBUUlFQWdJbkFVTUdBZ0lDQWd3QkNBRXZBVE1CQVFNQ0FnVUNBUUVxQWdnQjdnRUNBUVFCQUFFQUVCQVFBQUlBQWVJQmxRVUFBd0VDQlFRb0F3UUJwUUlBQkFBQ21RdXdBVFlQT0FNeEJBSUNSUU1rQlFFSVBnRU1BalFKQ2dRQ0FWOERBZ0VCQWdZQm9BRURDQlVDT1FJQkFRRUJGZ0VPQndNRnd3Z0NBd0VCRndGUkFRSUdBUUVDQVFFQ0FRTHJBUUlFQmdJQkFoc0NWUWdDQVFFQ2FnRUJBUUlHQVFGbEF3SUVBUVVBQ1FFQzlRRUtBZ0VCQkFHUUJBSUNCQUVnQ2lnR0FnUUlBUWtHQWdNdURRRUNBQWNCQmdFQlVoWUNCd0VDQVFKNkJnTUJBUUlCQndFQlNBSURBUUVCQUFJQUJUc0hBQUUvQkZFQkFBSUFBUUVEQkFVSUNBSUhIZ1NVQXdBM0JESUlBUTRCRmdVQkR3QUhBUkVDQndFQ0FRVUFCd0FFQUFkdEJ3QmdnUEFBVEdGNWIzVjBSWEp5Y0hKcGRtRjBaUUI3Q1hCeWIyUjFZMlZ5Y3dJSWJHRnVaM1ZoWjJVQkJGSjFjM1FBREhCeWIyTmxjM05sWkMxaWVRTUZjblZ6ZEdNZE1TNDBPUzR3SUNobE1UZzROR0U0WlRNZ01qQXlNQzB4TWkweU9Ta0dkMkZzY25WekJqQXVNVGd1TUF4M1lYTnRMV0pwYm1SblpXNFNNQzR5TGpjd0lDaGlOak0xTldNeU56QXAiKTtsZXQgbzthc3luYyBmdW5jdGlvbiBOKEEsSSl7b3x8KG89YXdhaXQoYXN5bmMoKT0+KGF3YWl0IEUoRyksRCkpKCkpO2NvbnN0IGc9by5kZWNvbXByZXNzKEEsSSk7aWYoMD09PWcubGVuZ3RoKXRocm93IEVycm9yKCJGYWlsZWQgdG8gZGVjb2RlIHdpdGggTFpXIGRlY29kZXIuIik7cmV0dXJuIGd9CgogIGNsYXNzIExaV0RlY29kZXIgZXh0ZW5kcyBCYXNlRGVjb2RlciB7CiAgICBjb25zdHJ1Y3RvcihmaWxlRGlyZWN0b3J5KSB7CiAgICAgIHN1cGVyKCk7CiAgICAgIGNvbnN0IHdpZHRoID0gZmlsZURpcmVjdG9yeS5UaWxlV2lkdGggfHwgZmlsZURpcmVjdG9yeS5JbWFnZVdpZHRoOwogICAgICBjb25zdCBoZWlnaHQgPSBmaWxlRGlyZWN0b3J5LlRpbGVMZW5ndGggfHwgZmlsZURpcmVjdG9yeS5JbWFnZUxlbmd0aDsKICAgICAgY29uc3QgbmJ5dGVzID0gZmlsZURpcmVjdG9yeS5CaXRzUGVyU2FtcGxlWzBdIC8gODsKICAgICAgdGhpcy5tYXhVbmNvbXByZXNzZWRTaXplID0gd2lkdGggKiBoZWlnaHQgKiBuYnl0ZXM7CiAgICB9CgogICAgYXN5bmMgZGVjb2RlQmxvY2soYnVmZmVyKSB7CiAgICAgIGNvbnN0IGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoYnVmZmVyKTsKICAgICAgY29uc3QgZGVjb2RlZCA9IGF3YWl0IE4oYnl0ZXMsIHRoaXMubWF4VW5jb21wcmVzc2VkU2l6ZSk7CiAgICAgIHJldHVybiBkZWNvZGVkLmJ1ZmZlcjsKICAgIH0KICB9CgogIC8qIC0qLSB0YWItd2lkdGg6IDI7IGluZGVudC10YWJzLW1vZGU6IG5pbDsgYy1iYXNpYy1vZmZzZXQ6IDIgLSotIC8KICAvKiB2aW06IHNldCBzaGlmdHdpZHRoPTIgdGFic3RvcD0yIGF1dG9pbmRlbnQgY2luZGVudCBleHBhbmR0YWI6ICovCiAgLyoKICAgICBDb3B5cmlnaHQgMjAxMSBub3RtYXN0ZXJ5ZXQKICAgICBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICAgICB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAgICAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAgICAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogICAgIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICAgICBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogICAgIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogICAgIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICAgICBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICAqLwoKICAvLyAtIFRoZSBKUEVHIHNwZWNpZmljYXRpb24gY2FuIGJlIGZvdW5kIGluIHRoZSBJVFUgQ0NJVFQgUmVjb21tZW5kYXRpb24gVC44MQogIC8vICAgKHd3dy53My5vcmcvR3JhcGhpY3MvSlBFRy9pdHUtdDgxLnBkZikKICAvLyAtIFRoZSBKRklGIHNwZWNpZmljYXRpb24gY2FuIGJlIGZvdW5kIGluIHRoZSBKUEVHIEZpbGUgSW50ZXJjaGFuZ2UgRm9ybWF0CiAgLy8gICAod3d3LnczLm9yZy9HcmFwaGljcy9KUEVHL2pmaWYzLnBkZikKICAvLyAtIFRoZSBBZG9iZSBBcHBsaWNhdGlvbi1TcGVjaWZpYyBKUEVHIG1hcmtlcnMgaW4gdGhlIFN1cHBvcnRpbmcgdGhlIERDVCBGaWx0ZXJzCiAgLy8gICBpbiBQb3N0U2NyaXB0IExldmVsIDIsIFRlY2huaWNhbCBOb3RlICM1MTE2CiAgLy8gICAocGFydG5lcnMuYWRvYmUuY29tL3B1YmxpYy9kZXZlbG9wZXIvZW4vcHMvc2RrLzUxMTYuRENUX0ZpbHRlci5wZGYpCgoKICBjb25zdCBkY3RaaWdaYWcgPSBuZXcgSW50MzJBcnJheShbCiAgICAwLAogICAgMSwgOCwKICAgIDE2LCA5LCAyLAogICAgMywgMTAsIDE3LCAyNCwKICAgIDMyLCAyNSwgMTgsIDExLCA0LAogICAgNSwgMTIsIDE5LCAyNiwgMzMsIDQwLAogICAgNDgsIDQxLCAzNCwgMjcsIDIwLCAxMywgNiwKICAgIDcsIDE0LCAyMSwgMjgsIDM1LCA0MiwgNDksIDU2LAogICAgNTcsIDUwLCA0MywgMzYsIDI5LCAyMiwgMTUsCiAgICAyMywgMzAsIDM3LCA0NCwgNTEsIDU4LAogICAgNTksIDUyLCA0NSwgMzgsIDMxLAogICAgMzksIDQ2LCA1MywgNjAsCiAgICA2MSwgNTQsIDQ3LAogICAgNTUsIDYyLAogICAgNjMsCiAgXSk7CgogIGNvbnN0IGRjdENvczEgPSA0MDE3OyAvLyBjb3MocGkvMTYpCiAgY29uc3QgZGN0U2luMSA9IDc5OTsgLy8gc2luKHBpLzE2KQogIGNvbnN0IGRjdENvczMgPSAzNDA2OyAvLyBjb3MoMypwaS8xNikKICBjb25zdCBkY3RTaW4zID0gMjI3NjsgLy8gc2luKDMqcGkvMTYpCiAgY29uc3QgZGN0Q29zNiA9IDE1Njc7IC8vIGNvcyg2KnBpLzE2KQogIGNvbnN0IGRjdFNpbjYgPSAzNzg0OyAvLyBzaW4oNipwaS8xNikKICBjb25zdCBkY3RTcXJ0MiA9IDU3OTM7IC8vIHNxcnQoMikKICBjb25zdCBkY3RTcXJ0MWQyID0gMjg5NjsvLyBzcXJ0KDIpIC8gMgoKICBmdW5jdGlvbiBidWlsZEh1ZmZtYW5UYWJsZShjb2RlTGVuZ3RocywgdmFsdWVzKSB7CiAgICBsZXQgayA9IDA7CiAgICBjb25zdCBjb2RlID0gW107CiAgICBsZXQgbGVuZ3RoID0gMTY7CiAgICB3aGlsZSAobGVuZ3RoID4gMCAmJiAhY29kZUxlbmd0aHNbbGVuZ3RoIC0gMV0pIHsKICAgICAgLS1sZW5ndGg7CiAgICB9CiAgICBjb2RlLnB1c2goeyBjaGlsZHJlbjogW10sIGluZGV4OiAwIH0pOwoKICAgIGxldCBwID0gY29kZVswXTsKICAgIGxldCBxOwogICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgewogICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGNvZGVMZW5ndGhzW2ldOyBqKyspIHsKICAgICAgICBwID0gY29kZS5wb3AoKTsKICAgICAgICBwLmNoaWxkcmVuW3AuaW5kZXhdID0gdmFsdWVzW2tdOwogICAgICAgIHdoaWxlIChwLmluZGV4ID4gMCkgewogICAgICAgICAgcCA9IGNvZGUucG9wKCk7CiAgICAgICAgfQogICAgICAgIHAuaW5kZXgrKzsKICAgICAgICBjb2RlLnB1c2gocCk7CiAgICAgICAgd2hpbGUgKGNvZGUubGVuZ3RoIDw9IGkpIHsKICAgICAgICAgIGNvZGUucHVzaChxID0geyBjaGlsZHJlbjogW10sIGluZGV4OiAwIH0pOwogICAgICAgICAgcC5jaGlsZHJlbltwLmluZGV4XSA9IHEuY2hpbGRyZW47CiAgICAgICAgICBwID0gcTsKICAgICAgICB9CiAgICAgICAgaysrOwogICAgICB9CiAgICAgIGlmIChpICsgMSA8IGxlbmd0aCkgewogICAgICAgIC8vIHAgaGVyZSBwb2ludHMgdG8gbGFzdCBjb2RlCiAgICAgICAgY29kZS5wdXNoKHEgPSB7IGNoaWxkcmVuOiBbXSwgaW5kZXg6IDAgfSk7CiAgICAgICAgcC5jaGlsZHJlbltwLmluZGV4XSA9IHEuY2hpbGRyZW47CiAgICAgICAgcCA9IHE7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBjb2RlWzBdLmNoaWxkcmVuOwogIH0KCiAgZnVuY3Rpb24gZGVjb2RlU2NhbihkYXRhLCBpbml0aWFsT2Zmc2V0LAogICAgZnJhbWUsIGNvbXBvbmVudHMsIHJlc2V0SW50ZXJ2YWwsCiAgICBzcGVjdHJhbFN0YXJ0LCBzcGVjdHJhbEVuZCwKICAgIHN1Y2Nlc3NpdmVQcmV2LCBzdWNjZXNzaXZlKSB7CiAgICBjb25zdCB7IG1jdXNQZXJMaW5lLCBwcm9ncmVzc2l2ZSB9ID0gZnJhbWU7CgogICAgY29uc3Qgc3RhcnRPZmZzZXQgPSBpbml0aWFsT2Zmc2V0OwogICAgbGV0IG9mZnNldCA9IGluaXRpYWxPZmZzZXQ7CiAgICBsZXQgYml0c0RhdGEgPSAwOwogICAgbGV0IGJpdHNDb3VudCA9IDA7CiAgICBmdW5jdGlvbiByZWFkQml0KCkgewogICAgICBpZiAoYml0c0NvdW50ID4gMCkgewogICAgICAgIGJpdHNDb3VudC0tOwogICAgICAgIHJldHVybiAoYml0c0RhdGEgPj4gYml0c0NvdW50KSAmIDE7CiAgICAgIH0KICAgICAgYml0c0RhdGEgPSBkYXRhW29mZnNldCsrXTsKICAgICAgaWYgKGJpdHNEYXRhID09PSAweEZGKSB7CiAgICAgICAgY29uc3QgbmV4dEJ5dGUgPSBkYXRhW29mZnNldCsrXTsKICAgICAgICBpZiAobmV4dEJ5dGUpIHsKICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgdW5leHBlY3RlZCBtYXJrZXI6ICR7KChiaXRzRGF0YSA8PCA4KSB8IG5leHRCeXRlKS50b1N0cmluZygxNil9YCk7CiAgICAgICAgfQogICAgICAgIC8vIHVuc3R1ZmYgMAogICAgICB9CiAgICAgIGJpdHNDb3VudCA9IDc7CiAgICAgIHJldHVybiBiaXRzRGF0YSA+Pj4gNzsKICAgIH0KICAgIGZ1bmN0aW9uIGRlY29kZUh1ZmZtYW4odHJlZSkgewogICAgICBsZXQgbm9kZSA9IHRyZWU7CiAgICAgIGxldCBiaXQ7CiAgICAgIHdoaWxlICgoYml0ID0gcmVhZEJpdCgpKSAhPT0gbnVsbCkgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbmQtYXNzaWduCiAgICAgICAgbm9kZSA9IG5vZGVbYml0XTsKICAgICAgICBpZiAodHlwZW9mIG5vZGUgPT09ICdudW1iZXInKSB7CiAgICAgICAgICByZXR1cm4gbm9kZTsKICAgICAgICB9CiAgICAgICAgaWYgKHR5cGVvZiBub2RlICE9PSAnb2JqZWN0JykgewogICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdpbnZhbGlkIGh1ZmZtYW4gc2VxdWVuY2UnKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIG51bGw7CiAgICB9CiAgICBmdW5jdGlvbiByZWNlaXZlKGluaXRpYWxMZW5ndGgpIHsKICAgICAgbGV0IGxlbmd0aCA9IGluaXRpYWxMZW5ndGg7CiAgICAgIGxldCBuID0gMDsKICAgICAgd2hpbGUgKGxlbmd0aCA+IDApIHsKICAgICAgICBjb25zdCBiaXQgPSByZWFkQml0KCk7CiAgICAgICAgaWYgKGJpdCA9PT0gbnVsbCkgewogICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDsKICAgICAgICB9CiAgICAgICAgbiA9IChuIDw8IDEpIHwgYml0OwogICAgICAgIC0tbGVuZ3RoOwogICAgICB9CiAgICAgIHJldHVybiBuOwogICAgfQogICAgZnVuY3Rpb24gcmVjZWl2ZUFuZEV4dGVuZChsZW5ndGgpIHsKICAgICAgY29uc3QgbiA9IHJlY2VpdmUobGVuZ3RoKTsKICAgICAgaWYgKG4gPj0gMSA8PCAobGVuZ3RoIC0gMSkpIHsKICAgICAgICByZXR1cm4gbjsKICAgICAgfQogICAgICByZXR1cm4gbiArICgtMSA8PCBsZW5ndGgpICsgMTsKICAgIH0KICAgIGZ1bmN0aW9uIGRlY29kZUJhc2VsaW5lKGNvbXBvbmVudCwgenopIHsKICAgICAgY29uc3QgdCA9IGRlY29kZUh1ZmZtYW4oY29tcG9uZW50Lmh1ZmZtYW5UYWJsZURDKTsKICAgICAgY29uc3QgZGlmZiA9IHQgPT09IDAgPyAwIDogcmVjZWl2ZUFuZEV4dGVuZCh0KTsKICAgICAgY29tcG9uZW50LnByZWQgKz0gZGlmZjsKICAgICAgenpbMF0gPSBjb21wb25lbnQucHJlZDsKICAgICAgbGV0IGsgPSAxOwogICAgICB3aGlsZSAoayA8IDY0KSB7CiAgICAgICAgY29uc3QgcnMgPSBkZWNvZGVIdWZmbWFuKGNvbXBvbmVudC5odWZmbWFuVGFibGVBQyk7CiAgICAgICAgY29uc3QgcyA9IHJzICYgMTU7CiAgICAgICAgY29uc3QgciA9IHJzID4+IDQ7CiAgICAgICAgaWYgKHMgPT09IDApIHsKICAgICAgICAgIGlmIChyIDwgMTUpIHsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgICBrICs9IDE2OwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBrICs9IHI7CiAgICAgICAgICBjb25zdCB6ID0gZGN0WmlnWmFnW2tdOwogICAgICAgICAgenpbel0gPSByZWNlaXZlQW5kRXh0ZW5kKHMpOwogICAgICAgICAgaysrOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgZnVuY3Rpb24gZGVjb2RlRENGaXJzdChjb21wb25lbnQsIHp6KSB7CiAgICAgIGNvbnN0IHQgPSBkZWNvZGVIdWZmbWFuKGNvbXBvbmVudC5odWZmbWFuVGFibGVEQyk7CiAgICAgIGNvbnN0IGRpZmYgPSB0ID09PSAwID8gMCA6IChyZWNlaXZlQW5kRXh0ZW5kKHQpIDw8IHN1Y2Nlc3NpdmUpOwogICAgICBjb21wb25lbnQucHJlZCArPSBkaWZmOwogICAgICB6elswXSA9IGNvbXBvbmVudC5wcmVkOwogICAgfQogICAgZnVuY3Rpb24gZGVjb2RlRENTdWNjZXNzaXZlKGNvbXBvbmVudCwgenopIHsKICAgICAgenpbMF0gfD0gcmVhZEJpdCgpIDw8IHN1Y2Nlc3NpdmU7CiAgICB9CiAgICBsZXQgZW9icnVuID0gMDsKICAgIGZ1bmN0aW9uIGRlY29kZUFDRmlyc3QoY29tcG9uZW50LCB6eikgewogICAgICBpZiAoZW9icnVuID4gMCkgewogICAgICAgIGVvYnJ1bi0tOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBsZXQgayA9IHNwZWN0cmFsU3RhcnQ7CiAgICAgIGNvbnN0IGUgPSBzcGVjdHJhbEVuZDsKICAgICAgd2hpbGUgKGsgPD0gZSkgewogICAgICAgIGNvbnN0IHJzID0gZGVjb2RlSHVmZm1hbihjb21wb25lbnQuaHVmZm1hblRhYmxlQUMpOwogICAgICAgIGNvbnN0IHMgPSBycyAmIDE1OwogICAgICAgIGNvbnN0IHIgPSBycyA+PiA0OwogICAgICAgIGlmIChzID09PSAwKSB7CiAgICAgICAgICBpZiAociA8IDE1KSB7CiAgICAgICAgICAgIGVvYnJ1biA9IHJlY2VpdmUocikgKyAoMSA8PCByKSAtIDE7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgICAgayArPSAxNjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgayArPSByOwogICAgICAgICAgY29uc3QgeiA9IGRjdFppZ1phZ1trXTsKICAgICAgICAgIHp6W3pdID0gcmVjZWl2ZUFuZEV4dGVuZChzKSAqICgxIDw8IHN1Y2Nlc3NpdmUpOwogICAgICAgICAgaysrOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgbGV0IHN1Y2Nlc3NpdmVBQ1N0YXRlID0gMDsKICAgIGxldCBzdWNjZXNzaXZlQUNOZXh0VmFsdWU7CiAgICBmdW5jdGlvbiBkZWNvZGVBQ1N1Y2Nlc3NpdmUoY29tcG9uZW50LCB6eikgewogICAgICBsZXQgayA9IHNwZWN0cmFsU3RhcnQ7CiAgICAgIGNvbnN0IGUgPSBzcGVjdHJhbEVuZDsKICAgICAgbGV0IHIgPSAwOwogICAgICB3aGlsZSAoayA8PSBlKSB7CiAgICAgICAgY29uc3QgeiA9IGRjdFppZ1phZ1trXTsKICAgICAgICBjb25zdCBkaXJlY3Rpb24gPSB6elt6XSA8IDAgPyAtMSA6IDE7CiAgICAgICAgc3dpdGNoIChzdWNjZXNzaXZlQUNTdGF0ZSkgewogICAgICAgICAgY2FzZSAwOiB7IC8vIGluaXRpYWwgc3RhdGUKICAgICAgICAgICAgY29uc3QgcnMgPSBkZWNvZGVIdWZmbWFuKGNvbXBvbmVudC5odWZmbWFuVGFibGVBQyk7CiAgICAgICAgICAgIGNvbnN0IHMgPSBycyAmIDE1OwogICAgICAgICAgICByID0gcnMgPj4gNDsKICAgICAgICAgICAgaWYgKHMgPT09IDApIHsKICAgICAgICAgICAgICBpZiAociA8IDE1KSB7CiAgICAgICAgICAgICAgICBlb2JydW4gPSByZWNlaXZlKHIpICsgKDEgPDwgcik7CiAgICAgICAgICAgICAgICBzdWNjZXNzaXZlQUNTdGF0ZSA9IDQ7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHIgPSAxNjsKICAgICAgICAgICAgICAgIHN1Y2Nlc3NpdmVBQ1N0YXRlID0gMTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgaWYgKHMgIT09IDEpIHsKICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignaW52YWxpZCBBQ24gZW5jb2RpbmcnKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgc3VjY2Vzc2l2ZUFDTmV4dFZhbHVlID0gcmVjZWl2ZUFuZEV4dGVuZChzKTsKICAgICAgICAgICAgICBzdWNjZXNzaXZlQUNTdGF0ZSA9IHIgPyAyIDogMzsKICAgICAgICAgICAgfQogICAgICAgICAgICBjb250aW51ZTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1jb250aW51ZQogICAgICAgICAgfQogICAgICAgICAgY2FzZSAxOiAvLyBza2lwcGluZyByIHplcm8gaXRlbXMKICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgaWYgKHp6W3pdKSB7CiAgICAgICAgICAgICAgenpbel0gKz0gKHJlYWRCaXQoKSA8PCBzdWNjZXNzaXZlKSAqIGRpcmVjdGlvbjsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICByLS07CiAgICAgICAgICAgICAgaWYgKHIgPT09IDApIHsKICAgICAgICAgICAgICAgIHN1Y2Nlc3NpdmVBQ1N0YXRlID0gc3VjY2Vzc2l2ZUFDU3RhdGUgPT09IDIgPyAzIDogMDsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlIDM6IC8vIHNldCB2YWx1ZSBmb3IgYSB6ZXJvIGl0ZW0KICAgICAgICAgICAgaWYgKHp6W3pdKSB7CiAgICAgICAgICAgICAgenpbel0gKz0gKHJlYWRCaXQoKSA8PCBzdWNjZXNzaXZlKSAqIGRpcmVjdGlvbjsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB6elt6XSA9IHN1Y2Nlc3NpdmVBQ05leHRWYWx1ZSA8PCBzdWNjZXNzaXZlOwogICAgICAgICAgICAgIHN1Y2Nlc3NpdmVBQ1N0YXRlID0gMDsKICAgICAgICAgICAgfQogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgNDogLy8gZW9iCiAgICAgICAgICAgIGlmICh6elt6XSkgewogICAgICAgICAgICAgIHp6W3pdICs9IChyZWFkQml0KCkgPDwgc3VjY2Vzc2l2ZSkgKiBkaXJlY3Rpb247CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICAgIGsrKzsKICAgICAgfQogICAgICBpZiAoc3VjY2Vzc2l2ZUFDU3RhdGUgPT09IDQpIHsKICAgICAgICBlb2JydW4tLTsKICAgICAgICBpZiAoZW9icnVuID09PSAwKSB7CiAgICAgICAgICBzdWNjZXNzaXZlQUNTdGF0ZSA9IDA7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICBmdW5jdGlvbiBkZWNvZGVNY3UoY29tcG9uZW50LCBkZWNvZGVGdW5jdGlvbiwgbWN1LCByb3csIGNvbCkgewogICAgICBjb25zdCBtY3VSb3cgPSAobWN1IC8gbWN1c1BlckxpbmUpIHwgMDsKICAgICAgY29uc3QgbWN1Q29sID0gbWN1ICUgbWN1c1BlckxpbmU7CiAgICAgIGNvbnN0IGJsb2NrUm93ID0gKG1jdVJvdyAqIGNvbXBvbmVudC52KSArIHJvdzsKICAgICAgY29uc3QgYmxvY2tDb2wgPSAobWN1Q29sICogY29tcG9uZW50LmgpICsgY29sOwogICAgICBkZWNvZGVGdW5jdGlvbihjb21wb25lbnQsIGNvbXBvbmVudC5ibG9ja3NbYmxvY2tSb3ddW2Jsb2NrQ29sXSk7CiAgICB9CiAgICBmdW5jdGlvbiBkZWNvZGVCbG9jayhjb21wb25lbnQsIGRlY29kZUZ1bmN0aW9uLCBtY3UpIHsKICAgICAgY29uc3QgYmxvY2tSb3cgPSAobWN1IC8gY29tcG9uZW50LmJsb2Nrc1BlckxpbmUpIHwgMDsKICAgICAgY29uc3QgYmxvY2tDb2wgPSBtY3UgJSBjb21wb25lbnQuYmxvY2tzUGVyTGluZTsKICAgICAgZGVjb2RlRnVuY3Rpb24oY29tcG9uZW50LCBjb21wb25lbnQuYmxvY2tzW2Jsb2NrUm93XVtibG9ja0NvbF0pOwogICAgfQoKICAgIGNvbnN0IGNvbXBvbmVudHNMZW5ndGggPSBjb21wb25lbnRzLmxlbmd0aDsKICAgIGxldCBjb21wb25lbnQ7CiAgICBsZXQgaTsKICAgIGxldCBqOwogICAgbGV0IGs7CiAgICBsZXQgbjsKICAgIGxldCBkZWNvZGVGbjsKICAgIGlmIChwcm9ncmVzc2l2ZSkgewogICAgICBpZiAoc3BlY3RyYWxTdGFydCA9PT0gMCkgewogICAgICAgIGRlY29kZUZuID0gc3VjY2Vzc2l2ZVByZXYgPT09IDAgPyBkZWNvZGVEQ0ZpcnN0IDogZGVjb2RlRENTdWNjZXNzaXZlOwogICAgICB9IGVsc2UgewogICAgICAgIGRlY29kZUZuID0gc3VjY2Vzc2l2ZVByZXYgPT09IDAgPyBkZWNvZGVBQ0ZpcnN0IDogZGVjb2RlQUNTdWNjZXNzaXZlOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICBkZWNvZGVGbiA9IGRlY29kZUJhc2VsaW5lOwogICAgfQoKICAgIGxldCBtY3UgPSAwOwogICAgbGV0IG1hcmtlcjsKICAgIGxldCBtY3VFeHBlY3RlZDsKICAgIGlmIChjb21wb25lbnRzTGVuZ3RoID09PSAxKSB7CiAgICAgIG1jdUV4cGVjdGVkID0gY29tcG9uZW50c1swXS5ibG9ja3NQZXJMaW5lICogY29tcG9uZW50c1swXS5ibG9ja3NQZXJDb2x1bW47CiAgICB9IGVsc2UgewogICAgICBtY3VFeHBlY3RlZCA9IG1jdXNQZXJMaW5lICogZnJhbWUubWN1c1BlckNvbHVtbjsKICAgIH0KCiAgICBjb25zdCB1c2VkUmVzZXRJbnRlcnZhbCA9IHJlc2V0SW50ZXJ2YWwgfHwgbWN1RXhwZWN0ZWQ7CgogICAgd2hpbGUgKG1jdSA8IG1jdUV4cGVjdGVkKSB7CiAgICAgIC8vIHJlc2V0IGludGVydmFsIHN0dWZmCiAgICAgIGZvciAoaSA9IDA7IGkgPCBjb21wb25lbnRzTGVuZ3RoOyBpKyspIHsKICAgICAgICBjb21wb25lbnRzW2ldLnByZWQgPSAwOwogICAgICB9CiAgICAgIGVvYnJ1biA9IDA7CgogICAgICBpZiAoY29tcG9uZW50c0xlbmd0aCA9PT0gMSkgewogICAgICAgIGNvbXBvbmVudCA9IGNvbXBvbmVudHNbMF07CiAgICAgICAgZm9yIChuID0gMDsgbiA8IHVzZWRSZXNldEludGVydmFsOyBuKyspIHsKICAgICAgICAgIGRlY29kZUJsb2NrKGNvbXBvbmVudCwgZGVjb2RlRm4sIG1jdSk7CiAgICAgICAgICBtY3UrKzsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZm9yIChuID0gMDsgbiA8IHVzZWRSZXNldEludGVydmFsOyBuKyspIHsKICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBjb21wb25lbnRzTGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgY29tcG9uZW50ID0gY29tcG9uZW50c1tpXTsKICAgICAgICAgICAgY29uc3QgeyBoLCB2IH0gPSBjb21wb25lbnQ7CiAgICAgICAgICAgIGZvciAoaiA9IDA7IGogPCB2OyBqKyspIHsKICAgICAgICAgICAgICBmb3IgKGsgPSAwOyBrIDwgaDsgaysrKSB7CiAgICAgICAgICAgICAgICBkZWNvZGVNY3UoY29tcG9uZW50LCBkZWNvZGVGbiwgbWN1LCBqLCBrKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIG1jdSsrOwoKICAgICAgICAgIC8vIElmIHdlJ3ZlIHJlYWNoZWQgb3VyIGV4cGVjdGVkIE1DVSdzLCBzdG9wIGRlY29kaW5nCiAgICAgICAgICBpZiAobWN1ID09PSBtY3VFeHBlY3RlZCkgewogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIC8vIGZpbmQgbWFya2VyCiAgICAgIGJpdHNDb3VudCA9IDA7CiAgICAgIG1hcmtlciA9IChkYXRhW29mZnNldF0gPDwgOCkgfCBkYXRhW29mZnNldCArIDFdOwogICAgICBpZiAobWFya2VyIDwgMHhGRjAwKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdtYXJrZXIgd2FzIG5vdCBmb3VuZCcpOwogICAgICB9CgogICAgICBpZiAobWFya2VyID49IDB4RkZEMCAmJiBtYXJrZXIgPD0gMHhGRkQ3KSB7IC8vIFJTVHgKICAgICAgICBvZmZzZXQgKz0gMjsKICAgICAgfSBlbHNlIHsKICAgICAgICBicmVhazsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBvZmZzZXQgLSBzdGFydE9mZnNldDsKICB9CgogIGZ1bmN0aW9uIGJ1aWxkQ29tcG9uZW50RGF0YShmcmFtZSwgY29tcG9uZW50KSB7CiAgICBjb25zdCBsaW5lcyA9IFtdOwogICAgY29uc3QgeyBibG9ja3NQZXJMaW5lLCBibG9ja3NQZXJDb2x1bW4gfSA9IGNvbXBvbmVudDsKICAgIGNvbnN0IHNhbXBsZXNQZXJMaW5lID0gYmxvY2tzUGVyTGluZSA8PCAzOwogICAgY29uc3QgUiA9IG5ldyBJbnQzMkFycmF5KDY0KTsKICAgIGNvbnN0IHIgPSBuZXcgVWludDhBcnJheSg2NCk7CgogICAgLy8gQSBwb3J0IG9mIHBvcHBsZXIncyBJRENUIG1ldGhvZCB3aGljaCBpbiB0dXJuIGlzIHRha2VuIGZyb206CiAgICAvLyAgIENocmlzdG9waCBMb2VmZmxlciwgQWRyaWFhbiBMaWd0ZW5iZXJnLCBHZW9yZ2UgUy4gTW9zY2h5dHosCiAgICAvLyAgICJQcmFjdGljYWwgRmFzdCAxLUQgRENUIEFsZ29yaXRobXMgd2l0aCAxMSBNdWx0aXBsaWNhdGlvbnMiLAogICAgLy8gICBJRUVFIEludGwuIENvbmYuIG9uIEFjb3VzdGljcywgU3BlZWNoICYgU2lnbmFsIFByb2Nlc3NpbmcsIDE5ODksCiAgICAvLyAgIDk4OC05OTEuCiAgICBmdW5jdGlvbiBxdWFudGl6ZUFuZEludmVyc2UoenosIGRhdGFPdXQsIGRhdGFJbikgewogICAgICBjb25zdCBxdCA9IGNvbXBvbmVudC5xdWFudGl6YXRpb25UYWJsZTsKICAgICAgbGV0IHYwOwogICAgICBsZXQgdjE7CiAgICAgIGxldCB2MjsKICAgICAgbGV0IHYzOwogICAgICBsZXQgdjQ7CiAgICAgIGxldCB2NTsKICAgICAgbGV0IHY2OwogICAgICBsZXQgdjc7CiAgICAgIGxldCB0OwogICAgICBjb25zdCBwID0gZGF0YUluOwogICAgICBsZXQgaTsKCiAgICAgIC8vIGRlcXVhbnQKICAgICAgZm9yIChpID0gMDsgaSA8IDY0OyBpKyspIHsKICAgICAgICBwW2ldID0genpbaV0gKiBxdFtpXTsKICAgICAgfQoKICAgICAgLy8gaW52ZXJzZSBEQ1Qgb24gcm93cwogICAgICBmb3IgKGkgPSAwOyBpIDwgODsgKytpKSB7CiAgICAgICAgY29uc3Qgcm93ID0gOCAqIGk7CgogICAgICAgIC8vIGNoZWNrIGZvciBhbGwtemVybyBBQyBjb2VmZmljaWVudHMKICAgICAgICBpZiAocFsxICsgcm93XSA9PT0gMCAmJiBwWzIgKyByb3ddID09PSAwICYmIHBbMyArIHJvd10gPT09IDAKICAgICAgICAgICYmIHBbNCArIHJvd10gPT09IDAgJiYgcFs1ICsgcm93XSA9PT0gMCAmJiBwWzYgKyByb3ddID09PSAwCiAgICAgICAgICAmJiBwWzcgKyByb3ddID09PSAwKSB7CiAgICAgICAgICB0ID0gKChkY3RTcXJ0MiAqIHBbMCArIHJvd10pICsgNTEyKSA+PiAxMDsKICAgICAgICAgIHBbMCArIHJvd10gPSB0OwogICAgICAgICAgcFsxICsgcm93XSA9IHQ7CiAgICAgICAgICBwWzIgKyByb3ddID0gdDsKICAgICAgICAgIHBbMyArIHJvd10gPSB0OwogICAgICAgICAgcFs0ICsgcm93XSA9IHQ7CiAgICAgICAgICBwWzUgKyByb3ddID0gdDsKICAgICAgICAgIHBbNiArIHJvd10gPSB0OwogICAgICAgICAgcFs3ICsgcm93XSA9IHQ7CiAgICAgICAgICBjb250aW51ZTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1jb250aW51ZQogICAgICAgIH0KCiAgICAgICAgLy8gc3RhZ2UgNAogICAgICAgIHYwID0gKChkY3RTcXJ0MiAqIHBbMCArIHJvd10pICsgMTI4KSA+PiA4OwogICAgICAgIHYxID0gKChkY3RTcXJ0MiAqIHBbNCArIHJvd10pICsgMTI4KSA+PiA4OwogICAgICAgIHYyID0gcFsyICsgcm93XTsKICAgICAgICB2MyA9IHBbNiArIHJvd107CiAgICAgICAgdjQgPSAoKGRjdFNxcnQxZDIgKiAocFsxICsgcm93XSAtIHBbNyArIHJvd10pKSArIDEyOCkgPj4gODsKICAgICAgICB2NyA9ICgoZGN0U3FydDFkMiAqIChwWzEgKyByb3ddICsgcFs3ICsgcm93XSkpICsgMTI4KSA+PiA4OwogICAgICAgIHY1ID0gcFszICsgcm93XSA8PCA0OwogICAgICAgIHY2ID0gcFs1ICsgcm93XSA8PCA0OwoKICAgICAgICAvLyBzdGFnZSAzCiAgICAgICAgdCA9ICh2MCAtIHYxICsgMSkgPj4gMTsKICAgICAgICB2MCA9ICh2MCArIHYxICsgMSkgPj4gMTsKICAgICAgICB2MSA9IHQ7CiAgICAgICAgdCA9ICgodjIgKiBkY3RTaW42KSArICh2MyAqIGRjdENvczYpICsgMTI4KSA+PiA4OwogICAgICAgIHYyID0gKCh2MiAqIGRjdENvczYpIC0gKHYzICogZGN0U2luNikgKyAxMjgpID4+IDg7CiAgICAgICAgdjMgPSB0OwogICAgICAgIHQgPSAodjQgLSB2NiArIDEpID4+IDE7CiAgICAgICAgdjQgPSAodjQgKyB2NiArIDEpID4+IDE7CiAgICAgICAgdjYgPSB0OwogICAgICAgIHQgPSAodjcgKyB2NSArIDEpID4+IDE7CiAgICAgICAgdjUgPSAodjcgLSB2NSArIDEpID4+IDE7CiAgICAgICAgdjcgPSB0OwoKICAgICAgICAvLyBzdGFnZSAyCiAgICAgICAgdCA9ICh2MCAtIHYzICsgMSkgPj4gMTsKICAgICAgICB2MCA9ICh2MCArIHYzICsgMSkgPj4gMTsKICAgICAgICB2MyA9IHQ7CiAgICAgICAgdCA9ICh2MSAtIHYyICsgMSkgPj4gMTsKICAgICAgICB2MSA9ICh2MSArIHYyICsgMSkgPj4gMTsKICAgICAgICB2MiA9IHQ7CiAgICAgICAgdCA9ICgodjQgKiBkY3RTaW4zKSArICh2NyAqIGRjdENvczMpICsgMjA0OCkgPj4gMTI7CiAgICAgICAgdjQgPSAoKHY0ICogZGN0Q29zMykgLSAodjcgKiBkY3RTaW4zKSArIDIwNDgpID4+IDEyOwogICAgICAgIHY3ID0gdDsKICAgICAgICB0ID0gKCh2NSAqIGRjdFNpbjEpICsgKHY2ICogZGN0Q29zMSkgKyAyMDQ4KSA+PiAxMjsKICAgICAgICB2NSA9ICgodjUgKiBkY3RDb3MxKSAtICh2NiAqIGRjdFNpbjEpICsgMjA0OCkgPj4gMTI7CiAgICAgICAgdjYgPSB0OwoKICAgICAgICAvLyBzdGFnZSAxCiAgICAgICAgcFswICsgcm93XSA9IHYwICsgdjc7CiAgICAgICAgcFs3ICsgcm93XSA9IHYwIC0gdjc7CiAgICAgICAgcFsxICsgcm93XSA9IHYxICsgdjY7CiAgICAgICAgcFs2ICsgcm93XSA9IHYxIC0gdjY7CiAgICAgICAgcFsyICsgcm93XSA9IHYyICsgdjU7CiAgICAgICAgcFs1ICsgcm93XSA9IHYyIC0gdjU7CiAgICAgICAgcFszICsgcm93XSA9IHYzICsgdjQ7CiAgICAgICAgcFs0ICsgcm93XSA9IHYzIC0gdjQ7CiAgICAgIH0KCiAgICAgIC8vIGludmVyc2UgRENUIG9uIGNvbHVtbnMKICAgICAgZm9yIChpID0gMDsgaSA8IDg7ICsraSkgewogICAgICAgIGNvbnN0IGNvbCA9IGk7CgogICAgICAgIC8vIGNoZWNrIGZvciBhbGwtemVybyBBQyBjb2VmZmljaWVudHMKICAgICAgICBpZiAocFsoMSAqIDgpICsgY29sXSA9PT0gMCAmJiBwWygyICogOCkgKyBjb2xdID09PSAwICYmIHBbKDMgKiA4KSArIGNvbF0gPT09IDAKICAgICAgICAgICYmIHBbKDQgKiA4KSArIGNvbF0gPT09IDAgJiYgcFsoNSAqIDgpICsgY29sXSA9PT0gMCAmJiBwWyg2ICogOCkgKyBjb2xdID09PSAwCiAgICAgICAgICAmJiBwWyg3ICogOCkgKyBjb2xdID09PSAwKSB7CiAgICAgICAgICB0ID0gKChkY3RTcXJ0MiAqIGRhdGFJbltpICsgMF0pICsgODE5MikgPj4gMTQ7CiAgICAgICAgICBwWygwICogOCkgKyBjb2xdID0gdDsKICAgICAgICAgIHBbKDEgKiA4KSArIGNvbF0gPSB0OwogICAgICAgICAgcFsoMiAqIDgpICsgY29sXSA9IHQ7CiAgICAgICAgICBwWygzICogOCkgKyBjb2xdID0gdDsKICAgICAgICAgIHBbKDQgKiA4KSArIGNvbF0gPSB0OwogICAgICAgICAgcFsoNSAqIDgpICsgY29sXSA9IHQ7CiAgICAgICAgICBwWyg2ICogOCkgKyBjb2xdID0gdDsKICAgICAgICAgIHBbKDcgKiA4KSArIGNvbF0gPSB0OwogICAgICAgICAgY29udGludWU7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tY29udGludWUKICAgICAgICB9CgogICAgICAgIC8vIHN0YWdlIDQKICAgICAgICB2MCA9ICgoZGN0U3FydDIgKiBwWygwICogOCkgKyBjb2xdKSArIDIwNDgpID4+IDEyOwogICAgICAgIHYxID0gKChkY3RTcXJ0MiAqIHBbKDQgKiA4KSArIGNvbF0pICsgMjA0OCkgPj4gMTI7CiAgICAgICAgdjIgPSBwWygyICogOCkgKyBjb2xdOwogICAgICAgIHYzID0gcFsoNiAqIDgpICsgY29sXTsKICAgICAgICB2NCA9ICgoZGN0U3FydDFkMiAqIChwWygxICogOCkgKyBjb2xdIC0gcFsoNyAqIDgpICsgY29sXSkpICsgMjA0OCkgPj4gMTI7CiAgICAgICAgdjcgPSAoKGRjdFNxcnQxZDIgKiAocFsoMSAqIDgpICsgY29sXSArIHBbKDcgKiA4KSArIGNvbF0pKSArIDIwNDgpID4+IDEyOwogICAgICAgIHY1ID0gcFsoMyAqIDgpICsgY29sXTsKICAgICAgICB2NiA9IHBbKDUgKiA4KSArIGNvbF07CgogICAgICAgIC8vIHN0YWdlIDMKICAgICAgICB0ID0gKHYwIC0gdjEgKyAxKSA+PiAxOwogICAgICAgIHYwID0gKHYwICsgdjEgKyAxKSA+PiAxOwogICAgICAgIHYxID0gdDsKICAgICAgICB0ID0gKCh2MiAqIGRjdFNpbjYpICsgKHYzICogZGN0Q29zNikgKyAyMDQ4KSA+PiAxMjsKICAgICAgICB2MiA9ICgodjIgKiBkY3RDb3M2KSAtICh2MyAqIGRjdFNpbjYpICsgMjA0OCkgPj4gMTI7CiAgICAgICAgdjMgPSB0OwogICAgICAgIHQgPSAodjQgLSB2NiArIDEpID4+IDE7CiAgICAgICAgdjQgPSAodjQgKyB2NiArIDEpID4+IDE7CiAgICAgICAgdjYgPSB0OwogICAgICAgIHQgPSAodjcgKyB2NSArIDEpID4+IDE7CiAgICAgICAgdjUgPSAodjcgLSB2NSArIDEpID4+IDE7CiAgICAgICAgdjcgPSB0OwoKICAgICAgICAvLyBzdGFnZSAyCiAgICAgICAgdCA9ICh2MCAtIHYzICsgMSkgPj4gMTsKICAgICAgICB2MCA9ICh2MCArIHYzICsgMSkgPj4gMTsKICAgICAgICB2MyA9IHQ7CiAgICAgICAgdCA9ICh2MSAtIHYyICsgMSkgPj4gMTsKICAgICAgICB2MSA9ICh2MSArIHYyICsgMSkgPj4gMTsKICAgICAgICB2MiA9IHQ7CiAgICAgICAgdCA9ICgodjQgKiBkY3RTaW4zKSArICh2NyAqIGRjdENvczMpICsgMjA0OCkgPj4gMTI7CiAgICAgICAgdjQgPSAoKHY0ICogZGN0Q29zMykgLSAodjcgKiBkY3RTaW4zKSArIDIwNDgpID4+IDEyOwogICAgICAgIHY3ID0gdDsKICAgICAgICB0ID0gKCh2NSAqIGRjdFNpbjEpICsgKHY2ICogZGN0Q29zMSkgKyAyMDQ4KSA+PiAxMjsKICAgICAgICB2NSA9ICgodjUgKiBkY3RDb3MxKSAtICh2NiAqIGRjdFNpbjEpICsgMjA0OCkgPj4gMTI7CiAgICAgICAgdjYgPSB0OwoKICAgICAgICAvLyBzdGFnZSAxCiAgICAgICAgcFsoMCAqIDgpICsgY29sXSA9IHYwICsgdjc7CiAgICAgICAgcFsoNyAqIDgpICsgY29sXSA9IHYwIC0gdjc7CiAgICAgICAgcFsoMSAqIDgpICsgY29sXSA9IHYxICsgdjY7CiAgICAgICAgcFsoNiAqIDgpICsgY29sXSA9IHYxIC0gdjY7CiAgICAgICAgcFsoMiAqIDgpICsgY29sXSA9IHYyICsgdjU7CiAgICAgICAgcFsoNSAqIDgpICsgY29sXSA9IHYyIC0gdjU7CiAgICAgICAgcFsoMyAqIDgpICsgY29sXSA9IHYzICsgdjQ7CiAgICAgICAgcFsoNCAqIDgpICsgY29sXSA9IHYzIC0gdjQ7CiAgICAgIH0KCiAgICAgIC8vIGNvbnZlcnQgdG8gOC1iaXQgaW50ZWdlcnMKICAgICAgZm9yIChpID0gMDsgaSA8IDY0OyArK2kpIHsKICAgICAgICBjb25zdCBzYW1wbGUgPSAxMjggKyAoKHBbaV0gKyA4KSA+PiA0KTsKICAgICAgICBpZiAoc2FtcGxlIDwgMCkgewogICAgICAgICAgZGF0YU91dFtpXSA9IDA7CiAgICAgICAgfSBlbHNlIGlmIChzYW1wbGUgPiAwWEZGKSB7CiAgICAgICAgICBkYXRhT3V0W2ldID0gMHhGRjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgZGF0YU91dFtpXSA9IHNhbXBsZTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBmb3IgKGxldCBibG9ja1JvdyA9IDA7IGJsb2NrUm93IDwgYmxvY2tzUGVyQ29sdW1uOyBibG9ja1JvdysrKSB7CiAgICAgIGNvbnN0IHNjYW5MaW5lID0gYmxvY2tSb3cgPDwgMzsKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA4OyBpKyspIHsKICAgICAgICBsaW5lcy5wdXNoKG5ldyBVaW50OEFycmF5KHNhbXBsZXNQZXJMaW5lKSk7CiAgICAgIH0KICAgICAgZm9yIChsZXQgYmxvY2tDb2wgPSAwOyBibG9ja0NvbCA8IGJsb2Nrc1BlckxpbmU7IGJsb2NrQ29sKyspIHsKICAgICAgICBxdWFudGl6ZUFuZEludmVyc2UoY29tcG9uZW50LmJsb2Nrc1tibG9ja1Jvd11bYmxvY2tDb2xdLCByLCBSKTsKCiAgICAgICAgbGV0IG9mZnNldCA9IDA7CiAgICAgICAgY29uc3Qgc2FtcGxlID0gYmxvY2tDb2wgPDwgMzsKICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IDg7IGorKykgewogICAgICAgICAgY29uc3QgbGluZSA9IGxpbmVzW3NjYW5MaW5lICsgal07CiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDg7IGkrKykgewogICAgICAgICAgICBsaW5lW3NhbXBsZSArIGldID0gcltvZmZzZXQrK107CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICByZXR1cm4gbGluZXM7CiAgfQoKICBjbGFzcyBKcGVnU3RyZWFtUmVhZGVyIHsKICAgIGNvbnN0cnVjdG9yKCkgewogICAgICB0aGlzLmpmaWYgPSBudWxsOwogICAgICB0aGlzLmFkb2JlID0gbnVsbDsKCiAgICAgIHRoaXMucXVhbnRpemF0aW9uVGFibGVzID0gW107CiAgICAgIHRoaXMuaHVmZm1hblRhYmxlc0FDID0gW107CiAgICAgIHRoaXMuaHVmZm1hblRhYmxlc0RDID0gW107CiAgICAgIHRoaXMucmVzZXRGcmFtZXMoKTsKICAgIH0KCiAgICByZXNldEZyYW1lcygpIHsKICAgICAgdGhpcy5mcmFtZXMgPSBbXTsKICAgIH0KCiAgICBwYXJzZShkYXRhKSB7CiAgICAgIGxldCBvZmZzZXQgPSAwOwogICAgICAvLyBjb25zdCB7IGxlbmd0aCB9ID0gZGF0YTsKICAgICAgZnVuY3Rpb24gcmVhZFVpbnQxNigpIHsKICAgICAgICBjb25zdCB2YWx1ZSA9IChkYXRhW29mZnNldF0gPDwgOCkgfCBkYXRhW29mZnNldCArIDFdOwogICAgICAgIG9mZnNldCArPSAyOwogICAgICAgIHJldHVybiB2YWx1ZTsKICAgICAgfQogICAgICBmdW5jdGlvbiByZWFkRGF0YUJsb2NrKCkgewogICAgICAgIGNvbnN0IGxlbmd0aCA9IHJlYWRVaW50MTYoKTsKICAgICAgICBjb25zdCBhcnJheSA9IGRhdGEuc3ViYXJyYXkob2Zmc2V0LCBvZmZzZXQgKyBsZW5ndGggLSAyKTsKICAgICAgICBvZmZzZXQgKz0gYXJyYXkubGVuZ3RoOwogICAgICAgIHJldHVybiBhcnJheTsKICAgICAgfQogICAgICBmdW5jdGlvbiBwcmVwYXJlQ29tcG9uZW50cyhmcmFtZSkgewogICAgICAgIGxldCBtYXhIID0gMDsKICAgICAgICBsZXQgbWF4ViA9IDA7CiAgICAgICAgbGV0IGNvbXBvbmVudDsKICAgICAgICBsZXQgY29tcG9uZW50SWQ7CiAgICAgICAgZm9yIChjb21wb25lbnRJZCBpbiBmcmFtZS5jb21wb25lbnRzKSB7CiAgICAgICAgICBpZiAoZnJhbWUuY29tcG9uZW50cy5oYXNPd25Qcm9wZXJ0eShjb21wb25lbnRJZCkpIHsKICAgICAgICAgICAgY29tcG9uZW50ID0gZnJhbWUuY29tcG9uZW50c1tjb21wb25lbnRJZF07CiAgICAgICAgICAgIGlmIChtYXhIIDwgY29tcG9uZW50LmgpIHsKICAgICAgICAgICAgICBtYXhIID0gY29tcG9uZW50Lmg7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKG1heFYgPCBjb21wb25lbnQudikgewogICAgICAgICAgICAgIG1heFYgPSBjb21wb25lbnQudjsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBjb25zdCBtY3VzUGVyTGluZSA9IE1hdGguY2VpbChmcmFtZS5zYW1wbGVzUGVyTGluZSAvIDggLyBtYXhIKTsKICAgICAgICBjb25zdCBtY3VzUGVyQ29sdW1uID0gTWF0aC5jZWlsKGZyYW1lLnNjYW5MaW5lcyAvIDggLyBtYXhWKTsKICAgICAgICBmb3IgKGNvbXBvbmVudElkIGluIGZyYW1lLmNvbXBvbmVudHMpIHsKICAgICAgICAgIGlmIChmcmFtZS5jb21wb25lbnRzLmhhc093blByb3BlcnR5KGNvbXBvbmVudElkKSkgewogICAgICAgICAgICBjb21wb25lbnQgPSBmcmFtZS5jb21wb25lbnRzW2NvbXBvbmVudElkXTsKICAgICAgICAgICAgY29uc3QgYmxvY2tzUGVyTGluZSA9IE1hdGguY2VpbChNYXRoLmNlaWwoZnJhbWUuc2FtcGxlc1BlckxpbmUgLyA4KSAqIGNvbXBvbmVudC5oIC8gbWF4SCk7CiAgICAgICAgICAgIGNvbnN0IGJsb2Nrc1BlckNvbHVtbiA9IE1hdGguY2VpbChNYXRoLmNlaWwoZnJhbWUuc2NhbkxpbmVzIC8gOCkgKiBjb21wb25lbnQudiAvIG1heFYpOwogICAgICAgICAgICBjb25zdCBibG9ja3NQZXJMaW5lRm9yTWN1ID0gbWN1c1BlckxpbmUgKiBjb21wb25lbnQuaDsKICAgICAgICAgICAgY29uc3QgYmxvY2tzUGVyQ29sdW1uRm9yTWN1ID0gbWN1c1BlckNvbHVtbiAqIGNvbXBvbmVudC52OwogICAgICAgICAgICBjb25zdCBibG9ja3MgPSBbXTsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBibG9ja3NQZXJDb2x1bW5Gb3JNY3U7IGkrKykgewogICAgICAgICAgICAgIGNvbnN0IHJvdyA9IFtdOwogICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgYmxvY2tzUGVyTGluZUZvck1jdTsgaisrKSB7CiAgICAgICAgICAgICAgICByb3cucHVzaChuZXcgSW50MzJBcnJheSg2NCkpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBibG9ja3MucHVzaChyb3cpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNvbXBvbmVudC5ibG9ja3NQZXJMaW5lID0gYmxvY2tzUGVyTGluZTsKICAgICAgICAgICAgY29tcG9uZW50LmJsb2Nrc1BlckNvbHVtbiA9IGJsb2Nrc1BlckNvbHVtbjsKICAgICAgICAgICAgY29tcG9uZW50LmJsb2NrcyA9IGJsb2NrczsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgZnJhbWUubWF4SCA9IG1heEg7CiAgICAgICAgZnJhbWUubWF4ViA9IG1heFY7CiAgICAgICAgZnJhbWUubWN1c1BlckxpbmUgPSBtY3VzUGVyTGluZTsKICAgICAgICBmcmFtZS5tY3VzUGVyQ29sdW1uID0gbWN1c1BlckNvbHVtbjsKICAgICAgfQoKICAgICAgbGV0IGZpbGVNYXJrZXIgPSByZWFkVWludDE2KCk7CiAgICAgIGlmIChmaWxlTWFya2VyICE9PSAweEZGRDgpIHsgLy8gU09JIChTdGFydCBvZiBJbWFnZSkKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1NPSSBub3QgZm91bmQnKTsKICAgICAgfQoKICAgICAgZmlsZU1hcmtlciA9IHJlYWRVaW50MTYoKTsKICAgICAgd2hpbGUgKGZpbGVNYXJrZXIgIT09IDB4RkZEOSkgeyAvLyBFT0kgKEVuZCBvZiBpbWFnZSkKICAgICAgICBzd2l0Y2ggKGZpbGVNYXJrZXIpIHsKICAgICAgICAgIGNhc2UgMHhGRjAwOiBicmVhazsKICAgICAgICAgIGNhc2UgMHhGRkUwOiAvLyBBUFAwIChBcHBsaWNhdGlvbiBTcGVjaWZpYykKICAgICAgICAgIGNhc2UgMHhGRkUxOiAvLyBBUFAxCiAgICAgICAgICBjYXNlIDB4RkZFMjogLy8gQVBQMgogICAgICAgICAgY2FzZSAweEZGRTM6IC8vIEFQUDMKICAgICAgICAgIGNhc2UgMHhGRkU0OiAvLyBBUFA0CiAgICAgICAgICBjYXNlIDB4RkZFNTogLy8gQVBQNQogICAgICAgICAgY2FzZSAweEZGRTY6IC8vIEFQUDYKICAgICAgICAgIGNhc2UgMHhGRkU3OiAvLyBBUFA3CiAgICAgICAgICBjYXNlIDB4RkZFODogLy8gQVBQOAogICAgICAgICAgY2FzZSAweEZGRTk6IC8vIEFQUDkKICAgICAgICAgIGNhc2UgMHhGRkVBOiAvLyBBUFAxMAogICAgICAgICAgY2FzZSAweEZGRUI6IC8vIEFQUDExCiAgICAgICAgICBjYXNlIDB4RkZFQzogLy8gQVBQMTIKICAgICAgICAgIGNhc2UgMHhGRkVEOiAvLyBBUFAxMwogICAgICAgICAgY2FzZSAweEZGRUU6IC8vIEFQUDE0CiAgICAgICAgICBjYXNlIDB4RkZFRjogLy8gQVBQMTUKICAgICAgICAgIGNhc2UgMHhGRkZFOiB7IC8vIENPTSAoQ29tbWVudCkKICAgICAgICAgICAgY29uc3QgYXBwRGF0YSA9IHJlYWREYXRhQmxvY2soKTsKCiAgICAgICAgICAgIGlmIChmaWxlTWFya2VyID09PSAweEZGRTApIHsKICAgICAgICAgICAgICBpZiAoYXBwRGF0YVswXSA9PT0gMHg0QSAmJiBhcHBEYXRhWzFdID09PSAweDQ2ICYmIGFwcERhdGFbMl0gPT09IDB4NDkKICAgICAgICAgICAgICAgICYmIGFwcERhdGFbM10gPT09IDB4NDYgJiYgYXBwRGF0YVs0XSA9PT0gMCkgeyAvLyAnSkZJRlx4MDAnCiAgICAgICAgICAgICAgICB0aGlzLmpmaWYgPSB7CiAgICAgICAgICAgICAgICAgIHZlcnNpb246IHsgbWFqb3I6IGFwcERhdGFbNV0sIG1pbm9yOiBhcHBEYXRhWzZdIH0sCiAgICAgICAgICAgICAgICAgIGRlbnNpdHlVbml0czogYXBwRGF0YVs3XSwKICAgICAgICAgICAgICAgICAgeERlbnNpdHk6IChhcHBEYXRhWzhdIDw8IDgpIHwgYXBwRGF0YVs5XSwKICAgICAgICAgICAgICAgICAgeURlbnNpdHk6IChhcHBEYXRhWzEwXSA8PCA4KSB8IGFwcERhdGFbMTFdLAogICAgICAgICAgICAgICAgICB0aHVtYldpZHRoOiBhcHBEYXRhWzEyXSwKICAgICAgICAgICAgICAgICAgdGh1bWJIZWlnaHQ6IGFwcERhdGFbMTNdLAogICAgICAgICAgICAgICAgICB0aHVtYkRhdGE6IGFwcERhdGEuc3ViYXJyYXkoMTQsIDE0ICsgKDMgKiBhcHBEYXRhWzEyXSAqIGFwcERhdGFbMTNdKSksCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICAvLyBUT0RPIEFQUDEgLSBFeGlmCiAgICAgICAgICAgIGlmIChmaWxlTWFya2VyID09PSAweEZGRUUpIHsKICAgICAgICAgICAgICBpZiAoYXBwRGF0YVswXSA9PT0gMHg0MSAmJiBhcHBEYXRhWzFdID09PSAweDY0ICYmIGFwcERhdGFbMl0gPT09IDB4NkYKICAgICAgICAgICAgICAgICYmIGFwcERhdGFbM10gPT09IDB4NjIgJiYgYXBwRGF0YVs0XSA9PT0gMHg2NSAmJiBhcHBEYXRhWzVdID09PSAwKSB7IC8vICdBZG9iZVx4MDAnCiAgICAgICAgICAgICAgICB0aGlzLmFkb2JlID0gewogICAgICAgICAgICAgICAgICB2ZXJzaW9uOiBhcHBEYXRhWzZdLAogICAgICAgICAgICAgICAgICBmbGFnczA6IChhcHBEYXRhWzddIDw8IDgpIHwgYXBwRGF0YVs4XSwKICAgICAgICAgICAgICAgICAgZmxhZ3MxOiAoYXBwRGF0YVs5XSA8PCA4KSB8IGFwcERhdGFbMTBdLAogICAgICAgICAgICAgICAgICB0cmFuc2Zvcm1Db2RlOiBhcHBEYXRhWzExXSwKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQoKICAgICAgICAgIGNhc2UgMHhGRkRCOiB7IC8vIERRVCAoRGVmaW5lIFF1YW50aXphdGlvbiBUYWJsZXMpCiAgICAgICAgICAgIGNvbnN0IHF1YW50aXphdGlvblRhYmxlc0xlbmd0aCA9IHJlYWRVaW50MTYoKTsKICAgICAgICAgICAgY29uc3QgcXVhbnRpemF0aW9uVGFibGVzRW5kID0gcXVhbnRpemF0aW9uVGFibGVzTGVuZ3RoICsgb2Zmc2V0IC0gMjsKICAgICAgICAgICAgd2hpbGUgKG9mZnNldCA8IHF1YW50aXphdGlvblRhYmxlc0VuZCkgewogICAgICAgICAgICAgIGNvbnN0IHF1YW50aXphdGlvblRhYmxlU3BlYyA9IGRhdGFbb2Zmc2V0KytdOwogICAgICAgICAgICAgIGNvbnN0IHRhYmxlRGF0YSA9IG5ldyBJbnQzMkFycmF5KDY0KTsKICAgICAgICAgICAgICBpZiAoKHF1YW50aXphdGlvblRhYmxlU3BlYyA+PiA0KSA9PT0gMCkgeyAvLyA4IGJpdCB2YWx1ZXMKICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgNjQ7IGorKykgewogICAgICAgICAgICAgICAgICBjb25zdCB6ID0gZGN0WmlnWmFnW2pdOwogICAgICAgICAgICAgICAgICB0YWJsZURhdGFbel0gPSBkYXRhW29mZnNldCsrXTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9IGVsc2UgaWYgKChxdWFudGl6YXRpb25UYWJsZVNwZWMgPj4gNCkgPT09IDEpIHsgLy8gMTYgYml0CiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IDY0OyBqKyspIHsKICAgICAgICAgICAgICAgICAgY29uc3QgeiA9IGRjdFppZ1phZ1tqXTsKICAgICAgICAgICAgICAgICAgdGFibGVEYXRhW3pdID0gcmVhZFVpbnQxNigpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0RRVDogaW52YWxpZCB0YWJsZSBzcGVjJyk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHRoaXMucXVhbnRpemF0aW9uVGFibGVzW3F1YW50aXphdGlvblRhYmxlU3BlYyAmIDE1XSA9IHRhYmxlRGF0YTsKICAgICAgICAgICAgfQogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KCiAgICAgICAgICBjYXNlIDB4RkZDMDogLy8gU09GMCAoU3RhcnQgb2YgRnJhbWUsIEJhc2VsaW5lIERDVCkKICAgICAgICAgIGNhc2UgMHhGRkMxOiAvLyBTT0YxIChTdGFydCBvZiBGcmFtZSwgRXh0ZW5kZWQgRENUKQogICAgICAgICAgY2FzZSAweEZGQzI6IHsgLy8gU09GMiAoU3RhcnQgb2YgRnJhbWUsIFByb2dyZXNzaXZlIERDVCkKICAgICAgICAgICAgcmVhZFVpbnQxNigpOyAvLyBza2lwIGRhdGEgbGVuZ3RoCiAgICAgICAgICAgIGNvbnN0IGZyYW1lID0gewogICAgICAgICAgICAgIGV4dGVuZGVkOiAoZmlsZU1hcmtlciA9PT0gMHhGRkMxKSwKICAgICAgICAgICAgICBwcm9ncmVzc2l2ZTogKGZpbGVNYXJrZXIgPT09IDB4RkZDMiksCiAgICAgICAgICAgICAgcHJlY2lzaW9uOiBkYXRhW29mZnNldCsrXSwKICAgICAgICAgICAgICBzY2FuTGluZXM6IHJlYWRVaW50MTYoKSwKICAgICAgICAgICAgICBzYW1wbGVzUGVyTGluZTogcmVhZFVpbnQxNigpLAogICAgICAgICAgICAgIGNvbXBvbmVudHM6IHt9LAogICAgICAgICAgICAgIGNvbXBvbmVudHNPcmRlcjogW10sCiAgICAgICAgICAgIH07CgogICAgICAgICAgICBjb25zdCBjb21wb25lbnRzQ291bnQgPSBkYXRhW29mZnNldCsrXTsKICAgICAgICAgICAgbGV0IGNvbXBvbmVudElkOwogICAgICAgICAgICAvLyBsZXQgbWF4SCA9IDA7CiAgICAgICAgICAgIC8vIGxldCBtYXhWID0gMDsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb21wb25lbnRzQ291bnQ7IGkrKykgewogICAgICAgICAgICAgIGNvbXBvbmVudElkID0gZGF0YVtvZmZzZXRdOwogICAgICAgICAgICAgIGNvbnN0IGggPSBkYXRhW29mZnNldCArIDFdID4+IDQ7CiAgICAgICAgICAgICAgY29uc3QgdiA9IGRhdGFbb2Zmc2V0ICsgMV0gJiAxNTsKICAgICAgICAgICAgICBjb25zdCBxSWQgPSBkYXRhW29mZnNldCArIDJdOwogICAgICAgICAgICAgIGZyYW1lLmNvbXBvbmVudHNPcmRlci5wdXNoKGNvbXBvbmVudElkKTsKICAgICAgICAgICAgICBmcmFtZS5jb21wb25lbnRzW2NvbXBvbmVudElkXSA9IHsKICAgICAgICAgICAgICAgIGgsCiAgICAgICAgICAgICAgICB2LAogICAgICAgICAgICAgICAgcXVhbnRpemF0aW9uSWR4OiBxSWQsCiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICBvZmZzZXQgKz0gMzsKICAgICAgICAgICAgfQogICAgICAgICAgICBwcmVwYXJlQ29tcG9uZW50cyhmcmFtZSk7CiAgICAgICAgICAgIHRoaXMuZnJhbWVzLnB1c2goZnJhbWUpOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KCiAgICAgICAgICBjYXNlIDB4RkZDNDogeyAvLyBESFQgKERlZmluZSBIdWZmbWFuIFRhYmxlcykKICAgICAgICAgICAgY29uc3QgaHVmZm1hbkxlbmd0aCA9IHJlYWRVaW50MTYoKTsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDI7IGkgPCBodWZmbWFuTGVuZ3RoOykgewogICAgICAgICAgICAgIGNvbnN0IGh1ZmZtYW5UYWJsZVNwZWMgPSBkYXRhW29mZnNldCsrXTsKICAgICAgICAgICAgICBjb25zdCBjb2RlTGVuZ3RocyA9IG5ldyBVaW50OEFycmF5KDE2KTsKICAgICAgICAgICAgICBsZXQgY29kZUxlbmd0aFN1bSA9IDA7CiAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCAxNjsgaisrLCBvZmZzZXQrKykgewogICAgICAgICAgICAgICAgY29kZUxlbmd0aHNbal0gPSBkYXRhW29mZnNldF07CiAgICAgICAgICAgICAgICBjb2RlTGVuZ3RoU3VtICs9IGNvZGVMZW5ndGhzW2pdOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBjb25zdCBodWZmbWFuVmFsdWVzID0gbmV3IFVpbnQ4QXJyYXkoY29kZUxlbmd0aFN1bSk7CiAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBjb2RlTGVuZ3RoU3VtOyBqKyssIG9mZnNldCsrKSB7CiAgICAgICAgICAgICAgICBodWZmbWFuVmFsdWVzW2pdID0gZGF0YVtvZmZzZXRdOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpICs9IDE3ICsgY29kZUxlbmd0aFN1bTsKCiAgICAgICAgICAgICAgaWYgKChodWZmbWFuVGFibGVTcGVjID4+IDQpID09PSAwKSB7CiAgICAgICAgICAgICAgICB0aGlzLmh1ZmZtYW5UYWJsZXNEQ1todWZmbWFuVGFibGVTcGVjICYgMTVdID0gYnVpbGRIdWZmbWFuVGFibGUoCiAgICAgICAgICAgICAgICAgIGNvZGVMZW5ndGhzLCBodWZmbWFuVmFsdWVzLAogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdGhpcy5odWZmbWFuVGFibGVzQUNbaHVmZm1hblRhYmxlU3BlYyAmIDE1XSA9IGJ1aWxkSHVmZm1hblRhYmxlKAogICAgICAgICAgICAgICAgICBjb2RlTGVuZ3RocywgaHVmZm1hblZhbHVlcywKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQoKICAgICAgICAgIGNhc2UgMHhGRkREOiAvLyBEUkkgKERlZmluZSBSZXN0YXJ0IEludGVydmFsKQogICAgICAgICAgICByZWFkVWludDE2KCk7IC8vIHNraXAgZGF0YSBsZW5ndGgKICAgICAgICAgICAgdGhpcy5yZXNldEludGVydmFsID0gcmVhZFVpbnQxNigpOwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlIDB4RkZEQTogeyAvLyBTT1MgKFN0YXJ0IG9mIFNjYW4pCiAgICAgICAgICAgIHJlYWRVaW50MTYoKTsgLy8gc2tpcCBsZW5ndGgKICAgICAgICAgICAgY29uc3Qgc2VsZWN0b3JzQ291bnQgPSBkYXRhW29mZnNldCsrXTsKICAgICAgICAgICAgY29uc3QgY29tcG9uZW50cyA9IFtdOwogICAgICAgICAgICBjb25zdCBmcmFtZSA9IHRoaXMuZnJhbWVzWzBdOwogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNlbGVjdG9yc0NvdW50OyBpKyspIHsKICAgICAgICAgICAgICBjb25zdCBjb21wb25lbnQgPSBmcmFtZS5jb21wb25lbnRzW2RhdGFbb2Zmc2V0KytdXTsKICAgICAgICAgICAgICBjb25zdCB0YWJsZVNwZWMgPSBkYXRhW29mZnNldCsrXTsKICAgICAgICAgICAgICBjb21wb25lbnQuaHVmZm1hblRhYmxlREMgPSB0aGlzLmh1ZmZtYW5UYWJsZXNEQ1t0YWJsZVNwZWMgPj4gNF07CiAgICAgICAgICAgICAgY29tcG9uZW50Lmh1ZmZtYW5UYWJsZUFDID0gdGhpcy5odWZmbWFuVGFibGVzQUNbdGFibGVTcGVjICYgMTVdOwogICAgICAgICAgICAgIGNvbXBvbmVudHMucHVzaChjb21wb25lbnQpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNvbnN0IHNwZWN0cmFsU3RhcnQgPSBkYXRhW29mZnNldCsrXTsKICAgICAgICAgICAgY29uc3Qgc3BlY3RyYWxFbmQgPSBkYXRhW29mZnNldCsrXTsKICAgICAgICAgICAgY29uc3Qgc3VjY2Vzc2l2ZUFwcHJveGltYXRpb24gPSBkYXRhW29mZnNldCsrXTsKICAgICAgICAgICAgY29uc3QgcHJvY2Vzc2VkID0gZGVjb2RlU2NhbihkYXRhLCBvZmZzZXQsCiAgICAgICAgICAgICAgZnJhbWUsIGNvbXBvbmVudHMsIHRoaXMucmVzZXRJbnRlcnZhbCwKICAgICAgICAgICAgICBzcGVjdHJhbFN0YXJ0LCBzcGVjdHJhbEVuZCwKICAgICAgICAgICAgICBzdWNjZXNzaXZlQXBwcm94aW1hdGlvbiA+PiA0LCBzdWNjZXNzaXZlQXBwcm94aW1hdGlvbiAmIDE1KTsKICAgICAgICAgICAgb2Zmc2V0ICs9IHByb2Nlc3NlZDsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CgogICAgICAgICAgY2FzZSAweEZGRkY6IC8vIEZpbGwgYnl0ZXMKICAgICAgICAgICAgaWYgKGRhdGFbb2Zmc2V0XSAhPT0gMHhGRikgeyAvLyBBdm9pZCBza2lwcGluZyBhIHZhbGlkIG1hcmtlci4KICAgICAgICAgICAgICBvZmZzZXQtLTsKICAgICAgICAgICAgfQogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICBpZiAoZGF0YVtvZmZzZXQgLSAzXSA9PT0gMHhGRgogICAgICAgICAgICAgICYmIGRhdGFbb2Zmc2V0IC0gMl0gPj0gMHhDMCAmJiBkYXRhW29mZnNldCAtIDJdIDw9IDB4RkUpIHsKICAgICAgICAgICAgICAvLyBjb3VsZCBiZSBpbmNvcnJlY3QgZW5jb2RpbmcgLS0gbGFzdCAweEZGIGJ5dGUgb2YgdGhlIHByZXZpb3VzCiAgICAgICAgICAgICAgLy8gYmxvY2sgd2FzIGVhdGVuIGJ5IHRoZSBlbmNvZGVyCiAgICAgICAgICAgICAgb2Zmc2V0IC09IDM7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGB1bmtub3duIEpQRUcgbWFya2VyICR7ZmlsZU1hcmtlci50b1N0cmluZygxNil9YCk7CiAgICAgICAgfQogICAgICAgIGZpbGVNYXJrZXIgPSByZWFkVWludDE2KCk7CiAgICAgIH0KICAgIH0KCiAgICBnZXRSZXN1bHQoKSB7CiAgICAgIGNvbnN0IHsgZnJhbWVzIH0gPSB0aGlzOwogICAgICBpZiAodGhpcy5mcmFtZXMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdubyBmcmFtZXMgd2VyZSBkZWNvZGVkJyk7CiAgICAgIH0gZWxzZSBpZiAodGhpcy5mcmFtZXMubGVuZ3RoID4gMSkgewogICAgICAgIGNvbnNvbGUud2FybignbW9yZSB0aGFuIG9uZSBmcmFtZSBpcyBub3Qgc3VwcG9ydGVkJyk7CiAgICAgIH0KCiAgICAgIC8vIHNldCBlYWNoIGZyYW1lJ3MgY29tcG9uZW50cyBxdWFudGl6YXRpb24gdGFibGUKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmZyYW1lcy5sZW5ndGg7IGkrKykgewogICAgICAgIGNvbnN0IGNwID0gdGhpcy5mcmFtZXNbaV0uY29tcG9uZW50czsKICAgICAgICBmb3IgKGNvbnN0IGogb2YgT2JqZWN0LmtleXMoY3ApKSB7CiAgICAgICAgICBjcFtqXS5xdWFudGl6YXRpb25UYWJsZSA9IHRoaXMucXVhbnRpemF0aW9uVGFibGVzW2NwW2pdLnF1YW50aXphdGlvbklkeF07CiAgICAgICAgICBkZWxldGUgY3Bbal0ucXVhbnRpemF0aW9uSWR4OwogICAgICAgIH0KICAgICAgfQoKICAgICAgY29uc3QgZnJhbWUgPSBmcmFtZXNbMF07CiAgICAgIGNvbnN0IHsgY29tcG9uZW50cywgY29tcG9uZW50c09yZGVyIH0gPSBmcmFtZTsKICAgICAgY29uc3Qgb3V0Q29tcG9uZW50cyA9IFtdOwogICAgICBjb25zdCB3aWR0aCA9IGZyYW1lLnNhbXBsZXNQZXJMaW5lOwogICAgICBjb25zdCBoZWlnaHQgPSBmcmFtZS5zY2FuTGluZXM7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbXBvbmVudHNPcmRlci5sZW5ndGg7IGkrKykgewogICAgICAgIGNvbnN0IGNvbXBvbmVudCA9IGNvbXBvbmVudHNbY29tcG9uZW50c09yZGVyW2ldXTsKICAgICAgICBvdXRDb21wb25lbnRzLnB1c2goewogICAgICAgICAgbGluZXM6IGJ1aWxkQ29tcG9uZW50RGF0YShmcmFtZSwgY29tcG9uZW50KSwKICAgICAgICAgIHNjYWxlWDogY29tcG9uZW50LmggLyBmcmFtZS5tYXhILAogICAgICAgICAgc2NhbGVZOiBjb21wb25lbnQudiAvIGZyYW1lLm1heFYsCiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIGNvbnN0IG91dCA9IG5ldyBVaW50OEFycmF5KHdpZHRoICogaGVpZ2h0ICogb3V0Q29tcG9uZW50cy5sZW5ndGgpOwogICAgICBsZXQgb2kgPSAwOwogICAgICBmb3IgKGxldCB5ID0gMDsgeSA8IGhlaWdodDsgKyt5KSB7CiAgICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCB3aWR0aDsgKyt4KSB7CiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG91dENvbXBvbmVudHMubGVuZ3RoOyArK2kpIHsKICAgICAgICAgICAgY29uc3QgY29tcG9uZW50ID0gb3V0Q29tcG9uZW50c1tpXTsKICAgICAgICAgICAgb3V0W29pXSA9IGNvbXBvbmVudC5saW5lc1swIHwgeSAqIGNvbXBvbmVudC5zY2FsZVldWzAgfCB4ICogY29tcG9uZW50LnNjYWxlWF07CiAgICAgICAgICAgICsrb2k7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBvdXQ7CiAgICB9CiAgfQoKICBjbGFzcyBKcGVnRGVjb2RlciBleHRlbmRzIEJhc2VEZWNvZGVyIHsKICAgIGNvbnN0cnVjdG9yKGZpbGVEaXJlY3RvcnkpIHsKICAgICAgc3VwZXIoKTsKICAgICAgdGhpcy5yZWFkZXIgPSBuZXcgSnBlZ1N0cmVhbVJlYWRlcigpOwogICAgICBpZiAoZmlsZURpcmVjdG9yeS5KUEVHVGFibGVzKSB7CiAgICAgICAgdGhpcy5yZWFkZXIucGFyc2UoZmlsZURpcmVjdG9yeS5KUEVHVGFibGVzKTsKICAgICAgfQogICAgfQoKICAgIGRlY29kZUJsb2NrKGJ1ZmZlcikgewogICAgICB0aGlzLnJlYWRlci5yZXNldEZyYW1lcygpOwogICAgICB0aGlzLnJlYWRlci5wYXJzZShuZXcgVWludDhBcnJheShidWZmZXIpKTsKICAgICAgcmV0dXJuIHRoaXMucmVhZGVyLmdldFJlc3VsdCgpLmJ1ZmZlcjsKICAgIH0KICB9CgogIC8qISBwYWtvIDIuMC40IGh0dHBzOi8vZ2l0aHViLmNvbS9ub2RlY2EvcGFrbyBAbGljZW5zZSAoTUlUIEFORCBabGliKSAqLwogIC8vIChDKSAxOTk1LTIwMTMgSmVhbi1sb3VwIEdhaWxseSBhbmQgTWFyayBBZGxlcgogIC8vIChDKSAyMDE0LTIwMTcgVml0YWx5IFB1enJpbiBhbmQgQW5kcmV5IFR1cGl0c2luCiAgLy8KICAvLyBUaGlzIHNvZnR3YXJlIGlzIHByb3ZpZGVkICdhcy1pcycsIHdpdGhvdXQgYW55IGV4cHJlc3Mgb3IgaW1wbGllZAogIC8vIHdhcnJhbnR5LiBJbiBubyBldmVudCB3aWxsIHRoZSBhdXRob3JzIGJlIGhlbGQgbGlhYmxlIGZvciBhbnkgZGFtYWdlcwogIC8vIGFyaXNpbmcgZnJvbSB0aGUgdXNlIG9mIHRoaXMgc29mdHdhcmUuCiAgLy8KICAvLyBQZXJtaXNzaW9uIGlzIGdyYW50ZWQgdG8gYW55b25lIHRvIHVzZSB0aGlzIHNvZnR3YXJlIGZvciBhbnkgcHVycG9zZSwKICAvLyBpbmNsdWRpbmcgY29tbWVyY2lhbCBhcHBsaWNhdGlvbnMsIGFuZCB0byBhbHRlciBpdCBhbmQgcmVkaXN0cmlidXRlIGl0CiAgLy8gZnJlZWx5LCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgcmVzdHJpY3Rpb25zOgogIC8vCiAgLy8gMS4gVGhlIG9yaWdpbiBvZiB0aGlzIHNvZnR3YXJlIG11c3Qgbm90IGJlIG1pc3JlcHJlc2VudGVkOyB5b3UgbXVzdCBub3QKICAvLyAgIGNsYWltIHRoYXQgeW91IHdyb3RlIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS4gSWYgeW91IHVzZSB0aGlzIHNvZnR3YXJlCiAgLy8gICBpbiBhIHByb2R1Y3QsIGFuIGFja25vd2xlZGdtZW50IGluIHRoZSBwcm9kdWN0IGRvY3VtZW50YXRpb24gd291bGQgYmUKICAvLyAgIGFwcHJlY2lhdGVkIGJ1dCBpcyBub3QgcmVxdWlyZWQuCiAgLy8gMi4gQWx0ZXJlZCBzb3VyY2UgdmVyc2lvbnMgbXVzdCBiZSBwbGFpbmx5IG1hcmtlZCBhcyBzdWNoLCBhbmQgbXVzdCBub3QgYmUKICAvLyAgIG1pc3JlcHJlc2VudGVkIGFzIGJlaW5nIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS4KICAvLyAzLiBUaGlzIG5vdGljZSBtYXkgbm90IGJlIHJlbW92ZWQgb3IgYWx0ZXJlZCBmcm9tIGFueSBzb3VyY2UgZGlzdHJpYnV0aW9uLgoKICAvKiBlc2xpbnQtZGlzYWJsZSBzcGFjZS11bmFyeS1vcHMgKi8KCiAgLyogUHVibGljIGNvbnN0YW50cyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki8KICAvKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qLwoKCiAgLy9jb25zdCBaX0ZJTFRFUkVEICAgICAgICAgID0gMTsKICAvL2NvbnN0IFpfSFVGRk1BTl9PTkxZICAgICAgPSAyOwogIC8vY29uc3QgWl9STEUgICAgICAgICAgICAgICA9IDM7CiAgY29uc3QgWl9GSVhFRCQxICAgICAgICAgICAgICAgPSA0OwogIC8vY29uc3QgWl9ERUZBVUxUX1NUUkFURUdZICA9IDA7CgogIC8qIFBvc3NpYmxlIHZhbHVlcyBvZiB0aGUgZGF0YV90eXBlIGZpZWxkICh0aG91Z2ggc2VlIGluZmxhdGUoKSkgKi8KICBjb25zdCBaX0JJTkFSWSAgICAgICAgICAgICAgPSAwOwogIGNvbnN0IFpfVEVYVCAgICAgICAgICAgICAgICA9IDE7CiAgLy9jb25zdCBaX0FTQ0lJICAgICAgICAgICAgID0gMTsgLy8gPSBaX1RFWFQKICBjb25zdCBaX1VOS05PV04kMSAgICAgICAgICAgICA9IDI7CgogIC8qPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovCgoKICBmdW5jdGlvbiB6ZXJvJDEoYnVmKSB7IGxldCBsZW4gPSBidWYubGVuZ3RoOyB3aGlsZSAoLS1sZW4gPj0gMCkgeyBidWZbbGVuXSA9IDA7IH0gfQoKICAvLyBGcm9tIHp1dGlsLmgKCiAgY29uc3QgU1RPUkVEX0JMT0NLID0gMDsKICBjb25zdCBTVEFUSUNfVFJFRVMgPSAxOwogIGNvbnN0IERZTl9UUkVFUyAgICA9IDI7CiAgLyogVGhlIHRocmVlIGtpbmRzIG9mIGJsb2NrIHR5cGUgKi8KCiAgY29uc3QgTUlOX01BVENIJDEgICAgPSAzOwogIGNvbnN0IE1BWF9NQVRDSCQxICAgID0gMjU4OwogIC8qIFRoZSBtaW5pbXVtIGFuZCBtYXhpbXVtIG1hdGNoIGxlbmd0aHMgKi8KCiAgLy8gRnJvbSBkZWZsYXRlLmgKICAvKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgKiBJbnRlcm5hbCBjb21wcmVzc2lvbiBzdGF0ZS4KICAgKi8KCiAgY29uc3QgTEVOR1RIX0NPREVTJDEgID0gMjk7CiAgLyogbnVtYmVyIG9mIGxlbmd0aCBjb2Rlcywgbm90IGNvdW50aW5nIHRoZSBzcGVjaWFsIEVORF9CTE9DSyBjb2RlICovCgogIGNvbnN0IExJVEVSQUxTJDEgICAgICA9IDI1NjsKICAvKiBudW1iZXIgb2YgbGl0ZXJhbCBieXRlcyAwLi4yNTUgKi8KCiAgY29uc3QgTF9DT0RFUyQxICAgICAgID0gTElURVJBTFMkMSArIDEgKyBMRU5HVEhfQ09ERVMkMTsKICAvKiBudW1iZXIgb2YgTGl0ZXJhbCBvciBMZW5ndGggY29kZXMsIGluY2x1ZGluZyB0aGUgRU5EX0JMT0NLIGNvZGUgKi8KCiAgY29uc3QgRF9DT0RFUyQxICAgICAgID0gMzA7CiAgLyogbnVtYmVyIG9mIGRpc3RhbmNlIGNvZGVzICovCgogIGNvbnN0IEJMX0NPREVTJDEgICAgICA9IDE5OwogIC8qIG51bWJlciBvZiBjb2RlcyB1c2VkIHRvIHRyYW5zZmVyIHRoZSBiaXQgbGVuZ3RocyAqLwoKICBjb25zdCBIRUFQX1NJWkUkMSAgICAgPSAyICogTF9DT0RFUyQxICsgMTsKICAvKiBtYXhpbXVtIGhlYXAgc2l6ZSAqLwoKICBjb25zdCBNQVhfQklUUyQxICAgICAgPSAxNTsKICAvKiBBbGwgY29kZXMgbXVzdCBub3QgZXhjZWVkIE1BWF9CSVRTIGJpdHMgKi8KCiAgY29uc3QgQnVmX3NpemUgICAgICA9IDE2OwogIC8qIHNpemUgb2YgYml0IGJ1ZmZlciBpbiBiaV9idWYgKi8KCgogIC8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAqIENvbnN0YW50cwogICAqLwoKICBjb25zdCBNQVhfQkxfQklUUyA9IDc7CiAgLyogQml0IGxlbmd0aCBjb2RlcyBtdXN0IG5vdCBleGNlZWQgTUFYX0JMX0JJVFMgYml0cyAqLwoKICBjb25zdCBFTkRfQkxPQ0sgICA9IDI1NjsKICAvKiBlbmQgb2YgYmxvY2sgbGl0ZXJhbCBjb2RlICovCgogIGNvbnN0IFJFUF8zXzYgICAgID0gMTY7CiAgLyogcmVwZWF0IHByZXZpb3VzIGJpdCBsZW5ndGggMy02IHRpbWVzICgyIGJpdHMgb2YgcmVwZWF0IGNvdW50KSAqLwoKICBjb25zdCBSRVBaXzNfMTAgICA9IDE3OwogIC8qIHJlcGVhdCBhIHplcm8gbGVuZ3RoIDMtMTAgdGltZXMgICgzIGJpdHMgb2YgcmVwZWF0IGNvdW50KSAqLwoKICBjb25zdCBSRVBaXzExXzEzOCA9IDE4OwogIC8qIHJlcGVhdCBhIHplcm8gbGVuZ3RoIDExLTEzOCB0aW1lcyAgKDcgYml0cyBvZiByZXBlYXQgY291bnQpICovCgogIC8qIGVzbGludC1kaXNhYmxlIGNvbW1hLXNwYWNpbmcsYXJyYXktYnJhY2tldC1zcGFjaW5nICovCiAgY29uc3QgZXh0cmFfbGJpdHMgPSAgIC8qIGV4dHJhIGJpdHMgZm9yIGVhY2ggbGVuZ3RoIGNvZGUgKi8KICAgIG5ldyBVaW50OEFycmF5KFswLDAsMCwwLDAsMCwwLDAsMSwxLDEsMSwyLDIsMiwyLDMsMywzLDMsNCw0LDQsNCw1LDUsNSw1LDBdKTsKCiAgY29uc3QgZXh0cmFfZGJpdHMgPSAgIC8qIGV4dHJhIGJpdHMgZm9yIGVhY2ggZGlzdGFuY2UgY29kZSAqLwogICAgbmV3IFVpbnQ4QXJyYXkoWzAsMCwwLDAsMSwxLDIsMiwzLDMsNCw0LDUsNSw2LDYsNyw3LDgsOCw5LDksMTAsMTAsMTEsMTEsMTIsMTIsMTMsMTNdKTsKCiAgY29uc3QgZXh0cmFfYmxiaXRzID0gIC8qIGV4dHJhIGJpdHMgZm9yIGVhY2ggYml0IGxlbmd0aCBjb2RlICovCiAgICBuZXcgVWludDhBcnJheShbMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwyLDMsN10pOwoKICBjb25zdCBibF9vcmRlciA9CiAgICBuZXcgVWludDhBcnJheShbMTYsMTcsMTgsMCw4LDcsOSw2LDEwLDUsMTEsNCwxMiwzLDEzLDIsMTQsMSwxNV0pOwogIC8qIGVzbGludC1lbmFibGUgY29tbWEtc3BhY2luZyxhcnJheS1icmFja2V0LXNwYWNpbmcgKi8KCiAgLyogVGhlIGxlbmd0aHMgb2YgdGhlIGJpdCBsZW5ndGggY29kZXMgYXJlIHNlbnQgaW4gb3JkZXIgb2YgZGVjcmVhc2luZwogICAqIHByb2JhYmlsaXR5LCB0byBhdm9pZCB0cmFuc21pdHRpbmcgdGhlIGxlbmd0aHMgZm9yIHVudXNlZCBiaXQgbGVuZ3RoIGNvZGVzLgogICAqLwoKICAvKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgKiBMb2NhbCBkYXRhLiBUaGVzZSBhcmUgaW5pdGlhbGl6ZWQgb25seSBvbmNlLgogICAqLwoKICAvLyBXZSBwcmUtZmlsbCBhcnJheXMgd2l0aCAwIHRvIGF2b2lkIHVuaW5pdGlhbGl6ZWQgZ2FwcwoKICBjb25zdCBESVNUX0NPREVfTEVOID0gNTEyOyAvKiBzZWUgZGVmaW5pdGlvbiBvZiBhcnJheSBkaXN0X2NvZGUgYmVsb3cgKi8KCiAgLy8gISEhISBVc2UgZmxhdCBhcnJheSBpbnN0ZWFkIG9mIHN0cnVjdHVyZSwgRnJlcSA9IGkqMiwgTGVuID0gaSoyKzEKICBjb25zdCBzdGF0aWNfbHRyZWUgID0gbmV3IEFycmF5KChMX0NPREVTJDEgKyAyKSAqIDIpOwogIHplcm8kMShzdGF0aWNfbHRyZWUpOwogIC8qIFRoZSBzdGF0aWMgbGl0ZXJhbCB0cmVlLiBTaW5jZSB0aGUgYml0IGxlbmd0aHMgYXJlIGltcG9zZWQsIHRoZXJlIGlzIG5vCiAgICogbmVlZCBmb3IgdGhlIExfQ09ERVMgZXh0cmEgY29kZXMgdXNlZCBkdXJpbmcgaGVhcCBjb25zdHJ1Y3Rpb24uIEhvd2V2ZXIKICAgKiBUaGUgY29kZXMgMjg2IGFuZCAyODcgYXJlIG5lZWRlZCB0byBidWlsZCBhIGNhbm9uaWNhbCB0cmVlIChzZWUgX3RyX2luaXQKICAgKiBiZWxvdykuCiAgICovCgogIGNvbnN0IHN0YXRpY19kdHJlZSAgPSBuZXcgQXJyYXkoRF9DT0RFUyQxICogMik7CiAgemVybyQxKHN0YXRpY19kdHJlZSk7CiAgLyogVGhlIHN0YXRpYyBkaXN0YW5jZSB0cmVlLiAoQWN0dWFsbHkgYSB0cml2aWFsIHRyZWUgc2luY2UgYWxsIGNvZGVzIHVzZQogICAqIDUgYml0cy4pCiAgICovCgogIGNvbnN0IF9kaXN0X2NvZGUgICAgPSBuZXcgQXJyYXkoRElTVF9DT0RFX0xFTik7CiAgemVybyQxKF9kaXN0X2NvZGUpOwogIC8qIERpc3RhbmNlIGNvZGVzLiBUaGUgZmlyc3QgMjU2IHZhbHVlcyBjb3JyZXNwb25kIHRvIHRoZSBkaXN0YW5jZXMKICAgKiAzIC4uIDI1OCwgdGhlIGxhc3QgMjU2IHZhbHVlcyBjb3JyZXNwb25kIHRvIHRoZSB0b3AgOCBiaXRzIG9mCiAgICogdGhlIDE1IGJpdCBkaXN0YW5jZXMuCiAgICovCgogIGNvbnN0IF9sZW5ndGhfY29kZSAgPSBuZXcgQXJyYXkoTUFYX01BVENIJDEgLSBNSU5fTUFUQ0gkMSArIDEpOwogIHplcm8kMShfbGVuZ3RoX2NvZGUpOwogIC8qIGxlbmd0aCBjb2RlIGZvciBlYWNoIG5vcm1hbGl6ZWQgbWF0Y2ggbGVuZ3RoICgwID09IE1JTl9NQVRDSCkgKi8KCiAgY29uc3QgYmFzZV9sZW5ndGggICA9IG5ldyBBcnJheShMRU5HVEhfQ09ERVMkMSk7CiAgemVybyQxKGJhc2VfbGVuZ3RoKTsKICAvKiBGaXJzdCBub3JtYWxpemVkIGxlbmd0aCBmb3IgZWFjaCBjb2RlICgwID0gTUlOX01BVENIKSAqLwoKICBjb25zdCBiYXNlX2Rpc3QgICAgID0gbmV3IEFycmF5KERfQ09ERVMkMSk7CiAgemVybyQxKGJhc2VfZGlzdCk7CiAgLyogRmlyc3Qgbm9ybWFsaXplZCBkaXN0YW5jZSBmb3IgZWFjaCBjb2RlICgwID0gZGlzdGFuY2Ugb2YgMSkgKi8KCgogIGZ1bmN0aW9uIFN0YXRpY1RyZWVEZXNjKHN0YXRpY190cmVlLCBleHRyYV9iaXRzLCBleHRyYV9iYXNlLCBlbGVtcywgbWF4X2xlbmd0aCkgewoKICAgIHRoaXMuc3RhdGljX3RyZWUgID0gc3RhdGljX3RyZWU7ICAvKiBzdGF0aWMgdHJlZSBvciBOVUxMICovCiAgICB0aGlzLmV4dHJhX2JpdHMgICA9IGV4dHJhX2JpdHM7ICAgLyogZXh0cmEgYml0cyBmb3IgZWFjaCBjb2RlIG9yIE5VTEwgKi8KICAgIHRoaXMuZXh0cmFfYmFzZSAgID0gZXh0cmFfYmFzZTsgICAvKiBiYXNlIGluZGV4IGZvciBleHRyYV9iaXRzICovCiAgICB0aGlzLmVsZW1zICAgICAgICA9IGVsZW1zOyAgICAgICAgLyogbWF4IG51bWJlciBvZiBlbGVtZW50cyBpbiB0aGUgdHJlZSAqLwogICAgdGhpcy5tYXhfbGVuZ3RoICAgPSBtYXhfbGVuZ3RoOyAgIC8qIG1heCBiaXQgbGVuZ3RoIGZvciB0aGUgY29kZXMgKi8KCiAgICAvLyBzaG93IGlmIGBzdGF0aWNfdHJlZWAgaGFzIGRhdGEgb3IgZHVtbXkgLSBuZWVkZWQgZm9yIG1vbm9tb3JwaGljIG9iamVjdHMKICAgIHRoaXMuaGFzX3N0cmVlICAgID0gc3RhdGljX3RyZWUgJiYgc3RhdGljX3RyZWUubGVuZ3RoOwogIH0KCgogIGxldCBzdGF0aWNfbF9kZXNjOwogIGxldCBzdGF0aWNfZF9kZXNjOwogIGxldCBzdGF0aWNfYmxfZGVzYzsKCgogIGZ1bmN0aW9uIFRyZWVEZXNjKGR5bl90cmVlLCBzdGF0X2Rlc2MpIHsKICAgIHRoaXMuZHluX3RyZWUgPSBkeW5fdHJlZTsgICAgIC8qIHRoZSBkeW5hbWljIHRyZWUgKi8KICAgIHRoaXMubWF4X2NvZGUgPSAwOyAgICAgICAgICAgIC8qIGxhcmdlc3QgY29kZSB3aXRoIG5vbiB6ZXJvIGZyZXF1ZW5jeSAqLwogICAgdGhpcy5zdGF0X2Rlc2MgPSBzdGF0X2Rlc2M7ICAgLyogdGhlIGNvcnJlc3BvbmRpbmcgc3RhdGljIHRyZWUgKi8KICB9CgoKCiAgY29uc3QgZF9jb2RlID0gKGRpc3QpID0+IHsKCiAgICByZXR1cm4gZGlzdCA8IDI1NiA/IF9kaXN0X2NvZGVbZGlzdF0gOiBfZGlzdF9jb2RlWzI1NiArIChkaXN0ID4+PiA3KV07CiAgfTsKCgogIC8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAqIE91dHB1dCBhIHNob3J0IExTQiBmaXJzdCBvbiB0aGUgc3RyZWFtLgogICAqIElOIGFzc2VydGlvbjogdGhlcmUgaXMgZW5vdWdoIHJvb20gaW4gcGVuZGluZ0J1Zi4KICAgKi8KICBjb25zdCBwdXRfc2hvcnQgPSAocywgdykgPT4gewogIC8vICAgIHB1dF9ieXRlKHMsICh1Y2gpKCh3KSAmIDB4ZmYpKTsKICAvLyAgICBwdXRfYnl0ZShzLCAodWNoKSgodXNoKSh3KSA+PiA4KSk7CiAgICBzLnBlbmRpbmdfYnVmW3MucGVuZGluZysrXSA9ICh3KSAmIDB4ZmY7CiAgICBzLnBlbmRpbmdfYnVmW3MucGVuZGluZysrXSA9ICh3ID4+PiA4KSAmIDB4ZmY7CiAgfTsKCgogIC8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAqIFNlbmQgYSB2YWx1ZSBvbiBhIGdpdmVuIG51bWJlciBvZiBiaXRzLgogICAqIElOIGFzc2VydGlvbjogbGVuZ3RoIDw9IDE2IGFuZCB2YWx1ZSBmaXRzIGluIGxlbmd0aCBiaXRzLgogICAqLwogIGNvbnN0IHNlbmRfYml0cyA9IChzLCB2YWx1ZSwgbGVuZ3RoKSA9PiB7CgogICAgaWYgKHMuYmlfdmFsaWQgPiAoQnVmX3NpemUgLSBsZW5ndGgpKSB7CiAgICAgIHMuYmlfYnVmIHw9ICh2YWx1ZSA8PCBzLmJpX3ZhbGlkKSAmIDB4ZmZmZjsKICAgICAgcHV0X3Nob3J0KHMsIHMuYmlfYnVmKTsKICAgICAgcy5iaV9idWYgPSB2YWx1ZSA+PiAoQnVmX3NpemUgLSBzLmJpX3ZhbGlkKTsKICAgICAgcy5iaV92YWxpZCArPSBsZW5ndGggLSBCdWZfc2l6ZTsKICAgIH0gZWxzZSB7CiAgICAgIHMuYmlfYnVmIHw9ICh2YWx1ZSA8PCBzLmJpX3ZhbGlkKSAmIDB4ZmZmZjsKICAgICAgcy5iaV92YWxpZCArPSBsZW5ndGg7CiAgICB9CiAgfTsKCgogIGNvbnN0IHNlbmRfY29kZSA9IChzLCBjLCB0cmVlKSA9PiB7CgogICAgc2VuZF9iaXRzKHMsIHRyZWVbYyAqIDJdLyouQ29kZSovLCB0cmVlW2MgKiAyICsgMV0vKi5MZW4qLyk7CiAgfTsKCgogIC8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAqIFJldmVyc2UgdGhlIGZpcnN0IGxlbiBiaXRzIG9mIGEgY29kZSwgdXNpbmcgc3RyYWlnaHRmb3J3YXJkIGNvZGUgKGEgZmFzdGVyCiAgICogbWV0aG9kIHdvdWxkIHVzZSBhIHRhYmxlKQogICAqIElOIGFzc2VydGlvbjogMSA8PSBsZW4gPD0gMTUKICAgKi8KICBjb25zdCBiaV9yZXZlcnNlID0gKGNvZGUsIGxlbikgPT4gewoKICAgIGxldCByZXMgPSAwOwogICAgZG8gewogICAgICByZXMgfD0gY29kZSAmIDE7CiAgICAgIGNvZGUgPj4+PSAxOwogICAgICByZXMgPDw9IDE7CiAgICB9IHdoaWxlICgtLWxlbiA+IDApOwogICAgcmV0dXJuIHJlcyA+Pj4gMTsKICB9OwoKCiAgLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgICogRmx1c2ggdGhlIGJpdCBidWZmZXIsIGtlZXBpbmcgYXQgbW9zdCA3IGJpdHMgaW4gaXQuCiAgICovCiAgY29uc3QgYmlfZmx1c2ggPSAocykgPT4gewoKICAgIGlmIChzLmJpX3ZhbGlkID09PSAxNikgewogICAgICBwdXRfc2hvcnQocywgcy5iaV9idWYpOwogICAgICBzLmJpX2J1ZiA9IDA7CiAgICAgIHMuYmlfdmFsaWQgPSAwOwoKICAgIH0gZWxzZSBpZiAocy5iaV92YWxpZCA+PSA4KSB7CiAgICAgIHMucGVuZGluZ19idWZbcy5wZW5kaW5nKytdID0gcy5iaV9idWYgJiAweGZmOwogICAgICBzLmJpX2J1ZiA+Pj0gODsKICAgICAgcy5iaV92YWxpZCAtPSA4OwogICAgfQogIH07CgoKICAvKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgKiBDb21wdXRlIHRoZSBvcHRpbWFsIGJpdCBsZW5ndGhzIGZvciBhIHRyZWUgYW5kIHVwZGF0ZSB0aGUgdG90YWwgYml0IGxlbmd0aAogICAqIGZvciB0aGUgY3VycmVudCBibG9jay4KICAgKiBJTiBhc3NlcnRpb246IHRoZSBmaWVsZHMgZnJlcSBhbmQgZGFkIGFyZSBzZXQsIGhlYXBbaGVhcF9tYXhdIGFuZAogICAqICAgIGFib3ZlIGFyZSB0aGUgdHJlZSBub2RlcyBzb3J0ZWQgYnkgaW5jcmVhc2luZyBmcmVxdWVuY3kuCiAgICogT1VUIGFzc2VydGlvbnM6IHRoZSBmaWVsZCBsZW4gaXMgc2V0IHRvIHRoZSBvcHRpbWFsIGJpdCBsZW5ndGgsIHRoZQogICAqICAgICBhcnJheSBibF9jb3VudCBjb250YWlucyB0aGUgZnJlcXVlbmNpZXMgZm9yIGVhY2ggYml0IGxlbmd0aC4KICAgKiAgICAgVGhlIGxlbmd0aCBvcHRfbGVuIGlzIHVwZGF0ZWQ7IHN0YXRpY19sZW4gaXMgYWxzbyB1cGRhdGVkIGlmIHN0cmVlIGlzCiAgICogICAgIG5vdCBudWxsLgogICAqLwogIGNvbnN0IGdlbl9iaXRsZW4gPSAocywgZGVzYykgPT4KICAvLyAgICBkZWZsYXRlX3N0YXRlICpzOwogIC8vICAgIHRyZWVfZGVzYyAqZGVzYzsgICAgLyogdGhlIHRyZWUgZGVzY3JpcHRvciAqLwogIHsKICAgIGNvbnN0IHRyZWUgICAgICAgICAgICA9IGRlc2MuZHluX3RyZWU7CiAgICBjb25zdCBtYXhfY29kZSAgICAgICAgPSBkZXNjLm1heF9jb2RlOwogICAgY29uc3Qgc3RyZWUgICAgICAgICAgID0gZGVzYy5zdGF0X2Rlc2Muc3RhdGljX3RyZWU7CiAgICBjb25zdCBoYXNfc3RyZWUgICAgICAgPSBkZXNjLnN0YXRfZGVzYy5oYXNfc3RyZWU7CiAgICBjb25zdCBleHRyYSAgICAgICAgICAgPSBkZXNjLnN0YXRfZGVzYy5leHRyYV9iaXRzOwogICAgY29uc3QgYmFzZSAgICAgICAgICAgID0gZGVzYy5zdGF0X2Rlc2MuZXh0cmFfYmFzZTsKICAgIGNvbnN0IG1heF9sZW5ndGggICAgICA9IGRlc2Muc3RhdF9kZXNjLm1heF9sZW5ndGg7CiAgICBsZXQgaDsgICAgICAgICAgICAgIC8qIGhlYXAgaW5kZXggKi8KICAgIGxldCBuLCBtOyAgICAgICAgICAgLyogaXRlcmF0ZSBvdmVyIHRoZSB0cmVlIGVsZW1lbnRzICovCiAgICBsZXQgYml0czsgICAgICAgICAgIC8qIGJpdCBsZW5ndGggKi8KICAgIGxldCB4Yml0czsgICAgICAgICAgLyogZXh0cmEgYml0cyAqLwogICAgbGV0IGY7ICAgICAgICAgICAgICAvKiBmcmVxdWVuY3kgKi8KICAgIGxldCBvdmVyZmxvdyA9IDA7ICAgLyogbnVtYmVyIG9mIGVsZW1lbnRzIHdpdGggYml0IGxlbmd0aCB0b28gbGFyZ2UgKi8KCiAgICBmb3IgKGJpdHMgPSAwOyBiaXRzIDw9IE1BWF9CSVRTJDE7IGJpdHMrKykgewogICAgICBzLmJsX2NvdW50W2JpdHNdID0gMDsKICAgIH0KCiAgICAvKiBJbiBhIGZpcnN0IHBhc3MsIGNvbXB1dGUgdGhlIG9wdGltYWwgYml0IGxlbmd0aHMgKHdoaWNoIG1heQogICAgICogb3ZlcmZsb3cgaW4gdGhlIGNhc2Ugb2YgdGhlIGJpdCBsZW5ndGggdHJlZSkuCiAgICAgKi8KICAgIHRyZWVbcy5oZWFwW3MuaGVhcF9tYXhdICogMiArIDFdLyouTGVuKi8gPSAwOyAvKiByb290IG9mIHRoZSBoZWFwICovCgogICAgZm9yIChoID0gcy5oZWFwX21heCArIDE7IGggPCBIRUFQX1NJWkUkMTsgaCsrKSB7CiAgICAgIG4gPSBzLmhlYXBbaF07CiAgICAgIGJpdHMgPSB0cmVlW3RyZWVbbiAqIDIgKyAxXS8qLkRhZCovICogMiArIDFdLyouTGVuKi8gKyAxOwogICAgICBpZiAoYml0cyA+IG1heF9sZW5ndGgpIHsKICAgICAgICBiaXRzID0gbWF4X2xlbmd0aDsKICAgICAgICBvdmVyZmxvdysrOwogICAgICB9CiAgICAgIHRyZWVbbiAqIDIgKyAxXS8qLkxlbiovID0gYml0czsKICAgICAgLyogV2Ugb3ZlcndyaXRlIHRyZWVbbl0uRGFkIHdoaWNoIGlzIG5vIGxvbmdlciBuZWVkZWQgKi8KCiAgICAgIGlmIChuID4gbWF4X2NvZGUpIHsgY29udGludWU7IH0gLyogbm90IGEgbGVhZiBub2RlICovCgogICAgICBzLmJsX2NvdW50W2JpdHNdKys7CiAgICAgIHhiaXRzID0gMDsKICAgICAgaWYgKG4gPj0gYmFzZSkgewogICAgICAgIHhiaXRzID0gZXh0cmFbbiAtIGJhc2VdOwogICAgICB9CiAgICAgIGYgPSB0cmVlW24gKiAyXS8qLkZyZXEqLzsKICAgICAgcy5vcHRfbGVuICs9IGYgKiAoYml0cyArIHhiaXRzKTsKICAgICAgaWYgKGhhc19zdHJlZSkgewogICAgICAgIHMuc3RhdGljX2xlbiArPSBmICogKHN0cmVlW24gKiAyICsgMV0vKi5MZW4qLyArIHhiaXRzKTsKICAgICAgfQogICAgfQogICAgaWYgKG92ZXJmbG93ID09PSAwKSB7IHJldHVybjsgfQoKICAgIC8vIFRyYWNlKChzdGRlcnIsIlxuYml0IGxlbmd0aCBvdmVyZmxvd1xuIikpOwogICAgLyogVGhpcyBoYXBwZW5zIGZvciBleGFtcGxlIG9uIG9iajIgYW5kIHBpYyBvZiB0aGUgQ2FsZ2FyeSBjb3JwdXMgKi8KCiAgICAvKiBGaW5kIHRoZSBmaXJzdCBiaXQgbGVuZ3RoIHdoaWNoIGNvdWxkIGluY3JlYXNlOiAqLwogICAgZG8gewogICAgICBiaXRzID0gbWF4X2xlbmd0aCAtIDE7CiAgICAgIHdoaWxlIChzLmJsX2NvdW50W2JpdHNdID09PSAwKSB7IGJpdHMtLTsgfQogICAgICBzLmJsX2NvdW50W2JpdHNdLS07ICAgICAgLyogbW92ZSBvbmUgbGVhZiBkb3duIHRoZSB0cmVlICovCiAgICAgIHMuYmxfY291bnRbYml0cyArIDFdICs9IDI7IC8qIG1vdmUgb25lIG92ZXJmbG93IGl0ZW0gYXMgaXRzIGJyb3RoZXIgKi8KICAgICAgcy5ibF9jb3VudFttYXhfbGVuZ3RoXS0tOwogICAgICAvKiBUaGUgYnJvdGhlciBvZiB0aGUgb3ZlcmZsb3cgaXRlbSBhbHNvIG1vdmVzIG9uZSBzdGVwIHVwLAogICAgICAgKiBidXQgdGhpcyBkb2VzIG5vdCBhZmZlY3QgYmxfY291bnRbbWF4X2xlbmd0aF0KICAgICAgICovCiAgICAgIG92ZXJmbG93IC09IDI7CiAgICB9IHdoaWxlIChvdmVyZmxvdyA+IDApOwoKICAgIC8qIE5vdyByZWNvbXB1dGUgYWxsIGJpdCBsZW5ndGhzLCBzY2FubmluZyBpbiBpbmNyZWFzaW5nIGZyZXF1ZW5jeS4KICAgICAqIGggaXMgc3RpbGwgZXF1YWwgdG8gSEVBUF9TSVpFLiAoSXQgaXMgc2ltcGxlciB0byByZWNvbnN0cnVjdCBhbGwKICAgICAqIGxlbmd0aHMgaW5zdGVhZCBvZiBmaXhpbmcgb25seSB0aGUgd3Jvbmcgb25lcy4gVGhpcyBpZGVhIGlzIHRha2VuCiAgICAgKiBmcm9tICdhcicgd3JpdHRlbiBieSBIYXJ1aGlrbyBPa3VtdXJhLikKICAgICAqLwogICAgZm9yIChiaXRzID0gbWF4X2xlbmd0aDsgYml0cyAhPT0gMDsgYml0cy0tKSB7CiAgICAgIG4gPSBzLmJsX2NvdW50W2JpdHNdOwogICAgICB3aGlsZSAobiAhPT0gMCkgewogICAgICAgIG0gPSBzLmhlYXBbLS1oXTsKICAgICAgICBpZiAobSA+IG1heF9jb2RlKSB7IGNvbnRpbnVlOyB9CiAgICAgICAgaWYgKHRyZWVbbSAqIDIgKyAxXS8qLkxlbiovICE9PSBiaXRzKSB7CiAgICAgICAgICAvLyBUcmFjZSgoc3RkZXJyLCJjb2RlICVkIGJpdHMgJWQtPiVkXG4iLCBtLCB0cmVlW21dLkxlbiwgYml0cykpOwogICAgICAgICAgcy5vcHRfbGVuICs9IChiaXRzIC0gdHJlZVttICogMiArIDFdLyouTGVuKi8pICogdHJlZVttICogMl0vKi5GcmVxKi87CiAgICAgICAgICB0cmVlW20gKiAyICsgMV0vKi5MZW4qLyA9IGJpdHM7CiAgICAgICAgfQogICAgICAgIG4tLTsKICAgICAgfQogICAgfQogIH07CgoKICAvKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgKiBHZW5lcmF0ZSB0aGUgY29kZXMgZm9yIGEgZ2l2ZW4gdHJlZSBhbmQgYml0IGNvdW50cyAod2hpY2ggbmVlZCBub3QgYmUKICAgKiBvcHRpbWFsKS4KICAgKiBJTiBhc3NlcnRpb246IHRoZSBhcnJheSBibF9jb3VudCBjb250YWlucyB0aGUgYml0IGxlbmd0aCBzdGF0aXN0aWNzIGZvcgogICAqIHRoZSBnaXZlbiB0cmVlIGFuZCB0aGUgZmllbGQgbGVuIGlzIHNldCBmb3IgYWxsIHRyZWUgZWxlbWVudHMuCiAgICogT1VUIGFzc2VydGlvbjogdGhlIGZpZWxkIGNvZGUgaXMgc2V0IGZvciBhbGwgdHJlZSBlbGVtZW50cyBvZiBub24KICAgKiAgICAgemVybyBjb2RlIGxlbmd0aC4KICAgKi8KICBjb25zdCBnZW5fY29kZXMgPSAodHJlZSwgbWF4X2NvZGUsIGJsX2NvdW50KSA9PgogIC8vICAgIGN0X2RhdGEgKnRyZWU7ICAgICAgICAgICAgIC8qIHRoZSB0cmVlIHRvIGRlY29yYXRlICovCiAgLy8gICAgaW50IG1heF9jb2RlOyAgICAgICAgICAgICAgLyogbGFyZ2VzdCBjb2RlIHdpdGggbm9uIHplcm8gZnJlcXVlbmN5ICovCiAgLy8gICAgdXNoZiAqYmxfY291bnQ7ICAgICAgICAgICAgLyogbnVtYmVyIG9mIGNvZGVzIGF0IGVhY2ggYml0IGxlbmd0aCAqLwogIHsKICAgIGNvbnN0IG5leHRfY29kZSA9IG5ldyBBcnJheShNQVhfQklUUyQxICsgMSk7IC8qIG5leHQgY29kZSB2YWx1ZSBmb3IgZWFjaCBiaXQgbGVuZ3RoICovCiAgICBsZXQgY29kZSA9IDA7ICAgICAgICAgICAgICAvKiBydW5uaW5nIGNvZGUgdmFsdWUgKi8KICAgIGxldCBiaXRzOyAgICAgICAgICAgICAgICAgIC8qIGJpdCBpbmRleCAqLwogICAgbGV0IG47ICAgICAgICAgICAgICAgICAgICAgLyogY29kZSBpbmRleCAqLwoKICAgIC8qIFRoZSBkaXN0cmlidXRpb24gY291bnRzIGFyZSBmaXJzdCB1c2VkIHRvIGdlbmVyYXRlIHRoZSBjb2RlIHZhbHVlcwogICAgICogd2l0aG91dCBiaXQgcmV2ZXJzYWwuCiAgICAgKi8KICAgIGZvciAoYml0cyA9IDE7IGJpdHMgPD0gTUFYX0JJVFMkMTsgYml0cysrKSB7CiAgICAgIG5leHRfY29kZVtiaXRzXSA9IGNvZGUgPSAoY29kZSArIGJsX2NvdW50W2JpdHMgLSAxXSkgPDwgMTsKICAgIH0KICAgIC8qIENoZWNrIHRoYXQgdGhlIGJpdCBjb3VudHMgaW4gYmxfY291bnQgYXJlIGNvbnNpc3RlbnQuIFRoZSBsYXN0IGNvZGUKICAgICAqIG11c3QgYmUgYWxsIG9uZXMuCiAgICAgKi8KICAgIC8vQXNzZXJ0IChjb2RlICsgYmxfY291bnRbTUFYX0JJVFNdLTEgPT0gKDE8PE1BWF9CSVRTKS0xLAogICAgLy8gICAgICAgICJpbmNvbnNpc3RlbnQgYml0IGNvdW50cyIpOwogICAgLy9UcmFjZXYoKHN0ZGVyciwiXG5nZW5fY29kZXM6IG1heF9jb2RlICVkICIsIG1heF9jb2RlKSk7CgogICAgZm9yIChuID0gMDsgIG4gPD0gbWF4X2NvZGU7IG4rKykgewogICAgICBsZXQgbGVuID0gdHJlZVtuICogMiArIDFdLyouTGVuKi87CiAgICAgIGlmIChsZW4gPT09IDApIHsgY29udGludWU7IH0KICAgICAgLyogTm93IHJldmVyc2UgdGhlIGJpdHMgKi8KICAgICAgdHJlZVtuICogMl0vKi5Db2RlKi8gPSBiaV9yZXZlcnNlKG5leHRfY29kZVtsZW5dKyssIGxlbik7CgogICAgICAvL1RyYWNlY3YodHJlZSAhPSBzdGF0aWNfbHRyZWUsIChzdGRlcnIsIlxubiAlM2QgJWMgbCAlMmQgYyAlNHggKCV4KSAiLAogICAgICAvLyAgICAgbiwgKGlzZ3JhcGgobikgPyBuIDogJyAnKSwgbGVuLCB0cmVlW25dLkNvZGUsIG5leHRfY29kZVtsZW5dLTEpKTsKICAgIH0KICB9OwoKCiAgLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgICogSW5pdGlhbGl6ZSB0aGUgdmFyaW91cyAnY29uc3RhbnQnIHRhYmxlcy4KICAgKi8KICBjb25zdCB0cl9zdGF0aWNfaW5pdCA9ICgpID0+IHsKCiAgICBsZXQgbjsgICAgICAgIC8qIGl0ZXJhdGVzIG92ZXIgdHJlZSBlbGVtZW50cyAqLwogICAgbGV0IGJpdHM7ICAgICAvKiBiaXQgY291bnRlciAqLwogICAgbGV0IGxlbmd0aDsgICAvKiBsZW5ndGggdmFsdWUgKi8KICAgIGxldCBjb2RlOyAgICAgLyogY29kZSB2YWx1ZSAqLwogICAgbGV0IGRpc3Q7ICAgICAvKiBkaXN0YW5jZSBpbmRleCAqLwogICAgY29uc3QgYmxfY291bnQgPSBuZXcgQXJyYXkoTUFYX0JJVFMkMSArIDEpOwogICAgLyogbnVtYmVyIG9mIGNvZGVzIGF0IGVhY2ggYml0IGxlbmd0aCBmb3IgYW4gb3B0aW1hbCB0cmVlICovCgogICAgLy8gZG8gY2hlY2sgaW4gX3RyX2luaXQoKQogICAgLy9pZiAoc3RhdGljX2luaXRfZG9uZSkgcmV0dXJuOwoKICAgIC8qIEZvciBzb21lIGVtYmVkZGVkIHRhcmdldHMsIGdsb2JhbCB2YXJpYWJsZXMgYXJlIG5vdCBpbml0aWFsaXplZDogKi8KICAvKiNpZmRlZiBOT19JTklUX0dMT0JBTF9QT0lOVEVSUwogICAgc3RhdGljX2xfZGVzYy5zdGF0aWNfdHJlZSA9IHN0YXRpY19sdHJlZTsKICAgIHN0YXRpY19sX2Rlc2MuZXh0cmFfYml0cyA9IGV4dHJhX2xiaXRzOwogICAgc3RhdGljX2RfZGVzYy5zdGF0aWNfdHJlZSA9IHN0YXRpY19kdHJlZTsKICAgIHN0YXRpY19kX2Rlc2MuZXh0cmFfYml0cyA9IGV4dHJhX2RiaXRzOwogICAgc3RhdGljX2JsX2Rlc2MuZXh0cmFfYml0cyA9IGV4dHJhX2JsYml0czsKICAjZW5kaWYqLwoKICAgIC8qIEluaXRpYWxpemUgdGhlIG1hcHBpbmcgbGVuZ3RoICgwLi4yNTUpIC0+IGxlbmd0aCBjb2RlICgwLi4yOCkgKi8KICAgIGxlbmd0aCA9IDA7CiAgICBmb3IgKGNvZGUgPSAwOyBjb2RlIDwgTEVOR1RIX0NPREVTJDEgLSAxOyBjb2RlKyspIHsKICAgICAgYmFzZV9sZW5ndGhbY29kZV0gPSBsZW5ndGg7CiAgICAgIGZvciAobiA9IDA7IG4gPCAoMSA8PCBleHRyYV9sYml0c1tjb2RlXSk7IG4rKykgewogICAgICAgIF9sZW5ndGhfY29kZVtsZW5ndGgrK10gPSBjb2RlOwogICAgICB9CiAgICB9CiAgICAvL0Fzc2VydCAobGVuZ3RoID09IDI1NiwgInRyX3N0YXRpY19pbml0OiBsZW5ndGggIT0gMjU2Iik7CiAgICAvKiBOb3RlIHRoYXQgdGhlIGxlbmd0aCAyNTUgKG1hdGNoIGxlbmd0aCAyNTgpIGNhbiBiZSByZXByZXNlbnRlZAogICAgICogaW4gdHdvIGRpZmZlcmVudCB3YXlzOiBjb2RlIDI4NCArIDUgYml0cyBvciBjb2RlIDI4NSwgc28gd2UKICAgICAqIG92ZXJ3cml0ZSBsZW5ndGhfY29kZVsyNTVdIHRvIHVzZSB0aGUgYmVzdCBlbmNvZGluZzoKICAgICAqLwogICAgX2xlbmd0aF9jb2RlW2xlbmd0aCAtIDFdID0gY29kZTsKCiAgICAvKiBJbml0aWFsaXplIHRoZSBtYXBwaW5nIGRpc3QgKDAuLjMySykgLT4gZGlzdCBjb2RlICgwLi4yOSkgKi8KICAgIGRpc3QgPSAwOwogICAgZm9yIChjb2RlID0gMDsgY29kZSA8IDE2OyBjb2RlKyspIHsKICAgICAgYmFzZV9kaXN0W2NvZGVdID0gZGlzdDsKICAgICAgZm9yIChuID0gMDsgbiA8ICgxIDw8IGV4dHJhX2RiaXRzW2NvZGVdKTsgbisrKSB7CiAgICAgICAgX2Rpc3RfY29kZVtkaXN0KytdID0gY29kZTsKICAgICAgfQogICAgfQogICAgLy9Bc3NlcnQgKGRpc3QgPT0gMjU2LCAidHJfc3RhdGljX2luaXQ6IGRpc3QgIT0gMjU2Iik7CiAgICBkaXN0ID4+PSA3OyAvKiBmcm9tIG5vdyBvbiwgYWxsIGRpc3RhbmNlcyBhcmUgZGl2aWRlZCBieSAxMjggKi8KICAgIGZvciAoOyBjb2RlIDwgRF9DT0RFUyQxOyBjb2RlKyspIHsKICAgICAgYmFzZV9kaXN0W2NvZGVdID0gZGlzdCA8PCA3OwogICAgICBmb3IgKG4gPSAwOyBuIDwgKDEgPDwgKGV4dHJhX2RiaXRzW2NvZGVdIC0gNykpOyBuKyspIHsKICAgICAgICBfZGlzdF9jb2RlWzI1NiArIGRpc3QrK10gPSBjb2RlOwogICAgICB9CiAgICB9CiAgICAvL0Fzc2VydCAoZGlzdCA9PSAyNTYsICJ0cl9zdGF0aWNfaW5pdDogMjU2K2Rpc3QgIT0gNTEyIik7CgogICAgLyogQ29uc3RydWN0IHRoZSBjb2RlcyBvZiB0aGUgc3RhdGljIGxpdGVyYWwgdHJlZSAqLwogICAgZm9yIChiaXRzID0gMDsgYml0cyA8PSBNQVhfQklUUyQxOyBiaXRzKyspIHsKICAgICAgYmxfY291bnRbYml0c10gPSAwOwogICAgfQoKICAgIG4gPSAwOwogICAgd2hpbGUgKG4gPD0gMTQzKSB7CiAgICAgIHN0YXRpY19sdHJlZVtuICogMiArIDFdLyouTGVuKi8gPSA4OwogICAgICBuKys7CiAgICAgIGJsX2NvdW50WzhdKys7CiAgICB9CiAgICB3aGlsZSAobiA8PSAyNTUpIHsKICAgICAgc3RhdGljX2x0cmVlW24gKiAyICsgMV0vKi5MZW4qLyA9IDk7CiAgICAgIG4rKzsKICAgICAgYmxfY291bnRbOV0rKzsKICAgIH0KICAgIHdoaWxlIChuIDw9IDI3OSkgewogICAgICBzdGF0aWNfbHRyZWVbbiAqIDIgKyAxXS8qLkxlbiovID0gNzsKICAgICAgbisrOwogICAgICBibF9jb3VudFs3XSsrOwogICAgfQogICAgd2hpbGUgKG4gPD0gMjg3KSB7CiAgICAgIHN0YXRpY19sdHJlZVtuICogMiArIDFdLyouTGVuKi8gPSA4OwogICAgICBuKys7CiAgICAgIGJsX2NvdW50WzhdKys7CiAgICB9CiAgICAvKiBDb2RlcyAyODYgYW5kIDI4NyBkbyBub3QgZXhpc3QsIGJ1dCB3ZSBtdXN0IGluY2x1ZGUgdGhlbSBpbiB0aGUKICAgICAqIHRyZWUgY29uc3RydWN0aW9uIHRvIGdldCBhIGNhbm9uaWNhbCBIdWZmbWFuIHRyZWUgKGxvbmdlc3QgY29kZQogICAgICogYWxsIG9uZXMpCiAgICAgKi8KICAgIGdlbl9jb2RlcyhzdGF0aWNfbHRyZWUsIExfQ09ERVMkMSArIDEsIGJsX2NvdW50KTsKCiAgICAvKiBUaGUgc3RhdGljIGRpc3RhbmNlIHRyZWUgaXMgdHJpdmlhbDogKi8KICAgIGZvciAobiA9IDA7IG4gPCBEX0NPREVTJDE7IG4rKykgewogICAgICBzdGF0aWNfZHRyZWVbbiAqIDIgKyAxXS8qLkxlbiovID0gNTsKICAgICAgc3RhdGljX2R0cmVlW24gKiAyXS8qLkNvZGUqLyA9IGJpX3JldmVyc2UobiwgNSk7CiAgICB9CgogICAgLy8gTm93IGRhdGEgcmVhZHkgYW5kIHdlIGNhbiBpbml0IHN0YXRpYyB0cmVlcwogICAgc3RhdGljX2xfZGVzYyA9IG5ldyBTdGF0aWNUcmVlRGVzYyhzdGF0aWNfbHRyZWUsIGV4dHJhX2xiaXRzLCBMSVRFUkFMUyQxICsgMSwgTF9DT0RFUyQxLCBNQVhfQklUUyQxKTsKICAgIHN0YXRpY19kX2Rlc2MgPSBuZXcgU3RhdGljVHJlZURlc2Moc3RhdGljX2R0cmVlLCBleHRyYV9kYml0cywgMCwgICAgICAgICAgRF9DT0RFUyQxLCBNQVhfQklUUyQxKTsKICAgIHN0YXRpY19ibF9kZXNjID0gbmV3IFN0YXRpY1RyZWVEZXNjKG5ldyBBcnJheSgwKSwgZXh0cmFfYmxiaXRzLCAwLCAgICAgICAgIEJMX0NPREVTJDEsIE1BWF9CTF9CSVRTKTsKCiAgICAvL3N0YXRpY19pbml0X2RvbmUgPSB0cnVlOwogIH07CgoKICAvKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgKiBJbml0aWFsaXplIGEgbmV3IGJsb2NrLgogICAqLwogIGNvbnN0IGluaXRfYmxvY2sgPSAocykgPT4gewoKICAgIGxldCBuOyAvKiBpdGVyYXRlcyBvdmVyIHRyZWUgZWxlbWVudHMgKi8KCiAgICAvKiBJbml0aWFsaXplIHRoZSB0cmVlcy4gKi8KICAgIGZvciAobiA9IDA7IG4gPCBMX0NPREVTJDE7ICBuKyspIHsgcy5keW5fbHRyZWVbbiAqIDJdLyouRnJlcSovID0gMDsgfQogICAgZm9yIChuID0gMDsgbiA8IERfQ09ERVMkMTsgIG4rKykgeyBzLmR5bl9kdHJlZVtuICogMl0vKi5GcmVxKi8gPSAwOyB9CiAgICBmb3IgKG4gPSAwOyBuIDwgQkxfQ09ERVMkMTsgbisrKSB7IHMuYmxfdHJlZVtuICogMl0vKi5GcmVxKi8gPSAwOyB9CgogICAgcy5keW5fbHRyZWVbRU5EX0JMT0NLICogMl0vKi5GcmVxKi8gPSAxOwogICAgcy5vcHRfbGVuID0gcy5zdGF0aWNfbGVuID0gMDsKICAgIHMubGFzdF9saXQgPSBzLm1hdGNoZXMgPSAwOwogIH07CgoKICAvKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgKiBGbHVzaCB0aGUgYml0IGJ1ZmZlciBhbmQgYWxpZ24gdGhlIG91dHB1dCBvbiBhIGJ5dGUgYm91bmRhcnkKICAgKi8KICBjb25zdCBiaV93aW5kdXAgPSAocykgPT4KICB7CiAgICBpZiAocy5iaV92YWxpZCA+IDgpIHsKICAgICAgcHV0X3Nob3J0KHMsIHMuYmlfYnVmKTsKICAgIH0gZWxzZSBpZiAocy5iaV92YWxpZCA+IDApIHsKICAgICAgLy9wdXRfYnl0ZShzLCAoQnl0ZSlzLT5iaV9idWYpOwogICAgICBzLnBlbmRpbmdfYnVmW3MucGVuZGluZysrXSA9IHMuYmlfYnVmOwogICAgfQogICAgcy5iaV9idWYgPSAwOwogICAgcy5iaV92YWxpZCA9IDA7CiAgfTsKCiAgLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgICogQ29weSBhIHN0b3JlZCBibG9jaywgc3RvcmluZyBmaXJzdCB0aGUgbGVuZ3RoIGFuZCBpdHMKICAgKiBvbmUncyBjb21wbGVtZW50IGlmIHJlcXVlc3RlZC4KICAgKi8KICBjb25zdCBjb3B5X2Jsb2NrID0gKHMsIGJ1ZiwgbGVuLCBoZWFkZXIpID0+CiAgLy9EZWZsYXRlU3RhdGUgKnM7CiAgLy9jaGFyZiAgICAqYnVmOyAgICAvKiB0aGUgaW5wdXQgZGF0YSAqLwogIC8vdW5zaWduZWQgbGVuOyAgICAgLyogaXRzIGxlbmd0aCAqLwogIC8vaW50ICAgICAgaGVhZGVyOyAgLyogdHJ1ZSBpZiBibG9jayBoZWFkZXIgbXVzdCBiZSB3cml0dGVuICovCiAgewogICAgYmlfd2luZHVwKHMpOyAgICAgICAgLyogYWxpZ24gb24gYnl0ZSBib3VuZGFyeSAqLwoKICAgIGlmIChoZWFkZXIpIHsKICAgICAgcHV0X3Nob3J0KHMsIGxlbik7CiAgICAgIHB1dF9zaG9ydChzLCB+bGVuKTsKICAgIH0KICAvLyAgd2hpbGUgKGxlbi0tKSB7CiAgLy8gICAgcHV0X2J5dGUocywgKmJ1ZisrKTsKICAvLyAgfQogICAgcy5wZW5kaW5nX2J1Zi5zZXQocy53aW5kb3cuc3ViYXJyYXkoYnVmLCBidWYgKyBsZW4pLCBzLnBlbmRpbmcpOwogICAgcy5wZW5kaW5nICs9IGxlbjsKICB9OwoKICAvKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgKiBDb21wYXJlcyB0byBzdWJ0cmVlcywgdXNpbmcgdGhlIHRyZWUgZGVwdGggYXMgdGllIGJyZWFrZXIgd2hlbgogICAqIHRoZSBzdWJ0cmVlcyBoYXZlIGVxdWFsIGZyZXF1ZW5jeS4gVGhpcyBtaW5pbWl6ZXMgdGhlIHdvcnN0IGNhc2UgbGVuZ3RoLgogICAqLwogIGNvbnN0IHNtYWxsZXIgPSAodHJlZSwgbiwgbSwgZGVwdGgpID0+IHsKCiAgICBjb25zdCBfbjIgPSBuICogMjsKICAgIGNvbnN0IF9tMiA9IG0gKiAyOwogICAgcmV0dXJuICh0cmVlW19uMl0vKi5GcmVxKi8gPCB0cmVlW19tMl0vKi5GcmVxKi8gfHwKICAgICAgICAgICAodHJlZVtfbjJdLyouRnJlcSovID09PSB0cmVlW19tMl0vKi5GcmVxKi8gJiYgZGVwdGhbbl0gPD0gZGVwdGhbbV0pKTsKICB9OwoKICAvKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgKiBSZXN0b3JlIHRoZSBoZWFwIHByb3BlcnR5IGJ5IG1vdmluZyBkb3duIHRoZSB0cmVlIHN0YXJ0aW5nIGF0IG5vZGUgaywKICAgKiBleGNoYW5naW5nIGEgbm9kZSB3aXRoIHRoZSBzbWFsbGVzdCBvZiBpdHMgdHdvIHNvbnMgaWYgbmVjZXNzYXJ5LCBzdG9wcGluZwogICAqIHdoZW4gdGhlIGhlYXAgcHJvcGVydHkgaXMgcmUtZXN0YWJsaXNoZWQgKGVhY2ggZmF0aGVyIHNtYWxsZXIgdGhhbiBpdHMKICAgKiB0d28gc29ucykuCiAgICovCiAgY29uc3QgcHFkb3duaGVhcCA9IChzLCB0cmVlLCBrKSA9PgogIC8vICAgIGRlZmxhdGVfc3RhdGUgKnM7CiAgLy8gICAgY3RfZGF0YSAqdHJlZTsgIC8qIHRoZSB0cmVlIHRvIHJlc3RvcmUgKi8KICAvLyAgICBpbnQgazsgICAgICAgICAgICAgICAvKiBub2RlIHRvIG1vdmUgZG93biAqLwogIHsKICAgIGNvbnN0IHYgPSBzLmhlYXBba107CiAgICBsZXQgaiA9IGsgPDwgMTsgIC8qIGxlZnQgc29uIG9mIGsgKi8KICAgIHdoaWxlIChqIDw9IHMuaGVhcF9sZW4pIHsKICAgICAgLyogU2V0IGogdG8gdGhlIHNtYWxsZXN0IG9mIHRoZSB0d28gc29uczogKi8KICAgICAgaWYgKGogPCBzLmhlYXBfbGVuICYmCiAgICAgICAgc21hbGxlcih0cmVlLCBzLmhlYXBbaiArIDFdLCBzLmhlYXBbal0sIHMuZGVwdGgpKSB7CiAgICAgICAgaisrOwogICAgICB9CiAgICAgIC8qIEV4aXQgaWYgdiBpcyBzbWFsbGVyIHRoYW4gYm90aCBzb25zICovCiAgICAgIGlmIChzbWFsbGVyKHRyZWUsIHYsIHMuaGVhcFtqXSwgcy5kZXB0aCkpIHsgYnJlYWs7IH0KCiAgICAgIC8qIEV4Y2hhbmdlIHYgd2l0aCB0aGUgc21hbGxlc3Qgc29uICovCiAgICAgIHMuaGVhcFtrXSA9IHMuaGVhcFtqXTsKICAgICAgayA9IGo7CgogICAgICAvKiBBbmQgY29udGludWUgZG93biB0aGUgdHJlZSwgc2V0dGluZyBqIHRvIHRoZSBsZWZ0IHNvbiBvZiBrICovCiAgICAgIGogPDw9IDE7CiAgICB9CiAgICBzLmhlYXBba10gPSB2OwogIH07CgoKICAvLyBpbmxpbmVkIG1hbnVhbGx5CiAgLy8gY29uc3QgU01BTExFU1QgPSAxOwoKICAvKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgKiBTZW5kIHRoZSBibG9jayBkYXRhIGNvbXByZXNzZWQgdXNpbmcgdGhlIGdpdmVuIEh1ZmZtYW4gdHJlZXMKICAgKi8KICBjb25zdCBjb21wcmVzc19ibG9jayA9IChzLCBsdHJlZSwgZHRyZWUpID0+CiAgLy8gICAgZGVmbGF0ZV9zdGF0ZSAqczsKICAvLyAgICBjb25zdCBjdF9kYXRhICpsdHJlZTsgLyogbGl0ZXJhbCB0cmVlICovCiAgLy8gICAgY29uc3QgY3RfZGF0YSAqZHRyZWU7IC8qIGRpc3RhbmNlIHRyZWUgKi8KICB7CiAgICBsZXQgZGlzdDsgICAgICAgICAgIC8qIGRpc3RhbmNlIG9mIG1hdGNoZWQgc3RyaW5nICovCiAgICBsZXQgbGM7ICAgICAgICAgICAgIC8qIG1hdGNoIGxlbmd0aCBvciB1bm1hdGNoZWQgY2hhciAoaWYgZGlzdCA9PSAwKSAqLwogICAgbGV0IGx4ID0gMDsgICAgICAgICAvKiBydW5uaW5nIGluZGV4IGluIGxfYnVmICovCiAgICBsZXQgY29kZTsgICAgICAgICAgIC8qIHRoZSBjb2RlIHRvIHNlbmQgKi8KICAgIGxldCBleHRyYTsgICAgICAgICAgLyogbnVtYmVyIG9mIGV4dHJhIGJpdHMgdG8gc2VuZCAqLwoKICAgIGlmIChzLmxhc3RfbGl0ICE9PSAwKSB7CiAgICAgIGRvIHsKICAgICAgICBkaXN0ID0gKHMucGVuZGluZ19idWZbcy5kX2J1ZiArIGx4ICogMl0gPDwgOCkgfCAocy5wZW5kaW5nX2J1ZltzLmRfYnVmICsgbHggKiAyICsgMV0pOwogICAgICAgIGxjID0gcy5wZW5kaW5nX2J1ZltzLmxfYnVmICsgbHhdOwogICAgICAgIGx4Kys7CgogICAgICAgIGlmIChkaXN0ID09PSAwKSB7CiAgICAgICAgICBzZW5kX2NvZGUocywgbGMsIGx0cmVlKTsgLyogc2VuZCBhIGxpdGVyYWwgYnl0ZSAqLwogICAgICAgICAgLy9UcmFjZWN2KGlzZ3JhcGgobGMpLCAoc3RkZXJyLCIgJyVjJyAiLCBsYykpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAvKiBIZXJlLCBsYyBpcyB0aGUgbWF0Y2ggbGVuZ3RoIC0gTUlOX01BVENIICovCiAgICAgICAgICBjb2RlID0gX2xlbmd0aF9jb2RlW2xjXTsKICAgICAgICAgIHNlbmRfY29kZShzLCBjb2RlICsgTElURVJBTFMkMSArIDEsIGx0cmVlKTsgLyogc2VuZCB0aGUgbGVuZ3RoIGNvZGUgKi8KICAgICAgICAgIGV4dHJhID0gZXh0cmFfbGJpdHNbY29kZV07CiAgICAgICAgICBpZiAoZXh0cmEgIT09IDApIHsKICAgICAgICAgICAgbGMgLT0gYmFzZV9sZW5ndGhbY29kZV07CiAgICAgICAgICAgIHNlbmRfYml0cyhzLCBsYywgZXh0cmEpOyAgICAgICAvKiBzZW5kIHRoZSBleHRyYSBsZW5ndGggYml0cyAqLwogICAgICAgICAgfQogICAgICAgICAgZGlzdC0tOyAvKiBkaXN0IGlzIG5vdyB0aGUgbWF0Y2ggZGlzdGFuY2UgLSAxICovCiAgICAgICAgICBjb2RlID0gZF9jb2RlKGRpc3QpOwogICAgICAgICAgLy9Bc3NlcnQgKGNvZGUgPCBEX0NPREVTLCAiYmFkIGRfY29kZSIpOwoKICAgICAgICAgIHNlbmRfY29kZShzLCBjb2RlLCBkdHJlZSk7ICAgICAgIC8qIHNlbmQgdGhlIGRpc3RhbmNlIGNvZGUgKi8KICAgICAgICAgIGV4dHJhID0gZXh0cmFfZGJpdHNbY29kZV07CiAgICAgICAgICBpZiAoZXh0cmEgIT09IDApIHsKICAgICAgICAgICAgZGlzdCAtPSBiYXNlX2Rpc3RbY29kZV07CiAgICAgICAgICAgIHNlbmRfYml0cyhzLCBkaXN0LCBleHRyYSk7ICAgLyogc2VuZCB0aGUgZXh0cmEgZGlzdGFuY2UgYml0cyAqLwogICAgICAgICAgfQogICAgICAgIH0gLyogbGl0ZXJhbCBvciBtYXRjaCBwYWlyID8gKi8KCiAgICAgICAgLyogQ2hlY2sgdGhhdCB0aGUgb3ZlcmxheSBiZXR3ZWVuIHBlbmRpbmdfYnVmIGFuZCBkX2J1ZitsX2J1ZiBpcyBvazogKi8KICAgICAgICAvL0Fzc2VydCgodUludCkocy0+cGVuZGluZykgPCBzLT5saXRfYnVmc2l6ZSArIDIqbHgsCiAgICAgICAgLy8gICAgICAgInBlbmRpbmdCdWYgb3ZlcmZsb3ciKTsKCiAgICAgIH0gd2hpbGUgKGx4IDwgcy5sYXN0X2xpdCk7CiAgICB9CgogICAgc2VuZF9jb2RlKHMsIEVORF9CTE9DSywgbHRyZWUpOwogIH07CgoKICAvKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgKiBDb25zdHJ1Y3Qgb25lIEh1ZmZtYW4gdHJlZSBhbmQgYXNzaWducyB0aGUgY29kZSBiaXQgc3RyaW5ncyBhbmQgbGVuZ3Rocy4KICAgKiBVcGRhdGUgdGhlIHRvdGFsIGJpdCBsZW5ndGggZm9yIHRoZSBjdXJyZW50IGJsb2NrLgogICAqIElOIGFzc2VydGlvbjogdGhlIGZpZWxkIGZyZXEgaXMgc2V0IGZvciBhbGwgdHJlZSBlbGVtZW50cy4KICAgKiBPVVQgYXNzZXJ0aW9uczogdGhlIGZpZWxkcyBsZW4gYW5kIGNvZGUgYXJlIHNldCB0byB0aGUgb3B0aW1hbCBiaXQgbGVuZ3RoCiAgICogICAgIGFuZCBjb3JyZXNwb25kaW5nIGNvZGUuIFRoZSBsZW5ndGggb3B0X2xlbiBpcyB1cGRhdGVkOyBzdGF0aWNfbGVuIGlzCiAgICogICAgIGFsc28gdXBkYXRlZCBpZiBzdHJlZSBpcyBub3QgbnVsbC4gVGhlIGZpZWxkIG1heF9jb2RlIGlzIHNldC4KICAgKi8KICBjb25zdCBidWlsZF90cmVlID0gKHMsIGRlc2MpID0+CiAgLy8gICAgZGVmbGF0ZV9zdGF0ZSAqczsKICAvLyAgICB0cmVlX2Rlc2MgKmRlc2M7IC8qIHRoZSB0cmVlIGRlc2NyaXB0b3IgKi8KICB7CiAgICBjb25zdCB0cmVlICAgICA9IGRlc2MuZHluX3RyZWU7CiAgICBjb25zdCBzdHJlZSAgICA9IGRlc2Muc3RhdF9kZXNjLnN0YXRpY190cmVlOwogICAgY29uc3QgaGFzX3N0cmVlID0gZGVzYy5zdGF0X2Rlc2MuaGFzX3N0cmVlOwogICAgY29uc3QgZWxlbXMgICAgPSBkZXNjLnN0YXRfZGVzYy5lbGVtczsKICAgIGxldCBuLCBtOyAgICAgICAgICAvKiBpdGVyYXRlIG92ZXIgaGVhcCBlbGVtZW50cyAqLwogICAgbGV0IG1heF9jb2RlID0gLTE7IC8qIGxhcmdlc3QgY29kZSB3aXRoIG5vbiB6ZXJvIGZyZXF1ZW5jeSAqLwogICAgbGV0IG5vZGU7ICAgICAgICAgIC8qIG5ldyBub2RlIGJlaW5nIGNyZWF0ZWQgKi8KCiAgICAvKiBDb25zdHJ1Y3QgdGhlIGluaXRpYWwgaGVhcCwgd2l0aCBsZWFzdCBmcmVxdWVudCBlbGVtZW50IGluCiAgICAgKiBoZWFwW1NNQUxMRVNUXS4gVGhlIHNvbnMgb2YgaGVhcFtuXSBhcmUgaGVhcFsyKm5dIGFuZCBoZWFwWzIqbisxXS4KICAgICAqIGhlYXBbMF0gaXMgbm90IHVzZWQuCiAgICAgKi8KICAgIHMuaGVhcF9sZW4gPSAwOwogICAgcy5oZWFwX21heCA9IEhFQVBfU0laRSQxOwoKICAgIGZvciAobiA9IDA7IG4gPCBlbGVtczsgbisrKSB7CiAgICAgIGlmICh0cmVlW24gKiAyXS8qLkZyZXEqLyAhPT0gMCkgewogICAgICAgIHMuaGVhcFsrK3MuaGVhcF9sZW5dID0gbWF4X2NvZGUgPSBuOwogICAgICAgIHMuZGVwdGhbbl0gPSAwOwoKICAgICAgfSBlbHNlIHsKICAgICAgICB0cmVlW24gKiAyICsgMV0vKi5MZW4qLyA9IDA7CiAgICAgIH0KICAgIH0KCiAgICAvKiBUaGUgcGt6aXAgZm9ybWF0IHJlcXVpcmVzIHRoYXQgYXQgbGVhc3Qgb25lIGRpc3RhbmNlIGNvZGUgZXhpc3RzLAogICAgICogYW5kIHRoYXQgYXQgbGVhc3Qgb25lIGJpdCBzaG91bGQgYmUgc2VudCBldmVuIGlmIHRoZXJlIGlzIG9ubHkgb25lCiAgICAgKiBwb3NzaWJsZSBjb2RlLiBTbyB0byBhdm9pZCBzcGVjaWFsIGNoZWNrcyBsYXRlciBvbiB3ZSBmb3JjZSBhdCBsZWFzdAogICAgICogdHdvIGNvZGVzIG9mIG5vbiB6ZXJvIGZyZXF1ZW5jeS4KICAgICAqLwogICAgd2hpbGUgKHMuaGVhcF9sZW4gPCAyKSB7CiAgICAgIG5vZGUgPSBzLmhlYXBbKytzLmhlYXBfbGVuXSA9IChtYXhfY29kZSA8IDIgPyArK21heF9jb2RlIDogMCk7CiAgICAgIHRyZWVbbm9kZSAqIDJdLyouRnJlcSovID0gMTsKICAgICAgcy5kZXB0aFtub2RlXSA9IDA7CiAgICAgIHMub3B0X2xlbi0tOwoKICAgICAgaWYgKGhhc19zdHJlZSkgewogICAgICAgIHMuc3RhdGljX2xlbiAtPSBzdHJlZVtub2RlICogMiArIDFdLyouTGVuKi87CiAgICAgIH0KICAgICAgLyogbm9kZSBpcyAwIG9yIDEgc28gaXQgZG9lcyBub3QgaGF2ZSBleHRyYSBiaXRzICovCiAgICB9CiAgICBkZXNjLm1heF9jb2RlID0gbWF4X2NvZGU7CgogICAgLyogVGhlIGVsZW1lbnRzIGhlYXBbaGVhcF9sZW4vMisxIC4uIGhlYXBfbGVuXSBhcmUgbGVhdmVzIG9mIHRoZSB0cmVlLAogICAgICogZXN0YWJsaXNoIHN1Yi1oZWFwcyBvZiBpbmNyZWFzaW5nIGxlbmd0aHM6CiAgICAgKi8KICAgIGZvciAobiA9IChzLmhlYXBfbGVuID4+IDEvKmludCAvMiovKTsgbiA+PSAxOyBuLS0pIHsgcHFkb3duaGVhcChzLCB0cmVlLCBuKTsgfQoKICAgIC8qIENvbnN0cnVjdCB0aGUgSHVmZm1hbiB0cmVlIGJ5IHJlcGVhdGVkbHkgY29tYmluaW5nIHRoZSBsZWFzdCB0d28KICAgICAqIGZyZXF1ZW50IG5vZGVzLgogICAgICovCiAgICBub2RlID0gZWxlbXM7ICAgICAgICAgICAgICAvKiBuZXh0IGludGVybmFsIG5vZGUgb2YgdGhlIHRyZWUgKi8KICAgIGRvIHsKICAgICAgLy9wcXJlbW92ZShzLCB0cmVlLCBuKTsgIC8qIG4gPSBub2RlIG9mIGxlYXN0IGZyZXF1ZW5jeSAqLwogICAgICAvKioqIHBxcmVtb3ZlICoqKi8KICAgICAgbiA9IHMuaGVhcFsxLypTTUFMTEVTVCovXTsKICAgICAgcy5oZWFwWzEvKlNNQUxMRVNUKi9dID0gcy5oZWFwW3MuaGVhcF9sZW4tLV07CiAgICAgIHBxZG93bmhlYXAocywgdHJlZSwgMS8qU01BTExFU1QqLyk7CiAgICAgIC8qKiovCgogICAgICBtID0gcy5oZWFwWzEvKlNNQUxMRVNUKi9dOyAvKiBtID0gbm9kZSBvZiBuZXh0IGxlYXN0IGZyZXF1ZW5jeSAqLwoKICAgICAgcy5oZWFwWy0tcy5oZWFwX21heF0gPSBuOyAvKiBrZWVwIHRoZSBub2RlcyBzb3J0ZWQgYnkgZnJlcXVlbmN5ICovCiAgICAgIHMuaGVhcFstLXMuaGVhcF9tYXhdID0gbTsKCiAgICAgIC8qIENyZWF0ZSBhIG5ldyBub2RlIGZhdGhlciBvZiBuIGFuZCBtICovCiAgICAgIHRyZWVbbm9kZSAqIDJdLyouRnJlcSovID0gdHJlZVtuICogMl0vKi5GcmVxKi8gKyB0cmVlW20gKiAyXS8qLkZyZXEqLzsKICAgICAgcy5kZXB0aFtub2RlXSA9IChzLmRlcHRoW25dID49IHMuZGVwdGhbbV0gPyBzLmRlcHRoW25dIDogcy5kZXB0aFttXSkgKyAxOwogICAgICB0cmVlW24gKiAyICsgMV0vKi5EYWQqLyA9IHRyZWVbbSAqIDIgKyAxXS8qLkRhZCovID0gbm9kZTsKCiAgICAgIC8qIGFuZCBpbnNlcnQgdGhlIG5ldyBub2RlIGluIHRoZSBoZWFwICovCiAgICAgIHMuaGVhcFsxLypTTUFMTEVTVCovXSA9IG5vZGUrKzsKICAgICAgcHFkb3duaGVhcChzLCB0cmVlLCAxLypTTUFMTEVTVCovKTsKCiAgICB9IHdoaWxlIChzLmhlYXBfbGVuID49IDIpOwoKICAgIHMuaGVhcFstLXMuaGVhcF9tYXhdID0gcy5oZWFwWzEvKlNNQUxMRVNUKi9dOwoKICAgIC8qIEF0IHRoaXMgcG9pbnQsIHRoZSBmaWVsZHMgZnJlcSBhbmQgZGFkIGFyZSBzZXQuIFdlIGNhbiBub3cKICAgICAqIGdlbmVyYXRlIHRoZSBiaXQgbGVuZ3Rocy4KICAgICAqLwogICAgZ2VuX2JpdGxlbihzLCBkZXNjKTsKCiAgICAvKiBUaGUgZmllbGQgbGVuIGlzIG5vdyBzZXQsIHdlIGNhbiBnZW5lcmF0ZSB0aGUgYml0IGNvZGVzICovCiAgICBnZW5fY29kZXModHJlZSwgbWF4X2NvZGUsIHMuYmxfY291bnQpOwogIH07CgoKICAvKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgKiBTY2FuIGEgbGl0ZXJhbCBvciBkaXN0YW5jZSB0cmVlIHRvIGRldGVybWluZSB0aGUgZnJlcXVlbmNpZXMgb2YgdGhlIGNvZGVzCiAgICogaW4gdGhlIGJpdCBsZW5ndGggdHJlZS4KICAgKi8KICBjb25zdCBzY2FuX3RyZWUgPSAocywgdHJlZSwgbWF4X2NvZGUpID0+CiAgLy8gICAgZGVmbGF0ZV9zdGF0ZSAqczsKICAvLyAgICBjdF9kYXRhICp0cmVlOyAgIC8qIHRoZSB0cmVlIHRvIGJlIHNjYW5uZWQgKi8KICAvLyAgICBpbnQgbWF4X2NvZGU7ICAgIC8qIGFuZCBpdHMgbGFyZ2VzdCBjb2RlIG9mIG5vbiB6ZXJvIGZyZXF1ZW5jeSAqLwogIHsKICAgIGxldCBuOyAgICAgICAgICAgICAgICAgICAgIC8qIGl0ZXJhdGVzIG92ZXIgYWxsIHRyZWUgZWxlbWVudHMgKi8KICAgIGxldCBwcmV2bGVuID0gLTE7ICAgICAgICAgIC8qIGxhc3QgZW1pdHRlZCBsZW5ndGggKi8KICAgIGxldCBjdXJsZW47ICAgICAgICAgICAgICAgIC8qIGxlbmd0aCBvZiBjdXJyZW50IGNvZGUgKi8KCiAgICBsZXQgbmV4dGxlbiA9IHRyZWVbMCAqIDIgKyAxXS8qLkxlbiovOyAvKiBsZW5ndGggb2YgbmV4dCBjb2RlICovCgogICAgbGV0IGNvdW50ID0gMDsgICAgICAgICAgICAgLyogcmVwZWF0IGNvdW50IG9mIHRoZSBjdXJyZW50IGNvZGUgKi8KICAgIGxldCBtYXhfY291bnQgPSA3OyAgICAgICAgIC8qIG1heCByZXBlYXQgY291bnQgKi8KICAgIGxldCBtaW5fY291bnQgPSA0OyAgICAgICAgIC8qIG1pbiByZXBlYXQgY291bnQgKi8KCiAgICBpZiAobmV4dGxlbiA9PT0gMCkgewogICAgICBtYXhfY291bnQgPSAxMzg7CiAgICAgIG1pbl9jb3VudCA9IDM7CiAgICB9CiAgICB0cmVlWyhtYXhfY29kZSArIDEpICogMiArIDFdLyouTGVuKi8gPSAweGZmZmY7IC8qIGd1YXJkICovCgogICAgZm9yIChuID0gMDsgbiA8PSBtYXhfY29kZTsgbisrKSB7CiAgICAgIGN1cmxlbiA9IG5leHRsZW47CiAgICAgIG5leHRsZW4gPSB0cmVlWyhuICsgMSkgKiAyICsgMV0vKi5MZW4qLzsKCiAgICAgIGlmICgrK2NvdW50IDwgbWF4X2NvdW50ICYmIGN1cmxlbiA9PT0gbmV4dGxlbikgewogICAgICAgIGNvbnRpbnVlOwoKICAgICAgfSBlbHNlIGlmIChjb3VudCA8IG1pbl9jb3VudCkgewogICAgICAgIHMuYmxfdHJlZVtjdXJsZW4gKiAyXS8qLkZyZXEqLyArPSBjb3VudDsKCiAgICAgIH0gZWxzZSBpZiAoY3VybGVuICE9PSAwKSB7CgogICAgICAgIGlmIChjdXJsZW4gIT09IHByZXZsZW4pIHsgcy5ibF90cmVlW2N1cmxlbiAqIDJdLyouRnJlcSovKys7IH0KICAgICAgICBzLmJsX3RyZWVbUkVQXzNfNiAqIDJdLyouRnJlcSovKys7CgogICAgICB9IGVsc2UgaWYgKGNvdW50IDw9IDEwKSB7CiAgICAgICAgcy5ibF90cmVlW1JFUFpfM18xMCAqIDJdLyouRnJlcSovKys7CgogICAgICB9IGVsc2UgewogICAgICAgIHMuYmxfdHJlZVtSRVBaXzExXzEzOCAqIDJdLyouRnJlcSovKys7CiAgICAgIH0KCiAgICAgIGNvdW50ID0gMDsKICAgICAgcHJldmxlbiA9IGN1cmxlbjsKCiAgICAgIGlmIChuZXh0bGVuID09PSAwKSB7CiAgICAgICAgbWF4X2NvdW50ID0gMTM4OwogICAgICAgIG1pbl9jb3VudCA9IDM7CgogICAgICB9IGVsc2UgaWYgKGN1cmxlbiA9PT0gbmV4dGxlbikgewogICAgICAgIG1heF9jb3VudCA9IDY7CiAgICAgICAgbWluX2NvdW50ID0gMzsKCiAgICAgIH0gZWxzZSB7CiAgICAgICAgbWF4X2NvdW50ID0gNzsKICAgICAgICBtaW5fY291bnQgPSA0OwogICAgICB9CiAgICB9CiAgfTsKCgogIC8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAqIFNlbmQgYSBsaXRlcmFsIG9yIGRpc3RhbmNlIHRyZWUgaW4gY29tcHJlc3NlZCBmb3JtLCB1c2luZyB0aGUgY29kZXMgaW4KICAgKiBibF90cmVlLgogICAqLwogIGNvbnN0IHNlbmRfdHJlZSA9IChzLCB0cmVlLCBtYXhfY29kZSkgPT4KICAvLyAgICBkZWZsYXRlX3N0YXRlICpzOwogIC8vICAgIGN0X2RhdGEgKnRyZWU7IC8qIHRoZSB0cmVlIHRvIGJlIHNjYW5uZWQgKi8KICAvLyAgICBpbnQgbWF4X2NvZGU7ICAgICAgIC8qIGFuZCBpdHMgbGFyZ2VzdCBjb2RlIG9mIG5vbiB6ZXJvIGZyZXF1ZW5jeSAqLwogIHsKICAgIGxldCBuOyAgICAgICAgICAgICAgICAgICAgIC8qIGl0ZXJhdGVzIG92ZXIgYWxsIHRyZWUgZWxlbWVudHMgKi8KICAgIGxldCBwcmV2bGVuID0gLTE7ICAgICAgICAgIC8qIGxhc3QgZW1pdHRlZCBsZW5ndGggKi8KICAgIGxldCBjdXJsZW47ICAgICAgICAgICAgICAgIC8qIGxlbmd0aCBvZiBjdXJyZW50IGNvZGUgKi8KCiAgICBsZXQgbmV4dGxlbiA9IHRyZWVbMCAqIDIgKyAxXS8qLkxlbiovOyAvKiBsZW5ndGggb2YgbmV4dCBjb2RlICovCgogICAgbGV0IGNvdW50ID0gMDsgICAgICAgICAgICAgLyogcmVwZWF0IGNvdW50IG9mIHRoZSBjdXJyZW50IGNvZGUgKi8KICAgIGxldCBtYXhfY291bnQgPSA3OyAgICAgICAgIC8qIG1heCByZXBlYXQgY291bnQgKi8KICAgIGxldCBtaW5fY291bnQgPSA0OyAgICAgICAgIC8qIG1pbiByZXBlYXQgY291bnQgKi8KCiAgICAvKiB0cmVlW21heF9jb2RlKzFdLkxlbiA9IC0xOyAqLyAgLyogZ3VhcmQgYWxyZWFkeSBzZXQgKi8KICAgIGlmIChuZXh0bGVuID09PSAwKSB7CiAgICAgIG1heF9jb3VudCA9IDEzODsKICAgICAgbWluX2NvdW50ID0gMzsKICAgIH0KCiAgICBmb3IgKG4gPSAwOyBuIDw9IG1heF9jb2RlOyBuKyspIHsKICAgICAgY3VybGVuID0gbmV4dGxlbjsKICAgICAgbmV4dGxlbiA9IHRyZWVbKG4gKyAxKSAqIDIgKyAxXS8qLkxlbiovOwoKICAgICAgaWYgKCsrY291bnQgPCBtYXhfY291bnQgJiYgY3VybGVuID09PSBuZXh0bGVuKSB7CiAgICAgICAgY29udGludWU7CgogICAgICB9IGVsc2UgaWYgKGNvdW50IDwgbWluX2NvdW50KSB7CiAgICAgICAgZG8geyBzZW5kX2NvZGUocywgY3VybGVuLCBzLmJsX3RyZWUpOyB9IHdoaWxlICgtLWNvdW50ICE9PSAwKTsKCiAgICAgIH0gZWxzZSBpZiAoY3VybGVuICE9PSAwKSB7CiAgICAgICAgaWYgKGN1cmxlbiAhPT0gcHJldmxlbikgewogICAgICAgICAgc2VuZF9jb2RlKHMsIGN1cmxlbiwgcy5ibF90cmVlKTsKICAgICAgICAgIGNvdW50LS07CiAgICAgICAgfQogICAgICAgIC8vQXNzZXJ0KGNvdW50ID49IDMgJiYgY291bnQgPD0gNiwgIiAzXzY/Iik7CiAgICAgICAgc2VuZF9jb2RlKHMsIFJFUF8zXzYsIHMuYmxfdHJlZSk7CiAgICAgICAgc2VuZF9iaXRzKHMsIGNvdW50IC0gMywgMik7CgogICAgICB9IGVsc2UgaWYgKGNvdW50IDw9IDEwKSB7CiAgICAgICAgc2VuZF9jb2RlKHMsIFJFUFpfM18xMCwgcy5ibF90cmVlKTsKICAgICAgICBzZW5kX2JpdHMocywgY291bnQgLSAzLCAzKTsKCiAgICAgIH0gZWxzZSB7CiAgICAgICAgc2VuZF9jb2RlKHMsIFJFUFpfMTFfMTM4LCBzLmJsX3RyZWUpOwogICAgICAgIHNlbmRfYml0cyhzLCBjb3VudCAtIDExLCA3KTsKICAgICAgfQoKICAgICAgY291bnQgPSAwOwogICAgICBwcmV2bGVuID0gY3VybGVuOwogICAgICBpZiAobmV4dGxlbiA9PT0gMCkgewogICAgICAgIG1heF9jb3VudCA9IDEzODsKICAgICAgICBtaW5fY291bnQgPSAzOwoKICAgICAgfSBlbHNlIGlmIChjdXJsZW4gPT09IG5leHRsZW4pIHsKICAgICAgICBtYXhfY291bnQgPSA2OwogICAgICAgIG1pbl9jb3VudCA9IDM7CgogICAgICB9IGVsc2UgewogICAgICAgIG1heF9jb3VudCA9IDc7CiAgICAgICAgbWluX2NvdW50ID0gNDsKICAgICAgfQogICAgfQogIH07CgoKICAvKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgKiBDb25zdHJ1Y3QgdGhlIEh1ZmZtYW4gdHJlZSBmb3IgdGhlIGJpdCBsZW5ndGhzIGFuZCByZXR1cm4gdGhlIGluZGV4IGluCiAgICogYmxfb3JkZXIgb2YgdGhlIGxhc3QgYml0IGxlbmd0aCBjb2RlIHRvIHNlbmQuCiAgICovCiAgY29uc3QgYnVpbGRfYmxfdHJlZSA9IChzKSA9PiB7CgogICAgbGV0IG1heF9ibGluZGV4OyAgLyogaW5kZXggb2YgbGFzdCBiaXQgbGVuZ3RoIGNvZGUgb2Ygbm9uIHplcm8gZnJlcSAqLwoKICAgIC8qIERldGVybWluZSB0aGUgYml0IGxlbmd0aCBmcmVxdWVuY2llcyBmb3IgbGl0ZXJhbCBhbmQgZGlzdGFuY2UgdHJlZXMgKi8KICAgIHNjYW5fdHJlZShzLCBzLmR5bl9sdHJlZSwgcy5sX2Rlc2MubWF4X2NvZGUpOwogICAgc2Nhbl90cmVlKHMsIHMuZHluX2R0cmVlLCBzLmRfZGVzYy5tYXhfY29kZSk7CgogICAgLyogQnVpbGQgdGhlIGJpdCBsZW5ndGggdHJlZTogKi8KICAgIGJ1aWxkX3RyZWUocywgcy5ibF9kZXNjKTsKICAgIC8qIG9wdF9sZW4gbm93IGluY2x1ZGVzIHRoZSBsZW5ndGggb2YgdGhlIHRyZWUgcmVwcmVzZW50YXRpb25zLCBleGNlcHQKICAgICAqIHRoZSBsZW5ndGhzIG9mIHRoZSBiaXQgbGVuZ3RocyBjb2RlcyBhbmQgdGhlIDUrNSs0IGJpdHMgZm9yIHRoZSBjb3VudHMuCiAgICAgKi8KCiAgICAvKiBEZXRlcm1pbmUgdGhlIG51bWJlciBvZiBiaXQgbGVuZ3RoIGNvZGVzIHRvIHNlbmQuIFRoZSBwa3ppcCBmb3JtYXQKICAgICAqIHJlcXVpcmVzIHRoYXQgYXQgbGVhc3QgNCBiaXQgbGVuZ3RoIGNvZGVzIGJlIHNlbnQuIChhcHBub3RlLnR4dCBzYXlzCiAgICAgKiAzIGJ1dCB0aGUgYWN0dWFsIHZhbHVlIHVzZWQgaXMgNC4pCiAgICAgKi8KICAgIGZvciAobWF4X2JsaW5kZXggPSBCTF9DT0RFUyQxIC0gMTsgbWF4X2JsaW5kZXggPj0gMzsgbWF4X2JsaW5kZXgtLSkgewogICAgICBpZiAocy5ibF90cmVlW2JsX29yZGVyW21heF9ibGluZGV4XSAqIDIgKyAxXS8qLkxlbiovICE9PSAwKSB7CiAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0KICAgIC8qIFVwZGF0ZSBvcHRfbGVuIHRvIGluY2x1ZGUgdGhlIGJpdCBsZW5ndGggdHJlZSBhbmQgY291bnRzICovCiAgICBzLm9wdF9sZW4gKz0gMyAqIChtYXhfYmxpbmRleCArIDEpICsgNSArIDUgKyA0OwogICAgLy9UcmFjZXYoKHN0ZGVyciwgIlxuZHluIHRyZWVzOiBkeW4gJWxkLCBzdGF0ICVsZCIsCiAgICAvLyAgICAgICAgcy0+b3B0X2xlbiwgcy0+c3RhdGljX2xlbikpOwoKICAgIHJldHVybiBtYXhfYmxpbmRleDsKICB9OwoKCiAgLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgICogU2VuZCB0aGUgaGVhZGVyIGZvciBhIGJsb2NrIHVzaW5nIGR5bmFtaWMgSHVmZm1hbiB0cmVlczogdGhlIGNvdW50cywgdGhlCiAgICogbGVuZ3RocyBvZiB0aGUgYml0IGxlbmd0aCBjb2RlcywgdGhlIGxpdGVyYWwgdHJlZSBhbmQgdGhlIGRpc3RhbmNlIHRyZWUuCiAgICogSU4gYXNzZXJ0aW9uOiBsY29kZXMgPj0gMjU3LCBkY29kZXMgPj0gMSwgYmxjb2RlcyA+PSA0LgogICAqLwogIGNvbnN0IHNlbmRfYWxsX3RyZWVzID0gKHMsIGxjb2RlcywgZGNvZGVzLCBibGNvZGVzKSA9PgogIC8vICAgIGRlZmxhdGVfc3RhdGUgKnM7CiAgLy8gICAgaW50IGxjb2RlcywgZGNvZGVzLCBibGNvZGVzOyAvKiBudW1iZXIgb2YgY29kZXMgZm9yIGVhY2ggdHJlZSAqLwogIHsKICAgIGxldCByYW5rOyAgICAgICAgICAgICAgICAgICAgLyogaW5kZXggaW4gYmxfb3JkZXIgKi8KCiAgICAvL0Fzc2VydCAobGNvZGVzID49IDI1NyAmJiBkY29kZXMgPj0gMSAmJiBibGNvZGVzID49IDQsICJub3QgZW5vdWdoIGNvZGVzIik7CiAgICAvL0Fzc2VydCAobGNvZGVzIDw9IExfQ09ERVMgJiYgZGNvZGVzIDw9IERfQ09ERVMgJiYgYmxjb2RlcyA8PSBCTF9DT0RFUywKICAgIC8vICAgICAgICAidG9vIG1hbnkgY29kZXMiKTsKICAgIC8vVHJhY2V2KChzdGRlcnIsICJcbmJsIGNvdW50czogIikpOwogICAgc2VuZF9iaXRzKHMsIGxjb2RlcyAtIDI1NywgNSk7IC8qIG5vdCArMjU1IGFzIHN0YXRlZCBpbiBhcHBub3RlLnR4dCAqLwogICAgc2VuZF9iaXRzKHMsIGRjb2RlcyAtIDEsICAgNSk7CiAgICBzZW5kX2JpdHMocywgYmxjb2RlcyAtIDQsICA0KTsgLyogbm90IC0zIGFzIHN0YXRlZCBpbiBhcHBub3RlLnR4dCAqLwogICAgZm9yIChyYW5rID0gMDsgcmFuayA8IGJsY29kZXM7IHJhbmsrKykgewogICAgICAvL1RyYWNldigoc3RkZXJyLCAiXG5ibCBjb2RlICUyZCAiLCBibF9vcmRlcltyYW5rXSkpOwogICAgICBzZW5kX2JpdHMocywgcy5ibF90cmVlW2JsX29yZGVyW3JhbmtdICogMiArIDFdLyouTGVuKi8sIDMpOwogICAgfQogICAgLy9UcmFjZXYoKHN0ZGVyciwgIlxuYmwgdHJlZTogc2VudCAlbGQiLCBzLT5iaXRzX3NlbnQpKTsKCiAgICBzZW5kX3RyZWUocywgcy5keW5fbHRyZWUsIGxjb2RlcyAtIDEpOyAvKiBsaXRlcmFsIHRyZWUgKi8KICAgIC8vVHJhY2V2KChzdGRlcnIsICJcbmxpdCB0cmVlOiBzZW50ICVsZCIsIHMtPmJpdHNfc2VudCkpOwoKICAgIHNlbmRfdHJlZShzLCBzLmR5bl9kdHJlZSwgZGNvZGVzIC0gMSk7IC8qIGRpc3RhbmNlIHRyZWUgKi8KICAgIC8vVHJhY2V2KChzdGRlcnIsICJcbmRpc3QgdHJlZTogc2VudCAlbGQiLCBzLT5iaXRzX3NlbnQpKTsKICB9OwoKCiAgLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgICogQ2hlY2sgaWYgdGhlIGRhdGEgdHlwZSBpcyBURVhUIG9yIEJJTkFSWSwgdXNpbmcgdGhlIGZvbGxvd2luZyBhbGdvcml0aG06CiAgICogLSBURVhUIGlmIHRoZSB0d28gY29uZGl0aW9ucyBiZWxvdyBhcmUgc2F0aXNmaWVkOgogICAqICAgIGEpIFRoZXJlIGFyZSBubyBub24tcG9ydGFibGUgY29udHJvbCBjaGFyYWN0ZXJzIGJlbG9uZ2luZyB0byB0aGUKICAgKiAgICAgICAiYmxhY2sgbGlzdCIgKDAuLjYsIDE0Li4yNSwgMjguLjMxKS4KICAgKiAgICBiKSBUaGVyZSBpcyBhdCBsZWFzdCBvbmUgcHJpbnRhYmxlIGNoYXJhY3RlciBiZWxvbmdpbmcgdG8gdGhlCiAgICogICAgICAgIndoaXRlIGxpc3QiICg5IHtUQUJ9LCAxMCB7TEZ9LCAxMyB7Q1J9LCAzMi4uMjU1KS4KICAgKiAtIEJJTkFSWSBvdGhlcndpc2UuCiAgICogLSBUaGUgZm9sbG93aW5nIHBhcnRpYWxseS1wb3J0YWJsZSBjb250cm9sIGNoYXJhY3RlcnMgZm9ybSBhCiAgICogICAiZ3JheSBsaXN0IiB0aGF0IGlzIGlnbm9yZWQgaW4gdGhpcyBkZXRlY3Rpb24gYWxnb3JpdGhtOgogICAqICAgKDcge0JFTH0sIDgge0JTfSwgMTEge1ZUfSwgMTIge0ZGfSwgMjYge1NVQn0sIDI3IHtFU0N9KS4KICAgKiBJTiBhc3NlcnRpb246IHRoZSBmaWVsZHMgRnJlcSBvZiBkeW5fbHRyZWUgYXJlIHNldC4KICAgKi8KICBjb25zdCBkZXRlY3RfZGF0YV90eXBlID0gKHMpID0+IHsKICAgIC8qIGJsYWNrX21hc2sgaXMgdGhlIGJpdCBtYXNrIG9mIGJsYWNrLWxpc3RlZCBieXRlcwogICAgICogc2V0IGJpdHMgMC4uNiwgMTQuLjI1LCBhbmQgMjguLjMxCiAgICAgKiAweGYzZmZjMDdmID0gYmluYXJ5IDExMTEwMDExMTExMTExMTExMTAwMDAwMDAxMTExMTExCiAgICAgKi8KICAgIGxldCBibGFja19tYXNrID0gMHhmM2ZmYzA3ZjsKICAgIGxldCBuOwoKICAgIC8qIENoZWNrIGZvciBub24tdGV4dHVhbCAoImJsYWNrLWxpc3RlZCIpIGJ5dGVzLiAqLwogICAgZm9yIChuID0gMDsgbiA8PSAzMTsgbisrLCBibGFja19tYXNrID4+Pj0gMSkgewogICAgICBpZiAoKGJsYWNrX21hc2sgJiAxKSAmJiAocy5keW5fbHRyZWVbbiAqIDJdLyouRnJlcSovICE9PSAwKSkgewogICAgICAgIHJldHVybiBaX0JJTkFSWTsKICAgICAgfQogICAgfQoKICAgIC8qIENoZWNrIGZvciB0ZXh0dWFsICgid2hpdGUtbGlzdGVkIikgYnl0ZXMuICovCiAgICBpZiAocy5keW5fbHRyZWVbOSAqIDJdLyouRnJlcSovICE9PSAwIHx8IHMuZHluX2x0cmVlWzEwICogMl0vKi5GcmVxKi8gIT09IDAgfHwKICAgICAgICBzLmR5bl9sdHJlZVsxMyAqIDJdLyouRnJlcSovICE9PSAwKSB7CiAgICAgIHJldHVybiBaX1RFWFQ7CiAgICB9CiAgICBmb3IgKG4gPSAzMjsgbiA8IExJVEVSQUxTJDE7IG4rKykgewogICAgICBpZiAocy5keW5fbHRyZWVbbiAqIDJdLyouRnJlcSovICE9PSAwKSB7CiAgICAgICAgcmV0dXJuIFpfVEVYVDsKICAgICAgfQogICAgfQoKICAgIC8qIFRoZXJlIGFyZSBubyAiYmxhY2stbGlzdGVkIiBvciAid2hpdGUtbGlzdGVkIiBieXRlczoKICAgICAqIHRoaXMgc3RyZWFtIGVpdGhlciBpcyBlbXB0eSBvciBoYXMgdG9sZXJhdGVkICgiZ3JheS1saXN0ZWQiKSBieXRlcyBvbmx5LgogICAgICovCiAgICByZXR1cm4gWl9CSU5BUlk7CiAgfTsKCgogIGxldCBzdGF0aWNfaW5pdF9kb25lID0gZmFsc2U7CgogIC8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAqIEluaXRpYWxpemUgdGhlIHRyZWUgZGF0YSBzdHJ1Y3R1cmVzIGZvciBhIG5ldyB6bGliIHN0cmVhbS4KICAgKi8KICBjb25zdCBfdHJfaW5pdCQxID0gKHMpID0+CiAgewoKICAgIGlmICghc3RhdGljX2luaXRfZG9uZSkgewogICAgICB0cl9zdGF0aWNfaW5pdCgpOwogICAgICBzdGF0aWNfaW5pdF9kb25lID0gdHJ1ZTsKICAgIH0KCiAgICBzLmxfZGVzYyAgPSBuZXcgVHJlZURlc2Mocy5keW5fbHRyZWUsIHN0YXRpY19sX2Rlc2MpOwogICAgcy5kX2Rlc2MgID0gbmV3IFRyZWVEZXNjKHMuZHluX2R0cmVlLCBzdGF0aWNfZF9kZXNjKTsKICAgIHMuYmxfZGVzYyA9IG5ldyBUcmVlRGVzYyhzLmJsX3RyZWUsIHN0YXRpY19ibF9kZXNjKTsKCiAgICBzLmJpX2J1ZiA9IDA7CiAgICBzLmJpX3ZhbGlkID0gMDsKCiAgICAvKiBJbml0aWFsaXplIHRoZSBmaXJzdCBibG9jayBvZiB0aGUgZmlyc3QgZmlsZTogKi8KICAgIGluaXRfYmxvY2socyk7CiAgfTsKCgogIC8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAqIFNlbmQgYSBzdG9yZWQgYmxvY2sKICAgKi8KICBjb25zdCBfdHJfc3RvcmVkX2Jsb2NrJDEgPSAocywgYnVmLCBzdG9yZWRfbGVuLCBsYXN0KSA9PgogIC8vRGVmbGF0ZVN0YXRlICpzOwogIC8vY2hhcmYgKmJ1ZjsgICAgICAgLyogaW5wdXQgYmxvY2sgKi8KICAvL3VsZyBzdG9yZWRfbGVuOyAgIC8qIGxlbmd0aCBvZiBpbnB1dCBibG9jayAqLwogIC8vaW50IGxhc3Q7ICAgICAgICAgLyogb25lIGlmIHRoaXMgaXMgdGhlIGxhc3QgYmxvY2sgZm9yIGEgZmlsZSAqLwogIHsKICAgIHNlbmRfYml0cyhzLCAoU1RPUkVEX0JMT0NLIDw8IDEpICsgKGxhc3QgPyAxIDogMCksIDMpOyAgICAvKiBzZW5kIGJsb2NrIHR5cGUgKi8KICAgIGNvcHlfYmxvY2socywgYnVmLCBzdG9yZWRfbGVuLCB0cnVlKTsgLyogd2l0aCBoZWFkZXIgKi8KICB9OwoKCiAgLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgICogU2VuZCBvbmUgZW1wdHkgc3RhdGljIGJsb2NrIHRvIGdpdmUgZW5vdWdoIGxvb2thaGVhZCBmb3IgaW5mbGF0ZS4KICAgKiBUaGlzIHRha2VzIDEwIGJpdHMsIG9mIHdoaWNoIDcgbWF5IHJlbWFpbiBpbiB0aGUgYml0IGJ1ZmZlci4KICAgKi8KICBjb25zdCBfdHJfYWxpZ24kMSA9IChzKSA9PiB7CiAgICBzZW5kX2JpdHMocywgU1RBVElDX1RSRUVTIDw8IDEsIDMpOwogICAgc2VuZF9jb2RlKHMsIEVORF9CTE9DSywgc3RhdGljX2x0cmVlKTsKICAgIGJpX2ZsdXNoKHMpOwogIH07CgoKICAvKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgKiBEZXRlcm1pbmUgdGhlIGJlc3QgZW5jb2RpbmcgZm9yIHRoZSBjdXJyZW50IGJsb2NrOiBkeW5hbWljIHRyZWVzLCBzdGF0aWMKICAgKiB0cmVlcyBvciBzdG9yZSwgYW5kIG91dHB1dCB0aGUgZW5jb2RlZCBibG9jayB0byB0aGUgemlwIGZpbGUuCiAgICovCiAgY29uc3QgX3RyX2ZsdXNoX2Jsb2NrJDEgPSAocywgYnVmLCBzdG9yZWRfbGVuLCBsYXN0KSA9PgogIC8vRGVmbGF0ZVN0YXRlICpzOwogIC8vY2hhcmYgKmJ1ZjsgICAgICAgLyogaW5wdXQgYmxvY2ssIG9yIE5VTEwgaWYgdG9vIG9sZCAqLwogIC8vdWxnIHN0b3JlZF9sZW47ICAgLyogbGVuZ3RoIG9mIGlucHV0IGJsb2NrICovCiAgLy9pbnQgbGFzdDsgICAgICAgICAvKiBvbmUgaWYgdGhpcyBpcyB0aGUgbGFzdCBibG9jayBmb3IgYSBmaWxlICovCiAgewogICAgbGV0IG9wdF9sZW5iLCBzdGF0aWNfbGVuYjsgIC8qIG9wdF9sZW4gYW5kIHN0YXRpY19sZW4gaW4gYnl0ZXMgKi8KICAgIGxldCBtYXhfYmxpbmRleCA9IDA7ICAgICAgICAvKiBpbmRleCBvZiBsYXN0IGJpdCBsZW5ndGggY29kZSBvZiBub24gemVybyBmcmVxICovCgogICAgLyogQnVpbGQgdGhlIEh1ZmZtYW4gdHJlZXMgdW5sZXNzIGEgc3RvcmVkIGJsb2NrIGlzIGZvcmNlZCAqLwogICAgaWYgKHMubGV2ZWwgPiAwKSB7CgogICAgICAvKiBDaGVjayBpZiB0aGUgZmlsZSBpcyBiaW5hcnkgb3IgdGV4dCAqLwogICAgICBpZiAocy5zdHJtLmRhdGFfdHlwZSA9PT0gWl9VTktOT1dOJDEpIHsKICAgICAgICBzLnN0cm0uZGF0YV90eXBlID0gZGV0ZWN0X2RhdGFfdHlwZShzKTsKICAgICAgfQoKICAgICAgLyogQ29uc3RydWN0IHRoZSBsaXRlcmFsIGFuZCBkaXN0YW5jZSB0cmVlcyAqLwogICAgICBidWlsZF90cmVlKHMsIHMubF9kZXNjKTsKICAgICAgLy8gVHJhY2V2KChzdGRlcnIsICJcbmxpdCBkYXRhOiBkeW4gJWxkLCBzdGF0ICVsZCIsIHMtPm9wdF9sZW4sCiAgICAgIC8vICAgICAgICBzLT5zdGF0aWNfbGVuKSk7CgogICAgICBidWlsZF90cmVlKHMsIHMuZF9kZXNjKTsKICAgICAgLy8gVHJhY2V2KChzdGRlcnIsICJcbmRpc3QgZGF0YTogZHluICVsZCwgc3RhdCAlbGQiLCBzLT5vcHRfbGVuLAogICAgICAvLyAgICAgICAgcy0+c3RhdGljX2xlbikpOwogICAgICAvKiBBdCB0aGlzIHBvaW50LCBvcHRfbGVuIGFuZCBzdGF0aWNfbGVuIGFyZSB0aGUgdG90YWwgYml0IGxlbmd0aHMgb2YKICAgICAgICogdGhlIGNvbXByZXNzZWQgYmxvY2sgZGF0YSwgZXhjbHVkaW5nIHRoZSB0cmVlIHJlcHJlc2VudGF0aW9ucy4KICAgICAgICovCgogICAgICAvKiBCdWlsZCB0aGUgYml0IGxlbmd0aCB0cmVlIGZvciB0aGUgYWJvdmUgdHdvIHRyZWVzLCBhbmQgZ2V0IHRoZSBpbmRleAogICAgICAgKiBpbiBibF9vcmRlciBvZiB0aGUgbGFzdCBiaXQgbGVuZ3RoIGNvZGUgdG8gc2VuZC4KICAgICAgICovCiAgICAgIG1heF9ibGluZGV4ID0gYnVpbGRfYmxfdHJlZShzKTsKCiAgICAgIC8qIERldGVybWluZSB0aGUgYmVzdCBlbmNvZGluZy4gQ29tcHV0ZSB0aGUgYmxvY2sgbGVuZ3RocyBpbiBieXRlcy4gKi8KICAgICAgb3B0X2xlbmIgPSAocy5vcHRfbGVuICsgMyArIDcpID4+PiAzOwogICAgICBzdGF0aWNfbGVuYiA9IChzLnN0YXRpY19sZW4gKyAzICsgNykgPj4+IDM7CgogICAgICAvLyBUcmFjZXYoKHN0ZGVyciwgIlxub3B0ICVsdSglbHUpIHN0YXQgJWx1KCVsdSkgc3RvcmVkICVsdSBsaXQgJXUgIiwKICAgICAgLy8gICAgICAgIG9wdF9sZW5iLCBzLT5vcHRfbGVuLCBzdGF0aWNfbGVuYiwgcy0+c3RhdGljX2xlbiwgc3RvcmVkX2xlbiwKICAgICAgLy8gICAgICAgIHMtPmxhc3RfbGl0KSk7CgogICAgICBpZiAoc3RhdGljX2xlbmIgPD0gb3B0X2xlbmIpIHsgb3B0X2xlbmIgPSBzdGF0aWNfbGVuYjsgfQoKICAgIH0gZWxzZSB7CiAgICAgIC8vIEFzc2VydChidWYgIT0gKGNoYXIqKTAsICJsb3N0IGJ1ZiIpOwogICAgICBvcHRfbGVuYiA9IHN0YXRpY19sZW5iID0gc3RvcmVkX2xlbiArIDU7IC8qIGZvcmNlIGEgc3RvcmVkIGJsb2NrICovCiAgICB9CgogICAgaWYgKChzdG9yZWRfbGVuICsgNCA8PSBvcHRfbGVuYikgJiYgKGJ1ZiAhPT0gLTEpKSB7CiAgICAgIC8qIDQ6IHR3byB3b3JkcyBmb3IgdGhlIGxlbmd0aHMgKi8KCiAgICAgIC8qIFRoZSB0ZXN0IGJ1ZiAhPSBOVUxMIGlzIG9ubHkgbmVjZXNzYXJ5IGlmIExJVF9CVUZTSVpFID4gV1NJWkUuCiAgICAgICAqIE90aGVyd2lzZSB3ZSBjYW4ndCBoYXZlIHByb2Nlc3NlZCBtb3JlIHRoYW4gV1NJWkUgaW5wdXQgYnl0ZXMgc2luY2UKICAgICAgICogdGhlIGxhc3QgYmxvY2sgZmx1c2gsIGJlY2F1c2UgY29tcHJlc3Npb24gd291bGQgaGF2ZSBiZWVuCiAgICAgICAqIHN1Y2Nlc3NmdWwuIElmIExJVF9CVUZTSVpFIDw9IFdTSVpFLCBpdCBpcyBuZXZlciB0b28gbGF0ZSB0bwogICAgICAgKiB0cmFuc2Zvcm0gYSBibG9jayBpbnRvIGEgc3RvcmVkIGJsb2NrLgogICAgICAgKi8KICAgICAgX3RyX3N0b3JlZF9ibG9jayQxKHMsIGJ1Ziwgc3RvcmVkX2xlbiwgbGFzdCk7CgogICAgfSBlbHNlIGlmIChzLnN0cmF0ZWd5ID09PSBaX0ZJWEVEJDEgfHwgc3RhdGljX2xlbmIgPT09IG9wdF9sZW5iKSB7CgogICAgICBzZW5kX2JpdHMocywgKFNUQVRJQ19UUkVFUyA8PCAxKSArIChsYXN0ID8gMSA6IDApLCAzKTsKICAgICAgY29tcHJlc3NfYmxvY2socywgc3RhdGljX2x0cmVlLCBzdGF0aWNfZHRyZWUpOwoKICAgIH0gZWxzZSB7CiAgICAgIHNlbmRfYml0cyhzLCAoRFlOX1RSRUVTIDw8IDEpICsgKGxhc3QgPyAxIDogMCksIDMpOwogICAgICBzZW5kX2FsbF90cmVlcyhzLCBzLmxfZGVzYy5tYXhfY29kZSArIDEsIHMuZF9kZXNjLm1heF9jb2RlICsgMSwgbWF4X2JsaW5kZXggKyAxKTsKICAgICAgY29tcHJlc3NfYmxvY2socywgcy5keW5fbHRyZWUsIHMuZHluX2R0cmVlKTsKICAgIH0KICAgIC8vIEFzc2VydCAocy0+Y29tcHJlc3NlZF9sZW4gPT0gcy0+Yml0c19zZW50LCAiYmFkIGNvbXByZXNzZWQgc2l6ZSIpOwogICAgLyogVGhlIGFib3ZlIGNoZWNrIGlzIG1hZGUgbW9kIDJeMzIsIGZvciBmaWxlcyBsYXJnZXIgdGhhbiA1MTIgTUIKICAgICAqIGFuZCB1TG9uZyBpbXBsZW1lbnRlZCBvbiAzMiBiaXRzLgogICAgICovCiAgICBpbml0X2Jsb2NrKHMpOwoKICAgIGlmIChsYXN0KSB7CiAgICAgIGJpX3dpbmR1cChzKTsKICAgIH0KICAgIC8vIFRyYWNldigoc3RkZXJyLCJcbmNvbXBybGVuICVsdSglbHUpICIsIHMtPmNvbXByZXNzZWRfbGVuPj4zLAogICAgLy8gICAgICAgcy0+Y29tcHJlc3NlZF9sZW4tNypsYXN0KSk7CiAgfTsKCiAgLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgICogU2F2ZSB0aGUgbWF0Y2ggaW5mbyBhbmQgdGFsbHkgdGhlIGZyZXF1ZW5jeSBjb3VudHMuIFJldHVybiB0cnVlIGlmCiAgICogdGhlIGN1cnJlbnQgYmxvY2sgbXVzdCBiZSBmbHVzaGVkLgogICAqLwogIGNvbnN0IF90cl90YWxseSQxID0gKHMsIGRpc3QsIGxjKSA9PgogIC8vICAgIGRlZmxhdGVfc3RhdGUgKnM7CiAgLy8gICAgdW5zaWduZWQgZGlzdDsgIC8qIGRpc3RhbmNlIG9mIG1hdGNoZWQgc3RyaW5nICovCiAgLy8gICAgdW5zaWduZWQgbGM7ICAgIC8qIG1hdGNoIGxlbmd0aC1NSU5fTUFUQ0ggb3IgdW5tYXRjaGVkIGNoYXIgKGlmIGRpc3Q9PTApICovCiAgewogICAgLy9sZXQgb3V0X2xlbmd0aCwgaW5fbGVuZ3RoLCBkY29kZTsKCiAgICBzLnBlbmRpbmdfYnVmW3MuZF9idWYgKyBzLmxhc3RfbGl0ICogMl0gICAgID0gKGRpc3QgPj4+IDgpICYgMHhmZjsKICAgIHMucGVuZGluZ19idWZbcy5kX2J1ZiArIHMubGFzdF9saXQgKiAyICsgMV0gPSBkaXN0ICYgMHhmZjsKCiAgICBzLnBlbmRpbmdfYnVmW3MubF9idWYgKyBzLmxhc3RfbGl0XSA9IGxjICYgMHhmZjsKICAgIHMubGFzdF9saXQrKzsKCiAgICBpZiAoZGlzdCA9PT0gMCkgewogICAgICAvKiBsYyBpcyB0aGUgdW5tYXRjaGVkIGNoYXIgKi8KICAgICAgcy5keW5fbHRyZWVbbGMgKiAyXS8qLkZyZXEqLysrOwogICAgfSBlbHNlIHsKICAgICAgcy5tYXRjaGVzKys7CiAgICAgIC8qIEhlcmUsIGxjIGlzIHRoZSBtYXRjaCBsZW5ndGggLSBNSU5fTUFUQ0ggKi8KICAgICAgZGlzdC0tOyAgICAgICAgICAgICAvKiBkaXN0ID0gbWF0Y2ggZGlzdGFuY2UgLSAxICovCiAgICAgIC8vQXNzZXJ0KCh1c2gpZGlzdCA8ICh1c2gpTUFYX0RJU1QocykgJiYKICAgICAgLy8gICAgICAgKHVzaClsYyA8PSAodXNoKShNQVhfTUFUQ0gtTUlOX01BVENIKSAmJgogICAgICAvLyAgICAgICAodXNoKWRfY29kZShkaXN0KSA8ICh1c2gpRF9DT0RFUywgICJfdHJfdGFsbHk6IGJhZCBtYXRjaCIpOwoKICAgICAgcy5keW5fbHRyZWVbKF9sZW5ndGhfY29kZVtsY10gKyBMSVRFUkFMUyQxICsgMSkgKiAyXS8qLkZyZXEqLysrOwogICAgICBzLmR5bl9kdHJlZVtkX2NvZGUoZGlzdCkgKiAyXS8qLkZyZXEqLysrOwogICAgfQoKICAvLyAoISkgVGhpcyBibG9jayBpcyBkaXNhYmxlZCBpbiB6bGliIGRlZmF1bHRzLAogIC8vIGRvbid0IGVuYWJsZSBpdCBmb3IgYmluYXJ5IGNvbXBhdGliaWxpdHkKCiAgLy8jaWZkZWYgVFJVTkNBVEVfQkxPQ0sKICAvLyAgLyogVHJ5IHRvIGd1ZXNzIGlmIGl0IGlzIHByb2ZpdGFibGUgdG8gc3RvcCB0aGUgY3VycmVudCBibG9jayBoZXJlICovCiAgLy8gIGlmICgocy5sYXN0X2xpdCAmIDB4MWZmZikgPT09IDAgJiYgcy5sZXZlbCA+IDIpIHsKICAvLyAgICAvKiBDb21wdXRlIGFuIHVwcGVyIGJvdW5kIGZvciB0aGUgY29tcHJlc3NlZCBsZW5ndGggKi8KICAvLyAgICBvdXRfbGVuZ3RoID0gcy5sYXN0X2xpdCo4OwogIC8vICAgIGluX2xlbmd0aCA9IHMuc3Ryc3RhcnQgLSBzLmJsb2NrX3N0YXJ0OwogIC8vCiAgLy8gICAgZm9yIChkY29kZSA9IDA7IGRjb2RlIDwgRF9DT0RFUzsgZGNvZGUrKykgewogIC8vICAgICAgb3V0X2xlbmd0aCArPSBzLmR5bl9kdHJlZVtkY29kZSoyXS8qLkZyZXEqLyAqICg1ICsgZXh0cmFfZGJpdHNbZGNvZGVdKTsKICAvLyAgICB9CiAgLy8gICAgb3V0X2xlbmd0aCA+Pj49IDM7CiAgLy8gICAgLy9UcmFjZXYoKHN0ZGVyciwiXG5sYXN0X2xpdCAldSwgaW4gJWxkLCBvdXQgfiVsZCglbGQlJSkgIiwKICAvLyAgICAvLyAgICAgICBzLT5sYXN0X2xpdCwgaW5fbGVuZ3RoLCBvdXRfbGVuZ3RoLAogIC8vICAgIC8vICAgICAgIDEwMEwgLSBvdXRfbGVuZ3RoKjEwMEwvaW5fbGVuZ3RoKSk7CiAgLy8gICAgaWYgKHMubWF0Y2hlcyA8IChzLmxhc3RfbGl0Pj4xKS8qaW50IC8yKi8gJiYgb3V0X2xlbmd0aCA8IChpbl9sZW5ndGg+PjEpLyppbnQgLzIqLykgewogIC8vICAgICAgcmV0dXJuIHRydWU7CiAgLy8gICAgfQogIC8vICB9CiAgLy8jZW5kaWYKCiAgICByZXR1cm4gKHMubGFzdF9saXQgPT09IHMubGl0X2J1ZnNpemUgLSAxKTsKICAgIC8qIFdlIGF2b2lkIGVxdWFsaXR5IHdpdGggbGl0X2J1ZnNpemUgYmVjYXVzZSBvZiB3cmFwYXJvdW5kIGF0IDY0SwogICAgICogb24gMTYgYml0IG1hY2hpbmVzIGFuZCBiZWNhdXNlIHN0b3JlZCBibG9ja3MgYXJlIHJlc3RyaWN0ZWQgdG8KICAgICAqIDY0Sy0xIGJ5dGVzLgogICAgICovCiAgfTsKCiAgdmFyIF90cl9pbml0XzEgID0gX3RyX2luaXQkMTsKICB2YXIgX3RyX3N0b3JlZF9ibG9ja18xID0gX3RyX3N0b3JlZF9ibG9jayQxOwogIHZhciBfdHJfZmx1c2hfYmxvY2tfMSAgPSBfdHJfZmx1c2hfYmxvY2skMTsKICB2YXIgX3RyX3RhbGx5XzEgPSBfdHJfdGFsbHkkMTsKICB2YXIgX3RyX2FsaWduXzEgPSBfdHJfYWxpZ24kMTsKCiAgdmFyIHRyZWVzID0gewogIAlfdHJfaW5pdDogX3RyX2luaXRfMSwKICAJX3RyX3N0b3JlZF9ibG9jazogX3RyX3N0b3JlZF9ibG9ja18xLAogIAlfdHJfZmx1c2hfYmxvY2s6IF90cl9mbHVzaF9ibG9ja18xLAogIAlfdHJfdGFsbHk6IF90cl90YWxseV8xLAogIAlfdHJfYWxpZ246IF90cl9hbGlnbl8xCiAgfTsKCiAgLy8gTm90ZTogYWRsZXIzMiB0YWtlcyAxMiUgZm9yIGxldmVsIDAgYW5kIDIlIGZvciBsZXZlbCA2LgogIC8vIEl0IGlzbid0IHdvcnRoIGl0IHRvIG1ha2UgYWRkaXRpb25hbCBvcHRpbWl6YXRpb25zIGFzIGluIG9yaWdpbmFsLgogIC8vIFNtYWxsIHNpemUgaXMgcHJlZmVyYWJsZS4KCiAgLy8gKEMpIDE5OTUtMjAxMyBKZWFuLWxvdXAgR2FpbGx5IGFuZCBNYXJrIEFkbGVyCiAgLy8gKEMpIDIwMTQtMjAxNyBWaXRhbHkgUHV6cmluIGFuZCBBbmRyZXkgVHVwaXRzaW4KICAvLwogIC8vIFRoaXMgc29mdHdhcmUgaXMgcHJvdmlkZWQgJ2FzLWlzJywgd2l0aG91dCBhbnkgZXhwcmVzcyBvciBpbXBsaWVkCiAgLy8gd2FycmFudHkuIEluIG5vIGV2ZW50IHdpbGwgdGhlIGF1dGhvcnMgYmUgaGVsZCBsaWFibGUgZm9yIGFueSBkYW1hZ2VzCiAgLy8gYXJpc2luZyBmcm9tIHRoZSB1c2Ugb2YgdGhpcyBzb2Z0d2FyZS4KICAvLwogIC8vIFBlcm1pc3Npb24gaXMgZ3JhbnRlZCB0byBhbnlvbmUgdG8gdXNlIHRoaXMgc29mdHdhcmUgZm9yIGFueSBwdXJwb3NlLAogIC8vIGluY2x1ZGluZyBjb21tZXJjaWFsIGFwcGxpY2F0aW9ucywgYW5kIHRvIGFsdGVyIGl0IGFuZCByZWRpc3RyaWJ1dGUgaXQKICAvLyBmcmVlbHksIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyByZXN0cmljdGlvbnM6CiAgLy8KICAvLyAxLiBUaGUgb3JpZ2luIG9mIHRoaXMgc29mdHdhcmUgbXVzdCBub3QgYmUgbWlzcmVwcmVzZW50ZWQ7IHlvdSBtdXN0IG5vdAogIC8vICAgY2xhaW0gdGhhdCB5b3Ugd3JvdGUgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLiBJZiB5b3UgdXNlIHRoaXMgc29mdHdhcmUKICAvLyAgIGluIGEgcHJvZHVjdCwgYW4gYWNrbm93bGVkZ21lbnQgaW4gdGhlIHByb2R1Y3QgZG9jdW1lbnRhdGlvbiB3b3VsZCBiZQogIC8vICAgYXBwcmVjaWF0ZWQgYnV0IGlzIG5vdCByZXF1aXJlZC4KICAvLyAyLiBBbHRlcmVkIHNvdXJjZSB2ZXJzaW9ucyBtdXN0IGJlIHBsYWlubHkgbWFya2VkIGFzIHN1Y2gsIGFuZCBtdXN0IG5vdCBiZQogIC8vICAgbWlzcmVwcmVzZW50ZWQgYXMgYmVpbmcgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLgogIC8vIDMuIFRoaXMgbm90aWNlIG1heSBub3QgYmUgcmVtb3ZlZCBvciBhbHRlcmVkIGZyb20gYW55IHNvdXJjZSBkaXN0cmlidXRpb24uCgogIGNvbnN0IGFkbGVyMzIgPSAoYWRsZXIsIGJ1ZiwgbGVuLCBwb3MpID0+IHsKICAgIGxldCBzMSA9IChhZGxlciAmIDB4ZmZmZikgfDAsCiAgICAgICAgczIgPSAoKGFkbGVyID4+PiAxNikgJiAweGZmZmYpIHwwLAogICAgICAgIG4gPSAwOwoKICAgIHdoaWxlIChsZW4gIT09IDApIHsKICAgICAgLy8gU2V0IGxpbWl0IH4gdHdpY2UgbGVzcyB0aGFuIDU1NTIsIHRvIGtlZXAKICAgICAgLy8gczIgaW4gMzEtYml0cywgYmVjYXVzZSB3ZSBmb3JjZSBzaWduZWQgaW50cy4KICAgICAgLy8gaW4gb3RoZXIgY2FzZSAlPSB3aWxsIGZhaWwuCiAgICAgIG4gPSBsZW4gPiAyMDAwID8gMjAwMCA6IGxlbjsKICAgICAgbGVuIC09IG47CgogICAgICBkbyB7CiAgICAgICAgczEgPSAoczEgKyBidWZbcG9zKytdKSB8MDsKICAgICAgICBzMiA9IChzMiArIHMxKSB8MDsKICAgICAgfSB3aGlsZSAoLS1uKTsKCiAgICAgIHMxICU9IDY1NTIxOwogICAgICBzMiAlPSA2NTUyMTsKICAgIH0KCiAgICByZXR1cm4gKHMxIHwgKHMyIDw8IDE2KSkgfDA7CiAgfTsKCgogIHZhciBhZGxlcjMyXzEgPSBhZGxlcjMyOwoKICAvLyBOb3RlOiB3ZSBjYW4ndCBnZXQgc2lnbmlmaWNhbnQgc3BlZWQgYm9vc3QgaGVyZS4KICAvLyBTbyB3cml0ZSBjb2RlIHRvIG1pbmltaXplIHNpemUgLSBubyBwcmVnZW5lcmF0ZWQgdGFibGVzCiAgLy8gYW5kIGFycmF5IHRvb2xzIGRlcGVuZGVuY2llcy4KCiAgLy8gKEMpIDE5OTUtMjAxMyBKZWFuLWxvdXAgR2FpbGx5IGFuZCBNYXJrIEFkbGVyCiAgLy8gKEMpIDIwMTQtMjAxNyBWaXRhbHkgUHV6cmluIGFuZCBBbmRyZXkgVHVwaXRzaW4KICAvLwogIC8vIFRoaXMgc29mdHdhcmUgaXMgcHJvdmlkZWQgJ2FzLWlzJywgd2l0aG91dCBhbnkgZXhwcmVzcyBvciBpbXBsaWVkCiAgLy8gd2FycmFudHkuIEluIG5vIGV2ZW50IHdpbGwgdGhlIGF1dGhvcnMgYmUgaGVsZCBsaWFibGUgZm9yIGFueSBkYW1hZ2VzCiAgLy8gYXJpc2luZyBmcm9tIHRoZSB1c2Ugb2YgdGhpcyBzb2Z0d2FyZS4KICAvLwogIC8vIFBlcm1pc3Npb24gaXMgZ3JhbnRlZCB0byBhbnlvbmUgdG8gdXNlIHRoaXMgc29mdHdhcmUgZm9yIGFueSBwdXJwb3NlLAogIC8vIGluY2x1ZGluZyBjb21tZXJjaWFsIGFwcGxpY2F0aW9ucywgYW5kIHRvIGFsdGVyIGl0IGFuZCByZWRpc3RyaWJ1dGUgaXQKICAvLyBmcmVlbHksIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyByZXN0cmljdGlvbnM6CiAgLy8KICAvLyAxLiBUaGUgb3JpZ2luIG9mIHRoaXMgc29mdHdhcmUgbXVzdCBub3QgYmUgbWlzcmVwcmVzZW50ZWQ7IHlvdSBtdXN0IG5vdAogIC8vICAgY2xhaW0gdGhhdCB5b3Ugd3JvdGUgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLiBJZiB5b3UgdXNlIHRoaXMgc29mdHdhcmUKICAvLyAgIGluIGEgcHJvZHVjdCwgYW4gYWNrbm93bGVkZ21lbnQgaW4gdGhlIHByb2R1Y3QgZG9jdW1lbnRhdGlvbiB3b3VsZCBiZQogIC8vICAgYXBwcmVjaWF0ZWQgYnV0IGlzIG5vdCByZXF1aXJlZC4KICAvLyAyLiBBbHRlcmVkIHNvdXJjZSB2ZXJzaW9ucyBtdXN0IGJlIHBsYWlubHkgbWFya2VkIGFzIHN1Y2gsIGFuZCBtdXN0IG5vdCBiZQogIC8vICAgbWlzcmVwcmVzZW50ZWQgYXMgYmVpbmcgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLgogIC8vIDMuIFRoaXMgbm90aWNlIG1heSBub3QgYmUgcmVtb3ZlZCBvciBhbHRlcmVkIGZyb20gYW55IHNvdXJjZSBkaXN0cmlidXRpb24uCgogIC8vIFVzZSBvcmRpbmFyeSBhcnJheSwgc2luY2UgdW50eXBlZCBtYWtlcyBubyBib29zdCBoZXJlCiAgY29uc3QgbWFrZVRhYmxlID0gKCkgPT4gewogICAgbGV0IGMsIHRhYmxlID0gW107CgogICAgZm9yICh2YXIgbiA9IDA7IG4gPCAyNTY7IG4rKykgewogICAgICBjID0gbjsKICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCA4OyBrKyspIHsKICAgICAgICBjID0gKChjICYgMSkgPyAoMHhFREI4ODMyMCBeIChjID4+PiAxKSkgOiAoYyA+Pj4gMSkpOwogICAgICB9CiAgICAgIHRhYmxlW25dID0gYzsKICAgIH0KCiAgICByZXR1cm4gdGFibGU7CiAgfTsKCiAgLy8gQ3JlYXRlIHRhYmxlIG9uIGxvYWQuIEp1c3QgMjU1IHNpZ25lZCBsb25ncy4gTm90IGEgcHJvYmxlbS4KICBjb25zdCBjcmNUYWJsZSA9IG5ldyBVaW50MzJBcnJheShtYWtlVGFibGUoKSk7CgoKICBjb25zdCBjcmMzMiA9IChjcmMsIGJ1ZiwgbGVuLCBwb3MpID0+IHsKICAgIGNvbnN0IHQgPSBjcmNUYWJsZTsKICAgIGNvbnN0IGVuZCA9IHBvcyArIGxlbjsKCiAgICBjcmMgXj0gLTE7CgogICAgZm9yIChsZXQgaSA9IHBvczsgaSA8IGVuZDsgaSsrKSB7CiAgICAgIGNyYyA9IChjcmMgPj4+IDgpIF4gdFsoY3JjIF4gYnVmW2ldKSAmIDB4RkZdOwogICAgfQoKICAgIHJldHVybiAoY3JjIF4gKC0xKSk7IC8vID4+PiAwOwogIH07CgoKICB2YXIgY3JjMzJfMSA9IGNyYzMyOwoKICAvLyAoQykgMTk5NS0yMDEzIEplYW4tbG91cCBHYWlsbHkgYW5kIE1hcmsgQWRsZXIKICAvLyAoQykgMjAxNC0yMDE3IFZpdGFseSBQdXpyaW4gYW5kIEFuZHJleSBUdXBpdHNpbgogIC8vCiAgLy8gVGhpcyBzb2Z0d2FyZSBpcyBwcm92aWRlZCAnYXMtaXMnLCB3aXRob3V0IGFueSBleHByZXNzIG9yIGltcGxpZWQKICAvLyB3YXJyYW50eS4gSW4gbm8gZXZlbnQgd2lsbCB0aGUgYXV0aG9ycyBiZSBoZWxkIGxpYWJsZSBmb3IgYW55IGRhbWFnZXMKICAvLyBhcmlzaW5nIGZyb20gdGhlIHVzZSBvZiB0aGlzIHNvZnR3YXJlLgogIC8vCiAgLy8gUGVybWlzc2lvbiBpcyBncmFudGVkIHRvIGFueW9uZSB0byB1c2UgdGhpcyBzb2Z0d2FyZSBmb3IgYW55IHB1cnBvc2UsCiAgLy8gaW5jbHVkaW5nIGNvbW1lcmNpYWwgYXBwbGljYXRpb25zLCBhbmQgdG8gYWx0ZXIgaXQgYW5kIHJlZGlzdHJpYnV0ZSBpdAogIC8vIGZyZWVseSwgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIHJlc3RyaWN0aW9uczoKICAvLwogIC8vIDEuIFRoZSBvcmlnaW4gb2YgdGhpcyBzb2Z0d2FyZSBtdXN0IG5vdCBiZSBtaXNyZXByZXNlbnRlZDsgeW91IG11c3Qgbm90CiAgLy8gICBjbGFpbSB0aGF0IHlvdSB3cm90ZSB0aGUgb3JpZ2luYWwgc29mdHdhcmUuIElmIHlvdSB1c2UgdGhpcyBzb2Z0d2FyZQogIC8vICAgaW4gYSBwcm9kdWN0LCBhbiBhY2tub3dsZWRnbWVudCBpbiB0aGUgcHJvZHVjdCBkb2N1bWVudGF0aW9uIHdvdWxkIGJlCiAgLy8gICBhcHByZWNpYXRlZCBidXQgaXMgbm90IHJlcXVpcmVkLgogIC8vIDIuIEFsdGVyZWQgc291cmNlIHZlcnNpb25zIG11c3QgYmUgcGxhaW5seSBtYXJrZWQgYXMgc3VjaCwgYW5kIG11c3Qgbm90IGJlCiAgLy8gICBtaXNyZXByZXNlbnRlZCBhcyBiZWluZyB0aGUgb3JpZ2luYWwgc29mdHdhcmUuCiAgLy8gMy4gVGhpcyBub3RpY2UgbWF5IG5vdCBiZSByZW1vdmVkIG9yIGFsdGVyZWQgZnJvbSBhbnkgc291cmNlIGRpc3RyaWJ1dGlvbi4KCiAgdmFyIG1lc3NhZ2VzID0gewogICAgMjogICAgICAnbmVlZCBkaWN0aW9uYXJ5JywgICAgIC8qIFpfTkVFRF9ESUNUICAgICAgIDIgICovCiAgICAxOiAgICAgICdzdHJlYW0gZW5kJywgICAgICAgICAgLyogWl9TVFJFQU1fRU5EICAgICAgMSAgKi8KICAgIDA6ICAgICAgJycsICAgICAgICAgICAgICAgICAgICAvKiBaX09LICAgICAgICAgICAgICAwICAqLwogICAgJy0xJzogICAnZmlsZSBlcnJvcicsICAgICAgICAgIC8qIFpfRVJSTk8gICAgICAgICAoLTEpICovCiAgICAnLTInOiAgICdzdHJlYW0gZXJyb3InLCAgICAgICAgLyogWl9TVFJFQU1fRVJST1IgICgtMikgKi8KICAgICctMyc6ICAgJ2RhdGEgZXJyb3InLCAgICAgICAgICAvKiBaX0RBVEFfRVJST1IgICAgKC0zKSAqLwogICAgJy00JzogICAnaW5zdWZmaWNpZW50IG1lbW9yeScsIC8qIFpfTUVNX0VSUk9SICAgICAoLTQpICovCiAgICAnLTUnOiAgICdidWZmZXIgZXJyb3InLCAgICAgICAgLyogWl9CVUZfRVJST1IgICAgICgtNSkgKi8KICAgICctNic6ICAgJ2luY29tcGF0aWJsZSB2ZXJzaW9uJyAvKiBaX1ZFUlNJT05fRVJST1IgKC02KSAqLwogIH07CgogIC8vIChDKSAxOTk1LTIwMTMgSmVhbi1sb3VwIEdhaWxseSBhbmQgTWFyayBBZGxlcgogIC8vIChDKSAyMDE0LTIwMTcgVml0YWx5IFB1enJpbiBhbmQgQW5kcmV5IFR1cGl0c2luCiAgLy8KICAvLyBUaGlzIHNvZnR3YXJlIGlzIHByb3ZpZGVkICdhcy1pcycsIHdpdGhvdXQgYW55IGV4cHJlc3Mgb3IgaW1wbGllZAogIC8vIHdhcnJhbnR5LiBJbiBubyBldmVudCB3aWxsIHRoZSBhdXRob3JzIGJlIGhlbGQgbGlhYmxlIGZvciBhbnkgZGFtYWdlcwogIC8vIGFyaXNpbmcgZnJvbSB0aGUgdXNlIG9mIHRoaXMgc29mdHdhcmUuCiAgLy8KICAvLyBQZXJtaXNzaW9uIGlzIGdyYW50ZWQgdG8gYW55b25lIHRvIHVzZSB0aGlzIHNvZnR3YXJlIGZvciBhbnkgcHVycG9zZSwKICAvLyBpbmNsdWRpbmcgY29tbWVyY2lhbCBhcHBsaWNhdGlvbnMsIGFuZCB0byBhbHRlciBpdCBhbmQgcmVkaXN0cmlidXRlIGl0CiAgLy8gZnJlZWx5LCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgcmVzdHJpY3Rpb25zOgogIC8vCiAgLy8gMS4gVGhlIG9yaWdpbiBvZiB0aGlzIHNvZnR3YXJlIG11c3Qgbm90IGJlIG1pc3JlcHJlc2VudGVkOyB5b3UgbXVzdCBub3QKICAvLyAgIGNsYWltIHRoYXQgeW91IHdyb3RlIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS4gSWYgeW91IHVzZSB0aGlzIHNvZnR3YXJlCiAgLy8gICBpbiBhIHByb2R1Y3QsIGFuIGFja25vd2xlZGdtZW50IGluIHRoZSBwcm9kdWN0IGRvY3VtZW50YXRpb24gd291bGQgYmUKICAvLyAgIGFwcHJlY2lhdGVkIGJ1dCBpcyBub3QgcmVxdWlyZWQuCiAgLy8gMi4gQWx0ZXJlZCBzb3VyY2UgdmVyc2lvbnMgbXVzdCBiZSBwbGFpbmx5IG1hcmtlZCBhcyBzdWNoLCBhbmQgbXVzdCBub3QgYmUKICAvLyAgIG1pc3JlcHJlc2VudGVkIGFzIGJlaW5nIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS4KICAvLyAzLiBUaGlzIG5vdGljZSBtYXkgbm90IGJlIHJlbW92ZWQgb3IgYWx0ZXJlZCBmcm9tIGFueSBzb3VyY2UgZGlzdHJpYnV0aW9uLgoKICB2YXIgY29uc3RhbnRzJDIgPSB7CgogICAgLyogQWxsb3dlZCBmbHVzaCB2YWx1ZXM7IHNlZSBkZWZsYXRlKCkgYW5kIGluZmxhdGUoKSBiZWxvdyBmb3IgZGV0YWlscyAqLwogICAgWl9OT19GTFVTSDogICAgICAgICAwLAogICAgWl9QQVJUSUFMX0ZMVVNIOiAgICAxLAogICAgWl9TWU5DX0ZMVVNIOiAgICAgICAyLAogICAgWl9GVUxMX0ZMVVNIOiAgICAgICAzLAogICAgWl9GSU5JU0g6ICAgICAgICAgICA0LAogICAgWl9CTE9DSzogICAgICAgICAgICA1LAogICAgWl9UUkVFUzogICAgICAgICAgICA2LAoKICAgIC8qIFJldHVybiBjb2RlcyBmb3IgdGhlIGNvbXByZXNzaW9uL2RlY29tcHJlc3Npb24gZnVuY3Rpb25zLiBOZWdhdGl2ZSB2YWx1ZXMKICAgICogYXJlIGVycm9ycywgcG9zaXRpdmUgdmFsdWVzIGFyZSB1c2VkIGZvciBzcGVjaWFsIGJ1dCBub3JtYWwgZXZlbnRzLgogICAgKi8KICAgIFpfT0s6ICAgICAgICAgICAgICAgMCwKICAgIFpfU1RSRUFNX0VORDogICAgICAgMSwKICAgIFpfTkVFRF9ESUNUOiAgICAgICAgMiwKICAgIFpfRVJSTk86ICAgICAgICAgICAtMSwKICAgIFpfU1RSRUFNX0VSUk9SOiAgICAtMiwKICAgIFpfREFUQV9FUlJPUjogICAgICAtMywKICAgIFpfTUVNX0VSUk9SOiAgICAgICAtNCwKICAgIFpfQlVGX0VSUk9SOiAgICAgICAtNSwKICAgIC8vWl9WRVJTSU9OX0VSUk9SOiAtNiwKCiAgICAvKiBjb21wcmVzc2lvbiBsZXZlbHMgKi8KICAgIFpfTk9fQ09NUFJFU1NJT046ICAgICAgICAgMCwKICAgIFpfQkVTVF9TUEVFRDogICAgICAgICAgICAgMSwKICAgIFpfQkVTVF9DT01QUkVTU0lPTjogICAgICAgOSwKICAgIFpfREVGQVVMVF9DT01QUkVTU0lPTjogICAtMSwKCgogICAgWl9GSUxURVJFRDogICAgICAgICAgICAgICAxLAogICAgWl9IVUZGTUFOX09OTFk6ICAgICAgICAgICAyLAogICAgWl9STEU6ICAgICAgICAgICAgICAgICAgICAzLAogICAgWl9GSVhFRDogICAgICAgICAgICAgICAgICA0LAogICAgWl9ERUZBVUxUX1NUUkFURUdZOiAgICAgICAwLAoKICAgIC8qIFBvc3NpYmxlIHZhbHVlcyBvZiB0aGUgZGF0YV90eXBlIGZpZWxkICh0aG91Z2ggc2VlIGluZmxhdGUoKSkgKi8KICAgIFpfQklOQVJZOiAgICAgICAgICAgICAgICAgMCwKICAgIFpfVEVYVDogICAgICAgICAgICAgICAgICAgMSwKICAgIC8vWl9BU0NJSTogICAgICAgICAgICAgICAgMSwgLy8gPSBaX1RFWFQgKGRlcHJlY2F0ZWQpCiAgICBaX1VOS05PV046ICAgICAgICAgICAgICAgIDIsCgogICAgLyogVGhlIGRlZmxhdGUgY29tcHJlc3Npb24gbWV0aG9kICovCiAgICBaX0RFRkxBVEVEOiAgICAgICAgICAgICAgIDgKICAgIC8vWl9OVUxMOiAgICAgICAgICAgICAgICAgbnVsbCAvLyBVc2UgLTEgb3IgbnVsbCBpbmxpbmUsIGRlcGVuZGluZyBvbiB2YXIgdHlwZQogIH07CgogIC8vIChDKSAxOTk1LTIwMTMgSmVhbi1sb3VwIEdhaWxseSBhbmQgTWFyayBBZGxlcgogIC8vIChDKSAyMDE0LTIwMTcgVml0YWx5IFB1enJpbiBhbmQgQW5kcmV5IFR1cGl0c2luCiAgLy8KICAvLyBUaGlzIHNvZnR3YXJlIGlzIHByb3ZpZGVkICdhcy1pcycsIHdpdGhvdXQgYW55IGV4cHJlc3Mgb3IgaW1wbGllZAogIC8vIHdhcnJhbnR5LiBJbiBubyBldmVudCB3aWxsIHRoZSBhdXRob3JzIGJlIGhlbGQgbGlhYmxlIGZvciBhbnkgZGFtYWdlcwogIC8vIGFyaXNpbmcgZnJvbSB0aGUgdXNlIG9mIHRoaXMgc29mdHdhcmUuCiAgLy8KICAvLyBQZXJtaXNzaW9uIGlzIGdyYW50ZWQgdG8gYW55b25lIHRvIHVzZSB0aGlzIHNvZnR3YXJlIGZvciBhbnkgcHVycG9zZSwKICAvLyBpbmNsdWRpbmcgY29tbWVyY2lhbCBhcHBsaWNhdGlvbnMsIGFuZCB0byBhbHRlciBpdCBhbmQgcmVkaXN0cmlidXRlIGl0CiAgLy8gZnJlZWx5LCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgcmVzdHJpY3Rpb25zOgogIC8vCiAgLy8gMS4gVGhlIG9yaWdpbiBvZiB0aGlzIHNvZnR3YXJlIG11c3Qgbm90IGJlIG1pc3JlcHJlc2VudGVkOyB5b3UgbXVzdCBub3QKICAvLyAgIGNsYWltIHRoYXQgeW91IHdyb3RlIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS4gSWYgeW91IHVzZSB0aGlzIHNvZnR3YXJlCiAgLy8gICBpbiBhIHByb2R1Y3QsIGFuIGFja25vd2xlZGdtZW50IGluIHRoZSBwcm9kdWN0IGRvY3VtZW50YXRpb24gd291bGQgYmUKICAvLyAgIGFwcHJlY2lhdGVkIGJ1dCBpcyBub3QgcmVxdWlyZWQuCiAgLy8gMi4gQWx0ZXJlZCBzb3VyY2UgdmVyc2lvbnMgbXVzdCBiZSBwbGFpbmx5IG1hcmtlZCBhcyBzdWNoLCBhbmQgbXVzdCBub3QgYmUKICAvLyAgIG1pc3JlcHJlc2VudGVkIGFzIGJlaW5nIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS4KICAvLyAzLiBUaGlzIG5vdGljZSBtYXkgbm90IGJlIHJlbW92ZWQgb3IgYWx0ZXJlZCBmcm9tIGFueSBzb3VyY2UgZGlzdHJpYnV0aW9uLgoKICBjb25zdCB7IF90cl9pbml0LCBfdHJfc3RvcmVkX2Jsb2NrLCBfdHJfZmx1c2hfYmxvY2ssIF90cl90YWxseSwgX3RyX2FsaWduIH0gPSB0cmVlczsKCgoKCiAgLyogUHVibGljIGNvbnN0YW50cyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki8KICAvKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qLwoKICBjb25zdCB7CiAgICBaX05PX0ZMVVNIOiBaX05PX0ZMVVNIJDIsIFpfUEFSVElBTF9GTFVTSCwgWl9GVUxMX0ZMVVNIOiBaX0ZVTExfRkxVU0gkMSwgWl9GSU5JU0g6IFpfRklOSVNIJDMsIFpfQkxPQ0s6IFpfQkxPQ0skMSwKICAgIFpfT0s6IFpfT0skMywgWl9TVFJFQU1fRU5EOiBaX1NUUkVBTV9FTkQkMywgWl9TVFJFQU1fRVJST1I6IFpfU1RSRUFNX0VSUk9SJDIsIFpfREFUQV9FUlJPUjogWl9EQVRBX0VSUk9SJDIsIFpfQlVGX0VSUk9SOiBaX0JVRl9FUlJPUiQxLAogICAgWl9ERUZBVUxUX0NPTVBSRVNTSU9OOiBaX0RFRkFVTFRfQ09NUFJFU1NJT04kMSwKICAgIFpfRklMVEVSRUQsIFpfSFVGRk1BTl9PTkxZLCBaX1JMRSwgWl9GSVhFRCwgWl9ERUZBVUxUX1NUUkFURUdZOiBaX0RFRkFVTFRfU1RSQVRFR1kkMSwKICAgIFpfVU5LTk9XTiwKICAgIFpfREVGTEFURUQ6IFpfREVGTEFURUQkMgogIH0gPSBjb25zdGFudHMkMjsKCiAgLyo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki8KCgogIGNvbnN0IE1BWF9NRU1fTEVWRUwgPSA5OwogIC8qIE1heGltdW0gdmFsdWUgZm9yIG1lbUxldmVsIGluIGRlZmxhdGVJbml0MiAqLwogIGNvbnN0IE1BWF9XQklUUyQxID0gMTU7CiAgLyogMzJLIExaNzcgd2luZG93ICovCiAgY29uc3QgREVGX01FTV9MRVZFTCA9IDg7CgoKICBjb25zdCBMRU5HVEhfQ09ERVMgID0gMjk7CiAgLyogbnVtYmVyIG9mIGxlbmd0aCBjb2Rlcywgbm90IGNvdW50aW5nIHRoZSBzcGVjaWFsIEVORF9CTE9DSyBjb2RlICovCiAgY29uc3QgTElURVJBTFMgICAgICA9IDI1NjsKICAvKiBudW1iZXIgb2YgbGl0ZXJhbCBieXRlcyAwLi4yNTUgKi8KICBjb25zdCBMX0NPREVTICAgICAgID0gTElURVJBTFMgKyAxICsgTEVOR1RIX0NPREVTOwogIC8qIG51bWJlciBvZiBMaXRlcmFsIG9yIExlbmd0aCBjb2RlcywgaW5jbHVkaW5nIHRoZSBFTkRfQkxPQ0sgY29kZSAqLwogIGNvbnN0IERfQ09ERVMgICAgICAgPSAzMDsKICAvKiBudW1iZXIgb2YgZGlzdGFuY2UgY29kZXMgKi8KICBjb25zdCBCTF9DT0RFUyAgICAgID0gMTk7CiAgLyogbnVtYmVyIG9mIGNvZGVzIHVzZWQgdG8gdHJhbnNmZXIgdGhlIGJpdCBsZW5ndGhzICovCiAgY29uc3QgSEVBUF9TSVpFICAgICA9IDIgKiBMX0NPREVTICsgMTsKICAvKiBtYXhpbXVtIGhlYXAgc2l6ZSAqLwogIGNvbnN0IE1BWF9CSVRTICA9IDE1OwogIC8qIEFsbCBjb2RlcyBtdXN0IG5vdCBleGNlZWQgTUFYX0JJVFMgYml0cyAqLwoKICBjb25zdCBNSU5fTUFUQ0ggPSAzOwogIGNvbnN0IE1BWF9NQVRDSCA9IDI1ODsKICBjb25zdCBNSU5fTE9PS0FIRUFEID0gKE1BWF9NQVRDSCArIE1JTl9NQVRDSCArIDEpOwoKICBjb25zdCBQUkVTRVRfRElDVCA9IDB4MjA7CgogIGNvbnN0IElOSVRfU1RBVEUgPSA0MjsKICBjb25zdCBFWFRSQV9TVEFURSA9IDY5OwogIGNvbnN0IE5BTUVfU1RBVEUgPSA3MzsKICBjb25zdCBDT01NRU5UX1NUQVRFID0gOTE7CiAgY29uc3QgSENSQ19TVEFURSA9IDEwMzsKICBjb25zdCBCVVNZX1NUQVRFID0gMTEzOwogIGNvbnN0IEZJTklTSF9TVEFURSA9IDY2NjsKCiAgY29uc3QgQlNfTkVFRF9NT1JFICAgICAgPSAxOyAvKiBibG9jayBub3QgY29tcGxldGVkLCBuZWVkIG1vcmUgaW5wdXQgb3IgbW9yZSBvdXRwdXQgKi8KICBjb25zdCBCU19CTE9DS19ET05FICAgICA9IDI7IC8qIGJsb2NrIGZsdXNoIHBlcmZvcm1lZCAqLwogIGNvbnN0IEJTX0ZJTklTSF9TVEFSVEVEID0gMzsgLyogZmluaXNoIHN0YXJ0ZWQsIG5lZWQgb25seSBtb3JlIG91dHB1dCBhdCBuZXh0IGRlZmxhdGUgKi8KICBjb25zdCBCU19GSU5JU0hfRE9ORSAgICA9IDQ7IC8qIGZpbmlzaCBkb25lLCBhY2NlcHQgbm8gbW9yZSBpbnB1dCBvciBvdXRwdXQgKi8KCiAgY29uc3QgT1NfQ09ERSA9IDB4MDM7IC8vIFVuaXggOikgLiBEb24ndCBkZXRlY3QsIHVzZSB0aGlzIGRlZmF1bHQuCgogIGNvbnN0IGVyciA9IChzdHJtLCBlcnJvckNvZGUpID0+IHsKICAgIHN0cm0ubXNnID0gbWVzc2FnZXNbZXJyb3JDb2RlXTsKICAgIHJldHVybiBlcnJvckNvZGU7CiAgfTsKCiAgY29uc3QgcmFuayA9IChmKSA9PiB7CiAgICByZXR1cm4gKChmKSA8PCAxKSAtICgoZikgPiA0ID8gOSA6IDApOwogIH07CgogIGNvbnN0IHplcm8gPSAoYnVmKSA9PiB7CiAgICBsZXQgbGVuID0gYnVmLmxlbmd0aDsgd2hpbGUgKC0tbGVuID49IDApIHsgYnVmW2xlbl0gPSAwOyB9CiAgfTsKCgogIC8qIGVzbGludC1kaXNhYmxlIG5ldy1jYXAgKi8KICBsZXQgSEFTSF9aTElCID0gKHMsIHByZXYsIGRhdGEpID0+ICgocHJldiA8PCBzLmhhc2hfc2hpZnQpIF4gZGF0YSkgJiBzLmhhc2hfbWFzazsKICAvLyBUaGlzIGhhc2ggY2F1c2VzIGxlc3MgY29sbGlzaW9ucywgaHR0cHM6Ly9naXRodWIuY29tL25vZGVjYS9wYWtvL2lzc3Vlcy8xMzUKICAvLyBCdXQgYnJlYWtzIGJpbmFyeSBjb21wYXRpYmlsaXR5CiAgLy9sZXQgSEFTSF9GQVNUID0gKHMsIHByZXYsIGRhdGEpID0+ICgocHJldiA8PCA4KSArIChwcmV2ID4+IDgpICsgKGRhdGEgPDwgNCkpICYgcy5oYXNoX21hc2s7CiAgbGV0IEhBU0ggPSBIQVNIX1pMSUI7CgogIC8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgKiBGbHVzaCBhcyBtdWNoIHBlbmRpbmcgb3V0cHV0IGFzIHBvc3NpYmxlLiBBbGwgZGVmbGF0ZSgpIG91dHB1dCBnb2VzCiAgICogdGhyb3VnaCB0aGlzIGZ1bmN0aW9uIHNvIHNvbWUgYXBwbGljYXRpb25zIG1heSB3aXNoIHRvIG1vZGlmeSBpdAogICAqIHRvIGF2b2lkIGFsbG9jYXRpbmcgYSBsYXJnZSBzdHJtLT5vdXRwdXQgYnVmZmVyIGFuZCBjb3B5aW5nIGludG8gaXQuCiAgICogKFNlZSBhbHNvIHJlYWRfYnVmKCkpLgogICAqLwogIGNvbnN0IGZsdXNoX3BlbmRpbmcgPSAoc3RybSkgPT4gewogICAgY29uc3QgcyA9IHN0cm0uc3RhdGU7CgogICAgLy9fdHJfZmx1c2hfYml0cyhzKTsKICAgIGxldCBsZW4gPSBzLnBlbmRpbmc7CiAgICBpZiAobGVuID4gc3RybS5hdmFpbF9vdXQpIHsKICAgICAgbGVuID0gc3RybS5hdmFpbF9vdXQ7CiAgICB9CiAgICBpZiAobGVuID09PSAwKSB7IHJldHVybjsgfQoKICAgIHN0cm0ub3V0cHV0LnNldChzLnBlbmRpbmdfYnVmLnN1YmFycmF5KHMucGVuZGluZ19vdXQsIHMucGVuZGluZ19vdXQgKyBsZW4pLCBzdHJtLm5leHRfb3V0KTsKICAgIHN0cm0ubmV4dF9vdXQgKz0gbGVuOwogICAgcy5wZW5kaW5nX291dCArPSBsZW47CiAgICBzdHJtLnRvdGFsX291dCArPSBsZW47CiAgICBzdHJtLmF2YWlsX291dCAtPSBsZW47CiAgICBzLnBlbmRpbmcgLT0gbGVuOwogICAgaWYgKHMucGVuZGluZyA9PT0gMCkgewogICAgICBzLnBlbmRpbmdfb3V0ID0gMDsKICAgIH0KICB9OwoKCiAgY29uc3QgZmx1c2hfYmxvY2tfb25seSA9IChzLCBsYXN0KSA9PiB7CiAgICBfdHJfZmx1c2hfYmxvY2socywgKHMuYmxvY2tfc3RhcnQgPj0gMCA/IHMuYmxvY2tfc3RhcnQgOiAtMSksIHMuc3Ryc3RhcnQgLSBzLmJsb2NrX3N0YXJ0LCBsYXN0KTsKICAgIHMuYmxvY2tfc3RhcnQgPSBzLnN0cnN0YXJ0OwogICAgZmx1c2hfcGVuZGluZyhzLnN0cm0pOwogIH07CgoKICBjb25zdCBwdXRfYnl0ZSA9IChzLCBiKSA9PiB7CiAgICBzLnBlbmRpbmdfYnVmW3MucGVuZGluZysrXSA9IGI7CiAgfTsKCgogIC8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgKiBQdXQgYSBzaG9ydCBpbiB0aGUgcGVuZGluZyBidWZmZXIuIFRoZSAxNi1iaXQgdmFsdWUgaXMgcHV0IGluIE1TQiBvcmRlci4KICAgKiBJTiBhc3NlcnRpb246IHRoZSBzdHJlYW0gc3RhdGUgaXMgY29ycmVjdCBhbmQgdGhlcmUgaXMgZW5vdWdoIHJvb20gaW4KICAgKiBwZW5kaW5nX2J1Zi4KICAgKi8KICBjb25zdCBwdXRTaG9ydE1TQiA9IChzLCBiKSA9PiB7CgogICAgLy8gIHB1dF9ieXRlKHMsIChCeXRlKShiID4+IDgpKTsKICAvLyAgcHV0X2J5dGUocywgKEJ5dGUpKGIgJiAweGZmKSk7CiAgICBzLnBlbmRpbmdfYnVmW3MucGVuZGluZysrXSA9IChiID4+PiA4KSAmIDB4ZmY7CiAgICBzLnBlbmRpbmdfYnVmW3MucGVuZGluZysrXSA9IGIgJiAweGZmOwogIH07CgoKICAvKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgKiBSZWFkIGEgbmV3IGJ1ZmZlciBmcm9tIHRoZSBjdXJyZW50IGlucHV0IHN0cmVhbSwgdXBkYXRlIHRoZSBhZGxlcjMyCiAgICogYW5kIHRvdGFsIG51bWJlciBvZiBieXRlcyByZWFkLiAgQWxsIGRlZmxhdGUoKSBpbnB1dCBnb2VzIHRocm91Z2gKICAgKiB0aGlzIGZ1bmN0aW9uIHNvIHNvbWUgYXBwbGljYXRpb25zIG1heSB3aXNoIHRvIG1vZGlmeSBpdCB0byBhdm9pZAogICAqIGFsbG9jYXRpbmcgYSBsYXJnZSBzdHJtLT5pbnB1dCBidWZmZXIgYW5kIGNvcHlpbmcgZnJvbSBpdC4KICAgKiAoU2VlIGFsc28gZmx1c2hfcGVuZGluZygpKS4KICAgKi8KICBjb25zdCByZWFkX2J1ZiA9IChzdHJtLCBidWYsIHN0YXJ0LCBzaXplKSA9PiB7CgogICAgbGV0IGxlbiA9IHN0cm0uYXZhaWxfaW47CgogICAgaWYgKGxlbiA+IHNpemUpIHsgbGVuID0gc2l6ZTsgfQogICAgaWYgKGxlbiA9PT0gMCkgeyByZXR1cm4gMDsgfQoKICAgIHN0cm0uYXZhaWxfaW4gLT0gbGVuOwoKICAgIC8vIHptZW1jcHkoYnVmLCBzdHJtLT5uZXh0X2luLCBsZW4pOwogICAgYnVmLnNldChzdHJtLmlucHV0LnN1YmFycmF5KHN0cm0ubmV4dF9pbiwgc3RybS5uZXh0X2luICsgbGVuKSwgc3RhcnQpOwogICAgaWYgKHN0cm0uc3RhdGUud3JhcCA9PT0gMSkgewogICAgICBzdHJtLmFkbGVyID0gYWRsZXIzMl8xKHN0cm0uYWRsZXIsIGJ1ZiwgbGVuLCBzdGFydCk7CiAgICB9CgogICAgZWxzZSBpZiAoc3RybS5zdGF0ZS53cmFwID09PSAyKSB7CiAgICAgIHN0cm0uYWRsZXIgPSBjcmMzMl8xKHN0cm0uYWRsZXIsIGJ1ZiwgbGVuLCBzdGFydCk7CiAgICB9CgogICAgc3RybS5uZXh0X2luICs9IGxlbjsKICAgIHN0cm0udG90YWxfaW4gKz0gbGVuOwoKICAgIHJldHVybiBsZW47CiAgfTsKCgogIC8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAqIFNldCBtYXRjaF9zdGFydCB0byB0aGUgbG9uZ2VzdCBtYXRjaCBzdGFydGluZyBhdCB0aGUgZ2l2ZW4gc3RyaW5nIGFuZAogICAqIHJldHVybiBpdHMgbGVuZ3RoLiBNYXRjaGVzIHNob3J0ZXIgb3IgZXF1YWwgdG8gcHJldl9sZW5ndGggYXJlIGRpc2NhcmRlZCwKICAgKiBpbiB3aGljaCBjYXNlIHRoZSByZXN1bHQgaXMgZXF1YWwgdG8gcHJldl9sZW5ndGggYW5kIG1hdGNoX3N0YXJ0IGlzCiAgICogZ2FyYmFnZS4KICAgKiBJTiBhc3NlcnRpb25zOiBjdXJfbWF0Y2ggaXMgdGhlIGhlYWQgb2YgdGhlIGhhc2ggY2hhaW4gZm9yIHRoZSBjdXJyZW50CiAgICogICBzdHJpbmcgKHN0cnN0YXJ0KSBhbmQgaXRzIGRpc3RhbmNlIGlzIDw9IE1BWF9ESVNULCBhbmQgcHJldl9sZW5ndGggPj0gMQogICAqIE9VVCBhc3NlcnRpb246IHRoZSBtYXRjaCBsZW5ndGggaXMgbm90IGdyZWF0ZXIgdGhhbiBzLT5sb29rYWhlYWQuCiAgICovCiAgY29uc3QgbG9uZ2VzdF9tYXRjaCA9IChzLCBjdXJfbWF0Y2gpID0+IHsKCiAgICBsZXQgY2hhaW5fbGVuZ3RoID0gcy5tYXhfY2hhaW5fbGVuZ3RoOyAgICAgIC8qIG1heCBoYXNoIGNoYWluIGxlbmd0aCAqLwogICAgbGV0IHNjYW4gPSBzLnN0cnN0YXJ0OyAvKiBjdXJyZW50IHN0cmluZyAqLwogICAgbGV0IG1hdGNoOyAgICAgICAgICAgICAgICAgICAgICAgLyogbWF0Y2hlZCBzdHJpbmcgKi8KICAgIGxldCBsZW47ICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogbGVuZ3RoIG9mIGN1cnJlbnQgbWF0Y2ggKi8KICAgIGxldCBiZXN0X2xlbiA9IHMucHJldl9sZW5ndGg7ICAgICAgICAgICAgICAvKiBiZXN0IG1hdGNoIGxlbmd0aCBzbyBmYXIgKi8KICAgIGxldCBuaWNlX21hdGNoID0gcy5uaWNlX21hdGNoOyAgICAgICAgICAgICAvKiBzdG9wIGlmIG1hdGNoIGxvbmcgZW5vdWdoICovCiAgICBjb25zdCBsaW1pdCA9IChzLnN0cnN0YXJ0ID4gKHMud19zaXplIC0gTUlOX0xPT0tBSEVBRCkpID8KICAgICAgICBzLnN0cnN0YXJ0IC0gKHMud19zaXplIC0gTUlOX0xPT0tBSEVBRCkgOiAwLypOSUwqLzsKCiAgICBjb25zdCBfd2luID0gcy53aW5kb3c7IC8vIHNob3J0Y3V0CgogICAgY29uc3Qgd21hc2sgPSBzLndfbWFzazsKICAgIGNvbnN0IHByZXYgID0gcy5wcmV2OwoKICAgIC8qIFN0b3Agd2hlbiBjdXJfbWF0Y2ggYmVjb21lcyA8PSBsaW1pdC4gVG8gc2ltcGxpZnkgdGhlIGNvZGUsCiAgICAgKiB3ZSBwcmV2ZW50IG1hdGNoZXMgd2l0aCB0aGUgc3RyaW5nIG9mIHdpbmRvdyBpbmRleCAwLgogICAgICovCgogICAgY29uc3Qgc3RyZW5kID0gcy5zdHJzdGFydCArIE1BWF9NQVRDSDsKICAgIGxldCBzY2FuX2VuZDEgID0gX3dpbltzY2FuICsgYmVzdF9sZW4gLSAxXTsKICAgIGxldCBzY2FuX2VuZCAgID0gX3dpbltzY2FuICsgYmVzdF9sZW5dOwoKICAgIC8qIFRoZSBjb2RlIGlzIG9wdGltaXplZCBmb3IgSEFTSF9CSVRTID49IDggYW5kIE1BWF9NQVRDSC0yIG11bHRpcGxlIG9mIDE2LgogICAgICogSXQgaXMgZWFzeSB0byBnZXQgcmlkIG9mIHRoaXMgb3B0aW1pemF0aW9uIGlmIG5lY2Vzc2FyeS4KICAgICAqLwogICAgLy8gQXNzZXJ0KHMtPmhhc2hfYml0cyA+PSA4ICYmIE1BWF9NQVRDSCA9PSAyNTgsICJDb2RlIHRvbyBjbGV2ZXIiKTsKCiAgICAvKiBEbyBub3Qgd2FzdGUgdG9vIG11Y2ggdGltZSBpZiB3ZSBhbHJlYWR5IGhhdmUgYSBnb29kIG1hdGNoOiAqLwogICAgaWYgKHMucHJldl9sZW5ndGggPj0gcy5nb29kX21hdGNoKSB7CiAgICAgIGNoYWluX2xlbmd0aCA+Pj0gMjsKICAgIH0KICAgIC8qIERvIG5vdCBsb29rIGZvciBtYXRjaGVzIGJleW9uZCB0aGUgZW5kIG9mIHRoZSBpbnB1dC4gVGhpcyBpcyBuZWNlc3NhcnkKICAgICAqIHRvIG1ha2UgZGVmbGF0ZSBkZXRlcm1pbmlzdGljLgogICAgICovCiAgICBpZiAobmljZV9tYXRjaCA+IHMubG9va2FoZWFkKSB7IG5pY2VfbWF0Y2ggPSBzLmxvb2thaGVhZDsgfQoKICAgIC8vIEFzc2VydCgodWxnKXMtPnN0cnN0YXJ0IDw9IHMtPndpbmRvd19zaXplLU1JTl9MT09LQUhFQUQsICJuZWVkIGxvb2thaGVhZCIpOwoKICAgIGRvIHsKICAgICAgLy8gQXNzZXJ0KGN1cl9tYXRjaCA8IHMtPnN0cnN0YXJ0LCAibm8gZnV0dXJlIik7CiAgICAgIG1hdGNoID0gY3VyX21hdGNoOwoKICAgICAgLyogU2tpcCB0byBuZXh0IG1hdGNoIGlmIHRoZSBtYXRjaCBsZW5ndGggY2Fubm90IGluY3JlYXNlCiAgICAgICAqIG9yIGlmIHRoZSBtYXRjaCBsZW5ndGggaXMgbGVzcyB0aGFuIDIuICBOb3RlIHRoYXQgdGhlIGNoZWNrcyBiZWxvdwogICAgICAgKiBmb3IgaW5zdWZmaWNpZW50IGxvb2thaGVhZCBvbmx5IG9jY3VyIG9jY2FzaW9uYWxseSBmb3IgcGVyZm9ybWFuY2UKICAgICAgICogcmVhc29ucy4gIFRoZXJlZm9yZSB1bmluaXRpYWxpemVkIG1lbW9yeSB3aWxsIGJlIGFjY2Vzc2VkLCBhbmQKICAgICAgICogY29uZGl0aW9uYWwganVtcHMgd2lsbCBiZSBtYWRlIHRoYXQgZGVwZW5kIG9uIHRob3NlIHZhbHVlcy4KICAgICAgICogSG93ZXZlciB0aGUgbGVuZ3RoIG9mIHRoZSBtYXRjaCBpcyBsaW1pdGVkIHRvIHRoZSBsb29rYWhlYWQsIHNvCiAgICAgICAqIHRoZSBvdXRwdXQgb2YgZGVmbGF0ZSBpcyBub3QgYWZmZWN0ZWQgYnkgdGhlIHVuaW5pdGlhbGl6ZWQgdmFsdWVzLgogICAgICAgKi8KCiAgICAgIGlmIChfd2luW21hdGNoICsgYmVzdF9sZW5dICAgICAhPT0gc2Nhbl9lbmQgIHx8CiAgICAgICAgICBfd2luW21hdGNoICsgYmVzdF9sZW4gLSAxXSAhPT0gc2Nhbl9lbmQxIHx8CiAgICAgICAgICBfd2luW21hdGNoXSAgICAgICAgICAgICAgICAhPT0gX3dpbltzY2FuXSB8fAogICAgICAgICAgX3dpblsrK21hdGNoXSAgICAgICAgICAgICAgIT09IF93aW5bc2NhbiArIDFdKSB7CiAgICAgICAgY29udGludWU7CiAgICAgIH0KCiAgICAgIC8qIFRoZSBjaGVjayBhdCBiZXN0X2xlbi0xIGNhbiBiZSByZW1vdmVkIGJlY2F1c2UgaXQgd2lsbCBiZSBtYWRlCiAgICAgICAqIGFnYWluIGxhdGVyLiAoVGhpcyBoZXVyaXN0aWMgaXMgbm90IGFsd2F5cyBhIHdpbi4pCiAgICAgICAqIEl0IGlzIG5vdCBuZWNlc3NhcnkgdG8gY29tcGFyZSBzY2FuWzJdIGFuZCBtYXRjaFsyXSBzaW5jZSB0aGV5CiAgICAgICAqIGFyZSBhbHdheXMgZXF1YWwgd2hlbiB0aGUgb3RoZXIgYnl0ZXMgbWF0Y2gsIGdpdmVuIHRoYXQKICAgICAgICogdGhlIGhhc2gga2V5cyBhcmUgZXF1YWwgYW5kIHRoYXQgSEFTSF9CSVRTID49IDguCiAgICAgICAqLwogICAgICBzY2FuICs9IDI7CiAgICAgIG1hdGNoKys7CiAgICAgIC8vIEFzc2VydCgqc2NhbiA9PSAqbWF0Y2gsICJtYXRjaFsyXT8iKTsKCiAgICAgIC8qIFdlIGNoZWNrIGZvciBpbnN1ZmZpY2llbnQgbG9va2FoZWFkIG9ubHkgZXZlcnkgOHRoIGNvbXBhcmlzb247CiAgICAgICAqIHRoZSAyNTZ0aCBjaGVjayB3aWxsIGJlIG1hZGUgYXQgc3Ryc3RhcnQrMjU4LgogICAgICAgKi8KICAgICAgZG8gewogICAgICAgIC8qanNoaW50IG5vZW1wdHk6ZmFsc2UqLwogICAgICB9IHdoaWxlIChfd2luWysrc2Nhbl0gPT09IF93aW5bKyttYXRjaF0gJiYgX3dpblsrK3NjYW5dID09PSBfd2luWysrbWF0Y2hdICYmCiAgICAgICAgICAgICAgIF93aW5bKytzY2FuXSA9PT0gX3dpblsrK21hdGNoXSAmJiBfd2luWysrc2Nhbl0gPT09IF93aW5bKyttYXRjaF0gJiYKICAgICAgICAgICAgICAgX3dpblsrK3NjYW5dID09PSBfd2luWysrbWF0Y2hdICYmIF93aW5bKytzY2FuXSA9PT0gX3dpblsrK21hdGNoXSAmJgogICAgICAgICAgICAgICBfd2luWysrc2Nhbl0gPT09IF93aW5bKyttYXRjaF0gJiYgX3dpblsrK3NjYW5dID09PSBfd2luWysrbWF0Y2hdICYmCiAgICAgICAgICAgICAgIHNjYW4gPCBzdHJlbmQpOwoKICAgICAgLy8gQXNzZXJ0KHNjYW4gPD0gcy0+d2luZG93Kyh1bnNpZ25lZCkocy0+d2luZG93X3NpemUtMSksICJ3aWxkIHNjYW4iKTsKCiAgICAgIGxlbiA9IE1BWF9NQVRDSCAtIChzdHJlbmQgLSBzY2FuKTsKICAgICAgc2NhbiA9IHN0cmVuZCAtIE1BWF9NQVRDSDsKCiAgICAgIGlmIChsZW4gPiBiZXN0X2xlbikgewogICAgICAgIHMubWF0Y2hfc3RhcnQgPSBjdXJfbWF0Y2g7CiAgICAgICAgYmVzdF9sZW4gPSBsZW47CiAgICAgICAgaWYgKGxlbiA+PSBuaWNlX21hdGNoKSB7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgICAgc2Nhbl9lbmQxICA9IF93aW5bc2NhbiArIGJlc3RfbGVuIC0gMV07CiAgICAgICAgc2Nhbl9lbmQgICA9IF93aW5bc2NhbiArIGJlc3RfbGVuXTsKICAgICAgfQogICAgfSB3aGlsZSAoKGN1cl9tYXRjaCA9IHByZXZbY3VyX21hdGNoICYgd21hc2tdKSA+IGxpbWl0ICYmIC0tY2hhaW5fbGVuZ3RoICE9PSAwKTsKCiAgICBpZiAoYmVzdF9sZW4gPD0gcy5sb29rYWhlYWQpIHsKICAgICAgcmV0dXJuIGJlc3RfbGVuOwogICAgfQogICAgcmV0dXJuIHMubG9va2FoZWFkOwogIH07CgoKICAvKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgKiBGaWxsIHRoZSB3aW5kb3cgd2hlbiB0aGUgbG9va2FoZWFkIGJlY29tZXMgaW5zdWZmaWNpZW50LgogICAqIFVwZGF0ZXMgc3Ryc3RhcnQgYW5kIGxvb2thaGVhZC4KICAgKgogICAqIElOIGFzc2VydGlvbjogbG9va2FoZWFkIDwgTUlOX0xPT0tBSEVBRAogICAqIE9VVCBhc3NlcnRpb25zOiBzdHJzdGFydCA8PSB3aW5kb3dfc2l6ZS1NSU5fTE9PS0FIRUFECiAgICogICAgQXQgbGVhc3Qgb25lIGJ5dGUgaGFzIGJlZW4gcmVhZCwgb3IgYXZhaWxfaW4gPT0gMDsgcmVhZHMgYXJlCiAgICogICAgcGVyZm9ybWVkIGZvciBhdCBsZWFzdCB0d28gYnl0ZXMgKHJlcXVpcmVkIGZvciB0aGUgemlwIHRyYW5zbGF0ZV9lb2wKICAgKiAgICBvcHRpb24gLS0gbm90IHN1cHBvcnRlZCBoZXJlKS4KICAgKi8KICBjb25zdCBmaWxsX3dpbmRvdyA9IChzKSA9PiB7CgogICAgY29uc3QgX3dfc2l6ZSA9IHMud19zaXplOwogICAgbGV0IHAsIG4sIG0sIG1vcmUsIHN0cjsKCiAgICAvL0Fzc2VydChzLT5sb29rYWhlYWQgPCBNSU5fTE9PS0FIRUFELCAiYWxyZWFkeSBlbm91Z2ggbG9va2FoZWFkIik7CgogICAgZG8gewogICAgICBtb3JlID0gcy53aW5kb3dfc2l6ZSAtIHMubG9va2FoZWFkIC0gcy5zdHJzdGFydDsKCiAgICAgIC8vIEpTIGludHMgaGF2ZSAzMiBiaXQsIGJsb2NrIGJlbG93IG5vdCBuZWVkZWQKICAgICAgLyogRGVhbCB3aXRoICFAIyQlIDY0SyBsaW1pdDogKi8KICAgICAgLy9pZiAoc2l6ZW9mKGludCkgPD0gMikgewogICAgICAvLyAgICBpZiAobW9yZSA9PSAwICYmIHMtPnN0cnN0YXJ0ID09IDAgJiYgcy0+bG9va2FoZWFkID09IDApIHsKICAgICAgLy8gICAgICAgIG1vcmUgPSB3c2l6ZTsKICAgICAgLy8KICAgICAgLy8gIH0gZWxzZSBpZiAobW9yZSA9PSAodW5zaWduZWQpKC0xKSkgewogICAgICAvLyAgICAgICAgLyogVmVyeSB1bmxpa2VseSwgYnV0IHBvc3NpYmxlIG9uIDE2IGJpdCBtYWNoaW5lIGlmCiAgICAgIC8vICAgICAgICAgKiBzdHJzdGFydCA9PSAwICYmIGxvb2thaGVhZCA9PSAxIChpbnB1dCBkb25lIGEgYnl0ZSBhdCB0aW1lKQogICAgICAvLyAgICAgICAgICovCiAgICAgIC8vICAgICAgICBtb3JlLS07CiAgICAgIC8vICAgIH0KICAgICAgLy99CgoKICAgICAgLyogSWYgdGhlIHdpbmRvdyBpcyBhbG1vc3QgZnVsbCBhbmQgdGhlcmUgaXMgaW5zdWZmaWNpZW50IGxvb2thaGVhZCwKICAgICAgICogbW92ZSB0aGUgdXBwZXIgaGFsZiB0byB0aGUgbG93ZXIgb25lIHRvIG1ha2Ugcm9vbSBpbiB0aGUgdXBwZXIgaGFsZi4KICAgICAgICovCiAgICAgIGlmIChzLnN0cnN0YXJ0ID49IF93X3NpemUgKyAoX3dfc2l6ZSAtIE1JTl9MT09LQUhFQUQpKSB7CgogICAgICAgIHMud2luZG93LnNldChzLndpbmRvdy5zdWJhcnJheShfd19zaXplLCBfd19zaXplICsgX3dfc2l6ZSksIDApOwogICAgICAgIHMubWF0Y2hfc3RhcnQgLT0gX3dfc2l6ZTsKICAgICAgICBzLnN0cnN0YXJ0IC09IF93X3NpemU7CiAgICAgICAgLyogd2Ugbm93IGhhdmUgc3Ryc3RhcnQgPj0gTUFYX0RJU1QgKi8KICAgICAgICBzLmJsb2NrX3N0YXJ0IC09IF93X3NpemU7CgogICAgICAgIC8qIFNsaWRlIHRoZSBoYXNoIHRhYmxlIChjb3VsZCBiZSBhdm9pZGVkIHdpdGggMzIgYml0IHZhbHVlcwogICAgICAgICBhdCB0aGUgZXhwZW5zZSBvZiBtZW1vcnkgdXNhZ2UpLiBXZSBzbGlkZSBldmVuIHdoZW4gbGV2ZWwgPT0gMAogICAgICAgICB0byBrZWVwIHRoZSBoYXNoIHRhYmxlIGNvbnNpc3RlbnQgaWYgd2Ugc3dpdGNoIGJhY2sgdG8gbGV2ZWwgPiAwCiAgICAgICAgIGxhdGVyLiAoVXNpbmcgbGV2ZWwgMCBwZXJtYW5lbnRseSBpcyBub3QgYW4gb3B0aW1hbCB1c2FnZSBvZgogICAgICAgICB6bGliLCBzbyB3ZSBkb24ndCBjYXJlIGFib3V0IHRoaXMgcGF0aG9sb2dpY2FsIGNhc2UuKQogICAgICAgICAqLwoKICAgICAgICBuID0gcy5oYXNoX3NpemU7CiAgICAgICAgcCA9IG47CgogICAgICAgIGRvIHsKICAgICAgICAgIG0gPSBzLmhlYWRbLS1wXTsKICAgICAgICAgIHMuaGVhZFtwXSA9IChtID49IF93X3NpemUgPyBtIC0gX3dfc2l6ZSA6IDApOwogICAgICAgIH0gd2hpbGUgKC0tbik7CgogICAgICAgIG4gPSBfd19zaXplOwogICAgICAgIHAgPSBuOwoKICAgICAgICBkbyB7CiAgICAgICAgICBtID0gcy5wcmV2Wy0tcF07CiAgICAgICAgICBzLnByZXZbcF0gPSAobSA+PSBfd19zaXplID8gbSAtIF93X3NpemUgOiAwKTsKICAgICAgICAgIC8qIElmIG4gaXMgbm90IG9uIGFueSBoYXNoIGNoYWluLCBwcmV2W25dIGlzIGdhcmJhZ2UgYnV0CiAgICAgICAgICAgKiBpdHMgdmFsdWUgd2lsbCBuZXZlciBiZSB1c2VkLgogICAgICAgICAgICovCiAgICAgICAgfSB3aGlsZSAoLS1uKTsKCiAgICAgICAgbW9yZSArPSBfd19zaXplOwogICAgICB9CiAgICAgIGlmIChzLnN0cm0uYXZhaWxfaW4gPT09IDApIHsKICAgICAgICBicmVhazsKICAgICAgfQoKICAgICAgLyogSWYgdGhlcmUgd2FzIG5vIHNsaWRpbmc6CiAgICAgICAqICAgIHN0cnN0YXJ0IDw9IFdTSVpFK01BWF9ESVNULTEgJiYgbG9va2FoZWFkIDw9IE1JTl9MT09LQUhFQUQgLSAxICYmCiAgICAgICAqICAgIG1vcmUgPT0gd2luZG93X3NpemUgLSBsb29rYWhlYWQgLSBzdHJzdGFydAogICAgICAgKiA9PiBtb3JlID49IHdpbmRvd19zaXplIC0gKE1JTl9MT09LQUhFQUQtMSArIFdTSVpFICsgTUFYX0RJU1QtMSkKICAgICAgICogPT4gbW9yZSA+PSB3aW5kb3dfc2l6ZSAtIDIqV1NJWkUgKyAyCiAgICAgICAqIEluIHRoZSBCSUdfTUVNIG9yIE1NQVAgY2FzZSAobm90IHlldCBzdXBwb3J0ZWQpLAogICAgICAgKiAgIHdpbmRvd19zaXplID09IGlucHV0X3NpemUgKyBNSU5fTE9PS0FIRUFEICAmJgogICAgICAgKiAgIHN0cnN0YXJ0ICsgcy0+bG9va2FoZWFkIDw9IGlucHV0X3NpemUgPT4gbW9yZSA+PSBNSU5fTE9PS0FIRUFELgogICAgICAgKiBPdGhlcndpc2UsIHdpbmRvd19zaXplID09IDIqV1NJWkUgc28gbW9yZSA+PSAyLgogICAgICAgKiBJZiB0aGVyZSB3YXMgc2xpZGluZywgbW9yZSA+PSBXU0laRS4gU28gaW4gYWxsIGNhc2VzLCBtb3JlID49IDIuCiAgICAgICAqLwogICAgICAvL0Fzc2VydChtb3JlID49IDIsICJtb3JlIDwgMiIpOwogICAgICBuID0gcmVhZF9idWYocy5zdHJtLCBzLndpbmRvdywgcy5zdHJzdGFydCArIHMubG9va2FoZWFkLCBtb3JlKTsKICAgICAgcy5sb29rYWhlYWQgKz0gbjsKCiAgICAgIC8qIEluaXRpYWxpemUgdGhlIGhhc2ggdmFsdWUgbm93IHRoYXQgd2UgaGF2ZSBzb21lIGlucHV0OiAqLwogICAgICBpZiAocy5sb29rYWhlYWQgKyBzLmluc2VydCA+PSBNSU5fTUFUQ0gpIHsKICAgICAgICBzdHIgPSBzLnN0cnN0YXJ0IC0gcy5pbnNlcnQ7CiAgICAgICAgcy5pbnNfaCA9IHMud2luZG93W3N0cl07CgogICAgICAgIC8qIFVQREFURV9IQVNIKHMsIHMtPmluc19oLCBzLT53aW5kb3dbc3RyICsgMV0pOyAqLwogICAgICAgIHMuaW5zX2ggPSBIQVNIKHMsIHMuaW5zX2gsIHMud2luZG93W3N0ciArIDFdKTsKICAvLyNpZiBNSU5fTUFUQ0ggIT0gMwogIC8vICAgICAgICBDYWxsIHVwZGF0ZV9oYXNoKCkgTUlOX01BVENILTMgbW9yZSB0aW1lcwogIC8vI2VuZGlmCiAgICAgICAgd2hpbGUgKHMuaW5zZXJ0KSB7CiAgICAgICAgICAvKiBVUERBVEVfSEFTSChzLCBzLT5pbnNfaCwgcy0+d2luZG93W3N0ciArIE1JTl9NQVRDSC0xXSk7ICovCiAgICAgICAgICBzLmluc19oID0gSEFTSChzLCBzLmluc19oLCBzLndpbmRvd1tzdHIgKyBNSU5fTUFUQ0ggLSAxXSk7CgogICAgICAgICAgcy5wcmV2W3N0ciAmIHMud19tYXNrXSA9IHMuaGVhZFtzLmluc19oXTsKICAgICAgICAgIHMuaGVhZFtzLmluc19oXSA9IHN0cjsKICAgICAgICAgIHN0cisrOwogICAgICAgICAgcy5pbnNlcnQtLTsKICAgICAgICAgIGlmIChzLmxvb2thaGVhZCArIHMuaW5zZXJ0IDwgTUlOX01BVENIKSB7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgICAvKiBJZiB0aGUgd2hvbGUgaW5wdXQgaGFzIGxlc3MgdGhhbiBNSU5fTUFUQ0ggYnl0ZXMsIGluc19oIGlzIGdhcmJhZ2UsCiAgICAgICAqIGJ1dCB0aGlzIGlzIG5vdCBpbXBvcnRhbnQgc2luY2Ugb25seSBsaXRlcmFsIGJ5dGVzIHdpbGwgYmUgZW1pdHRlZC4KICAgICAgICovCgogICAgfSB3aGlsZSAocy5sb29rYWhlYWQgPCBNSU5fTE9PS0FIRUFEICYmIHMuc3RybS5hdmFpbF9pbiAhPT0gMCk7CgogICAgLyogSWYgdGhlIFdJTl9JTklUIGJ5dGVzIGFmdGVyIHRoZSBlbmQgb2YgdGhlIGN1cnJlbnQgZGF0YSBoYXZlIG5ldmVyIGJlZW4KICAgICAqIHdyaXR0ZW4sIHRoZW4gemVybyB0aG9zZSBieXRlcyBpbiBvcmRlciB0byBhdm9pZCBtZW1vcnkgY2hlY2sgcmVwb3J0cyBvZgogICAgICogdGhlIHVzZSBvZiB1bmluaXRpYWxpemVkIChvciB1bmluaXRpYWxpc2VkIGFzIEp1bGlhbiB3cml0ZXMpIGJ5dGVzIGJ5CiAgICAgKiB0aGUgbG9uZ2VzdCBtYXRjaCByb3V0aW5lcy4gIFVwZGF0ZSB0aGUgaGlnaCB3YXRlciBtYXJrIGZvciB0aGUgbmV4dAogICAgICogdGltZSB0aHJvdWdoIGhlcmUuICBXSU5fSU5JVCBpcyBzZXQgdG8gTUFYX01BVENIIHNpbmNlIHRoZSBsb25nZXN0IG1hdGNoCiAgICAgKiByb3V0aW5lcyBhbGxvdyBzY2FubmluZyB0byBzdHJzdGFydCArIE1BWF9NQVRDSCwgaWdub3JpbmcgbG9va2FoZWFkLgogICAgICovCiAgLy8gIGlmIChzLmhpZ2hfd2F0ZXIgPCBzLndpbmRvd19zaXplKSB7CiAgLy8gICAgY29uc3QgY3VyciA9IHMuc3Ryc3RhcnQgKyBzLmxvb2thaGVhZDsKICAvLyAgICBsZXQgaW5pdCA9IDA7CiAgLy8KICAvLyAgICBpZiAocy5oaWdoX3dhdGVyIDwgY3VycikgewogIC8vICAgICAgLyogUHJldmlvdXMgaGlnaCB3YXRlciBtYXJrIGJlbG93IGN1cnJlbnQgZGF0YSAtLSB6ZXJvIFdJTl9JTklUCiAgLy8gICAgICAgKiBieXRlcyBvciB1cCB0byBlbmQgb2Ygd2luZG93LCB3aGljaGV2ZXIgaXMgbGVzcy4KICAvLyAgICAgICAqLwogIC8vICAgICAgaW5pdCA9IHMud2luZG93X3NpemUgLSBjdXJyOwogIC8vICAgICAgaWYgKGluaXQgPiBXSU5fSU5JVCkKICAvLyAgICAgICAgaW5pdCA9IFdJTl9JTklUOwogIC8vICAgICAgem1lbXplcm8ocy0+d2luZG93ICsgY3VyciwgKHVuc2lnbmVkKWluaXQpOwogIC8vICAgICAgcy0+aGlnaF93YXRlciA9IGN1cnIgKyBpbml0OwogIC8vICAgIH0KICAvLyAgICBlbHNlIGlmIChzLT5oaWdoX3dhdGVyIDwgKHVsZyljdXJyICsgV0lOX0lOSVQpIHsKICAvLyAgICAgIC8qIEhpZ2ggd2F0ZXIgbWFyayBhdCBvciBhYm92ZSBjdXJyZW50IGRhdGEsIGJ1dCBiZWxvdyBjdXJyZW50IGRhdGEKICAvLyAgICAgICAqIHBsdXMgV0lOX0lOSVQgLS0gemVybyBvdXQgdG8gY3VycmVudCBkYXRhIHBsdXMgV0lOX0lOSVQsIG9yIHVwCiAgLy8gICAgICAgKiB0byBlbmQgb2Ygd2luZG93LCB3aGljaGV2ZXIgaXMgbGVzcy4KICAvLyAgICAgICAqLwogIC8vICAgICAgaW5pdCA9ICh1bGcpY3VyciArIFdJTl9JTklUIC0gcy0+aGlnaF93YXRlcjsKICAvLyAgICAgIGlmIChpbml0ID4gcy0+d2luZG93X3NpemUgLSBzLT5oaWdoX3dhdGVyKQogIC8vICAgICAgICBpbml0ID0gcy0+d2luZG93X3NpemUgLSBzLT5oaWdoX3dhdGVyOwogIC8vICAgICAgem1lbXplcm8ocy0+d2luZG93ICsgcy0+aGlnaF93YXRlciwgKHVuc2lnbmVkKWluaXQpOwogIC8vICAgICAgcy0+aGlnaF93YXRlciArPSBpbml0OwogIC8vICAgIH0KICAvLyAgfQogIC8vCiAgLy8gIEFzc2VydCgodWxnKXMtPnN0cnN0YXJ0IDw9IHMtPndpbmRvd19zaXplIC0gTUlOX0xPT0tBSEVBRCwKICAvLyAgICAibm90IGVub3VnaCByb29tIGZvciBzZWFyY2giKTsKICB9OwoKICAvKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgKiBDb3B5IHdpdGhvdXQgY29tcHJlc3Npb24gYXMgbXVjaCBhcyBwb3NzaWJsZSBmcm9tIHRoZSBpbnB1dCBzdHJlYW0sIHJldHVybgogICAqIHRoZSBjdXJyZW50IGJsb2NrIHN0YXRlLgogICAqIFRoaXMgZnVuY3Rpb24gZG9lcyBub3QgaW5zZXJ0IG5ldyBzdHJpbmdzIGluIHRoZSBkaWN0aW9uYXJ5IHNpbmNlCiAgICogdW5jb21wcmVzc2libGUgZGF0YSBpcyBwcm9iYWJseSBub3QgdXNlZnVsLiBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQKICAgKiBvbmx5IGZvciB0aGUgbGV2ZWw9MCBjb21wcmVzc2lvbiBvcHRpb24uCiAgICogTk9URTogdGhpcyBmdW5jdGlvbiBzaG91bGQgYmUgb3B0aW1pemVkIHRvIGF2b2lkIGV4dHJhIGNvcHlpbmcgZnJvbQogICAqIHdpbmRvdyB0byBwZW5kaW5nX2J1Zi4KICAgKi8KICBjb25zdCBkZWZsYXRlX3N0b3JlZCA9IChzLCBmbHVzaCkgPT4gewoKICAgIC8qIFN0b3JlZCBibG9ja3MgYXJlIGxpbWl0ZWQgdG8gMHhmZmZmIGJ5dGVzLCBwZW5kaW5nX2J1ZiBpcyBsaW1pdGVkCiAgICAgKiB0byBwZW5kaW5nX2J1Zl9zaXplLCBhbmQgZWFjaCBzdG9yZWQgYmxvY2sgaGFzIGEgNSBieXRlIGhlYWRlcjoKICAgICAqLwogICAgbGV0IG1heF9ibG9ja19zaXplID0gMHhmZmZmOwoKICAgIGlmIChtYXhfYmxvY2tfc2l6ZSA+IHMucGVuZGluZ19idWZfc2l6ZSAtIDUpIHsKICAgICAgbWF4X2Jsb2NrX3NpemUgPSBzLnBlbmRpbmdfYnVmX3NpemUgLSA1OwogICAgfQoKICAgIC8qIENvcHkgYXMgbXVjaCBhcyBwb3NzaWJsZSBmcm9tIGlucHV0IHRvIG91dHB1dDogKi8KICAgIGZvciAoOzspIHsKICAgICAgLyogRmlsbCB0aGUgd2luZG93IGFzIG11Y2ggYXMgcG9zc2libGU6ICovCiAgICAgIGlmIChzLmxvb2thaGVhZCA8PSAxKSB7CgogICAgICAgIC8vQXNzZXJ0KHMtPnN0cnN0YXJ0IDwgcy0+d19zaXplK01BWF9ESVNUKHMpIHx8CiAgICAgICAgLy8gIHMtPmJsb2NrX3N0YXJ0ID49IChsb25nKXMtPndfc2l6ZSwgInNsaWRlIHRvbyBsYXRlIik7CiAgLy8gICAgICBpZiAoIShzLnN0cnN0YXJ0IDwgcy53X3NpemUgKyAocy53X3NpemUgLSBNSU5fTE9PS0FIRUFEKSB8fAogIC8vICAgICAgICBzLmJsb2NrX3N0YXJ0ID49IHMud19zaXplKSkgewogIC8vICAgICAgICB0aHJvdyAgbmV3IEVycm9yKCJzbGlkZSB0b28gbGF0ZSIpOwogIC8vICAgICAgfQoKICAgICAgICBmaWxsX3dpbmRvdyhzKTsKICAgICAgICBpZiAocy5sb29rYWhlYWQgPT09IDAgJiYgZmx1c2ggPT09IFpfTk9fRkxVU0gkMikgewogICAgICAgICAgcmV0dXJuIEJTX05FRURfTU9SRTsKICAgICAgICB9CgogICAgICAgIGlmIChzLmxvb2thaGVhZCA9PT0gMCkgewogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICAgIC8qIGZsdXNoIHRoZSBjdXJyZW50IGJsb2NrICovCiAgICAgIH0KICAgICAgLy9Bc3NlcnQocy0+YmxvY2tfc3RhcnQgPj0gMEwsICJibG9jayBnb25lIik7CiAgLy8gICAgaWYgKHMuYmxvY2tfc3RhcnQgPCAwKSB0aHJvdyBuZXcgRXJyb3IoImJsb2NrIGdvbmUiKTsKCiAgICAgIHMuc3Ryc3RhcnQgKz0gcy5sb29rYWhlYWQ7CiAgICAgIHMubG9va2FoZWFkID0gMDsKCiAgICAgIC8qIEVtaXQgYSBzdG9yZWQgYmxvY2sgaWYgcGVuZGluZ19idWYgd2lsbCBiZSBmdWxsOiAqLwogICAgICBjb25zdCBtYXhfc3RhcnQgPSBzLmJsb2NrX3N0YXJ0ICsgbWF4X2Jsb2NrX3NpemU7CgogICAgICBpZiAocy5zdHJzdGFydCA9PT0gMCB8fCBzLnN0cnN0YXJ0ID49IG1heF9zdGFydCkgewogICAgICAgIC8qIHN0cnN0YXJ0ID09IDAgaXMgcG9zc2libGUgd2hlbiB3cmFwYXJvdW5kIG9uIDE2LWJpdCBtYWNoaW5lICovCiAgICAgICAgcy5sb29rYWhlYWQgPSBzLnN0cnN0YXJ0IC0gbWF4X3N0YXJ0OwogICAgICAgIHMuc3Ryc3RhcnQgPSBtYXhfc3RhcnQ7CiAgICAgICAgLyoqKiBGTFVTSF9CTE9DSyhzLCAwKTsgKioqLwogICAgICAgIGZsdXNoX2Jsb2NrX29ubHkocywgZmFsc2UpOwogICAgICAgIGlmIChzLnN0cm0uYXZhaWxfb3V0ID09PSAwKSB7CiAgICAgICAgICByZXR1cm4gQlNfTkVFRF9NT1JFOwogICAgICAgIH0KICAgICAgICAvKioqLwoKCiAgICAgIH0KICAgICAgLyogRmx1c2ggaWYgd2UgbWF5IGhhdmUgdG8gc2xpZGUsIG90aGVyd2lzZSBibG9ja19zdGFydCBtYXkgYmVjb21lCiAgICAgICAqIG5lZ2F0aXZlIGFuZCB0aGUgZGF0YSB3aWxsIGJlIGdvbmU6CiAgICAgICAqLwogICAgICBpZiAocy5zdHJzdGFydCAtIHMuYmxvY2tfc3RhcnQgPj0gKHMud19zaXplIC0gTUlOX0xPT0tBSEVBRCkpIHsKICAgICAgICAvKioqIEZMVVNIX0JMT0NLKHMsIDApOyAqKiovCiAgICAgICAgZmx1c2hfYmxvY2tfb25seShzLCBmYWxzZSk7CiAgICAgICAgaWYgKHMuc3RybS5hdmFpbF9vdXQgPT09IDApIHsKICAgICAgICAgIHJldHVybiBCU19ORUVEX01PUkU7CiAgICAgICAgfQogICAgICAgIC8qKiovCiAgICAgIH0KICAgIH0KCiAgICBzLmluc2VydCA9IDA7CgogICAgaWYgKGZsdXNoID09PSBaX0ZJTklTSCQzKSB7CiAgICAgIC8qKiogRkxVU0hfQkxPQ0socywgMSk7ICoqKi8KICAgICAgZmx1c2hfYmxvY2tfb25seShzLCB0cnVlKTsKICAgICAgaWYgKHMuc3RybS5hdmFpbF9vdXQgPT09IDApIHsKICAgICAgICByZXR1cm4gQlNfRklOSVNIX1NUQVJURUQ7CiAgICAgIH0KICAgICAgLyoqKi8KICAgICAgcmV0dXJuIEJTX0ZJTklTSF9ET05FOwogICAgfQoKICAgIGlmIChzLnN0cnN0YXJ0ID4gcy5ibG9ja19zdGFydCkgewogICAgICAvKioqIEZMVVNIX0JMT0NLKHMsIDApOyAqKiovCiAgICAgIGZsdXNoX2Jsb2NrX29ubHkocywgZmFsc2UpOwogICAgICBpZiAocy5zdHJtLmF2YWlsX291dCA9PT0gMCkgewogICAgICAgIHJldHVybiBCU19ORUVEX01PUkU7CiAgICAgIH0KICAgICAgLyoqKi8KICAgIH0KCiAgICByZXR1cm4gQlNfTkVFRF9NT1JFOwogIH07CgogIC8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAqIENvbXByZXNzIGFzIG11Y2ggYXMgcG9zc2libGUgZnJvbSB0aGUgaW5wdXQgc3RyZWFtLCByZXR1cm4gdGhlIGN1cnJlbnQKICAgKiBibG9jayBzdGF0ZS4KICAgKiBUaGlzIGZ1bmN0aW9uIGRvZXMgbm90IHBlcmZvcm0gbGF6eSBldmFsdWF0aW9uIG9mIG1hdGNoZXMgYW5kIGluc2VydHMKICAgKiBuZXcgc3RyaW5ncyBpbiB0aGUgZGljdGlvbmFyeSBvbmx5IGZvciB1bm1hdGNoZWQgc3RyaW5ncyBvciBmb3Igc2hvcnQKICAgKiBtYXRjaGVzLiBJdCBpcyB1c2VkIG9ubHkgZm9yIHRoZSBmYXN0IGNvbXByZXNzaW9uIG9wdGlvbnMuCiAgICovCiAgY29uc3QgZGVmbGF0ZV9mYXN0ID0gKHMsIGZsdXNoKSA9PiB7CgogICAgbGV0IGhhc2hfaGVhZDsgICAgICAgIC8qIGhlYWQgb2YgdGhlIGhhc2ggY2hhaW4gKi8KICAgIGxldCBiZmx1c2g7ICAgICAgICAgICAvKiBzZXQgaWYgY3VycmVudCBibG9jayBtdXN0IGJlIGZsdXNoZWQgKi8KCiAgICBmb3IgKDs7KSB7CiAgICAgIC8qIE1ha2Ugc3VyZSB0aGF0IHdlIGFsd2F5cyBoYXZlIGVub3VnaCBsb29rYWhlYWQsIGV4Y2VwdAogICAgICAgKiBhdCB0aGUgZW5kIG9mIHRoZSBpbnB1dCBmaWxlLiBXZSBuZWVkIE1BWF9NQVRDSCBieXRlcwogICAgICAgKiBmb3IgdGhlIG5leHQgbWF0Y2gsIHBsdXMgTUlOX01BVENIIGJ5dGVzIHRvIGluc2VydCB0aGUKICAgICAgICogc3RyaW5nIGZvbGxvd2luZyB0aGUgbmV4dCBtYXRjaC4KICAgICAgICovCiAgICAgIGlmIChzLmxvb2thaGVhZCA8IE1JTl9MT09LQUhFQUQpIHsKICAgICAgICBmaWxsX3dpbmRvdyhzKTsKICAgICAgICBpZiAocy5sb29rYWhlYWQgPCBNSU5fTE9PS0FIRUFEICYmIGZsdXNoID09PSBaX05PX0ZMVVNIJDIpIHsKICAgICAgICAgIHJldHVybiBCU19ORUVEX01PUkU7CiAgICAgICAgfQogICAgICAgIGlmIChzLmxvb2thaGVhZCA9PT0gMCkgewogICAgICAgICAgYnJlYWs7IC8qIGZsdXNoIHRoZSBjdXJyZW50IGJsb2NrICovCiAgICAgICAgfQogICAgICB9CgogICAgICAvKiBJbnNlcnQgdGhlIHN0cmluZyB3aW5kb3dbc3Ryc3RhcnQgLi4gc3Ryc3RhcnQrMl0gaW4gdGhlCiAgICAgICAqIGRpY3Rpb25hcnksIGFuZCBzZXQgaGFzaF9oZWFkIHRvIHRoZSBoZWFkIG9mIHRoZSBoYXNoIGNoYWluOgogICAgICAgKi8KICAgICAgaGFzaF9oZWFkID0gMC8qTklMKi87CiAgICAgIGlmIChzLmxvb2thaGVhZCA+PSBNSU5fTUFUQ0gpIHsKICAgICAgICAvKioqIElOU0VSVF9TVFJJTkcocywgcy5zdHJzdGFydCwgaGFzaF9oZWFkKTsgKioqLwogICAgICAgIHMuaW5zX2ggPSBIQVNIKHMsIHMuaW5zX2gsIHMud2luZG93W3Muc3Ryc3RhcnQgKyBNSU5fTUFUQ0ggLSAxXSk7CiAgICAgICAgaGFzaF9oZWFkID0gcy5wcmV2W3Muc3Ryc3RhcnQgJiBzLndfbWFza10gPSBzLmhlYWRbcy5pbnNfaF07CiAgICAgICAgcy5oZWFkW3MuaW5zX2hdID0gcy5zdHJzdGFydDsKICAgICAgICAvKioqLwogICAgICB9CgogICAgICAvKiBGaW5kIHRoZSBsb25nZXN0IG1hdGNoLCBkaXNjYXJkaW5nIHRob3NlIDw9IHByZXZfbGVuZ3RoLgogICAgICAgKiBBdCB0aGlzIHBvaW50IHdlIGhhdmUgYWx3YXlzIG1hdGNoX2xlbmd0aCA8IE1JTl9NQVRDSAogICAgICAgKi8KICAgICAgaWYgKGhhc2hfaGVhZCAhPT0gMC8qTklMKi8gJiYgKChzLnN0cnN0YXJ0IC0gaGFzaF9oZWFkKSA8PSAocy53X3NpemUgLSBNSU5fTE9PS0FIRUFEKSkpIHsKICAgICAgICAvKiBUbyBzaW1wbGlmeSB0aGUgY29kZSwgd2UgcHJldmVudCBtYXRjaGVzIHdpdGggdGhlIHN0cmluZwogICAgICAgICAqIG9mIHdpbmRvdyBpbmRleCAwIChpbiBwYXJ0aWN1bGFyIHdlIGhhdmUgdG8gYXZvaWQgYSBtYXRjaAogICAgICAgICAqIG9mIHRoZSBzdHJpbmcgd2l0aCBpdHNlbGYgYXQgdGhlIHN0YXJ0IG9mIHRoZSBpbnB1dCBmaWxlKS4KICAgICAgICAgKi8KICAgICAgICBzLm1hdGNoX2xlbmd0aCA9IGxvbmdlc3RfbWF0Y2gocywgaGFzaF9oZWFkKTsKICAgICAgICAvKiBsb25nZXN0X21hdGNoKCkgc2V0cyBtYXRjaF9zdGFydCAqLwogICAgICB9CiAgICAgIGlmIChzLm1hdGNoX2xlbmd0aCA+PSBNSU5fTUFUQ0gpIHsKICAgICAgICAvLyBjaGVja19tYXRjaChzLCBzLnN0cnN0YXJ0LCBzLm1hdGNoX3N0YXJ0LCBzLm1hdGNoX2xlbmd0aCk7IC8vIGZvciBkZWJ1ZyBvbmx5CgogICAgICAgIC8qKiogX3RyX3RhbGx5X2Rpc3Qocywgcy5zdHJzdGFydCAtIHMubWF0Y2hfc3RhcnQsCiAgICAgICAgICAgICAgICAgICAgICAgcy5tYXRjaF9sZW5ndGggLSBNSU5fTUFUQ0gsIGJmbHVzaCk7ICoqKi8KICAgICAgICBiZmx1c2ggPSBfdHJfdGFsbHkocywgcy5zdHJzdGFydCAtIHMubWF0Y2hfc3RhcnQsIHMubWF0Y2hfbGVuZ3RoIC0gTUlOX01BVENIKTsKCiAgICAgICAgcy5sb29rYWhlYWQgLT0gcy5tYXRjaF9sZW5ndGg7CgogICAgICAgIC8qIEluc2VydCBuZXcgc3RyaW5ncyBpbiB0aGUgaGFzaCB0YWJsZSBvbmx5IGlmIHRoZSBtYXRjaCBsZW5ndGgKICAgICAgICAgKiBpcyBub3QgdG9vIGxhcmdlLiBUaGlzIHNhdmVzIHRpbWUgYnV0IGRlZ3JhZGVzIGNvbXByZXNzaW9uLgogICAgICAgICAqLwogICAgICAgIGlmIChzLm1hdGNoX2xlbmd0aCA8PSBzLm1heF9sYXp5X21hdGNoLyptYXhfaW5zZXJ0X2xlbmd0aCovICYmIHMubG9va2FoZWFkID49IE1JTl9NQVRDSCkgewogICAgICAgICAgcy5tYXRjaF9sZW5ndGgtLTsgLyogc3RyaW5nIGF0IHN0cnN0YXJ0IGFscmVhZHkgaW4gdGFibGUgKi8KICAgICAgICAgIGRvIHsKICAgICAgICAgICAgcy5zdHJzdGFydCsrOwogICAgICAgICAgICAvKioqIElOU0VSVF9TVFJJTkcocywgcy5zdHJzdGFydCwgaGFzaF9oZWFkKTsgKioqLwogICAgICAgICAgICBzLmluc19oID0gSEFTSChzLCBzLmluc19oLCBzLndpbmRvd1tzLnN0cnN0YXJ0ICsgTUlOX01BVENIIC0gMV0pOwogICAgICAgICAgICBoYXNoX2hlYWQgPSBzLnByZXZbcy5zdHJzdGFydCAmIHMud19tYXNrXSA9IHMuaGVhZFtzLmluc19oXTsKICAgICAgICAgICAgcy5oZWFkW3MuaW5zX2hdID0gcy5zdHJzdGFydDsKICAgICAgICAgICAgLyoqKi8KICAgICAgICAgICAgLyogc3Ryc3RhcnQgbmV2ZXIgZXhjZWVkcyBXU0laRS1NQVhfTUFUQ0gsIHNvIHRoZXJlIGFyZQogICAgICAgICAgICAgKiBhbHdheXMgTUlOX01BVENIIGJ5dGVzIGFoZWFkLgogICAgICAgICAgICAgKi8KICAgICAgICAgIH0gd2hpbGUgKC0tcy5tYXRjaF9sZW5ndGggIT09IDApOwogICAgICAgICAgcy5zdHJzdGFydCsrOwogICAgICAgIH0gZWxzZQogICAgICAgIHsKICAgICAgICAgIHMuc3Ryc3RhcnQgKz0gcy5tYXRjaF9sZW5ndGg7CiAgICAgICAgICBzLm1hdGNoX2xlbmd0aCA9IDA7CiAgICAgICAgICBzLmluc19oID0gcy53aW5kb3dbcy5zdHJzdGFydF07CiAgICAgICAgICAvKiBVUERBVEVfSEFTSChzLCBzLmluc19oLCBzLndpbmRvd1tzLnN0cnN0YXJ0KzFdKTsgKi8KICAgICAgICAgIHMuaW5zX2ggPSBIQVNIKHMsIHMuaW5zX2gsIHMud2luZG93W3Muc3Ryc3RhcnQgKyAxXSk7CgogIC8vI2lmIE1JTl9NQVRDSCAhPSAzCiAgLy8gICAgICAgICAgICAgICAgQ2FsbCBVUERBVEVfSEFTSCgpIE1JTl9NQVRDSC0zIG1vcmUgdGltZXMKICAvLyNlbmRpZgogICAgICAgICAgLyogSWYgbG9va2FoZWFkIDwgTUlOX01BVENILCBpbnNfaCBpcyBnYXJiYWdlLCBidXQgaXQgZG9lcyBub3QKICAgICAgICAgICAqIG1hdHRlciBzaW5jZSBpdCB3aWxsIGJlIHJlY29tcHV0ZWQgYXQgbmV4dCBkZWZsYXRlIGNhbGwuCiAgICAgICAgICAgKi8KICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLyogTm8gbWF0Y2gsIG91dHB1dCBhIGxpdGVyYWwgYnl0ZSAqLwogICAgICAgIC8vVHJhY2V2digoc3RkZXJyLCIlYyIsIHMud2luZG93W3Muc3Ryc3RhcnRdKSk7CiAgICAgICAgLyoqKiBfdHJfdGFsbHlfbGl0KHMsIHMud2luZG93W3Muc3Ryc3RhcnRdLCBiZmx1c2gpOyAqKiovCiAgICAgICAgYmZsdXNoID0gX3RyX3RhbGx5KHMsIDAsIHMud2luZG93W3Muc3Ryc3RhcnRdKTsKCiAgICAgICAgcy5sb29rYWhlYWQtLTsKICAgICAgICBzLnN0cnN0YXJ0Kys7CiAgICAgIH0KICAgICAgaWYgKGJmbHVzaCkgewogICAgICAgIC8qKiogRkxVU0hfQkxPQ0socywgMCk7ICoqKi8KICAgICAgICBmbHVzaF9ibG9ja19vbmx5KHMsIGZhbHNlKTsKICAgICAgICBpZiAocy5zdHJtLmF2YWlsX291dCA9PT0gMCkgewogICAgICAgICAgcmV0dXJuIEJTX05FRURfTU9SRTsKICAgICAgICB9CiAgICAgICAgLyoqKi8KICAgICAgfQogICAgfQogICAgcy5pbnNlcnQgPSAoKHMuc3Ryc3RhcnQgPCAoTUlOX01BVENIIC0gMSkpID8gcy5zdHJzdGFydCA6IE1JTl9NQVRDSCAtIDEpOwogICAgaWYgKGZsdXNoID09PSBaX0ZJTklTSCQzKSB7CiAgICAgIC8qKiogRkxVU0hfQkxPQ0socywgMSk7ICoqKi8KICAgICAgZmx1c2hfYmxvY2tfb25seShzLCB0cnVlKTsKICAgICAgaWYgKHMuc3RybS5hdmFpbF9vdXQgPT09IDApIHsKICAgICAgICByZXR1cm4gQlNfRklOSVNIX1NUQVJURUQ7CiAgICAgIH0KICAgICAgLyoqKi8KICAgICAgcmV0dXJuIEJTX0ZJTklTSF9ET05FOwogICAgfQogICAgaWYgKHMubGFzdF9saXQpIHsKICAgICAgLyoqKiBGTFVTSF9CTE9DSyhzLCAwKTsgKioqLwogICAgICBmbHVzaF9ibG9ja19vbmx5KHMsIGZhbHNlKTsKICAgICAgaWYgKHMuc3RybS5hdmFpbF9vdXQgPT09IDApIHsKICAgICAgICByZXR1cm4gQlNfTkVFRF9NT1JFOwogICAgICB9CiAgICAgIC8qKiovCiAgICB9CiAgICByZXR1cm4gQlNfQkxPQ0tfRE9ORTsKICB9OwoKICAvKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgKiBTYW1lIGFzIGFib3ZlLCBidXQgYWNoaWV2ZXMgYmV0dGVyIGNvbXByZXNzaW9uLiBXZSB1c2UgYSBsYXp5CiAgICogZXZhbHVhdGlvbiBmb3IgbWF0Y2hlczogYSBtYXRjaCBpcyBmaW5hbGx5IGFkb3B0ZWQgb25seSBpZiB0aGVyZSBpcwogICAqIG5vIGJldHRlciBtYXRjaCBhdCB0aGUgbmV4dCB3aW5kb3cgcG9zaXRpb24uCiAgICovCiAgY29uc3QgZGVmbGF0ZV9zbG93ID0gKHMsIGZsdXNoKSA9PiB7CgogICAgbGV0IGhhc2hfaGVhZDsgICAgICAgICAgLyogaGVhZCBvZiBoYXNoIGNoYWluICovCiAgICBsZXQgYmZsdXNoOyAgICAgICAgICAgICAgLyogc2V0IGlmIGN1cnJlbnQgYmxvY2sgbXVzdCBiZSBmbHVzaGVkICovCgogICAgbGV0IG1heF9pbnNlcnQ7CgogICAgLyogUHJvY2VzcyB0aGUgaW5wdXQgYmxvY2suICovCiAgICBmb3IgKDs7KSB7CiAgICAgIC8qIE1ha2Ugc3VyZSB0aGF0IHdlIGFsd2F5cyBoYXZlIGVub3VnaCBsb29rYWhlYWQsIGV4Y2VwdAogICAgICAgKiBhdCB0aGUgZW5kIG9mIHRoZSBpbnB1dCBmaWxlLiBXZSBuZWVkIE1BWF9NQVRDSCBieXRlcwogICAgICAgKiBmb3IgdGhlIG5leHQgbWF0Y2gsIHBsdXMgTUlOX01BVENIIGJ5dGVzIHRvIGluc2VydCB0aGUKICAgICAgICogc3RyaW5nIGZvbGxvd2luZyB0aGUgbmV4dCBtYXRjaC4KICAgICAgICovCiAgICAgIGlmIChzLmxvb2thaGVhZCA8IE1JTl9MT09LQUhFQUQpIHsKICAgICAgICBmaWxsX3dpbmRvdyhzKTsKICAgICAgICBpZiAocy5sb29rYWhlYWQgPCBNSU5fTE9PS0FIRUFEICYmIGZsdXNoID09PSBaX05PX0ZMVVNIJDIpIHsKICAgICAgICAgIHJldHVybiBCU19ORUVEX01PUkU7CiAgICAgICAgfQogICAgICAgIGlmIChzLmxvb2thaGVhZCA9PT0gMCkgeyBicmVhazsgfSAvKiBmbHVzaCB0aGUgY3VycmVudCBibG9jayAqLwogICAgICB9CgogICAgICAvKiBJbnNlcnQgdGhlIHN0cmluZyB3aW5kb3dbc3Ryc3RhcnQgLi4gc3Ryc3RhcnQrMl0gaW4gdGhlCiAgICAgICAqIGRpY3Rpb25hcnksIGFuZCBzZXQgaGFzaF9oZWFkIHRvIHRoZSBoZWFkIG9mIHRoZSBoYXNoIGNoYWluOgogICAgICAgKi8KICAgICAgaGFzaF9oZWFkID0gMC8qTklMKi87CiAgICAgIGlmIChzLmxvb2thaGVhZCA+PSBNSU5fTUFUQ0gpIHsKICAgICAgICAvKioqIElOU0VSVF9TVFJJTkcocywgcy5zdHJzdGFydCwgaGFzaF9oZWFkKTsgKioqLwogICAgICAgIHMuaW5zX2ggPSBIQVNIKHMsIHMuaW5zX2gsIHMud2luZG93W3Muc3Ryc3RhcnQgKyBNSU5fTUFUQ0ggLSAxXSk7CiAgICAgICAgaGFzaF9oZWFkID0gcy5wcmV2W3Muc3Ryc3RhcnQgJiBzLndfbWFza10gPSBzLmhlYWRbcy5pbnNfaF07CiAgICAgICAgcy5oZWFkW3MuaW5zX2hdID0gcy5zdHJzdGFydDsKICAgICAgICAvKioqLwogICAgICB9CgogICAgICAvKiBGaW5kIHRoZSBsb25nZXN0IG1hdGNoLCBkaXNjYXJkaW5nIHRob3NlIDw9IHByZXZfbGVuZ3RoLgogICAgICAgKi8KICAgICAgcy5wcmV2X2xlbmd0aCA9IHMubWF0Y2hfbGVuZ3RoOwogICAgICBzLnByZXZfbWF0Y2ggPSBzLm1hdGNoX3N0YXJ0OwogICAgICBzLm1hdGNoX2xlbmd0aCA9IE1JTl9NQVRDSCAtIDE7CgogICAgICBpZiAoaGFzaF9oZWFkICE9PSAwLypOSUwqLyAmJiBzLnByZXZfbGVuZ3RoIDwgcy5tYXhfbGF6eV9tYXRjaCAmJgogICAgICAgICAgcy5zdHJzdGFydCAtIGhhc2hfaGVhZCA8PSAocy53X3NpemUgLSBNSU5fTE9PS0FIRUFEKS8qTUFYX0RJU1QocykqLykgewogICAgICAgIC8qIFRvIHNpbXBsaWZ5IHRoZSBjb2RlLCB3ZSBwcmV2ZW50IG1hdGNoZXMgd2l0aCB0aGUgc3RyaW5nCiAgICAgICAgICogb2Ygd2luZG93IGluZGV4IDAgKGluIHBhcnRpY3VsYXIgd2UgaGF2ZSB0byBhdm9pZCBhIG1hdGNoCiAgICAgICAgICogb2YgdGhlIHN0cmluZyB3aXRoIGl0c2VsZiBhdCB0aGUgc3RhcnQgb2YgdGhlIGlucHV0IGZpbGUpLgogICAgICAgICAqLwogICAgICAgIHMubWF0Y2hfbGVuZ3RoID0gbG9uZ2VzdF9tYXRjaChzLCBoYXNoX2hlYWQpOwogICAgICAgIC8qIGxvbmdlc3RfbWF0Y2goKSBzZXRzIG1hdGNoX3N0YXJ0ICovCgogICAgICAgIGlmIChzLm1hdGNoX2xlbmd0aCA8PSA1ICYmCiAgICAgICAgICAgKHMuc3RyYXRlZ3kgPT09IFpfRklMVEVSRUQgfHwgKHMubWF0Y2hfbGVuZ3RoID09PSBNSU5fTUFUQ0ggJiYgcy5zdHJzdGFydCAtIHMubWF0Y2hfc3RhcnQgPiA0MDk2LypUT09fRkFSKi8pKSkgewoKICAgICAgICAgIC8qIElmIHByZXZfbWF0Y2ggaXMgYWxzbyBNSU5fTUFUQ0gsIG1hdGNoX3N0YXJ0IGlzIGdhcmJhZ2UKICAgICAgICAgICAqIGJ1dCB3ZSB3aWxsIGlnbm9yZSB0aGUgY3VycmVudCBtYXRjaCBhbnl3YXkuCiAgICAgICAgICAgKi8KICAgICAgICAgIHMubWF0Y2hfbGVuZ3RoID0gTUlOX01BVENIIC0gMTsKICAgICAgICB9CiAgICAgIH0KICAgICAgLyogSWYgdGhlcmUgd2FzIGEgbWF0Y2ggYXQgdGhlIHByZXZpb3VzIHN0ZXAgYW5kIHRoZSBjdXJyZW50CiAgICAgICAqIG1hdGNoIGlzIG5vdCBiZXR0ZXIsIG91dHB1dCB0aGUgcHJldmlvdXMgbWF0Y2g6CiAgICAgICAqLwogICAgICBpZiAocy5wcmV2X2xlbmd0aCA+PSBNSU5fTUFUQ0ggJiYgcy5tYXRjaF9sZW5ndGggPD0gcy5wcmV2X2xlbmd0aCkgewogICAgICAgIG1heF9pbnNlcnQgPSBzLnN0cnN0YXJ0ICsgcy5sb29rYWhlYWQgLSBNSU5fTUFUQ0g7CiAgICAgICAgLyogRG8gbm90IGluc2VydCBzdHJpbmdzIGluIGhhc2ggdGFibGUgYmV5b25kIHRoaXMuICovCgogICAgICAgIC8vY2hlY2tfbWF0Y2gocywgcy5zdHJzdGFydC0xLCBzLnByZXZfbWF0Y2gsIHMucHJldl9sZW5ndGgpOwoKICAgICAgICAvKioqX3RyX3RhbGx5X2Rpc3Qocywgcy5zdHJzdGFydCAtIDEgLSBzLnByZXZfbWF0Y2gsCiAgICAgICAgICAgICAgICAgICAgICAgcy5wcmV2X2xlbmd0aCAtIE1JTl9NQVRDSCwgYmZsdXNoKTsqKiovCiAgICAgICAgYmZsdXNoID0gX3RyX3RhbGx5KHMsIHMuc3Ryc3RhcnQgLSAxIC0gcy5wcmV2X21hdGNoLCBzLnByZXZfbGVuZ3RoIC0gTUlOX01BVENIKTsKICAgICAgICAvKiBJbnNlcnQgaW4gaGFzaCB0YWJsZSBhbGwgc3RyaW5ncyB1cCB0byB0aGUgZW5kIG9mIHRoZSBtYXRjaC4KICAgICAgICAgKiBzdHJzdGFydC0xIGFuZCBzdHJzdGFydCBhcmUgYWxyZWFkeSBpbnNlcnRlZC4gSWYgdGhlcmUgaXMgbm90CiAgICAgICAgICogZW5vdWdoIGxvb2thaGVhZCwgdGhlIGxhc3QgdHdvIHN0cmluZ3MgYXJlIG5vdCBpbnNlcnRlZCBpbgogICAgICAgICAqIHRoZSBoYXNoIHRhYmxlLgogICAgICAgICAqLwogICAgICAgIHMubG9va2FoZWFkIC09IHMucHJldl9sZW5ndGggLSAxOwogICAgICAgIHMucHJldl9sZW5ndGggLT0gMjsKICAgICAgICBkbyB7CiAgICAgICAgICBpZiAoKytzLnN0cnN0YXJ0IDw9IG1heF9pbnNlcnQpIHsKICAgICAgICAgICAgLyoqKiBJTlNFUlRfU1RSSU5HKHMsIHMuc3Ryc3RhcnQsIGhhc2hfaGVhZCk7ICoqKi8KICAgICAgICAgICAgcy5pbnNfaCA9IEhBU0gocywgcy5pbnNfaCwgcy53aW5kb3dbcy5zdHJzdGFydCArIE1JTl9NQVRDSCAtIDFdKTsKICAgICAgICAgICAgaGFzaF9oZWFkID0gcy5wcmV2W3Muc3Ryc3RhcnQgJiBzLndfbWFza10gPSBzLmhlYWRbcy5pbnNfaF07CiAgICAgICAgICAgIHMuaGVhZFtzLmluc19oXSA9IHMuc3Ryc3RhcnQ7CiAgICAgICAgICAgIC8qKiovCiAgICAgICAgICB9CiAgICAgICAgfSB3aGlsZSAoLS1zLnByZXZfbGVuZ3RoICE9PSAwKTsKICAgICAgICBzLm1hdGNoX2F2YWlsYWJsZSA9IDA7CiAgICAgICAgcy5tYXRjaF9sZW5ndGggPSBNSU5fTUFUQ0ggLSAxOwogICAgICAgIHMuc3Ryc3RhcnQrKzsKCiAgICAgICAgaWYgKGJmbHVzaCkgewogICAgICAgICAgLyoqKiBGTFVTSF9CTE9DSyhzLCAwKTsgKioqLwogICAgICAgICAgZmx1c2hfYmxvY2tfb25seShzLCBmYWxzZSk7CiAgICAgICAgICBpZiAocy5zdHJtLmF2YWlsX291dCA9PT0gMCkgewogICAgICAgICAgICByZXR1cm4gQlNfTkVFRF9NT1JFOwogICAgICAgICAgfQogICAgICAgICAgLyoqKi8KICAgICAgICB9CgogICAgICB9IGVsc2UgaWYgKHMubWF0Y2hfYXZhaWxhYmxlKSB7CiAgICAgICAgLyogSWYgdGhlcmUgd2FzIG5vIG1hdGNoIGF0IHRoZSBwcmV2aW91cyBwb3NpdGlvbiwgb3V0cHV0IGEKICAgICAgICAgKiBzaW5nbGUgbGl0ZXJhbC4gSWYgdGhlcmUgd2FzIGEgbWF0Y2ggYnV0IHRoZSBjdXJyZW50IG1hdGNoCiAgICAgICAgICogaXMgbG9uZ2VyLCB0cnVuY2F0ZSB0aGUgcHJldmlvdXMgbWF0Y2ggdG8gYSBzaW5nbGUgbGl0ZXJhbC4KICAgICAgICAgKi8KICAgICAgICAvL1RyYWNldnYoKHN0ZGVyciwiJWMiLCBzLT53aW5kb3dbcy0+c3Ryc3RhcnQtMV0pKTsKICAgICAgICAvKioqIF90cl90YWxseV9saXQocywgcy53aW5kb3dbcy5zdHJzdGFydC0xXSwgYmZsdXNoKTsgKioqLwogICAgICAgIGJmbHVzaCA9IF90cl90YWxseShzLCAwLCBzLndpbmRvd1tzLnN0cnN0YXJ0IC0gMV0pOwoKICAgICAgICBpZiAoYmZsdXNoKSB7CiAgICAgICAgICAvKioqIEZMVVNIX0JMT0NLX09OTFkocywgMCkgKioqLwogICAgICAgICAgZmx1c2hfYmxvY2tfb25seShzLCBmYWxzZSk7CiAgICAgICAgICAvKioqLwogICAgICAgIH0KICAgICAgICBzLnN0cnN0YXJ0Kys7CiAgICAgICAgcy5sb29rYWhlYWQtLTsKICAgICAgICBpZiAocy5zdHJtLmF2YWlsX291dCA9PT0gMCkgewogICAgICAgICAgcmV0dXJuIEJTX05FRURfTU9SRTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLyogVGhlcmUgaXMgbm8gcHJldmlvdXMgbWF0Y2ggdG8gY29tcGFyZSB3aXRoLCB3YWl0IGZvcgogICAgICAgICAqIHRoZSBuZXh0IHN0ZXAgdG8gZGVjaWRlLgogICAgICAgICAqLwogICAgICAgIHMubWF0Y2hfYXZhaWxhYmxlID0gMTsKICAgICAgICBzLnN0cnN0YXJ0Kys7CiAgICAgICAgcy5sb29rYWhlYWQtLTsKICAgICAgfQogICAgfQogICAgLy9Bc3NlcnQgKGZsdXNoICE9IFpfTk9fRkxVU0gsICJubyBmbHVzaD8iKTsKICAgIGlmIChzLm1hdGNoX2F2YWlsYWJsZSkgewogICAgICAvL1RyYWNldnYoKHN0ZGVyciwiJWMiLCBzLT53aW5kb3dbcy0+c3Ryc3RhcnQtMV0pKTsKICAgICAgLyoqKiBfdHJfdGFsbHlfbGl0KHMsIHMud2luZG93W3Muc3Ryc3RhcnQtMV0sIGJmbHVzaCk7ICoqKi8KICAgICAgYmZsdXNoID0gX3RyX3RhbGx5KHMsIDAsIHMud2luZG93W3Muc3Ryc3RhcnQgLSAxXSk7CgogICAgICBzLm1hdGNoX2F2YWlsYWJsZSA9IDA7CiAgICB9CiAgICBzLmluc2VydCA9IHMuc3Ryc3RhcnQgPCBNSU5fTUFUQ0ggLSAxID8gcy5zdHJzdGFydCA6IE1JTl9NQVRDSCAtIDE7CiAgICBpZiAoZmx1c2ggPT09IFpfRklOSVNIJDMpIHsKICAgICAgLyoqKiBGTFVTSF9CTE9DSyhzLCAxKTsgKioqLwogICAgICBmbHVzaF9ibG9ja19vbmx5KHMsIHRydWUpOwogICAgICBpZiAocy5zdHJtLmF2YWlsX291dCA9PT0gMCkgewogICAgICAgIHJldHVybiBCU19GSU5JU0hfU1RBUlRFRDsKICAgICAgfQogICAgICAvKioqLwogICAgICByZXR1cm4gQlNfRklOSVNIX0RPTkU7CiAgICB9CiAgICBpZiAocy5sYXN0X2xpdCkgewogICAgICAvKioqIEZMVVNIX0JMT0NLKHMsIDApOyAqKiovCiAgICAgIGZsdXNoX2Jsb2NrX29ubHkocywgZmFsc2UpOwogICAgICBpZiAocy5zdHJtLmF2YWlsX291dCA9PT0gMCkgewogICAgICAgIHJldHVybiBCU19ORUVEX01PUkU7CiAgICAgIH0KICAgICAgLyoqKi8KICAgIH0KCiAgICByZXR1cm4gQlNfQkxPQ0tfRE9ORTsKICB9OwoKCiAgLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgICogRm9yIFpfUkxFLCBzaW1wbHkgbG9vayBmb3IgcnVucyBvZiBieXRlcywgZ2VuZXJhdGUgbWF0Y2hlcyBvbmx5IG9mIGRpc3RhbmNlCiAgICogb25lLiAgRG8gbm90IG1haW50YWluIGEgaGFzaCB0YWJsZS4gIChJdCB3aWxsIGJlIHJlZ2VuZXJhdGVkIGlmIHRoaXMgcnVuIG9mCiAgICogZGVmbGF0ZSBzd2l0Y2hlcyBhd2F5IGZyb20gWl9STEUuKQogICAqLwogIGNvbnN0IGRlZmxhdGVfcmxlID0gKHMsIGZsdXNoKSA9PiB7CgogICAgbGV0IGJmbHVzaDsgICAgICAgICAgICAvKiBzZXQgaWYgY3VycmVudCBibG9jayBtdXN0IGJlIGZsdXNoZWQgKi8KICAgIGxldCBwcmV2OyAgICAgICAgICAgICAgLyogYnl0ZSBhdCBkaXN0YW5jZSBvbmUgdG8gbWF0Y2ggKi8KICAgIGxldCBzY2FuLCBzdHJlbmQ7ICAgICAgLyogc2NhbiBnb2VzIHVwIHRvIHN0cmVuZCBmb3IgbGVuZ3RoIG9mIHJ1biAqLwoKICAgIGNvbnN0IF93aW4gPSBzLndpbmRvdzsKCiAgICBmb3IgKDs7KSB7CiAgICAgIC8qIE1ha2Ugc3VyZSB0aGF0IHdlIGFsd2F5cyBoYXZlIGVub3VnaCBsb29rYWhlYWQsIGV4Y2VwdAogICAgICAgKiBhdCB0aGUgZW5kIG9mIHRoZSBpbnB1dCBmaWxlLiBXZSBuZWVkIE1BWF9NQVRDSCBieXRlcwogICAgICAgKiBmb3IgdGhlIGxvbmdlc3QgcnVuLCBwbHVzIG9uZSBmb3IgdGhlIHVucm9sbGVkIGxvb3AuCiAgICAgICAqLwogICAgICBpZiAocy5sb29rYWhlYWQgPD0gTUFYX01BVENIKSB7CiAgICAgICAgZmlsbF93aW5kb3cocyk7CiAgICAgICAgaWYgKHMubG9va2FoZWFkIDw9IE1BWF9NQVRDSCAmJiBmbHVzaCA9PT0gWl9OT19GTFVTSCQyKSB7CiAgICAgICAgICByZXR1cm4gQlNfTkVFRF9NT1JFOwogICAgICAgIH0KICAgICAgICBpZiAocy5sb29rYWhlYWQgPT09IDApIHsgYnJlYWs7IH0gLyogZmx1c2ggdGhlIGN1cnJlbnQgYmxvY2sgKi8KICAgICAgfQoKICAgICAgLyogU2VlIGhvdyBtYW55IHRpbWVzIHRoZSBwcmV2aW91cyBieXRlIHJlcGVhdHMgKi8KICAgICAgcy5tYXRjaF9sZW5ndGggPSAwOwogICAgICBpZiAocy5sb29rYWhlYWQgPj0gTUlOX01BVENIICYmIHMuc3Ryc3RhcnQgPiAwKSB7CiAgICAgICAgc2NhbiA9IHMuc3Ryc3RhcnQgLSAxOwogICAgICAgIHByZXYgPSBfd2luW3NjYW5dOwogICAgICAgIGlmIChwcmV2ID09PSBfd2luWysrc2Nhbl0gJiYgcHJldiA9PT0gX3dpblsrK3NjYW5dICYmIHByZXYgPT09IF93aW5bKytzY2FuXSkgewogICAgICAgICAgc3RyZW5kID0gcy5zdHJzdGFydCArIE1BWF9NQVRDSDsKICAgICAgICAgIGRvIHsKICAgICAgICAgICAgLypqc2hpbnQgbm9lbXB0eTpmYWxzZSovCiAgICAgICAgICB9IHdoaWxlIChwcmV2ID09PSBfd2luWysrc2Nhbl0gJiYgcHJldiA9PT0gX3dpblsrK3NjYW5dICYmCiAgICAgICAgICAgICAgICAgICBwcmV2ID09PSBfd2luWysrc2Nhbl0gJiYgcHJldiA9PT0gX3dpblsrK3NjYW5dICYmCiAgICAgICAgICAgICAgICAgICBwcmV2ID09PSBfd2luWysrc2Nhbl0gJiYgcHJldiA9PT0gX3dpblsrK3NjYW5dICYmCiAgICAgICAgICAgICAgICAgICBwcmV2ID09PSBfd2luWysrc2Nhbl0gJiYgcHJldiA9PT0gX3dpblsrK3NjYW5dICYmCiAgICAgICAgICAgICAgICAgICBzY2FuIDwgc3RyZW5kKTsKICAgICAgICAgIHMubWF0Y2hfbGVuZ3RoID0gTUFYX01BVENIIC0gKHN0cmVuZCAtIHNjYW4pOwogICAgICAgICAgaWYgKHMubWF0Y2hfbGVuZ3RoID4gcy5sb29rYWhlYWQpIHsKICAgICAgICAgICAgcy5tYXRjaF9sZW5ndGggPSBzLmxvb2thaGVhZDsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgLy9Bc3NlcnQoc2NhbiA8PSBzLT53aW5kb3crKHVJbnQpKHMtPndpbmRvd19zaXplLTEpLCAid2lsZCBzY2FuIik7CiAgICAgIH0KCiAgICAgIC8qIEVtaXQgbWF0Y2ggaWYgaGF2ZSBydW4gb2YgTUlOX01BVENIIG9yIGxvbmdlciwgZWxzZSBlbWl0IGxpdGVyYWwgKi8KICAgICAgaWYgKHMubWF0Y2hfbGVuZ3RoID49IE1JTl9NQVRDSCkgewogICAgICAgIC8vY2hlY2tfbWF0Y2gocywgcy5zdHJzdGFydCwgcy5zdHJzdGFydCAtIDEsIHMubWF0Y2hfbGVuZ3RoKTsKCiAgICAgICAgLyoqKiBfdHJfdGFsbHlfZGlzdChzLCAxLCBzLm1hdGNoX2xlbmd0aCAtIE1JTl9NQVRDSCwgYmZsdXNoKTsgKioqLwogICAgICAgIGJmbHVzaCA9IF90cl90YWxseShzLCAxLCBzLm1hdGNoX2xlbmd0aCAtIE1JTl9NQVRDSCk7CgogICAgICAgIHMubG9va2FoZWFkIC09IHMubWF0Y2hfbGVuZ3RoOwogICAgICAgIHMuc3Ryc3RhcnQgKz0gcy5tYXRjaF9sZW5ndGg7CiAgICAgICAgcy5tYXRjaF9sZW5ndGggPSAwOwogICAgICB9IGVsc2UgewogICAgICAgIC8qIE5vIG1hdGNoLCBvdXRwdXQgYSBsaXRlcmFsIGJ5dGUgKi8KICAgICAgICAvL1RyYWNldnYoKHN0ZGVyciwiJWMiLCBzLT53aW5kb3dbcy0+c3Ryc3RhcnRdKSk7CiAgICAgICAgLyoqKiBfdHJfdGFsbHlfbGl0KHMsIHMud2luZG93W3Muc3Ryc3RhcnRdLCBiZmx1c2gpOyAqKiovCiAgICAgICAgYmZsdXNoID0gX3RyX3RhbGx5KHMsIDAsIHMud2luZG93W3Muc3Ryc3RhcnRdKTsKCiAgICAgICAgcy5sb29rYWhlYWQtLTsKICAgICAgICBzLnN0cnN0YXJ0Kys7CiAgICAgIH0KICAgICAgaWYgKGJmbHVzaCkgewogICAgICAgIC8qKiogRkxVU0hfQkxPQ0socywgMCk7ICoqKi8KICAgICAgICBmbHVzaF9ibG9ja19vbmx5KHMsIGZhbHNlKTsKICAgICAgICBpZiAocy5zdHJtLmF2YWlsX291dCA9PT0gMCkgewogICAgICAgICAgcmV0dXJuIEJTX05FRURfTU9SRTsKICAgICAgICB9CiAgICAgICAgLyoqKi8KICAgICAgfQogICAgfQogICAgcy5pbnNlcnQgPSAwOwogICAgaWYgKGZsdXNoID09PSBaX0ZJTklTSCQzKSB7CiAgICAgIC8qKiogRkxVU0hfQkxPQ0socywgMSk7ICoqKi8KICAgICAgZmx1c2hfYmxvY2tfb25seShzLCB0cnVlKTsKICAgICAgaWYgKHMuc3RybS5hdmFpbF9vdXQgPT09IDApIHsKICAgICAgICByZXR1cm4gQlNfRklOSVNIX1NUQVJURUQ7CiAgICAgIH0KICAgICAgLyoqKi8KICAgICAgcmV0dXJuIEJTX0ZJTklTSF9ET05FOwogICAgfQogICAgaWYgKHMubGFzdF9saXQpIHsKICAgICAgLyoqKiBGTFVTSF9CTE9DSyhzLCAwKTsgKioqLwogICAgICBmbHVzaF9ibG9ja19vbmx5KHMsIGZhbHNlKTsKICAgICAgaWYgKHMuc3RybS5hdmFpbF9vdXQgPT09IDApIHsKICAgICAgICByZXR1cm4gQlNfTkVFRF9NT1JFOwogICAgICB9CiAgICAgIC8qKiovCiAgICB9CiAgICByZXR1cm4gQlNfQkxPQ0tfRE9ORTsKICB9OwoKICAvKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgKiBGb3IgWl9IVUZGTUFOX09OTFksIGRvIG5vdCBsb29rIGZvciBtYXRjaGVzLiAgRG8gbm90IG1haW50YWluIGEgaGFzaCB0YWJsZS4KICAgKiAoSXQgd2lsbCBiZSByZWdlbmVyYXRlZCBpZiB0aGlzIHJ1biBvZiBkZWZsYXRlIHN3aXRjaGVzIGF3YXkgZnJvbSBIdWZmbWFuLikKICAgKi8KICBjb25zdCBkZWZsYXRlX2h1ZmYgPSAocywgZmx1c2gpID0+IHsKCiAgICBsZXQgYmZsdXNoOyAgICAgICAgICAgICAvKiBzZXQgaWYgY3VycmVudCBibG9jayBtdXN0IGJlIGZsdXNoZWQgKi8KCiAgICBmb3IgKDs7KSB7CiAgICAgIC8qIE1ha2Ugc3VyZSB0aGF0IHdlIGhhdmUgYSBsaXRlcmFsIHRvIHdyaXRlLiAqLwogICAgICBpZiAocy5sb29rYWhlYWQgPT09IDApIHsKICAgICAgICBmaWxsX3dpbmRvdyhzKTsKICAgICAgICBpZiAocy5sb29rYWhlYWQgPT09IDApIHsKICAgICAgICAgIGlmIChmbHVzaCA9PT0gWl9OT19GTFVTSCQyKSB7CiAgICAgICAgICAgIHJldHVybiBCU19ORUVEX01PUkU7CiAgICAgICAgICB9CiAgICAgICAgICBicmVhazsgICAgICAvKiBmbHVzaCB0aGUgY3VycmVudCBibG9jayAqLwogICAgICAgIH0KICAgICAgfQoKICAgICAgLyogT3V0cHV0IGEgbGl0ZXJhbCBieXRlICovCiAgICAgIHMubWF0Y2hfbGVuZ3RoID0gMDsKICAgICAgLy9UcmFjZXZ2KChzdGRlcnIsIiVjIiwgcy0+d2luZG93W3MtPnN0cnN0YXJ0XSkpOwogICAgICAvKioqIF90cl90YWxseV9saXQocywgcy53aW5kb3dbcy5zdHJzdGFydF0sIGJmbHVzaCk7ICoqKi8KICAgICAgYmZsdXNoID0gX3RyX3RhbGx5KHMsIDAsIHMud2luZG93W3Muc3Ryc3RhcnRdKTsKICAgICAgcy5sb29rYWhlYWQtLTsKICAgICAgcy5zdHJzdGFydCsrOwogICAgICBpZiAoYmZsdXNoKSB7CiAgICAgICAgLyoqKiBGTFVTSF9CTE9DSyhzLCAwKTsgKioqLwogICAgICAgIGZsdXNoX2Jsb2NrX29ubHkocywgZmFsc2UpOwogICAgICAgIGlmIChzLnN0cm0uYXZhaWxfb3V0ID09PSAwKSB7CiAgICAgICAgICByZXR1cm4gQlNfTkVFRF9NT1JFOwogICAgICAgIH0KICAgICAgICAvKioqLwogICAgICB9CiAgICB9CiAgICBzLmluc2VydCA9IDA7CiAgICBpZiAoZmx1c2ggPT09IFpfRklOSVNIJDMpIHsKICAgICAgLyoqKiBGTFVTSF9CTE9DSyhzLCAxKTsgKioqLwogICAgICBmbHVzaF9ibG9ja19vbmx5KHMsIHRydWUpOwogICAgICBpZiAocy5zdHJtLmF2YWlsX291dCA9PT0gMCkgewogICAgICAgIHJldHVybiBCU19GSU5JU0hfU1RBUlRFRDsKICAgICAgfQogICAgICAvKioqLwogICAgICByZXR1cm4gQlNfRklOSVNIX0RPTkU7CiAgICB9CiAgICBpZiAocy5sYXN0X2xpdCkgewogICAgICAvKioqIEZMVVNIX0JMT0NLKHMsIDApOyAqKiovCiAgICAgIGZsdXNoX2Jsb2NrX29ubHkocywgZmFsc2UpOwogICAgICBpZiAocy5zdHJtLmF2YWlsX291dCA9PT0gMCkgewogICAgICAgIHJldHVybiBCU19ORUVEX01PUkU7CiAgICAgIH0KICAgICAgLyoqKi8KICAgIH0KICAgIHJldHVybiBCU19CTE9DS19ET05FOwogIH07CgogIC8qIFZhbHVlcyBmb3IgbWF4X2xhenlfbWF0Y2gsIGdvb2RfbWF0Y2ggYW5kIG1heF9jaGFpbl9sZW5ndGgsIGRlcGVuZGluZyBvbgogICAqIHRoZSBkZXNpcmVkIHBhY2sgbGV2ZWwgKDAuLjkpLiBUaGUgdmFsdWVzIGdpdmVuIGJlbG93IGhhdmUgYmVlbiB0dW5lZCB0bwogICAqIGV4Y2x1ZGUgd29yc3QgY2FzZSBwZXJmb3JtYW5jZSBmb3IgcGF0aG9sb2dpY2FsIGZpbGVzLiBCZXR0ZXIgdmFsdWVzIG1heSBiZQogICAqIGZvdW5kIGZvciBzcGVjaWZpYyBmaWxlcy4KICAgKi8KICBmdW5jdGlvbiBDb25maWcoZ29vZF9sZW5ndGgsIG1heF9sYXp5LCBuaWNlX2xlbmd0aCwgbWF4X2NoYWluLCBmdW5jKSB7CgogICAgdGhpcy5nb29kX2xlbmd0aCA9IGdvb2RfbGVuZ3RoOwogICAgdGhpcy5tYXhfbGF6eSA9IG1heF9sYXp5OwogICAgdGhpcy5uaWNlX2xlbmd0aCA9IG5pY2VfbGVuZ3RoOwogICAgdGhpcy5tYXhfY2hhaW4gPSBtYXhfY2hhaW47CiAgICB0aGlzLmZ1bmMgPSBmdW5jOwogIH0KCiAgY29uc3QgY29uZmlndXJhdGlvbl90YWJsZSA9IFsKICAgIC8qICAgICAgZ29vZCBsYXp5IG5pY2UgY2hhaW4gKi8KICAgIG5ldyBDb25maWcoMCwgMCwgMCwgMCwgZGVmbGF0ZV9zdG9yZWQpLCAgICAgICAgICAvKiAwIHN0b3JlIG9ubHkgKi8KICAgIG5ldyBDb25maWcoNCwgNCwgOCwgNCwgZGVmbGF0ZV9mYXN0KSwgICAgICAgICAgICAvKiAxIG1heCBzcGVlZCwgbm8gbGF6eSBtYXRjaGVzICovCiAgICBuZXcgQ29uZmlnKDQsIDUsIDE2LCA4LCBkZWZsYXRlX2Zhc3QpLCAgICAgICAgICAgLyogMiAqLwogICAgbmV3IENvbmZpZyg0LCA2LCAzMiwgMzIsIGRlZmxhdGVfZmFzdCksICAgICAgICAgIC8qIDMgKi8KCiAgICBuZXcgQ29uZmlnKDQsIDQsIDE2LCAxNiwgZGVmbGF0ZV9zbG93KSwgICAgICAgICAgLyogNCBsYXp5IG1hdGNoZXMgKi8KICAgIG5ldyBDb25maWcoOCwgMTYsIDMyLCAzMiwgZGVmbGF0ZV9zbG93KSwgICAgICAgICAvKiA1ICovCiAgICBuZXcgQ29uZmlnKDgsIDE2LCAxMjgsIDEyOCwgZGVmbGF0ZV9zbG93KSwgICAgICAgLyogNiAqLwogICAgbmV3IENvbmZpZyg4LCAzMiwgMTI4LCAyNTYsIGRlZmxhdGVfc2xvdyksICAgICAgIC8qIDcgKi8KICAgIG5ldyBDb25maWcoMzIsIDEyOCwgMjU4LCAxMDI0LCBkZWZsYXRlX3Nsb3cpLCAgICAvKiA4ICovCiAgICBuZXcgQ29uZmlnKDMyLCAyNTgsIDI1OCwgNDA5NiwgZGVmbGF0ZV9zbG93KSAgICAgLyogOSBtYXggY29tcHJlc3Npb24gKi8KICBdOwoKCiAgLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgICogSW5pdGlhbGl6ZSB0aGUgImxvbmdlc3QgbWF0Y2giIHJvdXRpbmVzIGZvciBhIG5ldyB6bGliIHN0cmVhbQogICAqLwogIGNvbnN0IGxtX2luaXQgPSAocykgPT4gewoKICAgIHMud2luZG93X3NpemUgPSAyICogcy53X3NpemU7CgogICAgLyoqKiBDTEVBUl9IQVNIKHMpOyAqKiovCiAgICB6ZXJvKHMuaGVhZCk7IC8vIEZpbGwgd2l0aCBOSUwgKD0gMCk7CgogICAgLyogU2V0IHRoZSBkZWZhdWx0IGNvbmZpZ3VyYXRpb24gcGFyYW1ldGVyczoKICAgICAqLwogICAgcy5tYXhfbGF6eV9tYXRjaCA9IGNvbmZpZ3VyYXRpb25fdGFibGVbcy5sZXZlbF0ubWF4X2xhenk7CiAgICBzLmdvb2RfbWF0Y2ggPSBjb25maWd1cmF0aW9uX3RhYmxlW3MubGV2ZWxdLmdvb2RfbGVuZ3RoOwogICAgcy5uaWNlX21hdGNoID0gY29uZmlndXJhdGlvbl90YWJsZVtzLmxldmVsXS5uaWNlX2xlbmd0aDsKICAgIHMubWF4X2NoYWluX2xlbmd0aCA9IGNvbmZpZ3VyYXRpb25fdGFibGVbcy5sZXZlbF0ubWF4X2NoYWluOwoKICAgIHMuc3Ryc3RhcnQgPSAwOwogICAgcy5ibG9ja19zdGFydCA9IDA7CiAgICBzLmxvb2thaGVhZCA9IDA7CiAgICBzLmluc2VydCA9IDA7CiAgICBzLm1hdGNoX2xlbmd0aCA9IHMucHJldl9sZW5ndGggPSBNSU5fTUFUQ0ggLSAxOwogICAgcy5tYXRjaF9hdmFpbGFibGUgPSAwOwogICAgcy5pbnNfaCA9IDA7CiAgfTsKCgogIGZ1bmN0aW9uIERlZmxhdGVTdGF0ZSgpIHsKICAgIHRoaXMuc3RybSA9IG51bGw7ICAgICAgICAgICAgLyogcG9pbnRlciBiYWNrIHRvIHRoaXMgemxpYiBzdHJlYW0gKi8KICAgIHRoaXMuc3RhdHVzID0gMDsgICAgICAgICAgICAvKiBhcyB0aGUgbmFtZSBpbXBsaWVzICovCiAgICB0aGlzLnBlbmRpbmdfYnVmID0gbnVsbDsgICAgICAvKiBvdXRwdXQgc3RpbGwgcGVuZGluZyAqLwogICAgdGhpcy5wZW5kaW5nX2J1Zl9zaXplID0gMDsgIC8qIHNpemUgb2YgcGVuZGluZ19idWYgKi8KICAgIHRoaXMucGVuZGluZ19vdXQgPSAwOyAgICAgICAvKiBuZXh0IHBlbmRpbmcgYnl0ZSB0byBvdXRwdXQgdG8gdGhlIHN0cmVhbSAqLwogICAgdGhpcy5wZW5kaW5nID0gMDsgICAgICAgICAgIC8qIG5iIG9mIGJ5dGVzIGluIHRoZSBwZW5kaW5nIGJ1ZmZlciAqLwogICAgdGhpcy53cmFwID0gMDsgICAgICAgICAgICAgIC8qIGJpdCAwIHRydWUgZm9yIHpsaWIsIGJpdCAxIHRydWUgZm9yIGd6aXAgKi8KICAgIHRoaXMuZ3poZWFkID0gbnVsbDsgICAgICAgICAvKiBnemlwIGhlYWRlciBpbmZvcm1hdGlvbiB0byB3cml0ZSAqLwogICAgdGhpcy5nemluZGV4ID0gMDsgICAgICAgICAgIC8qIHdoZXJlIGluIGV4dHJhLCBuYW1lLCBvciBjb21tZW50ICovCiAgICB0aGlzLm1ldGhvZCA9IFpfREVGTEFURUQkMjsgLyogY2FuIG9ubHkgYmUgREVGTEFURUQgKi8KICAgIHRoaXMubGFzdF9mbHVzaCA9IC0xOyAgIC8qIHZhbHVlIG9mIGZsdXNoIHBhcmFtIGZvciBwcmV2aW91cyBkZWZsYXRlIGNhbGwgKi8KCiAgICB0aGlzLndfc2l6ZSA9IDA7ICAvKiBMWjc3IHdpbmRvdyBzaXplICgzMksgYnkgZGVmYXVsdCkgKi8KICAgIHRoaXMud19iaXRzID0gMDsgIC8qIGxvZzIod19zaXplKSAgKDguLjE2KSAqLwogICAgdGhpcy53X21hc2sgPSAwOyAgLyogd19zaXplIC0gMSAqLwoKICAgIHRoaXMud2luZG93ID0gbnVsbDsKICAgIC8qIFNsaWRpbmcgd2luZG93LiBJbnB1dCBieXRlcyBhcmUgcmVhZCBpbnRvIHRoZSBzZWNvbmQgaGFsZiBvZiB0aGUgd2luZG93LAogICAgICogYW5kIG1vdmUgdG8gdGhlIGZpcnN0IGhhbGYgbGF0ZXIgdG8ga2VlcCBhIGRpY3Rpb25hcnkgb2YgYXQgbGVhc3Qgd1NpemUKICAgICAqIGJ5dGVzLiBXaXRoIHRoaXMgb3JnYW5pemF0aW9uLCBtYXRjaGVzIGFyZSBsaW1pdGVkIHRvIGEgZGlzdGFuY2Ugb2YKICAgICAqIHdTaXplLU1BWF9NQVRDSCBieXRlcywgYnV0IHRoaXMgZW5zdXJlcyB0aGF0IElPIGlzIGFsd2F5cwogICAgICogcGVyZm9ybWVkIHdpdGggYSBsZW5ndGggbXVsdGlwbGUgb2YgdGhlIGJsb2NrIHNpemUuCiAgICAgKi8KCiAgICB0aGlzLndpbmRvd19zaXplID0gMDsKICAgIC8qIEFjdHVhbCBzaXplIG9mIHdpbmRvdzogMip3U2l6ZSwgZXhjZXB0IHdoZW4gdGhlIHVzZXIgaW5wdXQgYnVmZmVyCiAgICAgKiBpcyBkaXJlY3RseSB1c2VkIGFzIHNsaWRpbmcgd2luZG93LgogICAgICovCgogICAgdGhpcy5wcmV2ID0gbnVsbDsKICAgIC8qIExpbmsgdG8gb2xkZXIgc3RyaW5nIHdpdGggc2FtZSBoYXNoIGluZGV4LiBUbyBsaW1pdCB0aGUgc2l6ZSBvZiB0aGlzCiAgICAgKiBhcnJheSB0byA2NEssIHRoaXMgbGluayBpcyBtYWludGFpbmVkIG9ubHkgZm9yIHRoZSBsYXN0IDMySyBzdHJpbmdzLgogICAgICogQW4gaW5kZXggaW4gdGhpcyBhcnJheSBpcyB0aHVzIGEgd2luZG93IGluZGV4IG1vZHVsbyAzMksuCiAgICAgKi8KCiAgICB0aGlzLmhlYWQgPSBudWxsOyAgIC8qIEhlYWRzIG9mIHRoZSBoYXNoIGNoYWlucyBvciBOSUwuICovCgogICAgdGhpcy5pbnNfaCA9IDA7ICAgICAgIC8qIGhhc2ggaW5kZXggb2Ygc3RyaW5nIHRvIGJlIGluc2VydGVkICovCiAgICB0aGlzLmhhc2hfc2l6ZSA9IDA7ICAgLyogbnVtYmVyIG9mIGVsZW1lbnRzIGluIGhhc2ggdGFibGUgKi8KICAgIHRoaXMuaGFzaF9iaXRzID0gMDsgICAvKiBsb2cyKGhhc2hfc2l6ZSkgKi8KICAgIHRoaXMuaGFzaF9tYXNrID0gMDsgICAvKiBoYXNoX3NpemUtMSAqLwoKICAgIHRoaXMuaGFzaF9zaGlmdCA9IDA7CiAgICAvKiBOdW1iZXIgb2YgYml0cyBieSB3aGljaCBpbnNfaCBtdXN0IGJlIHNoaWZ0ZWQgYXQgZWFjaCBpbnB1dAogICAgICogc3RlcC4gSXQgbXVzdCBiZSBzdWNoIHRoYXQgYWZ0ZXIgTUlOX01BVENIIHN0ZXBzLCB0aGUgb2xkZXN0CiAgICAgKiBieXRlIG5vIGxvbmdlciB0YWtlcyBwYXJ0IGluIHRoZSBoYXNoIGtleSwgdGhhdCBpczoKICAgICAqICAgaGFzaF9zaGlmdCAqIE1JTl9NQVRDSCA+PSBoYXNoX2JpdHMKICAgICAqLwoKICAgIHRoaXMuYmxvY2tfc3RhcnQgPSAwOwogICAgLyogV2luZG93IHBvc2l0aW9uIGF0IHRoZSBiZWdpbm5pbmcgb2YgdGhlIGN1cnJlbnQgb3V0cHV0IGJsb2NrLiBHZXRzCiAgICAgKiBuZWdhdGl2ZSB3aGVuIHRoZSB3aW5kb3cgaXMgbW92ZWQgYmFja3dhcmRzLgogICAgICovCgogICAgdGhpcy5tYXRjaF9sZW5ndGggPSAwOyAgICAgIC8qIGxlbmd0aCBvZiBiZXN0IG1hdGNoICovCiAgICB0aGlzLnByZXZfbWF0Y2ggPSAwOyAgICAgICAgLyogcHJldmlvdXMgbWF0Y2ggKi8KICAgIHRoaXMubWF0Y2hfYXZhaWxhYmxlID0gMDsgICAvKiBzZXQgaWYgcHJldmlvdXMgbWF0Y2ggZXhpc3RzICovCiAgICB0aGlzLnN0cnN0YXJ0ID0gMDsgICAgICAgICAgLyogc3RhcnQgb2Ygc3RyaW5nIHRvIGluc2VydCAqLwogICAgdGhpcy5tYXRjaF9zdGFydCA9IDA7ICAgICAgIC8qIHN0YXJ0IG9mIG1hdGNoaW5nIHN0cmluZyAqLwogICAgdGhpcy5sb29rYWhlYWQgPSAwOyAgICAgICAgIC8qIG51bWJlciBvZiB2YWxpZCBieXRlcyBhaGVhZCBpbiB3aW5kb3cgKi8KCiAgICB0aGlzLnByZXZfbGVuZ3RoID0gMDsKICAgIC8qIExlbmd0aCBvZiB0aGUgYmVzdCBtYXRjaCBhdCBwcmV2aW91cyBzdGVwLiBNYXRjaGVzIG5vdCBncmVhdGVyIHRoYW4gdGhpcwogICAgICogYXJlIGRpc2NhcmRlZC4gVGhpcyBpcyB1c2VkIGluIHRoZSBsYXp5IG1hdGNoIGV2YWx1YXRpb24uCiAgICAgKi8KCiAgICB0aGlzLm1heF9jaGFpbl9sZW5ndGggPSAwOwogICAgLyogVG8gc3BlZWQgdXAgZGVmbGF0aW9uLCBoYXNoIGNoYWlucyBhcmUgbmV2ZXIgc2VhcmNoZWQgYmV5b25kIHRoaXMKICAgICAqIGxlbmd0aC4gIEEgaGlnaGVyIGxpbWl0IGltcHJvdmVzIGNvbXByZXNzaW9uIHJhdGlvIGJ1dCBkZWdyYWRlcyB0aGUKICAgICAqIHNwZWVkLgogICAgICovCgogICAgdGhpcy5tYXhfbGF6eV9tYXRjaCA9IDA7CiAgICAvKiBBdHRlbXB0IHRvIGZpbmQgYSBiZXR0ZXIgbWF0Y2ggb25seSB3aGVuIHRoZSBjdXJyZW50IG1hdGNoIGlzIHN0cmljdGx5CiAgICAgKiBzbWFsbGVyIHRoYW4gdGhpcyB2YWx1ZS4gVGhpcyBtZWNoYW5pc20gaXMgdXNlZCBvbmx5IGZvciBjb21wcmVzc2lvbgogICAgICogbGV2ZWxzID49IDQuCiAgICAgKi8KICAgIC8vIFRoYXQncyBhbGlhcyB0byBtYXhfbGF6eV9tYXRjaCwgZG9uJ3QgdXNlIGRpcmVjdGx5CiAgICAvL3RoaXMubWF4X2luc2VydF9sZW5ndGggPSAwOwogICAgLyogSW5zZXJ0IG5ldyBzdHJpbmdzIGluIHRoZSBoYXNoIHRhYmxlIG9ubHkgaWYgdGhlIG1hdGNoIGxlbmd0aCBpcyBub3QKICAgICAqIGdyZWF0ZXIgdGhhbiB0aGlzIGxlbmd0aC4gVGhpcyBzYXZlcyB0aW1lIGJ1dCBkZWdyYWRlcyBjb21wcmVzc2lvbi4KICAgICAqIG1heF9pbnNlcnRfbGVuZ3RoIGlzIHVzZWQgb25seSBmb3IgY29tcHJlc3Npb24gbGV2ZWxzIDw9IDMuCiAgICAgKi8KCiAgICB0aGlzLmxldmVsID0gMDsgICAgIC8qIGNvbXByZXNzaW9uIGxldmVsICgxLi45KSAqLwogICAgdGhpcy5zdHJhdGVneSA9IDA7ICAvKiBmYXZvciBvciBmb3JjZSBIdWZmbWFuIGNvZGluZyovCgogICAgdGhpcy5nb29kX21hdGNoID0gMDsKICAgIC8qIFVzZSBhIGZhc3RlciBzZWFyY2ggd2hlbiB0aGUgcHJldmlvdXMgbWF0Y2ggaXMgbG9uZ2VyIHRoYW4gdGhpcyAqLwoKICAgIHRoaXMubmljZV9tYXRjaCA9IDA7IC8qIFN0b3Agc2VhcmNoaW5nIHdoZW4gY3VycmVudCBtYXRjaCBleGNlZWRzIHRoaXMgKi8KCiAgICAgICAgICAgICAgICAvKiB1c2VkIGJ5IHRyZWVzLmM6ICovCgogICAgLyogRGlkbid0IHVzZSBjdF9kYXRhIHR5cGVkZWYgYmVsb3cgdG8gc3VwcHJlc3MgY29tcGlsZXIgd2FybmluZyAqLwoKICAgIC8vIHN0cnVjdCBjdF9kYXRhX3MgZHluX2x0cmVlW0hFQVBfU0laRV07ICAgLyogbGl0ZXJhbCBhbmQgbGVuZ3RoIHRyZWUgKi8KICAgIC8vIHN0cnVjdCBjdF9kYXRhX3MgZHluX2R0cmVlWzIqRF9DT0RFUysxXTsgLyogZGlzdGFuY2UgdHJlZSAqLwogICAgLy8gc3RydWN0IGN0X2RhdGFfcyBibF90cmVlWzIqQkxfQ09ERVMrMV07ICAvKiBIdWZmbWFuIHRyZWUgZm9yIGJpdCBsZW5ndGhzICovCgogICAgLy8gVXNlIGZsYXQgYXJyYXkgb2YgRE9VQkxFIHNpemUsIHdpdGggaW50ZXJsZWF2ZWQgZmF0YSwKICAgIC8vIGJlY2F1c2UgSlMgZG9lcyBub3Qgc3VwcG9ydCBlZmZlY3RpdmUKICAgIHRoaXMuZHluX2x0cmVlICA9IG5ldyBVaW50MTZBcnJheShIRUFQX1NJWkUgKiAyKTsKICAgIHRoaXMuZHluX2R0cmVlICA9IG5ldyBVaW50MTZBcnJheSgoMiAqIERfQ09ERVMgKyAxKSAqIDIpOwogICAgdGhpcy5ibF90cmVlICAgID0gbmV3IFVpbnQxNkFycmF5KCgyICogQkxfQ09ERVMgKyAxKSAqIDIpOwogICAgemVybyh0aGlzLmR5bl9sdHJlZSk7CiAgICB6ZXJvKHRoaXMuZHluX2R0cmVlKTsKICAgIHplcm8odGhpcy5ibF90cmVlKTsKCiAgICB0aGlzLmxfZGVzYyAgID0gbnVsbDsgICAgICAgICAvKiBkZXNjLiBmb3IgbGl0ZXJhbCB0cmVlICovCiAgICB0aGlzLmRfZGVzYyAgID0gbnVsbDsgICAgICAgICAvKiBkZXNjLiBmb3IgZGlzdGFuY2UgdHJlZSAqLwogICAgdGhpcy5ibF9kZXNjICA9IG51bGw7ICAgICAgICAgLyogZGVzYy4gZm9yIGJpdCBsZW5ndGggdHJlZSAqLwoKICAgIC8vdXNoIGJsX2NvdW50W01BWF9CSVRTKzFdOwogICAgdGhpcy5ibF9jb3VudCA9IG5ldyBVaW50MTZBcnJheShNQVhfQklUUyArIDEpOwogICAgLyogbnVtYmVyIG9mIGNvZGVzIGF0IGVhY2ggYml0IGxlbmd0aCBmb3IgYW4gb3B0aW1hbCB0cmVlICovCgogICAgLy9pbnQgaGVhcFsyKkxfQ09ERVMrMV07ICAgICAgLyogaGVhcCB1c2VkIHRvIGJ1aWxkIHRoZSBIdWZmbWFuIHRyZWVzICovCiAgICB0aGlzLmhlYXAgPSBuZXcgVWludDE2QXJyYXkoMiAqIExfQ09ERVMgKyAxKTsgIC8qIGhlYXAgdXNlZCB0byBidWlsZCB0aGUgSHVmZm1hbiB0cmVlcyAqLwogICAgemVybyh0aGlzLmhlYXApOwoKICAgIHRoaXMuaGVhcF9sZW4gPSAwOyAgICAgICAgICAgICAgIC8qIG51bWJlciBvZiBlbGVtZW50cyBpbiB0aGUgaGVhcCAqLwogICAgdGhpcy5oZWFwX21heCA9IDA7ICAgICAgICAgICAgICAgLyogZWxlbWVudCBvZiBsYXJnZXN0IGZyZXF1ZW5jeSAqLwogICAgLyogVGhlIHNvbnMgb2YgaGVhcFtuXSBhcmUgaGVhcFsyKm5dIGFuZCBoZWFwWzIqbisxXS4gaGVhcFswXSBpcyBub3QgdXNlZC4KICAgICAqIFRoZSBzYW1lIGhlYXAgYXJyYXkgaXMgdXNlZCB0byBidWlsZCBhbGwgdHJlZXMuCiAgICAgKi8KCiAgICB0aGlzLmRlcHRoID0gbmV3IFVpbnQxNkFycmF5KDIgKiBMX0NPREVTICsgMSk7IC8vdWNoIGRlcHRoWzIqTF9DT0RFUysxXTsKICAgIHplcm8odGhpcy5kZXB0aCk7CiAgICAvKiBEZXB0aCBvZiBlYWNoIHN1YnRyZWUgdXNlZCBhcyB0aWUgYnJlYWtlciBmb3IgdHJlZXMgb2YgZXF1YWwgZnJlcXVlbmN5CiAgICAgKi8KCiAgICB0aGlzLmxfYnVmID0gMDsgICAgICAgICAgLyogYnVmZmVyIGluZGV4IGZvciBsaXRlcmFscyBvciBsZW5ndGhzICovCgogICAgdGhpcy5saXRfYnVmc2l6ZSA9IDA7CiAgICAvKiBTaXplIG9mIG1hdGNoIGJ1ZmZlciBmb3IgbGl0ZXJhbHMvbGVuZ3Rocy4gIFRoZXJlIGFyZSA0IHJlYXNvbnMgZm9yCiAgICAgKiBsaW1pdGluZyBsaXRfYnVmc2l6ZSB0byA2NEs6CiAgICAgKiAgIC0gZnJlcXVlbmNpZXMgY2FuIGJlIGtlcHQgaW4gMTYgYml0IGNvdW50ZXJzCiAgICAgKiAgIC0gaWYgY29tcHJlc3Npb24gaXMgbm90IHN1Y2Nlc3NmdWwgZm9yIHRoZSBmaXJzdCBibG9jaywgYWxsIGlucHV0CiAgICAgKiAgICAgZGF0YSBpcyBzdGlsbCBpbiB0aGUgd2luZG93IHNvIHdlIGNhbiBzdGlsbCBlbWl0IGEgc3RvcmVkIGJsb2NrIGV2ZW4KICAgICAqICAgICB3aGVuIGlucHV0IGNvbWVzIGZyb20gc3RhbmRhcmQgaW5wdXQuICAoVGhpcyBjYW4gYWxzbyBiZSBkb25lIGZvcgogICAgICogICAgIGFsbCBibG9ja3MgaWYgbGl0X2J1ZnNpemUgaXMgbm90IGdyZWF0ZXIgdGhhbiAzMksuKQogICAgICogICAtIGlmIGNvbXByZXNzaW9uIGlzIG5vdCBzdWNjZXNzZnVsIGZvciBhIGZpbGUgc21hbGxlciB0aGFuIDY0Sywgd2UgY2FuCiAgICAgKiAgICAgZXZlbiBlbWl0IGEgc3RvcmVkIGZpbGUgaW5zdGVhZCBvZiBhIHN0b3JlZCBibG9jayAoc2F2aW5nIDUgYnl0ZXMpLgogICAgICogICAgIFRoaXMgaXMgYXBwbGljYWJsZSBvbmx5IGZvciB6aXAgKG5vdCBnemlwIG9yIHpsaWIpLgogICAgICogICAtIGNyZWF0aW5nIG5ldyBIdWZmbWFuIHRyZWVzIGxlc3MgZnJlcXVlbnRseSBtYXkgbm90IHByb3ZpZGUgZmFzdAogICAgICogICAgIGFkYXB0YXRpb24gdG8gY2hhbmdlcyBpbiB0aGUgaW5wdXQgZGF0YSBzdGF0aXN0aWNzLiAoVGFrZSBmb3IKICAgICAqICAgICBleGFtcGxlIGEgYmluYXJ5IGZpbGUgd2l0aCBwb29ybHkgY29tcHJlc3NpYmxlIGNvZGUgZm9sbG93ZWQgYnkKICAgICAqICAgICBhIGhpZ2hseSBjb21wcmVzc2libGUgc3RyaW5nIHRhYmxlLikgU21hbGxlciBidWZmZXIgc2l6ZXMgZ2l2ZQogICAgICogICAgIGZhc3QgYWRhcHRhdGlvbiBidXQgaGF2ZSBvZiBjb3Vyc2UgdGhlIG92ZXJoZWFkIG9mIHRyYW5zbWl0dGluZwogICAgICogICAgIHRyZWVzIG1vcmUgZnJlcXVlbnRseS4KICAgICAqICAgLSBJIGNhbid0IGNvdW50IGFib3ZlIDQKICAgICAqLwoKICAgIHRoaXMubGFzdF9saXQgPSAwOyAgICAgIC8qIHJ1bm5pbmcgaW5kZXggaW4gbF9idWYgKi8KCiAgICB0aGlzLmRfYnVmID0gMDsKICAgIC8qIEJ1ZmZlciBpbmRleCBmb3IgZGlzdGFuY2VzLiBUbyBzaW1wbGlmeSB0aGUgY29kZSwgZF9idWYgYW5kIGxfYnVmIGhhdmUKICAgICAqIHRoZSBzYW1lIG51bWJlciBvZiBlbGVtZW50cy4gVG8gdXNlIGRpZmZlcmVudCBsZW5ndGhzLCBhbiBleHRyYSBmbGFnCiAgICAgKiBhcnJheSB3b3VsZCBiZSBuZWNlc3NhcnkuCiAgICAgKi8KCiAgICB0aGlzLm9wdF9sZW4gPSAwOyAgICAgICAvKiBiaXQgbGVuZ3RoIG9mIGN1cnJlbnQgYmxvY2sgd2l0aCBvcHRpbWFsIHRyZWVzICovCiAgICB0aGlzLnN0YXRpY19sZW4gPSAwOyAgICAvKiBiaXQgbGVuZ3RoIG9mIGN1cnJlbnQgYmxvY2sgd2l0aCBzdGF0aWMgdHJlZXMgKi8KICAgIHRoaXMubWF0Y2hlcyA9IDA7ICAgICAgIC8qIG51bWJlciBvZiBzdHJpbmcgbWF0Y2hlcyBpbiBjdXJyZW50IGJsb2NrICovCiAgICB0aGlzLmluc2VydCA9IDA7ICAgICAgICAvKiBieXRlcyBhdCBlbmQgb2Ygd2luZG93IGxlZnQgdG8gaW5zZXJ0ICovCgoKICAgIHRoaXMuYmlfYnVmID0gMDsKICAgIC8qIE91dHB1dCBidWZmZXIuIGJpdHMgYXJlIGluc2VydGVkIHN0YXJ0aW5nIGF0IHRoZSBib3R0b20gKGxlYXN0CiAgICAgKiBzaWduaWZpY2FudCBiaXRzKS4KICAgICAqLwogICAgdGhpcy5iaV92YWxpZCA9IDA7CiAgICAvKiBOdW1iZXIgb2YgdmFsaWQgYml0cyBpbiBiaV9idWYuICBBbGwgYml0cyBhYm92ZSB0aGUgbGFzdCB2YWxpZCBiaXQKICAgICAqIGFyZSBhbHdheXMgemVyby4KICAgICAqLwoKICAgIC8vIFVzZWQgZm9yIHdpbmRvdyBtZW1vcnkgaW5pdC4gV2Ugc2FmZWx5IGlnbm9yZSBpdCBmb3IgSlMuIFRoYXQgbWFrZXMKICAgIC8vIHNlbnNlIG9ubHkgZm9yIHBvaW50ZXJzIGFuZCBtZW1vcnkgY2hlY2sgdG9vbHMuCiAgICAvL3RoaXMuaGlnaF93YXRlciA9IDA7CiAgICAvKiBIaWdoIHdhdGVyIG1hcmsgb2Zmc2V0IGluIHdpbmRvdyBmb3IgaW5pdGlhbGl6ZWQgYnl0ZXMgLS0gYnl0ZXMgYWJvdmUKICAgICAqIHRoaXMgYXJlIHNldCB0byB6ZXJvIGluIG9yZGVyIHRvIGF2b2lkIG1lbW9yeSBjaGVjayB3YXJuaW5ncyB3aGVuCiAgICAgKiBsb25nZXN0IG1hdGNoIHJvdXRpbmVzIGFjY2VzcyBieXRlcyBwYXN0IHRoZSBpbnB1dC4gIFRoaXMgaXMgdGhlbgogICAgICogdXBkYXRlZCB0byB0aGUgbmV3IGhpZ2ggd2F0ZXIgbWFyay4KICAgICAqLwogIH0KCgogIGNvbnN0IGRlZmxhdGVSZXNldEtlZXAgPSAoc3RybSkgPT4gewoKICAgIGlmICghc3RybSB8fCAhc3RybS5zdGF0ZSkgewogICAgICByZXR1cm4gZXJyKHN0cm0sIFpfU1RSRUFNX0VSUk9SJDIpOwogICAgfQoKICAgIHN0cm0udG90YWxfaW4gPSBzdHJtLnRvdGFsX291dCA9IDA7CiAgICBzdHJtLmRhdGFfdHlwZSA9IFpfVU5LTk9XTjsKCiAgICBjb25zdCBzID0gc3RybS5zdGF0ZTsKICAgIHMucGVuZGluZyA9IDA7CiAgICBzLnBlbmRpbmdfb3V0ID0gMDsKCiAgICBpZiAocy53cmFwIDwgMCkgewogICAgICBzLndyYXAgPSAtcy53cmFwOwogICAgICAvKiB3YXMgbWFkZSBuZWdhdGl2ZSBieSBkZWZsYXRlKC4uLiwgWl9GSU5JU0gpOyAqLwogICAgfQogICAgcy5zdGF0dXMgPSAocy53cmFwID8gSU5JVF9TVEFURSA6IEJVU1lfU1RBVEUpOwogICAgc3RybS5hZGxlciA9IChzLndyYXAgPT09IDIpID8KICAgICAgMCAgLy8gY3JjMzIoMCwgWl9OVUxMLCAwKQogICAgOgogICAgICAxOyAvLyBhZGxlcjMyKDAsIFpfTlVMTCwgMCkKICAgIHMubGFzdF9mbHVzaCA9IFpfTk9fRkxVU0gkMjsKICAgIF90cl9pbml0KHMpOwogICAgcmV0dXJuIFpfT0skMzsKICB9OwoKCiAgY29uc3QgZGVmbGF0ZVJlc2V0ID0gKHN0cm0pID0+IHsKCiAgICBjb25zdCByZXQgPSBkZWZsYXRlUmVzZXRLZWVwKHN0cm0pOwogICAgaWYgKHJldCA9PT0gWl9PSyQzKSB7CiAgICAgIGxtX2luaXQoc3RybS5zdGF0ZSk7CiAgICB9CiAgICByZXR1cm4gcmV0OwogIH07CgoKICBjb25zdCBkZWZsYXRlU2V0SGVhZGVyID0gKHN0cm0sIGhlYWQpID0+IHsKCiAgICBpZiAoIXN0cm0gfHwgIXN0cm0uc3RhdGUpIHsgcmV0dXJuIFpfU1RSRUFNX0VSUk9SJDI7IH0KICAgIGlmIChzdHJtLnN0YXRlLndyYXAgIT09IDIpIHsgcmV0dXJuIFpfU1RSRUFNX0VSUk9SJDI7IH0KICAgIHN0cm0uc3RhdGUuZ3poZWFkID0gaGVhZDsKICAgIHJldHVybiBaX09LJDM7CiAgfTsKCgogIGNvbnN0IGRlZmxhdGVJbml0MiA9IChzdHJtLCBsZXZlbCwgbWV0aG9kLCB3aW5kb3dCaXRzLCBtZW1MZXZlbCwgc3RyYXRlZ3kpID0+IHsKCiAgICBpZiAoIXN0cm0pIHsgLy8gPT09IFpfTlVMTAogICAgICByZXR1cm4gWl9TVFJFQU1fRVJST1IkMjsKICAgIH0KICAgIGxldCB3cmFwID0gMTsKCiAgICBpZiAobGV2ZWwgPT09IFpfREVGQVVMVF9DT01QUkVTU0lPTiQxKSB7CiAgICAgIGxldmVsID0gNjsKICAgIH0KCiAgICBpZiAod2luZG93Qml0cyA8IDApIHsgLyogc3VwcHJlc3MgemxpYiB3cmFwcGVyICovCiAgICAgIHdyYXAgPSAwOwogICAgICB3aW5kb3dCaXRzID0gLXdpbmRvd0JpdHM7CiAgICB9CgogICAgZWxzZSBpZiAod2luZG93Qml0cyA+IDE1KSB7CiAgICAgIHdyYXAgPSAyOyAgICAgICAgICAgLyogd3JpdGUgZ3ppcCB3cmFwcGVyIGluc3RlYWQgKi8KICAgICAgd2luZG93Qml0cyAtPSAxNjsKICAgIH0KCgogICAgaWYgKG1lbUxldmVsIDwgMSB8fCBtZW1MZXZlbCA+IE1BWF9NRU1fTEVWRUwgfHwgbWV0aG9kICE9PSBaX0RFRkxBVEVEJDIgfHwKICAgICAgd2luZG93Qml0cyA8IDggfHwgd2luZG93Qml0cyA+IDE1IHx8IGxldmVsIDwgMCB8fCBsZXZlbCA+IDkgfHwKICAgICAgc3RyYXRlZ3kgPCAwIHx8IHN0cmF0ZWd5ID4gWl9GSVhFRCkgewogICAgICByZXR1cm4gZXJyKHN0cm0sIFpfU1RSRUFNX0VSUk9SJDIpOwogICAgfQoKCiAgICBpZiAod2luZG93Qml0cyA9PT0gOCkgewogICAgICB3aW5kb3dCaXRzID0gOTsKICAgIH0KICAgIC8qIHVudGlsIDI1Ni1ieXRlIHdpbmRvdyBidWcgZml4ZWQgKi8KCiAgICBjb25zdCBzID0gbmV3IERlZmxhdGVTdGF0ZSgpOwoKICAgIHN0cm0uc3RhdGUgPSBzOwogICAgcy5zdHJtID0gc3RybTsKCiAgICBzLndyYXAgPSB3cmFwOwogICAgcy5nemhlYWQgPSBudWxsOwogICAgcy53X2JpdHMgPSB3aW5kb3dCaXRzOwogICAgcy53X3NpemUgPSAxIDw8IHMud19iaXRzOwogICAgcy53X21hc2sgPSBzLndfc2l6ZSAtIDE7CgogICAgcy5oYXNoX2JpdHMgPSBtZW1MZXZlbCArIDc7CiAgICBzLmhhc2hfc2l6ZSA9IDEgPDwgcy5oYXNoX2JpdHM7CiAgICBzLmhhc2hfbWFzayA9IHMuaGFzaF9zaXplIC0gMTsKICAgIHMuaGFzaF9zaGlmdCA9IH5+KChzLmhhc2hfYml0cyArIE1JTl9NQVRDSCAtIDEpIC8gTUlOX01BVENIKTsKCiAgICBzLndpbmRvdyA9IG5ldyBVaW50OEFycmF5KHMud19zaXplICogMik7CiAgICBzLmhlYWQgPSBuZXcgVWludDE2QXJyYXkocy5oYXNoX3NpemUpOwogICAgcy5wcmV2ID0gbmV3IFVpbnQxNkFycmF5KHMud19zaXplKTsKCiAgICAvLyBEb24ndCBuZWVkIG1lbSBpbml0IG1hZ2ljIGZvciBKUy4KICAgIC8vcy5oaWdoX3dhdGVyID0gMDsgIC8qIG5vdGhpbmcgd3JpdHRlbiB0byBzLT53aW5kb3cgeWV0ICovCgogICAgcy5saXRfYnVmc2l6ZSA9IDEgPDwgKG1lbUxldmVsICsgNik7IC8qIDE2SyBlbGVtZW50cyBieSBkZWZhdWx0ICovCgogICAgcy5wZW5kaW5nX2J1Zl9zaXplID0gcy5saXRfYnVmc2l6ZSAqIDQ7CgogICAgLy9vdmVybGF5ID0gKHVzaGYgKikgWkFMTE9DKHN0cm0sIHMtPmxpdF9idWZzaXplLCBzaXplb2YodXNoKSsyKTsKICAgIC8vcy0+cGVuZGluZ19idWYgPSAodWNoZiAqKSBvdmVybGF5OwogICAgcy5wZW5kaW5nX2J1ZiA9IG5ldyBVaW50OEFycmF5KHMucGVuZGluZ19idWZfc2l6ZSk7CgogICAgLy8gSXQgaXMgb2Zmc2V0IGZyb20gYHMucGVuZGluZ19idWZgIChzaXplIGlzIGBzLmxpdF9idWZzaXplICogMmApCiAgICAvL3MtPmRfYnVmID0gb3ZlcmxheSArIHMtPmxpdF9idWZzaXplL3NpemVvZih1c2gpOwogICAgcy5kX2J1ZiA9IDEgKiBzLmxpdF9idWZzaXplOwoKICAgIC8vcy0+bF9idWYgPSBzLT5wZW5kaW5nX2J1ZiArICgxK3NpemVvZih1c2gpKSpzLT5saXRfYnVmc2l6ZTsKICAgIHMubF9idWYgPSAoMSArIDIpICogcy5saXRfYnVmc2l6ZTsKCiAgICBzLmxldmVsID0gbGV2ZWw7CiAgICBzLnN0cmF0ZWd5ID0gc3RyYXRlZ3k7CiAgICBzLm1ldGhvZCA9IG1ldGhvZDsKCiAgICByZXR1cm4gZGVmbGF0ZVJlc2V0KHN0cm0pOwogIH07CgogIGNvbnN0IGRlZmxhdGVJbml0ID0gKHN0cm0sIGxldmVsKSA9PiB7CgogICAgcmV0dXJuIGRlZmxhdGVJbml0MihzdHJtLCBsZXZlbCwgWl9ERUZMQVRFRCQyLCBNQVhfV0JJVFMkMSwgREVGX01FTV9MRVZFTCwgWl9ERUZBVUxUX1NUUkFURUdZJDEpOwogIH07CgoKICBjb25zdCBkZWZsYXRlJDIgPSAoc3RybSwgZmx1c2gpID0+IHsKCiAgICBsZXQgYmVnLCB2YWw7IC8vIGZvciBnemlwIGhlYWRlciB3cml0ZSBvbmx5CgogICAgaWYgKCFzdHJtIHx8ICFzdHJtLnN0YXRlIHx8CiAgICAgIGZsdXNoID4gWl9CTE9DSyQxIHx8IGZsdXNoIDwgMCkgewogICAgICByZXR1cm4gc3RybSA/IGVycihzdHJtLCBaX1NUUkVBTV9FUlJPUiQyKSA6IFpfU1RSRUFNX0VSUk9SJDI7CiAgICB9CgogICAgY29uc3QgcyA9IHN0cm0uc3RhdGU7CgogICAgaWYgKCFzdHJtLm91dHB1dCB8fAogICAgICAgICghc3RybS5pbnB1dCAmJiBzdHJtLmF2YWlsX2luICE9PSAwKSB8fAogICAgICAgIChzLnN0YXR1cyA9PT0gRklOSVNIX1NUQVRFICYmIGZsdXNoICE9PSBaX0ZJTklTSCQzKSkgewogICAgICByZXR1cm4gZXJyKHN0cm0sIChzdHJtLmF2YWlsX291dCA9PT0gMCkgPyBaX0JVRl9FUlJPUiQxIDogWl9TVFJFQU1fRVJST1IkMik7CiAgICB9CgogICAgcy5zdHJtID0gc3RybTsgLyoganVzdCBpbiBjYXNlICovCiAgICBjb25zdCBvbGRfZmx1c2ggPSBzLmxhc3RfZmx1c2g7CiAgICBzLmxhc3RfZmx1c2ggPSBmbHVzaDsKCiAgICAvKiBXcml0ZSB0aGUgaGVhZGVyICovCiAgICBpZiAocy5zdGF0dXMgPT09IElOSVRfU1RBVEUpIHsKCiAgICAgIGlmIChzLndyYXAgPT09IDIpIHsgLy8gR1pJUCBoZWFkZXIKICAgICAgICBzdHJtLmFkbGVyID0gMDsgIC8vY3JjMzIoMEwsIFpfTlVMTCwgMCk7CiAgICAgICAgcHV0X2J5dGUocywgMzEpOwogICAgICAgIHB1dF9ieXRlKHMsIDEzOSk7CiAgICAgICAgcHV0X2J5dGUocywgOCk7CiAgICAgICAgaWYgKCFzLmd6aGVhZCkgeyAvLyBzLT5nemhlYWQgPT0gWl9OVUxMCiAgICAgICAgICBwdXRfYnl0ZShzLCAwKTsKICAgICAgICAgIHB1dF9ieXRlKHMsIDApOwogICAgICAgICAgcHV0X2J5dGUocywgMCk7CiAgICAgICAgICBwdXRfYnl0ZShzLCAwKTsKICAgICAgICAgIHB1dF9ieXRlKHMsIDApOwogICAgICAgICAgcHV0X2J5dGUocywgcy5sZXZlbCA9PT0gOSA/IDIgOgogICAgICAgICAgICAgICAgICAgICAgKHMuc3RyYXRlZ3kgPj0gWl9IVUZGTUFOX09OTFkgfHwgcy5sZXZlbCA8IDIgPwogICAgICAgICAgICAgICAgICAgICAgIDQgOiAwKSk7CiAgICAgICAgICBwdXRfYnl0ZShzLCBPU19DT0RFKTsKICAgICAgICAgIHMuc3RhdHVzID0gQlVTWV9TVEFURTsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICBwdXRfYnl0ZShzLCAocy5nemhlYWQudGV4dCA/IDEgOiAwKSArCiAgICAgICAgICAgICAgICAgICAgICAocy5nemhlYWQuaGNyYyA/IDIgOiAwKSArCiAgICAgICAgICAgICAgICAgICAgICAoIXMuZ3poZWFkLmV4dHJhID8gMCA6IDQpICsKICAgICAgICAgICAgICAgICAgICAgICghcy5nemhlYWQubmFtZSA/IDAgOiA4KSArCiAgICAgICAgICAgICAgICAgICAgICAoIXMuZ3poZWFkLmNvbW1lbnQgPyAwIDogMTYpCiAgICAgICAgICApOwogICAgICAgICAgcHV0X2J5dGUocywgcy5nemhlYWQudGltZSAmIDB4ZmYpOwogICAgICAgICAgcHV0X2J5dGUocywgKHMuZ3poZWFkLnRpbWUgPj4gOCkgJiAweGZmKTsKICAgICAgICAgIHB1dF9ieXRlKHMsIChzLmd6aGVhZC50aW1lID4+IDE2KSAmIDB4ZmYpOwogICAgICAgICAgcHV0X2J5dGUocywgKHMuZ3poZWFkLnRpbWUgPj4gMjQpICYgMHhmZik7CiAgICAgICAgICBwdXRfYnl0ZShzLCBzLmxldmVsID09PSA5ID8gMiA6CiAgICAgICAgICAgICAgICAgICAgICAocy5zdHJhdGVneSA+PSBaX0hVRkZNQU5fT05MWSB8fCBzLmxldmVsIDwgMiA/CiAgICAgICAgICAgICAgICAgICAgICAgNCA6IDApKTsKICAgICAgICAgIHB1dF9ieXRlKHMsIHMuZ3poZWFkLm9zICYgMHhmZik7CiAgICAgICAgICBpZiAocy5nemhlYWQuZXh0cmEgJiYgcy5nemhlYWQuZXh0cmEubGVuZ3RoKSB7CiAgICAgICAgICAgIHB1dF9ieXRlKHMsIHMuZ3poZWFkLmV4dHJhLmxlbmd0aCAmIDB4ZmYpOwogICAgICAgICAgICBwdXRfYnl0ZShzLCAocy5nemhlYWQuZXh0cmEubGVuZ3RoID4+IDgpICYgMHhmZik7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAocy5nemhlYWQuaGNyYykgewogICAgICAgICAgICBzdHJtLmFkbGVyID0gY3JjMzJfMShzdHJtLmFkbGVyLCBzLnBlbmRpbmdfYnVmLCBzLnBlbmRpbmcsIDApOwogICAgICAgICAgfQogICAgICAgICAgcy5nemluZGV4ID0gMDsKICAgICAgICAgIHMuc3RhdHVzID0gRVhUUkFfU1RBVEU7CiAgICAgICAgfQogICAgICB9CiAgICAgIGVsc2UgLy8gREVGTEFURSBoZWFkZXIKICAgICAgewogICAgICAgIGxldCBoZWFkZXIgPSAoWl9ERUZMQVRFRCQyICsgKChzLndfYml0cyAtIDgpIDw8IDQpKSA8PCA4OwogICAgICAgIGxldCBsZXZlbF9mbGFncyA9IC0xOwoKICAgICAgICBpZiAocy5zdHJhdGVneSA+PSBaX0hVRkZNQU5fT05MWSB8fCBzLmxldmVsIDwgMikgewogICAgICAgICAgbGV2ZWxfZmxhZ3MgPSAwOwogICAgICAgIH0gZWxzZSBpZiAocy5sZXZlbCA8IDYpIHsKICAgICAgICAgIGxldmVsX2ZsYWdzID0gMTsKICAgICAgICB9IGVsc2UgaWYgKHMubGV2ZWwgPT09IDYpIHsKICAgICAgICAgIGxldmVsX2ZsYWdzID0gMjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgbGV2ZWxfZmxhZ3MgPSAzOwogICAgICAgIH0KICAgICAgICBoZWFkZXIgfD0gKGxldmVsX2ZsYWdzIDw8IDYpOwogICAgICAgIGlmIChzLnN0cnN0YXJ0ICE9PSAwKSB7IGhlYWRlciB8PSBQUkVTRVRfRElDVDsgfQogICAgICAgIGhlYWRlciArPSAzMSAtIChoZWFkZXIgJSAzMSk7CgogICAgICAgIHMuc3RhdHVzID0gQlVTWV9TVEFURTsKICAgICAgICBwdXRTaG9ydE1TQihzLCBoZWFkZXIpOwoKICAgICAgICAvKiBTYXZlIHRoZSBhZGxlcjMyIG9mIHRoZSBwcmVzZXQgZGljdGlvbmFyeTogKi8KICAgICAgICBpZiAocy5zdHJzdGFydCAhPT0gMCkgewogICAgICAgICAgcHV0U2hvcnRNU0Iocywgc3RybS5hZGxlciA+Pj4gMTYpOwogICAgICAgICAgcHV0U2hvcnRNU0Iocywgc3RybS5hZGxlciAmIDB4ZmZmZik7CiAgICAgICAgfQogICAgICAgIHN0cm0uYWRsZXIgPSAxOyAvLyBhZGxlcjMyKDBMLCBaX05VTEwsIDApOwogICAgICB9CiAgICB9CgogIC8vI2lmZGVmIEdaSVAKICAgIGlmIChzLnN0YXR1cyA9PT0gRVhUUkFfU1RBVEUpIHsKICAgICAgaWYgKHMuZ3poZWFkLmV4dHJhLyogIT0gWl9OVUxMKi8pIHsKICAgICAgICBiZWcgPSBzLnBlbmRpbmc7ICAvKiBzdGFydCBvZiBieXRlcyB0byB1cGRhdGUgY3JjICovCgogICAgICAgIHdoaWxlIChzLmd6aW5kZXggPCAocy5nemhlYWQuZXh0cmEubGVuZ3RoICYgMHhmZmZmKSkgewogICAgICAgICAgaWYgKHMucGVuZGluZyA9PT0gcy5wZW5kaW5nX2J1Zl9zaXplKSB7CiAgICAgICAgICAgIGlmIChzLmd6aGVhZC5oY3JjICYmIHMucGVuZGluZyA+IGJlZykgewogICAgICAgICAgICAgIHN0cm0uYWRsZXIgPSBjcmMzMl8xKHN0cm0uYWRsZXIsIHMucGVuZGluZ19idWYsIHMucGVuZGluZyAtIGJlZywgYmVnKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBmbHVzaF9wZW5kaW5nKHN0cm0pOwogICAgICAgICAgICBiZWcgPSBzLnBlbmRpbmc7CiAgICAgICAgICAgIGlmIChzLnBlbmRpbmcgPT09IHMucGVuZGluZ19idWZfc2l6ZSkgewogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBwdXRfYnl0ZShzLCBzLmd6aGVhZC5leHRyYVtzLmd6aW5kZXhdICYgMHhmZik7CiAgICAgICAgICBzLmd6aW5kZXgrKzsKICAgICAgICB9CiAgICAgICAgaWYgKHMuZ3poZWFkLmhjcmMgJiYgcy5wZW5kaW5nID4gYmVnKSB7CiAgICAgICAgICBzdHJtLmFkbGVyID0gY3JjMzJfMShzdHJtLmFkbGVyLCBzLnBlbmRpbmdfYnVmLCBzLnBlbmRpbmcgLSBiZWcsIGJlZyk7CiAgICAgICAgfQogICAgICAgIGlmIChzLmd6aW5kZXggPT09IHMuZ3poZWFkLmV4dHJhLmxlbmd0aCkgewogICAgICAgICAgcy5nemluZGV4ID0gMDsKICAgICAgICAgIHMuc3RhdHVzID0gTkFNRV9TVEFURTsKICAgICAgICB9CiAgICAgIH0KICAgICAgZWxzZSB7CiAgICAgICAgcy5zdGF0dXMgPSBOQU1FX1NUQVRFOwogICAgICB9CiAgICB9CiAgICBpZiAocy5zdGF0dXMgPT09IE5BTUVfU1RBVEUpIHsKICAgICAgaWYgKHMuZ3poZWFkLm5hbWUvKiAhPSBaX05VTEwqLykgewogICAgICAgIGJlZyA9IHMucGVuZGluZzsgIC8qIHN0YXJ0IG9mIGJ5dGVzIHRvIHVwZGF0ZSBjcmMgKi8KICAgICAgICAvL2ludCB2YWw7CgogICAgICAgIGRvIHsKICAgICAgICAgIGlmIChzLnBlbmRpbmcgPT09IHMucGVuZGluZ19idWZfc2l6ZSkgewogICAgICAgICAgICBpZiAocy5nemhlYWQuaGNyYyAmJiBzLnBlbmRpbmcgPiBiZWcpIHsKICAgICAgICAgICAgICBzdHJtLmFkbGVyID0gY3JjMzJfMShzdHJtLmFkbGVyLCBzLnBlbmRpbmdfYnVmLCBzLnBlbmRpbmcgLSBiZWcsIGJlZyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZmx1c2hfcGVuZGluZyhzdHJtKTsKICAgICAgICAgICAgYmVnID0gcy5wZW5kaW5nOwogICAgICAgICAgICBpZiAocy5wZW5kaW5nID09PSBzLnBlbmRpbmdfYnVmX3NpemUpIHsKICAgICAgICAgICAgICB2YWwgPSAxOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICAvLyBKUyBzcGVjaWZpYzogbGl0dGxlIG1hZ2ljIHRvIGFkZCB6ZXJvIHRlcm1pbmF0b3IgdG8gZW5kIG9mIHN0cmluZwogICAgICAgICAgaWYgKHMuZ3ppbmRleCA8IHMuZ3poZWFkLm5hbWUubGVuZ3RoKSB7CiAgICAgICAgICAgIHZhbCA9IHMuZ3poZWFkLm5hbWUuY2hhckNvZGVBdChzLmd6aW5kZXgrKykgJiAweGZmOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdmFsID0gMDsKICAgICAgICAgIH0KICAgICAgICAgIHB1dF9ieXRlKHMsIHZhbCk7CiAgICAgICAgfSB3aGlsZSAodmFsICE9PSAwKTsKCiAgICAgICAgaWYgKHMuZ3poZWFkLmhjcmMgJiYgcy5wZW5kaW5nID4gYmVnKSB7CiAgICAgICAgICBzdHJtLmFkbGVyID0gY3JjMzJfMShzdHJtLmFkbGVyLCBzLnBlbmRpbmdfYnVmLCBzLnBlbmRpbmcgLSBiZWcsIGJlZyk7CiAgICAgICAgfQogICAgICAgIGlmICh2YWwgPT09IDApIHsKICAgICAgICAgIHMuZ3ppbmRleCA9IDA7CiAgICAgICAgICBzLnN0YXR1cyA9IENPTU1FTlRfU1RBVEU7CiAgICAgICAgfQogICAgICB9CiAgICAgIGVsc2UgewogICAgICAgIHMuc3RhdHVzID0gQ09NTUVOVF9TVEFURTsKICAgICAgfQogICAgfQogICAgaWYgKHMuc3RhdHVzID09PSBDT01NRU5UX1NUQVRFKSB7CiAgICAgIGlmIChzLmd6aGVhZC5jb21tZW50LyogIT0gWl9OVUxMKi8pIHsKICAgICAgICBiZWcgPSBzLnBlbmRpbmc7ICAvKiBzdGFydCBvZiBieXRlcyB0byB1cGRhdGUgY3JjICovCiAgICAgICAgLy9pbnQgdmFsOwoKICAgICAgICBkbyB7CiAgICAgICAgICBpZiAocy5wZW5kaW5nID09PSBzLnBlbmRpbmdfYnVmX3NpemUpIHsKICAgICAgICAgICAgaWYgKHMuZ3poZWFkLmhjcmMgJiYgcy5wZW5kaW5nID4gYmVnKSB7CiAgICAgICAgICAgICAgc3RybS5hZGxlciA9IGNyYzMyXzEoc3RybS5hZGxlciwgcy5wZW5kaW5nX2J1Ziwgcy5wZW5kaW5nIC0gYmVnLCBiZWcpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZsdXNoX3BlbmRpbmcoc3RybSk7CiAgICAgICAgICAgIGJlZyA9IHMucGVuZGluZzsKICAgICAgICAgICAgaWYgKHMucGVuZGluZyA9PT0gcy5wZW5kaW5nX2J1Zl9zaXplKSB7CiAgICAgICAgICAgICAgdmFsID0gMTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgLy8gSlMgc3BlY2lmaWM6IGxpdHRsZSBtYWdpYyB0byBhZGQgemVybyB0ZXJtaW5hdG9yIHRvIGVuZCBvZiBzdHJpbmcKICAgICAgICAgIGlmIChzLmd6aW5kZXggPCBzLmd6aGVhZC5jb21tZW50Lmxlbmd0aCkgewogICAgICAgICAgICB2YWwgPSBzLmd6aGVhZC5jb21tZW50LmNoYXJDb2RlQXQocy5nemluZGV4KyspICYgMHhmZjsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHZhbCA9IDA7CiAgICAgICAgICB9CiAgICAgICAgICBwdXRfYnl0ZShzLCB2YWwpOwogICAgICAgIH0gd2hpbGUgKHZhbCAhPT0gMCk7CgogICAgICAgIGlmIChzLmd6aGVhZC5oY3JjICYmIHMucGVuZGluZyA+IGJlZykgewogICAgICAgICAgc3RybS5hZGxlciA9IGNyYzMyXzEoc3RybS5hZGxlciwgcy5wZW5kaW5nX2J1Ziwgcy5wZW5kaW5nIC0gYmVnLCBiZWcpOwogICAgICAgIH0KICAgICAgICBpZiAodmFsID09PSAwKSB7CiAgICAgICAgICBzLnN0YXR1cyA9IEhDUkNfU1RBVEU7CiAgICAgICAgfQogICAgICB9CiAgICAgIGVsc2UgewogICAgICAgIHMuc3RhdHVzID0gSENSQ19TVEFURTsKICAgICAgfQogICAgfQogICAgaWYgKHMuc3RhdHVzID09PSBIQ1JDX1NUQVRFKSB7CiAgICAgIGlmIChzLmd6aGVhZC5oY3JjKSB7CiAgICAgICAgaWYgKHMucGVuZGluZyArIDIgPiBzLnBlbmRpbmdfYnVmX3NpemUpIHsKICAgICAgICAgIGZsdXNoX3BlbmRpbmcoc3RybSk7CiAgICAgICAgfQogICAgICAgIGlmIChzLnBlbmRpbmcgKyAyIDw9IHMucGVuZGluZ19idWZfc2l6ZSkgewogICAgICAgICAgcHV0X2J5dGUocywgc3RybS5hZGxlciAmIDB4ZmYpOwogICAgICAgICAgcHV0X2J5dGUocywgKHN0cm0uYWRsZXIgPj4gOCkgJiAweGZmKTsKICAgICAgICAgIHN0cm0uYWRsZXIgPSAwOyAvL2NyYzMyKDBMLCBaX05VTEwsIDApOwogICAgICAgICAgcy5zdGF0dXMgPSBCVVNZX1NUQVRFOwogICAgICAgIH0KICAgICAgfQogICAgICBlbHNlIHsKICAgICAgICBzLnN0YXR1cyA9IEJVU1lfU1RBVEU7CiAgICAgIH0KICAgIH0KICAvLyNlbmRpZgoKICAgIC8qIEZsdXNoIGFzIG11Y2ggcGVuZGluZyBvdXRwdXQgYXMgcG9zc2libGUgKi8KICAgIGlmIChzLnBlbmRpbmcgIT09IDApIHsKICAgICAgZmx1c2hfcGVuZGluZyhzdHJtKTsKICAgICAgaWYgKHN0cm0uYXZhaWxfb3V0ID09PSAwKSB7CiAgICAgICAgLyogU2luY2UgYXZhaWxfb3V0IGlzIDAsIGRlZmxhdGUgd2lsbCBiZSBjYWxsZWQgYWdhaW4gd2l0aAogICAgICAgICAqIG1vcmUgb3V0cHV0IHNwYWNlLCBidXQgcG9zc2libHkgd2l0aCBib3RoIHBlbmRpbmcgYW5kCiAgICAgICAgICogYXZhaWxfaW4gZXF1YWwgdG8gemVyby4gVGhlcmUgd29uJ3QgYmUgYW55dGhpbmcgdG8gZG8sCiAgICAgICAgICogYnV0IHRoaXMgaXMgbm90IGFuIGVycm9yIHNpdHVhdGlvbiBzbyBtYWtlIHN1cmUgd2UKICAgICAgICAgKiByZXR1cm4gT0sgaW5zdGVhZCBvZiBCVUZfRVJST1IgYXQgbmV4dCBjYWxsIG9mIGRlZmxhdGU6CiAgICAgICAgICovCiAgICAgICAgcy5sYXN0X2ZsdXNoID0gLTE7CiAgICAgICAgcmV0dXJuIFpfT0skMzsKICAgICAgfQoKICAgICAgLyogTWFrZSBzdXJlIHRoZXJlIGlzIHNvbWV0aGluZyB0byBkbyBhbmQgYXZvaWQgZHVwbGljYXRlIGNvbnNlY3V0aXZlCiAgICAgICAqIGZsdXNoZXMuIEZvciByZXBlYXRlZCBhbmQgdXNlbGVzcyBjYWxscyB3aXRoIFpfRklOSVNILCB3ZSBrZWVwCiAgICAgICAqIHJldHVybmluZyBaX1NUUkVBTV9FTkQgaW5zdGVhZCBvZiBaX0JVRl9FUlJPUi4KICAgICAgICovCiAgICB9IGVsc2UgaWYgKHN0cm0uYXZhaWxfaW4gPT09IDAgJiYgcmFuayhmbHVzaCkgPD0gcmFuayhvbGRfZmx1c2gpICYmCiAgICAgIGZsdXNoICE9PSBaX0ZJTklTSCQzKSB7CiAgICAgIHJldHVybiBlcnIoc3RybSwgWl9CVUZfRVJST1IkMSk7CiAgICB9CgogICAgLyogVXNlciBtdXN0IG5vdCBwcm92aWRlIG1vcmUgaW5wdXQgYWZ0ZXIgdGhlIGZpcnN0IEZJTklTSDogKi8KICAgIGlmIChzLnN0YXR1cyA9PT0gRklOSVNIX1NUQVRFICYmIHN0cm0uYXZhaWxfaW4gIT09IDApIHsKICAgICAgcmV0dXJuIGVycihzdHJtLCBaX0JVRl9FUlJPUiQxKTsKICAgIH0KCiAgICAvKiBTdGFydCBhIG5ldyBibG9jayBvciBjb250aW51ZSB0aGUgY3VycmVudCBvbmUuCiAgICAgKi8KICAgIGlmIChzdHJtLmF2YWlsX2luICE9PSAwIHx8IHMubG9va2FoZWFkICE9PSAwIHx8CiAgICAgIChmbHVzaCAhPT0gWl9OT19GTFVTSCQyICYmIHMuc3RhdHVzICE9PSBGSU5JU0hfU1RBVEUpKSB7CiAgICAgIGxldCBic3RhdGUgPSAocy5zdHJhdGVneSA9PT0gWl9IVUZGTUFOX09OTFkpID8gZGVmbGF0ZV9odWZmKHMsIGZsdXNoKSA6CiAgICAgICAgKHMuc3RyYXRlZ3kgPT09IFpfUkxFID8gZGVmbGF0ZV9ybGUocywgZmx1c2gpIDoKICAgICAgICAgIGNvbmZpZ3VyYXRpb25fdGFibGVbcy5sZXZlbF0uZnVuYyhzLCBmbHVzaCkpOwoKICAgICAgaWYgKGJzdGF0ZSA9PT0gQlNfRklOSVNIX1NUQVJURUQgfHwgYnN0YXRlID09PSBCU19GSU5JU0hfRE9ORSkgewogICAgICAgIHMuc3RhdHVzID0gRklOSVNIX1NUQVRFOwogICAgICB9CiAgICAgIGlmIChic3RhdGUgPT09IEJTX05FRURfTU9SRSB8fCBic3RhdGUgPT09IEJTX0ZJTklTSF9TVEFSVEVEKSB7CiAgICAgICAgaWYgKHN0cm0uYXZhaWxfb3V0ID09PSAwKSB7CiAgICAgICAgICBzLmxhc3RfZmx1c2ggPSAtMTsKICAgICAgICAgIC8qIGF2b2lkIEJVRl9FUlJPUiBuZXh0IGNhbGwsIHNlZSBhYm92ZSAqLwogICAgICAgIH0KICAgICAgICByZXR1cm4gWl9PSyQzOwogICAgICAgIC8qIElmIGZsdXNoICE9IFpfTk9fRkxVU0ggJiYgYXZhaWxfb3V0ID09IDAsIHRoZSBuZXh0IGNhbGwKICAgICAgICAgKiBvZiBkZWZsYXRlIHNob3VsZCB1c2UgdGhlIHNhbWUgZmx1c2ggcGFyYW1ldGVyIHRvIG1ha2Ugc3VyZQogICAgICAgICAqIHRoYXQgdGhlIGZsdXNoIGlzIGNvbXBsZXRlLiBTbyB3ZSBkb24ndCBoYXZlIHRvIG91dHB1dCBhbgogICAgICAgICAqIGVtcHR5IGJsb2NrIGhlcmUsIHRoaXMgd2lsbCBiZSBkb25lIGF0IG5leHQgY2FsbC4gVGhpcyBhbHNvCiAgICAgICAgICogZW5zdXJlcyB0aGF0IGZvciBhIHZlcnkgc21hbGwgb3V0cHV0IGJ1ZmZlciwgd2UgZW1pdCBhdCBtb3N0CiAgICAgICAgICogb25lIGVtcHR5IGJsb2NrLgogICAgICAgICAqLwogICAgICB9CiAgICAgIGlmIChic3RhdGUgPT09IEJTX0JMT0NLX0RPTkUpIHsKICAgICAgICBpZiAoZmx1c2ggPT09IFpfUEFSVElBTF9GTFVTSCkgewogICAgICAgICAgX3RyX2FsaWduKHMpOwogICAgICAgIH0KICAgICAgICBlbHNlIGlmIChmbHVzaCAhPT0gWl9CTE9DSyQxKSB7IC8qIEZVTExfRkxVU0ggb3IgU1lOQ19GTFVTSCAqLwoKICAgICAgICAgIF90cl9zdG9yZWRfYmxvY2socywgMCwgMCwgZmFsc2UpOwogICAgICAgICAgLyogRm9yIGEgZnVsbCBmbHVzaCwgdGhpcyBlbXB0eSBibG9jayB3aWxsIGJlIHJlY29nbml6ZWQKICAgICAgICAgICAqIGFzIGEgc3BlY2lhbCBtYXJrZXIgYnkgaW5mbGF0ZV9zeW5jKCkuCiAgICAgICAgICAgKi8KICAgICAgICAgIGlmIChmbHVzaCA9PT0gWl9GVUxMX0ZMVVNIJDEpIHsKICAgICAgICAgICAgLyoqKiBDTEVBUl9IQVNIKHMpOyAqKiovICAgICAgICAgICAgIC8qIGZvcmdldCBoaXN0b3J5ICovCiAgICAgICAgICAgIHplcm8ocy5oZWFkKTsgLy8gRmlsbCB3aXRoIE5JTCAoPSAwKTsKCiAgICAgICAgICAgIGlmIChzLmxvb2thaGVhZCA9PT0gMCkgewogICAgICAgICAgICAgIHMuc3Ryc3RhcnQgPSAwOwogICAgICAgICAgICAgIHMuYmxvY2tfc3RhcnQgPSAwOwogICAgICAgICAgICAgIHMuaW5zZXJ0ID0gMDsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBmbHVzaF9wZW5kaW5nKHN0cm0pOwogICAgICAgIGlmIChzdHJtLmF2YWlsX291dCA9PT0gMCkgewogICAgICAgICAgcy5sYXN0X2ZsdXNoID0gLTE7IC8qIGF2b2lkIEJVRl9FUlJPUiBhdCBuZXh0IGNhbGwsIHNlZSBhYm92ZSAqLwogICAgICAgICAgcmV0dXJuIFpfT0skMzsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIC8vQXNzZXJ0KHN0cm0tPmF2YWlsX291dCA+IDAsICJidWcyIik7CiAgICAvL2lmIChzdHJtLmF2YWlsX291dCA8PSAwKSB7IHRocm93IG5ldyBFcnJvcigiYnVnMiIpO30KCiAgICBpZiAoZmx1c2ggIT09IFpfRklOSVNIJDMpIHsgcmV0dXJuIFpfT0skMzsgfQogICAgaWYgKHMud3JhcCA8PSAwKSB7IHJldHVybiBaX1NUUkVBTV9FTkQkMzsgfQoKICAgIC8qIFdyaXRlIHRoZSB0cmFpbGVyICovCiAgICBpZiAocy53cmFwID09PSAyKSB7CiAgICAgIHB1dF9ieXRlKHMsIHN0cm0uYWRsZXIgJiAweGZmKTsKICAgICAgcHV0X2J5dGUocywgKHN0cm0uYWRsZXIgPj4gOCkgJiAweGZmKTsKICAgICAgcHV0X2J5dGUocywgKHN0cm0uYWRsZXIgPj4gMTYpICYgMHhmZik7CiAgICAgIHB1dF9ieXRlKHMsIChzdHJtLmFkbGVyID4+IDI0KSAmIDB4ZmYpOwogICAgICBwdXRfYnl0ZShzLCBzdHJtLnRvdGFsX2luICYgMHhmZik7CiAgICAgIHB1dF9ieXRlKHMsIChzdHJtLnRvdGFsX2luID4+IDgpICYgMHhmZik7CiAgICAgIHB1dF9ieXRlKHMsIChzdHJtLnRvdGFsX2luID4+IDE2KSAmIDB4ZmYpOwogICAgICBwdXRfYnl0ZShzLCAoc3RybS50b3RhbF9pbiA+PiAyNCkgJiAweGZmKTsKICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgcHV0U2hvcnRNU0Iocywgc3RybS5hZGxlciA+Pj4gMTYpOwogICAgICBwdXRTaG9ydE1TQihzLCBzdHJtLmFkbGVyICYgMHhmZmZmKTsKICAgIH0KCiAgICBmbHVzaF9wZW5kaW5nKHN0cm0pOwogICAgLyogSWYgYXZhaWxfb3V0IGlzIHplcm8sIHRoZSBhcHBsaWNhdGlvbiB3aWxsIGNhbGwgZGVmbGF0ZSBhZ2FpbgogICAgICogdG8gZmx1c2ggdGhlIHJlc3QuCiAgICAgKi8KICAgIGlmIChzLndyYXAgPiAwKSB7IHMud3JhcCA9IC1zLndyYXA7IH0KICAgIC8qIHdyaXRlIHRoZSB0cmFpbGVyIG9ubHkgb25jZSEgKi8KICAgIHJldHVybiBzLnBlbmRpbmcgIT09IDAgPyBaX09LJDMgOiBaX1NUUkVBTV9FTkQkMzsKICB9OwoKCiAgY29uc3QgZGVmbGF0ZUVuZCA9IChzdHJtKSA9PiB7CgogICAgaWYgKCFzdHJtLyo9PSBaX05VTEwqLyB8fCAhc3RybS5zdGF0ZS8qPT0gWl9OVUxMKi8pIHsKICAgICAgcmV0dXJuIFpfU1RSRUFNX0VSUk9SJDI7CiAgICB9CgogICAgY29uc3Qgc3RhdHVzID0gc3RybS5zdGF0ZS5zdGF0dXM7CiAgICBpZiAoc3RhdHVzICE9PSBJTklUX1NUQVRFICYmCiAgICAgIHN0YXR1cyAhPT0gRVhUUkFfU1RBVEUgJiYKICAgICAgc3RhdHVzICE9PSBOQU1FX1NUQVRFICYmCiAgICAgIHN0YXR1cyAhPT0gQ09NTUVOVF9TVEFURSAmJgogICAgICBzdGF0dXMgIT09IEhDUkNfU1RBVEUgJiYKICAgICAgc3RhdHVzICE9PSBCVVNZX1NUQVRFICYmCiAgICAgIHN0YXR1cyAhPT0gRklOSVNIX1NUQVRFCiAgICApIHsKICAgICAgcmV0dXJuIGVycihzdHJtLCBaX1NUUkVBTV9FUlJPUiQyKTsKICAgIH0KCiAgICBzdHJtLnN0YXRlID0gbnVsbDsKCiAgICByZXR1cm4gc3RhdHVzID09PSBCVVNZX1NUQVRFID8gZXJyKHN0cm0sIFpfREFUQV9FUlJPUiQyKSA6IFpfT0skMzsKICB9OwoKCiAgLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAqIEluaXRpYWxpemVzIHRoZSBjb21wcmVzc2lvbiBkaWN0aW9uYXJ5IGZyb20gdGhlIGdpdmVuIGJ5dGUKICAgKiBzZXF1ZW5jZSB3aXRob3V0IHByb2R1Y2luZyBhbnkgY29tcHJlc3NlZCBvdXRwdXQuCiAgICovCiAgY29uc3QgZGVmbGF0ZVNldERpY3Rpb25hcnkgPSAoc3RybSwgZGljdGlvbmFyeSkgPT4gewoKICAgIGxldCBkaWN0TGVuZ3RoID0gZGljdGlvbmFyeS5sZW5ndGg7CgogICAgaWYgKCFzdHJtLyo9PSBaX05VTEwqLyB8fCAhc3RybS5zdGF0ZS8qPT0gWl9OVUxMKi8pIHsKICAgICAgcmV0dXJuIFpfU1RSRUFNX0VSUk9SJDI7CiAgICB9CgogICAgY29uc3QgcyA9IHN0cm0uc3RhdGU7CiAgICBjb25zdCB3cmFwID0gcy53cmFwOwoKICAgIGlmICh3cmFwID09PSAyIHx8ICh3cmFwID09PSAxICYmIHMuc3RhdHVzICE9PSBJTklUX1NUQVRFKSB8fCBzLmxvb2thaGVhZCkgewogICAgICByZXR1cm4gWl9TVFJFQU1fRVJST1IkMjsKICAgIH0KCiAgICAvKiB3aGVuIHVzaW5nIHpsaWIgd3JhcHBlcnMsIGNvbXB1dGUgQWRsZXItMzIgZm9yIHByb3ZpZGVkIGRpY3Rpb25hcnkgKi8KICAgIGlmICh3cmFwID09PSAxKSB7CiAgICAgIC8qIGFkbGVyMzIoc3RybS0+YWRsZXIsIGRpY3Rpb25hcnksIGRpY3RMZW5ndGgpOyAqLwogICAgICBzdHJtLmFkbGVyID0gYWRsZXIzMl8xKHN0cm0uYWRsZXIsIGRpY3Rpb25hcnksIGRpY3RMZW5ndGgsIDApOwogICAgfQoKICAgIHMud3JhcCA9IDA7ICAgLyogYXZvaWQgY29tcHV0aW5nIEFkbGVyLTMyIGluIHJlYWRfYnVmICovCgogICAgLyogaWYgZGljdGlvbmFyeSB3b3VsZCBmaWxsIHdpbmRvdywganVzdCByZXBsYWNlIHRoZSBoaXN0b3J5ICovCiAgICBpZiAoZGljdExlbmd0aCA+PSBzLndfc2l6ZSkgewogICAgICBpZiAod3JhcCA9PT0gMCkgeyAgICAgICAgICAgIC8qIGFscmVhZHkgZW1wdHkgb3RoZXJ3aXNlICovCiAgICAgICAgLyoqKiBDTEVBUl9IQVNIKHMpOyAqKiovCiAgICAgICAgemVybyhzLmhlYWQpOyAvLyBGaWxsIHdpdGggTklMICg9IDApOwogICAgICAgIHMuc3Ryc3RhcnQgPSAwOwogICAgICAgIHMuYmxvY2tfc3RhcnQgPSAwOwogICAgICAgIHMuaW5zZXJ0ID0gMDsKICAgICAgfQogICAgICAvKiB1c2UgdGhlIHRhaWwgKi8KICAgICAgLy8gZGljdGlvbmFyeSA9IGRpY3Rpb25hcnkuc2xpY2UoZGljdExlbmd0aCAtIHMud19zaXplKTsKICAgICAgbGV0IHRtcERpY3QgPSBuZXcgVWludDhBcnJheShzLndfc2l6ZSk7CiAgICAgIHRtcERpY3Quc2V0KGRpY3Rpb25hcnkuc3ViYXJyYXkoZGljdExlbmd0aCAtIHMud19zaXplLCBkaWN0TGVuZ3RoKSwgMCk7CiAgICAgIGRpY3Rpb25hcnkgPSB0bXBEaWN0OwogICAgICBkaWN0TGVuZ3RoID0gcy53X3NpemU7CiAgICB9CiAgICAvKiBpbnNlcnQgZGljdGlvbmFyeSBpbnRvIHdpbmRvdyBhbmQgaGFzaCAqLwogICAgY29uc3QgYXZhaWwgPSBzdHJtLmF2YWlsX2luOwogICAgY29uc3QgbmV4dCA9IHN0cm0ubmV4dF9pbjsKICAgIGNvbnN0IGlucHV0ID0gc3RybS5pbnB1dDsKICAgIHN0cm0uYXZhaWxfaW4gPSBkaWN0TGVuZ3RoOwogICAgc3RybS5uZXh0X2luID0gMDsKICAgIHN0cm0uaW5wdXQgPSBkaWN0aW9uYXJ5OwogICAgZmlsbF93aW5kb3cocyk7CiAgICB3aGlsZSAocy5sb29rYWhlYWQgPj0gTUlOX01BVENIKSB7CiAgICAgIGxldCBzdHIgPSBzLnN0cnN0YXJ0OwogICAgICBsZXQgbiA9IHMubG9va2FoZWFkIC0gKE1JTl9NQVRDSCAtIDEpOwogICAgICBkbyB7CiAgICAgICAgLyogVVBEQVRFX0hBU0gocywgcy0+aW5zX2gsIHMtPndpbmRvd1tzdHIgKyBNSU5fTUFUQ0gtMV0pOyAqLwogICAgICAgIHMuaW5zX2ggPSBIQVNIKHMsIHMuaW5zX2gsIHMud2luZG93W3N0ciArIE1JTl9NQVRDSCAtIDFdKTsKCiAgICAgICAgcy5wcmV2W3N0ciAmIHMud19tYXNrXSA9IHMuaGVhZFtzLmluc19oXTsKCiAgICAgICAgcy5oZWFkW3MuaW5zX2hdID0gc3RyOwogICAgICAgIHN0cisrOwogICAgICB9IHdoaWxlICgtLW4pOwogICAgICBzLnN0cnN0YXJ0ID0gc3RyOwogICAgICBzLmxvb2thaGVhZCA9IE1JTl9NQVRDSCAtIDE7CiAgICAgIGZpbGxfd2luZG93KHMpOwogICAgfQogICAgcy5zdHJzdGFydCArPSBzLmxvb2thaGVhZDsKICAgIHMuYmxvY2tfc3RhcnQgPSBzLnN0cnN0YXJ0OwogICAgcy5pbnNlcnQgPSBzLmxvb2thaGVhZDsKICAgIHMubG9va2FoZWFkID0gMDsKICAgIHMubWF0Y2hfbGVuZ3RoID0gcy5wcmV2X2xlbmd0aCA9IE1JTl9NQVRDSCAtIDE7CiAgICBzLm1hdGNoX2F2YWlsYWJsZSA9IDA7CiAgICBzdHJtLm5leHRfaW4gPSBuZXh0OwogICAgc3RybS5pbnB1dCA9IGlucHV0OwogICAgc3RybS5hdmFpbF9pbiA9IGF2YWlsOwogICAgcy53cmFwID0gd3JhcDsKICAgIHJldHVybiBaX09LJDM7CiAgfTsKCgogIHZhciBkZWZsYXRlSW5pdF8xID0gZGVmbGF0ZUluaXQ7CiAgdmFyIGRlZmxhdGVJbml0Ml8xID0gZGVmbGF0ZUluaXQyOwogIHZhciBkZWZsYXRlUmVzZXRfMSA9IGRlZmxhdGVSZXNldDsKICB2YXIgZGVmbGF0ZVJlc2V0S2VlcF8xID0gZGVmbGF0ZVJlc2V0S2VlcDsKICB2YXIgZGVmbGF0ZVNldEhlYWRlcl8xID0gZGVmbGF0ZVNldEhlYWRlcjsKICB2YXIgZGVmbGF0ZV8yJDEgPSBkZWZsYXRlJDI7CiAgdmFyIGRlZmxhdGVFbmRfMSA9IGRlZmxhdGVFbmQ7CiAgdmFyIGRlZmxhdGVTZXREaWN0aW9uYXJ5XzEgPSBkZWZsYXRlU2V0RGljdGlvbmFyeTsKICB2YXIgZGVmbGF0ZUluZm8gPSAncGFrbyBkZWZsYXRlIChmcm9tIE5vZGVjYSBwcm9qZWN0KSc7CgogIC8qIE5vdCBpbXBsZW1lbnRlZAogIG1vZHVsZS5leHBvcnRzLmRlZmxhdGVCb3VuZCA9IGRlZmxhdGVCb3VuZDsKICBtb2R1bGUuZXhwb3J0cy5kZWZsYXRlQ29weSA9IGRlZmxhdGVDb3B5OwogIG1vZHVsZS5leHBvcnRzLmRlZmxhdGVQYXJhbXMgPSBkZWZsYXRlUGFyYW1zOwogIG1vZHVsZS5leHBvcnRzLmRlZmxhdGVQZW5kaW5nID0gZGVmbGF0ZVBlbmRpbmc7CiAgbW9kdWxlLmV4cG9ydHMuZGVmbGF0ZVByaW1lID0gZGVmbGF0ZVByaW1lOwogIG1vZHVsZS5leHBvcnRzLmRlZmxhdGVUdW5lID0gZGVmbGF0ZVR1bmU7CiAgKi8KCiAgdmFyIGRlZmxhdGVfMSQyID0gewogIAlkZWZsYXRlSW5pdDogZGVmbGF0ZUluaXRfMSwKICAJZGVmbGF0ZUluaXQyOiBkZWZsYXRlSW5pdDJfMSwKICAJZGVmbGF0ZVJlc2V0OiBkZWZsYXRlUmVzZXRfMSwKICAJZGVmbGF0ZVJlc2V0S2VlcDogZGVmbGF0ZVJlc2V0S2VlcF8xLAogIAlkZWZsYXRlU2V0SGVhZGVyOiBkZWZsYXRlU2V0SGVhZGVyXzEsCiAgCWRlZmxhdGU6IGRlZmxhdGVfMiQxLAogIAlkZWZsYXRlRW5kOiBkZWZsYXRlRW5kXzEsCiAgCWRlZmxhdGVTZXREaWN0aW9uYXJ5OiBkZWZsYXRlU2V0RGljdGlvbmFyeV8xLAogIAlkZWZsYXRlSW5mbzogZGVmbGF0ZUluZm8KICB9OwoKICBjb25zdCBfaGFzID0gKG9iaiwga2V5KSA9PiB7CiAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KTsKICB9OwoKICB2YXIgYXNzaWduID0gZnVuY3Rpb24gKG9iaiAvKmZyb20xLCBmcm9tMiwgZnJvbTMsIC4uLiovKSB7CiAgICBjb25zdCBzb3VyY2VzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTsKICAgIHdoaWxlIChzb3VyY2VzLmxlbmd0aCkgewogICAgICBjb25zdCBzb3VyY2UgPSBzb3VyY2VzLnNoaWZ0KCk7CiAgICAgIGlmICghc291cmNlKSB7IGNvbnRpbnVlOyB9CgogICAgICBpZiAodHlwZW9mIHNvdXJjZSAhPT0gJ29iamVjdCcpIHsKICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHNvdXJjZSArICdtdXN0IGJlIG5vbi1vYmplY3QnKTsKICAgICAgfQoKICAgICAgZm9yIChjb25zdCBwIGluIHNvdXJjZSkgewogICAgICAgIGlmIChfaGFzKHNvdXJjZSwgcCkpIHsKICAgICAgICAgIG9ialtwXSA9IHNvdXJjZVtwXTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gb2JqOwogIH07CgoKICAvLyBKb2luIGFycmF5IG9mIGNodW5rcyB0byBzaW5nbGUgYXJyYXkuCiAgdmFyIGZsYXR0ZW5DaHVua3MgPSAoY2h1bmtzKSA9PiB7CiAgICAvLyBjYWxjdWxhdGUgZGF0YSBsZW5ndGgKICAgIGxldCBsZW4gPSAwOwoKICAgIGZvciAobGV0IGkgPSAwLCBsID0gY2h1bmtzLmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgICBsZW4gKz0gY2h1bmtzW2ldLmxlbmd0aDsKICAgIH0KCiAgICAvLyBqb2luIGNodW5rcwogICAgY29uc3QgcmVzdWx0ID0gbmV3IFVpbnQ4QXJyYXkobGVuKTsKCiAgICBmb3IgKGxldCBpID0gMCwgcG9zID0gMCwgbCA9IGNodW5rcy5sZW5ndGg7IGkgPCBsOyBpKyspIHsKICAgICAgbGV0IGNodW5rID0gY2h1bmtzW2ldOwogICAgICByZXN1bHQuc2V0KGNodW5rLCBwb3MpOwogICAgICBwb3MgKz0gY2h1bmsubGVuZ3RoOwogICAgfQoKICAgIHJldHVybiByZXN1bHQ7CiAgfTsKCiAgdmFyIGNvbW1vbiA9IHsKICAJYXNzaWduOiBhc3NpZ24sCiAgCWZsYXR0ZW5DaHVua3M6IGZsYXR0ZW5DaHVua3MKICB9OwoKICAvLyBTdHJpbmcgZW5jb2RlL2RlY29kZSBoZWxwZXJzCgoKICAvLyBRdWljayBjaGVjayBpZiB3ZSBjYW4gdXNlIGZhc3QgYXJyYXkgdG8gYmluIHN0cmluZyBjb252ZXJzaW9uCiAgLy8KICAvLyAtIGFwcGx5KEFycmF5KSBjYW4gZmFpbCBvbiBBbmRyb2lkIDIuMgogIC8vIC0gYXBwbHkoVWludDhBcnJheSkgY2FuIGZhaWwgb24gaU9TIDUuMSBTYWZhcmkKICAvLwogIGxldCBTVFJfQVBQTFlfVUlBX09LID0gdHJ1ZTsKCiAgdHJ5IHsgU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLCBuZXcgVWludDhBcnJheSgxKSk7IH0gY2F0Y2ggKF9fKSB7IFNUUl9BUFBMWV9VSUFfT0sgPSBmYWxzZTsgfQoKCiAgLy8gVGFibGUgd2l0aCB1dGY4IGxlbmd0aHMgKGNhbGN1bGF0ZWQgYnkgZmlyc3QgYnl0ZSBvZiBzZXF1ZW5jZSkKICAvLyBOb3RlLCB0aGF0IDUgJiA2LWJ5dGUgdmFsdWVzIGFuZCBzb21lIDQtYnl0ZSB2YWx1ZXMgY2FuIG5vdCBiZSByZXByZXNlbnRlZCBpbiBKUywKICAvLyBiZWNhdXNlIG1heCBwb3NzaWJsZSBjb2RlcG9pbnQgaXMgMHgxMGZmZmYKICBjb25zdCBfdXRmOGxlbiA9IG5ldyBVaW50OEFycmF5KDI1Nik7CiAgZm9yIChsZXQgcSA9IDA7IHEgPCAyNTY7IHErKykgewogICAgX3V0ZjhsZW5bcV0gPSAocSA+PSAyNTIgPyA2IDogcSA+PSAyNDggPyA1IDogcSA+PSAyNDAgPyA0IDogcSA+PSAyMjQgPyAzIDogcSA+PSAxOTIgPyAyIDogMSk7CiAgfQogIF91dGY4bGVuWzI1NF0gPSBfdXRmOGxlblsyNTRdID0gMTsgLy8gSW52YWxpZCBzZXF1ZW5jZSBzdGFydAoKCiAgLy8gY29udmVydCBzdHJpbmcgdG8gYXJyYXkgKHR5cGVkLCB3aGVuIHBvc3NpYmxlKQogIHZhciBzdHJpbmcyYnVmID0gKHN0cikgPT4gewogICAgaWYgKHR5cGVvZiBUZXh0RW5jb2RlciA9PT0gJ2Z1bmN0aW9uJyAmJiBUZXh0RW5jb2Rlci5wcm90b3R5cGUuZW5jb2RlKSB7CiAgICAgIHJldHVybiBuZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUoc3RyKTsKICAgIH0KCiAgICBsZXQgYnVmLCBjLCBjMiwgbV9wb3MsIGksIHN0cl9sZW4gPSBzdHIubGVuZ3RoLCBidWZfbGVuID0gMDsKCiAgICAvLyBjb3VudCBiaW5hcnkgc2l6ZQogICAgZm9yIChtX3BvcyA9IDA7IG1fcG9zIDwgc3RyX2xlbjsgbV9wb3MrKykgewogICAgICBjID0gc3RyLmNoYXJDb2RlQXQobV9wb3MpOwogICAgICBpZiAoKGMgJiAweGZjMDApID09PSAweGQ4MDAgJiYgKG1fcG9zICsgMSA8IHN0cl9sZW4pKSB7CiAgICAgICAgYzIgPSBzdHIuY2hhckNvZGVBdChtX3BvcyArIDEpOwogICAgICAgIGlmICgoYzIgJiAweGZjMDApID09PSAweGRjMDApIHsKICAgICAgICAgIGMgPSAweDEwMDAwICsgKChjIC0gMHhkODAwKSA8PCAxMCkgKyAoYzIgLSAweGRjMDApOwogICAgICAgICAgbV9wb3MrKzsKICAgICAgICB9CiAgICAgIH0KICAgICAgYnVmX2xlbiArPSBjIDwgMHg4MCA/IDEgOiBjIDwgMHg4MDAgPyAyIDogYyA8IDB4MTAwMDAgPyAzIDogNDsKICAgIH0KCiAgICAvLyBhbGxvY2F0ZSBidWZmZXIKICAgIGJ1ZiA9IG5ldyBVaW50OEFycmF5KGJ1Zl9sZW4pOwoKICAgIC8vIGNvbnZlcnQKICAgIGZvciAoaSA9IDAsIG1fcG9zID0gMDsgaSA8IGJ1Zl9sZW47IG1fcG9zKyspIHsKICAgICAgYyA9IHN0ci5jaGFyQ29kZUF0KG1fcG9zKTsKICAgICAgaWYgKChjICYgMHhmYzAwKSA9PT0gMHhkODAwICYmIChtX3BvcyArIDEgPCBzdHJfbGVuKSkgewogICAgICAgIGMyID0gc3RyLmNoYXJDb2RlQXQobV9wb3MgKyAxKTsKICAgICAgICBpZiAoKGMyICYgMHhmYzAwKSA9PT0gMHhkYzAwKSB7CiAgICAgICAgICBjID0gMHgxMDAwMCArICgoYyAtIDB4ZDgwMCkgPDwgMTApICsgKGMyIC0gMHhkYzAwKTsKICAgICAgICAgIG1fcG9zKys7CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmIChjIDwgMHg4MCkgewogICAgICAgIC8qIG9uZSBieXRlICovCiAgICAgICAgYnVmW2krK10gPSBjOwogICAgICB9IGVsc2UgaWYgKGMgPCAweDgwMCkgewogICAgICAgIC8qIHR3byBieXRlcyAqLwogICAgICAgIGJ1ZltpKytdID0gMHhDMCB8IChjID4+PiA2KTsKICAgICAgICBidWZbaSsrXSA9IDB4ODAgfCAoYyAmIDB4M2YpOwogICAgICB9IGVsc2UgaWYgKGMgPCAweDEwMDAwKSB7CiAgICAgICAgLyogdGhyZWUgYnl0ZXMgKi8KICAgICAgICBidWZbaSsrXSA9IDB4RTAgfCAoYyA+Pj4gMTIpOwogICAgICAgIGJ1ZltpKytdID0gMHg4MCB8IChjID4+PiA2ICYgMHgzZik7CiAgICAgICAgYnVmW2krK10gPSAweDgwIHwgKGMgJiAweDNmKTsKICAgICAgfSBlbHNlIHsKICAgICAgICAvKiBmb3VyIGJ5dGVzICovCiAgICAgICAgYnVmW2krK10gPSAweGYwIHwgKGMgPj4+IDE4KTsKICAgICAgICBidWZbaSsrXSA9IDB4ODAgfCAoYyA+Pj4gMTIgJiAweDNmKTsKICAgICAgICBidWZbaSsrXSA9IDB4ODAgfCAoYyA+Pj4gNiAmIDB4M2YpOwogICAgICAgIGJ1ZltpKytdID0gMHg4MCB8IChjICYgMHgzZik7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gYnVmOwogIH07CgogIC8vIEhlbHBlcgogIGNvbnN0IGJ1ZjJiaW5zdHJpbmcgPSAoYnVmLCBsZW4pID0+IHsKICAgIC8vIE9uIENocm9tZSwgdGhlIGFyZ3VtZW50cyBpbiBhIGZ1bmN0aW9uIGNhbGwgdGhhdCBhcmUgYWxsb3dlZCBpcyBgNjU1MzRgLgogICAgLy8gSWYgdGhlIGxlbmd0aCBvZiB0aGUgYnVmZmVyIGlzIHNtYWxsZXIgdGhhbiB0aGF0LCB3ZSBjYW4gdXNlIHRoaXMgb3B0aW1pemF0aW9uLAogICAgLy8gb3RoZXJ3aXNlIHdlIHdpbGwgdGFrZSBhIHNsb3dlciBwYXRoLgogICAgaWYgKGxlbiA8IDY1NTM0KSB7CiAgICAgIGlmIChidWYuc3ViYXJyYXkgJiYgU1RSX0FQUExZX1VJQV9PSykgewogICAgICAgIHJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsIGJ1Zi5sZW5ndGggPT09IGxlbiA/IGJ1ZiA6IGJ1Zi5zdWJhcnJheSgwLCBsZW4pKTsKICAgICAgfQogICAgfQoKICAgIGxldCByZXN1bHQgPSAnJzsKICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyBpKyspIHsKICAgICAgcmVzdWx0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYnVmW2ldKTsKICAgIH0KICAgIHJldHVybiByZXN1bHQ7CiAgfTsKCgogIC8vIGNvbnZlcnQgYXJyYXkgdG8gc3RyaW5nCiAgdmFyIGJ1ZjJzdHJpbmcgPSAoYnVmLCBtYXgpID0+IHsKICAgIGNvbnN0IGxlbiA9IG1heCB8fCBidWYubGVuZ3RoOwoKICAgIGlmICh0eXBlb2YgVGV4dERlY29kZXIgPT09ICdmdW5jdGlvbicgJiYgVGV4dERlY29kZXIucHJvdG90eXBlLmRlY29kZSkgewogICAgICByZXR1cm4gbmV3IFRleHREZWNvZGVyKCkuZGVjb2RlKGJ1Zi5zdWJhcnJheSgwLCBtYXgpKTsKICAgIH0KCiAgICBsZXQgaSwgb3V0OwoKICAgIC8vIFJlc2VydmUgbWF4IHBvc3NpYmxlIGxlbmd0aCAoMiB3b3JkcyBwZXIgY2hhcikKICAgIC8vIE5COiBieSB1bmtub3duIHJlYXNvbnMsIEFycmF5IGlzIHNpZ25pZmljYW50bHkgZmFzdGVyIGZvcgogICAgLy8gICAgIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkgdGhhbiBVaW50MTZBcnJheS4KICAgIGNvbnN0IHV0ZjE2YnVmID0gbmV3IEFycmF5KGxlbiAqIDIpOwoKICAgIGZvciAob3V0ID0gMCwgaSA9IDA7IGkgPCBsZW47KSB7CiAgICAgIGxldCBjID0gYnVmW2krK107CiAgICAgIC8vIHF1aWNrIHByb2Nlc3MgYXNjaWkKICAgICAgaWYgKGMgPCAweDgwKSB7IHV0ZjE2YnVmW291dCsrXSA9IGM7IGNvbnRpbnVlOyB9CgogICAgICBsZXQgY19sZW4gPSBfdXRmOGxlbltjXTsKICAgICAgLy8gc2tpcCA1ICYgNiBieXRlIGNvZGVzCiAgICAgIGlmIChjX2xlbiA+IDQpIHsgdXRmMTZidWZbb3V0KytdID0gMHhmZmZkOyBpICs9IGNfbGVuIC0gMTsgY29udGludWU7IH0KCiAgICAgIC8vIGFwcGx5IG1hc2sgb24gZmlyc3QgYnl0ZQogICAgICBjICY9IGNfbGVuID09PSAyID8gMHgxZiA6IGNfbGVuID09PSAzID8gMHgwZiA6IDB4MDc7CiAgICAgIC8vIGpvaW4gdGhlIHJlc3QKICAgICAgd2hpbGUgKGNfbGVuID4gMSAmJiBpIDwgbGVuKSB7CiAgICAgICAgYyA9IChjIDw8IDYpIHwgKGJ1ZltpKytdICYgMHgzZik7CiAgICAgICAgY19sZW4tLTsKICAgICAgfQoKICAgICAgLy8gdGVybWluYXRlZCBieSBlbmQgb2Ygc3RyaW5nPwogICAgICBpZiAoY19sZW4gPiAxKSB7IHV0ZjE2YnVmW291dCsrXSA9IDB4ZmZmZDsgY29udGludWU7IH0KCiAgICAgIGlmIChjIDwgMHgxMDAwMCkgewogICAgICAgIHV0ZjE2YnVmW291dCsrXSA9IGM7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgYyAtPSAweDEwMDAwOwogICAgICAgIHV0ZjE2YnVmW291dCsrXSA9IDB4ZDgwMCB8ICgoYyA+PiAxMCkgJiAweDNmZik7CiAgICAgICAgdXRmMTZidWZbb3V0KytdID0gMHhkYzAwIHwgKGMgJiAweDNmZik7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gYnVmMmJpbnN0cmluZyh1dGYxNmJ1Ziwgb3V0KTsKICB9OwoKCiAgLy8gQ2FsY3VsYXRlIG1heCBwb3NzaWJsZSBwb3NpdGlvbiBpbiB1dGY4IGJ1ZmZlciwKICAvLyB0aGF0IHdpbGwgbm90IGJyZWFrIHNlcXVlbmNlLiBJZiB0aGF0J3Mgbm90IHBvc3NpYmxlCiAgLy8gLSAodmVyeSBzbWFsbCBsaW1pdHMpIHJldHVybiBtYXggc2l6ZSBhcyBpcy4KICAvLwogIC8vIGJ1ZltdIC0gdXRmOCBieXRlcyBhcnJheQogIC8vIG1heCAgIC0gbGVuZ3RoIGxpbWl0IChtYW5kYXRvcnkpOwogIHZhciB1dGY4Ym9yZGVyID0gKGJ1ZiwgbWF4KSA9PiB7CgogICAgbWF4ID0gbWF4IHx8IGJ1Zi5sZW5ndGg7CiAgICBpZiAobWF4ID4gYnVmLmxlbmd0aCkgeyBtYXggPSBidWYubGVuZ3RoOyB9CgogICAgLy8gZ28gYmFjayBmcm9tIGxhc3QgcG9zaXRpb24sIHVudGlsIHN0YXJ0IG9mIHNlcXVlbmNlIGZvdW5kCiAgICBsZXQgcG9zID0gbWF4IC0gMTsKICAgIHdoaWxlIChwb3MgPj0gMCAmJiAoYnVmW3Bvc10gJiAweEMwKSA9PT0gMHg4MCkgeyBwb3MtLTsgfQoKICAgIC8vIFZlcnkgc21hbGwgYW5kIGJyb2tlbiBzZXF1ZW5jZSwKICAgIC8vIHJldHVybiBtYXgsIGJlY2F1c2Ugd2Ugc2hvdWxkIHJldHVybiBzb21ldGhpbmcgYW55d2F5LgogICAgaWYgKHBvcyA8IDApIHsgcmV0dXJuIG1heDsgfQoKICAgIC8vIElmIHdlIGNhbWUgdG8gc3RhcnQgb2YgYnVmZmVyIC0gdGhhdCBtZWFucyBidWZmZXIgaXMgdG9vIHNtYWxsLAogICAgLy8gcmV0dXJuIG1heCB0b28uCiAgICBpZiAocG9zID09PSAwKSB7IHJldHVybiBtYXg7IH0KCiAgICByZXR1cm4gKHBvcyArIF91dGY4bGVuW2J1Zltwb3NdXSA+IG1heCkgPyBwb3MgOiBtYXg7CiAgfTsKCiAgdmFyIHN0cmluZ3MgPSB7CiAgCXN0cmluZzJidWY6IHN0cmluZzJidWYsCiAgCWJ1ZjJzdHJpbmc6IGJ1ZjJzdHJpbmcsCiAgCXV0Zjhib3JkZXI6IHV0Zjhib3JkZXIKICB9OwoKICAvLyAoQykgMTk5NS0yMDEzIEplYW4tbG91cCBHYWlsbHkgYW5kIE1hcmsgQWRsZXIKICAvLyAoQykgMjAxNC0yMDE3IFZpdGFseSBQdXpyaW4gYW5kIEFuZHJleSBUdXBpdHNpbgogIC8vCiAgLy8gVGhpcyBzb2Z0d2FyZSBpcyBwcm92aWRlZCAnYXMtaXMnLCB3aXRob3V0IGFueSBleHByZXNzIG9yIGltcGxpZWQKICAvLyB3YXJyYW50eS4gSW4gbm8gZXZlbnQgd2lsbCB0aGUgYXV0aG9ycyBiZSBoZWxkIGxpYWJsZSBmb3IgYW55IGRhbWFnZXMKICAvLyBhcmlzaW5nIGZyb20gdGhlIHVzZSBvZiB0aGlzIHNvZnR3YXJlLgogIC8vCiAgLy8gUGVybWlzc2lvbiBpcyBncmFudGVkIHRvIGFueW9uZSB0byB1c2UgdGhpcyBzb2Z0d2FyZSBmb3IgYW55IHB1cnBvc2UsCiAgLy8gaW5jbHVkaW5nIGNvbW1lcmNpYWwgYXBwbGljYXRpb25zLCBhbmQgdG8gYWx0ZXIgaXQgYW5kIHJlZGlzdHJpYnV0ZSBpdAogIC8vIGZyZWVseSwgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIHJlc3RyaWN0aW9uczoKICAvLwogIC8vIDEuIFRoZSBvcmlnaW4gb2YgdGhpcyBzb2Z0d2FyZSBtdXN0IG5vdCBiZSBtaXNyZXByZXNlbnRlZDsgeW91IG11c3Qgbm90CiAgLy8gICBjbGFpbSB0aGF0IHlvdSB3cm90ZSB0aGUgb3JpZ2luYWwgc29mdHdhcmUuIElmIHlvdSB1c2UgdGhpcyBzb2Z0d2FyZQogIC8vICAgaW4gYSBwcm9kdWN0LCBhbiBhY2tub3dsZWRnbWVudCBpbiB0aGUgcHJvZHVjdCBkb2N1bWVudGF0aW9uIHdvdWxkIGJlCiAgLy8gICBhcHByZWNpYXRlZCBidXQgaXMgbm90IHJlcXVpcmVkLgogIC8vIDIuIEFsdGVyZWQgc291cmNlIHZlcnNpb25zIG11c3QgYmUgcGxhaW5seSBtYXJrZWQgYXMgc3VjaCwgYW5kIG11c3Qgbm90IGJlCiAgLy8gICBtaXNyZXByZXNlbnRlZCBhcyBiZWluZyB0aGUgb3JpZ2luYWwgc29mdHdhcmUuCiAgLy8gMy4gVGhpcyBub3RpY2UgbWF5IG5vdCBiZSByZW1vdmVkIG9yIGFsdGVyZWQgZnJvbSBhbnkgc291cmNlIGRpc3RyaWJ1dGlvbi4KCiAgZnVuY3Rpb24gWlN0cmVhbSgpIHsKICAgIC8qIG5leHQgaW5wdXQgYnl0ZSAqLwogICAgdGhpcy5pbnB1dCA9IG51bGw7IC8vIEpTIHNwZWNpZmljLCBiZWNhdXNlIHdlIGhhdmUgbm8gcG9pbnRlcnMKICAgIHRoaXMubmV4dF9pbiA9IDA7CiAgICAvKiBudW1iZXIgb2YgYnl0ZXMgYXZhaWxhYmxlIGF0IGlucHV0ICovCiAgICB0aGlzLmF2YWlsX2luID0gMDsKICAgIC8qIHRvdGFsIG51bWJlciBvZiBpbnB1dCBieXRlcyByZWFkIHNvIGZhciAqLwogICAgdGhpcy50b3RhbF9pbiA9IDA7CiAgICAvKiBuZXh0IG91dHB1dCBieXRlIHNob3VsZCBiZSBwdXQgdGhlcmUgKi8KICAgIHRoaXMub3V0cHV0ID0gbnVsbDsgLy8gSlMgc3BlY2lmaWMsIGJlY2F1c2Ugd2UgaGF2ZSBubyBwb2ludGVycwogICAgdGhpcy5uZXh0X291dCA9IDA7CiAgICAvKiByZW1haW5pbmcgZnJlZSBzcGFjZSBhdCBvdXRwdXQgKi8KICAgIHRoaXMuYXZhaWxfb3V0ID0gMDsKICAgIC8qIHRvdGFsIG51bWJlciBvZiBieXRlcyBvdXRwdXQgc28gZmFyICovCiAgICB0aGlzLnRvdGFsX291dCA9IDA7CiAgICAvKiBsYXN0IGVycm9yIG1lc3NhZ2UsIE5VTEwgaWYgbm8gZXJyb3IgKi8KICAgIHRoaXMubXNnID0gJycvKlpfTlVMTCovOwogICAgLyogbm90IHZpc2libGUgYnkgYXBwbGljYXRpb25zICovCiAgICB0aGlzLnN0YXRlID0gbnVsbDsKICAgIC8qIGJlc3QgZ3Vlc3MgYWJvdXQgdGhlIGRhdGEgdHlwZTogYmluYXJ5IG9yIHRleHQgKi8KICAgIHRoaXMuZGF0YV90eXBlID0gMi8qWl9VTktOT1dOKi87CiAgICAvKiBhZGxlcjMyIHZhbHVlIG9mIHRoZSB1bmNvbXByZXNzZWQgZGF0YSAqLwogICAgdGhpcy5hZGxlciA9IDA7CiAgfQoKICB2YXIgenN0cmVhbSA9IFpTdHJlYW07CgogIGNvbnN0IHRvU3RyaW5nJDEgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nOwoKICAvKiBQdWJsaWMgY29uc3RhbnRzID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qLwogIC8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovCgogIGNvbnN0IHsKICAgIFpfTk9fRkxVU0g6IFpfTk9fRkxVU0gkMSwgWl9TWU5DX0ZMVVNILCBaX0ZVTExfRkxVU0gsIFpfRklOSVNIOiBaX0ZJTklTSCQyLAogICAgWl9PSzogWl9PSyQyLCBaX1NUUkVBTV9FTkQ6IFpfU1RSRUFNX0VORCQyLAogICAgWl9ERUZBVUxUX0NPTVBSRVNTSU9OLAogICAgWl9ERUZBVUxUX1NUUkFURUdZLAogICAgWl9ERUZMQVRFRDogWl9ERUZMQVRFRCQxCiAgfSA9IGNvbnN0YW50cyQyOwoKICAvKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qLwoKCiAgLyoqCiAgICogY2xhc3MgRGVmbGF0ZQogICAqCiAgICogR2VuZXJpYyBKUy1zdHlsZSB3cmFwcGVyIGZvciB6bGliIGNhbGxzLiBJZiB5b3UgZG9uJ3QgbmVlZAogICAqIHN0cmVhbWluZyBiZWhhdmlvdXIgLSB1c2UgbW9yZSBzaW1wbGUgZnVuY3Rpb25zOiBbW2RlZmxhdGVdXSwKICAgKiBbW2RlZmxhdGVSYXddXSBhbmQgW1tnemlwXV0uCiAgICoqLwoKICAvKiBpbnRlcm5hbAogICAqIERlZmxhdGUuY2h1bmtzIC0+IEFycmF5CiAgICoKICAgKiBDaHVua3Mgb2Ygb3V0cHV0IGRhdGEsIGlmIFtbRGVmbGF0ZSNvbkRhdGFdXSBub3Qgb3ZlcnJpZGRlbi4KICAgKiovCgogIC8qKgogICAqIERlZmxhdGUucmVzdWx0IC0+IFVpbnQ4QXJyYXkKICAgKgogICAqIENvbXByZXNzZWQgcmVzdWx0LCBnZW5lcmF0ZWQgYnkgZGVmYXVsdCBbW0RlZmxhdGUjb25EYXRhXV0KICAgKiBhbmQgW1tEZWZsYXRlI29uRW5kXV0gaGFuZGxlcnMuIEZpbGxlZCBhZnRlciB5b3UgcHVzaCBsYXN0IGNodW5rCiAgICogKGNhbGwgW1tEZWZsYXRlI3B1c2hdXSB3aXRoIGBaX0ZJTklTSGAgLyBgdHJ1ZWAgcGFyYW0pLgogICAqKi8KCiAgLyoqCiAgICogRGVmbGF0ZS5lcnIgLT4gTnVtYmVyCiAgICoKICAgKiBFcnJvciBjb2RlIGFmdGVyIGRlZmxhdGUgZmluaXNoZWQuIDAgKFpfT0spIG9uIHN1Y2Nlc3MuCiAgICogWW91IHdpbGwgbm90IG5lZWQgaXQgaW4gcmVhbCBsaWZlLCBiZWNhdXNlIGRlZmxhdGUgZXJyb3JzCiAgICogYXJlIHBvc3NpYmxlIG9ubHkgb24gd3Jvbmcgb3B0aW9ucyBvciBiYWQgYG9uRGF0YWAgLyBgb25FbmRgCiAgICogY3VzdG9tIGhhbmRsZXJzLgogICAqKi8KCiAgLyoqCiAgICogRGVmbGF0ZS5tc2cgLT4gU3RyaW5nCiAgICoKICAgKiBFcnJvciBtZXNzYWdlLCBpZiBbW0RlZmxhdGUuZXJyXV0gIT0gMAogICAqKi8KCgogIC8qKgogICAqIG5ldyBEZWZsYXRlKG9wdGlvbnMpCiAgICogLSBvcHRpb25zIChPYmplY3QpOiB6bGliIGRlZmxhdGUgb3B0aW9ucy4KICAgKgogICAqIENyZWF0ZXMgbmV3IGRlZmxhdG9yIGluc3RhbmNlIHdpdGggc3BlY2lmaWVkIHBhcmFtcy4gVGhyb3dzIGV4Y2VwdGlvbgogICAqIG9uIGJhZCBwYXJhbXMuIFN1cHBvcnRlZCBvcHRpb25zOgogICAqCiAgICogLSBgbGV2ZWxgCiAgICogLSBgd2luZG93Qml0c2AKICAgKiAtIGBtZW1MZXZlbGAKICAgKiAtIGBzdHJhdGVneWAKICAgKiAtIGBkaWN0aW9uYXJ5YAogICAqCiAgICogW2h0dHA6Ly96bGliLm5ldC9tYW51YWwuaHRtbCNBZHZhbmNlZF0oaHR0cDovL3psaWIubmV0L21hbnVhbC5odG1sI0FkdmFuY2VkKQogICAqIGZvciBtb3JlIGluZm9ybWF0aW9uIG9uIHRoZXNlLgogICAqCiAgICogQWRkaXRpb25hbCBvcHRpb25zLCBmb3IgaW50ZXJuYWwgbmVlZHM6CiAgICoKICAgKiAtIGBjaHVua1NpemVgIC0gc2l6ZSBvZiBnZW5lcmF0ZWQgZGF0YSBjaHVua3MgKDE2SyBieSBkZWZhdWx0KQogICAqIC0gYHJhd2AgKEJvb2xlYW4pIC0gZG8gcmF3IGRlZmxhdGUKICAgKiAtIGBnemlwYCAoQm9vbGVhbikgLSBjcmVhdGUgZ3ppcCB3cmFwcGVyCiAgICogLSBgaGVhZGVyYCAoT2JqZWN0KSAtIGN1c3RvbSBoZWFkZXIgZm9yIGd6aXAKICAgKiAgIC0gYHRleHRgIChCb29sZWFuKSAtIHRydWUgaWYgY29tcHJlc3NlZCBkYXRhIGJlbGlldmVkIHRvIGJlIHRleHQKICAgKiAgIC0gYHRpbWVgIChOdW1iZXIpIC0gbW9kaWZpY2F0aW9uIHRpbWUsIHVuaXggdGltZXN0YW1wCiAgICogICAtIGBvc2AgKE51bWJlcikgLSBvcGVyYXRpb24gc3lzdGVtIGNvZGUKICAgKiAgIC0gYGV4dHJhYCAoQXJyYXkpIC0gYXJyYXkgb2YgYnl0ZXMgd2l0aCBleHRyYSBkYXRhIChtYXggNjU1MzYpCiAgICogICAtIGBuYW1lYCAoU3RyaW5nKSAtIGZpbGUgbmFtZSAoYmluYXJ5IHN0cmluZykKICAgKiAgIC0gYGNvbW1lbnRgIChTdHJpbmcpIC0gY29tbWVudCAoYmluYXJ5IHN0cmluZykKICAgKiAgIC0gYGhjcmNgIChCb29sZWFuKSAtIHRydWUgaWYgaGVhZGVyIGNyYyBzaG91bGQgYmUgYWRkZWQKICAgKgogICAqICMjIyMjIEV4YW1wbGU6CiAgICoKICAgKiBgYGBqYXZhc2NyaXB0CiAgICogY29uc3QgcGFrbyA9IHJlcXVpcmUoJ3Bha28nKQogICAqICAgLCBjaHVuazEgPSBuZXcgVWludDhBcnJheShbMSwyLDMsNCw1LDYsNyw4LDldKQogICAqICAgLCBjaHVuazIgPSBuZXcgVWludDhBcnJheShbMTAsMTEsMTIsMTMsMTQsMTUsMTYsMTcsMTgsMTldKTsKICAgKgogICAqIGNvbnN0IGRlZmxhdGUgPSBuZXcgcGFrby5EZWZsYXRlKHsgbGV2ZWw6IDN9KTsKICAgKgogICAqIGRlZmxhdGUucHVzaChjaHVuazEsIGZhbHNlKTsKICAgKiBkZWZsYXRlLnB1c2goY2h1bmsyLCB0cnVlKTsgIC8vIHRydWUgLT4gbGFzdCBjaHVuawogICAqCiAgICogaWYgKGRlZmxhdGUuZXJyKSB7IHRocm93IG5ldyBFcnJvcihkZWZsYXRlLmVycik7IH0KICAgKgogICAqIGNvbnNvbGUubG9nKGRlZmxhdGUucmVzdWx0KTsKICAgKiBgYGAKICAgKiovCiAgZnVuY3Rpb24gRGVmbGF0ZSQxKG9wdGlvbnMpIHsKICAgIHRoaXMub3B0aW9ucyA9IGNvbW1vbi5hc3NpZ24oewogICAgICBsZXZlbDogWl9ERUZBVUxUX0NPTVBSRVNTSU9OLAogICAgICBtZXRob2Q6IFpfREVGTEFURUQkMSwKICAgICAgY2h1bmtTaXplOiAxNjM4NCwKICAgICAgd2luZG93Qml0czogMTUsCiAgICAgIG1lbUxldmVsOiA4LAogICAgICBzdHJhdGVneTogWl9ERUZBVUxUX1NUUkFURUdZCiAgICB9LCBvcHRpb25zIHx8IHt9KTsKCiAgICBsZXQgb3B0ID0gdGhpcy5vcHRpb25zOwoKICAgIGlmIChvcHQucmF3ICYmIChvcHQud2luZG93Qml0cyA+IDApKSB7CiAgICAgIG9wdC53aW5kb3dCaXRzID0gLW9wdC53aW5kb3dCaXRzOwogICAgfQoKICAgIGVsc2UgaWYgKG9wdC5nemlwICYmIChvcHQud2luZG93Qml0cyA+IDApICYmIChvcHQud2luZG93Qml0cyA8IDE2KSkgewogICAgICBvcHQud2luZG93Qml0cyArPSAxNjsKICAgIH0KCiAgICB0aGlzLmVyciAgICA9IDA7ICAgICAgLy8gZXJyb3IgY29kZSwgaWYgaGFwcGVucyAoMCA9IFpfT0spCiAgICB0aGlzLm1zZyAgICA9ICcnOyAgICAgLy8gZXJyb3IgbWVzc2FnZQogICAgdGhpcy5lbmRlZCAgPSBmYWxzZTsgIC8vIHVzZWQgdG8gYXZvaWQgbXVsdGlwbGUgb25FbmQoKSBjYWxscwogICAgdGhpcy5jaHVua3MgPSBbXTsgICAgIC8vIGNodW5rcyBvZiBjb21wcmVzc2VkIGRhdGEKCiAgICB0aGlzLnN0cm0gPSBuZXcgenN0cmVhbSgpOwogICAgdGhpcy5zdHJtLmF2YWlsX291dCA9IDA7CgogICAgbGV0IHN0YXR1cyA9IGRlZmxhdGVfMSQyLmRlZmxhdGVJbml0MigKICAgICAgdGhpcy5zdHJtLAogICAgICBvcHQubGV2ZWwsCiAgICAgIG9wdC5tZXRob2QsCiAgICAgIG9wdC53aW5kb3dCaXRzLAogICAgICBvcHQubWVtTGV2ZWwsCiAgICAgIG9wdC5zdHJhdGVneQogICAgKTsKCiAgICBpZiAoc3RhdHVzICE9PSBaX09LJDIpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKG1lc3NhZ2VzW3N0YXR1c10pOwogICAgfQoKICAgIGlmIChvcHQuaGVhZGVyKSB7CiAgICAgIGRlZmxhdGVfMSQyLmRlZmxhdGVTZXRIZWFkZXIodGhpcy5zdHJtLCBvcHQuaGVhZGVyKTsKICAgIH0KCiAgICBpZiAob3B0LmRpY3Rpb25hcnkpIHsKICAgICAgbGV0IGRpY3Q7CiAgICAgIC8vIENvbnZlcnQgZGF0YSBpZiBuZWVkZWQKICAgICAgaWYgKHR5cGVvZiBvcHQuZGljdGlvbmFyeSA9PT0gJ3N0cmluZycpIHsKICAgICAgICAvLyBJZiB3ZSBuZWVkIHRvIGNvbXByZXNzIHRleHQsIGNoYW5nZSBlbmNvZGluZyB0byB1dGY4LgogICAgICAgIGRpY3QgPSBzdHJpbmdzLnN0cmluZzJidWYob3B0LmRpY3Rpb25hcnkpOwogICAgICB9IGVsc2UgaWYgKHRvU3RyaW5nJDEuY2FsbChvcHQuZGljdGlvbmFyeSkgPT09ICdbb2JqZWN0IEFycmF5QnVmZmVyXScpIHsKICAgICAgICBkaWN0ID0gbmV3IFVpbnQ4QXJyYXkob3B0LmRpY3Rpb25hcnkpOwogICAgICB9IGVsc2UgewogICAgICAgIGRpY3QgPSBvcHQuZGljdGlvbmFyeTsKICAgICAgfQoKICAgICAgc3RhdHVzID0gZGVmbGF0ZV8xJDIuZGVmbGF0ZVNldERpY3Rpb25hcnkodGhpcy5zdHJtLCBkaWN0KTsKCiAgICAgIGlmIChzdGF0dXMgIT09IFpfT0skMikgewogICAgICAgIHRocm93IG5ldyBFcnJvcihtZXNzYWdlc1tzdGF0dXNdKTsKICAgICAgfQoKICAgICAgdGhpcy5fZGljdF9zZXQgPSB0cnVlOwogICAgfQogIH0KCiAgLyoqCiAgICogRGVmbGF0ZSNwdXNoKGRhdGFbLCBmbHVzaF9tb2RlXSkgLT4gQm9vbGVhbgogICAqIC0gZGF0YSAoVWludDhBcnJheXxBcnJheUJ1ZmZlcnxTdHJpbmcpOiBpbnB1dCBkYXRhLiBTdHJpbmdzIHdpbGwgYmUKICAgKiAgIGNvbnZlcnRlZCB0byB1dGY4IGJ5dGUgc2VxdWVuY2UuCiAgICogLSBmbHVzaF9tb2RlIChOdW1iZXJ8Qm9vbGVhbik6IDAuLjYgZm9yIGNvcnJlc3BvbmRpbmcgWl9OT19GTFVTSC4uWl9UUkVFIG1vZGVzLgogICAqICAgU2VlIGNvbnN0YW50cy4gU2tpcHBlZCBvciBgZmFsc2VgIG1lYW5zIFpfTk9fRkxVU0gsIGB0cnVlYCBtZWFucyBaX0ZJTklTSC4KICAgKgogICAqIFNlbmRzIGlucHV0IGRhdGEgdG8gZGVmbGF0ZSBwaXBlLCBnZW5lcmF0aW5nIFtbRGVmbGF0ZSNvbkRhdGFdXSBjYWxscyB3aXRoCiAgICogbmV3IGNvbXByZXNzZWQgY2h1bmtzLiBSZXR1cm5zIGB0cnVlYCBvbiBzdWNjZXNzLiBUaGUgbGFzdCBkYXRhIGJsb2NrIG11c3QKICAgKiBoYXZlIGBmbHVzaF9tb2RlYCBaX0ZJTklTSCAob3IgYHRydWVgKS4gVGhhdCB3aWxsIGZsdXNoIGludGVybmFsIHBlbmRpbmcKICAgKiBidWZmZXJzIGFuZCBjYWxsIFtbRGVmbGF0ZSNvbkVuZF1dLgogICAqCiAgICogT24gZmFpbCBjYWxsIFtbRGVmbGF0ZSNvbkVuZF1dIHdpdGggZXJyb3IgY29kZSBhbmQgcmV0dXJuIGZhbHNlLgogICAqCiAgICogIyMjIyMgRXhhbXBsZQogICAqCiAgICogYGBgamF2YXNjcmlwdAogICAqIHB1c2goY2h1bmssIGZhbHNlKTsgLy8gcHVzaCBvbmUgb2YgZGF0YSBjaHVua3MKICAgKiAuLi4KICAgKiBwdXNoKGNodW5rLCB0cnVlKTsgIC8vIHB1c2ggbGFzdCBjaHVuawogICAqIGBgYAogICAqKi8KICBEZWZsYXRlJDEucHJvdG90eXBlLnB1c2ggPSBmdW5jdGlvbiAoZGF0YSwgZmx1c2hfbW9kZSkgewogICAgY29uc3Qgc3RybSA9IHRoaXMuc3RybTsKICAgIGNvbnN0IGNodW5rU2l6ZSA9IHRoaXMub3B0aW9ucy5jaHVua1NpemU7CiAgICBsZXQgc3RhdHVzLCBfZmx1c2hfbW9kZTsKCiAgICBpZiAodGhpcy5lbmRlZCkgeyByZXR1cm4gZmFsc2U7IH0KCiAgICBpZiAoZmx1c2hfbW9kZSA9PT0gfn5mbHVzaF9tb2RlKSBfZmx1c2hfbW9kZSA9IGZsdXNoX21vZGU7CiAgICBlbHNlIF9mbHVzaF9tb2RlID0gZmx1c2hfbW9kZSA9PT0gdHJ1ZSA/IFpfRklOSVNIJDIgOiBaX05PX0ZMVVNIJDE7CgogICAgLy8gQ29udmVydCBkYXRhIGlmIG5lZWRlZAogICAgaWYgKHR5cGVvZiBkYXRhID09PSAnc3RyaW5nJykgewogICAgICAvLyBJZiB3ZSBuZWVkIHRvIGNvbXByZXNzIHRleHQsIGNoYW5nZSBlbmNvZGluZyB0byB1dGY4LgogICAgICBzdHJtLmlucHV0ID0gc3RyaW5ncy5zdHJpbmcyYnVmKGRhdGEpOwogICAgfSBlbHNlIGlmICh0b1N0cmluZyQxLmNhbGwoZGF0YSkgPT09ICdbb2JqZWN0IEFycmF5QnVmZmVyXScpIHsKICAgICAgc3RybS5pbnB1dCA9IG5ldyBVaW50OEFycmF5KGRhdGEpOwogICAgfSBlbHNlIHsKICAgICAgc3RybS5pbnB1dCA9IGRhdGE7CiAgICB9CgogICAgc3RybS5uZXh0X2luID0gMDsKICAgIHN0cm0uYXZhaWxfaW4gPSBzdHJtLmlucHV0Lmxlbmd0aDsKCiAgICBmb3IgKDs7KSB7CiAgICAgIGlmIChzdHJtLmF2YWlsX291dCA9PT0gMCkgewogICAgICAgIHN0cm0ub3V0cHV0ID0gbmV3IFVpbnQ4QXJyYXkoY2h1bmtTaXplKTsKICAgICAgICBzdHJtLm5leHRfb3V0ID0gMDsKICAgICAgICBzdHJtLmF2YWlsX291dCA9IGNodW5rU2l6ZTsKICAgICAgfQoKICAgICAgLy8gTWFrZSBzdXJlIGF2YWlsX291dCA+IDYgdG8gYXZvaWQgcmVwZWF0aW5nIG1hcmtlcnMKICAgICAgaWYgKChfZmx1c2hfbW9kZSA9PT0gWl9TWU5DX0ZMVVNIIHx8IF9mbHVzaF9tb2RlID09PSBaX0ZVTExfRkxVU0gpICYmIHN0cm0uYXZhaWxfb3V0IDw9IDYpIHsKICAgICAgICB0aGlzLm9uRGF0YShzdHJtLm91dHB1dC5zdWJhcnJheSgwLCBzdHJtLm5leHRfb3V0KSk7CiAgICAgICAgc3RybS5hdmFpbF9vdXQgPSAwOwogICAgICAgIGNvbnRpbnVlOwogICAgICB9CgogICAgICBzdGF0dXMgPSBkZWZsYXRlXzEkMi5kZWZsYXRlKHN0cm0sIF9mbHVzaF9tb2RlKTsKCiAgICAgIC8vIEVuZGVkID0+IGZsdXNoIGFuZCBmaW5pc2gKICAgICAgaWYgKHN0YXR1cyA9PT0gWl9TVFJFQU1fRU5EJDIpIHsKICAgICAgICBpZiAoc3RybS5uZXh0X291dCA+IDApIHsKICAgICAgICAgIHRoaXMub25EYXRhKHN0cm0ub3V0cHV0LnN1YmFycmF5KDAsIHN0cm0ubmV4dF9vdXQpKTsKICAgICAgICB9CiAgICAgICAgc3RhdHVzID0gZGVmbGF0ZV8xJDIuZGVmbGF0ZUVuZCh0aGlzLnN0cm0pOwogICAgICAgIHRoaXMub25FbmQoc3RhdHVzKTsKICAgICAgICB0aGlzLmVuZGVkID0gdHJ1ZTsKICAgICAgICByZXR1cm4gc3RhdHVzID09PSBaX09LJDI7CiAgICAgIH0KCiAgICAgIC8vIEZsdXNoIGlmIG91dCBidWZmZXIgZnVsbAogICAgICBpZiAoc3RybS5hdmFpbF9vdXQgPT09IDApIHsKICAgICAgICB0aGlzLm9uRGF0YShzdHJtLm91dHB1dCk7CiAgICAgICAgY29udGludWU7CiAgICAgIH0KCiAgICAgIC8vIEZsdXNoIGlmIHJlcXVlc3RlZCBhbmQgaGFzIGRhdGEKICAgICAgaWYgKF9mbHVzaF9tb2RlID4gMCAmJiBzdHJtLm5leHRfb3V0ID4gMCkgewogICAgICAgIHRoaXMub25EYXRhKHN0cm0ub3V0cHV0LnN1YmFycmF5KDAsIHN0cm0ubmV4dF9vdXQpKTsKICAgICAgICBzdHJtLmF2YWlsX291dCA9IDA7CiAgICAgICAgY29udGludWU7CiAgICAgIH0KCiAgICAgIGlmIChzdHJtLmF2YWlsX2luID09PSAwKSBicmVhazsKICAgIH0KCiAgICByZXR1cm4gdHJ1ZTsKICB9OwoKCiAgLyoqCiAgICogRGVmbGF0ZSNvbkRhdGEoY2h1bmspIC0+IFZvaWQKICAgKiAtIGNodW5rIChVaW50OEFycmF5KTogb3V0cHV0IGRhdGEuCiAgICoKICAgKiBCeSBkZWZhdWx0LCBzdG9yZXMgZGF0YSBibG9ja3MgaW4gYGNodW5rc1tdYCBwcm9wZXJ0eSBhbmQgZ2x1ZQogICAqIHRob3NlIGluIGBvbkVuZGAuIE92ZXJyaWRlIHRoaXMgaGFuZGxlciwgaWYgeW91IG5lZWQgYW5vdGhlciBiZWhhdmlvdXIuCiAgICoqLwogIERlZmxhdGUkMS5wcm90b3R5cGUub25EYXRhID0gZnVuY3Rpb24gKGNodW5rKSB7CiAgICB0aGlzLmNodW5rcy5wdXNoKGNodW5rKTsKICB9OwoKCiAgLyoqCiAgICogRGVmbGF0ZSNvbkVuZChzdGF0dXMpIC0+IFZvaWQKICAgKiAtIHN0YXR1cyAoTnVtYmVyKTogZGVmbGF0ZSBzdGF0dXMuIDAgKFpfT0spIG9uIHN1Y2Nlc3MsCiAgICogICBvdGhlciBpZiBub3QuCiAgICoKICAgKiBDYWxsZWQgb25jZSBhZnRlciB5b3UgdGVsbCBkZWZsYXRlIHRoYXQgdGhlIGlucHV0IHN0cmVhbSBpcwogICAqIGNvbXBsZXRlIChaX0ZJTklTSCkuIEJ5IGRlZmF1bHQgLSBqb2luIGNvbGxlY3RlZCBjaHVua3MsCiAgICogZnJlZSBtZW1vcnkgYW5kIGZpbGwgYHJlc3VsdHNgIC8gYGVycmAgcHJvcGVydGllcy4KICAgKiovCiAgRGVmbGF0ZSQxLnByb3RvdHlwZS5vbkVuZCA9IGZ1bmN0aW9uIChzdGF0dXMpIHsKICAgIC8vIE9uIHN1Y2Nlc3MgLSBqb2luCiAgICBpZiAoc3RhdHVzID09PSBaX09LJDIpIHsKICAgICAgdGhpcy5yZXN1bHQgPSBjb21tb24uZmxhdHRlbkNodW5rcyh0aGlzLmNodW5rcyk7CiAgICB9CiAgICB0aGlzLmNodW5rcyA9IFtdOwogICAgdGhpcy5lcnIgPSBzdGF0dXM7CiAgICB0aGlzLm1zZyA9IHRoaXMuc3RybS5tc2c7CiAgfTsKCiAgLy8gKEMpIDE5OTUtMjAxMyBKZWFuLWxvdXAgR2FpbGx5IGFuZCBNYXJrIEFkbGVyCiAgLy8gKEMpIDIwMTQtMjAxNyBWaXRhbHkgUHV6cmluIGFuZCBBbmRyZXkgVHVwaXRzaW4KICAvLwogIC8vIFRoaXMgc29mdHdhcmUgaXMgcHJvdmlkZWQgJ2FzLWlzJywgd2l0aG91dCBhbnkgZXhwcmVzcyBvciBpbXBsaWVkCiAgLy8gd2FycmFudHkuIEluIG5vIGV2ZW50IHdpbGwgdGhlIGF1dGhvcnMgYmUgaGVsZCBsaWFibGUgZm9yIGFueSBkYW1hZ2VzCiAgLy8gYXJpc2luZyBmcm9tIHRoZSB1c2Ugb2YgdGhpcyBzb2Z0d2FyZS4KICAvLwogIC8vIFBlcm1pc3Npb24gaXMgZ3JhbnRlZCB0byBhbnlvbmUgdG8gdXNlIHRoaXMgc29mdHdhcmUgZm9yIGFueSBwdXJwb3NlLAogIC8vIGluY2x1ZGluZyBjb21tZXJjaWFsIGFwcGxpY2F0aW9ucywgYW5kIHRvIGFsdGVyIGl0IGFuZCByZWRpc3RyaWJ1dGUgaXQKICAvLyBmcmVlbHksIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyByZXN0cmljdGlvbnM6CiAgLy8KICAvLyAxLiBUaGUgb3JpZ2luIG9mIHRoaXMgc29mdHdhcmUgbXVzdCBub3QgYmUgbWlzcmVwcmVzZW50ZWQ7IHlvdSBtdXN0IG5vdAogIC8vICAgY2xhaW0gdGhhdCB5b3Ugd3JvdGUgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLiBJZiB5b3UgdXNlIHRoaXMgc29mdHdhcmUKICAvLyAgIGluIGEgcHJvZHVjdCwgYW4gYWNrbm93bGVkZ21lbnQgaW4gdGhlIHByb2R1Y3QgZG9jdW1lbnRhdGlvbiB3b3VsZCBiZQogIC8vICAgYXBwcmVjaWF0ZWQgYnV0IGlzIG5vdCByZXF1aXJlZC4KICAvLyAyLiBBbHRlcmVkIHNvdXJjZSB2ZXJzaW9ucyBtdXN0IGJlIHBsYWlubHkgbWFya2VkIGFzIHN1Y2gsIGFuZCBtdXN0IG5vdCBiZQogIC8vICAgbWlzcmVwcmVzZW50ZWQgYXMgYmVpbmcgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLgogIC8vIDMuIFRoaXMgbm90aWNlIG1heSBub3QgYmUgcmVtb3ZlZCBvciBhbHRlcmVkIGZyb20gYW55IHNvdXJjZSBkaXN0cmlidXRpb24uCgogIC8vIFNlZSBzdGF0ZSBkZWZzIGZyb20gaW5mbGF0ZS5qcwogIGNvbnN0IEJBRCQxID0gMzA7ICAgICAgIC8qIGdvdCBhIGRhdGEgZXJyb3IgLS0gcmVtYWluIGhlcmUgdW50aWwgcmVzZXQgKi8KICBjb25zdCBUWVBFJDEgPSAxMjsgICAgICAvKiBpOiB3YWl0aW5nIGZvciB0eXBlIGJpdHMsIGluY2x1ZGluZyBsYXN0LWZsYWcgYml0ICovCgogIC8qCiAgICAgRGVjb2RlIGxpdGVyYWwsIGxlbmd0aCwgYW5kIGRpc3RhbmNlIGNvZGVzIGFuZCB3cml0ZSBvdXQgdGhlIHJlc3VsdGluZwogICAgIGxpdGVyYWwgYW5kIG1hdGNoIGJ5dGVzIHVudGlsIGVpdGhlciBub3QgZW5vdWdoIGlucHV0IG9yIG91dHB1dCBpcwogICAgIGF2YWlsYWJsZSwgYW4gZW5kLW9mLWJsb2NrIGlzIGVuY291bnRlcmVkLCBvciBhIGRhdGEgZXJyb3IgaXMgZW5jb3VudGVyZWQuCiAgICAgV2hlbiBsYXJnZSBlbm91Z2ggaW5wdXQgYW5kIG91dHB1dCBidWZmZXJzIGFyZSBzdXBwbGllZCB0byBpbmZsYXRlKCksIGZvcgogICAgIGV4YW1wbGUsIGEgMTZLIGlucHV0IGJ1ZmZlciBhbmQgYSA2NEsgb3V0cHV0IGJ1ZmZlciwgbW9yZSB0aGFuIDk1JSBvZiB0aGUKICAgICBpbmZsYXRlIGV4ZWN1dGlvbiB0aW1lIGlzIHNwZW50IGluIHRoaXMgcm91dGluZS4KCiAgICAgRW50cnkgYXNzdW1wdGlvbnM6CgogICAgICAgICAgc3RhdGUubW9kZSA9PT0gTEVOCiAgICAgICAgICBzdHJtLmF2YWlsX2luID49IDYKICAgICAgICAgIHN0cm0uYXZhaWxfb3V0ID49IDI1OAogICAgICAgICAgc3RhcnQgPj0gc3RybS5hdmFpbF9vdXQKICAgICAgICAgIHN0YXRlLmJpdHMgPCA4CgogICAgIE9uIHJldHVybiwgc3RhdGUubW9kZSBpcyBvbmUgb2Y6CgogICAgICAgICAgTEVOIC0tIHJhbiBvdXQgb2YgZW5vdWdoIG91dHB1dCBzcGFjZSBvciBlbm91Z2ggYXZhaWxhYmxlIGlucHV0CiAgICAgICAgICBUWVBFIC0tIHJlYWNoZWQgZW5kIG9mIGJsb2NrIGNvZGUsIGluZmxhdGUoKSB0byBpbnRlcnByZXQgbmV4dCBibG9jawogICAgICAgICAgQkFEIC0tIGVycm9yIGluIGJsb2NrIGRhdGEKCiAgICAgTm90ZXM6CgogICAgICAtIFRoZSBtYXhpbXVtIGlucHV0IGJpdHMgdXNlZCBieSBhIGxlbmd0aC9kaXN0YW5jZSBwYWlyIGlzIDE1IGJpdHMgZm9yIHRoZQogICAgICAgIGxlbmd0aCBjb2RlLCA1IGJpdHMgZm9yIHRoZSBsZW5ndGggZXh0cmEsIDE1IGJpdHMgZm9yIHRoZSBkaXN0YW5jZSBjb2RlLAogICAgICAgIGFuZCAxMyBiaXRzIGZvciB0aGUgZGlzdGFuY2UgZXh0cmEuICBUaGlzIHRvdGFscyA0OCBiaXRzLCBvciBzaXggYnl0ZXMuCiAgICAgICAgVGhlcmVmb3JlIGlmIHN0cm0uYXZhaWxfaW4gPj0gNiwgdGhlbiB0aGVyZSBpcyBlbm91Z2ggaW5wdXQgdG8gYXZvaWQKICAgICAgICBjaGVja2luZyBmb3IgYXZhaWxhYmxlIGlucHV0IHdoaWxlIGRlY29kaW5nLgoKICAgICAgLSBUaGUgbWF4aW11bSBieXRlcyB0aGF0IGEgc2luZ2xlIGxlbmd0aC9kaXN0YW5jZSBwYWlyIGNhbiBvdXRwdXQgaXMgMjU4CiAgICAgICAgYnl0ZXMsIHdoaWNoIGlzIHRoZSBtYXhpbXVtIGxlbmd0aCB0aGF0IGNhbiBiZSBjb2RlZC4gIGluZmxhdGVfZmFzdCgpCiAgICAgICAgcmVxdWlyZXMgc3RybS5hdmFpbF9vdXQgPj0gMjU4IGZvciBlYWNoIGxvb3AgdG8gYXZvaWQgY2hlY2tpbmcgZm9yCiAgICAgICAgb3V0cHV0IHNwYWNlLgogICAqLwogIHZhciBpbmZmYXN0ID0gZnVuY3Rpb24gaW5mbGF0ZV9mYXN0KHN0cm0sIHN0YXJ0KSB7CiAgICBsZXQgX2luOyAgICAgICAgICAgICAgICAgICAgLyogbG9jYWwgc3RybS5pbnB1dCAqLwogICAgbGV0IGxhc3Q7ICAgICAgICAgICAgICAgICAgIC8qIGhhdmUgZW5vdWdoIGlucHV0IHdoaWxlIGluIDwgbGFzdCAqLwogICAgbGV0IF9vdXQ7ICAgICAgICAgICAgICAgICAgIC8qIGxvY2FsIHN0cm0ub3V0cHV0ICovCiAgICBsZXQgYmVnOyAgICAgICAgICAgICAgICAgICAgLyogaW5mbGF0ZSgpJ3MgaW5pdGlhbCBzdHJtLm91dHB1dCAqLwogICAgbGV0IGVuZDsgICAgICAgICAgICAgICAgICAgIC8qIHdoaWxlIG91dCA8IGVuZCwgZW5vdWdoIHNwYWNlIGF2YWlsYWJsZSAqLwogIC8vI2lmZGVmIElORkxBVEVfU1RSSUNUCiAgICBsZXQgZG1heDsgICAgICAgICAgICAgICAgICAgLyogbWF4aW11bSBkaXN0YW5jZSBmcm9tIHpsaWIgaGVhZGVyICovCiAgLy8jZW5kaWYKICAgIGxldCB3c2l6ZTsgICAgICAgICAgICAgICAgICAvKiB3aW5kb3cgc2l6ZSBvciB6ZXJvIGlmIG5vdCB1c2luZyB3aW5kb3cgKi8KICAgIGxldCB3aGF2ZTsgICAgICAgICAgICAgICAgICAvKiB2YWxpZCBieXRlcyBpbiB0aGUgd2luZG93ICovCiAgICBsZXQgd25leHQ7ICAgICAgICAgICAgICAgICAgLyogd2luZG93IHdyaXRlIGluZGV4ICovCiAgICAvLyBVc2UgYHNfd2luZG93YCBpbnN0ZWFkIGB3aW5kb3dgLCBhdm9pZCBjb25mbGljdCB3aXRoIGluc3RydW1lbnRhdGlvbiB0b29scwogICAgbGV0IHNfd2luZG93OyAgICAgICAgICAgICAgIC8qIGFsbG9jYXRlZCBzbGlkaW5nIHdpbmRvdywgaWYgd3NpemUgIT0gMCAqLwogICAgbGV0IGhvbGQ7ICAgICAgICAgICAgICAgICAgIC8qIGxvY2FsIHN0cm0uaG9sZCAqLwogICAgbGV0IGJpdHM7ICAgICAgICAgICAgICAgICAgIC8qIGxvY2FsIHN0cm0uYml0cyAqLwogICAgbGV0IGxjb2RlOyAgICAgICAgICAgICAgICAgIC8qIGxvY2FsIHN0cm0ubGVuY29kZSAqLwogICAgbGV0IGRjb2RlOyAgICAgICAgICAgICAgICAgIC8qIGxvY2FsIHN0cm0uZGlzdGNvZGUgKi8KICAgIGxldCBsbWFzazsgICAgICAgICAgICAgICAgICAvKiBtYXNrIGZvciBmaXJzdCBsZXZlbCBvZiBsZW5ndGggY29kZXMgKi8KICAgIGxldCBkbWFzazsgICAgICAgICAgICAgICAgICAvKiBtYXNrIGZvciBmaXJzdCBsZXZlbCBvZiBkaXN0YW5jZSBjb2RlcyAqLwogICAgbGV0IGhlcmU7ICAgICAgICAgICAgICAgICAgIC8qIHJldHJpZXZlZCB0YWJsZSBlbnRyeSAqLwogICAgbGV0IG9wOyAgICAgICAgICAgICAgICAgICAgIC8qIGNvZGUgYml0cywgb3BlcmF0aW9uLCBleHRyYSBiaXRzLCBvciAqLwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qICB3aW5kb3cgcG9zaXRpb24sIHdpbmRvdyBieXRlcyB0byBjb3B5ICovCiAgICBsZXQgbGVuOyAgICAgICAgICAgICAgICAgICAgLyogbWF0Y2ggbGVuZ3RoLCB1bnVzZWQgYnl0ZXMgKi8KICAgIGxldCBkaXN0OyAgICAgICAgICAgICAgICAgICAvKiBtYXRjaCBkaXN0YW5jZSAqLwogICAgbGV0IGZyb207ICAgICAgICAgICAgICAgICAgIC8qIHdoZXJlIHRvIGNvcHkgbWF0Y2ggZnJvbSAqLwogICAgbGV0IGZyb21fc291cmNlOwoKCiAgICBsZXQgaW5wdXQsIG91dHB1dDsgLy8gSlMgc3BlY2lmaWMsIGJlY2F1c2Ugd2UgaGF2ZSBubyBwb2ludGVycwoKICAgIC8qIGNvcHkgc3RhdGUgdG8gbG9jYWwgdmFyaWFibGVzICovCiAgICBjb25zdCBzdGF0ZSA9IHN0cm0uc3RhdGU7CiAgICAvL2hlcmUgPSBzdGF0ZS5oZXJlOwogICAgX2luID0gc3RybS5uZXh0X2luOwogICAgaW5wdXQgPSBzdHJtLmlucHV0OwogICAgbGFzdCA9IF9pbiArIChzdHJtLmF2YWlsX2luIC0gNSk7CiAgICBfb3V0ID0gc3RybS5uZXh0X291dDsKICAgIG91dHB1dCA9IHN0cm0ub3V0cHV0OwogICAgYmVnID0gX291dCAtIChzdGFydCAtIHN0cm0uYXZhaWxfb3V0KTsKICAgIGVuZCA9IF9vdXQgKyAoc3RybS5hdmFpbF9vdXQgLSAyNTcpOwogIC8vI2lmZGVmIElORkxBVEVfU1RSSUNUCiAgICBkbWF4ID0gc3RhdGUuZG1heDsKICAvLyNlbmRpZgogICAgd3NpemUgPSBzdGF0ZS53c2l6ZTsKICAgIHdoYXZlID0gc3RhdGUud2hhdmU7CiAgICB3bmV4dCA9IHN0YXRlLnduZXh0OwogICAgc193aW5kb3cgPSBzdGF0ZS53aW5kb3c7CiAgICBob2xkID0gc3RhdGUuaG9sZDsKICAgIGJpdHMgPSBzdGF0ZS5iaXRzOwogICAgbGNvZGUgPSBzdGF0ZS5sZW5jb2RlOwogICAgZGNvZGUgPSBzdGF0ZS5kaXN0Y29kZTsKICAgIGxtYXNrID0gKDEgPDwgc3RhdGUubGVuYml0cykgLSAxOwogICAgZG1hc2sgPSAoMSA8PCBzdGF0ZS5kaXN0Yml0cykgLSAxOwoKCiAgICAvKiBkZWNvZGUgbGl0ZXJhbHMgYW5kIGxlbmd0aC9kaXN0YW5jZXMgdW50aWwgZW5kLW9mLWJsb2NrIG9yIG5vdCBlbm91Z2gKICAgICAgIGlucHV0IGRhdGEgb3Igb3V0cHV0IHNwYWNlICovCgogICAgdG9wOgogICAgZG8gewogICAgICBpZiAoYml0cyA8IDE1KSB7CiAgICAgICAgaG9sZCArPSBpbnB1dFtfaW4rK10gPDwgYml0czsKICAgICAgICBiaXRzICs9IDg7CiAgICAgICAgaG9sZCArPSBpbnB1dFtfaW4rK10gPDwgYml0czsKICAgICAgICBiaXRzICs9IDg7CiAgICAgIH0KCiAgICAgIGhlcmUgPSBsY29kZVtob2xkICYgbG1hc2tdOwoKICAgICAgZG9sZW46CiAgICAgIGZvciAoOzspIHsgLy8gR290byBlbXVsYXRpb24KICAgICAgICBvcCA9IGhlcmUgPj4+IDI0LypoZXJlLmJpdHMqLzsKICAgICAgICBob2xkID4+Pj0gb3A7CiAgICAgICAgYml0cyAtPSBvcDsKICAgICAgICBvcCA9IChoZXJlID4+PiAxNikgJiAweGZmLypoZXJlLm9wKi87CiAgICAgICAgaWYgKG9wID09PSAwKSB7ICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBsaXRlcmFsICovCiAgICAgICAgICAvL1RyYWNldnYoKHN0ZGVyciwgaGVyZS52YWwgPj0gMHgyMCAmJiBoZXJlLnZhbCA8IDB4N2YgPwogICAgICAgICAgLy8gICAgICAgICJpbmZsYXRlOiAgICAgICAgIGxpdGVyYWwgJyVjJ1xuIiA6CiAgICAgICAgICAvLyAgICAgICAgImluZmxhdGU6ICAgICAgICAgbGl0ZXJhbCAweCUwMnhcbiIsIGhlcmUudmFsKSk7CiAgICAgICAgICBvdXRwdXRbX291dCsrXSA9IGhlcmUgJiAweGZmZmYvKmhlcmUudmFsKi87CiAgICAgICAgfQogICAgICAgIGVsc2UgaWYgKG9wICYgMTYpIHsgICAgICAgICAgICAgICAgICAgICAvKiBsZW5ndGggYmFzZSAqLwogICAgICAgICAgbGVuID0gaGVyZSAmIDB4ZmZmZi8qaGVyZS52YWwqLzsKICAgICAgICAgIG9wICY9IDE1OyAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIG51bWJlciBvZiBleHRyYSBiaXRzICovCiAgICAgICAgICBpZiAob3ApIHsKICAgICAgICAgICAgaWYgKGJpdHMgPCBvcCkgewogICAgICAgICAgICAgIGhvbGQgKz0gaW5wdXRbX2luKytdIDw8IGJpdHM7CiAgICAgICAgICAgICAgYml0cyArPSA4OwogICAgICAgICAgICB9CiAgICAgICAgICAgIGxlbiArPSBob2xkICYgKCgxIDw8IG9wKSAtIDEpOwogICAgICAgICAgICBob2xkID4+Pj0gb3A7CiAgICAgICAgICAgIGJpdHMgLT0gb3A7CiAgICAgICAgICB9CiAgICAgICAgICAvL1RyYWNldnYoKHN0ZGVyciwgImluZmxhdGU6ICAgICAgICAgbGVuZ3RoICV1XG4iLCBsZW4pKTsKICAgICAgICAgIGlmIChiaXRzIDwgMTUpIHsKICAgICAgICAgICAgaG9sZCArPSBpbnB1dFtfaW4rK10gPDwgYml0czsKICAgICAgICAgICAgYml0cyArPSA4OwogICAgICAgICAgICBob2xkICs9IGlucHV0W19pbisrXSA8PCBiaXRzOwogICAgICAgICAgICBiaXRzICs9IDg7CiAgICAgICAgICB9CiAgICAgICAgICBoZXJlID0gZGNvZGVbaG9sZCAmIGRtYXNrXTsKCiAgICAgICAgICBkb2Rpc3Q6CiAgICAgICAgICBmb3IgKDs7KSB7IC8vIGdvdG8gZW11bGF0aW9uCiAgICAgICAgICAgIG9wID0gaGVyZSA+Pj4gMjQvKmhlcmUuYml0cyovOwogICAgICAgICAgICBob2xkID4+Pj0gb3A7CiAgICAgICAgICAgIGJpdHMgLT0gb3A7CiAgICAgICAgICAgIG9wID0gKGhlcmUgPj4+IDE2KSAmIDB4ZmYvKmhlcmUub3AqLzsKCiAgICAgICAgICAgIGlmIChvcCAmIDE2KSB7ICAgICAgICAgICAgICAgICAgICAgIC8qIGRpc3RhbmNlIGJhc2UgKi8KICAgICAgICAgICAgICBkaXN0ID0gaGVyZSAmIDB4ZmZmZi8qaGVyZS52YWwqLzsKICAgICAgICAgICAgICBvcCAmPSAxNTsgICAgICAgICAgICAgICAgICAgICAgIC8qIG51bWJlciBvZiBleHRyYSBiaXRzICovCiAgICAgICAgICAgICAgaWYgKGJpdHMgPCBvcCkgewogICAgICAgICAgICAgICAgaG9sZCArPSBpbnB1dFtfaW4rK10gPDwgYml0czsKICAgICAgICAgICAgICAgIGJpdHMgKz0gODsKICAgICAgICAgICAgICAgIGlmIChiaXRzIDwgb3ApIHsKICAgICAgICAgICAgICAgICAgaG9sZCArPSBpbnB1dFtfaW4rK10gPDwgYml0czsKICAgICAgICAgICAgICAgICAgYml0cyArPSA4OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBkaXN0ICs9IGhvbGQgJiAoKDEgPDwgb3ApIC0gMSk7CiAgLy8jaWZkZWYgSU5GTEFURV9TVFJJQ1QKICAgICAgICAgICAgICBpZiAoZGlzdCA+IGRtYXgpIHsKICAgICAgICAgICAgICAgIHN0cm0ubXNnID0gJ2ludmFsaWQgZGlzdGFuY2UgdG9vIGZhciBiYWNrJzsKICAgICAgICAgICAgICAgIHN0YXRlLm1vZGUgPSBCQUQkMTsKICAgICAgICAgICAgICAgIGJyZWFrIHRvcDsKICAgICAgICAgICAgICB9CiAgLy8jZW5kaWYKICAgICAgICAgICAgICBob2xkID4+Pj0gb3A7CiAgICAgICAgICAgICAgYml0cyAtPSBvcDsKICAgICAgICAgICAgICAvL1RyYWNldnYoKHN0ZGVyciwgImluZmxhdGU6ICAgICAgICAgZGlzdGFuY2UgJXVcbiIsIGRpc3QpKTsKICAgICAgICAgICAgICBvcCA9IF9vdXQgLSBiZWc7ICAgICAgICAgICAgICAgIC8qIG1heCBkaXN0YW5jZSBpbiBvdXRwdXQgKi8KICAgICAgICAgICAgICBpZiAoZGlzdCA+IG9wKSB7ICAgICAgICAgICAgICAgIC8qIHNlZSBpZiBjb3B5IGZyb20gd2luZG93ICovCiAgICAgICAgICAgICAgICBvcCA9IGRpc3QgLSBvcDsgICAgICAgICAgICAgICAvKiBkaXN0YW5jZSBiYWNrIGluIHdpbmRvdyAqLwogICAgICAgICAgICAgICAgaWYgKG9wID4gd2hhdmUpIHsKICAgICAgICAgICAgICAgICAgaWYgKHN0YXRlLnNhbmUpIHsKICAgICAgICAgICAgICAgICAgICBzdHJtLm1zZyA9ICdpbnZhbGlkIGRpc3RhbmNlIHRvbyBmYXIgYmFjayc7CiAgICAgICAgICAgICAgICAgICAgc3RhdGUubW9kZSA9IEJBRCQxOwogICAgICAgICAgICAgICAgICAgIGJyZWFrIHRvcDsKICAgICAgICAgICAgICAgICAgfQoKICAvLyAoISkgVGhpcyBibG9jayBpcyBkaXNhYmxlZCBpbiB6bGliIGRlZmF1bHRzLAogIC8vIGRvbid0IGVuYWJsZSBpdCBmb3IgYmluYXJ5IGNvbXBhdGliaWxpdHkKICAvLyNpZmRlZiBJTkZMQVRFX0FMTE9XX0lOVkFMSURfRElTVEFOQ0VfVE9PRkFSX0FSUlIKICAvLyAgICAgICAgICAgICAgICBpZiAobGVuIDw9IG9wIC0gd2hhdmUpIHsKICAvLyAgICAgICAgICAgICAgICAgIGRvIHsKICAvLyAgICAgICAgICAgICAgICAgICAgb3V0cHV0W19vdXQrK10gPSAwOwogIC8vICAgICAgICAgICAgICAgICAgfSB3aGlsZSAoLS1sZW4pOwogIC8vICAgICAgICAgICAgICAgICAgY29udGludWUgdG9wOwogIC8vICAgICAgICAgICAgICAgIH0KICAvLyAgICAgICAgICAgICAgICBsZW4gLT0gb3AgLSB3aGF2ZTsKICAvLyAgICAgICAgICAgICAgICBkbyB7CiAgLy8gICAgICAgICAgICAgICAgICBvdXRwdXRbX291dCsrXSA9IDA7CiAgLy8gICAgICAgICAgICAgICAgfSB3aGlsZSAoLS1vcCA+IHdoYXZlKTsKICAvLyAgICAgICAgICAgICAgICBpZiAob3AgPT09IDApIHsKICAvLyAgICAgICAgICAgICAgICAgIGZyb20gPSBfb3V0IC0gZGlzdDsKICAvLyAgICAgICAgICAgICAgICAgIGRvIHsKICAvLyAgICAgICAgICAgICAgICAgICAgb3V0cHV0W19vdXQrK10gPSBvdXRwdXRbZnJvbSsrXTsKICAvLyAgICAgICAgICAgICAgICAgIH0gd2hpbGUgKC0tbGVuKTsKICAvLyAgICAgICAgICAgICAgICAgIGNvbnRpbnVlIHRvcDsKICAvLyAgICAgICAgICAgICAgICB9CiAgLy8jZW5kaWYKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGZyb20gPSAwOyAvLyB3aW5kb3cgaW5kZXgKICAgICAgICAgICAgICAgIGZyb21fc291cmNlID0gc193aW5kb3c7CiAgICAgICAgICAgICAgICBpZiAod25leHQgPT09IDApIHsgICAgICAgICAgIC8qIHZlcnkgY29tbW9uIGNhc2UgKi8KICAgICAgICAgICAgICAgICAgZnJvbSArPSB3c2l6ZSAtIG9wOwogICAgICAgICAgICAgICAgICBpZiAob3AgPCBsZW4pIHsgICAgICAgICAvKiBzb21lIGZyb20gd2luZG93ICovCiAgICAgICAgICAgICAgICAgICAgbGVuIC09IG9wOwogICAgICAgICAgICAgICAgICAgIGRvIHsKICAgICAgICAgICAgICAgICAgICAgIG91dHB1dFtfb3V0KytdID0gc193aW5kb3dbZnJvbSsrXTsKICAgICAgICAgICAgICAgICAgICB9IHdoaWxlICgtLW9wKTsKICAgICAgICAgICAgICAgICAgICBmcm9tID0gX291dCAtIGRpc3Q7ICAvKiByZXN0IGZyb20gb3V0cHV0ICovCiAgICAgICAgICAgICAgICAgICAgZnJvbV9zb3VyY2UgPSBvdXRwdXQ7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKHduZXh0IDwgb3ApIHsgICAgICAvKiB3cmFwIGFyb3VuZCB3aW5kb3cgKi8KICAgICAgICAgICAgICAgICAgZnJvbSArPSB3c2l6ZSArIHduZXh0IC0gb3A7CiAgICAgICAgICAgICAgICAgIG9wIC09IHduZXh0OwogICAgICAgICAgICAgICAgICBpZiAob3AgPCBsZW4pIHsgICAgICAgICAvKiBzb21lIGZyb20gZW5kIG9mIHdpbmRvdyAqLwogICAgICAgICAgICAgICAgICAgIGxlbiAtPSBvcDsKICAgICAgICAgICAgICAgICAgICBkbyB7CiAgICAgICAgICAgICAgICAgICAgICBvdXRwdXRbX291dCsrXSA9IHNfd2luZG93W2Zyb20rK107CiAgICAgICAgICAgICAgICAgICAgfSB3aGlsZSAoLS1vcCk7CiAgICAgICAgICAgICAgICAgICAgZnJvbSA9IDA7CiAgICAgICAgICAgICAgICAgICAgaWYgKHduZXh0IDwgbGVuKSB7ICAvKiBzb21lIGZyb20gc3RhcnQgb2Ygd2luZG93ICovCiAgICAgICAgICAgICAgICAgICAgICBvcCA9IHduZXh0OwogICAgICAgICAgICAgICAgICAgICAgbGVuIC09IG9wOwogICAgICAgICAgICAgICAgICAgICAgZG8gewogICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXRbX291dCsrXSA9IHNfd2luZG93W2Zyb20rK107CiAgICAgICAgICAgICAgICAgICAgICB9IHdoaWxlICgtLW9wKTsKICAgICAgICAgICAgICAgICAgICAgIGZyb20gPSBfb3V0IC0gZGlzdDsgICAgICAvKiByZXN0IGZyb20gb3V0cHV0ICovCiAgICAgICAgICAgICAgICAgICAgICBmcm9tX3NvdXJjZSA9IG91dHB1dDsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgeyAgICAgICAgICAgICAgICAgICAgICAvKiBjb250aWd1b3VzIGluIHdpbmRvdyAqLwogICAgICAgICAgICAgICAgICBmcm9tICs9IHduZXh0IC0gb3A7CiAgICAgICAgICAgICAgICAgIGlmIChvcCA8IGxlbikgeyAgICAgICAgIC8qIHNvbWUgZnJvbSB3aW5kb3cgKi8KICAgICAgICAgICAgICAgICAgICBsZW4gLT0gb3A7CiAgICAgICAgICAgICAgICAgICAgZG8gewogICAgICAgICAgICAgICAgICAgICAgb3V0cHV0W19vdXQrK10gPSBzX3dpbmRvd1tmcm9tKytdOwogICAgICAgICAgICAgICAgICAgIH0gd2hpbGUgKC0tb3ApOwogICAgICAgICAgICAgICAgICAgIGZyb20gPSBfb3V0IC0gZGlzdDsgIC8qIHJlc3QgZnJvbSBvdXRwdXQgKi8KICAgICAgICAgICAgICAgICAgICBmcm9tX3NvdXJjZSA9IG91dHB1dDsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgd2hpbGUgKGxlbiA+IDIpIHsKICAgICAgICAgICAgICAgICAgb3V0cHV0W19vdXQrK10gPSBmcm9tX3NvdXJjZVtmcm9tKytdOwogICAgICAgICAgICAgICAgICBvdXRwdXRbX291dCsrXSA9IGZyb21fc291cmNlW2Zyb20rK107CiAgICAgICAgICAgICAgICAgIG91dHB1dFtfb3V0KytdID0gZnJvbV9zb3VyY2VbZnJvbSsrXTsKICAgICAgICAgICAgICAgICAgbGVuIC09IDM7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAobGVuKSB7CiAgICAgICAgICAgICAgICAgIG91dHB1dFtfb3V0KytdID0gZnJvbV9zb3VyY2VbZnJvbSsrXTsKICAgICAgICAgICAgICAgICAgaWYgKGxlbiA+IDEpIHsKICAgICAgICAgICAgICAgICAgICBvdXRwdXRbX291dCsrXSA9IGZyb21fc291cmNlW2Zyb20rK107CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICBmcm9tID0gX291dCAtIGRpc3Q7ICAgICAgICAgIC8qIGNvcHkgZGlyZWN0IGZyb20gb3V0cHV0ICovCiAgICAgICAgICAgICAgICBkbyB7ICAgICAgICAgICAgICAgICAgICAgICAgLyogbWluaW11bSBsZW5ndGggaXMgdGhyZWUgKi8KICAgICAgICAgICAgICAgICAgb3V0cHV0W19vdXQrK10gPSBvdXRwdXRbZnJvbSsrXTsKICAgICAgICAgICAgICAgICAgb3V0cHV0W19vdXQrK10gPSBvdXRwdXRbZnJvbSsrXTsKICAgICAgICAgICAgICAgICAgb3V0cHV0W19vdXQrK10gPSBvdXRwdXRbZnJvbSsrXTsKICAgICAgICAgICAgICAgICAgbGVuIC09IDM7CiAgICAgICAgICAgICAgICB9IHdoaWxlIChsZW4gPiAyKTsKICAgICAgICAgICAgICAgIGlmIChsZW4pIHsKICAgICAgICAgICAgICAgICAgb3V0cHV0W19vdXQrK10gPSBvdXRwdXRbZnJvbSsrXTsKICAgICAgICAgICAgICAgICAgaWYgKGxlbiA+IDEpIHsKICAgICAgICAgICAgICAgICAgICBvdXRwdXRbX291dCsrXSA9IG91dHB1dFtmcm9tKytdOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgaWYgKChvcCAmIDY0KSA9PT0gMCkgeyAgICAgICAgICAvKiAybmQgbGV2ZWwgZGlzdGFuY2UgY29kZSAqLwogICAgICAgICAgICAgIGhlcmUgPSBkY29kZVsoaGVyZSAmIDB4ZmZmZikvKmhlcmUudmFsKi8gKyAoaG9sZCAmICgoMSA8PCBvcCkgLSAxKSldOwogICAgICAgICAgICAgIGNvbnRpbnVlIGRvZGlzdDsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICBzdHJtLm1zZyA9ICdpbnZhbGlkIGRpc3RhbmNlIGNvZGUnOwogICAgICAgICAgICAgIHN0YXRlLm1vZGUgPSBCQUQkMTsKICAgICAgICAgICAgICBicmVhayB0b3A7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGJyZWFrOyAvLyBuZWVkIHRvIGVtdWxhdGUgZ290byB2aWEgImNvbnRpbnVlIgogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBlbHNlIGlmICgob3AgJiA2NCkgPT09IDApIHsgICAgICAgICAgICAgIC8qIDJuZCBsZXZlbCBsZW5ndGggY29kZSAqLwogICAgICAgICAgaGVyZSA9IGxjb2RlWyhoZXJlICYgMHhmZmZmKS8qaGVyZS52YWwqLyArIChob2xkICYgKCgxIDw8IG9wKSAtIDEpKV07CiAgICAgICAgICBjb250aW51ZSBkb2xlbjsKICAgICAgICB9CiAgICAgICAgZWxzZSBpZiAob3AgJiAzMikgeyAgICAgICAgICAgICAgICAgICAgIC8qIGVuZC1vZi1ibG9jayAqLwogICAgICAgICAgLy9UcmFjZXZ2KChzdGRlcnIsICJpbmZsYXRlOiAgICAgICAgIGVuZCBvZiBibG9ja1xuIikpOwogICAgICAgICAgc3RhdGUubW9kZSA9IFRZUEUkMTsKICAgICAgICAgIGJyZWFrIHRvcDsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICBzdHJtLm1zZyA9ICdpbnZhbGlkIGxpdGVyYWwvbGVuZ3RoIGNvZGUnOwogICAgICAgICAgc3RhdGUubW9kZSA9IEJBRCQxOwogICAgICAgICAgYnJlYWsgdG9wOwogICAgICAgIH0KCiAgICAgICAgYnJlYWs7IC8vIG5lZWQgdG8gZW11bGF0ZSBnb3RvIHZpYSAiY29udGludWUiCiAgICAgIH0KICAgIH0gd2hpbGUgKF9pbiA8IGxhc3QgJiYgX291dCA8IGVuZCk7CgogICAgLyogcmV0dXJuIHVudXNlZCBieXRlcyAob24gZW50cnksIGJpdHMgPCA4LCBzbyBpbiB3b24ndCBnbyB0b28gZmFyIGJhY2spICovCiAgICBsZW4gPSBiaXRzID4+IDM7CiAgICBfaW4gLT0gbGVuOwogICAgYml0cyAtPSBsZW4gPDwgMzsKICAgIGhvbGQgJj0gKDEgPDwgYml0cykgLSAxOwoKICAgIC8qIHVwZGF0ZSBzdGF0ZSBhbmQgcmV0dXJuICovCiAgICBzdHJtLm5leHRfaW4gPSBfaW47CiAgICBzdHJtLm5leHRfb3V0ID0gX291dDsKICAgIHN0cm0uYXZhaWxfaW4gPSAoX2luIDwgbGFzdCA/IDUgKyAobGFzdCAtIF9pbikgOiA1IC0gKF9pbiAtIGxhc3QpKTsKICAgIHN0cm0uYXZhaWxfb3V0ID0gKF9vdXQgPCBlbmQgPyAyNTcgKyAoZW5kIC0gX291dCkgOiAyNTcgLSAoX291dCAtIGVuZCkpOwogICAgc3RhdGUuaG9sZCA9IGhvbGQ7CiAgICBzdGF0ZS5iaXRzID0gYml0czsKICAgIHJldHVybjsKICB9OwoKICAvLyAoQykgMTk5NS0yMDEzIEplYW4tbG91cCBHYWlsbHkgYW5kIE1hcmsgQWRsZXIKICAvLyAoQykgMjAxNC0yMDE3IFZpdGFseSBQdXpyaW4gYW5kIEFuZHJleSBUdXBpdHNpbgogIC8vCiAgLy8gVGhpcyBzb2Z0d2FyZSBpcyBwcm92aWRlZCAnYXMtaXMnLCB3aXRob3V0IGFueSBleHByZXNzIG9yIGltcGxpZWQKICAvLyB3YXJyYW50eS4gSW4gbm8gZXZlbnQgd2lsbCB0aGUgYXV0aG9ycyBiZSBoZWxkIGxpYWJsZSBmb3IgYW55IGRhbWFnZXMKICAvLyBhcmlzaW5nIGZyb20gdGhlIHVzZSBvZiB0aGlzIHNvZnR3YXJlLgogIC8vCiAgLy8gUGVybWlzc2lvbiBpcyBncmFudGVkIHRvIGFueW9uZSB0byB1c2UgdGhpcyBzb2Z0d2FyZSBmb3IgYW55IHB1cnBvc2UsCiAgLy8gaW5jbHVkaW5nIGNvbW1lcmNpYWwgYXBwbGljYXRpb25zLCBhbmQgdG8gYWx0ZXIgaXQgYW5kIHJlZGlzdHJpYnV0ZSBpdAogIC8vIGZyZWVseSwgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIHJlc3RyaWN0aW9uczoKICAvLwogIC8vIDEuIFRoZSBvcmlnaW4gb2YgdGhpcyBzb2Z0d2FyZSBtdXN0IG5vdCBiZSBtaXNyZXByZXNlbnRlZDsgeW91IG11c3Qgbm90CiAgLy8gICBjbGFpbSB0aGF0IHlvdSB3cm90ZSB0aGUgb3JpZ2luYWwgc29mdHdhcmUuIElmIHlvdSB1c2UgdGhpcyBzb2Z0d2FyZQogIC8vICAgaW4gYSBwcm9kdWN0LCBhbiBhY2tub3dsZWRnbWVudCBpbiB0aGUgcHJvZHVjdCBkb2N1bWVudGF0aW9uIHdvdWxkIGJlCiAgLy8gICBhcHByZWNpYXRlZCBidXQgaXMgbm90IHJlcXVpcmVkLgogIC8vIDIuIEFsdGVyZWQgc291cmNlIHZlcnNpb25zIG11c3QgYmUgcGxhaW5seSBtYXJrZWQgYXMgc3VjaCwgYW5kIG11c3Qgbm90IGJlCiAgLy8gICBtaXNyZXByZXNlbnRlZCBhcyBiZWluZyB0aGUgb3JpZ2luYWwgc29mdHdhcmUuCiAgLy8gMy4gVGhpcyBub3RpY2UgbWF5IG5vdCBiZSByZW1vdmVkIG9yIGFsdGVyZWQgZnJvbSBhbnkgc291cmNlIGRpc3RyaWJ1dGlvbi4KCiAgY29uc3QgTUFYQklUUyA9IDE1OwogIGNvbnN0IEVOT1VHSF9MRU5TJDEgPSA4NTI7CiAgY29uc3QgRU5PVUdIX0RJU1RTJDEgPSA1OTI7CiAgLy9jb25zdCBFTk9VR0ggPSAoRU5PVUdIX0xFTlMrRU5PVUdIX0RJU1RTKTsKCiAgY29uc3QgQ09ERVMkMSA9IDA7CiAgY29uc3QgTEVOUyQxID0gMTsKICBjb25zdCBESVNUUyQxID0gMjsKCiAgY29uc3QgbGJhc2UgPSBuZXcgVWludDE2QXJyYXkoWyAvKiBMZW5ndGggY29kZXMgMjU3Li4yODUgYmFzZSAqLwogICAgMywgNCwgNSwgNiwgNywgOCwgOSwgMTAsIDExLCAxMywgMTUsIDE3LCAxOSwgMjMsIDI3LCAzMSwKICAgIDM1LCA0MywgNTEsIDU5LCA2NywgODMsIDk5LCAxMTUsIDEzMSwgMTYzLCAxOTUsIDIyNywgMjU4LCAwLCAwCiAgXSk7CgogIGNvbnN0IGxleHQgPSBuZXcgVWludDhBcnJheShbIC8qIExlbmd0aCBjb2RlcyAyNTcuLjI4NSBleHRyYSAqLwogICAgMTYsIDE2LCAxNiwgMTYsIDE2LCAxNiwgMTYsIDE2LCAxNywgMTcsIDE3LCAxNywgMTgsIDE4LCAxOCwgMTgsCiAgICAxOSwgMTksIDE5LCAxOSwgMjAsIDIwLCAyMCwgMjAsIDIxLCAyMSwgMjEsIDIxLCAxNiwgNzIsIDc4CiAgXSk7CgogIGNvbnN0IGRiYXNlID0gbmV3IFVpbnQxNkFycmF5KFsgLyogRGlzdGFuY2UgY29kZXMgMC4uMjkgYmFzZSAqLwogICAgMSwgMiwgMywgNCwgNSwgNywgOSwgMTMsIDE3LCAyNSwgMzMsIDQ5LCA2NSwgOTcsIDEyOSwgMTkzLAogICAgMjU3LCAzODUsIDUxMywgNzY5LCAxMDI1LCAxNTM3LCAyMDQ5LCAzMDczLCA0MDk3LCA2MTQ1LAogICAgODE5MywgMTIyODksIDE2Mzg1LCAyNDU3NywgMCwgMAogIF0pOwoKICBjb25zdCBkZXh0ID0gbmV3IFVpbnQ4QXJyYXkoWyAvKiBEaXN0YW5jZSBjb2RlcyAwLi4yOSBleHRyYSAqLwogICAgMTYsIDE2LCAxNiwgMTYsIDE3LCAxNywgMTgsIDE4LCAxOSwgMTksIDIwLCAyMCwgMjEsIDIxLCAyMiwgMjIsCiAgICAyMywgMjMsIDI0LCAyNCwgMjUsIDI1LCAyNiwgMjYsIDI3LCAyNywKICAgIDI4LCAyOCwgMjksIDI5LCA2NCwgNjQKICBdKTsKCiAgY29uc3QgaW5mbGF0ZV90YWJsZSA9ICh0eXBlLCBsZW5zLCBsZW5zX2luZGV4LCBjb2RlcywgdGFibGUsIHRhYmxlX2luZGV4LCB3b3JrLCBvcHRzKSA9PgogIHsKICAgIGNvbnN0IGJpdHMgPSBvcHRzLmJpdHM7CiAgICAgICAgLy9oZXJlID0gb3B0cy5oZXJlOyAvKiB0YWJsZSBlbnRyeSBmb3IgZHVwbGljYXRpb24gKi8KCiAgICBsZXQgbGVuID0gMDsgICAgICAgICAgICAgICAvKiBhIGNvZGUncyBsZW5ndGggaW4gYml0cyAqLwogICAgbGV0IHN5bSA9IDA7ICAgICAgICAgICAgICAgLyogaW5kZXggb2YgY29kZSBzeW1ib2xzICovCiAgICBsZXQgbWluID0gMCwgbWF4ID0gMDsgICAgICAgICAgLyogbWluaW11bSBhbmQgbWF4aW11bSBjb2RlIGxlbmd0aHMgKi8KICAgIGxldCByb290ID0gMDsgICAgICAgICAgICAgIC8qIG51bWJlciBvZiBpbmRleCBiaXRzIGZvciByb290IHRhYmxlICovCiAgICBsZXQgY3VyciA9IDA7ICAgICAgICAgICAgICAvKiBudW1iZXIgb2YgaW5kZXggYml0cyBmb3IgY3VycmVudCB0YWJsZSAqLwogICAgbGV0IGRyb3AgPSAwOyAgICAgICAgICAgICAgLyogY29kZSBiaXRzIHRvIGRyb3AgZm9yIHN1Yi10YWJsZSAqLwogICAgbGV0IGxlZnQgPSAwOyAgICAgICAgICAgICAgICAgICAvKiBudW1iZXIgb2YgcHJlZml4IGNvZGVzIGF2YWlsYWJsZSAqLwogICAgbGV0IHVzZWQgPSAwOyAgICAgICAgICAgICAgLyogY29kZSBlbnRyaWVzIGluIHRhYmxlIHVzZWQgKi8KICAgIGxldCBodWZmID0gMDsgICAgICAgICAgICAgIC8qIEh1ZmZtYW4gY29kZSAqLwogICAgbGV0IGluY3I7ICAgICAgICAgICAgICAvKiBmb3IgaW5jcmVtZW50aW5nIGNvZGUsIGluZGV4ICovCiAgICBsZXQgZmlsbDsgICAgICAgICAgICAgIC8qIGluZGV4IGZvciByZXBsaWNhdGluZyBlbnRyaWVzICovCiAgICBsZXQgbG93OyAgICAgICAgICAgICAgIC8qIGxvdyBiaXRzIGZvciBjdXJyZW50IHJvb3QgZW50cnkgKi8KICAgIGxldCBtYXNrOyAgICAgICAgICAgICAgLyogbWFzayBmb3IgbG93IHJvb3QgYml0cyAqLwogICAgbGV0IG5leHQ7ICAgICAgICAgICAgIC8qIG5leHQgYXZhaWxhYmxlIHNwYWNlIGluIHRhYmxlICovCiAgICBsZXQgYmFzZSA9IG51bGw7ICAgICAvKiBiYXNlIHZhbHVlIHRhYmxlIHRvIHVzZSAqLwogICAgbGV0IGJhc2VfaW5kZXggPSAwOwogIC8vICBsZXQgc2hvZXh0cmE7ICAgIC8qIGV4dHJhIGJpdHMgdGFibGUgdG8gdXNlICovCiAgICBsZXQgZW5kOyAgICAgICAgICAgICAgICAgICAgLyogdXNlIGJhc2UgYW5kIGV4dHJhIGZvciBzeW1ib2wgPiBlbmQgKi8KICAgIGNvbnN0IGNvdW50ID0gbmV3IFVpbnQxNkFycmF5KE1BWEJJVFMgKyAxKTsgLy9bTUFYQklUUysxXTsgICAgLyogbnVtYmVyIG9mIGNvZGVzIG9mIGVhY2ggbGVuZ3RoICovCiAgICBjb25zdCBvZmZzID0gbmV3IFVpbnQxNkFycmF5KE1BWEJJVFMgKyAxKTsgLy9bTUFYQklUUysxXTsgICAgIC8qIG9mZnNldHMgaW4gdGFibGUgZm9yIGVhY2ggbGVuZ3RoICovCiAgICBsZXQgZXh0cmEgPSBudWxsOwogICAgbGV0IGV4dHJhX2luZGV4ID0gMDsKCiAgICBsZXQgaGVyZV9iaXRzLCBoZXJlX29wLCBoZXJlX3ZhbDsKCiAgICAvKgogICAgIFByb2Nlc3MgYSBzZXQgb2YgY29kZSBsZW5ndGhzIHRvIGNyZWF0ZSBhIGNhbm9uaWNhbCBIdWZmbWFuIGNvZGUuICBUaGUKICAgICBjb2RlIGxlbmd0aHMgYXJlIGxlbnNbMC4uY29kZXMtMV0uICBFYWNoIGxlbmd0aCBjb3JyZXNwb25kcyB0byB0aGUKICAgICBzeW1ib2xzIDAuLmNvZGVzLTEuICBUaGUgSHVmZm1hbiBjb2RlIGlzIGdlbmVyYXRlZCBieSBmaXJzdCBzb3J0aW5nIHRoZQogICAgIHN5bWJvbHMgYnkgbGVuZ3RoIGZyb20gc2hvcnQgdG8gbG9uZywgYW5kIHJldGFpbmluZyB0aGUgc3ltYm9sIG9yZGVyCiAgICAgZm9yIGNvZGVzIHdpdGggZXF1YWwgbGVuZ3Rocy4gIFRoZW4gdGhlIGNvZGUgc3RhcnRzIHdpdGggYWxsIHplcm8gYml0cwogICAgIGZvciB0aGUgZmlyc3QgY29kZSBvZiB0aGUgc2hvcnRlc3QgbGVuZ3RoLCBhbmQgdGhlIGNvZGVzIGFyZSBpbnRlZ2VyCiAgICAgaW5jcmVtZW50cyBmb3IgdGhlIHNhbWUgbGVuZ3RoLCBhbmQgemVyb3MgYXJlIGFwcGVuZGVkIGFzIHRoZSBsZW5ndGgKICAgICBpbmNyZWFzZXMuICBGb3IgdGhlIGRlZmxhdGUgZm9ybWF0LCB0aGVzZSBiaXRzIGFyZSBzdG9yZWQgYmFja3dhcmRzCiAgICAgZnJvbSB0aGVpciBtb3JlIG5hdHVyYWwgaW50ZWdlciBpbmNyZW1lbnQgb3JkZXJpbmcsIGFuZCBzbyB3aGVuIHRoZQogICAgIGRlY29kaW5nIHRhYmxlcyBhcmUgYnVpbHQgaW4gdGhlIGxhcmdlIGxvb3AgYmVsb3csIHRoZSBpbnRlZ2VyIGNvZGVzCiAgICAgYXJlIGluY3JlbWVudGVkIGJhY2t3YXJkcy4KCiAgICAgVGhpcyByb3V0aW5lIGFzc3VtZXMsIGJ1dCBkb2VzIG5vdCBjaGVjaywgdGhhdCBhbGwgb2YgdGhlIGVudHJpZXMgaW4KICAgICBsZW5zW10gYXJlIGluIHRoZSByYW5nZSAwLi5NQVhCSVRTLiAgVGhlIGNhbGxlciBtdXN0IGFzc3VyZSB0aGlzLgogICAgIDEuLk1BWEJJVFMgaXMgaW50ZXJwcmV0ZWQgYXMgdGhhdCBjb2RlIGxlbmd0aC4gIHplcm8gbWVhbnMgdGhhdCB0aGF0CiAgICAgc3ltYm9sIGRvZXMgbm90IG9jY3VyIGluIHRoaXMgY29kZS4KCiAgICAgVGhlIGNvZGVzIGFyZSBzb3J0ZWQgYnkgY29tcHV0aW5nIGEgY291bnQgb2YgY29kZXMgZm9yIGVhY2ggbGVuZ3RoLAogICAgIGNyZWF0aW5nIGZyb20gdGhhdCBhIHRhYmxlIG9mIHN0YXJ0aW5nIGluZGljZXMgZm9yIGVhY2ggbGVuZ3RoIGluIHRoZQogICAgIHNvcnRlZCB0YWJsZSwgYW5kIHRoZW4gZW50ZXJpbmcgdGhlIHN5bWJvbHMgaW4gb3JkZXIgaW4gdGhlIHNvcnRlZAogICAgIHRhYmxlLiAgVGhlIHNvcnRlZCB0YWJsZSBpcyB3b3JrW10sIHdpdGggdGhhdCBzcGFjZSBiZWluZyBwcm92aWRlZCBieQogICAgIHRoZSBjYWxsZXIuCgogICAgIFRoZSBsZW5ndGggY291bnRzIGFyZSB1c2VkIGZvciBvdGhlciBwdXJwb3NlcyBhcyB3ZWxsLCBpLmUuIGZpbmRpbmcKICAgICB0aGUgbWluaW11bSBhbmQgbWF4aW11bSBsZW5ndGggY29kZXMsIGRldGVybWluaW5nIGlmIHRoZXJlIGFyZSBhbnkKICAgICBjb2RlcyBhdCBhbGwsIGNoZWNraW5nIGZvciBhIHZhbGlkIHNldCBvZiBsZW5ndGhzLCBhbmQgbG9va2luZyBhaGVhZAogICAgIGF0IGxlbmd0aCBjb3VudHMgdG8gZGV0ZXJtaW5lIHN1Yi10YWJsZSBzaXplcyB3aGVuIGJ1aWxkaW5nIHRoZQogICAgIGRlY29kaW5nIHRhYmxlcy4KICAgICAqLwoKICAgIC8qIGFjY3VtdWxhdGUgbGVuZ3RocyBmb3IgY29kZXMgKGFzc3VtZXMgbGVuc1tdIGFsbCBpbiAwLi5NQVhCSVRTKSAqLwogICAgZm9yIChsZW4gPSAwOyBsZW4gPD0gTUFYQklUUzsgbGVuKyspIHsKICAgICAgY291bnRbbGVuXSA9IDA7CiAgICB9CiAgICBmb3IgKHN5bSA9IDA7IHN5bSA8IGNvZGVzOyBzeW0rKykgewogICAgICBjb3VudFtsZW5zW2xlbnNfaW5kZXggKyBzeW1dXSsrOwogICAgfQoKICAgIC8qIGJvdW5kIGNvZGUgbGVuZ3RocywgZm9yY2Ugcm9vdCB0byBiZSB3aXRoaW4gY29kZSBsZW5ndGhzICovCiAgICByb290ID0gYml0czsKICAgIGZvciAobWF4ID0gTUFYQklUUzsgbWF4ID49IDE7IG1heC0tKSB7CiAgICAgIGlmIChjb3VudFttYXhdICE9PSAwKSB7IGJyZWFrOyB9CiAgICB9CiAgICBpZiAocm9vdCA+IG1heCkgewogICAgICByb290ID0gbWF4OwogICAgfQogICAgaWYgKG1heCA9PT0gMCkgeyAgICAgICAgICAgICAgICAgICAgIC8qIG5vIHN5bWJvbHMgdG8gY29kZSBhdCBhbGwgKi8KICAgICAgLy90YWJsZS5vcFtvcHRzLnRhYmxlX2luZGV4XSA9IDY0OyAgLy9oZXJlLm9wID0gKHZhciBjaGFyKTY0OyAgICAvKiBpbnZhbGlkIGNvZGUgbWFya2VyICovCiAgICAgIC8vdGFibGUuYml0c1tvcHRzLnRhYmxlX2luZGV4XSA9IDE7ICAgLy9oZXJlLmJpdHMgPSAodmFyIGNoYXIpMTsKICAgICAgLy90YWJsZS52YWxbb3B0cy50YWJsZV9pbmRleCsrXSA9IDA7ICAgLy9oZXJlLnZhbCA9ICh2YXIgc2hvcnQpMDsKICAgICAgdGFibGVbdGFibGVfaW5kZXgrK10gPSAoMSA8PCAyNCkgfCAoNjQgPDwgMTYpIHwgMDsKCgogICAgICAvL3RhYmxlLm9wW29wdHMudGFibGVfaW5kZXhdID0gNjQ7CiAgICAgIC8vdGFibGUuYml0c1tvcHRzLnRhYmxlX2luZGV4XSA9IDE7CiAgICAgIC8vdGFibGUudmFsW29wdHMudGFibGVfaW5kZXgrK10gPSAwOwogICAgICB0YWJsZVt0YWJsZV9pbmRleCsrXSA9ICgxIDw8IDI0KSB8ICg2NCA8PCAxNikgfCAwOwoKICAgICAgb3B0cy5iaXRzID0gMTsKICAgICAgcmV0dXJuIDA7ICAgICAvKiBubyBzeW1ib2xzLCBidXQgd2FpdCBmb3IgZGVjb2RpbmcgdG8gcmVwb3J0IGVycm9yICovCiAgICB9CiAgICBmb3IgKG1pbiA9IDE7IG1pbiA8IG1heDsgbWluKyspIHsKICAgICAgaWYgKGNvdW50W21pbl0gIT09IDApIHsgYnJlYWs7IH0KICAgIH0KICAgIGlmIChyb290IDwgbWluKSB7CiAgICAgIHJvb3QgPSBtaW47CiAgICB9CgogICAgLyogY2hlY2sgZm9yIGFuIG92ZXItc3Vic2NyaWJlZCBvciBpbmNvbXBsZXRlIHNldCBvZiBsZW5ndGhzICovCiAgICBsZWZ0ID0gMTsKICAgIGZvciAobGVuID0gMTsgbGVuIDw9IE1BWEJJVFM7IGxlbisrKSB7CiAgICAgIGxlZnQgPDw9IDE7CiAgICAgIGxlZnQgLT0gY291bnRbbGVuXTsKICAgICAgaWYgKGxlZnQgPCAwKSB7CiAgICAgICAgcmV0dXJuIC0xOwogICAgICB9ICAgICAgICAvKiBvdmVyLXN1YnNjcmliZWQgKi8KICAgIH0KICAgIGlmIChsZWZ0ID4gMCAmJiAodHlwZSA9PT0gQ09ERVMkMSB8fCBtYXggIT09IDEpKSB7CiAgICAgIHJldHVybiAtMTsgICAgICAgICAgICAgICAgICAgICAgLyogaW5jb21wbGV0ZSBzZXQgKi8KICAgIH0KCiAgICAvKiBnZW5lcmF0ZSBvZmZzZXRzIGludG8gc3ltYm9sIHRhYmxlIGZvciBlYWNoIGxlbmd0aCBmb3Igc29ydGluZyAqLwogICAgb2Zmc1sxXSA9IDA7CiAgICBmb3IgKGxlbiA9IDE7IGxlbiA8IE1BWEJJVFM7IGxlbisrKSB7CiAgICAgIG9mZnNbbGVuICsgMV0gPSBvZmZzW2xlbl0gKyBjb3VudFtsZW5dOwogICAgfQoKICAgIC8qIHNvcnQgc3ltYm9scyBieSBsZW5ndGgsIGJ5IHN5bWJvbCBvcmRlciB3aXRoaW4gZWFjaCBsZW5ndGggKi8KICAgIGZvciAoc3ltID0gMDsgc3ltIDwgY29kZXM7IHN5bSsrKSB7CiAgICAgIGlmIChsZW5zW2xlbnNfaW5kZXggKyBzeW1dICE9PSAwKSB7CiAgICAgICAgd29ya1tvZmZzW2xlbnNbbGVuc19pbmRleCArIHN5bV1dKytdID0gc3ltOwogICAgICB9CiAgICB9CgogICAgLyoKICAgICBDcmVhdGUgYW5kIGZpbGwgaW4gZGVjb2RpbmcgdGFibGVzLiAgSW4gdGhpcyBsb29wLCB0aGUgdGFibGUgYmVpbmcKICAgICBmaWxsZWQgaXMgYXQgbmV4dCBhbmQgaGFzIGN1cnIgaW5kZXggYml0cy4gIFRoZSBjb2RlIGJlaW5nIHVzZWQgaXMgaHVmZgogICAgIHdpdGggbGVuZ3RoIGxlbi4gIFRoYXQgY29kZSBpcyBjb252ZXJ0ZWQgdG8gYW4gaW5kZXggYnkgZHJvcHBpbmcgZHJvcAogICAgIGJpdHMgb2ZmIG9mIHRoZSBib3R0b20uICBGb3IgY29kZXMgd2hlcmUgbGVuIGlzIGxlc3MgdGhhbiBkcm9wICsgY3VyciwKICAgICB0aG9zZSB0b3AgZHJvcCArIGN1cnIgLSBsZW4gYml0cyBhcmUgaW5jcmVtZW50ZWQgdGhyb3VnaCBhbGwgdmFsdWVzIHRvCiAgICAgZmlsbCB0aGUgdGFibGUgd2l0aCByZXBsaWNhdGVkIGVudHJpZXMuCgogICAgIHJvb3QgaXMgdGhlIG51bWJlciBvZiBpbmRleCBiaXRzIGZvciB0aGUgcm9vdCB0YWJsZS4gIFdoZW4gbGVuIGV4Y2VlZHMKICAgICByb290LCBzdWItdGFibGVzIGFyZSBjcmVhdGVkIHBvaW50ZWQgdG8gYnkgdGhlIHJvb3QgZW50cnkgd2l0aCBhbiBpbmRleAogICAgIG9mIHRoZSBsb3cgcm9vdCBiaXRzIG9mIGh1ZmYuICBUaGlzIGlzIHNhdmVkIGluIGxvdyB0byBjaGVjayBmb3Igd2hlbiBhCiAgICAgbmV3IHN1Yi10YWJsZSBzaG91bGQgYmUgc3RhcnRlZC4gIGRyb3AgaXMgemVybyB3aGVuIHRoZSByb290IHRhYmxlIGlzCiAgICAgYmVpbmcgZmlsbGVkLCBhbmQgZHJvcCBpcyByb290IHdoZW4gc3ViLXRhYmxlcyBhcmUgYmVpbmcgZmlsbGVkLgoKICAgICBXaGVuIGEgbmV3IHN1Yi10YWJsZSBpcyBuZWVkZWQsIGl0IGlzIG5lY2Vzc2FyeSB0byBsb29rIGFoZWFkIGluIHRoZQogICAgIGNvZGUgbGVuZ3RocyB0byBkZXRlcm1pbmUgd2hhdCBzaXplIHN1Yi10YWJsZSBpcyBuZWVkZWQuICBUaGUgbGVuZ3RoCiAgICAgY291bnRzIGFyZSB1c2VkIGZvciB0aGlzLCBhbmQgc28gY291bnRbXSBpcyBkZWNyZW1lbnRlZCBhcyBjb2RlcyBhcmUKICAgICBlbnRlcmVkIGluIHRoZSB0YWJsZXMuCgogICAgIHVzZWQga2VlcHMgdHJhY2sgb2YgaG93IG1hbnkgdGFibGUgZW50cmllcyBoYXZlIGJlZW4gYWxsb2NhdGVkIGZyb20gdGhlCiAgICAgcHJvdmlkZWQgKnRhYmxlIHNwYWNlLiAgSXQgaXMgY2hlY2tlZCBmb3IgTEVOUyBhbmQgRElTVCB0YWJsZXMgYWdhaW5zdAogICAgIHRoZSBjb25zdGFudHMgRU5PVUdIX0xFTlMgYW5kIEVOT1VHSF9ESVNUUyB0byBndWFyZCBhZ2FpbnN0IGNoYW5nZXMgaW4KICAgICB0aGUgaW5pdGlhbCByb290IHRhYmxlIHNpemUgY29uc3RhbnRzLiAgU2VlIHRoZSBjb21tZW50cyBpbiBpbmZ0cmVlcy5oCiAgICAgZm9yIG1vcmUgaW5mb3JtYXRpb24uCgogICAgIHN5bSBpbmNyZW1lbnRzIHRocm91Z2ggYWxsIHN5bWJvbHMsIGFuZCB0aGUgbG9vcCB0ZXJtaW5hdGVzIHdoZW4KICAgICBhbGwgY29kZXMgb2YgbGVuZ3RoIG1heCwgaS5lLiBhbGwgY29kZXMsIGhhdmUgYmVlbiBwcm9jZXNzZWQuICBUaGlzCiAgICAgcm91dGluZSBwZXJtaXRzIGluY29tcGxldGUgY29kZXMsIHNvIGFub3RoZXIgbG9vcCBhZnRlciB0aGlzIG9uZSBmaWxscwogICAgIGluIHRoZSByZXN0IG9mIHRoZSBkZWNvZGluZyB0YWJsZXMgd2l0aCBpbnZhbGlkIGNvZGUgbWFya2Vycy4KICAgICAqLwoKICAgIC8qIHNldCB1cCBmb3IgY29kZSB0eXBlICovCiAgICAvLyBwb29yIG1hbiBvcHRpbWl6YXRpb24gLSB1c2UgaWYtZWxzZSBpbnN0ZWFkIG9mIHN3aXRjaCwKICAgIC8vIHRvIGF2b2lkIGRlb3B0cyBpbiBvbGQgdjgKICAgIGlmICh0eXBlID09PSBDT0RFUyQxKSB7CiAgICAgIGJhc2UgPSBleHRyYSA9IHdvcms7ICAgIC8qIGR1bW15IHZhbHVlLS1ub3QgdXNlZCAqLwogICAgICBlbmQgPSAxOTsKCiAgICB9IGVsc2UgaWYgKHR5cGUgPT09IExFTlMkMSkgewogICAgICBiYXNlID0gbGJhc2U7CiAgICAgIGJhc2VfaW5kZXggLT0gMjU3OwogICAgICBleHRyYSA9IGxleHQ7CiAgICAgIGV4dHJhX2luZGV4IC09IDI1NzsKICAgICAgZW5kID0gMjU2OwoKICAgIH0gZWxzZSB7ICAgICAgICAgICAgICAgICAgICAvKiBESVNUUyAqLwogICAgICBiYXNlID0gZGJhc2U7CiAgICAgIGV4dHJhID0gZGV4dDsKICAgICAgZW5kID0gLTE7CiAgICB9CgogICAgLyogaW5pdGlhbGl6ZSBvcHRzIGZvciBsb29wICovCiAgICBodWZmID0gMDsgICAgICAgICAgICAgICAgICAgLyogc3RhcnRpbmcgY29kZSAqLwogICAgc3ltID0gMDsgICAgICAgICAgICAgICAgICAgIC8qIHN0YXJ0aW5nIGNvZGUgc3ltYm9sICovCiAgICBsZW4gPSBtaW47ICAgICAgICAgICAgICAgICAgLyogc3RhcnRpbmcgY29kZSBsZW5ndGggKi8KICAgIG5leHQgPSB0YWJsZV9pbmRleDsgICAgICAgICAgICAgIC8qIGN1cnJlbnQgdGFibGUgdG8gZmlsbCBpbiAqLwogICAgY3VyciA9IHJvb3Q7ICAgICAgICAgICAgICAgIC8qIGN1cnJlbnQgdGFibGUgaW5kZXggYml0cyAqLwogICAgZHJvcCA9IDA7ICAgICAgICAgICAgICAgICAgIC8qIGN1cnJlbnQgYml0cyB0byBkcm9wIGZyb20gY29kZSBmb3IgaW5kZXggKi8KICAgIGxvdyA9IC0xOyAgICAgICAgICAgICAgICAgICAvKiB0cmlnZ2VyIG5ldyBzdWItdGFibGUgd2hlbiBsZW4gPiByb290ICovCiAgICB1c2VkID0gMSA8PCByb290OyAgICAgICAgICAvKiB1c2Ugcm9vdCB0YWJsZSBlbnRyaWVzICovCiAgICBtYXNrID0gdXNlZCAtIDE7ICAgICAgICAgICAgLyogbWFzayBmb3IgY29tcGFyaW5nIGxvdyAqLwoKICAgIC8qIGNoZWNrIGF2YWlsYWJsZSB0YWJsZSBzcGFjZSAqLwogICAgaWYgKCh0eXBlID09PSBMRU5TJDEgJiYgdXNlZCA+IEVOT1VHSF9MRU5TJDEpIHx8CiAgICAgICh0eXBlID09PSBESVNUUyQxICYmIHVzZWQgPiBFTk9VR0hfRElTVFMkMSkpIHsKICAgICAgcmV0dXJuIDE7CiAgICB9CgogICAgLyogcHJvY2VzcyBhbGwgY29kZXMgYW5kIG1ha2UgdGFibGUgZW50cmllcyAqLwogICAgZm9yICg7OykgewogICAgICAvKiBjcmVhdGUgdGFibGUgZW50cnkgKi8KICAgICAgaGVyZV9iaXRzID0gbGVuIC0gZHJvcDsKICAgICAgaWYgKHdvcmtbc3ltXSA8IGVuZCkgewogICAgICAgIGhlcmVfb3AgPSAwOwogICAgICAgIGhlcmVfdmFsID0gd29ya1tzeW1dOwogICAgICB9CiAgICAgIGVsc2UgaWYgKHdvcmtbc3ltXSA+IGVuZCkgewogICAgICAgIGhlcmVfb3AgPSBleHRyYVtleHRyYV9pbmRleCArIHdvcmtbc3ltXV07CiAgICAgICAgaGVyZV92YWwgPSBiYXNlW2Jhc2VfaW5kZXggKyB3b3JrW3N5bV1dOwogICAgICB9CiAgICAgIGVsc2UgewogICAgICAgIGhlcmVfb3AgPSAzMiArIDY0OyAgICAgICAgIC8qIGVuZCBvZiBibG9jayAqLwogICAgICAgIGhlcmVfdmFsID0gMDsKICAgICAgfQoKICAgICAgLyogcmVwbGljYXRlIGZvciB0aG9zZSBpbmRpY2VzIHdpdGggbG93IGxlbiBiaXRzIGVxdWFsIHRvIGh1ZmYgKi8KICAgICAgaW5jciA9IDEgPDwgKGxlbiAtIGRyb3ApOwogICAgICBmaWxsID0gMSA8PCBjdXJyOwogICAgICBtaW4gPSBmaWxsOyAgICAgICAgICAgICAgICAgLyogc2F2ZSBvZmZzZXQgdG8gbmV4dCB0YWJsZSAqLwogICAgICBkbyB7CiAgICAgICAgZmlsbCAtPSBpbmNyOwogICAgICAgIHRhYmxlW25leHQgKyAoaHVmZiA+PiBkcm9wKSArIGZpbGxdID0gKGhlcmVfYml0cyA8PCAyNCkgfCAoaGVyZV9vcCA8PCAxNikgfCBoZXJlX3ZhbCB8MDsKICAgICAgfSB3aGlsZSAoZmlsbCAhPT0gMCk7CgogICAgICAvKiBiYWNrd2FyZHMgaW5jcmVtZW50IHRoZSBsZW4tYml0IGNvZGUgaHVmZiAqLwogICAgICBpbmNyID0gMSA8PCAobGVuIC0gMSk7CiAgICAgIHdoaWxlIChodWZmICYgaW5jcikgewogICAgICAgIGluY3IgPj49IDE7CiAgICAgIH0KICAgICAgaWYgKGluY3IgIT09IDApIHsKICAgICAgICBodWZmICY9IGluY3IgLSAxOwogICAgICAgIGh1ZmYgKz0gaW5jcjsKICAgICAgfSBlbHNlIHsKICAgICAgICBodWZmID0gMDsKICAgICAgfQoKICAgICAgLyogZ28gdG8gbmV4dCBzeW1ib2wsIHVwZGF0ZSBjb3VudCwgbGVuICovCiAgICAgIHN5bSsrOwogICAgICBpZiAoLS1jb3VudFtsZW5dID09PSAwKSB7CiAgICAgICAgaWYgKGxlbiA9PT0gbWF4KSB7IGJyZWFrOyB9CiAgICAgICAgbGVuID0gbGVuc1tsZW5zX2luZGV4ICsgd29ya1tzeW1dXTsKICAgICAgfQoKICAgICAgLyogY3JlYXRlIG5ldyBzdWItdGFibGUgaWYgbmVlZGVkICovCiAgICAgIGlmIChsZW4gPiByb290ICYmIChodWZmICYgbWFzaykgIT09IGxvdykgewogICAgICAgIC8qIGlmIGZpcnN0IHRpbWUsIHRyYW5zaXRpb24gdG8gc3ViLXRhYmxlcyAqLwogICAgICAgIGlmIChkcm9wID09PSAwKSB7CiAgICAgICAgICBkcm9wID0gcm9vdDsKICAgICAgICB9CgogICAgICAgIC8qIGluY3JlbWVudCBwYXN0IGxhc3QgdGFibGUgKi8KICAgICAgICBuZXh0ICs9IG1pbjsgICAgICAgICAgICAvKiBoZXJlIG1pbiBpcyAxIDw8IGN1cnIgKi8KCiAgICAgICAgLyogZGV0ZXJtaW5lIGxlbmd0aCBvZiBuZXh0IHRhYmxlICovCiAgICAgICAgY3VyciA9IGxlbiAtIGRyb3A7CiAgICAgICAgbGVmdCA9IDEgPDwgY3VycjsKICAgICAgICB3aGlsZSAoY3VyciArIGRyb3AgPCBtYXgpIHsKICAgICAgICAgIGxlZnQgLT0gY291bnRbY3VyciArIGRyb3BdOwogICAgICAgICAgaWYgKGxlZnQgPD0gMCkgeyBicmVhazsgfQogICAgICAgICAgY3VycisrOwogICAgICAgICAgbGVmdCA8PD0gMTsKICAgICAgICB9CgogICAgICAgIC8qIGNoZWNrIGZvciBlbm91Z2ggc3BhY2UgKi8KICAgICAgICB1c2VkICs9IDEgPDwgY3VycjsKICAgICAgICBpZiAoKHR5cGUgPT09IExFTlMkMSAmJiB1c2VkID4gRU5PVUdIX0xFTlMkMSkgfHwKICAgICAgICAgICh0eXBlID09PSBESVNUUyQxICYmIHVzZWQgPiBFTk9VR0hfRElTVFMkMSkpIHsKICAgICAgICAgIHJldHVybiAxOwogICAgICAgIH0KCiAgICAgICAgLyogcG9pbnQgZW50cnkgaW4gcm9vdCB0YWJsZSB0byBzdWItdGFibGUgKi8KICAgICAgICBsb3cgPSBodWZmICYgbWFzazsKICAgICAgICAvKnRhYmxlLm9wW2xvd10gPSBjdXJyOwogICAgICAgIHRhYmxlLmJpdHNbbG93XSA9IHJvb3Q7CiAgICAgICAgdGFibGUudmFsW2xvd10gPSBuZXh0IC0gb3B0cy50YWJsZV9pbmRleDsqLwogICAgICAgIHRhYmxlW2xvd10gPSAocm9vdCA8PCAyNCkgfCAoY3VyciA8PCAxNikgfCAobmV4dCAtIHRhYmxlX2luZGV4KSB8MDsKICAgICAgfQogICAgfQoKICAgIC8qIGZpbGwgaW4gcmVtYWluaW5nIHRhYmxlIGVudHJ5IGlmIGNvZGUgaXMgaW5jb21wbGV0ZSAoZ3VhcmFudGVlZCB0byBoYXZlCiAgICAgYXQgbW9zdCBvbmUgcmVtYWluaW5nIGVudHJ5LCBzaW5jZSBpZiB0aGUgY29kZSBpcyBpbmNvbXBsZXRlLCB0aGUKICAgICBtYXhpbXVtIGNvZGUgbGVuZ3RoIHRoYXQgd2FzIGFsbG93ZWQgdG8gZ2V0IHRoaXMgZmFyIGlzIG9uZSBiaXQpICovCiAgICBpZiAoaHVmZiAhPT0gMCkgewogICAgICAvL3RhYmxlLm9wW25leHQgKyBodWZmXSA9IDY0OyAgICAgICAgICAgIC8qIGludmFsaWQgY29kZSBtYXJrZXIgKi8KICAgICAgLy90YWJsZS5iaXRzW25leHQgKyBodWZmXSA9IGxlbiAtIGRyb3A7CiAgICAgIC8vdGFibGUudmFsW25leHQgKyBodWZmXSA9IDA7CiAgICAgIHRhYmxlW25leHQgKyBodWZmXSA9ICgobGVuIC0gZHJvcCkgPDwgMjQpIHwgKDY0IDw8IDE2KSB8MDsKICAgIH0KCiAgICAvKiBzZXQgcmV0dXJuIHBhcmFtZXRlcnMgKi8KICAgIC8vb3B0cy50YWJsZV9pbmRleCArPSB1c2VkOwogICAgb3B0cy5iaXRzID0gcm9vdDsKICAgIHJldHVybiAwOwogIH07CgoKICB2YXIgaW5mdHJlZXMgPSBpbmZsYXRlX3RhYmxlOwoKICAvLyAoQykgMTk5NS0yMDEzIEplYW4tbG91cCBHYWlsbHkgYW5kIE1hcmsgQWRsZXIKICAvLyAoQykgMjAxNC0yMDE3IFZpdGFseSBQdXpyaW4gYW5kIEFuZHJleSBUdXBpdHNpbgogIC8vCiAgLy8gVGhpcyBzb2Z0d2FyZSBpcyBwcm92aWRlZCAnYXMtaXMnLCB3aXRob3V0IGFueSBleHByZXNzIG9yIGltcGxpZWQKICAvLyB3YXJyYW50eS4gSW4gbm8gZXZlbnQgd2lsbCB0aGUgYXV0aG9ycyBiZSBoZWxkIGxpYWJsZSBmb3IgYW55IGRhbWFnZXMKICAvLyBhcmlzaW5nIGZyb20gdGhlIHVzZSBvZiB0aGlzIHNvZnR3YXJlLgogIC8vCiAgLy8gUGVybWlzc2lvbiBpcyBncmFudGVkIHRvIGFueW9uZSB0byB1c2UgdGhpcyBzb2Z0d2FyZSBmb3IgYW55IHB1cnBvc2UsCiAgLy8gaW5jbHVkaW5nIGNvbW1lcmNpYWwgYXBwbGljYXRpb25zLCBhbmQgdG8gYWx0ZXIgaXQgYW5kIHJlZGlzdHJpYnV0ZSBpdAogIC8vIGZyZWVseSwgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIHJlc3RyaWN0aW9uczoKICAvLwogIC8vIDEuIFRoZSBvcmlnaW4gb2YgdGhpcyBzb2Z0d2FyZSBtdXN0IG5vdCBiZSBtaXNyZXByZXNlbnRlZDsgeW91IG11c3Qgbm90CiAgLy8gICBjbGFpbSB0aGF0IHlvdSB3cm90ZSB0aGUgb3JpZ2luYWwgc29mdHdhcmUuIElmIHlvdSB1c2UgdGhpcyBzb2Z0d2FyZQogIC8vICAgaW4gYSBwcm9kdWN0LCBhbiBhY2tub3dsZWRnbWVudCBpbiB0aGUgcHJvZHVjdCBkb2N1bWVudGF0aW9uIHdvdWxkIGJlCiAgLy8gICBhcHByZWNpYXRlZCBidXQgaXMgbm90IHJlcXVpcmVkLgogIC8vIDIuIEFsdGVyZWQgc291cmNlIHZlcnNpb25zIG11c3QgYmUgcGxhaW5seSBtYXJrZWQgYXMgc3VjaCwgYW5kIG11c3Qgbm90IGJlCiAgLy8gICBtaXNyZXByZXNlbnRlZCBhcyBiZWluZyB0aGUgb3JpZ2luYWwgc29mdHdhcmUuCiAgLy8gMy4gVGhpcyBub3RpY2UgbWF5IG5vdCBiZSByZW1vdmVkIG9yIGFsdGVyZWQgZnJvbSBhbnkgc291cmNlIGRpc3RyaWJ1dGlvbi4KCgoKCgoKICBjb25zdCBDT0RFUyA9IDA7CiAgY29uc3QgTEVOUyA9IDE7CiAgY29uc3QgRElTVFMgPSAyOwoKICAvKiBQdWJsaWMgY29uc3RhbnRzID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qLwogIC8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovCgogIGNvbnN0IHsKICAgIFpfRklOSVNIOiBaX0ZJTklTSCQxLCBaX0JMT0NLLCBaX1RSRUVTLAogICAgWl9PSzogWl9PSyQxLCBaX1NUUkVBTV9FTkQ6IFpfU1RSRUFNX0VORCQxLCBaX05FRURfRElDVDogWl9ORUVEX0RJQ1QkMSwgWl9TVFJFQU1fRVJST1I6IFpfU1RSRUFNX0VSUk9SJDEsIFpfREFUQV9FUlJPUjogWl9EQVRBX0VSUk9SJDEsIFpfTUVNX0VSUk9SOiBaX01FTV9FUlJPUiQxLCBaX0JVRl9FUlJPUiwKICAgIFpfREVGTEFURUQKICB9ID0gY29uc3RhbnRzJDI7CgoKICAvKiBTVEFURVMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qLwogIC8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovCgoKICBjb25zdCAgICBIRUFEID0gMTsgICAgICAgLyogaTogd2FpdGluZyBmb3IgbWFnaWMgaGVhZGVyICovCiAgY29uc3QgICAgRkxBR1MgPSAyOyAgICAgIC8qIGk6IHdhaXRpbmcgZm9yIG1ldGhvZCBhbmQgZmxhZ3MgKGd6aXApICovCiAgY29uc3QgICAgVElNRSA9IDM7ICAgICAgIC8qIGk6IHdhaXRpbmcgZm9yIG1vZGlmaWNhdGlvbiB0aW1lIChnemlwKSAqLwogIGNvbnN0ICAgIE9TID0gNDsgICAgICAgICAvKiBpOiB3YWl0aW5nIGZvciBleHRyYSBmbGFncyBhbmQgb3BlcmF0aW5nIHN5c3RlbSAoZ3ppcCkgKi8KICBjb25zdCAgICBFWExFTiA9IDU7ICAgICAgLyogaTogd2FpdGluZyBmb3IgZXh0cmEgbGVuZ3RoIChnemlwKSAqLwogIGNvbnN0ICAgIEVYVFJBID0gNjsgICAgICAvKiBpOiB3YWl0aW5nIGZvciBleHRyYSBieXRlcyAoZ3ppcCkgKi8KICBjb25zdCAgICBOQU1FID0gNzsgICAgICAgLyogaTogd2FpdGluZyBmb3IgZW5kIG9mIGZpbGUgbmFtZSAoZ3ppcCkgKi8KICBjb25zdCAgICBDT01NRU5UID0gODsgICAgLyogaTogd2FpdGluZyBmb3IgZW5kIG9mIGNvbW1lbnQgKGd6aXApICovCiAgY29uc3QgICAgSENSQyA9IDk7ICAgICAgIC8qIGk6IHdhaXRpbmcgZm9yIGhlYWRlciBjcmMgKGd6aXApICovCiAgY29uc3QgICAgRElDVElEID0gMTA7ICAgIC8qIGk6IHdhaXRpbmcgZm9yIGRpY3Rpb25hcnkgY2hlY2sgdmFsdWUgKi8KICBjb25zdCAgICBESUNUID0gMTE7ICAgICAgLyogd2FpdGluZyBmb3IgaW5mbGF0ZVNldERpY3Rpb25hcnkoKSBjYWxsICovCiAgY29uc3QgICAgICAgIFRZUEUgPSAxMjsgICAgICAvKiBpOiB3YWl0aW5nIGZvciB0eXBlIGJpdHMsIGluY2x1ZGluZyBsYXN0LWZsYWcgYml0ICovCiAgY29uc3QgICAgICAgIFRZUEVETyA9IDEzOyAgICAvKiBpOiBzYW1lLCBidXQgc2tpcCBjaGVjayB0byBleGl0IGluZmxhdGUgb24gbmV3IGJsb2NrICovCiAgY29uc3QgICAgICAgIFNUT1JFRCA9IDE0OyAgICAvKiBpOiB3YWl0aW5nIGZvciBzdG9yZWQgc2l6ZSAobGVuZ3RoIGFuZCBjb21wbGVtZW50KSAqLwogIGNvbnN0ICAgICAgICBDT1BZXyA9IDE1OyAgICAgLyogaS9vOiBzYW1lIGFzIENPUFkgYmVsb3csIGJ1dCBvbmx5IGZpcnN0IHRpbWUgaW4gKi8KICBjb25zdCAgICAgICAgQ09QWSA9IDE2OyAgICAgIC8qIGkvbzogd2FpdGluZyBmb3IgaW5wdXQgb3Igb3V0cHV0IHRvIGNvcHkgc3RvcmVkIGJsb2NrICovCiAgY29uc3QgICAgICAgIFRBQkxFID0gMTc7ICAgICAvKiBpOiB3YWl0aW5nIGZvciBkeW5hbWljIGJsb2NrIHRhYmxlIGxlbmd0aHMgKi8KICBjb25zdCAgICAgICAgTEVOTEVOUyA9IDE4OyAgIC8qIGk6IHdhaXRpbmcgZm9yIGNvZGUgbGVuZ3RoIGNvZGUgbGVuZ3RocyAqLwogIGNvbnN0ICAgICAgICBDT0RFTEVOUyA9IDE5OyAgLyogaTogd2FpdGluZyBmb3IgbGVuZ3RoL2xpdCBhbmQgZGlzdGFuY2UgY29kZSBsZW5ndGhzICovCiAgY29uc3QgICAgICAgICAgICBMRU5fID0gMjA7ICAgICAgLyogaTogc2FtZSBhcyBMRU4gYmVsb3csIGJ1dCBvbmx5IGZpcnN0IHRpbWUgaW4gKi8KICBjb25zdCAgICAgICAgICAgIExFTiA9IDIxOyAgICAgICAvKiBpOiB3YWl0aW5nIGZvciBsZW5ndGgvbGl0L2VvYiBjb2RlICovCiAgY29uc3QgICAgICAgICAgICBMRU5FWFQgPSAyMjsgICAgLyogaTogd2FpdGluZyBmb3IgbGVuZ3RoIGV4dHJhIGJpdHMgKi8KICBjb25zdCAgICAgICAgICAgIERJU1QgPSAyMzsgICAgICAvKiBpOiB3YWl0aW5nIGZvciBkaXN0YW5jZSBjb2RlICovCiAgY29uc3QgICAgICAgICAgICBESVNURVhUID0gMjQ7ICAgLyogaTogd2FpdGluZyBmb3IgZGlzdGFuY2UgZXh0cmEgYml0cyAqLwogIGNvbnN0ICAgICAgICAgICAgTUFUQ0ggPSAyNTsgICAgIC8qIG86IHdhaXRpbmcgZm9yIG91dHB1dCBzcGFjZSB0byBjb3B5IHN0cmluZyAqLwogIGNvbnN0ICAgICAgICAgICAgTElUID0gMjY7ICAgICAgIC8qIG86IHdhaXRpbmcgZm9yIG91dHB1dCBzcGFjZSB0byB3cml0ZSBsaXRlcmFsICovCiAgY29uc3QgICAgQ0hFQ0sgPSAyNzsgICAgIC8qIGk6IHdhaXRpbmcgZm9yIDMyLWJpdCBjaGVjayB2YWx1ZSAqLwogIGNvbnN0ICAgIExFTkdUSCA9IDI4OyAgICAvKiBpOiB3YWl0aW5nIGZvciAzMi1iaXQgbGVuZ3RoIChnemlwKSAqLwogIGNvbnN0ICAgIERPTkUgPSAyOTsgICAgICAvKiBmaW5pc2hlZCBjaGVjaywgZG9uZSAtLSByZW1haW4gaGVyZSB1bnRpbCByZXNldCAqLwogIGNvbnN0ICAgIEJBRCA9IDMwOyAgICAgICAvKiBnb3QgYSBkYXRhIGVycm9yIC0tIHJlbWFpbiBoZXJlIHVudGlsIHJlc2V0ICovCiAgY29uc3QgICAgTUVNID0gMzE7ICAgICAgIC8qIGdvdCBhbiBpbmZsYXRlKCkgbWVtb3J5IGVycm9yIC0tIHJlbWFpbiBoZXJlIHVudGlsIHJlc2V0ICovCiAgY29uc3QgICAgU1lOQyA9IDMyOyAgICAgIC8qIGxvb2tpbmcgZm9yIHN5bmNocm9uaXphdGlvbiBieXRlcyB0byByZXN0YXJ0IGluZmxhdGUoKSAqLwoKICAvKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qLwoKCgogIGNvbnN0IEVOT1VHSF9MRU5TID0gODUyOwogIGNvbnN0IEVOT1VHSF9ESVNUUyA9IDU5MjsKICAvL2NvbnN0IEVOT1VHSCA9ICAoRU5PVUdIX0xFTlMrRU5PVUdIX0RJU1RTKTsKCiAgY29uc3QgTUFYX1dCSVRTID0gMTU7CiAgLyogMzJLIExaNzcgd2luZG93ICovCiAgY29uc3QgREVGX1dCSVRTID0gTUFYX1dCSVRTOwoKCiAgY29uc3QgenN3YXAzMiA9IChxKSA9PiB7CgogICAgcmV0dXJuICAoKChxID4+PiAyNCkgJiAweGZmKSArCiAgICAgICAgICAgICgocSA+Pj4gOCkgJiAweGZmMDApICsKICAgICAgICAgICAgKChxICYgMHhmZjAwKSA8PCA4KSArCiAgICAgICAgICAgICgocSAmIDB4ZmYpIDw8IDI0KSk7CiAgfTsKCgogIGZ1bmN0aW9uIEluZmxhdGVTdGF0ZSgpIHsKICAgIHRoaXMubW9kZSA9IDA7ICAgICAgICAgICAgIC8qIGN1cnJlbnQgaW5mbGF0ZSBtb2RlICovCiAgICB0aGlzLmxhc3QgPSBmYWxzZTsgICAgICAgICAgLyogdHJ1ZSBpZiBwcm9jZXNzaW5nIGxhc3QgYmxvY2sgKi8KICAgIHRoaXMud3JhcCA9IDA7ICAgICAgICAgICAgICAvKiBiaXQgMCB0cnVlIGZvciB6bGliLCBiaXQgMSB0cnVlIGZvciBnemlwICovCiAgICB0aGlzLmhhdmVkaWN0ID0gZmFsc2U7ICAgICAgLyogdHJ1ZSBpZiBkaWN0aW9uYXJ5IHByb3ZpZGVkICovCiAgICB0aGlzLmZsYWdzID0gMDsgICAgICAgICAgICAgLyogZ3ppcCBoZWFkZXIgbWV0aG9kIGFuZCBmbGFncyAoMCBpZiB6bGliKSAqLwogICAgdGhpcy5kbWF4ID0gMDsgICAgICAgICAgICAgIC8qIHpsaWIgaGVhZGVyIG1heCBkaXN0YW5jZSAoSU5GTEFURV9TVFJJQ1QpICovCiAgICB0aGlzLmNoZWNrID0gMDsgICAgICAgICAgICAgLyogcHJvdGVjdGVkIGNvcHkgb2YgY2hlY2sgdmFsdWUgKi8KICAgIHRoaXMudG90YWwgPSAwOyAgICAgICAgICAgICAvKiBwcm90ZWN0ZWQgY29weSBvZiBvdXRwdXQgY291bnQgKi8KICAgIC8vIFRPRE86IG1heSBiZSB7fQogICAgdGhpcy5oZWFkID0gbnVsbDsgICAgICAgICAgIC8qIHdoZXJlIHRvIHNhdmUgZ3ppcCBoZWFkZXIgaW5mb3JtYXRpb24gKi8KCiAgICAvKiBzbGlkaW5nIHdpbmRvdyAqLwogICAgdGhpcy53Yml0cyA9IDA7ICAgICAgICAgICAgIC8qIGxvZyBiYXNlIDIgb2YgcmVxdWVzdGVkIHdpbmRvdyBzaXplICovCiAgICB0aGlzLndzaXplID0gMDsgICAgICAgICAgICAgLyogd2luZG93IHNpemUgb3IgemVybyBpZiBub3QgdXNpbmcgd2luZG93ICovCiAgICB0aGlzLndoYXZlID0gMDsgICAgICAgICAgICAgLyogdmFsaWQgYnl0ZXMgaW4gdGhlIHdpbmRvdyAqLwogICAgdGhpcy53bmV4dCA9IDA7ICAgICAgICAgICAgIC8qIHdpbmRvdyB3cml0ZSBpbmRleCAqLwogICAgdGhpcy53aW5kb3cgPSBudWxsOyAgICAgICAgIC8qIGFsbG9jYXRlZCBzbGlkaW5nIHdpbmRvdywgaWYgbmVlZGVkICovCgogICAgLyogYml0IGFjY3VtdWxhdG9yICovCiAgICB0aGlzLmhvbGQgPSAwOyAgICAgICAgICAgICAgLyogaW5wdXQgYml0IGFjY3VtdWxhdG9yICovCiAgICB0aGlzLmJpdHMgPSAwOyAgICAgICAgICAgICAgLyogbnVtYmVyIG9mIGJpdHMgaW4gImluIiAqLwoKICAgIC8qIGZvciBzdHJpbmcgYW5kIHN0b3JlZCBibG9jayBjb3B5aW5nICovCiAgICB0aGlzLmxlbmd0aCA9IDA7ICAgICAgICAgICAgLyogbGl0ZXJhbCBvciBsZW5ndGggb2YgZGF0YSB0byBjb3B5ICovCiAgICB0aGlzLm9mZnNldCA9IDA7ICAgICAgICAgICAgLyogZGlzdGFuY2UgYmFjayB0byBjb3B5IHN0cmluZyBmcm9tICovCgogICAgLyogZm9yIHRhYmxlIGFuZCBjb2RlIGRlY29kaW5nICovCiAgICB0aGlzLmV4dHJhID0gMDsgICAgICAgICAgICAgLyogZXh0cmEgYml0cyBuZWVkZWQgKi8KCiAgICAvKiBmaXhlZCBhbmQgZHluYW1pYyBjb2RlIHRhYmxlcyAqLwogICAgdGhpcy5sZW5jb2RlID0gbnVsbDsgICAgICAgICAgLyogc3RhcnRpbmcgdGFibGUgZm9yIGxlbmd0aC9saXRlcmFsIGNvZGVzICovCiAgICB0aGlzLmRpc3Rjb2RlID0gbnVsbDsgICAgICAgICAvKiBzdGFydGluZyB0YWJsZSBmb3IgZGlzdGFuY2UgY29kZXMgKi8KICAgIHRoaXMubGVuYml0cyA9IDA7ICAgICAgICAgICAvKiBpbmRleCBiaXRzIGZvciBsZW5jb2RlICovCiAgICB0aGlzLmRpc3RiaXRzID0gMDsgICAgICAgICAgLyogaW5kZXggYml0cyBmb3IgZGlzdGNvZGUgKi8KCiAgICAvKiBkeW5hbWljIHRhYmxlIGJ1aWxkaW5nICovCiAgICB0aGlzLm5jb2RlID0gMDsgICAgICAgICAgICAgLyogbnVtYmVyIG9mIGNvZGUgbGVuZ3RoIGNvZGUgbGVuZ3RocyAqLwogICAgdGhpcy5ubGVuID0gMDsgICAgICAgICAgICAgIC8qIG51bWJlciBvZiBsZW5ndGggY29kZSBsZW5ndGhzICovCiAgICB0aGlzLm5kaXN0ID0gMDsgICAgICAgICAgICAgLyogbnVtYmVyIG9mIGRpc3RhbmNlIGNvZGUgbGVuZ3RocyAqLwogICAgdGhpcy5oYXZlID0gMDsgICAgICAgICAgICAgIC8qIG51bWJlciBvZiBjb2RlIGxlbmd0aHMgaW4gbGVuc1tdICovCiAgICB0aGlzLm5leHQgPSBudWxsOyAgICAgICAgICAgICAgLyogbmV4dCBhdmFpbGFibGUgc3BhY2UgaW4gY29kZXNbXSAqLwoKICAgIHRoaXMubGVucyA9IG5ldyBVaW50MTZBcnJheSgzMjApOyAvKiB0ZW1wb3Jhcnkgc3RvcmFnZSBmb3IgY29kZSBsZW5ndGhzICovCiAgICB0aGlzLndvcmsgPSBuZXcgVWludDE2QXJyYXkoMjg4KTsgLyogd29yayBhcmVhIGZvciBjb2RlIHRhYmxlIGJ1aWxkaW5nICovCgogICAgLyoKICAgICBiZWNhdXNlIHdlIGRvbid0IGhhdmUgcG9pbnRlcnMgaW4ganMsIHdlIHVzZSBsZW5jb2RlIGFuZCBkaXN0Y29kZSBkaXJlY3RseQogICAgIGFzIGJ1ZmZlcnMgc28gd2UgZG9uJ3QgbmVlZCBjb2RlcwogICAgKi8KICAgIC8vdGhpcy5jb2RlcyA9IG5ldyBJbnQzMkFycmF5KEVOT1VHSCk7ICAgICAgIC8qIHNwYWNlIGZvciBjb2RlIHRhYmxlcyAqLwogICAgdGhpcy5sZW5keW4gPSBudWxsOyAgICAgICAgICAgICAgLyogZHluYW1pYyB0YWJsZSBmb3IgbGVuZ3RoL2xpdGVyYWwgY29kZXMgKEpTIHNwZWNpZmljKSAqLwogICAgdGhpcy5kaXN0ZHluID0gbnVsbDsgICAgICAgICAgICAgLyogZHluYW1pYyB0YWJsZSBmb3IgZGlzdGFuY2UgY29kZXMgKEpTIHNwZWNpZmljKSAqLwogICAgdGhpcy5zYW5lID0gMDsgICAgICAgICAgICAgICAgICAgLyogaWYgZmFsc2UsIGFsbG93IGludmFsaWQgZGlzdGFuY2UgdG9vIGZhciAqLwogICAgdGhpcy5iYWNrID0gMDsgICAgICAgICAgICAgICAgICAgLyogYml0cyBiYWNrIG9mIGxhc3QgdW5wcm9jZXNzZWQgbGVuZ3RoL2xpdCAqLwogICAgdGhpcy53YXMgPSAwOyAgICAgICAgICAgICAgICAgICAgLyogaW5pdGlhbCBsZW5ndGggb2YgbWF0Y2ggKi8KICB9CgoKICBjb25zdCBpbmZsYXRlUmVzZXRLZWVwID0gKHN0cm0pID0+IHsKCiAgICBpZiAoIXN0cm0gfHwgIXN0cm0uc3RhdGUpIHsgcmV0dXJuIFpfU1RSRUFNX0VSUk9SJDE7IH0KICAgIGNvbnN0IHN0YXRlID0gc3RybS5zdGF0ZTsKICAgIHN0cm0udG90YWxfaW4gPSBzdHJtLnRvdGFsX291dCA9IHN0YXRlLnRvdGFsID0gMDsKICAgIHN0cm0ubXNnID0gJyc7IC8qWl9OVUxMKi8KICAgIGlmIChzdGF0ZS53cmFwKSB7ICAgICAgIC8qIHRvIHN1cHBvcnQgaWxsLWNvbmNlaXZlZCBKYXZhIHRlc3Qgc3VpdGUgKi8KICAgICAgc3RybS5hZGxlciA9IHN0YXRlLndyYXAgJiAxOwogICAgfQogICAgc3RhdGUubW9kZSA9IEhFQUQ7CiAgICBzdGF0ZS5sYXN0ID0gMDsKICAgIHN0YXRlLmhhdmVkaWN0ID0gMDsKICAgIHN0YXRlLmRtYXggPSAzMjc2ODsKICAgIHN0YXRlLmhlYWQgPSBudWxsLypaX05VTEwqLzsKICAgIHN0YXRlLmhvbGQgPSAwOwogICAgc3RhdGUuYml0cyA9IDA7CiAgICAvL3N0YXRlLmxlbmNvZGUgPSBzdGF0ZS5kaXN0Y29kZSA9IHN0YXRlLm5leHQgPSBzdGF0ZS5jb2RlczsKICAgIHN0YXRlLmxlbmNvZGUgPSBzdGF0ZS5sZW5keW4gPSBuZXcgSW50MzJBcnJheShFTk9VR0hfTEVOUyk7CiAgICBzdGF0ZS5kaXN0Y29kZSA9IHN0YXRlLmRpc3RkeW4gPSBuZXcgSW50MzJBcnJheShFTk9VR0hfRElTVFMpOwoKICAgIHN0YXRlLnNhbmUgPSAxOwogICAgc3RhdGUuYmFjayA9IC0xOwogICAgLy9UcmFjZXYoKHN0ZGVyciwgImluZmxhdGU6IHJlc2V0XG4iKSk7CiAgICByZXR1cm4gWl9PSyQxOwogIH07CgoKICBjb25zdCBpbmZsYXRlUmVzZXQgPSAoc3RybSkgPT4gewoKICAgIGlmICghc3RybSB8fCAhc3RybS5zdGF0ZSkgeyByZXR1cm4gWl9TVFJFQU1fRVJST1IkMTsgfQogICAgY29uc3Qgc3RhdGUgPSBzdHJtLnN0YXRlOwogICAgc3RhdGUud3NpemUgPSAwOwogICAgc3RhdGUud2hhdmUgPSAwOwogICAgc3RhdGUud25leHQgPSAwOwogICAgcmV0dXJuIGluZmxhdGVSZXNldEtlZXAoc3RybSk7CgogIH07CgoKICBjb25zdCBpbmZsYXRlUmVzZXQyID0gKHN0cm0sIHdpbmRvd0JpdHMpID0+IHsKICAgIGxldCB3cmFwOwoKICAgIC8qIGdldCB0aGUgc3RhdGUgKi8KICAgIGlmICghc3RybSB8fCAhc3RybS5zdGF0ZSkgeyByZXR1cm4gWl9TVFJFQU1fRVJST1IkMTsgfQogICAgY29uc3Qgc3RhdGUgPSBzdHJtLnN0YXRlOwoKICAgIC8qIGV4dHJhY3Qgd3JhcCByZXF1ZXN0IGZyb20gd2luZG93Qml0cyBwYXJhbWV0ZXIgKi8KICAgIGlmICh3aW5kb3dCaXRzIDwgMCkgewogICAgICB3cmFwID0gMDsKICAgICAgd2luZG93Qml0cyA9IC13aW5kb3dCaXRzOwogICAgfQogICAgZWxzZSB7CiAgICAgIHdyYXAgPSAod2luZG93Qml0cyA+PiA0KSArIDE7CiAgICAgIGlmICh3aW5kb3dCaXRzIDwgNDgpIHsKICAgICAgICB3aW5kb3dCaXRzICY9IDE1OwogICAgICB9CiAgICB9CgogICAgLyogc2V0IG51bWJlciBvZiB3aW5kb3cgYml0cywgZnJlZSB3aW5kb3cgaWYgZGlmZmVyZW50ICovCiAgICBpZiAod2luZG93Qml0cyAmJiAod2luZG93Qml0cyA8IDggfHwgd2luZG93Qml0cyA+IDE1KSkgewogICAgICByZXR1cm4gWl9TVFJFQU1fRVJST1IkMTsKICAgIH0KICAgIGlmIChzdGF0ZS53aW5kb3cgIT09IG51bGwgJiYgc3RhdGUud2JpdHMgIT09IHdpbmRvd0JpdHMpIHsKICAgICAgc3RhdGUud2luZG93ID0gbnVsbDsKICAgIH0KCiAgICAvKiB1cGRhdGUgc3RhdGUgYW5kIHJlc2V0IHRoZSByZXN0IG9mIGl0ICovCiAgICBzdGF0ZS53cmFwID0gd3JhcDsKICAgIHN0YXRlLndiaXRzID0gd2luZG93Qml0czsKICAgIHJldHVybiBpbmZsYXRlUmVzZXQoc3RybSk7CiAgfTsKCgogIGNvbnN0IGluZmxhdGVJbml0MiA9IChzdHJtLCB3aW5kb3dCaXRzKSA9PiB7CgogICAgaWYgKCFzdHJtKSB7IHJldHVybiBaX1NUUkVBTV9FUlJPUiQxOyB9CiAgICAvL3N0cm0ubXNnID0gWl9OVUxMOyAgICAgICAgICAgICAgICAgLyogaW4gY2FzZSB3ZSByZXR1cm4gYW4gZXJyb3IgKi8KCiAgICBjb25zdCBzdGF0ZSA9IG5ldyBJbmZsYXRlU3RhdGUoKTsKCiAgICAvL2lmIChzdGF0ZSA9PT0gWl9OVUxMKSByZXR1cm4gWl9NRU1fRVJST1I7CiAgICAvL1RyYWNldigoc3RkZXJyLCAiaW5mbGF0ZTogYWxsb2NhdGVkXG4iKSk7CiAgICBzdHJtLnN0YXRlID0gc3RhdGU7CiAgICBzdGF0ZS53aW5kb3cgPSBudWxsLypaX05VTEwqLzsKICAgIGNvbnN0IHJldCA9IGluZmxhdGVSZXNldDIoc3RybSwgd2luZG93Qml0cyk7CiAgICBpZiAocmV0ICE9PSBaX09LJDEpIHsKICAgICAgc3RybS5zdGF0ZSA9IG51bGwvKlpfTlVMTCovOwogICAgfQogICAgcmV0dXJuIHJldDsKICB9OwoKCiAgY29uc3QgaW5mbGF0ZUluaXQgPSAoc3RybSkgPT4gewoKICAgIHJldHVybiBpbmZsYXRlSW5pdDIoc3RybSwgREVGX1dCSVRTKTsKICB9OwoKCiAgLyoKICAgUmV0dXJuIHN0YXRlIHdpdGggbGVuZ3RoIGFuZCBkaXN0YW5jZSBkZWNvZGluZyB0YWJsZXMgYW5kIGluZGV4IHNpemVzIHNldCB0bwogICBmaXhlZCBjb2RlIGRlY29kaW5nLiAgTm9ybWFsbHkgdGhpcyByZXR1cm5zIGZpeGVkIHRhYmxlcyBmcm9tIGluZmZpeGVkLmguCiAgIElmIEJVSUxERklYRUQgaXMgZGVmaW5lZCwgdGhlbiBpbnN0ZWFkIHRoaXMgcm91dGluZSBidWlsZHMgdGhlIHRhYmxlcyB0aGUKICAgZmlyc3QgdGltZSBpdCdzIGNhbGxlZCwgYW5kIHJldHVybnMgdGhvc2UgdGFibGVzIHRoZSBmaXJzdCB0aW1lIGFuZAogICB0aGVyZWFmdGVyLiAgVGhpcyByZWR1Y2VzIHRoZSBzaXplIG9mIHRoZSBjb2RlIGJ5IGFib3V0IDJLIGJ5dGVzLCBpbgogICBleGNoYW5nZSBmb3IgYSBsaXR0bGUgZXhlY3V0aW9uIHRpbWUuICBIb3dldmVyLCBCVUlMREZJWEVEIHNob3VsZCBub3QgYmUKICAgdXNlZCBmb3IgdGhyZWFkZWQgYXBwbGljYXRpb25zLCBzaW5jZSB0aGUgcmV3cml0aW5nIG9mIHRoZSB0YWJsZXMgYW5kIHZpcmdpbgogICBtYXkgbm90IGJlIHRocmVhZC1zYWZlLgogICAqLwogIGxldCB2aXJnaW4gPSB0cnVlOwoKICBsZXQgbGVuZml4LCBkaXN0Zml4OyAvLyBXZSBoYXZlIG5vIHBvaW50ZXJzIGluIEpTLCBzbyBrZWVwIHRhYmxlcyBzZXBhcmF0ZQoKCiAgY29uc3QgZml4ZWR0YWJsZXMgPSAoc3RhdGUpID0+IHsKCiAgICAvKiBidWlsZCBmaXhlZCBodWZmbWFuIHRhYmxlcyBpZiBmaXJzdCBjYWxsIChtYXkgbm90IGJlIHRocmVhZCBzYWZlKSAqLwogICAgaWYgKHZpcmdpbikgewogICAgICBsZW5maXggPSBuZXcgSW50MzJBcnJheSg1MTIpOwogICAgICBkaXN0Zml4ID0gbmV3IEludDMyQXJyYXkoMzIpOwoKICAgICAgLyogbGl0ZXJhbC9sZW5ndGggdGFibGUgKi8KICAgICAgbGV0IHN5bSA9IDA7CiAgICAgIHdoaWxlIChzeW0gPCAxNDQpIHsgc3RhdGUubGVuc1tzeW0rK10gPSA4OyB9CiAgICAgIHdoaWxlIChzeW0gPCAyNTYpIHsgc3RhdGUubGVuc1tzeW0rK10gPSA5OyB9CiAgICAgIHdoaWxlIChzeW0gPCAyODApIHsgc3RhdGUubGVuc1tzeW0rK10gPSA3OyB9CiAgICAgIHdoaWxlIChzeW0gPCAyODgpIHsgc3RhdGUubGVuc1tzeW0rK10gPSA4OyB9CgogICAgICBpbmZ0cmVlcyhMRU5TLCAgc3RhdGUubGVucywgMCwgMjg4LCBsZW5maXgsICAgMCwgc3RhdGUud29yaywgeyBiaXRzOiA5IH0pOwoKICAgICAgLyogZGlzdGFuY2UgdGFibGUgKi8KICAgICAgc3ltID0gMDsKICAgICAgd2hpbGUgKHN5bSA8IDMyKSB7IHN0YXRlLmxlbnNbc3ltKytdID0gNTsgfQoKICAgICAgaW5mdHJlZXMoRElTVFMsIHN0YXRlLmxlbnMsIDAsIDMyLCAgIGRpc3RmaXgsIDAsIHN0YXRlLndvcmssIHsgYml0czogNSB9KTsKCiAgICAgIC8qIGRvIHRoaXMganVzdCBvbmNlICovCiAgICAgIHZpcmdpbiA9IGZhbHNlOwogICAgfQoKICAgIHN0YXRlLmxlbmNvZGUgPSBsZW5maXg7CiAgICBzdGF0ZS5sZW5iaXRzID0gOTsKICAgIHN0YXRlLmRpc3Rjb2RlID0gZGlzdGZpeDsKICAgIHN0YXRlLmRpc3RiaXRzID0gNTsKICB9OwoKCiAgLyoKICAgVXBkYXRlIHRoZSB3aW5kb3cgd2l0aCB0aGUgbGFzdCB3c2l6ZSAobm9ybWFsbHkgMzJLKSBieXRlcyB3cml0dGVuIGJlZm9yZQogICByZXR1cm5pbmcuICBJZiB3aW5kb3cgZG9lcyBub3QgZXhpc3QgeWV0LCBjcmVhdGUgaXQuICBUaGlzIGlzIG9ubHkgY2FsbGVkCiAgIHdoZW4gYSB3aW5kb3cgaXMgYWxyZWFkeSBpbiB1c2UsIG9yIHdoZW4gb3V0cHV0IGhhcyBiZWVuIHdyaXR0ZW4gZHVyaW5nIHRoaXMKICAgaW5mbGF0ZSBjYWxsLCBidXQgdGhlIGVuZCBvZiB0aGUgZGVmbGF0ZSBzdHJlYW0gaGFzIG5vdCBiZWVuIHJlYWNoZWQgeWV0LgogICBJdCBpcyBhbHNvIGNhbGxlZCB0byBjcmVhdGUgYSB3aW5kb3cgZm9yIGRpY3Rpb25hcnkgZGF0YSB3aGVuIGEgZGljdGlvbmFyeQogICBpcyBsb2FkZWQuCgogICBQcm92aWRpbmcgb3V0cHV0IGJ1ZmZlcnMgbGFyZ2VyIHRoYW4gMzJLIHRvIGluZmxhdGUoKSBzaG91bGQgcHJvdmlkZSBhIHNwZWVkCiAgIGFkdmFudGFnZSwgc2luY2Ugb25seSB0aGUgbGFzdCAzMksgb2Ygb3V0cHV0IGlzIGNvcGllZCB0byB0aGUgc2xpZGluZyB3aW5kb3cKICAgdXBvbiByZXR1cm4gZnJvbSBpbmZsYXRlKCksIGFuZCBzaW5jZSBhbGwgZGlzdGFuY2VzIGFmdGVyIHRoZSBmaXJzdCAzMksgb2YKICAgb3V0cHV0IHdpbGwgZmFsbCBpbiB0aGUgb3V0cHV0IGRhdGEsIG1ha2luZyBtYXRjaCBjb3BpZXMgc2ltcGxlciBhbmQgZmFzdGVyLgogICBUaGUgYWR2YW50YWdlIG1heSBiZSBkZXBlbmRlbnQgb24gdGhlIHNpemUgb2YgdGhlIHByb2Nlc3NvcidzIGRhdGEgY2FjaGVzLgogICAqLwogIGNvbnN0IHVwZGF0ZXdpbmRvdyA9IChzdHJtLCBzcmMsIGVuZCwgY29weSkgPT4gewoKICAgIGxldCBkaXN0OwogICAgY29uc3Qgc3RhdGUgPSBzdHJtLnN0YXRlOwoKICAgIC8qIGlmIGl0IGhhc24ndCBiZWVuIGRvbmUgYWxyZWFkeSwgYWxsb2NhdGUgc3BhY2UgZm9yIHRoZSB3aW5kb3cgKi8KICAgIGlmIChzdGF0ZS53aW5kb3cgPT09IG51bGwpIHsKICAgICAgc3RhdGUud3NpemUgPSAxIDw8IHN0YXRlLndiaXRzOwogICAgICBzdGF0ZS53bmV4dCA9IDA7CiAgICAgIHN0YXRlLndoYXZlID0gMDsKCiAgICAgIHN0YXRlLndpbmRvdyA9IG5ldyBVaW50OEFycmF5KHN0YXRlLndzaXplKTsKICAgIH0KCiAgICAvKiBjb3B5IHN0YXRlLT53c2l6ZSBvciBsZXNzIG91dHB1dCBieXRlcyBpbnRvIHRoZSBjaXJjdWxhciB3aW5kb3cgKi8KICAgIGlmIChjb3B5ID49IHN0YXRlLndzaXplKSB7CiAgICAgIHN0YXRlLndpbmRvdy5zZXQoc3JjLnN1YmFycmF5KGVuZCAtIHN0YXRlLndzaXplLCBlbmQpLCAwKTsKICAgICAgc3RhdGUud25leHQgPSAwOwogICAgICBzdGF0ZS53aGF2ZSA9IHN0YXRlLndzaXplOwogICAgfQogICAgZWxzZSB7CiAgICAgIGRpc3QgPSBzdGF0ZS53c2l6ZSAtIHN0YXRlLnduZXh0OwogICAgICBpZiAoZGlzdCA+IGNvcHkpIHsKICAgICAgICBkaXN0ID0gY29weTsKICAgICAgfQogICAgICAvL3ptZW1jcHkoc3RhdGUtPndpbmRvdyArIHN0YXRlLT53bmV4dCwgZW5kIC0gY29weSwgZGlzdCk7CiAgICAgIHN0YXRlLndpbmRvdy5zZXQoc3JjLnN1YmFycmF5KGVuZCAtIGNvcHksIGVuZCAtIGNvcHkgKyBkaXN0KSwgc3RhdGUud25leHQpOwogICAgICBjb3B5IC09IGRpc3Q7CiAgICAgIGlmIChjb3B5KSB7CiAgICAgICAgLy96bWVtY3B5KHN0YXRlLT53aW5kb3csIGVuZCAtIGNvcHksIGNvcHkpOwogICAgICAgIHN0YXRlLndpbmRvdy5zZXQoc3JjLnN1YmFycmF5KGVuZCAtIGNvcHksIGVuZCksIDApOwogICAgICAgIHN0YXRlLnduZXh0ID0gY29weTsKICAgICAgICBzdGF0ZS53aGF2ZSA9IHN0YXRlLndzaXplOwogICAgICB9CiAgICAgIGVsc2UgewogICAgICAgIHN0YXRlLnduZXh0ICs9IGRpc3Q7CiAgICAgICAgaWYgKHN0YXRlLnduZXh0ID09PSBzdGF0ZS53c2l6ZSkgeyBzdGF0ZS53bmV4dCA9IDA7IH0KICAgICAgICBpZiAoc3RhdGUud2hhdmUgPCBzdGF0ZS53c2l6ZSkgeyBzdGF0ZS53aGF2ZSArPSBkaXN0OyB9CiAgICAgIH0KICAgIH0KICAgIHJldHVybiAwOwogIH07CgoKICBjb25zdCBpbmZsYXRlJDIgPSAoc3RybSwgZmx1c2gpID0+IHsKCiAgICBsZXQgc3RhdGU7CiAgICBsZXQgaW5wdXQsIG91dHB1dDsgICAgICAgICAgLy8gaW5wdXQvb3V0cHV0IGJ1ZmZlcnMKICAgIGxldCBuZXh0OyAgICAgICAgICAgICAgICAgICAvKiBuZXh0IGlucHV0IElOREVYICovCiAgICBsZXQgcHV0OyAgICAgICAgICAgICAgICAgICAgLyogbmV4dCBvdXRwdXQgSU5ERVggKi8KICAgIGxldCBoYXZlLCBsZWZ0OyAgICAgICAgICAgICAvKiBhdmFpbGFibGUgaW5wdXQgYW5kIG91dHB1dCAqLwogICAgbGV0IGhvbGQ7ICAgICAgICAgICAgICAgICAgIC8qIGJpdCBidWZmZXIgKi8KICAgIGxldCBiaXRzOyAgICAgICAgICAgICAgICAgICAvKiBiaXRzIGluIGJpdCBidWZmZXIgKi8KICAgIGxldCBfaW4sIF9vdXQ7ICAgICAgICAgICAgICAvKiBzYXZlIHN0YXJ0aW5nIGF2YWlsYWJsZSBpbnB1dCBhbmQgb3V0cHV0ICovCiAgICBsZXQgY29weTsgICAgICAgICAgICAgICAgICAgLyogbnVtYmVyIG9mIHN0b3JlZCBvciBtYXRjaCBieXRlcyB0byBjb3B5ICovCiAgICBsZXQgZnJvbTsgICAgICAgICAgICAgICAgICAgLyogd2hlcmUgdG8gY29weSBtYXRjaCBieXRlcyBmcm9tICovCiAgICBsZXQgZnJvbV9zb3VyY2U7CiAgICBsZXQgaGVyZSA9IDA7ICAgICAgICAgICAgICAgLyogY3VycmVudCBkZWNvZGluZyB0YWJsZSBlbnRyeSAqLwogICAgbGV0IGhlcmVfYml0cywgaGVyZV9vcCwgaGVyZV92YWw7IC8vIHBha2VkICJoZXJlIiBkZW5vcm1hbGl6ZWQgKEpTIHNwZWNpZmljKQogICAgLy9sZXQgbGFzdDsgICAgICAgICAgICAgICAgICAgLyogcGFyZW50IHRhYmxlIGVudHJ5ICovCiAgICBsZXQgbGFzdF9iaXRzLCBsYXN0X29wLCBsYXN0X3ZhbDsgLy8gcGFrZWQgImxhc3QiIGRlbm9ybWFsaXplZCAoSlMgc3BlY2lmaWMpCiAgICBsZXQgbGVuOyAgICAgICAgICAgICAgICAgICAgLyogbGVuZ3RoIHRvIGNvcHkgZm9yIHJlcGVhdHMsIGJpdHMgdG8gZHJvcCAqLwogICAgbGV0IHJldDsgICAgICAgICAgICAgICAgICAgIC8qIHJldHVybiBjb2RlICovCiAgICBjb25zdCBoYnVmID0gbmV3IFVpbnQ4QXJyYXkoNCk7ICAgIC8qIGJ1ZmZlciBmb3IgZ3ppcCBoZWFkZXIgY3JjIGNhbGN1bGF0aW9uICovCiAgICBsZXQgb3B0czsKCiAgICBsZXQgbjsgLy8gdGVtcG9yYXJ5IHZhcmlhYmxlIGZvciBORUVEX0JJVFMKCiAgICBjb25zdCBvcmRlciA9IC8qIHBlcm11dGF0aW9uIG9mIGNvZGUgbGVuZ3RocyAqLwogICAgICBuZXcgVWludDhBcnJheShbIDE2LCAxNywgMTgsIDAsIDgsIDcsIDksIDYsIDEwLCA1LCAxMSwgNCwgMTIsIDMsIDEzLCAyLCAxNCwgMSwgMTUgXSk7CgoKICAgIGlmICghc3RybSB8fCAhc3RybS5zdGF0ZSB8fCAhc3RybS5vdXRwdXQgfHwKICAgICAgICAoIXN0cm0uaW5wdXQgJiYgc3RybS5hdmFpbF9pbiAhPT0gMCkpIHsKICAgICAgcmV0dXJuIFpfU1RSRUFNX0VSUk9SJDE7CiAgICB9CgogICAgc3RhdGUgPSBzdHJtLnN0YXRlOwogICAgaWYgKHN0YXRlLm1vZGUgPT09IFRZUEUpIHsgc3RhdGUubW9kZSA9IFRZUEVETzsgfSAgICAvKiBza2lwIGNoZWNrICovCgoKICAgIC8vLS0tIExPQUQoKSAtLS0KICAgIHB1dCA9IHN0cm0ubmV4dF9vdXQ7CiAgICBvdXRwdXQgPSBzdHJtLm91dHB1dDsKICAgIGxlZnQgPSBzdHJtLmF2YWlsX291dDsKICAgIG5leHQgPSBzdHJtLm5leHRfaW47CiAgICBpbnB1dCA9IHN0cm0uaW5wdXQ7CiAgICBoYXZlID0gc3RybS5hdmFpbF9pbjsKICAgIGhvbGQgPSBzdGF0ZS5ob2xkOwogICAgYml0cyA9IHN0YXRlLmJpdHM7CiAgICAvLy0tLQoKICAgIF9pbiA9IGhhdmU7CiAgICBfb3V0ID0gbGVmdDsKICAgIHJldCA9IFpfT0skMTsKCiAgICBpbmZfbGVhdmU6IC8vIGdvdG8gZW11bGF0aW9uCiAgICBmb3IgKDs7KSB7CiAgICAgIHN3aXRjaCAoc3RhdGUubW9kZSkgewogICAgICAgIGNhc2UgSEVBRDoKICAgICAgICAgIGlmIChzdGF0ZS53cmFwID09PSAwKSB7CiAgICAgICAgICAgIHN0YXRlLm1vZGUgPSBUWVBFRE87CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgICAgLy89PT0gTkVFREJJVFMoMTYpOwogICAgICAgICAgd2hpbGUgKGJpdHMgPCAxNikgewogICAgICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH0KICAgICAgICAgICAgaGF2ZS0tOwogICAgICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0czsKICAgICAgICAgICAgYml0cyArPSA4OwogICAgICAgICAgfQogICAgICAgICAgLy89PT0vLwogICAgICAgICAgaWYgKChzdGF0ZS53cmFwICYgMikgJiYgaG9sZCA9PT0gMHg4YjFmKSB7ICAvKiBnemlwIGhlYWRlciAqLwogICAgICAgICAgICBzdGF0ZS5jaGVjayA9IDAvKmNyYzMyKDBMLCBaX05VTEwsIDApKi87CiAgICAgICAgICAgIC8vPT09IENSQzIoc3RhdGUuY2hlY2ssIGhvbGQpOwogICAgICAgICAgICBoYnVmWzBdID0gaG9sZCAmIDB4ZmY7CiAgICAgICAgICAgIGhidWZbMV0gPSAoaG9sZCA+Pj4gOCkgJiAweGZmOwogICAgICAgICAgICBzdGF0ZS5jaGVjayA9IGNyYzMyXzEoc3RhdGUuY2hlY2ssIGhidWYsIDIsIDApOwogICAgICAgICAgICAvLz09PS8vCgogICAgICAgICAgICAvLz09PSBJTklUQklUUygpOwogICAgICAgICAgICBob2xkID0gMDsKICAgICAgICAgICAgYml0cyA9IDA7CiAgICAgICAgICAgIC8vPT09Ly8KICAgICAgICAgICAgc3RhdGUubW9kZSA9IEZMQUdTOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICAgIHN0YXRlLmZsYWdzID0gMDsgICAgICAgICAgIC8qIGV4cGVjdCB6bGliIGhlYWRlciAqLwogICAgICAgICAgaWYgKHN0YXRlLmhlYWQpIHsKICAgICAgICAgICAgc3RhdGUuaGVhZC5kb25lID0gZmFsc2U7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoIShzdGF0ZS53cmFwICYgMSkgfHwgICAvKiBjaGVjayBpZiB6bGliIGhlYWRlciBhbGxvd2VkICovCiAgICAgICAgICAgICgoKGhvbGQgJiAweGZmKS8qQklUUyg4KSovIDw8IDgpICsgKGhvbGQgPj4gOCkpICUgMzEpIHsKICAgICAgICAgICAgc3RybS5tc2cgPSAnaW5jb3JyZWN0IGhlYWRlciBjaGVjayc7CiAgICAgICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgICAgaWYgKChob2xkICYgMHgwZikvKkJJVFMoNCkqLyAhPT0gWl9ERUZMQVRFRCkgewogICAgICAgICAgICBzdHJtLm1zZyA9ICd1bmtub3duIGNvbXByZXNzaW9uIG1ldGhvZCc7CiAgICAgICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgICAgLy8tLS0gRFJPUEJJVFMoNCkgLS0tLy8KICAgICAgICAgIGhvbGQgPj4+PSA0OwogICAgICAgICAgYml0cyAtPSA0OwogICAgICAgICAgLy8tLS0vLwogICAgICAgICAgbGVuID0gKGhvbGQgJiAweDBmKS8qQklUUyg0KSovICsgODsKICAgICAgICAgIGlmIChzdGF0ZS53Yml0cyA9PT0gMCkgewogICAgICAgICAgICBzdGF0ZS53Yml0cyA9IGxlbjsKICAgICAgICAgIH0KICAgICAgICAgIGVsc2UgaWYgKGxlbiA+IHN0YXRlLndiaXRzKSB7CiAgICAgICAgICAgIHN0cm0ubXNnID0gJ2ludmFsaWQgd2luZG93IHNpemUnOwogICAgICAgICAgICBzdGF0ZS5tb2RlID0gQkFEOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KCiAgICAgICAgICAvLyAhISEgcGFrbyBwYXRjaC4gRm9yY2UgdXNlIGBvcHRpb25zLndpbmRvd0JpdHNgIGlmIHBhc3NlZC4KICAgICAgICAgIC8vIFJlcXVpcmVkIHRvIGFsd2F5cyB1c2UgbWF4IHdpbmRvdyBzaXplIGJ5IGRlZmF1bHQuCiAgICAgICAgICBzdGF0ZS5kbWF4ID0gMSA8PCBzdGF0ZS53Yml0czsKICAgICAgICAgIC8vc3RhdGUuZG1heCA9IDEgPDwgbGVuOwoKICAgICAgICAgIC8vVHJhY2V2KChzdGRlcnIsICJpbmZsYXRlOiAgIHpsaWIgaGVhZGVyIG9rXG4iKSk7CiAgICAgICAgICBzdHJtLmFkbGVyID0gc3RhdGUuY2hlY2sgPSAxLyphZGxlcjMyKDBMLCBaX05VTEwsIDApKi87CiAgICAgICAgICBzdGF0ZS5tb2RlID0gaG9sZCAmIDB4MjAwID8gRElDVElEIDogVFlQRTsKICAgICAgICAgIC8vPT09IElOSVRCSVRTKCk7CiAgICAgICAgICBob2xkID0gMDsKICAgICAgICAgIGJpdHMgPSAwOwogICAgICAgICAgLy89PT0vLwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSBGTEFHUzoKICAgICAgICAgIC8vPT09IE5FRURCSVRTKDE2KTsgKi8KICAgICAgICAgIHdoaWxlIChiaXRzIDwgMTYpIHsKICAgICAgICAgICAgaWYgKGhhdmUgPT09IDApIHsgYnJlYWsgaW5mX2xlYXZlOyB9CiAgICAgICAgICAgIGhhdmUtLTsKICAgICAgICAgICAgaG9sZCArPSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7CiAgICAgICAgICAgIGJpdHMgKz0gODsKICAgICAgICAgIH0KICAgICAgICAgIC8vPT09Ly8KICAgICAgICAgIHN0YXRlLmZsYWdzID0gaG9sZDsKICAgICAgICAgIGlmICgoc3RhdGUuZmxhZ3MgJiAweGZmKSAhPT0gWl9ERUZMQVRFRCkgewogICAgICAgICAgICBzdHJtLm1zZyA9ICd1bmtub3duIGNvbXByZXNzaW9uIG1ldGhvZCc7CiAgICAgICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgICAgaWYgKHN0YXRlLmZsYWdzICYgMHhlMDAwKSB7CiAgICAgICAgICAgIHN0cm0ubXNnID0gJ3Vua25vd24gaGVhZGVyIGZsYWdzIHNldCc7CiAgICAgICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgICAgaWYgKHN0YXRlLmhlYWQpIHsKICAgICAgICAgICAgc3RhdGUuaGVhZC50ZXh0ID0gKChob2xkID4+IDgpICYgMSk7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoc3RhdGUuZmxhZ3MgJiAweDAyMDApIHsKICAgICAgICAgICAgLy89PT0gQ1JDMihzdGF0ZS5jaGVjaywgaG9sZCk7CiAgICAgICAgICAgIGhidWZbMF0gPSBob2xkICYgMHhmZjsKICAgICAgICAgICAgaGJ1ZlsxXSA9IChob2xkID4+PiA4KSAmIDB4ZmY7CiAgICAgICAgICAgIHN0YXRlLmNoZWNrID0gY3JjMzJfMShzdGF0ZS5jaGVjaywgaGJ1ZiwgMiwgMCk7CiAgICAgICAgICAgIC8vPT09Ly8KICAgICAgICAgIH0KICAgICAgICAgIC8vPT09IElOSVRCSVRTKCk7CiAgICAgICAgICBob2xkID0gMDsKICAgICAgICAgIGJpdHMgPSAwOwogICAgICAgICAgLy89PT0vLwogICAgICAgICAgc3RhdGUubW9kZSA9IFRJTUU7CiAgICAgICAgICAvKiBmYWxscyB0aHJvdWdoICovCiAgICAgICAgY2FzZSBUSU1FOgogICAgICAgICAgLy89PT0gTkVFREJJVFMoMzIpOyAqLwogICAgICAgICAgd2hpbGUgKGJpdHMgPCAzMikgewogICAgICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH0KICAgICAgICAgICAgaGF2ZS0tOwogICAgICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0czsKICAgICAgICAgICAgYml0cyArPSA4OwogICAgICAgICAgfQogICAgICAgICAgLy89PT0vLwogICAgICAgICAgaWYgKHN0YXRlLmhlYWQpIHsKICAgICAgICAgICAgc3RhdGUuaGVhZC50aW1lID0gaG9sZDsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChzdGF0ZS5mbGFncyAmIDB4MDIwMCkgewogICAgICAgICAgICAvLz09PSBDUkM0KHN0YXRlLmNoZWNrLCBob2xkKQogICAgICAgICAgICBoYnVmWzBdID0gaG9sZCAmIDB4ZmY7CiAgICAgICAgICAgIGhidWZbMV0gPSAoaG9sZCA+Pj4gOCkgJiAweGZmOwogICAgICAgICAgICBoYnVmWzJdID0gKGhvbGQgPj4+IDE2KSAmIDB4ZmY7CiAgICAgICAgICAgIGhidWZbM10gPSAoaG9sZCA+Pj4gMjQpICYgMHhmZjsKICAgICAgICAgICAgc3RhdGUuY2hlY2sgPSBjcmMzMl8xKHN0YXRlLmNoZWNrLCBoYnVmLCA0LCAwKTsKICAgICAgICAgICAgLy89PT0KICAgICAgICAgIH0KICAgICAgICAgIC8vPT09IElOSVRCSVRTKCk7CiAgICAgICAgICBob2xkID0gMDsKICAgICAgICAgIGJpdHMgPSAwOwogICAgICAgICAgLy89PT0vLwogICAgICAgICAgc3RhdGUubW9kZSA9IE9TOwogICAgICAgICAgLyogZmFsbHMgdGhyb3VnaCAqLwogICAgICAgIGNhc2UgT1M6CiAgICAgICAgICAvLz09PSBORUVEQklUUygxNik7ICovCiAgICAgICAgICB3aGlsZSAoYml0cyA8IDE2KSB7CiAgICAgICAgICAgIGlmIChoYXZlID09PSAwKSB7IGJyZWFrIGluZl9sZWF2ZTsgfQogICAgICAgICAgICBoYXZlLS07CiAgICAgICAgICAgIGhvbGQgKz0gaW5wdXRbbmV4dCsrXSA8PCBiaXRzOwogICAgICAgICAgICBiaXRzICs9IDg7CiAgICAgICAgICB9CiAgICAgICAgICAvLz09PS8vCiAgICAgICAgICBpZiAoc3RhdGUuaGVhZCkgewogICAgICAgICAgICBzdGF0ZS5oZWFkLnhmbGFncyA9IChob2xkICYgMHhmZik7CiAgICAgICAgICAgIHN0YXRlLmhlYWQub3MgPSAoaG9sZCA+PiA4KTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChzdGF0ZS5mbGFncyAmIDB4MDIwMCkgewogICAgICAgICAgICAvLz09PSBDUkMyKHN0YXRlLmNoZWNrLCBob2xkKTsKICAgICAgICAgICAgaGJ1ZlswXSA9IGhvbGQgJiAweGZmOwogICAgICAgICAgICBoYnVmWzFdID0gKGhvbGQgPj4+IDgpICYgMHhmZjsKICAgICAgICAgICAgc3RhdGUuY2hlY2sgPSBjcmMzMl8xKHN0YXRlLmNoZWNrLCBoYnVmLCAyLCAwKTsKICAgICAgICAgICAgLy89PT0vLwogICAgICAgICAgfQogICAgICAgICAgLy89PT0gSU5JVEJJVFMoKTsKICAgICAgICAgIGhvbGQgPSAwOwogICAgICAgICAgYml0cyA9IDA7CiAgICAgICAgICAvLz09PS8vCiAgICAgICAgICBzdGF0ZS5tb2RlID0gRVhMRU47CiAgICAgICAgICAvKiBmYWxscyB0aHJvdWdoICovCiAgICAgICAgY2FzZSBFWExFTjoKICAgICAgICAgIGlmIChzdGF0ZS5mbGFncyAmIDB4MDQwMCkgewogICAgICAgICAgICAvLz09PSBORUVEQklUUygxNik7ICovCiAgICAgICAgICAgIHdoaWxlIChiaXRzIDwgMTYpIHsKICAgICAgICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH0KICAgICAgICAgICAgICBoYXZlLS07CiAgICAgICAgICAgICAgaG9sZCArPSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7CiAgICAgICAgICAgICAgYml0cyArPSA4OwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vPT09Ly8KICAgICAgICAgICAgc3RhdGUubGVuZ3RoID0gaG9sZDsKICAgICAgICAgICAgaWYgKHN0YXRlLmhlYWQpIHsKICAgICAgICAgICAgICBzdGF0ZS5oZWFkLmV4dHJhX2xlbiA9IGhvbGQ7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHN0YXRlLmZsYWdzICYgMHgwMjAwKSB7CiAgICAgICAgICAgICAgLy89PT0gQ1JDMihzdGF0ZS5jaGVjaywgaG9sZCk7CiAgICAgICAgICAgICAgaGJ1ZlswXSA9IGhvbGQgJiAweGZmOwogICAgICAgICAgICAgIGhidWZbMV0gPSAoaG9sZCA+Pj4gOCkgJiAweGZmOwogICAgICAgICAgICAgIHN0YXRlLmNoZWNrID0gY3JjMzJfMShzdGF0ZS5jaGVjaywgaGJ1ZiwgMiwgMCk7CiAgICAgICAgICAgICAgLy89PT0vLwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vPT09IElOSVRCSVRTKCk7CiAgICAgICAgICAgIGhvbGQgPSAwOwogICAgICAgICAgICBiaXRzID0gMDsKICAgICAgICAgICAgLy89PT0vLwogICAgICAgICAgfQogICAgICAgICAgZWxzZSBpZiAoc3RhdGUuaGVhZCkgewogICAgICAgICAgICBzdGF0ZS5oZWFkLmV4dHJhID0gbnVsbC8qWl9OVUxMKi87CiAgICAgICAgICB9CiAgICAgICAgICBzdGF0ZS5tb2RlID0gRVhUUkE7CiAgICAgICAgICAvKiBmYWxscyB0aHJvdWdoICovCiAgICAgICAgY2FzZSBFWFRSQToKICAgICAgICAgIGlmIChzdGF0ZS5mbGFncyAmIDB4MDQwMCkgewogICAgICAgICAgICBjb3B5ID0gc3RhdGUubGVuZ3RoOwogICAgICAgICAgICBpZiAoY29weSA+IGhhdmUpIHsgY29weSA9IGhhdmU7IH0KICAgICAgICAgICAgaWYgKGNvcHkpIHsKICAgICAgICAgICAgICBpZiAoc3RhdGUuaGVhZCkgewogICAgICAgICAgICAgICAgbGVuID0gc3RhdGUuaGVhZC5leHRyYV9sZW4gLSBzdGF0ZS5sZW5ndGg7CiAgICAgICAgICAgICAgICBpZiAoIXN0YXRlLmhlYWQuZXh0cmEpIHsKICAgICAgICAgICAgICAgICAgLy8gVXNlIHVudHlwZWQgYXJyYXkgZm9yIG1vcmUgY29udmVuaWVudCBwcm9jZXNzaW5nIGxhdGVyCiAgICAgICAgICAgICAgICAgIHN0YXRlLmhlYWQuZXh0cmEgPSBuZXcgVWludDhBcnJheShzdGF0ZS5oZWFkLmV4dHJhX2xlbik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBzdGF0ZS5oZWFkLmV4dHJhLnNldCgKICAgICAgICAgICAgICAgICAgaW5wdXQuc3ViYXJyYXkoCiAgICAgICAgICAgICAgICAgICAgbmV4dCwKICAgICAgICAgICAgICAgICAgICAvLyBleHRyYSBmaWVsZCBpcyBsaW1pdGVkIHRvIDY1NTM2IGJ5dGVzCiAgICAgICAgICAgICAgICAgICAgLy8gLSBubyBuZWVkIGZvciBhZGRpdGlvbmFsIHNpemUgY2hlY2sKICAgICAgICAgICAgICAgICAgICBuZXh0ICsgY29weQogICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgICAvKmxlbiArIGNvcHkgPiBzdGF0ZS5oZWFkLmV4dHJhX21heCAtIGxlbiA/IHN0YXRlLmhlYWQuZXh0cmFfbWF4IDogY29weSwqLwogICAgICAgICAgICAgICAgICBsZW4KICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAvL3ptZW1jcHkoc3RhdGUuaGVhZC5leHRyYSArIGxlbiwgbmV4dCwKICAgICAgICAgICAgICAgIC8vICAgICAgICBsZW4gKyBjb3B5ID4gc3RhdGUuaGVhZC5leHRyYV9tYXggPwogICAgICAgICAgICAgICAgLy8gICAgICAgIHN0YXRlLmhlYWQuZXh0cmFfbWF4IC0gbGVuIDogY29weSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmIChzdGF0ZS5mbGFncyAmIDB4MDIwMCkgewogICAgICAgICAgICAgICAgc3RhdGUuY2hlY2sgPSBjcmMzMl8xKHN0YXRlLmNoZWNrLCBpbnB1dCwgY29weSwgbmV4dCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGhhdmUgLT0gY29weTsKICAgICAgICAgICAgICBuZXh0ICs9IGNvcHk7CiAgICAgICAgICAgICAgc3RhdGUubGVuZ3RoIC09IGNvcHk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHN0YXRlLmxlbmd0aCkgeyBicmVhayBpbmZfbGVhdmU7IH0KICAgICAgICAgIH0KICAgICAgICAgIHN0YXRlLmxlbmd0aCA9IDA7CiAgICAgICAgICBzdGF0ZS5tb2RlID0gTkFNRTsKICAgICAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi8KICAgICAgICBjYXNlIE5BTUU6CiAgICAgICAgICBpZiAoc3RhdGUuZmxhZ3MgJiAweDA4MDApIHsKICAgICAgICAgICAgaWYgKGhhdmUgPT09IDApIHsgYnJlYWsgaW5mX2xlYXZlOyB9CiAgICAgICAgICAgIGNvcHkgPSAwOwogICAgICAgICAgICBkbyB7CiAgICAgICAgICAgICAgLy8gVE9ETzogMiBvciAxIGJ5dGVzPwogICAgICAgICAgICAgIGxlbiA9IGlucHV0W25leHQgKyBjb3B5KytdOwogICAgICAgICAgICAgIC8qIHVzZSBjb25zdGFudCBsaW1pdCBiZWNhdXNlIGluIGpzIHdlIHNob3VsZCBub3QgcHJlYWxsb2NhdGUgbWVtb3J5ICovCiAgICAgICAgICAgICAgaWYgKHN0YXRlLmhlYWQgJiYgbGVuICYmCiAgICAgICAgICAgICAgICAgIChzdGF0ZS5sZW5ndGggPCA2NTUzNiAvKnN0YXRlLmhlYWQubmFtZV9tYXgqLykpIHsKICAgICAgICAgICAgICAgIHN0YXRlLmhlYWQubmFtZSArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGxlbik7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IHdoaWxlIChsZW4gJiYgY29weSA8IGhhdmUpOwoKICAgICAgICAgICAgaWYgKHN0YXRlLmZsYWdzICYgMHgwMjAwKSB7CiAgICAgICAgICAgICAgc3RhdGUuY2hlY2sgPSBjcmMzMl8xKHN0YXRlLmNoZWNrLCBpbnB1dCwgY29weSwgbmV4dCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaGF2ZSAtPSBjb3B5OwogICAgICAgICAgICBuZXh0ICs9IGNvcHk7CiAgICAgICAgICAgIGlmIChsZW4pIHsgYnJlYWsgaW5mX2xlYXZlOyB9CiAgICAgICAgICB9CiAgICAgICAgICBlbHNlIGlmIChzdGF0ZS5oZWFkKSB7CiAgICAgICAgICAgIHN0YXRlLmhlYWQubmFtZSA9IG51bGw7CiAgICAgICAgICB9CiAgICAgICAgICBzdGF0ZS5sZW5ndGggPSAwOwogICAgICAgICAgc3RhdGUubW9kZSA9IENPTU1FTlQ7CiAgICAgICAgICAvKiBmYWxscyB0aHJvdWdoICovCiAgICAgICAgY2FzZSBDT01NRU5UOgogICAgICAgICAgaWYgKHN0YXRlLmZsYWdzICYgMHgxMDAwKSB7CiAgICAgICAgICAgIGlmIChoYXZlID09PSAwKSB7IGJyZWFrIGluZl9sZWF2ZTsgfQogICAgICAgICAgICBjb3B5ID0gMDsKICAgICAgICAgICAgZG8gewogICAgICAgICAgICAgIGxlbiA9IGlucHV0W25leHQgKyBjb3B5KytdOwogICAgICAgICAgICAgIC8qIHVzZSBjb25zdGFudCBsaW1pdCBiZWNhdXNlIGluIGpzIHdlIHNob3VsZCBub3QgcHJlYWxsb2NhdGUgbWVtb3J5ICovCiAgICAgICAgICAgICAgaWYgKHN0YXRlLmhlYWQgJiYgbGVuICYmCiAgICAgICAgICAgICAgICAgIChzdGF0ZS5sZW5ndGggPCA2NTUzNiAvKnN0YXRlLmhlYWQuY29tbV9tYXgqLykpIHsKICAgICAgICAgICAgICAgIHN0YXRlLmhlYWQuY29tbWVudCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGxlbik7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IHdoaWxlIChsZW4gJiYgY29weSA8IGhhdmUpOwogICAgICAgICAgICBpZiAoc3RhdGUuZmxhZ3MgJiAweDAyMDApIHsKICAgICAgICAgICAgICBzdGF0ZS5jaGVjayA9IGNyYzMyXzEoc3RhdGUuY2hlY2ssIGlucHV0LCBjb3B5LCBuZXh0KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBoYXZlIC09IGNvcHk7CiAgICAgICAgICAgIG5leHQgKz0gY29weTsKICAgICAgICAgICAgaWYgKGxlbikgeyBicmVhayBpbmZfbGVhdmU7IH0KICAgICAgICAgIH0KICAgICAgICAgIGVsc2UgaWYgKHN0YXRlLmhlYWQpIHsKICAgICAgICAgICAgc3RhdGUuaGVhZC5jb21tZW50ID0gbnVsbDsKICAgICAgICAgIH0KICAgICAgICAgIHN0YXRlLm1vZGUgPSBIQ1JDOwogICAgICAgICAgLyogZmFsbHMgdGhyb3VnaCAqLwogICAgICAgIGNhc2UgSENSQzoKICAgICAgICAgIGlmIChzdGF0ZS5mbGFncyAmIDB4MDIwMCkgewogICAgICAgICAgICAvLz09PSBORUVEQklUUygxNik7ICovCiAgICAgICAgICAgIHdoaWxlIChiaXRzIDwgMTYpIHsKICAgICAgICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH0KICAgICAgICAgICAgICBoYXZlLS07CiAgICAgICAgICAgICAgaG9sZCArPSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7CiAgICAgICAgICAgICAgYml0cyArPSA4OwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vPT09Ly8KICAgICAgICAgICAgaWYgKGhvbGQgIT09IChzdGF0ZS5jaGVjayAmIDB4ZmZmZikpIHsKICAgICAgICAgICAgICBzdHJtLm1zZyA9ICdoZWFkZXIgY3JjIG1pc21hdGNoJzsKICAgICAgICAgICAgICBzdGF0ZS5tb2RlID0gQkFEOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vPT09IElOSVRCSVRTKCk7CiAgICAgICAgICAgIGhvbGQgPSAwOwogICAgICAgICAgICBiaXRzID0gMDsKICAgICAgICAgICAgLy89PT0vLwogICAgICAgICAgfQogICAgICAgICAgaWYgKHN0YXRlLmhlYWQpIHsKICAgICAgICAgICAgc3RhdGUuaGVhZC5oY3JjID0gKChzdGF0ZS5mbGFncyA+PiA5KSAmIDEpOwogICAgICAgICAgICBzdGF0ZS5oZWFkLmRvbmUgPSB0cnVlOwogICAgICAgICAgfQogICAgICAgICAgc3RybS5hZGxlciA9IHN0YXRlLmNoZWNrID0gMDsKICAgICAgICAgIHN0YXRlLm1vZGUgPSBUWVBFOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSBESUNUSUQ6CiAgICAgICAgICAvLz09PSBORUVEQklUUygzMik7ICovCiAgICAgICAgICB3aGlsZSAoYml0cyA8IDMyKSB7CiAgICAgICAgICAgIGlmIChoYXZlID09PSAwKSB7IGJyZWFrIGluZl9sZWF2ZTsgfQogICAgICAgICAgICBoYXZlLS07CiAgICAgICAgICAgIGhvbGQgKz0gaW5wdXRbbmV4dCsrXSA8PCBiaXRzOwogICAgICAgICAgICBiaXRzICs9IDg7CiAgICAgICAgICB9CiAgICAgICAgICAvLz09PS8vCiAgICAgICAgICBzdHJtLmFkbGVyID0gc3RhdGUuY2hlY2sgPSB6c3dhcDMyKGhvbGQpOwogICAgICAgICAgLy89PT0gSU5JVEJJVFMoKTsKICAgICAgICAgIGhvbGQgPSAwOwogICAgICAgICAgYml0cyA9IDA7CiAgICAgICAgICAvLz09PS8vCiAgICAgICAgICBzdGF0ZS5tb2RlID0gRElDVDsKICAgICAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi8KICAgICAgICBjYXNlIERJQ1Q6CiAgICAgICAgICBpZiAoc3RhdGUuaGF2ZWRpY3QgPT09IDApIHsKICAgICAgICAgICAgLy8tLS0gUkVTVE9SRSgpIC0tLQogICAgICAgICAgICBzdHJtLm5leHRfb3V0ID0gcHV0OwogICAgICAgICAgICBzdHJtLmF2YWlsX291dCA9IGxlZnQ7CiAgICAgICAgICAgIHN0cm0ubmV4dF9pbiA9IG5leHQ7CiAgICAgICAgICAgIHN0cm0uYXZhaWxfaW4gPSBoYXZlOwogICAgICAgICAgICBzdGF0ZS5ob2xkID0gaG9sZDsKICAgICAgICAgICAgc3RhdGUuYml0cyA9IGJpdHM7CiAgICAgICAgICAgIC8vLS0tCiAgICAgICAgICAgIHJldHVybiBaX05FRURfRElDVCQxOwogICAgICAgICAgfQogICAgICAgICAgc3RybS5hZGxlciA9IHN0YXRlLmNoZWNrID0gMS8qYWRsZXIzMigwTCwgWl9OVUxMLCAwKSovOwogICAgICAgICAgc3RhdGUubW9kZSA9IFRZUEU7CiAgICAgICAgICAvKiBmYWxscyB0aHJvdWdoICovCiAgICAgICAgY2FzZSBUWVBFOgogICAgICAgICAgaWYgKGZsdXNoID09PSBaX0JMT0NLIHx8IGZsdXNoID09PSBaX1RSRUVTKSB7IGJyZWFrIGluZl9sZWF2ZTsgfQogICAgICAgICAgLyogZmFsbHMgdGhyb3VnaCAqLwogICAgICAgIGNhc2UgVFlQRURPOgogICAgICAgICAgaWYgKHN0YXRlLmxhc3QpIHsKICAgICAgICAgICAgLy8tLS0gQllURUJJVFMoKSAtLS0vLwogICAgICAgICAgICBob2xkID4+Pj0gYml0cyAmIDc7CiAgICAgICAgICAgIGJpdHMgLT0gYml0cyAmIDc7CiAgICAgICAgICAgIC8vLS0tLy8KICAgICAgICAgICAgc3RhdGUubW9kZSA9IENIRUNLOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICAgIC8vPT09IE5FRURCSVRTKDMpOyAqLwogICAgICAgICAgd2hpbGUgKGJpdHMgPCAzKSB7CiAgICAgICAgICAgIGlmIChoYXZlID09PSAwKSB7IGJyZWFrIGluZl9sZWF2ZTsgfQogICAgICAgICAgICBoYXZlLS07CiAgICAgICAgICAgIGhvbGQgKz0gaW5wdXRbbmV4dCsrXSA8PCBiaXRzOwogICAgICAgICAgICBiaXRzICs9IDg7CiAgICAgICAgICB9CiAgICAgICAgICAvLz09PS8vCiAgICAgICAgICBzdGF0ZS5sYXN0ID0gKGhvbGQgJiAweDAxKS8qQklUUygxKSovOwogICAgICAgICAgLy8tLS0gRFJPUEJJVFMoMSkgLS0tLy8KICAgICAgICAgIGhvbGQgPj4+PSAxOwogICAgICAgICAgYml0cyAtPSAxOwogICAgICAgICAgLy8tLS0vLwoKICAgICAgICAgIHN3aXRjaCAoKGhvbGQgJiAweDAzKS8qQklUUygyKSovKSB7CiAgICAgICAgICAgIGNhc2UgMDogICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIHN0b3JlZCBibG9jayAqLwogICAgICAgICAgICAgIC8vVHJhY2V2KChzdGRlcnIsICJpbmZsYXRlOiAgICAgc3RvcmVkIGJsb2NrJXNcbiIsCiAgICAgICAgICAgICAgLy8gICAgICAgIHN0YXRlLmxhc3QgPyAiIChsYXN0KSIgOiAiIikpOwogICAgICAgICAgICAgIHN0YXRlLm1vZGUgPSBTVE9SRUQ7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgMTogICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIGZpeGVkIGJsb2NrICovCiAgICAgICAgICAgICAgZml4ZWR0YWJsZXMoc3RhdGUpOwogICAgICAgICAgICAgIC8vVHJhY2V2KChzdGRlcnIsICJpbmZsYXRlOiAgICAgZml4ZWQgY29kZXMgYmxvY2slc1xuIiwKICAgICAgICAgICAgICAvLyAgICAgICAgc3RhdGUubGFzdCA/ICIgKGxhc3QpIiA6ICIiKSk7CiAgICAgICAgICAgICAgc3RhdGUubW9kZSA9IExFTl87ICAgICAgICAgICAgIC8qIGRlY29kZSBjb2RlcyAqLwogICAgICAgICAgICAgIGlmIChmbHVzaCA9PT0gWl9UUkVFUykgewogICAgICAgICAgICAgICAgLy8tLS0gRFJPUEJJVFMoMikgLS0tLy8KICAgICAgICAgICAgICAgIGhvbGQgPj4+PSAyOwogICAgICAgICAgICAgICAgYml0cyAtPSAyOwogICAgICAgICAgICAgICAgLy8tLS0vLwogICAgICAgICAgICAgICAgYnJlYWsgaW5mX2xlYXZlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAyOiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogZHluYW1pYyBibG9jayAqLwogICAgICAgICAgICAgIC8vVHJhY2V2KChzdGRlcnIsICJpbmZsYXRlOiAgICAgZHluYW1pYyBjb2RlcyBibG9jayVzXG4iLAogICAgICAgICAgICAgIC8vICAgICAgICBzdGF0ZS5sYXN0ID8gIiAobGFzdCkiIDogIiIpKTsKICAgICAgICAgICAgICBzdGF0ZS5tb2RlID0gVEFCTEU7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICBzdHJtLm1zZyA9ICdpbnZhbGlkIGJsb2NrIHR5cGUnOwogICAgICAgICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7CiAgICAgICAgICB9CiAgICAgICAgICAvLy0tLSBEUk9QQklUUygyKSAtLS0vLwogICAgICAgICAgaG9sZCA+Pj49IDI7CiAgICAgICAgICBiaXRzIC09IDI7CiAgICAgICAgICAvLy0tLS8vCiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlIFNUT1JFRDoKICAgICAgICAgIC8vLS0tIEJZVEVCSVRTKCkgLS0tLy8gLyogZ28gdG8gYnl0ZSBib3VuZGFyeSAqLwogICAgICAgICAgaG9sZCA+Pj49IGJpdHMgJiA3OwogICAgICAgICAgYml0cyAtPSBiaXRzICYgNzsKICAgICAgICAgIC8vLS0tLy8KICAgICAgICAgIC8vPT09IE5FRURCSVRTKDMyKTsgKi8KICAgICAgICAgIHdoaWxlIChiaXRzIDwgMzIpIHsKICAgICAgICAgICAgaWYgKGhhdmUgPT09IDApIHsgYnJlYWsgaW5mX2xlYXZlOyB9CiAgICAgICAgICAgIGhhdmUtLTsKICAgICAgICAgICAgaG9sZCArPSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7CiAgICAgICAgICAgIGJpdHMgKz0gODsKICAgICAgICAgIH0KICAgICAgICAgIC8vPT09Ly8KICAgICAgICAgIGlmICgoaG9sZCAmIDB4ZmZmZikgIT09ICgoaG9sZCA+Pj4gMTYpIF4gMHhmZmZmKSkgewogICAgICAgICAgICBzdHJtLm1zZyA9ICdpbnZhbGlkIHN0b3JlZCBibG9jayBsZW5ndGhzJzsKICAgICAgICAgICAgc3RhdGUubW9kZSA9IEJBRDsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgICBzdGF0ZS5sZW5ndGggPSBob2xkICYgMHhmZmZmOwogICAgICAgICAgLy9UcmFjZXYoKHN0ZGVyciwgImluZmxhdGU6ICAgICAgIHN0b3JlZCBsZW5ndGggJXVcbiIsCiAgICAgICAgICAvLyAgICAgICAgc3RhdGUubGVuZ3RoKSk7CiAgICAgICAgICAvLz09PSBJTklUQklUUygpOwogICAgICAgICAgaG9sZCA9IDA7CiAgICAgICAgICBiaXRzID0gMDsKICAgICAgICAgIC8vPT09Ly8KICAgICAgICAgIHN0YXRlLm1vZGUgPSBDT1BZXzsKICAgICAgICAgIGlmIChmbHVzaCA9PT0gWl9UUkVFUykgeyBicmVhayBpbmZfbGVhdmU7IH0KICAgICAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi8KICAgICAgICBjYXNlIENPUFlfOgogICAgICAgICAgc3RhdGUubW9kZSA9IENPUFk7CiAgICAgICAgICAvKiBmYWxscyB0aHJvdWdoICovCiAgICAgICAgY2FzZSBDT1BZOgogICAgICAgICAgY29weSA9IHN0YXRlLmxlbmd0aDsKICAgICAgICAgIGlmIChjb3B5KSB7CiAgICAgICAgICAgIGlmIChjb3B5ID4gaGF2ZSkgeyBjb3B5ID0gaGF2ZTsgfQogICAgICAgICAgICBpZiAoY29weSA+IGxlZnQpIHsgY29weSA9IGxlZnQ7IH0KICAgICAgICAgICAgaWYgKGNvcHkgPT09IDApIHsgYnJlYWsgaW5mX2xlYXZlOyB9CiAgICAgICAgICAgIC8vLS0tIHptZW1jcHkocHV0LCBuZXh0LCBjb3B5KTsgLS0tCiAgICAgICAgICAgIG91dHB1dC5zZXQoaW5wdXQuc3ViYXJyYXkobmV4dCwgbmV4dCArIGNvcHkpLCBwdXQpOwogICAgICAgICAgICAvLy0tLS8vCiAgICAgICAgICAgIGhhdmUgLT0gY29weTsKICAgICAgICAgICAgbmV4dCArPSBjb3B5OwogICAgICAgICAgICBsZWZ0IC09IGNvcHk7CiAgICAgICAgICAgIHB1dCArPSBjb3B5OwogICAgICAgICAgICBzdGF0ZS5sZW5ndGggLT0gY29weTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgICAvL1RyYWNldigoc3RkZXJyLCAiaW5mbGF0ZTogICAgICAgc3RvcmVkIGVuZFxuIikpOwogICAgICAgICAgc3RhdGUubW9kZSA9IFRZUEU7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlIFRBQkxFOgogICAgICAgICAgLy89PT0gTkVFREJJVFMoMTQpOyAqLwogICAgICAgICAgd2hpbGUgKGJpdHMgPCAxNCkgewogICAgICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH0KICAgICAgICAgICAgaGF2ZS0tOwogICAgICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0czsKICAgICAgICAgICAgYml0cyArPSA4OwogICAgICAgICAgfQogICAgICAgICAgLy89PT0vLwogICAgICAgICAgc3RhdGUubmxlbiA9IChob2xkICYgMHgxZikvKkJJVFMoNSkqLyArIDI1NzsKICAgICAgICAgIC8vLS0tIERST1BCSVRTKDUpIC0tLS8vCiAgICAgICAgICBob2xkID4+Pj0gNTsKICAgICAgICAgIGJpdHMgLT0gNTsKICAgICAgICAgIC8vLS0tLy8KICAgICAgICAgIHN0YXRlLm5kaXN0ID0gKGhvbGQgJiAweDFmKS8qQklUUyg1KSovICsgMTsKICAgICAgICAgIC8vLS0tIERST1BCSVRTKDUpIC0tLS8vCiAgICAgICAgICBob2xkID4+Pj0gNTsKICAgICAgICAgIGJpdHMgLT0gNTsKICAgICAgICAgIC8vLS0tLy8KICAgICAgICAgIHN0YXRlLm5jb2RlID0gKGhvbGQgJiAweDBmKS8qQklUUyg0KSovICsgNDsKICAgICAgICAgIC8vLS0tIERST1BCSVRTKDQpIC0tLS8vCiAgICAgICAgICBob2xkID4+Pj0gNDsKICAgICAgICAgIGJpdHMgLT0gNDsKICAgICAgICAgIC8vLS0tLy8KICAvLyNpZm5kZWYgUEtaSVBfQlVHX1dPUktBUk9VTkQKICAgICAgICAgIGlmIChzdGF0ZS5ubGVuID4gMjg2IHx8IHN0YXRlLm5kaXN0ID4gMzApIHsKICAgICAgICAgICAgc3RybS5tc2cgPSAndG9vIG1hbnkgbGVuZ3RoIG9yIGRpc3RhbmNlIHN5bWJvbHMnOwogICAgICAgICAgICBzdGF0ZS5tb2RlID0gQkFEOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAvLyNlbmRpZgogICAgICAgICAgLy9UcmFjZXYoKHN0ZGVyciwgImluZmxhdGU6ICAgICAgIHRhYmxlIHNpemVzIG9rXG4iKSk7CiAgICAgICAgICBzdGF0ZS5oYXZlID0gMDsKICAgICAgICAgIHN0YXRlLm1vZGUgPSBMRU5MRU5TOwogICAgICAgICAgLyogZmFsbHMgdGhyb3VnaCAqLwogICAgICAgIGNhc2UgTEVOTEVOUzoKICAgICAgICAgIHdoaWxlIChzdGF0ZS5oYXZlIDwgc3RhdGUubmNvZGUpIHsKICAgICAgICAgICAgLy89PT0gTkVFREJJVFMoMyk7CiAgICAgICAgICAgIHdoaWxlIChiaXRzIDwgMykgewogICAgICAgICAgICAgIGlmIChoYXZlID09PSAwKSB7IGJyZWFrIGluZl9sZWF2ZTsgfQogICAgICAgICAgICAgIGhhdmUtLTsKICAgICAgICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0czsKICAgICAgICAgICAgICBiaXRzICs9IDg7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy89PT0vLwogICAgICAgICAgICBzdGF0ZS5sZW5zW29yZGVyW3N0YXRlLmhhdmUrK11dID0gKGhvbGQgJiAweDA3KTsvL0JJVFMoMyk7CiAgICAgICAgICAgIC8vLS0tIERST1BCSVRTKDMpIC0tLS8vCiAgICAgICAgICAgIGhvbGQgPj4+PSAzOwogICAgICAgICAgICBiaXRzIC09IDM7CiAgICAgICAgICAgIC8vLS0tLy8KICAgICAgICAgIH0KICAgICAgICAgIHdoaWxlIChzdGF0ZS5oYXZlIDwgMTkpIHsKICAgICAgICAgICAgc3RhdGUubGVuc1tvcmRlcltzdGF0ZS5oYXZlKytdXSA9IDA7CiAgICAgICAgICB9CiAgICAgICAgICAvLyBXZSBoYXZlIHNlcGFyYXRlIHRhYmxlcyAmIG5vIHBvaW50ZXJzLiAyIGNvbW1lbnRlZCBsaW5lcyBiZWxvdyBub3QgbmVlZGVkLgogICAgICAgICAgLy9zdGF0ZS5uZXh0ID0gc3RhdGUuY29kZXM7CiAgICAgICAgICAvL3N0YXRlLmxlbmNvZGUgPSBzdGF0ZS5uZXh0OwogICAgICAgICAgLy8gU3dpdGNoIHRvIHVzZSBkeW5hbWljIHRhYmxlCiAgICAgICAgICBzdGF0ZS5sZW5jb2RlID0gc3RhdGUubGVuZHluOwogICAgICAgICAgc3RhdGUubGVuYml0cyA9IDc7CgogICAgICAgICAgb3B0cyA9IHsgYml0czogc3RhdGUubGVuYml0cyB9OwogICAgICAgICAgcmV0ID0gaW5mdHJlZXMoQ09ERVMsIHN0YXRlLmxlbnMsIDAsIDE5LCBzdGF0ZS5sZW5jb2RlLCAwLCBzdGF0ZS53b3JrLCBvcHRzKTsKICAgICAgICAgIHN0YXRlLmxlbmJpdHMgPSBvcHRzLmJpdHM7CgogICAgICAgICAgaWYgKHJldCkgewogICAgICAgICAgICBzdHJtLm1zZyA9ICdpbnZhbGlkIGNvZGUgbGVuZ3RocyBzZXQnOwogICAgICAgICAgICBzdGF0ZS5tb2RlID0gQkFEOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICAgIC8vVHJhY2V2KChzdGRlcnIsICJpbmZsYXRlOiAgICAgICBjb2RlIGxlbmd0aHMgb2tcbiIpKTsKICAgICAgICAgIHN0YXRlLmhhdmUgPSAwOwogICAgICAgICAgc3RhdGUubW9kZSA9IENPREVMRU5TOwogICAgICAgICAgLyogZmFsbHMgdGhyb3VnaCAqLwogICAgICAgIGNhc2UgQ09ERUxFTlM6CiAgICAgICAgICB3aGlsZSAoc3RhdGUuaGF2ZSA8IHN0YXRlLm5sZW4gKyBzdGF0ZS5uZGlzdCkgewogICAgICAgICAgICBmb3IgKDs7KSB7CiAgICAgICAgICAgICAgaGVyZSA9IHN0YXRlLmxlbmNvZGVbaG9sZCAmICgoMSA8PCBzdGF0ZS5sZW5iaXRzKSAtIDEpXTsvKkJJVFMoc3RhdGUubGVuYml0cykqLwogICAgICAgICAgICAgIGhlcmVfYml0cyA9IGhlcmUgPj4+IDI0OwogICAgICAgICAgICAgIGhlcmVfb3AgPSAoaGVyZSA+Pj4gMTYpICYgMHhmZjsKICAgICAgICAgICAgICBoZXJlX3ZhbCA9IGhlcmUgJiAweGZmZmY7CgogICAgICAgICAgICAgIGlmICgoaGVyZV9iaXRzKSA8PSBiaXRzKSB7IGJyZWFrOyB9CiAgICAgICAgICAgICAgLy8tLS0gUFVMTEJZVEUoKSAtLS0vLwogICAgICAgICAgICAgIGlmIChoYXZlID09PSAwKSB7IGJyZWFrIGluZl9sZWF2ZTsgfQogICAgICAgICAgICAgIGhhdmUtLTsKICAgICAgICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0czsKICAgICAgICAgICAgICBiaXRzICs9IDg7CiAgICAgICAgICAgICAgLy8tLS0vLwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChoZXJlX3ZhbCA8IDE2KSB7CiAgICAgICAgICAgICAgLy8tLS0gRFJPUEJJVFMoaGVyZS5iaXRzKSAtLS0vLwogICAgICAgICAgICAgIGhvbGQgPj4+PSBoZXJlX2JpdHM7CiAgICAgICAgICAgICAgYml0cyAtPSBoZXJlX2JpdHM7CiAgICAgICAgICAgICAgLy8tLS0vLwogICAgICAgICAgICAgIHN0YXRlLmxlbnNbc3RhdGUuaGF2ZSsrXSA9IGhlcmVfdmFsOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgIGlmIChoZXJlX3ZhbCA9PT0gMTYpIHsKICAgICAgICAgICAgICAgIC8vPT09IE5FRURCSVRTKGhlcmUuYml0cyArIDIpOwogICAgICAgICAgICAgICAgbiA9IGhlcmVfYml0cyArIDI7CiAgICAgICAgICAgICAgICB3aGlsZSAoYml0cyA8IG4pIHsKICAgICAgICAgICAgICAgICAgaWYgKGhhdmUgPT09IDApIHsgYnJlYWsgaW5mX2xlYXZlOyB9CiAgICAgICAgICAgICAgICAgIGhhdmUtLTsKICAgICAgICAgICAgICAgICAgaG9sZCArPSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7CiAgICAgICAgICAgICAgICAgIGJpdHMgKz0gODsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIC8vPT09Ly8KICAgICAgICAgICAgICAgIC8vLS0tIERST1BCSVRTKGhlcmUuYml0cykgLS0tLy8KICAgICAgICAgICAgICAgIGhvbGQgPj4+PSBoZXJlX2JpdHM7CiAgICAgICAgICAgICAgICBiaXRzIC09IGhlcmVfYml0czsKICAgICAgICAgICAgICAgIC8vLS0tLy8KICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5oYXZlID09PSAwKSB7CiAgICAgICAgICAgICAgICAgIHN0cm0ubXNnID0gJ2ludmFsaWQgYml0IGxlbmd0aCByZXBlYXQnOwogICAgICAgICAgICAgICAgICBzdGF0ZS5tb2RlID0gQkFEOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGxlbiA9IHN0YXRlLmxlbnNbc3RhdGUuaGF2ZSAtIDFdOwogICAgICAgICAgICAgICAgY29weSA9IDMgKyAoaG9sZCAmIDB4MDMpOy8vQklUUygyKTsKICAgICAgICAgICAgICAgIC8vLS0tIERST1BCSVRTKDIpIC0tLS8vCiAgICAgICAgICAgICAgICBob2xkID4+Pj0gMjsKICAgICAgICAgICAgICAgIGJpdHMgLT0gMjsKICAgICAgICAgICAgICAgIC8vLS0tLy8KICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgZWxzZSBpZiAoaGVyZV92YWwgPT09IDE3KSB7CiAgICAgICAgICAgICAgICAvLz09PSBORUVEQklUUyhoZXJlLmJpdHMgKyAzKTsKICAgICAgICAgICAgICAgIG4gPSBoZXJlX2JpdHMgKyAzOwogICAgICAgICAgICAgICAgd2hpbGUgKGJpdHMgPCBuKSB7CiAgICAgICAgICAgICAgICAgIGlmIChoYXZlID09PSAwKSB7IGJyZWFrIGluZl9sZWF2ZTsgfQogICAgICAgICAgICAgICAgICBoYXZlLS07CiAgICAgICAgICAgICAgICAgIGhvbGQgKz0gaW5wdXRbbmV4dCsrXSA8PCBiaXRzOwogICAgICAgICAgICAgICAgICBiaXRzICs9IDg7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAvLz09PS8vCiAgICAgICAgICAgICAgICAvLy0tLSBEUk9QQklUUyhoZXJlLmJpdHMpIC0tLS8vCiAgICAgICAgICAgICAgICBob2xkID4+Pj0gaGVyZV9iaXRzOwogICAgICAgICAgICAgICAgYml0cyAtPSBoZXJlX2JpdHM7CiAgICAgICAgICAgICAgICAvLy0tLS8vCiAgICAgICAgICAgICAgICBsZW4gPSAwOwogICAgICAgICAgICAgICAgY29weSA9IDMgKyAoaG9sZCAmIDB4MDcpOy8vQklUUygzKTsKICAgICAgICAgICAgICAgIC8vLS0tIERST1BCSVRTKDMpIC0tLS8vCiAgICAgICAgICAgICAgICBob2xkID4+Pj0gMzsKICAgICAgICAgICAgICAgIGJpdHMgLT0gMzsKICAgICAgICAgICAgICAgIC8vLS0tLy8KICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAvLz09PSBORUVEQklUUyhoZXJlLmJpdHMgKyA3KTsKICAgICAgICAgICAgICAgIG4gPSBoZXJlX2JpdHMgKyA3OwogICAgICAgICAgICAgICAgd2hpbGUgKGJpdHMgPCBuKSB7CiAgICAgICAgICAgICAgICAgIGlmIChoYXZlID09PSAwKSB7IGJyZWFrIGluZl9sZWF2ZTsgfQogICAgICAgICAgICAgICAgICBoYXZlLS07CiAgICAgICAgICAgICAgICAgIGhvbGQgKz0gaW5wdXRbbmV4dCsrXSA8PCBiaXRzOwogICAgICAgICAgICAgICAgICBiaXRzICs9IDg7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAvLz09PS8vCiAgICAgICAgICAgICAgICAvLy0tLSBEUk9QQklUUyhoZXJlLmJpdHMpIC0tLS8vCiAgICAgICAgICAgICAgICBob2xkID4+Pj0gaGVyZV9iaXRzOwogICAgICAgICAgICAgICAgYml0cyAtPSBoZXJlX2JpdHM7CiAgICAgICAgICAgICAgICAvLy0tLS8vCiAgICAgICAgICAgICAgICBsZW4gPSAwOwogICAgICAgICAgICAgICAgY29weSA9IDExICsgKGhvbGQgJiAweDdmKTsvL0JJVFMoNyk7CiAgICAgICAgICAgICAgICAvLy0tLSBEUk9QQklUUyg3KSAtLS0vLwogICAgICAgICAgICAgICAgaG9sZCA+Pj49IDc7CiAgICAgICAgICAgICAgICBiaXRzIC09IDc7CiAgICAgICAgICAgICAgICAvLy0tLS8vCiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmIChzdGF0ZS5oYXZlICsgY29weSA+IHN0YXRlLm5sZW4gKyBzdGF0ZS5uZGlzdCkgewogICAgICAgICAgICAgICAgc3RybS5tc2cgPSAnaW52YWxpZCBiaXQgbGVuZ3RoIHJlcGVhdCc7CiAgICAgICAgICAgICAgICBzdGF0ZS5tb2RlID0gQkFEOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHdoaWxlIChjb3B5LS0pIHsKICAgICAgICAgICAgICAgIHN0YXRlLmxlbnNbc3RhdGUuaGF2ZSsrXSA9IGxlbjsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICAvKiBoYW5kbGUgZXJyb3IgYnJlYWtzIGluIHdoaWxlICovCiAgICAgICAgICBpZiAoc3RhdGUubW9kZSA9PT0gQkFEKSB7IGJyZWFrOyB9CgogICAgICAgICAgLyogY2hlY2sgZm9yIGVuZC1vZi1ibG9jayBjb2RlIChiZXR0ZXIgaGF2ZSBvbmUpICovCiAgICAgICAgICBpZiAoc3RhdGUubGVuc1syNTZdID09PSAwKSB7CiAgICAgICAgICAgIHN0cm0ubXNnID0gJ2ludmFsaWQgY29kZSAtLSBtaXNzaW5nIGVuZC1vZi1ibG9jayc7CiAgICAgICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQoKICAgICAgICAgIC8qIGJ1aWxkIGNvZGUgdGFibGVzIC0tIG5vdGU6IGRvIG5vdCBjaGFuZ2UgdGhlIGxlbmJpdHMgb3IgZGlzdGJpdHMKICAgICAgICAgICAgIHZhbHVlcyBoZXJlICg5IGFuZCA2KSB3aXRob3V0IHJlYWRpbmcgdGhlIGNvbW1lbnRzIGluIGluZnRyZWVzLmgKICAgICAgICAgICAgIGNvbmNlcm5pbmcgdGhlIEVOT1VHSCBjb25zdGFudHMsIHdoaWNoIGRlcGVuZCBvbiB0aG9zZSB2YWx1ZXMgKi8KICAgICAgICAgIHN0YXRlLmxlbmJpdHMgPSA5OwoKICAgICAgICAgIG9wdHMgPSB7IGJpdHM6IHN0YXRlLmxlbmJpdHMgfTsKICAgICAgICAgIHJldCA9IGluZnRyZWVzKExFTlMsIHN0YXRlLmxlbnMsIDAsIHN0YXRlLm5sZW4sIHN0YXRlLmxlbmNvZGUsIDAsIHN0YXRlLndvcmssIG9wdHMpOwogICAgICAgICAgLy8gV2UgaGF2ZSBzZXBhcmF0ZSB0YWJsZXMgJiBubyBwb2ludGVycy4gMiBjb21tZW50ZWQgbGluZXMgYmVsb3cgbm90IG5lZWRlZC4KICAgICAgICAgIC8vIHN0YXRlLm5leHRfaW5kZXggPSBvcHRzLnRhYmxlX2luZGV4OwogICAgICAgICAgc3RhdGUubGVuYml0cyA9IG9wdHMuYml0czsKICAgICAgICAgIC8vIHN0YXRlLmxlbmNvZGUgPSBzdGF0ZS5uZXh0OwoKICAgICAgICAgIGlmIChyZXQpIHsKICAgICAgICAgICAgc3RybS5tc2cgPSAnaW52YWxpZCBsaXRlcmFsL2xlbmd0aHMgc2V0JzsKICAgICAgICAgICAgc3RhdGUubW9kZSA9IEJBRDsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CgogICAgICAgICAgc3RhdGUuZGlzdGJpdHMgPSA2OwogICAgICAgICAgLy9zdGF0ZS5kaXN0Y29kZS5jb3B5KHN0YXRlLmNvZGVzKTsKICAgICAgICAgIC8vIFN3aXRjaCB0byB1c2UgZHluYW1pYyB0YWJsZQogICAgICAgICAgc3RhdGUuZGlzdGNvZGUgPSBzdGF0ZS5kaXN0ZHluOwogICAgICAgICAgb3B0cyA9IHsgYml0czogc3RhdGUuZGlzdGJpdHMgfTsKICAgICAgICAgIHJldCA9IGluZnRyZWVzKERJU1RTLCBzdGF0ZS5sZW5zLCBzdGF0ZS5ubGVuLCBzdGF0ZS5uZGlzdCwgc3RhdGUuZGlzdGNvZGUsIDAsIHN0YXRlLndvcmssIG9wdHMpOwogICAgICAgICAgLy8gV2UgaGF2ZSBzZXBhcmF0ZSB0YWJsZXMgJiBubyBwb2ludGVycy4gMiBjb21tZW50ZWQgbGluZXMgYmVsb3cgbm90IG5lZWRlZC4KICAgICAgICAgIC8vIHN0YXRlLm5leHRfaW5kZXggPSBvcHRzLnRhYmxlX2luZGV4OwogICAgICAgICAgc3RhdGUuZGlzdGJpdHMgPSBvcHRzLmJpdHM7CiAgICAgICAgICAvLyBzdGF0ZS5kaXN0Y29kZSA9IHN0YXRlLm5leHQ7CgogICAgICAgICAgaWYgKHJldCkgewogICAgICAgICAgICBzdHJtLm1zZyA9ICdpbnZhbGlkIGRpc3RhbmNlcyBzZXQnOwogICAgICAgICAgICBzdGF0ZS5tb2RlID0gQkFEOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICAgIC8vVHJhY2V2KChzdGRlcnIsICdpbmZsYXRlOiAgICAgICBjb2RlcyBva1xuJykpOwogICAgICAgICAgc3RhdGUubW9kZSA9IExFTl87CiAgICAgICAgICBpZiAoZmx1c2ggPT09IFpfVFJFRVMpIHsgYnJlYWsgaW5mX2xlYXZlOyB9CiAgICAgICAgICAvKiBmYWxscyB0aHJvdWdoICovCiAgICAgICAgY2FzZSBMRU5fOgogICAgICAgICAgc3RhdGUubW9kZSA9IExFTjsKICAgICAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi8KICAgICAgICBjYXNlIExFTjoKICAgICAgICAgIGlmIChoYXZlID49IDYgJiYgbGVmdCA+PSAyNTgpIHsKICAgICAgICAgICAgLy8tLS0gUkVTVE9SRSgpIC0tLQogICAgICAgICAgICBzdHJtLm5leHRfb3V0ID0gcHV0OwogICAgICAgICAgICBzdHJtLmF2YWlsX291dCA9IGxlZnQ7CiAgICAgICAgICAgIHN0cm0ubmV4dF9pbiA9IG5leHQ7CiAgICAgICAgICAgIHN0cm0uYXZhaWxfaW4gPSBoYXZlOwogICAgICAgICAgICBzdGF0ZS5ob2xkID0gaG9sZDsKICAgICAgICAgICAgc3RhdGUuYml0cyA9IGJpdHM7CiAgICAgICAgICAgIC8vLS0tCiAgICAgICAgICAgIGluZmZhc3Qoc3RybSwgX291dCk7CiAgICAgICAgICAgIC8vLS0tIExPQUQoKSAtLS0KICAgICAgICAgICAgcHV0ID0gc3RybS5uZXh0X291dDsKICAgICAgICAgICAgb3V0cHV0ID0gc3RybS5vdXRwdXQ7CiAgICAgICAgICAgIGxlZnQgPSBzdHJtLmF2YWlsX291dDsKICAgICAgICAgICAgbmV4dCA9IHN0cm0ubmV4dF9pbjsKICAgICAgICAgICAgaW5wdXQgPSBzdHJtLmlucHV0OwogICAgICAgICAgICBoYXZlID0gc3RybS5hdmFpbF9pbjsKICAgICAgICAgICAgaG9sZCA9IHN0YXRlLmhvbGQ7CiAgICAgICAgICAgIGJpdHMgPSBzdGF0ZS5iaXRzOwogICAgICAgICAgICAvLy0tLQoKICAgICAgICAgICAgaWYgKHN0YXRlLm1vZGUgPT09IFRZUEUpIHsKICAgICAgICAgICAgICBzdGF0ZS5iYWNrID0gLTE7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgICBzdGF0ZS5iYWNrID0gMDsKICAgICAgICAgIGZvciAoOzspIHsKICAgICAgICAgICAgaGVyZSA9IHN0YXRlLmxlbmNvZGVbaG9sZCAmICgoMSA8PCBzdGF0ZS5sZW5iaXRzKSAtIDEpXTsgIC8qQklUUyhzdGF0ZS5sZW5iaXRzKSovCiAgICAgICAgICAgIGhlcmVfYml0cyA9IGhlcmUgPj4+IDI0OwogICAgICAgICAgICBoZXJlX29wID0gKGhlcmUgPj4+IDE2KSAmIDB4ZmY7CiAgICAgICAgICAgIGhlcmVfdmFsID0gaGVyZSAmIDB4ZmZmZjsKCiAgICAgICAgICAgIGlmIChoZXJlX2JpdHMgPD0gYml0cykgeyBicmVhazsgfQogICAgICAgICAgICAvLy0tLSBQVUxMQllURSgpIC0tLS8vCiAgICAgICAgICAgIGlmIChoYXZlID09PSAwKSB7IGJyZWFrIGluZl9sZWF2ZTsgfQogICAgICAgICAgICBoYXZlLS07CiAgICAgICAgICAgIGhvbGQgKz0gaW5wdXRbbmV4dCsrXSA8PCBiaXRzOwogICAgICAgICAgICBiaXRzICs9IDg7CiAgICAgICAgICAgIC8vLS0tLy8KICAgICAgICAgIH0KICAgICAgICAgIGlmIChoZXJlX29wICYmIChoZXJlX29wICYgMHhmMCkgPT09IDApIHsKICAgICAgICAgICAgbGFzdF9iaXRzID0gaGVyZV9iaXRzOwogICAgICAgICAgICBsYXN0X29wID0gaGVyZV9vcDsKICAgICAgICAgICAgbGFzdF92YWwgPSBoZXJlX3ZhbDsKICAgICAgICAgICAgZm9yICg7OykgewogICAgICAgICAgICAgIGhlcmUgPSBzdGF0ZS5sZW5jb2RlW2xhc3RfdmFsICsKICAgICAgICAgICAgICAgICAgICAgICgoaG9sZCAmICgoMSA8PCAobGFzdF9iaXRzICsgbGFzdF9vcCkpIC0gMSkpLypCSVRTKGxhc3QuYml0cyArIGxhc3Qub3ApKi8gPj4gbGFzdF9iaXRzKV07CiAgICAgICAgICAgICAgaGVyZV9iaXRzID0gaGVyZSA+Pj4gMjQ7CiAgICAgICAgICAgICAgaGVyZV9vcCA9IChoZXJlID4+PiAxNikgJiAweGZmOwogICAgICAgICAgICAgIGhlcmVfdmFsID0gaGVyZSAmIDB4ZmZmZjsKCiAgICAgICAgICAgICAgaWYgKChsYXN0X2JpdHMgKyBoZXJlX2JpdHMpIDw9IGJpdHMpIHsgYnJlYWs7IH0KICAgICAgICAgICAgICAvLy0tLSBQVUxMQllURSgpIC0tLS8vCiAgICAgICAgICAgICAgaWYgKGhhdmUgPT09IDApIHsgYnJlYWsgaW5mX2xlYXZlOyB9CiAgICAgICAgICAgICAgaGF2ZS0tOwogICAgICAgICAgICAgIGhvbGQgKz0gaW5wdXRbbmV4dCsrXSA8PCBiaXRzOwogICAgICAgICAgICAgIGJpdHMgKz0gODsKICAgICAgICAgICAgICAvLy0tLS8vCiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy8tLS0gRFJPUEJJVFMobGFzdC5iaXRzKSAtLS0vLwogICAgICAgICAgICBob2xkID4+Pj0gbGFzdF9iaXRzOwogICAgICAgICAgICBiaXRzIC09IGxhc3RfYml0czsKICAgICAgICAgICAgLy8tLS0vLwogICAgICAgICAgICBzdGF0ZS5iYWNrICs9IGxhc3RfYml0czsKICAgICAgICAgIH0KICAgICAgICAgIC8vLS0tIERST1BCSVRTKGhlcmUuYml0cykgLS0tLy8KICAgICAgICAgIGhvbGQgPj4+PSBoZXJlX2JpdHM7CiAgICAgICAgICBiaXRzIC09IGhlcmVfYml0czsKICAgICAgICAgIC8vLS0tLy8KICAgICAgICAgIHN0YXRlLmJhY2sgKz0gaGVyZV9iaXRzOwogICAgICAgICAgc3RhdGUubGVuZ3RoID0gaGVyZV92YWw7CiAgICAgICAgICBpZiAoaGVyZV9vcCA9PT0gMCkgewogICAgICAgICAgICAvL1RyYWNldnYoKHN0ZGVyciwgaGVyZS52YWwgPj0gMHgyMCAmJiBoZXJlLnZhbCA8IDB4N2YgPwogICAgICAgICAgICAvLyAgICAgICAgImluZmxhdGU6ICAgICAgICAgbGl0ZXJhbCAnJWMnXG4iIDoKICAgICAgICAgICAgLy8gICAgICAgICJpbmZsYXRlOiAgICAgICAgIGxpdGVyYWwgMHglMDJ4XG4iLCBoZXJlLnZhbCkpOwogICAgICAgICAgICBzdGF0ZS5tb2RlID0gTElUOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChoZXJlX29wICYgMzIpIHsKICAgICAgICAgICAgLy9UcmFjZXZ2KChzdGRlcnIsICJpbmZsYXRlOiAgICAgICAgIGVuZCBvZiBibG9ja1xuIikpOwogICAgICAgICAgICBzdGF0ZS5iYWNrID0gLTE7CiAgICAgICAgICAgIHN0YXRlLm1vZGUgPSBUWVBFOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChoZXJlX29wICYgNjQpIHsKICAgICAgICAgICAgc3RybS5tc2cgPSAnaW52YWxpZCBsaXRlcmFsL2xlbmd0aCBjb2RlJzsKICAgICAgICAgICAgc3RhdGUubW9kZSA9IEJBRDsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgICBzdGF0ZS5leHRyYSA9IGhlcmVfb3AgJiAxNTsKICAgICAgICAgIHN0YXRlLm1vZGUgPSBMRU5FWFQ7CiAgICAgICAgICAvKiBmYWxscyB0aHJvdWdoICovCiAgICAgICAgY2FzZSBMRU5FWFQ6CiAgICAgICAgICBpZiAoc3RhdGUuZXh0cmEpIHsKICAgICAgICAgICAgLy89PT0gTkVFREJJVFMoc3RhdGUuZXh0cmEpOwogICAgICAgICAgICBuID0gc3RhdGUuZXh0cmE7CiAgICAgICAgICAgIHdoaWxlIChiaXRzIDwgbikgewogICAgICAgICAgICAgIGlmIChoYXZlID09PSAwKSB7IGJyZWFrIGluZl9sZWF2ZTsgfQogICAgICAgICAgICAgIGhhdmUtLTsKICAgICAgICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0czsKICAgICAgICAgICAgICBiaXRzICs9IDg7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy89PT0vLwogICAgICAgICAgICBzdGF0ZS5sZW5ndGggKz0gaG9sZCAmICgoMSA8PCBzdGF0ZS5leHRyYSkgLSAxKS8qQklUUyhzdGF0ZS5leHRyYSkqLzsKICAgICAgICAgICAgLy8tLS0gRFJPUEJJVFMoc3RhdGUuZXh0cmEpIC0tLS8vCiAgICAgICAgICAgIGhvbGQgPj4+PSBzdGF0ZS5leHRyYTsKICAgICAgICAgICAgYml0cyAtPSBzdGF0ZS5leHRyYTsKICAgICAgICAgICAgLy8tLS0vLwogICAgICAgICAgICBzdGF0ZS5iYWNrICs9IHN0YXRlLmV4dHJhOwogICAgICAgICAgfQogICAgICAgICAgLy9UcmFjZXZ2KChzdGRlcnIsICJpbmZsYXRlOiAgICAgICAgIGxlbmd0aCAldVxuIiwgc3RhdGUubGVuZ3RoKSk7CiAgICAgICAgICBzdGF0ZS53YXMgPSBzdGF0ZS5sZW5ndGg7CiAgICAgICAgICBzdGF0ZS5tb2RlID0gRElTVDsKICAgICAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi8KICAgICAgICBjYXNlIERJU1Q6CiAgICAgICAgICBmb3IgKDs7KSB7CiAgICAgICAgICAgIGhlcmUgPSBzdGF0ZS5kaXN0Y29kZVtob2xkICYgKCgxIDw8IHN0YXRlLmRpc3RiaXRzKSAtIDEpXTsvKkJJVFMoc3RhdGUuZGlzdGJpdHMpKi8KICAgICAgICAgICAgaGVyZV9iaXRzID0gaGVyZSA+Pj4gMjQ7CiAgICAgICAgICAgIGhlcmVfb3AgPSAoaGVyZSA+Pj4gMTYpICYgMHhmZjsKICAgICAgICAgICAgaGVyZV92YWwgPSBoZXJlICYgMHhmZmZmOwoKICAgICAgICAgICAgaWYgKChoZXJlX2JpdHMpIDw9IGJpdHMpIHsgYnJlYWs7IH0KICAgICAgICAgICAgLy8tLS0gUFVMTEJZVEUoKSAtLS0vLwogICAgICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH0KICAgICAgICAgICAgaGF2ZS0tOwogICAgICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0czsKICAgICAgICAgICAgYml0cyArPSA4OwogICAgICAgICAgICAvLy0tLS8vCiAgICAgICAgICB9CiAgICAgICAgICBpZiAoKGhlcmVfb3AgJiAweGYwKSA9PT0gMCkgewogICAgICAgICAgICBsYXN0X2JpdHMgPSBoZXJlX2JpdHM7CiAgICAgICAgICAgIGxhc3Rfb3AgPSBoZXJlX29wOwogICAgICAgICAgICBsYXN0X3ZhbCA9IGhlcmVfdmFsOwogICAgICAgICAgICBmb3IgKDs7KSB7CiAgICAgICAgICAgICAgaGVyZSA9IHN0YXRlLmRpc3Rjb2RlW2xhc3RfdmFsICsKICAgICAgICAgICAgICAgICAgICAgICgoaG9sZCAmICgoMSA8PCAobGFzdF9iaXRzICsgbGFzdF9vcCkpIC0gMSkpLypCSVRTKGxhc3QuYml0cyArIGxhc3Qub3ApKi8gPj4gbGFzdF9iaXRzKV07CiAgICAgICAgICAgICAgaGVyZV9iaXRzID0gaGVyZSA+Pj4gMjQ7CiAgICAgICAgICAgICAgaGVyZV9vcCA9IChoZXJlID4+PiAxNikgJiAweGZmOwogICAgICAgICAgICAgIGhlcmVfdmFsID0gaGVyZSAmIDB4ZmZmZjsKCiAgICAgICAgICAgICAgaWYgKChsYXN0X2JpdHMgKyBoZXJlX2JpdHMpIDw9IGJpdHMpIHsgYnJlYWs7IH0KICAgICAgICAgICAgICAvLy0tLSBQVUxMQllURSgpIC0tLS8vCiAgICAgICAgICAgICAgaWYgKGhhdmUgPT09IDApIHsgYnJlYWsgaW5mX2xlYXZlOyB9CiAgICAgICAgICAgICAgaGF2ZS0tOwogICAgICAgICAgICAgIGhvbGQgKz0gaW5wdXRbbmV4dCsrXSA8PCBiaXRzOwogICAgICAgICAgICAgIGJpdHMgKz0gODsKICAgICAgICAgICAgICAvLy0tLS8vCiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy8tLS0gRFJPUEJJVFMobGFzdC5iaXRzKSAtLS0vLwogICAgICAgICAgICBob2xkID4+Pj0gbGFzdF9iaXRzOwogICAgICAgICAgICBiaXRzIC09IGxhc3RfYml0czsKICAgICAgICAgICAgLy8tLS0vLwogICAgICAgICAgICBzdGF0ZS5iYWNrICs9IGxhc3RfYml0czsKICAgICAgICAgIH0KICAgICAgICAgIC8vLS0tIERST1BCSVRTKGhlcmUuYml0cykgLS0tLy8KICAgICAgICAgIGhvbGQgPj4+PSBoZXJlX2JpdHM7CiAgICAgICAgICBiaXRzIC09IGhlcmVfYml0czsKICAgICAgICAgIC8vLS0tLy8KICAgICAgICAgIHN0YXRlLmJhY2sgKz0gaGVyZV9iaXRzOwogICAgICAgICAgaWYgKGhlcmVfb3AgJiA2NCkgewogICAgICAgICAgICBzdHJtLm1zZyA9ICdpbnZhbGlkIGRpc3RhbmNlIGNvZGUnOwogICAgICAgICAgICBzdGF0ZS5tb2RlID0gQkFEOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICAgIHN0YXRlLm9mZnNldCA9IGhlcmVfdmFsOwogICAgICAgICAgc3RhdGUuZXh0cmEgPSAoaGVyZV9vcCkgJiAxNTsKICAgICAgICAgIHN0YXRlLm1vZGUgPSBESVNURVhUOwogICAgICAgICAgLyogZmFsbHMgdGhyb3VnaCAqLwogICAgICAgIGNhc2UgRElTVEVYVDoKICAgICAgICAgIGlmIChzdGF0ZS5leHRyYSkgewogICAgICAgICAgICAvLz09PSBORUVEQklUUyhzdGF0ZS5leHRyYSk7CiAgICAgICAgICAgIG4gPSBzdGF0ZS5leHRyYTsKICAgICAgICAgICAgd2hpbGUgKGJpdHMgPCBuKSB7CiAgICAgICAgICAgICAgaWYgKGhhdmUgPT09IDApIHsgYnJlYWsgaW5mX2xlYXZlOyB9CiAgICAgICAgICAgICAgaGF2ZS0tOwogICAgICAgICAgICAgIGhvbGQgKz0gaW5wdXRbbmV4dCsrXSA8PCBiaXRzOwogICAgICAgICAgICAgIGJpdHMgKz0gODsKICAgICAgICAgICAgfQogICAgICAgICAgICAvLz09PS8vCiAgICAgICAgICAgIHN0YXRlLm9mZnNldCArPSBob2xkICYgKCgxIDw8IHN0YXRlLmV4dHJhKSAtIDEpLypCSVRTKHN0YXRlLmV4dHJhKSovOwogICAgICAgICAgICAvLy0tLSBEUk9QQklUUyhzdGF0ZS5leHRyYSkgLS0tLy8KICAgICAgICAgICAgaG9sZCA+Pj49IHN0YXRlLmV4dHJhOwogICAgICAgICAgICBiaXRzIC09IHN0YXRlLmV4dHJhOwogICAgICAgICAgICAvLy0tLS8vCiAgICAgICAgICAgIHN0YXRlLmJhY2sgKz0gc3RhdGUuZXh0cmE7CiAgICAgICAgICB9CiAgLy8jaWZkZWYgSU5GTEFURV9TVFJJQ1QKICAgICAgICAgIGlmIChzdGF0ZS5vZmZzZXQgPiBzdGF0ZS5kbWF4KSB7CiAgICAgICAgICAgIHN0cm0ubXNnID0gJ2ludmFsaWQgZGlzdGFuY2UgdG9vIGZhciBiYWNrJzsKICAgICAgICAgICAgc3RhdGUubW9kZSA9IEJBRDsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgLy8jZW5kaWYKICAgICAgICAgIC8vVHJhY2V2digoc3RkZXJyLCAiaW5mbGF0ZTogICAgICAgICBkaXN0YW5jZSAldVxuIiwgc3RhdGUub2Zmc2V0KSk7CiAgICAgICAgICBzdGF0ZS5tb2RlID0gTUFUQ0g7CiAgICAgICAgICAvKiBmYWxscyB0aHJvdWdoICovCiAgICAgICAgY2FzZSBNQVRDSDoKICAgICAgICAgIGlmIChsZWZ0ID09PSAwKSB7IGJyZWFrIGluZl9sZWF2ZTsgfQogICAgICAgICAgY29weSA9IF9vdXQgLSBsZWZ0OwogICAgICAgICAgaWYgKHN0YXRlLm9mZnNldCA+IGNvcHkpIHsgICAgICAgICAvKiBjb3B5IGZyb20gd2luZG93ICovCiAgICAgICAgICAgIGNvcHkgPSBzdGF0ZS5vZmZzZXQgLSBjb3B5OwogICAgICAgICAgICBpZiAoY29weSA+IHN0YXRlLndoYXZlKSB7CiAgICAgICAgICAgICAgaWYgKHN0YXRlLnNhbmUpIHsKICAgICAgICAgICAgICAgIHN0cm0ubXNnID0gJ2ludmFsaWQgZGlzdGFuY2UgdG9vIGZhciBiYWNrJzsKICAgICAgICAgICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgLy8gKCEpIFRoaXMgYmxvY2sgaXMgZGlzYWJsZWQgaW4gemxpYiBkZWZhdWx0cywKICAvLyBkb24ndCBlbmFibGUgaXQgZm9yIGJpbmFyeSBjb21wYXRpYmlsaXR5CiAgLy8jaWZkZWYgSU5GTEFURV9BTExPV19JTlZBTElEX0RJU1RBTkNFX1RPT0ZBUl9BUlJSCiAgLy8gICAgICAgICAgVHJhY2UoKHN0ZGVyciwgImluZmxhdGUuYyB0b28gZmFyXG4iKSk7CiAgLy8gICAgICAgICAgY29weSAtPSBzdGF0ZS53aGF2ZTsKICAvLyAgICAgICAgICBpZiAoY29weSA+IHN0YXRlLmxlbmd0aCkgeyBjb3B5ID0gc3RhdGUubGVuZ3RoOyB9CiAgLy8gICAgICAgICAgaWYgKGNvcHkgPiBsZWZ0KSB7IGNvcHkgPSBsZWZ0OyB9CiAgLy8gICAgICAgICAgbGVmdCAtPSBjb3B5OwogIC8vICAgICAgICAgIHN0YXRlLmxlbmd0aCAtPSBjb3B5OwogIC8vICAgICAgICAgIGRvIHsKICAvLyAgICAgICAgICAgIG91dHB1dFtwdXQrK10gPSAwOwogIC8vICAgICAgICAgIH0gd2hpbGUgKC0tY29weSk7CiAgLy8gICAgICAgICAgaWYgKHN0YXRlLmxlbmd0aCA9PT0gMCkgeyBzdGF0ZS5tb2RlID0gTEVOOyB9CiAgLy8gICAgICAgICAgYnJlYWs7CiAgLy8jZW5kaWYKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoY29weSA+IHN0YXRlLnduZXh0KSB7CiAgICAgICAgICAgICAgY29weSAtPSBzdGF0ZS53bmV4dDsKICAgICAgICAgICAgICBmcm9tID0gc3RhdGUud3NpemUgLSBjb3B5OwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgIGZyb20gPSBzdGF0ZS53bmV4dCAtIGNvcHk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGNvcHkgPiBzdGF0ZS5sZW5ndGgpIHsgY29weSA9IHN0YXRlLmxlbmd0aDsgfQogICAgICAgICAgICBmcm9tX3NvdXJjZSA9IHN0YXRlLndpbmRvdzsKICAgICAgICAgIH0KICAgICAgICAgIGVsc2UgeyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIGNvcHkgZnJvbSBvdXRwdXQgKi8KICAgICAgICAgICAgZnJvbV9zb3VyY2UgPSBvdXRwdXQ7CiAgICAgICAgICAgIGZyb20gPSBwdXQgLSBzdGF0ZS5vZmZzZXQ7CiAgICAgICAgICAgIGNvcHkgPSBzdGF0ZS5sZW5ndGg7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoY29weSA+IGxlZnQpIHsgY29weSA9IGxlZnQ7IH0KICAgICAgICAgIGxlZnQgLT0gY29weTsKICAgICAgICAgIHN0YXRlLmxlbmd0aCAtPSBjb3B5OwogICAgICAgICAgZG8gewogICAgICAgICAgICBvdXRwdXRbcHV0KytdID0gZnJvbV9zb3VyY2VbZnJvbSsrXTsKICAgICAgICAgIH0gd2hpbGUgKC0tY29weSk7CiAgICAgICAgICBpZiAoc3RhdGUubGVuZ3RoID09PSAwKSB7IHN0YXRlLm1vZGUgPSBMRU47IH0KICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgTElUOgogICAgICAgICAgaWYgKGxlZnQgPT09IDApIHsgYnJlYWsgaW5mX2xlYXZlOyB9CiAgICAgICAgICBvdXRwdXRbcHV0KytdID0gc3RhdGUubGVuZ3RoOwogICAgICAgICAgbGVmdC0tOwogICAgICAgICAgc3RhdGUubW9kZSA9IExFTjsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgQ0hFQ0s6CiAgICAgICAgICBpZiAoc3RhdGUud3JhcCkgewogICAgICAgICAgICAvLz09PSBORUVEQklUUygzMik7CiAgICAgICAgICAgIHdoaWxlIChiaXRzIDwgMzIpIHsKICAgICAgICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH0KICAgICAgICAgICAgICBoYXZlLS07CiAgICAgICAgICAgICAgLy8gVXNlICd8JyBpbnN0ZWFkIG9mICcrJyB0byBtYWtlIHN1cmUgdGhhdCByZXN1bHQgaXMgc2lnbmVkCiAgICAgICAgICAgICAgaG9sZCB8PSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7CiAgICAgICAgICAgICAgYml0cyArPSA4OwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vPT09Ly8KICAgICAgICAgICAgX291dCAtPSBsZWZ0OwogICAgICAgICAgICBzdHJtLnRvdGFsX291dCArPSBfb3V0OwogICAgICAgICAgICBzdGF0ZS50b3RhbCArPSBfb3V0OwogICAgICAgICAgICBpZiAoX291dCkgewogICAgICAgICAgICAgIHN0cm0uYWRsZXIgPSBzdGF0ZS5jaGVjayA9CiAgICAgICAgICAgICAgICAgIC8qVVBEQVRFKHN0YXRlLmNoZWNrLCBwdXQgLSBfb3V0LCBfb3V0KTsqLwogICAgICAgICAgICAgICAgICAoc3RhdGUuZmxhZ3MgPyBjcmMzMl8xKHN0YXRlLmNoZWNrLCBvdXRwdXQsIF9vdXQsIHB1dCAtIF9vdXQpIDogYWRsZXIzMl8xKHN0YXRlLmNoZWNrLCBvdXRwdXQsIF9vdXQsIHB1dCAtIF9vdXQpKTsKCiAgICAgICAgICAgIH0KICAgICAgICAgICAgX291dCA9IGxlZnQ7CiAgICAgICAgICAgIC8vIE5COiBjcmMzMiBzdG9yZWQgYXMgc2lnbmVkIDMyLWJpdCBpbnQsIHpzd2FwMzIgcmV0dXJucyBzaWduZWQgdG9vCiAgICAgICAgICAgIGlmICgoc3RhdGUuZmxhZ3MgPyBob2xkIDogenN3YXAzMihob2xkKSkgIT09IHN0YXRlLmNoZWNrKSB7CiAgICAgICAgICAgICAgc3RybS5tc2cgPSAnaW5jb3JyZWN0IGRhdGEgY2hlY2snOwogICAgICAgICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy89PT0gSU5JVEJJVFMoKTsKICAgICAgICAgICAgaG9sZCA9IDA7CiAgICAgICAgICAgIGJpdHMgPSAwOwogICAgICAgICAgICAvLz09PS8vCiAgICAgICAgICAgIC8vVHJhY2V2KChzdGRlcnIsICJpbmZsYXRlOiAgIGNoZWNrIG1hdGNoZXMgdHJhaWxlclxuIikpOwogICAgICAgICAgfQogICAgICAgICAgc3RhdGUubW9kZSA9IExFTkdUSDsKICAgICAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi8KICAgICAgICBjYXNlIExFTkdUSDoKICAgICAgICAgIGlmIChzdGF0ZS53cmFwICYmIHN0YXRlLmZsYWdzKSB7CiAgICAgICAgICAgIC8vPT09IE5FRURCSVRTKDMyKTsKICAgICAgICAgICAgd2hpbGUgKGJpdHMgPCAzMikgewogICAgICAgICAgICAgIGlmIChoYXZlID09PSAwKSB7IGJyZWFrIGluZl9sZWF2ZTsgfQogICAgICAgICAgICAgIGhhdmUtLTsKICAgICAgICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0czsKICAgICAgICAgICAgICBiaXRzICs9IDg7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy89PT0vLwogICAgICAgICAgICBpZiAoaG9sZCAhPT0gKHN0YXRlLnRvdGFsICYgMHhmZmZmZmZmZikpIHsKICAgICAgICAgICAgICBzdHJtLm1zZyA9ICdpbmNvcnJlY3QgbGVuZ3RoIGNoZWNrJzsKICAgICAgICAgICAgICBzdGF0ZS5tb2RlID0gQkFEOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vPT09IElOSVRCSVRTKCk7CiAgICAgICAgICAgIGhvbGQgPSAwOwogICAgICAgICAgICBiaXRzID0gMDsKICAgICAgICAgICAgLy89PT0vLwogICAgICAgICAgICAvL1RyYWNldigoc3RkZXJyLCAiaW5mbGF0ZTogICBsZW5ndGggbWF0Y2hlcyB0cmFpbGVyXG4iKSk7CiAgICAgICAgICB9CiAgICAgICAgICBzdGF0ZS5tb2RlID0gRE9ORTsKICAgICAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi8KICAgICAgICBjYXNlIERPTkU6CiAgICAgICAgICByZXQgPSBaX1NUUkVBTV9FTkQkMTsKICAgICAgICAgIGJyZWFrIGluZl9sZWF2ZTsKICAgICAgICBjYXNlIEJBRDoKICAgICAgICAgIHJldCA9IFpfREFUQV9FUlJPUiQxOwogICAgICAgICAgYnJlYWsgaW5mX2xlYXZlOwogICAgICAgIGNhc2UgTUVNOgogICAgICAgICAgcmV0dXJuIFpfTUVNX0VSUk9SJDE7CiAgICAgICAgY2FzZSBTWU5DOgogICAgICAgICAgLyogZmFsbHMgdGhyb3VnaCAqLwogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICByZXR1cm4gWl9TVFJFQU1fRVJST1IkMTsKICAgICAgfQogICAgfQoKICAgIC8vIGluZl9sZWF2ZSA8LSBoZXJlIGlzIHJlYWwgcGxhY2UgZm9yICJnb3RvIGluZl9sZWF2ZSIsIGVtdWxhdGVkIHZpYSAiYnJlYWsgaW5mX2xlYXZlIgoKICAgIC8qCiAgICAgICBSZXR1cm4gZnJvbSBpbmZsYXRlKCksIHVwZGF0aW5nIHRoZSB0b3RhbCBjb3VudHMgYW5kIHRoZSBjaGVjayB2YWx1ZS4KICAgICAgIElmIHRoZXJlIHdhcyBubyBwcm9ncmVzcyBkdXJpbmcgdGhlIGluZmxhdGUoKSBjYWxsLCByZXR1cm4gYSBidWZmZXIKICAgICAgIGVycm9yLiAgQ2FsbCB1cGRhdGV3aW5kb3coKSB0byBjcmVhdGUgYW5kL29yIHVwZGF0ZSB0aGUgd2luZG93IHN0YXRlLgogICAgICAgTm90ZTogYSBtZW1vcnkgZXJyb3IgZnJvbSBpbmZsYXRlKCkgaXMgbm9uLXJlY292ZXJhYmxlLgogICAgICovCgogICAgLy8tLS0gUkVTVE9SRSgpIC0tLQogICAgc3RybS5uZXh0X291dCA9IHB1dDsKICAgIHN0cm0uYXZhaWxfb3V0ID0gbGVmdDsKICAgIHN0cm0ubmV4dF9pbiA9IG5leHQ7CiAgICBzdHJtLmF2YWlsX2luID0gaGF2ZTsKICAgIHN0YXRlLmhvbGQgPSBob2xkOwogICAgc3RhdGUuYml0cyA9IGJpdHM7CiAgICAvLy0tLQoKICAgIGlmIChzdGF0ZS53c2l6ZSB8fCAoX291dCAhPT0gc3RybS5hdmFpbF9vdXQgJiYgc3RhdGUubW9kZSA8IEJBRCAmJgogICAgICAgICAgICAgICAgICAgICAgICAoc3RhdGUubW9kZSA8IENIRUNLIHx8IGZsdXNoICE9PSBaX0ZJTklTSCQxKSkpIHsKICAgICAgaWYgKHVwZGF0ZXdpbmRvdyhzdHJtLCBzdHJtLm91dHB1dCwgc3RybS5uZXh0X291dCwgX291dCAtIHN0cm0uYXZhaWxfb3V0KSkgOwogICAgfQogICAgX2luIC09IHN0cm0uYXZhaWxfaW47CiAgICBfb3V0IC09IHN0cm0uYXZhaWxfb3V0OwogICAgc3RybS50b3RhbF9pbiArPSBfaW47CiAgICBzdHJtLnRvdGFsX291dCArPSBfb3V0OwogICAgc3RhdGUudG90YWwgKz0gX291dDsKICAgIGlmIChzdGF0ZS53cmFwICYmIF9vdXQpIHsKICAgICAgc3RybS5hZGxlciA9IHN0YXRlLmNoZWNrID0gLypVUERBVEUoc3RhdGUuY2hlY2ssIHN0cm0ubmV4dF9vdXQgLSBfb3V0LCBfb3V0KTsqLwogICAgICAgIChzdGF0ZS5mbGFncyA/IGNyYzMyXzEoc3RhdGUuY2hlY2ssIG91dHB1dCwgX291dCwgc3RybS5uZXh0X291dCAtIF9vdXQpIDogYWRsZXIzMl8xKHN0YXRlLmNoZWNrLCBvdXRwdXQsIF9vdXQsIHN0cm0ubmV4dF9vdXQgLSBfb3V0KSk7CiAgICB9CiAgICBzdHJtLmRhdGFfdHlwZSA9IHN0YXRlLmJpdHMgKyAoc3RhdGUubGFzdCA/IDY0IDogMCkgKwogICAgICAgICAgICAgICAgICAgICAgKHN0YXRlLm1vZGUgPT09IFRZUEUgPyAxMjggOiAwKSArCiAgICAgICAgICAgICAgICAgICAgICAoc3RhdGUubW9kZSA9PT0gTEVOXyB8fCBzdGF0ZS5tb2RlID09PSBDT1BZXyA/IDI1NiA6IDApOwogICAgaWYgKCgoX2luID09PSAwICYmIF9vdXQgPT09IDApIHx8IGZsdXNoID09PSBaX0ZJTklTSCQxKSAmJiByZXQgPT09IFpfT0skMSkgewogICAgICByZXQgPSBaX0JVRl9FUlJPUjsKICAgIH0KICAgIHJldHVybiByZXQ7CiAgfTsKCgogIGNvbnN0IGluZmxhdGVFbmQgPSAoc3RybSkgPT4gewoKICAgIGlmICghc3RybSB8fCAhc3RybS5zdGF0ZSAvKnx8IHN0cm0tPnpmcmVlID09IChmcmVlX2Z1bmMpMCovKSB7CiAgICAgIHJldHVybiBaX1NUUkVBTV9FUlJPUiQxOwogICAgfQoKICAgIGxldCBzdGF0ZSA9IHN0cm0uc3RhdGU7CiAgICBpZiAoc3RhdGUud2luZG93KSB7CiAgICAgIHN0YXRlLndpbmRvdyA9IG51bGw7CiAgICB9CiAgICBzdHJtLnN0YXRlID0gbnVsbDsKICAgIHJldHVybiBaX09LJDE7CiAgfTsKCgogIGNvbnN0IGluZmxhdGVHZXRIZWFkZXIgPSAoc3RybSwgaGVhZCkgPT4gewoKICAgIC8qIGNoZWNrIHN0YXRlICovCiAgICBpZiAoIXN0cm0gfHwgIXN0cm0uc3RhdGUpIHsgcmV0dXJuIFpfU1RSRUFNX0VSUk9SJDE7IH0KICAgIGNvbnN0IHN0YXRlID0gc3RybS5zdGF0ZTsKICAgIGlmICgoc3RhdGUud3JhcCAmIDIpID09PSAwKSB7IHJldHVybiBaX1NUUkVBTV9FUlJPUiQxOyB9CgogICAgLyogc2F2ZSBoZWFkZXIgc3RydWN0dXJlICovCiAgICBzdGF0ZS5oZWFkID0gaGVhZDsKICAgIGhlYWQuZG9uZSA9IGZhbHNlOwogICAgcmV0dXJuIFpfT0skMTsKICB9OwoKCiAgY29uc3QgaW5mbGF0ZVNldERpY3Rpb25hcnkgPSAoc3RybSwgZGljdGlvbmFyeSkgPT4gewogICAgY29uc3QgZGljdExlbmd0aCA9IGRpY3Rpb25hcnkubGVuZ3RoOwoKICAgIGxldCBzdGF0ZTsKICAgIGxldCBkaWN0aWQ7CiAgICBsZXQgcmV0OwoKICAgIC8qIGNoZWNrIHN0YXRlICovCiAgICBpZiAoIXN0cm0gLyogPT0gWl9OVUxMICovIHx8ICFzdHJtLnN0YXRlIC8qID09IFpfTlVMTCAqLykgeyByZXR1cm4gWl9TVFJFQU1fRVJST1IkMTsgfQogICAgc3RhdGUgPSBzdHJtLnN0YXRlOwoKICAgIGlmIChzdGF0ZS53cmFwICE9PSAwICYmIHN0YXRlLm1vZGUgIT09IERJQ1QpIHsKICAgICAgcmV0dXJuIFpfU1RSRUFNX0VSUk9SJDE7CiAgICB9CgogICAgLyogY2hlY2sgZm9yIGNvcnJlY3QgZGljdGlvbmFyeSBpZGVudGlmaWVyICovCiAgICBpZiAoc3RhdGUubW9kZSA9PT0gRElDVCkgewogICAgICBkaWN0aWQgPSAxOyAvKiBhZGxlcjMyKDAsIG51bGwsIDApKi8KICAgICAgLyogZGljdGlkID0gYWRsZXIzMihkaWN0aWQsIGRpY3Rpb25hcnksIGRpY3RMZW5ndGgpOyAqLwogICAgICBkaWN0aWQgPSBhZGxlcjMyXzEoZGljdGlkLCBkaWN0aW9uYXJ5LCBkaWN0TGVuZ3RoLCAwKTsKICAgICAgaWYgKGRpY3RpZCAhPT0gc3RhdGUuY2hlY2spIHsKICAgICAgICByZXR1cm4gWl9EQVRBX0VSUk9SJDE7CiAgICAgIH0KICAgIH0KICAgIC8qIGNvcHkgZGljdGlvbmFyeSB0byB3aW5kb3cgdXNpbmcgdXBkYXRld2luZG93KCksIHdoaWNoIHdpbGwgYW1lbmQgdGhlCiAgICAgZXhpc3RpbmcgZGljdGlvbmFyeSBpZiBhcHByb3ByaWF0ZSAqLwogICAgcmV0ID0gdXBkYXRld2luZG93KHN0cm0sIGRpY3Rpb25hcnksIGRpY3RMZW5ndGgsIGRpY3RMZW5ndGgpOwogICAgaWYgKHJldCkgewogICAgICBzdGF0ZS5tb2RlID0gTUVNOwogICAgICByZXR1cm4gWl9NRU1fRVJST1IkMTsKICAgIH0KICAgIHN0YXRlLmhhdmVkaWN0ID0gMTsKICAgIC8vIFRyYWNldigoc3RkZXJyLCAiaW5mbGF0ZTogICBkaWN0aW9uYXJ5IHNldFxuIikpOwogICAgcmV0dXJuIFpfT0skMTsKICB9OwoKCiAgdmFyIGluZmxhdGVSZXNldF8xID0gaW5mbGF0ZVJlc2V0OwogIHZhciBpbmZsYXRlUmVzZXQyXzEgPSBpbmZsYXRlUmVzZXQyOwogIHZhciBpbmZsYXRlUmVzZXRLZWVwXzEgPSBpbmZsYXRlUmVzZXRLZWVwOwogIHZhciBpbmZsYXRlSW5pdF8xID0gaW5mbGF0ZUluaXQ7CiAgdmFyIGluZmxhdGVJbml0Ml8xID0gaW5mbGF0ZUluaXQyOwogIHZhciBpbmZsYXRlXzIkMSA9IGluZmxhdGUkMjsKICB2YXIgaW5mbGF0ZUVuZF8xID0gaW5mbGF0ZUVuZDsKICB2YXIgaW5mbGF0ZUdldEhlYWRlcl8xID0gaW5mbGF0ZUdldEhlYWRlcjsKICB2YXIgaW5mbGF0ZVNldERpY3Rpb25hcnlfMSA9IGluZmxhdGVTZXREaWN0aW9uYXJ5OwogIHZhciBpbmZsYXRlSW5mbyA9ICdwYWtvIGluZmxhdGUgKGZyb20gTm9kZWNhIHByb2plY3QpJzsKCiAgLyogTm90IGltcGxlbWVudGVkCiAgbW9kdWxlLmV4cG9ydHMuaW5mbGF0ZUNvcHkgPSBpbmZsYXRlQ29weTsKICBtb2R1bGUuZXhwb3J0cy5pbmZsYXRlR2V0RGljdGlvbmFyeSA9IGluZmxhdGVHZXREaWN0aW9uYXJ5OwogIG1vZHVsZS5leHBvcnRzLmluZmxhdGVNYXJrID0gaW5mbGF0ZU1hcms7CiAgbW9kdWxlLmV4cG9ydHMuaW5mbGF0ZVByaW1lID0gaW5mbGF0ZVByaW1lOwogIG1vZHVsZS5leHBvcnRzLmluZmxhdGVTeW5jID0gaW5mbGF0ZVN5bmM7CiAgbW9kdWxlLmV4cG9ydHMuaW5mbGF0ZVN5bmNQb2ludCA9IGluZmxhdGVTeW5jUG9pbnQ7CiAgbW9kdWxlLmV4cG9ydHMuaW5mbGF0ZVVuZGVybWluZSA9IGluZmxhdGVVbmRlcm1pbmU7CiAgKi8KCiAgdmFyIGluZmxhdGVfMSQyID0gewogIAlpbmZsYXRlUmVzZXQ6IGluZmxhdGVSZXNldF8xLAogIAlpbmZsYXRlUmVzZXQyOiBpbmZsYXRlUmVzZXQyXzEsCiAgCWluZmxhdGVSZXNldEtlZXA6IGluZmxhdGVSZXNldEtlZXBfMSwKICAJaW5mbGF0ZUluaXQ6IGluZmxhdGVJbml0XzEsCiAgCWluZmxhdGVJbml0MjogaW5mbGF0ZUluaXQyXzEsCiAgCWluZmxhdGU6IGluZmxhdGVfMiQxLAogIAlpbmZsYXRlRW5kOiBpbmZsYXRlRW5kXzEsCiAgCWluZmxhdGVHZXRIZWFkZXI6IGluZmxhdGVHZXRIZWFkZXJfMSwKICAJaW5mbGF0ZVNldERpY3Rpb25hcnk6IGluZmxhdGVTZXREaWN0aW9uYXJ5XzEsCiAgCWluZmxhdGVJbmZvOiBpbmZsYXRlSW5mbwogIH07CgogIC8vIChDKSAxOTk1LTIwMTMgSmVhbi1sb3VwIEdhaWxseSBhbmQgTWFyayBBZGxlcgogIC8vIChDKSAyMDE0LTIwMTcgVml0YWx5IFB1enJpbiBhbmQgQW5kcmV5IFR1cGl0c2luCiAgLy8KICAvLyBUaGlzIHNvZnR3YXJlIGlzIHByb3ZpZGVkICdhcy1pcycsIHdpdGhvdXQgYW55IGV4cHJlc3Mgb3IgaW1wbGllZAogIC8vIHdhcnJhbnR5LiBJbiBubyBldmVudCB3aWxsIHRoZSBhdXRob3JzIGJlIGhlbGQgbGlhYmxlIGZvciBhbnkgZGFtYWdlcwogIC8vIGFyaXNpbmcgZnJvbSB0aGUgdXNlIG9mIHRoaXMgc29mdHdhcmUuCiAgLy8KICAvLyBQZXJtaXNzaW9uIGlzIGdyYW50ZWQgdG8gYW55b25lIHRvIHVzZSB0aGlzIHNvZnR3YXJlIGZvciBhbnkgcHVycG9zZSwKICAvLyBpbmNsdWRpbmcgY29tbWVyY2lhbCBhcHBsaWNhdGlvbnMsIGFuZCB0byBhbHRlciBpdCBhbmQgcmVkaXN0cmlidXRlIGl0CiAgLy8gZnJlZWx5LCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgcmVzdHJpY3Rpb25zOgogIC8vCiAgLy8gMS4gVGhlIG9yaWdpbiBvZiB0aGlzIHNvZnR3YXJlIG11c3Qgbm90IGJlIG1pc3JlcHJlc2VudGVkOyB5b3UgbXVzdCBub3QKICAvLyAgIGNsYWltIHRoYXQgeW91IHdyb3RlIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS4gSWYgeW91IHVzZSB0aGlzIHNvZnR3YXJlCiAgLy8gICBpbiBhIHByb2R1Y3QsIGFuIGFja25vd2xlZGdtZW50IGluIHRoZSBwcm9kdWN0IGRvY3VtZW50YXRpb24gd291bGQgYmUKICAvLyAgIGFwcHJlY2lhdGVkIGJ1dCBpcyBub3QgcmVxdWlyZWQuCiAgLy8gMi4gQWx0ZXJlZCBzb3VyY2UgdmVyc2lvbnMgbXVzdCBiZSBwbGFpbmx5IG1hcmtlZCBhcyBzdWNoLCBhbmQgbXVzdCBub3QgYmUKICAvLyAgIG1pc3JlcHJlc2VudGVkIGFzIGJlaW5nIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS4KICAvLyAzLiBUaGlzIG5vdGljZSBtYXkgbm90IGJlIHJlbW92ZWQgb3IgYWx0ZXJlZCBmcm9tIGFueSBzb3VyY2UgZGlzdHJpYnV0aW9uLgoKICBmdW5jdGlvbiBHWmhlYWRlcigpIHsKICAgIC8qIHRydWUgaWYgY29tcHJlc3NlZCBkYXRhIGJlbGlldmVkIHRvIGJlIHRleHQgKi8KICAgIHRoaXMudGV4dCAgICAgICA9IDA7CiAgICAvKiBtb2RpZmljYXRpb24gdGltZSAqLwogICAgdGhpcy50aW1lICAgICAgID0gMDsKICAgIC8qIGV4dHJhIGZsYWdzIChub3QgdXNlZCB3aGVuIHdyaXRpbmcgYSBnemlwIGZpbGUpICovCiAgICB0aGlzLnhmbGFncyAgICAgPSAwOwogICAgLyogb3BlcmF0aW5nIHN5c3RlbSAqLwogICAgdGhpcy5vcyAgICAgICAgID0gMDsKICAgIC8qIHBvaW50ZXIgdG8gZXh0cmEgZmllbGQgb3IgWl9OVUxMIGlmIG5vbmUgKi8KICAgIHRoaXMuZXh0cmEgICAgICA9IG51bGw7CiAgICAvKiBleHRyYSBmaWVsZCBsZW5ndGggKHZhbGlkIGlmIGV4dHJhICE9IFpfTlVMTCkgKi8KICAgIHRoaXMuZXh0cmFfbGVuICA9IDA7IC8vIEFjdHVhbGx5LCB3ZSBkb24ndCBuZWVkIGl0IGluIEpTLAogICAgICAgICAgICAgICAgICAgICAgICAgLy8gYnV0IGxlYXZlIGZvciBmZXcgY29kZSBtb2RpZmljYXRpb25zCgogICAgLy8KICAgIC8vIFNldHVwIGxpbWl0cyBpcyBub3QgbmVjZXNzYXJ5IGJlY2F1c2UgaW4ganMgd2Ugc2hvdWxkIG5vdCBwcmVhbGxvY2F0ZSBtZW1vcnkKICAgIC8vIGZvciBpbmZsYXRlIHVzZSBjb25zdGFudCBsaW1pdCBpbiA2NTUzNiBieXRlcwogICAgLy8KCiAgICAvKiBzcGFjZSBhdCBleHRyYSAob25seSB3aGVuIHJlYWRpbmcgaGVhZGVyKSAqLwogICAgLy8gdGhpcy5leHRyYV9tYXggID0gMDsKICAgIC8qIHBvaW50ZXIgdG8gemVyby10ZXJtaW5hdGVkIGZpbGUgbmFtZSBvciBaX05VTEwgKi8KICAgIHRoaXMubmFtZSAgICAgICA9ICcnOwogICAgLyogc3BhY2UgYXQgbmFtZSAob25seSB3aGVuIHJlYWRpbmcgaGVhZGVyKSAqLwogICAgLy8gdGhpcy5uYW1lX21heCAgID0gMDsKICAgIC8qIHBvaW50ZXIgdG8gemVyby10ZXJtaW5hdGVkIGNvbW1lbnQgb3IgWl9OVUxMICovCiAgICB0aGlzLmNvbW1lbnQgICAgPSAnJzsKICAgIC8qIHNwYWNlIGF0IGNvbW1lbnQgKG9ubHkgd2hlbiByZWFkaW5nIGhlYWRlcikgKi8KICAgIC8vIHRoaXMuY29tbV9tYXggICA9IDA7CiAgICAvKiB0cnVlIGlmIHRoZXJlIHdhcyBvciB3aWxsIGJlIGEgaGVhZGVyIGNyYyAqLwogICAgdGhpcy5oY3JjICAgICAgID0gMDsKICAgIC8qIHRydWUgd2hlbiBkb25lIHJlYWRpbmcgZ3ppcCBoZWFkZXIgKG5vdCB1c2VkIHdoZW4gd3JpdGluZyBhIGd6aXAgZmlsZSkgKi8KICAgIHRoaXMuZG9uZSAgICAgICA9IGZhbHNlOwogIH0KCiAgdmFyIGd6aGVhZGVyID0gR1poZWFkZXI7CgogIGNvbnN0IHRvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZzsKCiAgLyogUHVibGljIGNvbnN0YW50cyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki8KICAvKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qLwoKICBjb25zdCB7CiAgICBaX05PX0ZMVVNILCBaX0ZJTklTSCwKICAgIFpfT0ssIFpfU1RSRUFNX0VORCwgWl9ORUVEX0RJQ1QsIFpfU1RSRUFNX0VSUk9SLCBaX0RBVEFfRVJST1IsIFpfTUVNX0VSUk9SCiAgfSA9IGNvbnN0YW50cyQyOwoKICAvKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qLwoKCiAgLyoqCiAgICogY2xhc3MgSW5mbGF0ZQogICAqCiAgICogR2VuZXJpYyBKUy1zdHlsZSB3cmFwcGVyIGZvciB6bGliIGNhbGxzLiBJZiB5b3UgZG9uJ3QgbmVlZAogICAqIHN0cmVhbWluZyBiZWhhdmlvdXIgLSB1c2UgbW9yZSBzaW1wbGUgZnVuY3Rpb25zOiBbW2luZmxhdGVdXQogICAqIGFuZCBbW2luZmxhdGVSYXddXS4KICAgKiovCgogIC8qIGludGVybmFsCiAgICogaW5mbGF0ZS5jaHVua3MgLT4gQXJyYXkKICAgKgogICAqIENodW5rcyBvZiBvdXRwdXQgZGF0YSwgaWYgW1tJbmZsYXRlI29uRGF0YV1dIG5vdCBvdmVycmlkZGVuLgogICAqKi8KCiAgLyoqCiAgICogSW5mbGF0ZS5yZXN1bHQgLT4gVWludDhBcnJheXxTdHJpbmcKICAgKgogICAqIFVuY29tcHJlc3NlZCByZXN1bHQsIGdlbmVyYXRlZCBieSBkZWZhdWx0IFtbSW5mbGF0ZSNvbkRhdGFdXQogICAqIGFuZCBbW0luZmxhdGUjb25FbmRdXSBoYW5kbGVycy4gRmlsbGVkIGFmdGVyIHlvdSBwdXNoIGxhc3QgY2h1bmsKICAgKiAoY2FsbCBbW0luZmxhdGUjcHVzaF1dIHdpdGggYFpfRklOSVNIYCAvIGB0cnVlYCBwYXJhbSkuCiAgICoqLwoKICAvKioKICAgKiBJbmZsYXRlLmVyciAtPiBOdW1iZXIKICAgKgogICAqIEVycm9yIGNvZGUgYWZ0ZXIgaW5mbGF0ZSBmaW5pc2hlZC4gMCAoWl9PSykgb24gc3VjY2Vzcy4KICAgKiBTaG91bGQgYmUgY2hlY2tlZCBpZiBicm9rZW4gZGF0YSBwb3NzaWJsZS4KICAgKiovCgogIC8qKgogICAqIEluZmxhdGUubXNnIC0+IFN0cmluZwogICAqCiAgICogRXJyb3IgbWVzc2FnZSwgaWYgW1tJbmZsYXRlLmVycl1dICE9IDAKICAgKiovCgoKICAvKioKICAgKiBuZXcgSW5mbGF0ZShvcHRpb25zKQogICAqIC0gb3B0aW9ucyAoT2JqZWN0KTogemxpYiBpbmZsYXRlIG9wdGlvbnMuCiAgICoKICAgKiBDcmVhdGVzIG5ldyBpbmZsYXRvciBpbnN0YW5jZSB3aXRoIHNwZWNpZmllZCBwYXJhbXMuIFRocm93cyBleGNlcHRpb24KICAgKiBvbiBiYWQgcGFyYW1zLiBTdXBwb3J0ZWQgb3B0aW9uczoKICAgKgogICAqIC0gYHdpbmRvd0JpdHNgCiAgICogLSBgZGljdGlvbmFyeWAKICAgKgogICAqIFtodHRwOi8vemxpYi5uZXQvbWFudWFsLmh0bWwjQWR2YW5jZWRdKGh0dHA6Ly96bGliLm5ldC9tYW51YWwuaHRtbCNBZHZhbmNlZCkKICAgKiBmb3IgbW9yZSBpbmZvcm1hdGlvbiBvbiB0aGVzZS4KICAgKgogICAqIEFkZGl0aW9uYWwgb3B0aW9ucywgZm9yIGludGVybmFsIG5lZWRzOgogICAqCiAgICogLSBgY2h1bmtTaXplYCAtIHNpemUgb2YgZ2VuZXJhdGVkIGRhdGEgY2h1bmtzICgxNksgYnkgZGVmYXVsdCkKICAgKiAtIGByYXdgIChCb29sZWFuKSAtIGRvIHJhdyBpbmZsYXRlCiAgICogLSBgdG9gIChTdHJpbmcpIC0gaWYgZXF1YWwgdG8gJ3N0cmluZycsIHRoZW4gcmVzdWx0IHdpbGwgYmUgY29udmVydGVkCiAgICogICBmcm9tIHV0ZjggdG8gdXRmMTYgKGphdmFzY3JpcHQpIHN0cmluZy4gV2hlbiBzdHJpbmcgb3V0cHV0IHJlcXVlc3RlZCwKICAgKiAgIGNodW5rIGxlbmd0aCBjYW4gZGlmZmVyIGZyb20gYGNodW5rU2l6ZWAsIGRlcGVuZGluZyBvbiBjb250ZW50LgogICAqCiAgICogQnkgZGVmYXVsdCwgd2hlbiBubyBvcHRpb25zIHNldCwgYXV0b2RldGVjdCBkZWZsYXRlL2d6aXAgZGF0YSBmb3JtYXQgdmlhCiAgICogd3JhcHBlciBoZWFkZXIuCiAgICoKICAgKiAjIyMjIyBFeGFtcGxlOgogICAqCiAgICogYGBgamF2YXNjcmlwdAogICAqIGNvbnN0IHBha28gPSByZXF1aXJlKCdwYWtvJykKICAgKiBjb25zdCBjaHVuazEgPSBuZXcgVWludDhBcnJheShbMSwyLDMsNCw1LDYsNyw4LDldKQogICAqIGNvbnN0IGNodW5rMiA9IG5ldyBVaW50OEFycmF5KFsxMCwxMSwxMiwxMywxNCwxNSwxNiwxNywxOCwxOV0pOwogICAqCiAgICogY29uc3QgaW5mbGF0ZSA9IG5ldyBwYWtvLkluZmxhdGUoeyBsZXZlbDogM30pOwogICAqCiAgICogaW5mbGF0ZS5wdXNoKGNodW5rMSwgZmFsc2UpOwogICAqIGluZmxhdGUucHVzaChjaHVuazIsIHRydWUpOyAgLy8gdHJ1ZSAtPiBsYXN0IGNodW5rCiAgICoKICAgKiBpZiAoaW5mbGF0ZS5lcnIpIHsgdGhyb3cgbmV3IEVycm9yKGluZmxhdGUuZXJyKTsgfQogICAqCiAgICogY29uc29sZS5sb2coaW5mbGF0ZS5yZXN1bHQpOwogICAqIGBgYAogICAqKi8KICBmdW5jdGlvbiBJbmZsYXRlJDEob3B0aW9ucykgewogICAgdGhpcy5vcHRpb25zID0gY29tbW9uLmFzc2lnbih7CiAgICAgIGNodW5rU2l6ZTogMTAyNCAqIDY0LAogICAgICB3aW5kb3dCaXRzOiAxNSwKICAgICAgdG86ICcnCiAgICB9LCBvcHRpb25zIHx8IHt9KTsKCiAgICBjb25zdCBvcHQgPSB0aGlzLm9wdGlvbnM7CgogICAgLy8gRm9yY2Ugd2luZG93IHNpemUgZm9yIGByYXdgIGRhdGEsIGlmIG5vdCBzZXQgZGlyZWN0bHksCiAgICAvLyBiZWNhdXNlIHdlIGhhdmUgbm8gaGVhZGVyIGZvciBhdXRvZGV0ZWN0LgogICAgaWYgKG9wdC5yYXcgJiYgKG9wdC53aW5kb3dCaXRzID49IDApICYmIChvcHQud2luZG93Qml0cyA8IDE2KSkgewogICAgICBvcHQud2luZG93Qml0cyA9IC1vcHQud2luZG93Qml0czsKICAgICAgaWYgKG9wdC53aW5kb3dCaXRzID09PSAwKSB7IG9wdC53aW5kb3dCaXRzID0gLTE1OyB9CiAgICB9CgogICAgLy8gSWYgYHdpbmRvd0JpdHNgIG5vdCBkZWZpbmVkIChhbmQgbW9kZSBub3QgcmF3KSAtIHNldCBhdXRvZGV0ZWN0IGZsYWcgZm9yIGd6aXAvZGVmbGF0ZQogICAgaWYgKChvcHQud2luZG93Qml0cyA+PSAwKSAmJiAob3B0LndpbmRvd0JpdHMgPCAxNikgJiYKICAgICAgICAhKG9wdGlvbnMgJiYgb3B0aW9ucy53aW5kb3dCaXRzKSkgewogICAgICBvcHQud2luZG93Qml0cyArPSAzMjsKICAgIH0KCiAgICAvLyBHemlwIGhlYWRlciBoYXMgbm8gaW5mbyBhYm91dCB3aW5kb3dzIHNpemUsIHdlIGNhbiBkbyBhdXRvZGV0ZWN0IG9ubHkKICAgIC8vIGZvciBkZWZsYXRlLiBTbywgaWYgd2luZG93IHNpemUgbm90IHNldCwgZm9yY2UgaXQgdG8gbWF4IHdoZW4gZ3ppcCBwb3NzaWJsZQogICAgaWYgKChvcHQud2luZG93Qml0cyA+IDE1KSAmJiAob3B0LndpbmRvd0JpdHMgPCA0OCkpIHsKICAgICAgLy8gYml0IDMgKDE2KSAtPiBnemlwcGVkIGRhdGEKICAgICAgLy8gYml0IDQgKDMyKSAtPiBhdXRvZGV0ZWN0IGd6aXAvZGVmbGF0ZQogICAgICBpZiAoKG9wdC53aW5kb3dCaXRzICYgMTUpID09PSAwKSB7CiAgICAgICAgb3B0LndpbmRvd0JpdHMgfD0gMTU7CiAgICAgIH0KICAgIH0KCiAgICB0aGlzLmVyciAgICA9IDA7ICAgICAgLy8gZXJyb3IgY29kZSwgaWYgaGFwcGVucyAoMCA9IFpfT0spCiAgICB0aGlzLm1zZyAgICA9ICcnOyAgICAgLy8gZXJyb3IgbWVzc2FnZQogICAgdGhpcy5lbmRlZCAgPSBmYWxzZTsgIC8vIHVzZWQgdG8gYXZvaWQgbXVsdGlwbGUgb25FbmQoKSBjYWxscwogICAgdGhpcy5jaHVua3MgPSBbXTsgICAgIC8vIGNodW5rcyBvZiBjb21wcmVzc2VkIGRhdGEKCiAgICB0aGlzLnN0cm0gICA9IG5ldyB6c3RyZWFtKCk7CiAgICB0aGlzLnN0cm0uYXZhaWxfb3V0ID0gMDsKCiAgICBsZXQgc3RhdHVzICA9IGluZmxhdGVfMSQyLmluZmxhdGVJbml0MigKICAgICAgdGhpcy5zdHJtLAogICAgICBvcHQud2luZG93Qml0cwogICAgKTsKCiAgICBpZiAoc3RhdHVzICE9PSBaX09LKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcihtZXNzYWdlc1tzdGF0dXNdKTsKICAgIH0KCiAgICB0aGlzLmhlYWRlciA9IG5ldyBnemhlYWRlcigpOwoKICAgIGluZmxhdGVfMSQyLmluZmxhdGVHZXRIZWFkZXIodGhpcy5zdHJtLCB0aGlzLmhlYWRlcik7CgogICAgLy8gU2V0dXAgZGljdGlvbmFyeQogICAgaWYgKG9wdC5kaWN0aW9uYXJ5KSB7CiAgICAgIC8vIENvbnZlcnQgZGF0YSBpZiBuZWVkZWQKICAgICAgaWYgKHR5cGVvZiBvcHQuZGljdGlvbmFyeSA9PT0gJ3N0cmluZycpIHsKICAgICAgICBvcHQuZGljdGlvbmFyeSA9IHN0cmluZ3Muc3RyaW5nMmJ1ZihvcHQuZGljdGlvbmFyeSk7CiAgICAgIH0gZWxzZSBpZiAodG9TdHJpbmcuY2FsbChvcHQuZGljdGlvbmFyeSkgPT09ICdbb2JqZWN0IEFycmF5QnVmZmVyXScpIHsKICAgICAgICBvcHQuZGljdGlvbmFyeSA9IG5ldyBVaW50OEFycmF5KG9wdC5kaWN0aW9uYXJ5KTsKICAgICAgfQogICAgICBpZiAob3B0LnJhdykgeyAvL0luIHJhdyBtb2RlIHdlIG5lZWQgdG8gc2V0IHRoZSBkaWN0aW9uYXJ5IGVhcmx5CiAgICAgICAgc3RhdHVzID0gaW5mbGF0ZV8xJDIuaW5mbGF0ZVNldERpY3Rpb25hcnkodGhpcy5zdHJtLCBvcHQuZGljdGlvbmFyeSk7CiAgICAgICAgaWYgKHN0YXR1cyAhPT0gWl9PSykgewogICAgICAgICAgdGhyb3cgbmV3IEVycm9yKG1lc3NhZ2VzW3N0YXR1c10pOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0KCiAgLyoqCiAgICogSW5mbGF0ZSNwdXNoKGRhdGFbLCBmbHVzaF9tb2RlXSkgLT4gQm9vbGVhbgogICAqIC0gZGF0YSAoVWludDhBcnJheXxBcnJheUJ1ZmZlcik6IGlucHV0IGRhdGEKICAgKiAtIGZsdXNoX21vZGUgKE51bWJlcnxCb29sZWFuKTogMC4uNiBmb3IgY29ycmVzcG9uZGluZyBaX05PX0ZMVVNILi5aX1RSRUUKICAgKiAgIGZsdXNoIG1vZGVzLiBTZWUgY29uc3RhbnRzLiBTa2lwcGVkIG9yIGBmYWxzZWAgbWVhbnMgWl9OT19GTFVTSCwKICAgKiAgIGB0cnVlYCBtZWFucyBaX0ZJTklTSC4KICAgKgogICAqIFNlbmRzIGlucHV0IGRhdGEgdG8gaW5mbGF0ZSBwaXBlLCBnZW5lcmF0aW5nIFtbSW5mbGF0ZSNvbkRhdGFdXSBjYWxscyB3aXRoCiAgICogbmV3IG91dHB1dCBjaHVua3MuIFJldHVybnMgYHRydWVgIG9uIHN1Y2Nlc3MuIElmIGVuZCBvZiBzdHJlYW0gZGV0ZWN0ZWQsCiAgICogW1tJbmZsYXRlI29uRW5kXV0gd2lsbCBiZSBjYWxsZWQuCiAgICoKICAgKiBgZmx1c2hfbW9kZWAgaXMgbm90IG5lZWRlZCBmb3Igbm9ybWFsIG9wZXJhdGlvbiwgYmVjYXVzZSBlbmQgb2Ygc3RyZWFtCiAgICogZGV0ZWN0ZWQgYXV0b21hdGljYWxseS4gWW91IG1heSB0cnkgdG8gdXNlIGl0IGZvciBhZHZhbmNlZCB0aGluZ3MsIGJ1dAogICAqIHRoaXMgZnVuY3Rpb25hbGl0eSB3YXMgbm90IHRlc3RlZC4KICAgKgogICAqIE9uIGZhaWwgY2FsbCBbW0luZmxhdGUjb25FbmRdXSB3aXRoIGVycm9yIGNvZGUgYW5kIHJldHVybiBmYWxzZS4KICAgKgogICAqICMjIyMjIEV4YW1wbGUKICAgKgogICAqIGBgYGphdmFzY3JpcHQKICAgKiBwdXNoKGNodW5rLCBmYWxzZSk7IC8vIHB1c2ggb25lIG9mIGRhdGEgY2h1bmtzCiAgICogLi4uCiAgICogcHVzaChjaHVuaywgdHJ1ZSk7ICAvLyBwdXNoIGxhc3QgY2h1bmsKICAgKiBgYGAKICAgKiovCiAgSW5mbGF0ZSQxLnByb3RvdHlwZS5wdXNoID0gZnVuY3Rpb24gKGRhdGEsIGZsdXNoX21vZGUpIHsKICAgIGNvbnN0IHN0cm0gPSB0aGlzLnN0cm07CiAgICBjb25zdCBjaHVua1NpemUgPSB0aGlzLm9wdGlvbnMuY2h1bmtTaXplOwogICAgY29uc3QgZGljdGlvbmFyeSA9IHRoaXMub3B0aW9ucy5kaWN0aW9uYXJ5OwogICAgbGV0IHN0YXR1cywgX2ZsdXNoX21vZGUsIGxhc3RfYXZhaWxfb3V0OwoKICAgIGlmICh0aGlzLmVuZGVkKSByZXR1cm4gZmFsc2U7CgogICAgaWYgKGZsdXNoX21vZGUgPT09IH5+Zmx1c2hfbW9kZSkgX2ZsdXNoX21vZGUgPSBmbHVzaF9tb2RlOwogICAgZWxzZSBfZmx1c2hfbW9kZSA9IGZsdXNoX21vZGUgPT09IHRydWUgPyBaX0ZJTklTSCA6IFpfTk9fRkxVU0g7CgogICAgLy8gQ29udmVydCBkYXRhIGlmIG5lZWRlZAogICAgaWYgKHRvU3RyaW5nLmNhbGwoZGF0YSkgPT09ICdbb2JqZWN0IEFycmF5QnVmZmVyXScpIHsKICAgICAgc3RybS5pbnB1dCA9IG5ldyBVaW50OEFycmF5KGRhdGEpOwogICAgfSBlbHNlIHsKICAgICAgc3RybS5pbnB1dCA9IGRhdGE7CiAgICB9CgogICAgc3RybS5uZXh0X2luID0gMDsKICAgIHN0cm0uYXZhaWxfaW4gPSBzdHJtLmlucHV0Lmxlbmd0aDsKCiAgICBmb3IgKDs7KSB7CiAgICAgIGlmIChzdHJtLmF2YWlsX291dCA9PT0gMCkgewogICAgICAgIHN0cm0ub3V0cHV0ID0gbmV3IFVpbnQ4QXJyYXkoY2h1bmtTaXplKTsKICAgICAgICBzdHJtLm5leHRfb3V0ID0gMDsKICAgICAgICBzdHJtLmF2YWlsX291dCA9IGNodW5rU2l6ZTsKICAgICAgfQoKICAgICAgc3RhdHVzID0gaW5mbGF0ZV8xJDIuaW5mbGF0ZShzdHJtLCBfZmx1c2hfbW9kZSk7CgogICAgICBpZiAoc3RhdHVzID09PSBaX05FRURfRElDVCAmJiBkaWN0aW9uYXJ5KSB7CiAgICAgICAgc3RhdHVzID0gaW5mbGF0ZV8xJDIuaW5mbGF0ZVNldERpY3Rpb25hcnkoc3RybSwgZGljdGlvbmFyeSk7CgogICAgICAgIGlmIChzdGF0dXMgPT09IFpfT0spIHsKICAgICAgICAgIHN0YXR1cyA9IGluZmxhdGVfMSQyLmluZmxhdGUoc3RybSwgX2ZsdXNoX21vZGUpOwogICAgICAgIH0gZWxzZSBpZiAoc3RhdHVzID09PSBaX0RBVEFfRVJST1IpIHsKICAgICAgICAgIC8vIFJlcGxhY2UgY29kZSB3aXRoIG1vcmUgdmVyYm9zZQogICAgICAgICAgc3RhdHVzID0gWl9ORUVEX0RJQ1Q7CiAgICAgICAgfQogICAgICB9CgogICAgICAvLyBTa2lwIHNueWMgbWFya2VycyBpZiBtb3JlIGRhdGEgZm9sbG93cyBhbmQgbm90IHJhdyBtb2RlCiAgICAgIHdoaWxlIChzdHJtLmF2YWlsX2luID4gMCAmJgogICAgICAgICAgICAgc3RhdHVzID09PSBaX1NUUkVBTV9FTkQgJiYKICAgICAgICAgICAgIHN0cm0uc3RhdGUud3JhcCA+IDAgJiYKICAgICAgICAgICAgIGRhdGFbc3RybS5uZXh0X2luXSAhPT0gMCkKICAgICAgewogICAgICAgIGluZmxhdGVfMSQyLmluZmxhdGVSZXNldChzdHJtKTsKICAgICAgICBzdGF0dXMgPSBpbmZsYXRlXzEkMi5pbmZsYXRlKHN0cm0sIF9mbHVzaF9tb2RlKTsKICAgICAgfQoKICAgICAgc3dpdGNoIChzdGF0dXMpIHsKICAgICAgICBjYXNlIFpfU1RSRUFNX0VSUk9SOgogICAgICAgIGNhc2UgWl9EQVRBX0VSUk9SOgogICAgICAgIGNhc2UgWl9ORUVEX0RJQ1Q6CiAgICAgICAgY2FzZSBaX01FTV9FUlJPUjoKICAgICAgICAgIHRoaXMub25FbmQoc3RhdHVzKTsKICAgICAgICAgIHRoaXMuZW5kZWQgPSB0cnVlOwogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CgogICAgICAvLyBSZW1lbWJlciByZWFsIGBhdmFpbF9vdXRgIHZhbHVlLCBiZWNhdXNlIHdlIG1heSBwYXRjaCBvdXQgYnVmZmVyIGNvbnRlbnQKICAgICAgLy8gdG8gYWxpZ24gdXRmOCBzdHJpbmdzIGJvdW5kYXJpZXMuCiAgICAgIGxhc3RfYXZhaWxfb3V0ID0gc3RybS5hdmFpbF9vdXQ7CgogICAgICBpZiAoc3RybS5uZXh0X291dCkgewogICAgICAgIGlmIChzdHJtLmF2YWlsX291dCA9PT0gMCB8fCBzdGF0dXMgPT09IFpfU1RSRUFNX0VORCkgewoKICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMudG8gPT09ICdzdHJpbmcnKSB7CgogICAgICAgICAgICBsZXQgbmV4dF9vdXRfdXRmOCA9IHN0cmluZ3MudXRmOGJvcmRlcihzdHJtLm91dHB1dCwgc3RybS5uZXh0X291dCk7CgogICAgICAgICAgICBsZXQgdGFpbCA9IHN0cm0ubmV4dF9vdXQgLSBuZXh0X291dF91dGY4OwogICAgICAgICAgICBsZXQgdXRmOHN0ciA9IHN0cmluZ3MuYnVmMnN0cmluZyhzdHJtLm91dHB1dCwgbmV4dF9vdXRfdXRmOCk7CgogICAgICAgICAgICAvLyBtb3ZlIHRhaWwgJiByZWFsaWduIGNvdW50ZXJzCiAgICAgICAgICAgIHN0cm0ubmV4dF9vdXQgPSB0YWlsOwogICAgICAgICAgICBzdHJtLmF2YWlsX291dCA9IGNodW5rU2l6ZSAtIHRhaWw7CiAgICAgICAgICAgIGlmICh0YWlsKSBzdHJtLm91dHB1dC5zZXQoc3RybS5vdXRwdXQuc3ViYXJyYXkobmV4dF9vdXRfdXRmOCwgbmV4dF9vdXRfdXRmOCArIHRhaWwpLCAwKTsKCiAgICAgICAgICAgIHRoaXMub25EYXRhKHV0ZjhzdHIpOwoKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMub25EYXRhKHN0cm0ub3V0cHV0Lmxlbmd0aCA9PT0gc3RybS5uZXh0X291dCA/IHN0cm0ub3V0cHV0IDogc3RybS5vdXRwdXQuc3ViYXJyYXkoMCwgc3RybS5uZXh0X291dCkpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgLy8gTXVzdCByZXBlYXQgaXRlcmF0aW9uIGlmIG91dCBidWZmZXIgaXMgZnVsbAogICAgICBpZiAoc3RhdHVzID09PSBaX09LICYmIGxhc3RfYXZhaWxfb3V0ID09PSAwKSBjb250aW51ZTsKCiAgICAgIC8vIEZpbmFsaXplIGlmIGVuZCBvZiBzdHJlYW0gcmVhY2hlZC4KICAgICAgaWYgKHN0YXR1cyA9PT0gWl9TVFJFQU1fRU5EKSB7CiAgICAgICAgc3RhdHVzID0gaW5mbGF0ZV8xJDIuaW5mbGF0ZUVuZCh0aGlzLnN0cm0pOwogICAgICAgIHRoaXMub25FbmQoc3RhdHVzKTsKICAgICAgICB0aGlzLmVuZGVkID0gdHJ1ZTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQoKICAgICAgaWYgKHN0cm0uYXZhaWxfaW4gPT09IDApIGJyZWFrOwogICAgfQoKICAgIHJldHVybiB0cnVlOwogIH07CgoKICAvKioKICAgKiBJbmZsYXRlI29uRGF0YShjaHVuaykgLT4gVm9pZAogICAqIC0gY2h1bmsgKFVpbnQ4QXJyYXl8U3RyaW5nKTogb3V0cHV0IGRhdGEuIFdoZW4gc3RyaW5nIG91dHB1dCByZXF1ZXN0ZWQsCiAgICogICBlYWNoIGNodW5rIHdpbGwgYmUgc3RyaW5nLgogICAqCiAgICogQnkgZGVmYXVsdCwgc3RvcmVzIGRhdGEgYmxvY2tzIGluIGBjaHVua3NbXWAgcHJvcGVydHkgYW5kIGdsdWUKICAgKiB0aG9zZSBpbiBgb25FbmRgLiBPdmVycmlkZSB0aGlzIGhhbmRsZXIsIGlmIHlvdSBuZWVkIGFub3RoZXIgYmVoYXZpb3VyLgogICAqKi8KICBJbmZsYXRlJDEucHJvdG90eXBlLm9uRGF0YSA9IGZ1bmN0aW9uIChjaHVuaykgewogICAgdGhpcy5jaHVua3MucHVzaChjaHVuayk7CiAgfTsKCgogIC8qKgogICAqIEluZmxhdGUjb25FbmQoc3RhdHVzKSAtPiBWb2lkCiAgICogLSBzdGF0dXMgKE51bWJlcik6IGluZmxhdGUgc3RhdHVzLiAwIChaX09LKSBvbiBzdWNjZXNzLAogICAqICAgb3RoZXIgaWYgbm90LgogICAqCiAgICogQ2FsbGVkIGVpdGhlciBhZnRlciB5b3UgdGVsbCBpbmZsYXRlIHRoYXQgdGhlIGlucHV0IHN0cmVhbSBpcwogICAqIGNvbXBsZXRlIChaX0ZJTklTSCkuIEJ5IGRlZmF1bHQgLSBqb2luIGNvbGxlY3RlZCBjaHVua3MsCiAgICogZnJlZSBtZW1vcnkgYW5kIGZpbGwgYHJlc3VsdHNgIC8gYGVycmAgcHJvcGVydGllcy4KICAgKiovCiAgSW5mbGF0ZSQxLnByb3RvdHlwZS5vbkVuZCA9IGZ1bmN0aW9uIChzdGF0dXMpIHsKICAgIC8vIE9uIHN1Y2Nlc3MgLSBqb2luCiAgICBpZiAoc3RhdHVzID09PSBaX09LKSB7CiAgICAgIGlmICh0aGlzLm9wdGlvbnMudG8gPT09ICdzdHJpbmcnKSB7CiAgICAgICAgdGhpcy5yZXN1bHQgPSB0aGlzLmNodW5rcy5qb2luKCcnKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnJlc3VsdCA9IGNvbW1vbi5mbGF0dGVuQ2h1bmtzKHRoaXMuY2h1bmtzKTsKICAgICAgfQogICAgfQogICAgdGhpcy5jaHVua3MgPSBbXTsKICAgIHRoaXMuZXJyID0gc3RhdHVzOwogICAgdGhpcy5tc2cgPSB0aGlzLnN0cm0ubXNnOwogIH07CgoKICAvKioKICAgKiBpbmZsYXRlKGRhdGFbLCBvcHRpb25zXSkgLT4gVWludDhBcnJheXxTdHJpbmcKICAgKiAtIGRhdGEgKFVpbnQ4QXJyYXkpOiBpbnB1dCBkYXRhIHRvIGRlY29tcHJlc3MuCiAgICogLSBvcHRpb25zIChPYmplY3QpOiB6bGliIGluZmxhdGUgb3B0aW9ucy4KICAgKgogICAqIERlY29tcHJlc3MgYGRhdGFgIHdpdGggaW5mbGF0ZS91bmd6aXAgYW5kIGBvcHRpb25zYC4gQXV0b2RldGVjdAogICAqIGZvcm1hdCB2aWEgd3JhcHBlciBoZWFkZXIgYnkgZGVmYXVsdC4gVGhhdCdzIHdoeSB3ZSBkb24ndCBwcm92aWRlCiAgICogc2VwYXJhdGUgYHVuZ3ppcGAgbWV0aG9kLgogICAqCiAgICogU3VwcG9ydGVkIG9wdGlvbnMgYXJlOgogICAqCiAgICogLSB3aW5kb3dCaXRzCiAgICoKICAgKiBbaHR0cDovL3psaWIubmV0L21hbnVhbC5odG1sI0FkdmFuY2VkXShodHRwOi8vemxpYi5uZXQvbWFudWFsLmh0bWwjQWR2YW5jZWQpCiAgICogZm9yIG1vcmUgaW5mb3JtYXRpb24uCiAgICoKICAgKiBTdWdhciAob3B0aW9ucyk6CiAgICoKICAgKiAtIGByYXdgIChCb29sZWFuKSAtIHNheSB0aGF0IHdlIHdvcmsgd2l0aCByYXcgc3RyZWFtLCBpZiB5b3UgZG9uJ3Qgd2lzaCB0byBzcGVjaWZ5CiAgICogICBuZWdhdGl2ZSB3aW5kb3dCaXRzIGltcGxpY2l0bHkuCiAgICogLSBgdG9gIChTdHJpbmcpIC0gaWYgZXF1YWwgdG8gJ3N0cmluZycsIHRoZW4gcmVzdWx0IHdpbGwgYmUgY29udmVydGVkCiAgICogICBmcm9tIHV0ZjggdG8gdXRmMTYgKGphdmFzY3JpcHQpIHN0cmluZy4gV2hlbiBzdHJpbmcgb3V0cHV0IHJlcXVlc3RlZCwKICAgKiAgIGNodW5rIGxlbmd0aCBjYW4gZGlmZmVyIGZyb20gYGNodW5rU2l6ZWAsIGRlcGVuZGluZyBvbiBjb250ZW50LgogICAqCiAgICoKICAgKiAjIyMjIyBFeGFtcGxlOgogICAqCiAgICogYGBgamF2YXNjcmlwdAogICAqIGNvbnN0IHBha28gPSByZXF1aXJlKCdwYWtvJyk7CiAgICogY29uc3QgaW5wdXQgPSBwYWtvLmRlZmxhdGUobmV3IFVpbnQ4QXJyYXkoWzEsMiwzLDQsNSw2LDcsOCw5XSkpOwogICAqIGxldCBvdXRwdXQ7CiAgICoKICAgKiB0cnkgewogICAqICAgb3V0cHV0ID0gcGFrby5pbmZsYXRlKGlucHV0KTsKICAgKiB9IGNhdGNoIChlcnIpIHsKICAgKiAgIGNvbnNvbGUubG9nKGVycik7CiAgICogfQogICAqIGBgYAogICAqKi8KICBmdW5jdGlvbiBpbmZsYXRlJDEoaW5wdXQsIG9wdGlvbnMpIHsKICAgIGNvbnN0IGluZmxhdG9yID0gbmV3IEluZmxhdGUkMShvcHRpb25zKTsKCiAgICBpbmZsYXRvci5wdXNoKGlucHV0KTsKCiAgICAvLyBUaGF0IHdpbGwgbmV2ZXIgaGFwcGVucywgaWYgeW91IGRvbid0IGNoZWF0IHdpdGggb3B0aW9ucyA6KQogICAgaWYgKGluZmxhdG9yLmVycikgdGhyb3cgaW5mbGF0b3IubXNnIHx8IG1lc3NhZ2VzW2luZmxhdG9yLmVycl07CgogICAgcmV0dXJuIGluZmxhdG9yLnJlc3VsdDsKICB9CgoKICAvKioKICAgKiBpbmZsYXRlUmF3KGRhdGFbLCBvcHRpb25zXSkgLT4gVWludDhBcnJheXxTdHJpbmcKICAgKiAtIGRhdGEgKFVpbnQ4QXJyYXkpOiBpbnB1dCBkYXRhIHRvIGRlY29tcHJlc3MuCiAgICogLSBvcHRpb25zIChPYmplY3QpOiB6bGliIGluZmxhdGUgb3B0aW9ucy4KICAgKgogICAqIFRoZSBzYW1lIGFzIFtbaW5mbGF0ZV1dLCBidXQgY3JlYXRlcyByYXcgZGF0YSwgd2l0aG91dCB3cmFwcGVyCiAgICogKGhlYWRlciBhbmQgYWRsZXIzMiBjcmMpLgogICAqKi8KICBmdW5jdGlvbiBpbmZsYXRlUmF3JDEoaW5wdXQsIG9wdGlvbnMpIHsKICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9OwogICAgb3B0aW9ucy5yYXcgPSB0cnVlOwogICAgcmV0dXJuIGluZmxhdGUkMShpbnB1dCwgb3B0aW9ucyk7CiAgfQoKCiAgLyoqCiAgICogdW5nemlwKGRhdGFbLCBvcHRpb25zXSkgLT4gVWludDhBcnJheXxTdHJpbmcKICAgKiAtIGRhdGEgKFVpbnQ4QXJyYXkpOiBpbnB1dCBkYXRhIHRvIGRlY29tcHJlc3MuCiAgICogLSBvcHRpb25zIChPYmplY3QpOiB6bGliIGluZmxhdGUgb3B0aW9ucy4KICAgKgogICAqIEp1c3Qgc2hvcnRjdXQgdG8gW1tpbmZsYXRlXV0sIGJlY2F1c2UgaXQgYXV0b2RldGVjdHMgZm9ybWF0CiAgICogYnkgaGVhZGVyLmNvbnRlbnQuIERvbmUgZm9yIGNvbnZlbmllbmNlLgogICAqKi8KCgogIHZhciBJbmZsYXRlXzEkMSA9IEluZmxhdGUkMTsKICB2YXIgaW5mbGF0ZV8yID0gaW5mbGF0ZSQxOwogIHZhciBpbmZsYXRlUmF3XzEkMSA9IGluZmxhdGVSYXckMTsKICB2YXIgdW5nemlwJDEgPSBpbmZsYXRlJDE7CiAgdmFyIGNvbnN0YW50cyA9IGNvbnN0YW50cyQyOwoKICB2YXIgaW5mbGF0ZV8xJDEgPSB7CiAgCUluZmxhdGU6IEluZmxhdGVfMSQxLAogIAlpbmZsYXRlOiBpbmZsYXRlXzIsCiAgCWluZmxhdGVSYXc6IGluZmxhdGVSYXdfMSQxLAogIAl1bmd6aXA6IHVuZ3ppcCQxLAogIAljb25zdGFudHM6IGNvbnN0YW50cwogIH07CgogIGNvbnN0IHsgSW5mbGF0ZSwgaW5mbGF0ZSwgaW5mbGF0ZVJhdywgdW5nemlwIH0gPSBpbmZsYXRlXzEkMTsKICB2YXIgaW5mbGF0ZV8xID0gaW5mbGF0ZTsKCiAgY2xhc3MgRGVmbGF0ZURlY29kZXIgZXh0ZW5kcyBCYXNlRGVjb2RlciB7CiAgICBkZWNvZGVCbG9jayhidWZmZXIpIHsKICAgICAgcmV0dXJuIGluZmxhdGVfMShuZXcgVWludDhBcnJheShidWZmZXIpKS5idWZmZXI7CiAgICB9CiAgfQoKICBjbGFzcyBQYWNrYml0c0RlY29kZXIgZXh0ZW5kcyBCYXNlRGVjb2RlciB7CiAgICBkZWNvZGVCbG9jayhidWZmZXIpIHsKICAgICAgY29uc3QgZGF0YVZpZXcgPSBuZXcgRGF0YVZpZXcoYnVmZmVyKTsKICAgICAgY29uc3Qgb3V0ID0gW107CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJ1ZmZlci5ieXRlTGVuZ3RoOyArK2kpIHsKICAgICAgICBsZXQgaGVhZGVyID0gZGF0YVZpZXcuZ2V0SW50OChpKTsKICAgICAgICBpZiAoaGVhZGVyIDwgMCkgewogICAgICAgICAgY29uc3QgbmV4dCA9IGRhdGFWaWV3LmdldFVpbnQ4KGkgKyAxKTsKICAgICAgICAgIGhlYWRlciA9IC1oZWFkZXI7CiAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8PSBoZWFkZXI7ICsraikgewogICAgICAgICAgICBvdXQucHVzaChuZXh0KTsKICAgICAgICAgIH0KICAgICAgICAgIGkgKz0gMTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPD0gaGVhZGVyOyArK2opIHsKICAgICAgICAgICAgb3V0LnB1c2goZGF0YVZpZXcuZ2V0VWludDgoaSArIGogKyAxKSk7CiAgICAgICAgICB9CiAgICAgICAgICBpICs9IGhlYWRlciArIDE7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBuZXcgVWludDhBcnJheShvdXQpLmJ1ZmZlcjsKICAgIH0KICB9CgogIHZhciBMZXJjRGVjb2RlID0ge2V4cG9ydHM6IHt9fTsKCiAgLyoganNoaW50IGZvcmluOiBmYWxzZSwgYml0d2lzZTogZmFsc2UgKi8KCiAgKGZ1bmN0aW9uIChtb2R1bGUpIHsKICAvKgogIENvcHlyaWdodCAyMDE1LTIwMTggRXNyaQoKICBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgogIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoKICBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgogIEEgY29weSBvZiB0aGUgbGljZW5zZSBhbmQgYWRkaXRpb25hbCBub3RpY2VzIGFyZSBsb2NhdGVkIHdpdGggdGhlCiAgc291cmNlIGRpc3RyaWJ1dGlvbiBhdDoKCiAgaHR0cDovL2dpdGh1Yi5jb20vRXNyaS9sZXJjLwoKICBDb250cmlidXRvcnM6ICBKb2hhbm5lcyBTY2htaWQsIChMRVJDIHYxKQogICAgICAgICAgICAgICAgIENoYXlhbmlrYSBLaGF0dWEsIChMRVJDIHYxKQogICAgICAgICAgICAgICAgIFdlbnh1ZSBKdSAoTEVSQyB2MSwgdjIueCkKICAqLwoKICAvKiBDb3B5cmlnaHQgMjAxNS0yMDE4IEVzcmkuIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdCBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAgQHByZXNlcnZlICovCgogIC8qKgogICAqIGEgbW9kdWxlIGZvciBkZWNvZGluZyBMRVJDIGJsb2JzCiAgICogQG1vZHVsZSBMZXJjCiAgICovCiAgKGZ1bmN0aW9uKCkgewogICAgLy90aGUgb3JpZ2luYWwgTGVyY0RlY29kZSBmb3IgVmVyc2lvbiAxCiAgICB2YXIgTGVyY0RlY29kZSA9IChmdW5jdGlvbigpIHsKCiAgICAgIC8vIFdBUk5JTkc6IFRoaXMgZGVjb2RlciB2ZXJzaW9uIGNhbiBvbmx5IHJlYWQgb2xkIHZlcnNpb24gMSBMZXJjIGJsb2JzLiBVc2Ugd2l0aCBjYXV0aW9uLgoKICAgICAgLy8gTm90ZTogY3VycmVudGx5LCB0aGlzIG1vZHVsZSBvbmx5IGhhcyBhbiBpbXBsZW1lbnRhdGlvbiBmb3IgZGVjb2RpbmcgTEVSQyBkYXRhLCBub3QgZW5jb2RpbmcuIFRoZSBuYW1lIG9mCiAgICAgIC8vIHRoZSBjbGFzcyB3YXMgY2hvc2VuIHRvIGJlIGZ1dHVyZSBwcm9vZi4KCiAgICAgIHZhciBDbnRaSW1hZ2UgPSB7fTsKCiAgICAgIENudFpJbWFnZS5kZWZhdWx0Tm9EYXRhVmFsdWUgPSAtMy40MDI3OTk5Mzg3OTAxNDg0ZSszODsgLy8gc21hbGxlc3QgRmxvYXQzMiB2YWx1ZQoKICAgICAgLyoqCiAgICAgICAqIERlY29kZSBhIExFUkMgYnl0ZSBzdHJlYW0gYW5kIHJldHVybiBhbiBvYmplY3QgY29udGFpbmluZyB0aGUgcGl4ZWwgZGF0YSBhbmQgc29tZSByZXF1aXJlZCBhbmQgb3B0aW9uYWwKICAgICAgICogaW5mb3JtYXRpb24gYWJvdXQgaXQsIHN1Y2ggYXMgdGhlIGltYWdlJ3Mgd2lkdGggYW5kIGhlaWdodC4KICAgICAgICoKICAgICAgICogQHBhcmFtIHtBcnJheUJ1ZmZlcn0gaW5wdXQgVGhlIExFUkMgaW5wdXQgYnl0ZSBzdHJlYW0KICAgICAgICogQHBhcmFtIHtvYmplY3R9IFtvcHRpb25zXSBEZWNvZGluZyBvcHRpb25zLCBjb250YWluaW5nIGFueSBvZiB0aGUgZm9sbG93aW5nIHByb3BlcnRpZXM6CiAgICAgICAqIEBjb25maWcge251bWJlcn0gW2lucHV0T2Zmc2V0ID0gMF0KICAgICAgICogICAgICAgIFNraXAgdGhlIGZpcnN0IGlucHV0T2Zmc2V0IGJ5dGVzIG9mIHRoZSBpbnB1dCBieXRlIHN0cmVhbS4gQSB2YWxpZCBMRVJDIGZpbGUgaXMgZXhwZWN0ZWQgYXQgdGhhdCBwb3NpdGlvbi4KICAgICAgICogQGNvbmZpZyB7VWludDhBcnJheX0gW2VuY29kZWRNYXNrID0gbnVsbF0KICAgICAgICogICAgICAgIElmIHNwZWNpZmllZCwgdGhlIGRlY29kZXIgd2lsbCBub3QgcmVhZCBtYXNrIGluZm9ybWF0aW9uIGZyb20gdGhlIGlucHV0IGFuZCB1c2UgdGhlIHNwZWNpZmllZCBlbmNvZGVkCiAgICAgICAqICAgICAgICBtYXNrIGRhdGEgaW5zdGVhZC4gTWFzayBoZWFkZXIvZGF0YSBtdXN0IG5vdCBiZSBwcmVzZW50IGluIHRoZSBMRVJDIGJ5dGUgc3RyZWFtIGluIHRoaXMgY2FzZS4KICAgICAgICogQGNvbmZpZyB7bnVtYmVyfSBbbm9EYXRhVmFsdWUgPSBMZXJjQ29kZS5kZWZhdWx0Tm9EYXRhVmFsdWVdCiAgICAgICAqICAgICAgICBQaXhlbCB2YWx1ZSB0byB1c2UgZm9yIG1hc2tlZCBwaXhlbHMuCiAgICAgICAqIEBjb25maWcge0FycmF5QnVmZmVyVmlld3xBcnJheX0gW3BpeGVsVHlwZSA9IEZsb2F0MzJBcnJheV0KICAgICAgICogICAgICAgIFRoZSBkZXNpcmVkIHR5cGUgb2YgdGhlIHBpeGVsRGF0YSBhcnJheSBpbiB0aGUgcmV0dXJuIHZhbHVlLiBOb3RlIHRoYXQgaXQgaXMgdGhlIGNhbGxlcidzIHJlc3BvbnNpYmlsaXR5IHRvCiAgICAgICAqICAgICAgICBwcm92aWRlIGFuIGFwcHJvcHJpYXRlIG5vRGF0YVZhbHVlIGlmIHRoZSBkZWZhdWx0IHBpeGVsVHlwZSBpcyBvdmVycmlkZGVuLgogICAgICAgKiBAY29uZmlnIHtib29sZWFufSBbcmV0dXJuTWFzayA9IGZhbHNlXQogICAgICAgKiAgICAgICAgSWYgdHJ1ZSwgdGhlIHJldHVybiB2YWx1ZSB3aWxsIGNvbnRhaW4gYSBtYXNrRGF0YSBwcm9wZXJ0eSBvZiB0eXBlIFVpbnQ4QXJyYXkgd2hpY2ggaGFzIG9uZSBlbGVtZW50IHBlcgogICAgICAgKiAgICAgICAgcGl4ZWwsIHRoZSB2YWx1ZSBvZiB3aGljaCBpcyAxIG9yIDAgZGVwZW5kaW5nIG9uIHdoZXRoZXIgdGhhdCBwaXhlbCdzIGRhdGEgaXMgcHJlc2VudCBvciBtYXNrZWQuIElmIHRoZQogICAgICAgKiAgICAgICAgaW5wdXQgTEVSQyBkYXRhIGRvZXMgbm90IGNvbnRhaW4gYSBtYXNrLCBtYXNrRGF0YSB3aWxsIG5vdCBiZSByZXR1cm5lZC4KICAgICAgICogQGNvbmZpZyB7Ym9vbGVhbn0gW3JldHVybkVuY29kZWRNYXNrID0gZmFsc2VdCiAgICAgICAqICAgICAgICBJZiB0cnVlLCB0aGUgcmV0dXJuIHZhbHVlIHdpbGwgY29udGFpbiBhIGVuY29kZWRNYXNrRGF0YSBwcm9wZXJ0eSwgd2hpY2ggY2FuIGJlIHBhc3NlZCBpbnRvIGVuY29kZSgpIGFzCiAgICAgICAqICAgICAgICBlbmNvZGVkTWFzay4KICAgICAgICogQGNvbmZpZyB7Ym9vbGVhbn0gW3JldHVybkZpbGVJbmZvID0gZmFsc2VdCiAgICAgICAqICAgICAgICBJZiB0cnVlLCB0aGUgcmV0dXJuIHZhbHVlIHdpbGwgaGF2ZSBhIGZpbGVJbmZvIHByb3BlcnR5IHRoYXQgY29udGFpbnMgbWV0YWRhdGEgb2J0YWluZWQgZnJvbSB0aGUKICAgICAgICogICAgICAgIExFUkMgaGVhZGVycyBhbmQgdGhlIGRlY29kaW5nIHByb2Nlc3MuCiAgICAgICAqIEBjb25maWcge2Jvb2xlYW59IFtjb21wdXRlVXNlZEJpdERlcHRocyA9IGZhbHNlXQogICAgICAgKiAgICAgICAgSWYgdHJ1ZSwgdGhlIGZpbGVJbmZvIHByb3BlcnR5IGluIHRoZSByZXR1cm4gdmFsdWUgd2lsbCBjb250YWluIHRoZSBzZXQgb2YgYWxsIGJsb2NrIGJpdCBkZXB0aHMKICAgICAgICogICAgICAgIGVuY291bnRlcmVkIGR1cmluZyBkZWNvZGluZy4gV2lsbCBvbmx5IGhhdmUgYW4gZWZmZWN0IGlmIHJldHVybkZpbGVJbmZvIG9wdGlvbiBpcyB0cnVlLgogICAgICAgKiBAcmV0dXJucyB7e3dpZHRoLCBoZWlnaHQsIHBpeGVsRGF0YSwgbWluVmFsdWUsIG1heFZhbHVlLCBub0RhdGFWYWx1ZSwgbWFza0RhdGEsIGVuY29kZWRNYXNrRGF0YSwgZmlsZUluZm99fQogICAgICAgKi8KICAgICAgQ250WkltYWdlLmRlY29kZSA9IGZ1bmN0aW9uKGlucHV0LCBvcHRpb25zKSB7CiAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307CgogICAgICAgIHZhciBza2lwTWFzayA9IG9wdGlvbnMuZW5jb2RlZE1hc2tEYXRhIHx8IChvcHRpb25zLmVuY29kZWRNYXNrRGF0YSA9PT0gbnVsbCk7CiAgICAgICAgdmFyIHBhcnNlZERhdGEgPSBwYXJzZShpbnB1dCwgb3B0aW9ucy5pbnB1dE9mZnNldCB8fCAwLCBza2lwTWFzayk7CgogICAgICAgIHZhciBub0RhdGFWYWx1ZSA9IChvcHRpb25zLm5vRGF0YVZhbHVlICE9PSBudWxsKSA/IG9wdGlvbnMubm9EYXRhVmFsdWUgOiBDbnRaSW1hZ2UuZGVmYXVsdE5vRGF0YVZhbHVlOwoKICAgICAgICB2YXIgdW5jb21wcmVzc2VkRGF0YSA9IHVuY29tcHJlc3NQaXhlbFZhbHVlcyhwYXJzZWREYXRhLCBvcHRpb25zLnBpeGVsVHlwZSB8fCBGbG9hdDMyQXJyYXksCiAgICAgICAgICBvcHRpb25zLmVuY29kZWRNYXNrRGF0YSwgbm9EYXRhVmFsdWUsIG9wdGlvbnMucmV0dXJuTWFzayk7CgogICAgICAgIHZhciByZXN1bHQgPSB7CiAgICAgICAgICB3aWR0aDogcGFyc2VkRGF0YS53aWR0aCwKICAgICAgICAgIGhlaWdodDogcGFyc2VkRGF0YS5oZWlnaHQsCiAgICAgICAgICBwaXhlbERhdGE6IHVuY29tcHJlc3NlZERhdGEucmVzdWx0UGl4ZWxzLAogICAgICAgICAgbWluVmFsdWU6IHVuY29tcHJlc3NlZERhdGEubWluVmFsdWUsCiAgICAgICAgICBtYXhWYWx1ZTogcGFyc2VkRGF0YS5waXhlbHMubWF4VmFsdWUsCiAgICAgICAgICBub0RhdGFWYWx1ZTogbm9EYXRhVmFsdWUKICAgICAgICB9OwoKICAgICAgICBpZiAodW5jb21wcmVzc2VkRGF0YS5yZXN1bHRNYXNrKSB7CiAgICAgICAgICByZXN1bHQubWFza0RhdGEgPSB1bmNvbXByZXNzZWREYXRhLnJlc3VsdE1hc2s7CiAgICAgICAgfQoKICAgICAgICBpZiAob3B0aW9ucy5yZXR1cm5FbmNvZGVkTWFzayAmJiBwYXJzZWREYXRhLm1hc2spIHsKICAgICAgICAgIHJlc3VsdC5lbmNvZGVkTWFza0RhdGEgPSBwYXJzZWREYXRhLm1hc2suYml0c2V0ID8gcGFyc2VkRGF0YS5tYXNrLmJpdHNldCA6IG51bGw7CiAgICAgICAgfQoKICAgICAgICBpZiAob3B0aW9ucy5yZXR1cm5GaWxlSW5mbykgewogICAgICAgICAgcmVzdWx0LmZpbGVJbmZvID0gZm9ybWF0RmlsZUluZm8ocGFyc2VkRGF0YSk7CiAgICAgICAgICBpZiAob3B0aW9ucy5jb21wdXRlVXNlZEJpdERlcHRocykgewogICAgICAgICAgICByZXN1bHQuZmlsZUluZm8uYml0RGVwdGhzID0gY29tcHV0ZVVzZWRCaXREZXB0aHMocGFyc2VkRGF0YSk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICB9OwoKICAgICAgdmFyIHVuY29tcHJlc3NQaXhlbFZhbHVlcyA9IGZ1bmN0aW9uKGRhdGEsIFR5cGVkQXJyYXlDbGFzcywgbWFza0JpdHNldCwgbm9EYXRhVmFsdWUsIHN0b3JlRGVjb2RlZE1hc2spIHsKICAgICAgICB2YXIgYmxvY2tJZHggPSAwOwogICAgICAgIHZhciBudW1YID0gZGF0YS5waXhlbHMubnVtQmxvY2tzWDsKICAgICAgICB2YXIgbnVtWSA9IGRhdGEucGl4ZWxzLm51bUJsb2Nrc1k7CiAgICAgICAgdmFyIGJsb2NrV2lkdGggPSBNYXRoLmZsb29yKGRhdGEud2lkdGggLyBudW1YKTsKICAgICAgICB2YXIgYmxvY2tIZWlnaHQgPSBNYXRoLmZsb29yKGRhdGEuaGVpZ2h0IC8gbnVtWSk7CiAgICAgICAgdmFyIHNjYWxlID0gMiAqIGRhdGEubWF4WkVycm9yOwogICAgICAgIHZhciBtaW5WYWx1ZSA9IE51bWJlci5NQVhfVkFMVUUsIGN1cnJlbnRWYWx1ZTsKICAgICAgICBtYXNrQml0c2V0ID0gbWFza0JpdHNldCB8fCAoKGRhdGEubWFzaykgPyBkYXRhLm1hc2suYml0c2V0IDogbnVsbCk7CgogICAgICAgIHZhciByZXN1bHRQaXhlbHMsIHJlc3VsdE1hc2s7CiAgICAgICAgcmVzdWx0UGl4ZWxzID0gbmV3IFR5cGVkQXJyYXlDbGFzcyhkYXRhLndpZHRoICogZGF0YS5oZWlnaHQpOwogICAgICAgIGlmIChzdG9yZURlY29kZWRNYXNrICYmIG1hc2tCaXRzZXQpIHsKICAgICAgICAgIHJlc3VsdE1hc2sgPSBuZXcgVWludDhBcnJheShkYXRhLndpZHRoICogZGF0YS5oZWlnaHQpOwogICAgICAgIH0KICAgICAgICB2YXIgYmxvY2tEYXRhQnVmZmVyID0gbmV3IEZsb2F0MzJBcnJheShibG9ja1dpZHRoICogYmxvY2tIZWlnaHQpOwoKICAgICAgICB2YXIgeHgsIHl5OwogICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDw9IG51bVk7IHkrKykgewogICAgICAgICAgdmFyIHRoaXNCbG9ja0hlaWdodCA9ICh5ICE9PSBudW1ZKSA/IGJsb2NrSGVpZ2h0IDogKGRhdGEuaGVpZ2h0ICUgbnVtWSk7CiAgICAgICAgICBpZiAodGhpc0Jsb2NrSGVpZ2h0ID09PSAwKSB7CiAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgfQogICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPD0gbnVtWDsgeCsrKSB7CiAgICAgICAgICAgIHZhciB0aGlzQmxvY2tXaWR0aCA9ICh4ICE9PSBudW1YKSA/IGJsb2NrV2lkdGggOiAoZGF0YS53aWR0aCAlIG51bVgpOwogICAgICAgICAgICBpZiAodGhpc0Jsb2NrV2lkdGggPT09IDApIHsKICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdmFyIG91dFB0ciA9IHkgKiBkYXRhLndpZHRoICogYmxvY2tIZWlnaHQgKyB4ICogYmxvY2tXaWR0aDsKICAgICAgICAgICAgdmFyIG91dFN0cmlkZSA9IGRhdGEud2lkdGggLSB0aGlzQmxvY2tXaWR0aDsKCiAgICAgICAgICAgIHZhciBibG9jayA9IGRhdGEucGl4ZWxzLmJsb2Nrc1tibG9ja0lkeF07CgogICAgICAgICAgICB2YXIgYmxvY2tEYXRhLCBibG9ja1B0ciwgY29uc3RWYWx1ZTsKICAgICAgICAgICAgaWYgKGJsb2NrLmVuY29kaW5nIDwgMikgewogICAgICAgICAgICAgIC8vIGJsb2NrIGlzIGVpdGhlciB1bmNvbXByZXNzZWQgb3IgYml0LXN0dWZmZWQgKGVuY29kaW5ncyAwIGFuZCAxKQogICAgICAgICAgICAgIGlmIChibG9jay5lbmNvZGluZyA9PT0gMCkgewogICAgICAgICAgICAgICAgLy8gYmxvY2sgaXMgdW5jb21wcmVzc2VkCiAgICAgICAgICAgICAgICBibG9ja0RhdGEgPSBibG9jay5yYXdEYXRhOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAvLyBibG9jayBpcyBiaXQtc3R1ZmZlZAogICAgICAgICAgICAgICAgdW5zdHVmZihibG9jay5zdHVmZmVkRGF0YSwgYmxvY2suYml0c1BlclBpeGVsLCBibG9jay5udW1WYWxpZFBpeGVscywgYmxvY2sub2Zmc2V0LCBzY2FsZSwgYmxvY2tEYXRhQnVmZmVyLCBkYXRhLnBpeGVscy5tYXhWYWx1ZSk7CiAgICAgICAgICAgICAgICBibG9ja0RhdGEgPSBibG9ja0RhdGFCdWZmZXI7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGJsb2NrUHRyID0gMDsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIGlmIChibG9jay5lbmNvZGluZyA9PT0gMikgewogICAgICAgICAgICAgIC8vIGJsb2NrIGlzIGFsbCAwCiAgICAgICAgICAgICAgY29uc3RWYWx1ZSA9IDA7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgLy8gYmxvY2sgaGFzIGNvbnN0YW50IHZhbHVlIChlbmNvZGluZyA9PT0gMykKICAgICAgICAgICAgICBjb25zdFZhbHVlID0gYmxvY2sub2Zmc2V0OwogICAgICAgICAgICB9CgogICAgICAgICAgICB2YXIgbWFza0J5dGU7CiAgICAgICAgICAgIGlmIChtYXNrQml0c2V0KSB7CiAgICAgICAgICAgICAgZm9yICh5eSA9IDA7IHl5IDwgdGhpc0Jsb2NrSGVpZ2h0OyB5eSsrKSB7CiAgICAgICAgICAgICAgICBpZiAob3V0UHRyICYgNykgewogICAgICAgICAgICAgICAgICAvLwogICAgICAgICAgICAgICAgICBtYXNrQnl0ZSA9IG1hc2tCaXRzZXRbb3V0UHRyID4+IDNdOwogICAgICAgICAgICAgICAgICBtYXNrQnl0ZSA8PD0gb3V0UHRyICYgNzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGZvciAoeHggPSAwOyB4eCA8IHRoaXNCbG9ja1dpZHRoOyB4eCsrKSB7CiAgICAgICAgICAgICAgICAgIGlmICghKG91dFB0ciAmIDcpKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gcmVhZCBuZXh0IGJ5dGUgZnJvbSBtYXNrCiAgICAgICAgICAgICAgICAgICAgbWFza0J5dGUgPSBtYXNrQml0c2V0W291dFB0ciA+PiAzXTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICBpZiAobWFza0J5dGUgJiAxMjgpIHsKICAgICAgICAgICAgICAgICAgICAvLyBwaXhlbCBkYXRhIHByZXNlbnQKICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0TWFzaykgewogICAgICAgICAgICAgICAgICAgICAgcmVzdWx0TWFza1tvdXRQdHJdID0gMTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgY3VycmVudFZhbHVlID0gKGJsb2NrLmVuY29kaW5nIDwgMikgPyBibG9ja0RhdGFbYmxvY2tQdHIrK10gOiBjb25zdFZhbHVlOwogICAgICAgICAgICAgICAgICAgIG1pblZhbHVlID0gbWluVmFsdWUgPiBjdXJyZW50VmFsdWUgPyBjdXJyZW50VmFsdWUgOiBtaW5WYWx1ZTsKICAgICAgICAgICAgICAgICAgICByZXN1bHRQaXhlbHNbb3V0UHRyKytdID0gY3VycmVudFZhbHVlOwogICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIC8vIHBpeGVsIGRhdGEgbm90IHByZXNlbnQKICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0TWFzaykgewogICAgICAgICAgICAgICAgICAgICAgcmVzdWx0TWFza1tvdXRQdHJdID0gMDsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgcmVzdWx0UGl4ZWxzW291dFB0cisrXSA9IG5vRGF0YVZhbHVlOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIG1hc2tCeXRlIDw8PSAxOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgb3V0UHRyICs9IG91dFN0cmlkZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgLy8gbWFzayBub3QgcHJlc2VudCwgc2ltcGx5IGNvcHkgYmxvY2sgb3ZlcgogICAgICAgICAgICAgIGlmIChibG9jay5lbmNvZGluZyA8IDIpIHsKICAgICAgICAgICAgICAgIC8vIGR1cGxpY2F0aW5nIHRoaXMgY29kZSBibG9jayBmb3IgcGVyZm9ybWFuY2UgcmVhc29ucwogICAgICAgICAgICAgICAgLy8gYmxvY2tEYXRhIGNhc2U6CiAgICAgICAgICAgICAgICBmb3IgKHl5ID0gMDsgeXkgPCB0aGlzQmxvY2tIZWlnaHQ7IHl5KyspIHsKICAgICAgICAgICAgICAgICAgZm9yICh4eCA9IDA7IHh4IDwgdGhpc0Jsb2NrV2lkdGg7IHh4KyspIHsKICAgICAgICAgICAgICAgICAgICBjdXJyZW50VmFsdWUgPSBibG9ja0RhdGFbYmxvY2tQdHIrK107CiAgICAgICAgICAgICAgICAgICAgbWluVmFsdWUgPSBtaW5WYWx1ZSA+IGN1cnJlbnRWYWx1ZSA/IGN1cnJlbnRWYWx1ZSA6IG1pblZhbHVlOwogICAgICAgICAgICAgICAgICAgIHJlc3VsdFBpeGVsc1tvdXRQdHIrK10gPSBjdXJyZW50VmFsdWU7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgb3V0UHRyICs9IG91dFN0cmlkZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAvLyBjb25zdFZhbHVlIGNhc2U6CiAgICAgICAgICAgICAgICBtaW5WYWx1ZSA9IG1pblZhbHVlID4gY29uc3RWYWx1ZSA/IGNvbnN0VmFsdWUgOiBtaW5WYWx1ZTsKICAgICAgICAgICAgICAgIGZvciAoeXkgPSAwOyB5eSA8IHRoaXNCbG9ja0hlaWdodDsgeXkrKykgewogICAgICAgICAgICAgICAgICBmb3IgKHh4ID0gMDsgeHggPCB0aGlzQmxvY2tXaWR0aDsgeHgrKykgewogICAgICAgICAgICAgICAgICAgIHJlc3VsdFBpeGVsc1tvdXRQdHIrK10gPSBjb25zdFZhbHVlOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIG91dFB0ciArPSBvdXRTdHJpZGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICgoYmxvY2suZW5jb2RpbmcgPT09IDEpICYmIChibG9ja1B0ciAhPT0gYmxvY2subnVtVmFsaWRQaXhlbHMpKSB7CiAgICAgICAgICAgICAgdGhyb3cgIkJsb2NrIGFuZCBNYXNrIGRvIG5vdCBtYXRjaCI7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYmxvY2tJZHgrKzsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHJldHVybiB7CiAgICAgICAgICByZXN1bHRQaXhlbHM6IHJlc3VsdFBpeGVscywKICAgICAgICAgIHJlc3VsdE1hc2s6IHJlc3VsdE1hc2ssCiAgICAgICAgICBtaW5WYWx1ZTogbWluVmFsdWUKICAgICAgICB9OwogICAgICB9OwoKICAgICAgdmFyIGZvcm1hdEZpbGVJbmZvID0gZnVuY3Rpb24oZGF0YSkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAiZmlsZUlkZW50aWZpZXJTdHJpbmciOiBkYXRhLmZpbGVJZGVudGlmaWVyU3RyaW5nLAogICAgICAgICAgImZpbGVWZXJzaW9uIjogZGF0YS5maWxlVmVyc2lvbiwKICAgICAgICAgICJpbWFnZVR5cGUiOiBkYXRhLmltYWdlVHlwZSwKICAgICAgICAgICJoZWlnaHQiOiBkYXRhLmhlaWdodCwKICAgICAgICAgICJ3aWR0aCI6IGRhdGEud2lkdGgsCiAgICAgICAgICAibWF4WkVycm9yIjogZGF0YS5tYXhaRXJyb3IsCiAgICAgICAgICAiZW9mT2Zmc2V0IjogZGF0YS5lb2ZPZmZzZXQsCiAgICAgICAgICAibWFzayI6IGRhdGEubWFzayA/IHsKICAgICAgICAgICAgIm51bUJsb2Nrc1giOiBkYXRhLm1hc2subnVtQmxvY2tzWCwKICAgICAgICAgICAgIm51bUJsb2Nrc1kiOiBkYXRhLm1hc2subnVtQmxvY2tzWSwKICAgICAgICAgICAgIm51bUJ5dGVzIjogZGF0YS5tYXNrLm51bUJ5dGVzLAogICAgICAgICAgICAibWF4VmFsdWUiOiBkYXRhLm1hc2subWF4VmFsdWUKICAgICAgICAgIH0gOiBudWxsLAogICAgICAgICAgInBpeGVscyI6IHsKICAgICAgICAgICAgIm51bUJsb2Nrc1giOiBkYXRhLnBpeGVscy5udW1CbG9ja3NYLAogICAgICAgICAgICAibnVtQmxvY2tzWSI6IGRhdGEucGl4ZWxzLm51bUJsb2Nrc1ksCiAgICAgICAgICAgICJudW1CeXRlcyI6IGRhdGEucGl4ZWxzLm51bUJ5dGVzLAogICAgICAgICAgICAibWF4VmFsdWUiOiBkYXRhLnBpeGVscy5tYXhWYWx1ZSwKICAgICAgICAgICAgIm5vRGF0YVZhbHVlIjogZGF0YS5ub0RhdGFWYWx1ZQogICAgICAgICAgfQogICAgICAgIH07CiAgICAgIH07CgogICAgICB2YXIgY29tcHV0ZVVzZWRCaXREZXB0aHMgPSBmdW5jdGlvbihkYXRhKSB7CiAgICAgICAgdmFyIG51bUJsb2NrcyA9IGRhdGEucGl4ZWxzLm51bUJsb2Nrc1ggKiBkYXRhLnBpeGVscy5udW1CbG9ja3NZOwogICAgICAgIHZhciBiaXREZXB0aHMgPSB7fTsKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG51bUJsb2NrczsgaSsrKSB7CiAgICAgICAgICB2YXIgYmxvY2sgPSBkYXRhLnBpeGVscy5ibG9ja3NbaV07CiAgICAgICAgICBpZiAoYmxvY2suZW5jb2RpbmcgPT09IDApIHsKICAgICAgICAgICAgYml0RGVwdGhzLmZsb2F0MzIgPSB0cnVlOwogICAgICAgICAgfSBlbHNlIGlmIChibG9jay5lbmNvZGluZyA9PT0gMSkgewogICAgICAgICAgICBiaXREZXB0aHNbYmxvY2suYml0c1BlclBpeGVsXSA9IHRydWU7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBiaXREZXB0aHNbMF0gPSB0cnVlOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKGJpdERlcHRocyk7CiAgICAgIH07CgogICAgICB2YXIgcGFyc2UgPSBmdW5jdGlvbihpbnB1dCwgZnAsIHNraXBNYXNrKSB7CiAgICAgICAgdmFyIGRhdGEgPSB7fTsKCiAgICAgICAgLy8gRmlsZSBoZWFkZXIKICAgICAgICB2YXIgZmlsZUlkVmlldyA9IG5ldyBVaW50OEFycmF5KGlucHV0LCBmcCwgMTApOwogICAgICAgIGRhdGEuZmlsZUlkZW50aWZpZXJTdHJpbmcgPSBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsIGZpbGVJZFZpZXcpOwogICAgICAgIGlmIChkYXRhLmZpbGVJZGVudGlmaWVyU3RyaW5nLnRyaW0oKSAhPT0gIkNudFpJbWFnZSIpIHsKICAgICAgICAgIHRocm93ICJVbmV4cGVjdGVkIGZpbGUgaWRlbnRpZmllciBzdHJpbmc6ICIgKyBkYXRhLmZpbGVJZGVudGlmaWVyU3RyaW5nOwogICAgICAgIH0KICAgICAgICBmcCArPSAxMDsKICAgICAgICB2YXIgdmlldyA9IG5ldyBEYXRhVmlldyhpbnB1dCwgZnAsIDI0KTsKICAgICAgICBkYXRhLmZpbGVWZXJzaW9uID0gdmlldy5nZXRJbnQzMigwLCB0cnVlKTsKICAgICAgICBkYXRhLmltYWdlVHlwZSA9IHZpZXcuZ2V0SW50MzIoNCwgdHJ1ZSk7CiAgICAgICAgZGF0YS5oZWlnaHQgPSB2aWV3LmdldFVpbnQzMig4LCB0cnVlKTsKICAgICAgICBkYXRhLndpZHRoID0gdmlldy5nZXRVaW50MzIoMTIsIHRydWUpOwogICAgICAgIGRhdGEubWF4WkVycm9yID0gdmlldy5nZXRGbG9hdDY0KDE2LCB0cnVlKTsKICAgICAgICBmcCArPSAyNDsKCiAgICAgICAgLy8gTWFzayBIZWFkZXIKICAgICAgICBpZiAoIXNraXBNYXNrKSB7CiAgICAgICAgICB2aWV3ID0gbmV3IERhdGFWaWV3KGlucHV0LCBmcCwgMTYpOwogICAgICAgICAgZGF0YS5tYXNrID0ge307CiAgICAgICAgICBkYXRhLm1hc2subnVtQmxvY2tzWSA9IHZpZXcuZ2V0VWludDMyKDAsIHRydWUpOwogICAgICAgICAgZGF0YS5tYXNrLm51bUJsb2Nrc1ggPSB2aWV3LmdldFVpbnQzMig0LCB0cnVlKTsKICAgICAgICAgIGRhdGEubWFzay5udW1CeXRlcyA9IHZpZXcuZ2V0VWludDMyKDgsIHRydWUpOwogICAgICAgICAgZGF0YS5tYXNrLm1heFZhbHVlID0gdmlldy5nZXRGbG9hdDMyKDEyLCB0cnVlKTsKICAgICAgICAgIGZwICs9IDE2OwoKICAgICAgICAgIC8vIE1hc2sgRGF0YQogICAgICAgICAgaWYgKGRhdGEubWFzay5udW1CeXRlcyA+IDApIHsKICAgICAgICAgICAgdmFyIGJpdHNldCA9IG5ldyBVaW50OEFycmF5KE1hdGguY2VpbChkYXRhLndpZHRoICogZGF0YS5oZWlnaHQgLyA4KSk7CiAgICAgICAgICAgIHZpZXcgPSBuZXcgRGF0YVZpZXcoaW5wdXQsIGZwLCBkYXRhLm1hc2subnVtQnl0ZXMpOwogICAgICAgICAgICB2YXIgY250ID0gdmlldy5nZXRJbnQxNigwLCB0cnVlKTsKICAgICAgICAgICAgdmFyIGlwID0gMiwgb3AgPSAwOwogICAgICAgICAgICBkbyB7CiAgICAgICAgICAgICAgaWYgKGNudCA+IDApIHsKICAgICAgICAgICAgICAgIHdoaWxlIChjbnQtLSkgeyBiaXRzZXRbb3ArK10gPSB2aWV3LmdldFVpbnQ4KGlwKyspOyB9CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHZhciB2YWwgPSB2aWV3LmdldFVpbnQ4KGlwKyspOwogICAgICAgICAgICAgICAgY250ID0gLWNudDsKICAgICAgICAgICAgICAgIHdoaWxlIChjbnQtLSkgeyBiaXRzZXRbb3ArK10gPSB2YWw7IH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgY250ID0gdmlldy5nZXRJbnQxNihpcCwgdHJ1ZSk7CiAgICAgICAgICAgICAgaXAgKz0gMjsKICAgICAgICAgICAgfSB3aGlsZSAoaXAgPCBkYXRhLm1hc2subnVtQnl0ZXMpOwogICAgICAgICAgICBpZiAoKGNudCAhPT0gLTMyNzY4KSB8fCAob3AgPCBiaXRzZXQubGVuZ3RoKSkgewogICAgICAgICAgICAgIHRocm93ICJVbmV4cGVjdGVkIGVuZCBvZiBtYXNrIFJMRSBlbmNvZGluZyI7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZGF0YS5tYXNrLmJpdHNldCA9IGJpdHNldDsKICAgICAgICAgICAgZnAgKz0gZGF0YS5tYXNrLm51bUJ5dGVzOwogICAgICAgICAgfQogICAgICAgICAgZWxzZSBpZiAoKGRhdGEubWFzay5udW1CeXRlcyB8IGRhdGEubWFzay5udW1CbG9ja3NZIHwgZGF0YS5tYXNrLm1heFZhbHVlKSA9PT0gMCkgeyAgLy8gU3BlY2lhbCBjYXNlLCBhbGwgbm9kYXRhCiAgICAgICAgICAgIGRhdGEubWFzay5iaXRzZXQgPSBuZXcgVWludDhBcnJheShNYXRoLmNlaWwoZGF0YS53aWR0aCAqIGRhdGEuaGVpZ2h0IC8gOCkpOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgLy8gUGl4ZWwgSGVhZGVyCiAgICAgICAgdmlldyA9IG5ldyBEYXRhVmlldyhpbnB1dCwgZnAsIDE2KTsKICAgICAgICBkYXRhLnBpeGVscyA9IHt9OwogICAgICAgIGRhdGEucGl4ZWxzLm51bUJsb2Nrc1kgPSB2aWV3LmdldFVpbnQzMigwLCB0cnVlKTsKICAgICAgICBkYXRhLnBpeGVscy5udW1CbG9ja3NYID0gdmlldy5nZXRVaW50MzIoNCwgdHJ1ZSk7CiAgICAgICAgZGF0YS5waXhlbHMubnVtQnl0ZXMgPSB2aWV3LmdldFVpbnQzMig4LCB0cnVlKTsKICAgICAgICBkYXRhLnBpeGVscy5tYXhWYWx1ZSA9IHZpZXcuZ2V0RmxvYXQzMigxMiwgdHJ1ZSk7CiAgICAgICAgZnAgKz0gMTY7CgogICAgICAgIHZhciBudW1CbG9ja3NYID0gZGF0YS5waXhlbHMubnVtQmxvY2tzWDsKICAgICAgICB2YXIgbnVtQmxvY2tzWSA9IGRhdGEucGl4ZWxzLm51bUJsb2Nrc1k7CiAgICAgICAgLy8gdGhlIG51bWJlciBvZiBibG9ja3Mgc3BlY2lmaWVkIGluIHRoZSBoZWFkZXIgZG9lcyBub3QgdGFrZSBpbnRvIGFjY291bnQgdGhlIGJsb2NrcyBhdCB0aGUgZW5kIG9mCiAgICAgICAgLy8gZWFjaCByb3cvY29sdW1uIHdpdGggYSBzcGVjaWFsIHdpZHRoL2hlaWdodCB0aGF0IG1ha2UgdGhlIGltYWdlIGNvbXBsZXRlIGluIGNhc2UgdGhlIHdpZHRoIGlzIG5vdAogICAgICAgIC8vIGV2ZW5seSBkaXZpc2libGUgYnkgdGhlIG51bWJlciBvZiBibG9ja3MuCiAgICAgICAgdmFyIGFjdHVhbE51bUJsb2Nrc1ggPSBudW1CbG9ja3NYICsgKChkYXRhLndpZHRoICUgbnVtQmxvY2tzWCkgPiAwID8gMSA6IDApOwogICAgICAgIHZhciBhY3R1YWxOdW1CbG9ja3NZID0gbnVtQmxvY2tzWSArICgoZGF0YS5oZWlnaHQgJSBudW1CbG9ja3NZKSA+IDAgPyAxIDogMCk7CiAgICAgICAgZGF0YS5waXhlbHMuYmxvY2tzID0gbmV3IEFycmF5KGFjdHVhbE51bUJsb2Nrc1ggKiBhY3R1YWxOdW1CbG9ja3NZKTsKICAgICAgICB2YXIgYmxvY2tJID0gMDsKICAgICAgICBmb3IgKHZhciBibG9ja1kgPSAwOyBibG9ja1kgPCBhY3R1YWxOdW1CbG9ja3NZOyBibG9ja1krKykgewogICAgICAgICAgZm9yICh2YXIgYmxvY2tYID0gMDsgYmxvY2tYIDwgYWN0dWFsTnVtQmxvY2tzWDsgYmxvY2tYKyspIHsKCiAgICAgICAgICAgIC8vIEJsb2NrCiAgICAgICAgICAgIHZhciBzaXplID0gMDsKICAgICAgICAgICAgdmFyIGJ5dGVzTGVmdCA9IGlucHV0LmJ5dGVMZW5ndGggLSBmcDsKICAgICAgICAgICAgdmlldyA9IG5ldyBEYXRhVmlldyhpbnB1dCwgZnAsIE1hdGgubWluKDEwLCBieXRlc0xlZnQpKTsKICAgICAgICAgICAgdmFyIGJsb2NrID0ge307CiAgICAgICAgICAgIGRhdGEucGl4ZWxzLmJsb2Nrc1tibG9ja0krK10gPSBibG9jazsKICAgICAgICAgICAgdmFyIGhlYWRlckJ5dGUgPSB2aWV3LmdldFVpbnQ4KDApOyBzaXplKys7CiAgICAgICAgICAgIGJsb2NrLmVuY29kaW5nID0gaGVhZGVyQnl0ZSAmIDYzOwogICAgICAgICAgICBpZiAoYmxvY2suZW5jb2RpbmcgPiAzKSB7CiAgICAgICAgICAgICAgdGhyb3cgIkludmFsaWQgYmxvY2sgZW5jb2RpbmcgKCIgKyBibG9jay5lbmNvZGluZyArICIpIjsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoYmxvY2suZW5jb2RpbmcgPT09IDIpIHsKICAgICAgICAgICAgICBmcCsrOwogICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICgoaGVhZGVyQnl0ZSAhPT0gMCkgJiYgKGhlYWRlckJ5dGUgIT09IDIpKSB7CiAgICAgICAgICAgICAgaGVhZGVyQnl0ZSA+Pj0gNjsKICAgICAgICAgICAgICBibG9jay5vZmZzZXRUeXBlID0gaGVhZGVyQnl0ZTsKICAgICAgICAgICAgICBpZiAoaGVhZGVyQnl0ZSA9PT0gMikgewogICAgICAgICAgICAgICAgYmxvY2sub2Zmc2V0ID0gdmlldy5nZXRJbnQ4KDEpOyBzaXplKys7CiAgICAgICAgICAgICAgfSBlbHNlIGlmIChoZWFkZXJCeXRlID09PSAxKSB7CiAgICAgICAgICAgICAgICBibG9jay5vZmZzZXQgPSB2aWV3LmdldEludDE2KDEsIHRydWUpOyBzaXplICs9IDI7CiAgICAgICAgICAgICAgfSBlbHNlIGlmIChoZWFkZXJCeXRlID09PSAwKSB7CiAgICAgICAgICAgICAgICBibG9jay5vZmZzZXQgPSB2aWV3LmdldEZsb2F0MzIoMSwgdHJ1ZSk7IHNpemUgKz0gNDsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdGhyb3cgIkludmFsaWQgYmxvY2sgb2Zmc2V0IHR5cGUiOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgaWYgKGJsb2NrLmVuY29kaW5nID09PSAxKSB7CiAgICAgICAgICAgICAgICBoZWFkZXJCeXRlID0gdmlldy5nZXRVaW50OChzaXplKTsgc2l6ZSsrOwogICAgICAgICAgICAgICAgYmxvY2suYml0c1BlclBpeGVsID0gaGVhZGVyQnl0ZSAmIDYzOwogICAgICAgICAgICAgICAgaGVhZGVyQnl0ZSA+Pj0gNjsKICAgICAgICAgICAgICAgIGJsb2NrLm51bVZhbGlkUGl4ZWxzVHlwZSA9IGhlYWRlckJ5dGU7CiAgICAgICAgICAgICAgICBpZiAoaGVhZGVyQnl0ZSA9PT0gMikgewogICAgICAgICAgICAgICAgICBibG9jay5udW1WYWxpZFBpeGVscyA9IHZpZXcuZ2V0VWludDgoc2l6ZSk7IHNpemUrKzsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaGVhZGVyQnl0ZSA9PT0gMSkgewogICAgICAgICAgICAgICAgICBibG9jay5udW1WYWxpZFBpeGVscyA9IHZpZXcuZ2V0VWludDE2KHNpemUsIHRydWUpOyBzaXplICs9IDI7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGhlYWRlckJ5dGUgPT09IDApIHsKICAgICAgICAgICAgICAgICAgYmxvY2subnVtVmFsaWRQaXhlbHMgPSB2aWV3LmdldFVpbnQzMihzaXplLCB0cnVlKTsgc2l6ZSArPSA0OwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgdGhyb3cgIkludmFsaWQgdmFsaWQgcGl4ZWwgY291bnQgdHlwZSI7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGZwICs9IHNpemU7CgogICAgICAgICAgICBpZiAoYmxvY2suZW5jb2RpbmcgPT09IDMpIHsKICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdmFyIGFycmF5QnVmLCBzdG9yZTg7CiAgICAgICAgICAgIGlmIChibG9jay5lbmNvZGluZyA9PT0gMCkgewogICAgICAgICAgICAgIHZhciBudW1QaXhlbHMgPSAoZGF0YS5waXhlbHMubnVtQnl0ZXMgLSAxKSAvIDQ7CiAgICAgICAgICAgICAgaWYgKG51bVBpeGVscyAhPT0gTWF0aC5mbG9vcihudW1QaXhlbHMpKSB7CiAgICAgICAgICAgICAgICB0aHJvdyAidW5jb21wcmVzc2VkIGJsb2NrIGhhcyBpbnZhbGlkIGxlbmd0aCI7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGFycmF5QnVmID0gbmV3IEFycmF5QnVmZmVyKG51bVBpeGVscyAqIDQpOwogICAgICAgICAgICAgIHN0b3JlOCA9IG5ldyBVaW50OEFycmF5KGFycmF5QnVmKTsKICAgICAgICAgICAgICBzdG9yZTguc2V0KG5ldyBVaW50OEFycmF5KGlucHV0LCBmcCwgbnVtUGl4ZWxzICogNCkpOwogICAgICAgICAgICAgIHZhciByYXdEYXRhID0gbmV3IEZsb2F0MzJBcnJheShhcnJheUJ1Zik7CiAgICAgICAgICAgICAgYmxvY2sucmF3RGF0YSA9IHJhd0RhdGE7CiAgICAgICAgICAgICAgZnAgKz0gbnVtUGl4ZWxzICogNDsKICAgICAgICAgICAgfSBlbHNlIGlmIChibG9jay5lbmNvZGluZyA9PT0gMSkgewogICAgICAgICAgICAgIHZhciBkYXRhQnl0ZXMgPSBNYXRoLmNlaWwoYmxvY2subnVtVmFsaWRQaXhlbHMgKiBibG9jay5iaXRzUGVyUGl4ZWwgLyA4KTsKICAgICAgICAgICAgICB2YXIgZGF0YVdvcmRzID0gTWF0aC5jZWlsKGRhdGFCeXRlcyAvIDQpOwogICAgICAgICAgICAgIGFycmF5QnVmID0gbmV3IEFycmF5QnVmZmVyKGRhdGFXb3JkcyAqIDQpOwogICAgICAgICAgICAgIHN0b3JlOCA9IG5ldyBVaW50OEFycmF5KGFycmF5QnVmKTsKICAgICAgICAgICAgICBzdG9yZTguc2V0KG5ldyBVaW50OEFycmF5KGlucHV0LCBmcCwgZGF0YUJ5dGVzKSk7CiAgICAgICAgICAgICAgYmxvY2suc3R1ZmZlZERhdGEgPSBuZXcgVWludDMyQXJyYXkoYXJyYXlCdWYpOwogICAgICAgICAgICAgIGZwICs9IGRhdGFCeXRlczsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBkYXRhLmVvZk9mZnNldCA9IGZwOwogICAgICAgIHJldHVybiBkYXRhOwogICAgICB9OwoKICAgICAgdmFyIHVuc3R1ZmYgPSBmdW5jdGlvbihzcmMsIGJpdHNQZXJQaXhlbCwgbnVtUGl4ZWxzLCBvZmZzZXQsIHNjYWxlLCBkZXN0LCBtYXhWYWx1ZSkgewogICAgICAgIHZhciBiaXRNYXNrID0gKDEgPDwgYml0c1BlclBpeGVsKSAtIDE7CiAgICAgICAgdmFyIGkgPSAwLCBvOwogICAgICAgIHZhciBiaXRzTGVmdCA9IDA7CiAgICAgICAgdmFyIG4sIGJ1ZmZlcjsKICAgICAgICB2YXIgbm1heCA9IE1hdGguY2VpbCgobWF4VmFsdWUgLSBvZmZzZXQpIC8gc2NhbGUpOwogICAgICAgIC8vIGdldCByaWQgb2YgdHJhaWxpbmcgYnl0ZXMgdGhhdCBhcmUgYWxyZWFkeSBwYXJ0IG9mIG5leHQgYmxvY2sKICAgICAgICB2YXIgbnVtSW52YWxpZFRhaWxCeXRlcyA9IHNyYy5sZW5ndGggKiA0IC0gTWF0aC5jZWlsKGJpdHNQZXJQaXhlbCAqIG51bVBpeGVscyAvIDgpOwogICAgICAgIHNyY1tzcmMubGVuZ3RoIC0gMV0gPDw9IDggKiBudW1JbnZhbGlkVGFpbEJ5dGVzOwoKICAgICAgICBmb3IgKG8gPSAwOyBvIDwgbnVtUGl4ZWxzOyBvKyspIHsKICAgICAgICAgIGlmIChiaXRzTGVmdCA9PT0gMCkgewogICAgICAgICAgICBidWZmZXIgPSBzcmNbaSsrXTsKICAgICAgICAgICAgYml0c0xlZnQgPSAzMjsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChiaXRzTGVmdCA+PSBiaXRzUGVyUGl4ZWwpIHsKICAgICAgICAgICAgbiA9IChidWZmZXIgPj4+IChiaXRzTGVmdCAtIGJpdHNQZXJQaXhlbCkpICYgYml0TWFzazsKICAgICAgICAgICAgYml0c0xlZnQgLT0gYml0c1BlclBpeGVsOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdmFyIG1pc3NpbmdCaXRzID0gKGJpdHNQZXJQaXhlbCAtIGJpdHNMZWZ0KTsKICAgICAgICAgICAgbiA9ICgoYnVmZmVyICYgYml0TWFzaykgPDwgbWlzc2luZ0JpdHMpICYgYml0TWFzazsKICAgICAgICAgICAgYnVmZmVyID0gc3JjW2krK107CiAgICAgICAgICAgIGJpdHNMZWZ0ID0gMzIgLSBtaXNzaW5nQml0czsKICAgICAgICAgICAgbiArPSAoYnVmZmVyID4+PiBiaXRzTGVmdCk7CiAgICAgICAgICB9CiAgICAgICAgICAvL3BpeGVsIHZhbHVlcyBtYXkgZXhjZWVkIG1heCBkdWUgdG8gcXVhbnRpemF0aW9uCiAgICAgICAgICBkZXN0W29dID0gbiA8IG5tYXggPyBvZmZzZXQgKyBuICogc2NhbGUgOiBtYXhWYWx1ZTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGRlc3Q7CiAgICAgIH07CgogICAgICByZXR1cm4gQ250WkltYWdlOwogICAgfSkoKTsKCiAgICAvL3ZlcnNpb24gMi4gU3VwcG9ydHMgMi4xLCAyLjIsIDIuMwogICAgdmFyIExlcmMyRGVjb2RlID0gKGZ1bmN0aW9uKCkgewogICAgICAvLyBOb3RlOiBjdXJyZW50bHksIHRoaXMgbW9kdWxlIG9ubHkgaGFzIGFuIGltcGxlbWVudGF0aW9uIGZvciBkZWNvZGluZyBMRVJDIGRhdGEsIG5vdCBlbmNvZGluZy4gVGhlIG5hbWUgb2YKICAgICAgLy8gdGhlIGNsYXNzIHdhcyBjaG9zZW4gdG8gYmUgZnV0dXJlIHByb29mLCBmb2xsb3dpbmcgTGVyY0RlY29kZS4KCiAgICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgogICAgICAqIHByaXZhdGUgc3RhdGljIGNsYXNzIGJpdHN1dGZmZXIgdXNlZCBieSBMZXJjMkRlY29kZQogICAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLwogICAgICB2YXIgQml0U3R1ZmZlciA9IHsKICAgICAgICAvL21ldGhvZHMgZW5kaW5nIHdpdGggMiBhcmUgZm9yIHRoZSBuZXcgYnl0ZSBvcmRlciB1c2VkIGJ5IExlcmMyLjMgYW5kIGFib3ZlLgogICAgICAgIC8vb3JpZ2luYWxVbnN0dWZmIGlzIHVzZWQgdG8gdW5wYWNrIEh1ZmZtYW4gY29kZSB0YWJsZS4gY29kZSBpcyBkdXBsaWNhdGVkIHRvIHVuc3R1ZmZ4IGZvciBwZXJmb3JtYW5jZSByZWFzb25zLgogICAgICAgIHVuc3R1ZmY6IGZ1bmN0aW9uKHNyYywgZGVzdCwgYml0c1BlclBpeGVsLCBudW1QaXhlbHMsIGx1dEFyciwgb2Zmc2V0LCBzY2FsZSwgbWF4VmFsdWUpIHsKICAgICAgICAgIHZhciBiaXRNYXNrID0gKDEgPDwgYml0c1BlclBpeGVsKSAtIDE7CiAgICAgICAgICB2YXIgaSA9IDAsIG87CiAgICAgICAgICB2YXIgYml0c0xlZnQgPSAwOwogICAgICAgICAgdmFyIG4sIGJ1ZmZlciwgbWlzc2luZ0JpdHMsIG5tYXg7CgogICAgICAgICAgLy8gZ2V0IHJpZCBvZiB0cmFpbGluZyBieXRlcyB0aGF0IGFyZSBhbHJlYWR5IHBhcnQgb2YgbmV4dCBibG9jawogICAgICAgICAgdmFyIG51bUludmFsaWRUYWlsQnl0ZXMgPSBzcmMubGVuZ3RoICogNCAtIE1hdGguY2VpbChiaXRzUGVyUGl4ZWwgKiBudW1QaXhlbHMgLyA4KTsKICAgICAgICAgIHNyY1tzcmMubGVuZ3RoIC0gMV0gPDw9IDggKiBudW1JbnZhbGlkVGFpbEJ5dGVzOwogICAgICAgICAgaWYgKGx1dEFycikgewogICAgICAgICAgICBmb3IgKG8gPSAwOyBvIDwgbnVtUGl4ZWxzOyBvKyspIHsKICAgICAgICAgICAgICBpZiAoYml0c0xlZnQgPT09IDApIHsKICAgICAgICAgICAgICAgIGJ1ZmZlciA9IHNyY1tpKytdOwogICAgICAgICAgICAgICAgYml0c0xlZnQgPSAzMjsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYgKGJpdHNMZWZ0ID49IGJpdHNQZXJQaXhlbCkgewogICAgICAgICAgICAgICAgbiA9IChidWZmZXIgPj4+IChiaXRzTGVmdCAtIGJpdHNQZXJQaXhlbCkpICYgYml0TWFzazsKICAgICAgICAgICAgICAgIGJpdHNMZWZ0IC09IGJpdHNQZXJQaXhlbDsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICBtaXNzaW5nQml0cyA9IChiaXRzUGVyUGl4ZWwgLSBiaXRzTGVmdCk7CiAgICAgICAgICAgICAgICBuID0gKChidWZmZXIgJiBiaXRNYXNrKSA8PCBtaXNzaW5nQml0cykgJiBiaXRNYXNrOwogICAgICAgICAgICAgICAgYnVmZmVyID0gc3JjW2krK107CiAgICAgICAgICAgICAgICBiaXRzTGVmdCA9IDMyIC0gbWlzc2luZ0JpdHM7CiAgICAgICAgICAgICAgICBuICs9IChidWZmZXIgPj4+IGJpdHNMZWZ0KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgZGVzdFtvXSA9IGx1dEFycltuXTsvL29mZnNldCArIGx1dEFycltuXSAqIHNjYWxlOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgbm1heCA9IE1hdGguY2VpbCgobWF4VmFsdWUgLSBvZmZzZXQpIC8gc2NhbGUpOwogICAgICAgICAgICBmb3IgKG8gPSAwOyBvIDwgbnVtUGl4ZWxzOyBvKyspIHsKICAgICAgICAgICAgICBpZiAoYml0c0xlZnQgPT09IDApIHsKICAgICAgICAgICAgICAgIGJ1ZmZlciA9IHNyY1tpKytdOwogICAgICAgICAgICAgICAgYml0c0xlZnQgPSAzMjsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYgKGJpdHNMZWZ0ID49IGJpdHNQZXJQaXhlbCkgewogICAgICAgICAgICAgICAgbiA9IChidWZmZXIgPj4+IChiaXRzTGVmdCAtIGJpdHNQZXJQaXhlbCkpICYgYml0TWFzazsKICAgICAgICAgICAgICAgIGJpdHNMZWZ0IC09IGJpdHNQZXJQaXhlbDsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICBtaXNzaW5nQml0cyA9IChiaXRzUGVyUGl4ZWwgLSBiaXRzTGVmdCk7CiAgICAgICAgICAgICAgICBuID0gKChidWZmZXIgJiBiaXRNYXNrKSA8PCBtaXNzaW5nQml0cykgJiBiaXRNYXNrOwogICAgICAgICAgICAgICAgYnVmZmVyID0gc3JjW2krK107CiAgICAgICAgICAgICAgICBiaXRzTGVmdCA9IDMyIC0gbWlzc2luZ0JpdHM7CiAgICAgICAgICAgICAgICBuICs9IChidWZmZXIgPj4+IGJpdHNMZWZ0KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgLy9waXhlbCB2YWx1ZXMgbWF5IGV4Y2VlZCBtYXggZHVlIHRvIHF1YW50aXphdGlvbgogICAgICAgICAgICAgIGRlc3Rbb10gPSBuIDwgbm1heCA/IG9mZnNldCArIG4gKiBzY2FsZSA6IG1heFZhbHVlOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwKCiAgICAgICAgdW5zdHVmZkxVVDogZnVuY3Rpb24oc3JjLCBiaXRzUGVyUGl4ZWwsIG51bVBpeGVscywgb2Zmc2V0LCBzY2FsZSwgbWF4VmFsdWUpIHsKICAgICAgICAgIHZhciBiaXRNYXNrID0gKDEgPDwgYml0c1BlclBpeGVsKSAtIDE7CiAgICAgICAgICB2YXIgaSA9IDAsIG8gPSAwLCBtaXNzaW5nQml0cyA9IDAsIGJpdHNMZWZ0ID0gMCwgbiA9IDA7CiAgICAgICAgICB2YXIgYnVmZmVyOwogICAgICAgICAgdmFyIGRlc3QgPSBbXTsKCiAgICAgICAgICAvLyBnZXQgcmlkIG9mIHRyYWlsaW5nIGJ5dGVzIHRoYXQgYXJlIGFscmVhZHkgcGFydCBvZiBuZXh0IGJsb2NrCiAgICAgICAgICB2YXIgbnVtSW52YWxpZFRhaWxCeXRlcyA9IHNyYy5sZW5ndGggKiA0IC0gTWF0aC5jZWlsKGJpdHNQZXJQaXhlbCAqIG51bVBpeGVscyAvIDgpOwogICAgICAgICAgc3JjW3NyYy5sZW5ndGggLSAxXSA8PD0gOCAqIG51bUludmFsaWRUYWlsQnl0ZXM7CgogICAgICAgICAgdmFyIG5tYXggPSBNYXRoLmNlaWwoKG1heFZhbHVlIC0gb2Zmc2V0KSAvIHNjYWxlKTsKICAgICAgICAgIGZvciAobyA9IDA7IG8gPCBudW1QaXhlbHM7IG8rKykgewogICAgICAgICAgICBpZiAoYml0c0xlZnQgPT09IDApIHsKICAgICAgICAgICAgICBidWZmZXIgPSBzcmNbaSsrXTsKICAgICAgICAgICAgICBiaXRzTGVmdCA9IDMyOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChiaXRzTGVmdCA+PSBiaXRzUGVyUGl4ZWwpIHsKICAgICAgICAgICAgICBuID0gKGJ1ZmZlciA+Pj4gKGJpdHNMZWZ0IC0gYml0c1BlclBpeGVsKSkgJiBiaXRNYXNrOwogICAgICAgICAgICAgIGJpdHNMZWZ0IC09IGJpdHNQZXJQaXhlbDsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBtaXNzaW5nQml0cyA9IChiaXRzUGVyUGl4ZWwgLSBiaXRzTGVmdCk7CiAgICAgICAgICAgICAgbiA9ICgoYnVmZmVyICYgYml0TWFzaykgPDwgbWlzc2luZ0JpdHMpICYgYml0TWFzazsKICAgICAgICAgICAgICBidWZmZXIgPSBzcmNbaSsrXTsKICAgICAgICAgICAgICBiaXRzTGVmdCA9IDMyIC0gbWlzc2luZ0JpdHM7CiAgICAgICAgICAgICAgbiArPSAoYnVmZmVyID4+PiBiaXRzTGVmdCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy9kZXN0LnB1c2gobik7CiAgICAgICAgICAgIGRlc3Rbb10gPSBuIDwgbm1heCA/IG9mZnNldCArIG4gKiBzY2FsZSA6IG1heFZhbHVlOwogICAgICAgICAgfQogICAgICAgICAgZGVzdC51bnNoaWZ0KG9mZnNldCk7Ly8xc3Qgb25lCiAgICAgICAgICByZXR1cm4gZGVzdDsKICAgICAgICB9LAoKICAgICAgICB1bnN0dWZmMjogZnVuY3Rpb24oc3JjLCBkZXN0LCBiaXRzUGVyUGl4ZWwsIG51bVBpeGVscywgbHV0QXJyLCBvZmZzZXQsIHNjYWxlLCBtYXhWYWx1ZSkgewogICAgICAgICAgdmFyIGJpdE1hc2sgPSAoMSA8PCBiaXRzUGVyUGl4ZWwpIC0gMTsKICAgICAgICAgIHZhciBpID0gMCwgbzsKICAgICAgICAgIHZhciBiaXRzTGVmdCA9IDAsIGJpdFBvcyA9IDA7CiAgICAgICAgICB2YXIgbiwgYnVmZmVyLCBtaXNzaW5nQml0czsKICAgICAgICAgIGlmIChsdXRBcnIpIHsKICAgICAgICAgICAgZm9yIChvID0gMDsgbyA8IG51bVBpeGVsczsgbysrKSB7CiAgICAgICAgICAgICAgaWYgKGJpdHNMZWZ0ID09PSAwKSB7CiAgICAgICAgICAgICAgICBidWZmZXIgPSBzcmNbaSsrXTsKICAgICAgICAgICAgICAgIGJpdHNMZWZ0ID0gMzI7CiAgICAgICAgICAgICAgICBiaXRQb3MgPSAwOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAoYml0c0xlZnQgPj0gYml0c1BlclBpeGVsKSB7CiAgICAgICAgICAgICAgICBuID0gKChidWZmZXIgPj4+IGJpdFBvcykgJiBiaXRNYXNrKTsKICAgICAgICAgICAgICAgIGJpdHNMZWZ0IC09IGJpdHNQZXJQaXhlbDsKICAgICAgICAgICAgICAgIGJpdFBvcyArPSBiaXRzUGVyUGl4ZWw7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIG1pc3NpbmdCaXRzID0gKGJpdHNQZXJQaXhlbCAtIGJpdHNMZWZ0KTsKICAgICAgICAgICAgICAgIG4gPSAoYnVmZmVyID4+PiBiaXRQb3MpICYgYml0TWFzazsKICAgICAgICAgICAgICAgIGJ1ZmZlciA9IHNyY1tpKytdOwogICAgICAgICAgICAgICAgYml0c0xlZnQgPSAzMiAtIG1pc3NpbmdCaXRzOwogICAgICAgICAgICAgICAgbiB8PSAoYnVmZmVyICYgKCgxIDw8IG1pc3NpbmdCaXRzKSAtIDEpKSA8PCAoYml0c1BlclBpeGVsIC0gbWlzc2luZ0JpdHMpOwogICAgICAgICAgICAgICAgYml0UG9zID0gbWlzc2luZ0JpdHM7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGRlc3Rbb10gPSBsdXRBcnJbbl07CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGVsc2UgewogICAgICAgICAgICB2YXIgbm1heCA9IE1hdGguY2VpbCgobWF4VmFsdWUgLSBvZmZzZXQpIC8gc2NhbGUpOwogICAgICAgICAgICBmb3IgKG8gPSAwOyBvIDwgbnVtUGl4ZWxzOyBvKyspIHsKICAgICAgICAgICAgICBpZiAoYml0c0xlZnQgPT09IDApIHsKICAgICAgICAgICAgICAgIGJ1ZmZlciA9IHNyY1tpKytdOwogICAgICAgICAgICAgICAgYml0c0xlZnQgPSAzMjsKICAgICAgICAgICAgICAgIGJpdFBvcyA9IDA7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmIChiaXRzTGVmdCA+PSBiaXRzUGVyUGl4ZWwpIHsKICAgICAgICAgICAgICAgIC8vbm8gdW5zaWduZWQgbGVmdCBzaGlmdAogICAgICAgICAgICAgICAgbiA9ICgoYnVmZmVyID4+PiBiaXRQb3MpICYgYml0TWFzayk7CiAgICAgICAgICAgICAgICBiaXRzTGVmdCAtPSBiaXRzUGVyUGl4ZWw7CiAgICAgICAgICAgICAgICBiaXRQb3MgKz0gYml0c1BlclBpeGVsOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBtaXNzaW5nQml0cyA9IChiaXRzUGVyUGl4ZWwgLSBiaXRzTGVmdCk7CiAgICAgICAgICAgICAgICBuID0gKGJ1ZmZlciA+Pj4gYml0UG9zKSAmIGJpdE1hc2s7Ly8oKGJ1ZmZlciAmIGJpdE1hc2spIDw8IG1pc3NpbmdCaXRzKSAmIGJpdE1hc2s7CiAgICAgICAgICAgICAgICBidWZmZXIgPSBzcmNbaSsrXTsKICAgICAgICAgICAgICAgIGJpdHNMZWZ0ID0gMzIgLSBtaXNzaW5nQml0czsKICAgICAgICAgICAgICAgIG4gfD0gKGJ1ZmZlciAmICgoMSA8PCBtaXNzaW5nQml0cykgLSAxKSkgPDwgKGJpdHNQZXJQaXhlbCAtIG1pc3NpbmdCaXRzKTsKICAgICAgICAgICAgICAgIGJpdFBvcyA9IG1pc3NpbmdCaXRzOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAvL3BpeGVsIHZhbHVlcyBtYXkgZXhjZWVkIG1heCBkdWUgdG8gcXVhbnRpemF0aW9uCiAgICAgICAgICAgICAgZGVzdFtvXSA9IG4gPCBubWF4ID8gb2Zmc2V0ICsgbiAqIHNjYWxlIDogbWF4VmFsdWU7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBkZXN0OwogICAgICAgIH0sCgogICAgICAgIHVuc3R1ZmZMVVQyOiBmdW5jdGlvbihzcmMsIGJpdHNQZXJQaXhlbCwgbnVtUGl4ZWxzLCBvZmZzZXQsIHNjYWxlLCBtYXhWYWx1ZSkgewogICAgICAgICAgdmFyIGJpdE1hc2sgPSAoMSA8PCBiaXRzUGVyUGl4ZWwpIC0gMTsKICAgICAgICAgIHZhciBpID0gMCwgbyA9IDAsIG1pc3NpbmdCaXRzID0gMCwgYml0c0xlZnQgPSAwLCBuID0gMCwgYml0UG9zID0gMDsKICAgICAgICAgIHZhciBidWZmZXI7CiAgICAgICAgICB2YXIgZGVzdCA9IFtdOwogICAgICAgICAgdmFyIG5tYXggPSBNYXRoLmNlaWwoKG1heFZhbHVlIC0gb2Zmc2V0KSAvIHNjYWxlKTsKICAgICAgICAgIGZvciAobyA9IDA7IG8gPCBudW1QaXhlbHM7IG8rKykgewogICAgICAgICAgICBpZiAoYml0c0xlZnQgPT09IDApIHsKICAgICAgICAgICAgICBidWZmZXIgPSBzcmNbaSsrXTsKICAgICAgICAgICAgICBiaXRzTGVmdCA9IDMyOwogICAgICAgICAgICAgIGJpdFBvcyA9IDA7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGJpdHNMZWZ0ID49IGJpdHNQZXJQaXhlbCkgewogICAgICAgICAgICAgIC8vbm8gdW5zaWduZWQgbGVmdCBzaGlmdAogICAgICAgICAgICAgIG4gPSAoKGJ1ZmZlciA+Pj4gYml0UG9zKSAmIGJpdE1hc2spOwogICAgICAgICAgICAgIGJpdHNMZWZ0IC09IGJpdHNQZXJQaXhlbDsKICAgICAgICAgICAgICBiaXRQb3MgKz0gYml0c1BlclBpeGVsOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIG1pc3NpbmdCaXRzID0gKGJpdHNQZXJQaXhlbCAtIGJpdHNMZWZ0KTsKICAgICAgICAgICAgICBuID0gKGJ1ZmZlciA+Pj4gYml0UG9zKSAmIGJpdE1hc2s7Ly8oKGJ1ZmZlciAmIGJpdE1hc2spIDw8IG1pc3NpbmdCaXRzKSAmIGJpdE1hc2s7CiAgICAgICAgICAgICAgYnVmZmVyID0gc3JjW2krK107CiAgICAgICAgICAgICAgYml0c0xlZnQgPSAzMiAtIG1pc3NpbmdCaXRzOwogICAgICAgICAgICAgIG4gfD0gKGJ1ZmZlciAmICgoMSA8PCBtaXNzaW5nQml0cykgLSAxKSkgPDwgKGJpdHNQZXJQaXhlbCAtIG1pc3NpbmdCaXRzKTsKICAgICAgICAgICAgICBiaXRQb3MgPSBtaXNzaW5nQml0czsKICAgICAgICAgICAgfQogICAgICAgICAgICAvL2Rlc3QucHVzaChuKTsKICAgICAgICAgICAgZGVzdFtvXSA9IG4gPCBubWF4ID8gb2Zmc2V0ICsgbiAqIHNjYWxlIDogbWF4VmFsdWU7CiAgICAgICAgICB9CiAgICAgICAgICBkZXN0LnVuc2hpZnQob2Zmc2V0KTsKICAgICAgICAgIHJldHVybiBkZXN0OwogICAgICAgIH0sCgogICAgICAgIG9yaWdpbmFsVW5zdHVmZjogZnVuY3Rpb24oc3JjLCBkZXN0LCBiaXRzUGVyUGl4ZWwsIG51bVBpeGVscykgewogICAgICAgICAgdmFyIGJpdE1hc2sgPSAoMSA8PCBiaXRzUGVyUGl4ZWwpIC0gMTsKICAgICAgICAgIHZhciBpID0gMCwgbzsKICAgICAgICAgIHZhciBiaXRzTGVmdCA9IDA7CiAgICAgICAgICB2YXIgbiwgYnVmZmVyLCBtaXNzaW5nQml0czsKCiAgICAgICAgICAvLyBnZXQgcmlkIG9mIHRyYWlsaW5nIGJ5dGVzIHRoYXQgYXJlIGFscmVhZHkgcGFydCBvZiBuZXh0IGJsb2NrCiAgICAgICAgICB2YXIgbnVtSW52YWxpZFRhaWxCeXRlcyA9IHNyYy5sZW5ndGggKiA0IC0gTWF0aC5jZWlsKGJpdHNQZXJQaXhlbCAqIG51bVBpeGVscyAvIDgpOwogICAgICAgICAgc3JjW3NyYy5sZW5ndGggLSAxXSA8PD0gOCAqIG51bUludmFsaWRUYWlsQnl0ZXM7CgogICAgICAgICAgZm9yIChvID0gMDsgbyA8IG51bVBpeGVsczsgbysrKSB7CiAgICAgICAgICAgIGlmIChiaXRzTGVmdCA9PT0gMCkgewogICAgICAgICAgICAgIGJ1ZmZlciA9IHNyY1tpKytdOwogICAgICAgICAgICAgIGJpdHNMZWZ0ID0gMzI7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGJpdHNMZWZ0ID49IGJpdHNQZXJQaXhlbCkgewogICAgICAgICAgICAgIG4gPSAoYnVmZmVyID4+PiAoYml0c0xlZnQgLSBiaXRzUGVyUGl4ZWwpKSAmIGJpdE1hc2s7CiAgICAgICAgICAgICAgYml0c0xlZnQgLT0gYml0c1BlclBpeGVsOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgIG1pc3NpbmdCaXRzID0gKGJpdHNQZXJQaXhlbCAtIGJpdHNMZWZ0KTsKICAgICAgICAgICAgICBuID0gKChidWZmZXIgJiBiaXRNYXNrKSA8PCBtaXNzaW5nQml0cykgJiBiaXRNYXNrOwogICAgICAgICAgICAgIGJ1ZmZlciA9IHNyY1tpKytdOwogICAgICAgICAgICAgIGJpdHNMZWZ0ID0gMzIgLSBtaXNzaW5nQml0czsKICAgICAgICAgICAgICBuICs9IChidWZmZXIgPj4+IGJpdHNMZWZ0KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBkZXN0W29dID0gbjsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBkZXN0OwogICAgICAgIH0sCgogICAgICAgIG9yaWdpbmFsVW5zdHVmZjI6IGZ1bmN0aW9uKHNyYywgZGVzdCwgYml0c1BlclBpeGVsLCBudW1QaXhlbHMpIHsKICAgICAgICAgIHZhciBiaXRNYXNrID0gKDEgPDwgYml0c1BlclBpeGVsKSAtIDE7CiAgICAgICAgICB2YXIgaSA9IDAsIG87CiAgICAgICAgICB2YXIgYml0c0xlZnQgPSAwLCBiaXRQb3MgPSAwOwogICAgICAgICAgdmFyIG4sIGJ1ZmZlciwgbWlzc2luZ0JpdHM7CiAgICAgICAgICAvL21pY3JvLW9wdGltaXphdGlvbnMKICAgICAgICAgIGZvciAobyA9IDA7IG8gPCBudW1QaXhlbHM7IG8rKykgewogICAgICAgICAgICBpZiAoYml0c0xlZnQgPT09IDApIHsKICAgICAgICAgICAgICBidWZmZXIgPSBzcmNbaSsrXTsKICAgICAgICAgICAgICBiaXRzTGVmdCA9IDMyOwogICAgICAgICAgICAgIGJpdFBvcyA9IDA7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGJpdHNMZWZ0ID49IGJpdHNQZXJQaXhlbCkgewogICAgICAgICAgICAgIC8vbm8gdW5zaWduZWQgbGVmdCBzaGlmdAogICAgICAgICAgICAgIG4gPSAoKGJ1ZmZlciA+Pj4gYml0UG9zKSAmIGJpdE1hc2spOwogICAgICAgICAgICAgIGJpdHNMZWZ0IC09IGJpdHNQZXJQaXhlbDsKICAgICAgICAgICAgICBiaXRQb3MgKz0gYml0c1BlclBpeGVsOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIG1pc3NpbmdCaXRzID0gKGJpdHNQZXJQaXhlbCAtIGJpdHNMZWZ0KTsKICAgICAgICAgICAgICBuID0gKGJ1ZmZlciA+Pj4gYml0UG9zKSAmIGJpdE1hc2s7Ly8oKGJ1ZmZlciAmIGJpdE1hc2spIDw8IG1pc3NpbmdCaXRzKSAmIGJpdE1hc2s7CiAgICAgICAgICAgICAgYnVmZmVyID0gc3JjW2krK107CiAgICAgICAgICAgICAgYml0c0xlZnQgPSAzMiAtIG1pc3NpbmdCaXRzOwogICAgICAgICAgICAgIG4gfD0gKGJ1ZmZlciAmICgoMSA8PCBtaXNzaW5nQml0cykgLSAxKSkgPDwgKGJpdHNQZXJQaXhlbCAtIG1pc3NpbmdCaXRzKTsKICAgICAgICAgICAgICBiaXRQb3MgPSBtaXNzaW5nQml0czsKICAgICAgICAgICAgfQogICAgICAgICAgICBkZXN0W29dID0gbjsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBkZXN0OwogICAgICAgIH0KICAgICAgfTsKCiAgICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgogICAgICAqcHJpdmF0ZSBzdGF0aWMgY2xhc3MgdXNlZCBieSBMZXJjMkRlY29kZQogICAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCiAgICAgIHZhciBMZXJjMkhlbHBlcnMgPSB7CiAgICAgICAgSFVGRk1BTl9MVVRfQklUU19NQVg6IDEyLCAvL3VzZSAyXjEyIGx1dCwgdHJlYXQgaXQgbGlrZSBjb25zdGFudAogICAgICAgIGNvbXB1dGVDaGVja3N1bUZsZXRjaGVyMzI6IGZ1bmN0aW9uKGlucHV0KSB7CgogICAgICAgICAgdmFyIHN1bTEgPSAweGZmZmYsIHN1bTIgPSAweGZmZmY7CiAgICAgICAgICB2YXIgbGVuID0gaW5wdXQubGVuZ3RoOwogICAgICAgICAgdmFyIHdvcmRzID0gTWF0aC5mbG9vcihsZW4gLyAyKTsKICAgICAgICAgIHZhciBpID0gMDsKICAgICAgICAgIHdoaWxlICh3b3JkcykgewogICAgICAgICAgICB2YXIgdGxlbiA9ICh3b3JkcyA+PSAzNTkpID8gMzU5IDogd29yZHM7CiAgICAgICAgICAgIHdvcmRzIC09IHRsZW47CiAgICAgICAgICAgIGRvIHsKICAgICAgICAgICAgICBzdW0xICs9IChpbnB1dFtpKytdIDw8IDgpOwogICAgICAgICAgICAgIHN1bTIgKz0gc3VtMSArPSBpbnB1dFtpKytdOwogICAgICAgICAgICB9IHdoaWxlICgtLXRsZW4pOwoKICAgICAgICAgICAgc3VtMSA9IChzdW0xICYgMHhmZmZmKSArIChzdW0xID4+PiAxNik7CiAgICAgICAgICAgIHN1bTIgPSAoc3VtMiAmIDB4ZmZmZikgKyAoc3VtMiA+Pj4gMTYpOwogICAgICAgICAgfQoKICAgICAgICAgIC8vIGFkZCB0aGUgc3RyYWdnbGVyIGJ5dGUgaWYgaXQgZXhpc3RzCiAgICAgICAgICBpZiAobGVuICYgMSkgewogICAgICAgICAgICBzdW0yICs9IHN1bTEgKz0gKGlucHV0W2ldIDw8IDgpOwogICAgICAgICAgfQogICAgICAgICAgLy8gc2Vjb25kIHJlZHVjdGlvbiBzdGVwIHRvIHJlZHVjZSBzdW1zIHRvIDE2IGJpdHMKICAgICAgICAgIHN1bTEgPSAoc3VtMSAmIDB4ZmZmZikgKyAoc3VtMSA+Pj4gMTYpOwogICAgICAgICAgc3VtMiA9IChzdW0yICYgMHhmZmZmKSArIChzdW0yID4+PiAxNik7CgogICAgICAgICAgcmV0dXJuIChzdW0yIDw8IDE2IHwgc3VtMSkgPj4+IDA7CiAgICAgICAgfSwKCiAgICAgICAgcmVhZEhlYWRlckluZm86IGZ1bmN0aW9uKGlucHV0LCBkYXRhKSB7CiAgICAgICAgICB2YXIgcHRyID0gZGF0YS5wdHI7CiAgICAgICAgICB2YXIgZmlsZUlkVmlldyA9IG5ldyBVaW50OEFycmF5KGlucHV0LCBwdHIsIDYpOwogICAgICAgICAgdmFyIGhlYWRlckluZm8gPSB7fTsKICAgICAgICAgIGhlYWRlckluZm8uZmlsZUlkZW50aWZpZXJTdHJpbmcgPSBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsIGZpbGVJZFZpZXcpOwogICAgICAgICAgaWYgKGhlYWRlckluZm8uZmlsZUlkZW50aWZpZXJTdHJpbmcubGFzdEluZGV4T2YoIkxlcmMyIiwgMCkgIT09IDApIHsKICAgICAgICAgICAgdGhyb3cgIlVuZXhwZWN0ZWQgZmlsZSBpZGVudGlmaWVyIHN0cmluZyAoZXhwZWN0IExlcmMyICk6ICIgKyBoZWFkZXJJbmZvLmZpbGVJZGVudGlmaWVyU3RyaW5nOwogICAgICAgICAgfQogICAgICAgICAgcHRyICs9IDY7CiAgICAgICAgICB2YXIgdmlldyA9IG5ldyBEYXRhVmlldyhpbnB1dCwgcHRyLCA4KTsKICAgICAgICAgIHZhciBmaWxlVmVyc2lvbiA9IHZpZXcuZ2V0SW50MzIoMCwgdHJ1ZSk7CiAgICAgICAgICBoZWFkZXJJbmZvLmZpbGVWZXJzaW9uID0gZmlsZVZlcnNpb247CiAgICAgICAgICBwdHIgKz0gNDsKICAgICAgICAgIGlmIChmaWxlVmVyc2lvbiA+PSAzKSB7CiAgICAgICAgICAgIGhlYWRlckluZm8uY2hlY2tzdW0gPSB2aWV3LmdldFVpbnQzMig0LCB0cnVlKTsgLy9ucm93cwogICAgICAgICAgICBwdHIgKz0gNDsKICAgICAgICAgIH0KCiAgICAgICAgICAvL2tleXMgc3RhcnQgZnJvbSBoZXJlCiAgICAgICAgICB2aWV3ID0gbmV3IERhdGFWaWV3KGlucHV0LCBwdHIsIDEyKTsKICAgICAgICAgIGhlYWRlckluZm8uaGVpZ2h0ID0gdmlldy5nZXRVaW50MzIoMCwgdHJ1ZSk7IC8vbnJvd3MKICAgICAgICAgIGhlYWRlckluZm8ud2lkdGggPSB2aWV3LmdldFVpbnQzMig0LCB0cnVlKTsgLy9uY29scwogICAgICAgICAgcHRyICs9IDg7CiAgICAgICAgICBpZiAoZmlsZVZlcnNpb24gPj0gNCkgewogICAgICAgICAgICBoZWFkZXJJbmZvLm51bURpbXMgPSB2aWV3LmdldFVpbnQzMig4LCB0cnVlKTsKICAgICAgICAgICAgcHRyICs9IDQ7CiAgICAgICAgICB9CiAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgaGVhZGVySW5mby5udW1EaW1zID0gMTsKICAgICAgICAgIH0KCiAgICAgICAgICB2aWV3ID0gbmV3IERhdGFWaWV3KGlucHV0LCBwdHIsIDQwKTsKICAgICAgICAgIGhlYWRlckluZm8ubnVtVmFsaWRQaXhlbCA9IHZpZXcuZ2V0VWludDMyKDAsIHRydWUpOwogICAgICAgICAgaGVhZGVySW5mby5taWNyb0Jsb2NrU2l6ZSA9IHZpZXcuZ2V0SW50MzIoNCwgdHJ1ZSk7CiAgICAgICAgICBoZWFkZXJJbmZvLmJsb2JTaXplID0gdmlldy5nZXRJbnQzMig4LCB0cnVlKTsKICAgICAgICAgIGhlYWRlckluZm8uaW1hZ2VUeXBlID0gdmlldy5nZXRJbnQzMigxMiwgdHJ1ZSk7CgogICAgICAgICAgaGVhZGVySW5mby5tYXhaRXJyb3IgPSB2aWV3LmdldEZsb2F0NjQoMTYsIHRydWUpOwogICAgICAgICAgaGVhZGVySW5mby56TWluID0gdmlldy5nZXRGbG9hdDY0KDI0LCB0cnVlKTsKICAgICAgICAgIGhlYWRlckluZm8uek1heCA9IHZpZXcuZ2V0RmxvYXQ2NCgzMiwgdHJ1ZSk7CiAgICAgICAgICBwdHIgKz0gNDA7CiAgICAgICAgICBkYXRhLmhlYWRlckluZm8gPSBoZWFkZXJJbmZvOwogICAgICAgICAgZGF0YS5wdHIgPSBwdHI7CgogICAgICAgICAgdmFyIGNoZWNrc3VtLCBrZXlMZW5ndGg7CiAgICAgICAgICBpZiAoZmlsZVZlcnNpb24gPj0gMykgewogICAgICAgICAgICBrZXlMZW5ndGggPSBmaWxlVmVyc2lvbiA+PSA0ID8gNTIgOiA0ODsKICAgICAgICAgICAgY2hlY2tzdW0gPSB0aGlzLmNvbXB1dGVDaGVja3N1bUZsZXRjaGVyMzIobmV3IFVpbnQ4QXJyYXkoaW5wdXQsIHB0ciAtIGtleUxlbmd0aCwgaGVhZGVySW5mby5ibG9iU2l6ZSAtIDE0KSk7CiAgICAgICAgICAgIGlmIChjaGVja3N1bSAhPT0gaGVhZGVySW5mby5jaGVja3N1bSkgewogICAgICAgICAgICAgIHRocm93ICJDaGVja3N1bSBmYWlsZWQuIjsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfSwKCiAgICAgICAgY2hlY2tNaW5NYXhSYW5nZXM6IGZ1bmN0aW9uKGlucHV0LCBkYXRhKSB7CiAgICAgICAgICB2YXIgaGVhZGVySW5mbyA9IGRhdGEuaGVhZGVySW5mbzsKICAgICAgICAgIHZhciBPdXRQaXhlbFR5cGVBcnJheSA9IHRoaXMuZ2V0RGF0YVR5cGVBcnJheShoZWFkZXJJbmZvLmltYWdlVHlwZSk7CiAgICAgICAgICB2YXIgcmFuZ2VCeXRlcyA9IGhlYWRlckluZm8ubnVtRGltcyAqIHRoaXMuZ2V0RGF0YVR5cGVTaXplKGhlYWRlckluZm8uaW1hZ2VUeXBlKTsKICAgICAgICAgIHZhciBtaW5WYWx1ZXMgPSB0aGlzLnJlYWRTdWJBcnJheShpbnB1dCwgZGF0YS5wdHIsIE91dFBpeGVsVHlwZUFycmF5LCByYW5nZUJ5dGVzKTsKICAgICAgICAgIHZhciBtYXhWYWx1ZXMgPSB0aGlzLnJlYWRTdWJBcnJheShpbnB1dCwgZGF0YS5wdHIgKyByYW5nZUJ5dGVzLCBPdXRQaXhlbFR5cGVBcnJheSwgcmFuZ2VCeXRlcyk7CiAgICAgICAgICBkYXRhLnB0ciArPSAoMiAqIHJhbmdlQnl0ZXMpOwogICAgICAgICAgdmFyIGksIGVxdWFsID0gdHJ1ZTsKICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBoZWFkZXJJbmZvLm51bURpbXM7IGkrKykgewogICAgICAgICAgICBpZiAobWluVmFsdWVzW2ldICE9PSBtYXhWYWx1ZXNbaV0pIHsKICAgICAgICAgICAgICBlcXVhbCA9IGZhbHNlOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBoZWFkZXJJbmZvLm1pblZhbHVlcyA9IG1pblZhbHVlczsKICAgICAgICAgIGhlYWRlckluZm8ubWF4VmFsdWVzID0gbWF4VmFsdWVzOwogICAgICAgICAgcmV0dXJuIGVxdWFsOwogICAgICAgIH0sCgogICAgICAgIHJlYWRTdWJBcnJheTogZnVuY3Rpb24oaW5wdXQsIHB0ciwgT3V0UGl4ZWxUeXBlQXJyYXksIG51bUJ5dGVzKSB7CiAgICAgICAgICB2YXIgcmF3RGF0YTsKICAgICAgICAgIGlmIChPdXRQaXhlbFR5cGVBcnJheSA9PT0gVWludDhBcnJheSkgewogICAgICAgICAgICByYXdEYXRhID0gbmV3IFVpbnQ4QXJyYXkoaW5wdXQsIHB0ciwgbnVtQnl0ZXMpOwogICAgICAgICAgfQogICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIHZhciBhcnJheUJ1ZiA9IG5ldyBBcnJheUJ1ZmZlcihudW1CeXRlcyk7CiAgICAgICAgICAgIHZhciBzdG9yZTggPSBuZXcgVWludDhBcnJheShhcnJheUJ1Zik7CiAgICAgICAgICAgIHN0b3JlOC5zZXQobmV3IFVpbnQ4QXJyYXkoaW5wdXQsIHB0ciwgbnVtQnl0ZXMpKTsKICAgICAgICAgICAgcmF3RGF0YSA9IG5ldyBPdXRQaXhlbFR5cGVBcnJheShhcnJheUJ1Zik7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gcmF3RGF0YTsKICAgICAgICB9LAoKICAgICAgICByZWFkTWFzazogZnVuY3Rpb24oaW5wdXQsIGRhdGEpIHsKICAgICAgICAgIHZhciBwdHIgPSBkYXRhLnB0cjsKICAgICAgICAgIHZhciBoZWFkZXJJbmZvID0gZGF0YS5oZWFkZXJJbmZvOwogICAgICAgICAgdmFyIG51bVBpeGVscyA9IGhlYWRlckluZm8ud2lkdGggKiBoZWFkZXJJbmZvLmhlaWdodDsKICAgICAgICAgIHZhciBudW1WYWxpZFBpeGVsID0gaGVhZGVySW5mby5udW1WYWxpZFBpeGVsOwoKICAgICAgICAgIHZhciB2aWV3ID0gbmV3IERhdGFWaWV3KGlucHV0LCBwdHIsIDQpOwogICAgICAgICAgdmFyIG1hc2sgPSB7fTsKICAgICAgICAgIG1hc2subnVtQnl0ZXMgPSB2aWV3LmdldFVpbnQzMigwLCB0cnVlKTsKICAgICAgICAgIHB0ciArPSA0OwoKICAgICAgICAgIC8vIE1hc2sgRGF0YQogICAgICAgICAgaWYgKCgwID09PSBudW1WYWxpZFBpeGVsIHx8IG51bVBpeGVscyA9PT0gbnVtVmFsaWRQaXhlbCkgJiYgMCAhPT0gbWFzay5udW1CeXRlcykgewogICAgICAgICAgICB0aHJvdyAoImludmFsaWQgbWFzayIpOwogICAgICAgICAgfQogICAgICAgICAgdmFyIGJpdHNldCwgcmVzdWx0TWFzazsKICAgICAgICAgIGlmIChudW1WYWxpZFBpeGVsID09PSAwKSB7CiAgICAgICAgICAgIGJpdHNldCA9IG5ldyBVaW50OEFycmF5KE1hdGguY2VpbChudW1QaXhlbHMgLyA4KSk7CiAgICAgICAgICAgIG1hc2suYml0c2V0ID0gYml0c2V0OwogICAgICAgICAgICByZXN1bHRNYXNrID0gbmV3IFVpbnQ4QXJyYXkobnVtUGl4ZWxzKTsKICAgICAgICAgICAgZGF0YS5waXhlbHMucmVzdWx0TWFzayA9IHJlc3VsdE1hc2s7CiAgICAgICAgICAgIHB0ciArPSBtYXNrLm51bUJ5dGVzOwogICAgICAgICAgfS8vID8/Pz8/IGVsc2UgaWYgKGRhdGEubWFzay5udW1CeXRlcyA+IDAgJiYgZGF0YS5tYXNrLm51bUJ5dGVzPCBkYXRhLm51bVZhbGlkUGl4ZWwpIHsKICAgICAgICAgIGVsc2UgaWYgKG1hc2subnVtQnl0ZXMgPiAwKSB7CiAgICAgICAgICAgIGJpdHNldCA9IG5ldyBVaW50OEFycmF5KE1hdGguY2VpbChudW1QaXhlbHMgLyA4KSk7CiAgICAgICAgICAgIHZpZXcgPSBuZXcgRGF0YVZpZXcoaW5wdXQsIHB0ciwgbWFzay5udW1CeXRlcyk7CiAgICAgICAgICAgIHZhciBjbnQgPSB2aWV3LmdldEludDE2KDAsIHRydWUpOwogICAgICAgICAgICB2YXIgaXAgPSAyLCBvcCA9IDAsIHZhbCA9IDA7CiAgICAgICAgICAgIGRvIHsKICAgICAgICAgICAgICBpZiAoY250ID4gMCkgewogICAgICAgICAgICAgICAgd2hpbGUgKGNudC0tKSB7IGJpdHNldFtvcCsrXSA9IHZpZXcuZ2V0VWludDgoaXArKyk7IH0KICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdmFsID0gdmlldy5nZXRVaW50OChpcCsrKTsKICAgICAgICAgICAgICAgIGNudCA9IC1jbnQ7CiAgICAgICAgICAgICAgICB3aGlsZSAoY250LS0pIHsgYml0c2V0W29wKytdID0gdmFsOyB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGNudCA9IHZpZXcuZ2V0SW50MTYoaXAsIHRydWUpOwogICAgICAgICAgICAgIGlwICs9IDI7CiAgICAgICAgICAgIH0gd2hpbGUgKGlwIDwgbWFzay5udW1CeXRlcyk7CiAgICAgICAgICAgIGlmICgoY250ICE9PSAtMzI3NjgpIHx8IChvcCA8IGJpdHNldC5sZW5ndGgpKSB7CiAgICAgICAgICAgICAgdGhyb3cgIlVuZXhwZWN0ZWQgZW5kIG9mIG1hc2sgUkxFIGVuY29kaW5nIjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmVzdWx0TWFzayA9IG5ldyBVaW50OEFycmF5KG51bVBpeGVscyk7CiAgICAgICAgICAgIHZhciBtYiA9IDAsIGsgPSAwOwoKICAgICAgICAgICAgZm9yIChrID0gMDsgayA8IG51bVBpeGVsczsgaysrKSB7CiAgICAgICAgICAgICAgaWYgKGsgJiA3KSB7CiAgICAgICAgICAgICAgICBtYiA9IGJpdHNldFtrID4+IDNdOwogICAgICAgICAgICAgICAgbWIgPDw9IGsgJiA3OwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIG1iID0gYml0c2V0W2sgPj4gM107CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmIChtYiAmIDEyOCkgewogICAgICAgICAgICAgICAgcmVzdWx0TWFza1trXSA9IDE7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGRhdGEucGl4ZWxzLnJlc3VsdE1hc2sgPSByZXN1bHRNYXNrOwoKICAgICAgICAgICAgbWFzay5iaXRzZXQgPSBiaXRzZXQ7CiAgICAgICAgICAgIHB0ciArPSBtYXNrLm51bUJ5dGVzOwogICAgICAgICAgfQogICAgICAgICAgZGF0YS5wdHIgPSBwdHI7CiAgICAgICAgICBkYXRhLm1hc2sgPSBtYXNrOwogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfSwKCiAgICAgICAgcmVhZERhdGFPbmVTd2VlcDogZnVuY3Rpb24oaW5wdXQsIGRhdGEsIE91dFBpeGVsVHlwZUFycmF5KSB7CiAgICAgICAgICB2YXIgcHRyID0gZGF0YS5wdHI7CiAgICAgICAgICB2YXIgaGVhZGVySW5mbyA9IGRhdGEuaGVhZGVySW5mbzsKICAgICAgICAgIHZhciBudW1EaW1zID0gaGVhZGVySW5mby5udW1EaW1zOwogICAgICAgICAgdmFyIG51bVBpeGVscyA9IGhlYWRlckluZm8ud2lkdGggKiBoZWFkZXJJbmZvLmhlaWdodDsKICAgICAgICAgIHZhciBpbWFnZVR5cGUgPSBoZWFkZXJJbmZvLmltYWdlVHlwZTsKICAgICAgICAgIHZhciBudW1CeXRlcyA9IGhlYWRlckluZm8ubnVtVmFsaWRQaXhlbCAqIExlcmMySGVscGVycy5nZXREYXRhVHlwZVNpemUoaW1hZ2VUeXBlKSAqIG51bURpbXM7CiAgICAgICAgICAvL2RhdGEucGl4ZWxzLm51bUJ5dGVzID0gbnVtQnl0ZXM7CiAgICAgICAgICB2YXIgcmF3RGF0YTsKICAgICAgICAgIHZhciBtYXNrID0gZGF0YS5waXhlbHMucmVzdWx0TWFzazsKICAgICAgICAgIGlmIChPdXRQaXhlbFR5cGVBcnJheSA9PT0gVWludDhBcnJheSkgewogICAgICAgICAgICByYXdEYXRhID0gbmV3IFVpbnQ4QXJyYXkoaW5wdXQsIHB0ciwgbnVtQnl0ZXMpOwogICAgICAgICAgfQogICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIHZhciBhcnJheUJ1ZiA9IG5ldyBBcnJheUJ1ZmZlcihudW1CeXRlcyk7CiAgICAgICAgICAgIHZhciBzdG9yZTggPSBuZXcgVWludDhBcnJheShhcnJheUJ1Zik7CiAgICAgICAgICAgIHN0b3JlOC5zZXQobmV3IFVpbnQ4QXJyYXkoaW5wdXQsIHB0ciwgbnVtQnl0ZXMpKTsKICAgICAgICAgICAgcmF3RGF0YSA9IG5ldyBPdXRQaXhlbFR5cGVBcnJheShhcnJheUJ1Zik7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAocmF3RGF0YS5sZW5ndGggPT09IG51bVBpeGVscyAqIG51bURpbXMpIHsKICAgICAgICAgICAgZGF0YS5waXhlbHMucmVzdWx0UGl4ZWxzID0gcmF3RGF0YTsKICAgICAgICAgIH0KICAgICAgICAgIGVsc2UgIC8vbWFzawogICAgICAgICAgewogICAgICAgICAgICBkYXRhLnBpeGVscy5yZXN1bHRQaXhlbHMgPSBuZXcgT3V0UGl4ZWxUeXBlQXJyYXkobnVtUGl4ZWxzICogbnVtRGltcyk7CiAgICAgICAgICAgIHZhciB6ID0gMCwgayA9IDAsIGkgPSAwLCBuU3RhcnQgPSAwOwogICAgICAgICAgICBpZiAobnVtRGltcyA+IDEpIHsKICAgICAgICAgICAgICBmb3IgKGk9MDsgaSA8IG51bURpbXM7IGkrKykgewogICAgICAgICAgICAgICAgblN0YXJ0ID0gaSAqIG51bVBpeGVsczsKICAgICAgICAgICAgICAgIGZvciAoayA9IDA7IGsgPCBudW1QaXhlbHM7IGsrKykgewogICAgICAgICAgICAgICAgICBpZiAobWFza1trXSkgewogICAgICAgICAgICAgICAgICAgIGRhdGEucGl4ZWxzLnJlc3VsdFBpeGVsc1tuU3RhcnQgKyBrXSA9IHJhd0RhdGFbeisrXTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICBmb3IgKGsgPSAwOyBrIDwgbnVtUGl4ZWxzOyBrKyspIHsKICAgICAgICAgICAgICAgIGlmIChtYXNrW2tdKSB7CiAgICAgICAgICAgICAgICAgIGRhdGEucGl4ZWxzLnJlc3VsdFBpeGVsc1trXSA9IHJhd0RhdGFbeisrXTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIHB0ciArPSBudW1CeXRlczsKICAgICAgICAgIGRhdGEucHRyID0gcHRyOyAgICAgICAvL3JldHVybiBkYXRhOwogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfSwKCiAgICAgICAgcmVhZEh1ZmZtYW5UcmVlOiBmdW5jdGlvbihpbnB1dCwgZGF0YSkgewogICAgICAgICAgdmFyIEJJVFNfTUFYID0gdGhpcy5IVUZGTUFOX0xVVF9CSVRTX01BWDsgLy84IGlzIHNsb3cgZm9yIHRoZSBsYXJnZSB0ZXN0IGltYWdlCiAgICAgICAgICAvL3ZhciBzaXplX21heCA9IDEgPDwgQklUU19NQVg7CiAgICAgICAgICAvKiAqKioqKioqKioqKioqKioqKioqKioqKioKICAgICAgICAgICAqIHJlYWRpbmcgY29kZSB0YWJsZQogICAgICAgICAgICoqKioqKioqKioqKioqKioqKioqKioqKiovCiAgICAgICAgICB2YXIgdmlldyA9IG5ldyBEYXRhVmlldyhpbnB1dCwgZGF0YS5wdHIsIDE2KTsKICAgICAgICAgIGRhdGEucHRyICs9IDE2OwogICAgICAgICAgdmFyIHZlcnNpb24gPSB2aWV3LmdldEludDMyKDAsIHRydWUpOwogICAgICAgICAgaWYgKHZlcnNpb24gPCAyKSB7CiAgICAgICAgICAgIHRocm93ICJ1bnN1cHBvcnRlZCBIdWZmbWFuIHZlcnNpb24iOwogICAgICAgICAgfQogICAgICAgICAgdmFyIHNpemUgPSB2aWV3LmdldEludDMyKDQsIHRydWUpOwogICAgICAgICAgdmFyIGkwID0gdmlldy5nZXRJbnQzMig4LCB0cnVlKTsKICAgICAgICAgIHZhciBpMSA9IHZpZXcuZ2V0SW50MzIoMTIsIHRydWUpOwogICAgICAgICAgaWYgKGkwID49IGkxKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIH0KICAgICAgICAgIHZhciBibG9ja0RhdGFCdWZmZXIgPSBuZXcgVWludDMyQXJyYXkoaTEgLSBpMCk7CiAgICAgICAgICBMZXJjMkhlbHBlcnMuZGVjb2RlQml0cyhpbnB1dCwgZGF0YSwgYmxvY2tEYXRhQnVmZmVyKTsKICAgICAgICAgIHZhciBjb2RlVGFibGUgPSBbXTsgLy9zaXplCiAgICAgICAgICB2YXIgaSwgaiwgaywgbGVuOwoKICAgICAgICAgIGZvciAoaSA9IGkwOyBpIDwgaTE7IGkrKykgewogICAgICAgICAgICBqID0gaSAtIChpIDwgc2l6ZSA/IDAgOiBzaXplKTsvL3dyYXAgYXJvdW5kCiAgICAgICAgICAgIGNvZGVUYWJsZVtqXSA9IHsgZmlyc3Q6IGJsb2NrRGF0YUJ1ZmZlcltpIC0gaTBdLCBzZWNvbmQ6IG51bGwgfTsKICAgICAgICAgIH0KCiAgICAgICAgICB2YXIgZGF0YUJ5dGVzID0gaW5wdXQuYnl0ZUxlbmd0aCAtIGRhdGEucHRyOwogICAgICAgICAgdmFyIGRhdGFXb3JkcyA9IE1hdGguY2VpbChkYXRhQnl0ZXMgLyA0KTsKICAgICAgICAgIHZhciBhcnJheUJ1ZiA9IG5ldyBBcnJheUJ1ZmZlcihkYXRhV29yZHMgKiA0KTsKICAgICAgICAgIHZhciBzdG9yZTggPSBuZXcgVWludDhBcnJheShhcnJheUJ1Zik7CiAgICAgICAgICBzdG9yZTguc2V0KG5ldyBVaW50OEFycmF5KGlucHV0LCBkYXRhLnB0ciwgZGF0YUJ5dGVzKSk7CiAgICAgICAgICB2YXIgc3R1ZmZlZERhdGEgPSBuZXcgVWludDMyQXJyYXkoYXJyYXlCdWYpOyAvL211c3Qgc3RhcnQgZnJvbSB4KjQKICAgICAgICAgIHZhciBiaXRQb3MgPSAwLCB3b3JkLCBzcmNQdHIgPSAwOwogICAgICAgICAgd29yZCA9IHN0dWZmZWREYXRhWzBdOwogICAgICAgICAgZm9yIChpID0gaTA7IGkgPCBpMTsgaSsrKSB7CiAgICAgICAgICAgIGogPSBpIC0gKGkgPCBzaXplID8gMCA6IHNpemUpOy8vd3JhcCBhcm91bmQKICAgICAgICAgICAgbGVuID0gY29kZVRhYmxlW2pdLmZpcnN0OwogICAgICAgICAgICBpZiAobGVuID4gMCkgewogICAgICAgICAgICAgIGNvZGVUYWJsZVtqXS5zZWNvbmQgPSAod29yZCA8PCBiaXRQb3MpID4+PiAoMzIgLSBsZW4pOwoKICAgICAgICAgICAgICBpZiAoMzIgLSBiaXRQb3MgPj0gbGVuKSB7CiAgICAgICAgICAgICAgICBiaXRQb3MgKz0gbGVuOwogICAgICAgICAgICAgICAgaWYgKGJpdFBvcyA9PT0gMzIpIHsKICAgICAgICAgICAgICAgICAgYml0UG9zID0gMDsKICAgICAgICAgICAgICAgICAgc3JjUHRyKys7CiAgICAgICAgICAgICAgICAgIHdvcmQgPSBzdHVmZmVkRGF0YVtzcmNQdHJdOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIGJpdFBvcyArPSBsZW4gLSAzMjsKICAgICAgICAgICAgICAgIHNyY1B0cisrOwogICAgICAgICAgICAgICAgd29yZCA9IHN0dWZmZWREYXRhW3NyY1B0cl07CiAgICAgICAgICAgICAgICBjb2RlVGFibGVbal0uc2Vjb25kIHw9IHdvcmQgPj4+ICgzMiAtIGJpdFBvcyk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgLy9maW5pc2hlZCByZWFkaW5nIGNvZGUgdGFibGUKCiAgICAgICAgICAvKiAqKioqKioqKioqKioqKioqKioqKioqKioKICAgICAgICAgICAqIGJ1aWxkaW5nIGx1dAogICAgICAgICAgICoqKioqKioqKioqKioqKioqKioqKioqKiovCiAgICAgICAgICB2YXIgbnVtQml0c0xVVCA9IDAsIG51bUJpdHNMVVRRaWNrID0gMDsKICAgICAgICAgIHZhciB0cmVlID0gbmV3IFRyZWVOb2RlKCk7CiAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgY29kZVRhYmxlLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGlmIChjb2RlVGFibGVbaV0gIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgIG51bUJpdHNMVVQgPSBNYXRoLm1heChudW1CaXRzTFVULCBjb2RlVGFibGVbaV0uZmlyc3QpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBpZiAobnVtQml0c0xVVCA+PSBCSVRTX01BWCkgewogICAgICAgICAgICBudW1CaXRzTFVUUWljayA9IEJJVFNfTUFYOwogICAgICAgICAgfQogICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIG51bUJpdHNMVVRRaWNrID0gbnVtQml0c0xVVDsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChudW1CaXRzTFVUID49IDMwKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJXQVJuaW5nLCBsYXJnZSBOVU0gTFVUIEJJVFMgSVMgIiArIG51bUJpdHNMVVQpOwogICAgICAgICAgfQogICAgICAgICAgdmFyIGRlY29kZUx1dCA9IFtdLCBlbnRyeSwgY29kZSwgbnVtRW50cmllcywgamosIGN1cnJlbnRCaXQsIG5vZGU7CiAgICAgICAgICBmb3IgKGkgPSBpMDsgaSA8IGkxOyBpKyspIHsKICAgICAgICAgICAgaiA9IGkgLSAoaSA8IHNpemUgPyAwIDogc2l6ZSk7Ly93cmFwIGFyb3VuZAogICAgICAgICAgICBsZW4gPSBjb2RlVGFibGVbal0uZmlyc3Q7CiAgICAgICAgICAgIGlmIChsZW4gPiAwKSB7CiAgICAgICAgICAgICAgZW50cnkgPSBbbGVuLCBqXTsKICAgICAgICAgICAgICBpZiAobGVuIDw9IG51bUJpdHNMVVRRaWNrKSB7CiAgICAgICAgICAgICAgICBjb2RlID0gY29kZVRhYmxlW2pdLnNlY29uZCA8PCAobnVtQml0c0xVVFFpY2sgLSBsZW4pOwogICAgICAgICAgICAgICAgbnVtRW50cmllcyA9IDEgPDwgKG51bUJpdHNMVVRRaWNrIC0gbGVuKTsKICAgICAgICAgICAgICAgIGZvciAoayA9IDA7IGsgPCBudW1FbnRyaWVzOyBrKyspIHsKICAgICAgICAgICAgICAgICAgZGVjb2RlTHV0W2NvZGUgfCBrXSA9IGVudHJ5OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIC8vYnVpbGQgdHJlZQogICAgICAgICAgICAgICAgY29kZSA9IGNvZGVUYWJsZVtqXS5zZWNvbmQ7CiAgICAgICAgICAgICAgICBub2RlID0gdHJlZTsKICAgICAgICAgICAgICAgIGZvciAoamogPSBsZW4gLSAxOyBqaiA+PSAwOyBqai0tKSB7CiAgICAgICAgICAgICAgICAgIGN1cnJlbnRCaXQgPSBjb2RlID4+PiBqaiAmIDE7IC8vbm8gbGVmdCBzaGlmdCBhcyBsZW5ndGggY291bGQgYmUgMzAsMzEKICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRCaXQpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoIW5vZGUucmlnaHQpIHsKICAgICAgICAgICAgICAgICAgICAgIG5vZGUucmlnaHQgPSBuZXcgVHJlZU5vZGUoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgbm9kZSA9IG5vZGUucmlnaHQ7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKCFub2RlLmxlZnQpIHsKICAgICAgICAgICAgICAgICAgICAgIG5vZGUubGVmdCA9IG5ldyBUcmVlTm9kZSgpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBub2RlID0gbm9kZS5sZWZ0OwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIGlmIChqaiA9PT0gMCAmJiAhbm9kZS52YWwpIHsKICAgICAgICAgICAgICAgICAgICBub2RlLnZhbCA9IGVudHJ5WzFdOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICBkZWNvZGVMdXQ6IGRlY29kZUx1dCwKICAgICAgICAgICAgbnVtQml0c0xVVFFpY2s6IG51bUJpdHNMVVRRaWNrLAogICAgICAgICAgICBudW1CaXRzTFVUOiBudW1CaXRzTFVULAogICAgICAgICAgICB0cmVlOiB0cmVlLAogICAgICAgICAgICBzdHVmZmVkRGF0YTogc3R1ZmZlZERhdGEsCiAgICAgICAgICAgIHNyY1B0cjogc3JjUHRyLAogICAgICAgICAgICBiaXRQb3M6IGJpdFBvcwogICAgICAgICAgfTsKICAgICAgICB9LAoKICAgICAgICByZWFkSHVmZm1hbjogZnVuY3Rpb24oaW5wdXQsIGRhdGEsIE91dFBpeGVsVHlwZUFycmF5KSB7CiAgICAgICAgICB2YXIgaGVhZGVySW5mbyA9IGRhdGEuaGVhZGVySW5mbzsKICAgICAgICAgIHZhciBudW1EaW1zID0gaGVhZGVySW5mby5udW1EaW1zOwogICAgICAgICAgdmFyIGhlaWdodCA9IGRhdGEuaGVhZGVySW5mby5oZWlnaHQ7CiAgICAgICAgICB2YXIgd2lkdGggPSBkYXRhLmhlYWRlckluZm8ud2lkdGg7CiAgICAgICAgICB2YXIgbnVtUGl4ZWxzID0gd2lkdGggKiBoZWlnaHQ7CiAgICAgICAgICAvL3ZhciBzaXplX21heCA9IDEgPDwgQklUU19NQVg7CiAgICAgICAgICAvKiAqKioqKioqKioqKioqKioqKioqKioqKioKICAgICAgICAgICAqIHJlYWRpbmcgaHVmZm1hbiBzdHJ1Y3R1cmUgaW5mbwogICAgICAgICAgICoqKioqKioqKioqKioqKioqKioqKioqKiovCiAgICAgICAgICB2YXIgaHVmZm1hbkluZm8gPSB0aGlzLnJlYWRIdWZmbWFuVHJlZShpbnB1dCwgZGF0YSk7CiAgICAgICAgICB2YXIgZGVjb2RlTHV0ID0gaHVmZm1hbkluZm8uZGVjb2RlTHV0OwogICAgICAgICAgdmFyIHRyZWUgPSBodWZmbWFuSW5mby50cmVlOwogICAgICAgICAgLy9zdHVmZmVkRGF0YSBpbmNsdWRlcyBodWZmbWFuIGhlYWRlcnMKICAgICAgICAgIHZhciBzdHVmZmVkRGF0YSA9IGh1ZmZtYW5JbmZvLnN0dWZmZWREYXRhOwogICAgICAgICAgdmFyIHNyY1B0ciA9IGh1ZmZtYW5JbmZvLnNyY1B0cjsKICAgICAgICAgIHZhciBiaXRQb3MgPSBodWZmbWFuSW5mby5iaXRQb3M7CiAgICAgICAgICB2YXIgbnVtQml0c0xVVFFpY2sgPSBodWZmbWFuSW5mby5udW1CaXRzTFVUUWljazsKICAgICAgICAgIHZhciBudW1CaXRzTFVUID0gaHVmZm1hbkluZm8ubnVtQml0c0xVVDsKICAgICAgICAgIHZhciBvZmZzZXQgPSBkYXRhLmhlYWRlckluZm8uaW1hZ2VUeXBlID09PSAwID8gMTI4IDogMDsKICAgICAgICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqCiAgICAgICAgICAqICBkZWNvZGUKICAgICAgICAgICoqKioqKioqKioqKioqKioqKioqKioqKioqKi8KICAgICAgICAgIHZhciBub2RlLCB2YWwsIGRlbHRhLCBtYXNrID0gZGF0YS5waXhlbHMucmVzdWx0TWFzaywgdmFsVG1wLCB2YWxUbXBRdWljaywgY3VycmVudEJpdDsKICAgICAgICAgIHZhciBpLCBqLCBrLCBpaTsKICAgICAgICAgIHZhciBwcmV2VmFsID0gMDsKICAgICAgICAgIGlmIChiaXRQb3MgPiAwKSB7CiAgICAgICAgICAgIHNyY1B0cisrOwogICAgICAgICAgICBiaXRQb3MgPSAwOwogICAgICAgICAgfQogICAgICAgICAgdmFyIHdvcmQgPSBzdHVmZmVkRGF0YVtzcmNQdHJdOwogICAgICAgICAgdmFyIGRlbHRhRW5jb2RlID0gZGF0YS5lbmNvZGVNb2RlID09PSAxOwogICAgICAgICAgdmFyIHJlc3VsdFBpeGVsc0FsbERpbSA9IG5ldyBPdXRQaXhlbFR5cGVBcnJheShudW1QaXhlbHMgKiBudW1EaW1zKTsKICAgICAgICAgIHZhciByZXN1bHRQaXhlbHMgPSByZXN1bHRQaXhlbHNBbGxEaW07CiAgICAgICAgICB2YXIgaURpbTsKICAgICAgICAgIGZvciAoaURpbSA9IDA7IGlEaW0gPCBoZWFkZXJJbmZvLm51bURpbXM7IGlEaW0rKykgewogICAgICAgICAgICBpZiAobnVtRGltcyA+IDEpIHsKICAgICAgICAgICAgICAvL2dldCB0aGUgbWVtIGJsb2NrIG9mIGN1cnJlbnQgZGltZW5zaW9uCiAgICAgICAgICAgICAgcmVzdWx0UGl4ZWxzID0gbmV3IE91dFBpeGVsVHlwZUFycmF5KHJlc3VsdFBpeGVsc0FsbERpbS5idWZmZXIsIG51bVBpeGVscyAqIGlEaW0sIG51bVBpeGVscyk7CiAgICAgICAgICAgICAgcHJldlZhbCA9IDA7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGRhdGEuaGVhZGVySW5mby5udW1WYWxpZFBpeGVsID09PSB3aWR0aCAqIGhlaWdodCkgeyAvL2FsbCB2YWxpZAogICAgICAgICAgICAgIGZvciAoayA9IDAsIGkgPSAwOyBpIDwgaGVpZ2h0OyBpKyspIHsKICAgICAgICAgICAgICAgIGZvciAoaiA9IDA7IGogPCB3aWR0aDsgaisrLCBrKyspIHsKICAgICAgICAgICAgICAgICAgdmFsID0gMDsKICAgICAgICAgICAgICAgICAgdmFsVG1wID0gKHdvcmQgPDwgYml0UG9zKSA+Pj4gKDMyIC0gbnVtQml0c0xVVFFpY2spOwogICAgICAgICAgICAgICAgICB2YWxUbXBRdWljayA9IHZhbFRtcDsvLyA+Pj4gZGVsdGFCaXRzOwogICAgICAgICAgICAgICAgICBpZiAoMzIgLSBiaXRQb3MgPCBudW1CaXRzTFVUUWljaykgewogICAgICAgICAgICAgICAgICAgIHZhbFRtcCB8PSAoKHN0dWZmZWREYXRhW3NyY1B0ciArIDFdKSA+Pj4gKDY0IC0gYml0UG9zIC0gbnVtQml0c0xVVFFpY2spKTsKICAgICAgICAgICAgICAgICAgICB2YWxUbXBRdWljayA9IHZhbFRtcDsvLyA+Pj4gZGVsdGFCaXRzOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIGlmIChkZWNvZGVMdXRbdmFsVG1wUXVpY2tdKSAgICAvLyBpZiB0aGVyZSwgbW92ZSB0aGUgY29ycmVjdCBudW1iZXIgb2YgYml0cyBhbmQgZG9uZQogICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgdmFsID0gZGVjb2RlTHV0W3ZhbFRtcFF1aWNrXVsxXTsKICAgICAgICAgICAgICAgICAgICBiaXRQb3MgKz0gZGVjb2RlTHV0W3ZhbFRtcFF1aWNrXVswXTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICB2YWxUbXAgPSAod29yZCA8PCBiaXRQb3MpID4+PiAoMzIgLSBudW1CaXRzTFVUKTsKICAgICAgICAgICAgICAgICAgICB2YWxUbXBRdWljayA9IHZhbFRtcDsvLyA+Pj4gZGVsdGFCaXRzOwogICAgICAgICAgICAgICAgICAgIGlmICgzMiAtIGJpdFBvcyA8IG51bUJpdHNMVVQpIHsKICAgICAgICAgICAgICAgICAgICAgIHZhbFRtcCB8PSAoKHN0dWZmZWREYXRhW3NyY1B0ciArIDFdKSA+Pj4gKDY0IC0gYml0UG9zIC0gbnVtQml0c0xVVCkpOwogICAgICAgICAgICAgICAgICAgICAgdmFsVG1wUXVpY2sgPSB2YWxUbXA7Ly8gPj4+IGRlbHRhQml0czsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgbm9kZSA9IHRyZWU7CiAgICAgICAgICAgICAgICAgICAgZm9yIChpaSA9IDA7IGlpIDwgbnVtQml0c0xVVDsgaWkrKykgewogICAgICAgICAgICAgICAgICAgICAgY3VycmVudEJpdCA9IHZhbFRtcCA+Pj4gKG51bUJpdHNMVVQgLSBpaSAtIDEpICYgMTsKICAgICAgICAgICAgICAgICAgICAgIG5vZGUgPSBjdXJyZW50Qml0ID8gbm9kZS5yaWdodCA6IG5vZGUubGVmdDsKICAgICAgICAgICAgICAgICAgICAgIGlmICghKG5vZGUubGVmdCB8fCBub2RlLnJpZ2h0KSkgewogICAgICAgICAgICAgICAgICAgICAgICB2YWwgPSBub2RlLnZhbDsKICAgICAgICAgICAgICAgICAgICAgICAgYml0UG9zID0gYml0UG9zICsgaWkgKyAxOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIGlmIChiaXRQb3MgPj0gMzIpIHsKICAgICAgICAgICAgICAgICAgICBiaXRQb3MgLT0gMzI7CiAgICAgICAgICAgICAgICAgICAgc3JjUHRyKys7CiAgICAgICAgICAgICAgICAgICAgd29yZCA9IHN0dWZmZWREYXRhW3NyY1B0cl07CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIGRlbHRhID0gdmFsIC0gb2Zmc2V0OwogICAgICAgICAgICAgICAgICBpZiAoZGVsdGFFbmNvZGUpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoaiA+IDApIHsKICAgICAgICAgICAgICAgICAgICAgIGRlbHRhICs9IHByZXZWYWw7ICAgIC8vIHVzZSBvdmVyZmxvdwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChpID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgZGVsdGEgKz0gcmVzdWx0UGl4ZWxzW2sgLSB3aWR0aF07CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgZGVsdGEgKz0gcHJldlZhbDsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZGVsdGEgJj0gMHhGRjsgLy9vdmVyZmxvdwogICAgICAgICAgICAgICAgICAgIHJlc3VsdFBpeGVsc1trXSA9IGRlbHRhOy8vb3ZlcmZsb3cKICAgICAgICAgICAgICAgICAgICBwcmV2VmFsID0gZGVsdGE7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgcmVzdWx0UGl4ZWxzW2tdID0gZGVsdGE7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7IC8vbm90IGFsbCB2YWxpZCwgdXNlIG1hc2sKICAgICAgICAgICAgICBmb3IgKGsgPSAwLCBpID0gMDsgaSA8IGhlaWdodDsgaSsrKSB7CiAgICAgICAgICAgICAgICBmb3IgKGogPSAwOyBqIDwgd2lkdGg7IGorKywgaysrKSB7CiAgICAgICAgICAgICAgICAgIGlmIChtYXNrW2tdKSB7CiAgICAgICAgICAgICAgICAgICAgdmFsID0gMDsKICAgICAgICAgICAgICAgICAgICB2YWxUbXAgPSAod29yZCA8PCBiaXRQb3MpID4+PiAoMzIgLSBudW1CaXRzTFVUUWljayk7CiAgICAgICAgICAgICAgICAgICAgdmFsVG1wUXVpY2sgPSB2YWxUbXA7Ly8gPj4+IGRlbHRhQml0czsKICAgICAgICAgICAgICAgICAgICBpZiAoMzIgLSBiaXRQb3MgPCBudW1CaXRzTFVUUWljaykgewogICAgICAgICAgICAgICAgICAgICAgdmFsVG1wIHw9ICgoc3R1ZmZlZERhdGFbc3JjUHRyICsgMV0pID4+PiAoNjQgLSBiaXRQb3MgLSBudW1CaXRzTFVUUWljaykpOwogICAgICAgICAgICAgICAgICAgICAgdmFsVG1wUXVpY2sgPSB2YWxUbXA7Ly8gPj4+IGRlbHRhQml0czsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKGRlY29kZUx1dFt2YWxUbXBRdWlja10pICAgIC8vIGlmIHRoZXJlLCBtb3ZlIHRoZSBjb3JyZWN0IG51bWJlciBvZiBiaXRzIGFuZCBkb25lCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgdmFsID0gZGVjb2RlTHV0W3ZhbFRtcFF1aWNrXVsxXTsKICAgICAgICAgICAgICAgICAgICAgIGJpdFBvcyArPSBkZWNvZGVMdXRbdmFsVG1wUXVpY2tdWzBdOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgIHZhbFRtcCA9ICh3b3JkIDw8IGJpdFBvcykgPj4+ICgzMiAtIG51bUJpdHNMVVQpOwogICAgICAgICAgICAgICAgICAgICAgdmFsVG1wUXVpY2sgPSB2YWxUbXA7Ly8gPj4+IGRlbHRhQml0czsKICAgICAgICAgICAgICAgICAgICAgIGlmICgzMiAtIGJpdFBvcyA8IG51bUJpdHNMVVQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFsVG1wIHw9ICgoc3R1ZmZlZERhdGFbc3JjUHRyICsgMV0pID4+PiAoNjQgLSBiaXRQb3MgLSBudW1CaXRzTFVUKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhbFRtcFF1aWNrID0gdmFsVG1wOy8vID4+PiBkZWx0YUJpdHM7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICBub2RlID0gdHJlZTsKICAgICAgICAgICAgICAgICAgICAgIGZvciAoaWkgPSAwOyBpaSA8IG51bUJpdHNMVVQ7IGlpKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEJpdCA9IHZhbFRtcCA+Pj4gKG51bUJpdHNMVVQgLSBpaSAtIDEpICYgMTsKICAgICAgICAgICAgICAgICAgICAgICAgbm9kZSA9IGN1cnJlbnRCaXQgPyBub2RlLnJpZ2h0IDogbm9kZS5sZWZ0OwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShub2RlLmxlZnQgfHwgbm9kZS5yaWdodCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICB2YWwgPSBub2RlLnZhbDsKICAgICAgICAgICAgICAgICAgICAgICAgICBiaXRQb3MgPSBiaXRQb3MgKyBpaSArIDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGlmIChiaXRQb3MgPj0gMzIpIHsKICAgICAgICAgICAgICAgICAgICAgIGJpdFBvcyAtPSAzMjsKICAgICAgICAgICAgICAgICAgICAgIHNyY1B0cisrOwogICAgICAgICAgICAgICAgICAgICAgd29yZCA9IHN0dWZmZWREYXRhW3NyY1B0cl07CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBkZWx0YSA9IHZhbCAtIG9mZnNldDsKICAgICAgICAgICAgICAgICAgICBpZiAoZGVsdGFFbmNvZGUpIHsKICAgICAgICAgICAgICAgICAgICAgIGlmIChqID4gMCAmJiBtYXNrW2sgLSAxXSkgewogICAgICAgICAgICAgICAgICAgICAgICBkZWx0YSArPSBwcmV2VmFsOyAgICAvLyB1c2Ugb3ZlcmZsb3cKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGkgPiAwICYmIG1hc2tbayAtIHdpZHRoXSkgewogICAgICAgICAgICAgICAgICAgICAgICBkZWx0YSArPSByZXN1bHRQaXhlbHNbayAtIHdpZHRoXTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBkZWx0YSArPSBwcmV2VmFsOwogICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgIGRlbHRhICY9IDB4RkY7IC8vb3ZlcmZsb3cKICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdFBpeGVsc1trXSA9IGRlbHRhOy8vb3ZlcmZsb3cKICAgICAgICAgICAgICAgICAgICAgIHByZXZWYWwgPSBkZWx0YTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICByZXN1bHRQaXhlbHNba10gPSBkZWx0YTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZGF0YS5wdHIgPSBkYXRhLnB0ciArIChzcmNQdHIgKyAxKSAqIDQgKyAoYml0UG9zID4gMCA/IDQgOiAwKTsKICAgICAgICAgIH0KICAgICAgICAgIGRhdGEucGl4ZWxzLnJlc3VsdFBpeGVscyA9IHJlc3VsdFBpeGVsc0FsbERpbTsKICAgICAgICB9LAoKICAgICAgICBkZWNvZGVCaXRzOiBmdW5jdGlvbihpbnB1dCwgZGF0YSwgYmxvY2tEYXRhQnVmZmVyLCBvZmZzZXQsIGlEaW0pIHsKICAgICAgICAgIHsKICAgICAgICAgICAgLy9iaXRzdHVmZiBlbmNvZGluZyBpcyAzCiAgICAgICAgICAgIHZhciBoZWFkZXJJbmZvID0gZGF0YS5oZWFkZXJJbmZvOwogICAgICAgICAgICB2YXIgZmlsZVZlcnNpb24gPSBoZWFkZXJJbmZvLmZpbGVWZXJzaW9uOwogICAgICAgICAgICAvL3ZhciBibG9jayA9IHt9OwogICAgICAgICAgICB2YXIgYmxvY2tQdHIgPSAwOwogICAgICAgICAgICB2YXIgdmlldyA9IG5ldyBEYXRhVmlldyhpbnB1dCwgZGF0YS5wdHIsIDUpOy8vdG8gZG8KICAgICAgICAgICAgdmFyIGhlYWRlckJ5dGUgPSB2aWV3LmdldFVpbnQ4KDApOwogICAgICAgICAgICBibG9ja1B0cisrOwogICAgICAgICAgICB2YXIgYml0czY3ID0gaGVhZGVyQnl0ZSA+PiA2OwogICAgICAgICAgICB2YXIgbiA9IChiaXRzNjcgPT09IDApID8gNCA6IDMgLSBiaXRzNjc7CiAgICAgICAgICAgIHZhciBkb0x1dCA9IChoZWFkZXJCeXRlICYgMzIpID4gMCA/IHRydWUgOiBmYWxzZTsvLzV0aCBiaXQKICAgICAgICAgICAgdmFyIG51bUJpdHMgPSBoZWFkZXJCeXRlICYgMzE7CiAgICAgICAgICAgIHZhciBudW1FbGVtZW50cyA9IDA7CiAgICAgICAgICAgIGlmIChuID09PSAxKSB7CiAgICAgICAgICAgICAgbnVtRWxlbWVudHMgPSB2aWV3LmdldFVpbnQ4KGJsb2NrUHRyKTsgYmxvY2tQdHIrKzsKICAgICAgICAgICAgfSBlbHNlIGlmIChuID09PSAyKSB7CiAgICAgICAgICAgICAgbnVtRWxlbWVudHMgPSB2aWV3LmdldFVpbnQxNihibG9ja1B0ciwgdHJ1ZSk7IGJsb2NrUHRyICs9IDI7CiAgICAgICAgICAgIH0gZWxzZSBpZiAobiA9PT0gNCkgewogICAgICAgICAgICAgIG51bUVsZW1lbnRzID0gdmlldy5nZXRVaW50MzIoYmxvY2tQdHIsIHRydWUpOyBibG9ja1B0ciArPSA0OwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHRocm93ICJJbnZhbGlkIHZhbGlkIHBpeGVsIGNvdW50IHR5cGUiOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vZml4OiBodWZmbWFuIGNvZGVzIGFyZSBiaXQgc3R1ZmZlZCwgYnV0IG5vdCBib3VuZCBieSBkYXRhJ3MgbWF4IHZhbHVlLCBzbyBuZWVkIHRvIHVzZSBvcmlnaW5hbFVuc3R1ZmYKICAgICAgICAgICAgLy9vZmZzZXQgPSBvZmZzZXQgfHwgMDsKICAgICAgICAgICAgdmFyIHNjYWxlID0gMiAqIGhlYWRlckluZm8ubWF4WkVycm9yOwogICAgICAgICAgICB2YXIgc3R1ZmZlZERhdGEsIGFycmF5QnVmLCBzdG9yZTgsIGRhdGFCeXRlcywgZGF0YVdvcmRzOwogICAgICAgICAgICB2YXIgbHV0QXJyLCBsdXREYXRhLCBsdXRCeXRlcywgYml0c1BlclBpeGVsOwogICAgICAgICAgICB2YXIgek1heCA9IGhlYWRlckluZm8ubnVtRGltcyA+IDEgPyBoZWFkZXJJbmZvLm1heFZhbHVlc1tpRGltXSA6IGhlYWRlckluZm8uek1heDsKICAgICAgICAgICAgaWYgKGRvTHV0KSB7CiAgICAgICAgICAgICAgZGF0YS5jb3VudGVyLmx1dCsrOwogICAgICAgICAgICAgIGx1dEJ5dGVzID0gdmlldy5nZXRVaW50OChibG9ja1B0cik7CiAgICAgICAgICAgICAgYmxvY2tQdHIrKzsKICAgICAgICAgICAgICBkYXRhQnl0ZXMgPSBNYXRoLmNlaWwoKGx1dEJ5dGVzIC0gMSkgKiBudW1CaXRzIC8gOCk7CiAgICAgICAgICAgICAgZGF0YVdvcmRzID0gTWF0aC5jZWlsKGRhdGFCeXRlcyAvIDQpOwogICAgICAgICAgICAgIGFycmF5QnVmID0gbmV3IEFycmF5QnVmZmVyKGRhdGFXb3JkcyAqIDQpOwogICAgICAgICAgICAgIHN0b3JlOCA9IG5ldyBVaW50OEFycmF5KGFycmF5QnVmKTsKCiAgICAgICAgICAgICAgZGF0YS5wdHIgKz0gYmxvY2tQdHI7CiAgICAgICAgICAgICAgc3RvcmU4LnNldChuZXcgVWludDhBcnJheShpbnB1dCwgZGF0YS5wdHIsIGRhdGFCeXRlcykpOwoKICAgICAgICAgICAgICBsdXREYXRhID0gbmV3IFVpbnQzMkFycmF5KGFycmF5QnVmKTsKICAgICAgICAgICAgICBkYXRhLnB0ciArPSBkYXRhQnl0ZXM7CgogICAgICAgICAgICAgIGJpdHNQZXJQaXhlbCA9IDA7CiAgICAgICAgICAgICAgd2hpbGUgKChsdXRCeXRlcyAtIDEpID4+PiBiaXRzUGVyUGl4ZWwpIHsKICAgICAgICAgICAgICAgIGJpdHNQZXJQaXhlbCsrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBkYXRhQnl0ZXMgPSBNYXRoLmNlaWwobnVtRWxlbWVudHMgKiBiaXRzUGVyUGl4ZWwgLyA4KTsKICAgICAgICAgICAgICBkYXRhV29yZHMgPSBNYXRoLmNlaWwoZGF0YUJ5dGVzIC8gNCk7CiAgICAgICAgICAgICAgYXJyYXlCdWYgPSBuZXcgQXJyYXlCdWZmZXIoZGF0YVdvcmRzICogNCk7CiAgICAgICAgICAgICAgc3RvcmU4ID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXlCdWYpOwogICAgICAgICAgICAgIHN0b3JlOC5zZXQobmV3IFVpbnQ4QXJyYXkoaW5wdXQsIGRhdGEucHRyLCBkYXRhQnl0ZXMpKTsKICAgICAgICAgICAgICBzdHVmZmVkRGF0YSA9IG5ldyBVaW50MzJBcnJheShhcnJheUJ1Zik7CiAgICAgICAgICAgICAgZGF0YS5wdHIgKz0gZGF0YUJ5dGVzOwogICAgICAgICAgICAgIGlmIChmaWxlVmVyc2lvbiA+PSAzKSB7CiAgICAgICAgICAgICAgICBsdXRBcnIgPSBCaXRTdHVmZmVyLnVuc3R1ZmZMVVQyKGx1dERhdGEsIG51bUJpdHMsIGx1dEJ5dGVzIC0gMSwgb2Zmc2V0LCBzY2FsZSwgek1heCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgbHV0QXJyID0gQml0U3R1ZmZlci51bnN0dWZmTFVUKGx1dERhdGEsIG51bUJpdHMsIGx1dEJ5dGVzIC0gMSwgb2Zmc2V0LCBzY2FsZSwgek1heCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIC8vbHV0QXJyLnVuc2hpZnQoMCk7CiAgICAgICAgICAgICAgaWYgKGZpbGVWZXJzaW9uID49IDMpIHsKICAgICAgICAgICAgICAgIC8vQml0U3R1ZmZlci51bnN0dWZmMihibG9jaywgYmxvY2tEYXRhQnVmZmVyLCBoZWFkZXJJbmZvLnpNYXgpOwogICAgICAgICAgICAgICAgQml0U3R1ZmZlci51bnN0dWZmMihzdHVmZmVkRGF0YSwgYmxvY2tEYXRhQnVmZmVyLCBiaXRzUGVyUGl4ZWwsIG51bUVsZW1lbnRzLCBsdXRBcnIpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIEJpdFN0dWZmZXIudW5zdHVmZihzdHVmZmVkRGF0YSwgYmxvY2tEYXRhQnVmZmVyLCBiaXRzUGVyUGl4ZWwsIG51bUVsZW1lbnRzLCBsdXRBcnIpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAvL2NvbnNvbGUuZGVidWcoImJpdHN0dWZmZXIiKTsKICAgICAgICAgICAgICBkYXRhLmNvdW50ZXIuYml0c3R1ZmZlcisrOwogICAgICAgICAgICAgIGJpdHNQZXJQaXhlbCA9IG51bUJpdHM7CiAgICAgICAgICAgICAgZGF0YS5wdHIgKz0gYmxvY2tQdHI7CiAgICAgICAgICAgICAgaWYgKGJpdHNQZXJQaXhlbCA+IDApIHsKICAgICAgICAgICAgICAgIGRhdGFCeXRlcyA9IE1hdGguY2VpbChudW1FbGVtZW50cyAqIGJpdHNQZXJQaXhlbCAvIDgpOwogICAgICAgICAgICAgICAgZGF0YVdvcmRzID0gTWF0aC5jZWlsKGRhdGFCeXRlcyAvIDQpOwogICAgICAgICAgICAgICAgYXJyYXlCdWYgPSBuZXcgQXJyYXlCdWZmZXIoZGF0YVdvcmRzICogNCk7CiAgICAgICAgICAgICAgICBzdG9yZTggPSBuZXcgVWludDhBcnJheShhcnJheUJ1Zik7CiAgICAgICAgICAgICAgICBzdG9yZTguc2V0KG5ldyBVaW50OEFycmF5KGlucHV0LCBkYXRhLnB0ciwgZGF0YUJ5dGVzKSk7CiAgICAgICAgICAgICAgICBzdHVmZmVkRGF0YSA9IG5ldyBVaW50MzJBcnJheShhcnJheUJ1Zik7CiAgICAgICAgICAgICAgICBkYXRhLnB0ciArPSBkYXRhQnl0ZXM7CiAgICAgICAgICAgICAgICBpZiAoZmlsZVZlcnNpb24gPj0gMykgewogICAgICAgICAgICAgICAgICBpZiAob2Zmc2V0ID09IG51bGwpIHsKICAgICAgICAgICAgICAgICAgICBCaXRTdHVmZmVyLm9yaWdpbmFsVW5zdHVmZjIoc3R1ZmZlZERhdGEsIGJsb2NrRGF0YUJ1ZmZlciwgYml0c1BlclBpeGVsLCBudW1FbGVtZW50cyk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgQml0U3R1ZmZlci51bnN0dWZmMihzdHVmZmVkRGF0YSwgYmxvY2tEYXRhQnVmZmVyLCBiaXRzUGVyUGl4ZWwsIG51bUVsZW1lbnRzLCBmYWxzZSwgb2Zmc2V0LCBzY2FsZSwgek1heCk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICBpZiAob2Zmc2V0ID09IG51bGwpIHsKICAgICAgICAgICAgICAgICAgICBCaXRTdHVmZmVyLm9yaWdpbmFsVW5zdHVmZihzdHVmZmVkRGF0YSwgYmxvY2tEYXRhQnVmZmVyLCBiaXRzUGVyUGl4ZWwsIG51bUVsZW1lbnRzKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBCaXRTdHVmZmVyLnVuc3R1ZmYoc3R1ZmZlZERhdGEsIGJsb2NrRGF0YUJ1ZmZlciwgYml0c1BlclBpeGVsLCBudW1FbGVtZW50cywgZmFsc2UsIG9mZnNldCwgc2NhbGUsIHpNYXgpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgIH0sCgogICAgICAgIHJlYWRUaWxlczogZnVuY3Rpb24oaW5wdXQsIGRhdGEsIE91dFBpeGVsVHlwZUFycmF5KSB7CiAgICAgICAgICB2YXIgaGVhZGVySW5mbyA9IGRhdGEuaGVhZGVySW5mbzsKICAgICAgICAgIHZhciB3aWR0aCA9IGhlYWRlckluZm8ud2lkdGg7CiAgICAgICAgICB2YXIgaGVpZ2h0ID0gaGVhZGVySW5mby5oZWlnaHQ7CiAgICAgICAgICB2YXIgbWljcm9CbG9ja1NpemUgPSBoZWFkZXJJbmZvLm1pY3JvQmxvY2tTaXplOwogICAgICAgICAgdmFyIGltYWdlVHlwZSA9IGhlYWRlckluZm8uaW1hZ2VUeXBlOwogICAgICAgICAgdmFyIGRhdGFUeXBlU2l6ZSA9IExlcmMySGVscGVycy5nZXREYXRhVHlwZVNpemUoaW1hZ2VUeXBlKTsKICAgICAgICAgIHZhciBudW1CbG9ja3NYID0gTWF0aC5jZWlsKHdpZHRoIC8gbWljcm9CbG9ja1NpemUpOwogICAgICAgICAgdmFyIG51bUJsb2Nrc1kgPSBNYXRoLmNlaWwoaGVpZ2h0IC8gbWljcm9CbG9ja1NpemUpOwogICAgICAgICAgZGF0YS5waXhlbHMubnVtQmxvY2tzWSA9IG51bUJsb2Nrc1k7CiAgICAgICAgICBkYXRhLnBpeGVscy5udW1CbG9ja3NYID0gbnVtQmxvY2tzWDsKICAgICAgICAgIGRhdGEucGl4ZWxzLnB0ciA9IDA7CiAgICAgICAgICB2YXIgcm93ID0gMCwgY29sID0gMCwgYmxvY2tZID0gMCwgYmxvY2tYID0gMCwgdGhpc0Jsb2NrSGVpZ2h0ID0gMCwgdGhpc0Jsb2NrV2lkdGggPSAwLCBieXRlc0xlZnQgPSAwLCBoZWFkZXJCeXRlID0gMCwgYml0czY3ID0gMCwgdGVzdENvZGUgPSAwLCBvdXRQdHIgPSAwLCBvdXRTdHJpZGUgPSAwLCBudW1CeXRlcyA9IDAsIGJ5dGVzbGVmdCA9IDAsIHogPSAwLCBibG9ja1B0ciA9IDA7CiAgICAgICAgICB2YXIgdmlldywgYmxvY2ssIGFycmF5QnVmLCBzdG9yZTgsIHJhd0RhdGE7CiAgICAgICAgICB2YXIgYmxvY2tFbmNvZGluZzsKICAgICAgICAgIHZhciBibG9ja0RhdGFCdWZmZXIgPSBuZXcgT3V0UGl4ZWxUeXBlQXJyYXkobWljcm9CbG9ja1NpemUgKiBtaWNyb0Jsb2NrU2l6ZSk7CiAgICAgICAgICB2YXIgbGFzdEJsb2NrSGVpZ2h0ID0gKGhlaWdodCAlIG1pY3JvQmxvY2tTaXplKSB8fCBtaWNyb0Jsb2NrU2l6ZTsKICAgICAgICAgIHZhciBsYXN0QmxvY2tXaWR0aCA9ICh3aWR0aCAlIG1pY3JvQmxvY2tTaXplKSB8fCBtaWNyb0Jsb2NrU2l6ZTsKICAgICAgICAgIHZhciBvZmZzZXRUeXBlLCBvZmZzZXQ7CiAgICAgICAgICB2YXIgbnVtRGltcyA9IGhlYWRlckluZm8ubnVtRGltcywgaURpbTsKICAgICAgICAgIHZhciBtYXNrID0gZGF0YS5waXhlbHMucmVzdWx0TWFzazsKICAgICAgICAgIHZhciByZXN1bHRQaXhlbHMgPSBkYXRhLnBpeGVscy5yZXN1bHRQaXhlbHM7CiAgICAgICAgICBmb3IgKGJsb2NrWSA9IDA7IGJsb2NrWSA8IG51bUJsb2Nrc1k7IGJsb2NrWSsrKSB7CiAgICAgICAgICAgIHRoaXNCbG9ja0hlaWdodCA9IChibG9ja1kgIT09IG51bUJsb2Nrc1kgLSAxKSA/IG1pY3JvQmxvY2tTaXplIDogbGFzdEJsb2NrSGVpZ2h0OwogICAgICAgICAgICBmb3IgKGJsb2NrWCA9IDA7IGJsb2NrWCA8IG51bUJsb2Nrc1g7IGJsb2NrWCsrKSB7CiAgICAgICAgICAgICAgLy9jb25zb2xlLmRlYnVnKCJ5IiArIGJsb2NrWSArICIgeCIgKyBibG9ja1gpOwogICAgICAgICAgICAgIHRoaXNCbG9ja1dpZHRoID0gKGJsb2NrWCAhPT0gbnVtQmxvY2tzWCAtIDEpID8gbWljcm9CbG9ja1NpemUgOiBsYXN0QmxvY2tXaWR0aDsKCiAgICAgICAgICAgICAgb3V0UHRyID0gYmxvY2tZICogd2lkdGggKiBtaWNyb0Jsb2NrU2l6ZSArIGJsb2NrWCAqIG1pY3JvQmxvY2tTaXplOwogICAgICAgICAgICAgIG91dFN0cmlkZSA9IHdpZHRoIC0gdGhpc0Jsb2NrV2lkdGg7CgoKICAgICAgICAgICAgICBmb3IgKGlEaW0gPSAwOyBpRGltIDwgbnVtRGltczsgaURpbSsrKSB7CiAgICAgICAgICAgICAgICBpZiAobnVtRGltcyA+IDEpIHsKICAgICAgICAgICAgICAgICAgcmVzdWx0UGl4ZWxzID0gbmV3IE91dFBpeGVsVHlwZUFycmF5KGRhdGEucGl4ZWxzLnJlc3VsdFBpeGVscy5idWZmZXIsIHdpZHRoICogaGVpZ2h0ICogaURpbSAqIGRhdGFUeXBlU2l6ZSwgd2lkdGggKiBoZWlnaHQpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgYnl0ZXNMZWZ0ID0gaW5wdXQuYnl0ZUxlbmd0aCAtIGRhdGEucHRyOwogICAgICAgICAgICAgICAgdmlldyA9IG5ldyBEYXRhVmlldyhpbnB1dCwgZGF0YS5wdHIsIE1hdGgubWluKDEwLCBieXRlc0xlZnQpKTsKICAgICAgICAgICAgICAgIGJsb2NrID0ge307CiAgICAgICAgICAgICAgICBibG9ja1B0ciA9IDA7CiAgICAgICAgICAgICAgICBoZWFkZXJCeXRlID0gdmlldy5nZXRVaW50OCgwKTsKICAgICAgICAgICAgICAgIGJsb2NrUHRyKys7CiAgICAgICAgICAgICAgICBiaXRzNjcgPSAoaGVhZGVyQnl0ZSA+PiA2KSAmIDB4RkY7CiAgICAgICAgICAgICAgICB0ZXN0Q29kZSA9IChoZWFkZXJCeXRlID4+IDIpICYgMTU7ICAgIC8vIHVzZSBiaXRzIDIzNDUgZm9yIGludGVncml0eSBjaGVjawogICAgICAgICAgICAgICAgaWYgKHRlc3RDb2RlICE9PSAoKChibG9ja1ggKiBtaWNyb0Jsb2NrU2l6ZSkgPj4gMykgJiAxNSkpIHsKICAgICAgICAgICAgICAgICAgdGhyb3cgImludGVncml0eSBpc3N1ZSI7CiAgICAgICAgICAgICAgICAgIC8vcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGJsb2NrRW5jb2RpbmcgPSBoZWFkZXJCeXRlICYgMzsKICAgICAgICAgICAgICAgIGlmIChibG9ja0VuY29kaW5nID4gMykgewogICAgICAgICAgICAgICAgICBkYXRhLnB0ciArPSBibG9ja1B0cjsKICAgICAgICAgICAgICAgICAgdGhyb3cgIkludmFsaWQgYmxvY2sgZW5jb2RpbmcgKCIgKyBibG9ja0VuY29kaW5nICsgIikiOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSBpZiAoYmxvY2tFbmNvZGluZyA9PT0gMikgeyAvL2NvbnN0YW50IDAKICAgICAgICAgICAgICAgICAgZGF0YS5jb3VudGVyLmNvbnN0YW50Kys7CiAgICAgICAgICAgICAgICAgIGRhdGEucHRyICs9IGJsb2NrUHRyOwogICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKGJsb2NrRW5jb2RpbmcgPT09IDApIHsgIC8vdW5jb21wcmVzc2VkCiAgICAgICAgICAgICAgICAgIGRhdGEuY291bnRlci51bmNvbXByZXNzZWQrKzsKICAgICAgICAgICAgICAgICAgZGF0YS5wdHIgKz0gYmxvY2tQdHI7CiAgICAgICAgICAgICAgICAgIG51bUJ5dGVzID0gdGhpc0Jsb2NrSGVpZ2h0ICogdGhpc0Jsb2NrV2lkdGggKiBkYXRhVHlwZVNpemU7CiAgICAgICAgICAgICAgICAgIGJ5dGVzbGVmdCA9IGlucHV0LmJ5dGVMZW5ndGggLSBkYXRhLnB0cjsKICAgICAgICAgICAgICAgICAgbnVtQnl0ZXMgPSBudW1CeXRlcyA8IGJ5dGVzbGVmdCA/IG51bUJ5dGVzIDogYnl0ZXNsZWZ0OwogICAgICAgICAgICAgICAgICAvL2JpdCBhbGlnbm1lbnQKICAgICAgICAgICAgICAgICAgYXJyYXlCdWYgPSBuZXcgQXJyYXlCdWZmZXIoKG51bUJ5dGVzICUgZGF0YVR5cGVTaXplKSA9PT0gMCA/IG51bUJ5dGVzIDogKG51bUJ5dGVzICsgZGF0YVR5cGVTaXplIC0gbnVtQnl0ZXMgJSBkYXRhVHlwZVNpemUpKTsKICAgICAgICAgICAgICAgICAgc3RvcmU4ID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXlCdWYpOwogICAgICAgICAgICAgICAgICBzdG9yZTguc2V0KG5ldyBVaW50OEFycmF5KGlucHV0LCBkYXRhLnB0ciwgbnVtQnl0ZXMpKTsKICAgICAgICAgICAgICAgICAgcmF3RGF0YSA9IG5ldyBPdXRQaXhlbFR5cGVBcnJheShhcnJheUJ1Zik7CiAgICAgICAgICAgICAgICAgIHogPSAwOwogICAgICAgICAgICAgICAgICBpZiAobWFzaykgewogICAgICAgICAgICAgICAgICAgIGZvciAocm93ID0gMDsgcm93IDwgdGhpc0Jsb2NrSGVpZ2h0OyByb3crKykgewogICAgICAgICAgICAgICAgICAgICAgZm9yIChjb2wgPSAwOyBjb2wgPCB0aGlzQmxvY2tXaWR0aDsgY29sKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1hc2tbb3V0UHRyXSkgewogICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdFBpeGVsc1tvdXRQdHJdID0gcmF3RGF0YVt6KytdOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIG91dFB0cisrOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgb3V0UHRyICs9IG91dFN0cmlkZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgZWxzZSB7Ly9hbGwgdmFsaWQKICAgICAgICAgICAgICAgICAgICBmb3IgKHJvdyA9IDA7IHJvdyA8IHRoaXNCbG9ja0hlaWdodDsgcm93KyspIHsKICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29sID0gMDsgY29sIDwgdGhpc0Jsb2NrV2lkdGg7IGNvbCsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdFBpeGVsc1tvdXRQdHIrK10gPSByYXdEYXRhW3orK107CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICBvdXRQdHIgKz0gb3V0U3RyaWRlOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICBkYXRhLnB0ciArPSB6ICogZGF0YVR5cGVTaXplOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSB7IC8vMSBvciAzCiAgICAgICAgICAgICAgICAgIG9mZnNldFR5cGUgPSBMZXJjMkhlbHBlcnMuZ2V0RGF0YVR5cGVVc2VkKGltYWdlVHlwZSwgYml0czY3KTsKICAgICAgICAgICAgICAgICAgb2Zmc2V0ID0gTGVyYzJIZWxwZXJzLmdldE9uZVBpeGVsKGJsb2NrLCBibG9ja1B0ciwgb2Zmc2V0VHlwZSwgdmlldyk7CiAgICAgICAgICAgICAgICAgIGJsb2NrUHRyICs9IExlcmMySGVscGVycy5nZXREYXRhVHlwZVNpemUob2Zmc2V0VHlwZSk7CiAgICAgICAgICAgICAgICAgIGlmIChibG9ja0VuY29kaW5nID09PSAzKSAvL2NvbnN0YW50IG9mZnNldCB2YWx1ZQogICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgZGF0YS5wdHIgKz0gYmxvY2tQdHI7CiAgICAgICAgICAgICAgICAgICAgZGF0YS5jb3VudGVyLmNvbnN0YW50b2Zmc2V0Kys7CiAgICAgICAgICAgICAgICAgICAgLy95b3UgY2FuIGRlbGV0ZSB0aGUgZm9sbG93aW5nIHJlc3VsdE1hc2sgY2FzZSBpbiBmYXZvciBvZiBwZXJmb3JtYW5jZSBiZWNhdXNlIHZhbCBpcyBjb25zdGFudCBhbmQgdXNlcnMgdXNlIG5vZGF0YSBtYXNrLCBvdGhlcndpc2Ugbm9kYXRhdmFsdWUgcG9zdCBwcm9jZXNzaW5nIGhhbmRsZXMgaXQgdG9vLgogICAgICAgICAgICAgICAgICAgIC8vd2hpbGUgdGhlIGFib3ZlIHN0YXRlbWVudCBpcyB0cnVlLCB3ZSdyZSBub3QgZG9pbmcgaXQgYXMgd2Ugd2FudCB0byBrZWVwIGludmFsaWQgcGl4ZWwgdmFsdWUgYXQgMCByYXRoZXIgdGhhbiBhcmJpdHJhcnkgdmFsdWVzCiAgICAgICAgICAgICAgICAgICAgaWYgKG1hc2spIHsKICAgICAgICAgICAgICAgICAgICAgIGZvciAocm93ID0gMDsgcm93IDwgdGhpc0Jsb2NrSGVpZ2h0OyByb3crKykgewogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbCA9IDA7IGNvbCA8IHRoaXNCbG9ja1dpZHRoOyBjb2wrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtYXNrW291dFB0cl0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdFBpeGVsc1tvdXRQdHJdID0gb2Zmc2V0OwogICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRQdHIrKzsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBvdXRQdHIgKz0gb3V0U3RyaWRlOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgIGZvciAocm93ID0gMDsgcm93IDwgdGhpc0Jsb2NrSGVpZ2h0OyByb3crKykgewogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbCA9IDA7IGNvbCA8IHRoaXNCbG9ja1dpZHRoOyBjb2wrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdFBpeGVsc1tvdXRQdHIrK10gPSBvZmZzZXQ7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgb3V0UHRyICs9IG91dFN0cmlkZTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgZWxzZSB7IC8vYml0c3R1ZmYgZW5jb2RpbmcgaXMgMwogICAgICAgICAgICAgICAgICAgIGRhdGEucHRyICs9IGJsb2NrUHRyOwogICAgICAgICAgICAgICAgICAgIC8vaGVhdnkgbGlmdGluZwogICAgICAgICAgICAgICAgICAgIExlcmMySGVscGVycy5kZWNvZGVCaXRzKGlucHV0LCBkYXRhLCBibG9ja0RhdGFCdWZmZXIsIG9mZnNldCwgaURpbSk7CiAgICAgICAgICAgICAgICAgICAgYmxvY2tQdHIgPSAwOwogICAgICAgICAgICAgICAgICAgIGlmIChtYXNrKSB7CiAgICAgICAgICAgICAgICAgICAgICBmb3IgKHJvdyA9IDA7IHJvdyA8IHRoaXNCbG9ja0hlaWdodDsgcm93KyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb2wgPSAwOyBjb2wgPCB0aGlzQmxvY2tXaWR0aDsgY29sKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobWFza1tvdXRQdHJdKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRQaXhlbHNbb3V0UHRyXSA9IGJsb2NrRGF0YUJ1ZmZlcltibG9ja1B0cisrXTsKICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0UHRyKys7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgb3V0UHRyICs9IG91dFN0cmlkZTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICBmb3IgKHJvdyA9IDA7IHJvdyA8IHRoaXNCbG9ja0hlaWdodDsgcm93KyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb2wgPSAwOyBjb2wgPCB0aGlzQmxvY2tXaWR0aDsgY29sKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRQaXhlbHNbb3V0UHRyKytdID0gYmxvY2tEYXRhQnVmZmVyW2Jsb2NrUHRyKytdOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIG91dFB0ciArPSBvdXRTdHJpZGU7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwKCiAgICAgICAgLyoqKioqKioqKioqKioqKioqCiAgICAgICAgKiAgcHJpdmF0ZSBtZXRob2RzIChoZWxwZXIgbWV0aG9kcykKICAgICAgICAqKioqKioqKioqKioqKioqKi8KCiAgICAgICAgZm9ybWF0RmlsZUluZm86IGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICJmaWxlSWRlbnRpZmllclN0cmluZyI6IGRhdGEuaGVhZGVySW5mby5maWxlSWRlbnRpZmllclN0cmluZywKICAgICAgICAgICAgImZpbGVWZXJzaW9uIjogZGF0YS5oZWFkZXJJbmZvLmZpbGVWZXJzaW9uLAogICAgICAgICAgICAiaW1hZ2VUeXBlIjogZGF0YS5oZWFkZXJJbmZvLmltYWdlVHlwZSwKICAgICAgICAgICAgImhlaWdodCI6IGRhdGEuaGVhZGVySW5mby5oZWlnaHQsCiAgICAgICAgICAgICJ3aWR0aCI6IGRhdGEuaGVhZGVySW5mby53aWR0aCwKICAgICAgICAgICAgIm51bVZhbGlkUGl4ZWwiOiBkYXRhLmhlYWRlckluZm8ubnVtVmFsaWRQaXhlbCwKICAgICAgICAgICAgIm1pY3JvQmxvY2tTaXplIjogZGF0YS5oZWFkZXJJbmZvLm1pY3JvQmxvY2tTaXplLAogICAgICAgICAgICAiYmxvYlNpemUiOiBkYXRhLmhlYWRlckluZm8uYmxvYlNpemUsCiAgICAgICAgICAgICJtYXhaRXJyb3IiOiBkYXRhLmhlYWRlckluZm8ubWF4WkVycm9yLAogICAgICAgICAgICAicGl4ZWxUeXBlIjogTGVyYzJIZWxwZXJzLmdldFBpeGVsVHlwZShkYXRhLmhlYWRlckluZm8uaW1hZ2VUeXBlKSwKICAgICAgICAgICAgImVvZk9mZnNldCI6IGRhdGEuZW9mT2Zmc2V0LAogICAgICAgICAgICAibWFzayI6IGRhdGEubWFzayA/IHsKICAgICAgICAgICAgICAibnVtQnl0ZXMiOiBkYXRhLm1hc2subnVtQnl0ZXMKICAgICAgICAgICAgfSA6IG51bGwsCiAgICAgICAgICAgICJwaXhlbHMiOiB7CiAgICAgICAgICAgICAgIm51bUJsb2Nrc1giOiBkYXRhLnBpeGVscy5udW1CbG9ja3NYLAogICAgICAgICAgICAgICJudW1CbG9ja3NZIjogZGF0YS5waXhlbHMubnVtQmxvY2tzWSwKICAgICAgICAgICAgICAvLyJudW1CeXRlcyI6IGRhdGEucGl4ZWxzLm51bUJ5dGVzLAogICAgICAgICAgICAgICJtYXhWYWx1ZSI6IGRhdGEuaGVhZGVySW5mby56TWF4LAogICAgICAgICAgICAgICJtaW5WYWx1ZSI6IGRhdGEuaGVhZGVySW5mby56TWluLAogICAgICAgICAgICAgICJub0RhdGFWYWx1ZSI6IGRhdGEubm9EYXRhVmFsdWUKICAgICAgICAgICAgfQogICAgICAgICAgfTsKICAgICAgICB9LAoKICAgICAgICBjb25zdHJ1Y3RDb25zdGFudFN1cmZhY2U6IGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgICAgIHZhciB2YWwgPSBkYXRhLmhlYWRlckluZm8uek1heDsKICAgICAgICAgIHZhciBudW1EaW1zID0gIGRhdGEuaGVhZGVySW5mby5udW1EaW1zOwogICAgICAgICAgdmFyIG51bVBpeGVscyA9IGRhdGEuaGVhZGVySW5mby5oZWlnaHQgKiBkYXRhLmhlYWRlckluZm8ud2lkdGg7CiAgICAgICAgICB2YXIgbnVtUGl4ZWxBbGxEaW1zID0gbnVtUGl4ZWxzICogbnVtRGltczsKICAgICAgICAgIHZhciBpPTAsIGsgPSAwLCBuU3RhcnQ9MDsKICAgICAgICAgIHZhciBtYXNrID0gZGF0YS5waXhlbHMucmVzdWx0TWFzazsKICAgICAgICAgIGlmIChtYXNrKSB7CiAgICAgICAgICAgIGlmIChudW1EaW1zID4gMSkgewogICAgICAgICAgICAgIGZvciAoaT0wOyBpIDwgbnVtRGltczsgaSsrKSB7CiAgICAgICAgICAgICAgICBuU3RhcnQgPSBpICogbnVtUGl4ZWxzOwogICAgICAgICAgICAgICAgZm9yIChrID0gMDsgayA8IG51bVBpeGVsczsgaysrKSB7CiAgICAgICAgICAgICAgICAgIGlmIChtYXNrW2tdKSB7CiAgICAgICAgICAgICAgICAgICAgZGF0YS5waXhlbHMucmVzdWx0UGl4ZWxzW25TdGFydCArIGtdID0gdmFsOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgIGZvciAoayA9IDA7IGsgPCBudW1QaXhlbHM7IGsrKykgewogICAgICAgICAgICAgICAgaWYgKG1hc2tba10pIHsKICAgICAgICAgICAgICAgICAgZGF0YS5waXhlbHMucmVzdWx0UGl4ZWxzW2tdID0gdmFsOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIGlmIChkYXRhLnBpeGVscy5yZXN1bHRQaXhlbHMuZmlsbCkgewogICAgICAgICAgICAgIGRhdGEucGl4ZWxzLnJlc3VsdFBpeGVscy5maWxsKHZhbCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgZm9yIChrID0gMDsgayA8IG51bVBpeGVsQWxsRGltczsgaysrKSB7CiAgICAgICAgICAgICAgICBkYXRhLnBpeGVscy5yZXN1bHRQaXhlbHNba10gPSB2YWw7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfSwKCiAgICAgICAgZ2V0RGF0YVR5cGVBcnJheTogZnVuY3Rpb24odCkgewogICAgICAgICAgdmFyIHRwOwogICAgICAgICAgc3dpdGNoICh0KSB7CiAgICAgICAgICAgIGNhc2UgMDogLy9jaGFyCiAgICAgICAgICAgICAgdHAgPSBJbnQ4QXJyYXk7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgMTogLy9ieXRlCiAgICAgICAgICAgICAgdHAgPSBVaW50OEFycmF5OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDI6IC8vc2hvcnQKICAgICAgICAgICAgICB0cCA9IEludDE2QXJyYXk7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgMzogLy91c2hvcnQKICAgICAgICAgICAgICB0cCA9IFVpbnQxNkFycmF5OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgdHAgPSBJbnQzMkFycmF5OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgdHAgPSBVaW50MzJBcnJheTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgIHRwID0gRmxvYXQzMkFycmF5OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgdHAgPSBGbG9hdDY0QXJyYXk7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgdHAgPSBGbG9hdDMyQXJyYXk7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gdHA7CiAgICAgICAgfSwKCiAgICAgICAgZ2V0UGl4ZWxUeXBlOiBmdW5jdGlvbih0KSB7CiAgICAgICAgICB2YXIgdHA7CiAgICAgICAgICBzd2l0Y2ggKHQpIHsKICAgICAgICAgICAgY2FzZSAwOiAvL2NoYXIKICAgICAgICAgICAgICB0cCA9ICJTOCI7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgMTogLy9ieXRlCiAgICAgICAgICAgICAgdHAgPSAiVTgiOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDI6IC8vc2hvcnQKICAgICAgICAgICAgICB0cCA9ICJTMTYiOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDM6IC8vdXNob3J0CiAgICAgICAgICAgICAgdHAgPSAiVTE2IjsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIHRwID0gIlMzMiI7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICB0cCA9ICJVMzIiOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgdHAgPSAiRjMyIjsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgIHRwID0gIkY2NCI7IC8vbm90IHN1cHBvcnRlZAogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgIHRwID0gIkYzMiI7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gdHA7CiAgICAgICAgfSwKCiAgICAgICAgaXNWYWxpZFBpeGVsVmFsdWU6IGZ1bmN0aW9uKHQsIHZhbCkgewogICAgICAgICAgaWYgKHZhbCA9PSBudWxsKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIH0KICAgICAgICAgIHZhciBpc1ZhbGlkOwogICAgICAgICAgc3dpdGNoICh0KSB7CiAgICAgICAgICAgIGNhc2UgMDogLy9jaGFyCiAgICAgICAgICAgICAgaXNWYWxpZCA9IHZhbCA+PSAtMTI4ICYmIHZhbCA8PSAxMjc7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgMTogLy9ieXRlICAodW5zaWduZWQgY2hhcikKICAgICAgICAgICAgICBpc1ZhbGlkID0gdmFsID49IDAgJiYgdmFsIDw9IDI1NTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAyOiAvL3Nob3J0CiAgICAgICAgICAgICAgaXNWYWxpZCA9IHZhbCA+PSAtMzI3NjggJiYgdmFsIDw9IDMyNzY3OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDM6IC8vdXNob3J0CiAgICAgICAgICAgICAgaXNWYWxpZCA9IHZhbCA+PSAwICYmIHZhbCA8PSA2NTUzNjsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSA0OiAvL2ludCAzMgogICAgICAgICAgICAgIGlzVmFsaWQgPSB2YWwgPj0gLTIxNDc0ODM2NDggJiYgdmFsIDw9IDIxNDc0ODM2NDc7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgNTogLy91aW5pdCAzMgogICAgICAgICAgICAgIGlzVmFsaWQgPSB2YWwgPj0gMCAmJiB2YWwgPD0gNDI5NDk2NzI5NjsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgIGlzVmFsaWQgPSB2YWwgPj0gLTMuNDAyNzk5OTM4NzkwMTQ4NGUrMzggJiYgdmFsIDw9IDMuNDAyNzk5OTM4NzkwMTQ4NGUrMzg7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICBpc1ZhbGlkID0gdmFsID49IDVlLTMyNCAmJiB2YWwgPD0gMS43OTc2OTMxMzQ4NjIzMTU3ZSszMDg7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgaXNWYWxpZCA9IGZhbHNlOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGlzVmFsaWQ7CiAgICAgICAgfSwKCiAgICAgICAgZ2V0RGF0YVR5cGVTaXplOiBmdW5jdGlvbih0KSB7CiAgICAgICAgICB2YXIgcyA9IDA7CiAgICAgICAgICBzd2l0Y2ggKHQpIHsKICAgICAgICAgICAgY2FzZSAwOiAvL3VieXRlCiAgICAgICAgICAgIGNhc2UgMTogLy9ieXRlCiAgICAgICAgICAgICAgcyA9IDE7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgMjogLy9zaG9ydAogICAgICAgICAgICBjYXNlIDM6IC8vdXNob3J0CiAgICAgICAgICAgICAgcyA9IDI7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgcyA9IDQ7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICBzID0gODsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICBzID0gdDsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBzOwogICAgICAgIH0sCgogICAgICAgIGdldERhdGFUeXBlVXNlZDogZnVuY3Rpb24oZHQsIHRjKSB7CiAgICAgICAgICB2YXIgdCA9IGR0OwogICAgICAgICAgc3dpdGNoIChkdCkgewogICAgICAgICAgICBjYXNlIDI6IC8vc2hvcnQKICAgICAgICAgICAgY2FzZSA0OiAvL2xvbmcKICAgICAgICAgICAgICB0ID0gZHQgLSB0YzsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAzOiAvL3VzaG9ydAogICAgICAgICAgICBjYXNlIDU6IC8vdWxvbmcKICAgICAgICAgICAgICB0ID0gZHQgLSAyICogdGM7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgNjogLy9mbG9hdAogICAgICAgICAgICAgIGlmICgwID09PSB0YykgewogICAgICAgICAgICAgICAgdCA9IGR0OwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBlbHNlIGlmICgxID09PSB0YykgewogICAgICAgICAgICAgICAgdCA9IDI7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgdCA9IDE7Ly9ieXRlCiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDc6IC8vZG91YmxlCiAgICAgICAgICAgICAgaWYgKDAgPT09IHRjKSB7CiAgICAgICAgICAgICAgICB0ID0gZHQ7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgdCA9IGR0IC0gMiAqIHRjICsgMTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgdCA9IGR0OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHQ7CiAgICAgICAgfSwKCiAgICAgICAgZ2V0T25lUGl4ZWw6IGZ1bmN0aW9uKGJsb2NrLCBibG9ja1B0ciwgb2Zmc2V0VHlwZSwgdmlldykgewogICAgICAgICAgdmFyIHRlbXAgPSAwOwogICAgICAgICAgc3dpdGNoIChvZmZzZXRUeXBlKSB7CiAgICAgICAgICAgIGNhc2UgMDogLy9jaGFyCiAgICAgICAgICAgICAgdGVtcCA9IHZpZXcuZ2V0SW50OChibG9ja1B0cik7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgMTogLy9ieXRlCiAgICAgICAgICAgICAgdGVtcCA9IHZpZXcuZ2V0VWludDgoYmxvY2tQdHIpOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgdGVtcCA9IHZpZXcuZ2V0SW50MTYoYmxvY2tQdHIsIHRydWUpOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgdGVtcCA9IHZpZXcuZ2V0VWludDE2KGJsb2NrUHRyLCB0cnVlKTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIHRlbXAgPSB2aWV3LmdldEludDMyKGJsb2NrUHRyLCB0cnVlKTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIHRlbXAgPSB2aWV3LmdldFVJbnQzMihibG9ja1B0ciwgdHJ1ZSk7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICB0ZW1wID0gdmlldy5nZXRGbG9hdDMyKGJsb2NrUHRyLCB0cnVlKTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgIC8vdGVtcCA9IHZpZXcuZ2V0RmxvYXQ2NChibG9ja1B0ciwgdHJ1ZSk7CiAgICAgICAgICAgICAgLy9ibG9ja1B0ciArPSA4OwogICAgICAgICAgICAgIC8vbGVyYzIgZW5jb2RpbmcgZG9lc250IGhhbmRsZSBmbG9hdCA2NCwgZm9yY2UgdG8gZmxvYXQzMj8/PwogICAgICAgICAgICAgIHRlbXAgPSB2aWV3LmdldEZsb2F0NjQoYmxvY2tQdHIsIHRydWUpOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgIHRocm93ICgidGhlIGRlY29kZXIgZG9lcyBub3QgdW5kZXJzdGFuZCB0aGlzIHBpeGVsIHR5cGUiKTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiB0ZW1wOwogICAgICAgIH0KICAgICAgfTsKCiAgICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKICAgICAgKnByaXZhdGUgY2xhc3MgZm9yIGEgdHJlZSBub2RlLiBIdWZmbWFuIGNvZGUgaXMgaW4gTGVyYzJIZWxwZXJzCiAgICAgICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCiAgICAgIHZhciBUcmVlTm9kZSA9IGZ1bmN0aW9uKHZhbCwgbGVmdCwgcmlnaHQpIHsKICAgICAgICB0aGlzLnZhbCA9IHZhbDsKICAgICAgICB0aGlzLmxlZnQgPSBsZWZ0OwogICAgICAgIHRoaXMucmlnaHQgPSByaWdodDsKICAgICAgfTsKCiAgICAgIHZhciBMZXJjMkRlY29kZSA9IHsKICAgICAgICAvKgogICAgICAgICogKioqKioqKipyZW1vdmVkIG9wdGlvbnMgY29tcGFyZWQgdG8gTEVSQzEuIFdlIGNhbiBicmluZyBzb21lIG9mIHRoZW0gYmFjayBpZiBuZWVkZWQuCiAgICAgICAgICogcmVtb3ZlZCBwaXhlbCB0eXBlLiBMRVJDMiBpcyB0eXBlZCBhbmQgZG9lc24ndCByZXF1aXJlIHVzZXIgdG8gZ2l2ZSBwaXhlbCB0eXBlCiAgICAgICAgICogY2hhbmdlZCBlbmNvZGVkTWFza0RhdGEgdG8gbWFza0RhdGEuIExFUkMyICdzIGpzIHZlcnNpb24gbWFrZSBpdCBmYXN0ZXIgdG8gdXNlIG1hc2tEYXRhIGRpcmVjdGx5LgogICAgICAgICAqIHJlbW92ZWQgcmV0dXJuTWFzay4gbWFzayBpcyB1c2VkIGJ5IExFUkMyIGludGVybmFsbHkgYW5kIGlzIGNvc3QgZnJlZS4gSW4gY2FzZSBvZiB1c2VyIGlucHV0IG1hc2ssIGl0J3MgcmV0dXJuZWQgYXMgd2VsbCBhbmQgaGFzIG5lZ2xpYmxlIGNvc3QuCiAgICAgICAgICogcmVtb3ZlZCBub2RhdGF2YWx1ZS4gQmVjYXVzZSBMRVJDMiBwaXhlbHMgYXJlIHR5cGVkLCBub2RhdGF2YWx1ZSB3aWxsIHNhY3JpZnkgYSB1c2VmdWwgdmFsdWUgZm9yIG1hbnkgdHlwZXMgKDhiaXQsIDE2Yml0KSBldGMsCiAgICAgICAgICogICAgICAgdXNlciBoYXMgdG8gYmUga25vd2xlZGdhYmxlIGVub3VnaCBhYm91dCByYXN0ZXIgYW5kIHRoZWlyIGRhdGEgdG8gYXZvaWQgdXNhYmlsaXR5IGlzc3Vlcy4gc28gbm9kYXRhIHZhbHVlIGlzIHNpbXBseSByZW1vdmVkIG5vdy4KICAgICAgICAgKiAgICAgICBXZSBjYW4gYWRkIGl0IGJhY2sgbGF0ZXIgaWYgdGhlaXIncyBhIGNsZWFyIHJlcXVpcmVtZW50LgogICAgICAgICAqIHJlbW92ZWQgZW5jb2RlZE1hc2suIFRoaXMgb3B0aW9uIHdhcyBub3QgaW1wbGVtZW50ZWQgaW4gTGVyY0RlY29kZS4gSXQgY2FuIGJlIGRvbmUgYWZ0ZXIgZGVjb2RpbmcgKGxlc3MgZWZmaWNpZW50KQogICAgICAgICAqIHJlbW92ZWQgY29tcHV0ZVVzZWRCaXREZXB0aHMuCiAgICAgICAgICoKICAgICAgICAgKgogICAgICAgICAqIHJlc3BvbnNlIGNoYW5nZXMgY29tcGFyZWQgdG8gTEVSQzEKICAgICAgICAgKiAxLiBlbmNvZGVkTWFza0RhdGEgaXMgbm90IGF2YWlsYWJsZQogICAgICAgICAqIDIuIG5vRGF0YVZhbHVlIGlzIG9wdGlvbmFsIChyZXR1cm5zIG9ubHkgaWYgdXNlcidzIG5vRGF0YVZhbHVlIGlzIHdpdGggaW4gdGhlIHZhbGlkIGRhdGEgdHlwZSByYW5nZSkKICAgICAgICAgKiAzLiBtYXNrRGF0YSBpcyBhbHdheXMgYXZhaWxhYmxlCiAgICAgICAgKi8KICAgICAgICAvKioqKioqKioqKioqKioqKioKICAgICAgICAqICBwdWJsaWMgcHJvcGVydGllcwogICAgICAgICoqKioqKioqKioqKioqKioqKi8KICAgICAgICAvL0hVRkZNQU5fTFVUX0JJVFNfTUFYOiAxMiwgLy91c2UgMl4xMiBsdXQsIG5vdCBjb25maWd1cmFibGUKCiAgICAgICAgLyoqKioqKioqKioqKioqKioqCiAgICAgICAgKiAgcHVibGljIG1ldGhvZHMKICAgICAgICAqKioqKioqKioqKioqKioqKi8KCiAgICAgICAgLyoqCiAgICAgICAgICogRGVjb2RlIGEgTEVSQzIgYnl0ZSBzdHJlYW0gYW5kIHJldHVybiBhbiBvYmplY3QgY29udGFpbmluZyB0aGUgcGl4ZWwgZGF0YSBhbmQgb3B0aW9uYWwgbWV0YWRhdGEuCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0ge0FycmF5QnVmZmVyfSBpbnB1dCBUaGUgTEVSQyBpbnB1dCBieXRlIHN0cmVhbQogICAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9uc10gb3B0aW9ucyBEZWNvZGluZyBvcHRpb25zCiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLmlucHV0T2Zmc2V0XSBUaGUgbnVtYmVyIG9mIGJ5dGVzIHRvIHNraXAgaW4gdGhlIGlucHV0IGJ5dGUgc3RyZWFtLiBBIHZhbGlkIExFUkMgZmlsZSBpcyBleHBlY3RlZCBhdCB0aGF0IHBvc2l0aW9uCiAgICAgICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5yZXR1cm5GaWxlSW5mb10gSWYgdHJ1ZSwgdGhlIHJldHVybiB2YWx1ZSB3aWxsIGhhdmUgYSBmaWxlSW5mbyBwcm9wZXJ0eSB0aGF0IGNvbnRhaW5zIG1ldGFkYXRhIG9idGFpbmVkIGZyb20gdGhlIExFUkMgaGVhZGVycyBhbmQgdGhlIGRlY29kaW5nIHByb2Nlc3MKICAgICAgICAgKi8KICAgICAgICBkZWNvZGU6IGZ1bmN0aW9uKC8qYnl0ZSBhcnJheSovIGlucHV0LCAvKm9iamVjdCovIG9wdGlvbnMpIHsKICAgICAgICAgIC8vY3VycmVudGx5IHRoZXJlJ3MgYSBidWcgaW4gdGhlIHNwYXJzZSBhcnJheSwgc28gcGxlYXNlIGRvIG5vdCBzZXQgdG8gZmFsc2UKICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9OwogICAgICAgICAgdmFyIG5vRGF0YVZhbHVlID0gb3B0aW9ucy5ub0RhdGFWYWx1ZTsKCiAgICAgICAgICAvL2luaXRpYWxpemUKICAgICAgICAgIHZhciBpID0gMCwgZGF0YSA9IHt9OwogICAgICAgICAgZGF0YS5wdHIgPSBvcHRpb25zLmlucHV0T2Zmc2V0IHx8IDA7CiAgICAgICAgICBkYXRhLnBpeGVscyA9IHt9OwoKICAgICAgICAgIC8vIEZpbGUgaGVhZGVyCiAgICAgICAgICBpZiAoIUxlcmMySGVscGVycy5yZWFkSGVhZGVySW5mbyhpbnB1dCwgZGF0YSkpIDsKICAgICAgICAgIHZhciBoZWFkZXJJbmZvID0gZGF0YS5oZWFkZXJJbmZvOwogICAgICAgICAgdmFyIGZpbGVWZXJzaW9uID0gaGVhZGVySW5mby5maWxlVmVyc2lvbjsKICAgICAgICAgIHZhciBPdXRQaXhlbFR5cGVBcnJheSA9IExlcmMySGVscGVycy5nZXREYXRhVHlwZUFycmF5KGhlYWRlckluZm8uaW1hZ2VUeXBlKTsKCiAgICAgICAgICAvLyBNYXNrIEhlYWRlcgogICAgICAgICAgTGVyYzJIZWxwZXJzLnJlYWRNYXNrKGlucHV0LCBkYXRhKTsKICAgICAgICAgIGlmIChoZWFkZXJJbmZvLm51bVZhbGlkUGl4ZWwgIT09IGhlYWRlckluZm8ud2lkdGggKiBoZWFkZXJJbmZvLmhlaWdodCAmJiAhZGF0YS5waXhlbHMucmVzdWx0TWFzaykgewogICAgICAgICAgICBkYXRhLnBpeGVscy5yZXN1bHRNYXNrID0gb3B0aW9ucy5tYXNrRGF0YTsKICAgICAgICAgIH0KCiAgICAgICAgICB2YXIgbnVtUGl4ZWxzID0gaGVhZGVySW5mby53aWR0aCAqIGhlYWRlckluZm8uaGVpZ2h0OwogICAgICAgICAgZGF0YS5waXhlbHMucmVzdWx0UGl4ZWxzID0gbmV3IE91dFBpeGVsVHlwZUFycmF5KG51bVBpeGVscyAqIGhlYWRlckluZm8ubnVtRGltcyk7CgogICAgICAgICAgZGF0YS5jb3VudGVyID0gewogICAgICAgICAgICBvbmVzd2VlcDogMCwKICAgICAgICAgICAgdW5jb21wcmVzc2VkOiAwLAogICAgICAgICAgICBsdXQ6IDAsCiAgICAgICAgICAgIGJpdHN0dWZmZXI6IDAsCiAgICAgICAgICAgIGNvbnN0YW50OiAwLAogICAgICAgICAgICBjb25zdGFudG9mZnNldDogMAogICAgICAgICAgfTsKICAgICAgICAgIGlmIChoZWFkZXJJbmZvLm51bVZhbGlkUGl4ZWwgIT09IDApIHsKICAgICAgICAgICAgLy9ub3QgdGVzdGVkCiAgICAgICAgICAgIGlmIChoZWFkZXJJbmZvLnpNYXggPT09IGhlYWRlckluZm8uek1pbikgLy9jb25zdGFudCBzdXJmYWNlCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBMZXJjMkhlbHBlcnMuY29uc3RydWN0Q29uc3RhbnRTdXJmYWNlKGRhdGEpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgaWYgKGZpbGVWZXJzaW9uID49IDQgJiYgTGVyYzJIZWxwZXJzLmNoZWNrTWluTWF4UmFuZ2VzKGlucHV0LCBkYXRhKSkgewogICAgICAgICAgICAgIExlcmMySGVscGVycy5jb25zdHJ1Y3RDb25zdGFudFN1cmZhY2UoZGF0YSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgdmFyIHZpZXcgPSBuZXcgRGF0YVZpZXcoaW5wdXQsIGRhdGEucHRyLCAyKTsKICAgICAgICAgICAgICB2YXIgYlJlYWREYXRhT25lU3dlZXAgPSB2aWV3LmdldFVpbnQ4KDApOwogICAgICAgICAgICAgIGRhdGEucHRyKys7CiAgICAgICAgICAgICAgaWYgKGJSZWFkRGF0YU9uZVN3ZWVwKSB7CiAgICAgICAgICAgICAgICAvL2NvbnNvbGUuZGVidWcoIk9uZVN3ZWVwIik7CiAgICAgICAgICAgICAgICBMZXJjMkhlbHBlcnMucmVhZERhdGFPbmVTd2VlcChpbnB1dCwgZGF0YSwgT3V0UGl4ZWxUeXBlQXJyYXkpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIC8vbGVyYzIuMTogLy9iaXRzdHVmZmluZyArIGx1dAogICAgICAgICAgICAgICAgLy9sZXJjMi4yOiAvL2JpdHN0dWZmaW5nICsgbHV0ICsgaHVmZm1hbgogICAgICAgICAgICAgICAgLy9sZXJjMi4zOiBuZXcgYml0c3R1ZmZlcgogICAgICAgICAgICAgICAgaWYgKGZpbGVWZXJzaW9uID4gMSAmJiBoZWFkZXJJbmZvLmltYWdlVHlwZSA8PSAxICYmIE1hdGguYWJzKGhlYWRlckluZm8ubWF4WkVycm9yIC0gMC41KSA8IDAuMDAwMDEpIHsKICAgICAgICAgICAgICAgICAgLy90aGlzIGlzIDIueCBwbHVzIDggYml0ICh1bnNpZ25lZCBhbmQgc2lnbmVkKSBkYXRhLCBwb3NzaWJsaXR5IG9mIEh1ZmZtYW4KICAgICAgICAgICAgICAgICAgdmFyIGZsYWdIdWZmbWFuID0gdmlldy5nZXRVaW50OCgxKTsKICAgICAgICAgICAgICAgICAgZGF0YS5wdHIrKzsKICAgICAgICAgICAgICAgICAgZGF0YS5lbmNvZGVNb2RlID0gZmxhZ0h1ZmZtYW47CiAgICAgICAgICAgICAgICAgIGlmIChmbGFnSHVmZm1hbiA+IDIgfHwgKGZpbGVWZXJzaW9uIDwgNCAmJiBmbGFnSHVmZm1hbiA+IDEpKSB7CiAgICAgICAgICAgICAgICAgICAgdGhyb3cgIkludmFsaWQgSHVmZm1hbiBmbGFnICIgKyBmbGFnSHVmZm1hbjsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICBpZiAoZmxhZ0h1ZmZtYW4pIHsvLzEgLSBkZWx0YSBIdWZmbWFuLCAyIC0gSHVmZm1hbgogICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coIkh1ZmZtYW4iKTsKICAgICAgICAgICAgICAgICAgICBMZXJjMkhlbHBlcnMucmVhZEh1ZmZtYW4oaW5wdXQsIGRhdGEsIE91dFBpeGVsVHlwZUFycmF5KTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCJUaWxlcyIpOwogICAgICAgICAgICAgICAgICAgIExlcmMySGVscGVycy5yZWFkVGlsZXMoaW5wdXQsIGRhdGEsIE91dFBpeGVsVHlwZUFycmF5KTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSB7IC8vbGVyYzIueCBub24tOCBiaXQgZGF0YQogICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCJUaWxlcyIpOwogICAgICAgICAgICAgICAgICBMZXJjMkhlbHBlcnMucmVhZFRpbGVzKGlucHV0LCBkYXRhLCBPdXRQaXhlbFR5cGVBcnJheSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgZGF0YS5lb2ZPZmZzZXQgPSBkYXRhLnB0cjsKICAgICAgICAgIHZhciBkaWZmOwogICAgICAgICAgaWYgKG9wdGlvbnMuaW5wdXRPZmZzZXQpIHsKICAgICAgICAgICAgZGlmZiA9IGRhdGEuaGVhZGVySW5mby5ibG9iU2l6ZSArIG9wdGlvbnMuaW5wdXRPZmZzZXQgLSBkYXRhLnB0cjsKICAgICAgICAgICAgaWYgKE1hdGguYWJzKGRpZmYpID49IDEpIHsKICAgICAgICAgICAgICAvL2NvbnNvbGUuZGVidWcoImluY29ycmVjdCBlb2Y6IGRhdGFwdHIgIiArIGRhdGEucHRyICsgIiBvZmZzZXQgIiArIG9wdGlvbnMuaW5wdXRPZmZzZXQgKyAiIGJsb2JzaXplICIgKyBkYXRhLmhlYWRlckluZm8uYmxvYlNpemUgKyAiIGRpZmY6ICIgKyBkaWZmKTsKICAgICAgICAgICAgICBkYXRhLmVvZk9mZnNldCA9IG9wdGlvbnMuaW5wdXRPZmZzZXQgKyBkYXRhLmhlYWRlckluZm8uYmxvYlNpemU7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGVsc2UgewogICAgICAgICAgICBkaWZmID0gZGF0YS5oZWFkZXJJbmZvLmJsb2JTaXplIC0gZGF0YS5wdHI7CiAgICAgICAgICAgIGlmIChNYXRoLmFicyhkaWZmKSA+PSAxKSB7CiAgICAgICAgICAgICAgLy9jb25zb2xlLmRlYnVnKCJpbmNvcnJlY3QgZmlyc3QgYmFuZCBlb2Y6IGRhdGFwdHIgIiArIGRhdGEucHRyICsgIiBibG9ic2l6ZSAiICsgZGF0YS5oZWFkZXJJbmZvLmJsb2JTaXplICsgIiBkaWZmOiAiICsgZGlmZik7CiAgICAgICAgICAgICAgZGF0YS5lb2ZPZmZzZXQgPSBkYXRhLmhlYWRlckluZm8uYmxvYlNpemU7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICB2YXIgcmVzdWx0ID0gewogICAgICAgICAgICB3aWR0aDogaGVhZGVySW5mby53aWR0aCwKICAgICAgICAgICAgaGVpZ2h0OiBoZWFkZXJJbmZvLmhlaWdodCwKICAgICAgICAgICAgcGl4ZWxEYXRhOiBkYXRhLnBpeGVscy5yZXN1bHRQaXhlbHMsCiAgICAgICAgICAgIG1pblZhbHVlOiBoZWFkZXJJbmZvLnpNaW4sCiAgICAgICAgICAgIG1heFZhbHVlOiBoZWFkZXJJbmZvLnpNYXgsCiAgICAgICAgICAgIHZhbGlkUGl4ZWxDb3VudDogaGVhZGVySW5mby5udW1WYWxpZFBpeGVsLAogICAgICAgICAgICBkaW1Db3VudDogaGVhZGVySW5mby5udW1EaW1zLAogICAgICAgICAgICBkaW1TdGF0czogewogICAgICAgICAgICAgIG1pblZhbHVlczogaGVhZGVySW5mby5taW5WYWx1ZXMsCiAgICAgICAgICAgICAgbWF4VmFsdWVzOiBoZWFkZXJJbmZvLm1heFZhbHVlcwogICAgICAgICAgICB9LAogICAgICAgICAgICBtYXNrRGF0YTogZGF0YS5waXhlbHMucmVzdWx0TWFzawogICAgICAgICAgICAvL25vRGF0YVZhbHVlOiBub0RhdGFWYWx1ZQogICAgICAgICAgfTsKCiAgICAgICAgICAvL3dlIHNob3VsZCByZW1vdmUgdGhpcyBpZiB0aGVyZSdzIG5vIGV4aXN0aW5nIGNsaWVudAogICAgICAgICAgLy9vcHRpb25hbCBub0RhdGFWYWx1ZSBwcm9jZXNzaW5nLCBpdCdzIHVzZXIncyByZXNwb25zaWJsaXR5CiAgICAgICAgICBpZiAoZGF0YS5waXhlbHMucmVzdWx0TWFzayAmJiBMZXJjMkhlbHBlcnMuaXNWYWxpZFBpeGVsVmFsdWUoaGVhZGVySW5mby5pbWFnZVR5cGUsIG5vRGF0YVZhbHVlKSkgewogICAgICAgICAgICB2YXIgbWFzayA9IGRhdGEucGl4ZWxzLnJlc3VsdE1hc2s7CiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBudW1QaXhlbHM7IGkrKykgewogICAgICAgICAgICAgIGlmICghbWFza1tpXSkgewogICAgICAgICAgICAgICAgcmVzdWx0LnBpeGVsRGF0YVtpXSA9IG5vRGF0YVZhbHVlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICByZXN1bHQubm9EYXRhVmFsdWUgPSBub0RhdGFWYWx1ZTsKICAgICAgICAgIH0KICAgICAgICAgIGRhdGEubm9EYXRhVmFsdWUgPSBub0RhdGFWYWx1ZTsKICAgICAgICAgIGlmIChvcHRpb25zLnJldHVybkZpbGVJbmZvKSB7CiAgICAgICAgICAgIHJlc3VsdC5maWxlSW5mbyA9IExlcmMySGVscGVycy5mb3JtYXRGaWxlSW5mbyhkYXRhKTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgfSwKCiAgICAgICAgZ2V0QmFuZENvdW50OiBmdW5jdGlvbigvKmJ5dGUgYXJyYXkqLyBpbnB1dCkgewogICAgICAgICAgdmFyIGNvdW50ID0gMDsKICAgICAgICAgIHZhciBpID0gMDsKICAgICAgICAgIHZhciB0ZW1wID0ge307CiAgICAgICAgICB0ZW1wLnB0ciA9IDA7CiAgICAgICAgICB0ZW1wLnBpeGVscyA9IHt9OwogICAgICAgICAgd2hpbGUgKGkgPCBpbnB1dC5ieXRlTGVuZ3RoIC0gNTgpIHsKICAgICAgICAgICAgTGVyYzJIZWxwZXJzLnJlYWRIZWFkZXJJbmZvKGlucHV0LCB0ZW1wKTsKICAgICAgICAgICAgaSArPSB0ZW1wLmhlYWRlckluZm8uYmxvYlNpemU7CiAgICAgICAgICAgIGNvdW50Kys7CiAgICAgICAgICAgIHRlbXAucHRyID0gaTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBjb3VudDsKICAgICAgICB9CiAgICAgIH07CgogICAgICByZXR1cm4gTGVyYzJEZWNvZGU7CiAgICB9KSgpOwoKICAgIHZhciBpc1BsYXRmb3JtTGl0dGxlRW5kaWFuID0gKGZ1bmN0aW9uKCkgewogICAgICB2YXIgYSA9IG5ldyBBcnJheUJ1ZmZlcig0KTsKICAgICAgdmFyIGIgPSBuZXcgVWludDhBcnJheShhKTsKICAgICAgdmFyIGMgPSBuZXcgVWludDMyQXJyYXkoYSk7CiAgICAgIGNbMF0gPSAxOwogICAgICByZXR1cm4gYlswXSA9PT0gMTsKICAgIH0pKCk7CgogICAgdmFyIExlcmMgPSB7CiAgICAgIC8qKioqKioqKioqKip3cmFwcGVyKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8KICAgICAgLyoqCiAgICAgICAqIEEgd3JhcHBlciBmb3IgZGVjb2RpbmcgYm90aCBMRVJDMSBhbmQgTEVSQzIgYnl0ZSBzdHJlYW1zIGNhcGFibGUgb2YgaGFuZGxpbmcgbXVsdGliYW5kIHBpeGVsIGJsb2NrcyBmb3IgdmFyaW91cyBwaXhlbCB0eXBlcy4KICAgICAgICoKICAgICAgICogQGFsaWFzIG1vZHVsZTpMZXJjCiAgICAgICAqIEBwYXJhbSB7QXJyYXlCdWZmZXJ9IGlucHV0IFRoZSBMRVJDIGlucHV0IGJ5dGUgc3RyZWFtCiAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9uc10gVGhlIGRlY29kaW5nIG9wdGlvbnMgYmVsb3cgYXJlIG9wdGlvbmFsLgogICAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMuaW5wdXRPZmZzZXRdIFRoZSBudW1iZXIgb2YgYnl0ZXMgdG8gc2tpcCBpbiB0aGUgaW5wdXQgYnl0ZSBzdHJlYW0uIEEgdmFsaWQgTGVyYyBmaWxlIGlzIGV4cGVjdGVkIGF0IHRoYXQgcG9zaXRpb24uCiAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5waXhlbFR5cGVdIChMRVJDMSBvbmx5KSBEZWZhdWx0IHZhbHVlIGlzIEYzMi4gVmFsaWQgcGl4ZWwgdHlwZXMgZm9yIGlucHV0IGFyZSBVOC9TOC9TMTYvVTE2L1MzMi9VMzIvRjMyLgogICAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMubm9EYXRhVmFsdWVdIChMRVJDMSBvbmx5KS4gSXQgaXMgcmVjb21tZW5kZWQgdG8gdXNlIHRoZSByZXR1cm5lZCBtYXNrIGluc3RlYWQgb2Ygc2V0dGluZyB0aGlzIHZhbHVlLgogICAgICAgKiBAcmV0dXJucyB7e3dpZHRoLCBoZWlnaHQsIHBpeGVscywgcGl4ZWxUeXBlLCBtYXNrLCBzdGF0aXN0aWNzfX0KICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcn0gd2lkdGggV2lkdGggb2YgZGVjb2RlZCBpbWFnZS4KICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcn0gaGVpZ2h0IEhlaWdodCBvZiBkZWNvZGVkIGltYWdlLgogICAgICAgICAqIEBwcm9wZXJ0eSB7YXJyYXl9IHBpeGVscyBbYmFuZDEsIGJhbmQyLCDigKZdIEVhY2ggYmFuZCBpcyBhIHR5cGVkIGFycmF5IG9mIHdpZHRoKmhlaWdodC4KICAgICAgICAgKiBAcHJvcGVydHkge3N0cmluZ30gcGl4ZWxUeXBlIFRoZSB0eXBlIG9mIHBpeGVscyByZXByZXNlbnRlZCBpbiB0aGUgb3V0cHV0LgogICAgICAgICAqIEBwcm9wZXJ0eSB7bWFza30gbWFzayBUeXBlZCBhcnJheSB3aXRoIGEgc2l6ZSBvZiB3aWR0aCpoZWlnaHQsIG9yIG51bGwgaWYgYWxsIHBpeGVscyBhcmUgdmFsaWQuCiAgICAgICAgICogQHByb3BlcnR5IHthcnJheX0gc3RhdGlzdGljcyBbc3RhdGlzdGljc19iYW5kMSwgc3RhdGlzdGljc19iYW5kMiwg4oCmXSBFYWNoIGVsZW1lbnQgaXMgYSBzdGF0aXN0aWNzIG9iamVjdCByZXByZXNlbnRpbmcgbWluIGFuZCBtYXggdmFsdWVzCiAgICAgICoqLwogICAgICBkZWNvZGU6IGZ1bmN0aW9uKGVuY29kZWREYXRhLCBvcHRpb25zKSB7CiAgICAgICAgaWYgKCFpc1BsYXRmb3JtTGl0dGxlRW5kaWFuKSB7CiAgICAgICAgICB0aHJvdyAiQmlnIGVuZGlhbiBzeXN0ZW0gaXMgbm90IHN1cHBvcnRlZC4iOwogICAgICAgIH0KICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTsKICAgICAgICB2YXIgaW5wdXRPZmZzZXQgPSBvcHRpb25zLmlucHV0T2Zmc2V0IHx8IDA7CiAgICAgICAgdmFyIGZpbGVJZFZpZXcgPSBuZXcgVWludDhBcnJheShlbmNvZGVkRGF0YSwgaW5wdXRPZmZzZXQsIDEwKTsKICAgICAgICB2YXIgZmlsZUlkZW50aWZpZXJTdHJpbmcgPSBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsIGZpbGVJZFZpZXcpOwogICAgICAgIHZhciBsZXJjLCBtYWpvclZlcnNpb247CiAgICAgICAgaWYgKGZpbGVJZGVudGlmaWVyU3RyaW5nLnRyaW0oKSA9PT0gIkNudFpJbWFnZSIpIHsKICAgICAgICAgIGxlcmMgPSBMZXJjRGVjb2RlOwogICAgICAgICAgbWFqb3JWZXJzaW9uID0gMTsKICAgICAgICB9CiAgICAgICAgZWxzZSBpZiAoZmlsZUlkZW50aWZpZXJTdHJpbmcuc3Vic3RyaW5nKDAsIDUpID09PSAiTGVyYzIiKSB7CiAgICAgICAgICBsZXJjID0gTGVyYzJEZWNvZGU7CiAgICAgICAgICBtYWpvclZlcnNpb24gPSAyOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgIHRocm93ICJVbmV4cGVjdGVkIGZpbGUgaWRlbnRpZmllciBzdHJpbmc6ICIgKyBmaWxlSWRlbnRpZmllclN0cmluZzsKICAgICAgICB9CgogICAgICAgIHZhciBpUGxhbmUgPSAwLCBlb2YgPSBlbmNvZGVkRGF0YS5ieXRlTGVuZ3RoIC0gMTAsIGVuY29kZWRNYXNrRGF0YSwgYmFuZE1hc2tzID0gW10sIGJhbmRNYXNrLCBtYXNrRGF0YTsKICAgICAgICB2YXIgZGVjb2RlZFBpeGVsQmxvY2sgPSB7CiAgICAgICAgICB3aWR0aDogMCwKICAgICAgICAgIGhlaWdodDogMCwKICAgICAgICAgIHBpeGVsczogW10sCiAgICAgICAgICBwaXhlbFR5cGU6IG9wdGlvbnMucGl4ZWxUeXBlLAogICAgICAgICAgbWFzazogbnVsbCwKICAgICAgICAgIHN0YXRpc3RpY3M6IFtdCiAgICAgICAgfTsKCiAgICAgICAgd2hpbGUgKGlucHV0T2Zmc2V0IDwgZW9mKSB7CiAgICAgICAgICB2YXIgcmVzdWx0ID0gbGVyYy5kZWNvZGUoZW5jb2RlZERhdGEsIHsKICAgICAgICAgICAgaW5wdXRPZmZzZXQ6IGlucHV0T2Zmc2V0LC8vZm9yIGJvdGggbGVyYzEgYW5kIGxlcmMyCiAgICAgICAgICAgIGVuY29kZWRNYXNrRGF0YTogZW5jb2RlZE1hc2tEYXRhLC8vbGVyYzEgb25seQogICAgICAgICAgICBtYXNrRGF0YTogbWFza0RhdGEsLy9sZXJjMiBvbmx5CiAgICAgICAgICAgIHJldHVybk1hc2s6IGlQbGFuZSA9PT0gMCA/IHRydWUgOiBmYWxzZSwvL2xlcmMxIG9ubHkKICAgICAgICAgICAgcmV0dXJuRW5jb2RlZE1hc2s6IGlQbGFuZSA9PT0gMCA/IHRydWUgOiBmYWxzZSwvL2xlcmMxIG9ubHkKICAgICAgICAgICAgcmV0dXJuRmlsZUluZm86IHRydWUsLy9mb3IgYm90aCBsZXJjMSBhbmQgbGVyYzIKICAgICAgICAgICAgcGl4ZWxUeXBlOiBvcHRpb25zLnBpeGVsVHlwZSB8fCBudWxsLC8vbGVyYzEgb25seQogICAgICAgICAgICBub0RhdGFWYWx1ZTogb3B0aW9ucy5ub0RhdGFWYWx1ZSB8fCBudWxsLy9sZXJjMSBvbmx5CiAgICAgICAgICB9KTsKCiAgICAgICAgICBpbnB1dE9mZnNldCA9IHJlc3VsdC5maWxlSW5mby5lb2ZPZmZzZXQ7CiAgICAgICAgICBpZiAoaVBsYW5lID09PSAwKSB7CiAgICAgICAgICAgIGVuY29kZWRNYXNrRGF0YSA9IHJlc3VsdC5lbmNvZGVkTWFza0RhdGE7Ly9sZXJjMQogICAgICAgICAgICBtYXNrRGF0YSA9IHJlc3VsdC5tYXNrRGF0YTsvL2xlcmMyCiAgICAgICAgICAgIGRlY29kZWRQaXhlbEJsb2NrLndpZHRoID0gcmVzdWx0LndpZHRoOwogICAgICAgICAgICBkZWNvZGVkUGl4ZWxCbG9jay5oZWlnaHQgPSByZXN1bHQuaGVpZ2h0OwogICAgICAgICAgICBkZWNvZGVkUGl4ZWxCbG9jay5kaW1Db3VudCA9IHJlc3VsdC5kaW1Db3VudCB8fCAxOwogICAgICAgICAgICAvL2RlY29kZWRQaXhlbEJsb2NrLmRpbVN0YXRzID0gZGVjb2RlZFBpeGVsQmxvY2suZGltU3RhdHM7CiAgICAgICAgICAgIGRlY29kZWRQaXhlbEJsb2NrLnBpeGVsVHlwZSA9IHJlc3VsdC5waXhlbFR5cGUgfHwgcmVzdWx0LmZpbGVJbmZvLnBpeGVsVHlwZTsKICAgICAgICAgICAgZGVjb2RlZFBpeGVsQmxvY2subWFzayA9IHJlc3VsdC5tYXNrRGF0YTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChtYWpvclZlcnNpb24gPjEgJiYgcmVzdWx0LmZpbGVJbmZvLm1hc2sgJiYgcmVzdWx0LmZpbGVJbmZvLm1hc2subnVtQnl0ZXMgPiAwKSB7CiAgICAgICAgICAgIGJhbmRNYXNrcy5wdXNoKHJlc3VsdC5tYXNrRGF0YSk7CiAgICAgICAgICB9CgogICAgICAgICAgaVBsYW5lKys7CiAgICAgICAgICBkZWNvZGVkUGl4ZWxCbG9jay5waXhlbHMucHVzaChyZXN1bHQucGl4ZWxEYXRhKTsKICAgICAgICAgIGRlY29kZWRQaXhlbEJsb2NrLnN0YXRpc3RpY3MucHVzaCh7CiAgICAgICAgICAgIG1pblZhbHVlOiByZXN1bHQubWluVmFsdWUsCiAgICAgICAgICAgIG1heFZhbHVlOiByZXN1bHQubWF4VmFsdWUsCiAgICAgICAgICAgIG5vRGF0YVZhbHVlOiByZXN1bHQubm9EYXRhVmFsdWUsCiAgICAgICAgICAgIGRpbVN0YXRzOiByZXN1bHQuZGltU3RhdHMKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICB2YXIgaSwgaiwgbnVtUGl4ZWxzOwogICAgICAgIGlmIChtYWpvclZlcnNpb24gPiAxICYmIGJhbmRNYXNrcy5sZW5ndGggPiAxKSB7CiAgICAgICAgICBudW1QaXhlbHMgPSBkZWNvZGVkUGl4ZWxCbG9jay53aWR0aCAqIGRlY29kZWRQaXhlbEJsb2NrLmhlaWdodDsKICAgICAgICAgIGRlY29kZWRQaXhlbEJsb2NrLmJhbmRNYXNrcyA9IGJhbmRNYXNrczsKICAgICAgICAgIG1hc2tEYXRhID0gbmV3IFVpbnQ4QXJyYXkobnVtUGl4ZWxzKTsKICAgICAgICAgIG1hc2tEYXRhLnNldChiYW5kTWFza3NbMF0pOwogICAgICAgICAgZm9yIChpID0gMTsgaSA8IGJhbmRNYXNrcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBiYW5kTWFzayA9IGJhbmRNYXNrc1tpXTsKICAgICAgICAgICAgZm9yIChqID0gMDsgaiA8IG51bVBpeGVsczsgaisrKSB7CiAgICAgICAgICAgICAgbWFza0RhdGFbal0gPSBtYXNrRGF0YVtqXSAmIGJhbmRNYXNrW2pdOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBkZWNvZGVkUGl4ZWxCbG9jay5tYXNrRGF0YSA9IG1hc2tEYXRhOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGRlY29kZWRQaXhlbEJsb2NrOwogICAgICB9CiAgICB9OwoKICAgIGlmIChtb2R1bGUuZXhwb3J0cykgey8qIGpzaGludCBpZ25vcmU6bGluZSAqLwogICAgICAvL2NvbW1vbkpTIG1vZHVsZSAxLjAvMS4xLzEuMS4xIHN5c3RlbXMsIHN1Y2ggYXMgbm9kZUpTCiAgICAgIC8vaHR0cDovL3dpa2kuY29tbW9uanMub3JnL3dpa2kvTW9kdWxlcwogICAgICBtb2R1bGUuZXhwb3J0cyA9IExlcmM7LyoganNoaW50IGlnbm9yZTpsaW5lICovCiAgICB9CiAgICBlbHNlIHsKICAgICAgLy9hc3NpZ24gdG8gdGhpcywgbW9zdCBsaWtlbHkgd2luZG93CiAgICAgIHRoaXMuTGVyYyA9IExlcmM7CiAgICB9CgogIH0pKCk7CiAgfShMZXJjRGVjb2RlKSk7CgogIHZhciBMZXJjID0gTGVyY0RlY29kZS5leHBvcnRzOwoKICBjb25zdCBmaWVsZFRhZ05hbWVzID0gewogICAgLy8gVElGRiBCYXNlbGluZQogICAgMHgwMTNCOiAnQXJ0aXN0JywKICAgIDB4MDEwMjogJ0JpdHNQZXJTYW1wbGUnLAogICAgMHgwMTA5OiAnQ2VsbExlbmd0aCcsCiAgICAweDAxMDg6ICdDZWxsV2lkdGgnLAogICAgMHgwMTQwOiAnQ29sb3JNYXAnLAogICAgMHgwMTAzOiAnQ29tcHJlc3Npb24nLAogICAgMHg4Mjk4OiAnQ29weXJpZ2h0JywKICAgIDB4MDEzMjogJ0RhdGVUaW1lJywKICAgIDB4MDE1MjogJ0V4dHJhU2FtcGxlcycsCiAgICAweDAxMEE6ICdGaWxsT3JkZXInLAogICAgMHgwMTIxOiAnRnJlZUJ5dGVDb3VudHMnLAogICAgMHgwMTIwOiAnRnJlZU9mZnNldHMnLAogICAgMHgwMTIzOiAnR3JheVJlc3BvbnNlQ3VydmUnLAogICAgMHgwMTIyOiAnR3JheVJlc3BvbnNlVW5pdCcsCiAgICAweDAxM0M6ICdIb3N0Q29tcHV0ZXInLAogICAgMHgwMTBFOiAnSW1hZ2VEZXNjcmlwdGlvbicsCiAgICAweDAxMDE6ICdJbWFnZUxlbmd0aCcsCiAgICAweDAxMDA6ICdJbWFnZVdpZHRoJywKICAgIDB4MDEwRjogJ01ha2UnLAogICAgMHgwMTE5OiAnTWF4U2FtcGxlVmFsdWUnLAogICAgMHgwMTE4OiAnTWluU2FtcGxlVmFsdWUnLAogICAgMHgwMTEwOiAnTW9kZWwnLAogICAgMHgwMEZFOiAnTmV3U3ViZmlsZVR5cGUnLAogICAgMHgwMTEyOiAnT3JpZW50YXRpb24nLAogICAgMHgwMTA2OiAnUGhvdG9tZXRyaWNJbnRlcnByZXRhdGlvbicsCiAgICAweDAxMUM6ICdQbGFuYXJDb25maWd1cmF0aW9uJywKICAgIDB4MDEyODogJ1Jlc29sdXRpb25Vbml0JywKICAgIDB4MDExNjogJ1Jvd3NQZXJTdHJpcCcsCiAgICAweDAxMTU6ICdTYW1wbGVzUGVyUGl4ZWwnLAogICAgMHgwMTMxOiAnU29mdHdhcmUnLAogICAgMHgwMTE3OiAnU3RyaXBCeXRlQ291bnRzJywKICAgIDB4MDExMTogJ1N0cmlwT2Zmc2V0cycsCiAgICAweDAwRkY6ICdTdWJmaWxlVHlwZScsCiAgICAweDAxMDc6ICdUaHJlc2hob2xkaW5nJywKICAgIDB4MDExQTogJ1hSZXNvbHV0aW9uJywKICAgIDB4MDExQjogJ1lSZXNvbHV0aW9uJywKCiAgICAvLyBUSUZGIEV4dGVuZGVkCiAgICAweDAxNDY6ICdCYWRGYXhMaW5lcycsCiAgICAweDAxNDc6ICdDbGVhbkZheERhdGEnLAogICAgMHgwMTU3OiAnQ2xpcFBhdGgnLAogICAgMHgwMTQ4OiAnQ29uc2VjdXRpdmVCYWRGYXhMaW5lcycsCiAgICAweDAxQjE6ICdEZWNvZGUnLAogICAgMHgwMUIyOiAnRGVmYXVsdEltYWdlQ29sb3InLAogICAgMHgwMTBEOiAnRG9jdW1lbnROYW1lJywKICAgIDB4MDE1MDogJ0RvdFJhbmdlJywKICAgIDB4MDE0MTogJ0hhbGZ0b25lSGludHMnLAogICAgMHgwMTVBOiAnSW5kZXhlZCcsCiAgICAweDAxNUI6ICdKUEVHVGFibGVzJywKICAgIDB4MDExRDogJ1BhZ2VOYW1lJywKICAgIDB4MDEyOTogJ1BhZ2VOdW1iZXInLAogICAgMHgwMTNEOiAnUHJlZGljdG9yJywKICAgIDB4MDEzRjogJ1ByaW1hcnlDaHJvbWF0aWNpdGllcycsCiAgICAweDAyMTQ6ICdSZWZlcmVuY2VCbGFja1doaXRlJywKICAgIDB4MDE1MzogJ1NhbXBsZUZvcm1hdCcsCiAgICAweDAxNTQ6ICdTTWluU2FtcGxlVmFsdWUnLAogICAgMHgwMTU1OiAnU01heFNhbXBsZVZhbHVlJywKICAgIDB4MDIyRjogJ1N0cmlwUm93Q291bnRzJywKICAgIDB4MDE0QTogJ1N1YklGRHMnLAogICAgMHgwMTI0OiAnVDRPcHRpb25zJywKICAgIDB4MDEyNTogJ1Q2T3B0aW9ucycsCiAgICAweDAxNDU6ICdUaWxlQnl0ZUNvdW50cycsCiAgICAweDAxNDM6ICdUaWxlTGVuZ3RoJywKICAgIDB4MDE0NDogJ1RpbGVPZmZzZXRzJywKICAgIDB4MDE0MjogJ1RpbGVXaWR0aCcsCiAgICAweDAxMkQ6ICdUcmFuc2ZlckZ1bmN0aW9uJywKICAgIDB4MDEzRTogJ1doaXRlUG9pbnQnLAogICAgMHgwMTU4OiAnWENsaXBQYXRoVW5pdHMnLAogICAgMHgwMTFFOiAnWFBvc2l0aW9uJywKICAgIDB4MDIxMTogJ1lDYkNyQ29lZmZpY2llbnRzJywKICAgIDB4MDIxMzogJ1lDYkNyUG9zaXRpb25pbmcnLAogICAgMHgwMjEyOiAnWUNiQ3JTdWJTYW1wbGluZycsCiAgICAweDAxNTk6ICdZQ2xpcFBhdGhVbml0cycsCiAgICAweDAxMUY6ICdZUG9zaXRpb24nLAoKICAgIC8vIEVYSUYKICAgIDB4OTIwMjogJ0FwZXJ0dXJlVmFsdWUnLAogICAgMHhBMDAxOiAnQ29sb3JTcGFjZScsCiAgICAweDkwMDQ6ICdEYXRlVGltZURpZ2l0aXplZCcsCiAgICAweDkwMDM6ICdEYXRlVGltZU9yaWdpbmFsJywKICAgIDB4ODc2OTogJ0V4aWYgSUZEJywKICAgIDB4OTAwMDogJ0V4aWZWZXJzaW9uJywKICAgIDB4ODI5QTogJ0V4cG9zdXJlVGltZScsCiAgICAweEEzMDA6ICdGaWxlU291cmNlJywKICAgIDB4OTIwOTogJ0ZsYXNoJywKICAgIDB4QTAwMDogJ0ZsYXNocGl4VmVyc2lvbicsCiAgICAweDgyOUQ6ICdGTnVtYmVyJywKICAgIDB4QTQyMDogJ0ltYWdlVW5pcXVlSUQnLAogICAgMHg5MjA4OiAnTGlnaHRTb3VyY2UnLAogICAgMHg5MjdDOiAnTWFrZXJOb3RlJywKICAgIDB4OTIwMTogJ1NodXR0ZXJTcGVlZFZhbHVlJywKICAgIDB4OTI4NjogJ1VzZXJDb21tZW50JywKCiAgICAvLyBJUFRDCiAgICAweDgzQkI6ICdJUFRDJywKCiAgICAvLyBJQ0MKICAgIDB4ODc3MzogJ0lDQyBQcm9maWxlJywKCiAgICAvLyBYTVAKICAgIDB4MDJCQzogJ1hNUCcsCgogICAgLy8gR0RBTAogICAgMHhBNDgwOiAnR0RBTF9NRVRBREFUQScsCiAgICAweEE0ODE6ICdHREFMX05PREFUQScsCgogICAgLy8gUGhvdG9zaG9wCiAgICAweDg2NDk6ICdQaG90b3Nob3AnLAoKICAgIC8vIEdlb1RpZmYKICAgIDB4ODMwRTogJ01vZGVsUGl4ZWxTY2FsZScsCiAgICAweDg0ODI6ICdNb2RlbFRpZXBvaW50JywKICAgIDB4ODVEODogJ01vZGVsVHJhbnNmb3JtYXRpb24nLAogICAgMHg4N0FGOiAnR2VvS2V5RGlyZWN0b3J5JywKICAgIDB4ODdCMDogJ0dlb0RvdWJsZVBhcmFtcycsCiAgICAweDg3QjE6ICdHZW9Bc2NpaVBhcmFtcycsCgogICAgLy8gTEVSQwogICAgMHhDNUYyOiAnTGVyY1BhcmFtZXRlcnMnLAogIH07CgogIGNvbnN0IGZpZWxkVGFncyA9IHt9OwogIGZvciAoY29uc3Qga2V5IGluIGZpZWxkVGFnTmFtZXMpIHsKICAgIGlmIChmaWVsZFRhZ05hbWVzLmhhc093blByb3BlcnR5KGtleSkpIHsKICAgICAgZmllbGRUYWdzW2ZpZWxkVGFnTmFtZXNba2V5XV0gPSBwYXJzZUludChrZXksIDEwKTsKICAgIH0KICB9CgogIFsKICAgIGZpZWxkVGFncy5CaXRzUGVyU2FtcGxlLAogICAgZmllbGRUYWdzLkV4dHJhU2FtcGxlcywKICAgIGZpZWxkVGFncy5TYW1wbGVGb3JtYXQsCiAgICBmaWVsZFRhZ3MuU3RyaXBCeXRlQ291bnRzLAogICAgZmllbGRUYWdzLlN0cmlwT2Zmc2V0cywKICAgIGZpZWxkVGFncy5TdHJpcFJvd0NvdW50cywKICAgIGZpZWxkVGFncy5UaWxlQnl0ZUNvdW50cywKICAgIGZpZWxkVGFncy5UaWxlT2Zmc2V0cywKICAgIGZpZWxkVGFncy5TdWJJRkRzLAogIF07CgogIGNvbnN0IGZpZWxkVHlwZU5hbWVzID0gewogICAgMHgwMDAxOiAnQllURScsCiAgICAweDAwMDI6ICdBU0NJSScsCiAgICAweDAwMDM6ICdTSE9SVCcsCiAgICAweDAwMDQ6ICdMT05HJywKICAgIDB4MDAwNTogJ1JBVElPTkFMJywKICAgIDB4MDAwNjogJ1NCWVRFJywKICAgIDB4MDAwNzogJ1VOREVGSU5FRCcsCiAgICAweDAwMDg6ICdTU0hPUlQnLAogICAgMHgwMDA5OiAnU0xPTkcnLAogICAgMHgwMDBBOiAnU1JBVElPTkFMJywKICAgIDB4MDAwQjogJ0ZMT0FUJywKICAgIDB4MDAwQzogJ0RPVUJMRScsCiAgICAvLyBJRkQgb2Zmc2V0LCBzdWdnZXN0ZWQgYnkgaHR0cHM6Ly9vd2wucGh5LnF1ZWVuc3UuY2EvfnBoaWwvZXhpZnRvb2wvc3RhbmRhcmRzLmh0bWwKICAgIDB4MDAwRDogJ0lGRCcsCiAgICAvLyBpbnRyb2R1Y2VkIGJ5IEJpZ1RJRkYKICAgIDB4MDAxMDogJ0xPTkc4JywKICAgIDB4MDAxMTogJ1NMT05HOCcsCiAgICAweDAwMTI6ICdJRkQ4JywKICB9OwoKICBjb25zdCBmaWVsZFR5cGVzID0ge307CiAgZm9yIChjb25zdCBrZXkgaW4gZmllbGRUeXBlTmFtZXMpIHsKICAgIGlmIChmaWVsZFR5cGVOYW1lcy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7CiAgICAgIGZpZWxkVHlwZXNbZmllbGRUeXBlTmFtZXNba2V5XV0gPSBwYXJzZUludChrZXksIDEwKTsKICAgIH0KICB9CgogIGNvbnN0IExlcmNQYXJhbWV0ZXJzID0gewogICAgVmVyc2lvbjogMCwKICAgIEFkZENvbXByZXNzaW9uOiAxLAogIH07CgogIGNvbnN0IExlcmNBZGRDb21wcmVzc2lvbiA9IHsKICAgIE5vbmU6IDAsCiAgICBEZWZsYXRlOiAxLAogIH07CgoKICBjb25zdCBnZW9LZXlOYW1lcyA9IHsKICAgIDEwMjQ6ICdHVE1vZGVsVHlwZUdlb0tleScsCiAgICAxMDI1OiAnR1RSYXN0ZXJUeXBlR2VvS2V5JywKICAgIDEwMjY6ICdHVENpdGF0aW9uR2VvS2V5JywKICAgIDIwNDg6ICdHZW9ncmFwaGljVHlwZUdlb0tleScsCiAgICAyMDQ5OiAnR2VvZ0NpdGF0aW9uR2VvS2V5JywKICAgIDIwNTA6ICdHZW9nR2VvZGV0aWNEYXR1bUdlb0tleScsCiAgICAyMDUxOiAnR2VvZ1ByaW1lTWVyaWRpYW5HZW9LZXknLAogICAgMjA1MjogJ0dlb2dMaW5lYXJVbml0c0dlb0tleScsCiAgICAyMDUzOiAnR2VvZ0xpbmVhclVuaXRTaXplR2VvS2V5JywKICAgIDIwNTQ6ICdHZW9nQW5ndWxhclVuaXRzR2VvS2V5JywKICAgIDIwNTU6ICdHZW9nQW5ndWxhclVuaXRTaXplR2VvS2V5JywKICAgIDIwNTY6ICdHZW9nRWxsaXBzb2lkR2VvS2V5JywKICAgIDIwNTc6ICdHZW9nU2VtaU1ham9yQXhpc0dlb0tleScsCiAgICAyMDU4OiAnR2VvZ1NlbWlNaW5vckF4aXNHZW9LZXknLAogICAgMjA1OTogJ0dlb2dJbnZGbGF0dGVuaW5nR2VvS2V5JywKICAgIDIwNjA6ICdHZW9nQXppbXV0aFVuaXRzR2VvS2V5JywKICAgIDIwNjE6ICdHZW9nUHJpbWVNZXJpZGlhbkxvbmdHZW9LZXknLAogICAgMjA2MjogJ0dlb2dUT1dHUzg0R2VvS2V5JywKICAgIDMwNzI6ICdQcm9qZWN0ZWRDU1R5cGVHZW9LZXknLAogICAgMzA3MzogJ1BDU0NpdGF0aW9uR2VvS2V5JywKICAgIDMwNzQ6ICdQcm9qZWN0aW9uR2VvS2V5JywKICAgIDMwNzU6ICdQcm9qQ29vcmRUcmFuc0dlb0tleScsCiAgICAzMDc2OiAnUHJvakxpbmVhclVuaXRzR2VvS2V5JywKICAgIDMwNzc6ICdQcm9qTGluZWFyVW5pdFNpemVHZW9LZXknLAogICAgMzA3ODogJ1Byb2pTdGRQYXJhbGxlbDFHZW9LZXknLAogICAgMzA3OTogJ1Byb2pTdGRQYXJhbGxlbDJHZW9LZXknLAogICAgMzA4MDogJ1Byb2pOYXRPcmlnaW5Mb25nR2VvS2V5JywKICAgIDMwODE6ICdQcm9qTmF0T3JpZ2luTGF0R2VvS2V5JywKICAgIDMwODI6ICdQcm9qRmFsc2VFYXN0aW5nR2VvS2V5JywKICAgIDMwODM6ICdQcm9qRmFsc2VOb3J0aGluZ0dlb0tleScsCiAgICAzMDg0OiAnUHJvakZhbHNlT3JpZ2luTG9uZ0dlb0tleScsCiAgICAzMDg1OiAnUHJvakZhbHNlT3JpZ2luTGF0R2VvS2V5JywKICAgIDMwODY6ICdQcm9qRmFsc2VPcmlnaW5FYXN0aW5nR2VvS2V5JywKICAgIDMwODc6ICdQcm9qRmFsc2VPcmlnaW5Ob3J0aGluZ0dlb0tleScsCiAgICAzMDg4OiAnUHJvakNlbnRlckxvbmdHZW9LZXknLAogICAgMzA4OTogJ1Byb2pDZW50ZXJMYXRHZW9LZXknLAogICAgMzA5MDogJ1Byb2pDZW50ZXJFYXN0aW5nR2VvS2V5JywKICAgIDMwOTE6ICdQcm9qQ2VudGVyTm9ydGhpbmdHZW9LZXknLAogICAgMzA5MjogJ1Byb2pTY2FsZUF0TmF0T3JpZ2luR2VvS2V5JywKICAgIDMwOTM6ICdQcm9qU2NhbGVBdENlbnRlckdlb0tleScsCiAgICAzMDk0OiAnUHJvakF6aW11dGhBbmdsZUdlb0tleScsCiAgICAzMDk1OiAnUHJvalN0cmFpZ2h0VmVydFBvbGVMb25nR2VvS2V5JywKICAgIDMwOTY6ICdQcm9qUmVjdGlmaWVkR3JpZEFuZ2xlR2VvS2V5JywKICAgIDQwOTY6ICdWZXJ0aWNhbENTVHlwZUdlb0tleScsCiAgICA0MDk3OiAnVmVydGljYWxDaXRhdGlvbkdlb0tleScsCiAgICA0MDk4OiAnVmVydGljYWxEYXR1bUdlb0tleScsCiAgICA0MDk5OiAnVmVydGljYWxVbml0c0dlb0tleScsCiAgfTsKCiAgY29uc3QgZ2VvS2V5cyA9IHt9OwogIGZvciAoY29uc3Qga2V5IGluIGdlb0tleU5hbWVzKSB7CiAgICBpZiAoZ2VvS2V5TmFtZXMuaGFzT3duUHJvcGVydHkoa2V5KSkgewogICAgICBnZW9LZXlzW2dlb0tleU5hbWVzW2tleV1dID0gcGFyc2VJbnQoa2V5LCAxMCk7CiAgICB9CiAgfQoKICBjbGFzcyBMZXJjRGVjb2RlciBleHRlbmRzIEJhc2VEZWNvZGVyIHsKICAgIGNvbnN0cnVjdG9yKGZpbGVEaXJlY3RvcnkpIHsKICAgICAgc3VwZXIoKTsKCiAgICAgIHRoaXMucGxhbmFyQ29uZmlndXJhdGlvbiA9IHR5cGVvZiBmaWxlRGlyZWN0b3J5LlBsYW5hckNvbmZpZ3VyYXRpb24gIT09ICd1bmRlZmluZWQnID8gZmlsZURpcmVjdG9yeS5QbGFuYXJDb25maWd1cmF0aW9uIDogMTsKICAgICAgdGhpcy5zYW1wbGVzUGVyUGl4ZWwgPSB0eXBlb2YgZmlsZURpcmVjdG9yeS5TYW1wbGVzUGVyUGl4ZWwgIT09ICd1bmRlZmluZWQnID8gZmlsZURpcmVjdG9yeS5TYW1wbGVzUGVyUGl4ZWwgOiAxOwoKICAgICAgdGhpcy5hZGRDb21wcmVzc2lvbiA9IGZpbGVEaXJlY3RvcnkuTGVyY1BhcmFtZXRlcnNbTGVyY1BhcmFtZXRlcnMuQWRkQ29tcHJlc3Npb25dOwogICAgfQoKICAgIGludGVybGVhdmVQaXhlbHMoYmFuZEludGVybGVhdmVkRGF0YSkgewogICAgICBjb25zdCBwaXhlbEludGVybGVhdmVkRGF0YSA9IG5ldyBiYW5kSW50ZXJsZWF2ZWREYXRhLmNvbnN0cnVjdG9yKGJhbmRJbnRlcmxlYXZlZERhdGEubGVuZ3RoKTsKICAgICAgY29uc3QgbGVuZ3RoUGVyU2FtcGxlID0gYmFuZEludGVybGVhdmVkRGF0YS5sZW5ndGggLyB0aGlzLnNhbXBsZXNQZXJQaXhlbDsKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGhQZXJTYW1wbGU7IGkrKykgewogICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgdGhpcy5zYW1wbGVzUGVyUGl4ZWw7IGorKykgewogICAgICAgICAgcGl4ZWxJbnRlcmxlYXZlZERhdGFbaSAqIHRoaXMuc2FtcGxlc1BlclBpeGVsICsgal0gPSBiYW5kSW50ZXJsZWF2ZWREYXRhW2kgKyBqICogbGVuZ3RoUGVyU2FtcGxlXTsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIHBpeGVsSW50ZXJsZWF2ZWREYXRhOwogICAgfQoKICAgIGRlY29kZUJsb2NrKGJ1ZmZlcikgewogICAgICBzd2l0Y2ggKHRoaXMuYWRkQ29tcHJlc3Npb24pIHsKICAgICAgICBjYXNlIExlcmNBZGRDb21wcmVzc2lvbi5Ob25lOgogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSBMZXJjQWRkQ29tcHJlc3Npb24uRGVmbGF0ZToKICAgICAgICAgIGJ1ZmZlciA9IGluZmxhdGVfMShuZXcgVWludDhBcnJheShidWZmZXIpKS5idWZmZXI7CiAgICAgICAgICBicmVhazsKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbnN1cHBvcnRlZCBMRVJDIGFkZGl0aW9uYWwgY29tcHJlc3Npb24gbWV0aG9kIGlkZW50aWZpZXI6ICR7dGhpcy5hZGRDb21wcmVzc2lvbn1gKTsKICAgICAgfQoKICAgICAgY29uc3QgbGVyY1Jlc3VsdCA9IExlcmMuZGVjb2RlKGJ1ZmZlcik7CiAgICAgIGNvbnN0IGxlcmNEYXRhID0gbGVyY1Jlc3VsdC5waXhlbHNbMF07IC8vIGFsd2F5cyBiYW5kLWludGVybGVhdmVkCiAgICAgIGNvbnN0IGRlY29kZWREYXRhID0gdGhpcy5wbGFuYXJDb25maWd1cmF0aW9uID09PSAxID8gdGhpcy5pbnRlcmxlYXZlUGl4ZWxzKGxlcmNEYXRhKSA6IGxlcmNEYXRhOyAvLyB0cmFuc2Zvcm0gdG8gcGl4ZWwtaW50ZXJsZWF2ZWQgaWYgZXhwZWN0ZWQKICAgICAgcmV0dXJuIGRlY29kZWREYXRhLmJ1ZmZlcjsKICAgIH0KICB9CgogIGZ1bmN0aW9uIGdldERlY29kZXIoZmlsZURpcmVjdG9yeSkgewogICAgc3dpdGNoIChmaWxlRGlyZWN0b3J5LkNvbXByZXNzaW9uKSB7CiAgICAgIGNhc2UgdW5kZWZpbmVkOgogICAgICBjYXNlIDE6IC8vIG5vIGNvbXByZXNzaW9uCiAgICAgICAgcmV0dXJuIG5ldyBSYXdEZWNvZGVyKCk7CiAgICAgIGNhc2UgNTogLy8gTFpXCiAgICAgICAgcmV0dXJuIG5ldyBMWldEZWNvZGVyKGZpbGVEaXJlY3RvcnkpOwogICAgICBjYXNlIDY6IC8vIEpQRUcKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ29sZCBzdHlsZSBKUEVHIGNvbXByZXNzaW9uIGlzIG5vdCBzdXBwb3J0ZWQuJyk7CiAgICAgIGNhc2UgNzogLy8gSlBFRwogICAgICAgIHJldHVybiBuZXcgSnBlZ0RlY29kZXIoZmlsZURpcmVjdG9yeSk7CiAgICAgIGNhc2UgODogLy8gRGVmbGF0ZSBhcyByZWNvZ25pemVkIGJ5IEFkb2JlCiAgICAgIGNhc2UgMzI5NDY6IC8vIERlZmxhdGUgR0RBTCBkZWZhdWx0CiAgICAgICAgcmV0dXJuIG5ldyBEZWZsYXRlRGVjb2RlcigpOwogICAgICBjYXNlIDMyNzczOiAvLyBwYWNrYml0cwogICAgICAgIHJldHVybiBuZXcgUGFja2JpdHNEZWNvZGVyKCk7CiAgICAgIGNhc2UgMzQ4ODc6IC8vIExFUkMKICAgICAgICByZXR1cm4gbmV3IExlcmNEZWNvZGVyKGZpbGVEaXJlY3RvcnkpOwogICAgICBkZWZhdWx0OgogICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5rbm93biBjb21wcmVzc2lvbiBtZXRob2QgaWRlbnRpZmllcjogJHtmaWxlRGlyZWN0b3J5LkNvbXByZXNzaW9ufWApOwogICAgfQogIH0KCiAgYXN5bmMgZnVuY3Rpb24gZGVjb2RlKGZpbGVEaXJlY3RvcnksIGJ1ZmZlcikgewogICAgY29uc3QgZGVjb2RlciA9IGdldERlY29kZXIoZmlsZURpcmVjdG9yeSk7CiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkZWNvZGVyLmRlY29kZShmaWxlRGlyZWN0b3J5LCBidWZmZXIpOwogICAgc2VsZi5wb3N0TWVzc2FnZShyZXN1bHQsIFtyZXN1bHRdKTsKICB9CiAgaWYgKHR5cGVvZiBzZWxmICE9PSAidW5kZWZpbmVkIikgewogICAgc2VsZi5hZGRFdmVudExpc3RlbmVyKCJtZXNzYWdlIiwgKGV2ZW50KSA9PiB7CiAgICAgIGNvbnN0IFtuYW1lLCAuLi5hcmdzXSA9IGV2ZW50LmRhdGE7CiAgICAgIHN3aXRjaCAobmFtZSkgewogICAgICAgIGNhc2UgImRlY29kZSI6CiAgICAgICAgICBkZWNvZGUoYXJnc1swXSwgYXJnc1sxXSk7CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgfSk7CiAgfQoKfSkoKTsK\";\nvar blob = typeof window !== \"undefined\" && window.Blob && new Blob([atob(encodedJs)], {\n  type: \"text/javascript;charset=utf-8\"\n});\n\nfunction WorkerWrapper() {\n  const objURL = blob && (window.URL || window.webkitURL).createObjectURL(blob);\n\n  try {\n    return objURL ? new Worker(objURL) : new Worker(\"data:application/javascript;base64,\" + encodedJs, {\n      type: \"module\"\n    });\n  } finally {\n    objURL && (window.URL || window.webkitURL).revokeObjectURL(objURL);\n  }\n}\n\nvar _a, _b;\n\nvar defaultPoolSize = (_b = (_a = globalThis == null ? void 0 : globalThis.navigator) == null ? void 0 : _a.hardwareConcurrency) != null ? _b : 4;\nvar Pool = class {\n  constructor() {\n    let size = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : defaultPoolSize;\n\n    __publicField(this, \"workers\");\n\n    __publicField(this, \"idleWorkers\");\n\n    __publicField(this, \"waitQueue\");\n\n    __publicField(this, \"decoder\");\n\n    this.workers = [];\n    this.idleWorkers = [];\n    this.waitQueue = [];\n    this.decoder = null;\n\n    for (let i = 0; i < size; ++i) {\n      const w = new WorkerWrapper();\n      this.workers.push(w);\n      this.idleWorkers.push(w);\n    }\n  }\n\n  decode(fileDirectory, buffer) {\n    return __async(this, null, function* () {\n      const currentWorker = yield this.waitForWorker();\n      return new Promise((resolve, reject) => {\n        currentWorker.onmessage = event => {\n          this.finishTask(currentWorker);\n          resolve(event.data);\n        };\n\n        currentWorker.onerror = error => {\n          this.finishTask(currentWorker);\n          reject(error);\n        };\n\n        currentWorker.postMessage([\"decode\", fileDirectory, buffer], [buffer]);\n      });\n    });\n  }\n\n  waitForWorker() {\n    return __async(this, null, function* () {\n      const idleWorker = this.idleWorkers.pop();\n\n      if (idleWorker) {\n        return idleWorker;\n      }\n\n      const waiter = {};\n      const promise = new Promise(resolve => {\n        waiter.resolve = resolve;\n      });\n      this.waitQueue.push(waiter);\n      return promise;\n    });\n  }\n\n  finishTask(currentWorker) {\n    return __async(this, null, function* () {\n      const waiter = this.waitQueue.pop();\n\n      if (waiter) {\n        waiter.resolve(currentWorker);\n      } else {\n        this.idleWorkers.push(currentWorker);\n      }\n    });\n  }\n\n  destroy() {\n    for (let i = 0; i < this.workers.length; ++i) {\n      this.workers[i].terminate();\n    }\n  }\n\n};\nvar PARSER_OPTIONS = {\n  attributeNamePrefix: \"\",\n  attrNodeName: \"attr\",\n  parseNodeValue: true,\n  parseAttributeValue: true,\n  ignoreAttributes: false\n};\n\nvar parse = str => parser.parse(str, PARSER_OPTIONS);\n\nfunction fromString(str) {\n  const res = parse(str);\n\n  if (!res.OME) {\n    throw Error(\"Failed to parse OME-XML metadata.\");\n  }\n\n  return ensureArray(res.OME.Image).map(img => {\n    const Channels = ensureArray(img.Pixels.Channel).map(c => {\n      if (\"Color\" in c.attr) {\n        return __spreadProps(__spreadValues({}, c.attr), {\n          Color: intToRgba(c.attr.Color)\n        });\n      }\n\n      return __spreadValues({}, c.attr);\n    });\n    const {\n      AquisitionDate = \"\",\n      Description: Description2 = \"\"\n    } = img;\n\n    const image = __spreadProps(__spreadValues({}, img.attr), {\n      AquisitionDate,\n      Description: Description2,\n      Pixels: __spreadProps(__spreadValues({}, img.Pixels.attr), {\n        Channels\n      })\n    });\n\n    return __spreadProps(__spreadValues({}, image), {\n      format() {\n        const {\n          Pixels\n        } = image;\n        const sizes = [\"X\", \"Y\", \"Z\"].map(name2 => {\n          const size = Pixels[`PhysicalSize${name2}`];\n          const unit2 = Pixels[`PhysicalSize${name2}Unit`];\n          return size && unit2 ? `${size} ${unit2}` : \"-\";\n        }).join(\" x \");\n        return {\n          \"Acquisition Date\": image.AquisitionDate,\n          \"Dimensions (XY)\": `${Pixels.SizeX} x ${Pixels.SizeY}`,\n          \"Pixels Type\": Pixels.Type,\n          \"Pixels Size (XYZ)\": sizes,\n          \"Z-sections/Timepoints\": `${Pixels.SizeZ} x ${Pixels.SizeT}`,\n          Channels: Pixels.SizeC\n        };\n      }\n\n    });\n  });\n}\n\nvar TiffPixelSource = class {\n  constructor(indexer, dtype, tileSize, shape, labels, meta, pool) {\n    __publicField(this, \"_indexer\");\n\n    this.dtype = dtype;\n    this.tileSize = tileSize;\n    this.shape = shape;\n    this.labels = labels;\n    this.meta = meta;\n    this.pool = pool;\n    this._indexer = indexer;\n  }\n\n  getRaster(_0) {\n    return __async(this, arguments, function* (_ref21) {\n      let {\n        selection,\n        signal\n      } = _ref21;\n      const image = yield this._indexer(selection);\n      return this._readRasters(image, {\n        signal\n      });\n    });\n  }\n\n  getTile(_0) {\n    return __async(this, arguments, function* (_ref22) {\n      let {\n        x,\n        y,\n        selection,\n        signal\n      } = _ref22;\n\n      const {\n        height,\n        width\n      } = this._getTileExtent(x, y);\n\n      const x0 = x * this.tileSize;\n      const y0 = y * this.tileSize;\n      const window2 = [x0, y0, x0 + width, y0 + height];\n      const image = yield this._indexer(selection);\n      return this._readRasters(image, {\n        window: window2,\n        width,\n        height,\n        signal\n      });\n    });\n  }\n\n  _readRasters(image, props) {\n    return __async(this, null, function* () {\n      var _a2;\n\n      const interleave = isInterleaved(this.shape);\n      const raster = yield image.readRasters(__spreadProps(__spreadValues({\n        interleave\n      }, props), {\n        pool: this.pool\n      }));\n\n      if ((_a2 = props == null ? void 0 : props.signal) == null ? void 0 : _a2.aborted) {\n        throw SIGNAL_ABORTED;\n      }\n\n      const data = interleave ? raster : raster[0];\n      return {\n        data,\n        width: raster.width,\n        height: raster.height\n      };\n    });\n  }\n\n  _getTileExtent(x, y) {\n    const {\n      height: zoomLevelHeight,\n      width: zoomLevelWidth\n    } = getImageSize(this);\n    let height = this.tileSize;\n    let width = this.tileSize;\n    const maxXTileCoord = Math.floor(zoomLevelWidth / this.tileSize);\n    const maxYTileCoord = Math.floor(zoomLevelHeight / this.tileSize);\n\n    if (x === maxXTileCoord) {\n      width = zoomLevelWidth % this.tileSize;\n    }\n\n    if (y === maxYTileCoord) {\n      height = zoomLevelHeight % this.tileSize;\n    }\n\n    return {\n      height,\n      width\n    };\n  }\n\n  onTileError(err) {\n    console.error(err);\n  }\n\n};\n\nfunction getOmeLegacyIndexer(tiff, rootMeta) {\n  const imgMeta = rootMeta[0];\n  const {\n    SizeT,\n    SizeC,\n    SizeZ\n  } = imgMeta.Pixels;\n  const ifdIndexer = getOmeIFDIndexer(imgMeta);\n  return (sel, pyramidLevel) => {\n    const index = ifdIndexer(sel);\n    const pyramidIndex = pyramidLevel * SizeZ * SizeT * SizeC;\n    return tiff.getImage(index + pyramidIndex);\n  };\n}\n\nfunction getOmeSubIFDIndexer(tiff, rootMeta) {\n  const imgMeta = rootMeta[0];\n  const ifdIndexer = getOmeIFDIndexer(imgMeta);\n  const ifdCache = new Map();\n  return (sel, pyramidLevel) => __async(this, null, function* () {\n    const index = ifdIndexer(sel);\n    const baseImage = yield tiff.getImage(index);\n\n    if (pyramidLevel === 0) {\n      return baseImage;\n    }\n\n    const {\n      SubIFDs\n    } = baseImage.fileDirectory;\n\n    if (!SubIFDs) {\n      throw Error(\"Indexing Error: OME-TIFF is missing SubIFDs.\");\n    }\n\n    const key = `${sel.t}-${sel.c}-${sel.z}-${pyramidLevel}`;\n\n    if (!ifdCache.has(key)) {\n      const subIfdOffset = SubIFDs[pyramidLevel - 1];\n      ifdCache.set(key, tiff.parseFileDirectoryAt(subIfdOffset));\n    }\n\n    const ifd = yield ifdCache.get(key);\n    return new baseImage.constructor(ifd.fileDirectory, ifd.geoKeyDirectory, tiff.dataView, tiff.littleEndian, tiff.cache, tiff.source);\n  });\n}\n\nfunction getOmeIFDIndexer(imgMeta) {\n  const {\n    SizeC,\n    SizeZ,\n    SizeT,\n    DimensionOrder\n  } = imgMeta.Pixels;\n\n  switch (DimensionOrder) {\n    case \"XYZCT\":\n      {\n        return _ref23 => {\n          let {\n            t,\n            c,\n            z\n          } = _ref23;\n          return t * SizeZ * SizeC + c * SizeZ + z;\n        };\n      }\n\n    case \"XYZTC\":\n      {\n        return _ref24 => {\n          let {\n            t,\n            c,\n            z\n          } = _ref24;\n          return c * SizeZ * SizeT + t * SizeZ + z;\n        };\n      }\n\n    case \"XYCTZ\":\n      {\n        return _ref25 => {\n          let {\n            t,\n            c,\n            z\n          } = _ref25;\n          return z * SizeC * SizeT + t * SizeC + c;\n        };\n      }\n\n    case \"XYCZT\":\n      {\n        return _ref26 => {\n          let {\n            t,\n            c,\n            z\n          } = _ref26;\n          return t * SizeC * SizeZ + z * SizeC + c;\n        };\n      }\n\n    case \"XYTCZ\":\n      {\n        return _ref27 => {\n          let {\n            t,\n            c,\n            z\n          } = _ref27;\n          return z * SizeT * SizeC + c * SizeT + t;\n        };\n      }\n\n    case \"XYTZC\":\n      {\n        return _ref28 => {\n          let {\n            t,\n            c,\n            z\n          } = _ref28;\n          return c * SizeT * SizeZ + z * SizeT + t;\n        };\n      }\n\n    default:\n      {\n        throw new Error(`Invalid OME-XML DimensionOrder, got ${DimensionOrder}.`);\n      }\n  }\n}\n\nvar DTYPE_LOOKUP$1 = {\n  uint8: \"Uint8\",\n  uint16: \"Uint16\",\n  uint32: \"Uint32\",\n  float: \"Float32\",\n  double: \"Float64\",\n  int8: \"Int8\",\n  int16: \"Int16\",\n  int32: \"Int32\"\n};\n\nfunction getOmePixelSourceMeta(_ref29) {\n  let {\n    Pixels\n  } = _ref29;\n  const labels = getLabels(Pixels.DimensionOrder);\n  const dims = getDims(labels);\n  const shape = Array(labels.length).fill(0);\n  shape[dims(\"t\")] = Pixels.SizeT;\n  shape[dims(\"c\")] = Pixels.SizeC;\n  shape[dims(\"z\")] = Pixels.SizeZ;\n\n  if (Pixels.Interleaved) {\n    labels.push(\"_c\");\n    shape.push(3);\n  }\n\n  const getShape = level => {\n    const s = [...shape];\n    s[dims(\"x\")] = Pixels.SizeX >> level;\n    s[dims(\"y\")] = Pixels.SizeY >> level;\n    return s;\n  };\n\n  if (!(Pixels.Type in DTYPE_LOOKUP$1)) {\n    throw Error(`Pixel type ${Pixels.Type} not supported.`);\n  }\n\n  const dtype = DTYPE_LOOKUP$1[Pixels.Type];\n\n  if (Pixels.PhysicalSizeX && Pixels.PhysicalSizeY) {\n    const physicalSizes = {\n      x: {\n        size: Pixels.PhysicalSizeX,\n        unit: Pixels.PhysicalSizeXUnit\n      },\n      y: {\n        size: Pixels.PhysicalSizeY,\n        unit: Pixels.PhysicalSizeYUnit\n      }\n    };\n\n    if (Pixels.PhysicalSizeZ) {\n      physicalSizes.z = {\n        size: Pixels.PhysicalSizeZ,\n        unit: Pixels.PhysicalSizeZUnit\n      };\n    }\n\n    return {\n      labels,\n      getShape,\n      physicalSizes,\n      dtype\n    };\n  }\n\n  return {\n    labels,\n    getShape,\n    dtype\n  };\n}\n\nfunction guessTileSize$1(image) {\n  const tileWidth = image.getTileWidth();\n  const tileHeight = image.getTileHeight();\n  const size = Math.min(tileWidth, tileHeight);\n  return prevPowerOf2(size);\n}\n\nfunction load$2(tiff, pool) {\n  return __async(this, null, function* () {\n    const firstImage = yield tiff.getImage(0);\n    const {\n      ImageDescription,\n      SubIFDs,\n      PhotometricInterpretation: photometricInterpretation\n    } = firstImage.fileDirectory;\n    const omexml = fromString(ImageDescription);\n    let levels;\n    let pyramidIndexer;\n\n    if (SubIFDs) {\n      levels = SubIFDs.length + 1;\n      pyramidIndexer = getOmeSubIFDIndexer(tiff, omexml);\n    } else {\n      levels = omexml.length;\n      pyramidIndexer = getOmeLegacyIndexer(tiff, omexml);\n    }\n\n    const imgMeta = omexml[0];\n    const {\n      labels,\n      getShape,\n      physicalSizes,\n      dtype\n    } = getOmePixelSourceMeta(imgMeta);\n    const tileSize = guessTileSize$1(firstImage);\n    const meta = {\n      photometricInterpretation,\n      physicalSizes\n    };\n    const data = Array.from({\n      length: levels\n    }).map((_, resolution) => {\n      const shape = getShape(resolution);\n\n      const indexer = sel => pyramidIndexer(sel, resolution);\n\n      const source = new TiffPixelSource(indexer, dtype, tileSize, shape, labels, meta, pool);\n      return source;\n    });\n    return {\n      data,\n      metadata: imgMeta\n    };\n  });\n}\n\nfunction loadOmeTiff(_0) {\n  return __async(this, arguments, function* (source) {\n    let opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    const {\n      headers,\n      offsets,\n      pool = true\n    } = opts;\n    let tiff;\n\n    if (typeof source === \"string\") {\n      tiff = yield fromUrl(source, __spreadProps(__spreadValues({}, headers), {\n        cacheSize: Infinity\n      }));\n    } else {\n      tiff = yield fromBlob(source);\n    }\n\n    if (offsets) {\n      tiff = createOffsetsProxy(tiff, offsets);\n    }\n\n    checkProxies(tiff);\n    return pool ? load$2(tiff, new Pool()) : load$2(tiff);\n  });\n}\n\nfunction loadMultiscales(store) {\n  let path = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"\";\n  return __async(this, null, function* () {\n    const grp = yield openGroup(store, path);\n    const rootAttrs = yield grp.attrs.asObject();\n    let paths = [\"0\"];\n\n    if (\"multiscales\" in rootAttrs) {\n      const {\n        datasets\n      } = rootAttrs.multiscales[0];\n      paths = datasets.map(d => d.path);\n    }\n\n    const data = paths.map(path2 => grp.getItem(path2));\n    return {\n      data: yield Promise.all(data),\n      rootAttrs\n    };\n  });\n}\n\nfunction guessTileSize(arr) {\n  const interleaved = isInterleaved(arr.shape);\n  const [yChunk, xChunk] = arr.chunks.slice(interleaved ? -3 : -2);\n  const size = Math.min(yChunk, xChunk);\n  return prevPowerOf2(size);\n}\n\nfunction getIndexer(labels) {\n  const size = labels.length;\n  const dims = getDims(labels);\n  return sel => {\n    if (Array.isArray(sel)) {\n      return [...sel];\n    }\n\n    const selection = Array(size).fill(0);\n\n    for (const [key, value] of Object.entries(sel)) {\n      selection[dims(key)] = value;\n    }\n\n    return selection;\n  };\n}\n\nvar DTYPE_LOOKUP = {\n  u1: \"Uint8\",\n  u2: \"Uint16\",\n  u4: \"Uint32\",\n  f4: \"Float32\",\n  f8: \"Float64\",\n  i1: \"Int8\",\n  i2: \"Int16\",\n  i4: \"Int32\"\n};\nvar ZarrPixelSource = class {\n  constructor(data, labels, tileSize) {\n    __publicField(this, \"_data\");\n\n    __publicField(this, \"_indexer\");\n\n    __publicField(this, \"_readChunks\");\n\n    this.labels = labels;\n    this.tileSize = tileSize;\n    this._indexer = getIndexer(labels);\n    this._data = data;\n    const xChunkSize = data.chunks[this._xIndex];\n    const yChunkSize = data.chunks[this._xIndex - 1];\n    this._readChunks = tileSize === xChunkSize && tileSize === yChunkSize;\n  }\n\n  get shape() {\n    return this._data.shape;\n  }\n\n  get dtype() {\n    const suffix = this._data.dtype.slice(1);\n\n    if (!(suffix in DTYPE_LOOKUP)) {\n      throw Error(`Zarr dtype not supported, got ${suffix}.`);\n    }\n\n    return DTYPE_LOOKUP[suffix];\n  }\n\n  get _xIndex() {\n    const interleave = isInterleaved(this._data.shape);\n    return this._data.shape.length - (interleave ? 2 : 1);\n  }\n\n  _chunkIndex(selection, x, y) {\n    const sel = this._indexer(selection);\n\n    sel[this._xIndex] = x;\n    sel[this._xIndex - 1] = y;\n    return sel;\n  }\n\n  _getSlices(x, y) {\n    const {\n      height,\n      width\n    } = getImageSize(this);\n    const [xStart, xStop] = [x * this.tileSize, Math.min((x + 1) * this.tileSize, width)];\n    const [yStart, yStop] = [y * this.tileSize, Math.min((y + 1) * this.tileSize, height)];\n\n    if (xStart === xStop || yStart === yStop) {\n      throw new BoundsCheckError(\"Tile slice is zero-sized.\");\n    }\n\n    return [slice(xStart, xStop), slice(yStart, yStop)];\n  }\n\n  getRaster(_0) {\n    return __async(this, arguments, function* (_ref30) {\n      let {\n        selection\n      } = _ref30;\n\n      const sel = this._chunkIndex(selection, null, null);\n\n      const {\n        data,\n        shape\n      } = yield this._data.getRaw(sel);\n      const [height, width] = shape;\n      return {\n        data,\n        width,\n        height\n      };\n    });\n  }\n\n  getTile(props) {\n    return __async(this, null, function* () {\n      const {\n        x,\n        y,\n        selection,\n        signal\n      } = props;\n      let res;\n\n      if (this._readChunks) {\n        const sel = this._chunkIndex(selection, x, y);\n\n        res = yield this._data.getRawChunk(sel, {\n          storeOptions: {\n            signal\n          }\n        });\n      } else {\n        const [xSlice, ySlice] = this._getSlices(x, y);\n\n        const sel = this._chunkIndex(selection, xSlice, ySlice);\n\n        res = yield this._data.getRaw(sel);\n      }\n\n      const {\n        data,\n        shape: [height, width]\n      } = res;\n      return {\n        data,\n        width,\n        height\n      };\n    });\n  }\n\n  onTileError(err) {\n    if (!(err instanceof BoundsCheckError)) {\n      throw err;\n    }\n  }\n\n};\n\nfunction load(store) {\n  return __async(this, null, function* () {\n    const {\n      data,\n      rootAttrs\n    } = yield loadMultiscales(store);\n    const labels = [\"t\", \"c\", \"z\", \"y\", \"x\"];\n    const tileSize = guessTileSize(data[0]);\n    const pyramid = data.map(arr => new ZarrPixelSource(arr, labels, tileSize));\n    return {\n      data: pyramid,\n      metadata: rootAttrs\n    };\n  });\n}\n\nfunction loadOmeZarr(_0) {\n  return __async(this, arguments, function* (source) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    const store = new HTTPStore(source, options);\n\n    if ((options == null ? void 0 : options.type) !== \"multiscales\") {\n      throw Error(\"Only multiscale OME-Zarr is supported.\");\n    }\n\n    return load(store);\n  });\n} // src/components/spatial/constants.js\n\n\nvar GLOBAL_LABELS = [\"z\", \"t\"];\nvar DEFAULT_RASTER_DOMAIN_TYPE = \"Min/Max\";\nvar DEFAULT_RASTER_LAYER_PROPS = {\n  visible: true,\n  colormap: null,\n  opacity: 1,\n  domainType: DEFAULT_RASTER_DOMAIN_TYPE,\n  transparentColor: [0, 0, 0],\n  renderingMode: RENDERING_MODES.ADDITIVE,\n  use3d: false\n};\nvar DEFAULT_MOLECULES_LAYER = {\n  opacity: 1,\n  radius: 20,\n  visible: true\n};\nvar DEFAULT_CELLS_LAYER = {\n  opacity: 1,\n  radius: 50,\n  visible: true,\n  stroked: false\n};\nvar DEFAULT_NEIGHBORHOODS_LAYER = {\n  visible: false\n}; // src/app/state/coordination.js\n\nvar COORDINATION_TYPES = {\n  DATASET: \"dataset\",\n  EMBEDDING_TYPE: \"embeddingType\",\n  EMBEDDING_ZOOM: \"embeddingZoom\",\n  EMBEDDING_ROTATION: \"embeddingRotation\",\n  EMBEDDING_TARGET_X: \"embeddingTargetX\",\n  EMBEDDING_TARGET_Y: \"embeddingTargetY\",\n  EMBEDDING_TARGET_Z: \"embeddingTargetZ\",\n  EMBEDDING_CELL_SET_POLYGONS_VISIBLE: \"embeddingCellSetPolygonsVisible\",\n  EMBEDDING_CELL_SET_LABELS_VISIBLE: \"embeddingCellSetLabelsVisible\",\n  EMBEDDING_CELL_SET_LABEL_SIZE: \"embeddingCellSetLabelSize\",\n  EMBEDDING_CELL_RADIUS: \"embeddingCellRadius\",\n  EMBEDDING_CELL_OPACITY: \"embeddingCellOpacity\",\n  EMBEDDING_CELL_RADIUS_MODE: \"embeddingCellRadiusMode\",\n  EMBEDDING_CELL_OPACITY_MODE: \"embeddingCellOpacityMode\",\n  SPATIAL_ZOOM: \"spatialZoom\",\n  SPATIAL_ROTATION: \"spatialRotation\",\n  SPATIAL_TARGET_X: \"spatialTargetX\",\n  SPATIAL_TARGET_Y: \"spatialTargetY\",\n  SPATIAL_TARGET_Z: \"spatialTargetZ\",\n  SPATIAL_ROTATION_X: \"spatialRotationX\",\n  SPATIAL_ROTATION_Y: \"spatialRotationY\",\n  SPATIAL_ROTATION_Z: \"spatialRotationZ\",\n  SPATIAL_ROTATION_ORBIT: \"spatialRotationOrbit\",\n  SPATIAL_ORBIT_AXIS: \"spatialOrbitAxis\",\n  SPATIAL_AXIS_FIXED: \"spatialAxisFixed\",\n  HEATMAP_ZOOM_X: \"heatmapZoomX\",\n  HEATMAP_ZOOM_Y: \"heatmapZoomY\",\n  HEATMAP_TARGET_X: \"heatmapTargetX\",\n  HEATMAP_TARGET_Y: \"heatmapTargetY\",\n  CELL_FILTER: \"cellFilter\",\n  CELL_HIGHLIGHT: \"cellHighlight\",\n  CELL_SET_SELECTION: \"cellSetSelection\",\n  CELL_SET_HIGHLIGHT: \"cellSetHighlight\",\n  CELL_SET_COLOR: \"cellSetColor\",\n  GENE_FILTER: \"geneFilter\",\n  GENE_HIGHLIGHT: \"geneHighlight\",\n  GENE_SELECTION: \"geneSelection\",\n  GENE_EXPRESSION_COLORMAP: \"geneExpressionColormap\",\n  GENE_EXPRESSION_TRANSFORM: \"geneExpressionTransform\",\n  GENE_EXPRESSION_COLORMAP_RANGE: \"geneExpressionColormapRange\",\n  CELL_COLOR_ENCODING: \"cellColorEncoding\",\n  SPATIAL_RASTER_LAYERS: \"spatialRasterLayers\",\n  SPATIAL_CELLS_LAYER: \"spatialCellsLayer\",\n  SPATIAL_MOLECULES_LAYER: \"spatialMoleculesLayer\",\n  SPATIAL_NEIGHBORHOODS_LAYER: \"spatialNeighborhoodsLayer\",\n  GENOMIC_ZOOM_X: \"genomicZoomX\",\n  GENOMIC_ZOOM_Y: \"genomicZoomY\",\n  GENOMIC_TARGET_X: \"genomicTargetX\",\n  GENOMIC_TARGET_Y: \"genomicTargetY\",\n  ADDITIONAL_CELL_SETS: \"additionalCellSets\",\n  MOLECULE_HIGHLIGHT: \"moleculeHighlight\"\n};\nvar DEFAULT_COORDINATION_VALUES = {\n  [COORDINATION_TYPES.EMBEDDING_ZOOM]: null,\n  [COORDINATION_TYPES.EMBEDDING_ROTATION]: 0,\n  [COORDINATION_TYPES.EMBEDDING_TARGET_X]: null,\n  [COORDINATION_TYPES.EMBEDDING_TARGET_Y]: null,\n  [COORDINATION_TYPES.EMBEDDING_TARGET_Z]: 0,\n  [COORDINATION_TYPES.EMBEDDING_CELL_SET_POLYGONS_VISIBLE]: false,\n  [COORDINATION_TYPES.EMBEDDING_CELL_SET_LABELS_VISIBLE]: false,\n  [COORDINATION_TYPES.EMBEDDING_CELL_SET_LABEL_SIZE]: 14,\n  [COORDINATION_TYPES.EMBEDDING_CELL_RADIUS]: 1,\n  [COORDINATION_TYPES.EMBEDDING_CELL_RADIUS_MODE]: \"auto\",\n  [COORDINATION_TYPES.EMBEDDING_CELL_OPACITY]: 1,\n  [COORDINATION_TYPES.EMBEDDING_CELL_OPACITY_MODE]: \"auto\",\n  [COORDINATION_TYPES.SPATIAL_ZOOM]: null,\n  [COORDINATION_TYPES.SPATIAL_ROTATION]: 0,\n  [COORDINATION_TYPES.SPATIAL_TARGET_X]: null,\n  [COORDINATION_TYPES.SPATIAL_TARGET_Y]: null,\n  [COORDINATION_TYPES.SPATIAL_TARGET_Z]: null,\n  [COORDINATION_TYPES.SPATIAL_ROTATION_X]: null,\n  [COORDINATION_TYPES.SPATIAL_ROTATION_Y]: null,\n  [COORDINATION_TYPES.SPATIAL_ROTATION_Z]: null,\n  [COORDINATION_TYPES.SPATIAL_AXIS_FIXED]: false,\n  [COORDINATION_TYPES.SPATIAL_ROTATION_ORBIT]: 0,\n  [COORDINATION_TYPES.SPATIAL_ORBIT_AXIS]: \"Y\",\n  [COORDINATION_TYPES.SPATIAL_RASTER_LAYERS]: null,\n  [COORDINATION_TYPES.SPATIAL_CELLS_LAYER]: null,\n  [COORDINATION_TYPES.SPATIAL_MOLECULES_LAYER]: null,\n  [COORDINATION_TYPES.SPATIAL_NEIGHBORHOODS_LAYER]: null,\n  [COORDINATION_TYPES.HEATMAP_ZOOM_X]: 0,\n  [COORDINATION_TYPES.HEATMAP_ZOOM_Y]: 0,\n  [COORDINATION_TYPES.HEATMAP_TARGET_X]: 0,\n  [COORDINATION_TYPES.HEATMAP_TARGET_Y]: 0,\n  [COORDINATION_TYPES.GENE_EXPRESSION_COLORMAP]: \"plasma\",\n  [COORDINATION_TYPES.GENE_EXPRESSION_COLORMAP_RANGE]: [0, 1],\n  [COORDINATION_TYPES.GENE_EXPRESSION_TRANSFORM]: null,\n  [COORDINATION_TYPES.GENE_FILTER]: null,\n  [COORDINATION_TYPES.GENE_HIGHLIGHT]: null,\n  [COORDINATION_TYPES.GENE_SELECTION]: null,\n  [COORDINATION_TYPES.CELL_FILTER]: null,\n  [COORDINATION_TYPES.CELL_HIGHLIGHT]: null,\n  [COORDINATION_TYPES.CELL_SET_SELECTION]: null,\n  [COORDINATION_TYPES.CELL_SET_HIGHLIGHT]: null,\n  [COORDINATION_TYPES.CELL_SET_COLOR]: null,\n  [COORDINATION_TYPES.CELL_COLOR_ENCODING]: \"cellSetSelection\",\n  [COORDINATION_TYPES.GENOMIC_ZOOM_X]: 0,\n  [COORDINATION_TYPES.GENOMIC_ZOOM_Y]: 0,\n  [COORDINATION_TYPES.GENOMIC_TARGET_X]: 15499999995e-1,\n  [COORDINATION_TYPES.GENOMIC_TARGET_Y]: 15499999995e-1,\n  [COORDINATION_TYPES.ADDITIONAL_CELL_SETS]: null,\n  [COORDINATION_TYPES.MOLECULE_HIGHLIGHT]: null\n};\nvar AUTO_INDEPENDENT_COORDINATION_TYPES = [COORDINATION_TYPES.HEATMAP_ZOOM_X, COORDINATION_TYPES.HEATMAP_ZOOM_Y, COORDINATION_TYPES.HEATMAP_TARGET_X, COORDINATION_TYPES.HEATMAP_TARGET_Y, COORDINATION_TYPES.EMBEDDING_ZOOM, COORDINATION_TYPES.EMBEDDING_TARGET_X, COORDINATION_TYPES.EMBEDDING_TARGET_Y, COORDINATION_TYPES.EMBEDDING_TARGET_Z, COORDINATION_TYPES.EMBEDDING_CELL_SET_POLYGONS_VISIBLE, COORDINATION_TYPES.EMBEDDING_CELL_SET_LABELS_VISIBLE, COORDINATION_TYPES.EMBEDDING_CELL_SET_LABEL_SIZE, COORDINATION_TYPES.EMBEDDING_CELL_RADIUS, COORDINATION_TYPES.EMBEDDING_CELL_OPACITY];\nvar COMPONENT_COORDINATION_TYPES = {\n  scatterplot: [COORDINATION_TYPES.DATASET, COORDINATION_TYPES.EMBEDDING_TYPE, COORDINATION_TYPES.EMBEDDING_ZOOM, COORDINATION_TYPES.EMBEDDING_ROTATION, COORDINATION_TYPES.EMBEDDING_TARGET_X, COORDINATION_TYPES.EMBEDDING_TARGET_Y, COORDINATION_TYPES.EMBEDDING_TARGET_Z, COORDINATION_TYPES.EMBEDDING_CELL_SET_POLYGONS_VISIBLE, COORDINATION_TYPES.EMBEDDING_CELL_SET_LABELS_VISIBLE, COORDINATION_TYPES.EMBEDDING_CELL_SET_LABEL_SIZE, COORDINATION_TYPES.EMBEDDING_CELL_RADIUS, COORDINATION_TYPES.EMBEDDING_CELL_RADIUS_MODE, COORDINATION_TYPES.EMBEDDING_CELL_OPACITY, COORDINATION_TYPES.EMBEDDING_CELL_OPACITY_MODE, COORDINATION_TYPES.CELL_FILTER, COORDINATION_TYPES.CELL_HIGHLIGHT, COORDINATION_TYPES.CELL_SET_SELECTION, COORDINATION_TYPES.CELL_SET_HIGHLIGHT, COORDINATION_TYPES.CELL_SET_COLOR, COORDINATION_TYPES.GENE_HIGHLIGHT, COORDINATION_TYPES.GENE_SELECTION, COORDINATION_TYPES.GENE_EXPRESSION_COLORMAP, COORDINATION_TYPES.GENE_EXPRESSION_COLORMAP_RANGE, COORDINATION_TYPES.CELL_COLOR_ENCODING, COORDINATION_TYPES.ADDITIONAL_CELL_SETS],\n  spatial: [COORDINATION_TYPES.DATASET, COORDINATION_TYPES.SPATIAL_ZOOM, COORDINATION_TYPES.SPATIAL_ROTATION, COORDINATION_TYPES.SPATIAL_RASTER_LAYERS, COORDINATION_TYPES.SPATIAL_CELLS_LAYER, COORDINATION_TYPES.SPATIAL_MOLECULES_LAYER, COORDINATION_TYPES.SPATIAL_NEIGHBORHOODS_LAYER, COORDINATION_TYPES.SPATIAL_TARGET_X, COORDINATION_TYPES.SPATIAL_TARGET_Y, COORDINATION_TYPES.SPATIAL_TARGET_Z, COORDINATION_TYPES.SPATIAL_ROTATION_X, COORDINATION_TYPES.SPATIAL_ROTATION_Y, COORDINATION_TYPES.SPATIAL_ROTATION_Z, COORDINATION_TYPES.SPATIAL_ROTATION_ORBIT, COORDINATION_TYPES.SPATIAL_ORBIT_AXIS, COORDINATION_TYPES.SPATIAL_AXIS_FIXED, COORDINATION_TYPES.CELL_FILTER, COORDINATION_TYPES.CELL_HIGHLIGHT, COORDINATION_TYPES.CELL_SET_SELECTION, COORDINATION_TYPES.CELL_SET_HIGHLIGHT, COORDINATION_TYPES.CELL_SET_COLOR, COORDINATION_TYPES.GENE_HIGHLIGHT, COORDINATION_TYPES.GENE_SELECTION, COORDINATION_TYPES.GENE_EXPRESSION_COLORMAP, COORDINATION_TYPES.GENE_EXPRESSION_COLORMAP_RANGE, COORDINATION_TYPES.CELL_COLOR_ENCODING, COORDINATION_TYPES.ADDITIONAL_CELL_SETS, COORDINATION_TYPES.MOLECULE_HIGHLIGHT],\n  heatmap: [COORDINATION_TYPES.DATASET, COORDINATION_TYPES.HEATMAP_ZOOM_X, COORDINATION_TYPES.HEATMAP_ZOOM_Y, COORDINATION_TYPES.HEATMAP_TARGET_X, COORDINATION_TYPES.HEATMAP_TARGET_Y, COORDINATION_TYPES.CELL_FILTER, COORDINATION_TYPES.CELL_HIGHLIGHT, COORDINATION_TYPES.CELL_SET_SELECTION, COORDINATION_TYPES.CELL_SET_HIGHLIGHT, COORDINATION_TYPES.CELL_SET_COLOR, COORDINATION_TYPES.GENE_FILTER, COORDINATION_TYPES.GENE_HIGHLIGHT, COORDINATION_TYPES.GENE_SELECTION, COORDINATION_TYPES.GENE_EXPRESSION_COLORMAP, COORDINATION_TYPES.GENE_EXPRESSION_COLORMAP_RANGE, COORDINATION_TYPES.CELL_COLOR_ENCODING, COORDINATION_TYPES.ADDITIONAL_CELL_SETS],\n  cellSets: [COORDINATION_TYPES.DATASET, COORDINATION_TYPES.CELL_SET_SELECTION, COORDINATION_TYPES.CELL_SET_HIGHLIGHT, COORDINATION_TYPES.CELL_SET_COLOR, COORDINATION_TYPES.CELL_COLOR_ENCODING, COORDINATION_TYPES.ADDITIONAL_CELL_SETS],\n  cellSetSizes: [COORDINATION_TYPES.DATASET, COORDINATION_TYPES.CELL_SET_SELECTION, COORDINATION_TYPES.CELL_SET_HIGHLIGHT, COORDINATION_TYPES.CELL_SET_COLOR, COORDINATION_TYPES.ADDITIONAL_CELL_SETS],\n  cellSetExpression: [COORDINATION_TYPES.DATASET, COORDINATION_TYPES.GENE_SELECTION, COORDINATION_TYPES.GENE_EXPRESSION_TRANSFORM, COORDINATION_TYPES.CELL_SET_SELECTION, COORDINATION_TYPES.CELL_SET_HIGHLIGHT, COORDINATION_TYPES.CELL_SET_COLOR, COORDINATION_TYPES.ADDITIONAL_CELL_SETS],\n  status: [COORDINATION_TYPES.DATASET, COORDINATION_TYPES.CELL_HIGHLIGHT, COORDINATION_TYPES.GENE_HIGHLIGHT, COORDINATION_TYPES.CELL_SET_HIGHLIGHT, COORDINATION_TYPES.MOLECULE_HIGHLIGHT],\n  genes: [COORDINATION_TYPES.DATASET, COORDINATION_TYPES.GENE_FILTER, COORDINATION_TYPES.GENE_HIGHLIGHT, COORDINATION_TYPES.GENE_SELECTION, COORDINATION_TYPES.CELL_COLOR_ENCODING],\n  expressionHistogram: [COORDINATION_TYPES.DATASET, COORDINATION_TYPES.GENE_SELECTION],\n  layerController: [COORDINATION_TYPES.DATASET, COORDINATION_TYPES.SPATIAL_RASTER_LAYERS, COORDINATION_TYPES.SPATIAL_CELLS_LAYER, COORDINATION_TYPES.SPATIAL_MOLECULES_LAYER, COORDINATION_TYPES.SPATIAL_NEIGHBORHOODS_LAYER, COORDINATION_TYPES.SPATIAL_ZOOM, COORDINATION_TYPES.SPATIAL_TARGET_X, COORDINATION_TYPES.SPATIAL_TARGET_Y, COORDINATION_TYPES.SPATIAL_TARGET_Z, COORDINATION_TYPES.SPATIAL_ROTATION_X, COORDINATION_TYPES.SPATIAL_ROTATION_Y, COORDINATION_TYPES.SPATIAL_ROTATION_Z, COORDINATION_TYPES.SPATIAL_ROTATION_ORBIT, COORDINATION_TYPES.SPATIAL_ORBIT_AXIS],\n  higlass: [COORDINATION_TYPES.DATASET, COORDINATION_TYPES.GENOMIC_ZOOM_X, COORDINATION_TYPES.GENOMIC_ZOOM_Y, COORDINATION_TYPES.GENOMIC_TARGET_X, COORDINATION_TYPES.GENOMIC_TARGET_Y, COORDINATION_TYPES.GENE_FILTER, COORDINATION_TYPES.GENE_HIGHLIGHT, COORDINATION_TYPES.GENE_SELECTION],\n  genomicProfiles: [COORDINATION_TYPES.DATASET, COORDINATION_TYPES.GENOMIC_ZOOM_X, COORDINATION_TYPES.GENOMIC_ZOOM_Y, COORDINATION_TYPES.GENOMIC_TARGET_X, COORDINATION_TYPES.GENOMIC_TARGET_Y, COORDINATION_TYPES.GENE_FILTER, COORDINATION_TYPES.GENE_HIGHLIGHT, COORDINATION_TYPES.GENE_SELECTION, COORDINATION_TYPES.CELL_SET_SELECTION, COORDINATION_TYPES.CELL_SET_HIGHLIGHT, COORDINATION_TYPES.CELL_SET_COLOR, COORDINATION_TYPES.ADDITIONAL_CELL_SETS],\n  description: [COORDINATION_TYPES.DATASET, COORDINATION_TYPES.SPATIAL_RASTER_LAYERS]\n}; // src/components/data-hooks.js\n\nfunction warn(error, setWarning) {\n  setWarning(error.message);\n  console.warn(error.message);\n\n  if (error instanceof AbstractLoaderError) {\n    error.warnInConsole();\n  }\n}\n\nfunction initCoordinationSpace(values, setters, initialValues) {\n  if (!values || !setters) {\n    return;\n  }\n\n  Object.entries(values).forEach(_ref31 => {\n    let [coordinationType, value] = _ref31;\n    const setterName = `set${capitalize(coordinationType)}`;\n    const setterFunc = setters[setterName];\n    const initialValue = initialValues && initialValues[coordinationType];\n    const shouldInit = equal2(initialValue, DEFAULT_COORDINATION_VALUES[coordinationType]);\n\n    if (shouldInit && setterFunc) {\n      setterFunc(value);\n    }\n  });\n}\n\nfunction useDescription(loaders, dataset) {\n  const [description2, setDescription] = useState4();\n  useEffect2(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n\n    if (loaders[dataset].description) {\n      setDescription(loaders[dataset].description);\n    } else {\n      setDescription(null);\n    }\n  }, [loaders, dataset]);\n  return [description2];\n}\n\nfunction useCellsData(loaders, dataset, setItemIsReady, addUrl, isRequired, coordinationSetters, initialCoordinationValues) {\n  const [cells, setCells] = useState4({});\n  const [cellsCount, setCellsCount] = useState4(0);\n  const setWarning = useSetWarning();\n  useEffect2(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n\n    if (loaders[dataset].loaders.cells) {\n      loaders[dataset].loaders.cells.load().catch(e => warn(e, setWarning)).then(payload => {\n        if (!payload) return;\n        const {\n          data,\n          url,\n          coordinationValues\n        } = payload;\n        setCells(data);\n        setCellsCount(Object.keys(data).length);\n        addUrl(url, \"Cells\");\n\n        const coordinationValuesOrDefault = __spreadValues({\n          spatialCellsLayer: DEFAULT_CELLS_LAYER\n        }, coordinationValues);\n\n        initCoordinationSpace(coordinationValuesOrDefault, coordinationSetters, initialCoordinationValues);\n        setItemIsReady(\"cells\");\n      });\n    } else {\n      setCells({});\n      setCellsCount(0);\n\n      if (isRequired) {\n        warn(new props(dataset, \"cells\", null, null), setWarning);\n      } else {\n        setItemIsReady(\"cells\");\n      }\n    }\n  }, [loaders, dataset]);\n  return [cells, cellsCount];\n}\n\nfunction useCellSetsData(loaders, dataset, setItemIsReady, addUrl, isRequired, coordinationSetters, initialCoordinationValues) {\n  const [cellSets, setCellSets] = useState4();\n  const setWarning = useSetWarning();\n  useEffect2(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n\n    if (loaders[dataset].loaders[\"cell-sets\"]) {\n      loaders[dataset].loaders[\"cell-sets\"].load().catch(e => warn(e, setWarning)).then(payload => {\n        if (!payload) return;\n        const {\n          data,\n          url,\n          coordinationValues\n        } = payload;\n        setCellSets(data);\n        addUrl(url, \"Cell Sets\");\n        initCoordinationSpace(coordinationValues, coordinationSetters, initialCoordinationValues);\n        setItemIsReady(\"cell-sets\");\n      });\n    } else {\n      setCellSets(null);\n\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, \"cell-sets\", null, null), setWarning);\n      } else {\n        setItemIsReady(\"cell-sets\");\n      }\n    }\n  }, [loaders, dataset]);\n  return [cellSets];\n}\n\nfunction useExpressionMatrixData(loaders, dataset, setItemIsReady, addUrl, isRequired, coordinationSetters, initialCoordinationValues) {\n  const [expressionMatrix, setExpressionMatrix] = useState4();\n  const setWarning = useSetWarning();\n  useEffect2(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n\n    if (loaders[dataset].loaders[\"expression-matrix\"]) {\n      loaders[dataset].loaders[\"expression-matrix\"].load().catch(e => warn(e, setWarning)).then(payload => {\n        if (!payload) return;\n        const {\n          data,\n          url,\n          coordinationValues\n        } = payload;\n        const [attrs, arr] = data;\n        setExpressionMatrix({\n          cols: attrs.cols,\n          rows: attrs.rows,\n          matrix: arr.data\n        });\n        addUrl(url, \"Expression Matrix\");\n        initCoordinationSpace(coordinationValues, coordinationSetters, initialCoordinationValues);\n        setItemIsReady(\"expression-matrix\");\n      });\n    } else {\n      setExpressionMatrix(null);\n\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, \"expression-matrix\", null, null), setWarning);\n      } else {\n        setItemIsReady(\"expression-matrix\");\n      }\n    }\n  }, [loaders, dataset]);\n  return [expressionMatrix];\n}\n\nfunction useGeneSelection(loaders, dataset, setItemIsReady, isRequired, selection, setItemIsNotReady) {\n  const [geneData, setGeneData] = useState4();\n  const setWarning = useSetWarning();\n  useEffect2(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n\n    if (!selection) {\n      setItemIsReady(\"expression-matrix\");\n      return;\n    }\n\n    const loader = loaders[dataset].loaders[\"expression-matrix\"];\n\n    if (loader) {\n      setItemIsNotReady(\"expression-matrix\");\n      const implementsGeneSelection = typeof loader.loadGeneSelection === \"function\";\n\n      if (implementsGeneSelection) {\n        loaders[dataset].loaders[\"expression-matrix\"].loadGeneSelection({\n          selection\n        }).catch(e => warn(e, setWarning)).then(payload => {\n          if (!payload) return;\n          const {\n            data\n          } = payload;\n          setGeneData(data);\n          setItemIsReady(\"expression-matrix\");\n        });\n      } else {\n        loader.load().catch(e => warn(e, setWarning)).then(payload => {\n          if (!payload) return;\n          const {\n            data\n          } = payload;\n          const [attrs, {\n            data: matrix\n          }] = data;\n          const expressionDataForSelection = selection.map(sel => {\n            const geneIndex = attrs.cols.indexOf(sel);\n            const numGenes = attrs.cols.length;\n            const numCells = attrs.rows.length;\n            const expressionData = new Uint8Array(numCells);\n\n            for (let cellIndex = 0; cellIndex < numCells; cellIndex += 1) {\n              expressionData[cellIndex] = matrix[cellIndex * numGenes + geneIndex];\n            }\n\n            return expressionData;\n          });\n          setGeneData(expressionDataForSelection);\n          setItemIsReady(\"expression-matrix\");\n        });\n      }\n    } else {\n      setGeneData(null);\n\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, \"expression-matrix\", null, null), setWarning);\n      } else {\n        setItemIsReady(\"expression-matrix\");\n      }\n    }\n  }, [loaders, dataset, selection]);\n  return [geneData];\n}\n\nfunction useExpressionAttrs(loaders, dataset, setItemIsReady, addUrl, isRequired) {\n  const [attrs, setAttrs] = useState4();\n  const setWarning = useSetWarning();\n  useEffect2(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n\n    const loader = loaders[dataset].loaders[\"expression-matrix\"];\n\n    if (loader) {\n      const implementsLoadAttrs = typeof loader.loadAttrs === \"function\";\n\n      if (implementsLoadAttrs) {\n        loader.loadAttrs().catch(e => warn(e, setWarning)).then(payload => {\n          if (!payload) return;\n          const {\n            data,\n            url\n          } = payload;\n          setAttrs(data);\n          addUrl(url, \"Expression Matrix\");\n          setItemIsReady(\"expression-matrix\");\n        });\n      } else {\n        loader.load().catch(e => warn(e, setWarning)).then(payload => {\n          if (!payload) return;\n          const {\n            data,\n            url\n          } = payload;\n          setAttrs(data[0]);\n          addUrl(url, \"Expression Matrix\");\n          setItemIsReady(\"expression-matrix\");\n        });\n      }\n    } else {\n      setAttrs(null);\n\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, \"expression-matrix\", null, null), setWarning);\n      } else {\n        setItemIsReady(\"expression-matrix\");\n      }\n    }\n  }, [loaders, dataset]);\n  return [attrs];\n}\n\nfunction useMoleculesData(loaders, dataset, setItemIsReady, addUrl, isRequired, coordinationSetters, initialCoordinationValues) {\n  const [molecules, setMolecules] = useState4();\n  const [moleculesCount, setMoleculesCount] = useState4(0);\n  const [locationsCount, setLocationsCount] = useState4(0);\n  const setWarning = useSetWarning();\n  useEffect2(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n\n    if (loaders[dataset].loaders.molecules) {\n      loaders[dataset].loaders.molecules.load().catch(e => warn(e, setWarning)).then(payload => {\n        if (!payload) return;\n        const {\n          data,\n          url,\n          coordinationValues\n        } = payload;\n        setMolecules(data);\n        setMoleculesCount(Object.keys(data).length);\n        setLocationsCount(Object.values(data).map(l => l.length).reduce((a, b) => a + b, 0));\n        addUrl(url, \"Molecules\");\n\n        const coordinationValuesOrDefault = __spreadValues({\n          spatialMoleculesLayer: DEFAULT_MOLECULES_LAYER\n        }, coordinationValues);\n\n        initCoordinationSpace(coordinationValuesOrDefault, coordinationSetters, initialCoordinationValues);\n        setItemIsReady(\"molecules\");\n      });\n    } else {\n      setMolecules({});\n      setMoleculesCount(0);\n      setLocationsCount(0);\n\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, \"molecules\", null, null), setWarning);\n      } else {\n        setItemIsReady(\"molecules\");\n      }\n    }\n  }, [loaders, dataset]);\n  return [molecules, moleculesCount, locationsCount];\n}\n\nfunction useNeighborhoodsData(loaders, dataset, setItemIsReady, addUrl, isRequired, coordinationSetters, initialCoordinationValues) {\n  const [neighborhoods, setNeighborhoods] = useState4();\n  const setWarning = useSetWarning();\n  useEffect2(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n\n    if (loaders[dataset].loaders.neighborhoods) {\n      loaders[dataset].loaders.neighborhoods.load().catch(e => warn(e, setWarning)).then(payload => {\n        if (!payload) return;\n        const {\n          data,\n          url,\n          coordinationValues\n        } = payload;\n        setNeighborhoods(data);\n        addUrl(url, \"Neighborhoods\");\n\n        const coordinationValuesOrDefault = __spreadValues({\n          spatialNeighborhoodsLayer: DEFAULT_NEIGHBORHOODS_LAYER\n        }, coordinationValues);\n\n        initCoordinationSpace(coordinationValuesOrDefault, coordinationSetters, initialCoordinationValues);\n        setItemIsReady(\"neighborhoods\");\n      });\n    } else {\n      setNeighborhoods({});\n\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, \"neighborhoods\", null, null), setWarning);\n      } else {\n        setItemIsReady(\"neighborhoods\");\n      }\n    }\n  }, [loaders, dataset]);\n  return [neighborhoods];\n}\n\nfunction useRasterData(loaders, dataset, setItemIsReady, addUrl, isRequired, coordinationSetters, initialCoordinationValues) {\n  const [raster, setRaster] = useState4();\n  const [imageLayerLoaders, setImageLayerLoaders] = useState4([]);\n  const [imageLayerMeta, setImageLayerMeta] = useState4([]);\n  const setWarning = useSetWarning();\n  useEffect2(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n\n    if (loaders[dataset].loaders.raster) {\n      loaders[dataset].loaders.raster.load().catch(e => warn(e, setWarning)).then(payload => {\n        if (!payload) return;\n        const {\n          data,\n          url: urls,\n          coordinationValues\n        } = payload;\n        setRaster(data);\n        urls.forEach(_ref32 => {\n          let [url, name2] = _ref32;\n          addUrl(url, name2);\n        });\n        const {\n          loaders: nextImageLoaders,\n          meta: nextImageMeta\n        } = data;\n        setImageLayerLoaders(nextImageLoaders);\n        setImageLayerMeta(nextImageMeta);\n        initCoordinationSpace(coordinationValues, coordinationSetters, initialCoordinationValues);\n        setItemIsReady(\"raster\");\n      });\n    } else {\n      setImageLayerLoaders([]);\n      setImageLayerMeta([]);\n\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, \"raster\", null, null), setWarning);\n      } else {\n        setItemIsReady(\"raster\");\n      }\n    }\n  }, [loaders, dataset]);\n  return [raster, imageLayerLoaders, imageLayerMeta];\n}\n\nfunction useGenomicProfilesData(loaders, dataset, setItemIsReady, addUrl, isRequired, coordinationSetters, initialCoordinationValues) {\n  const [genomicProfilesAttrs, setGenomicProfilesAttrs] = useState4();\n  const setWarning = useSetWarning();\n  useEffect2(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n\n    if (loaders[dataset].loaders[\"genomic-profiles\"]) {\n      loaders[dataset].loaders[\"genomic-profiles\"].load().catch(e => warn(e, setWarning)).then(payload => {\n        if (!payload) return;\n        const {\n          data,\n          url,\n          coordinationValues\n        } = payload;\n        setGenomicProfilesAttrs(data);\n        addUrl(url);\n        initCoordinationSpace(coordinationValues, coordinationSetters, initialCoordinationValues);\n        setItemIsReady(\"genomic-profiles\");\n      });\n    } else {\n      setGenomicProfilesAttrs(null);\n\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, \"genomic-profiles\", null, null), setWarning);\n      } else {\n        setItemIsReady(\"genomic-profiles\");\n      }\n    }\n  }, [loaders, dataset]);\n  return [genomicProfilesAttrs];\n} // src/components/sets/cell-set-utils.js\n\n\nimport uuidv4 from \"uuid/v4\";\nimport isNil from \"lodash/isNil\";\nimport isEqual2 from \"lodash/isEqual\";\nimport range3 from \"lodash/range\";\nimport { featureCollection as turfFeatureCollection, point as turfPoint } from \"@turf/helpers\";\nimport centroid from \"@turf/centroid\";\nimport concaveman from \"concaveman\"; // src/components/sets/utils.js\n\nimport tinycolor from \"tinycolor2\";\nimport isEqual from \"lodash/isEqual\";\n\nfunction callbackOnKeyPress(event, key, callback) {\n  if (event.key === key) {\n    event.preventDefault();\n    callback();\n  }\n}\n\nfunction colorArrayToString(rgbArray) {\n  return tinycolor({\n    r: rgbArray[0],\n    g: rgbArray[1],\n    b: rgbArray[2]\n  }).toHexString();\n}\n\nfunction colorStringToArray(colorString) {\n  const colorObj = tinycolor(colorString).toRgb();\n  return [colorObj.r, colorObj.g, colorObj.b];\n}\n\nfunction getLevelTooltipText(i) {\n  if (i === 0) return \"Color by hierarchy\";\n\n  if (i <= 2) {\n    const subs = j => \"sub\".repeat(j);\n\n    return `Color by ${subs(i - 1)}cluster`;\n  }\n\n  return `Color by cluster level ${i}`;\n}\n\nfunction isEqualOrPrefix(targetPath, testPath) {\n  if (targetPath.length <= testPath.length) {\n    return isEqual(targetPath, testPath.slice(0, targetPath.length));\n  }\n\n  return false;\n}\n\nfunction tryRenamePath(targetPath, testPath, nextTargetPath) {\n  if (isEqualOrPrefix(targetPath, testPath)) {\n    return [...nextTargetPath, ...testPath.slice(nextTargetPath.length)];\n  }\n\n  return testPath;\n}\n\nvar PATH_SEP = \"___\";\n\nfunction pathToKey(path) {\n  return path.join(PATH_SEP);\n} // src/components/sets/cell-set-utils.js\n\n\nfunction generateKey() {\n  return uuidv4();\n}\n\nfunction nodeToSet(currNode) {\n  if (!currNode) {\n    return [];\n  }\n\n  if (!currNode.children) {\n    return currNode.set || [];\n  }\n\n  return currNode.children.flatMap(c => nodeToSet(c));\n}\n\nfunction nodeToHeight(currNode) {\n  let level = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n  if (!currNode.children) {\n    return level;\n  }\n\n  const newLevel = level + 1;\n  const childrenHeights = currNode.children.map(c => nodeToHeight(c, newLevel));\n  return Math.max(...childrenHeights, newLevel);\n}\n\nfunction getNodeLength(currNode) {\n  var _a2;\n\n  if (!currNode) {\n    return 0;\n  }\n\n  if (!currNode.children) {\n    return ((_a2 = currNode.set) == null ? void 0 : _a2.length) || 0;\n  }\n\n  return currNode.children.reduce((acc, curr) => acc + getNodeLength(curr), 0);\n}\n\nfunction nodeFindNodeByNamePath(node, path, currLevelIndex) {\n  const currNodeName = path[currLevelIndex];\n\n  if (node.name === currNodeName) {\n    if (currLevelIndex === path.length - 1) {\n      return node;\n    }\n\n    if (node.children) {\n      const foundNodes = node.children.map(child => nodeFindNodeByNamePath(child, path, currLevelIndex + 1)).filter(Boolean);\n\n      if (foundNodes.length === 1) {\n        return foundNodes[0];\n      }\n    }\n  }\n\n  return null;\n}\n\nfunction treeFindNodeByNamePath(currTree, targetNamePath) {\n  const foundNodes = currTree.tree.map(levelZeroNode => nodeFindNodeByNamePath(levelZeroNode, targetNamePath, 0)).filter(Boolean);\n\n  if (foundNodes.length === 1) {\n    return foundNodes[0];\n  }\n\n  return null;\n}\n\nfunction nodeTransform(node, predicate, transform, transformedPaths, currPath) {\n  let newPath;\n\n  if (!currPath) {\n    newPath = [node.name];\n  } else {\n    newPath = [...currPath];\n  }\n\n  if (predicate(node, newPath)) {\n    transformedPaths.push(newPath);\n    return transform(node, newPath);\n  }\n\n  if (node.children) {\n    return __spreadProps(__spreadValues({}, node), {\n      children: node.children.map(child => nodeTransform(child, predicate, transform, transformedPaths, newPath.concat([child.name])))\n    });\n  }\n\n  return node;\n}\n\nfunction nodeTransformAll(node, predicate, transform, transformedPaths, currPath) {\n  let newPath;\n\n  if (!currPath) {\n    newPath = [node.name];\n  } else {\n    newPath = [...currPath];\n  }\n\n  let newNode = node;\n\n  if (predicate(node, newPath)) {\n    transformedPaths.push(newPath);\n    newNode = transform(node, newPath);\n  }\n\n  if (node.children) {\n    return __spreadProps(__spreadValues({}, newNode), {\n      children: newNode.children.map(child => nodeTransformAll(child, predicate, transform, transformedPaths, newPath.concat([child.name])))\n    });\n  }\n\n  return newNode;\n}\n\nfunction nodeAppendChild(currNode, newChild) {\n  return __spreadProps(__spreadValues({}, currNode), {\n    children: [...currNode.children, newChild]\n  });\n}\n\nfunction nodePrependChild(currNode, newChild) {\n  return __spreadProps(__spreadValues({}, currNode), {\n    children: [newChild, ...currNode.children]\n  });\n}\n\nfunction nodeInsertChild(currNode, newChild, insertIndex) {\n  const newChildren = Array.from(currNode.children);\n  newChildren.splice(insertIndex, 0, newChild);\n  return __spreadProps(__spreadValues({}, currNode), {\n    children: newChildren\n  });\n}\n\nfunction treeToUnion(currTree, checkedPaths) {\n  const nodes = checkedPaths.map(path => treeFindNodeByNamePath(currTree, path));\n  const nodeSets = nodes.map(node => nodeToSet(node).map(_ref33 => {\n    let [cellId] = _ref33;\n    return cellId;\n  }));\n  return nodeSets.reduce((a, h) => a.concat(h.filter(hEl => !a.includes(hEl))), nodeSets[0] || []);\n}\n\nfunction treeToIntersection(currTree, checkedPaths) {\n  const nodes = checkedPaths.map(path => treeFindNodeByNamePath(currTree, path));\n  const nodeSets = nodes.map(node => nodeToSet(node).map(_ref34 => {\n    let [cellId] = _ref34;\n    return cellId;\n  }));\n  return nodeSets.reduce((a, h) => h.filter(hEl => a.includes(hEl)), nodeSets[0] || []);\n}\n\nfunction treeToComplement(currTree, checkedPaths, items2) {\n  const primaryUnion = treeToUnion(currTree, checkedPaths);\n  return items2.filter(el => !primaryUnion.includes(el));\n}\n\nfunction nodeToLevelDescendantNamePaths(node, level, prevPath) {\n  let stopEarly = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n\n  if (!node.children) {\n    if (!stopEarly) {\n      return null;\n    }\n\n    return [[...prevPath, node.name]];\n  }\n\n  if (level === 0) {\n    return [[...prevPath, node.name]];\n  }\n\n  return node.children.flatMap(c => nodeToLevelDescendantNamePaths(c, level - 1, [...prevPath, node.name], stopEarly)).filter(Boolean);\n}\n\nfunction treeExport(currTree, datatype) {\n  return {\n    version: HIERARCHICAL_SCHEMAS[datatype].latestVersion,\n    datatype,\n    tree: currTree.tree\n  };\n}\n\nfunction treeExportLevelZeroNode(currTree, nodePath, datatype, cellSetColors, theme) {\n  const node = treeFindNodeByNamePath(currTree, nodePath);\n  const nodeWithColors = nodeTransformAll(node, () => true, (n, nPath) => {\n    var _a2, _b2;\n\n    const nodeColor = (_b2 = (_a2 = cellSetColors == null ? void 0 : cellSetColors.find(c => isEqual2(c.path, nPath))) == null ? void 0 : _a2.color) != null ? _b2 : getDefaultColor(theme);\n    return __spreadProps(__spreadValues({}, n), {\n      color: nodeColor.slice(0, 3)\n    });\n  }, []);\n\n  const treeWithOneLevelZeroNode = __spreadProps(__spreadValues({}, currTree), {\n    tree: [nodeWithColors]\n  });\n\n  return {\n    treeToExport: treeExport(treeWithOneLevelZeroNode, datatype),\n    nodeName: node.name\n  };\n}\n\nfunction treeExportSet(currTree, nodePath) {\n  const node = treeFindNodeByNamePath(currTree, nodePath);\n  return {\n    setToExport: nodeToSet(node),\n    nodeName: node.name\n  };\n}\n\nfunction treeInitialize(datatype) {\n  return {\n    version: HIERARCHICAL_SCHEMAS[datatype].latestVersion,\n    datatype,\n    tree: []\n  };\n}\n\nfunction nodeToRenderProps(node, path, cellSetColor) {\n  var _a2;\n\n  const level = path.length - 1;\n  return {\n    title: node.name,\n    nodeKey: pathToKey(path),\n    path,\n    size: getNodeLength(node),\n    color: (_a2 = cellSetColor == null ? void 0 : cellSetColor.find(d => isEqual2(d.path, path))) == null ? void 0 : _a2.color,\n    level,\n    isLeaf: (!node.children || node.children.length === 0) && Boolean(node.set),\n    height: nodeToHeight(node)\n  };\n}\n\nfunction colorMixWithUncertainty(originalColor, p) {\n  let mixingColor = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [128, 128, 128];\n  return [(originalColor[0] - mixingColor[0]) * p + mixingColor[0], (originalColor[1] - mixingColor[1]) * p + mixingColor[1], (originalColor[2] - mixingColor[2]) * p + mixingColor[2]];\n}\n\nfunction treeToCellColorsBySetNames(currTree, selectedNamePaths, cellSetColor, theme) {\n  let cellColorsArray = [];\n  selectedNamePaths.forEach(setNamePath => {\n    var _a2;\n\n    const node = treeFindNodeByNamePath(currTree, setNamePath);\n\n    if (node) {\n      const nodeSet = nodeToSet(node);\n      const nodeColor = ((_a2 = cellSetColor == null ? void 0 : cellSetColor.find(d => isEqual2(d.path, setNamePath))) == null ? void 0 : _a2.color) || getDefaultColor(theme);\n      cellColorsArray = [...cellColorsArray, ...nodeSet.map(_ref35 => {\n        let [cellId, prob] = _ref35;\n        return [cellId, isNil(prob) ? nodeColor : colorMixWithUncertainty(nodeColor, prob)];\n      })];\n    }\n  });\n  return new Map(cellColorsArray);\n}\n\nfunction treeToObjectsBySetNames(currTree, selectedNamePaths, setColor, theme) {\n  var _a2;\n\n  let cellsArray = [];\n\n  for (let i = 0; i < selectedNamePaths.length; i += 1) {\n    const setNamePath = selectedNamePaths[i];\n    const node = treeFindNodeByNamePath(currTree, setNamePath);\n\n    if (node) {\n      const nodeSet = nodeToSet(node);\n      const nodeColor = ((_a2 = setColor == null ? void 0 : setColor.find(d => isEqual2(d.path, setNamePath))) == null ? void 0 : _a2.color) || getDefaultColor(theme);\n      cellsArray = cellsArray.concat(nodeSet.map(_ref36 => {\n        let [cellId] = _ref36;\n        return {\n          obsId: cellId,\n          name: node.name,\n          color: nodeColor\n        };\n      }));\n    }\n  }\n\n  return cellsArray;\n}\n\nfunction treeToCellPolygonsBySetNames(currTree, cells, mapping, selectedNamePaths, cellSetColor, theme) {\n  const cellSetPolygons = [];\n  selectedNamePaths.forEach(setNamePath => {\n    var _a2;\n\n    const node = treeFindNodeByNamePath(currTree, setNamePath);\n\n    if (node) {\n      const nodeSet = nodeToSet(node);\n      const nodeColor = ((_a2 = cellSetColor == null ? void 0 : cellSetColor.find(d => isEqual2(d.path, setNamePath))) == null ? void 0 : _a2.color) || getDefaultColor(theme);\n      const cellPositions = nodeSet.map(_ref37 => {\n        let [cellId] = _ref37;\n\n        var _a3, _b2;\n\n        return [(_a3 = cells[cellId]) == null ? void 0 : _a3.mappings[mapping][0], -((_b2 = cells[cellId]) == null ? void 0 : _b2.mappings[mapping][1])];\n      }).filter(cell => cell.every(i => typeof i === \"number\"));\n\n      if (cellPositions.length > 2) {\n        const points = turfFeatureCollection(cellPositions.map(turfPoint));\n        const concavity = Infinity;\n        const hullCoords = concaveman(cellPositions, concavity);\n\n        if (hullCoords) {\n          const centroidCoords = centroid(points).geometry.coordinates;\n          cellSetPolygons.push({\n            path: setNamePath,\n            name: setNamePath[setNamePath.length - 1],\n            hull: hullCoords,\n            color: nodeColor,\n            centroid: centroidCoords\n          });\n        }\n      }\n    }\n  });\n  return cellSetPolygons;\n}\n\nfunction treeToSetSizesBySetNames(currTree, selectedNamePaths, setColor, theme) {\n  const sizes = [];\n  selectedNamePaths.forEach(setNamePath => {\n    var _a2;\n\n    const node = treeFindNodeByNamePath(currTree, setNamePath);\n\n    if (node) {\n      const nodeSet = nodeToSet(node);\n      const nodeColor = ((_a2 = setColor.find(d => isEqual2(d.path, setNamePath))) == null ? void 0 : _a2.color) || getDefaultColor(theme);\n      sizes.push({\n        key: generateKey(),\n        name: node.name,\n        size: nodeSet.length,\n        color: nodeColor\n      });\n    }\n  });\n  return sizes;\n}\n\nfunction filterNode(node, prevPath, filterPath) {\n  if (isEqual2([...prevPath, node.name], filterPath)) {\n    return null;\n  }\n\n  if (!node.children) {\n    return node;\n  }\n\n  return __spreadProps(__spreadValues({}, node), {\n    children: node.children.map(c => filterNode(c, [...prevPath, node.name], filterPath)).filter(Boolean)\n  });\n}\n\nfunction treeToExpectedCheckedLevel(currTree, checkedPaths) {\n  let result = null;\n\n  if (currTree) {\n    currTree.tree.forEach(lzn => {\n      const levelZeroPath = [lzn.name];\n      const height = nodeToHeight(lzn);\n      range3(height).forEach(i => {\n        const levelIndex = i + 1;\n        const levelNodePaths = nodeToLevelDescendantNamePaths(lzn, levelIndex, [], true);\n\n        if (isEqual2(levelNodePaths, checkedPaths)) {\n          result = {\n            levelZeroPath,\n            levelIndex\n          };\n        }\n      });\n    });\n  }\n\n  return result;\n}\n\nfunction treesConflict(cellSets, testCellSets) {\n  const paths = [];\n  const testPaths = [];\n  let hasConflict = false;\n\n  function getPaths(node, prevPath) {\n    paths.push([...prevPath, node.name]);\n\n    if (node.children) {\n      node.children.forEach(c => getPaths(c, [...prevPath, node.name]));\n    }\n  }\n\n  cellSets.tree.forEach(lzn => getPaths(lzn, []));\n\n  function getTestPaths(node, prevPath) {\n    testPaths.push([...prevPath, node.name]);\n\n    if (node.children) {\n      node.children.forEach(c => getPaths(c, [...prevPath, node.name]));\n    }\n  }\n\n  testCellSets.tree.forEach(lzn => getTestPaths(lzn, []));\n  testPaths.forEach(testPath => {\n    if (paths.find(p => isEqual2(p, testPath))) {\n      hasConflict = true;\n    }\n  });\n  return hasConflict;\n}\n\nfunction initializeCellSetColor(cellSets, cellSetColor) {\n  const nextCellSetColor = [...(cellSetColor || [])];\n  const nodeCountPerTreePerLevel = cellSets.tree.map(tree => Array.from({\n    length: nodeToHeight(tree) + 1\n  }).fill(0));\n\n  function processNode2(node, prevPath, hierarchyLevel, treeIndex) {\n    const index = nodeCountPerTreePerLevel[treeIndex][hierarchyLevel];\n    const nodePath = [...prevPath, node.name];\n    const nodeColor = nextCellSetColor.find(d => isEqual2(d.path, nodePath));\n\n    if (!nodeColor) {\n      nextCellSetColor.push({\n        path: nodePath,\n        color: PALETTE[index % PALETTE.length]\n      });\n    }\n\n    nodeCountPerTreePerLevel[treeIndex][hierarchyLevel] += 1;\n\n    if (node.children) {\n      node.children.forEach(c => processNode2(c, nodePath, hierarchyLevel + 1, treeIndex));\n    }\n  }\n\n  cellSets.tree.forEach((lzn, treeIndex) => processNode2(lzn, [], 0, treeIndex));\n  return nextCellSetColor;\n}\n\nfunction getCellSetPolygons(params) {\n  const {\n    cells,\n    mapping,\n    cellSets,\n    cellSetSelection,\n    cellSetColor,\n    theme\n  } = params;\n\n  if (cellSetSelection && cellSetSelection.length > 0 && cellSets && cells) {\n    return treeToCellPolygonsBySetNames(cellSets, cells, mapping, cellSetSelection, cellSetColor, theme);\n  }\n\n  return [];\n} // src/components/interpolate-colors.js\n\n\nvar schemeRdBu = [[103, 0, 31], [178, 24, 43], [214, 96, 77], [244, 165, 130], [253, 219, 199], [247, 247, 247], [209, 229, 240], [146, 197, 222], [67, 147, 195], [33, 102, 172], [5, 48, 97]];\nvar schemePlasma = [[13, 8, 135], [16, 7, 136], [19, 7, 137], [22, 7, 138], [25, 6, 140], [27, 6, 141], [29, 6, 142], [32, 6, 143], [34, 6, 144], [36, 6, 145], [38, 5, 145], [40, 5, 146], [42, 5, 147], [44, 5, 148], [46, 5, 149], [47, 5, 150], [49, 5, 151], [51, 5, 151], [53, 4, 152], [55, 4, 153], [56, 4, 154], [58, 4, 154], [60, 4, 155], [62, 4, 156], [63, 4, 156], [65, 4, 157], [67, 3, 158], [68, 3, 158], [70, 3, 159], [72, 3, 159], [73, 3, 160], [75, 3, 161], [76, 2, 161], [78, 2, 162], [80, 2, 162], [81, 2, 163], [83, 2, 163], [85, 2, 164], [86, 1, 164], [88, 1, 164], [89, 1, 165], [91, 1, 165], [92, 1, 166], [94, 1, 166], [96, 1, 166], [97, 0, 167], [99, 0, 167], [100, 0, 167], [102, 0, 167], [103, 0, 168], [105, 0, 168], [106, 0, 168], [108, 0, 168], [110, 0, 168], [111, 0, 168], [113, 0, 168], [114, 1, 168], [116, 1, 168], [117, 1, 168], [119, 1, 168], [120, 1, 168], [122, 2, 168], [123, 2, 168], [125, 3, 168], [126, 3, 168], [128, 4, 168], [129, 4, 167], [131, 5, 167], [132, 5, 167], [134, 6, 166], [135, 7, 166], [136, 8, 166], [138, 9, 165], [139, 10, 165], [141, 11, 165], [142, 12, 164], [143, 13, 164], [145, 14, 163], [146, 15, 163], [148, 16, 162], [149, 17, 161], [150, 19, 161], [152, 20, 160], [153, 21, 159], [154, 22, 159], [156, 23, 158], [157, 24, 157], [158, 25, 157], [160, 26, 156], [161, 27, 155], [162, 29, 154], [163, 30, 154], [165, 31, 153], [166, 32, 152], [167, 33, 151], [168, 34, 150], [170, 35, 149], [171, 36, 148], [172, 38, 148], [173, 39, 147], [174, 40, 146], [176, 41, 145], [177, 42, 144], [178, 43, 143], [179, 44, 142], [180, 46, 141], [181, 47, 140], [182, 48, 139], [183, 49, 138], [184, 50, 137], [186, 51, 136], [187, 52, 136], [188, 53, 135], [189, 55, 134], [190, 56, 133], [191, 57, 132], [192, 58, 131], [193, 59, 130], [194, 60, 129], [195, 61, 128], [196, 62, 127], [197, 64, 126], [198, 65, 125], [199, 66, 124], [200, 67, 123], [201, 68, 122], [202, 69, 122], [203, 70, 121], [204, 71, 120], [204, 73, 119], [205, 74, 118], [206, 75, 117], [207, 76, 116], [208, 77, 115], [209, 78, 114], [210, 79, 113], [211, 81, 113], [212, 82, 112], [213, 83, 111], [213, 84, 110], [214, 85, 109], [215, 86, 108], [216, 87, 107], [217, 88, 106], [218, 90, 106], [218, 91, 105], [219, 92, 104], [220, 93, 103], [221, 94, 102], [222, 95, 101], [222, 97, 100], [223, 98, 99], [224, 99, 99], [225, 100, 98], [226, 101, 97], [226, 102, 96], [227, 104, 95], [228, 105, 94], [229, 106, 93], [229, 107, 93], [230, 108, 92], [231, 110, 91], [231, 111, 90], [232, 112, 89], [233, 113, 88], [233, 114, 87], [234, 116, 87], [235, 117, 86], [235, 118, 85], [236, 119, 84], [237, 121, 83], [237, 122, 82], [238, 123, 81], [239, 124, 81], [239, 126, 80], [240, 127, 79], [240, 128, 78], [241, 129, 77], [241, 131, 76], [242, 132, 75], [243, 133, 75], [243, 135, 74], [244, 136, 73], [244, 137, 72], [245, 139, 71], [245, 140, 70], [246, 141, 69], [246, 143, 68], [247, 144, 68], [247, 145, 67], [247, 147, 66], [248, 148, 65], [248, 149, 64], [249, 151, 63], [249, 152, 62], [249, 154, 62], [250, 155, 61], [250, 156, 60], [250, 158, 59], [251, 159, 58], [251, 161, 57], [251, 162, 56], [252, 163, 56], [252, 165, 55], [252, 166, 54], [252, 168, 53], [252, 169, 52], [253, 171, 51], [253, 172, 51], [253, 174, 50], [253, 175, 49], [253, 177, 48], [253, 178, 47], [253, 180, 47], [253, 181, 46], [254, 183, 45], [254, 184, 44], [254, 186, 44], [254, 187, 43], [254, 189, 42], [254, 190, 42], [254, 192, 41], [253, 194, 41], [253, 195, 40], [253, 197, 39], [253, 198, 39], [253, 200, 39], [253, 202, 38], [253, 203, 38], [252, 205, 37], [252, 206, 37], [252, 208, 37], [252, 210, 37], [251, 211, 36], [251, 213, 36], [251, 215, 36], [250, 216, 36], [250, 218, 36], [249, 220, 36], [249, 221, 37], [248, 223, 37], [248, 225, 37], [247, 226, 37], [247, 228, 37], [246, 230, 38], [246, 232, 38], [245, 233, 38], [245, 235, 39], [244, 237, 39], [243, 238, 39], [243, 240, 39], [242, 242, 39], [241, 244, 38], [241, 245, 37], [240, 247, 36], [240, 249, 33]];\n\nfunction rgbSpline(spline) {\n  return colors => {\n    const n = colors.length;\n    let r = new Array(n);\n    let g = new Array(n);\n    let b = new Array(n);\n    let i;\n    let color;\n\n    for (i = 0; i < n; ++i) {\n      color = [colors[i][0], colors[i][1], colors[i][2]];\n      r[i] = color[0] || 0;\n      g[i] = color[1] || 0;\n      b[i] = color[2] || 0;\n    }\n\n    r = spline(r);\n    g = spline(g);\n    b = spline(b);\n    return t => [r(t), g(t), b(t)];\n  };\n}\n\nfunction basis(values) {\n  function innerBasis(t1, v0, v1, v2, v3) {\n    const t2 = t1 * t1;\n    const t3 = t2 * t1;\n    return ((1 - 3 * t1 + 3 * t2 - t3) * v0 + (4 - 6 * t2 + 3 * t3) * v1 + (1 + 3 * t1 + 3 * t2 - 3 * t3) * v2 + t3 * v3) / 6;\n  }\n\n  const n = values.length - 1;\n  return t => {\n    const i = t <= 0 ? t = 0 : t >= 1 ? (t = 1, n - 1) : Math.floor(t * n);\n    const v1 = values[i];\n    const v2 = values[i + 1];\n    const v0 = i > 0 ? values[i - 1] : 2 * v1 - v2;\n    const v3 = i < n - 1 ? values[i + 2] : 2 * v2 - v1;\n    return innerBasis((t - i / n) * n, v0, v1, v2, v3);\n  };\n}\n\nvar interpolateRgbBasis = rgbSpline(basis);\n\nfunction interpolateSequentialMulti(range10) {\n  const n = range10.length;\n  return t => range10[Math.max(0, Math.min(n - 1, Math.floor(t * n)))];\n}\n\nvar interpolateRdBu = interpolateRgbBasis(schemeRdBu);\nvar interpolatePlasma = interpolateSequentialMulti(schemePlasma);\n\nfunction getCellColors(params) {\n  const {\n    cellColorEncoding,\n    expressionData,\n    cellSets,\n    cellSetSelection,\n    cellSetColor,\n    expressionDataAttrs,\n    theme\n  } = params;\n\n  if (cellColorEncoding === \"geneSelection\" && expressionData && expressionDataAttrs) {\n    const geneExpColormap = interpolatePlasma;\n    const colors = new Map();\n\n    for (let i = 0; i < expressionData.length; i += 1) {\n      const value = expressionData[i];\n      const cellColor = geneExpColormap(value / 255);\n      colors.set(expressionDataAttrs.rows[i], cellColor);\n    }\n\n    return colors;\n  }\n\n  if (cellColorEncoding === \"cellSetSelection\" && cellSetSelection && cellSets) {\n    return treeToCellColorsBySetNames(cellSets, cellSetSelection, cellSetColor, theme);\n  }\n\n  return new Map();\n} // src/components/heatmap/Heatmap.js\n\n\nimport React6, { useRef as useRef4, useState as useState5, useCallback as useCallback3, useMemo as useMemo4, useEffect as useEffect3, useReducer, forwardRef } from \"react\";\nimport uuidv42 from \"uuid/v4\";\nimport DeckGL2 from \"deck.gl\";\nimport { OrthographicView as OrthographicView2 } from \"@deck.gl/core\";\nimport range5 from \"lodash/range\";\nimport clamp2 from \"lodash/clamp\";\nimport isEqual3 from \"lodash/isEqual\";\nimport { max } from \"d3-array\"; // src/layers/HeatmapCompositeTextLayer.js\n\nimport { COORDINATE_SYSTEM as COORDINATE_SYSTEM3, CompositeLayer as CompositeLayer2 } from \"@deck.gl/core\";\nimport { TextLayer as TextLayer2 } from \"@deck.gl/layers\"; // src/layers/heatmap-constants.js\n\nimport GL2 from \"@luma.gl/constants\";\nvar TILE_SIZE = 2048;\nvar MIN_ROW_AGG = 1;\nvar MAX_ROW_AGG = 16;\nvar COLOR_BAR_SIZE = 20;\nvar AXIS_LABEL_TEXT_SIZE = 9;\nvar AXIS_TITLE_TEXT_SIZE = 15;\nvar AXIS_MIN_SIZE = 10;\nvar AXIS_MAX_SIZE = 90;\nvar AXIS_MARGIN = 3;\nvar THEME_TO_TEXT_COLOR = {\n  dark: [224, 224, 224],\n  light: [64, 64, 64]\n};\nvar AXIS_FONT_FAMILY = \"-apple-system, 'Helvetica Neue', Arial, sans-serif\";\nvar PIXELATED_TEXTURE_PARAMETERS = {\n  [GL2.TEXTURE_MIN_FILTER]: GL2.NEAREST,\n  [GL2.TEXTURE_MAG_FILTER]: GL2.NEAREST,\n  [GL2.TEXTURE_WRAP_S]: GL2.CLAMP_TO_EDGE,\n  [GL2.TEXTURE_WRAP_T]: GL2.CLAMP_TO_EDGE\n}; // src/layers/HeatmapCompositeTextLayer.js\n\nvar HeatmapCompositeTextLayer = class extends CompositeLayer2 {\n  _renderAxisTopLayers() {\n    const {\n      axisTopLabelData,\n      matrixLeft,\n      width,\n      matrixWidth,\n      viewWidth,\n      theme,\n      targetX,\n      targetY,\n      axisTopTitle,\n      cellWidth,\n      axisOffsetTop,\n      scaleFactor\n    } = this.props;\n    const showAxisTopLabels = cellWidth >= AXIS_LABEL_TEXT_SIZE;\n    const axisLabelTop = targetY + (axisOffsetTop - AXIS_MARGIN) / 2 / scaleFactor;\n    return [new TextLayer2({\n      id: \"axisTopLabels\",\n      coordinateSystem: COORDINATE_SYSTEM3.CARTESIAN,\n      data: axisTopLabelData,\n      getText: d => d[1],\n      getPosition: d => [matrixLeft + (d[0] + 0.5) / width * matrixWidth, axisLabelTop],\n      getTextAnchor: \"start\",\n      getColor: () => THEME_TO_TEXT_COLOR[theme],\n      getSize: showAxisTopLabels ? AXIS_LABEL_TEXT_SIZE : 0,\n      getAngle: 75,\n      fontFamily: AXIS_FONT_FAMILY,\n      updateTriggers: {\n        getPosition: [axisLabelTop, matrixLeft, matrixWidth, viewWidth],\n        getSize: [showAxisTopLabels],\n        getColor: [theme]\n      }\n    }), new TextLayer2({\n      id: \"axisTopTitle\",\n      coordinateSystem: COORDINATE_SYSTEM3.CARTESIAN,\n      data: [{\n        title: axisTopTitle\n      }],\n      getText: d => d.title,\n      getPosition: [targetX, targetY],\n      getTextAnchor: \"middle\",\n      getColor: () => THEME_TO_TEXT_COLOR[theme],\n      getSize: !showAxisTopLabels ? AXIS_TITLE_TEXT_SIZE : 0,\n      getAngle: 0,\n      fontFamily: AXIS_FONT_FAMILY,\n      updateTriggers: {\n        getSize: [showAxisTopLabels],\n        getColor: [theme]\n      }\n    })];\n  }\n\n  _renderAxisLeftLayers() {\n    const {\n      axisLeftLabelData,\n      matrixTop,\n      height,\n      matrixHeight,\n      viewHeight,\n      theme,\n      axisLeftTitle,\n      targetX,\n      targetY,\n      cellHeight,\n      axisOffsetLeft,\n      scaleFactor\n    } = this.props;\n    const showAxisLeftLabels = cellHeight >= AXIS_LABEL_TEXT_SIZE;\n    const axisLabelLeft = targetX + (axisOffsetLeft - AXIS_MARGIN) / 2 / scaleFactor;\n    return [new TextLayer2({\n      id: \"axisLeftLabels\",\n      coordinateSystem: COORDINATE_SYSTEM3.CARTESIAN,\n      data: axisLeftLabelData,\n      getText: d => d[1],\n      getPosition: d => [axisLabelLeft, matrixTop + (d[0] + 0.5) / height * matrixHeight],\n      getTextAnchor: \"end\",\n      getColor: () => THEME_TO_TEXT_COLOR[theme],\n      getSize: showAxisLeftLabels ? AXIS_LABEL_TEXT_SIZE : 0,\n      getAngle: 0,\n      fontFamily: AXIS_FONT_FAMILY,\n      updateTriggers: {\n        getPosition: [axisLabelLeft, matrixTop, matrixHeight, viewHeight],\n        getSize: [showAxisLeftLabels],\n        getColor: [theme]\n      }\n    }), new TextLayer2({\n      id: \"axisLeftTitle\",\n      coordinateSystem: COORDINATE_SYSTEM3.CARTESIAN,\n      data: [{\n        title: axisLeftTitle\n      }],\n      getText: d => d.title,\n      getPosition: [targetX, targetY],\n      getTextAnchor: \"middle\",\n      getColor: () => THEME_TO_TEXT_COLOR[theme],\n      getSize: !showAxisLeftLabels ? AXIS_TITLE_TEXT_SIZE : 0,\n      getAngle: 90,\n      fontFamily: AXIS_FONT_FAMILY,\n      updateTriggers: {\n        getSize: [showAxisLeftLabels],\n        getColor: [theme]\n      }\n    })];\n  }\n\n  renderLayers() {\n    return [this._renderAxisTopLayers(), this._renderAxisLeftLayers()];\n  }\n\n};\nHeatmapCompositeTextLayer.layerName = \"HeatmapCompositeTextLayer\"; // src/layers/PixelatedBitmapLayer.js\n\nimport { BitmapLayer as BitmapLayer2 } from \"@deck.gl/layers\";\nimport { CompositeLayer as CompositeLayer3 } from \"@deck.gl/core\";\n\nvar defaultProps2 = __spreadProps(__spreadValues({}, BitmapLayer2.defaultProps), {\n  image: {\n    type: \"object\",\n    value: null,\n    async: true\n  },\n  bounds: {\n    type: \"array\",\n    value: [1, 0, 0, 1],\n    compare: true\n  },\n  desaturate: {\n    type: \"number\",\n    min: 0,\n    max: 1,\n    value: 0\n  },\n  transparentColor: {\n    type: \"color\",\n    value: [0, 0, 0, 0]\n  },\n  tintColor: {\n    type: \"color\",\n    value: [255, 255, 255]\n  }\n});\n\nvar PixelatedBitmapLayer = class extends CompositeLayer3 {\n  renderLayers() {\n    const {\n      image\n    } = this.props;\n    return new BitmapLayer2(this.props, {\n      id: `${this.props.id}-wrapped`,\n      image,\n      textureParameters: PIXELATED_TEXTURE_PARAMETERS\n    });\n  }\n\n};\nPixelatedBitmapLayer.layerName = \"PixelatedBitmapLayer\";\nPixelatedBitmapLayer.defaultProps = defaultProps2; // src/layers/HeatmapBitmapLayer.js\n\nimport GL3 from \"@luma.gl/constants\";\nimport { _mergeShaders, project32 as project322, picking as picking2 } from \"@deck.gl/core\";\nimport { BitmapLayer as BitmapLayer3 } from \"@deck.gl/layers\";\nimport { Texture2D as Texture2D2 } from \"@luma.gl/core\"; // src/layers/constants.js\n\nvar GLSL_COLORMAPS = [\"plasma\", \"viridis\", \"jet\"];\nvar GLSL_COLORMAP_DEFAULT = \"plasma\";\nvar COLORMAP_SHADER_PLACEHOLDER = \"COLORMAP_FUNC\"; // src/layers/heatmap-bitmap-layer-shaders.js\n\nvar vertexShader = \"\\n#define SHADER_NAME heatmap-bitmap-layer-vertex-shader\\n\\nattribute vec2 texCoords;\\nattribute vec3 positions;\\nattribute vec3 positions64Low;\\n\\nvarying vec2 vTexCoord;\\n\\nconst vec3 pickingColor = vec3(1.0, 0.0, 0.0);\\n\\nvoid main(void) {\\n  geometry.worldPosition = positions;\\n  geometry.uv = texCoords;\\n  geometry.pickingColor = pickingColor;\\n\\n  gl_Position = project_position_to_clipspace(positions, positions64Low, vec3(0.0), geometry.position);\\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\\n\\n  vTexCoord = texCoords;\\n\\n  vec4 color = vec4(0.0);\\n  DECKGL_FILTER_COLOR(color, geometry);\\n}\\n\";\nvar fragmentShader = \"\\n#define SHADER_NAME heatmap-bitmap-layer-fragment-shader\\n\\n#ifdef GL_ES\\nprecision mediump float;\\n#endif\\n\\nvec4 rdbu (float x_2865134303) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0.0196078431372549,0.0392156862745098,0.6745098039215687,1);\\n  const float e1 = 0.35;\\n  const vec4 v1 = vec4(0.41568627450980394,0.5372549019607843,0.9686274509803922,1);\\n  const float e2 = 0.5;\\n  const vec4 v2 = vec4(0.7450980392156863,0.7450980392156863,0.7450980392156863,1);\\n  const float e3 = 0.6;\\n  const vec4 v3 = vec4(0.8627450980392157,0.6666666666666666,0.5176470588235295,1);\\n  const float e4 = 0.7;\\n  const vec4 v4 = vec4(0.9019607843137255,0.5686274509803921,0.35294117647058826,1);\\n  const float e5 = 1.0;\\n  const vec4 v5 = vec4(0.6980392156862745,0.0392156862745098,0.10980392156862745,1);\\n  float a0 = smoothstep(e0,e1,x_2865134303);\\n  float a1 = smoothstep(e1,e2,x_2865134303);\\n  float a2 = smoothstep(e2,e3,x_2865134303);\\n  float a3 = smoothstep(e3,e4,x_2865134303);\\n  float a4 = smoothstep(e4,e5,x_2865134303);\\n  return max(mix(v0,v1,a0)*step(e0,x_2865134303)*step(x_2865134303,e1),\\n    max(mix(v1,v2,a1)*step(e1,x_2865134303)*step(x_2865134303,e2),\\n    max(mix(v2,v3,a2)*step(e2,x_2865134303)*step(x_2865134303,e3),\\n    max(mix(v3,v4,a3)*step(e3,x_2865134303)*step(x_2865134303,e4),mix(v4,v5,a4)*step(e4,x_2865134303)*step(x_2865134303,e5)\\n  ))));\\n}\\n\\nvec4 plasma (float x_4113959278) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0.050980392156862744,0.03137254901960784,0.5294117647058824,1);\\n  const float e1 = 0.13;\\n  const vec4 v1 = vec4(0.29411764705882354,0.011764705882352941,0.6313725490196078,1);\\n  const float e2 = 0.25;\\n  const vec4 v2 = vec4(0.49019607843137253,0.011764705882352941,0.6588235294117647,1);\\n  const float e3 = 0.38;\\n  const vec4 v3 = vec4(0.6588235294117647,0.13333333333333333,0.5882352941176471,1);\\n  const float e4 = 0.5;\\n  const vec4 v4 = vec4(0.796078431372549,0.27450980392156865,0.4745098039215686,1);\\n  const float e5 = 0.63;\\n  const vec4 v5 = vec4(0.8980392156862745,0.4196078431372549,0.36470588235294116,1);\\n  const float e6 = 0.75;\\n  const vec4 v6 = vec4(0.9725490196078431,0.5803921568627451,0.2549019607843137,1);\\n  const float e7 = 0.88;\\n  const vec4 v7 = vec4(0.9921568627450981,0.7647058823529411,0.1568627450980392,1);\\n  const float e8 = 1.0;\\n  const vec4 v8 = vec4(0.9411764705882353,0.9764705882352941,0.12941176470588237,1);\\n  float a0 = smoothstep(e0,e1,x_4113959278);\\n  float a1 = smoothstep(e1,e2,x_4113959278);\\n  float a2 = smoothstep(e2,e3,x_4113959278);\\n  float a3 = smoothstep(e3,e4,x_4113959278);\\n  float a4 = smoothstep(e4,e5,x_4113959278);\\n  float a5 = smoothstep(e5,e6,x_4113959278);\\n  float a6 = smoothstep(e6,e7,x_4113959278);\\n  float a7 = smoothstep(e7,e8,x_4113959278);\\n  return max(mix(v0,v1,a0)*step(e0,x_4113959278)*step(x_4113959278,e1),\\n    max(mix(v1,v2,a1)*step(e1,x_4113959278)*step(x_4113959278,e2),\\n    max(mix(v2,v3,a2)*step(e2,x_4113959278)*step(x_4113959278,e3),\\n    max(mix(v3,v4,a3)*step(e3,x_4113959278)*step(x_4113959278,e4),\\n    max(mix(v4,v5,a4)*step(e4,x_4113959278)*step(x_4113959278,e5),\\n    max(mix(v5,v6,a5)*step(e5,x_4113959278)*step(x_4113959278,e6),\\n    max(mix(v6,v7,a6)*step(e6,x_4113959278)*step(x_4113959278,e7),mix(v7,v8,a7)*step(e7,x_4113959278)*step(x_4113959278,e8)\\n  )))))));\\n}\\n\\nvec4 viridis (float x_1156145534) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0.26666666666666666,0.00392156862745098,0.32941176470588235,1);\\n  const float e1 = 0.13;\\n  const vec4 v1 = vec4(0.2784313725490196,0.17254901960784313,0.47843137254901963,1);\\n  const float e2 = 0.25;\\n  const vec4 v2 = vec4(0.23137254901960785,0.3176470588235294,0.5450980392156862,1);\\n  const float e3 = 0.38;\\n  const vec4 v3 = vec4(0.17254901960784313,0.44313725490196076,0.5568627450980392,1);\\n  const float e4 = 0.5;\\n  const vec4 v4 = vec4(0.12941176470588237,0.5647058823529412,0.5529411764705883,1);\\n  const float e5 = 0.63;\\n  const vec4 v5 = vec4(0.15294117647058825,0.6784313725490196,0.5058823529411764,1);\\n  const float e6 = 0.75;\\n  const vec4 v6 = vec4(0.3607843137254902,0.7843137254901961,0.38823529411764707,1);\\n  const float e7 = 0.88;\\n  const vec4 v7 = vec4(0.6666666666666666,0.8627450980392157,0.19607843137254902,1);\\n  const float e8 = 1.0;\\n  const vec4 v8 = vec4(0.9921568627450981,0.9058823529411765,0.1450980392156863,1);\\n  float a0 = smoothstep(e0,e1,x_1156145534);\\n  float a1 = smoothstep(e1,e2,x_1156145534);\\n  float a2 = smoothstep(e2,e3,x_1156145534);\\n  float a3 = smoothstep(e3,e4,x_1156145534);\\n  float a4 = smoothstep(e4,e5,x_1156145534);\\n  float a5 = smoothstep(e5,e6,x_1156145534);\\n  float a6 = smoothstep(e6,e7,x_1156145534);\\n  float a7 = smoothstep(e7,e8,x_1156145534);\\n  return max(mix(v0,v1,a0)*step(e0,x_1156145534)*step(x_1156145534,e1),\\n    max(mix(v1,v2,a1)*step(e1,x_1156145534)*step(x_1156145534,e2),\\n    max(mix(v2,v3,a2)*step(e2,x_1156145534)*step(x_1156145534,e3),\\n    max(mix(v3,v4,a3)*step(e3,x_1156145534)*step(x_1156145534,e4),\\n    max(mix(v4,v5,a4)*step(e4,x_1156145534)*step(x_1156145534,e5),\\n    max(mix(v5,v6,a5)*step(e5,x_1156145534)*step(x_1156145534,e6),\\n    max(mix(v6,v7,a6)*step(e6,x_1156145534)*step(x_1156145534,e7),mix(v7,v8,a7)*step(e7,x_1156145534)*step(x_1156145534,e8)\\n  )))))));\\n}\\n\\nvec4 greys (float x_2073311089) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0,0,0,1);\\n  const float e1 = 1.0;\\n  const vec4 v1 = vec4(1,1,1,1);\\n  float a0 = smoothstep(e0,e1,x_2073311089);\\n  return mix(v0,v1,a0)*step(e0,x_2073311089)*step(x_2073311089,e1);\\n}\\n\\nvec4 magma (float x_2664132035) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0,0,0.01568627450980392,1);\\n  const float e1 = 0.13;\\n  const vec4 v1 = vec4(0.10980392156862745,0.06274509803921569,0.26666666666666666,1);\\n  const float e2 = 0.25;\\n  const vec4 v2 = vec4(0.30980392156862746,0.07058823529411765,0.4823529411764706,1);\\n  const float e3 = 0.38;\\n  const vec4 v3 = vec4(0.5058823529411764,0.1450980392156863,0.5058823529411764,1);\\n  const float e4 = 0.5;\\n  const vec4 v4 = vec4(0.7098039215686275,0.21176470588235294,0.47843137254901963,1);\\n  const float e5 = 0.63;\\n  const vec4 v5 = vec4(0.8980392156862745,0.3137254901960784,0.39215686274509803,1);\\n  const float e6 = 0.75;\\n  const vec4 v6 = vec4(0.984313725490196,0.5294117647058824,0.3803921568627451,1);\\n  const float e7 = 0.88;\\n  const vec4 v7 = vec4(0.996078431372549,0.7607843137254902,0.5294117647058824,1);\\n  const float e8 = 1.0;\\n  const vec4 v8 = vec4(0.9882352941176471,0.9921568627450981,0.7490196078431373,1);\\n  float a0 = smoothstep(e0,e1,x_2664132035);\\n  float a1 = smoothstep(e1,e2,x_2664132035);\\n  float a2 = smoothstep(e2,e3,x_2664132035);\\n  float a3 = smoothstep(e3,e4,x_2664132035);\\n  float a4 = smoothstep(e4,e5,x_2664132035);\\n  float a5 = smoothstep(e5,e6,x_2664132035);\\n  float a6 = smoothstep(e6,e7,x_2664132035);\\n  float a7 = smoothstep(e7,e8,x_2664132035);\\n  return max(mix(v0,v1,a0)*step(e0,x_2664132035)*step(x_2664132035,e1),\\n    max(mix(v1,v2,a1)*step(e1,x_2664132035)*step(x_2664132035,e2),\\n    max(mix(v2,v3,a2)*step(e2,x_2664132035)*step(x_2664132035,e3),\\n    max(mix(v3,v4,a3)*step(e3,x_2664132035)*step(x_2664132035,e4),\\n    max(mix(v4,v5,a4)*step(e4,x_2664132035)*step(x_2664132035,e5),\\n    max(mix(v5,v6,a5)*step(e5,x_2664132035)*step(x_2664132035,e6),\\n    max(mix(v6,v7,a6)*step(e6,x_2664132035)*step(x_2664132035,e7),mix(v7,v8,a7)*step(e7,x_2664132035)*step(x_2664132035,e8)\\n  )))))));\\n}\\n\\nvec4 jet (float x_2485945205) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0,0,0.5137254901960784,1);\\n  const float e1 = 0.125;\\n  const vec4 v1 = vec4(0,0.23529411764705882,0.6666666666666666,1);\\n  const float e2 = 0.375;\\n  const vec4 v2 = vec4(0.0196078431372549,1,1,1);\\n  const float e3 = 0.625;\\n  const vec4 v3 = vec4(1,1,0,1);\\n  const float e4 = 0.875;\\n  const vec4 v4 = vec4(0.9803921568627451,0,0,1);\\n  const float e5 = 1.0;\\n  const vec4 v5 = vec4(0.5019607843137255,0,0,1);\\n  float a0 = smoothstep(e0,e1,x_2485945205);\\n  float a1 = smoothstep(e1,e2,x_2485945205);\\n  float a2 = smoothstep(e2,e3,x_2485945205);\\n  float a3 = smoothstep(e3,e4,x_2485945205);\\n  float a4 = smoothstep(e4,e5,x_2485945205);\\n  return max(mix(v0,v1,a0)*step(e0,x_2485945205)*step(x_2485945205,e1),\\n    max(mix(v1,v2,a1)*step(e1,x_2485945205)*step(x_2485945205,e2),\\n    max(mix(v2,v3,a2)*step(e2,x_2485945205)*step(x_2485945205,e3),\\n    max(mix(v3,v4,a3)*step(e3,x_2485945205)*step(x_2485945205,e4),mix(v4,v5,a4)*step(e4,x_2485945205)*step(x_2485945205,e5)\\n  ))));\\n}\\n\\nvec4 bone (float x_2693572714) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0,0,0,1);\\n  const float e1 = 0.376;\\n  const vec4 v1 = vec4(0.32941176470588235,0.32941176470588235,0.4549019607843137,1);\\n  const float e2 = 0.753;\\n  const vec4 v2 = vec4(0.6627450980392157,0.7843137254901961,0.7843137254901961,1);\\n  const float e3 = 1.0;\\n  const vec4 v3 = vec4(1,1,1,1);\\n  float a0 = smoothstep(e0,e1,x_2693572714);\\n  float a1 = smoothstep(e1,e2,x_2693572714);\\n  float a2 = smoothstep(e2,e3,x_2693572714);\\n  return max(mix(v0,v1,a0)*step(e0,x_2693572714)*step(x_2693572714,e1),\\n    max(mix(v1,v2,a1)*step(e1,x_2693572714)*step(x_2693572714,e2),mix(v2,v3,a2)*step(e2,x_2693572714)*step(x_2693572714,e3)\\n  ));\\n}\\n\\nvec4 copper (float x_2606013778) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0,0,0,1);\\n  const float e1 = 0.804;\\n  const vec4 v1 = vec4(1,0.6274509803921569,0.4,1);\\n  const float e2 = 1.0;\\n  const vec4 v2 = vec4(1,0.7803921568627451,0.4980392156862745,1);\\n  float a0 = smoothstep(e0,e1,x_2606013778);\\n  float a1 = smoothstep(e1,e2,x_2606013778);\\n  return max(mix(v0,v1,a0)*step(e0,x_2606013778)*step(x_2606013778,e1),mix(v1,v2,a1)*step(e1,x_2606013778)*step(x_2606013778,e2)\\n  );\\n}\\n\\nvec4 density (float x_4072297271) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0.21176470588235294,0.054901960784313725,0.1411764705882353,1);\\n  const float e1 = 0.13;\\n  const vec4 v1 = vec4(0.34901960784313724,0.09019607843137255,0.3137254901960784,1);\\n  const float e2 = 0.25;\\n  const vec4 v2 = vec4(0.43137254901960786,0.17647058823529413,0.5176470588235295,1);\\n  const float e3 = 0.38;\\n  const vec4 v3 = vec4(0.47058823529411764,0.30196078431372547,0.6980392156862745,1);\\n  const float e4 = 0.5;\\n  const vec4 v4 = vec4(0.47058823529411764,0.44313725490196076,0.8352941176470589,1);\\n  const float e5 = 0.63;\\n  const vec4 v5 = vec4(0.45098039215686275,0.592156862745098,0.8941176470588236,1);\\n  const float e6 = 0.75;\\n  const vec4 v6 = vec4(0.5254901960784314,0.7254901960784313,0.8901960784313725,1);\\n  const float e7 = 0.88;\\n  const vec4 v7 = vec4(0.6941176470588235,0.8392156862745098,0.8901960784313725,1);\\n  const float e8 = 1.0;\\n  const vec4 v8 = vec4(0.9019607843137255,0.9450980392156862,0.9450980392156862,1);\\n  float a0 = smoothstep(e0,e1,x_4072297271);\\n  float a1 = smoothstep(e1,e2,x_4072297271);\\n  float a2 = smoothstep(e2,e3,x_4072297271);\\n  float a3 = smoothstep(e3,e4,x_4072297271);\\n  float a4 = smoothstep(e4,e5,x_4072297271);\\n  float a5 = smoothstep(e5,e6,x_4072297271);\\n  float a6 = smoothstep(e6,e7,x_4072297271);\\n  float a7 = smoothstep(e7,e8,x_4072297271);\\n  return max(mix(v0,v1,a0)*step(e0,x_4072297271)*step(x_4072297271,e1),\\n    max(mix(v1,v2,a1)*step(e1,x_4072297271)*step(x_4072297271,e2),\\n    max(mix(v2,v3,a2)*step(e2,x_4072297271)*step(x_4072297271,e3),\\n    max(mix(v3,v4,a3)*step(e3,x_4072297271)*step(x_4072297271,e4),\\n    max(mix(v4,v5,a4)*step(e4,x_4072297271)*step(x_4072297271,e5),\\n    max(mix(v5,v6,a5)*step(e5,x_4072297271)*step(x_4072297271,e6),\\n    max(mix(v6,v7,a6)*step(e6,x_4072297271)*step(x_4072297271,e7),mix(v7,v8,a7)*step(e7,x_4072297271)*step(x_4072297271,e8)\\n  )))))));\\n}\\n\\nvec4 inferno (float x_524681000) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0,0,0.01568627450980392,1);\\n  const float e1 = 0.13;\\n  const vec4 v1 = vec4(0.12156862745098039,0.047058823529411764,0.2823529411764706,1);\\n  const float e2 = 0.25;\\n  const vec4 v2 = vec4(0.3333333333333333,0.058823529411764705,0.42745098039215684,1);\\n  const float e3 = 0.38;\\n  const vec4 v3 = vec4(0.5333333333333333,0.13333333333333333,0.41568627450980394,1);\\n  const float e4 = 0.5;\\n  const vec4 v4 = vec4(0.7294117647058823,0.21176470588235294,0.3333333333333333,1);\\n  const float e5 = 0.63;\\n  const vec4 v5 = vec4(0.8901960784313725,0.34901960784313724,0.2,1);\\n  const float e6 = 0.75;\\n  const vec4 v6 = vec4(0.9764705882352941,0.5490196078431373,0.0392156862745098,1);\\n  const float e7 = 0.88;\\n  const vec4 v7 = vec4(0.9764705882352941,0.788235294117647,0.19607843137254902,1);\\n  const float e8 = 1.0;\\n  const vec4 v8 = vec4(0.9882352941176471,1,0.6431372549019608,1);\\n  float a0 = smoothstep(e0,e1,x_524681000);\\n  float a1 = smoothstep(e1,e2,x_524681000);\\n  float a2 = smoothstep(e2,e3,x_524681000);\\n  float a3 = smoothstep(e3,e4,x_524681000);\\n  float a4 = smoothstep(e4,e5,x_524681000);\\n  float a5 = smoothstep(e5,e6,x_524681000);\\n  float a6 = smoothstep(e6,e7,x_524681000);\\n  float a7 = smoothstep(e7,e8,x_524681000);\\n  return max(mix(v0,v1,a0)*step(e0,x_524681000)*step(x_524681000,e1),\\n    max(mix(v1,v2,a1)*step(e1,x_524681000)*step(x_524681000,e2),\\n    max(mix(v2,v3,a2)*step(e2,x_524681000)*step(x_524681000,e3),\\n    max(mix(v3,v4,a3)*step(e3,x_524681000)*step(x_524681000,e4),\\n    max(mix(v4,v5,a4)*step(e4,x_524681000)*step(x_524681000,e5),\\n    max(mix(v5,v6,a5)*step(e5,x_524681000)*step(x_524681000,e6),\\n    max(mix(v6,v7,a6)*step(e6,x_524681000)*step(x_524681000,e7),mix(v7,v8,a7)*step(e7,x_524681000)*step(x_524681000,e8)\\n  )))))));\\n}\\n\\nvec4 cool (float x_3050536724) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0.49019607843137253,0,0.7019607843137254,1);\\n  const float e1 = 0.13;\\n  const vec4 v1 = vec4(0.4549019607843137,0,0.8549019607843137,1);\\n  const float e2 = 0.25;\\n  const vec4 v2 = vec4(0.3843137254901961,0.2901960784313726,0.9294117647058824,1);\\n  const float e3 = 0.38;\\n  const vec4 v3 = vec4(0.26666666666666666,0.5725490196078431,0.9058823529411765,1);\\n  const float e4 = 0.5;\\n  const vec4 v4 = vec4(0,0.8,0.7725490196078432,1);\\n  const float e5 = 0.63;\\n  const vec4 v5 = vec4(0,0.9686274509803922,0.5725490196078431,1);\\n  const float e6 = 0.75;\\n  const vec4 v6 = vec4(0,1,0.34509803921568627,1);\\n  const float e7 = 0.88;\\n  const vec4 v7 = vec4(0.1568627450980392,1,0.03137254901960784,1);\\n  const float e8 = 1.0;\\n  const vec4 v8 = vec4(0.5764705882352941,1,0,1);\\n  float a0 = smoothstep(e0,e1,x_3050536724);\\n  float a1 = smoothstep(e1,e2,x_3050536724);\\n  float a2 = smoothstep(e2,e3,x_3050536724);\\n  float a3 = smoothstep(e3,e4,x_3050536724);\\n  float a4 = smoothstep(e4,e5,x_3050536724);\\n  float a5 = smoothstep(e5,e6,x_3050536724);\\n  float a6 = smoothstep(e6,e7,x_3050536724);\\n  float a7 = smoothstep(e7,e8,x_3050536724);\\n  return max(mix(v0,v1,a0)*step(e0,x_3050536724)*step(x_3050536724,e1),\\n    max(mix(v1,v2,a1)*step(e1,x_3050536724)*step(x_3050536724,e2),\\n    max(mix(v2,v3,a2)*step(e2,x_3050536724)*step(x_3050536724,e3),\\n    max(mix(v3,v4,a3)*step(e3,x_3050536724)*step(x_3050536724,e4),\\n    max(mix(v4,v5,a4)*step(e4,x_3050536724)*step(x_3050536724,e5),\\n    max(mix(v5,v6,a5)*step(e5,x_3050536724)*step(x_3050536724,e6),\\n    max(mix(v6,v7,a6)*step(e6,x_3050536724)*step(x_3050536724,e7),mix(v7,v8,a7)*step(e7,x_3050536724)*step(x_3050536724,e8)\\n  )))))));\\n}\\n\\nvec4 hot (float x_4009354686) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0,0,0,1);\\n  const float e1 = 0.3;\\n  const vec4 v1 = vec4(0.9019607843137255,0,0,1);\\n  const float e2 = 0.6;\\n  const vec4 v2 = vec4(1,0.8235294117647058,0,1);\\n  const float e3 = 1.0;\\n  const vec4 v3 = vec4(1,1,1,1);\\n  float a0 = smoothstep(e0,e1,x_4009354686);\\n  float a1 = smoothstep(e1,e2,x_4009354686);\\n  float a2 = smoothstep(e2,e3,x_4009354686);\\n  return max(mix(v0,v1,a0)*step(e0,x_4009354686)*step(x_4009354686,e1),\\n    max(mix(v1,v2,a1)*step(e1,x_4009354686)*step(x_4009354686,e2),mix(v2,v3,a2)*step(e2,x_4009354686)*step(x_4009354686,e3)\\n  ));\\n}\\n\\nvec4 spring (float x_2270446359) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(1,0,1,1);\\n  const float e1 = 1.0;\\n  const vec4 v1 = vec4(1,1,0,1);\\n  float a0 = smoothstep(e0,e1,x_2270446359);\\n  return mix(v0,v1,a0)*step(e0,x_2270446359)*step(x_2270446359,e1);\\n}\\n\\nvec4 summer (float x_1101081466) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0,0.5019607843137255,0.4,1);\\n  const float e1 = 1.0;\\n  const vec4 v1 = vec4(1,1,0.4,1);\\n  float a0 = smoothstep(e0,e1,x_1101081466);\\n  return mix(v0,v1,a0)*step(e0,x_1101081466)*step(x_1101081466,e1);\\n}\\n\\nvec4 autumn (float x_3652770500) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(1,0,0,1);\\n  const float e1 = 1.0;\\n  const vec4 v1 = vec4(1,1,0,1);\\n  float a0 = smoothstep(e0,e1,x_3652770500);\\n  return mix(v0,v1,a0)*step(e0,x_3652770500)*step(x_3652770500,e1);\\n}\\n\\nvec4 winter (float x_1155565894) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0,0,1,1);\\n  const float e1 = 1.0;\\n  const vec4 v1 = vec4(0,1,0.5019607843137255,1);\\n  float a0 = smoothstep(e0,e1,x_1155565894);\\n  return mix(v0,v1,a0)*step(e0,x_1155565894)*step(x_1155565894,e1);\\n}\\n\\n// The texture (GL.LUMINANCE & Uint8Array).\\nuniform sampler2D uBitmapTexture;\\n\\n// What are the dimensions of the texture (width, height)?\\nuniform vec2 uTextureSize;\\n\\n// How many consecutive pixels should be aggregated together along each axis?\\nuniform vec2 uAggSize;\\n\\n// What are the values of the color scale sliders?\\nuniform vec2 uColorScaleRange;\\n\\n// The texture coordinate, varying (interpolated between values set by the vertex shader).\\nvarying vec2 vTexCoord;\\n\\nvoid main(void) {\\n  // Compute 1 pixel in texture coordinates\\n  vec2 onePixel = vec2(1.0, 1.0) / uTextureSize;\\n  \\n  vec2 viewCoord = vec2(floor(vTexCoord.x * uTextureSize.x), floor(vTexCoord.y * uTextureSize.y));\\n\\n  // Compute (x % aggSizeX, y % aggSizeY).\\n  // These values will be the number of values to the left / above the current position to consider.\\n  vec2 modAggSize = vec2(-1.0 * mod(viewCoord.x, uAggSize.x), -1.0 * mod(viewCoord.y, uAggSize.y));\\n\\n  // Take the sum of values along each axis.\\n  float intensitySum = 0.0;\\n  vec2 offsetPixels = vec2(0.0, 0.0);\\n\\n  for(int i = 0; i < 16; i++) {\\n    // Check to break outer loop early.\\n    // Uniforms cannot be used as conditions in GLSL for loops.\\n    if(float(i) >= uAggSize.y) {\\n      // Done in the y direction.\\n      break;\\n    }\\n\\n    offsetPixels = vec2(offsetPixels.x, (modAggSize.y + float(i)) * onePixel.y);\\n\\n    for(int j = 0; j < 16; j++) {\\n      // Check to break inner loop early.\\n      // Uniforms cannot be used as conditions in GLSL for loops.\\n      if(float(j) >= uAggSize.x) {\\n        // Done in the x direction.\\n        break;\\n      }\\n\\n      offsetPixels = vec2((modAggSize.x + float(j)) * onePixel.x, offsetPixels.y);\\n      intensitySum += texture2D(uBitmapTexture, vTexCoord + offsetPixels).r;\\n    }\\n  }\\n  \\n  // Compute the mean value.\\n  float intensityMean = intensitySum / (uAggSize.x * uAggSize.y);\\n  \\n  // Re-scale using the color scale slider values.\\n  float scaledIntensityMean = (intensityMean - uColorScaleRange[0]) / max(0.005, (uColorScaleRange[1] - uColorScaleRange[0]));\\n\\n  gl_FragColor = COLORMAP_FUNC(clamp(scaledIntensityMean, 0.0, 1.0));\\n\\n  geometry.uv = vTexCoord;\\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\\n}\\n\"; // src/layers/HeatmapBitmapLayer.js\n\nvar defaultProps3 = {\n  image: {\n    type: \"object\",\n    value: null,\n    async: true\n  },\n  colormap: {\n    type: \"string\",\n    value: GLSL_COLORMAP_DEFAULT,\n    compare: true\n  },\n  bounds: {\n    type: \"array\",\n    value: [1, 0, 0, 1],\n    compare: true\n  },\n  aggSizeX: {\n    type: \"number\",\n    value: 8,\n    compare: true\n  },\n  aggSizeY: {\n    type: \"number\",\n    value: 8,\n    compare: true\n  },\n  colorScaleLo: {\n    type: \"number\",\n    value: 0,\n    compare: true\n  },\n  colorScaleHi: {\n    type: \"number\",\n    value: 1,\n    compare: true\n  }\n};\nvar HeatmapBitmapLayer = class extends BitmapLayer3 {\n  _getShaders(shaders) {\n    this.props.extensions.forEach(extension => {\n      shaders = _mergeShaders(shaders, extension.getShaders.call(this, extension));\n    });\n    return shaders;\n  }\n\n  getShaders() {\n    const {\n      colormap\n    } = this.props;\n    const fragmentShaderWithColormap = GLSL_COLORMAPS.includes(colormap) ? fragmentShader.replace(COLORMAP_SHADER_PLACEHOLDER, colormap) : fragmentShader.replace(COLORMAP_SHADER_PLACEHOLDER, GLSL_COLORMAP_DEFAULT);\n    return this._getShaders({\n      vs: vertexShader,\n      fs: fragmentShaderWithColormap,\n      modules: [project322, picking2]\n    });\n  }\n\n  updateState(args) {\n    var _a2;\n\n    super.updateState(args);\n    this.loadTexture(this.props.image);\n    const {\n      props,\n      oldProps\n    } = args;\n\n    if (props.colormap !== oldProps.colormap) {\n      const {\n        gl\n      } = this.context;\n      (_a2 = this.state.model) == null ? void 0 : _a2.delete();\n      this.state.model = this._getModel(gl);\n      this.getAttributeManager().invalidateAll();\n    }\n  }\n\n  draw(opts) {\n    const {\n      uniforms\n    } = opts;\n    const {\n      bitmapTexture,\n      model\n    } = this.state;\n    const {\n      aggSizeX,\n      aggSizeY,\n      colorScaleLo,\n      colorScaleHi\n    } = this.props;\n\n    if (bitmapTexture && model) {\n      model.setUniforms(Object.assign({}, uniforms, {\n        uBitmapTexture: bitmapTexture,\n        uTextureSize: [TILE_SIZE, TILE_SIZE],\n        uAggSize: [aggSizeX, aggSizeY],\n        uColorScaleRange: [colorScaleLo, colorScaleHi]\n      })).draw();\n    }\n  }\n\n  loadTexture(image) {\n    const {\n      gl\n    } = this.context;\n\n    if (this.state.bitmapTexture) {\n      this.state.bitmapTexture.delete();\n    }\n\n    if (image instanceof Texture2D2) {\n      this.setState({\n        bitmapTexture: image\n      });\n    } else if (image) {\n      this.setState({\n        bitmapTexture: new Texture2D2(gl, {\n          data: image,\n          mipmaps: false,\n          parameters: PIXELATED_TEXTURE_PARAMETERS,\n          format: GL3.LUMINANCE,\n          dataFormat: GL3.LUMINANCE,\n          type: GL3.UNSIGNED_BYTE,\n          width: TILE_SIZE,\n          height: TILE_SIZE\n        })\n      });\n    }\n  }\n\n};\nHeatmapBitmapLayer.layerName = \"HeatmapBitmapLayer\";\nHeatmapBitmapLayer.defaultProps = defaultProps3; // src/components/heatmap/utils.js\n\nimport clamp from \"lodash/clamp\";\nimport range4 from \"lodash/range\";\n\nfunction layerFilter(_ref38) {\n  let {\n    layer,\n    viewport\n  } = _ref38;\n\n  if (viewport.id === \"axisLeft\") {\n    return layer.id.startsWith(\"axisLeft\");\n  }\n\n  if (viewport.id === \"axisTop\") {\n    return layer.id.startsWith(\"axisTop\");\n  }\n\n  if (viewport.id === \"heatmap\") {\n    return layer.id.startsWith(\"heatmap\");\n  }\n\n  if (viewport.id === \"colorsLeft\") {\n    return layer.id.startsWith(\"colorsLeft\");\n  }\n\n  if (viewport.id === \"colorsTop\") {\n    return layer.id.startsWith(\"colorsTop\");\n  }\n\n  return false;\n}\n\nfunction getAxisSizes(transpose, geneLabelMaxLength, cellLabelMaxLength) {\n  const axisOffsetLeft = clamp((transpose ? geneLabelMaxLength : cellLabelMaxLength) * AXIS_LABEL_TEXT_SIZE, AXIS_MIN_SIZE, AXIS_MAX_SIZE);\n  const axisOffsetTop = clamp((transpose ? cellLabelMaxLength : geneLabelMaxLength) * AXIS_LABEL_TEXT_SIZE, AXIS_MIN_SIZE, AXIS_MAX_SIZE);\n  return [axisOffsetLeft, axisOffsetTop];\n}\n\nfunction mouseToHeatmapPosition(mouseX, mouseY, _ref39) {\n  let {\n    offsetLeft,\n    offsetTop,\n    targetX,\n    targetY,\n    scaleFactor,\n    matrixWidth,\n    matrixHeight,\n    numRows,\n    numCols\n  } = _ref39;\n  const viewMouseX = mouseX - offsetLeft;\n  const viewMouseY = mouseY - offsetTop;\n\n  if (viewMouseX < 0 || viewMouseY < 0) {\n    return [null, null];\n  }\n\n  const bboxTargetX = targetX * scaleFactor + matrixWidth * scaleFactor / 2;\n  const bboxTargetY = targetY * scaleFactor + matrixHeight * scaleFactor / 2;\n  const bboxLeft = bboxTargetX - matrixWidth / 2;\n  const bboxTop = bboxTargetY - matrixHeight / 2;\n  const zoomedOffsetLeft = bboxLeft / (matrixWidth * scaleFactor);\n  const zoomedOffsetTop = bboxTop / (matrixHeight * scaleFactor);\n  const zoomedViewMouseX = viewMouseX / (matrixWidth * scaleFactor);\n  const zoomedViewMouseY = viewMouseY / (matrixHeight * scaleFactor);\n  const zoomedMouseX = zoomedOffsetLeft + zoomedViewMouseX;\n  const zoomedMouseY = zoomedOffsetTop + zoomedViewMouseY;\n  const rowI = Math.floor(zoomedMouseY * numRows);\n  const colI = Math.floor(zoomedMouseX * numCols);\n  return [colI, rowI];\n}\n\nfunction heatmapToMousePosition(colI, rowI, _ref40) {\n  let {\n    offsetLeft,\n    offsetTop,\n    targetX,\n    targetY,\n    scaleFactor,\n    matrixWidth,\n    matrixHeight,\n    numRows,\n    numCols\n  } = _ref40;\n  let zoomedMouseY = null;\n  let zoomedMouseX = null;\n\n  if (rowI !== null) {\n    const minY = -matrixHeight * scaleFactor / 2;\n    const maxY = matrixHeight * scaleFactor / 2;\n    const totalHeight = maxY - minY;\n    const minInViewY = targetY * scaleFactor - matrixHeight / 2;\n    const maxInViewY = targetY * scaleFactor + matrixHeight / 2;\n    const inViewHeight = maxInViewY - minInViewY;\n    const normalizedRowY = (rowI + 0.5) / numRows;\n    const globalRowY = minY + normalizedRowY * totalHeight;\n\n    if (minInViewY <= globalRowY && globalRowY <= maxInViewY) {\n      zoomedMouseY = offsetTop + (globalRowY - minInViewY) / inViewHeight * matrixHeight;\n    }\n  }\n\n  if (colI !== null) {\n    const minX = -matrixWidth * scaleFactor / 2;\n    const maxX = matrixWidth * scaleFactor / 2;\n    const totalWidth = maxX - minX;\n    const minInViewX = targetX * scaleFactor - matrixWidth / 2;\n    const maxInViewX = targetX * scaleFactor + matrixWidth / 2;\n    const inViewWidth = maxInViewX - minInViewX;\n    const normalizedRowX = (colI + 0.5) / numCols;\n    const globalRowX = minX + normalizedRowX * totalWidth;\n\n    if (minInViewX <= globalRowX && globalRowX <= maxInViewX) {\n      zoomedMouseX = offsetLeft + (globalRowX - minInViewX) / inViewWidth * matrixWidth;\n    }\n  }\n\n  return [zoomedMouseX, zoomedMouseY];\n} // inline-worker:/home/runner/work/vitessce/vitessce/src/components/heatmap/heatmap.worker\n\n\nvar encodedJs2 = \"KCgpPT57dmFyIGNFPU9iamVjdC5jcmVhdGU7dmFyIFA9T2JqZWN0LmRlZmluZVByb3BlcnR5O3ZhciBmRT1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yO3ZhciBpRT1PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lczt2YXIgWEU9T2JqZWN0LmdldFByb3RvdHlwZU9mLHNFPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7dmFyIGFFPUU9PlAoRSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIGpfPXR5cGVvZiByZXF1aXJlIT0idW5kZWZpbmVkIj9yZXF1aXJlOkU9Pnt0aHJvdyBuZXcgRXJyb3IoJ0R5bmFtaWMgcmVxdWlyZSBvZiAiJytFKyciIGlzIG5vdCBzdXBwb3J0ZWQnKX07dmFyIEE9KEUsXyk9PigpPT4oX3x8RSgoXz17ZXhwb3J0czp7fX0pLmV4cG9ydHMsXyksXy5leHBvcnRzKTt2YXIgYkU9KEUsXyxSKT0+e2lmKF8mJnR5cGVvZiBfPT0ib2JqZWN0Inx8dHlwZW9mIF89PSJmdW5jdGlvbiIpZm9yKGxldCBUIG9mIGlFKF8pKSFzRS5jYWxsKEUsVCkmJlQhPT0iZGVmYXVsdCImJlAoRSxULHtnZXQ6KCk9Pl9bVF0sZW51bWVyYWJsZTohKFI9ZkUoXyxUKSl8fFIuZW51bWVyYWJsZX0pO3JldHVybiBFfSxzPUU9PmJFKGFFKFAoRSE9bnVsbD9jRShYRShFKSk6e30sImRlZmF1bHQiLEUmJkUuX19lc01vZHVsZSYmImRlZmF1bHQiaW4gRT97Z2V0OigpPT5FLmRlZmF1bHQsZW51bWVyYWJsZTohMH06e3ZhbHVlOkUsZW51bWVyYWJsZTohMH0pKSxFKTt2YXIgYj1BKChoXyxhKT0+e2Z1bmN0aW9uIGRFKEUsXyxSKXtyZXR1cm4gRT09PUUmJihSIT09dm9pZCAwJiYoRT1FPD1SP0U6UiksXyE9PXZvaWQgMCYmKEU9RT49Xz9FOl8pKSxFfWEuZXhwb3J0cz1kRX0pO3ZhciBvPUEoKFFfLGQpPT57ZnVuY3Rpb24gSEUoRSl7dmFyIF89dHlwZW9mIEU7cmV0dXJuIEUhPW51bGwmJihfPT0ib2JqZWN0Inx8Xz09ImZ1bmN0aW9uIil9ZC5leHBvcnRzPUhFfSk7dmFyIFc9QSgod18sSCk9Pnt2YXIgV0U9dHlwZW9mIGdsb2JhbD09Im9iamVjdCImJmdsb2JhbCYmZ2xvYmFsLk9iamVjdD09PU9iamVjdCYmZ2xvYmFsO0guZXhwb3J0cz1XRX0pO3ZhciB1PUEoKGtfLFYpPT57dmFyIFZFPVcoKSx1RT10eXBlb2Ygc2VsZj09Im9iamVjdCImJnNlbGYmJnNlbGYuT2JqZWN0PT09T2JqZWN0JiZzZWxmLFlFPVZFfHx1RXx8RnVuY3Rpb24oInJldHVybiB0aGlzIikoKTtWLmV4cG9ydHM9WUV9KTt2YXIgRz1BKCh2XyxZKT0+e3ZhciBsRT11KCksZ0U9bEUuU3ltYm9sO1kuZXhwb3J0cz1nRX0pO3ZhciBwPUEoKEpfLEspPT57dmFyIGw9RygpLGc9T2JqZWN0LnByb3RvdHlwZSxLRT1nLmhhc093blByb3BlcnR5LHBFPWcudG9TdHJpbmcsbj1sP2wudG9TdHJpbmdUYWc6dm9pZCAwO2Z1bmN0aW9uIG1FKEUpe3ZhciBfPUtFLmNhbGwoRSxuKSxSPUVbbl07dHJ5e0Vbbl09dm9pZCAwO3ZhciBUPSEwfWNhdGNoKHgpe312YXIgTj1wRS5jYWxsKEUpO3JldHVybiBUJiYoXz9FW25dPVI6ZGVsZXRlIEVbbl0pLE59Sy5leHBvcnRzPW1FfSk7dmFyIHk9QSgoJF8sbSk9Pnt2YXIgeUU9T2JqZWN0LnByb3RvdHlwZSxaRT15RS50b1N0cmluZztmdW5jdGlvbiBqRShFKXtyZXR1cm4gWkUuY2FsbChFKX1tLmV4cG9ydHM9akV9KTt2YXIgcj1BKCh6XyxxKT0+e3ZhciBaPUcoKSxxRT1wKCksaEU9eSgpLFFFPSJbb2JqZWN0IE51bGxdIix3RT0iW29iamVjdCBVbmRlZmluZWRdIixqPVo/Wi50b1N0cmluZ1RhZzp2b2lkIDA7ZnVuY3Rpb24ga0UoRSl7cmV0dXJuIEU9PW51bGw/RT09PXZvaWQgMD93RTpRRTpqJiZqIGluIE9iamVjdChFKT9xRShFKTpoRShFKX1xLmV4cG9ydHM9a0V9KTt2YXIgUT1BKChFMCxoKT0+e2Z1bmN0aW9uIHZFKEUpe3JldHVybiBFIT1udWxsJiZ0eXBlb2YgRT09Im9iamVjdCJ9aC5leHBvcnRzPXZFfSk7dmFyIGs9QSgoXzAsdyk9Pnt2YXIgSkU9cigpLCRFPVEoKSx6RT0iW29iamVjdCBTeW1ib2xdIjtmdW5jdGlvbiBFXyhFKXtyZXR1cm4gdHlwZW9mIEU9PSJzeW1ib2wifHwkRShFKSYmSkUoRSk9PXpFfXcuZXhwb3J0cz1FX30pO3ZhciBjPUEoKFIwLCQpPT57dmFyIHY9bygpLF9fPWsoKSxKPTAvMCxSXz0vXlxzK3xccyskL2csVF89L15bLStdMHhbMC05YS1mXSskL2ksQV89L14wYlswMV0rJC9pLHhfPS9eMG9bMC03XSskL2ksTl89cGFyc2VJbnQ7ZnVuY3Rpb24gSV8oRSl7aWYodHlwZW9mIEU9PSJudW1iZXIiKXJldHVybiBFO2lmKF9fKEUpKXJldHVybiBKO2lmKHYoRSkpe3ZhciBfPXR5cGVvZiBFLnZhbHVlT2Y9PSJmdW5jdGlvbiI/RS52YWx1ZU9mKCk6RTtFPXYoXyk/XysiIjpffWlmKHR5cGVvZiBFIT0ic3RyaW5nIilyZXR1cm4gRT09PTA/RTorRTtFPUUucmVwbGFjZShSXywiIik7dmFyIFI9QV8udGVzdChFKTtyZXR1cm4gUnx8eF8udGVzdChFKT9OXyhFLnNsaWNlKDIpLFI/Mjo4KTpUXy50ZXN0KEUpP0o6K0V9JC5leHBvcnRzPUlffSk7dmFyIEVFPUEoKFQwLHopPT57dmFyIFNfPWIoKSxmPWMoKTtmdW5jdGlvbiBPXyhFLF8sUil7cmV0dXJuIFI9PT12b2lkIDAmJihSPV8sXz12b2lkIDApLFIhPT12b2lkIDAmJihSPWYoUiksUj1SPT09Uj9SOjApLF8hPT12b2lkIDAmJihfPWYoXyksXz1fPT09Xz9fOjApLFNfKGYoRSksXyxSKX16LmV4cG9ydHM9T199KTt2YXIgUkU9QSgoQTAsX0UpPT57dmFyIE1fPU1hdGguY2VpbCxGXz1NYXRoLm1heDtmdW5jdGlvbiBDXyhFLF8sUixUKXtmb3IodmFyIE49LTEseD1GXyhNXygoXy1FKS8oUnx8MSkpLDApLE89QXJyYXkoeCk7eC0tOylPW1Q/eDorK05dPUUsRSs9UjtyZXR1cm4gT31fRS5leHBvcnRzPUNffSk7dmFyIEFFPUEoKHgwLFRFKT0+e2Z1bmN0aW9uIGVfKEUsXyl7cmV0dXJuIEU9PT1ffHxFIT09RSYmXyE9PV99VEUuZXhwb3J0cz1lX30pO3ZhciBORT1BKChOMCx4RSk9Pnt2YXIgTF89cigpLEJfPW8oKSxVXz0iW29iamVjdCBBc3luY0Z1bmN0aW9uXSIsRF89IltvYmplY3QgRnVuY3Rpb25dIix0Xz0iW29iamVjdCBHZW5lcmF0b3JGdW5jdGlvbl0iLG5fPSJbb2JqZWN0IFByb3h5XSI7ZnVuY3Rpb24gb18oRSl7aWYoIUJfKEUpKXJldHVybiExO3ZhciBfPUxfKEUpO3JldHVybiBfPT1EX3x8Xz09dF98fF89PVVffHxfPT1uX314RS5leHBvcnRzPW9ffSk7dmFyIFNFPUEoKEkwLElFKT0+e3ZhciBQXz05MDA3MTk5MjU0NzQwOTkxO2Z1bmN0aW9uIEdfKEUpe3JldHVybiB0eXBlb2YgRT09Im51bWJlciImJkU+LTEmJkUlMT09MCYmRTw9UF99SUUuZXhwb3J0cz1HX30pO3ZhciBNRT1BKChTMCxPRSk9Pnt2YXIgcl89TkUoKSxjXz1TRSgpO2Z1bmN0aW9uIGZfKEUpe3JldHVybiBFIT1udWxsJiZjXyhFLmxlbmd0aCkmJiFyXyhFKX1PRS5leHBvcnRzPWZffSk7dmFyIENFPUEoKE8wLEZFKT0+e3ZhciBpXz05MDA3MTk5MjU0NzQwOTkxLFhfPS9eKD86MHxbMS05XVxkKikkLztmdW5jdGlvbiBzXyhFLF8pe3ZhciBSPXR5cGVvZiBFO3JldHVybiBfPV89PW51bGw/aV86XywhIV8mJihSPT0ibnVtYmVyInx8UiE9InN5bWJvbCImJlhfLnRlc3QoRSkpJiZFPi0xJiZFJTE9PTAmJkU8X31GRS5leHBvcnRzPXNffSk7dmFyIExFPUEoKE0wLGVFKT0+e3ZhciBhXz1BRSgpLGJfPU1FKCksZF89Q0UoKSxIXz1vKCk7ZnVuY3Rpb24gV18oRSxfLFIpe2lmKCFIXyhSKSlyZXR1cm4hMTt2YXIgVD10eXBlb2YgXztyZXR1cm4oVD09Im51bWJlciI/Yl8oUikmJmRfKF8sUi5sZW5ndGgpOlQ9PSJzdHJpbmciJiZfIGluIFIpP2FfKFJbX10sRSk6ITF9ZUUuZXhwb3J0cz1XX30pO3ZhciBERT1BKChGMCxVRSk9Pnt2YXIgVl89YygpLEJFPTEvMCx1Xz0xNzk3NjkzMTM0ODYyMzE1N2UyOTI7ZnVuY3Rpb24gWV8oRSl7aWYoIUUpcmV0dXJuIEU9PT0wP0U6MDtpZihFPVZfKEUpLEU9PT1CRXx8RT09PS1CRSl7dmFyIF89RTwwPy0xOjE7cmV0dXJuIF8qdV99cmV0dXJuIEU9PT1FP0U6MH1VRS5leHBvcnRzPVlffSk7dmFyIG5FPUEoKEMwLHRFKT0+e3ZhciBsXz1SRSgpLGdfPUxFKCksaT1ERSgpO2Z1bmN0aW9uIEtfKEUpe3JldHVybiBmdW5jdGlvbihfLFIsVCl7cmV0dXJuIFQmJnR5cGVvZiBUIT0ibnVtYmVyIiYmZ18oXyxSLFQpJiYoUj1UPXZvaWQgMCksXz1pKF8pLFI9PT12b2lkIDA/KFI9XyxfPTApOlI9aShSKSxUPVQ9PT12b2lkIDA/XzxSPzE6LTE6aShUKSxsXyhfLFIsVCxFKX19dEUuZXhwb3J0cz1LX30pO3ZhciBQRT1BKChlMCxvRSk9Pnt2YXIgcF89bkUoKSxtXz1wXygpO29FLmV4cG9ydHM9bV99KTt2YXIgeV89cyhFRSgpKSxYPXMoUEUoKSk7dmFyIFM9e0RFUFRIX0JVRkZFUl9CSVQ6MjU2LFNURU5DSUxfQlVGRkVSX0JJVDoxMDI0LENPTE9SX0JVRkZFUl9CSVQ6MTYzODQsUE9JTlRTOjAsTElORVM6MSxMSU5FX0xPT1A6MixMSU5FX1NUUklQOjMsVFJJQU5HTEVTOjQsVFJJQU5HTEVfU1RSSVA6NSxUUklBTkdMRV9GQU46NixaRVJPOjAsT05FOjEsU1JDX0NPTE9SOjc2OCxPTkVfTUlOVVNfU1JDX0NPTE9SOjc2OSxTUkNfQUxQSEE6NzcwLE9ORV9NSU5VU19TUkNfQUxQSEE6NzcxLERTVF9BTFBIQTo3NzIsT05FX01JTlVTX0RTVF9BTFBIQTo3NzMsRFNUX0NPTE9SOjc3NCxPTkVfTUlOVVNfRFNUX0NPTE9SOjc3NSxTUkNfQUxQSEFfU0FUVVJBVEU6Nzc2LENPTlNUQU5UX0NPTE9SOjMyNzY5LE9ORV9NSU5VU19DT05TVEFOVF9DT0xPUjozMjc3MCxDT05TVEFOVF9BTFBIQTozMjc3MSxPTkVfTUlOVVNfQ09OU1RBTlRfQUxQSEE6MzI3NzIsRlVOQ19BREQ6MzI3NzQsRlVOQ19TVUJUUkFDVDozMjc3OCxGVU5DX1JFVkVSU0VfU1VCVFJBQ1Q6MzI3NzksQkxFTkRfRVFVQVRJT046MzI3NzcsQkxFTkRfRVFVQVRJT05fUkdCOjMyNzc3LEJMRU5EX0VRVUFUSU9OX0FMUEhBOjM0ODc3LEJMRU5EX0RTVF9SR0I6MzI5NjgsQkxFTkRfU1JDX1JHQjozMjk2OSxCTEVORF9EU1RfQUxQSEE6MzI5NzAsQkxFTkRfU1JDX0FMUEhBOjMyOTcxLEJMRU5EX0NPTE9SOjMyNzczLEFSUkFZX0JVRkZFUl9CSU5ESU5HOjM0OTY0LEVMRU1FTlRfQVJSQVlfQlVGRkVSX0JJTkRJTkc6MzQ5NjUsTElORV9XSURUSDoyODQ5LEFMSUFTRURfUE9JTlRfU0laRV9SQU5HRTozMzkwMSxBTElBU0VEX0xJTkVfV0lEVEhfUkFOR0U6MzM5MDIsQ1VMTF9GQUNFX01PREU6Mjg4NSxGUk9OVF9GQUNFOjI4ODYsREVQVEhfUkFOR0U6MjkyOCxERVBUSF9XUklURU1BU0s6MjkzMCxERVBUSF9DTEVBUl9WQUxVRToyOTMxLERFUFRIX0ZVTkM6MjkzMixTVEVOQ0lMX0NMRUFSX1ZBTFVFOjI5NjEsU1RFTkNJTF9GVU5DOjI5NjIsU1RFTkNJTF9GQUlMOjI5NjQsU1RFTkNJTF9QQVNTX0RFUFRIX0ZBSUw6Mjk2NSxTVEVOQ0lMX1BBU1NfREVQVEhfUEFTUzoyOTY2LFNURU5DSUxfUkVGOjI5NjcsU1RFTkNJTF9WQUxVRV9NQVNLOjI5NjMsU1RFTkNJTF9XUklURU1BU0s6Mjk2OCxTVEVOQ0lMX0JBQ0tfRlVOQzozNDgxNixTVEVOQ0lMX0JBQ0tfRkFJTDozNDgxNyxTVEVOQ0lMX0JBQ0tfUEFTU19ERVBUSF9GQUlMOjM0ODE4LFNURU5DSUxfQkFDS19QQVNTX0RFUFRIX1BBU1M6MzQ4MTksU1RFTkNJTF9CQUNLX1JFRjozNjAwMyxTVEVOQ0lMX0JBQ0tfVkFMVUVfTUFTSzozNjAwNCxTVEVOQ0lMX0JBQ0tfV1JJVEVNQVNLOjM2MDA1LFZJRVdQT1JUOjI5NzgsU0NJU1NPUl9CT1g6MzA4OCxDT0xPUl9DTEVBUl9WQUxVRTozMTA2LENPTE9SX1dSSVRFTUFTSzozMTA3LFVOUEFDS19BTElHTk1FTlQ6MzMxNyxQQUNLX0FMSUdOTUVOVDozMzMzLE1BWF9URVhUVVJFX1NJWkU6MzM3OSxNQVhfVklFV1BPUlRfRElNUzozMzg2LFNVQlBJWEVMX0JJVFM6MzQwOCxSRURfQklUUzozNDEwLEdSRUVOX0JJVFM6MzQxMSxCTFVFX0JJVFM6MzQxMixBTFBIQV9CSVRTOjM0MTMsREVQVEhfQklUUzozNDE0LFNURU5DSUxfQklUUzozNDE1LFBPTFlHT05fT0ZGU0VUX1VOSVRTOjEwNzUyLFBPTFlHT05fT0ZGU0VUX0ZBQ1RPUjozMjgyNCxURVhUVVJFX0JJTkRJTkdfMkQ6MzI4NzMsU0FNUExFX0JVRkZFUlM6MzI5MzYsU0FNUExFUzozMjkzNyxTQU1QTEVfQ09WRVJBR0VfVkFMVUU6MzI5MzgsU0FNUExFX0NPVkVSQUdFX0lOVkVSVDozMjkzOSxDT01QUkVTU0VEX1RFWFRVUkVfRk9STUFUUzozNDQ2NyxWRU5ET1I6NzkzNixSRU5ERVJFUjo3OTM3LFZFUlNJT046NzkzOCxJTVBMRU1FTlRBVElPTl9DT0xPUl9SRUFEX1RZUEU6MzU3MzgsSU1QTEVNRU5UQVRJT05fQ09MT1JfUkVBRF9GT1JNQVQ6MzU3MzksQlJPV1NFUl9ERUZBVUxUX1dFQkdMOjM3NDQ0LFNUQVRJQ19EUkFXOjM1MDQ0LFNUUkVBTV9EUkFXOjM1MDQwLERZTkFNSUNfRFJBVzozNTA0OCxBUlJBWV9CVUZGRVI6MzQ5NjIsRUxFTUVOVF9BUlJBWV9CVUZGRVI6MzQ5NjMsQlVGRkVSX1NJWkU6MzQ2NjAsQlVGRkVSX1VTQUdFOjM0NjYxLENVUlJFTlRfVkVSVEVYX0FUVFJJQjozNDM0MixWRVJURVhfQVRUUklCX0FSUkFZX0VOQUJMRUQ6MzQzMzgsVkVSVEVYX0FUVFJJQl9BUlJBWV9TSVpFOjM0MzM5LFZFUlRFWF9BVFRSSUJfQVJSQVlfU1RSSURFOjM0MzQwLFZFUlRFWF9BVFRSSUJfQVJSQVlfVFlQRTozNDM0MSxWRVJURVhfQVRUUklCX0FSUkFZX05PUk1BTElaRUQ6MzQ5MjIsVkVSVEVYX0FUVFJJQl9BUlJBWV9QT0lOVEVSOjM0MzczLFZFUlRFWF9BVFRSSUJfQVJSQVlfQlVGRkVSX0JJTkRJTkc6MzQ5NzUsQ1VMTF9GQUNFOjI4ODQsRlJPTlQ6MTAyOCxCQUNLOjEwMjksRlJPTlRfQU5EX0JBQ0s6MTAzMixCTEVORDozMDQyLERFUFRIX1RFU1Q6MjkyOSxESVRIRVI6MzAyNCxQT0xZR09OX09GRlNFVF9GSUxMOjMyODIzLFNBTVBMRV9BTFBIQV9UT19DT1ZFUkFHRTozMjkyNixTQU1QTEVfQ09WRVJBR0U6MzI5MjgsU0NJU1NPUl9URVNUOjMwODksU1RFTkNJTF9URVNUOjI5NjAsTk9fRVJST1I6MCxJTlZBTElEX0VOVU06MTI4MCxJTlZBTElEX1ZBTFVFOjEyODEsSU5WQUxJRF9PUEVSQVRJT046MTI4MixPVVRfT0ZfTUVNT1JZOjEyODUsQ09OVEVYVF9MT1NUX1dFQkdMOjM3NDQyLENXOjIzMDQsQ0NXOjIzMDUsRE9OVF9DQVJFOjQzNTIsRkFTVEVTVDo0MzUzLE5JQ0VTVDo0MzU0LEdFTkVSQVRFX01JUE1BUF9ISU5UOjMzMTcwLEJZVEU6NTEyMCxVTlNJR05FRF9CWVRFOjUxMjEsU0hPUlQ6NTEyMixVTlNJR05FRF9TSE9SVDo1MTIzLElOVDo1MTI0LFVOU0lHTkVEX0lOVDo1MTI1LEZMT0FUOjUxMjYsRE9VQkxFOjUxMzAsREVQVEhfQ09NUE9ORU5UOjY0MDIsQUxQSEE6NjQwNixSR0I6NjQwNyxSR0JBOjY0MDgsTFVNSU5BTkNFOjY0MDksTFVNSU5BTkNFX0FMUEhBOjY0MTAsVU5TSUdORURfU0hPUlRfNF80XzRfNDozMjgxOSxVTlNJR05FRF9TSE9SVF81XzVfNV8xOjMyODIwLFVOU0lHTkVEX1NIT1JUXzVfNl81OjMzNjM1LEZSQUdNRU5UX1NIQURFUjozNTYzMixWRVJURVhfU0hBREVSOjM1NjMzLENPTVBJTEVfU1RBVFVTOjM1NzEzLERFTEVURV9TVEFUVVM6MzU3MTIsTElOS19TVEFUVVM6MzU3MTQsVkFMSURBVEVfU1RBVFVTOjM1NzE1LEFUVEFDSEVEX1NIQURFUlM6MzU3MTcsQUNUSVZFX0FUVFJJQlVURVM6MzU3MjEsQUNUSVZFX1VOSUZPUk1TOjM1NzE4LE1BWF9WRVJURVhfQVRUUklCUzozNDkyMSxNQVhfVkVSVEVYX1VOSUZPUk1fVkVDVE9SUzozNjM0NyxNQVhfVkFSWUlOR19WRUNUT1JTOjM2MzQ4LE1BWF9DT01CSU5FRF9URVhUVVJFX0lNQUdFX1VOSVRTOjM1NjYxLE1BWF9WRVJURVhfVEVYVFVSRV9JTUFHRV9VTklUUzozNTY2MCxNQVhfVEVYVFVSRV9JTUFHRV9VTklUUzozNDkzMCxNQVhfRlJBR01FTlRfVU5JRk9STV9WRUNUT1JTOjM2MzQ5LFNIQURFUl9UWVBFOjM1NjYzLFNIQURJTkdfTEFOR1VBR0VfVkVSU0lPTjozNTcyNCxDVVJSRU5UX1BST0dSQU06MzU3MjUsTkVWRVI6NTEyLEFMV0FZUzo1MTksTEVTUzo1MTMsRVFVQUw6NTE0LExFUVVBTDo1MTUsR1JFQVRFUjo1MTYsR0VRVUFMOjUxOCxOT1RFUVVBTDo1MTcsS0VFUDo3NjgwLFJFUExBQ0U6NzY4MSxJTkNSOjc2ODIsREVDUjo3NjgzLElOVkVSVDo1Mzg2LElOQ1JfV1JBUDozNDA1NSxERUNSX1dSQVA6MzQwNTYsTkVBUkVTVDo5NzI4LExJTkVBUjo5NzI5LE5FQVJFU1RfTUlQTUFQX05FQVJFU1Q6OTk4NCxMSU5FQVJfTUlQTUFQX05FQVJFU1Q6OTk4NSxORUFSRVNUX01JUE1BUF9MSU5FQVI6OTk4NixMSU5FQVJfTUlQTUFQX0xJTkVBUjo5OTg3LFRFWFRVUkVfTUFHX0ZJTFRFUjoxMDI0MCxURVhUVVJFX01JTl9GSUxURVI6MTAyNDEsVEVYVFVSRV9XUkFQX1M6MTAyNDIsVEVYVFVSRV9XUkFQX1Q6MTAyNDMsVEVYVFVSRV8yRDozNTUzLFRFWFRVUkU6NTg5MCxURVhUVVJFX0NVQkVfTUFQOjM0MDY3LFRFWFRVUkVfQklORElOR19DVUJFX01BUDozNDA2OCxURVhUVVJFX0NVQkVfTUFQX1BPU0lUSVZFX1g6MzQwNjksVEVYVFVSRV9DVUJFX01BUF9ORUdBVElWRV9YOjM0MDcwLFRFWFRVUkVfQ1VCRV9NQVBfUE9TSVRJVkVfWTozNDA3MSxURVhUVVJFX0NVQkVfTUFQX05FR0FUSVZFX1k6MzQwNzIsVEVYVFVSRV9DVUJFX01BUF9QT1NJVElWRV9aOjM0MDczLFRFWFRVUkVfQ1VCRV9NQVBfTkVHQVRJVkVfWjozNDA3NCxNQVhfQ1VCRV9NQVBfVEVYVFVSRV9TSVpFOjM0MDc2LFRFWFRVUkUwOjMzOTg0LEFDVElWRV9URVhUVVJFOjM0MDE2LFJFUEVBVDoxMDQ5NyxDTEFNUF9UT19FREdFOjMzMDcxLE1JUlJPUkVEX1JFUEVBVDozMzY0OCxURVhUVVJFX1dJRFRIOjQwOTYsVEVYVFVSRV9IRUlHSFQ6NDA5NyxGTE9BVF9WRUMyOjM1NjY0LEZMT0FUX1ZFQzM6MzU2NjUsRkxPQVRfVkVDNDozNTY2NixJTlRfVkVDMjozNTY2NyxJTlRfVkVDMzozNTY2OCxJTlRfVkVDNDozNTY2OSxCT09MOjM1NjcwLEJPT0xfVkVDMjozNTY3MSxCT09MX1ZFQzM6MzU2NzIsQk9PTF9WRUM0OjM1NjczLEZMT0FUX01BVDI6MzU2NzQsRkxPQVRfTUFUMzozNTY3NSxGTE9BVF9NQVQ0OjM1Njc2LFNBTVBMRVJfMkQ6MzU2NzgsU0FNUExFUl9DVUJFOjM1NjgwLExPV19GTE9BVDozNjMzNixNRURJVU1fRkxPQVQ6MzYzMzcsSElHSF9GTE9BVDozNjMzOCxMT1dfSU5UOjM2MzM5LE1FRElVTV9JTlQ6MzYzNDAsSElHSF9JTlQ6MzYzNDEsRlJBTUVCVUZGRVI6MzYxNjAsUkVOREVSQlVGRkVSOjM2MTYxLFJHQkE0OjMyODU0LFJHQjVfQTE6MzI4NTUsUkdCNTY1OjM2MTk0LERFUFRIX0NPTVBPTkVOVDE2OjMzMTg5LFNURU5DSUxfSU5ERVg6NjQwMSxTVEVOQ0lMX0lOREVYODozNjE2OCxERVBUSF9TVEVOQ0lMOjM0MDQxLFJFTkRFUkJVRkZFUl9XSURUSDozNjE2MixSRU5ERVJCVUZGRVJfSEVJR0hUOjM2MTYzLFJFTkRFUkJVRkZFUl9JTlRFUk5BTF9GT1JNQVQ6MzYxNjQsUkVOREVSQlVGRkVSX1JFRF9TSVpFOjM2MTc2LFJFTkRFUkJVRkZFUl9HUkVFTl9TSVpFOjM2MTc3LFJFTkRFUkJVRkZFUl9CTFVFX1NJWkU6MzYxNzgsUkVOREVSQlVGRkVSX0FMUEhBX1NJWkU6MzYxNzksUkVOREVSQlVGRkVSX0RFUFRIX1NJWkU6MzYxODAsUkVOREVSQlVGRkVSX1NURU5DSUxfU0laRTozNjE4MSxGUkFNRUJVRkZFUl9BVFRBQ0hNRU5UX09CSkVDVF9UWVBFOjM2MDQ4LEZSQU1FQlVGRkVSX0FUVEFDSE1FTlRfT0JKRUNUX05BTUU6MzYwNDksRlJBTUVCVUZGRVJfQVRUQUNITUVOVF9URVhUVVJFX0xFVkVMOjM2MDUwLEZSQU1FQlVGRkVSX0FUVEFDSE1FTlRfVEVYVFVSRV9DVUJFX01BUF9GQUNFOjM2MDUxLENPTE9SX0FUVEFDSE1FTlQwOjM2MDY0LERFUFRIX0FUVEFDSE1FTlQ6MzYwOTYsU1RFTkNJTF9BVFRBQ0hNRU5UOjM2MTI4LERFUFRIX1NURU5DSUxfQVRUQUNITUVOVDozMzMwNixOT05FOjAsRlJBTUVCVUZGRVJfQ09NUExFVEU6MzYwNTMsRlJBTUVCVUZGRVJfSU5DT01QTEVURV9BVFRBQ0hNRU5UOjM2MDU0LEZSQU1FQlVGRkVSX0lOQ09NUExFVEVfTUlTU0lOR19BVFRBQ0hNRU5UOjM2MDU1LEZSQU1FQlVGRkVSX0lOQ09NUExFVEVfRElNRU5TSU9OUzozNjA1NyxGUkFNRUJVRkZFUl9VTlNVUFBPUlRFRDozNjA2MSxGUkFNRUJVRkZFUl9CSU5ESU5HOjM2MDA2LFJFTkRFUkJVRkZFUl9CSU5ESU5HOjM2MDA3LFJFQURfRlJBTUVCVUZGRVI6MzYwMDgsRFJBV19GUkFNRUJVRkZFUjozNjAwOSxNQVhfUkVOREVSQlVGRkVSX1NJWkU6MzQwMjQsSU5WQUxJRF9GUkFNRUJVRkZFUl9PUEVSQVRJT046MTI4NixVTlBBQ0tfRkxJUF9ZX1dFQkdMOjM3NDQwLFVOUEFDS19QUkVNVUxUSVBMWV9BTFBIQV9XRUJHTDozNzQ0MSxVTlBBQ0tfQ09MT1JTUEFDRV9DT05WRVJTSU9OX1dFQkdMOjM3NDQzLFJFQURfQlVGRkVSOjMwNzQsVU5QQUNLX1JPV19MRU5HVEg6MzMxNCxVTlBBQ0tfU0tJUF9ST1dTOjMzMTUsVU5QQUNLX1NLSVBfUElYRUxTOjMzMTYsUEFDS19ST1dfTEVOR1RIOjMzMzAsUEFDS19TS0lQX1JPV1M6MzMzMSxQQUNLX1NLSVBfUElYRUxTOjMzMzIsVEVYVFVSRV9CSU5ESU5HXzNEOjMyODc0LFVOUEFDS19TS0lQX0lNQUdFUzozMjg3NyxVTlBBQ0tfSU1BR0VfSEVJR0hUOjMyODc4LE1BWF8zRF9URVhUVVJFX1NJWkU6MzI4ODMsTUFYX0VMRU1FTlRTX1ZFUlRJQ0VTOjMzZTMsTUFYX0VMRU1FTlRTX0lORElDRVM6MzMwMDEsTUFYX1RFWFRVUkVfTE9EX0JJQVM6MzQwNDUsTUFYX0ZSQUdNRU5UX1VOSUZPUk1fQ09NUE9ORU5UUzozNTY1NyxNQVhfVkVSVEVYX1VOSUZPUk1fQ09NUE9ORU5UUzozNTY1OCxNQVhfQVJSQVlfVEVYVFVSRV9MQVlFUlM6MzUwNzEsTUlOX1BST0dSQU1fVEVYRUxfT0ZGU0VUOjM1MDc2LE1BWF9QUk9HUkFNX1RFWEVMX09GRlNFVDozNTA3NyxNQVhfVkFSWUlOR19DT01QT05FTlRTOjM1NjU5LEZSQUdNRU5UX1NIQURFUl9ERVJJVkFUSVZFX0hJTlQ6MzU3MjMsUkFTVEVSSVpFUl9ESVNDQVJEOjM1OTc3LFZFUlRFWF9BUlJBWV9CSU5ESU5HOjM0MjI5LE1BWF9WRVJURVhfT1VUUFVUX0NPTVBPTkVOVFM6MzcxNTQsTUFYX0ZSQUdNRU5UX0lOUFVUX0NPTVBPTkVOVFM6MzcxNTcsTUFYX1NFUlZFUl9XQUlUX1RJTUVPVVQ6MzcxMzcsTUFYX0VMRU1FTlRfSU5ERVg6MzYyMDMsUkVEOjY0MDMsUkdCODozMjg0OSxSR0JBODozMjg1NixSR0IxMF9BMjozMjg1NyxURVhUVVJFXzNEOjMyODc5LFRFWFRVUkVfV1JBUF9SOjMyODgyLFRFWFRVUkVfTUlOX0xPRDozMzA4MixURVhUVVJFX01BWF9MT0Q6MzMwODMsVEVYVFVSRV9CQVNFX0xFVkVMOjMzMDg0LFRFWFRVUkVfTUFYX0xFVkVMOjMzMDg1LFRFWFRVUkVfQ09NUEFSRV9NT0RFOjM0ODkyLFRFWFRVUkVfQ09NUEFSRV9GVU5DOjM0ODkzLFNSR0I6MzU5MDQsU1JHQjg6MzU5MDUsU1JHQjhfQUxQSEE4OjM1OTA3LENPTVBBUkVfUkVGX1RPX1RFWFRVUkU6MzQ4OTQsUkdCQTMyRjozNDgzNixSR0IzMkY6MzQ4MzcsUkdCQTE2RjozNDg0MixSR0IxNkY6MzQ4NDMsVEVYVFVSRV8yRF9BUlJBWTozNTg2NixURVhUVVJFX0JJTkRJTkdfMkRfQVJSQVk6MzU4NjksUjExRl9HMTFGX0IxMEY6MzU4OTgsUkdCOV9FNTozNTkwMSxSR0JBMzJVSTozNjIwOCxSR0IzMlVJOjM2MjA5LFJHQkExNlVJOjM2MjE0LFJHQjE2VUk6MzYyMTUsUkdCQThVSTozNjIyMCxSR0I4VUk6MzYyMjEsUkdCQTMySTozNjIyNixSR0IzMkk6MzYyMjcsUkdCQTE2STozNjIzMixSR0IxNkk6MzYyMzMsUkdCQThJOjM2MjM4LFJHQjhJOjM2MjM5LFJFRF9JTlRFR0VSOjM2MjQ0LFJHQl9JTlRFR0VSOjM2MjQ4LFJHQkFfSU5URUdFUjozNjI0OSxSODozMzMyMSxSRzg6MzMzMjMsUjE2RjozMzMyNSxSMzJGOjMzMzI2LFJHMTZGOjMzMzI3LFJHMzJGOjMzMzI4LFI4STozMzMyOSxSOFVJOjMzMzMwLFIxNkk6MzMzMzEsUjE2VUk6MzMzMzIsUjMySTozMzMzMyxSMzJVSTozMzMzNCxSRzhJOjMzMzM1LFJHOFVJOjMzMzM2LFJHMTZJOjMzMzM3LFJHMTZVSTozMzMzOCxSRzMySTozMzMzOSxSRzMyVUk6MzMzNDAsUjhfU05PUk06MzY3NTYsUkc4X1NOT1JNOjM2NzU3LFJHQjhfU05PUk06MzY3NTgsUkdCQThfU05PUk06MzY3NTksUkdCMTBfQTJVSTozNjk3NSxURVhUVVJFX0lNTVVUQUJMRV9GT1JNQVQ6MzcxNjcsVEVYVFVSRV9JTU1VVEFCTEVfTEVWRUxTOjMzNTAzLFVOU0lHTkVEX0lOVF8yXzEwXzEwXzEwX1JFVjozMzY0MCxVTlNJR05FRF9JTlRfMTBGXzExRl8xMUZfUkVWOjM1ODk5LFVOU0lHTkVEX0lOVF81XzlfOV85X1JFVjozNTkwMixGTE9BVF8zMl9VTlNJR05FRF9JTlRfMjRfOF9SRVY6MzYyNjksVU5TSUdORURfSU5UXzI0Xzg6MzQwNDIsSEFMRl9GTE9BVDo1MTMxLFJHOjMzMzE5LFJHX0lOVEVHRVI6MzMzMjAsSU5UXzJfMTBfMTBfMTBfUkVWOjM2MjU1LENVUlJFTlRfUVVFUlk6MzQ5MTcsUVVFUllfUkVTVUxUOjM0OTE4LFFVRVJZX1JFU1VMVF9BVkFJTEFCTEU6MzQ5MTksQU5ZX1NBTVBMRVNfUEFTU0VEOjM1ODg3LEFOWV9TQU1QTEVTX1BBU1NFRF9DT05TRVJWQVRJVkU6MzYyMDIsTUFYX0RSQVdfQlVGRkVSUzozNDg1MixEUkFXX0JVRkZFUjA6MzQ4NTMsRFJBV19CVUZGRVIxOjM0ODU0LERSQVdfQlVGRkVSMjozNDg1NSxEUkFXX0JVRkZFUjM6MzQ4NTYsRFJBV19CVUZGRVI0OjM0ODU3LERSQVdfQlVGRkVSNTozNDg1OCxEUkFXX0JVRkZFUjY6MzQ4NTksRFJBV19CVUZGRVI3OjM0ODYwLERSQVdfQlVGRkVSODozNDg2MSxEUkFXX0JVRkZFUjk6MzQ4NjIsRFJBV19CVUZGRVIxMDozNDg2MyxEUkFXX0JVRkZFUjExOjM0ODY0LERSQVdfQlVGRkVSMTI6MzQ4NjUsRFJBV19CVUZGRVIxMzozNDg2NixEUkFXX0JVRkZFUjE0OjM0ODY3LERSQVdfQlVGRkVSMTU6MzQ4NjgsTUFYX0NPTE9SX0FUVEFDSE1FTlRTOjM2MDYzLENPTE9SX0FUVEFDSE1FTlQxOjM2MDY1LENPTE9SX0FUVEFDSE1FTlQyOjM2MDY2LENPTE9SX0FUVEFDSE1FTlQzOjM2MDY3LENPTE9SX0FUVEFDSE1FTlQ0OjM2MDY4LENPTE9SX0FUVEFDSE1FTlQ1OjM2MDY5LENPTE9SX0FUVEFDSE1FTlQ2OjM2MDcwLENPTE9SX0FUVEFDSE1FTlQ3OjM2MDcxLENPTE9SX0FUVEFDSE1FTlQ4OjM2MDcyLENPTE9SX0FUVEFDSE1FTlQ5OjM2MDczLENPTE9SX0FUVEFDSE1FTlQxMDozNjA3NCxDT0xPUl9BVFRBQ0hNRU5UMTE6MzYwNzUsQ09MT1JfQVRUQUNITUVOVDEyOjM2MDc2LENPTE9SX0FUVEFDSE1FTlQxMzozNjA3NyxDT0xPUl9BVFRBQ0hNRU5UMTQ6MzYwNzgsQ09MT1JfQVRUQUNITUVOVDE1OjM2MDc5LFNBTVBMRVJfM0Q6MzU2NzksU0FNUExFUl8yRF9TSEFET1c6MzU2ODIsU0FNUExFUl8yRF9BUlJBWTozNjI4OSxTQU1QTEVSXzJEX0FSUkFZX1NIQURPVzozNjI5MixTQU1QTEVSX0NVQkVfU0hBRE9XOjM2MjkzLElOVF9TQU1QTEVSXzJEOjM2Mjk4LElOVF9TQU1QTEVSXzNEOjM2Mjk5LElOVF9TQU1QTEVSX0NVQkU6MzYzMDAsSU5UX1NBTVBMRVJfMkRfQVJSQVk6MzYzMDMsVU5TSUdORURfSU5UX1NBTVBMRVJfMkQ6MzYzMDYsVU5TSUdORURfSU5UX1NBTVBMRVJfM0Q6MzYzMDcsVU5TSUdORURfSU5UX1NBTVBMRVJfQ1VCRTozNjMwOCxVTlNJR05FRF9JTlRfU0FNUExFUl8yRF9BUlJBWTozNjMxMSxNQVhfU0FNUExFUzozNjE4MyxTQU1QTEVSX0JJTkRJTkc6MzUwOTcsUElYRUxfUEFDS19CVUZGRVI6MzUwNTEsUElYRUxfVU5QQUNLX0JVRkZFUjozNTA1MixQSVhFTF9QQUNLX0JVRkZFUl9CSU5ESU5HOjM1MDUzLFBJWEVMX1VOUEFDS19CVUZGRVJfQklORElORzozNTA1NSxDT1BZX1JFQURfQlVGRkVSOjM2NjYyLENPUFlfV1JJVEVfQlVGRkVSOjM2NjYzLENPUFlfUkVBRF9CVUZGRVJfQklORElORzozNjY2MixDT1BZX1dSSVRFX0JVRkZFUl9CSU5ESU5HOjM2NjYzLEZMT0FUX01BVDJ4MzozNTY4NSxGTE9BVF9NQVQyeDQ6MzU2ODYsRkxPQVRfTUFUM3gyOjM1Njg3LEZMT0FUX01BVDN4NDozNTY4OCxGTE9BVF9NQVQ0eDI6MzU2ODksRkxPQVRfTUFUNHgzOjM1NjkwLFVOU0lHTkVEX0lOVF9WRUMyOjM2Mjk0LFVOU0lHTkVEX0lOVF9WRUMzOjM2Mjk1LFVOU0lHTkVEX0lOVF9WRUM0OjM2Mjk2LFVOU0lHTkVEX05PUk1BTElaRUQ6MzU4NjMsU0lHTkVEX05PUk1BTElaRUQ6MzY3NjQsVkVSVEVYX0FUVFJJQl9BUlJBWV9JTlRFR0VSOjM1MDY5LFZFUlRFWF9BVFRSSUJfQVJSQVlfRElWSVNPUjozNTA3MCxUUkFOU0ZPUk1fRkVFREJBQ0tfQlVGRkVSX01PREU6MzU5NjcsTUFYX1RSQU5TRk9STV9GRUVEQkFDS19TRVBBUkFURV9DT01QT05FTlRTOjM1OTY4LFRSQU5TRk9STV9GRUVEQkFDS19WQVJZSU5HUzozNTk3MSxUUkFOU0ZPUk1fRkVFREJBQ0tfQlVGRkVSX1NUQVJUOjM1OTcyLFRSQU5TRk9STV9GRUVEQkFDS19CVUZGRVJfU0laRTozNTk3MyxUUkFOU0ZPUk1fRkVFREJBQ0tfUFJJTUlUSVZFU19XUklUVEVOOjM1OTc2LE1BWF9UUkFOU0ZPUk1fRkVFREJBQ0tfSU5URVJMRUFWRURfQ09NUE9ORU5UUzozNTk3OCxNQVhfVFJBTlNGT1JNX0ZFRURCQUNLX1NFUEFSQVRFX0FUVFJJQlM6MzU5NzksSU5URVJMRUFWRURfQVRUUklCUzozNTk4MCxTRVBBUkFURV9BVFRSSUJTOjM1OTgxLFRSQU5TRk9STV9GRUVEQkFDS19CVUZGRVI6MzU5ODIsVFJBTlNGT1JNX0ZFRURCQUNLX0JVRkZFUl9CSU5ESU5HOjM1OTgzLFRSQU5TRk9STV9GRUVEQkFDSzozNjM4NixUUkFOU0ZPUk1fRkVFREJBQ0tfUEFVU0VEOjM2Mzg3LFRSQU5TRk9STV9GRUVEQkFDS19BQ1RJVkU6MzYzODgsVFJBTlNGT1JNX0ZFRURCQUNLX0JJTkRJTkc6MzYzODksRlJBTUVCVUZGRVJfQVRUQUNITUVOVF9DT0xPUl9FTkNPRElORzozMzI5NixGUkFNRUJVRkZFUl9BVFRBQ0hNRU5UX0NPTVBPTkVOVF9UWVBFOjMzMjk3LEZSQU1FQlVGRkVSX0FUVEFDSE1FTlRfUkVEX1NJWkU6MzMyOTgsRlJBTUVCVUZGRVJfQVRUQUNITUVOVF9HUkVFTl9TSVpFOjMzMjk5LEZSQU1FQlVGRkVSX0FUVEFDSE1FTlRfQkxVRV9TSVpFOjMzMzAwLEZSQU1FQlVGRkVSX0FUVEFDSE1FTlRfQUxQSEFfU0laRTozMzMwMSxGUkFNRUJVRkZFUl9BVFRBQ0hNRU5UX0RFUFRIX1NJWkU6MzMzMDIsRlJBTUVCVUZGRVJfQVRUQUNITUVOVF9TVEVOQ0lMX1NJWkU6MzMzMDMsRlJBTUVCVUZGRVJfREVGQVVMVDozMzMwNCxERVBUSDI0X1NURU5DSUw4OjM1MDU2LERSQVdfRlJBTUVCVUZGRVJfQklORElORzozNjAwNixSRUFEX0ZSQU1FQlVGRkVSX0JJTkRJTkc6MzYwMTAsUkVOREVSQlVGRkVSX1NBTVBMRVM6MzYwMTEsRlJBTUVCVUZGRVJfQVRUQUNITUVOVF9URVhUVVJFX0xBWUVSOjM2MDUyLEZSQU1FQlVGRkVSX0lOQ09NUExFVEVfTVVMVElTQU1QTEU6MzYxODIsVU5JRk9STV9CVUZGRVI6MzUzNDUsVU5JRk9STV9CVUZGRVJfQklORElORzozNTM2OCxVTklGT1JNX0JVRkZFUl9TVEFSVDozNTM2OSxVTklGT1JNX0JVRkZFUl9TSVpFOjM1MzcwLE1BWF9WRVJURVhfVU5JRk9STV9CTE9DS1M6MzUzNzEsTUFYX0ZSQUdNRU5UX1VOSUZPUk1fQkxPQ0tTOjM1MzczLE1BWF9DT01CSU5FRF9VTklGT1JNX0JMT0NLUzozNTM3NCxNQVhfVU5JRk9STV9CVUZGRVJfQklORElOR1M6MzUzNzUsTUFYX1VOSUZPUk1fQkxPQ0tfU0laRTozNTM3NixNQVhfQ09NQklORURfVkVSVEVYX1VOSUZPUk1fQ09NUE9ORU5UUzozNTM3NyxNQVhfQ09NQklORURfRlJBR01FTlRfVU5JRk9STV9DT01QT05FTlRTOjM1Mzc5LFVOSUZPUk1fQlVGRkVSX09GRlNFVF9BTElHTk1FTlQ6MzUzODAsQUNUSVZFX1VOSUZPUk1fQkxPQ0tTOjM1MzgyLFVOSUZPUk1fVFlQRTozNTM4MyxVTklGT1JNX1NJWkU6MzUzODQsVU5JRk9STV9CTE9DS19JTkRFWDozNTM4NixVTklGT1JNX09GRlNFVDozNTM4NyxVTklGT1JNX0FSUkFZX1NUUklERTozNTM4OCxVTklGT1JNX01BVFJJWF9TVFJJREU6MzUzODksVU5JRk9STV9JU19ST1dfTUFKT1I6MzUzOTAsVU5JRk9STV9CTE9DS19CSU5ESU5HOjM1MzkxLFVOSUZPUk1fQkxPQ0tfREFUQV9TSVpFOjM1MzkyLFVOSUZPUk1fQkxPQ0tfQUNUSVZFX1VOSUZPUk1TOjM1Mzk0LFVOSUZPUk1fQkxPQ0tfQUNUSVZFX1VOSUZPUk1fSU5ESUNFUzozNTM5NSxVTklGT1JNX0JMT0NLX1JFRkVSRU5DRURfQllfVkVSVEVYX1NIQURFUjozNTM5NixVTklGT1JNX0JMT0NLX1JFRkVSRU5DRURfQllfRlJBR01FTlRfU0hBREVSOjM1Mzk4LE9CSkVDVF9UWVBFOjM3MTM4LFNZTkNfQ09ORElUSU9OOjM3MTM5LFNZTkNfU1RBVFVTOjM3MTQwLFNZTkNfRkxBR1M6MzcxNDEsU1lOQ19GRU5DRTozNzE0MixTWU5DX0dQVV9DT01NQU5EU19DT01QTEVURTozNzE0MyxVTlNJR05BTEVEOjM3MTQ0LFNJR05BTEVEOjM3MTQ1LEFMUkVBRFlfU0lHTkFMRUQ6MzcxNDYsVElNRU9VVF9FWFBJUkVEOjM3MTQ3LENPTkRJVElPTl9TQVRJU0ZJRUQ6MzcxNDgsV0FJVF9GQUlMRUQ6MzcxNDksU1lOQ19GTFVTSF9DT01NQU5EU19CSVQ6MSxDT0xPUjo2MTQ0LERFUFRIOjYxNDUsU1RFTkNJTDo2MTQ2LE1JTjozMjc3NSxNQVg6MzI3NzYsREVQVEhfQ09NUE9ORU5UMjQ6MzMxOTAsU1RSRUFNX1JFQUQ6MzUwNDEsU1RSRUFNX0NPUFk6MzUwNDIsU1RBVElDX1JFQUQ6MzUwNDUsU1RBVElDX0NPUFk6MzUwNDYsRFlOQU1JQ19SRUFEOjM1MDQ5LERZTkFNSUNfQ09QWTozNTA1MCxERVBUSF9DT01QT05FTlQzMkY6MzYwMTIsREVQVEgzMkZfU1RFTkNJTDg6MzYwMTMsSU5WQUxJRF9JTkRFWDo0Mjk0OTY3Mjk1LFRJTUVPVVRfSUdOT1JFRDotMSxNQVhfQ0xJRU5UX1dBSVRfVElNRU9VVF9XRUJHTDozNzQ0NyxWRVJURVhfQVRUUklCX0FSUkFZX0RJVklTT1JfQU5HTEU6MzUwNzAsVU5NQVNLRURfVkVORE9SX1dFQkdMOjM3NDQ1LFVOTUFTS0VEX1JFTkRFUkVSX1dFQkdMOjM3NDQ2LE1BWF9URVhUVVJFX01BWF9BTklTT1RST1BZX0VYVDozNDA0NyxURVhUVVJFX01BWF9BTklTT1RST1BZX0VYVDozNDA0NixDT01QUkVTU0VEX1JHQl9TM1RDX0RYVDFfRVhUOjMzNzc2LENPTVBSRVNTRURfUkdCQV9TM1RDX0RYVDFfRVhUOjMzNzc3LENPTVBSRVNTRURfUkdCQV9TM1RDX0RYVDNfRVhUOjMzNzc4LENPTVBSRVNTRURfUkdCQV9TM1RDX0RYVDVfRVhUOjMzNzc5LENPTVBSRVNTRURfUjExX0VBQzozNzQ4OCxDT01QUkVTU0VEX1NJR05FRF9SMTFfRUFDOjM3NDg5LENPTVBSRVNTRURfUkcxMV9FQUM6Mzc0OTAsQ09NUFJFU1NFRF9TSUdORURfUkcxMV9FQUM6Mzc0OTEsQ09NUFJFU1NFRF9SR0I4X0VUQzI6Mzc0OTIsQ09NUFJFU1NFRF9SR0JBOF9FVEMyX0VBQzozNzQ5MyxDT01QUkVTU0VEX1NSR0I4X0VUQzI6Mzc0OTQsQ09NUFJFU1NFRF9TUkdCOF9BTFBIQThfRVRDMl9FQUM6Mzc0OTUsQ09NUFJFU1NFRF9SR0I4X1BVTkNIVEhST1VHSF9BTFBIQTFfRVRDMjozNzQ5NixDT01QUkVTU0VEX1NSR0I4X1BVTkNIVEhST1VHSF9BTFBIQTFfRVRDMjozNzQ5NyxDT01QUkVTU0VEX1JHQl9QVlJUQ180QlBQVjFfSU1HOjM1ODQwLENPTVBSRVNTRURfUkdCQV9QVlJUQ180QlBQVjFfSU1HOjM1ODQyLENPTVBSRVNTRURfUkdCX1BWUlRDXzJCUFBWMV9JTUc6MzU4NDEsQ09NUFJFU1NFRF9SR0JBX1BWUlRDXzJCUFBWMV9JTUc6MzU4NDMsQ09NUFJFU1NFRF9SR0JfRVRDMV9XRUJHTDozNjE5NixDT01QUkVTU0VEX1JHQl9BVENfV0VCR0w6MzU5ODYsQ09NUFJFU1NFRF9SR0JBX0FUQ19FWFBMSUNJVF9BTFBIQV9XRUJHTDozNTk4NixDT01QUkVTU0VEX1JHQkFfQVRDX0lOVEVSUE9MQVRFRF9BTFBIQV9XRUJHTDozNDc5OCxVTlNJR05FRF9JTlRfMjRfOF9XRUJHTDozNDA0MixIQUxGX0ZMT0FUX09FUzozNjE5MyxSR0JBMzJGX0VYVDozNDgzNixSR0IzMkZfRVhUOjM0ODM3LEZSQU1FQlVGRkVSX0FUVEFDSE1FTlRfQ09NUE9ORU5UX1RZUEVfRVhUOjMzMjk3LFVOU0lHTkVEX05PUk1BTElaRURfRVhUOjM1ODYzLE1JTl9FWFQ6MzI3NzUsTUFYX0VYVDozMjc3NixTUkdCX0VYVDozNTkwNCxTUkdCX0FMUEhBX0VYVDozNTkwNixTUkdCOF9BTFBIQThfRVhUOjM1OTA3LEZSQU1FQlVGRkVSX0FUVEFDSE1FTlRfQ09MT1JfRU5DT0RJTkdfRVhUOjMzMjk2LEZSQUdNRU5UX1NIQURFUl9ERVJJVkFUSVZFX0hJTlRfT0VTOjM1NzIzLENPTE9SX0FUVEFDSE1FTlQwX1dFQkdMOjM2MDY0LENPTE9SX0FUVEFDSE1FTlQxX1dFQkdMOjM2MDY1LENPTE9SX0FUVEFDSE1FTlQyX1dFQkdMOjM2MDY2LENPTE9SX0FUVEFDSE1FTlQzX1dFQkdMOjM2MDY3LENPTE9SX0FUVEFDSE1FTlQ0X1dFQkdMOjM2MDY4LENPTE9SX0FUVEFDSE1FTlQ1X1dFQkdMOjM2MDY5LENPTE9SX0FUVEFDSE1FTlQ2X1dFQkdMOjM2MDcwLENPTE9SX0FUVEFDSE1FTlQ3X1dFQkdMOjM2MDcxLENPTE9SX0FUVEFDSE1FTlQ4X1dFQkdMOjM2MDcyLENPTE9SX0FUVEFDSE1FTlQ5X1dFQkdMOjM2MDczLENPTE9SX0FUVEFDSE1FTlQxMF9XRUJHTDozNjA3NCxDT0xPUl9BVFRBQ0hNRU5UMTFfV0VCR0w6MzYwNzUsQ09MT1JfQVRUQUNITUVOVDEyX1dFQkdMOjM2MDc2LENPTE9SX0FUVEFDSE1FTlQxM19XRUJHTDozNjA3NyxDT0xPUl9BVFRBQ0hNRU5UMTRfV0VCR0w6MzYwNzgsQ09MT1JfQVRUQUNITUVOVDE1X1dFQkdMOjM2MDc5LERSQVdfQlVGRkVSMF9XRUJHTDozNDg1MyxEUkFXX0JVRkZFUjFfV0VCR0w6MzQ4NTQsRFJBV19CVUZGRVIyX1dFQkdMOjM0ODU1LERSQVdfQlVGRkVSM19XRUJHTDozNDg1NixEUkFXX0JVRkZFUjRfV0VCR0w6MzQ4NTcsRFJBV19CVUZGRVI1X1dFQkdMOjM0ODU4LERSQVdfQlVGRkVSNl9XRUJHTDozNDg1OSxEUkFXX0JVRkZFUjdfV0VCR0w6MzQ4NjAsRFJBV19CVUZGRVI4X1dFQkdMOjM0ODYxLERSQVdfQlVGRkVSOV9XRUJHTDozNDg2MixEUkFXX0JVRkZFUjEwX1dFQkdMOjM0ODYzLERSQVdfQlVGRkVSMTFfV0VCR0w6MzQ4NjQsRFJBV19CVUZGRVIxMl9XRUJHTDozNDg2NSxEUkFXX0JVRkZFUjEzX1dFQkdMOjM0ODY2LERSQVdfQlVGRkVSMTRfV0VCR0w6MzQ4NjcsRFJBV19CVUZGRVIxNV9XRUJHTDozNDg2OCxNQVhfQ09MT1JfQVRUQUNITUVOVFNfV0VCR0w6MzYwNjMsTUFYX0RSQVdfQlVGRkVSU19XRUJHTDozNDg1MixWRVJURVhfQVJSQVlfQklORElOR19PRVM6MzQyMjksUVVFUllfQ09VTlRFUl9CSVRTX0VYVDozNDkxNixDVVJSRU5UX1FVRVJZX0VYVDozNDkxNyxRVUVSWV9SRVNVTFRfRVhUOjM0OTE4LFFVRVJZX1JFU1VMVF9BVkFJTEFCTEVfRVhUOjM0OTE5LFRJTUVfRUxBUFNFRF9FWFQ6MzUwMDcsVElNRVNUQU1QX0VYVDozNjM5MixHUFVfRElTSk9JTlRfRVhUOjM2Nzk1fTt2YXIgVTA9e1tTLlRFWFRVUkVfTUlOX0ZJTFRFUl06Uy5ORUFSRVNULFtTLlRFWFRVUkVfTUFHX0ZJTFRFUl06Uy5ORUFSRVNULFtTLlRFWFRVUkVfV1JBUF9TXTpTLkNMQU1QX1RPX0VER0UsW1MuVEVYVFVSRV9XUkFQX1RdOlMuQ0xBTVBfVE9fRURHRX07ZnVuY3Rpb24gR0UoRSx7dGlsZVNpemU6Xyx0aWxlSTpSLHRpbGVKOlQsbnVtQ2VsbHM6TixudW1HZW5lczp4LGNlbGxPcmRlcmluZzpPLGNlbGxzOkN9KXtsZXQgZT1uZXcgVWludDhBcnJheShfKl8pLEwsTSxJLEIsRixVPSgwLFguZGVmYXVsdCkoXyk7cmV0dXJuIFUuZm9yRWFjaChEPT57ST1UKl8rRCxJPE4mJihGPUMuaW5kZXhPZihPW0ldKSxGPj0tMSYmVS5mb3JFYWNoKHQ9PntCPVIqXyt0LE09RVtGKngrQl0sTD0oXy10LTEpKl8rRCxlW0xdPU19KSl9KSxlfWZ1bmN0aW9uIHJFKEUse3RpbGVTaXplOl8sdGlsZUk6Uix0aWxlSjpULG51bUNlbGxzOk4sbnVtR2VuZXM6eCxjZWxsT3JkZXJpbmc6TyxjZWxsczpDfSl7bGV0IGU9bmV3IFVpbnQ4QXJyYXkoXypfKSxMLE0sSSxCLEYsVT0oMCxYLmRlZmF1bHQpKF8pO3JldHVybiBVLmZvckVhY2goRD0+e0k9UipfK0QsSTxOJiYoRj1DLmluZGV4T2YoT1tJXSksRj49LTEmJlUuZm9yRWFjaCh0PT57Qj1UKl8rdCxCPHg/TT1FW0YqeCtCXTpNPTAsTD0oXy1ELTEpKl8rdCxlW0xdPU19KSl9KSxlfWZ1bmN0aW9uIFpfKHtjdXJyOkUsdGlsZUk6Xyx0aWxlSjpSLHRpbGVTaXplOlQsY2VsbE9yZGVyaW5nOk4scm93czp4LGNvbHM6TyxkYXRhOkMsdHJhbnNwb3NlOmV9KXtsZXQgTD1uZXcgVWludDhBcnJheShDKSxNPU8ubGVuZ3RoLEk9Ti5sZW5ndGg7cmV0dXJuW3t0aWxlOihlP0dFOnJFKShMLHt0aWxlU2l6ZTpULHRpbGVJOl8sdGlsZUo6UixudW1DZWxsczpJLG51bUdlbmVzOk0sY2VsbE9yZGVyaW5nOk4sY2VsbHM6eH0pLGJ1ZmZlcjpDLGN1cnI6RX0sW0NdXX1pZih0eXBlb2Ygc2VsZiE9InVuZGVmaW5lZCIpe2xldCBFPXtnZXRUaWxlOlpffTtzZWxmLmFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLF89Pnt0cnl7bGV0W1IsVF09Xy5kYXRhLFtOLHhdPUVbUl0oVCk7c2VsZi5wb3N0TWVzc2FnZShOLHgpfWNhdGNoKFIpe2NvbnNvbGUud2FybihSKX19KX19KSgpOwo=\";\nvar blob2 = typeof window !== \"undefined\" && window.Blob && new Blob([atob(encodedJs2)], {\n  type: \"text/javascript;charset=utf-8\"\n});\n\nfunction heatmap_default() {\n  const objURL = blob2 && (window.URL || window.webkitURL).createObjectURL(blob2);\n\n  try {\n    return objURL ? new Worker(objURL) : new Worker(\"data:application/javascript;base64,\" + encodedJs2, {\n      type: \"module\"\n    });\n  } finally {\n    objURL && (window.URL || window.webkitURL).revokeObjectURL(objURL);\n  }\n} // src/Pool.js\n\n\nvar defaultPoolSize2 = typeof navigator !== \"undefined\" ? navigator.hardwareConcurrency || 4 : null;\nvar Pool2 = class {\n  constructor(Worker2) {\n    this.workers = [];\n    this.idleWorkers = [];\n    this.waitQueue = [];\n    this.decoder = null;\n\n    for (let i = 0; i < defaultPoolSize2; ++i) {\n      const w = new Worker2();\n      this.workers.push(w);\n      this.idleWorkers.push(w);\n    }\n  }\n\n  process() {\n    return __async(this, null, function* () {\n      throw new Error('Pool needs to implement \"process\" method');\n    });\n  }\n\n  waitForWorker() {\n    return __async(this, null, function* () {\n      const idleWorker = this.idleWorkers.pop();\n\n      if (idleWorker) {\n        return idleWorker;\n      }\n\n      const waiter = {};\n      const promise = new Promise(resolve => {\n        waiter.resolve = resolve;\n      });\n      this.waitQueue.push(waiter);\n      return promise;\n    });\n  }\n\n  finishTask(currentWorker) {\n    return __async(this, null, function* () {\n      const waiter = this.waitQueue.pop();\n\n      if (waiter) {\n        waiter.resolve(currentWorker);\n      } else {\n        this.idleWorkers.push(currentWorker);\n      }\n    });\n  }\n\n  destroy() {\n    for (let i = 0; i < this.workers.length; ++i) {\n      this.workers[i].terminate();\n    }\n  }\n\n}; // src/components/heatmap/HeatmapWorkerPool.js\n\nvar HeatmapPool = class extends Pool2 {\n  constructor() {\n    super(heatmap_default);\n  }\n\n  process(args) {\n    return __async(this, null, function* () {\n      const currentWorker = yield this.waitForWorker();\n      return new Promise((resolve, reject) => {\n        currentWorker.onmessage = event => {\n          this.finishTask(currentWorker);\n          resolve(event.data);\n        };\n\n        currentWorker.onerror = error => {\n          this.finishTask(currentWorker);\n          reject(error);\n        };\n\n        currentWorker.postMessage([\"getTile\", args], [args.data]);\n      });\n    });\n  }\n\n}; // src/components/heatmap/Heatmap.js\n\nvar Heatmap = forwardRef((props, deckRef) => {\n  const {\n    uuid,\n    theme,\n    viewState: rawViewState,\n    setViewState,\n    width: viewWidth,\n    height: viewHeight,\n    expressionMatrix: expression,\n    cellColors,\n    colormap,\n    colormapRange,\n    clearPleaseWait,\n    setComponentHover,\n    setCellHighlight = createDefaultUpdateCellsHover(\"Heatmap\"),\n    setGeneHighlight = createDefaultUpdateGenesHover(\"Heatmap\"),\n    updateViewInfo = createDefaultUpdateViewInfo(\"Heatmap\"),\n    setIsRendering = () => {},\n    transpose = false,\n    variablesTitle = \"Genes\",\n    observationsTitle = \"Cells\"\n  } = props;\n\n  const viewState = __spreadProps(__spreadValues({}, rawViewState), {\n    target: transpose ? [rawViewState.target[1], rawViewState.target[0]] : rawViewState.target,\n    minZoom: 0\n  });\n\n  const axisLeftTitle = transpose ? variablesTitle : observationsTitle;\n  const axisTopTitle = transpose ? observationsTitle : variablesTitle;\n  const workerPool = useMemo4(() => new HeatmapPool(), []);\n  useEffect3(() => {\n    if (clearPleaseWait && expression) {\n      clearPleaseWait(\"expression-matrix\");\n    }\n  }, [clearPleaseWait, expression]);\n  const tilesRef = useRef4();\n  const dataRef = useRef4();\n  const [axisLeftLabels, setAxisLeftLabels] = useState5([]);\n  const [axisTopLabels, setAxisTopLabels] = useState5([]);\n  const [tileIteration, incTileIteration] = useReducer(i => i + 1, 0);\n  const [backlog, setBacklog] = useState5([]);\n  useEffect3(() => {\n    if (expression && expression.matrix) {\n      dataRef.current = copyUint8Array(expression.matrix);\n    }\n  }, [dataRef, expression]);\n  useEffect3(() => {\n    if (!expression) {\n      return;\n    }\n\n    const newCellOrdering = !cellColors || cellColors.size === 0 ? expression.rows : Array.from(cellColors.keys());\n    const oldCellOrdering = transpose ? axisTopLabels : axisLeftLabels;\n\n    if (!isEqual3(oldCellOrdering, newCellOrdering)) {\n      if (transpose) {\n        setAxisTopLabels(newCellOrdering);\n      } else {\n        setAxisLeftLabels(newCellOrdering);\n      }\n    }\n  }, [expression, cellColors, axisTopLabels, axisLeftLabels, transpose]);\n  useEffect3(() => {\n    if (!expression) {\n      return;\n    }\n\n    if (transpose) {\n      setAxisLeftLabels(expression.cols);\n    } else {\n      setAxisTopLabels(expression.cols);\n    }\n  }, [expression, transpose]);\n  const [cellLabelMaxLength, geneLabelMaxLength] = useMemo4(() => {\n    if (!expression) {\n      return [0, 0];\n    }\n\n    return [max(expression.rows.map(cellId => cellId.length)), max(expression.cols.map(geneId => geneId.length))];\n  }, [expression]);\n  const width = axisTopLabels.length;\n  const height = axisLeftLabels.length;\n  const [axisOffsetLeft, axisOffsetTop] = getAxisSizes(transpose, geneLabelMaxLength, cellLabelMaxLength);\n  const offsetTop = axisOffsetTop + COLOR_BAR_SIZE;\n  const offsetLeft = axisOffsetLeft + COLOR_BAR_SIZE;\n  const matrixWidth = viewWidth - offsetLeft;\n  const matrixHeight = viewHeight - offsetTop;\n  const matrixLeft = -matrixWidth / 2;\n  const matrixRight = matrixWidth / 2;\n  const matrixTop = -matrixHeight / 2;\n  const matrixBottom = matrixHeight / 2;\n  const xTiles = Math.ceil(width / TILE_SIZE);\n  const yTiles = Math.ceil(height / TILE_SIZE);\n  const widthRatio = 1 - (TILE_SIZE - width % TILE_SIZE) / (xTiles * TILE_SIZE);\n  const heightRatio = 1 - (TILE_SIZE - height % TILE_SIZE) / (yTiles * TILE_SIZE);\n  const tileWidth = matrixWidth / widthRatio / xTiles;\n  const tileHeight = matrixHeight / heightRatio / yTiles;\n\n  const scaleFactor = __pow(2, viewState.zoom);\n\n  const cellHeight = matrixHeight * scaleFactor / height;\n  const cellWidth = matrixWidth * scaleFactor / width;\n  const aggSizeX = clamp2(__pow(2, Math.ceil(Math.log2(1 / cellWidth))), MIN_ROW_AGG, MAX_ROW_AGG);\n  const aggSizeY = clamp2(__pow(2, Math.ceil(Math.log2(1 / cellHeight))), MIN_ROW_AGG, MAX_ROW_AGG);\n  const [targetX, targetY] = viewState.target;\n  useEffect3(() => {\n    updateViewInfo({\n      uuid,\n      project: (cellId, geneId) => {\n        const colI = transpose ? axisTopLabels.indexOf(cellId) : axisTopLabels.indexOf(geneId);\n        const rowI = transpose ? axisLeftLabels.indexOf(geneId) : axisLeftLabels.indexOf(cellId);\n        return heatmapToMousePosition(colI, rowI, {\n          offsetLeft,\n          offsetTop,\n          targetX: viewState.target[0],\n          targetY: viewState.target[1],\n          scaleFactor,\n          matrixWidth,\n          matrixHeight,\n          numRows: height,\n          numCols: width\n        });\n      }\n    });\n  }, [uuid, updateViewInfo, transpose, axisTopLabels, axisLeftLabels, offsetLeft, offsetTop, viewState, scaleFactor, matrixWidth, matrixHeight, height, width]);\n  const onViewStateChange = useCallback3(_ref41 => {\n    let {\n      viewState: nextViewState\n    } = _ref41;\n    const {\n      zoom: nextZoom\n    } = nextViewState;\n\n    const nextScaleFactor = __pow(2, nextZoom);\n\n    const minTargetX = nextZoom === 0 ? 0 : -(matrixRight - matrixRight / nextScaleFactor);\n    const maxTargetX = -1 * minTargetX;\n    const minTargetY = nextZoom === 0 ? 0 : -(matrixBottom - matrixBottom / nextScaleFactor);\n    const maxTargetY = -1 * minTargetY;\n    const nextTarget = [clamp2(nextViewState.target[0], minTargetX, maxTargetX), clamp2(nextViewState.target[1], minTargetY, maxTargetY)];\n    setViewState({\n      zoom: nextZoom,\n      target: transpose ? [nextTarget[1], nextTarget[0]] : nextTarget\n    });\n  }, [matrixRight, matrixBottom, transpose, setViewState]);\n  useEffect3(() => {\n    if (!expression) {\n      return;\n    }\n\n    if (axisTopLabels && axisLeftLabels && xTiles && yTiles) {\n      setBacklog(prev => [...prev, uuidv42()]);\n    }\n  }, [dataRef, expression, axisTopLabels, axisLeftLabels, xTiles, yTiles]);\n  useEffect3(() => {\n    if (backlog.length < 1) {\n      return;\n    }\n\n    const curr = backlog[backlog.length - 1];\n\n    if (dataRef.current && dataRef.current.buffer.byteLength) {\n      const {\n        rows,\n        cols,\n        matrix\n      } = expression;\n      const promises = range5(yTiles).map(i => range5(xTiles).map(j => __async(void 0, null, function* () {\n        return workerPool.process({\n          curr,\n          tileI: i,\n          tileJ: j,\n          tileSize: TILE_SIZE,\n          cellOrdering: transpose ? axisTopLabels : axisLeftLabels,\n          rows,\n          cols,\n          transpose,\n          data: matrix.buffer.slice()\n        });\n      })));\n\n      const process2 = () => __async(void 0, null, function* () {\n        const tiles = yield Promise.all(promises.flat());\n        tilesRef.current = tiles.map(i => i.tile);\n        incTileIteration();\n        dataRef.current = new Uint8Array(tiles[0].buffer);\n        const {\n          curr: currWork\n        } = tiles[0];\n        setBacklog(prev => {\n          const currIndex = prev.indexOf(currWork);\n          return prev.slice(currIndex + 1, prev.length);\n        });\n      });\n\n      process2();\n    }\n  }, [axisLeftLabels, axisTopLabels, backlog, expression, transpose, xTiles, yTiles, workerPool]);\n  useEffect3(() => {\n    setIsRendering(backlog.length > 0);\n  }, [backlog, setIsRendering]);\n  const heatmapLayers = useMemo4(() => {\n    if (!tilesRef.current || backlog.length) {\n      return [];\n    }\n\n    function getLayer(i, j, tile) {\n      return new HeatmapBitmapLayer({\n        id: `heatmapLayer-${tileIteration}-${i}-${j}`,\n        image: tile,\n        bounds: [matrixLeft + j * tileWidth, matrixTop + i * tileHeight, matrixLeft + (j + 1) * tileWidth, matrixTop + (i + 1) * tileHeight],\n        aggSizeX,\n        aggSizeY,\n        colormap,\n        colorScaleLo: colormapRange[0],\n        colorScaleHi: colormapRange[1],\n        updateTriggers: {\n          image: [axisLeftLabels, axisTopLabels],\n          bounds: [tileHeight, tileWidth]\n        }\n      });\n    }\n\n    const layers2 = tilesRef.current.map((tile, index) => getLayer(Math.floor(index / xTiles), index % xTiles, tile));\n    return layers2;\n  }, [backlog, tileIteration, matrixLeft, tileWidth, matrixTop, tileHeight, aggSizeX, aggSizeY, colormap, colormapRange, axisLeftLabels, axisTopLabels, xTiles]);\n  const axisTopLabelData = useMemo4(() => axisTopLabels.map((d, i) => [i, d]), [axisTopLabels]);\n  const axisLeftLabelData = useMemo4(() => axisLeftLabels.map((d, i) => [i, d]), [axisLeftLabels]);\n  const textLayers = [new HeatmapCompositeTextLayer({\n    targetX,\n    targetY,\n    scaleFactor,\n    axisLeftLabelData,\n    matrixTop,\n    height,\n    matrixHeight,\n    cellHeight,\n    cellWidth,\n    axisTopLabelData,\n    matrixLeft,\n    width,\n    matrixWidth,\n    viewHeight,\n    viewWidth,\n    theme,\n    axisLeftTitle,\n    axisTopTitle,\n    axisOffsetLeft,\n    axisOffsetTop\n  })];\n  const cellColorsTiles = useMemo4(() => {\n    if (!cellColors) {\n      return null;\n    }\n\n    let cellId;\n    let offset;\n    let color;\n    let rowI;\n    const cellOrdering = transpose ? axisTopLabels : axisLeftLabels;\n    const colorBarTileWidthPx = transpose ? TILE_SIZE : 1;\n    const colorBarTileHeightPx = transpose ? 1 : TILE_SIZE;\n    const result = range5(transpose ? xTiles : yTiles).map(i => {\n      const tileData = new Uint8ClampedArray(TILE_SIZE * 1 * 4);\n      range5(TILE_SIZE).forEach(tileY => {\n        rowI = i * TILE_SIZE + tileY;\n\n        if (rowI < cellOrdering.length) {\n          cellId = cellOrdering[rowI];\n          color = cellColors.get(cellId);\n          offset = (transpose ? tileY : TILE_SIZE - tileY - 1) * 4;\n\n          if (color) {\n            const [rValue, gValue, bValue] = color;\n            tileData[offset + 0] = rValue;\n            tileData[offset + 1] = gValue;\n            tileData[offset + 2] = bValue;\n            tileData[offset + 3] = 255;\n          }\n        }\n      });\n      return new ImageData(tileData, colorBarTileWidthPx, colorBarTileHeightPx);\n    });\n    return result;\n  }, [cellColors, transpose, axisTopLabels, axisLeftLabels, xTiles, yTiles]);\n  const cellColorsLayers = useMemo4(() => cellColorsTiles ? cellColorsTiles.map((tile, i) => new PixelatedBitmapLayer({\n    id: `${transpose ? \"colorsTopLayer\" : \"colorsLeftLayer\"}-${i}-${uuidv42()}`,\n    image: tile,\n    bounds: transpose ? [matrixLeft + i * tileWidth, -matrixHeight / 2, matrixLeft + (i + 1) * tileWidth, matrixHeight / 2] : [-matrixWidth / 2, matrixTop + i * tileHeight, matrixWidth / 2, matrixTop + (i + 1) * tileHeight]\n  })) : [], [cellColorsTiles, matrixTop, matrixLeft, matrixHeight, matrixWidth, tileWidth, tileHeight, transpose]);\n  const layers = heatmapLayers.concat(textLayers).concat(cellColorsLayers);\n\n  function onHover(info, event) {\n    if (!expression) {\n      return;\n    }\n\n    const {\n      x: mouseX,\n      y: mouseY\n    } = event.offsetCenter;\n    const [colI, rowI] = mouseToHeatmapPosition(mouseX, mouseY, {\n      offsetLeft,\n      offsetTop,\n      targetX,\n      targetY,\n      scaleFactor,\n      matrixWidth,\n      matrixHeight,\n      numRows: height,\n      numCols: width\n    });\n\n    if (colI === null) {\n      if (transpose) {\n        setCellHighlight(null);\n      } else {\n        setGeneHighlight(null);\n      }\n    }\n\n    if (rowI === null) {\n      if (transpose) {\n        setGeneHighlight(null);\n      } else {\n        setCellHighlight(null);\n      }\n    }\n\n    const obsI = expression.rows.indexOf(transpose ? axisTopLabels[colI] : axisLeftLabels[rowI]);\n    const varI = expression.cols.indexOf(transpose ? axisLeftLabels[rowI] : axisTopLabels[colI]);\n    const obsId = expression.rows[obsI];\n    const varId = expression.cols[varI];\n\n    if (setComponentHover) {\n      setComponentHover();\n    }\n\n    setCellHighlight(obsId || null);\n    setGeneHighlight(varId || null);\n  }\n\n  return /* @__PURE__ */React6.createElement(DeckGL2, {\n    id: `deckgl-overlay-${uuid}`,\n    ref: deckRef,\n    views: [new OrthographicView2({\n      id: \"heatmap\",\n      controller: true,\n      x: offsetLeft,\n      y: offsetTop,\n      width: matrixWidth,\n      height: matrixHeight\n    }), new OrthographicView2({\n      id: \"axisLeft\",\n      controller: false,\n      x: transpose ? COLOR_BAR_SIZE : 0,\n      y: offsetTop,\n      width: axisOffsetLeft,\n      height: matrixHeight\n    }), new OrthographicView2({\n      id: \"axisTop\",\n      controller: false,\n      x: offsetLeft,\n      y: transpose ? 0 : COLOR_BAR_SIZE,\n      width: matrixWidth,\n      height: axisOffsetTop\n    }), new OrthographicView2({\n      id: \"colorsLeft\",\n      controller: false,\n      x: axisOffsetLeft,\n      y: offsetTop,\n      width: COLOR_BAR_SIZE - AXIS_MARGIN,\n      height: matrixHeight\n    }), new OrthographicView2({\n      id: \"colorsTop\",\n      controller: false,\n      x: offsetLeft,\n      y: axisOffsetTop,\n      width: matrixWidth,\n      height: COLOR_BAR_SIZE - AXIS_MARGIN\n    })],\n    layers,\n    layerFilter,\n    getCursor: interactionState => interactionState.isDragging ? \"grabbing\" : \"default\",\n    glOptions: DEFAULT_GL_OPTIONS,\n    onViewStateChange,\n    viewState,\n    onHover\n  });\n});\nvar Heatmap_default = Heatmap; // src/components/heatmap/HeatmapTooltipSubscriber.js\n\nimport React10 from \"react\"; // src/components/tooltip/Tooltip2D.js\n\nimport React8 from \"react\"; // src/components/tooltip/Tooltip.js\n\nimport React7, { useEffect as useEffect4, useRef as useRef5, useState as useState6 } from \"react\";\nimport Paper2 from \"@material-ui/core/Paper\";\nimport Popper2 from \"@material-ui/core/Popper\"; // src/components/tooltip/styles.js\n\nimport { makeStyles as makeStyles3 } from \"@material-ui/core/styles\";\nvar styles2 = makeStyles3(() => ({\n  tooltipAnchor: {\n    position: \"relative\",\n    width: \"0px\",\n    height: \"0px\",\n    pointerEvents: \"none\",\n    userSelect: \"none\"\n  },\n  tooltipContent: {\n    opacity: 0.9,\n    padding: \"5px\",\n    pointerEvents: \"none\",\n    \"& table > tbody > tr > th, & table > tbody > tr > td\": {\n      fontSize: \"80%\",\n      opacity: 0.8,\n      outline: 0,\n      padding: \"0 2px\"\n    },\n    \"& table\": {\n      borderCollapse: \"collapse\"\n    }\n  }\n})); // src/components/tooltip/Tooltip.js\n\nfunction Tooltip(props) {\n  const {\n    x,\n    y,\n    parentWidth,\n    parentHeight,\n    children\n  } = props;\n  const ref = useRef5();\n  const classes = styles2();\n  const [placementX, setPlacementX] = useState6(\"start\");\n  const [placementY, setPlacementY] = useState6(\"bottom\");\n  const getTooltipContainer = useVitessceContainer(ref);\n  useEffect4(() => {\n    if (ref && ref.current) {\n      const flipX = x > parentWidth / 2;\n      const flipY = y > parentHeight / 2;\n      setPlacementX(flipX ? \"end\" : \"start\");\n      setPlacementY(flipY ? \"top\" : \"bottom\");\n      ref.current.style.left = `${x + (flipX ? -20 : 5)}px`;\n      ref.current.style.top = `${y + (flipY ? -20 : 5)}px`;\n    }\n  }, [x, y, parentWidth, parentHeight]);\n  return /* @__PURE__ */React7.createElement(\"div\", {\n    ref,\n    className: classes.tooltipAnchor\n  }, ref && ref.current ? /* @__PURE__ */React7.createElement(Popper2, {\n    open: true,\n    anchorEl: ref.current,\n    container: getTooltipContainer,\n    transition: true,\n    placement: `${placementY}-${placementX}`\n  }, /* @__PURE__ */React7.createElement(Paper2, {\n    elevation: 4,\n    className: classes.tooltipContent\n  }, children)) : null);\n} // src/components/tooltip/Tooltip2D.js\n\n\nfunction Tooltip2D(props) {\n  const {\n    parentUuid,\n    sourceUuid,\n    x,\n    y,\n    parentWidth,\n    parentHeight,\n    children\n  } = props;\n\n  if (x < 0 || x > parentWidth || y < 0 || y > parentHeight) {\n    return null;\n  }\n\n  const isTooltipVisible = parentUuid === sourceUuid;\n  const crosshairWidth = 1;\n  return /* @__PURE__ */React8.createElement(React8.Fragment, null, isTooltipVisible ? /* @__PURE__ */React8.createElement(Tooltip, {\n    x,\n    y,\n    parentWidth,\n    parentHeight\n  }, children) : /* @__PURE__ */React8.createElement(React8.Fragment, null, x !== null ? /* @__PURE__ */React8.createElement(\"div\", {\n    className: \"cell-emphasis-crosshair\",\n    style: {\n      left: `${x - crosshairWidth / 2}px`,\n      top: 0,\n      width: `${crosshairWidth}px`,\n      height: `${parentHeight}px`\n    }\n  }) : null, y !== null ? /* @__PURE__ */React8.createElement(\"div\", {\n    className: \"cell-emphasis-crosshair\",\n    style: {\n      left: 0,\n      top: `${y - crosshairWidth / 2}px`,\n      width: `${parentWidth}px`,\n      height: `${crosshairWidth}px`\n    }\n  }) : null));\n} // src/components/tooltip/TooltipContent.js\n\n\nimport React9 from \"react\";\n\nfunction TooltipContent(props) {\n  const {\n    info\n  } = props;\n  return /* @__PURE__ */React9.createElement(\"table\", null, /* @__PURE__ */React9.createElement(\"tbody\", null, Object.entries(info).map(_ref42 => {\n    let [key, value] = _ref42;\n    return /* @__PURE__ */React9.createElement(\"tr\", {\n      key\n    }, /* @__PURE__ */React9.createElement(\"th\", null, key), /* @__PURE__ */React9.createElement(\"td\", null, value));\n  })));\n} // src/components/heatmap/HeatmapTooltipSubscriber.js\n\n\nfunction HeatmapTooltipSubscriber(props) {\n  const {\n    parentUuid,\n    width,\n    height,\n    transpose,\n    getCellInfo,\n    getGeneInfo,\n    cellHighlight,\n    geneHighlight\n  } = props;\n  const sourceUuid = useComponentHover();\n  const viewInfo = useComponentViewInfo(parentUuid);\n  const [cellInfo, cellCoord] = cellHighlight && getCellInfo ? [getCellInfo(cellHighlight), viewInfo && viewInfo.project ? viewInfo.project(cellHighlight, null)[transpose ? 0 : 1] : null] : [null, null];\n  const [geneInfo, geneCoord] = geneHighlight && getGeneInfo ? [getGeneInfo(geneHighlight), viewInfo && viewInfo.project ? viewInfo.project(null, geneHighlight)[transpose ? 1 : 0] : null] : [null, null];\n  const x = transpose ? cellCoord : geneCoord;\n  const y = transpose ? geneCoord : cellCoord;\n  return cellInfo || geneInfo ? /* @__PURE__ */React10.createElement(Tooltip2D, {\n    x,\n    y,\n    parentUuid,\n    parentWidth: width,\n    parentHeight: height,\n    sourceUuid\n  }, /* @__PURE__ */React10.createElement(TooltipContent, {\n    info: __spreadValues(__spreadValues({}, geneInfo), cellInfo)\n  })) : null;\n} // src/components/heatmap/HeatmapOptions.js\n\n\nimport React13, { useCallback as useCallback4 } from \"react\";\nimport debounce2 from \"lodash/debounce\";\nimport Slider from \"@material-ui/core/Slider\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport TableRow from \"@material-ui/core/TableRow\"; // src/components/shared-plot-options/styles.js\n\nimport { makeStyles as makeStyles4 } from \"@material-ui/core/styles\";\nvar useStyles2 = makeStyles4(theme => ({\n  box: {\n    boxSizing: \"border-box\"\n  },\n  checkbox: {\n    padding: \"3px\",\n    color: theme.palette.primaryForeground,\n    \"&:checked\": {\n      color: theme.palette.primaryForeground\n    },\n    \"& input\": {\n      height: \"100%\"\n    }\n  },\n  slider: {\n    color: theme.palette.primaryForeground,\n    minWidth: \"60px\",\n    padding: \"10px 0 10px 0\"\n  },\n  sliderValueLabel: {\n    \"& span\": {\n      \"& span\": {\n        color: theme.palette.primaryBackground\n      }\n    }\n  },\n  tableContainer: {\n    overflow: \"hidden\",\n    overflowX: \"hidden !important\"\n  },\n  labelCell: {\n    padding: \"2px 8px 2px 16px\"\n  },\n  inputCell: {\n    padding: \"2px 16px 2px 8px\",\n    overflow: \"visible\"\n  },\n  select: {\n    \"& select\": {\n      fontSize: \".875rem\"\n    }\n  },\n  selectRoot: {\n    padding: 0,\n    height: \"auto\"\n  }\n})); // src/components/shared-plot-options/OptionsContainer.js\n\nimport React11 from \"react\";\nimport Box from \"@material-ui/core/Box\";\nimport Table from \"@material-ui/core/Table\";\nimport TableBody from \"@material-ui/core/TableBody\";\nimport TableContainer from \"@material-ui/core/TableContainer\";\n\nfunction OptionsContainer(props) {\n  const {\n    children\n  } = props;\n  const classes = useStyles2();\n  return /* @__PURE__ */React11.createElement(Box, {\n    className: classes.box\n  }, /* @__PURE__ */React11.createElement(TableContainer, {\n    className: classes.tableContainer\n  }, /* @__PURE__ */React11.createElement(Table, {\n    className: classes.table,\n    size: \"small\"\n  }, /* @__PURE__ */React11.createElement(TableBody, null, children))));\n} // src/components/shared-plot-options/OptionSelect.js\n\n\nimport React12 from \"react\";\nimport Select from \"@material-ui/core/Select\";\n\nfunction OptionSelect(props) {\n  const {\n    classes: classesProp = {}\n  } = props;\n  const classes = useStyles2();\n  return /* @__PURE__ */React12.createElement(Select, __spreadProps(__spreadValues({\n    native: true,\n    disableUnderline: true\n  }, props), {\n    classes: __spreadValues({\n      root: classes.selectRoot\n    }, classesProp)\n  }));\n} // src/components/heatmap/HeatmapOptions.js\n\n\nfunction HeatmapOptions(props) {\n  const {\n    geneExpressionColormap,\n    setGeneExpressionColormap,\n    geneExpressionColormapRange,\n    setGeneExpressionColormapRange\n  } = props;\n  const classes = useStyles2();\n\n  function handleGeneExpressionColormapChange(event) {\n    setGeneExpressionColormap(event.target.value);\n  }\n\n  function handleColormapRangeChange(event, value) {\n    setGeneExpressionColormapRange(value);\n  }\n\n  const handleColormapRangeChangeDebounced = useCallback4(debounce2(handleColormapRangeChange, 5, {\n    trailing: true\n  }), [handleColormapRangeChange]);\n  return /* @__PURE__ */React13.createElement(OptionsContainer, null, /* @__PURE__ */React13.createElement(TableRow, null, /* @__PURE__ */React13.createElement(TableCell, {\n    className: classes.labelCell,\n    htmlFor: \"gene-expression-colormap-select\"\n  }, \"Gene Expression Colormap\"), /* @__PURE__ */React13.createElement(TableCell, {\n    className: classes.inputCell\n  }, /* @__PURE__ */React13.createElement(OptionSelect, {\n    className: classes.select,\n    value: geneExpressionColormap,\n    onChange: handleGeneExpressionColormapChange,\n    inputProps: {\n      id: \"gene-expression-colormap-select\"\n    }\n  }, GLSL_COLORMAPS.map(cmap => /* @__PURE__ */React13.createElement(\"option\", {\n    key: cmap,\n    value: cmap\n  }, cmap))))), /* @__PURE__ */React13.createElement(TableRow, null, /* @__PURE__ */React13.createElement(TableCell, {\n    className: classes.labelCell\n  }, \"Gene Expression Colormap Range\"), /* @__PURE__ */React13.createElement(TableCell, {\n    className: classes.inputCell\n  }, /* @__PURE__ */React13.createElement(Slider, {\n    classes: {\n      root: classes.slider,\n      valueLabel: classes.sliderValueLabel\n    },\n    value: geneExpressionColormapRange,\n    onChange: handleColormapRangeChangeDebounced,\n    \"aria-labelledby\": \"gene-expression-colormap-range-slider\",\n    valueLabelDisplay: \"auto\",\n    step: 5e-3,\n    min: 0,\n    max: 1\n  }))));\n} // src/components/heatmap/HeatmapSubscriber.js\n\n\nvar HEATMAP_DATA_TYPES = [\"cells\", \"cell-sets\", \"expression-matrix\"];\n\nfunction HeatmapSubscriber(props) {\n  const {\n    uuid,\n    coordinationScopes,\n    removeGridComponent,\n    theme,\n    transpose,\n    observationsLabelOverride: observationsLabel = \"cell\",\n    observationsPluralLabelOverride: observationsPluralLabel = `${observationsLabel}s`,\n    variablesLabelOverride: variablesLabel = \"gene\",\n    variablesPluralLabelOverride: variablesPluralLabel = `${variablesLabel}s`,\n    disableTooltip = false,\n    title: title16 = \"Heatmap\"\n  } = props;\n  const loaders = useLoaders();\n  const setComponentHover = useSetComponentHover();\n  const setComponentViewInfo = useSetComponentViewInfo(uuid);\n  const [{\n    dataset,\n    heatmapZoomX: zoomX,\n    heatmapTargetX: targetX,\n    heatmapTargetY: targetY,\n    geneSelection,\n    cellHighlight,\n    geneHighlight,\n    cellSetSelection,\n    cellSetColor,\n    additionalCellSets,\n    geneExpressionColormap,\n    geneExpressionColormapRange\n  }, {\n    setHeatmapZoomX: setZoomX,\n    setHeatmapZoomY: setZoomY,\n    setHeatmapTargetX: setTargetX,\n    setHeatmapTargetY: setTargetY,\n    setCellHighlight,\n    setGeneHighlight,\n    setCellSetSelection,\n    setCellSetColor,\n    setGeneExpressionColormapRange,\n    setGeneExpressionColormap\n  }] = useCoordination(COMPONENT_COORDINATION_TYPES.heatmap, coordinationScopes);\n  const observationsTitle = capitalize(observationsPluralLabel);\n  const variablesTitle = capitalize(variablesPluralLabel);\n  const [isRendering, setIsRendering] = useState7(false);\n  const [isReady, setItemIsReady, setItemIsNotReady, resetReadyItems] = useReady(HEATMAP_DATA_TYPES);\n  const [urls, addUrl, resetUrls] = useUrls();\n  const [width, height, deckRef] = useDeckCanvasSize();\n  useEffect5(() => {\n    resetUrls();\n    resetReadyItems();\n  }, [loaders, dataset]);\n  const [cells] = useCellsData(loaders, dataset, setItemIsReady, addUrl, true);\n  const [expressionMatrix] = useExpressionMatrixData(loaders, dataset, setItemIsReady, addUrl, true);\n  const [cellSets] = useCellSetsData(loaders, dataset, setItemIsReady, addUrl, false, {\n    setCellSetSelection,\n    setCellSetColor\n  }, {\n    cellSetSelection,\n    cellSetColor\n  });\n  const mergedCellSets = useMemo5(() => mergeCellSets(cellSets, additionalCellSets), [cellSets, additionalCellSets]);\n  const cellColors = useMemo5(() => getCellColors({\n    cellColorEncoding: \"cellSetSelection\",\n    geneSelection,\n    cellSets: mergedCellSets,\n    cellSetSelection,\n    cellSetColor,\n    expressionDataAttrs: expressionMatrix,\n    theme\n  }), [mergedCellSets, geneSelection, theme, cellSetColor, cellSetSelection, expressionMatrix]);\n  const getCellInfo = useCallback5(cellId => {\n    if (cellId) {\n      const cellInfo = cells[cellId];\n      return __spreadValues({\n        [`${capitalize(observationsLabel)} ID`]: cellId\n      }, cellInfo ? cellInfo.factors : {});\n    }\n\n    return null;\n  }, [cells, observationsLabel]);\n  const getGeneInfo = useCallback5(geneId => {\n    if (geneId) {\n      return {\n        [`${capitalize(variablesLabel)} ID`]: geneId\n      };\n    }\n\n    return null;\n  }, [variablesLabel]);\n  const cellsCount = expressionMatrix && expressionMatrix.rows ? expressionMatrix.rows.length : 0;\n  const genesCount = expressionMatrix && expressionMatrix.cols ? expressionMatrix.cols.length : 0;\n  const selectedCount = cellColors.size;\n  return /* @__PURE__ */React14.createElement(TitleInfo, {\n    title: title16,\n    info: `${cellsCount} ${pluralize(observationsLabel, observationsPluralLabel, cellsCount)} \\xD7 ${genesCount} ${pluralize(variablesLabel, variablesPluralLabel, genesCount)},\n             with ${selectedCount} ${pluralize(observationsLabel, observationsPluralLabel, selectedCount)} selected`,\n    urls,\n    theme,\n    removeGridComponent,\n    isReady: isReady && !isRendering,\n    options: /* @__PURE__ */React14.createElement(HeatmapOptions, {\n      geneExpressionColormap,\n      setGeneExpressionColormap,\n      geneExpressionColormapRange,\n      setGeneExpressionColormapRange\n    })\n  }, /* @__PURE__ */React14.createElement(Heatmap_default, {\n    ref: deckRef,\n    transpose,\n    viewState: {\n      zoom: zoomX,\n      target: [targetX, targetY]\n    },\n    setViewState: _ref43 => {\n      let {\n        zoom,\n        target\n      } = _ref43;\n      setZoomX(zoom);\n      setZoomY(zoom);\n      setTargetX(target[0]);\n      setTargetY(target[1]);\n    },\n    colormapRange: geneExpressionColormapRange,\n    setColormapRange: setGeneExpressionColormapRange,\n    height,\n    width,\n    theme,\n    uuid,\n    expressionMatrix,\n    cellColors,\n    colormap: geneExpressionColormap,\n    setIsRendering,\n    setCellHighlight,\n    setGeneHighlight,\n    setComponentHover: () => {\n      setComponentHover(uuid);\n    },\n    updateViewInfo: setComponentViewInfo,\n    observationsTitle,\n    variablesTitle\n  }), !disableTooltip && /* @__PURE__ */React14.createElement(HeatmapTooltipSubscriber, {\n    parentUuid: uuid,\n    width,\n    height,\n    transpose,\n    getCellInfo,\n    getGeneInfo,\n    cellHighlight,\n    geneHighlight\n  }));\n} // src/components/spatial/SpatialSubscriber.js\n\n\nimport React24, { useEffect as useEffect6, useMemo as useMemo6, useCallback as useCallback7 } from \"react\"; // src/components/spatial/Spatial.js\n\nimport React20, { forwardRef as forwardRef2 } from \"react\";\nimport isEqual5 from \"lodash/isEqual\";\nimport { COORDINATE_SYSTEM as COORDINATE_SYSTEM5 } from \"@deck.gl/core\";\nimport { PolygonLayer as PolygonLayer2, ScatterplotLayer as ScatterplotLayer2 } from \"@deck.gl/layers\";\nimport { Matrix4 as Matrix44 } from \"math.gl\"; // src/layers/selection-utils.js\n\nimport { COORDINATE_SYSTEM as COORDINATE_SYSTEM4 } from \"@deck.gl/core\";\nimport { DataFilterExtension } from \"@deck.gl/extensions\"; // src/layers/SelectionLayer.js\n\nimport { CompositeLayer as CompositeLayer4 } from \"deck.gl\";\nimport { polygon as turfPolygon, point as turfPoint2 } from \"@turf/helpers\";\nimport booleanWithin from \"@turf/boolean-within\";\nimport booleanContains from \"@turf/boolean-contains\";\nimport booleanOverlap from \"@turf/boolean-overlap\";\nimport booleanPointInPolygon from \"@turf/boolean-point-in-polygon\";\nimport { ScatterplotLayer } from \"@deck.gl/layers\";\nimport { SELECTION_TYPE } from \"nebula.gl\";\nimport { EditableGeoJsonLayer } from \"@nebula.gl/layers\";\nimport { DrawRectangleMode, DrawPolygonByDraggingMode, ViewMode } from \"@nebula.gl/edit-modes\";\nvar EDIT_TYPE_ADD = \"addFeature\";\nvar EDIT_TYPE_CLEAR = \"clearFeatures\";\nvar ClickableDrawRectangleMode = class extends DrawRectangleMode {\n  handleClick(event, props) {\n    props.onEdit({\n      editType: EDIT_TYPE_CLEAR\n    });\n  }\n\n};\nvar ClickableDrawPolygonByDraggingMode = class extends DrawPolygonByDraggingMode {\n  handleClick(event, props) {\n    props.onEdit({\n      editType: EDIT_TYPE_CLEAR\n    });\n  }\n\n};\nvar MODE_MAP = {\n  [SELECTION_TYPE.RECTANGLE]: ClickableDrawRectangleMode,\n  [SELECTION_TYPE.POLYGON]: ClickableDrawPolygonByDraggingMode\n};\nvar defaultProps4 = {\n  selectionType: SELECTION_TYPE.RECTANGLE,\n  layerIds: [],\n  onSelect: () => {}\n};\nvar EMPTY_DATA = {\n  type: \"FeatureCollection\",\n  features: []\n};\nvar LAYER_ID_GEOJSON = \"selection-geojson\";\nvar PASS_THROUGH_PROPS = [\"lineWidthScale\", \"lineWidthMinPixels\", \"lineWidthMaxPixels\", \"lineWidthUnits\", \"lineJointRounded\", \"lineMiterLimit\", \"pointRadiusScale\", \"pointRadiusMinPixels\", \"pointRadiusMaxPixels\", \"lineDashJustified\", \"getLineColor\", \"getFillColor\", \"getRadius\", \"getLineWidth\", \"getLineDashArray\", \"getTentativeLineDashArray\", \"getTentativeLineColor\", \"getTentativeFillColor\", \"getTentativeLineWidth\", \"editHandlePointRadiusScale\", \"editHandlePointRadiusMinPixels\", \"editHandlePointRadiusMaxPixels\", \"getEditHandlePointColor\", \"getEditHandlePointRadius\", \"modeHandlers\"];\nvar SelectionLayer = class extends CompositeLayer4 {\n  _selectPolygonObjects(coordinates) {\n    const {\n      onSelect,\n      getCellCoords,\n      cellsQuadTree,\n      flipY\n    } = this.props;\n    const flippedCoordinates = flipY ? coordinates.map(poly => poly.map(p => [p[0], -p[1]])) : coordinates;\n    const selectedPolygon = turfPolygon(flippedCoordinates);\n    const pickingInfos = [];\n    cellsQuadTree.visit((node, x0, y0, x1, y1) => {\n      const nodePoints = [[[x0, y0], [x1, y0], [x1, y1], [x0, y1], [x0, y0]]];\n      const nodePolygon = turfPolygon(nodePoints);\n      const nodePolygonContainsSelectedPolygon = booleanContains(nodePolygon, selectedPolygon);\n      const nodePolygonWithinSelectedPolygon = booleanWithin(nodePolygon, selectedPolygon);\n      const nodePolygonOverlapsSelectedPolgyon = booleanOverlap(nodePolygon, selectedPolygon);\n\n      if (!nodePolygonContainsSelectedPolygon && !nodePolygonWithinSelectedPolygon && !nodePolygonOverlapsSelectedPolgyon) {\n        return true;\n      }\n\n      if (node.data && booleanPointInPolygon(turfPoint([].slice.call(getCellCoords(node.data[1]))), selectedPolygon)) {\n        pickingInfos.push(node.data);\n      }\n\n      return false;\n    });\n    onSelect({\n      pickingInfos\n    });\n  }\n\n  renderLayers() {\n    const {\n      onSelect\n    } = this.props;\n    const mode = MODE_MAP[this.props.selectionType] || ViewMode;\n    const inheritedProps = {};\n    PASS_THROUGH_PROPS.forEach(p => {\n      if (this.props[p] !== void 0) inheritedProps[p] = this.props[p];\n    });\n    const layers = [new EditableGeoJsonLayer(this.getSubLayerProps(__spreadValues({\n      id: LAYER_ID_GEOJSON,\n      pickable: true,\n      mode,\n      modeConfig: {\n        dragToDraw: true\n      },\n      selectedFeatureIndexes: [],\n      data: EMPTY_DATA,\n      onEdit: _ref44 => {\n        let {\n          updatedData,\n          editType\n        } = _ref44;\n\n        if (editType === EDIT_TYPE_ADD) {\n          const {\n            coordinates\n          } = updatedData.features[0].geometry;\n\n          this._selectPolygonObjects(coordinates);\n        } else if (editType === EDIT_TYPE_CLEAR) {\n          onSelect({\n            pickingInfos: []\n          });\n        }\n      },\n      _subLayerProps: {\n        guides: {\n          pointType: \"circle\",\n          _subLayerProps: {\n            \"points-circle\": {\n              type: ScatterplotLayer,\n              radiusScale: 1,\n              stroked: true,\n              getLineWidth: 1,\n              radiusMinPixels: 1,\n              radiusMaxPixels: 3,\n              getRadius: 2\n            }\n          }\n        }\n      }\n    }, inheritedProps)))];\n    return layers;\n  }\n\n};\nSelectionLayer.layerName = \"SelectionLayer\";\nSelectionLayer.defaultProps = defaultProps4; // src/layers/selection-utils.js\n\nfunction getBaseLayerId(layerId) {\n  return `base-${layerId}`;\n}\n\nfunction getSelectionLayers(tool, zoom, layerId, getCellCoords, updateCellsSelection, cellsQuadTree) {\n  let flipY = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : false;\n\n  if (!tool) {\n    return [];\n  }\n\n  const cellBaseLayerId = getBaseLayerId(layerId);\n  const editHandlePointRadius = 5 / (zoom + 16);\n  return [new SelectionLayer({\n    id: \"selection\",\n    flipY,\n    cellsQuadTree,\n    getCellCoords,\n    coordinateSystem: COORDINATE_SYSTEM4.CARTESIAN,\n    selectionType: tool,\n    onSelect: _ref45 => {\n      let {\n        pickingInfos\n      } = _ref45;\n      const cellIds = pickingInfos.map(cellObj => cellObj[0]);\n\n      if (updateCellsSelection) {\n        updateCellsSelection(cellIds);\n      }\n    },\n    layerIds: [cellBaseLayerId],\n    getTentativeFillColor: () => [255, 255, 255, 95],\n    getTentativeLineColor: () => [143, 143, 143, 255],\n    getTentativeLineDashArray: () => [7, 4],\n    lineWidthMinPixels: 2,\n    lineWidthMaxPixels: 2,\n    getEditHandlePointColor: () => [255, 255, 255, 255],\n    getEditHandlePointRadius: () => editHandlePointRadius,\n    editHandlePointRadiusScale: 1,\n    editHandlePointRadiusMinPixels: editHandlePointRadius,\n    editHandlePointRadiusMaxPixels: 2 * editHandlePointRadius\n  })];\n} // src/components/spatial/utils.js\n\n\nimport shortNumber from \"short-number\";\nimport isEqual4 from \"lodash/isEqual\";\nimport { extent } from \"d3-array\";\nimport { Matrix4 as Matrix43 } from \"math.gl\";\nimport { divide, compare, unit } from \"mathjs\"; // src/layers/BitmaskLayer.js\n\nimport GL4 from \"@luma.gl/constants\";\nimport { project32 as project323, picking as picking3 } from \"@deck.gl/core\";\nimport { Texture2D as Texture2D3, isWebGL2 as isWebGL22 } from \"@luma.gl/core\"; // src/layers/bitmask-layer-shaders.js\n\nvar vs3 = \"\\n#define SHADER_NAME bitmask-layer-vertex-shader\\n\\nattribute vec2 texCoords;\\nattribute vec3 positions;\\nattribute vec3 positions64Low;\\nattribute vec3 instancePickingColors;\\n\\nvarying vec2 vTexCoord;\\n\\nvoid main(void) {\\n  geometry.worldPosition = positions;\\n  geometry.uv = texCoords;\\n  geometry.pickingColor = instancePickingColors;\\n  gl_Position = project_position_to_clipspace(positions, positions64Low, vec3(0.0), geometry.position);\\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\\n  vTexCoord = texCoords;\\n  vec4 color = vec4(0.0);\\n  DECKGL_FILTER_COLOR(color, geometry);\\n}\\n\";\nvar fs3 = \"\\n#define SHADER_NAME bitmask-layer-fragment-shader\\nprecision highp float;\\n\\nvec4 plasma (float x_1306414511) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0.050980392156862744,0.03137254901960784,0.5294117647058824,1);\\n  const float e1 = 0.13;\\n  const vec4 v1 = vec4(0.29411764705882354,0.011764705882352941,0.6313725490196078,1);\\n  const float e2 = 0.25;\\n  const vec4 v2 = vec4(0.49019607843137253,0.011764705882352941,0.6588235294117647,1);\\n  const float e3 = 0.38;\\n  const vec4 v3 = vec4(0.6588235294117647,0.13333333333333333,0.5882352941176471,1);\\n  const float e4 = 0.5;\\n  const vec4 v4 = vec4(0.796078431372549,0.27450980392156865,0.4745098039215686,1);\\n  const float e5 = 0.63;\\n  const vec4 v5 = vec4(0.8980392156862745,0.4196078431372549,0.36470588235294116,1);\\n  const float e6 = 0.75;\\n  const vec4 v6 = vec4(0.9725490196078431,0.5803921568627451,0.2549019607843137,1);\\n  const float e7 = 0.88;\\n  const vec4 v7 = vec4(0.9921568627450981,0.7647058823529411,0.1568627450980392,1);\\n  const float e8 = 1.0;\\n  const vec4 v8 = vec4(0.9411764705882353,0.9764705882352941,0.12941176470588237,1);\\n  float a0 = smoothstep(e0,e1,x_1306414511);\\n  float a1 = smoothstep(e1,e2,x_1306414511);\\n  float a2 = smoothstep(e2,e3,x_1306414511);\\n  float a3 = smoothstep(e3,e4,x_1306414511);\\n  float a4 = smoothstep(e4,e5,x_1306414511);\\n  float a5 = smoothstep(e5,e6,x_1306414511);\\n  float a6 = smoothstep(e6,e7,x_1306414511);\\n  float a7 = smoothstep(e7,e8,x_1306414511);\\n  return max(mix(v0,v1,a0)*step(e0,x_1306414511)*step(x_1306414511,e1),\\n    max(mix(v1,v2,a1)*step(e1,x_1306414511)*step(x_1306414511,e2),\\n    max(mix(v2,v3,a2)*step(e2,x_1306414511)*step(x_1306414511,e3),\\n    max(mix(v3,v4,a3)*step(e3,x_1306414511)*step(x_1306414511,e4),\\n    max(mix(v4,v5,a4)*step(e4,x_1306414511)*step(x_1306414511,e5),\\n    max(mix(v5,v6,a5)*step(e5,x_1306414511)*step(x_1306414511,e6),\\n    max(mix(v6,v7,a6)*step(e6,x_1306414511)*step(x_1306414511,e7),mix(v7,v8,a7)*step(e7,x_1306414511)*step(x_1306414511,e8)\\n  )))))));\\n}\\n\\nvec4 viridis (float x_1870111103) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0.26666666666666666,0.00392156862745098,0.32941176470588235,1);\\n  const float e1 = 0.13;\\n  const vec4 v1 = vec4(0.2784313725490196,0.17254901960784313,0.47843137254901963,1);\\n  const float e2 = 0.25;\\n  const vec4 v2 = vec4(0.23137254901960785,0.3176470588235294,0.5450980392156862,1);\\n  const float e3 = 0.38;\\n  const vec4 v3 = vec4(0.17254901960784313,0.44313725490196076,0.5568627450980392,1);\\n  const float e4 = 0.5;\\n  const vec4 v4 = vec4(0.12941176470588237,0.5647058823529412,0.5529411764705883,1);\\n  const float e5 = 0.63;\\n  const vec4 v5 = vec4(0.15294117647058825,0.6784313725490196,0.5058823529411764,1);\\n  const float e6 = 0.75;\\n  const vec4 v6 = vec4(0.3607843137254902,0.7843137254901961,0.38823529411764707,1);\\n  const float e7 = 0.88;\\n  const vec4 v7 = vec4(0.6666666666666666,0.8627450980392157,0.19607843137254902,1);\\n  const float e8 = 1.0;\\n  const vec4 v8 = vec4(0.9921568627450981,0.9058823529411765,0.1450980392156863,1);\\n  float a0 = smoothstep(e0,e1,x_1870111103);\\n  float a1 = smoothstep(e1,e2,x_1870111103);\\n  float a2 = smoothstep(e2,e3,x_1870111103);\\n  float a3 = smoothstep(e3,e4,x_1870111103);\\n  float a4 = smoothstep(e4,e5,x_1870111103);\\n  float a5 = smoothstep(e5,e6,x_1870111103);\\n  float a6 = smoothstep(e6,e7,x_1870111103);\\n  float a7 = smoothstep(e7,e8,x_1870111103);\\n  return max(mix(v0,v1,a0)*step(e0,x_1870111103)*step(x_1870111103,e1),\\n    max(mix(v1,v2,a1)*step(e1,x_1870111103)*step(x_1870111103,e2),\\n    max(mix(v2,v3,a2)*step(e2,x_1870111103)*step(x_1870111103,e3),\\n    max(mix(v3,v4,a3)*step(e3,x_1870111103)*step(x_1870111103,e4),\\n    max(mix(v4,v5,a4)*step(e4,x_1870111103)*step(x_1870111103,e5),\\n    max(mix(v5,v6,a5)*step(e5,x_1870111103)*step(x_1870111103,e6),\\n    max(mix(v6,v7,a6)*step(e6,x_1870111103)*step(x_1870111103,e7),mix(v7,v8,a7)*step(e7,x_1870111103)*step(x_1870111103,e8)\\n  )))))));\\n}\\n\\nvec4 greys (float x_1268378094) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0,0,0,1);\\n  const float e1 = 1.0;\\n  const vec4 v1 = vec4(1,1,1,1);\\n  float a0 = smoothstep(e0,e1,x_1268378094);\\n  return mix(v0,v1,a0)*step(e0,x_1268378094)*step(x_1268378094,e1);\\n}\\n\\nvec4 magma (float x_2443053725) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0,0,0.01568627450980392,1);\\n  const float e1 = 0.13;\\n  const vec4 v1 = vec4(0.10980392156862745,0.06274509803921569,0.26666666666666666,1);\\n  const float e2 = 0.25;\\n  const vec4 v2 = vec4(0.30980392156862746,0.07058823529411765,0.4823529411764706,1);\\n  const float e3 = 0.38;\\n  const vec4 v3 = vec4(0.5058823529411764,0.1450980392156863,0.5058823529411764,1);\\n  const float e4 = 0.5;\\n  const vec4 v4 = vec4(0.7098039215686275,0.21176470588235294,0.47843137254901963,1);\\n  const float e5 = 0.63;\\n  const vec4 v5 = vec4(0.8980392156862745,0.3137254901960784,0.39215686274509803,1);\\n  const float e6 = 0.75;\\n  const vec4 v6 = vec4(0.984313725490196,0.5294117647058824,0.3803921568627451,1);\\n  const float e7 = 0.88;\\n  const vec4 v7 = vec4(0.996078431372549,0.7607843137254902,0.5294117647058824,1);\\n  const float e8 = 1.0;\\n  const vec4 v8 = vec4(0.9882352941176471,0.9921568627450981,0.7490196078431373,1);\\n  float a0 = smoothstep(e0,e1,x_2443053725);\\n  float a1 = smoothstep(e1,e2,x_2443053725);\\n  float a2 = smoothstep(e2,e3,x_2443053725);\\n  float a3 = smoothstep(e3,e4,x_2443053725);\\n  float a4 = smoothstep(e4,e5,x_2443053725);\\n  float a5 = smoothstep(e5,e6,x_2443053725);\\n  float a6 = smoothstep(e6,e7,x_2443053725);\\n  float a7 = smoothstep(e7,e8,x_2443053725);\\n  return max(mix(v0,v1,a0)*step(e0,x_2443053725)*step(x_2443053725,e1),\\n    max(mix(v1,v2,a1)*step(e1,x_2443053725)*step(x_2443053725,e2),\\n    max(mix(v2,v3,a2)*step(e2,x_2443053725)*step(x_2443053725,e3),\\n    max(mix(v3,v4,a3)*step(e3,x_2443053725)*step(x_2443053725,e4),\\n    max(mix(v4,v5,a4)*step(e4,x_2443053725)*step(x_2443053725,e5),\\n    max(mix(v5,v6,a5)*step(e5,x_2443053725)*step(x_2443053725,e6),\\n    max(mix(v6,v7,a6)*step(e6,x_2443053725)*step(x_2443053725,e7),mix(v7,v8,a7)*step(e7,x_2443053725)*step(x_2443053725,e8)\\n  )))))));\\n}\\n\\nvec4 jet (float x_623120303) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0,0,0.5137254901960784,1);\\n  const float e1 = 0.125;\\n  const vec4 v1 = vec4(0,0.23529411764705882,0.6666666666666666,1);\\n  const float e2 = 0.375;\\n  const vec4 v2 = vec4(0.0196078431372549,1,1,1);\\n  const float e3 = 0.625;\\n  const vec4 v3 = vec4(1,1,0,1);\\n  const float e4 = 0.875;\\n  const vec4 v4 = vec4(0.9803921568627451,0,0,1);\\n  const float e5 = 1.0;\\n  const vec4 v5 = vec4(0.5019607843137255,0,0,1);\\n  float a0 = smoothstep(e0,e1,x_623120303);\\n  float a1 = smoothstep(e1,e2,x_623120303);\\n  float a2 = smoothstep(e2,e3,x_623120303);\\n  float a3 = smoothstep(e3,e4,x_623120303);\\n  float a4 = smoothstep(e4,e5,x_623120303);\\n  return max(mix(v0,v1,a0)*step(e0,x_623120303)*step(x_623120303,e1),\\n    max(mix(v1,v2,a1)*step(e1,x_623120303)*step(x_623120303,e2),\\n    max(mix(v2,v3,a2)*step(e2,x_623120303)*step(x_623120303,e3),\\n    max(mix(v3,v4,a3)*step(e3,x_623120303)*step(x_623120303,e4),mix(v4,v5,a4)*step(e4,x_623120303)*step(x_623120303,e5)\\n  ))));\\n}\\n\\nvec4 bone (float x_783795047) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0,0,0,1);\\n  const float e1 = 0.376;\\n  const vec4 v1 = vec4(0.32941176470588235,0.32941176470588235,0.4549019607843137,1);\\n  const float e2 = 0.753;\\n  const vec4 v2 = vec4(0.6627450980392157,0.7843137254901961,0.7843137254901961,1);\\n  const float e3 = 1.0;\\n  const vec4 v3 = vec4(1,1,1,1);\\n  float a0 = smoothstep(e0,e1,x_783795047);\\n  float a1 = smoothstep(e1,e2,x_783795047);\\n  float a2 = smoothstep(e2,e3,x_783795047);\\n  return max(mix(v0,v1,a0)*step(e0,x_783795047)*step(x_783795047,e1),\\n    max(mix(v1,v2,a1)*step(e1,x_783795047)*step(x_783795047,e2),mix(v2,v3,a2)*step(e2,x_783795047)*step(x_783795047,e3)\\n  ));\\n}\\n\\nvec4 copper (float x_3932431844) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0,0,0,1);\\n  const float e1 = 0.804;\\n  const vec4 v1 = vec4(1,0.6274509803921569,0.4,1);\\n  const float e2 = 1.0;\\n  const vec4 v2 = vec4(1,0.7803921568627451,0.4980392156862745,1);\\n  float a0 = smoothstep(e0,e1,x_3932431844);\\n  float a1 = smoothstep(e1,e2,x_3932431844);\\n  return max(mix(v0,v1,a0)*step(e0,x_3932431844)*step(x_3932431844,e1),mix(v1,v2,a1)*step(e1,x_3932431844)*step(x_3932431844,e2)\\n  );\\n}\\n\\nvec4 density (float x_2921433544) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0.21176470588235294,0.054901960784313725,0.1411764705882353,1);\\n  const float e1 = 0.13;\\n  const vec4 v1 = vec4(0.34901960784313724,0.09019607843137255,0.3137254901960784,1);\\n  const float e2 = 0.25;\\n  const vec4 v2 = vec4(0.43137254901960786,0.17647058823529413,0.5176470588235295,1);\\n  const float e3 = 0.38;\\n  const vec4 v3 = vec4(0.47058823529411764,0.30196078431372547,0.6980392156862745,1);\\n  const float e4 = 0.5;\\n  const vec4 v4 = vec4(0.47058823529411764,0.44313725490196076,0.8352941176470589,1);\\n  const float e5 = 0.63;\\n  const vec4 v5 = vec4(0.45098039215686275,0.592156862745098,0.8941176470588236,1);\\n  const float e6 = 0.75;\\n  const vec4 v6 = vec4(0.5254901960784314,0.7254901960784313,0.8901960784313725,1);\\n  const float e7 = 0.88;\\n  const vec4 v7 = vec4(0.6941176470588235,0.8392156862745098,0.8901960784313725,1);\\n  const float e8 = 1.0;\\n  const vec4 v8 = vec4(0.9019607843137255,0.9450980392156862,0.9450980392156862,1);\\n  float a0 = smoothstep(e0,e1,x_2921433544);\\n  float a1 = smoothstep(e1,e2,x_2921433544);\\n  float a2 = smoothstep(e2,e3,x_2921433544);\\n  float a3 = smoothstep(e3,e4,x_2921433544);\\n  float a4 = smoothstep(e4,e5,x_2921433544);\\n  float a5 = smoothstep(e5,e6,x_2921433544);\\n  float a6 = smoothstep(e6,e7,x_2921433544);\\n  float a7 = smoothstep(e7,e8,x_2921433544);\\n  return max(mix(v0,v1,a0)*step(e0,x_2921433544)*step(x_2921433544,e1),\\n    max(mix(v1,v2,a1)*step(e1,x_2921433544)*step(x_2921433544,e2),\\n    max(mix(v2,v3,a2)*step(e2,x_2921433544)*step(x_2921433544,e3),\\n    max(mix(v3,v4,a3)*step(e3,x_2921433544)*step(x_2921433544,e4),\\n    max(mix(v4,v5,a4)*step(e4,x_2921433544)*step(x_2921433544,e5),\\n    max(mix(v5,v6,a5)*step(e5,x_2921433544)*step(x_2921433544,e6),\\n    max(mix(v6,v7,a6)*step(e6,x_2921433544)*step(x_2921433544,e7),mix(v7,v8,a7)*step(e7,x_2921433544)*step(x_2921433544,e8)\\n  )))))));\\n}\\n\\nvec4 inferno (float x_1987546174) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0,0,0.01568627450980392,1);\\n  const float e1 = 0.13;\\n  const vec4 v1 = vec4(0.12156862745098039,0.047058823529411764,0.2823529411764706,1);\\n  const float e2 = 0.25;\\n  const vec4 v2 = vec4(0.3333333333333333,0.058823529411764705,0.42745098039215684,1);\\n  const float e3 = 0.38;\\n  const vec4 v3 = vec4(0.5333333333333333,0.13333333333333333,0.41568627450980394,1);\\n  const float e4 = 0.5;\\n  const vec4 v4 = vec4(0.7294117647058823,0.21176470588235294,0.3333333333333333,1);\\n  const float e5 = 0.63;\\n  const vec4 v5 = vec4(0.8901960784313725,0.34901960784313724,0.2,1);\\n  const float e6 = 0.75;\\n  const vec4 v6 = vec4(0.9764705882352941,0.5490196078431373,0.0392156862745098,1);\\n  const float e7 = 0.88;\\n  const vec4 v7 = vec4(0.9764705882352941,0.788235294117647,0.19607843137254902,1);\\n  const float e8 = 1.0;\\n  const vec4 v8 = vec4(0.9882352941176471,1,0.6431372549019608,1);\\n  float a0 = smoothstep(e0,e1,x_1987546174);\\n  float a1 = smoothstep(e1,e2,x_1987546174);\\n  float a2 = smoothstep(e2,e3,x_1987546174);\\n  float a3 = smoothstep(e3,e4,x_1987546174);\\n  float a4 = smoothstep(e4,e5,x_1987546174);\\n  float a5 = smoothstep(e5,e6,x_1987546174);\\n  float a6 = smoothstep(e6,e7,x_1987546174);\\n  float a7 = smoothstep(e7,e8,x_1987546174);\\n  return max(mix(v0,v1,a0)*step(e0,x_1987546174)*step(x_1987546174,e1),\\n    max(mix(v1,v2,a1)*step(e1,x_1987546174)*step(x_1987546174,e2),\\n    max(mix(v2,v3,a2)*step(e2,x_1987546174)*step(x_1987546174,e3),\\n    max(mix(v3,v4,a3)*step(e3,x_1987546174)*step(x_1987546174,e4),\\n    max(mix(v4,v5,a4)*step(e4,x_1987546174)*step(x_1987546174,e5),\\n    max(mix(v5,v6,a5)*step(e5,x_1987546174)*step(x_1987546174,e6),\\n    max(mix(v6,v7,a6)*step(e6,x_1987546174)*step(x_1987546174,e7),mix(v7,v8,a7)*step(e7,x_1987546174)*step(x_1987546174,e8)\\n  )))))));\\n}\\n\\nvec4 cool (float x_761030515) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0.49019607843137253,0,0.7019607843137254,1);\\n  const float e1 = 0.13;\\n  const vec4 v1 = vec4(0.4549019607843137,0,0.8549019607843137,1);\\n  const float e2 = 0.25;\\n  const vec4 v2 = vec4(0.3843137254901961,0.2901960784313726,0.9294117647058824,1);\\n  const float e3 = 0.38;\\n  const vec4 v3 = vec4(0.26666666666666666,0.5725490196078431,0.9058823529411765,1);\\n  const float e4 = 0.5;\\n  const vec4 v4 = vec4(0,0.8,0.7725490196078432,1);\\n  const float e5 = 0.63;\\n  const vec4 v5 = vec4(0,0.9686274509803922,0.5725490196078431,1);\\n  const float e6 = 0.75;\\n  const vec4 v6 = vec4(0,1,0.34509803921568627,1);\\n  const float e7 = 0.88;\\n  const vec4 v7 = vec4(0.1568627450980392,1,0.03137254901960784,1);\\n  const float e8 = 1.0;\\n  const vec4 v8 = vec4(0.5764705882352941,1,0,1);\\n  float a0 = smoothstep(e0,e1,x_761030515);\\n  float a1 = smoothstep(e1,e2,x_761030515);\\n  float a2 = smoothstep(e2,e3,x_761030515);\\n  float a3 = smoothstep(e3,e4,x_761030515);\\n  float a4 = smoothstep(e4,e5,x_761030515);\\n  float a5 = smoothstep(e5,e6,x_761030515);\\n  float a6 = smoothstep(e6,e7,x_761030515);\\n  float a7 = smoothstep(e7,e8,x_761030515);\\n  return max(mix(v0,v1,a0)*step(e0,x_761030515)*step(x_761030515,e1),\\n    max(mix(v1,v2,a1)*step(e1,x_761030515)*step(x_761030515,e2),\\n    max(mix(v2,v3,a2)*step(e2,x_761030515)*step(x_761030515,e3),\\n    max(mix(v3,v4,a3)*step(e3,x_761030515)*step(x_761030515,e4),\\n    max(mix(v4,v5,a4)*step(e4,x_761030515)*step(x_761030515,e5),\\n    max(mix(v5,v6,a5)*step(e5,x_761030515)*step(x_761030515,e6),\\n    max(mix(v6,v7,a6)*step(e6,x_761030515)*step(x_761030515,e7),mix(v7,v8,a7)*step(e7,x_761030515)*step(x_761030515,e8)\\n  )))))));\\n}\\n\\nvec4 hot (float x_180130041) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0,0,0,1);\\n  const float e1 = 0.3;\\n  const vec4 v1 = vec4(0.9019607843137255,0,0,1);\\n  const float e2 = 0.6;\\n  const vec4 v2 = vec4(1,0.8235294117647058,0,1);\\n  const float e3 = 1.0;\\n  const vec4 v3 = vec4(1,1,1,1);\\n  float a0 = smoothstep(e0,e1,x_180130041);\\n  float a1 = smoothstep(e1,e2,x_180130041);\\n  float a2 = smoothstep(e2,e3,x_180130041);\\n  return max(mix(v0,v1,a0)*step(e0,x_180130041)*step(x_180130041,e1),\\n    max(mix(v1,v2,a1)*step(e1,x_180130041)*step(x_180130041,e2),mix(v2,v3,a2)*step(e2,x_180130041)*step(x_180130041,e3)\\n  ));\\n}\\n\\nvec4 spring (float x_755571360) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(1,0,1,1);\\n  const float e1 = 1.0;\\n  const vec4 v1 = vec4(1,1,0,1);\\n  float a0 = smoothstep(e0,e1,x_755571360);\\n  return mix(v0,v1,a0)*step(e0,x_755571360)*step(x_755571360,e1);\\n}\\n\\nvec4 summer (float x_2651158874) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0,0.5019607843137255,0.4,1);\\n  const float e1 = 1.0;\\n  const vec4 v1 = vec4(1,1,0.4,1);\\n  float a0 = smoothstep(e0,e1,x_2651158874);\\n  return mix(v0,v1,a0)*step(e0,x_2651158874)*step(x_2651158874,e1);\\n}\\n\\nvec4 autumn (float x_626866098) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(1,0,0,1);\\n  const float e1 = 1.0;\\n  const vec4 v1 = vec4(1,1,0,1);\\n  float a0 = smoothstep(e0,e1,x_626866098);\\n  return mix(v0,v1,a0)*step(e0,x_626866098)*step(x_626866098,e1);\\n}\\n\\nvec4 winter (float x_2098958741) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0,0,1,1);\\n  const float e1 = 1.0;\\n  const vec4 v1 = vec4(0,1,0.5019607843137255,1);\\n  float a0 = smoothstep(e0,e1,x_2098958741);\\n  return mix(v0,v1,a0)*step(e0,x_2098958741)*step(x_2098958741,e1);\\n}\\n\\n// Data (mask) texture\\nuniform sampler2D channel0;\\nuniform sampler2D channel1;\\nuniform sampler2D channel2;\\nuniform sampler2D channel3;\\nuniform sampler2D channel4;\\nuniform sampler2D channel5;\\n\\n// Color texture\\nuniform sampler2D colorTex;\\nuniform float colorTexHeight;\\nuniform float colorTexWidth;\\nuniform float hovered;\\n// range\\nuniform bool channelsVisible[6];\\n\\n// Expression mapping\\nuniform vec2 uColorScaleRange;\\nuniform bool uIsExpressionMode;\\nuniform sampler2D expressionTex;\\n\\n// opacity\\nuniform float opacity;\\n\\nvarying vec2 vTexCoord;\\n\\nvec4 sampleAndGetColor(sampler2D dataTex, vec2 coord, bool isOn){\\n  float sampledData = texture(dataTex, coord).r;\\n  vec4 hoveredColor = float(sampledData == hovered && sampledData > 0. && hovered > 0.) * vec4(0., 0., 1., 1.);\\n  // Colors are laid out corresponding to ids in row-major order in the texture.  So if width of the texture is 10, and you want ID 25,\\n  // you need coordinate (1, 4) (i.e 2 rows down, and 5 columns over indexed from 0 for a total of 25 units covered in row major order).\\n  vec2 colorTexCoord = vec2(mod(sampledData, colorTexWidth) / colorTexWidth, floor(sampledData / colorTexWidth) / (colorTexHeight - 1.));\\n  float expressionValue = texture(expressionTex, colorTexCoord).r / 255.;\\n  float scaledExpressionValue = (expressionValue - uColorScaleRange[0]) / max(0.005, (uColorScaleRange[1] - uColorScaleRange[0]));\\n  vec4 sampledColor = float(uIsExpressionMode) * COLORMAP_FUNC(clamp(scaledExpressionValue, 0.0, 1.0)) +  (1. - float(uIsExpressionMode)) * vec4(texture(colorTex, colorTexCoord).rgb, 1.);\\n  // Only return a color if the data is non-zero.\\n  return max(0., min(sampledData, 1.)) * float(isOn) * (sampledColor + hoveredColor);\\n}\\n\\nvoid main() {\\n\\n  gl_FragColor = sampleAndGetColor(channel0, vTexCoord, channelsVisible[0]);\\n\\n  // If the sampled color and the currently stored color (gl_FragColor) are identical, don't blend and use the sampled color,\\n  // otherwise just use the currently stored color.  Repeat this for all channels.\\n  vec4 sampledColor = sampleAndGetColor(channel1, vTexCoord, channelsVisible[1]);\\n  gl_FragColor = (sampledColor == gl_FragColor || sampledColor == vec4(0.)) ? gl_FragColor : sampledColor;\\n  sampledColor = sampleAndGetColor(channel2, vTexCoord, channelsVisible[2]);\\n  gl_FragColor = (sampledColor == gl_FragColor || sampledColor == vec4(0.)) ? gl_FragColor : sampledColor;\\n  sampledColor = sampleAndGetColor(channel3, vTexCoord, channelsVisible[3]);\\n  gl_FragColor = (sampledColor == gl_FragColor || sampledColor == vec4(0.)) ? gl_FragColor : sampledColor;\\n  sampledColor = sampleAndGetColor(channel4, vTexCoord, channelsVisible[4]);\\n  gl_FragColor = (sampledColor == gl_FragColor || sampledColor == vec4(0.)) ? gl_FragColor : sampledColor;\\n  sampledColor = sampleAndGetColor(channel5, vTexCoord, channelsVisible[5]);\\n  gl_FragColor = (sampledColor == gl_FragColor || sampledColor == vec4(0.)) ? gl_FragColor : sampledColor;\\n  // Apply the opacity if there is pixel data, and if the pixel data is empty i.e no segmentation, use 0 opacity.\\n  gl_FragColor = vec4(gl_FragColor.rgb, (gl_FragColor.rgb == vec3(0., 0., 0.)) ? 0.0 : opacity);\\n\\n  geometry.uv = vTexCoord;\\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\\n}\\n\"; // src/layers/BitmaskLayer.js\n\nfunction padWithDefault2(arr, defaultValue, padWidth) {\n  const newArr = [...arr];\n\n  for (let i = 0; i < padWidth; i += 1) {\n    newArr.push(defaultValue);\n  }\n\n  return newArr;\n}\n\nvar defaultProps5 = {\n  hoveredCell: {\n    type: \"number\",\n    value: null,\n    compare: true\n  },\n  cellColorData: {\n    type: \"object\",\n    value: null,\n    compare: true\n  },\n  colormap: {\n    type: \"string\",\n    value: GLSL_COLORMAP_DEFAULT,\n    compare: true\n  },\n  expressionData: {\n    type: \"object\",\n    value: null,\n    compare: true\n  }\n};\nvar BitmaskLayer = class extends XRLayer {\n  getShaders() {\n    const {\n      colormap\n    } = this.props;\n    return {\n      fs: fs3,\n      vs: vs3,\n      modules: [project323, picking3],\n      defines: {\n        [COLORMAP_SHADER_PLACEHOLDER]: GLSL_COLORMAPS.includes(colormap) ? colormap : GLSL_COLORMAP_DEFAULT\n      }\n    };\n  }\n\n  updateState(_ref46) {\n    let {\n      props,\n      oldProps,\n      changeFlags\n    } = _ref46;\n    super.updateState({\n      props,\n      oldProps,\n      changeFlags\n    });\n\n    if (props.cellColorData !== oldProps.cellColorData) {\n      this.setColorTexture();\n    }\n\n    if (props.expressionData !== oldProps.expressionData) {\n      const {\n        expressionData,\n        cellTexHeight,\n        cellTexWidth\n      } = this.props;\n      const expressionTex = this.dataToTexture(expressionData, cellTexWidth, cellTexHeight);\n      this.setState({\n        expressionTex\n      });\n    }\n\n    if (props.colormap !== oldProps.colormap) {\n      const {\n        gl\n      } = this.context;\n\n      if (this.state.model) {\n        this.state.model.delete();\n      }\n\n      this.setState({\n        model: this._getModel(gl)\n      });\n      this.getAttributeManager().invalidateAll();\n    }\n  }\n\n  setColorTexture() {\n    const {\n      cellColorData: data,\n      cellTexHeight: height,\n      cellTexWidth: width\n    } = this.props;\n    const colorTex = new Texture2D3(this.context.gl, {\n      width,\n      height,\n      data,\n      mipmaps: false,\n      parameters: {\n        [GL4.TEXTURE_MIN_FILTER]: GL4.NEAREST,\n        [GL4.TEXTURE_MAG_FILTER]: GL4.NEAREST,\n        [GL4.TEXTURE_WRAP_S]: GL4.CLAMP_TO_EDGE,\n        [GL4.TEXTURE_WRAP_T]: GL4.CLAMP_TO_EDGE\n      },\n      format: GL4.RGB,\n      dataFormat: GL4.RGB,\n      type: GL4.UNSIGNED_BYTE\n    });\n    this.setState({\n      colorTex\n    });\n  }\n\n  draw(opts) {\n    const {\n      uniforms\n    } = opts;\n    const {\n      channelsVisible,\n      hoveredCell,\n      colorScaleLo,\n      colorScaleHi,\n      isExpressionMode\n    } = this.props;\n    const {\n      textures,\n      model,\n      colorTex,\n      expressionTex\n    } = this.state;\n\n    if (textures && model && colorTex) {\n      model.setUniforms(Object.assign({}, uniforms, __spreadValues({\n        hovered: hoveredCell || 0,\n        colorTex,\n        expressionTex,\n        colorTexHeight: colorTex.height,\n        colorTexWidth: colorTex.width,\n        channelsVisible: padWithDefault2(channelsVisible, false, 6 - channelsVisible.length),\n        uColorScaleRange: [colorScaleLo, colorScaleHi],\n        uIsExpressionMode: isExpressionMode\n      }, textures))).draw();\n    }\n  }\n\n  dataToTexture(data, width, height) {\n    const isWebGL2On = isWebGL22(this.context.gl);\n    return new Texture2D3(this.context.gl, {\n      width,\n      height,\n      data: new Float32Array(data),\n      mipmaps: false,\n      parameters: {\n        [GL4.TEXTURE_MIN_FILTER]: GL4.NEAREST,\n        [GL4.TEXTURE_MAG_FILTER]: GL4.NEAREST,\n        [GL4.TEXTURE_WRAP_S]: GL4.CLAMP_TO_EDGE,\n        [GL4.TEXTURE_WRAP_T]: GL4.CLAMP_TO_EDGE\n      },\n      format: isWebGL2On ? GL4.R32F : GL4.LUMINANCE,\n      dataFormat: isWebGL2On ? GL4.RED : GL4.LUMINANCE,\n      type: GL4.FLOAT\n    });\n  }\n\n};\nBitmaskLayer.layerName = \"BitmaskLayer\";\nBitmaskLayer.defaultProps = defaultProps5; // src/components/layer-controller/utils.js\n\nimport { Matrix4 as Matrix42 } from \"math.gl\";\n\nfunction getSingleSelectionStats2D(_0) {\n  return __async(this, arguments, function* (_ref47) {\n    let {\n      loader,\n      selection\n    } = _ref47;\n    const data = Array.isArray(loader) ? loader[loader.length - 1] : loader;\n    const raster = yield data.getRaster({\n      selection\n    });\n    const selectionStats = getChannelStats(raster.data);\n    const {\n      domain,\n      contrastLimits: slider\n    } = selectionStats;\n    return {\n      domain,\n      slider\n    };\n  });\n}\n\nfunction getSingleSelectionStats3D(_0) {\n  return __async(this, arguments, function* (_ref48) {\n    let {\n      loader,\n      selection\n    } = _ref48;\n    const lowResSource = loader[loader.length - 1];\n    const {\n      shape,\n      labels\n    } = lowResSource;\n    const sizeZ = shape[labels.indexOf(\"z\")] >> loader.length - 1;\n    const raster0 = yield lowResSource.getRaster({\n      selection: __spreadProps(__spreadValues({}, selection), {\n        z: 0\n      })\n    });\n    const rasterMid = yield lowResSource.getRaster({\n      selection: __spreadProps(__spreadValues({}, selection), {\n        z: Math.floor(sizeZ / 2)\n      })\n    });\n    const rasterTop = yield lowResSource.getRaster({\n      selection: __spreadProps(__spreadValues({}, selection), {\n        z: Math.max(0, sizeZ - 1)\n      })\n    });\n    const stats0 = getChannelStats(raster0.data);\n    const statsMid = getChannelStats(rasterMid.data);\n    const statsTop = getChannelStats(rasterTop.data);\n    return {\n      domain: [Math.min(stats0.domain[0], statsMid.domain[0], statsTop.domain[0]), Math.max(stats0.domain[1], statsMid.domain[1], statsTop.domain[1])],\n      slider: [Math.min(stats0.contrastLimits[0], statsMid.contrastLimits[0], statsTop.contrastLimits[0]), Math.max(stats0.contrastLimits[1], statsMid.contrastLimits[1], statsTop.contrastLimits[1])]\n    };\n  });\n}\n\nvar getSingleSelectionStats = _0 => __async(void 0, [_0], function* (_ref49) {\n  let {\n    loader,\n    selection,\n    use3d\n  } = _ref49;\n  const getStats = use3d ? getSingleSelectionStats3D : getSingleSelectionStats2D;\n  return getStats({\n    loader,\n    selection\n  });\n});\n\nvar getMultiSelectionStats = _0 => __async(void 0, [_0], function* (_ref50) {\n  let {\n    loader,\n    selections,\n    use3d\n  } = _ref50;\n  const stats = yield Promise.all(selections.map(selection => getSingleSelectionStats({\n    loader,\n    selection,\n    use3d\n  })));\n  const domains = stats.map(stat => stat.domain);\n  const sliders = stats.map(stat => stat.slider);\n  return {\n    domains,\n    sliders\n  };\n});\n\nfunction getPhysicalSizeScalingMatrix2(loader) {\n  var _a2, _b2;\n\n  const {\n    x,\n    y,\n    z\n  } = (_b2 = (_a2 = loader == null ? void 0 : loader.meta) == null ? void 0 : _a2.physicalSizes) != null ? _b2 : {};\n\n  if ((x == null ? void 0 : x.size) && (y == null ? void 0 : y.size) && (z == null ? void 0 : z.size)) {\n    const min = Math.min(z.size, x.size, y.size);\n    const ratio = [x.size / min, y.size / min, z.size / min];\n    return new Matrix42().scale(ratio);\n  }\n\n  return new Matrix42().identity();\n}\n\nfunction getBoundingCube(loader) {\n  const source = Array.isArray(loader) ? loader[0] : loader;\n  const {\n    shape,\n    labels\n  } = source;\n  const physicalSizeScalingMatrix = getPhysicalSizeScalingMatrix2(source);\n  const xSlice = [0, physicalSizeScalingMatrix[0] * shape[labels.indexOf(\"x\")]];\n  const ySlice = [0, physicalSizeScalingMatrix[5] * shape[labels.indexOf(\"y\")]];\n  const zSlice = [0, physicalSizeScalingMatrix[10] * shape[labels.indexOf(\"z\")]];\n  return [xSlice, ySlice, zSlice];\n}\n\nfunction abbreviateNumber(value) {\n  const maxLength = 5;\n  let maxNaiveDigits = maxLength;\n\n  if (!Number.isInteger(value)) {\n    --maxNaiveDigits;\n  }\n\n  if (value < 1) {\n    --maxNaiveDigits;\n  }\n\n  const naive = Intl.NumberFormat(\"en-US\", {\n    maximumSignificantDigits: maxNaiveDigits,\n    useGrouping: false\n  }).format(value);\n  if (naive.length <= maxLength) return naive;\n  return value.toExponential(0);\n} // src/components/spatial/utils.js\n\n\nfunction square(x, y, r) {\n  return [[x, y + r], [x + r, y], [x, y - r], [x - r, y]];\n}\n\nfunction getDefaultGlobalSelection(source) {\n  const globalIndices = source.labels.filter(dim => GLOBAL_LABELS.includes(dim));\n  const selection = {};\n  globalIndices.forEach(dim => {\n    selection[dim] = Math.floor((source.shape[source.labels.indexOf(dim)] || 0) / 2);\n  });\n  return selection;\n}\n\nfunction buildDefaultSelection(source) {\n  const selection = [];\n  const globalSelection = getDefaultGlobalSelection(source);\n  const firstNonGlobalDimension = source.labels.filter(dim => !GLOBAL_LABELS.includes(dim) && source.shape[source.labels.indexOf(dim)])[0];\n\n  for (let i = 0; i < Math.min(4, source.shape[source.labels.indexOf(firstNonGlobalDimension)]); i += 1) {\n    selection.push(__spreadValues({\n      [firstNonGlobalDimension]: i\n    }, globalSelection));\n  }\n\n  return selection;\n}\n\nfunction isInterleaved2(shape) {\n  const lastDimSize = shape[shape.length - 1];\n  return lastDimSize === 3 || lastDimSize === 4;\n}\n\nfunction initializeLayerChannels(loader, use3d) {\n  return __async(this, null, function* () {\n    const result = [];\n    const source = getSourceFromLoader(loader);\n    let defaultSelection = buildDefaultSelection(source);\n    defaultSelection = isInterleaved2(source.shape) ? [__spreadProps(__spreadValues({}, defaultSelection[0]), {\n      c: 0\n    })] : defaultSelection;\n    const stats = yield getMultiSelectionStats({\n      loader: loader.data,\n      selections: defaultSelection,\n      use3d\n    });\n    const domains = isRgb(loader) ? [[0, 255], [0, 255], [0, 255]] : stats.domains;\n    const colors = isRgb(loader) ? [[255, 0, 0], [0, 255, 0], [0, 0, 255]] : null;\n    const sliders = isRgb(loader) ? [[0, 255], [0, 255], [0, 255]] : stats.sliders;\n    defaultSelection.forEach((selection, i) => {\n      const domain = domains[i];\n      const slider = sliders[i];\n      const channel = {\n        selection,\n        color: colors ? colors[i] : defaultSelection.length !== 1 ? VIEWER_PALETTE[i] : [255, 255, 255],\n        visible: true,\n        slider: slider || domain\n      };\n      result.push(channel);\n    });\n    return result;\n  });\n}\n\nfunction getMetaWithTransformMatrices(imageMeta, imageLoaders) {\n  const sources = imageLoaders.map(loader => getSourceFromLoader(loader));\n\n  if (imageMeta.map(meta => {\n    var _a2, _b2, _c, _d, _e, _f;\n\n    return ((_b2 = (_a2 = meta == null ? void 0 : meta.metadata) == null ? void 0 : _a2.transform) == null ? void 0 : _b2.matrix) || ((_d = (_c = meta == null ? void 0 : meta.metadata) == null ? void 0 : _c.transform) == null ? void 0 : _d.scale) || ((_f = (_e = meta == null ? void 0 : meta.metadata) == null ? void 0 : _e.transform) == null ? void 0 : _f.translate);\n  }).some(Boolean) || sources.every(source => {\n    var _a2, _b2, _c, _d;\n\n    return !((_b2 = (_a2 = source.meta) == null ? void 0 : _a2.physicalSizes) == null ? void 0 : _b2.x) || !((_d = (_c = source.meta) == null ? void 0 : _c.physicalSizes) == null ? void 0 : _d.y);\n  })) {\n    return imageMeta;\n  }\n\n  const minPhysicalSize = sources.reduce((acc, source) => {\n    var _a2, _b2, _c, _d, _e, _f, _g, _h, _i;\n\n    const hasZPhyscialSize = (_c = (_b2 = (_a2 = source.meta) == null ? void 0 : _a2.physicalSizes) == null ? void 0 : _b2.z) == null ? void 0 : _c.size;\n    const sizes = [unit(`${(_d = source.meta) == null ? void 0 : _d.physicalSizes.x.size} ${(_e = source.meta) == null ? void 0 : _e.physicalSizes.x.unit}`.replace(\"\\xB5\", \"u\")), unit(`${(_f = source.meta) == null ? void 0 : _f.physicalSizes.y.size} ${(_g = source.meta) == null ? void 0 : _g.physicalSizes.y.unit}`.replace(\"\\xB5\", \"u\"))];\n\n    if (hasZPhyscialSize) {\n      sizes.push(unit(`${(_h = source.meta) == null ? void 0 : _h.physicalSizes.z.size} ${(_i = source.meta) == null ? void 0 : _i.physicalSizes.z.unit}`.replace(\"\\xB5\", \"u\")));\n    }\n\n    acc[0] = acc[0] === void 0 || compare(sizes[0], acc[0]) === -1 ? sizes[0] : acc[0];\n    acc[1] = acc[1] === void 0 || compare(sizes[1], acc[1]) === -1 ? sizes[1] : acc[1];\n    acc[2] = acc[2] === void 0 || compare(sizes[2], acc[2]) === -1 ? sizes[2] : acc[2];\n    return acc;\n  }, []);\n  const imageMetaWithTransform = imageMeta.map((meta, j) => {\n    var _a2, _b2, _c, _d, _e, _f, _g, _h, _i;\n\n    const source = sources[j];\n    const hasZPhyscialSize = (_c = (_b2 = (_a2 = source.meta) == null ? void 0 : _a2.physicalSizes) == null ? void 0 : _b2.z) == null ? void 0 : _c.size;\n    const sizes = [unit(`${(_d = source.meta) == null ? void 0 : _d.physicalSizes.x.size} ${(_e = source.meta) == null ? void 0 : _e.physicalSizes.x.unit}`.replace(\"\\xB5\", \"u\")), unit(`${(_f = source.meta) == null ? void 0 : _f.physicalSizes.y.size} ${(_g = source.meta) == null ? void 0 : _g.physicalSizes.y.unit}`.replace(\"\\xB5\", \"u\"))];\n\n    if (hasZPhyscialSize) {\n      sizes.push(unit(`${(_h = source.meta) == null ? void 0 : _h.physicalSizes.z.size} ${(_i = source.meta) == null ? void 0 : _i.physicalSizes.z.unit}`.replace(\"\\xB5\", \"u\")));\n    }\n\n    const scale = sizes.map((i, k) => divide(i, minPhysicalSize[k]));\n\n    if (!scale[2]) {\n      scale[2] = 1;\n    }\n\n    if (isEqual4(scale, [1, 1, 1])) {\n      return meta;\n    }\n\n    const matrix = new Matrix43().scale([...scale]);\n\n    const newMeta = __spreadValues({}, meta);\n\n    newMeta.metadata = __spreadProps(__spreadValues({}, newMeta.metadata), {\n      transform: {\n        matrix: matrix.toArray()\n      }\n    });\n    return newMeta;\n  });\n  return imageMetaWithTransform;\n}\n\nfunction initializeRasterLayersAndChannels(rasterLayers, rasterRenderLayers, usePhysicalSizeScaling) {\n  return __async(this, null, function* () {\n    const nextImageLoaders = [];\n    let nextImageMetaAndLayers = [];\n    const autoImageLayerDefPromises = [];\n    const loaders = yield Promise.all(rasterLayers.map(layer => layer.loaderCreator()));\n\n    for (let i = 0; i < rasterLayers.length; i++) {\n      const layer = rasterLayers[i];\n      const loader = loaders[i];\n      nextImageLoaders[i] = loader;\n      nextImageMetaAndLayers[i] = layer;\n    }\n\n    if (usePhysicalSizeScaling) {\n      nextImageMetaAndLayers = getMetaWithTransformMatrices(nextImageMetaAndLayers, nextImageLoaders);\n    }\n\n    if (!rasterRenderLayers) {\n      const layerIndex = Math.floor(rasterLayers.length / 2);\n      const loader = nextImageLoaders[layerIndex];\n      const autoImageLayerDefPromise = initializeLayerChannels(loader).then(channels2 => {\n        var _a2, _b2, _c, _d, _e;\n\n        return Promise.resolve(__spreadProps(__spreadValues({\n          type: ((_b2 = (_a2 = nextImageMetaAndLayers[layerIndex]) == null ? void 0 : _a2.metadata) == null ? void 0 : _b2.isBitmask) ? \"bitmask\" : \"raster\",\n          index: layerIndex\n        }, DEFAULT_RASTER_LAYER_PROPS), {\n          channels: channels2.map((channel, j) => __spreadValues(__spreadValues({}, channel), nextImageMetaAndLayers[layerIndex].channels ? nextImageMetaAndLayers[layerIndex].channels[j] : [])),\n          modelMatrix: (_e = (_d = (_c = nextImageMetaAndLayers[layerIndex]) == null ? void 0 : _c.metadata) == null ? void 0 : _d.transform) == null ? void 0 : _e.matrix,\n          transparentColor: layerIndex > 0 ? [0, 0, 0] : null\n        }));\n      });\n      autoImageLayerDefPromises.push(autoImageLayerDefPromise);\n    } else {\n      const globalIndicesOfRenderLayers = rasterRenderLayers.map(imageName => rasterLayers.findIndex(image => image.name === imageName));\n\n      for (let i = 0; i < globalIndicesOfRenderLayers.length; i++) {\n        const layerIndex = globalIndicesOfRenderLayers[i];\n        const loader = nextImageLoaders[layerIndex];\n        const autoImageLayerDefPromise = initializeLayerChannels(loader).then(channels2 => {\n          var _a2, _b2, _c, _d, _e;\n\n          return Promise.resolve(__spreadProps(__spreadValues({\n            type: ((_b2 = (_a2 = nextImageMetaAndLayers[layerIndex]) == null ? void 0 : _a2.metadata) == null ? void 0 : _b2.isBitmask) ? \"bitmask\" : \"raster\",\n            index: layerIndex\n          }, DEFAULT_RASTER_LAYER_PROPS), {\n            channels: channels2.map((channel, j) => __spreadValues(__spreadValues({}, channel), nextImageMetaAndLayers[layerIndex].channels ? nextImageMetaAndLayers[layerIndex].channels[j] : [])),\n            domainType: \"Min/Max\",\n            modelMatrix: (_e = (_d = (_c = nextImageMetaAndLayers[layerIndex]) == null ? void 0 : _c.metadata) == null ? void 0 : _d.transform) == null ? void 0 : _e.matrix,\n            transparentColor: i > 0 ? [0, 0, 0] : null\n          }));\n        });\n        autoImageLayerDefPromises.push(autoImageLayerDefPromise);\n      }\n    }\n\n    const autoImageLayerDefs = yield Promise.all(autoImageLayerDefPromises);\n    return [autoImageLayerDefs, nextImageLoaders, nextImageMetaAndLayers];\n  });\n}\n\nfunction makeSpatialSubtitle(_ref51) {\n  let {\n    observationsCount,\n    observationsLabel,\n    observationsPluralLabel,\n    subobservationsCount,\n    subobservationsLabel,\n    subobservationsPluralLabel,\n    locationsCount\n  } = _ref51;\n  const parts = [];\n\n  if (subobservationsCount > 0) {\n    let part = `${subobservationsCount} ${pluralize(subobservationsLabel, subobservationsPluralLabel, subobservationsCount)}`;\n\n    if (locationsCount > 0) {\n      part += ` at ${shortNumber(locationsCount)} locations`;\n    }\n\n    parts.push(part);\n  }\n\n  if (observationsCount > 0) {\n    parts.push(`${observationsCount} ${pluralize(observationsLabel, observationsPluralLabel, observationsCount)}`);\n  }\n\n  return parts.join(\", \");\n}\n\nfunction getInitialSpatialTargets(_ref52) {\n  let {\n    width,\n    height,\n    cells,\n    imageLayerLoaders,\n    useRaster,\n    use3d\n  } = _ref52;\n  let initialTargetX = -Infinity;\n  let initialTargetY = -Infinity;\n  let initialTargetZ = -Infinity;\n  let initialZoom = -Infinity;\n  const zoomBackoff = use3d ? 1.5 : 0.1;\n  const cellValues = Object.values(cells);\n\n  if (imageLayerLoaders.length > 0 && useRaster) {\n    for (let i = 0; i < imageLayerLoaders.length; i += 1) {\n      const viewSize = {\n        height,\n        width\n      };\n      const {\n        target,\n        zoom: newViewStateZoom\n      } = getDefaultInitialViewState(imageLayerLoaders[i].data, viewSize, zoomBackoff, use3d);\n\n      if (target[0] > initialTargetX) {\n        initialTargetX = target[0];\n        initialZoom = newViewStateZoom;\n      }\n\n      if (target[1] > initialTargetY) {\n        initialTargetY = target[1];\n        initialZoom = newViewStateZoom;\n      }\n\n      if (target[2] > initialTargetZ) {\n        initialTargetZ = target[2];\n        initialZoom = newViewStateZoom;\n      } else {\n        initialTargetZ = null;\n      }\n    }\n  } else if (cellValues.length > 0 && cellValues[0].xy && !useRaster) {\n    const cellCoordinates = cellValues.map(c => c.xy);\n    let xExtent = extent(cellCoordinates, c => c[0]);\n    let yExtent = extent(cellCoordinates, c => c[1]);\n    let xRange = xExtent[1] - xExtent[0];\n    let yRange = yExtent[1] - yExtent[0];\n\n    const getViewExtentFromPolygonExtents = extents => [Math.min(...extents.map(i => i[0])), Math.max(...extents.map(i => i[1]))];\n\n    if (xRange === 0) {\n      const polygonExtentsX = cellValues.map(cell => extent(cell.poly, i => i[0]));\n      xExtent = getViewExtentFromPolygonExtents(polygonExtentsX);\n      xRange = xExtent[1] - xExtent[0];\n    }\n\n    if (yRange === 0) {\n      const polygonExtentsY = cellValues.map(cell => extent(cell.poly, i => i[1]));\n      yExtent = getViewExtentFromPolygonExtents(polygonExtentsY);\n      yRange = yExtent[1] - yExtent[0];\n    }\n\n    initialTargetX = xExtent[0] + xRange / 2;\n    initialTargetY = yExtent[0] + yRange / 2;\n    initialTargetZ = null;\n    initialZoom = Math.log2(Math.min(width / xRange, height / yRange)) - zoomBackoff;\n  } else {\n    return {\n      initialTargetX: null,\n      initialTargetY: null,\n      initialTargetZ: null,\n      initialZoom: null\n    };\n  }\n\n  return {\n    initialTargetX,\n    initialTargetY,\n    initialZoom,\n    initialTargetZ\n  };\n}\n\nfunction getLayerLoaderTuple(data, use3d) {\n  const loader = Array.isArray(data) && data.length > 1 || !Array.isArray(data) ? data : data[0];\n\n  if (use3d) {\n    return [VolumeLayer, Array.isArray(loader) ? loader : [loader]];\n  }\n\n  const Layer2 = Array.isArray(data) && data.length > 1 ? MultiscaleImageLayer : ImageLayer;\n  return [Layer2, loader];\n}\n\nfunction renderSubBitmaskLayers(props) {\n  const {\n    bbox: {\n      left,\n      top,\n      right,\n      bottom\n    },\n    x,\n    y,\n    z\n  } = props.tile;\n  const {\n    data,\n    id,\n    loader\n  } = props;\n\n  if ([left, bottom, right, top].some(v => v < 0) || !data) {\n    return null;\n  }\n\n  const base = loader[0];\n  const [height, width] = loader[0].shape.slice(-2);\n  const bounds = [left, data.height < base.tileSize ? height : bottom, data.width < base.tileSize ? width : right, top];\n  return new BitmaskLayer(props, {\n    channelData: data,\n    bounds,\n    id: `sub-layer-${bounds}-${id}`,\n    tileId: {\n      x,\n      y,\n      z\n    }\n  });\n} // src/components/shared-spatial-scatterplot/AbstractSpatialOrScatterplot.js\n\n\nimport React19, { PureComponent as PureComponent2 } from \"react\";\nimport DeckGL3, { OrthographicView as OrthographicView3, OrbitView as OrbitView2 } from \"deck.gl\"; // src/components/shared-spatial-scatterplot/ToolMenu.js\n\nimport React18 from \"react\";\nimport { SELECTION_TYPE as SELECTION_TYPE2 } from \"nebula.gl\"; // src/assets/tools/near_me.svg\n\nimport { createElement } from \"react\";\n\nfunction SvgNearMe(props) {\n  return /* @__PURE__ */createElement(\"svg\", __spreadValues({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\"\n  }, props), /* @__PURE__ */createElement(\"path\", {\n    fill: \"none\",\n    d: \"M0 0h24v24H0V0z\"\n  }), /* @__PURE__ */createElement(\"path\", {\n    d: \"M21 3L3 10.53v.98l6.84 2.65L12.48 21h.98L21 3z\"\n  }));\n}\n\nvar ReactComponent = SvgNearMe; // src/assets/tools/selection_rectangle.svg\n\nimport { createElement as createElement2 } from \"react\";\n\nfunction SvgSelectionRectangle(props) {\n  return /* @__PURE__ */createElement2(\"svg\", __spreadValues({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\"\n  }, props), /* @__PURE__ */createElement2(\"path\", {\n    d: \"       M19 19h2v2h-2v-2zm0-2h2v-2h-2v2z       M3 13h2v-2H3v2zm0 4h2v-2H3v2z       m0-8h2V7H3v2zm0-4h2V3H3v2z       m4 0h2V3H7v2zm8 16h2v-2h-2v2z       m-4 0h2v-2h-2v2z       m4 0h2v-2h-2v2z       m-8 0h2v-2H7v2z       m-4 0h2v-2H3v2z       M11 5h2v-2h-2v2z       M15 5h2v-2h-2v2z       M19 5h2v-2h-2v2z       M19 9h2v-2h-2v2z       M19 13h2v-2h-2v2z     \"\n  }));\n}\n\nvar ReactComponent2 = SvgSelectionRectangle; // src/assets/tools/selection_lasso.svg\n\nimport { createElement as createElement3 } from \"react\";\n\nfunction SvgSelectionLasso(props) {\n  return /* @__PURE__ */createElement3(\"svg\", __spreadValues({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\"\n  }, props), /* @__PURE__ */createElement3(\"g\", {\n    transform: \"translate(0,3)\"\n  }, /* @__PURE__ */createElement3(\"path\", {\n    style: {\n      strokeWidth: 0.343565\n    },\n    d: \"M 23.942314,4.6958443 C 23.446206,1.8868581 19.727461,0 14.687364,0 13.437819,0 12.150138,0.11543779 10.859708,0.34287772 4.1629423,1.5250844 -0.58168816,5.2884937 0.05768601,8.911385 c 0.25355086,1.439193 1.35605049,2.63583 3.04638949,3.461072 -0.2569865,0.387198 -0.4074679,0.826617 -0.4074679,1.29524 0,1.337498 1.1863293,2.457176 2.7639791,2.728248 l -1.3615475,2.333149 c -0.1576963,0.271073 -0.066308,0.61876 0.2047647,0.776457 0.090014,0.05291 0.1886171,0.07799 0.2858459,0.07799 0.1951448,0 0.3851362,-0.100665 0.4912977,-0.281723 l 1.6803757,-2.88148 C 8.41868,16.20561 9.6895264,15.063601 9.6998333,13.683844 c 6.872e-4,-0.0055 0.00137,-0.01065 0.00137,-0.01615 0,-0.02336 -0.00344,-0.04569 -0.00481,-0.06837 1.1292977,-0.0213 2.2847067,-0.130211 3.4435507,-0.334975 6.69711,-1.181863 11.44174,-4.9456164 10.802366,-8.5685077 z M 3.83312,13.667353 c 0,-0.30749 0.1281497,-0.59849 0.3470005,-0.848261 0.1219655,0.04295 0.2456489,0.08383 0.3717372,0.123339 l 1.2234344,2.352045 C 4.6865351,15.149835 3.83312,14.46408 3.83312,13.667353 Z M 7.0141869,15.216144 6.0223152,13.309702 5.4008064,12.114097 c 0.121622,-0.03161 0.2477103,-0.05634 0.3772342,-0.07387 0.1367388,-0.0189 0.2772568,-0.02886 0.420867,-0.02886 0.5067581,0 0.980534,0.11956 1.3701366,0.317454 0.5696305,0.289968 0.9554538,0.750345 0.9904974,1.262944 0.00137,0.02542 0.0055,0.05016 0.0055,0.07593 0,0.698124 -0.6562089,1.310356 -1.5508518,1.548447 z m 5.9185921,-3.126441 c -1.217251,0.214728 -2.429691,0.323982 -3.6060571,0.324669 -0.5765018,-0.911821 -1.7614569,-1.53917 -3.1278143,-1.53917 -0.4717146,0 -0.921441,0.07593 -1.332001,0.211292 -0.3061162,0.100665 -0.5878394,0.237403 -0.8427645,0.39991 C 2.4598914,10.828133 1.4360682,9.8579062 1.2319907,8.7035283 0.72660678,5.8381974 5.2307418,2.5475333 11.067221,1.5175259 c 1.222061,-0.2161023 2.439998,-0.3246688 3.620143,-0.3246688 4.371863,0 7.694479,1.5250844 8.080645,3.7101568 0.505041,2.8653309 -3.998751,6.1566821 -9.83523,7.1866891 z\",\n    id: \"path10\"\n  })));\n}\n\nvar ReactComponent3 = SvgSelectionLasso; // src/components/shared-spatial-scatterplot/ToolMenu.js\n\nfunction IconButton3(props) {\n  const {\n    alt,\n    onClick,\n    isActive,\n    children\n  } = props;\n  const inactive = \"btn btn-outline-secondary mr-2 icon\";\n  const active = `${inactive} active`;\n  return /* @__PURE__ */React18.createElement(\"button\", {\n    className: isActive ? active : inactive,\n    onClick,\n    type: \"button\",\n    title: alt\n  }, children);\n}\n\nfunction ToolMenu(props) {\n  const {\n    setActiveTool,\n    activeTool,\n    visibleTools = {\n      pan: true,\n      selectRectangle: true,\n      selectLasso: true\n    }\n  } = props;\n  return /* @__PURE__ */React18.createElement(\"div\", {\n    className: \"tool\"\n  }, visibleTools.pan && /* @__PURE__ */React18.createElement(IconButton3, {\n    alt: \"pointer tool\",\n    onClick: () => setActiveTool(null),\n    isActive: activeTool === null\n  }, /* @__PURE__ */React18.createElement(ReactComponent, null)), visibleTools.selectRectangle ? /* @__PURE__ */React18.createElement(IconButton3, {\n    alt: \"select rectangle\",\n    onClick: () => setActiveTool(SELECTION_TYPE2.RECTANGLE),\n    isActive: activeTool === SELECTION_TYPE2.RECTANGLE\n  }, /* @__PURE__ */React18.createElement(ReactComponent2, null)) : null, visibleTools.selectLasso ? /* @__PURE__ */React18.createElement(IconButton3, {\n    alt: \"select lasso\",\n    onClick: () => setActiveTool(SELECTION_TYPE2.POLYGON),\n    isActive: activeTool === SELECTION_TYPE2.POLYGON\n  }, /* @__PURE__ */React18.createElement(ReactComponent3, null)) : null);\n} // src/components/shared-spatial-scatterplot/cursor.js\n\n\nvar getCursorWithTool = () => \"crosshair\";\n\nvar getCursor = interactionState => interactionState.isDragging ? \"grabbing\" : \"default\"; // src/components/shared-spatial-scatterplot/AbstractSpatialOrScatterplot.js\n\n\nvar AbstractSpatialOrScatterplot = class extends PureComponent2 {\n  constructor(props) {\n    super(props);\n    this.state = {\n      gl: null,\n      tool: null\n    };\n    this.viewport = null;\n    this.onViewStateChange = this.onViewStateChange.bind(this);\n    this.onInitializeViewInfo = this.onInitializeViewInfo.bind(this);\n    this.onWebGLInitialized = this.onWebGLInitialized.bind(this);\n    this.onToolChange = this.onToolChange.bind(this);\n    this.onHover = this.onHover.bind(this);\n  }\n\n  onViewStateChange(_ref53) {\n    let {\n      viewState: nextViewState\n    } = _ref53;\n    const {\n      setViewState,\n      viewState,\n      layers,\n      spatialAxisFixed\n    } = this.props;\n    const use3d = layers == null ? void 0 : layers.some(l => l.use3d);\n    setViewState(__spreadProps(__spreadValues({}, nextViewState), {\n      target: spatialAxisFixed && use3d ? viewState.target : nextViewState.target\n    }));\n  }\n\n  onInitializeViewInfo(_ref54) {\n    let {\n      viewport\n    } = _ref54;\n    this.viewport = viewport;\n  }\n\n  onWebGLInitialized(gl) {\n    this.setState({\n      gl\n    });\n  }\n\n  onToolChange(tool) {\n    const {\n      onToolChange: onToolChangeProp\n    } = this.props;\n    this.setState({\n      tool\n    });\n\n    if (onToolChangeProp) {\n      onToolChangeProp(tool);\n    }\n  }\n\n  getLayers() {\n    return [];\n  }\n\n  onHover(info) {\n    const {\n      coordinate,\n      sourceLayer: layer,\n      tile\n    } = info;\n    const {\n      setCellHighlight,\n      cellHighlight,\n      setComponentHover,\n      layers\n    } = this.props;\n    const hasBitmask = (layers || []).some(l => l.type === \"bitmask\");\n\n    if (!setCellHighlight || !tile) {\n      return null;\n    }\n\n    if (!layer || !coordinate) {\n      if (cellHighlight && hasBitmask) {\n        setCellHighlight(null);\n      }\n\n      return null;\n    }\n\n    const {\n      content,\n      bbox,\n      z\n    } = tile;\n\n    if (!content) {\n      if (cellHighlight && hasBitmask) {\n        setCellHighlight(null);\n      }\n\n      return null;\n    }\n\n    const {\n      data,\n      width,\n      height\n    } = content;\n    const {\n      left,\n      right,\n      top,\n      bottom\n    } = bbox;\n    const bounds = [left, data.height < layer.tileSize ? height : bottom, data.width < layer.tileSize ? width : right, top];\n\n    if (!data) {\n      if (cellHighlight && hasBitmask) {\n        setCellHighlight(null);\n      }\n\n      return null;\n    }\n\n    if (layer.id.includes(\"bitmask\")) {\n      const layerZoomScale = Math.max(1, __pow(2, Math.round(-z)));\n      const dataCoords = [Math.floor((coordinate[0] - bounds[0]) / layerZoomScale), Math.floor((coordinate[1] - bounds[3]) / layerZoomScale)];\n      const coords = dataCoords[1] * width + dataCoords[0];\n      const hoverData = data.map(d => d[coords]);\n      const cellId = hoverData.find(i => i > 0);\n\n      if (cellId !== Number(cellHighlight)) {\n        if (setComponentHover) {\n          setComponentHover();\n        }\n\n        setCellHighlight(cellId ? String(cellId) : null);\n      }\n    }\n  }\n\n  viewInfoDidUpdate(getCellCoords) {\n    const {\n      updateViewInfo,\n      cells,\n      uuid\n    } = this.props;\n    const {\n      viewport\n    } = this;\n\n    if (updateViewInfo && viewport) {\n      updateViewInfo({\n        uuid,\n        project: cellId => {\n          const cell = cells[cellId];\n\n          try {\n            const [positionX, positionY] = getCellCoords(cell);\n            return viewport.project([positionX, positionY]);\n          } catch (e) {\n            return [null, null];\n          }\n        }\n      });\n    }\n  }\n\n  componentDidUpdate() {}\n\n  render() {\n    const {\n      deckRef,\n      viewState,\n      uuid,\n      layers: layerProps\n    } = this.props;\n    const {\n      gl,\n      tool\n    } = this.state;\n    const layers = this.getLayers();\n    const use3d = (layerProps || []).some(l => l.use3d);\n    const showCellSelectionTools = this.cellsLayer !== null || this.cellsEntries.length && this.cellsEntries[0][1].xy;\n    const showPanTool = this.cellsLayer !== null || layerProps.findIndex(l => l.type === \"bitmask\" || l.type === \"raster\") >= 0;\n    const useDevicePixels = this.cellsEntries.length < 1e5 && !use3d;\n    return /* @__PURE__ */React19.createElement(React19.Fragment, null, /* @__PURE__ */React19.createElement(ToolMenu, {\n      activeTool: tool,\n      setActiveTool: this.onToolChange,\n      visibleTools: {\n        pan: showPanTool,\n        selectRectangle: showCellSelectionTools,\n        selectLasso: showCellSelectionTools\n      }\n    }), /* @__PURE__ */React19.createElement(DeckGL3, {\n      id: `deckgl-overlay-${uuid}`,\n      ref: deckRef,\n      views: [use3d ? new OrbitView2({\n        id: \"orbit\",\n        controller: true,\n        orbitAxis: \"Y\"\n      }) : new OrthographicView3({\n        id: \"ortho\"\n      })],\n      layers: gl && viewState.target.slice(0, 2).every(i => typeof i === \"number\") ? layers : [],\n      glOptions: DEFAULT_GL_OPTIONS,\n      onWebGLInitialized: this.onWebGLInitialized,\n      onViewStateChange: this.onViewStateChange,\n      viewState,\n      useDevicePixels,\n      controller: tool ? {\n        dragPan: false\n      } : true,\n      getCursor: tool ? getCursorWithTool : getCursor,\n      onHover: this.onHover\n    }, this.onInitializeViewInfo));\n  }\n\n}; // src/components/shared-spatial-scatterplot/quadtree.js\n\nimport { quadtree } from \"d3-quadtree\";\n\nfunction createCellsQuadTree(cellsEntries, getCellCoords) {\n  if (!cellsEntries || !cellsEntries.length || !getCellCoords(cellsEntries[0][1])) {\n    return null;\n  }\n\n  const tree = quadtree().x(d => getCellCoords(d[1])[0]).y(d => getCellCoords(d[1])[1]).addAll(cellsEntries);\n  return tree;\n} // src/layer-extensions/ScaledExpressionExtension/ScaledExpressionExtension.js\n\n\nimport GL5 from \"@luma.gl/constants\";\nimport { LayerExtension } from \"@deck.gl/core\"; // src/layer-extensions/ScaledExpressionExtension/shader-module.js\n\nvar vs4 = \"\\nvec4 plasma (float x_1648624884) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0.050980392156862744,0.03137254901960784,0.5294117647058824,1);\\n  const float e1 = 0.13;\\n  const vec4 v1 = vec4(0.29411764705882354,0.011764705882352941,0.6313725490196078,1);\\n  const float e2 = 0.25;\\n  const vec4 v2 = vec4(0.49019607843137253,0.011764705882352941,0.6588235294117647,1);\\n  const float e3 = 0.38;\\n  const vec4 v3 = vec4(0.6588235294117647,0.13333333333333333,0.5882352941176471,1);\\n  const float e4 = 0.5;\\n  const vec4 v4 = vec4(0.796078431372549,0.27450980392156865,0.4745098039215686,1);\\n  const float e5 = 0.63;\\n  const vec4 v5 = vec4(0.8980392156862745,0.4196078431372549,0.36470588235294116,1);\\n  const float e6 = 0.75;\\n  const vec4 v6 = vec4(0.9725490196078431,0.5803921568627451,0.2549019607843137,1);\\n  const float e7 = 0.88;\\n  const vec4 v7 = vec4(0.9921568627450981,0.7647058823529411,0.1568627450980392,1);\\n  const float e8 = 1.0;\\n  const vec4 v8 = vec4(0.9411764705882353,0.9764705882352941,0.12941176470588237,1);\\n  float a0 = smoothstep(e0,e1,x_1648624884);\\n  float a1 = smoothstep(e1,e2,x_1648624884);\\n  float a2 = smoothstep(e2,e3,x_1648624884);\\n  float a3 = smoothstep(e3,e4,x_1648624884);\\n  float a4 = smoothstep(e4,e5,x_1648624884);\\n  float a5 = smoothstep(e5,e6,x_1648624884);\\n  float a6 = smoothstep(e6,e7,x_1648624884);\\n  float a7 = smoothstep(e7,e8,x_1648624884);\\n  return max(mix(v0,v1,a0)*step(e0,x_1648624884)*step(x_1648624884,e1),\\n    max(mix(v1,v2,a1)*step(e1,x_1648624884)*step(x_1648624884,e2),\\n    max(mix(v2,v3,a2)*step(e2,x_1648624884)*step(x_1648624884,e3),\\n    max(mix(v3,v4,a3)*step(e3,x_1648624884)*step(x_1648624884,e4),\\n    max(mix(v4,v5,a4)*step(e4,x_1648624884)*step(x_1648624884,e5),\\n    max(mix(v5,v6,a5)*step(e5,x_1648624884)*step(x_1648624884,e6),\\n    max(mix(v6,v7,a6)*step(e6,x_1648624884)*step(x_1648624884,e7),mix(v7,v8,a7)*step(e7,x_1648624884)*step(x_1648624884,e8)\\n  )))))));\\n}\\n\\nvec4 viridis (float x_686877309) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0.26666666666666666,0.00392156862745098,0.32941176470588235,1);\\n  const float e1 = 0.13;\\n  const vec4 v1 = vec4(0.2784313725490196,0.17254901960784313,0.47843137254901963,1);\\n  const float e2 = 0.25;\\n  const vec4 v2 = vec4(0.23137254901960785,0.3176470588235294,0.5450980392156862,1);\\n  const float e3 = 0.38;\\n  const vec4 v3 = vec4(0.17254901960784313,0.44313725490196076,0.5568627450980392,1);\\n  const float e4 = 0.5;\\n  const vec4 v4 = vec4(0.12941176470588237,0.5647058823529412,0.5529411764705883,1);\\n  const float e5 = 0.63;\\n  const vec4 v5 = vec4(0.15294117647058825,0.6784313725490196,0.5058823529411764,1);\\n  const float e6 = 0.75;\\n  const vec4 v6 = vec4(0.3607843137254902,0.7843137254901961,0.38823529411764707,1);\\n  const float e7 = 0.88;\\n  const vec4 v7 = vec4(0.6666666666666666,0.8627450980392157,0.19607843137254902,1);\\n  const float e8 = 1.0;\\n  const vec4 v8 = vec4(0.9921568627450981,0.9058823529411765,0.1450980392156863,1);\\n  float a0 = smoothstep(e0,e1,x_686877309);\\n  float a1 = smoothstep(e1,e2,x_686877309);\\n  float a2 = smoothstep(e2,e3,x_686877309);\\n  float a3 = smoothstep(e3,e4,x_686877309);\\n  float a4 = smoothstep(e4,e5,x_686877309);\\n  float a5 = smoothstep(e5,e6,x_686877309);\\n  float a6 = smoothstep(e6,e7,x_686877309);\\n  float a7 = smoothstep(e7,e8,x_686877309);\\n  return max(mix(v0,v1,a0)*step(e0,x_686877309)*step(x_686877309,e1),\\n    max(mix(v1,v2,a1)*step(e1,x_686877309)*step(x_686877309,e2),\\n    max(mix(v2,v3,a2)*step(e2,x_686877309)*step(x_686877309,e3),\\n    max(mix(v3,v4,a3)*step(e3,x_686877309)*step(x_686877309,e4),\\n    max(mix(v4,v5,a4)*step(e4,x_686877309)*step(x_686877309,e5),\\n    max(mix(v5,v6,a5)*step(e5,x_686877309)*step(x_686877309,e6),\\n    max(mix(v6,v7,a6)*step(e6,x_686877309)*step(x_686877309,e7),mix(v7,v8,a7)*step(e7,x_686877309)*step(x_686877309,e8)\\n  )))))));\\n}\\n\\nvec4 greys (float x_3692066534) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0,0,0,1);\\n  const float e1 = 1.0;\\n  const vec4 v1 = vec4(1,1,1,1);\\n  float a0 = smoothstep(e0,e1,x_3692066534);\\n  return mix(v0,v1,a0)*step(e0,x_3692066534)*step(x_3692066534,e1);\\n}\\n\\nvec4 magma (float x_652973032) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0,0,0.01568627450980392,1);\\n  const float e1 = 0.13;\\n  const vec4 v1 = vec4(0.10980392156862745,0.06274509803921569,0.26666666666666666,1);\\n  const float e2 = 0.25;\\n  const vec4 v2 = vec4(0.30980392156862746,0.07058823529411765,0.4823529411764706,1);\\n  const float e3 = 0.38;\\n  const vec4 v3 = vec4(0.5058823529411764,0.1450980392156863,0.5058823529411764,1);\\n  const float e4 = 0.5;\\n  const vec4 v4 = vec4(0.7098039215686275,0.21176470588235294,0.47843137254901963,1);\\n  const float e5 = 0.63;\\n  const vec4 v5 = vec4(0.8980392156862745,0.3137254901960784,0.39215686274509803,1);\\n  const float e6 = 0.75;\\n  const vec4 v6 = vec4(0.984313725490196,0.5294117647058824,0.3803921568627451,1);\\n  const float e7 = 0.88;\\n  const vec4 v7 = vec4(0.996078431372549,0.7607843137254902,0.5294117647058824,1);\\n  const float e8 = 1.0;\\n  const vec4 v8 = vec4(0.9882352941176471,0.9921568627450981,0.7490196078431373,1);\\n  float a0 = smoothstep(e0,e1,x_652973032);\\n  float a1 = smoothstep(e1,e2,x_652973032);\\n  float a2 = smoothstep(e2,e3,x_652973032);\\n  float a3 = smoothstep(e3,e4,x_652973032);\\n  float a4 = smoothstep(e4,e5,x_652973032);\\n  float a5 = smoothstep(e5,e6,x_652973032);\\n  float a6 = smoothstep(e6,e7,x_652973032);\\n  float a7 = smoothstep(e7,e8,x_652973032);\\n  return max(mix(v0,v1,a0)*step(e0,x_652973032)*step(x_652973032,e1),\\n    max(mix(v1,v2,a1)*step(e1,x_652973032)*step(x_652973032,e2),\\n    max(mix(v2,v3,a2)*step(e2,x_652973032)*step(x_652973032,e3),\\n    max(mix(v3,v4,a3)*step(e3,x_652973032)*step(x_652973032,e4),\\n    max(mix(v4,v5,a4)*step(e4,x_652973032)*step(x_652973032,e5),\\n    max(mix(v5,v6,a5)*step(e5,x_652973032)*step(x_652973032,e6),\\n    max(mix(v6,v7,a6)*step(e6,x_652973032)*step(x_652973032,e7),mix(v7,v8,a7)*step(e7,x_652973032)*step(x_652973032,e8)\\n  )))))));\\n}\\n\\nvec4 jet (float x_799389509) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0,0,0.5137254901960784,1);\\n  const float e1 = 0.125;\\n  const vec4 v1 = vec4(0,0.23529411764705882,0.6666666666666666,1);\\n  const float e2 = 0.375;\\n  const vec4 v2 = vec4(0.0196078431372549,1,1,1);\\n  const float e3 = 0.625;\\n  const vec4 v3 = vec4(1,1,0,1);\\n  const float e4 = 0.875;\\n  const vec4 v4 = vec4(0.9803921568627451,0,0,1);\\n  const float e5 = 1.0;\\n  const vec4 v5 = vec4(0.5019607843137255,0,0,1);\\n  float a0 = smoothstep(e0,e1,x_799389509);\\n  float a1 = smoothstep(e1,e2,x_799389509);\\n  float a2 = smoothstep(e2,e3,x_799389509);\\n  float a3 = smoothstep(e3,e4,x_799389509);\\n  float a4 = smoothstep(e4,e5,x_799389509);\\n  return max(mix(v0,v1,a0)*step(e0,x_799389509)*step(x_799389509,e1),\\n    max(mix(v1,v2,a1)*step(e1,x_799389509)*step(x_799389509,e2),\\n    max(mix(v2,v3,a2)*step(e2,x_799389509)*step(x_799389509,e3),\\n    max(mix(v3,v4,a3)*step(e3,x_799389509)*step(x_799389509,e4),mix(v4,v5,a4)*step(e4,x_799389509)*step(x_799389509,e5)\\n  ))));\\n}\\n\\nvec4 bone (float x_1404936397) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0,0,0,1);\\n  const float e1 = 0.376;\\n  const vec4 v1 = vec4(0.32941176470588235,0.32941176470588235,0.4549019607843137,1);\\n  const float e2 = 0.753;\\n  const vec4 v2 = vec4(0.6627450980392157,0.7843137254901961,0.7843137254901961,1);\\n  const float e3 = 1.0;\\n  const vec4 v3 = vec4(1,1,1,1);\\n  float a0 = smoothstep(e0,e1,x_1404936397);\\n  float a1 = smoothstep(e1,e2,x_1404936397);\\n  float a2 = smoothstep(e2,e3,x_1404936397);\\n  return max(mix(v0,v1,a0)*step(e0,x_1404936397)*step(x_1404936397,e1),\\n    max(mix(v1,v2,a1)*step(e1,x_1404936397)*step(x_1404936397,e2),mix(v2,v3,a2)*step(e2,x_1404936397)*step(x_1404936397,e3)\\n  ));\\n}\\n\\nvec4 copper (float x_41650866) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0,0,0,1);\\n  const float e1 = 0.804;\\n  const vec4 v1 = vec4(1,0.6274509803921569,0.4,1);\\n  const float e2 = 1.0;\\n  const vec4 v2 = vec4(1,0.7803921568627451,0.4980392156862745,1);\\n  float a0 = smoothstep(e0,e1,x_41650866);\\n  float a1 = smoothstep(e1,e2,x_41650866);\\n  return max(mix(v0,v1,a0)*step(e0,x_41650866)*step(x_41650866,e1),mix(v1,v2,a1)*step(e1,x_41650866)*step(x_41650866,e2)\\n  );\\n}\\n\\nvec4 density (float x_681601952) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0.21176470588235294,0.054901960784313725,0.1411764705882353,1);\\n  const float e1 = 0.13;\\n  const vec4 v1 = vec4(0.34901960784313724,0.09019607843137255,0.3137254901960784,1);\\n  const float e2 = 0.25;\\n  const vec4 v2 = vec4(0.43137254901960786,0.17647058823529413,0.5176470588235295,1);\\n  const float e3 = 0.38;\\n  const vec4 v3 = vec4(0.47058823529411764,0.30196078431372547,0.6980392156862745,1);\\n  const float e4 = 0.5;\\n  const vec4 v4 = vec4(0.47058823529411764,0.44313725490196076,0.8352941176470589,1);\\n  const float e5 = 0.63;\\n  const vec4 v5 = vec4(0.45098039215686275,0.592156862745098,0.8941176470588236,1);\\n  const float e6 = 0.75;\\n  const vec4 v6 = vec4(0.5254901960784314,0.7254901960784313,0.8901960784313725,1);\\n  const float e7 = 0.88;\\n  const vec4 v7 = vec4(0.6941176470588235,0.8392156862745098,0.8901960784313725,1);\\n  const float e8 = 1.0;\\n  const vec4 v8 = vec4(0.9019607843137255,0.9450980392156862,0.9450980392156862,1);\\n  float a0 = smoothstep(e0,e1,x_681601952);\\n  float a1 = smoothstep(e1,e2,x_681601952);\\n  float a2 = smoothstep(e2,e3,x_681601952);\\n  float a3 = smoothstep(e3,e4,x_681601952);\\n  float a4 = smoothstep(e4,e5,x_681601952);\\n  float a5 = smoothstep(e5,e6,x_681601952);\\n  float a6 = smoothstep(e6,e7,x_681601952);\\n  float a7 = smoothstep(e7,e8,x_681601952);\\n  return max(mix(v0,v1,a0)*step(e0,x_681601952)*step(x_681601952,e1),\\n    max(mix(v1,v2,a1)*step(e1,x_681601952)*step(x_681601952,e2),\\n    max(mix(v2,v3,a2)*step(e2,x_681601952)*step(x_681601952,e3),\\n    max(mix(v3,v4,a3)*step(e3,x_681601952)*step(x_681601952,e4),\\n    max(mix(v4,v5,a4)*step(e4,x_681601952)*step(x_681601952,e5),\\n    max(mix(v5,v6,a5)*step(e5,x_681601952)*step(x_681601952,e6),\\n    max(mix(v6,v7,a6)*step(e6,x_681601952)*step(x_681601952,e7),mix(v7,v8,a7)*step(e7,x_681601952)*step(x_681601952,e8)\\n  )))))));\\n}\\n\\nvec4 inferno (float x_902288871) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0,0,0.01568627450980392,1);\\n  const float e1 = 0.13;\\n  const vec4 v1 = vec4(0.12156862745098039,0.047058823529411764,0.2823529411764706,1);\\n  const float e2 = 0.25;\\n  const vec4 v2 = vec4(0.3333333333333333,0.058823529411764705,0.42745098039215684,1);\\n  const float e3 = 0.38;\\n  const vec4 v3 = vec4(0.5333333333333333,0.13333333333333333,0.41568627450980394,1);\\n  const float e4 = 0.5;\\n  const vec4 v4 = vec4(0.7294117647058823,0.21176470588235294,0.3333333333333333,1);\\n  const float e5 = 0.63;\\n  const vec4 v5 = vec4(0.8901960784313725,0.34901960784313724,0.2,1);\\n  const float e6 = 0.75;\\n  const vec4 v6 = vec4(0.9764705882352941,0.5490196078431373,0.0392156862745098,1);\\n  const float e7 = 0.88;\\n  const vec4 v7 = vec4(0.9764705882352941,0.788235294117647,0.19607843137254902,1);\\n  const float e8 = 1.0;\\n  const vec4 v8 = vec4(0.9882352941176471,1,0.6431372549019608,1);\\n  float a0 = smoothstep(e0,e1,x_902288871);\\n  float a1 = smoothstep(e1,e2,x_902288871);\\n  float a2 = smoothstep(e2,e3,x_902288871);\\n  float a3 = smoothstep(e3,e4,x_902288871);\\n  float a4 = smoothstep(e4,e5,x_902288871);\\n  float a5 = smoothstep(e5,e6,x_902288871);\\n  float a6 = smoothstep(e6,e7,x_902288871);\\n  float a7 = smoothstep(e7,e8,x_902288871);\\n  return max(mix(v0,v1,a0)*step(e0,x_902288871)*step(x_902288871,e1),\\n    max(mix(v1,v2,a1)*step(e1,x_902288871)*step(x_902288871,e2),\\n    max(mix(v2,v3,a2)*step(e2,x_902288871)*step(x_902288871,e3),\\n    max(mix(v3,v4,a3)*step(e3,x_902288871)*step(x_902288871,e4),\\n    max(mix(v4,v5,a4)*step(e4,x_902288871)*step(x_902288871,e5),\\n    max(mix(v5,v6,a5)*step(e5,x_902288871)*step(x_902288871,e6),\\n    max(mix(v6,v7,a6)*step(e6,x_902288871)*step(x_902288871,e7),mix(v7,v8,a7)*step(e7,x_902288871)*step(x_902288871,e8)\\n  )))))));\\n}\\n\\nvec4 cool (float x_2444426143) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0.49019607843137253,0,0.7019607843137254,1);\\n  const float e1 = 0.13;\\n  const vec4 v1 = vec4(0.4549019607843137,0,0.8549019607843137,1);\\n  const float e2 = 0.25;\\n  const vec4 v2 = vec4(0.3843137254901961,0.2901960784313726,0.9294117647058824,1);\\n  const float e3 = 0.38;\\n  const vec4 v3 = vec4(0.26666666666666666,0.5725490196078431,0.9058823529411765,1);\\n  const float e4 = 0.5;\\n  const vec4 v4 = vec4(0,0.8,0.7725490196078432,1);\\n  const float e5 = 0.63;\\n  const vec4 v5 = vec4(0,0.9686274509803922,0.5725490196078431,1);\\n  const float e6 = 0.75;\\n  const vec4 v6 = vec4(0,1,0.34509803921568627,1);\\n  const float e7 = 0.88;\\n  const vec4 v7 = vec4(0.1568627450980392,1,0.03137254901960784,1);\\n  const float e8 = 1.0;\\n  const vec4 v8 = vec4(0.5764705882352941,1,0,1);\\n  float a0 = smoothstep(e0,e1,x_2444426143);\\n  float a1 = smoothstep(e1,e2,x_2444426143);\\n  float a2 = smoothstep(e2,e3,x_2444426143);\\n  float a3 = smoothstep(e3,e4,x_2444426143);\\n  float a4 = smoothstep(e4,e5,x_2444426143);\\n  float a5 = smoothstep(e5,e6,x_2444426143);\\n  float a6 = smoothstep(e6,e7,x_2444426143);\\n  float a7 = smoothstep(e7,e8,x_2444426143);\\n  return max(mix(v0,v1,a0)*step(e0,x_2444426143)*step(x_2444426143,e1),\\n    max(mix(v1,v2,a1)*step(e1,x_2444426143)*step(x_2444426143,e2),\\n    max(mix(v2,v3,a2)*step(e2,x_2444426143)*step(x_2444426143,e3),\\n    max(mix(v3,v4,a3)*step(e3,x_2444426143)*step(x_2444426143,e4),\\n    max(mix(v4,v5,a4)*step(e4,x_2444426143)*step(x_2444426143,e5),\\n    max(mix(v5,v6,a5)*step(e5,x_2444426143)*step(x_2444426143,e6),\\n    max(mix(v6,v7,a6)*step(e6,x_2444426143)*step(x_2444426143,e7),mix(v7,v8,a7)*step(e7,x_2444426143)*step(x_2444426143,e8)\\n  )))))));\\n}\\n\\nvec4 hot (float x_1123650753) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0,0,0,1);\\n  const float e1 = 0.3;\\n  const vec4 v1 = vec4(0.9019607843137255,0,0,1);\\n  const float e2 = 0.6;\\n  const vec4 v2 = vec4(1,0.8235294117647058,0,1);\\n  const float e3 = 1.0;\\n  const vec4 v3 = vec4(1,1,1,1);\\n  float a0 = smoothstep(e0,e1,x_1123650753);\\n  float a1 = smoothstep(e1,e2,x_1123650753);\\n  float a2 = smoothstep(e2,e3,x_1123650753);\\n  return max(mix(v0,v1,a0)*step(e0,x_1123650753)*step(x_1123650753,e1),\\n    max(mix(v1,v2,a1)*step(e1,x_1123650753)*step(x_1123650753,e2),mix(v2,v3,a2)*step(e2,x_1123650753)*step(x_1123650753,e3)\\n  ));\\n}\\n\\nvec4 spring (float x_3460271019) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(1,0,1,1);\\n  const float e1 = 1.0;\\n  const vec4 v1 = vec4(1,1,0,1);\\n  float a0 = smoothstep(e0,e1,x_3460271019);\\n  return mix(v0,v1,a0)*step(e0,x_3460271019)*step(x_3460271019,e1);\\n}\\n\\nvec4 summer (float x_1787574999) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0,0.5019607843137255,0.4,1);\\n  const float e1 = 1.0;\\n  const vec4 v1 = vec4(1,1,0.4,1);\\n  float a0 = smoothstep(e0,e1,x_1787574999);\\n  return mix(v0,v1,a0)*step(e0,x_1787574999)*step(x_1787574999,e1);\\n}\\n\\nvec4 autumn (float x_204634793) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(1,0,0,1);\\n  const float e1 = 1.0;\\n  const vec4 v1 = vec4(1,1,0,1);\\n  float a0 = smoothstep(e0,e1,x_204634793);\\n  return mix(v0,v1,a0)*step(e0,x_204634793)*step(x_204634793,e1);\\n}\\n\\nvec4 winter (float x_4071283602) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0,0,1,1);\\n  const float e1 = 1.0;\\n  const vec4 v1 = vec4(0,1,0.5019607843137255,1);\\n  float a0 = smoothstep(e0,e1,x_4071283602);\\n  return mix(v0,v1,a0)*step(e0,x_4071283602)*step(x_4071283602,e1);\\n}\\n\\n// Custom attributes for Vitessce:\\nattribute float expressionValue;\\n\\n// Custom uniforms for Vitessce:\\nuniform vec2 uColorScaleRange;\\nuniform bool uIsExpressionMode;\\n\\n\";\nvar inject = {\n  \"vs:DECKGL_FILTER_COLOR\": \"\\n    if(uIsExpressionMode) {\\n      float normalizedExpressionValue = expressionValue / 255.0;\\n      float scaledExpressionValue = (normalizedExpressionValue - uColorScaleRange[0]) / max(0.005, (uColorScaleRange[1] - uColorScaleRange[0]));\\n      color.rgb = COLORMAP_FUNC(clamp(scaledExpressionValue, 0.0, 1.0)).rgb;\\n    }\\n  \"\n};\nvar shader_module_default = {\n  name: \"scaled-expression\",\n  vs: vs4,\n  inject\n}; // src/layer-extensions/ScaledExpressionExtension/ScaledExpressionExtension.js\n\nvar defaultProps6 = {\n  colormap: {\n    type: \"string\",\n    value: GLSL_COLORMAP_DEFAULT,\n    compare: true\n  },\n  colorScaleLo: {\n    type: \"number\",\n    value: 0,\n    compare: true\n  },\n  colorScaleHi: {\n    type: \"number\",\n    value: 1,\n    compare: true\n  },\n  isExpressionMode: false,\n  getExpressionValue: {\n    type: \"accessor\",\n    value: 0\n  },\n  getSelectionState: {\n    type: \"accessor\",\n    value: 0\n  }\n};\nvar ScaledExpressionExtension = class extends LayerExtension {\n  getShaders() {\n    const {\n      colormap\n    } = this.props;\n    return {\n      modules: [shader_module_default],\n      defines: {\n        [COLORMAP_SHADER_PLACEHOLDER]: GLSL_COLORMAPS.includes(colormap) ? colormap : GLSL_COLORMAP_DEFAULT\n      }\n    };\n  }\n\n  updateState(_ref55) {\n    let {\n      props,\n      oldProps\n    } = _ref55;\n\n    var _a2, _b2, _c, _d;\n\n    if (props.colormap !== oldProps.colormap) {\n      const {\n        gl\n      } = this.context;\n\n      if (this.state.model) {\n        (_a2 = this.state.model) == null ? void 0 : _a2.delete();\n        this.state.model = this._getModel(gl);\n      } else {\n        if (this.state.models) {\n          (_b2 = this.state.models) == null ? void 0 : _b2.forEach(model => model == null ? void 0 : model.delete());\n        }\n\n        if (this.state.topModel) {\n          (_c = this.state.topModel) == null ? void 0 : _c.delete();\n        }\n\n        if (this.state.sideModel) {\n          (_d = this.state.sideModel) == null ? void 0 : _d.delete();\n        }\n\n        if (this._getModels) {\n          this.setState(this._getModels(this.context.gl));\n        }\n      }\n\n      const attributeManager = this.getAttributeManager();\n\n      if (attributeManager) {\n        this.getAttributeManager().invalidateAll();\n      }\n    }\n  }\n\n  initializeState() {\n    const layer = this.getCurrentLayer();\n\n    if (layer.isComposite) {\n      return;\n    }\n\n    const attributeManager = this.getAttributeManager();\n\n    if (attributeManager) {\n      attributeManager.add({\n        expressionValue: {\n          type: GL5.FLOAT,\n          size: 1,\n          transition: true,\n          accessor: \"getExpressionValue\",\n          defaultValue: 1,\n          divisor: Object.values(attributeManager.attributes)[0].settings.divisor\n        }\n      });\n    }\n  }\n\n  draw() {\n    const {\n      colorScaleLo,\n      colorScaleHi,\n      isExpressionMode\n    } = this.props;\n    const {\n      topModel,\n      sideModel,\n      models,\n      model\n    } = this.state;\n    const uniforms = {\n      uColorScaleRange: [colorScaleLo, colorScaleHi],\n      uIsExpressionMode: isExpressionMode\n    };\n    model == null ? void 0 : model.setUniforms(uniforms);\n    models == null ? void 0 : models.forEach(m => m.setUniforms(uniforms));\n    topModel == null ? void 0 : topModel.setUniforms(uniforms);\n    sideModel == null ? void 0 : sideModel.setUniforms(uniforms);\n  }\n\n};\nScaledExpressionExtension.extensionName = \"ScaledExpressionExtension\";\nScaledExpressionExtension.defaultProps = defaultProps6; // src/layer-extensions/ScaledExpressionExtension/index.js\n\nvar ScaledExpressionExtension_default = ScaledExpressionExtension; // src/layer-extensions/SelectionExtension/SelectionExtension.js\n\nimport GL6 from \"@luma.gl/constants\";\nimport { LayerExtension as LayerExtension2 } from \"@deck.gl/core\"; // src/layer-extensions/SelectionExtension/shader-module.js\n\nvar vs5 = \"\\nattribute float isSelected;\\n\";\nvar inject2 = {\n  \"vs:DECKGL_FILTER_GL_POSITION\": \"\\n    position.z += (1. - isSelected) * .00005; // Add a small z offset for unselected points in the positive direction i.e into the screen.\\n  \",\n  \"fs:#main-start\": \" // Gets rid of bad border effects (active after deck.gl 8.5): https://github.com/visgl/deck.gl/pull/6081\\n    float distToCenterNew = length(unitPosition) * outerRadiusPixels;\\n    float inCircleNew = step(distToCenterNew, outerRadiusPixels);\\n    if (inCircleNew == 0.0) {\\n      discard;\\n    }\\n  \"\n};\nvar shader_module_default2 = {\n  name: \"selection\",\n  vs: vs5,\n  inject: inject2\n}; // src/layer-extensions/SelectionExtension/SelectionExtension.js\n\nvar SelectionExtension = class extends LayerExtension2 {\n  getShaders() {\n    return {\n      modules: [shader_module_default2]\n    };\n  }\n\n  initializeState(context, extension) {\n    const attributeManager = this.getAttributeManager();\n\n    if (attributeManager) {\n      attributeManager.add({\n        isSelected: {\n          type: GL6.FLOAT,\n          size: 1,\n          transition: true,\n          accessor: \"getCellIsSelected\",\n          defaultValue: 1,\n          divisor: Number(extension.opts.instanced)\n        }\n      });\n    }\n  }\n\n};\nSelectionExtension.extensionName = \"SelectionExtension\"; // src/layer-extensions/SelectionExtension/index.js\n\nvar SelectionExtension_default = SelectionExtension; // src/components/spatial/Spatial.js\n\nvar CELLS_LAYER_ID = \"cells-layer\";\nvar MOLECULES_LAYER_ID = \"molecules-layer\";\nvar NEIGHBORHOODS_LAYER_ID = \"neighborhoods-layer\";\n\nvar defaultGetCellCoords = cell => cell.xy;\n\nvar makeDefaultGetCellPolygon = radius => cellEntry => {\n  var _a2;\n\n  const cell = cellEntry[1];\n  return ((_a2 = cell.poly) == null ? void 0 : _a2.length) ? cell.poly : square(cell.xy[0], cell.xy[1], radius);\n};\n\nvar makeDefaultGetCellColors = (cellColors, theme) => cellEntry => {\n  const [r, g, b, a] = cellColors && cellColors.get(cellEntry[0]) || getDefaultColor(theme);\n  return [r, g, b, 255 * (a || 1)];\n};\n\nvar makeDefaultGetCellIsSelected = cellSelection => {\n  if (cellSelection) {\n    const cellSelectionSet = new Set(cellSelection);\n    return cellEntry => cellSelectionSet.has(cellEntry[0]) ? 1 : 0;\n  }\n\n  return () => 0;\n};\n\nvar Spatial = class extends AbstractSpatialOrScatterplot {\n  constructor(props) {\n    super(props);\n    this.cellsEntries = [];\n    this.moleculesEntries = [];\n    this.cellsQuadTree = null;\n    this.cellsLayer = null;\n    this.moleculesLayer = null;\n    this.neighborhoodsLayer = null;\n    this.imageLayers = [];\n    this.layerLoaderSelections = {};\n    this.randomColorData = {\n      data: new Uint8Array(2048 * 2048 * 3).map((_, j) => j < 4 ? 0 : Math.round(255 * Math.random())),\n      height: 2048,\n      width: 2048\n    };\n    this.color = __spreadValues({}, this.randomColorData);\n    this.expression = {\n      data: new Uint8Array(2048 * 2048),\n      height: 2048,\n      width: 2048\n    };\n    this.onUpdateCellsData();\n    this.onUpdateCellsLayer();\n    this.onUpdateMoleculesData();\n    this.onUpdateMoleculesLayer();\n    this.onUpdateNeighborhoodsData();\n    this.onUpdateNeighborhoodsLayer();\n    this.onUpdateImages();\n  }\n\n  createCellsLayer(layerDef) {\n    const {\n      radius,\n      stroked,\n      visible,\n      opacity\n    } = layerDef;\n    const {\n      cellsEntries\n    } = this;\n    const {\n      theme,\n      cellFilter,\n      cellSelection,\n      setCellHighlight,\n      setComponentHover,\n      getCellIsSelected = makeDefaultGetCellIsSelected(cellsEntries.length === cellSelection.length ? null : cellSelection),\n      cellColors,\n      getCellColor = makeDefaultGetCellColors(cellColors, theme),\n      getCellPolygon = makeDefaultGetCellPolygon(radius),\n      onCellClick,\n      lineWidthScale = 10,\n      lineWidthMaxPixels = 2,\n      geneExpressionColormapRange,\n      cellColorEncoding,\n      getExpressionValue,\n      geneExpressionColormap\n    } = this.props;\n    const filteredCellsEntries = cellFilter ? cellsEntries.filter(cellEntry => cellFilter.includes(cellEntry[0])) : cellsEntries;\n    const flipYTooltip = true;\n    return new PolygonLayer2(__spreadValues({\n      id: CELLS_LAYER_ID,\n      backgroundColor: [0, 0, 0],\n      isSelected: getCellIsSelected,\n      getPolygon: getCellPolygon,\n      updateTriggers: {\n        getLineWidth: [stroked],\n        isSelected: cellSelection,\n        getExpressionValue,\n        getFillColor: [opacity, cellColorEncoding, cellSelection, cellColors],\n        getLineColor: [cellColorEncoding, cellSelection, cellColors]\n      },\n      getFillColor: cellEntry => {\n        const color = getCellColor(cellEntry);\n        color[3] = opacity * 255;\n        return color;\n      },\n      getLineColor: cellEntry => {\n        const color = getCellColor(cellEntry);\n        color[3] = 255;\n        return color;\n      },\n      onClick: info => {\n        if (onCellClick) {\n          onCellClick(info);\n        }\n      },\n      visible,\n      getLineWidth: stroked ? 1 : 0,\n      lineWidthScale,\n      lineWidthMaxPixels,\n      getExpressionValue,\n      extensions: [new ScaledExpressionExtension_default()],\n      colorScaleLo: geneExpressionColormapRange[0],\n      colorScaleHi: geneExpressionColormapRange[1],\n      isExpressionMode: cellColorEncoding === \"geneSelection\",\n      colormap: geneExpressionColormap\n    }, cellLayerDefaultProps(filteredCellsEntries, void 0, setCellHighlight, setComponentHover, flipYTooltip)));\n  }\n\n  createMoleculesLayer(layerDef) {\n    const {\n      setMoleculeHighlight,\n      getMoleculeColor = d => PALETTE[d[2] % PALETTE.length],\n      getMoleculePosition = d => [d[0], d[1], 0]\n    } = this.props;\n    const {\n      moleculesEntries\n    } = this;\n    return new ScatterplotLayer2({\n      id: MOLECULES_LAYER_ID,\n      coordinateSystem: COORDINATE_SYSTEM5.CARTESIAN,\n      data: moleculesEntries,\n      pickable: true,\n      autoHighlight: true,\n      radiusMaxPixels: 3,\n      opacity: layerDef.opacity,\n      visible: layerDef.visible,\n      getRadius: layerDef.radius,\n      getPosition: getMoleculePosition,\n      getLineColor: getMoleculeColor,\n      getFillColor: getMoleculeColor,\n      onHover: info => {\n        if (setMoleculeHighlight) {\n          if (info.object) {\n            setMoleculeHighlight(info.object[3]);\n          } else {\n            setMoleculeHighlight(null);\n          }\n        }\n      }\n    });\n  }\n\n  createNeighborhoodsLayer(layerDef) {\n    const {\n      getNeighborhoodPolygon = neighborhoodsEntry => {\n        const neighborhood = neighborhoodsEntry[1];\n        return neighborhood.poly;\n      }\n    } = this.props;\n    const {\n      neighborhoodsEntries\n    } = this;\n    return new PolygonLayer2({\n      id: NEIGHBORHOODS_LAYER_ID,\n      getPolygon: getNeighborhoodPolygon,\n      coordinateSystem: COORDINATE_SYSTEM5.CARTESIAN,\n      data: neighborhoodsEntries,\n      pickable: true,\n      autoHighlight: true,\n      stroked: true,\n      filled: false,\n      getElevation: 0,\n      getLineWidth: 10,\n      visible: layerDef.visible\n    });\n  }\n\n  createSelectionLayers() {\n    const {\n      viewState,\n      getCellCoords = defaultGetCellCoords,\n      setCellSelection: setCellSelection2\n    } = this.props;\n    const {\n      tool\n    } = this.state;\n    const {\n      cellsQuadTree\n    } = this;\n    return getSelectionLayers(tool, viewState.zoom, CELLS_LAYER_ID, getCellCoords, setCellSelection2, cellsQuadTree);\n  }\n\n  createScaleBarLayer() {\n    const {\n      viewState,\n      width,\n      height,\n      imageLayerLoaders = {},\n      layers\n    } = this.props;\n    const use3d = (layers || []).some(i => i.use3d);\n    const loaders = Object.values(imageLayerLoaders);\n    if (!viewState || !width || !height || loaders.length < 1) return null;\n    const loader = loaders[0];\n    if (!loader) return null;\n    const source = getSourceFromLoader(loader);\n    if (!source.meta) return null;\n    const {\n      physicalSizes\n    } = source.meta;\n\n    if (physicalSizes && !use3d) {\n      const {\n        x\n      } = physicalSizes;\n      const {\n        unit: unit2,\n        size\n      } = x;\n\n      if (unit2 && size) {\n        return new ScaleBarLayer({\n          id: \"scalebar-layer\",\n          unit: unit2,\n          size,\n          viewState: __spreadProps(__spreadValues({}, viewState), {\n            width,\n            height\n          })\n        });\n      }\n\n      return null;\n    }\n\n    return null;\n  }\n\n  createImageLayer(rawLayerDef, loader, i) {\n    const layerDef = __spreadProps(__spreadValues({}, rawLayerDef), {\n      channels: rawLayerDef.channels.filter(channel => channel.selection && channel.color && channel.slider)\n    });\n\n    let selections;\n    const nextLoaderSelection = layerDef.channels.map(c => c.selection);\n    const prevLoaderSelection = this.layerLoaderSelections[layerDef.index];\n\n    if (isEqual5(prevLoaderSelection, nextLoaderSelection)) {\n      selections = prevLoaderSelection;\n    } else {\n      selections = nextLoaderSelection;\n      this.layerLoaderSelections[layerDef.index] = nextLoaderSelection;\n    }\n\n    const layerProps = {\n      colormap: layerDef.colormap,\n      opacity: layerDef.opacity,\n      transparentColor: layerDef.transparentColor,\n      colors: layerDef.channels.map(c => c.color),\n      sliders: layerDef.channels.map(c => c.slider),\n      resolution: layerDef.resolution,\n      renderingMode: layerDef.renderingMode,\n      xSlice: layerDef.xSlice,\n      ySlice: layerDef.ySlice,\n      zSlice: layerDef.zSlice,\n      callback: layerDef.callback,\n      visibilities: layerDef.channels.map(c => !layerDef.visible && typeof layerDef.visible === \"boolean\" ? false : c.visible)\n    };\n    if (!loader || !layerProps) return null;\n    const {\n      metadata: {\n        transform\n      },\n      data\n    } = loader;\n    let modelMatrix;\n\n    if (transform) {\n      const {\n        scale,\n        translate\n      } = transform;\n      modelMatrix = new Matrix44().translate([translate.x, translate.y, 0]).scale(scale);\n    } else if (layerDef.modelMatrix) {\n      modelMatrix = new Matrix44(layerDef.modelMatrix);\n    }\n\n    if (rawLayerDef.type === \"bitmask\") {\n      const {\n        geneExpressionColormap,\n        geneExpressionColormapRange = [0, 1],\n        cellColorEncoding\n      } = this.props;\n      return new MultiscaleImageLayer({\n        id: `bitmask-layer-${layerDef.index}-${i}`,\n        channelsVisible: layerProps.visibilities,\n        opacity: layerProps.opacity,\n        modelMatrix,\n        hoveredCell: Number(this.props.cellHighlight),\n        renderSubLayers: renderSubBitmaskLayers,\n        loader: data,\n        selections,\n        cellColorData: this.color.data,\n        cellTexHeight: this.color.height,\n        cellTexWidth: this.color.width,\n        excludeBackground: true,\n        onViewportLoad: layerProps.callback,\n        colorScaleLo: geneExpressionColormapRange[0],\n        colorScaleHi: geneExpressionColormapRange[1],\n        isExpressionMode: cellColorEncoding === \"geneSelection\",\n        colormap: geneExpressionColormap,\n        expressionData: this.expression.data\n      });\n    }\n\n    const [Layer2, layerLoader] = getLayerLoaderTuple(data, layerDef.use3d);\n    return new Layer2({\n      loader: layerLoader,\n      id: `${layerDef.use3d ? \"volume\" : \"image\"}-layer-${layerDef.index}-${i}`,\n      colors: layerProps.colors,\n      contrastLimits: layerProps.sliders,\n      selections,\n      channelsVisible: layerProps.visibilities,\n      opacity: layerProps.opacity,\n      colormap: layerProps.colormap,\n      modelMatrix,\n      transparentColor: layerProps.transparentColor,\n      resolution: layerProps.resolution,\n      renderingMode: layerProps.renderingMode,\n      pickable: false,\n      xSlice: layerProps.xSlice,\n      ySlice: layerProps.ySlice,\n      zSlice: layerProps.zSlice,\n      onViewportLoad: layerProps.callback\n    });\n  }\n\n  createImageLayers() {\n    const {\n      layers,\n      imageLayerLoaders = {},\n      rasterLayersCallbacks = []\n    } = this.props;\n    const use3d = (layers || []).some(i => i.use3d);\n    const use3dIndex = (layers || []).findIndex(i => i.use3d);\n    return (layers || []).filter(layer => layer.type === \"raster\" || layer.type === \"bitmask\").filter(layer => use3d ? layer.use3d === use3d : true).map((layer, i) => this.createImageLayer(__spreadProps(__spreadValues({}, layer), {\n      callback: rasterLayersCallbacks[use3d ? use3dIndex : i]\n    }), imageLayerLoaders[layer.index], i));\n  }\n\n  getLayers() {\n    const {\n      imageLayers,\n      cellsLayer,\n      neighborhoodsLayer,\n      moleculesLayer\n    } = this;\n    return [...imageLayers, cellsLayer, neighborhoodsLayer, moleculesLayer, this.createScaleBarLayer(), ...this.createSelectionLayers()];\n  }\n\n  onUpdateCellsData() {\n    const {\n      cells = {},\n      getCellCoords = defaultGetCellCoords\n    } = this.props;\n    const cellsEntries = Object.entries(cells);\n    this.cellsEntries = cellsEntries;\n    this.cellsQuadTree = createCellsQuadTree(cellsEntries, getCellCoords);\n  }\n\n  onUpdateCellsLayer() {\n    const {\n      layers\n    } = this.props;\n    const layerDef = (layers || []).find(layer => layer.type === \"cells\");\n\n    if (layerDef) {\n      this.cellsLayer = this.createCellsLayer(layerDef);\n    } else {\n      this.cellsLayer = null;\n    }\n  }\n\n  onUpdateCellColors() {\n    const color = this.randomColorData;\n    const {\n      size\n    } = this.props.cellColors;\n\n    if (typeof size === \"number\") {\n      const cellIds = this.props.cellColors.keys();\n      color.data = new Uint8Array(color.height * color.width * 3).fill(getDefaultColor(this.props.theme)[0]);\n      color.data[0] = 0;\n      color.data[1] = 0;\n      color.data[2] = 0;\n\n      for (const id of cellIds) {\n        if (id > 0) {\n          const cellColor = this.props.cellColors.get(id);\n\n          if (cellColor) {\n            color.data.set(cellColor.slice(0, 3), Number(id) * 3);\n          }\n        }\n      }\n    }\n\n    this.color = color;\n  }\n\n  onUpdateExpressionData() {\n    var _a2;\n\n    const {\n      expressionData\n    } = this.props;\n\n    if ((_a2 = expressionData[0]) == null ? void 0 : _a2.length) {\n      this.expression.data = new Uint8Array(this.expression.height * this.expression.width);\n      this.expression.data.set(expressionData[0]);\n    }\n  }\n\n  onUpdateMoleculesData() {\n    const {\n      molecules = {}\n    } = this.props;\n    const moleculesEntries = Object.entries(molecules).flatMap((_ref56, index) => {\n      let [molecule, coords] = _ref56;\n      return coords.map(_ref57 => {\n        let [x, y] = _ref57;\n        return [x, y, index, molecule];\n      });\n    });\n    this.moleculesEntries = moleculesEntries;\n  }\n\n  onUpdateMoleculesLayer() {\n    const {\n      layers\n    } = this.props;\n    const layerDef = (layers || []).find(layer => layer.type === \"molecules\");\n\n    if (layerDef) {\n      this.moleculesLayer = this.createMoleculesLayer(layerDef);\n    } else {\n      this.moleculesLayer = null;\n    }\n  }\n\n  onUpdateNeighborhoodsData() {\n    const {\n      neighborhoods = {}\n    } = this.props;\n    const neighborhoodsEntries = Object.entries(neighborhoods);\n    this.neighborhoodsEntries = neighborhoodsEntries;\n  }\n\n  onUpdateNeighborhoodsLayer() {\n    const {\n      layers\n    } = this.props;\n    const layerDef = (layers || []).find(layer => layer.type === \"neighborhoods\");\n\n    if (layerDef) {\n      this.neighborhoodsLayer = this.createNeighborhoodsLayer(layerDef);\n    } else {\n      this.neighborhoodsLayer = null;\n    }\n  }\n\n  onUpdateImages() {\n    this.imageLayers = this.createImageLayers();\n  }\n\n  viewInfoDidUpdate() {\n    const {\n      getCellCoords = defaultGetCellCoords\n    } = this.props;\n    super.viewInfoDidUpdate(getCellCoords);\n  }\n\n  componentDidUpdate(prevProps) {\n    this.viewInfoDidUpdate();\n\n    const shallowDiff = propName => prevProps[propName] !== this.props[propName];\n\n    if ([\"cells\"].some(shallowDiff)) {\n      this.onUpdateCellsData();\n      this.forceUpdate();\n    }\n\n    if ([\"layers\", \"cells\", \"cellFilter\", \"cellSelection\", \"cellColors\", \"geneExpressionColormapRange\", \"cellColorEncoding\", \"geneExpressionColormap\"].some(shallowDiff)) {\n      this.onUpdateCellsLayer();\n      this.forceUpdate();\n    }\n\n    if ([\"cellColors\"].some(shallowDiff)) {\n      this.onUpdateCellColors();\n      this.forceUpdate();\n    }\n\n    if ([\"expressionData\"].some(shallowDiff)) {\n      this.onUpdateExpressionData();\n      this.forceUpdate();\n    }\n\n    if ([\"molecules\"].some(shallowDiff)) {\n      this.onUpdateMoleculesData();\n      this.forceUpdate();\n    }\n\n    if ([\"layers\", \"molecules\"].some(shallowDiff)) {\n      this.onUpdateMoleculesLayer();\n      this.forceUpdate();\n    }\n\n    if ([\"neighborhoods\"].some(shallowDiff)) {\n      this.onUpdateNeighborhoodsData();\n      this.forceUpdate();\n    }\n\n    if ([\"layers\", \"neighborhoods\"].some(shallowDiff)) {\n      this.onUpdateNeighborhoodsLayer();\n      this.forceUpdate();\n    }\n\n    if ([\"layers\", \"imageLayerLoaders\", \"cellColors\", \"cellHighlight\", \"geneExpressionColormapRange\", \"expressionData\", \"rasterLayersCallbacks\", \"geneExpressionColormap\"].some(shallowDiff)) {\n      this.onUpdateImages();\n      this.forceUpdate();\n    }\n  }\n\n};\nvar SpatialWrapper = forwardRef2((props, deckRef) => /* @__PURE__ */React20.createElement(Spatial, __spreadProps(__spreadValues({}, props), {\n  deckRef\n})));\nvar Spatial_default = SpatialWrapper; // src/components/spatial/SpatialOptions.js\n\nimport React22, { useCallback as useCallback6 } from \"react\";\nimport debounce3 from \"lodash/debounce\";\nimport Checkbox from \"@material-ui/core/Checkbox\";\nimport TableCell3 from \"@material-ui/core/TableCell\";\nimport TableRow3 from \"@material-ui/core/TableRow\";\nimport Slider2 from \"@material-ui/core/Slider\";\nimport { makeStyles as makeStyles5, createStyles } from \"@material-ui/core/styles\"; // src/components/shared-plot-options/CellColorEncodingOption.js\n\nimport React21 from \"react\";\nimport TableCell2 from \"@material-ui/core/TableCell\";\nimport TableRow2 from \"@material-ui/core/TableRow\";\n\nfunction CellColorEncodingOption(props) {\n  const {\n    observationsLabel,\n    cellColorEncoding,\n    setCellColorEncoding\n  } = props;\n  const classes = useStyles2();\n  const observationsLabelNice = capitalize(observationsLabel);\n\n  function handleColorEncodingChange(event) {\n    setCellColorEncoding(event.target.value);\n  }\n\n  return /* @__PURE__ */React21.createElement(TableRow2, null, /* @__PURE__ */React21.createElement(TableCell2, {\n    className: classes.labelCell,\n    htmlFor: \"cell-color-encoding-select\"\n  }, observationsLabelNice, \" Color Encoding\"), /* @__PURE__ */React21.createElement(TableCell2, {\n    className: classes.inputCell\n  }, /* @__PURE__ */React21.createElement(OptionSelect, {\n    className: classes.select,\n    value: cellColorEncoding,\n    onChange: handleColorEncodingChange,\n    inputProps: {\n      id: \"cell-color-encoding-select\"\n    }\n  }, /* @__PURE__ */React21.createElement(\"option\", {\n    value: \"cellSetSelection\"\n  }, \"Cell Sets\"), /* @__PURE__ */React21.createElement(\"option\", {\n    value: \"geneSelection\"\n  }, \"Gene Expression\"))));\n} // src/components/spatial/SpatialOptions.js\n\n\nvar useToggleStyles = makeStyles5(() => createStyles({\n  cameraLabel: {\n    padding: \"0px 0px 0px 16px\"\n  },\n  box: {\n    padding: \"0px\"\n  },\n  button: {\n    padding: \"0px 0px 0px 8px\"\n  }\n}));\n\nvar ToggleFixedAxisButton = _ref58 => {\n  let {\n    setSpatialAxisFixed,\n    spatialAxisFixed,\n    use3d\n  } = _ref58;\n  const classes = useToggleStyles();\n  return /* @__PURE__ */React22.createElement(TableRow3, null, /* @__PURE__ */React22.createElement(TableCell3, {\n    className: classes.cameraLabel\n  }, \"Fix Camera Axis\"), /* @__PURE__ */React22.createElement(TableCell3, {\n    className: classes.box\n  }, /* @__PURE__ */React22.createElement(Checkbox, {\n    onClick: () => setSpatialAxisFixed(!spatialAxisFixed),\n    disabled: !use3d,\n    checked: Boolean(spatialAxisFixed)\n  })));\n};\n\nfunction SpatialOptions(props) {\n  const {\n    observationsLabel,\n    cellColorEncoding,\n    setCellColorEncoding,\n    setSpatialAxisFixed,\n    spatialAxisFixed,\n    use3d,\n    geneExpressionColormap,\n    setGeneExpressionColormap,\n    geneExpressionColormapRange,\n    setGeneExpressionColormapRange,\n    canShowExpressionOptions,\n    canShowColorEncodingOption,\n    canShow3DOptions\n  } = props;\n\n  function handleGeneExpressionColormapChange(event) {\n    setGeneExpressionColormap(event.target.value);\n  }\n\n  function handleColormapRangeChange(event, value) {\n    setGeneExpressionColormapRange(value);\n  }\n\n  const handleColormapRangeChangeDebounced = useCallback6(debounce3(handleColormapRangeChange, 5, {\n    trailing: true\n  }), [handleColormapRangeChange]);\n  const classes = useStyles2();\n  return /* @__PURE__ */React22.createElement(OptionsContainer, null, canShowColorEncodingOption ? /* @__PURE__ */React22.createElement(CellColorEncodingOption, {\n    observationsLabel,\n    cellColorEncoding,\n    setCellColorEncoding\n  }) : null, canShow3DOptions ? /* @__PURE__ */React22.createElement(ToggleFixedAxisButton, {\n    setSpatialAxisFixed,\n    spatialAxisFixed,\n    use3d\n  }) : null, canShowExpressionOptions ? /* @__PURE__ */React22.createElement(React22.Fragment, null, /* @__PURE__ */React22.createElement(TableRow3, null, /* @__PURE__ */React22.createElement(TableCell3, {\n    className: classes.labelCell,\n    htmlFor: \"gene-expression-colormap-select\"\n  }, \"Gene Expression Colormap\"), /* @__PURE__ */React22.createElement(TableCell3, {\n    className: classes.inputCell\n  }, /* @__PURE__ */React22.createElement(OptionSelect, {\n    className: classes.select,\n    value: geneExpressionColormap,\n    onChange: handleGeneExpressionColormapChange,\n    inputProps: {\n      id: \"gene-expression-colormap-select\"\n    }\n  }, GLSL_COLORMAPS.map(cmap => /* @__PURE__ */React22.createElement(\"option\", {\n    key: cmap,\n    value: cmap\n  }, cmap))))), /* @__PURE__ */React22.createElement(TableRow3, null, /* @__PURE__ */React22.createElement(TableCell3, {\n    className: classes.labelCell\n  }, \"Gene Expression Colormap Range\"), /* @__PURE__ */React22.createElement(TableCell3, {\n    className: classes.inputCell\n  }, /* @__PURE__ */React22.createElement(Slider2, {\n    classes: {\n      root: classes.slider,\n      valueLabel: classes.sliderValueLabel\n    },\n    value: geneExpressionColormapRange,\n    onChange: handleColormapRangeChangeDebounced,\n    \"aria-labelledby\": \"gene-expression-colormap-range-slider\",\n    valueLabelDisplay: \"auto\",\n    step: 5e-3,\n    min: 0,\n    max: 1\n  })))) : null);\n} // src/components/spatial/SpatialTooltipSubscriber.js\n\n\nimport React23 from \"react\";\n\nfunction SpatialTooltipSubscriber(props) {\n  const {\n    parentUuid,\n    cellHighlight,\n    width,\n    height,\n    getCellInfo\n  } = props;\n  const sourceUuid = useComponentHover();\n  const viewInfo = useComponentViewInfo(parentUuid);\n  const [cellInfo, x, y] = cellHighlight && getCellInfo ? [getCellInfo(cellHighlight), ...(viewInfo && viewInfo.project ? viewInfo.project(cellHighlight) : [null, null])] : [null, null, null];\n  return cellInfo ? /* @__PURE__ */React23.createElement(Tooltip2D, {\n    x,\n    y,\n    parentUuid,\n    sourceUuid,\n    parentWidth: width,\n    parentHeight: height\n  }, /* @__PURE__ */React23.createElement(TooltipContent, {\n    info: cellInfo\n  })) : null;\n} // src/components/spatial/SpatialSubscriber.js\n\n\nvar SPATIAL_DATA_TYPES = [\"cells\", \"molecules\", \"raster\", \"cell-sets\", \"expression-matrix\"];\n\nfunction SpatialSubscriber(props) {\n  const {\n    uuid,\n    coordinationScopes,\n    removeGridComponent,\n    observationsLabelOverride: observationsLabel = \"cell\",\n    observationsPluralLabelOverride: observationsPluralLabel = `${observationsLabel}s`,\n    subobservationsLabelOverride: subobservationsLabel = \"molecule\",\n    subobservationsPluralLabelOverride: subobservationsPluralLabel = `${subobservationsLabel}s`,\n    theme,\n    disableTooltip = false,\n    title: title16 = \"Spatial\",\n    disable3d,\n    globalDisable3d\n  } = props;\n  const loaders = useLoaders();\n  const setComponentHover = useSetComponentHover();\n  const setComponentViewInfo = useSetComponentViewInfo(uuid);\n  const [{\n    dataset,\n    spatialZoom: zoom,\n    spatialTargetX: targetX,\n    spatialTargetY: targetY,\n    spatialTargetZ: targetZ,\n    spatialRotationX: rotationX,\n    spatialRotationY: rotationY,\n    spatialRotationZ: rotationZ,\n    spatialRotationOrbit: rotationOrbit,\n    spatialOrbitAxis: orbitAxis,\n    spatialRasterLayers: rasterLayers,\n    spatialCellsLayer: cellsLayer,\n    spatialMoleculesLayer: moleculesLayer,\n    spatialNeighborhoodsLayer: neighborhoodsLayer,\n    cellFilter,\n    cellHighlight,\n    geneSelection,\n    cellSetSelection,\n    cellSetColor,\n    cellColorEncoding,\n    additionalCellSets,\n    spatialAxisFixed,\n    geneExpressionColormap,\n    geneExpressionColormapRange\n  }, {\n    setSpatialZoom: setZoom,\n    setSpatialTargetX: setTargetX,\n    setSpatialTargetY: setTargetY,\n    setSpatialTargetZ: setTargetZ,\n    setSpatialRotationX: setRotationX,\n    setSpatialRotationOrbit: setRotationOrbit,\n    setSpatialOrbitAxis: setOrbitAxis,\n    setSpatialRasterLayers: setRasterLayers,\n    setSpatialCellsLayer: setCellsLayer,\n    setSpatialMoleculesLayer: setMoleculesLayer,\n    setSpatialNeighborhoodsLayer: setNeighborhoodsLayer,\n    setCellFilter,\n    setCellSetSelection,\n    setCellHighlight,\n    setCellSetColor,\n    setCellColorEncoding,\n    setAdditionalCellSets,\n    setMoleculeHighlight,\n    setSpatialAxisFixed,\n    setGeneExpressionColormap,\n    setGeneExpressionColormapRange\n  }] = useCoordination(COMPONENT_COORDINATION_TYPES.spatial, coordinationScopes);\n  const [{\n    rasterLayersCallbacks\n  }] = useAuxiliaryCoordination(COMPONENT_COORDINATION_TYPES.layerController, coordinationScopes);\n  const use3d = rasterLayers == null ? void 0 : rasterLayers.some(l => l.use3d);\n  const [urls, addUrl, resetUrls] = useUrls();\n  const [isReady, setItemIsReady, setItemIsNotReady, resetReadyItems] = useReady(SPATIAL_DATA_TYPES);\n  const [width, height, deckRef] = useDeckCanvasSize();\n  useEffect6(() => {\n    resetUrls();\n    resetReadyItems();\n  }, [loaders, dataset]);\n  const [cells, cellsCount] = useCellsData(loaders, dataset, setItemIsReady, addUrl, false, {\n    setSpatialCellsLayer: setCellsLayer\n  }, {\n    spatialCellsLayer: cellsLayer\n  });\n  const [molecules, moleculesCount, locationsCount] = useMoleculesData(loaders, dataset, setItemIsReady, addUrl, false, {\n    setSpatialMoleculesLayer: setMoleculesLayer\n  }, {\n    spatialMoleculesLayer: moleculesLayer\n  });\n  const [neighborhoods] = useNeighborhoodsData(loaders, dataset, setItemIsReady, addUrl, false, {\n    setSpatialNeighborhoodsLayer: setNeighborhoodsLayer\n  }, {\n    spatialNeighborhoodsLayer: neighborhoodsLayer\n  });\n  const [cellSets] = useCellSetsData(loaders, dataset, setItemIsReady, addUrl, false, {\n    setCellSetSelection,\n    setCellSetColor\n  }, {\n    cellSetSelection,\n    cellSetColor\n  });\n  const [expressionData] = useGeneSelection(loaders, dataset, setItemIsReady, false, geneSelection, setItemIsNotReady);\n  const [attrs] = useExpressionAttrs(loaders, dataset, setItemIsReady, addUrl, false);\n  const [raster, imageLayerLoaders, imageLayerMeta] = useRasterData(loaders, dataset, setItemIsReady, addUrl, false, {\n    setSpatialRasterLayers: setRasterLayers\n  }, {\n    spatialRasterLayers: rasterLayers\n  });\n  const layers = useMemo6(() => {\n    const canPassInCellsLayer = !imageLayerMeta.some(l => {\n      var _a2;\n\n      return (_a2 = l == null ? void 0 : l.metadata) == null ? void 0 : _a2.isBitmask;\n    });\n    return [...(moleculesLayer ? [__spreadProps(__spreadValues({}, moleculesLayer), {\n      type: \"molecules\"\n    })] : []), ...(cellsLayer && canPassInCellsLayer ? [__spreadProps(__spreadValues({}, cellsLayer), {\n      type: \"cells\"\n    })] : []), ...(neighborhoodsLayer ? [__spreadProps(__spreadValues({}, neighborhoodsLayer), {\n      type: \"neighborhoods\"\n    })] : []), ...(rasterLayers ? rasterLayers.map(l => __spreadProps(__spreadValues({}, l), {\n      type: l.type && [\"raster\", \"bitmask\"].includes(l.type) ? l.type : \"raster\"\n    })) : [])];\n  }, [cellsLayer, moleculesLayer, neighborhoodsLayer, rasterLayers, imageLayerMeta]);\n  useEffect6(() => {\n    if (typeof targetX !== \"number\" || typeof targetY !== \"number\") {\n      const {\n        initialTargetX,\n        initialTargetY,\n        initialTargetZ,\n        initialZoom\n      } = getInitialSpatialTargets({\n        width,\n        height,\n        cells,\n        imageLayerLoaders,\n        useRaster: Boolean(loaders[dataset].loaders.raster),\n        use3d\n      });\n      setTargetX(initialTargetX);\n      setTargetY(initialTargetY);\n      setTargetZ(initialTargetZ);\n      setZoom(initialZoom);\n    }\n  }, [imageLayerLoaders, cells, targetX, targetY, setTargetX, setTargetY, setZoom, use3d]);\n  const mergedCellSets = useMemo6(() => mergeCellSets(cellSets, additionalCellSets), [cellSets, additionalCellSets]);\n  const setCellSelectionProp = useCallback7(v => {\n    setCellSelection(v, additionalCellSets, cellSetColor, setCellSetSelection, setAdditionalCellSets, setCellSetColor, setCellColorEncoding);\n  }, [additionalCellSets, cellSetColor, setCellColorEncoding, setAdditionalCellSets, setCellSetColor, setCellSetSelection]);\n  const cellColors = useMemo6(() => getCellColors({\n    cellColorEncoding,\n    expressionData: expressionData && expressionData[0],\n    geneSelection,\n    cellSets: mergedCellSets,\n    cellSetSelection,\n    cellSetColor,\n    expressionDataAttrs: attrs,\n    theme\n  }), [cellColorEncoding, geneSelection, mergedCellSets, theme, cellSetColor, cellSetSelection, expressionData, attrs]);\n  const shiftedExpressionDataForBitmask = useMemo6(() => {\n    const hasBitmask = imageLayerMeta.some(l => {\n      var _a2;\n\n      return (_a2 = l == null ? void 0 : l.metadata) == null ? void 0 : _a2.isBitmask;\n    });\n\n    if ((attrs == null ? void 0 : attrs.rows) && expressionData && hasBitmask) {\n      const maxId = attrs.rows.reduce((max2, curr) => Math.max(max2, Number(curr)));\n      const result = new Uint8Array(maxId + 1);\n\n      for (let i = 0; i < attrs.rows.length; i++) {\n        const id = attrs.rows[i];\n        result.set(expressionData[0].slice(i, i + 1), Number(id));\n      }\n\n      return [result];\n    }\n\n    return [new Uint8Array()];\n  }, [attrs, expressionData, imageLayerMeta]);\n  const cellSelection = useMemo6(() => Array.from(cellColors.keys()), [cellColors]);\n\n  const getCellInfo = cellId => {\n    const cell = cells[cellId];\n\n    if (cell) {\n      return __spreadValues({\n        [`${capitalize(observationsLabel)} ID`]: cellId\n      }, cell.factors);\n    }\n\n    return null;\n  };\n\n  const setViewState = _ref59 => {\n    let {\n      zoom: newZoom,\n      target,\n      rotationX: newRotationX,\n      rotationOrbit: newRotationOrbit,\n      orbitAxis: newOrbitAxis\n    } = _ref59;\n    setZoom(newZoom);\n    setTargetX(target[0]);\n    setTargetY(target[1]);\n    setTargetZ(target[2] || null);\n    setRotationX(newRotationX);\n    setRotationOrbit(newRotationOrbit);\n    setOrbitAxis(newOrbitAxis || null);\n  };\n\n  const subtitle = makeSpatialSubtitle({\n    observationsCount: cellsCount,\n    observationsLabel,\n    observationsPluralLabel,\n    subobservationsCount: moleculesCount,\n    subobservationsLabel,\n    subobservationsPluralLabel,\n    locationsCount\n  });\n  const getExpressionValue = useExpressionValueGetter({\n    attrs,\n    expressionData\n  });\n  const hasExpressionData = loaders[dataset].loaders[\"expression-matrix\"];\n  const hasCellsData = loaders[dataset].loaders.cells || imageLayerMeta.some(l => {\n    var _a2;\n\n    return (_a2 = l == null ? void 0 : l.metadata) == null ? void 0 : _a2.isBitmask;\n  });\n  const canLoad3DLayers = imageLayerLoaders.some(loader => Boolean(Array.from({\n    length: loader.data.length\n  }).filter((_, res) => canLoadResolution(loader.data, res)).length));\n  const canShow3DOptions = canLoad3DLayers && !((disable3d == null ? void 0 : disable3d.length) === imageLayerLoaders.length) && !globalDisable3d;\n  return /* @__PURE__ */React24.createElement(TitleInfo, {\n    title: title16,\n    info: subtitle,\n    isSpatial: true,\n    urls,\n    theme,\n    removeGridComponent,\n    isReady,\n    options: canShow3DOptions || hasExpressionData ? /* @__PURE__ */React24.createElement(SpatialOptions, {\n      observationsLabel,\n      cellColorEncoding,\n      setCellColorEncoding,\n      setSpatialAxisFixed,\n      spatialAxisFixed,\n      use3d,\n      geneExpressionColormap,\n      setGeneExpressionColormap,\n      geneExpressionColormapRange,\n      setGeneExpressionColormapRange,\n      canShowExpressionOptions: hasExpressionData,\n      canShowColorEncodingOption: hasCellsData && hasExpressionData,\n      canShow3DOptions\n    }) : null\n  }, /* @__PURE__ */React24.createElement(Spatial_default, {\n    ref: deckRef,\n    uuid,\n    width,\n    height,\n    viewState: {\n      zoom,\n      target: [targetX, targetY, targetZ],\n      rotationX,\n      rotationY,\n      rotationZ,\n      rotationOrbit,\n      orbitAxis\n    },\n    setViewState,\n    layers,\n    cells,\n    cellFilter,\n    cellSelection,\n    cellHighlight,\n    cellColors,\n    molecules,\n    neighborhoods,\n    imageLayerLoaders,\n    setCellFilter,\n    setCellSelection: setCellSelectionProp,\n    setCellHighlight,\n    setMoleculeHighlight,\n    setComponentHover: () => {\n      setComponentHover(uuid);\n    },\n    updateViewInfo: setComponentViewInfo,\n    rasterLayersCallbacks,\n    spatialAxisFixed,\n    geneExpressionColormap,\n    geneExpressionColormapRange,\n    expressionData: shiftedExpressionDataForBitmask,\n    cellColorEncoding,\n    getExpressionValue,\n    theme\n  }), !disableTooltip && /* @__PURE__ */React24.createElement(SpatialTooltipSubscriber, {\n    parentUuid: uuid,\n    cellHighlight,\n    width,\n    height,\n    getCellInfo\n  }));\n} // src/components/scatterplot/ScatterplotSubscriber.js\n\n\nimport React28, { useState as useState8, useEffect as useEffect7, useCallback as useCallback9, useMemo as useMemo7 } from \"react\";\nimport { extent as extent2 } from \"d3-array\";\nimport isEqual6 from \"lodash/isEqual\"; // src/components/scatterplot/Scatterplot.js\n\nimport React25, { forwardRef as forwardRef3 } from \"react\";\nimport { PolygonLayer as PolygonLayer3, TextLayer as TextLayer3, ScatterplotLayer as ScatterplotLayer3 } from \"@deck.gl/layers\";\nimport { forceSimulation } from \"d3-force\"; // src/components/shared-spatial-scatterplot/force-collide-rects.js\n\nimport { quadtree as quadtree2 } from \"d3-quadtree\";\n\nfunction constant(v) {\n  return () => v;\n}\n\nfunction jiggle(v) {\n  return v + (Math.random() - 0.5) * 1e-6;\n}\n\nfunction forceCollideRects() {\n  let nodes;\n  let masses;\n  let strength = 1;\n  let iterations = 1;\n  let sizes;\n  let size = constant([0, 0]);\n\n  function xCenter(d) {\n    return d.x + d.vx + sizes[d.index][0] / 2;\n  }\n\n  function yCenter(d) {\n    return d.y + d.vy + sizes[d.index][1] / 2;\n  }\n\n  function prepare(quad) {\n    if (quad.data) {\n      quad.size = sizes[quad.data.index];\n    } else {\n      quad.size = [0, 0];\n\n      for (let i = 0; i < 4; i++) {\n        if (quad[i] && quad[i].size) {\n          quad.size[0] = Math.max(quad.size[0], quad[i].size[0]);\n          quad.size[1] = Math.max(quad.size[1], quad[i].size[1]);\n        }\n      }\n    }\n  }\n\n  function force() {\n    let node;\n    let nodeSize;\n    let nodeMass;\n    let xi;\n    let yi;\n    const tree = quadtree2(nodes, xCenter, yCenter).visitAfter(prepare);\n\n    function apply(quad, x0, y0, x1, y1) {\n      const {\n        data\n      } = quad;\n      const xSize = (nodeSize[0] + quad.size[0]) / 2;\n      const ySize = (nodeSize[1] + quad.size[1]) / 2;\n\n      if (data && data.index > node.index) {\n        let x = jiggle(xi - xCenter(data));\n        let y = jiggle(yi - yCenter(data));\n        const xd = Math.abs(x) - xSize;\n        const yd = Math.abs(y) - ySize;\n\n        if (xd < 0 && yd < 0) {\n          const l = Math.sqrt(x * x + y * y);\n          const m = masses[data.index] / (nodeMass + masses[data.index]);\n\n          if (Math.abs(xd) < Math.abs(yd)) {\n            node.vx -= (x *= xd / l * strength) * m;\n            data.vx += x * (1 - m);\n          } else {\n            node.vy -= (y *= yd / l * strength) * m;\n            data.vy += y * (1 - m);\n          }\n        }\n\n        return x0 > xi + xSize || x1 < xi - xSize || y0 > yi + ySize || y1 < yi - ySize;\n      }\n\n      return false;\n    }\n\n    function iterate() {\n      for (let j = 0; j < nodes.length; j++) {\n        node = nodes[j];\n        nodeSize = sizes[j];\n        nodeMass = masses[j];\n        xi = xCenter(node);\n        yi = yCenter(node);\n        tree.visit(apply);\n      }\n    }\n\n    for (let i = 0; i < iterations; i++) {\n      iterate();\n    }\n  }\n\n  force.initialize = v => {\n    nodes = v;\n    sizes = nodes.map(size);\n    masses = sizes.map(d => d[0] + d[1]);\n  };\n\n  force.iterations = function () {\n    if (arguments.length) {\n      iterations = +(arguments.length <= 0 ? undefined : arguments[0]);\n      return force;\n    }\n\n    return iterations;\n  };\n\n  force.strength = function () {\n    if (arguments.length) {\n      strength = +(arguments.length <= 0 ? undefined : arguments[0]);\n      return force;\n    }\n\n    return strength;\n  };\n\n  force.size = function () {\n    if (arguments.length) {\n      size = typeof (arguments.length <= 0 ? undefined : arguments[0]) === \"function\" ? arguments.length <= 0 ? undefined : arguments[0] : constant(arguments.length <= 0 ? undefined : arguments[0]);\n      return force;\n    }\n\n    return size;\n  };\n\n  return force;\n} // src/components/scatterplot/Scatterplot.js\n\n\nvar CELLS_LAYER_ID2 = \"scatterplot\";\nvar LABEL_FONT_FAMILY = \"-apple-system, 'Helvetica Neue', Arial, sans-serif\";\nvar NUM_FORCE_SIMULATION_TICKS = 100;\nvar LABEL_UPDATE_ZOOM_DELTA = 0.25;\n\nvar makeDefaultGetCellPosition = mapping => cellEntry => {\n  const {\n    mappings\n  } = cellEntry[1];\n\n  if (!(mapping in mappings)) {\n    const available = Object.keys(mappings).map(s => `\"${s}\"`).join(\", \");\n    throw new Error(`Expected to find \"${mapping}\", but available mappings are: ${available}`);\n  }\n\n  const mappedCell = mappings[mapping];\n  return [mappedCell[0], -mappedCell[1], 0];\n};\n\nvar makeDefaultGetCellCoords = mapping => cell => cell.mappings[mapping];\n\nvar makeDefaultGetCellColors2 = (cellColors, theme) => cellEntry => {\n  const [r, g, b, a] = cellColors && cellColors.get(cellEntry[0]) || getDefaultColor(theme);\n  return [r, g, b, 255 * (a || 1)];\n};\n\nvar Scatterplot = class extends AbstractSpatialOrScatterplot {\n  constructor(props) {\n    super(props);\n    this.cellsEntries = [];\n    this.cellsQuadTree = null;\n    this.cellsLayer = null;\n    this.cellSetsForceSimulation = forceCollideRects();\n    this.cellSetsLabelPrevZoom = null;\n    this.cellSetsLayers = [];\n    this.onUpdateCellsData();\n    this.onUpdateCellsLayer();\n    this.onUpdateCellSetsLayers();\n  }\n\n  createCellsLayer() {\n    const {\n      cellsEntries\n    } = this;\n    const {\n      theme,\n      mapping,\n      getCellPosition = makeDefaultGetCellPosition(mapping),\n      cellRadius = 1,\n      cellOpacity = 1,\n      cellFilter,\n      cellSelection,\n      setCellHighlight,\n      setComponentHover,\n      getCellIsSelected,\n      cellColors,\n      getCellColor = makeDefaultGetCellColors2(cellColors, theme),\n      getExpressionValue,\n      onCellClick,\n      geneExpressionColormap,\n      geneExpressionColormapRange = [0, 1],\n      cellColorEncoding\n    } = this.props;\n    const filteredCellsEntries = cellFilter ? cellsEntries.filter(cellEntry => cellFilter.includes(cellEntry[0])) : cellsEntries;\n    return new ScatterplotLayer3(__spreadProps(__spreadValues({\n      id: CELLS_LAYER_ID2,\n      backgroundColor: theme === \"dark\" ? [0, 0, 0] : [241, 241, 241],\n      getCellIsSelected,\n      opacity: cellOpacity,\n      radiusScale: cellRadius,\n      radiusMinPixels: 1,\n      radiusMaxPixels: 30,\n      radiusUnits: \"pixels\",\n      getPosition: getCellPosition,\n      getFillColor: getCellColor,\n      getLineColor: getCellColor,\n      getRadius: 1,\n      getExpressionValue,\n      getLineWidth: 0,\n      extensions: [new ScaledExpressionExtension_default(), new SelectionExtension_default({\n        instanced: true\n      })],\n      colorScaleLo: geneExpressionColormapRange[0],\n      colorScaleHi: geneExpressionColormapRange[1],\n      isExpressionMode: cellColorEncoding === \"geneSelection\",\n      colormap: geneExpressionColormap,\n      onClick: info => {\n        if (onCellClick) {\n          onCellClick(info);\n        }\n      },\n      updateTriggers: {\n        getExpressionValue,\n        getFillColor: [cellColorEncoding, cellSelection, cellColors],\n        getLineColor: [cellColorEncoding, cellSelection, cellColors],\n        getCellIsSelected\n      }\n    }, cellLayerDefaultProps(filteredCellsEntries, void 0, setCellHighlight, setComponentHover)), {\n      stroked: 0\n    }));\n  }\n\n  createCellSetsLayers() {\n    const {\n      theme,\n      cellSetPolygons,\n      viewState,\n      cellSetPolygonsVisible,\n      cellSetLabelsVisible,\n      cellSetLabelSize\n    } = this.props;\n    const result = [];\n\n    if (cellSetPolygonsVisible) {\n      result.push(new PolygonLayer3({\n        id: \"cell-sets-polygon-layer\",\n        data: cellSetPolygons,\n        stroked: true,\n        filled: false,\n        wireframe: true,\n        lineWidthMaxPixels: 1,\n        getPolygon: d => d.hull,\n        getLineColor: d => d.color,\n        getLineWidth: 1\n      }));\n    }\n\n    if (cellSetLabelsVisible) {\n      const {\n        zoom\n      } = viewState;\n      const nodes = cellSetPolygons.map(p => ({\n        x: p.centroid[0],\n        y: p.centroid[1],\n        label: p.name\n      }));\n      const collisionForce = this.cellSetsForceSimulation.size(d => [cellSetLabelSize * 1 / __pow(2, zoom) * 4 * d.label.length, cellSetLabelSize * 1 / __pow(2, zoom) * 1.5]);\n      forceSimulation().nodes(nodes).force(\"collision\", collisionForce).tick(NUM_FORCE_SIMULATION_TICKS);\n      result.push(new TextLayer3({\n        id: \"cell-sets-text-layer\",\n        data: nodes,\n        getPosition: d => [d.x, d.y],\n        getText: d => d.label,\n        getColor: theme === \"dark\" ? [255, 255, 255] : [0, 0, 0],\n        getSize: cellSetLabelSize,\n        getAngle: 0,\n        getTextAnchor: \"middle\",\n        getAlignmentBaseline: \"center\",\n        fontFamily: LABEL_FONT_FAMILY,\n        fontWeight: \"normal\"\n      }));\n    }\n\n    return result;\n  }\n\n  createSelectionLayers() {\n    const {\n      viewState,\n      mapping,\n      getCellCoords = makeDefaultGetCellCoords(mapping),\n      setCellSelection: setCellSelection2\n    } = this.props;\n    const {\n      tool\n    } = this.state;\n    const {\n      cellsQuadTree\n    } = this;\n    const flipYTooltip = true;\n    return getSelectionLayers(tool, viewState.zoom, CELLS_LAYER_ID2, getCellCoords, setCellSelection2, cellsQuadTree, flipYTooltip);\n  }\n\n  getLayers() {\n    const {\n      cellsLayer,\n      cellSetsLayers\n    } = this;\n    return [cellsLayer, ...cellSetsLayers, ...this.createSelectionLayers()];\n  }\n\n  onUpdateCellsData() {\n    const {\n      cells = {},\n      mapping,\n      getCellCoords = makeDefaultGetCellCoords(mapping)\n    } = this.props;\n    const cellsEntries = Object.entries(cells);\n    this.cellsEntries = cellsEntries;\n    this.cellsQuadTree = createCellsQuadTree(cellsEntries, getCellCoords);\n  }\n\n  onUpdateCellsLayer() {\n    this.cellsLayer = this.createCellsLayer();\n  }\n\n  onUpdateCellSetsLayers(onlyViewStateChange) {\n    if (onlyViewStateChange) {\n      const {\n        viewState,\n        cellSetLabelsVisible\n      } = this.props;\n      const {\n        zoom\n      } = viewState;\n      const {\n        cellSetsLabelPrevZoom\n      } = this;\n\n      if (cellSetLabelsVisible && (cellSetsLabelPrevZoom === null || Math.abs(cellSetsLabelPrevZoom - zoom) > LABEL_UPDATE_ZOOM_DELTA)) {\n        this.cellSetsLayers = this.createCellSetsLayers();\n        this.cellSetsLabelPrevZoom = zoom;\n      }\n    } else {\n      this.cellSetsLayers = this.createCellSetsLayers();\n    }\n  }\n\n  viewInfoDidUpdate() {\n    const {\n      mapping,\n      getCellPosition = makeDefaultGetCellPosition(mapping)\n    } = this.props;\n    super.viewInfoDidUpdate(cell => getCellPosition([null, cell]));\n  }\n\n  componentDidUpdate(prevProps) {\n    this.viewInfoDidUpdate();\n\n    const shallowDiff = propName => prevProps[propName] !== this.props[propName];\n\n    if ([\"cells\"].some(shallowDiff)) {\n      this.onUpdateCellsData();\n      this.forceUpdate();\n    }\n\n    if ([\"cells\", \"cellFilter\", \"cellSelection\", \"cellColors\", \"cellRadius\", \"cellOpacity\", \"cellRadiusMode\", \"geneExpressionColormap\", \"geneExpressionColormapRange\", \"geneSelection\", \"cellColorEncoding\"].some(shallowDiff)) {\n      this.onUpdateCellsLayer();\n      this.forceUpdate();\n    }\n\n    if ([\"cellSetPolygons\", \"cellSetPolygonsVisible\", \"cellSetLabelsVisible\", \"cellSetLabelSize\"].some(shallowDiff)) {\n      this.onUpdateCellSetsLayers(false);\n      this.forceUpdate();\n    }\n\n    if (shallowDiff(\"viewState\")) {\n      this.onUpdateCellSetsLayers(true);\n      this.forceUpdate();\n    }\n  }\n\n};\nvar ScatterplotWrapper = forwardRef3((props, deckRef) => /* @__PURE__ */React25.createElement(Scatterplot, __spreadProps(__spreadValues({}, props), {\n  deckRef\n})));\nvar Scatterplot_default = ScatterplotWrapper; // src/components/scatterplot/ScatterplotTooltipSubscriber.js\n\nimport React26 from \"react\";\n\nfunction ScatterplotTooltipSubscriber(props) {\n  const {\n    parentUuid,\n    cellHighlight,\n    width,\n    height,\n    getCellInfo\n  } = props;\n  const sourceUuid = useComponentHover();\n  const viewInfo = useComponentViewInfo(parentUuid);\n  const [cellInfo, x, y] = cellHighlight && getCellInfo ? [getCellInfo(cellHighlight), ...(viewInfo && viewInfo.project ? viewInfo.project(cellHighlight) : [null, null])] : [null, null, null];\n  return cellInfo ? /* @__PURE__ */React26.createElement(Tooltip2D, {\n    x,\n    y,\n    parentUuid,\n    sourceUuid,\n    parentWidth: width,\n    parentHeight: height\n  }, /* @__PURE__ */React26.createElement(TooltipContent, {\n    info: cellInfo\n  })) : null;\n} // src/components/scatterplot/ScatterplotOptions.js\n\n\nimport React27, { useCallback as useCallback8 } from \"react\";\nimport debounce4 from \"lodash/debounce\";\nimport Checkbox2 from \"@material-ui/core/Checkbox\";\nimport Slider3 from \"@material-ui/core/Slider\";\nimport TableCell4 from \"@material-ui/core/TableCell\";\nimport TableRow4 from \"@material-ui/core/TableRow\";\n\nfunction ScatterplotOptions(props) {\n  const {\n    observationsLabel,\n    cellRadius,\n    setCellRadius,\n    cellRadiusMode,\n    setCellRadiusMode,\n    cellOpacity,\n    setCellOpacity,\n    cellOpacityMode,\n    setCellOpacityMode,\n    cellSetLabelsVisible,\n    setCellSetLabelsVisible,\n    cellSetLabelSize,\n    setCellSetLabelSize,\n    cellSetPolygonsVisible,\n    setCellSetPolygonsVisible,\n    cellColorEncoding,\n    setCellColorEncoding,\n    geneExpressionColormap,\n    setGeneExpressionColormap,\n    geneExpressionColormapRange,\n    setGeneExpressionColormapRange\n  } = props;\n  const observationsLabelNice = capitalize(observationsLabel);\n  const classes = useStyles2();\n\n  function handleCellRadiusModeChange(event) {\n    setCellRadiusMode(event.target.value);\n  }\n\n  function handleCellOpacityModeChange(event) {\n    setCellOpacityMode(event.target.value);\n  }\n\n  function handleRadiusChange(event, value) {\n    setCellRadius(value);\n  }\n\n  function handleOpacityChange(event, value) {\n    setCellOpacity(value);\n  }\n\n  function handleLabelVisibilityChange(event) {\n    setCellSetLabelsVisible(event.target.checked);\n  }\n\n  function handleLabelSizeChange(event, value) {\n    setCellSetLabelSize(value);\n  }\n\n  function handlePolygonVisibilityChange(event) {\n    setCellSetPolygonsVisible(event.target.checked);\n  }\n\n  function handleGeneExpressionColormapChange(event) {\n    setGeneExpressionColormap(event.target.value);\n  }\n\n  function handleColormapRangeChange(event, value) {\n    setGeneExpressionColormapRange(value);\n  }\n\n  const handleColormapRangeChangeDebounced = useCallback8(debounce4(handleColormapRangeChange, 5, {\n    trailing: true\n  }), [handleColormapRangeChange]);\n  return /* @__PURE__ */React27.createElement(OptionsContainer, null, /* @__PURE__ */React27.createElement(CellColorEncodingOption, {\n    observationsLabel,\n    cellColorEncoding,\n    setCellColorEncoding\n  }), /* @__PURE__ */React27.createElement(TableRow4, null, /* @__PURE__ */React27.createElement(TableCell4, {\n    className: classes.labelCell\n  }, observationsLabelNice, \" Set Labels Visible\"), /* @__PURE__ */React27.createElement(TableCell4, {\n    className: classes.inputCell\n  }, /* @__PURE__ */React27.createElement(Checkbox2, {\n    className: classes.checkbox,\n    checked: cellSetLabelsVisible,\n    onChange: handleLabelVisibilityChange,\n    name: \"scatterplot-option-cell-set-labels\",\n    color: \"default\"\n  }))), /* @__PURE__ */React27.createElement(TableRow4, null, /* @__PURE__ */React27.createElement(TableCell4, {\n    className: classes.labelCell\n  }, observationsLabelNice, \" Set Label Size\"), /* @__PURE__ */React27.createElement(TableCell4, {\n    className: classes.inputCell\n  }, /* @__PURE__ */React27.createElement(Slider3, {\n    disabled: !cellSetLabelsVisible,\n    classes: {\n      root: classes.slider,\n      valueLabel: classes.sliderValueLabel\n    },\n    value: cellSetLabelSize,\n    onChange: handleLabelSizeChange,\n    \"aria-labelledby\": \"cell-set-label-size-slider\",\n    valueLabelDisplay: \"auto\",\n    step: 1,\n    min: 8,\n    max: 36\n  }))), /* @__PURE__ */React27.createElement(TableRow4, null, /* @__PURE__ */React27.createElement(TableCell4, {\n    className: classes.labelCell\n  }, observationsLabelNice, \" Set Polygons Visible\"), /* @__PURE__ */React27.createElement(TableCell4, {\n    className: classes.inputCell\n  }, /* @__PURE__ */React27.createElement(Checkbox2, {\n    className: classes.checkbox,\n    checked: cellSetPolygonsVisible,\n    onChange: handlePolygonVisibilityChange,\n    name: \"scatterplot-option-cell-set-polygons\",\n    color: \"default\"\n  }))), /* @__PURE__ */React27.createElement(TableRow4, null, /* @__PURE__ */React27.createElement(TableCell4, {\n    className: classes.labelCell,\n    htmlFor: \"cell-radius-mode-select\"\n  }, observationsLabelNice, \" Radius Mode\"), /* @__PURE__ */React27.createElement(TableCell4, {\n    className: classes.inputCell\n  }, /* @__PURE__ */React27.createElement(OptionSelect, {\n    className: classes.select,\n    value: cellRadiusMode,\n    onChange: handleCellRadiusModeChange,\n    inputProps: {\n      id: \"cell-radius-mode-select\"\n    }\n  }, /* @__PURE__ */React27.createElement(\"option\", {\n    value: \"auto\"\n  }, \"Auto\"), /* @__PURE__ */React27.createElement(\"option\", {\n    value: \"manual\"\n  }, \"Manual\")))), /* @__PURE__ */React27.createElement(TableRow4, null, /* @__PURE__ */React27.createElement(TableCell4, {\n    className: classes.labelCell\n  }, observationsLabelNice, \" Radius\"), /* @__PURE__ */React27.createElement(TableCell4, {\n    className: classes.inputCell\n  }, /* @__PURE__ */React27.createElement(Slider3, {\n    disabled: cellRadiusMode !== \"manual\",\n    classes: {\n      root: classes.slider,\n      valueLabel: classes.sliderValueLabel\n    },\n    value: cellRadius,\n    onChange: handleRadiusChange,\n    \"aria-labelledby\": \"cell-radius-slider\",\n    valueLabelDisplay: \"auto\",\n    step: 0.01,\n    min: 0.01,\n    max: 10\n  }))), /* @__PURE__ */React27.createElement(TableRow4, null, /* @__PURE__ */React27.createElement(TableCell4, {\n    className: classes.labelCell,\n    htmlFor: \"cell-opacity-mode-select\"\n  }, observationsLabelNice, \" Opacity Mode\"), /* @__PURE__ */React27.createElement(TableCell4, {\n    className: classes.inputCell\n  }, /* @__PURE__ */React27.createElement(OptionSelect, {\n    className: classes.select,\n    value: cellOpacityMode,\n    onChange: handleCellOpacityModeChange,\n    inputProps: {\n      id: \"cell-opacity-mode-select\"\n    }\n  }, /* @__PURE__ */React27.createElement(\"option\", {\n    value: \"auto\"\n  }, \"Auto\"), /* @__PURE__ */React27.createElement(\"option\", {\n    value: \"manual\"\n  }, \"Manual\")))), /* @__PURE__ */React27.createElement(TableRow4, null, /* @__PURE__ */React27.createElement(TableCell4, {\n    className: classes.labelCell\n  }, observationsLabelNice, \" Opacity\"), /* @__PURE__ */React27.createElement(TableCell4, {\n    className: classes.inputCell\n  }, /* @__PURE__ */React27.createElement(Slider3, {\n    disabled: cellOpacityMode !== \"manual\",\n    classes: {\n      root: classes.slider,\n      valueLabel: classes.sliderValueLabel\n    },\n    value: cellOpacity,\n    onChange: handleOpacityChange,\n    \"aria-labelledby\": \"cell-opacity-slider\",\n    valueLabelDisplay: \"auto\",\n    step: 0.05,\n    min: 0,\n    max: 1\n  }))), /* @__PURE__ */React27.createElement(TableRow4, null, /* @__PURE__ */React27.createElement(TableCell4, {\n    className: classes.labelCell,\n    htmlFor: \"gene-expression-colormap-select\"\n  }, \"Gene Expression Colormap\"), /* @__PURE__ */React27.createElement(TableCell4, {\n    className: classes.inputCell\n  }, /* @__PURE__ */React27.createElement(OptionSelect, {\n    className: classes.select,\n    value: geneExpressionColormap,\n    onChange: handleGeneExpressionColormapChange,\n    inputProps: {\n      id: \"gene-expression-colormap-select\"\n    }\n  }, GLSL_COLORMAPS.map(cmap => /* @__PURE__ */React27.createElement(\"option\", {\n    key: cmap,\n    value: cmap\n  }, cmap))))), /* @__PURE__ */React27.createElement(TableRow4, null, /* @__PURE__ */React27.createElement(TableCell4, {\n    className: classes.labelCell\n  }, \"Gene Expression Colormap Range\"), /* @__PURE__ */React27.createElement(TableCell4, {\n    className: classes.inputCell\n  }, /* @__PURE__ */React27.createElement(Slider3, {\n    classes: {\n      root: classes.slider,\n      valueLabel: classes.sliderValueLabel\n    },\n    value: geneExpressionColormapRange,\n    onChange: handleColormapRangeChangeDebounced,\n    \"aria-labelledby\": \"gene-expression-colormap-range-slider\",\n    valueLabelDisplay: \"auto\",\n    step: 5e-3,\n    min: 0,\n    max: 1\n  }))));\n} // src/components/shared-spatial-scatterplot/dynamic-opacity.js\n\n\nimport { OrthographicView as OrthographicView4 } from \"deck.gl\";\nimport clamp3 from \"lodash/clamp\";\n\nfunction getPointSizeDevicePixels(devicePixelRatio, zoom, xRange, yRange, width, height) {\n  const pointSize = 1e-3;\n  const pointScreenSizeMax = 10;\n  const pointScreenSizeMin = 1 / devicePixelRatio;\n\n  const scaleFactor = __pow(2, zoom);\n\n  const xAxisRange = 2 / (xRange * scaleFactor / width);\n  const yAxisRange = 2 / (yRange * scaleFactor / height);\n  const diagonalScreenSize = Math.sqrt(__pow(width, 2) + __pow(height, 2));\n  const diagonalAxisRange = Math.sqrt(__pow(xAxisRange, 2) + __pow(yAxisRange, 2));\n  const diagonalFraction = pointSize / diagonalAxisRange;\n  const deviceSize = diagonalFraction * diagonalScreenSize;\n  const pointSizeDevicePixels = clamp3(deviceSize, pointScreenSizeMin, pointScreenSizeMax);\n  return pointSizeDevicePixels;\n}\n\nfunction getPointOpacity(zoom, xRange, yRange, width, height, numCells, avgFillDensity) {\n  const N = numCells;\n  const [minX, minY, maxX, maxY] = new OrthographicView4({\n    zoom\n  }).makeViewport({\n    height,\n    width,\n    viewState: {\n      zoom,\n      target: [0, 0, 0]\n    }\n  }).getBounds();\n  const X = maxY - minY;\n  const Y = maxX - minX;\n  const X0 = xRange;\n  const Y0 = yRange;\n  const W = width;\n  const H = height;\n  let rho = avgFillDensity;\n\n  if (!rho) {\n    rho = Math.min(1, 1 / __pow(10, Math.log10(N) - 3));\n  }\n\n  const alpha = rho * W * H / N * (Y0 / Y) * (X0 / X);\n  const pointOpacity = clamp3(alpha, 1.01 / 255, 1);\n  return pointOpacity;\n} // src/components/scatterplot/ScatterplotSubscriber.js\n\n\nvar SCATTERPLOT_DATA_TYPES = [\"cells\", \"expression-matrix\", \"cell-sets\"];\n\nfunction ScatterplotSubscriber(props) {\n  const {\n    uuid,\n    coordinationScopes,\n    removeGridComponent,\n    theme,\n    disableTooltip = false,\n    observationsLabelOverride: observationsLabel = \"cell\",\n    observationsPluralLabelOverride: observationsPluralLabel = `${observationsLabel}s`,\n    title: titleOverride,\n    averageFillDensity\n  } = props;\n  const loaders = useLoaders();\n  const setComponentHover = useSetComponentHover();\n  const setComponentViewInfo = useSetComponentViewInfo(uuid);\n  const [{\n    dataset,\n    embeddingZoom: zoom,\n    embeddingTargetX: targetX,\n    embeddingTargetY: targetY,\n    embeddingTargetZ: targetZ,\n    embeddingType: mapping,\n    cellFilter,\n    cellHighlight,\n    geneSelection,\n    cellSetSelection,\n    cellSetColor,\n    cellColorEncoding,\n    additionalCellSets,\n    embeddingCellSetPolygonsVisible: cellSetPolygonsVisible,\n    embeddingCellSetLabelsVisible: cellSetLabelsVisible,\n    embeddingCellSetLabelSize: cellSetLabelSize,\n    embeddingCellRadius: cellRadiusFixed,\n    embeddingCellRadiusMode: cellRadiusMode,\n    embeddingCellOpacity: cellOpacityFixed,\n    embeddingCellOpacityMode: cellOpacityMode,\n    geneExpressionColormap,\n    geneExpressionColormapRange\n  }, {\n    setEmbeddingZoom: setZoom,\n    setEmbeddingTargetX: setTargetX,\n    setEmbeddingTargetY: setTargetY,\n    setEmbeddingTargetZ: setTargetZ,\n    setCellFilter,\n    setCellSetSelection,\n    setCellHighlight,\n    setCellSetColor,\n    setCellColorEncoding,\n    setAdditionalCellSets,\n    setEmbeddingCellSetPolygonsVisible: setCellSetPolygonsVisible,\n    setEmbeddingCellSetLabelsVisible: setCellSetLabelsVisible,\n    setEmbeddingCellSetLabelSize: setCellSetLabelSize,\n    setEmbeddingCellRadius: setCellRadiusFixed,\n    setEmbeddingCellRadiusMode: setCellRadiusMode,\n    setEmbeddingCellOpacity: setCellOpacityFixed,\n    setEmbeddingCellOpacityMode: setCellOpacityMode,\n    setGeneExpressionColormap,\n    setGeneExpressionColormapRange\n  }] = useCoordination(COMPONENT_COORDINATION_TYPES.scatterplot, coordinationScopes);\n  const [urls, addUrl, resetUrls] = useUrls();\n  const [width, height, deckRef] = useDeckCanvasSize();\n  const [isReady, setItemIsReady, setItemIsNotReady, resetReadyItems] = useReady(SCATTERPLOT_DATA_TYPES);\n  const title16 = titleOverride || `Scatterplot (${mapping})`;\n  useEffect7(() => {\n    resetUrls();\n    resetReadyItems();\n  }, [loaders, dataset]);\n  const [cells, cellsCount] = useCellsData(loaders, dataset, setItemIsReady, addUrl, true);\n  const [cellSets] = useCellSetsData(loaders, dataset, setItemIsReady, addUrl, false, {\n    setCellSetSelection,\n    setCellSetColor\n  }, {\n    cellSetSelection,\n    cellSetColor\n  });\n  const [expressionData] = useGeneSelection(loaders, dataset, setItemIsReady, false, geneSelection, setItemIsNotReady);\n  const [attrs] = useExpressionAttrs(loaders, dataset, setItemIsReady, addUrl, false);\n  const [dynamicCellRadius, setDynamicCellRadius] = useState8(cellRadiusFixed);\n  const [dynamicCellOpacity, setDynamicCellOpacity] = useState8(cellOpacityFixed);\n  const mergedCellSets = useMemo7(() => mergeCellSets(cellSets, additionalCellSets), [cellSets, additionalCellSets]);\n  const setCellSelectionProp = useCallback9(v => {\n    setCellSelection(v, additionalCellSets, cellSetColor, setCellSetSelection, setAdditionalCellSets, setCellSetColor, setCellColorEncoding);\n  }, [additionalCellSets, cellSetColor, setCellColorEncoding, setAdditionalCellSets, setCellSetColor, setCellSetSelection]);\n  const cellColors = useMemo7(() => getCellColors({\n    cellColorEncoding,\n    expressionData: expressionData && expressionData[0],\n    geneSelection,\n    cellSets: mergedCellSets,\n    cellSetSelection,\n    cellSetColor,\n    expressionDataAttrs: attrs,\n    theme\n  }), [cellColorEncoding, geneSelection, mergedCellSets, theme, cellSetSelection, cellSetColor, expressionData, attrs]);\n  const [cellSetPolygonCache, setCellSetPolygonCache] = useState8([]);\n\n  const cacheHas = (cache, key) => cache.findIndex(el => isEqual6(el[0], key)) !== -1;\n\n  const cacheGet = (cache, key) => {\n    var _a2;\n\n    return (_a2 = cache.find(el => isEqual6(el[0], key))) == null ? void 0 : _a2[1];\n  };\n\n  const cellSetPolygons = useMemo7(() => {\n    var _a2;\n\n    if ((cellSetLabelsVisible || cellSetPolygonsVisible) && !cacheHas(cellSetPolygonCache, cellSetSelection) && ((_a2 = mergedCellSets == null ? void 0 : mergedCellSets.tree) == null ? void 0 : _a2.length) && Object.values(cells).length && (cellSetColor == null ? void 0 : cellSetColor.length)) {\n      const newCellSetPolygons = getCellSetPolygons({\n        cells,\n        mapping,\n        cellSets: mergedCellSets,\n        cellSetSelection,\n        cellSetColor,\n        theme\n      });\n      setCellSetPolygonCache(cache => [...cache, [cellSetSelection, newCellSetPolygons]]);\n      return newCellSetPolygons;\n    }\n\n    return cacheGet(cellSetPolygonCache, cellSetSelection) || [];\n  }, [cellSetPolygonsVisible, cellSetPolygonCache, cellSetLabelsVisible, theme, cells, mapping, mergedCellSets, cellSetSelection, cellSetColor]);\n  const cellSelection = useMemo7(() => Array.from(cellColors.keys()), [cellColors]);\n  const [xRange, yRange, xExtent, yExtent, numCells] = useMemo7(() => {\n    const cellValues = cells && Object.values(cells);\n\n    if (cellValues == null ? void 0 : cellValues.length) {\n      const cellCoordinates = Object.values(cells).map(c => c.mappings[mapping]);\n      const xE = extent2(cellCoordinates, c => c[0]);\n      const yE = extent2(cellCoordinates, c => c[1]);\n      const xR = xE[1] - xE[0];\n      const yR = yE[1] - yE[0];\n      return [xR, yR, xE, yE, cellValues.length];\n    }\n\n    return [null, null, null, null, null];\n  }, [cells, mapping]);\n  useEffect7(() => {\n    if (xRange && yRange) {\n      const pointSizeDevicePixels = getPointSizeDevicePixels(window.devicePixelRatio, zoom, xRange, yRange, width, height);\n      setDynamicCellRadius(pointSizeDevicePixels);\n      const nextCellOpacityScale = getPointOpacity(zoom, xRange, yRange, width, height, numCells, averageFillDensity);\n      setDynamicCellOpacity(nextCellOpacityScale);\n\n      if (typeof targetX !== \"number\" || typeof targetY !== \"number\") {\n        const newTargetX = xExtent[0] + xRange / 2;\n        const newTargetY = yExtent[0] + yRange / 2;\n        const newZoom = Math.log2(Math.min(width / xRange, height / yRange));\n        setTargetX(newTargetX);\n        setTargetY(-newTargetY);\n        setZoom(newZoom);\n      }\n    }\n  }, [xRange, yRange, xExtent, yExtent, numCells, cells, mapping, width, height, zoom, averageFillDensity]);\n  const getCellInfo = useCallback9(cellId => {\n    const cellInfo = cells[cellId];\n    return __spreadValues({\n      [`${capitalize(observationsLabel)} ID`]: cellId\n    }, cellInfo ? cellInfo.factors : {});\n  }, [cells, observationsLabel]);\n  const cellSelectionSet = useMemo7(() => new Set(cellSelection), [cellSelection]);\n  const getCellIsSelected = useCallback9(cellEntry => (cellSelectionSet || new Set([])).has(cellEntry[0]) ? 1 : 0, [cellSelectionSet]);\n  const cellRadius = cellRadiusMode === \"manual\" ? cellRadiusFixed : dynamicCellRadius;\n  const cellOpacity = cellOpacityMode === \"manual\" ? cellOpacityFixed : dynamicCellOpacity;\n  const getExpressionValue = useExpressionValueGetter({\n    attrs,\n    expressionData\n  });\n  return /* @__PURE__ */React28.createElement(TitleInfo, {\n    title: title16,\n    info: `${cellsCount} ${pluralize(observationsLabel, observationsPluralLabel, cellsCount)}`,\n    removeGridComponent,\n    urls,\n    theme,\n    isReady,\n    options: /* @__PURE__ */React28.createElement(ScatterplotOptions, {\n      observationsLabel,\n      cellRadius: cellRadiusFixed,\n      setCellRadius: setCellRadiusFixed,\n      cellRadiusMode,\n      setCellRadiusMode,\n      cellOpacity: cellOpacityFixed,\n      setCellOpacity: setCellOpacityFixed,\n      cellOpacityMode,\n      setCellOpacityMode,\n      cellSetLabelsVisible,\n      setCellSetLabelsVisible,\n      cellSetLabelSize,\n      setCellSetLabelSize,\n      cellSetPolygonsVisible,\n      setCellSetPolygonsVisible,\n      cellColorEncoding,\n      setCellColorEncoding,\n      geneExpressionColormap,\n      setGeneExpressionColormap,\n      geneExpressionColormapRange,\n      setGeneExpressionColormapRange\n    })\n  }, /* @__PURE__ */React28.createElement(Scatterplot_default, {\n    ref: deckRef,\n    uuid,\n    theme,\n    viewState: {\n      zoom,\n      target: [targetX, targetY, targetZ]\n    },\n    setViewState: _ref60 => {\n      let {\n        zoom: newZoom,\n        target\n      } = _ref60;\n      setZoom(newZoom);\n      setTargetX(target[0]);\n      setTargetY(target[1]);\n      setTargetZ(target[2] || 0);\n    },\n    cells,\n    mapping,\n    cellFilter,\n    cellSelection,\n    cellHighlight,\n    cellColors,\n    cellSetPolygons,\n    cellSetLabelSize,\n    cellSetLabelsVisible,\n    cellSetPolygonsVisible,\n    setCellFilter,\n    setCellSelection: setCellSelectionProp,\n    setCellHighlight,\n    cellRadius,\n    cellOpacity,\n    cellColorEncoding,\n    geneExpressionColormap,\n    geneExpressionColormapRange,\n    setComponentHover: () => {\n      setComponentHover(uuid);\n    },\n    updateViewInfo: setComponentViewInfo,\n    getExpressionValue,\n    getCellIsSelected\n  }), !disableTooltip && /* @__PURE__ */React28.createElement(ScatterplotTooltipSubscriber, {\n    parentUuid: uuid,\n    cellHighlight,\n    width,\n    height,\n    getCellInfo\n  }));\n} // src/app/VitessceGrid.js\n\n\nimport React30, { useEffect as useEffect9 } from \"react\"; // src/app/vitessce-grid-layout/VitessceGridLayout.js\n\nimport React29 from \"react\";\nimport { Responsive, WidthProvider } from \"react-grid-layout\";\nimport isEqual7 from \"lodash/isEqual\"; // src/app/vitessce-grid-layout/layout-utils.js\n\nvar COMPONENT_ID_PREFIX = \"i\";\n\nfunction sum(a) {\n  return a.reduce((x, y) => x + y, 0);\n}\n\nfunction makeGridLayout(colXs, colLayout) {\n  const colWs = [];\n\n  for (let i = 0; i < colXs.length; i++) {\n    colWs.push(colXs[i + 1] - colXs[i]);\n  }\n\n  return Object.entries(colLayout).map(_ref61 => {\n    let [id, spec] = _ref61;\n    return {\n      i: id,\n      y: spec.y,\n      h: spec.h || 1,\n      x: colXs[spec.x],\n      w: sum(colWs.slice(spec.x, spec.x + (spec.w || 1)))\n    };\n  });\n}\n\nfunction getMaxRows(layouts) {\n  return Math.max(...Object.values(layouts).map(layout => Math.max(...layout.map(xywh => xywh.y + xywh.h))));\n}\n\nfunction resolveLayout(layout) {\n  const cols = {};\n  const layouts = {};\n  const breakpoints = {};\n  const components = {};\n  const positions = {};\n  (\"components\" in layout ? layout.components : layout).forEach((def, i) => {\n    const id = `${COMPONENT_ID_PREFIX}${i}`;\n    components[id] = {\n      component: def.component,\n      props: def.props || {},\n      coordinationScopes: def.coordinationScopes || {}\n    };\n    positions[id] = {\n      id,\n      x: def.x,\n      y: def.y,\n      w: def.w,\n      h: def.h\n    };\n  });\n\n  if (\"components\" in layout) {\n    Object.entries(layout.columns).forEach(_ref62 => {\n      let [width, columnXs] = _ref62;\n      cols[width] = columnXs[columnXs.length - 1];\n      layouts[width] = makeGridLayout(columnXs, positions);\n      breakpoints[width] = width;\n    });\n  } else {\n    const id = \"ID\";\n    const columnCount = 12;\n    cols[id] = columnCount;\n    layouts[id] = makeGridLayout(range(columnCount + 1), positions);\n    breakpoints[id] = 1e3;\n  }\n\n  return {\n    cols,\n    layouts,\n    breakpoints,\n    components\n  };\n} // src/app/vitessce-grid-layout/VitessceGridLayout.js\n\n\nvar ResponsiveGridLayout = WidthProvider(Responsive);\nvar ResponsiveHeightGridLayout = class extends ResponsiveGridLayout {\n  componentDidUpdate(prevProps) {\n    if (this.props.height !== prevProps.height) {\n      this.onWindowResize();\n    }\n  }\n\n};\n\nfunction VitessceGridLayout(props) {\n  const {\n    layout,\n    getComponent: getComponent2,\n    padding: padding2,\n    margin: margin2,\n    draggableHandle,\n    reactGridLayoutProps,\n    rowHeight,\n    theme,\n    height,\n    onRemoveComponent,\n    onLayoutChange: onLayoutChangeProp\n  } = props;\n  const {\n    cols: gridCols,\n    layouts: gridLayouts,\n    breakpoints: gridBreakpoints,\n    components: gridComponents\n  } = resolveLayout(layout);\n  const maxRows = getMaxRows(gridLayouts);\n  const style = /* @__PURE__ */React29.createElement(\"style\", null, `\n        ${draggableHandle} {\n          cursor: grab;\n        }\n        ${draggableHandle}:active {\n          cursor: grabbing;\n        }\n     `);\n\n  const onLayoutChange = newLayout => {\n    if (newLayout.length === Object.entries(gridComponents).length) {\n      const newComponentProps = [];\n      newLayout.forEach(nextC => {\n        const id = nextC.i;\n        const prevC = gridComponents[id];\n\n        if (prevC) {\n          const i = parseInt(id.substring(id.indexOf(COMPONENT_ID_PREFIX) + 1), 10);\n          const nextProps = {\n            x: nextC.x,\n            y: nextC.y,\n            w: nextC.w,\n            h: nextC.h\n          };\n          const prevProps = {\n            x: prevC.x,\n            y: prevC.y,\n            w: prevC.w,\n            h: prevC.h\n          };\n\n          if (!isEqual7(nextProps, prevProps)) {\n            newComponentProps.push([i, nextProps]);\n          }\n        }\n      });\n\n      if (newComponentProps.length > 0) {\n        onLayoutChangeProp(newComponentProps);\n      }\n    }\n  };\n\n  const layoutChildren = Object.entries(gridComponents).map((_ref63, i) => {\n    let [k, v] = _ref63;\n    const Component = getComponent2(v.component);\n\n    const removeGridComponent = () => {\n      onRemoveComponent(i);\n    };\n\n    return /* @__PURE__ */React29.createElement(\"div\", {\n      key: k\n    }, /* @__PURE__ */React29.createElement(Component, __spreadProps(__spreadValues({}, v.props), {\n      uuid: i,\n      coordinationScopes: v.coordinationScopes,\n      theme,\n      removeGridComponent\n    })));\n  });\n  return gridLayouts && gridComponents && gridBreakpoints && gridCols && /* @__PURE__ */React29.createElement(React29.Fragment, null, style, /* @__PURE__ */React29.createElement(ResponsiveHeightGridLayout, __spreadValues({\n    className: \"layout\",\n    cols: gridCols,\n    layouts: gridLayouts,\n    breakpoints: gridBreakpoints,\n    height,\n    rowHeight: rowHeight || (window.innerHeight - 2 * padding2 - (maxRows - 1) * margin2) / maxRows,\n    containerPadding: [padding2, padding2],\n    margin: [margin2, margin2],\n    draggableHandle,\n    onLayoutChange\n  }, reactGridLayoutProps), layoutChildren));\n}\n\nVitessceGridLayout.defaultProps = {\n  padding: 10,\n  margin: 10\n}; // src/app/vitessce-grid-utils.js\n\nimport { useState as useState9, useEffect as useEffect8, useRef as useRef6 } from \"react\"; // src/loaders/JsonLoader.js\n\nimport Ajv from \"ajv\"; // src/loaders/AbstractLoader.js\n\nimport uuidv43 from \"uuid/v4\";\nvar AbstractLoader = class {\n  constructor(_ref64) {\n    let {\n      type: type16,\n      url,\n      requestInit,\n      options\n    } = _ref64;\n    this.type = type16;\n    this.url = url;\n    this.requestInit = requestInit;\n    this.options = options;\n    this.subscriptions = {};\n  }\n\n  load() {\n    throw new Error(\"The load() method has not been implemented.\");\n  }\n\n  subscribe(subscriber) {\n    const token = uuidv43();\n    this.subscriptions[token] = subscriber;\n    return token;\n  }\n\n  unsubscribe(token) {\n    delete this.subscriptions[token];\n  }\n\n  publish(data) {\n    Object.values(this.subscriptions).forEach(subscriber => {\n      subscriber(data);\n    });\n  }\n\n}; // src/loaders/AbstractTwoStepLoader.js\n\nvar AbstractTwoStepLoader = class extends AbstractLoader {\n  constructor(dataSource, params) {\n    super(params);\n    this.dataSource = dataSource;\n  }\n\n}; // src/loaders/LoaderResult.js\n\nvar LoaderResult = class {\n  constructor(data, url) {\n    let coordinationValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n    this.data = data;\n    this.url = url;\n    this.coordinationValues = coordinationValues;\n  }\n\n}; // src/schemas/cells.schema.json\n\nvar $schema3 = \"http://json-schema.org/draft-07/schema#\";\nvar $id3 = \"https://github.com/vitessce/vitessce/#cells\";\nvar title3 = \"Vitessce cell data\";\nvar type3 = \"object\";\nvar definitions3 = {\n  coord: {\n    type: \"array\",\n    minItems: 2,\n    maxItems: 2,\n    items: {\n      type: \"number\"\n    }\n  },\n  positiveFloatValues: {\n    type: \"object\",\n    patternProperties: {\n      \".\": {\n        type: \"number\",\n        minimum: 0\n      }\n    }\n  },\n  stringValues: {\n    type: \"object\",\n    patternProperties: {\n      \".\": {\n        type: \"string\"\n      }\n    }\n  }\n};\nvar patternProperties = {\n  \".\": {\n    additionalProperties: false,\n    required: [],\n    properties: {\n      mappings: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            $ref: \"#/definitions/coord\"\n          }\n        }\n      },\n      xy: {\n        $ref: \"#/definitions/coord\"\n      },\n      genes: {\n        $ref: \"#/definitions/positiveFloatValues\"\n      },\n      factors: {\n        $ref: \"#/definitions/stringValues\"\n      },\n      poly: {\n        type: \"array\",\n        items: {\n          $ref: \"#/definitions/coord\"\n        }\n      }\n    }\n  }\n};\nvar cells_schema_default = {\n  $schema: $schema3,\n  $id: $id3,\n  title: title3,\n  type: type3,\n  definitions: definitions3,\n  patternProperties\n}; // src/schemas/molecules.schema.json\n\nvar $schema4 = \"http://json-schema.org/draft-07/schema#\";\nvar $id4 = \"https://github.com/vitessce/vitessce/#molecules\";\nvar title4 = \"Vitessce molecule data\";\nvar type4 = \"object\";\nvar definitions4 = {\n  coord: {\n    type: \"array\",\n    maxItems: 2,\n    minItems: 2,\n    items: {\n      type: \"number\"\n    }\n  }\n};\nvar patternProperties2 = {\n  \".\": {\n    type: \"array\",\n    items: {\n      $ref: \"#/definitions/coord\"\n    }\n  }\n};\nvar molecules_schema_default = {\n  $schema: $schema4,\n  $id: $id4,\n  title: title4,\n  type: type4,\n  definitions: definitions4,\n  patternProperties: patternProperties2\n}; // src/schemas/neighborhoods.schema.json\n\nvar $schema5 = \"http://json-schema.org/draft-07/schema#\";\nvar $id5 = \"https://github.com/vitessce/vitessce/#neighborhoods\";\nvar title5 = \"Vitessce neighborhood data\";\nvar type5 = \"object\";\nvar definitions5 = {\n  coord: {\n    type: \"array\",\n    maxItems: 2,\n    minItems: 2,\n    items: {\n      type: \"number\"\n    }\n  }\n};\nvar patternProperties3 = {\n  \".\": {\n    additionalProperties: false,\n    required: [\"poly\"],\n    properties: {\n      poly: {\n        type: \"array\",\n        maxItems: 3,\n        minItems: 3,\n        items: {\n          $ref: \"#/definitions/coord\"\n        }\n      }\n    }\n  }\n};\nvar neighborhoods_schema_default = {\n  $schema: $schema5,\n  $id: $id5,\n  title: title5,\n  type: type5,\n  definitions: definitions5,\n  patternProperties: patternProperties3\n}; // src/schemas/raster.schema.json\n\nvar $schema6 = \"http://json-schema.org/draft-07/schema#\";\nvar $id6 = \"https://github.com/vitessce/vitessce/#raster\";\nvar title6 = \"Vitessce image data\";\nvar type6 = \"object\";\nvar definitions6 = {\n  transform: {\n    type: \"object\",\n    additionalProperties: false,\n    oneOf: [{\n      required: [\"scale\", \"translate\"]\n    }, {\n      required: [\"matrix\"]\n    }],\n    properties: {\n      scale: {\n        type: \"number\"\n      },\n      translate: {\n        type: \"object\",\n        additionalProperties: false,\n        required: [\"y\", \"x\"],\n        properties: {\n          y: {\n            type: \"number\"\n          },\n          x: {\n            type: \"number\"\n          }\n        }\n      },\n      matrix: {\n        type: \"array\",\n        items: {\n          type: \"number\"\n        },\n        minItems: 16,\n        maxItems: 16\n      }\n    }\n  },\n  dimensions: {\n    type: \"array\",\n    items: {\n      type: \"object\",\n      additionalProperties: false,\n      required: [\"field\", \"type\", \"values\"],\n      properties: {\n        field: {\n          type: \"string\"\n        },\n        type: {\n          type: \"string\",\n          enum: [\"quantitative\", \"nominal\", \"ordinal\", \"temporal\"]\n        },\n        values: {\n          type: [\"array\", \"null\"],\n          items: {\n            type: \"string\"\n          }\n        }\n      }\n    }\n  },\n  metadata: {\n    type: \"object\",\n    additionalProperties: false,\n    anyOf: [{\n      required: [\"dimensions\", \"isPyramid\"]\n    }, {\n      required: [\"transform\"]\n    }, {\n      required: [\"omeTiffOffsetsUrl\"]\n    }, {\n      required: [\"isBitmask\"]\n    }],\n    properties: {\n      dimensions: {\n        $ref: \"#/definitions/dimensions\"\n      },\n      isPyramid: {\n        type: \"boolean\"\n      },\n      transform: {\n        $ref: \"#/definitions/transform\"\n      },\n      isBitmask: {\n        type: \"boolean\"\n      },\n      omeTiffOffsetsUrl: {\n        type: \"string\",\n        format: \"uri\"\n      }\n    }\n  },\n  requestInit: {\n    type: \"object\",\n    additionalProperties: false,\n    required: [],\n    properties: {\n      method: {\n        type: \"string\"\n      },\n      headers: {\n        type: \"object\"\n      },\n      body: {\n        type: \"string\"\n      },\n      mode: {\n        type: \"string\"\n      },\n      credentials: {\n        type: \"string\"\n      },\n      cache: {\n        type: \"string\"\n      },\n      redirect: {\n        type: \"string\"\n      },\n      referrer: {\n        type: \"string\"\n      },\n      integrity: {\n        type: \"string\"\n      }\n    }\n  },\n  image: {\n    type: \"object\",\n    additionalProperties: false,\n    required: [\"name\", \"url\", \"type\"],\n    properties: {\n      name: {\n        type: \"string\"\n      },\n      url: {\n        type: \"string\",\n        format: \"uri\"\n      },\n      type: {\n        type: \"string\"\n      },\n      metadata: {\n        $ref: \"#/definitions/metadata\"\n      },\n      requestInit: {\n        $ref: \"#/definitions/requestInit\"\n      }\n    }\n  }\n};\nvar additionalProperties = false;\nvar required = [\"schemaVersion\", \"images\"];\nvar properties = {\n  schemaVersion: {\n    type: \"string\"\n  },\n  usePhysicalSizeScaling: {\n    type: \"boolean\",\n    description: \"Default is false: passing true in will infer scaling from the reported physcial size\"\n  },\n  renderLayers: {\n    type: \"array\",\n    items: {\n      type: \"string\"\n    }\n  },\n  images: {\n    type: \"array\",\n    items: {\n      $ref: \"#/definitions/image\"\n    }\n  }\n};\nvar raster_schema_default = {\n  $schema: $schema6,\n  $id: $id6,\n  title: title6,\n  type: type6,\n  definitions: definitions6,\n  additionalProperties,\n  required,\n  properties\n}; // src/loaders/JsonLoader.js\n\nvar typeToSchema = {\n  cells: cells_schema_default,\n  molecules: molecules_schema_default,\n  neighborhoods: neighborhoods_schema_default,\n  raster: raster_schema_default,\n  \"cell-sets\": cell_sets_schema_default\n};\nvar JsonLoader = class extends AbstractTwoStepLoader {\n  constructor(dataSource, params) {\n    super(dataSource, params);\n    const {\n      type: type16\n    } = params;\n    this.schema = typeToSchema[type16];\n  }\n\n  load() {\n    const {\n      url,\n      type: type16,\n      fileType\n    } = this;\n\n    if (this.data) {\n      return this.data;\n    }\n\n    this.data = this.dataSource.data.then(data => {\n      if (data instanceof AbstractLoaderError) {\n        return Promise.reject(data);\n      }\n\n      const [valid, reason] = this.validate(data);\n\n      if (valid) {\n        return Promise.resolve(new LoaderResult(data, url));\n      }\n\n      return Promise.reject(new LoaderValidationError(type16, fileType, url, reason));\n    });\n    return this.data;\n  }\n\n  validate(data) {\n    const {\n      schema,\n      type: type16\n    } = this;\n\n    if (!schema) {\n      throw Error(`No schema for ${type16}`);\n    }\n\n    const validate = new Ajv().compile(schema);\n    const valid = validate(data);\n    let failureReason;\n\n    if (!valid) {\n      failureReason = validate.errors;\n    }\n\n    return [valid, failureReason];\n  }\n\n}; // src/loaders/MatrixZarrLoader.js\n\nimport { openArray } from \"zarr\";\nvar MatrixZarrLoader = class extends AbstractTwoStepLoader {\n  loadAttrs() {\n    if (this.attrs) {\n      return this.attrs;\n    }\n\n    this.attrs = this.dataSource.getJson(\".zattrs\");\n    return this.attrs;\n  }\n\n  loadArr() {\n    const {\n      store\n    } = this.dataSource;\n\n    if (this.arr) {\n      return this.arr;\n    }\n\n    this.arr = openArray({\n      store,\n      path: \"/\",\n      mode: \"r\"\n    }).then(z => new Promise(resolve => {\n      z.getRaw([null, null]).then(resolve);\n    }));\n    return this.arr;\n  }\n\n  load() {\n    return Promise.all([this.loadAttrs(), this.loadArr()]).then(data => Promise.resolve(new LoaderResult(data, null)));\n  }\n\n}; // src/schemas/genes.schema.json\n\nvar $schema7 = \"http://json-schema.org/draft-07/schema#\";\nvar $id7 = \"https://github.com/vitessce/vitessce/#genes\";\nvar title7 = \"Vitessce gene data\";\nvar type7 = \"object\";\nvar definitions7 = {\n  positiveFloatValues: {\n    type: \"object\",\n    patternProperties: {\n      \".\": {\n        type: \"number\",\n        minimum: 0\n      }\n    }\n  }\n};\nvar patternProperties4 = {\n  \".\": {\n    additionalProperties: false,\n    required: [\"max\", \"cells\"],\n    properties: {\n      max: {\n        type: \"number\"\n      },\n      cells: {\n        $ref: \"#/definitions/positiveFloatValues\"\n      }\n    }\n  }\n};\nvar genes_schema_default = {\n  $schema: $schema7,\n  $id: $id7,\n  title: title7,\n  type: type7,\n  definitions: definitions7,\n  patternProperties: patternProperties4\n}; // src/loaders/GenesJsonAsMatrixZarrLoader.js\n\nvar GenesJsonAsMatrixZarrLoader = class extends JsonLoader {\n  constructor(dataSource, params) {\n    super(dataSource, params);\n    this.schema = genes_schema_default;\n  }\n\n  load() {\n    var __super = key => super[key];\n\n    return __async(this, null, function* () {\n      const payload = yield __super(\"load\").call(this).catch(reason => Promise.resolve(reason));\n\n      if (payload instanceof AbstractLoaderError) {\n        return Promise.reject(payload);\n      }\n\n      const {\n        data,\n        url\n      } = payload;\n      const cols = Object.keys(data);\n      const rows = cols.length > 0 ? Object.keys(data[cols[0]].cells) : [];\n      const attrs = {\n        rows,\n        cols\n      };\n      const normalizedFlatMatrix = rows.flatMap(cellId => cols.map(geneId => data[geneId].cells[cellId] / data[geneId].max * 255));\n      const arr = {\n        data: Uint8Array.from(normalizedFlatMatrix)\n      };\n      return Promise.resolve(new LoaderResult([attrs, arr], url));\n    });\n  }\n\n}; // src/loaders/ClustersJsonAsMatrixZarrLoader.js\n\nimport { extent as extent3 } from \"d3-array\";\nimport range6 from \"lodash/range\"; // src/schemas/clusters.schema.json\n\nvar $schema8 = \"http://json-schema.org/draft-07/schema#\";\nvar $id8 = \"https://github.com/vitessce/vitessce/#clusters\";\nvar title8 = \"Vitessce cluster data\";\nvar type8 = \"object\";\nvar definitions8 = {\n  stringArray: {\n    type: \"array\",\n    items: {\n      type: \"string\"\n    }\n  },\n  matrix: {\n    type: \"array\",\n    items: {\n      type: \"array\",\n      items: {\n        type: \"number\",\n        minimum: 0,\n        maximum: 1\n      }\n    }\n  }\n};\nvar additionalProperties2 = false;\nvar required2 = [\"rows\", \"cols\", \"matrix\"];\nvar properties2 = {\n  rows: {\n    $ref: \"#/definitions/stringArray\"\n  },\n  cols: {\n    $ref: \"#/definitions/stringArray\"\n  },\n  matrix: {\n    $ref: \"#/definitions/matrix\"\n  }\n};\nvar clusters_schema_default = {\n  $schema: $schema8,\n  $id: $id8,\n  title: title8,\n  type: type8,\n  definitions: definitions8,\n  additionalProperties: additionalProperties2,\n  required: required2,\n  properties: properties2\n}; // src/loaders/ClustersJsonAsMatrixZarrLoader.js\n\nvar ClustersJsonAsMatrixZarrLoader = class extends JsonLoader {\n  constructor(dataSource, params) {\n    super(dataSource, params);\n    this.schema = clusters_schema_default;\n  }\n\n  load() {\n    var __super = key => super[key];\n\n    return __async(this, null, function* () {\n      const payload = yield __super(\"load\").call(this).catch(reason => Promise.resolve(reason));\n\n      if (payload instanceof AbstractLoaderError) {\n        return Promise.reject(payload);\n      }\n\n      const {\n        data,\n        url\n      } = payload;\n      const {\n        rows,\n        cols,\n        matrix\n      } = data;\n      const attrs = {\n        rows: cols,\n        cols: rows\n      };\n      const shape = [attrs.rows.length, attrs.cols.length];\n      const normalizedMatrix = matrix.map(col => {\n        const [min, max2] = extent3(col);\n\n        const normalize2 = d => Math.floor((d - min) / (max2 - min) * 255);\n\n        return col.map(normalize2);\n      });\n      const tNormalizedMatrix = range6(shape[0]).map(i => range6(shape[1]).map(j => normalizedMatrix[j][i]));\n      const normalizedFlatMatrix = tNormalizedMatrix.flat();\n      const arr = {\n        data: Uint8Array.from(normalizedFlatMatrix)\n      };\n      return Promise.resolve(new LoaderResult([attrs, arr], url));\n    });\n  }\n\n}; // src/loaders/RasterJsonLoader.js\n\nimport { openArray as openArray2 } from \"zarr\";\n\nfunction initLoader(imageData) {\n  return __async(this, null, function* () {\n    const {\n      type: type16,\n      url,\n      metadata,\n      requestInit\n    } = imageData;\n\n    switch (type16) {\n      case \"zarr\":\n        {\n          const {\n            dimensions,\n            isPyramid,\n            transform\n          } = metadata || {};\n          const labels = dimensions.map(d => d.field);\n          let source;\n\n          if (isPyramid) {\n            const metadataUrl = `${url}${url.slice(-1) === \"/\" ? \"\" : \"/\"}.zmetadata`;\n            const response = yield fetch(metadataUrl);\n            const {\n              metadata: zarrMetadata\n            } = yield response.json();\n            const paths = Object.keys(zarrMetadata).filter(metaKey => metaKey.includes(\".zarray\")).map(arrMetaKeys => arrMetaKeys.slice(0, -7));\n            const data = yield Promise.all(paths.map(path => openArray2({\n              store: url,\n              path\n            })));\n            const [yChunk, xChunk] = data[0].chunks.slice(-2);\n            const size = Math.min(yChunk, xChunk);\n\n            const tileSize = __pow(2, Math.floor(Math.log2(size)));\n\n            source = data.map(d => new ZarrPixelSource(d, labels, tileSize));\n          } else {\n            const data = yield openArray2({\n              store: url\n            });\n            source = new ZarrPixelSource(data, labels);\n          }\n\n          return {\n            data: source,\n            metadata: {\n              dimensions,\n              transform\n            },\n            channels: (dimensions.find(d => d.field === \"channel\") || dimensions[0]).values\n          };\n        }\n\n      case \"ome-tiff\":\n        {\n          let loader;\n\n          if (metadata && \"omeTiffOffsetsUrl\" in metadata) {\n            const {\n              omeTiffOffsetsUrl\n            } = metadata;\n            const res = yield fetch(omeTiffOffsetsUrl, requestInit || {});\n\n            if (res.ok) {\n              const offsets = yield res.json();\n              loader = yield loadOmeTiff(url, {\n                offsets,\n                headers: requestInit == null ? void 0 : requestInit.headers\n              });\n            } else {\n              throw new Error(\"Offsets not found but provided.\");\n            }\n          } else {\n            loader = yield loadOmeTiff(url, {\n              headers: requestInit == null ? void 0 : requestInit.headers\n            });\n          }\n\n          const {\n            Pixels: {\n              Channels\n            }\n          } = loader.metadata;\n          const channels2 = Array.isArray(Channels) ? Channels.map((channel, i) => channel.Name || `Channel ${i}`) : [Channels.Name || `Channel ${0}`];\n          return __spreadProps(__spreadValues({}, loader), {\n            channels: channels2\n          });\n        }\n\n      default:\n        {\n          throw Error(`Image type (${type16}) is not supported`);\n        }\n    }\n  });\n}\n\nvar RasterLoader = class extends JsonLoader {\n  constructor(dataSource, params) {\n    const {\n      url,\n      options\n    } = params;\n\n    if (!url && options) {\n      dataSource.url = URL.createObjectURL(new Blob([JSON.stringify(options)]));\n    }\n\n    super(dataSource, params);\n    this.schema = raster_schema_default;\n  }\n\n  load() {\n    var __super = key => super[key];\n\n    return __async(this, null, function* () {\n      const payload = yield __super(\"load\").call(this).catch(reason => Promise.resolve(reason));\n\n      if (payload instanceof AbstractLoaderError) {\n        return Promise.reject(payload);\n      }\n\n      const {\n        data: raster\n      } = payload;\n      const {\n        images,\n        renderLayers,\n        usePhysicalSizeScaling = false\n      } = raster;\n      const urls = images.filter(image => !image.url.includes(\"zarr\")).map(image => [image.url, image.name]);\n      const imagesWithLoaderCreators = images.map(image => __spreadProps(__spreadValues({}, image), {\n        loaderCreator: () => __async(this, null, function* () {\n          return initLoader(image);\n        })\n      }));\n\n      if (!this.autoImageCache) {\n        this.autoImageCache = initializeRasterLayersAndChannels(imagesWithLoaderCreators, renderLayers, usePhysicalSizeScaling);\n      }\n\n      return this.autoImageCache.then(autoImages => {\n        const [autoImageLayers, imageLayerLoaders, imageLayerMeta] = autoImages;\n        const coordinationValues = {\n          spatialRasterLayers: autoImageLayers\n        };\n        return new LoaderResult({\n          loaders: imageLayerLoaders,\n          meta: imageLayerMeta\n        }, urls, coordinationValues);\n      });\n    });\n  }\n\n}; // src/loaders/OmeZarrLoader.js\n\nfunction hexToRgb(hex) {\n  const result = /^#?([A-F\\d]{2})([A-F\\d]{2})([A-F\\d]{2})$/i.exec(hex);\n  return [parseInt(result[1].toLowerCase(), 16), parseInt(result[2].toLowerCase(), 16), parseInt(result[3].toLowerCase(), 16)];\n}\n\nvar OmeZarrLoader = class extends AbstractTwoStepLoader {\n  load() {\n    return __async(this, null, function* () {\n      var _a2, _b2;\n\n      const payload = yield this.dataSource.getJson(\".zattrs\").catch(reason => Promise.resolve(reason));\n\n      if (payload instanceof AbstractLoaderError) {\n        return Promise.reject(payload);\n      }\n\n      const loader = yield loadOmeZarr(this.url, {\n        fetchOptions: this.requestInit,\n        type: \"multiscales\"\n      });\n      const {\n        metadata\n      } = loader;\n      const {\n        omero\n      } = metadata;\n\n      if (!omero) {\n        console.error(\"Path for image not valid\");\n        return Promise.reject(payload);\n      }\n\n      const {\n        rdefs,\n        channels: channels2\n      } = omero;\n      const t = (_a2 = rdefs.defaultT) != null ? _a2 : 0;\n      const z = (_b2 = rdefs.defaultZ) != null ? _b2 : 0;\n      const imagesWithLoaderCreators = [{\n        name: omero.name,\n        channels: channels2.map((channel, i) => ({\n          selection: {\n            z,\n            t,\n            c: i\n          },\n          slider: [channel.window.start, channel.window.end],\n          color: hexToRgb(channel.color)\n        })),\n        loaderCreator: () => __async(this, null, function* () {\n          return __spreadProps(__spreadValues({}, loader), {\n            channels: channels2.map(c => c.label)\n          });\n        })\n      }];\n      const [autoImageLayers, imageLayerLoaders, imageLayerMeta] = yield initializeRasterLayersAndChannels(imagesWithLoaderCreators, void 0);\n      const coordinationValues = {\n        spatialRasterLayers: autoImageLayers\n      };\n      return Promise.resolve(new LoaderResult({\n        loaders: imageLayerLoaders,\n        meta: imageLayerMeta\n      }, [], coordinationValues));\n    });\n  }\n\n}; // src/components/sets/io.js\n\nimport Ajv2 from \"ajv\";\nimport isNil2 from \"lodash/isNil\";\nimport { dsvFormat } from \"d3-dsv\";\nimport { parse as json2csv } from \"json2csv\";\n\nfunction tryUpgradeTreeToLatestSchema(currTree, datatype) {\n  const validate = new Ajv2().compile(HIERARCHICAL_SCHEMAS[datatype].schema);\n  const valid = validate(currTree);\n\n  if (!valid) {\n    const failureReason = JSON.stringify(validate.errors, null, 2);\n    throw new Error(`Tree validation failed: ${failureReason}`);\n  } else if (currTree.datatype !== datatype) {\n    throw new Error(`The data type does not match the expected data type of '${datatype}'.`);\n  }\n\n  if (currTree.version === \"0.1.2\") {\n    return __spreadProps(__spreadValues({}, currTree), {\n      version: HIERARCHICAL_SCHEMAS[datatype].latestVersion,\n      tree: currTree.tree.map(levelZeroNode => nodeTransform(levelZeroNode, n => !n.children && Array.isArray(n.set), n => __spreadProps(__spreadValues({}, n), {\n        set: n.set.map(itemId => [itemId, null])\n      }), []))\n    });\n  }\n\n  return currTree;\n}\n\nfunction handleImportJSON(result, datatype, theme) {\n  let importData = JSON.parse(result);\n  importData = tryUpgradeTreeToLatestSchema(importData, datatype);\n  return importData;\n}\n\nfunction handleImportTabular(result, datatype, theme) {\n  const dsvParser = dsvFormat(SEPARATOR_TABULAR);\n  const importData = dsvParser.parse(result, row => ({\n    groupName: row.groupName,\n    setName: row.setName,\n    setColor: row.setColor ? colorStringToArray(row.setColor) : getDefaultColor(theme),\n    obsId: row.obsId,\n    predictionScore: isNil2(row.predictionScore) || row.predictionScore === NA_VALUE_TABULAR ? null : +row.predictionScore\n  }));\n  const validate = new Ajv2().compile(TABULAR_SCHEMAS[datatype].schema);\n  const valid = validate(importData);\n\n  if (!valid) {\n    const failureReason = JSON.stringify(validate.errors, null, 2);\n    throw new Error(`Import validation failed: ${failureReason}`);\n  } else {\n    const treeToImport = {\n      version: HIERARCHICAL_SCHEMAS[datatype].latestVersion,\n      datatype,\n      tree: []\n    };\n    const uniqueGroupNames = Array.from(new Set(importData.map(d => d.groupName)));\n    uniqueGroupNames.forEach(groupName => {\n      const levelZeroNode = {\n        name: groupName,\n        children: []\n      };\n      const groupRows = importData.filter(d => d.groupName === groupName);\n      const uniqueSetNames = Array.from(new Set(groupRows.map(d => d.setName)));\n      uniqueSetNames.forEach(setName => {\n        const setRows = groupRows.filter(d => d.setName === setName);\n        const {\n          setColor\n        } = setRows[0];\n        const levelOneNode = {\n          name: setName,\n          color: setColor,\n          set: setRows.map(d => [d.obsId, d.predictionScore])\n        };\n        levelZeroNode.children.push(levelOneNode);\n      });\n      treeToImport.tree.push(levelZeroNode);\n    });\n    return treeToImport;\n  }\n}\n\nfunction handleExportJSON(result) {\n  const jsonString = JSON.stringify(result);\n  const dataString = `data:${MIME_TYPE_JSON};charset=utf-8,${encodeURIComponent(jsonString)}`;\n  return dataString;\n}\n\nfunction handleExportTabular(result) {\n  const exportData = [];\n  result.tree.forEach(levelZeroNode => {\n    levelZeroNode.children.forEach(levelOneNode => {\n      if (levelOneNode.set) {\n        levelOneNode.set.forEach(_ref65 => {\n          let [obsId, prob] = _ref65;\n          exportData.push({\n            groupName: levelZeroNode.name,\n            setName: levelOneNode.name,\n            setColor: colorArrayToString(levelOneNode.color),\n            obsId,\n            predictionScore: isNil2(prob) ? NA_VALUE_TABULAR : prob\n          });\n        });\n      }\n    });\n  });\n  const csvString = json2csv(exportData, {\n    fields: [\"groupName\", \"setName\", \"setColor\", \"obsId\", \"predictionScore\"],\n    delimiter: SEPARATOR_TABULAR\n  });\n  const dataString = `data:${MIME_TYPE_TABULAR};charset=utf-8,${encodeURIComponent(csvString)}`;\n  return dataString;\n}\n\nfunction downloadForUser(dataString, fileName) {\n  const downloadAnchorNode = document.createElement(\"a\");\n  downloadAnchorNode.setAttribute(\"href\", dataString);\n  downloadAnchorNode.setAttribute(\"download\", fileName);\n  document.body.appendChild(downloadAnchorNode);\n  downloadAnchorNode.click();\n  downloadAnchorNode.remove();\n} // src/loaders/CellSetsJsonLoader.js\n\n\nvar CellSetsJsonLoader = class extends JsonLoader {\n  constructor(dataSource, params) {\n    super(dataSource, params);\n    this.schema = cell_sets_schema_default;\n  }\n\n  load() {\n    var __super = key => super[key];\n\n    return __async(this, null, function* () {\n      const payload = yield __super(\"load\").call(this).catch(reason => Promise.resolve(reason));\n\n      if (payload instanceof AbstractLoaderError) {\n        return Promise.reject(payload);\n      }\n\n      const {\n        data: rawData,\n        url\n      } = payload;\n      const upgradedData = tryUpgradeTreeToLatestSchema(rawData, \"cell\");\n      const coordinationValues = {\n        cellSetSelection: [],\n        cellSetColor: []\n      };\n\n      if (upgradedData && upgradedData.tree.length >= 1) {\n        const {\n          tree\n        } = upgradedData;\n        const newAutoSetSelectionParentName = tree[0].name;\n        const newAutoSetSelections = tree[0].children.map(node => [newAutoSetSelectionParentName, node.name]);\n        const newAutoSetColors = initializeCellSetColor(upgradedData, []);\n        coordinationValues.cellSetSelection = newAutoSetSelections;\n        coordinationValues.cellSetColor = newAutoSetColors;\n      }\n\n      return Promise.resolve(new LoaderResult(upgradedData, url, coordinationValues));\n    });\n  }\n\n}; // src/loaders/anndata-loaders/CellSetsZarrLoader.js\n\nimport { InternMap } from \"internmap\";\n\nfunction dataToCellSetsTree(data, options) {\n  const [cellNames, cellSets] = data;\n  const cellSetsTree = treeInitialize(SETS_DATATYPE_CELL);\n  cellSets.forEach((cellSetIds, j) => {\n    const name2 = options[j].groupName;\n    let levelZeroNode = {\n      name: name2,\n      children: []\n    };\n\n    if (cellSetIds.length > 0 && Array.isArray(cellSetIds[0])) {\n      const levelSets = new InternMap([], JSON.stringify);\n      cellNames.forEach((id, i) => {\n        const classes = cellSetIds.map(col => col[i]);\n\n        if (levelSets.has(classes)) {\n          levelSets.get(classes).push([id, null]);\n        } else {\n          levelSets.set(classes, [[id, null]]);\n        }\n      });\n      const levels = Array.from(levelSets.keys());\n\n      const getNextLevelNames = levelSuffixes => {\n        const nextLevelNames = Array.from(new Set(levelSuffixes.map(l => l[0])));\n        return nextLevelNames.sort((a, b) => a.localeCompare(b));\n      };\n\n      const getNode = (parentLevelPrefixes, currLevelName, childLevelSuffixes) => {\n        const isLeaf = childLevelSuffixes.length === 0;\n        const resultNode = {\n          name: currLevelName\n        };\n\n        if (isLeaf) {\n          resultNode.set = levelSets.get([...parentLevelPrefixes, currLevelName]);\n        } else {\n          const shouldBeLeaf = childLevelSuffixes.length === 1 && currLevelName === childLevelSuffixes[0][childLevelSuffixes[0].length - 1];\n\n          if (shouldBeLeaf) {\n            resultNode.set = levelSets.get([...parentLevelPrefixes, currLevelName, ...childLevelSuffixes[0]]);\n          } else {\n            const nextLevelNames = getNextLevelNames(childLevelSuffixes);\n            resultNode.children = nextLevelNames.map(nextLevelName => getNode([...parentLevelPrefixes, currLevelName], nextLevelName, childLevelSuffixes.filter(l => l[0] === nextLevelName).map(l => l.slice(1)).filter(v => v.length > 0)));\n          }\n        }\n\n        return resultNode;\n      };\n\n      const levelOneNodes = getNextLevelNames(levels).map(levelOneName => getNode([], levelOneName, levels.filter(l => l[0] === levelOneName).map(l => l.slice(1))));\n      levelZeroNode.children = levelOneNodes;\n    } else {\n      const uniqueCellSetIds = Array.from(new Set(cellSetIds)).sort();\n      const clusters = {};\n      uniqueCellSetIds.forEach(id => clusters[id] = {\n        name: id,\n        set: []\n      });\n      cellSetIds.forEach((id, i) => clusters[id].set.push([cellNames[i], null]));\n      Object.values(clusters).forEach(cluster => levelZeroNode = nodeAppendChild(levelZeroNode, cluster));\n    }\n\n    cellSetsTree.tree.push(levelZeroNode);\n  });\n  return cellSetsTree;\n}\n\nvar CellSetsZarrLoader = class extends AbstractTwoStepLoader {\n  loadCellSetIds() {\n    const {\n      options\n    } = this;\n    const cellSetZarrLocation = options.map(_ref66 => {\n      let {\n        setName\n      } = _ref66;\n      return setName;\n    });\n    return this.dataSource.loadObsVariables(cellSetZarrLocation);\n  }\n\n  load() {\n    return __async(this, null, function* () {\n      if (!this.cellSetsTree) {\n        const {\n          options\n        } = this;\n        this.cellSetsTree = Promise.all([this.dataSource.loadObsIndex(), this.loadCellSetIds()]).then(data => dataToCellSetsTree(data, options));\n      }\n\n      const cellSetsTree = yield this.cellSetsTree;\n      const coordinationValues = {};\n      const {\n        tree\n      } = cellSetsTree;\n      const newAutoSetSelectionParentName = tree[0].name;\n      const newAutoSetSelections = tree[0].children.map(node => [newAutoSetSelectionParentName, node.name]);\n      const newAutoSetColors = initializeCellSetColor(cellSetsTree, []);\n      coordinationValues.cellSetSelection = newAutoSetSelections;\n      coordinationValues.cellSetColor = newAutoSetColors;\n      return Promise.resolve(new LoaderResult(cellSetsTree, null, coordinationValues));\n    });\n  }\n\n}; // src/loaders/anndata-loaders/CellsZarrLoader.js\n\nvar CellsZarrLoader = class extends AbstractTwoStepLoader {\n  loadXy() {\n    const {\n      xy\n    } = this.options || {};\n\n    if (this.xy) {\n      return this.xy;\n    }\n\n    if (!this.xy && xy) {\n      this.xy = this.dataSource.loadNumeric(xy);\n      return this.xy;\n    }\n\n    this.xy = Promise.resolve(null);\n    return this.xy;\n  }\n\n  loadPoly() {\n    const {\n      poly\n    } = this.options || {};\n\n    if (this.poly) {\n      return this.poly;\n    }\n\n    if (!this.poly && poly) {\n      this.poly = this.dataSource.loadNumeric(poly);\n      return this.poly;\n    }\n\n    this.poly = Promise.resolve(null);\n    return this.poly;\n  }\n\n  loadMappings() {\n    const {\n      mappings\n    } = this.options || {};\n\n    if (this.mappings) {\n      return this.mappings;\n    }\n\n    if (!this.mappings && mappings) {\n      this.mappings = Promise.all(Object.keys(mappings).map(coordinationName => __async(this, null, function* () {\n        const {\n          key\n        } = mappings[coordinationName];\n        return {\n          coordinationName,\n          arr: yield this.dataSource.loadNumeric(key)\n        };\n      })));\n      return this.mappings;\n    }\n\n    this.mappings = Promise.resolve(null);\n    return this.mappings;\n  }\n\n  loadFactors() {\n    const {\n      factors\n    } = this.options || {};\n\n    if (factors) {\n      return this.dataSource.loadObsVariables(factors);\n    }\n\n    return Promise.resolve(null);\n  }\n\n  load() {\n    return __async(this, null, function* () {\n      if (!this.cells) {\n        this.cells = Promise.all([this.loadMappings(), this.loadXy(), this.loadPoly(), this.dataSource.loadObsIndex(), this.loadFactors()]).then(_ref67 => {\n          let [mappings, xy, poly, cellNames, factors] = _ref67;\n          const cells = {};\n          cellNames.forEach((name2, i) => {\n            cells[name2] = {};\n\n            if (mappings) {\n              mappings.forEach(_ref68 => {\n                let {\n                  coordinationName,\n                  arr\n                } = _ref68;\n\n                if (!cells[name2].mappings) {\n                  cells[name2].mappings = {};\n                }\n\n                const {\n                  dims\n                } = this.options.mappings[coordinationName];\n                cells[name2].mappings[coordinationName] = dims.map(dim => arr.data[i][dim]);\n              });\n            }\n\n            if (xy) {\n              cells[name2].xy = xy.data[i];\n            }\n\n            if (poly) {\n              cells[name2].poly = poly.data[i];\n            }\n\n            if (factors) {\n              const factorsObj = {};\n              factors.forEach((factor, j) => factorsObj[this.options.factors[j].split(\"/\").slice(-1)] = factor[i]);\n              cells[name2].factors = factorsObj;\n            }\n          });\n          return cells;\n        });\n      }\n\n      return Promise.resolve(new LoaderResult(yield this.cells, null));\n    });\n  }\n\n}; // src/loaders/anndata-loaders/MatrixZarrLoader.js\n\nimport { openArray as openArray3, slice as slice2 } from \"zarr\";\nimport { extent as extent4 } from \"d3-array\";\n\nvar normalize = arr => {\n  const [min, max2] = extent4(arr);\n  const ratio = 255 / (max2 - min);\n  const data = new Uint8Array(arr.map(i => Math.floor((i - min) * ratio)));\n  return {\n    data\n  };\n};\n\nvar concatenateColumnVectors = arr => {\n  const numCols = arr.length;\n  const numRows = arr[0].length;\n  const {\n    BYTES_PER_ELEMENT\n  } = arr[0];\n  const view = new DataView(new ArrayBuffer(numCols * numRows * BYTES_PER_ELEMENT));\n  const TypedArray = arr[0].constructor;\n  const dtype = TypedArray.name.replace(\"Array\", \"\");\n\n  for (let i = 0; i < numCols; i += 1) {\n    for (let j = 0; j < numRows; j += 1) {\n      view[`set${dtype}`](BYTES_PER_ELEMENT * (j * numCols + i), arr[i][j], true);\n    }\n  }\n\n  return new TypedArray(view.buffer);\n};\n\nvar MatrixZarrLoader2 = class extends AbstractTwoStepLoader {\n  loadFilteredGeneNames() {\n    return __async(this, null, function* () {\n      if (this.filteredGeneNames) {\n        return this.filteredGeneNames;\n      }\n\n      const {\n        geneFilter: geneFilterZarr\n      } = this.options;\n\n      const getFilterFn = () => __async(this, null, function* () {\n        if (!geneFilterZarr) return data => data;\n        const geneFilter = yield this.dataSource.getFlatArrDecompressed(geneFilterZarr);\n        return data => data.filter((_, j) => geneFilter[j]);\n      });\n\n      this.filteredGeneNames = Promise.all([this.dataSource.loadVarIndex(), getFilterFn()]).then(_ref69 => {\n        let [data, filter] = _ref69;\n        return filter(data);\n      });\n      return this.filteredGeneNames;\n    });\n  }\n\n  _getFilteredGenes(filterZarr) {\n    return __async(this, null, function* () {\n      const filter = yield this.dataSource.getFlatArrDecompressed(filterZarr);\n      const geneNames = yield this.loadFilteredGeneNames();\n      const genes = geneNames.filter((_, i) => filter[i]);\n      return genes;\n    });\n  }\n\n  _getGeneIndices(selection) {\n    return __async(this, null, function* () {\n      const geneNames = yield this.loadFilteredGeneNames();\n      return selection.map(gene => geneNames.indexOf(gene));\n    });\n  }\n\n  _getNumCells() {\n    return __async(this, null, function* () {\n      const cells = yield this.dataSource.loadObsIndex();\n      return cells.length;\n    });\n  }\n\n  _getNumGenes() {\n    return __async(this, null, function* () {\n      const genes = yield this.loadFilteredGeneNames();\n      return genes.length;\n    });\n  }\n\n  _openSparseArrays() {\n    return __async(this, null, function* () {\n      const {\n        options: {\n          matrix\n        }\n      } = this;\n      const {\n        store\n      } = this.dataSource;\n\n      if (this.sparseArrays) {\n        return this.sparseArrays;\n      }\n\n      this.sparseArrays = Promise.all([\"indptr\", \"indices\", \"data\"].map(name2 => openArray3({\n        store,\n        path: `${matrix}/${name2}`,\n        mode: \"r\"\n      })));\n      return this.sparseArrays;\n    });\n  }\n\n  _loadCSCGeneSelection(selection) {\n    return __async(this, null, function* () {\n      const indices = yield this._getGeneIndices(selection);\n      const [indptrArr, indexArr, cellXGeneArr] = yield this._openSparseArrays();\n      const numCells = yield this._getNumCells();\n      const {\n        data: cols\n      } = yield indptrArr.getRaw(null);\n      return Promise.all(indices.map(index => __async(this, null, function* () {\n        const startRowIndex = cols[index];\n        const endRowIndex = cols[index + 1];\n        const isColumnAllZeros = startRowIndex === endRowIndex;\n        const geneData = new Float32Array(numCells).fill(0);\n\n        if (isColumnAllZeros) {\n          return geneData;\n        }\n\n        const {\n          data: rowIndices\n        } = yield indexArr.get([slice2(startRowIndex, endRowIndex)]);\n        const {\n          data: cellXGeneData\n        } = yield cellXGeneArr.get([slice2(startRowIndex, endRowIndex)]);\n\n        for (let rowIndex = 0; rowIndex < rowIndices.length; rowIndex += 1) {\n          geneData[rowIndices[rowIndex]] = cellXGeneData[rowIndex];\n        }\n\n        return geneData;\n      })));\n    });\n  }\n\n  _loadCSRGeneSelection(selection) {\n    return __async(this, null, function* () {\n      const indices = yield this._getGeneIndices(selection);\n      const numGenes = yield this._getNumGenes();\n      const numCells = yield this._getNumCells();\n      const cellXGene = yield this._loadCSRSparseCellXGene();\n      return indices.map(index => {\n        const geneData = new Float32Array(numCells).fill(0);\n\n        for (let i = 0; i < numCells; i += 1) {\n          geneData[i] = cellXGene[i * numGenes + index];\n        }\n\n        return geneData;\n      });\n    });\n  }\n\n  _loadCSRSparseCellXGene() {\n    return __async(this, null, function* () {\n      if (this._sparseMatrix) {\n        return this._sparseMatrix;\n      }\n\n      this._sparseMatrix = this._openSparseArrays().then(sparseArrays => __async(this, null, function* () {\n        const {\n          options: {\n            matrix\n          }\n        } = this;\n        const {\n          shape\n        } = yield this.dataSource.getJson(`${matrix}/.zattrs`);\n        const [rows, cols, cellXGene] = yield Promise.all(sparseArrays.map(arr => __async(this, null, function* () {\n          const {\n            data\n          } = yield arr.getRaw(null);\n          return data;\n        })));\n        const cellXGeneMatrix = new Float32Array(shape[0] * shape[1]).fill(0);\n        let row = 0;\n        rows.forEach((_, index) => {\n          const rowStart = rows[index];\n          const rowEnd = rows[index + 1];\n\n          for (let i = rowStart; i < rowEnd; i += 1) {\n            const val = cellXGene[i];\n            const col = cols[i];\n            cellXGeneMatrix[row * shape[1] + col] = val;\n          }\n\n          row += 1;\n        });\n        return cellXGeneMatrix;\n      }));\n      return this._sparseMatrix;\n    });\n  }\n\n  _loadCSCSparseCellXGene() {\n    return __async(this, null, function* () {\n      if (this._sparseMatrix) {\n        return this._sparseMatrix;\n      }\n\n      this._sparseMatrix = this._openSparseArrays().then(sparseArrays => __async(this, null, function* () {\n        const {\n          options: {\n            matrix\n          }\n        } = this;\n        const {\n          shape\n        } = yield this.dataSource.getJson(`${matrix}/.zattrs`);\n        const [cols, rows, cellXGene] = yield Promise.all(sparseArrays.map(arr => __async(this, null, function* () {\n          const {\n            data\n          } = yield arr.getRaw(null);\n          return data;\n        })));\n        const cellXGeneMatrix = new Float32Array(shape[0] * shape[1]).fill(0);\n        let col = 0;\n        cols.forEach((_, index) => {\n          const colStart = cols[index];\n          const colEnd = cols[index + 1];\n\n          for (let i = colStart; i < colEnd; i += 1) {\n            const val = cellXGene[i];\n            const row = rows[i];\n            cellXGeneMatrix[row * shape[1] + col] = val;\n          }\n\n          col += 1;\n        });\n        return cellXGeneMatrix;\n      }));\n      return this._sparseMatrix;\n    });\n  }\n\n  loadCellXGene() {\n    return __async(this, null, function* () {\n      const {\n        store\n      } = this.dataSource;\n\n      if (this.cellXGene) {\n        return this.cellXGene;\n      }\n\n      const {\n        options: {\n          matrix,\n          matrixGeneFilter\n        }\n      } = this;\n\n      if (!this._matrixZattrs) {\n        this._matrixZattrs = yield this.dataSource.getJson(`${matrix}/.zattrs`);\n      }\n\n      const encodingType = this._matrixZattrs[\"encoding-type\"];\n\n      if (!matrixGeneFilter) {\n        if (encodingType === \"csr_matrix\") {\n          this.cellXGene = this._loadCSRSparseCellXGene().then(data => normalize(data));\n        } else if (encodingType === \"csc_matrix\") {\n          this.cellXGene = this._loadCSCSparseCellXGene().then(data => normalize(data));\n        } else {\n          if (!this.arr) {\n            this.arr = openArray3({\n              store,\n              path: matrix,\n              mode: \"r\"\n            });\n          }\n\n          this.cellXGene = this.arr.then(z => z.getRaw(null).then(_ref70 => {\n            let {\n              data\n            } = _ref70;\n            return normalize(data);\n          }));\n        }\n      } else if (encodingType === \"csr_matrix\") {\n        this.cellXGene = this._loadCSRSparseCellXGene().then(cellXGene => __async(this, null, function* () {\n          const filteredGenes = yield this._getFilteredGenes(matrixGeneFilter);\n          const numGenesFiltered = filteredGenes.length;\n          const geneNames = yield this.loadFilteredGeneNames();\n          const numGenes = geneNames.length;\n          const numCells = yield this._getNumCells();\n          const cellXGeneMatrixFiltered = new Float32Array(numCells * numGenesFiltered).fill(0);\n\n          for (let i = 0; i < numGenesFiltered; i += 1) {\n            const index = geneNames.indexOf(filteredGenes[i]);\n\n            for (let j = 0; j < numCells; j += 1) {\n              cellXGeneMatrixFiltered[j * numGenesFiltered + i] = cellXGene[j * numGenes + index];\n            }\n          }\n\n          return normalize(cellXGeneMatrixFiltered);\n        }));\n      } else {\n        const genes = yield this._getFilteredGenes(matrixGeneFilter);\n        this.cellXGene = this.loadGeneSelection({\n          selection: genes,\n          shouldNormalize: false\n        }).then(_ref71 => {\n          let {\n            data\n          } = _ref71;\n          return normalize(concatenateColumnVectors(data));\n        });\n      }\n\n      return this.cellXGene;\n    });\n  }\n\n  loadGeneSelection(_0) {\n    return __async(this, arguments, function* (_ref72) {\n      let {\n        selection,\n        shouldNormalize = true\n      } = _ref72;\n      const {\n        options: {\n          matrix\n        }\n      } = this;\n      const {\n        store\n      } = this.dataSource;\n\n      if (!this._matrixZattrs) {\n        this._matrixZattrs = yield this.dataSource.getJson(`${matrix}/.zattrs`);\n      }\n\n      const encodingType = this._matrixZattrs[\"encoding-type\"];\n      let genes;\n\n      if (encodingType === \"csc_matrix\") {\n        genes = yield this._loadCSCGeneSelection(selection);\n      } else if (encodingType === \"csr_matrix\") {\n        genes = yield this._loadCSRGeneSelection(selection);\n      } else {\n        if (!this.arr) {\n          this.arr = openArray3({\n            store,\n            path: matrix,\n            mode: \"r\"\n          });\n        }\n\n        const indices = yield this._getGeneIndices(selection);\n        genes = yield Promise.all(indices.map(index => this.arr.then(z => z.get([null, index])).then(_ref73 => {\n          let {\n            data\n          } = _ref73;\n          return data;\n        })));\n      }\n\n      return {\n        data: genes.map(i => shouldNormalize ? normalize(i).data : i),\n        url: null\n      };\n    });\n  }\n\n  loadAttrs() {\n    return Promise.all([this.dataSource.loadObsIndex(), this.loadFilteredGeneNames()]).then(d => {\n      const [cellNames, geneNames] = d;\n      const attrs = {\n        rows: cellNames,\n        cols: geneNames\n      };\n      return {\n        data: attrs,\n        url: null\n      };\n    });\n  }\n\n  load() {\n    return Promise.all([this.loadAttrs(), this.loadCellXGene()]).then(d => __async(this, null, function* () {\n      const [{\n        data: attrs\n      }, cellXGene] = d;\n      const {\n        options: {\n          matrixGeneFilter: matrixGeneFilterZarr\n        }\n      } = this;\n\n      if (matrixGeneFilterZarr) {\n        const matrixGeneFilter = yield this.dataSource.getFlatArrDecompressed(matrixGeneFilterZarr);\n        attrs.cols = attrs.cols.filter((_, i) => matrixGeneFilter[i]);\n      }\n\n      return Promise.resolve(new LoaderResult([attrs, cellXGene], null));\n    }));\n  }\n\n}; // src/loaders/anndata-loaders/index.js\n\nvar anndata_loaders_default = {\n  CellSetsZarrLoader,\n  CellsZarrLoader,\n  MatrixZarrLoader: MatrixZarrLoader2\n}; // src/loaders/GenomicProfilesZarrLoader.js\n\nvar GenomicProfilesZarrLoader = class extends AbstractTwoStepLoader {\n  loadAttrs() {\n    if (this.attrs) {\n      return this.attrs;\n    }\n\n    this.attrs = this.dataSource.getJson(\".zattrs\");\n    return this.attrs;\n  }\n\n  load() {\n    const {\n      url\n    } = this;\n    return this.loadAttrs().then(attrs => Promise.resolve(new LoaderResult(attrs, url)));\n  }\n\n}; // src/loaders/data-sources/AnnDataSource.js\n\nimport { openArray as openArray4 } from \"zarr\";\nimport range7 from \"lodash/range\"; // src/loaders/data-sources/ZarrDataSource.js\n\nimport { HTTPStore as HTTPStore2, KeyError as KeyError2 } from \"zarr\";\nvar ZarrDataSource = class {\n  constructor(_ref74) {\n    let {\n      url,\n      requestInit\n    } = _ref74;\n    const supportedMethods = [\"GET\"];\n    this.store = new HTTPStore2(url, {\n      supportedMethods,\n      fetchOptions: requestInit\n    });\n  }\n\n  getJson(key) {\n    return __async(this, null, function* () {\n      try {\n        const buf = yield this.store.getItem(key);\n        const text = new TextDecoder(\"utf-8\").decode(buf);\n        return JSON.parse(text);\n      } catch (err) {\n        if (err instanceof KeyError2) {\n          return {};\n        }\n\n        throw err;\n      }\n    });\n  }\n\n}; // src/loaders/data-sources/AnnDataSource.js\n\nvar readFloat32FromUint8 = bytes => {\n  if (bytes.length !== 4) {\n    throw new Error(\"readFloat32 only takes in length 4 byte buffers\");\n  }\n\n  return new Int32Array(bytes.buffer)[0];\n};\n\nvar HEADER_LENGTH = 4;\n\nfunction parseVlenUtf8(buffer) {\n  const decoder = new TextDecoder();\n  let data = 0;\n  const dataEnd = data + buffer.length;\n  const length = readFloat32FromUint8(buffer.slice(data, HEADER_LENGTH));\n\n  if (buffer.length < HEADER_LENGTH) {\n    throw new Error(\"corrupt buffer, missing or truncated header\");\n  }\n\n  data += HEADER_LENGTH;\n  const output = new Array(length);\n\n  for (let i = 0; i < length; i += 1) {\n    if (data + 4 > dataEnd) {\n      throw new Error(\"corrupt buffer, data seem truncated\");\n    }\n\n    const l = readFloat32FromUint8(buffer.slice(data, data + 4));\n    data += 4;\n\n    if (data + l > dataEnd) {\n      throw new Error(\"corrupt buffer, data seem truncated\");\n    }\n\n    output[i] = decoder.decode(buffer.slice(data, data + l));\n    data += l;\n  }\n\n  return output;\n}\n\nvar AnnDataSource = class extends ZarrDataSource {\n  constructor() {\n    super(...arguments);\n    this.obsPromises = new Map();\n  }\n\n  loadObsVariables(obsPaths) {\n    const obsPromises = obsPaths.map(obsPath => {\n      const getObsCol = obsCol => {\n        if (!this.obsPromises.has(obsCol)) {\n          const obsPromise = this._loadObsVariable(obsCol).catch(err => {\n            this.obsPromises.delete(obsCol);\n            throw err;\n          });\n\n          this.obsPromises.set(obsCol, obsPromise);\n        }\n\n        return this.obsPromises.get(obsCol);\n      };\n\n      if (Array.isArray(obsPath)) {\n        return Promise.resolve(Promise.all(obsPath.map(getObsCol)));\n      }\n\n      return getObsCol(obsPath);\n    });\n    return Promise.all(obsPromises);\n  }\n\n  _loadObsVariable(obs) {\n    return __async(this, null, function* () {\n      const {\n        store\n      } = this;\n      const {\n        categories\n      } = yield this.getJson(`${obs}/.zattrs`);\n      let categoriesValues;\n\n      if (categories) {\n        const {\n          dtype\n        } = yield this.getJson(`/obs/${categories}/.zarray`);\n\n        if (dtype === \"|O\") {\n          categoriesValues = yield this.getFlatArrDecompressed(`/obs/${categories}`);\n        }\n      }\n\n      const obsArr = yield openArray4({\n        store,\n        path: obs,\n        mode: \"r\"\n      });\n      const obsValues = yield obsArr.get();\n      const {\n        data\n      } = obsValues;\n      const mappedObsValues = Array.from(data).map(i => !categoriesValues ? String(i) : categoriesValues[i]);\n      return mappedObsValues;\n    });\n  }\n\n  loadNumeric(path) {\n    const {\n      store\n    } = this;\n    return openArray4({\n      store,\n      path,\n      mode: \"r\"\n    }).then(arr => arr.get());\n  }\n\n  getFlatArrDecompressed(path) {\n    const {\n      store\n    } = this;\n    return openArray4({\n      store,\n      path,\n      mode: \"r\"\n    }).then(z => __async(this, null, function* () {\n      let data;\n\n      const parseAndMergeTextBytes = dbytes => {\n        const text = parseVlenUtf8(dbytes);\n\n        if (!data) {\n          data = text;\n        } else {\n          data = data.concat(text);\n        }\n      };\n\n      const mergeBytes = dbytes => {\n        if (!data) {\n          data = dbytes;\n        } else {\n          const tmp = new Uint8Array(dbytes.buffer.byteLength + data.buffer.byteLength);\n          tmp.set(new Uint8Array(data.buffer), 0);\n          tmp.set(dbytes, data.buffer.byteLength);\n          data = tmp;\n        }\n      };\n\n      const numRequests = Math.ceil(z.meta.shape[0] / z.meta.chunks[0]);\n      const requests = range7(numRequests).map(item => __async(this, null, function* () {\n        return store.getItem(`${z.keyPrefix}${String(item)}`).then(buf => z.compressor.then(compressor => compressor.decode(buf)));\n      }));\n      const dbytesArr = yield Promise.all(requests);\n      dbytesArr.forEach(dbytes => {\n        if (Array.isArray(z.meta.filters) && z.meta.filters[0].id === \"vlen-utf8\") {\n          parseAndMergeTextBytes(dbytes);\n        } else {\n          mergeBytes(dbytes);\n        }\n      });\n      const {\n        meta: {\n          shape: [length]\n        }\n      } = z;\n      return data.slice(0, length);\n    }));\n  }\n\n  loadObsIndex() {\n    if (this.obsIndex) {\n      return this.obsIndex;\n    }\n\n    this.obsIndex = this.getJson(\"obs/.zattrs\").then(_ref75 => {\n      let {\n        _index\n      } = _ref75;\n      return this.getFlatArrDecompressed(`/obs/${_index}`);\n    });\n    return this.obsIndex;\n  }\n\n  loadVarIndex() {\n    if (this.varIndex) {\n      return this.varIndex;\n    }\n\n    this.varIndex = this.getJson(\"var/.zattrs\").then(_ref76 => {\n      let {\n        _index\n      } = _ref76;\n      return this.getFlatArrDecompressed(`/var/${_index}`);\n    });\n    return this.varIndex;\n  }\n\n}; // src/loaders/errors/DataSourceFetchError.js\n\nvar DataSourceFetchError = class extends AbstractLoaderError {\n  constructor(source, url, headers) {\n    super(`${source} Error HTTP Status fetching from ${url}`);\n    this.source = source;\n    this.url = url;\n    this.headers = headers;\n  }\n\n  warnInConsole() {\n    const {\n      source,\n      url,\n      headers\n    } = this;\n    console.warn(`${source} failed to fetch from ${url} with headers ${headers}`);\n  }\n\n}; // src/loaders/data-sources/JsonSource.js\n\nvar JsonSource = class {\n  constructor(_ref77) {\n    let {\n      url,\n      requestInit\n    } = _ref77;\n    this.url = url;\n    this.requestInit = requestInit;\n  }\n\n  get data() {\n    if (this._data) return this._data;\n    this._data = fetch(this.url, this.requestInit).then(response => {\n      if (!response.ok) {\n        return Promise.reject(new DataSourceFetchError(\"JsonSource\", this.url, response.headers));\n      }\n\n      return response.json();\n    }).catch(() => Promise.reject(new DataSourceFetchError(\"JsonSource\", this.url, {})));\n    return this._data;\n  }\n\n}; // src/loaders/types.js\n\nvar ANNDATA = \"anndata\";\nvar fileTypeToLoaderAndSource = {\n  \"expression-matrix.zarr\": [ZarrDataSource, MatrixZarrLoader],\n  \"clusters.json\": [JsonSource, ClustersJsonAsMatrixZarrLoader],\n  \"genes.json\": [JsonSource, GenesJsonAsMatrixZarrLoader],\n  \"cells.json\": [JsonSource, JsonLoader],\n  \"molecules.json\": [JsonSource, JsonLoader],\n  \"neighborhoods.json\": [JsonSource, JsonLoader],\n  \"raster.json\": [JsonSource, RasterLoader],\n  \"raster.ome-zarr\": [ZarrDataSource, OmeZarrLoader],\n  \"cell-sets.json\": [JsonSource, CellSetsJsonLoader],\n  [`${ANNDATA}-cell-sets.zarr`]: [AnnDataSource, anndata_loaders_default.CellSetsZarrLoader],\n  [`${ANNDATA}-cells.zarr`]: [AnnDataSource, anndata_loaders_default.CellsZarrLoader],\n  [`${ANNDATA}-expression-matrix.zarr`]: [AnnDataSource, anndata_loaders_default.MatrixZarrLoader],\n  \"genomic-profiles.zarr\": [ZarrDataSource, GenomicProfilesZarrLoader]\n};\n\nfunction getSourceAndLoaderFromFileType(type16) {\n  return fileTypeToLoaderAndSource[type16] || [JsonSource, JsonLoader];\n} // src/app/vitessce-grid-utils.js\n\n\nfunction getNumRows(layout) {\n  let max2 = 0;\n  let bottomY;\n\n  for (let i = 0, len = layout.length; i < len; i++) {\n    bottomY = layout[i].y + layout[i].h;\n    if (bottomY > max2) max2 = bottomY;\n  }\n\n  return max2;\n}\n\nfunction getRowHeight(containerHeight, numRows, margin2, padding2) {\n  const effectiveContainerHeight = containerHeight - 2 * padding2 - (numRows - 1) * margin2;\n  return effectiveContainerHeight / numRows;\n}\n\nfunction useRowHeight(config, initialRowHeight, height, margin2, padding2) {\n  const [containerHeight, setContainerHeight] = useState9(height);\n  const [rowHeight, setRowHeight] = useState9(initialRowHeight);\n  const containerRef = useRef6();\n  useEffect8(() => {\n    const numRows = getNumRows(config.layout);\n    const newRowHeight = getRowHeight(containerHeight, numRows, margin2, padding2);\n    setRowHeight(newRowHeight);\n  }, [containerHeight, config, margin2, padding2]);\n  useEffect8(() => {\n    if (height !== null && height !== void 0) {\n      setContainerHeight(height);\n    }\n  }, [height]);\n  useEffect8(() => {\n    if (height !== null && height !== void 0) {\n      return () => {};\n    }\n\n    function onWindowResize() {\n      if (!containerRef.current) return;\n      const containerRect = containerRef.current.getBoundingClientRect();\n      setContainerHeight(containerRect.height);\n    }\n\n    window.addEventListener(\"resize\", onWindowResize);\n    onWindowResize();\n    return () => {\n      window.removeEventListener(\"resize\", onWindowResize);\n    };\n  }, [containerRef, height]);\n  return [rowHeight, containerRef];\n}\n\nfunction createLoaders(datasets, configDescription) {\n  const result = {};\n  const dataSources = {};\n  datasets.forEach(dataset => {\n    const datasetLoaders = {\n      name: dataset.name,\n      description: dataset.description || configDescription,\n      loaders: {}\n    };\n    dataset.files.forEach(file => {\n      const [DataSourceClass, LoaderClass] = getSourceAndLoaderFromFileType(file.fileType);\n      const {\n        url,\n        options,\n        requestInit\n      } = file;\n      const fileId = url || JSON.stringify(options);\n\n      if (!(fileId in dataSources)) {\n        dataSources[fileId] = new DataSourceClass({\n          url,\n          requestInit\n        });\n      }\n\n      const loader = new LoaderClass(dataSources[fileId], file);\n      datasetLoaders.loaders[file.type] = loader;\n    });\n    result[dataset.uid] = datasetLoaders;\n  });\n  return result;\n} // src/app/VitessceGrid.js\n\n\nvar padding = 10;\nvar margin = 5;\n\nfunction VitessceGrid(props) {\n  const {\n    rowHeight: initialRowHeight,\n    config,\n    getComponent: getComponent2,\n    theme,\n    height\n  } = props;\n  const [rowHeight, containerRef] = useRowHeight(config, initialRowHeight, height, margin, padding);\n  const onResize = useEmitGridResize();\n  useEffect9(() => {\n    onResize();\n  }, [rowHeight, onResize]);\n  const viewConfigStoreApi = useViewConfigStoreApi();\n  const setViewConfig = useSetViewConfig(viewConfigStoreApi);\n  const setLoaders = useSetLoaders();\n  const removeComponent = useRemoveComponent();\n  const changeLayout = useChangeLayout();\n  const layout = useLayout();\n  useEffect9(() => {\n    if (config) {\n      setViewConfig(config);\n      const loaders = createLoaders(config.datasets, config.description);\n      setLoaders(loaders);\n    } else {\n      setLoaders({});\n    }\n  }, [config, setViewConfig, setLoaders]);\n  return /* @__PURE__ */React30.createElement(\"div\", {\n    ref: containerRef,\n    className: `vitessce-container vitessce-theme-${theme}`\n  }, layout && /* @__PURE__ */React30.createElement(VitessceGridLayout, {\n    layout,\n    height,\n    rowHeight,\n    theme,\n    getComponent: getComponent2,\n    draggableHandle: \".title\",\n    margin,\n    padding,\n    onRemoveComponent: removeComponent,\n    onLayoutChange: changeLayout,\n    reactGridLayoutProps: {\n      onResize,\n      onResizeStop: onResize\n    }\n  }));\n} // src/app/app.js\n\n\nimport React75, { useEffect as useEffect26, useRef as useRef11, useState as useState21 } from \"react\"; // src/app/api.js\n\nvar urlPrefix = \"https://s3.amazonaws.com/vitessce-data/0.0.31/master_release\";\n\nfunction makeLayerNameToConfig(datasetPrefix) {\n  return name2 => ({\n    name: name2,\n    type: name2.toUpperCase(),\n    fileType: `${name2}.json`,\n    url: `${urlPrefix}/${datasetPrefix}/${datasetPrefix}.${name2}.json`\n  });\n}\n\nvar linnarssonLayerNames = [\"cells\", \"cell-sets\", \"raster\", \"molecules\", \"neighborhoods\"];\nvar linnarssonDescription = \"Spatial organization of the somatosensory cortex revealed by cyclic smFISH\";\nvar linnarssonBase = {\n  description: linnarssonDescription,\n  layers: [...linnarssonLayerNames.map(makeLayerNameToConfig(\"linnarsson\")), __spreadProps(__spreadValues({}, makeLayerNameToConfig(\"linnarsson\")(\"clusters\")), {\n    type: \"EXPRESSION-MATRIX\"\n  })]\n};\nvar linnarssonBaseNoClusters = {\n  description: linnarssonDescription,\n  layers: linnarssonLayerNames.filter(name2 => name2 !== \"clusters\").map(makeLayerNameToConfig(\"linnarsson\"))\n};\nvar driesDescription = \"Giotto, a pipeline for integrative analysis and visualization of single-cell spatial transcriptomic data\";\nvar driesBase = {\n  description: driesDescription,\n  layers: [\"cells\", \"cell-sets\"].map(makeLayerNameToConfig(\"dries\"))\n};\nvar wangDescription = \"Multiplexed imaging of high-density libraries of RNAs with MERFISH and expansion microscopy\";\nvar wangBase = {\n  description: wangDescription,\n  layers: [...[\"cells\", \"molecules\"].map(makeLayerNameToConfig(\"wang\")), __spreadProps(__spreadValues({}, makeLayerNameToConfig(\"wang\")(\"genes\")), {\n    name: \"expression-matrix\",\n    type: \"EXPRESSION-MATRIX\"\n  })]\n};\nvar vanderbiltDescription = \"High Bit Depth (uint16) Multiplex Immunofluorescence Imaging\";\nvar vanderbiltBase = {\n  description: vanderbiltDescription,\n  layers: [\"raster\"].map(makeLayerNameToConfig(\"spraggins\"))\n};\nvar configs = {\n  \"just-scatter\": {\n    version: \"0.1.0\",\n    public: false,\n    layers: [{\n      name: \"cells\",\n      type: \"CELLS\",\n      fileType: \"cells.json\",\n      url: `${urlPrefix}/linnarsson/linnarsson.cells.json`,\n      requestInit: {\n        method: \"GET\",\n        headers: {\n          \"x-foo\": \"FAKE\"\n        },\n        mode: \"cors\",\n        credentials: \"omit\",\n        cache: \"no-store\",\n        redirect: \"error\",\n        referrer: \"FAKE\",\n        integrity: \"FAKE\"\n      }\n    }],\n    name: \"Linnarsson, just scatterplot\",\n    staticLayout: [{\n      component: \"scatterplot\",\n      props: {\n        mapping: \"t-SNE\",\n        view: {\n          zoom: 0.75,\n          target: [0, 0, 0]\n        }\n      },\n      x: 0,\n      y: 0,\n      w: 12,\n      h: 2\n    }]\n  },\n  \"just-scatter-expression\": {\n    version: \"0.1.0\",\n    public: false,\n    layers: [{\n      name: \"cells\",\n      type: \"CELLS\",\n      url: \"https://s3.amazonaws.com/vitessce-data/0.0.20/master_release/linnarsson/linnarsson.cells.json\"\n    }, {\n      name: \"genes\",\n      type: \"GENES\",\n      url: \"https://s3.amazonaws.com/vitessce-data/0.0.20/master_release/linnarsson/linnarsson.genes.json\"\n    }],\n    name: \"Linnarsson, just scatterplot and expression\",\n    staticLayout: [{\n      component: \"scatterplot\",\n      props: {\n        mapping: \"t-SNE\",\n        view: {\n          zoom: 0.75,\n          target: [0, 0, 0]\n        }\n      },\n      x: 0,\n      y: 0,\n      w: 8,\n      h: 2\n    }, {\n      component: \"genes\",\n      x: 8,\n      y: 2,\n      w: 4,\n      h: 2\n    }]\n  },\n  \"linnarsson-2018\": {\n    name: \"Linnarsson\",\n    version: \"1.0.0\",\n    description: linnarssonDescription,\n    public: true,\n    datasets: [{\n      uid: \"linnarsson-2018\",\n      name: \"Linnarsson 2018\",\n      description: `Linnarsson: ${linnarssonDescription}`,\n      files: linnarssonBase.layers.map(file => ({\n        type: file.type.toLowerCase(),\n        fileType: file.fileType,\n        url: file.url\n      }))\n    }],\n    initStrategy: \"auto\",\n    coordinationSpace: {\n      embeddingZoom: {\n        PCA: 0,\n        TSNE: 0.75\n      },\n      embeddingType: {\n        PCA: \"PCA\",\n        TSNE: \"t-SNE\"\n      },\n      spatialZoom: {\n        A: -5.5\n      },\n      spatialTargetX: {\n        A: 16e3\n      },\n      spatialTargetY: {\n        A: 2e4\n      }\n    },\n    layout: [{\n      component: \"description\",\n      x: 0,\n      y: 0,\n      w: 2,\n      h: 1\n    }, {\n      component: \"layerController\",\n      x: 0,\n      y: 1,\n      w: 2,\n      h: 4\n    }, {\n      component: \"status\",\n      x: 0,\n      y: 5,\n      w: 2,\n      h: 1\n    }, {\n      component: \"spatial\",\n      coordinationScopes: {\n        spatialZoom: \"A\",\n        spatialTargetX: \"A\",\n        spatialTargetY: \"A\"\n      },\n      x: 2,\n      y: 0,\n      w: 4,\n      h: 4\n    }, {\n      component: \"genes\",\n      x: 9,\n      y: 0,\n      w: 3,\n      h: 2\n    }, {\n      component: \"cellSets\",\n      x: 9,\n      y: 3,\n      w: 3,\n      h: 2\n    }, {\n      component: \"heatmap\",\n      props: {\n        transpose: true\n      },\n      x: 2,\n      y: 4,\n      w: 5,\n      h: 2\n    }, {\n      component: \"cellSetExpression\",\n      x: 7,\n      y: 4,\n      w: 3,\n      h: 2\n    }, {\n      component: \"expressionHistogram\",\n      x: 10,\n      y: 4,\n      w: 2,\n      h: 2\n    }, {\n      component: \"scatterplot\",\n      coordinationScopes: {\n        embeddingType: \"PCA\",\n        embeddingZoom: \"PCA\"\n      },\n      x: 6,\n      y: 0,\n      w: 3,\n      h: 2\n    }, {\n      component: \"scatterplot\",\n      coordinationScopes: {\n        embeddingType: \"TSNE\",\n        embeddingZoom: \"TSNE\"\n      },\n      x: 6,\n      y: 2,\n      w: 3,\n      h: 2\n    }]\n  },\n  \"linnarsson-2018-two-spatial\": __spreadProps(__spreadValues({}, linnarssonBase), {\n    version: \"0.1.0\",\n    name: \"Linnarsson (two spatial)\",\n    staticLayout: [{\n      component: \"spatial\",\n      props: {\n        view: {\n          zoom: -8,\n          target: [18e3, 18e3, 0]\n        }\n      },\n      x: 0,\n      y: 0,\n      w: 5,\n      h: 2\n    }, {\n      component: \"scatterplot\",\n      props: {\n        mapping: \"t-SNE\"\n      },\n      x: 0,\n      y: 2,\n      w: 5,\n      h: 2\n    }, {\n      component: \"spatial\",\n      props: {\n        view: {\n          zoom: -6,\n          target: [18e3, 18e3, 0]\n        }\n      },\n      x: 5,\n      y: 0,\n      w: 5,\n      h: 2\n    }, {\n      component: \"scatterplot\",\n      props: {\n        mapping: \"PCA\"\n      },\n      x: 5,\n      y: 2,\n      w: 5,\n      h: 2\n    }, {\n      component: \"genes\",\n      x: 10,\n      y: 2,\n      w: 2,\n      h: 2\n    }, {\n      component: \"heatmap\",\n      x: 0,\n      y: 4,\n      w: 12\n    }]\n  }),\n  \"linnarsson-2018-just-spatial\": __spreadProps(__spreadValues({}, linnarssonBaseNoClusters), {\n    version: \"0.1.0\",\n    name: \"Linnarsson (just spatial)\",\n    staticLayout: [{\n      component: \"spatial\",\n      props: {\n        view: {\n          zoom: -6.5,\n          target: [18e3, 18e3, 0]\n        }\n      },\n      x: 0,\n      y: 0,\n      w: 10,\n      h: 2\n    }, {\n      component: \"genes\",\n      x: 10,\n      y: 1,\n      w: 2,\n      h: 1\n    }]\n  }),\n  \"linnarsson-2018-static\": __spreadProps(__spreadValues({}, linnarssonBase), {\n    version: \"0.1.0\",\n    name: \"Linnarsson (static layout)\",\n    staticLayout: [{\n      component: \"description\",\n      props: {\n        description: `Linnarsson (static layout): ${linnarssonDescription}`\n      },\n      x: 0,\n      y: 0,\n      w: 3,\n      h: 1\n    }, {\n      component: \"scatterplot\",\n      props: {\n        mapping: \"t-SNE\"\n      },\n      x: 0,\n      y: 2,\n      w: 3,\n      h: 2\n    }, {\n      component: \"spatial\",\n      props: {\n        view: {\n          zoom: -6.5,\n          target: [18e3, 18e3, 0]\n        }\n      },\n      x: 3,\n      y: 0,\n      w: 6,\n      h: 4\n    }, {\n      component: \"genes\",\n      x: 9,\n      y: 2,\n      w: 3,\n      h: 2\n    }, {\n      component: \"heatmap\",\n      x: 0,\n      y: 4,\n      w: 12,\n      h: 1\n    }]\n  }),\n  \"linnarsson-2018-dozen\": __spreadProps(__spreadValues({}, linnarssonBase), {\n    version: \"0.1.0\",\n    name: \"Linnarsson (static layout, redundant components for performance testing)\",\n    staticLayout: [{\n      component: \"spatial\",\n      props: {\n        view: {\n          zoom: -6.5,\n          target: [18e3, 18e3, 0]\n        }\n      },\n      x: 0,\n      y: 0,\n      w: 4,\n      h: 1\n    }, {\n      component: \"spatial\",\n      props: {\n        view: {\n          zoom: -6.5,\n          target: [18e3, 18e3, 0]\n        }\n      },\n      x: 0,\n      y: 1,\n      w: 4,\n      h: 1\n    }, {\n      component: \"spatial\",\n      props: {\n        view: {\n          zoom: -6.5,\n          target: [18e3, 18e3, 0]\n        }\n      },\n      x: 4,\n      y: 0,\n      w: 4,\n      h: 1\n    }, {\n      component: \"spatial\",\n      props: {\n        view: {\n          zoom: -6.5,\n          target: [18e3, 18e3, 0]\n        }\n      },\n      x: 4,\n      y: 1,\n      w: 4,\n      h: 1\n    }, {\n      component: \"scatterplot\",\n      props: {\n        mapping: \"t-SNE\"\n      },\n      x: 0,\n      y: 2,\n      w: 4,\n      h: 1\n    }, {\n      component: \"scatterplot\",\n      props: {\n        mapping: \"t-SNE\"\n      },\n      x: 0,\n      y: 3,\n      w: 4,\n      h: 1\n    }, {\n      component: \"scatterplot\",\n      props: {\n        mapping: \"t-SNE\"\n      },\n      x: 0,\n      y: 4,\n      w: 4,\n      h: 1\n    }, {\n      component: \"scatterplot\",\n      props: {\n        mapping: \"t-SNE\"\n      },\n      x: 0,\n      y: 5,\n      w: 4,\n      h: 1\n    }, {\n      component: \"scatterplot\",\n      props: {\n        mapping: \"PCA\"\n      },\n      x: 4,\n      y: 2,\n      w: 4,\n      h: 1\n    }, {\n      component: \"scatterplot\",\n      props: {\n        mapping: \"PCA\"\n      },\n      x: 4,\n      y: 3,\n      w: 4,\n      h: 1\n    }, {\n      component: \"scatterplot\",\n      props: {\n        mapping: \"PCA\"\n      },\n      x: 4,\n      y: 4,\n      w: 4,\n      h: 1\n    }, {\n      component: \"scatterplot\",\n      props: {\n        mapping: \"PCA\"\n      },\n      x: 4,\n      y: 5,\n      w: 4,\n      h: 1\n    }, {\n      component: \"genes\",\n      x: 8,\n      y: 2,\n      w: 4,\n      h: 2\n    }, {\n      component: \"heatmap\",\n      x: 8,\n      y: 4,\n      w: 4,\n      h: 2\n    }]\n  }),\n  \"dries-2019\": {\n    name: \"Dries\",\n    version: \"1.0.0\",\n    description: driesDescription,\n    public: true,\n    datasets: [{\n      uid: \"dries-2019\",\n      name: \"Dries 2019\",\n      files: driesBase.layers.map(file => ({\n        type: file.type.toLowerCase(),\n        fileType: file.fileType,\n        url: file.url\n      }))\n    }],\n    initStrategy: \"auto\",\n    coordinationSpace: {\n      embeddingType: {\n        TSNE: \"t-SNE\",\n        UMAP: \"UMAP\"\n      },\n      embeddingCellSetPolygonsVisible: {\n        A: false\n      },\n      embeddingCellSetLabelsVisible: {\n        A: true\n      },\n      embeddingCellSetLabelSize: {\n        A: 16\n      },\n      embeddingCellRadius: {\n        A: 1\n      },\n      embeddingZoom: {\n        TSNE: 3,\n        UMAP: 3\n      },\n      spatialZoom: {\n        A: -4.4\n      },\n      spatialTargetX: {\n        A: 3800\n      },\n      spatialTargetY: {\n        A: -900\n      }\n    },\n    layout: [{\n      component: \"description\",\n      x: 9,\n      y: 0,\n      w: 3,\n      h: 2\n    }, {\n      component: \"status\",\n      x: 9,\n      y: 2,\n      w: 3,\n      h: 2\n    }, {\n      component: \"cellSets\",\n      x: 9,\n      y: 4,\n      w: 3,\n      h: 4\n    }, {\n      component: \"cellSetSizes\",\n      x: 5,\n      y: 4,\n      w: 4,\n      h: 4\n    }, {\n      component: \"scatterplot\",\n      coordinationScopes: {\n        embeddingType: \"TSNE\",\n        embeddingZoom: \"TSNE\",\n        embeddingCellSetLabelsVisible: \"A\",\n        embeddingCellSetLabelSize: \"A\",\n        embeddingCellSetPolygonsVisible: \"A\",\n        embeddingCellRadius: \"A\"\n      },\n      x: 0,\n      y: 2,\n      w: 5,\n      h: 4\n    }, {\n      component: \"spatial\",\n      props: {\n        cellRadius: 50\n      },\n      coordinationScopes: {\n        spatialZoom: \"A\",\n        spatialTargetX: \"A\",\n        spatialTargetY: \"A\"\n      },\n      x: 5,\n      y: 0,\n      w: 4,\n      h: 4\n    }, {\n      component: \"scatterplot\",\n      coordinationScopes: {\n        embeddingType: \"UMAP\",\n        embeddingZoom: \"UMAP\",\n        embeddingCellSetLabelsVisible: \"A\",\n        embeddingCellSetLabelSize: \"A\",\n        embeddingCellSetPolygonsVisible: \"A\",\n        embeddingCellRadius: \"A\"\n      },\n      x: 0,\n      y: 0,\n      w: 5,\n      h: 4\n    }]\n  },\n  \"wang-2019\": {\n    name: \"Wang\",\n    version: \"1.0.0\",\n    description: wangDescription,\n    public: true,\n    datasets: [{\n      uid: \"wang-2019\",\n      name: \"Wang 2019\",\n      files: wangBase.layers.map(file => ({\n        type: file.type.toLowerCase(),\n        fileType: file.fileType,\n        url: file.url\n      }))\n    }],\n    initStrategy: \"auto\",\n    coordinationSpace: {\n      spatialZoom: {\n        A: -1\n      },\n      spatialLayers: {\n        A: [{\n          type: \"molecules\",\n          radius: 2,\n          opacity: 1,\n          visible: true\n        }, {\n          type: \"cells\",\n          opacity: 1,\n          radius: 50,\n          visible: true,\n          stroked: false\n        }]\n      }\n    },\n    layout: [{\n      component: \"spatial\",\n      coordinationScopes: {\n        spatialZoom: \"A\",\n        spatialLayers: \"A\"\n      },\n      props: {},\n      x: 0,\n      y: 0,\n      w: 10,\n      h: 2\n    }, {\n      component: \"genes\",\n      x: 10,\n      y: 0,\n      w: 2,\n      h: 4\n    }, {\n      component: \"expressionHistogram\",\n      x: 0,\n      y: 2,\n      w: 10,\n      h: 2\n    }]\n  },\n  vanderbilt: __spreadProps(__spreadValues({}, vanderbiltBase), {\n    version: \"0.1.0\",\n    name: \"Spraggins\",\n    public: true,\n    staticLayout: [{\n      component: \"spatial\",\n      props: {\n        view: {\n          zoom: -6.5,\n          target: [2e4, 2e4, 0]\n        }\n      },\n      x: 0,\n      y: 0,\n      w: 9,\n      h: 2\n    }, {\n      component: \"layerController\",\n      x: 9,\n      y: 0,\n      w: 3,\n      h: 2\n    }]\n  }),\n  \"just-higlass\": {\n    public: false,\n    initStrategy: \"auto\",\n    version: \"1.0.0\",\n    datasets: [{\n      uid: \"higlass-dataset\",\n      name: \"HiGlass Dataset\",\n      files: []\n    }],\n    name: \"HiGlass demo\",\n    coordinationSpace: {\n      genomicZoomX: {\n        A: 0\n      },\n      genomicZoomY: {\n        A: 0\n      },\n      genomicTargetX: {\n        A: 15499999995e-1\n      },\n      genomicTargetY: {\n        A: 15499999995e-1\n      }\n    },\n    layout: [{\n      component: \"higlass\",\n      coordinationScopes: {\n        genomicZoomX: \"A\",\n        genomicZoomY: \"A\",\n        genomicTargetX: \"A\",\n        genomicTargetY: \"A\"\n      },\n      props: {\n        hgViewConfig: {\n          uid: \"aa\",\n          autocompleteSource: \"/api/v1/suggest/?d=OHJakQICQD6gTD7skx4EWA&\",\n          genomePositionSearchBox: {\n            autocompleteServer: \"//higlass.io/api/v1\",\n            autocompleteId: \"OHJakQICQD6gTD7skx4EWA\",\n            chromInfoServer: \"//higlass.io/api/v1\",\n            chromInfoId: \"hg19\",\n            visible: true\n          },\n          chromInfoPath: \"//s3.amazonaws.com/pkerp/data/hg19/chromSizes.tsv\",\n          tracks: {\n            top: [{\n              type: \"horizontal-gene-annotations\",\n              height: 60,\n              tilesetUid: \"OHJakQICQD6gTD7skx4EWA\",\n              server: \"//higlass.io/api/v1\",\n              uid: \"OHJakQICQD6gTD7skx4EWA\",\n              options: {\n                name: \"Gene Annotations (hg19)\",\n                fontSize: 10,\n                labelPosition: \"hidden\",\n                labelLeftMargin: 0,\n                labelRightMargin: 0,\n                labelTopMargin: 0,\n                labelBottomMargin: 0,\n                minHeight: 24,\n                geneAnnotationHeight: 16,\n                geneLabelPosition: \"outside\",\n                geneStrandSpacing: 4,\n                showMousePosition: true,\n                mousePositionColor: \"#ff00ff\",\n                plusStrandColor: \"#fdff54\",\n                minusStrandColor: \"#68bf30\",\n                labelColor: \"black\",\n                trackBorderWidth: 0,\n                trackBorderColor: \"black\"\n              }\n            }, {\n              chromInfoPath: \"//s3.amazonaws.com/pkerp/data/hg19/chromSizes.tsv\",\n              type: \"horizontal-chromosome-labels\",\n              height: 30,\n              uid: \"X4e_1DKiQHmyghDa6lLMVA\",\n              options: {\n                color: \"#808080\",\n                stroke: \"black\",\n                fontSize: 12,\n                fontIsLeftAligned: false,\n                showMousePosition: true,\n                mousePositionColor: \"#ff00ff\"\n              }\n            }],\n            left: [{\n              type: \"vertical-gene-annotations\",\n              width: 60,\n              tilesetUid: \"OHJakQICQD6gTD7skx4EWA\",\n              server: \"//higlass.io/api/v1\",\n              options: {\n                labelPosition: \"bottomRight\",\n                name: \"Gene Annotations (hg19)\",\n                fontSize: 10,\n                labelLeftMargin: 0,\n                labelRightMargin: 0,\n                labelTopMargin: 0,\n                labelBottomMargin: 0,\n                minWidth: 24,\n                geneAnnotationHeight: 16,\n                geneLabelPosition: \"outside\",\n                geneStrandSpacing: 4,\n                showMousePosition: true,\n                mousePositionColor: \"#ff00ff\",\n                plusStrandColor: \"#fdff54\",\n                minusStrandColor: \"#68bf30\",\n                labelColor: \"black\",\n                trackBorderWidth: 0,\n                trackBorderColor: \"black\"\n              },\n              uid: \"dqBTMH78Rn6DeSyDBoAEXw\"\n            }, {\n              chromInfoPath: \"//s3.amazonaws.com/pkerp/data/hg19/chromSizes.tsv\",\n              type: \"vertical-chromosome-labels\",\n              width: 30,\n              uid: \"RHdQK4IRQ7yJeDmKWb7Pcg\",\n              options: {\n                color: \"#777777\",\n                stroke: \"black\",\n                fontSize: 12,\n                fontIsLeftAligned: false,\n                minWidth: 35,\n                showMousePosition: true,\n                mousePositionColor: \"#ff00ff\"\n              }\n            }],\n            center: [{\n              uid: \"c1\",\n              type: \"combined\",\n              height: 600,\n              contents: [{\n                server: \"//higlass.io/api/v1\",\n                tilesetUid: \"CQMd6V_cRw6iCI_-Unl3PQ\",\n                type: \"heatmap\",\n                options: {\n                  maxZoom: null,\n                  labelPosition: \"bottomRight\",\n                  name: \"Rao et al. (2014) GM12878 MboI (allreps) 1kb\",\n                  backgroundColor: \"black\",\n                  labelLeftMargin: 0,\n                  labelRightMargin: 0,\n                  labelTopMargin: 0,\n                  labelBottomMargin: 0,\n                  labelShowResolution: true,\n                  labelShowAssembly: true,\n                  labelColor: \"#ffffff\",\n                  labelTextOpacity: 0.5,\n                  labelBackgroundColor: \"black\",\n                  labelBackgroundOpacity: 0.01,\n                  colorRange: [\"#000000\", \"#222e54\", \"#448db2\", \"#68bf30\", \"#fdff54\", \"#FFFFFF\"],\n                  colorbarBackgroundColor: \"black\",\n                  colorbarBackgroundOpacity: 0.01,\n                  colorbarPosition: \"topRight\",\n                  trackBorderWidth: 0,\n                  trackBorderColor: \"black\",\n                  heatmapValueScaling: \"log\",\n                  showMousePosition: true,\n                  mousePositionColor: \"#ff00ff\",\n                  showTooltip: false,\n                  extent: \"full\",\n                  zeroValueColor: null,\n                  scaleStartPercent: \"0.00000\",\n                  scaleEndPercent: \"1.00000\"\n                },\n                height: 500,\n                uid: \"GjuZed1ySGW1IzZZqFB9BA\",\n                transforms: [{\n                  name: \"ICE\",\n                  value: \"weight\"\n                }]\n              }],\n              options: {}\n            }],\n            right: [],\n            bottom: [],\n            whole: [],\n            gallery: []\n          },\n          layout: {\n            w: 12,\n            h: 12,\n            x: 0,\n            y: 0,\n            moved: false,\n            static: false\n          }\n        }\n      },\n      x: 0,\n      y: 0,\n      w: 8,\n      h: 2\n    }, {\n      component: \"higlass\",\n      coordinationScopes: {\n        genomicZoomX: \"A\",\n        genomicZoomY: \"A\",\n        genomicTargetX: \"A\",\n        genomicTargetY: \"A\"\n      },\n      props: {\n        hgViewConfig: {\n          uid: \"aa\",\n          autocompleteSource: \"/api/v1/suggest/?d=OHJakQICQD6gTD7skx4EWA&\",\n          genomePositionSearchBox: {\n            autocompleteServer: \"//higlass.io/api/v1\",\n            autocompleteId: \"OHJakQICQD6gTD7skx4EWA\",\n            chromInfoServer: \"//higlass.io/api/v1\",\n            chromInfoId: \"hg19\",\n            visible: true\n          },\n          chromInfoPath: \"//s3.amazonaws.com/pkerp/data/hg19/chromSizes.tsv\",\n          tracks: {\n            top: [{\n              type: \"horizontal-gene-annotations\",\n              height: 60,\n              tilesetUid: \"OHJakQICQD6gTD7skx4EWA\",\n              server: \"//higlass.io/api/v1\",\n              uid: \"OHJakQICQD6gTD7skx4EWA\",\n              options: {\n                name: \"Gene Annotations (hg19)\",\n                fontSize: 10,\n                labelPosition: \"hidden\",\n                labelLeftMargin: 0,\n                labelRightMargin: 0,\n                labelTopMargin: 0,\n                labelBottomMargin: 0,\n                minHeight: 24,\n                geneAnnotationHeight: 16,\n                geneLabelPosition: \"outside\",\n                geneStrandSpacing: 4,\n                showMousePosition: true,\n                mousePositionColor: \"#ff00ff\",\n                plusStrandColor: \"#fdff54\",\n                minusStrandColor: \"#68bf30\",\n                labelColor: \"black\",\n                trackBorderWidth: 0,\n                trackBorderColor: \"black\"\n              }\n            }, {\n              chromInfoPath: \"//s3.amazonaws.com/pkerp/data/hg19/chromSizes.tsv\",\n              type: \"horizontal-chromosome-labels\",\n              height: 30,\n              uid: \"X4e_1DKiQHmyghDa6lLMVA\",\n              options: {\n                color: \"#808080\",\n                stroke: \"black\",\n                fontSize: 12,\n                fontIsLeftAligned: false,\n                showMousePosition: true,\n                mousePositionColor: \"#ff00ff\"\n              }\n            }],\n            left: [{\n              type: \"vertical-gene-annotations\",\n              width: 60,\n              tilesetUid: \"OHJakQICQD6gTD7skx4EWA\",\n              server: \"//higlass.io/api/v1\",\n              options: {\n                labelPosition: \"bottomRight\",\n                name: \"Gene Annotations (hg19)\",\n                fontSize: 10,\n                labelLeftMargin: 0,\n                labelRightMargin: 0,\n                labelTopMargin: 0,\n                labelBottomMargin: 0,\n                minWidth: 24,\n                geneAnnotationHeight: 16,\n                geneLabelPosition: \"outside\",\n                geneStrandSpacing: 4,\n                showMousePosition: true,\n                mousePositionColor: \"#ff00ff\",\n                plusStrandColor: \"#fdff54\",\n                minusStrandColor: \"#68bf30\",\n                labelColor: \"black\",\n                trackBorderWidth: 0,\n                trackBorderColor: \"black\"\n              },\n              uid: \"dqBTMH78Rn6DeSyDBoAEXw\"\n            }, {\n              chromInfoPath: \"//s3.amazonaws.com/pkerp/data/hg19/chromSizes.tsv\",\n              type: \"vertical-chromosome-labels\",\n              width: 30,\n              uid: \"RHdQK4IRQ7yJeDmKWb7Pcg\",\n              options: {\n                color: \"#777777\",\n                stroke: \"black\",\n                fontSize: 12,\n                fontIsLeftAligned: false,\n                minWidth: 35,\n                showMousePosition: true,\n                mousePositionColor: \"#ff00ff\"\n              }\n            }],\n            center: [{\n              uid: \"c1\",\n              type: \"combined\",\n              height: 600,\n              contents: [{\n                server: \"//higlass.io/api/v1\",\n                tilesetUid: \"CQMd6V_cRw6iCI_-Unl3PQ\",\n                type: \"heatmap\",\n                options: {\n                  maxZoom: null,\n                  labelPosition: \"bottomRight\",\n                  name: \"Rao et al. (2014) GM12878 MboI (allreps) 1kb\",\n                  backgroundColor: \"black\",\n                  labelLeftMargin: 0,\n                  labelRightMargin: 0,\n                  labelTopMargin: 0,\n                  labelBottomMargin: 0,\n                  labelShowResolution: true,\n                  labelShowAssembly: true,\n                  labelColor: \"#ffffff\",\n                  labelTextOpacity: 0.5,\n                  labelBackgroundColor: \"black\",\n                  labelBackgroundOpacity: 0.01,\n                  colorRange: [\"#000000\", \"#222e54\", \"#448db2\", \"#68bf30\", \"#fdff54\", \"#FFFFFF\"],\n                  colorbarBackgroundColor: \"black\",\n                  colorbarBackgroundOpacity: 0.01,\n                  colorbarPosition: \"topRight\",\n                  trackBorderWidth: 0,\n                  trackBorderColor: \"black\",\n                  heatmapValueScaling: \"log\",\n                  showMousePosition: true,\n                  mousePositionColor: \"#ff00ff\",\n                  showTooltip: false,\n                  extent: \"full\",\n                  zeroValueColor: null,\n                  scaleStartPercent: \"0.00000\",\n                  scaleEndPercent: \"1.00000\"\n                },\n                height: 500,\n                uid: \"GjuZed1ySGW1IzZZqFB9BA\",\n                transforms: [{\n                  name: \"ICE\",\n                  value: \"weight\"\n                }]\n              }],\n              options: {}\n            }],\n            right: [],\n            bottom: [],\n            whole: [],\n            gallery: []\n          },\n          layout: {\n            w: 12,\n            h: 12,\n            x: 0,\n            y: 0,\n            moved: false,\n            static: false\n          }\n        }\n      },\n      x: 8,\n      y: 0,\n      w: 4,\n      h: 2\n    }]\n  },\n  \"sc-atac-seq-10x-genomics-pbmc\": {\n    version: \"1.0.0\",\n    name: \"HiGlass serverless demo with 10x Genomics scATAC-seq 5k PBMC dataset\",\n    datasets: [{\n      uid: \"10x-genomics-pbmc\",\n      name: \"10x Genomics PBMC\",\n      files: [{\n        type: \"genomic-profiles\",\n        fileType: \"genomic-profiles.zarr\",\n        url: \"http://higlass-serverless.s3.amazonaws.com/multivec/pbmc_10x_peaks_by_cluster.zarr\"\n      }]\n    }],\n    layout: [{\n      component: \"genomicProfiles\",\n      props: {\n        profileTrackUidKey: \"file\"\n      },\n      x: 0,\n      y: 0,\n      w: 8,\n      h: 2\n    }, {\n      component: \"description\",\n      props: {\n        description: \"10x Genomics scATAC-seq of 5k PBMCs. Note: the Zarr HiGlass Plugin Datafetcher is not yet optimized. Please be patient while the HiGlass tracks load.\"\n      },\n      x: 8,\n      y: 0,\n      w: 4,\n      h: 2\n    }],\n    initStrategy: \"auto\"\n  },\n  \"portal-ui-featured\": {\n    coordinationSpace: {\n      dataset: {\n        A: \"A\"\n      },\n      spatialZoom: {\n        A: 0.6219962674826599\n      },\n      spatialRotation: {\n        A: 0\n      },\n      spatialTargetX: {\n        A: 550.9755273834661\n      },\n      spatialTargetY: {\n        A: 418.2987491735642\n      },\n      spatialTargetZ: {\n        A: 6252776074688882e-28\n      },\n      heatmapZoomX: {\n        A: 0\n      },\n      heatmapZoomY: {\n        A: 0\n      },\n      heatmapTargetX: {\n        A: 0\n      },\n      heatmapTargetY: {\n        A: 0\n      },\n      cellFilter: {\n        A: null\n      },\n      cellHighlight: {\n        A: \"761\"\n      },\n      cellSetSelection: {\n        A: [[\"K-Means [Mean] Expression\", \"Cluster 1\"], [\"K-Means [Mean] Expression\", \"Cluster 2\"], [\"K-Means [Mean] Expression\", \"Cluster 3\"], [\"K-Means [Mean] Expression\", \"Cluster 4\"], [\"K-Means [Mean] Expression\", \"Cluster 5\"], [\"K-Means [Mean] Expression\", \"Cluster 6\"]]\n      },\n      cellSetHighlight: {\n        A: null\n      },\n      cellSetColor: {\n        A: [{\n          path: [\"K-Means [Mean] Expression\"],\n          color: [68, 119, 170, 255]\n        }, {\n          path: [\"K-Means [Mean] Expression\", \"Cluster 1\"],\n          color: [68, 119, 170, 255]\n        }, {\n          path: [\"K-Means [Mean] Expression\", \"Cluster 2\"],\n          color: [136, 204, 238, 255]\n        }, {\n          path: [\"K-Means [Mean] Expression\", \"Cluster 3\"],\n          color: [68, 170, 153, 255]\n        }, {\n          path: [\"K-Means [Mean] Expression\", \"Cluster 4\"],\n          color: [17, 119, 51, 255]\n        }, {\n          path: [\"K-Means [Mean] Expression\", \"Cluster 5\"],\n          color: [153, 153, 51, 255]\n        }, {\n          path: [\"K-Means [Mean] Expression\", \"Cluster 6\"],\n          color: [221, 204, 119, 255]\n        }, {\n          path: [\"K-Means [Covariance] Expression\"],\n          color: [68, 119, 170, 255]\n        }, {\n          path: [\"K-Means [Covariance] Expression\", \"Cluster 1\"],\n          color: [68, 119, 170, 255]\n        }, {\n          path: [\"K-Means [Covariance] Expression\", \"Cluster 2\"],\n          color: [136, 204, 238, 255]\n        }, {\n          path: [\"K-Means [Covariance] Expression\", \"Cluster 3\"],\n          color: [68, 170, 153, 255]\n        }, {\n          path: [\"K-Means [Covariance] Expression\", \"Cluster 4\"],\n          color: [17, 119, 51, 255]\n        }, {\n          path: [\"K-Means [Covariance] Expression\", \"Cluster 5\"],\n          color: [153, 153, 51, 255]\n        }, {\n          path: [\"K-Means [Covariance] Expression\", \"Cluster 6\"],\n          color: [221, 204, 119, 255]\n        }, {\n          path: [\"K-Means [Total] Expression\"],\n          color: [68, 119, 170, 255]\n        }, {\n          path: [\"K-Means [Total] Expression\", \"Cluster 1\"],\n          color: [68, 119, 170, 255]\n        }, {\n          path: [\"K-Means [Total] Expression\", \"Cluster 2\"],\n          color: [136, 204, 238, 255]\n        }, {\n          path: [\"K-Means [Total] Expression\", \"Cluster 3\"],\n          color: [68, 170, 153, 255]\n        }, {\n          path: [\"K-Means [Total] Expression\", \"Cluster 4\"],\n          color: [17, 119, 51, 255]\n        }, {\n          path: [\"K-Means [Total] Expression\", \"Cluster 5\"],\n          color: [153, 153, 51, 255]\n        }, {\n          path: [\"K-Means [Total] Expression\", \"Cluster 6\"],\n          color: [221, 204, 119, 255]\n        }, {\n          path: [\"K-Means [Mean-All-SubRegions] Expression\"],\n          color: [68, 119, 170, 255]\n        }, {\n          path: [\"K-Means [Mean-All-SubRegions] Expression\", \"Cluster 1\"],\n          color: [68, 119, 170, 255]\n        }, {\n          path: [\"K-Means [Mean-All-SubRegions] Expression\", \"Cluster 2\"],\n          color: [136, 204, 238, 255]\n        }, {\n          path: [\"K-Means [Mean-All-SubRegions] Expression\", \"Cluster 3\"],\n          color: [68, 170, 153, 255]\n        }, {\n          path: [\"K-Means [Mean-All-SubRegions] Expression\", \"Cluster 4\"],\n          color: [17, 119, 51, 255]\n        }, {\n          path: [\"K-Means [Mean-All-SubRegions] Expression\", \"Cluster 5\"],\n          color: [153, 153, 51, 255]\n        }, {\n          path: [\"K-Means [Mean-All-SubRegions] Expression\", \"Cluster 6\"],\n          color: [221, 204, 119, 255]\n        }, {\n          path: [\"K-Means [Shape-Vectors]\"],\n          color: [68, 119, 170, 255]\n        }, {\n          path: [\"K-Means [Shape-Vectors]\", \"Cluster 1\"],\n          color: [68, 119, 170, 255]\n        }, {\n          path: [\"K-Means [Shape-Vectors]\", \"Cluster 2\"],\n          color: [136, 204, 238, 255]\n        }, {\n          path: [\"K-Means [Shape-Vectors]\", \"Cluster 3\"],\n          color: [68, 170, 153, 255]\n        }]\n      },\n      geneFilter: {\n        A: null\n      },\n      geneHighlight: {\n        A: null\n      },\n      geneSelection: {\n        A: null\n      },\n      geneExpressionColormap: {\n        A: \"plasma\"\n      },\n      geneExpressionColormapRange: {\n        A: [0.065, 0.435]\n      },\n      cellColorEncoding: {\n        A: \"cellSetSelection\"\n      },\n      spatialRasterLayers: {\n        A: [{\n          type: \"t\",\n          index: 0,\n          colormap: null,\n          opacity: 1,\n          domainType: \"Min/Max\",\n          transparentColor: null,\n          channels: [{\n            selection: {\n              z: 5,\n              t: 0,\n              c: 10\n            },\n            color: [0, 0, 255],\n            visible: true,\n            slider: [1, 14906]\n          }, {\n            selection: {\n              z: 5,\n              t: 0,\n              c: 15\n            },\n            color: [0, 255, 0],\n            visible: true,\n            slider: [2313, 31611]\n          }, {\n            selection: {\n              z: 5,\n              t: 0,\n              c: 45\n            },\n            color: [255, 0, 255],\n            visible: true,\n            slider: [2570, 21074]\n          }, {\n            selection: {\n              z: 5,\n              t: 0,\n              c: 20\n            },\n            color: [255, 255, 0],\n            visible: true,\n            slider: [2827, 11565]\n          }, {\n            selection: {\n              z: 5,\n              t: 0,\n              c: 31\n            },\n            slider: [5658, 17479],\n            visible: true,\n            color: [255, 128, 0]\n          }, {\n            selection: {\n              z: 5,\n              t: 0,\n              c: 39\n            },\n            slider: [1767, 11735],\n            visible: true,\n            color: [255, 255, 255]\n          }]\n        }]\n      },\n      spatialCellsLayer: {\n        A: {\n          opacity: 0,\n          radius: 50,\n          visible: true,\n          stroked: true\n        }\n      },\n      spatialMoleculesLayer: {\n        A: null\n      },\n      spatialNeighborhoodsLayer: {\n        A: null\n      },\n      additionalCellSets: {\n        A: null\n      },\n      moleculeHighlight: {\n        A: null\n      }\n    },\n    datasets: [{\n      files: [{\n        fileType: \"cells.json\",\n        type: \"cells\",\n        url: \"https://assets.hubmapconsortium.org/ca3016d836d8ee50bef1b93f339c9679/output_json/R002_X002_Y007.cells.json?token=\"\n      }, {\n        fileType: \"cell-sets.json\",\n        type: \"cell-sets\",\n        url: \"https://assets.hubmapconsortium.org/ca3016d836d8ee50bef1b93f339c9679/output_json/R002_X002_Y007.cell-sets.json?token=\"\n      }, {\n        fileType: \"clusters.json\",\n        type: \"expression-matrix\",\n        url: \"https://assets.hubmapconsortium.org/ca3016d836d8ee50bef1b93f339c9679/output_json/R002_X002_Y007.clusters.json?token=\"\n      }, {\n        fileType: \"raster.json\",\n        options: {\n          images: [{\n            metadata: {\n              omeTiffOffsetsUrl: \"https://assets.hubmapconsortium.org/ca3016d836d8ee50bef1b93f339c9679/output_offsets/R002_X002_Y007.offsets.json?token=\"\n            },\n            name: \"R002_X002_Y007\",\n            type: \"ome-tiff\",\n            url: \"https://assets.hubmapconsortium.org/ca3016d836d8ee50bef1b93f339c9679/output/extract/expressions/ome-tiff/R002_X002_Y007.ome.tiff?token=\"\n          }],\n          schemaVersion: \"0.0.2\"\n        },\n        type: \"raster\"\n      }],\n      name: \"SPRM\",\n      uid: \"A\"\n    }],\n    description: \"\",\n    initStrategy: \"auto\",\n    layout: [{\n      component: \"spatial\",\n      coordinationScopes: {\n        dataset: \"A\",\n        spatialZoom: \"A\",\n        spatialRotation: \"A\",\n        spatialTargetX: \"A\",\n        spatialTargetY: \"A\",\n        spatialTargetZ: \"A\",\n        cellFilter: \"A\",\n        cellHighlight: \"A\",\n        cellSetSelection: \"A\",\n        cellSetHighlight: \"A\",\n        cellSetColor: \"A\",\n        geneHighlight: \"A\",\n        geneSelection: \"A\",\n        geneExpressionColormap: \"A\",\n        geneExpressionColormapRange: \"A\",\n        cellColorEncoding: \"A\",\n        spatialRasterLayers: \"A\",\n        spatialCellsLayer: \"A\",\n        spatialMoleculesLayer: \"A\",\n        spatialNeighborhoodsLayer: \"A\",\n        additionalCellSets: \"A\",\n        moleculeHighlight: \"A\"\n      },\n      h: 8,\n      w: 7,\n      x: 3,\n      y: 0\n    }, {\n      component: \"description\",\n      coordinationScopes: {\n        dataset: \"A\",\n        spatialRasterLayers: \"A\"\n      },\n      h: 2,\n      w: 2,\n      x: 10,\n      y: 10\n    }, {\n      component: \"layerController\",\n      coordinationScopes: {\n        dataset: \"A\",\n        spatialRasterLayers: \"A\",\n        spatialCellsLayer: \"A\",\n        spatialMoleculesLayer: \"A\",\n        spatialNeighborhoodsLayer: \"A\"\n      },\n      h: 8,\n      w: 3,\n      x: 0,\n      y: 0\n    }, {\n      component: \"cellSets\",\n      coordinationScopes: {\n        dataset: \"A\",\n        cellSetSelection: \"A\",\n        cellSetHighlight: \"A\",\n        cellSetColor: \"A\",\n        cellColorEncoding: \"A\",\n        additionalCellSets: \"A\"\n      },\n      h: 5,\n      w: 2,\n      x: 10,\n      y: 5\n    }, {\n      component: \"genes\",\n      coordinationScopes: {\n        dataset: \"A\",\n        geneFilter: \"A\",\n        geneHighlight: \"A\",\n        geneSelection: \"A\",\n        cellColorEncoding: \"A\"\n      },\n      h: 5,\n      props: {\n        variablesLabelOverride: \"antigen\"\n      },\n      w: 2,\n      x: 10,\n      y: 0\n    }, {\n      component: \"heatmap\",\n      coordinationScopes: {\n        dataset: \"A\",\n        heatmapZoomX: \"A\",\n        heatmapZoomY: \"A\",\n        heatmapTargetX: \"A\",\n        heatmapTargetY: \"A\",\n        cellFilter: \"A\",\n        cellHighlight: \"A\",\n        cellSetSelection: \"A\",\n        cellSetHighlight: \"A\",\n        cellSetColor: \"A\",\n        geneFilter: \"A\",\n        geneHighlight: \"A\",\n        geneSelection: \"A\",\n        geneExpressionColormap: \"A\",\n        geneExpressionColormapRange: \"A\",\n        cellColorEncoding: \"A\",\n        additionalCellSets: \"A\"\n      },\n      h: 4,\n      props: {\n        transpose: true,\n        variablesLabelOverride: \"antigen\"\n      },\n      w: 10,\n      x: 0,\n      y: 8\n    }],\n    name: \"R002_X002_Y007\",\n    version: \"1.0.1\"\n  }\n};\n\nfunction listConfigs(showAll) {\n  return Object.entries(configs).filter(entry => showAll || entry[1].public).map(_ref78 => {\n    let [id, config] = _ref78;\n    return {\n      id,\n      name: config.name,\n      description: config.description\n    };\n  });\n}\n\nfunction getConfig(id) {\n  return configs[id];\n} // src/app/Welcome.js\n\n\nimport React31 from \"react\"; // src/version.json\n\nvar note = \"This file is regenerated by push-demo.sh.\";\nvar branch = \"release_1.1.17\";\nvar date = \"2021-11-17\";\nvar hash = \"db07d05\";\nvar version_default = {\n  note,\n  branch,\n  date,\n  hash\n}; // src/app/Welcome.js\n\nfunction DatasetList(props) {\n  const {\n    configs: configs2,\n    theme\n  } = props;\n  const aClassName = \"list-group-item list-group-item-action flex-column align-items-start bg-secondary\";\n  const links = configs2.map(_ref79 => {\n    let {\n      id,\n      name: name2,\n      description: description2\n    } = _ref79;\n    return /* @__PURE__ */React31.createElement(\"div\", {\n      className: aClassName,\n      key: id\n    }, /* @__PURE__ */React31.createElement(\"a\", {\n      href: `?dataset=${id}&theme=${theme}`,\n      key: id\n    }, /* @__PURE__ */React31.createElement(\"h5\", null, name2), /* @__PURE__ */React31.createElement(\"p\", null, description2)), /* @__PURE__ */React31.createElement(\"a\", {\n      href: `?dataset=${id}&theme=${theme}&small`,\n      style: {\n        fontSize: \"75%\"\n      }\n    }, name2, \" as component\"));\n  });\n  return /* @__PURE__ */React31.createElement(\"div\", {\n    className: \"list-group\"\n  }, links);\n}\n\nfunction Form(props) {\n  const {\n    configs: configs2,\n    theme\n  } = props;\n  return /* @__PURE__ */React31.createElement(\"form\", {\n    method: \"GET\"\n  }, /* @__PURE__ */React31.createElement(\"h1\", null, \"Vitessce\"), /* @__PURE__ */React31.createElement(\"div\", null, \"Select a dataset:\"), /* @__PURE__ */React31.createElement(DatasetList, {\n    configs: configs2,\n    theme\n  }), /* @__PURE__ */React31.createElement(\"br\", null), /* @__PURE__ */React31.createElement(\"div\", null, \"Or specify URL of configuration:\"), /* @__PURE__ */React31.createElement(\"div\", {\n    className: \"input-group mb-3\"\n  }, /* @__PURE__ */React31.createElement(\"input\", {\n    type: \"text\",\n    name: \"url\",\n    className: \"form-control\"\n  }), /* @__PURE__ */React31.createElement(\"input\", {\n    type: \"hidden\",\n    name: \"theme\",\n    value: theme\n  }), /* @__PURE__ */React31.createElement(\"div\", {\n    className: \"input-group-append\"\n  }, /* @__PURE__ */React31.createElement(\"button\", {\n    className: \"btn btn-outline-secondary\",\n    type: \"submit\"\n  }, \"Load\"))));\n}\n\nfunction Info() {\n  return /* @__PURE__ */React31.createElement(React31.Fragment, null, /* @__PURE__ */React31.createElement(\"p\", {\n    className: \"info-paragraph\"\n  }, \"Vitessce is a visual integration tool for exploration of spatial single cell experiments. Its modular design is optimized for scalable, linked visualizations that support the spatial and non-spatial representation of tissue-, cell- and molecule-level data. Vitessce integrates the \", /* @__PURE__ */React31.createElement(\"a\", {\n    href: \"https://github.com/hms-dbmi/viv\"\n  }, \"Viv library\"), \" to visualize highly multiplexed, high-resolution, high-bit depth image data directly from OME-TIFF files and Bio-Formats-compatible Zarr stores.\"), /* @__PURE__ */React31.createElement(\"h5\", {\n    className: \"info-section-text\"\n  }, \"Contributors\"), /* @__PURE__ */React31.createElement(\"ul\", null, /* @__PURE__ */React31.createElement(\"li\", null, /* @__PURE__ */React31.createElement(\"a\", {\n    href: \"https://github.com/keller-mark\"\n  }, \"Mark Keller\")), /* @__PURE__ */React31.createElement(\"li\", null, /* @__PURE__ */React31.createElement(\"a\", {\n    href: \"https://github.com/mccalluc\"\n  }, \"Chuck McCallum\")), /* @__PURE__ */React31.createElement(\"li\", null, /* @__PURE__ */React31.createElement(\"a\", {\n    href: \"https://github.com/ilan-gold\"\n  }, \"Ilan Gold\")), /* @__PURE__ */React31.createElement(\"li\", null, /* @__PURE__ */React31.createElement(\"a\", {\n    href: \"https://github.com/manzt\"\n  }, \"Trevor Manz\")), /* @__PURE__ */React31.createElement(\"li\", null, /* @__PURE__ */React31.createElement(\"a\", {\n    href: \"https://github.com/thomaslchan\"\n  }, \"Tos Chan\")), /* @__PURE__ */React31.createElement(\"li\", null, /* @__PURE__ */React31.createElement(\"a\", {\n    href: \"https://github.com/jkmarx\"\n  }, \"Jennifer Marx\")), /* @__PURE__ */React31.createElement(\"li\", null, /* @__PURE__ */React31.createElement(\"a\", {\n    href: \"https://github.com/pkharchenko\"\n  }, \"Peter Kharchenko\")), /* @__PURE__ */React31.createElement(\"li\", null, /* @__PURE__ */React31.createElement(\"a\", {\n    href: \"https://github.com/ngehlenborg\"\n  }, \"Nils Gehlenborg\"))), /* @__PURE__ */React31.createElement(\"h5\", {\n    className: \"info-section-text\"\n  }, \"Source Code\"), /* @__PURE__ */React31.createElement(\"ul\", null, /* @__PURE__ */React31.createElement(\"li\", null, /* @__PURE__ */React31.createElement(\"a\", {\n    href: \"https://github.com/vitessce/vitessce\"\n  }, \"GitHub\")), /* @__PURE__ */React31.createElement(\"li\", null, /* @__PURE__ */React31.createElement(\"a\", {\n    href: \"https://www.npmjs.com/package/vitessce\"\n  }, \"NPM\"))), /* @__PURE__ */React31.createElement(\"h5\", {\n    className: \"info-section-text\"\n  }, \"Funding\"), /* @__PURE__ */React31.createElement(\"ul\", null, /* @__PURE__ */React31.createElement(\"li\", null, \"NIH/OD Human BioMolecular Atlas Program (HuBMAP) (OT2OD026677, PI: Nils Gehlenborg).\"), /* @__PURE__ */React31.createElement(\"li\", null, \"NIH/NLM Biomedical Informatics and Data Science Research Training Program (T15LM007092, PI: Nils Gehlenborg)\"), /* @__PURE__ */React31.createElement(\"li\", null, \"Harvard Stem Cell Institute (CF-0014-17-03, PI: Nils Gehlenborg)\")), /* @__PURE__ */React31.createElement(\"p\", {\n    className: \"info-section-text\"\n  }, \"This deployment: branch=\", version_default.branch, \" | hash=\", version_default.hash, \" | date=\", version_default.date));\n}\n\nfunction Welcome(props) {\n  const {\n    configs: configs2,\n    theme,\n    showBetaHeader\n  } = props;\n  return /* @__PURE__ */React31.createElement(\"div\", {\n    className: `vitessce-container vitessce-theme-${theme} welcome-container`\n  }, showBetaHeader && /* @__PURE__ */React31.createElement(\"div\", {\n    className: \"welcome-beta-header\"\n  }, /* @__PURE__ */React31.createElement(\"p\", null, \"Visit \", /* @__PURE__ */React31.createElement(\"a\", {\n    href: \"http://beta.vitessce.io\"\n  }, \"beta.vitessce.io\"), \" to view the next version of the Vitessce home page and documentation!\")), /* @__PURE__ */React31.createElement(\"div\", {\n    className: \"react-grid-layout container-fluid\",\n    style: {\n      height: \"max(100vh, 100%)\"\n    }\n  }, /* @__PURE__ */React31.createElement(\"div\", {\n    className: \"row\"\n  }, /* @__PURE__ */React31.createElement(\"div\", {\n    className: \"welcome-col-left\"\n  }, /* @__PURE__ */React31.createElement(\"div\", {\n    className: \"card card-body bg-primary\"\n  }, /* @__PURE__ */React31.createElement(Form, {\n    configs: configs2,\n    theme\n  }))), /* @__PURE__ */React31.createElement(\"div\", {\n    className: \"welcome-col-right\"\n  }, /* @__PURE__ */React31.createElement(\"div\", {\n    className: \"card card-body bg-primary\"\n  }, /* @__PURE__ */React31.createElement(Info, null))))));\n} // src/app/Warning.js\n\n\nimport React32 from \"react\";\n\nfunction Warning(props) {\n  const {\n    title: title16,\n    preformatted,\n    unformatted,\n    theme\n  } = props;\n  return /* @__PURE__ */React32.createElement(\"div\", {\n    className: `vitessce-container vitessce-theme-${theme}`\n  }, /* @__PURE__ */React32.createElement(\"div\", {\n    className: \"warning-layout container-fluid\"\n  }, /* @__PURE__ */React32.createElement(\"div\", {\n    className: \"row\"\n  }, /* @__PURE__ */React32.createElement(\"div\", {\n    className: \"col-12\"\n  }, /* @__PURE__ */React32.createElement(\"div\", {\n    className: PRIMARY_CARD\n  }, /* @__PURE__ */React32.createElement(\"h1\", null, title16), /* @__PURE__ */React32.createElement(\"pre\", null, preformatted), /* @__PURE__ */React32.createElement(\"div\", null, unformatted))))));\n} // src/app/Vitessce.js\n\n\nimport React74, { useEffect as useEffect25, useMemo as useMemo17 } from \"react\";\nimport { ThemeProvider, StylesProvider, createGenerateClassName } from \"@material-ui/core/styles\";\nimport isEqual14 from \"lodash/isEqual\"; // src/app/CallbackPublisher.js\n\nimport { useEffect as useEffect10 } from \"react\"; // src/app/view-config-versions.js\n\nimport Ajv3 from \"ajv\"; // src/schemas/config-0.1.0.schema.json\n\nvar $schema9 = \"http://json-schema.org/draft-07/schema#\";\nvar $id9 = \"https://github.com/vitessce/vitessce/#dataset\";\nvar title9 = \"Vitessce data set\";\nvar type9 = \"object\";\nvar definitions9 = {\n  components: {\n    type: \"array\",\n    items: {\n      type: \"object\",\n      additionalProperties: false,\n      required: [\"component\", \"x\", \"y\"],\n      properties: {\n        component: {\n          type: \"string\"\n        },\n        props: {\n          type: \"object\"\n        },\n        x: {\n          type: \"integer\"\n        },\n        y: {\n          type: \"integer\"\n        },\n        w: {\n          type: \"integer\"\n        },\n        h: {\n          type: \"integer\"\n        }\n      }\n    }\n  },\n  requestInit: {\n    type: \"object\",\n    additionalProperties: false,\n    required: [],\n    properties: {\n      method: {\n        type: \"string\"\n      },\n      headers: {\n        type: \"object\"\n      },\n      body: {\n        type: \"string\"\n      },\n      mode: {\n        type: \"string\"\n      },\n      credentials: {\n        type: \"string\"\n      },\n      cache: {\n        type: \"string\"\n      },\n      redirect: {\n        type: \"string\"\n      },\n      referrer: {\n        type: \"string\"\n      },\n      integrity: {\n        type: \"string\"\n      }\n    }\n  }\n};\nvar additionalProperties3 = false;\nvar required3 = [\"version\", \"name\", \"layers\"];\nvar properties3 = {\n  name: {\n    type: \"string\"\n  },\n  public: {\n    type: \"boolean\"\n  },\n  description: {\n    type: \"string\"\n  },\n  layers: {\n    type: \"array\",\n    items: {\n      type: \"object\",\n      additionalProperties: false,\n      required: [\"name\", \"type\", \"fileType\", \"url\"],\n      properties: {\n        name: {\n          type: \"string\"\n        },\n        type: {\n          type: \"string\"\n        },\n        fileType: {\n          type: \"string\"\n        },\n        url: {\n          type: \"string\"\n        },\n        requestInit: {\n          $ref: \"#/definitions/requestInit\"\n        }\n      }\n    }\n  },\n  staticLayout: {\n    $ref: \"#/definitions/components\"\n  },\n  version: {\n    type: \"string\",\n    enum: [\"0.1.0\"]\n  }\n};\nvar config_0_1_0_schema_default = {\n  $schema: $schema9,\n  $id: $id9,\n  title: title9,\n  type: type9,\n  definitions: definitions9,\n  additionalProperties: additionalProperties3,\n  required: required3,\n  properties: properties3\n}; // src/schemas/config-1.0.0.schema.json\n\nvar $schema10 = \"http://json-schema.org/draft-07/schema#\";\nvar $id10 = \"https://github.com/vitessce/vitessce/#dataset\";\nvar title10 = \"Vitessce data set\";\nvar type10 = \"object\";\nvar definitions10 = {\n  components: {\n    description: \"The layout array defines the views, or components, rendered in the grid.\",\n    type: \"array\",\n    items: {\n      type: \"object\",\n      additionalProperties: false,\n      required: [\"component\", \"x\", \"y\"],\n      properties: {\n        component: {\n          type: \"string\",\n          description: \"Specify a component using a name defined in the component registry.\"\n        },\n        props: {\n          type: \"object\",\n          description: \"Extra prop values for the component.\"\n        },\n        x: {\n          type: \"integer\"\n        },\n        y: {\n          type: \"integer\"\n        },\n        w: {\n          type: \"integer\"\n        },\n        h: {\n          type: \"integer\"\n        },\n        coordinationScopes: {\n          type: \"object\",\n          description: \"Component-level coordination scope mappings define which coordination object values a particular component can read and write, for each coordination type.\",\n          additionalProperties: false,\n          required: [],\n          properties: {\n            dataset: {\n              type: \"string\"\n            },\n            embeddingType: {\n              type: \"string\"\n            },\n            embeddingZoom: {\n              type: \"string\"\n            },\n            embeddingRotation: {\n              type: \"string\"\n            },\n            embeddingTargetX: {\n              type: \"string\"\n            },\n            embeddingTargetY: {\n              type: \"string\"\n            },\n            embeddingTargetZ: {\n              type: \"string\"\n            },\n            embeddingCellSetPolygonsVisible: {\n              type: \"string\"\n            },\n            embeddingCellSetLabelsVisible: {\n              type: \"string\"\n            },\n            embeddingCellSetLabelSize: {\n              type: \"string\"\n            },\n            embeddingCellRadius: {\n              type: \"string\"\n            },\n            spatialZoom: {\n              type: \"string\"\n            },\n            spatialRotation: {\n              type: \"string\"\n            },\n            spatialTargetX: {\n              type: \"string\"\n            },\n            spatialTargetY: {\n              type: \"string\"\n            },\n            spatialTargetZ: {\n              type: \"string\"\n            },\n            heatmapZoomX: {\n              type: \"string\"\n            },\n            heatmapZoomY: {\n              type: \"string\"\n            },\n            heatmapTargetX: {\n              type: \"string\"\n            },\n            heatmapTargetY: {\n              type: \"string\"\n            },\n            cellFilter: {\n              type: \"string\"\n            },\n            cellHighlight: {\n              type: \"string\"\n            },\n            cellSetSelection: {\n              type: \"string\"\n            },\n            cellSetHighlight: {\n              type: \"string\"\n            },\n            cellSetColor: {\n              type: \"string\"\n            },\n            geneFilter: {\n              type: \"string\"\n            },\n            geneHighlight: {\n              type: \"string\"\n            },\n            geneSelection: {\n              type: \"string\"\n            },\n            geneExpressionTransform: {\n              type: \"string\"\n            },\n            geneExpressionColormap: {\n              type: \"string\"\n            },\n            geneExpressionColormapRange: {\n              type: \"string\"\n            },\n            cellColorEncoding: {\n              type: \"string\"\n            },\n            spatialLayers: {\n              type: \"string\"\n            },\n            genomicZoomX: {\n              type: \"string\"\n            },\n            genomicZoomY: {\n              type: \"string\"\n            },\n            genomicTargetX: {\n              type: \"string\"\n            },\n            genomicTargetY: {\n              type: \"string\"\n            },\n            additionalCellSets: {\n              type: \"string\"\n            },\n            moleculeHighlight: {\n              type: \"string\"\n            }\n          }\n        }\n      }\n    }\n  },\n  annDataCellSets: {\n    type: \"array\",\n    description: \"Array of cell set configuration, following closely the conventions of the tabular schema\",\n    items: {\n      type: \"object\",\n      additionalProperties: false,\n      required: [\"groupName\", \"setName\"],\n      properties: {\n        groupName: {\n          type: \"string\",\n          description: \"The display name for the set, like 'Cell Type' or 'Louvain.'\"\n        },\n        setName: {\n          type: \"string\",\n          description: \"The location in the AnnData store for the set, like 'obs/louvain' or 'obs/celltype.'\"\n        }\n      }\n    }\n  },\n  annDataCells: {\n    type: \"object\",\n    description: \"The properties of this object are the configuration for how to layout scatterplots and spatial information\",\n    minProperties: 1,\n    additionalProperties: false,\n    required: [],\n    properties: {\n      xy: {\n        type: \"string\",\n        description: \"The location in the AnnData store of cell centroids, like 'obsm/X_centroids.'\"\n      },\n      poly: {\n        type: \"string\",\n        description: \"The location in the AnnData store of cell polygon outlines, like 'obsm/X_polygons.'\"\n      },\n      factors: {\n        type: \"array\",\n        description: \"List of locations in the AnnData store of cell sets, like 'obs/louvain'\",\n        items: {\n          type: \"string\"\n        }\n      },\n      mappings: {\n        patternProperties: {\n          \".\": {\n            type: \"object\",\n            description: \"An object containing key-values for mappings like { UMAP: { key: 'obsm/X_umap', dims: [0, 1] } }.\",\n            additionalProperties: false,\n            required: [\"key\"],\n            properties: {\n              key: {\n                type: \"string\",\n                description: \"Where to look in the AnnData store for this mapping, like 'obsm/X_umap.'\"\n              },\n              dims: {\n                type: \"array\",\n                description: \"Which indices of the obsm object to take for a scatterplot, allowing for, for example, different PCs from obsm/X_pca\",\n                minItems: 2,\n                maxItems: 2,\n                items: {\n                  type: \"number\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  annDataExpressionMatrix: {\n    type: \"object\",\n    description: \"The properties of this object are the configuration for how to fetch the cell x genes matrix\",\n    additionalProperties: false,\n    required: [\"matrix\"],\n    properties: {\n      matrix: {\n        type: \"string\",\n        description: \"The location in the AnnData store of the cell x gene matrix, like 'obsm/hvg_subset.' or 'X'\"\n      },\n      geneFilter: {\n        type: \"string\",\n        description: \"The location in the AnnData store of a filter for the genes if using a subset of the data, like 'var.highly_variable.' if the matrix comes from 'obsm/hvg_subset.'\"\n      },\n      matrixGeneFilter: {\n        type: \"string\",\n        description: \"The location in the AnnData store of a filter for the matrix data (used in heatmap and histogram), like 'var.highly_variable.''\"\n      }\n    }\n  },\n  requestInit: {\n    type: \"object\",\n    description: \"The properties of this object correspond to the parameters of the JavaScript fetch() function.\",\n    additionalProperties: false,\n    required: [],\n    properties: {\n      method: {\n        type: \"string\"\n      },\n      headers: {\n        type: \"object\"\n      },\n      body: {\n        type: \"string\"\n      },\n      mode: {\n        type: \"string\"\n      },\n      credentials: {\n        type: \"string\"\n      },\n      cache: {\n        type: \"string\"\n      },\n      redirect: {\n        type: \"string\"\n      },\n      referrer: {\n        type: \"string\"\n      },\n      integrity: {\n        type: \"string\"\n      }\n    }\n  },\n  rasterLayer: {\n    description: \"The properties of this object are the rendering settings for the raster layer.\",\n    additionalProperties: false,\n    required: [\"channels\", \"colormap\", \"index\", \"opacity\", \"type\"],\n    properties: {\n      channels: {\n        type: \"array\",\n        items: {\n          type: \"object\",\n          additionalProperties: false,\n          required: [\"selection\"],\n          properties: {\n            color: {\n              type: \"array\",\n              items: {\n                type: \"number\"\n              },\n              description: \"The color to use when rendering this channel under the null colormap.\"\n            },\n            selection: {\n              type: \"object\",\n              description: \"Determines the channel selection, e.g. some Z and time slice.\"\n            },\n            slider: {\n              type: \"array\",\n              items: {\n                type: \"number\"\n              },\n              description: \"Determines the range for color mapping.\"\n            },\n            visible: {\n              type: \"boolean\",\n              description: \"Determines whether this channel of the layer will be rendered in the spatial component.\"\n            }\n          }\n        }\n      },\n      colormap: {\n        oneOf: [{\n          type: \"string\",\n          description: \"The name of the colormap to use for this layer.\"\n        }, {\n          type: \"null\",\n          description: \"Use the solid color definitions.\"\n        }]\n      },\n      transparentColor: {\n        oneOf: [{\n          type: \"array\",\n          minItems: 3,\n          maxItems: 3,\n          items: {\n            type: \"number\",\n            description: \"One of R G or B (0 - 255).\"\n          },\n          description: \"Determines the color to be set to opacity 0\"\n        }, {\n          type: \"null\",\n          description: \"No selection.\"\n        }]\n      },\n      index: {\n        type: \"number\",\n        description: \"The index of the layer among the array of layers available in the image file.\"\n      },\n      modelMatrix: {\n        oneOf: [{\n          type: \"array\",\n          minItems: 16,\n          maxItems: 16,\n          description: \"transformation matrix for this layer\"\n        }, {\n          type: \"null\",\n          description: \"Use no transformation.\"\n        }]\n      },\n      opacity: {\n        type: \"number\"\n      },\n      domainType: {\n        type: \"string\",\n        enum: [\"Full\", \"Min/Max\"],\n        description: \"Determines the extent of the channel slider input element in the layer controller.\"\n      },\n      type: {\n        type: \"string\",\n        enum: [\"raster\"]\n      }\n    }\n  },\n  moleculesLayer: {\n    description: \"The properties of this object are the rendering settings for the molecules layer.\",\n    additionalProperties: false,\n    required: [\"visible\", \"radius\", \"opacity\", \"type\"],\n    properties: {\n      visible: {\n        type: \"boolean\"\n      },\n      radius: {\n        type: \"number\"\n      },\n      opacity: {\n        type: \"number\"\n      },\n      type: {\n        type: \"string\",\n        enum: [\"molecules\"]\n      }\n    }\n  },\n  cellsLayer: {\n    description: \"The properties of this object are the rendering settings for the cells layer.\",\n    additionalProperties: false,\n    required: [\"visible\", \"stroked\", \"radius\", \"opacity\", \"type\"],\n    properties: {\n      visible: {\n        type: \"boolean\"\n      },\n      stroked: {\n        type: \"boolean\"\n      },\n      radius: {\n        type: \"number\"\n      },\n      opacity: {\n        type: \"number\"\n      },\n      type: {\n        type: \"string\",\n        enum: [\"cells\"]\n      }\n    }\n  },\n  neighborhoodsLayer: {\n    description: \"The properties of this object are the rendering settings for the neighborhoods layer.\",\n    additionalProperties: false,\n    required: [\"visible\", \"type\"],\n    properties: {\n      visible: {\n        type: \"boolean\"\n      },\n      type: {\n        type: \"string\",\n        enum: [\"neighborhoods\"]\n      }\n    }\n  },\n  spatialLayers: {\n    type: \"array\",\n    description: \"Array of Spatial Layers\",\n    items: {\n      oneOf: [{\n        $ref: \"#/definitions/rasterLayer\"\n      }, {\n        $ref: \"#/definitions/cellsLayer\"\n      }, {\n        $ref: \"#/definitions/moleculesLayer\"\n      }, {\n        $ref: \"#/definitions/neighborhoodsLayer\"\n      }]\n    }\n  }\n};\nvar additionalProperties4 = false;\nvar required4 = [\"version\", \"name\", \"datasets\", \"layout\", \"initStrategy\"];\nvar properties4 = {\n  name: {\n    type: \"string\"\n  },\n  public: {\n    type: \"boolean\"\n  },\n  description: {\n    type: \"string\"\n  },\n  datasets: {\n    type: \"array\",\n    description: \"The datasets array defines groups of files, where the files within each dataset reference the same entities (cells, genes, cell sets, etc).\",\n    items: {\n      type: \"object\",\n      additionalProperties: false,\n      required: [\"uid\", \"files\"],\n      properties: {\n        uid: {\n          type: \"string\"\n        },\n        name: {\n          type: \"string\"\n        },\n        description: {\n          type: \"string\"\n        },\n        files: {\n          type: \"array\",\n          items: {\n            type: \"object\",\n            additionalProperties: false,\n            required: [\"type\", \"fileType\"],\n            properties: {\n              name: {\n                type: \"string\"\n              },\n              type: {\n                type: \"string\"\n              },\n              fileType: {\n                type: \"string\"\n              },\n              url: {\n                type: \"string\"\n              },\n              options: {\n                oneOf: [{\n                  $ref: \"#/definitions/annDataCellSets\"\n                }, {\n                  $ref: \"https://github.com/vitessce/vitessce/#raster\"\n                }, {\n                  $ref: \"#/definitions/annDataCells\"\n                }, {\n                  $ref: \"#/definitions/annDataExpressionMatrix\"\n                }]\n              },\n              requestInit: {\n                $ref: \"#/definitions/requestInit\"\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  coordinationSpace: {\n    type: \"object\",\n    description: \"The coordination space stores the values for each scope of each coordination object.\",\n    additionalProperties: false,\n    required: [],\n    properties: {\n      dataset: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"string\"\n          }\n        }\n      },\n      embeddingZoom: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, value will be automatically set.\"\n            }, {\n              type: \"number\"\n            }]\n          }\n        }\n      },\n      embeddingRotation: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"number\"\n          }\n        }\n      },\n      embeddingTargetX: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, value will be automatically set.\"\n            }, {\n              type: \"number\"\n            }]\n          }\n        }\n      },\n      embeddingTargetY: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, value will be automatically set.\"\n            }, {\n              type: \"number\"\n            }]\n          }\n        }\n      },\n      embeddingTargetZ: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"number\"\n          }\n        }\n      },\n      embeddingType: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"string\"\n          }\n        }\n      },\n      embeddingCellSetPolygonsVisible: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"boolean\"\n          }\n        }\n      },\n      embeddingCellSetLabelsVisible: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"boolean\"\n          }\n        }\n      },\n      embeddingCellSetLabelSize: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"number\"\n          }\n        }\n      },\n      embeddingCellRadius: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"number\"\n          }\n        }\n      },\n      spatialZoom: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, value will be automatically set.\"\n            }, {\n              type: \"number\"\n            }]\n          }\n        }\n      },\n      spatialRotation: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"number\"\n          }\n        }\n      },\n      spatialTargetX: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, value will be automatically set.\"\n            }, {\n              type: \"number\"\n            }]\n          }\n        }\n      },\n      spatialTargetY: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, value will be automatically set.\"\n            }, {\n              type: \"number\"\n            }]\n          }\n        }\n      },\n      spatialTargetZ: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"number\"\n          }\n        }\n      },\n      spatialLayers: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided and auto layer initialization is enabled, layers will be automatically initialized.\"\n            }, {\n              $ref: \"#/definitions/spatialLayers\"\n            }]\n          }\n        }\n      },\n      heatmapZoomX: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"number\"\n          }\n        }\n      },\n      heatmapZoomY: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"number\"\n          }\n        }\n      },\n      heatmapTargetX: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"number\"\n          }\n        }\n      },\n      heatmapTargetY: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"number\"\n          }\n        }\n      },\n      cellFilter: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, no cells will be filtered out initially.\"\n            }, {\n              type: \"array\",\n              items: {\n                type: \"string\"\n              }\n            }]\n          }\n        }\n      },\n      cellHighlight: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, no cell will be highlighted initially.\"\n            }, {\n              type: \"string\"\n            }]\n          }\n        }\n      },\n      cellSetSelection: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided and auto cell set initialization is enabled, cell set selections will be automatically initialized.\"\n            }, {\n              type: \"array\"\n            }]\n          }\n        }\n      },\n      cellSetHighlight: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, no cell sets will be highlighted initially.\"\n            }, {\n              type: \"string\"\n            }]\n          }\n        }\n      },\n      cellSetColor: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, cell set colors will be automatically initialized.\"\n            }, {\n              type: \"array\",\n              items: {\n                type: \"object\",\n                additionalProperties: false,\n                required: [\"path\", \"color\"],\n                properties: {\n                  path: {\n                    type: \"array\",\n                    items: {\n                      type: \"string\"\n                    }\n                  },\n                  color: {\n                    type: \"array\",\n                    items: {\n                      type: \"number\"\n                    }\n                  }\n                }\n              }\n            }]\n          }\n        }\n      },\n      cellColorEncoding: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"string\"\n          }\n        }\n      },\n      geneFilter: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, no genes will be filtered out initially.\"\n            }, {\n              type: \"array\",\n              items: {\n                type: \"string\"\n              }\n            }]\n          }\n        }\n      },\n      geneHighlight: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, no genes will be highlighted initially.\"\n            }, {\n              type: \"string\"\n            }]\n          }\n        }\n      },\n      geneSelection: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\"\n            }, {\n              type: \"array\",\n              items: {\n                type: \"string\"\n              }\n            }]\n          }\n        }\n      },\n      geneExpressionTransform: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\"\n            }, {\n              type: \"string\",\n              pattern: \"log1p\"\n            }]\n          }\n        }\n      },\n      geneExpressionColormap: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"string\"\n          }\n        }\n      },\n      geneExpressionColormapRange: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"array\",\n            items: {\n              type: \"number\"\n            }\n          }\n        }\n      },\n      genomicZoomX: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"number\"\n          }\n        }\n      },\n      genomicZoomY: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"number\"\n          }\n        }\n      },\n      genomicTargetX: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"number\"\n          }\n        }\n      },\n      genomicTargetY: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"number\"\n          }\n        }\n      },\n      additionalCellSets: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, no cell will be highlighted initially.\"\n            }, {\n              $ref: \"https://github.com/vitessce/vitessce/#cell-sets\"\n            }]\n          }\n        }\n      },\n      moleculeHighlight: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, no molecule will be highlighted initially.\"\n            }, {\n              type: \"string\"\n            }]\n          }\n        }\n      }\n    }\n  },\n  layout: {\n    $ref: \"#/definitions/components\"\n  },\n  initStrategy: {\n    type: \"string\",\n    enum: [\"none\", \"auto\"],\n    description: \"The initialization strategy determines how missing coordination objects and coordination scope mappings are initially filled in.\"\n  },\n  version: {\n    type: \"string\",\n    enum: [\"1.0.0\"],\n    description: \"The schema version for the view config.\"\n  }\n};\nvar config_1_0_0_schema_default = {\n  $schema: $schema10,\n  $id: $id10,\n  title: title10,\n  type: type10,\n  definitions: definitions10,\n  additionalProperties: additionalProperties4,\n  required: required4,\n  properties: properties4\n}; // src/schemas/config-1.0.1.schema.json\n\nvar $schema11 = \"http://json-schema.org/draft-07/schema#\";\nvar $id11 = \"https://github.com/vitessce/vitessce/#dataset\";\nvar title11 = \"Vitessce data set\";\nvar type11 = \"object\";\nvar definitions11 = {\n  components: {\n    description: \"The layout array defines the views, or components, rendered in the grid.\",\n    type: \"array\",\n    items: {\n      type: \"object\",\n      additionalProperties: false,\n      required: [\"component\", \"x\", \"y\"],\n      properties: {\n        component: {\n          type: \"string\",\n          description: \"Specify a component using a name defined in the component registry.\"\n        },\n        props: {\n          type: \"object\",\n          description: \"Extra prop values for the component.\"\n        },\n        x: {\n          type: \"integer\"\n        },\n        y: {\n          type: \"integer\"\n        },\n        w: {\n          type: \"integer\"\n        },\n        h: {\n          type: \"integer\"\n        },\n        coordinationScopes: {\n          type: \"object\",\n          description: \"Component-level coordination scope mappings define which coordination object values a particular component can read and write, for each coordination type.\",\n          additionalProperties: false,\n          required: [],\n          properties: {\n            dataset: {\n              type: \"string\"\n            },\n            embeddingType: {\n              type: \"string\"\n            },\n            embeddingZoom: {\n              type: \"string\"\n            },\n            embeddingRotation: {\n              type: \"string\"\n            },\n            embeddingTargetX: {\n              type: \"string\"\n            },\n            embeddingTargetY: {\n              type: \"string\"\n            },\n            embeddingTargetZ: {\n              type: \"string\"\n            },\n            embeddingCellSetPolygonsVisible: {\n              type: \"string\"\n            },\n            embeddingCellSetLabelsVisible: {\n              type: \"string\"\n            },\n            embeddingCellSetLabelSize: {\n              type: \"string\"\n            },\n            embeddingCellRadius: {\n              type: \"string\"\n            },\n            spatialZoom: {\n              type: \"string\"\n            },\n            spatialRotation: {\n              type: \"string\"\n            },\n            spatialTargetX: {\n              type: \"string\"\n            },\n            spatialTargetY: {\n              type: \"string\"\n            },\n            spatialTargetZ: {\n              type: \"string\"\n            },\n            spatialRotationX: {\n              type: \"string\"\n            },\n            spatialRotationY: {\n              type: \"string\"\n            },\n            spatialRotationZ: {\n              type: \"string\"\n            },\n            spatialRotationOrbit: {\n              type: \"string\"\n            },\n            spatialOrbitAxis: {\n              type: \"string\"\n            },\n            spatialAxisFixed: {\n              type: \"string\"\n            },\n            heatmapZoomX: {\n              type: \"string\"\n            },\n            heatmapZoomY: {\n              type: \"string\"\n            },\n            heatmapTargetX: {\n              type: \"string\"\n            },\n            heatmapTargetY: {\n              type: \"string\"\n            },\n            cellFilter: {\n              type: \"string\"\n            },\n            cellHighlight: {\n              type: \"string\"\n            },\n            cellSetSelection: {\n              type: \"string\"\n            },\n            cellSetHighlight: {\n              type: \"string\"\n            },\n            cellSetColor: {\n              type: \"string\"\n            },\n            geneFilter: {\n              type: \"string\"\n            },\n            geneHighlight: {\n              type: \"string\"\n            },\n            geneSelection: {\n              type: \"string\"\n            },\n            geneExpressionTransform: {\n              type: \"string\"\n            },\n            geneExpressionColormap: {\n              type: \"string\"\n            },\n            geneExpressionColormapRange: {\n              type: \"string\"\n            },\n            cellColorEncoding: {\n              type: \"string\"\n            },\n            spatialRasterLayers: {\n              type: \"string\"\n            },\n            spatialCellsLayer: {\n              type: \"string\"\n            },\n            spatialMoleculesLayer: {\n              type: \"string\"\n            },\n            spatialNeighborhoodsLayer: {\n              type: \"string\"\n            },\n            genomicZoomX: {\n              type: \"string\"\n            },\n            genomicZoomY: {\n              type: \"string\"\n            },\n            genomicTargetX: {\n              type: \"string\"\n            },\n            genomicTargetY: {\n              type: \"string\"\n            },\n            additionalCellSets: {\n              type: \"string\"\n            },\n            moleculeHighlight: {\n              type: \"string\"\n            }\n          }\n        }\n      }\n    }\n  },\n  annDataCellSets: {\n    type: \"array\",\n    description: \"Array of cell set configuration, following closely the conventions of the tabular schema\",\n    items: {\n      type: \"object\",\n      additionalProperties: false,\n      required: [\"groupName\", \"setName\"],\n      properties: {\n        groupName: {\n          type: \"string\",\n          description: \"The display name for the set, like 'Cell Type' or 'Louvain.'\"\n        },\n        setName: {\n          type: \"string\",\n          description: \"The location in the AnnData store for the set, like 'obs/louvain' or 'obs/celltype.'\"\n        }\n      }\n    }\n  },\n  annDataCells: {\n    type: \"object\",\n    description: \"The properties of this object are the configuration for how to layout scatterplots and spatial information\",\n    minProperties: 1,\n    additionalProperties: false,\n    required: [],\n    properties: {\n      xy: {\n        type: \"string\",\n        description: \"The location in the AnnData store of cell centroids, like 'obsm/X_centroids.'\"\n      },\n      poly: {\n        type: \"string\",\n        description: \"The location in the AnnData store of cell polygon outlines, like 'obsm/X_polygons.'\"\n      },\n      factors: {\n        type: \"array\",\n        description: \"List of locations in the AnnData store of cell sets, like 'obs/louvain'\",\n        items: {\n          type: \"string\"\n        }\n      },\n      mappings: {\n        patternProperties: {\n          \".\": {\n            type: \"object\",\n            description: \"An object containing key-values for mappings like { UMAP: { key: 'obsm/X_umap', dims: [0, 1] } }.\",\n            additionalProperties: false,\n            required: [\"key\"],\n            properties: {\n              key: {\n                type: \"string\",\n                description: \"Where to look in the AnnData store for this mapping, like 'obsm/X_umap.'\"\n              },\n              dims: {\n                type: \"array\",\n                description: \"Which indices of the obsm object to take for a scatterplot, allowing for, for example, different PCs from obsm/X_pca\",\n                minItems: 2,\n                maxItems: 2,\n                items: {\n                  type: \"number\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  annDataExpressionMatrix: {\n    type: \"object\",\n    description: \"The properties of this object are the configuration for how to fetch the cell x genes matrix\",\n    additionalProperties: false,\n    required: [\"matrix\"],\n    properties: {\n      matrix: {\n        type: \"string\",\n        description: \"The location in the AnnData store of the cell x gene matrix, like 'obsm/hvg_subset.' or 'X'\"\n      },\n      geneFilter: {\n        type: \"string\",\n        description: \"The location in the AnnData store of a filter for the genes if using a subset of the data, like 'var.highly_variable.' if the matrix comes from 'obsm/hvg_subset.'\"\n      },\n      matrixGeneFilter: {\n        type: \"string\",\n        description: \"The location in the AnnData store of a filter for the matrix data (used in heatmap and histogram), like 'var.highly_variable.''\"\n      }\n    }\n  },\n  requestInit: {\n    type: \"object\",\n    description: \"The properties of this object correspond to the parameters of the JavaScript fetch() function.\",\n    additionalProperties: false,\n    required: [],\n    properties: {\n      method: {\n        type: \"string\"\n      },\n      headers: {\n        type: \"object\"\n      },\n      body: {\n        type: \"string\"\n      },\n      mode: {\n        type: \"string\"\n      },\n      credentials: {\n        type: \"string\"\n      },\n      cache: {\n        type: \"string\"\n      },\n      redirect: {\n        type: \"string\"\n      },\n      referrer: {\n        type: \"string\"\n      },\n      integrity: {\n        type: \"string\"\n      }\n    }\n  },\n  rasterLayer: {\n    description: \"The properties of this object are the rendering settings for the raster layer.\",\n    additionalProperties: false,\n    required: [\"channels\", \"colormap\", \"index\", \"opacity\"],\n    properties: {\n      channels: {\n        type: \"array\",\n        items: {\n          type: \"object\",\n          additionalProperties: false,\n          required: [\"selection\"],\n          properties: {\n            color: {\n              type: \"array\",\n              items: {\n                type: \"number\"\n              },\n              description: \"The color to use when rendering this channel under the null colormap.\"\n            },\n            selection: {\n              type: \"object\",\n              description: \"Determines the channel selection, e.g. some Z and time slice.\"\n            },\n            slider: {\n              type: \"array\",\n              items: {\n                type: \"number\"\n              },\n              description: \"Determines the range for color mapping.\"\n            },\n            visible: {\n              type: \"boolean\",\n              description: \"Determines whether this channel of the layer will be rendered in the spatial component.\"\n            }\n          }\n        }\n      },\n      colormap: {\n        oneOf: [{\n          type: \"string\",\n          description: \"The name of the colormap to use for this layer.\"\n        }, {\n          type: \"null\",\n          description: \"Use the solid color definitions.\"\n        }]\n      },\n      transparentColor: {\n        oneOf: [{\n          type: \"array\",\n          minItems: 3,\n          maxItems: 3,\n          items: {\n            type: \"number\",\n            description: \"One of R G or B (0 - 255).\"\n          },\n          description: \"Determines the color to be set to opacity 0\"\n        }, {\n          type: \"null\",\n          description: \"No selection.\"\n        }]\n      },\n      index: {\n        type: \"number\",\n        description: \"The index of the layer among the array of layers available in the image file.\"\n      },\n      opacity: {\n        type: \"number\"\n      },\n      modelMatrix: {\n        oneOf: [{\n          type: \"array\",\n          minItems: 16,\n          maxItems: 16,\n          description: \"transformation matrix for this layer\"\n        }, {\n          type: \"null\",\n          description: \"Use no transformation.\"\n        }]\n      },\n      domainType: {\n        type: \"string\",\n        enum: [\"Full\", \"Min/Max\"],\n        description: \"Determines the extent of the channel slider input element in the layer controller.\"\n      },\n      resolution: {\n        type: \"number\",\n        description: \"Resolution of 3D volumetric rendering\"\n      },\n      xSlice: {\n        oneOf: [{\n          type: \"array\",\n          minItems: 2,\n          maxItems: 2,\n          description: \"Slice bounds\"\n        }, {\n          type: \"null\",\n          description: \"No slicing\"\n        }]\n      },\n      renderingMode: {\n        type: \"string\",\n        description: \"Rendering mode of 3D volumetric rendering\"\n      },\n      ySlice: {\n        oneOf: [{\n          type: \"array\",\n          minItems: 2,\n          maxItems: 2,\n          description: \"Slice bounds\"\n        }, {\n          type: \"null\",\n          description: \"No slicing\"\n        }]\n      },\n      zSlice: {\n        oneOf: [{\n          type: \"array\",\n          minItems: 2,\n          maxItems: 2,\n          description: \"Slice bounds\"\n        }, {\n          type: \"null\",\n          description: \"No slicing\"\n        }]\n      },\n      type: {\n        type: \"string\"\n      },\n      use3d: {\n        type: \"boolean\"\n      },\n      visible: {\n        type: \"boolean\",\n        description: \"Determines whether this entire layer will be rendered in the spatial component.\"\n      }\n    }\n  },\n  moleculesLayer: {\n    type: \"object\",\n    description: \"The properties of this object are the rendering settings for the molecules layer.\",\n    additionalProperties: false,\n    required: [\"visible\", \"radius\", \"opacity\"],\n    properties: {\n      visible: {\n        type: \"boolean\"\n      },\n      radius: {\n        type: \"number\"\n      },\n      opacity: {\n        type: \"number\"\n      }\n    }\n  },\n  cellsLayer: {\n    type: \"object\",\n    description: \"The properties of this object are the rendering settings for the cells layer.\",\n    additionalProperties: false,\n    required: [\"visible\", \"stroked\", \"radius\", \"opacity\"],\n    properties: {\n      visible: {\n        type: \"boolean\"\n      },\n      stroked: {\n        type: \"boolean\"\n      },\n      radius: {\n        type: \"number\"\n      },\n      opacity: {\n        type: \"number\"\n      }\n    }\n  },\n  neighborhoodsLayer: {\n    type: \"object\",\n    description: \"The properties of this object are the rendering settings for the neighborhoods layer.\",\n    additionalProperties: false,\n    required: [\"visible\"],\n    properties: {\n      visible: {\n        type: \"boolean\"\n      }\n    }\n  },\n  spatialRasterLayers: {\n    type: \"array\",\n    description: \"Array of Spatial Layers\",\n    items: {\n      $ref: \"#/definitions/rasterLayer\"\n    }\n  }\n};\nvar additionalProperties5 = false;\nvar required5 = [\"version\", \"name\", \"datasets\", \"layout\", \"initStrategy\"];\nvar properties5 = {\n  name: {\n    type: \"string\"\n  },\n  public: {\n    type: \"boolean\"\n  },\n  description: {\n    type: \"string\"\n  },\n  datasets: {\n    type: \"array\",\n    description: \"The datasets array defines groups of files, where the files within each dataset reference the same entities (cells, genes, cell sets, etc).\",\n    items: {\n      type: \"object\",\n      additionalProperties: false,\n      required: [\"uid\", \"files\"],\n      properties: {\n        uid: {\n          type: \"string\"\n        },\n        name: {\n          type: \"string\"\n        },\n        description: {\n          type: \"string\"\n        },\n        files: {\n          type: \"array\",\n          items: {\n            type: \"object\",\n            additionalProperties: false,\n            required: [\"type\", \"fileType\"],\n            properties: {\n              name: {\n                type: \"string\"\n              },\n              type: {\n                type: \"string\"\n              },\n              fileType: {\n                type: \"string\"\n              },\n              url: {\n                type: \"string\"\n              },\n              options: {\n                oneOf: [{\n                  $ref: \"#/definitions/annDataCellSets\"\n                }, {\n                  $ref: \"https://github.com/vitessce/vitessce/#raster\"\n                }, {\n                  $ref: \"#/definitions/annDataCells\"\n                }, {\n                  $ref: \"#/definitions/annDataExpressionMatrix\"\n                }]\n              },\n              requestInit: {\n                $ref: \"#/definitions/requestInit\"\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  coordinationSpace: {\n    type: \"object\",\n    description: \"The coordination space stores the values for each scope of each coordination object.\",\n    additionalProperties: false,\n    required: [],\n    properties: {\n      dataset: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"string\"\n          }\n        }\n      },\n      embeddingZoom: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, value will be automatically set.\"\n            }, {\n              type: \"number\"\n            }]\n          }\n        }\n      },\n      embeddingRotation: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"number\"\n          }\n        }\n      },\n      embeddingTargetX: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, value will be automatically set.\"\n            }, {\n              type: \"number\"\n            }]\n          }\n        }\n      },\n      embeddingTargetY: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, value will be automatically set.\"\n            }, {\n              type: \"number\"\n            }]\n          }\n        }\n      },\n      embeddingTargetZ: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"number\"\n          }\n        }\n      },\n      embeddingType: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"string\"\n          }\n        }\n      },\n      embeddingCellSetPolygonsVisible: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"boolean\"\n          }\n        }\n      },\n      embeddingCellSetLabelsVisible: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"boolean\"\n          }\n        }\n      },\n      embeddingCellSetLabelSize: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"number\"\n          }\n        }\n      },\n      embeddingCellRadius: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"number\"\n          }\n        }\n      },\n      spatialZoom: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, value will be automatically set.\"\n            }, {\n              type: \"number\"\n            }]\n          }\n        }\n      },\n      spatialRotation: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"number\"\n          }\n        }\n      },\n      spatialTargetX: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, value will be automatically set.\"\n            }, {\n              type: \"number\"\n            }]\n          }\n        }\n      },\n      spatialTargetY: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, value will be automatically set.\"\n            }, {\n              type: \"number\"\n            }]\n          }\n        }\n      },\n      spatialTargetZ: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, value will be automatically set.\"\n            }, {\n              type: \"number\"\n            }]\n          }\n        }\n      },\n      spatialRotationX: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, value will be automatically set. Only useful for 3D viewing.\"\n            }, {\n              type: \"number\"\n            }]\n          }\n        }\n      },\n      spatialRotationY: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, value will be automatically set. Only useful for 3D viewing.\"\n            }, {\n              type: \"number\"\n            }]\n          }\n        }\n      },\n      spatialRotationZ: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, value will be automatically set. Only useful for 3D viewing.\"\n            }, {\n              type: \"number\"\n            }]\n          }\n        }\n      },\n      spatialRotationOrbit: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, value will be automatically set. Only useful for 3D viewing.\"\n            }, {\n              type: \"number\"\n            }]\n          }\n        }\n      },\n      spatialOrbitAxis: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, value will be automatically set. Only useful for 3D viewing.\"\n            }, {\n              type: \"string\"\n            }]\n          }\n        }\n      },\n      spatialAxisFixed: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"Whether or not to have a fixed axis for the camera. Only useful for 3D viewing.\"\n            }, {\n              type: \"boolean\"\n            }]\n          }\n        }\n      },\n      spatialRasterLayers: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided and auto layer initialization is enabled, layers will be automatically initialized.\"\n            }, {\n              $ref: \"#/definitions/spatialRasterLayers\"\n            }]\n          }\n        }\n      },\n      spatialCellsLayer: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided and auto layer initialization is enabled, layers will be automatically initialized.\"\n            }, {\n              $ref: \"#/definitions/cellsLayer\"\n            }]\n          }\n        }\n      },\n      spatialNeighborhoodsLayer: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided and auto layer initialization is enabled, layers will be automatically initialized.\"\n            }, {\n              $ref: \"#/definitions/neighborhoodsLayer\"\n            }]\n          }\n        }\n      },\n      spatialMoleculesLayer: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided and auto layer initialization is enabled, layers will be automatically initialized.\"\n            }, {\n              $ref: \"#/definitions/moleculesLayer\"\n            }]\n          }\n        }\n      },\n      heatmapZoomX: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"number\"\n          }\n        }\n      },\n      heatmapZoomY: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"number\"\n          }\n        }\n      },\n      heatmapTargetX: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"number\"\n          }\n        }\n      },\n      heatmapTargetY: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"number\"\n          }\n        }\n      },\n      cellFilter: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, no cells will be filtered out initially.\"\n            }, {\n              type: \"array\",\n              items: {\n                type: \"string\"\n              }\n            }]\n          }\n        }\n      },\n      cellHighlight: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, no cell will be highlighted initially.\"\n            }, {\n              type: \"string\"\n            }]\n          }\n        }\n      },\n      cellSetSelection: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided and auto cell set initialization is enabled, cell set selections will be automatically initialized.\"\n            }, {\n              type: \"array\"\n            }]\n          }\n        }\n      },\n      cellSetHighlight: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, no cell sets will be highlighted initially.\"\n            }, {\n              type: \"string\"\n            }]\n          }\n        }\n      },\n      cellSetColor: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, cell set colors will be automatically initialized.\"\n            }, {\n              type: \"array\",\n              items: {\n                type: \"object\",\n                additionalProperties: false,\n                required: [\"path\", \"color\"],\n                properties: {\n                  path: {\n                    type: \"array\",\n                    items: {\n                      type: \"string\"\n                    }\n                  },\n                  color: {\n                    type: \"array\",\n                    items: {\n                      type: \"number\"\n                    }\n                  }\n                }\n              }\n            }]\n          }\n        }\n      },\n      cellColorEncoding: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"string\"\n          }\n        }\n      },\n      geneFilter: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, no genes will be filtered out initially.\"\n            }, {\n              type: \"array\",\n              items: {\n                type: \"string\"\n              }\n            }]\n          }\n        }\n      },\n      geneHighlight: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, no genes will be highlighted initially.\"\n            }, {\n              type: \"string\"\n            }]\n          }\n        }\n      },\n      geneSelection: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\"\n            }, {\n              type: \"array\",\n              items: {\n                type: \"string\"\n              }\n            }]\n          }\n        }\n      },\n      geneExpressionTransform: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\"\n            }, {\n              type: \"string\",\n              pattern: \"log1p\"\n            }]\n          }\n        }\n      },\n      geneExpressionColormap: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"string\"\n          }\n        }\n      },\n      geneExpressionColormapRange: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"array\",\n            items: {\n              type: \"number\"\n            }\n          }\n        }\n      },\n      genomicZoomX: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"number\"\n          }\n        }\n      },\n      genomicZoomY: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"number\"\n          }\n        }\n      },\n      genomicTargetX: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"number\"\n          }\n        }\n      },\n      genomicTargetY: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"number\"\n          }\n        }\n      },\n      additionalCellSets: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, no cell will be highlighted initially.\"\n            }, {\n              $ref: \"https://github.com/vitessce/vitessce/#cell-sets\"\n            }]\n          }\n        }\n      },\n      moleculeHighlight: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, no molecule will be highlighted initially.\"\n            }, {\n              type: \"string\"\n            }]\n          }\n        }\n      }\n    }\n  },\n  layout: {\n    $ref: \"#/definitions/components\"\n  },\n  initStrategy: {\n    type: \"string\",\n    enum: [\"none\", \"auto\"],\n    description: \"The initialization strategy determines how missing coordination objects and coordination scope mappings are initially filled in.\"\n  },\n  version: {\n    type: \"string\",\n    enum: [\"1.0.1\"],\n    description: \"The schema version for the view config.\"\n  }\n};\nvar config_1_0_1_schema_default = {\n  $schema: $schema11,\n  $id: $id11,\n  title: title11,\n  type: type11,\n  definitions: definitions11,\n  additionalProperties: additionalProperties5,\n  required: required5,\n  properties: properties5\n}; // src/schemas/config-1.0.2.schema.json\n\nvar $schema12 = \"http://json-schema.org/draft-07/schema#\";\nvar $id12 = \"https://github.com/vitessce/vitessce/#dataset\";\nvar title12 = \"Vitessce data set\";\nvar type12 = \"object\";\nvar definitions12 = {\n  components: {\n    description: \"The layout array defines the views, or components, rendered in the grid.\",\n    type: \"array\",\n    items: {\n      type: \"object\",\n      additionalProperties: false,\n      required: [\"component\", \"x\", \"y\"],\n      properties: {\n        component: {\n          type: \"string\",\n          description: \"Specify a component using a name defined in the component registry.\"\n        },\n        props: {\n          type: \"object\",\n          description: \"Extra prop values for the component.\"\n        },\n        x: {\n          type: \"integer\"\n        },\n        y: {\n          type: \"integer\"\n        },\n        w: {\n          type: \"integer\"\n        },\n        h: {\n          type: \"integer\"\n        },\n        coordinationScopes: {\n          type: \"object\",\n          description: \"Component-level coordination scope mappings define which coordination object values a particular component can read and write, for each coordination type.\",\n          additionalProperties: false,\n          required: [],\n          properties: {\n            dataset: {\n              type: \"string\"\n            },\n            embeddingType: {\n              type: \"string\"\n            },\n            embeddingZoom: {\n              type: \"string\"\n            },\n            embeddingRotation: {\n              type: \"string\"\n            },\n            embeddingTargetX: {\n              type: \"string\"\n            },\n            embeddingTargetY: {\n              type: \"string\"\n            },\n            embeddingTargetZ: {\n              type: \"string\"\n            },\n            embeddingCellSetPolygonsVisible: {\n              type: \"string\"\n            },\n            embeddingCellSetLabelsVisible: {\n              type: \"string\"\n            },\n            embeddingCellSetLabelSize: {\n              type: \"string\"\n            },\n            embeddingCellRadius: {\n              type: \"string\"\n            },\n            spatialZoom: {\n              type: \"string\"\n            },\n            spatialRotation: {\n              type: \"string\"\n            },\n            spatialTargetX: {\n              type: \"string\"\n            },\n            spatialTargetY: {\n              type: \"string\"\n            },\n            spatialTargetZ: {\n              type: \"string\"\n            },\n            spatialRotationX: {\n              type: \"string\"\n            },\n            spatialRotationY: {\n              type: \"string\"\n            },\n            spatialRotationZ: {\n              type: \"string\"\n            },\n            spatialRotationOrbit: {\n              type: \"string\"\n            },\n            spatialOrbitAxis: {\n              type: \"string\"\n            },\n            spatialAxisFixed: {\n              type: \"string\"\n            },\n            heatmapZoomX: {\n              type: \"string\"\n            },\n            heatmapZoomY: {\n              type: \"string\"\n            },\n            heatmapTargetX: {\n              type: \"string\"\n            },\n            heatmapTargetY: {\n              type: \"string\"\n            },\n            cellFilter: {\n              type: \"string\"\n            },\n            cellHighlight: {\n              type: \"string\"\n            },\n            cellSetSelection: {\n              type: \"string\"\n            },\n            cellSetHighlight: {\n              type: \"string\"\n            },\n            cellSetColor: {\n              type: \"string\"\n            },\n            geneFilter: {\n              type: \"string\"\n            },\n            geneHighlight: {\n              type: \"string\"\n            },\n            geneSelection: {\n              type: \"string\"\n            },\n            geneExpressionTransform: {\n              type: \"string\"\n            },\n            geneExpressionColormap: {\n              type: \"string\"\n            },\n            geneExpressionColormapRange: {\n              type: \"string\"\n            },\n            cellColorEncoding: {\n              type: \"string\"\n            },\n            spatialRasterLayers: {\n              type: \"string\"\n            },\n            spatialCellsLayer: {\n              type: \"string\"\n            },\n            spatialMoleculesLayer: {\n              type: \"string\"\n            },\n            spatialNeighborhoodsLayer: {\n              type: \"string\"\n            },\n            genomicZoomX: {\n              type: \"string\"\n            },\n            genomicZoomY: {\n              type: \"string\"\n            },\n            genomicTargetX: {\n              type: \"string\"\n            },\n            genomicTargetY: {\n              type: \"string\"\n            },\n            additionalCellSets: {\n              type: \"string\"\n            },\n            moleculeHighlight: {\n              type: \"string\"\n            }\n          }\n        }\n      }\n    }\n  },\n  annDataCellSets: {\n    type: \"array\",\n    description: \"Array of cell set configuration, following closely the conventions of the tabular schema\",\n    items: {\n      type: \"object\",\n      additionalProperties: false,\n      required: [\"groupName\", \"setName\"],\n      properties: {\n        groupName: {\n          type: \"string\",\n          description: \"The display name for the set, like 'Cell Type' or 'Louvain.'\"\n        },\n        setName: {\n          type: \"string\",\n          description: \"The location in the AnnData store for the set, like 'obs/louvain' or 'obs/celltype.'\"\n        }\n      }\n    }\n  },\n  annDataCells: {\n    type: \"object\",\n    description: \"The properties of this object are the configuration for how to layout scatterplots and spatial information\",\n    minProperties: 1,\n    additionalProperties: false,\n    required: [],\n    properties: {\n      xy: {\n        type: \"string\",\n        description: \"The location in the AnnData store of cell centroids, like 'obsm/X_centroids.'\"\n      },\n      poly: {\n        type: \"string\",\n        description: \"The location in the AnnData store of cell polygon outlines, like 'obsm/X_polygons.'\"\n      },\n      factors: {\n        type: \"array\",\n        description: \"List of locations in the AnnData store of cell sets, like 'obs/louvain'\",\n        items: {\n          type: \"string\"\n        }\n      },\n      mappings: {\n        patternProperties: {\n          \".\": {\n            type: \"object\",\n            description: \"An object containing key-values for mappings like { UMAP: { key: 'obsm/X_umap', dims: [0, 1] } }.\",\n            additionalProperties: false,\n            required: [\"key\"],\n            properties: {\n              key: {\n                type: \"string\",\n                description: \"Where to look in the AnnData store for this mapping, like 'obsm/X_umap.'\"\n              },\n              dims: {\n                type: \"array\",\n                description: \"Which indices of the obsm object to take for a scatterplot, allowing for, for example, different PCs from obsm/X_pca\",\n                minItems: 2,\n                maxItems: 2,\n                items: {\n                  type: \"number\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  annDataExpressionMatrix: {\n    type: \"object\",\n    description: \"The properties of this object are the configuration for how to fetch the cell x genes matrix\",\n    additionalProperties: false,\n    required: [\"matrix\"],\n    properties: {\n      matrix: {\n        type: \"string\",\n        description: \"The location in the AnnData store of the cell x gene matrix, like 'obsm/hvg_subset.' or 'X'\"\n      },\n      geneFilter: {\n        type: \"string\",\n        description: \"The location in the AnnData store of a filter for the genes if using a subset of the data, like 'var.highly_variable.' if the matrix comes from 'obsm/hvg_subset.'\"\n      },\n      matrixGeneFilter: {\n        type: \"string\",\n        description: \"The location in the AnnData store of a filter for the matrix data (used in heatmap and histogram), like 'var.highly_variable.''\"\n      }\n    }\n  },\n  requestInit: {\n    type: \"object\",\n    description: \"The properties of this object correspond to the parameters of the JavaScript fetch() function.\",\n    additionalProperties: false,\n    required: [],\n    properties: {\n      method: {\n        type: \"string\"\n      },\n      headers: {\n        type: \"object\"\n      },\n      body: {\n        type: \"string\"\n      },\n      mode: {\n        type: \"string\"\n      },\n      credentials: {\n        type: \"string\"\n      },\n      cache: {\n        type: \"string\"\n      },\n      redirect: {\n        type: \"string\"\n      },\n      referrer: {\n        type: \"string\"\n      },\n      integrity: {\n        type: \"string\"\n      }\n    }\n  },\n  rasterLayer: {\n    description: \"The properties of this object are the rendering settings for the raster layer.\",\n    additionalProperties: false,\n    required: [\"channels\", \"colormap\", \"index\", \"opacity\"],\n    properties: {\n      channels: {\n        type: \"array\",\n        items: {\n          type: \"object\",\n          additionalProperties: false,\n          required: [\"selection\"],\n          properties: {\n            color: {\n              type: \"array\",\n              items: {\n                type: \"number\"\n              },\n              description: \"The color to use when rendering this channel under the null colormap.\"\n            },\n            selection: {\n              type: \"object\",\n              description: \"Determines the channel selection, e.g. some Z and time slice.\"\n            },\n            slider: {\n              type: \"array\",\n              items: {\n                type: \"number\"\n              },\n              description: \"Determines the range for color mapping.\"\n            },\n            visible: {\n              type: \"boolean\",\n              description: \"Determines whether this channel of the layer will be rendered in the spatial component.\"\n            }\n          }\n        }\n      },\n      colormap: {\n        oneOf: [{\n          type: \"string\",\n          description: \"The name of the colormap to use for this layer.\"\n        }, {\n          type: \"null\",\n          description: \"Use the solid color definitions.\"\n        }]\n      },\n      transparentColor: {\n        oneOf: [{\n          type: \"array\",\n          minItems: 3,\n          maxItems: 3,\n          items: {\n            type: \"number\",\n            description: \"One of R G or B (0 - 255).\"\n          },\n          description: \"Determines the color to be set to opacity 0\"\n        }, {\n          type: \"null\",\n          description: \"No selection.\"\n        }]\n      },\n      index: {\n        type: \"number\",\n        description: \"The index of the layer among the array of layers available in the image file.\"\n      },\n      opacity: {\n        type: \"number\"\n      },\n      modelMatrix: {\n        oneOf: [{\n          type: \"array\",\n          minItems: 16,\n          maxItems: 16,\n          description: \"transformation matrix for this layer\"\n        }, {\n          type: \"null\",\n          description: \"Use no transformation.\"\n        }]\n      },\n      domainType: {\n        type: \"string\",\n        enum: [\"Full\", \"Min/Max\"],\n        description: \"Determines the extent of the channel slider input element in the layer controller.\"\n      },\n      resolution: {\n        type: \"number\",\n        description: \"Resolution of 3D volumetric rendering\"\n      },\n      xSlice: {\n        oneOf: [{\n          type: \"array\",\n          minItems: 2,\n          maxItems: 2,\n          description: \"Slice bounds\"\n        }, {\n          type: \"null\",\n          description: \"No slicing\"\n        }]\n      },\n      renderingMode: {\n        type: \"string\",\n        description: \"Rendering mode of 3D volumetric rendering\"\n      },\n      ySlice: {\n        oneOf: [{\n          type: \"array\",\n          minItems: 2,\n          maxItems: 2,\n          description: \"Slice bounds\"\n        }, {\n          type: \"null\",\n          description: \"No slicing\"\n        }]\n      },\n      zSlice: {\n        oneOf: [{\n          type: \"array\",\n          minItems: 2,\n          maxItems: 2,\n          description: \"Slice bounds\"\n        }, {\n          type: \"null\",\n          description: \"No slicing\"\n        }]\n      },\n      type: {\n        type: \"string\",\n        enum: [\"raster\", \"bitmask\"]\n      },\n      use3d: {\n        type: \"boolean\"\n      },\n      visible: {\n        type: \"boolean\",\n        description: \"Determines whether this entire layer will be rendered in the spatial component.\"\n      }\n    }\n  },\n  moleculesLayer: {\n    type: \"object\",\n    description: \"The properties of this object are the rendering settings for the molecules layer.\",\n    additionalProperties: false,\n    required: [\"visible\", \"radius\", \"opacity\"],\n    properties: {\n      visible: {\n        type: \"boolean\"\n      },\n      radius: {\n        type: \"number\"\n      },\n      opacity: {\n        type: \"number\"\n      }\n    }\n  },\n  cellsLayer: {\n    type: \"object\",\n    description: \"The properties of this object are the rendering settings for the cells layer.\",\n    additionalProperties: false,\n    required: [\"visible\", \"stroked\", \"radius\", \"opacity\"],\n    properties: {\n      visible: {\n        type: \"boolean\"\n      },\n      stroked: {\n        type: \"boolean\"\n      },\n      radius: {\n        type: \"number\"\n      },\n      opacity: {\n        type: \"number\"\n      }\n    }\n  },\n  neighborhoodsLayer: {\n    type: \"object\",\n    description: \"The properties of this object are the rendering settings for the neighborhoods layer.\",\n    additionalProperties: false,\n    required: [\"visible\"],\n    properties: {\n      visible: {\n        type: \"boolean\"\n      }\n    }\n  },\n  spatialRasterLayers: {\n    type: \"array\",\n    description: \"Array of Spatial Layers\",\n    items: {\n      $ref: \"#/definitions/rasterLayer\"\n    }\n  }\n};\nvar additionalProperties6 = false;\nvar required6 = [\"version\", \"name\", \"datasets\", \"layout\", \"initStrategy\"];\nvar properties6 = {\n  name: {\n    type: \"string\"\n  },\n  public: {\n    type: \"boolean\"\n  },\n  description: {\n    type: \"string\"\n  },\n  datasets: {\n    type: \"array\",\n    description: \"The datasets array defines groups of files, where the files within each dataset reference the same entities (cells, genes, cell sets, etc).\",\n    items: {\n      type: \"object\",\n      additionalProperties: false,\n      required: [\"uid\", \"files\"],\n      properties: {\n        uid: {\n          type: \"string\"\n        },\n        name: {\n          type: \"string\"\n        },\n        description: {\n          type: \"string\"\n        },\n        files: {\n          type: \"array\",\n          items: {\n            type: \"object\",\n            additionalProperties: false,\n            required: [\"type\", \"fileType\"],\n            properties: {\n              name: {\n                type: \"string\"\n              },\n              type: {\n                type: \"string\"\n              },\n              fileType: {\n                type: \"string\"\n              },\n              url: {\n                type: \"string\"\n              },\n              options: {\n                oneOf: [{\n                  $ref: \"#/definitions/annDataCellSets\"\n                }, {\n                  $ref: \"https://github.com/vitessce/vitessce/#raster\"\n                }, {\n                  $ref: \"#/definitions/annDataCells\"\n                }, {\n                  $ref: \"#/definitions/annDataExpressionMatrix\"\n                }]\n              },\n              requestInit: {\n                $ref: \"#/definitions/requestInit\"\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  coordinationSpace: {\n    type: \"object\",\n    description: \"The coordination space stores the values for each scope of each coordination object.\",\n    additionalProperties: false,\n    required: [],\n    properties: {\n      dataset: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"string\"\n          }\n        }\n      },\n      embeddingZoom: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, value will be automatically set.\"\n            }, {\n              type: \"number\"\n            }]\n          }\n        }\n      },\n      embeddingRotation: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"number\"\n          }\n        }\n      },\n      embeddingTargetX: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, value will be automatically set.\"\n            }, {\n              type: \"number\"\n            }]\n          }\n        }\n      },\n      embeddingTargetY: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, value will be automatically set.\"\n            }, {\n              type: \"number\"\n            }]\n          }\n        }\n      },\n      embeddingTargetZ: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"number\"\n          }\n        }\n      },\n      embeddingType: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"string\"\n          }\n        }\n      },\n      embeddingCellSetPolygonsVisible: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"boolean\"\n          }\n        }\n      },\n      embeddingCellSetLabelsVisible: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"boolean\"\n          }\n        }\n      },\n      embeddingCellSetLabelSize: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"number\"\n          }\n        }\n      },\n      embeddingCellRadius: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"number\"\n          }\n        }\n      },\n      spatialZoom: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, value will be automatically set.\"\n            }, {\n              type: \"number\"\n            }]\n          }\n        }\n      },\n      spatialRotation: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"number\"\n          }\n        }\n      },\n      spatialTargetX: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, value will be automatically set.\"\n            }, {\n              type: \"number\"\n            }]\n          }\n        }\n      },\n      spatialTargetY: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, value will be automatically set.\"\n            }, {\n              type: \"number\"\n            }]\n          }\n        }\n      },\n      spatialTargetZ: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, value will be automatically set.\"\n            }, {\n              type: \"number\"\n            }]\n          }\n        }\n      },\n      spatialRotationX: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, value will be automatically set. Only useful for 3D viewing.\"\n            }, {\n              type: \"number\"\n            }]\n          }\n        }\n      },\n      spatialRotationY: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, value will be automatically set. Only useful for 3D viewing.\"\n            }, {\n              type: \"number\"\n            }]\n          }\n        }\n      },\n      spatialRotationZ: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, value will be automatically set. Only useful for 3D viewing.\"\n            }, {\n              type: \"number\"\n            }]\n          }\n        }\n      },\n      spatialRotationOrbit: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, value will be automatically set. Only useful for 3D viewing.\"\n            }, {\n              type: \"number\"\n            }]\n          }\n        }\n      },\n      spatialOrbitAxis: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, value will be automatically set. Only useful for 3D viewing.\"\n            }, {\n              type: \"string\"\n            }]\n          }\n        }\n      },\n      spatialAxisFixed: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"Whether or not to have a fixed axis for the camera. Only useful for 3D viewing.\"\n            }, {\n              type: \"boolean\"\n            }]\n          }\n        }\n      },\n      spatialRasterLayers: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided and auto layer initialization is enabled, layers will be automatically initialized.\"\n            }, {\n              $ref: \"#/definitions/spatialRasterLayers\"\n            }]\n          }\n        }\n      },\n      spatialCellsLayer: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided and auto layer initialization is enabled, layers will be automatically initialized.\"\n            }, {\n              $ref: \"#/definitions/cellsLayer\"\n            }]\n          }\n        }\n      },\n      spatialNeighborhoodsLayer: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided and auto layer initialization is enabled, layers will be automatically initialized.\"\n            }, {\n              $ref: \"#/definitions/neighborhoodsLayer\"\n            }]\n          }\n        }\n      },\n      spatialMoleculesLayer: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided and auto layer initialization is enabled, layers will be automatically initialized.\"\n            }, {\n              $ref: \"#/definitions/moleculesLayer\"\n            }]\n          }\n        }\n      },\n      heatmapZoomX: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"number\"\n          }\n        }\n      },\n      heatmapZoomY: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"number\"\n          }\n        }\n      },\n      heatmapTargetX: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"number\"\n          }\n        }\n      },\n      heatmapTargetY: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"number\"\n          }\n        }\n      },\n      cellFilter: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, no cells will be filtered out initially.\"\n            }, {\n              type: \"array\",\n              items: {\n                type: \"string\"\n              }\n            }]\n          }\n        }\n      },\n      cellHighlight: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, no cell will be highlighted initially.\"\n            }, {\n              type: \"string\"\n            }]\n          }\n        }\n      },\n      cellSetSelection: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided and auto cell set initialization is enabled, cell set selections will be automatically initialized.\"\n            }, {\n              type: \"array\"\n            }]\n          }\n        }\n      },\n      cellSetHighlight: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, no cell sets will be highlighted initially.\"\n            }, {\n              type: \"string\"\n            }]\n          }\n        }\n      },\n      cellSetColor: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, cell set colors will be automatically initialized.\"\n            }, {\n              type: \"array\",\n              items: {\n                type: \"object\",\n                additionalProperties: false,\n                required: [\"path\", \"color\"],\n                properties: {\n                  path: {\n                    type: \"array\",\n                    items: {\n                      type: \"string\"\n                    }\n                  },\n                  color: {\n                    type: \"array\",\n                    items: {\n                      type: \"number\"\n                    }\n                  }\n                }\n              }\n            }]\n          }\n        }\n      },\n      cellColorEncoding: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"string\"\n          }\n        }\n      },\n      geneFilter: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, no genes will be filtered out initially.\"\n            }, {\n              type: \"array\",\n              items: {\n                type: \"string\"\n              }\n            }]\n          }\n        }\n      },\n      geneHighlight: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, no genes will be highlighted initially.\"\n            }, {\n              type: \"string\"\n            }]\n          }\n        }\n      },\n      geneSelection: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\"\n            }, {\n              type: \"array\",\n              items: {\n                type: \"string\"\n              }\n            }]\n          }\n        }\n      },\n      geneExpressionTransform: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\"\n            }, {\n              type: \"string\",\n              pattern: \"log1p\"\n            }]\n          }\n        }\n      },\n      geneExpressionColormap: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"string\"\n          }\n        }\n      },\n      geneExpressionColormapRange: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"array\",\n            items: {\n              type: \"number\"\n            }\n          }\n        }\n      },\n      genomicZoomX: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"number\"\n          }\n        }\n      },\n      genomicZoomY: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"number\"\n          }\n        }\n      },\n      genomicTargetX: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"number\"\n          }\n        }\n      },\n      genomicTargetY: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"number\"\n          }\n        }\n      },\n      additionalCellSets: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, no cell will be highlighted initially.\"\n            }, {\n              $ref: \"https://github.com/vitessce/vitessce/#cell-sets\"\n            }]\n          }\n        }\n      },\n      moleculeHighlight: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, no molecule will be highlighted initially.\"\n            }, {\n              type: \"string\"\n            }]\n          }\n        }\n      }\n    }\n  },\n  layout: {\n    $ref: \"#/definitions/components\"\n  },\n  initStrategy: {\n    type: \"string\",\n    enum: [\"none\", \"auto\"],\n    description: \"The initialization strategy determines how missing coordination objects and coordination scope mappings are initially filled in.\"\n  },\n  version: {\n    type: \"string\",\n    enum: [\"1.0.2\"],\n    description: \"The schema version for the view config.\"\n  }\n};\nvar config_1_0_2_schema_default = {\n  $schema: $schema12,\n  $id: $id12,\n  title: title12,\n  type: type12,\n  definitions: definitions12,\n  additionalProperties: additionalProperties6,\n  required: required6,\n  properties: properties6\n}; // src/schemas/config-1.0.3.schema.json\n\nvar $schema13 = \"http://json-schema.org/draft-07/schema#\";\nvar $id13 = \"https://github.com/vitessce/vitessce/#dataset\";\nvar title13 = \"Vitessce data set\";\nvar type13 = \"object\";\nvar definitions13 = {\n  components: {\n    description: \"The layout array defines the views, or components, rendered in the grid.\",\n    type: \"array\",\n    items: {\n      type: \"object\",\n      additionalProperties: false,\n      required: [\"component\", \"x\", \"y\"],\n      properties: {\n        component: {\n          type: \"string\",\n          description: \"Specify a component using a name defined in the component registry.\"\n        },\n        props: {\n          type: \"object\",\n          description: \"Extra prop values for the component.\"\n        },\n        x: {\n          type: \"integer\"\n        },\n        y: {\n          type: \"integer\"\n        },\n        w: {\n          type: \"integer\"\n        },\n        h: {\n          type: \"integer\"\n        },\n        coordinationScopes: {\n          type: \"object\",\n          description: \"Component-level coordination scope mappings define which coordination object values a particular component can read and write, for each coordination type.\",\n          additionalProperties: false,\n          required: [],\n          properties: {\n            dataset: {\n              type: \"string\"\n            },\n            embeddingType: {\n              type: \"string\"\n            },\n            embeddingZoom: {\n              type: \"string\"\n            },\n            embeddingRotation: {\n              type: \"string\"\n            },\n            embeddingTargetX: {\n              type: \"string\"\n            },\n            embeddingTargetY: {\n              type: \"string\"\n            },\n            embeddingTargetZ: {\n              type: \"string\"\n            },\n            embeddingCellSetPolygonsVisible: {\n              type: \"string\"\n            },\n            embeddingCellSetLabelsVisible: {\n              type: \"string\"\n            },\n            embeddingCellSetLabelSize: {\n              type: \"string\"\n            },\n            embeddingCellRadius: {\n              type: \"string\"\n            },\n            spatialZoom: {\n              type: \"string\"\n            },\n            spatialRotation: {\n              type: \"string\"\n            },\n            spatialTargetX: {\n              type: \"string\"\n            },\n            spatialTargetY: {\n              type: \"string\"\n            },\n            spatialTargetZ: {\n              type: \"string\"\n            },\n            spatialRotationX: {\n              type: \"string\"\n            },\n            spatialRotationY: {\n              type: \"string\"\n            },\n            spatialRotationZ: {\n              type: \"string\"\n            },\n            spatialRotationOrbit: {\n              type: \"string\"\n            },\n            spatialOrbitAxis: {\n              type: \"string\"\n            },\n            spatialAxisFixed: {\n              type: \"string\"\n            },\n            heatmapZoomX: {\n              type: \"string\"\n            },\n            heatmapZoomY: {\n              type: \"string\"\n            },\n            heatmapTargetX: {\n              type: \"string\"\n            },\n            heatmapTargetY: {\n              type: \"string\"\n            },\n            cellFilter: {\n              type: \"string\"\n            },\n            cellHighlight: {\n              type: \"string\"\n            },\n            cellSetSelection: {\n              type: \"string\"\n            },\n            cellSetHighlight: {\n              type: \"string\"\n            },\n            cellSetColor: {\n              type: \"string\"\n            },\n            geneFilter: {\n              type: \"string\"\n            },\n            geneHighlight: {\n              type: \"string\"\n            },\n            geneSelection: {\n              type: \"string\"\n            },\n            geneExpressionTransform: {\n              type: \"string\"\n            },\n            geneExpressionColormap: {\n              type: \"string\"\n            },\n            geneExpressionColormapRange: {\n              type: \"string\"\n            },\n            cellColorEncoding: {\n              type: \"string\"\n            },\n            spatialRasterLayers: {\n              type: \"string\"\n            },\n            spatialCellsLayer: {\n              type: \"string\"\n            },\n            spatialMoleculesLayer: {\n              type: \"string\"\n            },\n            spatialNeighborhoodsLayer: {\n              type: \"string\"\n            },\n            genomicZoomX: {\n              type: \"string\"\n            },\n            genomicZoomY: {\n              type: \"string\"\n            },\n            genomicTargetX: {\n              type: \"string\"\n            },\n            genomicTargetY: {\n              type: \"string\"\n            },\n            additionalCellSets: {\n              type: \"string\"\n            },\n            moleculeHighlight: {\n              type: \"string\"\n            }\n          }\n        }\n      }\n    }\n  },\n  annDataCellSets: {\n    type: \"array\",\n    description: \"Array of cell set configuration, following closely the conventions of the tabular schema\",\n    items: {\n      type: \"object\",\n      additionalProperties: false,\n      required: [\"groupName\", \"setName\"],\n      properties: {\n        groupName: {\n          type: \"string\",\n          description: \"The display name for the set, like 'Cell Type' or 'Louvain.'\"\n        },\n        setName: {\n          type: \"string\",\n          description: \"The location in the AnnData store for the set, like 'obs/louvain' or 'obs/celltype.'\"\n        }\n      }\n    }\n  },\n  annDataCells: {\n    type: \"object\",\n    description: \"The properties of this object are the configuration for how to layout scatterplots and spatial information\",\n    minProperties: 1,\n    additionalProperties: false,\n    required: [],\n    properties: {\n      xy: {\n        type: \"string\",\n        description: \"The location in the AnnData store of cell centroids, like 'obsm/X_centroids.'\"\n      },\n      poly: {\n        type: \"string\",\n        description: \"The location in the AnnData store of cell polygon outlines, like 'obsm/X_polygons.'\"\n      },\n      factors: {\n        type: \"array\",\n        description: \"List of locations in the AnnData store of cell sets, like 'obs/louvain'\",\n        items: {\n          type: \"string\"\n        }\n      },\n      mappings: {\n        patternProperties: {\n          \".\": {\n            type: \"object\",\n            description: \"An object containing key-values for mappings like { UMAP: { key: 'obsm/X_umap', dims: [0, 1] } }.\",\n            additionalProperties: false,\n            required: [\"key\"],\n            properties: {\n              key: {\n                type: \"string\",\n                description: \"Where to look in the AnnData store for this mapping, like 'obsm/X_umap.'\"\n              },\n              dims: {\n                type: \"array\",\n                description: \"Which indices of the obsm object to take for a scatterplot, allowing for, for example, different PCs from obsm/X_pca\",\n                minItems: 2,\n                maxItems: 2,\n                items: {\n                  type: \"number\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  annDataExpressionMatrix: {\n    type: \"object\",\n    description: \"The properties of this object are the configuration for how to fetch the cell x genes matrix\",\n    additionalProperties: false,\n    required: [\"matrix\"],\n    properties: {\n      matrix: {\n        type: \"string\",\n        description: \"The location in the AnnData store of the cell x gene matrix, like 'obsm/hvg_subset.' or 'X'\"\n      },\n      geneFilter: {\n        type: \"string\",\n        description: \"The location in the AnnData store of a filter for the genes if using a subset of the data, like 'var.highly_variable.' if the matrix comes from 'obsm/hvg_subset.'\"\n      },\n      matrixGeneFilter: {\n        type: \"string\",\n        description: \"The location in the AnnData store of a filter for the matrix data (used in heatmap and histogram), like 'var.highly_variable.''\"\n      }\n    }\n  },\n  requestInit: {\n    type: \"object\",\n    description: \"The properties of this object correspond to the parameters of the JavaScript fetch() function.\",\n    additionalProperties: false,\n    required: [],\n    properties: {\n      method: {\n        type: \"string\"\n      },\n      headers: {\n        type: \"object\"\n      },\n      body: {\n        type: \"string\"\n      },\n      mode: {\n        type: \"string\"\n      },\n      credentials: {\n        type: \"string\"\n      },\n      cache: {\n        type: \"string\"\n      },\n      redirect: {\n        type: \"string\"\n      },\n      referrer: {\n        type: \"string\"\n      },\n      integrity: {\n        type: \"string\"\n      }\n    }\n  },\n  rasterLayer: {\n    description: \"The properties of this object are the rendering settings for the raster layer.\",\n    additionalProperties: false,\n    required: [\"channels\", \"colormap\", \"index\", \"opacity\"],\n    properties: {\n      channels: {\n        type: \"array\",\n        items: {\n          type: \"object\",\n          additionalProperties: false,\n          required: [\"selection\"],\n          properties: {\n            color: {\n              type: \"array\",\n              items: {\n                type: \"number\"\n              },\n              description: \"The color to use when rendering this channel under the null colormap.\"\n            },\n            selection: {\n              type: \"object\",\n              description: \"Determines the channel selection, e.g. some Z and time slice.\"\n            },\n            slider: {\n              type: \"array\",\n              items: {\n                type: \"number\"\n              },\n              description: \"Determines the range for color mapping.\"\n            },\n            visible: {\n              type: \"boolean\",\n              description: \"Determines whether this channel of the layer will be rendered in the spatial component.\"\n            }\n          }\n        }\n      },\n      colormap: {\n        oneOf: [{\n          type: \"string\",\n          description: \"The name of the colormap to use for this layer.\"\n        }, {\n          type: \"null\",\n          description: \"Use the solid color definitions.\"\n        }]\n      },\n      transparentColor: {\n        oneOf: [{\n          type: \"array\",\n          minItems: 3,\n          maxItems: 3,\n          items: {\n            type: \"number\",\n            description: \"One of R G or B (0 - 255).\"\n          },\n          description: \"Determines the color to be set to opacity 0\"\n        }, {\n          type: \"null\",\n          description: \"No selection.\"\n        }]\n      },\n      index: {\n        type: \"number\",\n        description: \"The index of the layer among the array of layers available in the image file.\"\n      },\n      opacity: {\n        type: \"number\"\n      },\n      modelMatrix: {\n        oneOf: [{\n          type: \"array\",\n          minItems: 16,\n          maxItems: 16,\n          description: \"transformation matrix for this layer\"\n        }, {\n          type: \"null\",\n          description: \"Use no transformation.\"\n        }]\n      },\n      domainType: {\n        type: \"string\",\n        enum: [\"Full\", \"Min/Max\"],\n        description: \"Determines the extent of the channel slider input element in the layer controller.\"\n      },\n      resolution: {\n        type: \"number\",\n        description: \"Resolution of 3D volumetric rendering\"\n      },\n      xSlice: {\n        oneOf: [{\n          type: \"array\",\n          minItems: 2,\n          maxItems: 2,\n          description: \"Slice bounds\"\n        }, {\n          type: \"null\",\n          description: \"No slicing\"\n        }]\n      },\n      renderingMode: {\n        type: \"string\",\n        description: \"Rendering mode of 3D volumetric rendering\"\n      },\n      ySlice: {\n        oneOf: [{\n          type: \"array\",\n          minItems: 2,\n          maxItems: 2,\n          description: \"Slice bounds\"\n        }, {\n          type: \"null\",\n          description: \"No slicing\"\n        }]\n      },\n      zSlice: {\n        oneOf: [{\n          type: \"array\",\n          minItems: 2,\n          maxItems: 2,\n          description: \"Slice bounds\"\n        }, {\n          type: \"null\",\n          description: \"No slicing\"\n        }]\n      },\n      type: {\n        type: \"string\",\n        enum: [\"raster\", \"bitmask\"]\n      },\n      use3d: {\n        type: \"boolean\"\n      },\n      visible: {\n        type: \"boolean\",\n        description: \"Determines whether this entire layer will be rendered in the spatial component.\"\n      }\n    }\n  },\n  moleculesLayer: {\n    type: \"object\",\n    description: \"The properties of this object are the rendering settings for the molecules layer.\",\n    additionalProperties: false,\n    required: [\"visible\", \"radius\", \"opacity\"],\n    properties: {\n      visible: {\n        type: \"boolean\"\n      },\n      radius: {\n        type: \"number\"\n      },\n      opacity: {\n        type: \"number\"\n      }\n    }\n  },\n  cellsLayer: {\n    type: \"object\",\n    description: \"The properties of this object are the rendering settings for the cells layer.\",\n    additionalProperties: false,\n    required: [\"visible\", \"stroked\", \"radius\", \"opacity\"],\n    properties: {\n      visible: {\n        type: \"boolean\"\n      },\n      stroked: {\n        type: \"boolean\"\n      },\n      radius: {\n        type: \"number\"\n      },\n      opacity: {\n        type: \"number\"\n      }\n    }\n  },\n  neighborhoodsLayer: {\n    type: \"object\",\n    description: \"The properties of this object are the rendering settings for the neighborhoods layer.\",\n    additionalProperties: false,\n    required: [\"visible\"],\n    properties: {\n      visible: {\n        type: \"boolean\"\n      }\n    }\n  },\n  spatialRasterLayers: {\n    type: \"array\",\n    description: \"Array of Spatial Layers\",\n    items: {\n      $ref: \"#/definitions/rasterLayer\"\n    }\n  }\n};\nvar additionalProperties7 = false;\nvar required7 = [\"version\", \"name\", \"datasets\", \"layout\", \"initStrategy\"];\nvar properties7 = {\n  name: {\n    type: \"string\"\n  },\n  public: {\n    type: \"boolean\"\n  },\n  description: {\n    type: \"string\"\n  },\n  datasets: {\n    type: \"array\",\n    description: \"The datasets array defines groups of files, where the files within each dataset reference the same entities (cells, genes, cell sets, etc).\",\n    items: {\n      type: \"object\",\n      additionalProperties: false,\n      required: [\"uid\", \"files\"],\n      properties: {\n        uid: {\n          type: \"string\"\n        },\n        name: {\n          type: \"string\"\n        },\n        description: {\n          type: \"string\"\n        },\n        files: {\n          type: \"array\",\n          items: {\n            type: \"object\",\n            additionalProperties: false,\n            required: [\"type\", \"fileType\"],\n            properties: {\n              name: {\n                type: \"string\"\n              },\n              type: {\n                type: \"string\"\n              },\n              fileType: {\n                type: \"string\"\n              },\n              url: {\n                type: \"string\"\n              },\n              options: {\n                oneOf: [{\n                  $ref: \"#/definitions/annDataCellSets\"\n                }, {\n                  $ref: \"https://github.com/vitessce/vitessce/#raster\"\n                }, {\n                  $ref: \"#/definitions/annDataCells\"\n                }, {\n                  $ref: \"#/definitions/annDataExpressionMatrix\"\n                }]\n              },\n              requestInit: {\n                $ref: \"#/definitions/requestInit\"\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  coordinationSpace: {\n    type: \"object\",\n    description: \"The coordination space stores the values for each scope of each coordination object.\",\n    additionalProperties: false,\n    required: [],\n    properties: {\n      dataset: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"string\"\n          }\n        }\n      },\n      embeddingZoom: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, value will be automatically set.\"\n            }, {\n              type: \"number\"\n            }]\n          }\n        }\n      },\n      embeddingRotation: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"number\"\n          }\n        }\n      },\n      embeddingTargetX: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, value will be automatically set.\"\n            }, {\n              type: \"number\"\n            }]\n          }\n        }\n      },\n      embeddingTargetY: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, value will be automatically set.\"\n            }, {\n              type: \"number\"\n            }]\n          }\n        }\n      },\n      embeddingTargetZ: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"number\"\n          }\n        }\n      },\n      embeddingType: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"string\"\n          }\n        }\n      },\n      embeddingCellSetPolygonsVisible: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"boolean\"\n          }\n        }\n      },\n      embeddingCellSetLabelsVisible: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"boolean\"\n          }\n        }\n      },\n      embeddingCellSetLabelSize: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"number\"\n          }\n        }\n      },\n      embeddingCellRadius: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"number\"\n          }\n        }\n      },\n      spatialZoom: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, value will be automatically set.\"\n            }, {\n              type: \"number\"\n            }]\n          }\n        }\n      },\n      spatialRotation: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"number\"\n          }\n        }\n      },\n      spatialTargetX: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, value will be automatically set.\"\n            }, {\n              type: \"number\"\n            }]\n          }\n        }\n      },\n      spatialTargetY: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, value will be automatically set.\"\n            }, {\n              type: \"number\"\n            }]\n          }\n        }\n      },\n      spatialTargetZ: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, value will be automatically set.\"\n            }, {\n              type: \"number\"\n            }]\n          }\n        }\n      },\n      spatialRotationX: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, value will be automatically set. Only useful for 3D viewing.\"\n            }, {\n              type: \"number\"\n            }]\n          }\n        }\n      },\n      spatialRotationY: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, value will be automatically set. Only useful for 3D viewing.\"\n            }, {\n              type: \"number\"\n            }]\n          }\n        }\n      },\n      spatialRotationZ: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, value will be automatically set. Only useful for 3D viewing.\"\n            }, {\n              type: \"number\"\n            }]\n          }\n        }\n      },\n      spatialRotationOrbit: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, value will be automatically set. Only useful for 3D viewing.\"\n            }, {\n              type: \"number\"\n            }]\n          }\n        }\n      },\n      spatialOrbitAxis: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, value will be automatically set. Only useful for 3D viewing.\"\n            }, {\n              type: \"string\"\n            }]\n          }\n        }\n      },\n      spatialAxisFixed: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"Whether or not to have a fixed axis for the camera. Only useful for 3D viewing.\"\n            }, {\n              type: \"boolean\"\n            }]\n          }\n        }\n      },\n      spatialRasterLayers: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided and auto layer initialization is enabled, layers will be automatically initialized.\"\n            }, {\n              $ref: \"#/definitions/spatialRasterLayers\"\n            }]\n          }\n        }\n      },\n      spatialCellsLayer: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided and auto layer initialization is enabled, layers will be automatically initialized.\"\n            }, {\n              $ref: \"#/definitions/cellsLayer\"\n            }]\n          }\n        }\n      },\n      spatialNeighborhoodsLayer: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided and auto layer initialization is enabled, layers will be automatically initialized.\"\n            }, {\n              $ref: \"#/definitions/neighborhoodsLayer\"\n            }]\n          }\n        }\n      },\n      spatialMoleculesLayer: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided and auto layer initialization is enabled, layers will be automatically initialized.\"\n            }, {\n              $ref: \"#/definitions/moleculesLayer\"\n            }]\n          }\n        }\n      },\n      heatmapZoomX: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"number\"\n          }\n        }\n      },\n      heatmapZoomY: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"number\"\n          }\n        }\n      },\n      heatmapTargetX: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"number\"\n          }\n        }\n      },\n      heatmapTargetY: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"number\"\n          }\n        }\n      },\n      cellFilter: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, no cells will be filtered out initially.\"\n            }, {\n              type: \"array\",\n              items: {\n                type: \"string\"\n              }\n            }]\n          }\n        }\n      },\n      cellHighlight: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, no cell will be highlighted initially.\"\n            }, {\n              type: \"string\"\n            }]\n          }\n        }\n      },\n      cellSetSelection: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided and auto cell set initialization is enabled, cell set selections will be automatically initialized.\"\n            }, {\n              type: \"array\"\n            }]\n          }\n        }\n      },\n      cellSetHighlight: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, no cell sets will be highlighted initially.\"\n            }, {\n              type: \"string\"\n            }]\n          }\n        }\n      },\n      cellSetColor: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, cell set colors will be automatically initialized.\"\n            }, {\n              type: \"array\",\n              items: {\n                type: \"object\",\n                additionalProperties: false,\n                required: [\"path\", \"color\"],\n                properties: {\n                  path: {\n                    type: \"array\",\n                    items: {\n                      type: \"string\"\n                    }\n                  },\n                  color: {\n                    type: \"array\",\n                    items: {\n                      type: \"number\"\n                    }\n                  }\n                }\n              }\n            }]\n          }\n        }\n      },\n      cellColorEncoding: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"string\"\n          }\n        }\n      },\n      geneFilter: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, no genes will be filtered out initially.\"\n            }, {\n              type: \"array\",\n              items: {\n                type: \"string\"\n              }\n            }]\n          }\n        }\n      },\n      geneHighlight: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, no genes will be highlighted initially.\"\n            }, {\n              type: \"string\"\n            }]\n          }\n        }\n      },\n      geneSelection: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\"\n            }, {\n              type: \"array\",\n              items: {\n                type: \"string\"\n              }\n            }]\n          }\n        }\n      },\n      geneExpressionTransform: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\"\n            }, {\n              type: \"string\",\n              pattern: \"log1p\"\n            }]\n          }\n        }\n      },\n      geneExpressionColormap: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"string\"\n          }\n        }\n      },\n      geneExpressionColormapRange: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"array\",\n            items: {\n              type: \"number\"\n            }\n          }\n        }\n      },\n      genomicZoomX: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"number\"\n          }\n        }\n      },\n      genomicZoomY: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"number\"\n          }\n        }\n      },\n      genomicTargetX: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"number\"\n          }\n        }\n      },\n      genomicTargetY: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"number\"\n          }\n        }\n      },\n      additionalCellSets: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, no cell will be highlighted initially.\"\n            }, {\n              $ref: \"https://github.com/vitessce/vitessce/#cell-sets\"\n            }]\n          }\n        }\n      },\n      moleculeHighlight: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, no molecule will be highlighted initially.\"\n            }, {\n              type: \"string\"\n            }]\n          }\n        }\n      }\n    }\n  },\n  layout: {\n    $ref: \"#/definitions/components\"\n  },\n  initStrategy: {\n    type: \"string\",\n    enum: [\"none\", \"auto\"],\n    description: \"The initialization strategy determines how missing coordination objects and coordination scope mappings are initially filled in.\"\n  },\n  version: {\n    type: \"string\",\n    enum: [\"1.0.3\"],\n    description: \"The schema version for the view config.\"\n  }\n};\nvar config_1_0_3_schema_default = {\n  $schema: $schema13,\n  $id: $id13,\n  title: title13,\n  type: type13,\n  definitions: definitions13,\n  additionalProperties: additionalProperties7,\n  required: required7,\n  properties: properties7\n}; // src/schemas/config-1.0.4.schema.json\n\nvar $schema14 = \"http://json-schema.org/draft-07/schema#\";\nvar $id14 = \"https://github.com/vitessce/vitessce/#dataset\";\nvar title14 = \"Vitessce data set\";\nvar type14 = \"object\";\nvar definitions14 = {\n  components: {\n    description: \"The layout array defines the views, or components, rendered in the grid.\",\n    type: \"array\",\n    items: {\n      type: \"object\",\n      additionalProperties: false,\n      required: [\"component\", \"x\", \"y\"],\n      properties: {\n        component: {\n          type: \"string\",\n          description: \"Specify a component using a name defined in the component registry.\"\n        },\n        props: {\n          type: \"object\",\n          description: \"Extra prop values for the component.\"\n        },\n        x: {\n          type: \"integer\"\n        },\n        y: {\n          type: \"integer\"\n        },\n        w: {\n          type: \"integer\"\n        },\n        h: {\n          type: \"integer\"\n        },\n        coordinationScopes: {\n          type: \"object\",\n          description: \"Component-level coordination scope mappings define which coordination object values a particular component can read and write, for each coordination type.\",\n          additionalProperties: false,\n          required: [],\n          properties: {\n            dataset: {\n              type: \"string\"\n            },\n            embeddingType: {\n              type: \"string\"\n            },\n            embeddingZoom: {\n              type: \"string\"\n            },\n            embeddingRotation: {\n              type: \"string\"\n            },\n            embeddingTargetX: {\n              type: \"string\"\n            },\n            embeddingTargetY: {\n              type: \"string\"\n            },\n            embeddingTargetZ: {\n              type: \"string\"\n            },\n            embeddingCellSetPolygonsVisible: {\n              type: \"string\"\n            },\n            embeddingCellSetLabelsVisible: {\n              type: \"string\"\n            },\n            embeddingCellSetLabelSize: {\n              type: \"string\"\n            },\n            embeddingCellRadius: {\n              type: \"string\"\n            },\n            embeddingCellOpacity: {\n              type: \"string\"\n            },\n            embeddingCellRadiusMode: {\n              type: \"string\"\n            },\n            embeddingCellOpacityMode: {\n              type: \"string\"\n            },\n            spatialZoom: {\n              type: \"string\"\n            },\n            spatialRotation: {\n              type: \"string\"\n            },\n            spatialTargetX: {\n              type: \"string\"\n            },\n            spatialTargetY: {\n              type: \"string\"\n            },\n            spatialTargetZ: {\n              type: \"string\"\n            },\n            spatialRotationX: {\n              type: \"string\"\n            },\n            spatialRotationY: {\n              type: \"string\"\n            },\n            spatialRotationZ: {\n              type: \"string\"\n            },\n            spatialRotationOrbit: {\n              type: \"string\"\n            },\n            spatialOrbitAxis: {\n              type: \"string\"\n            },\n            spatialAxisFixed: {\n              type: \"string\"\n            },\n            heatmapZoomX: {\n              type: \"string\"\n            },\n            heatmapZoomY: {\n              type: \"string\"\n            },\n            heatmapTargetX: {\n              type: \"string\"\n            },\n            heatmapTargetY: {\n              type: \"string\"\n            },\n            cellFilter: {\n              type: \"string\"\n            },\n            cellHighlight: {\n              type: \"string\"\n            },\n            cellSetSelection: {\n              type: \"string\"\n            },\n            cellSetHighlight: {\n              type: \"string\"\n            },\n            cellSetColor: {\n              type: \"string\"\n            },\n            geneFilter: {\n              type: \"string\"\n            },\n            geneHighlight: {\n              type: \"string\"\n            },\n            geneSelection: {\n              type: \"string\"\n            },\n            geneExpressionTransform: {\n              type: \"string\"\n            },\n            geneExpressionColormap: {\n              type: \"string\"\n            },\n            geneExpressionColormapRange: {\n              type: \"string\"\n            },\n            cellColorEncoding: {\n              type: \"string\"\n            },\n            spatialRasterLayers: {\n              type: \"string\"\n            },\n            spatialCellsLayer: {\n              type: \"string\"\n            },\n            spatialMoleculesLayer: {\n              type: \"string\"\n            },\n            spatialNeighborhoodsLayer: {\n              type: \"string\"\n            },\n            genomicZoomX: {\n              type: \"string\"\n            },\n            genomicZoomY: {\n              type: \"string\"\n            },\n            genomicTargetX: {\n              type: \"string\"\n            },\n            genomicTargetY: {\n              type: \"string\"\n            },\n            additionalCellSets: {\n              type: \"string\"\n            },\n            moleculeHighlight: {\n              type: \"string\"\n            }\n          }\n        }\n      }\n    }\n  },\n  annDataCellSets: {\n    type: \"array\",\n    description: \"Array of cell set configuration, following closely the conventions of the tabular schema\",\n    items: {\n      type: \"object\",\n      additionalProperties: false,\n      required: [\"groupName\", \"setName\"],\n      properties: {\n        groupName: {\n          type: \"string\",\n          description: \"The display name for the set, like 'Cell Type' or 'Louvain.'\"\n        },\n        setName: {\n          type: \"string\",\n          description: \"The location in the AnnData store for the set, like 'obs/louvain' or 'obs/celltype.'\"\n        }\n      }\n    }\n  },\n  annDataCells: {\n    type: \"object\",\n    description: \"The properties of this object are the configuration for how to layout scatterplots and spatial information\",\n    minProperties: 1,\n    additionalProperties: false,\n    required: [],\n    properties: {\n      xy: {\n        type: \"string\",\n        description: \"The location in the AnnData store of cell centroids, like 'obsm/X_centroids.'\"\n      },\n      poly: {\n        type: \"string\",\n        description: \"The location in the AnnData store of cell polygon outlines, like 'obsm/X_polygons.'\"\n      },\n      factors: {\n        type: \"array\",\n        description: \"List of locations in the AnnData store of cell sets, like 'obs/louvain'\",\n        items: {\n          type: \"string\"\n        }\n      },\n      mappings: {\n        patternProperties: {\n          \".\": {\n            type: \"object\",\n            description: \"An object containing key-values for mappings like { UMAP: { key: 'obsm/X_umap', dims: [0, 1] } }.\",\n            additionalProperties: false,\n            required: [\"key\"],\n            properties: {\n              key: {\n                type: \"string\",\n                description: \"Where to look in the AnnData store for this mapping, like 'obsm/X_umap.'\"\n              },\n              dims: {\n                type: \"array\",\n                description: \"Which indices of the obsm object to take for a scatterplot, allowing for, for example, different PCs from obsm/X_pca\",\n                minItems: 2,\n                maxItems: 2,\n                items: {\n                  type: \"number\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  annDataExpressionMatrix: {\n    type: \"object\",\n    description: \"The properties of this object are the configuration for how to fetch the cell x genes matrix\",\n    additionalProperties: false,\n    required: [\"matrix\"],\n    properties: {\n      matrix: {\n        type: \"string\",\n        description: \"The location in the AnnData store of the cell x gene matrix, like 'obsm/hvg_subset.' or 'X'\"\n      },\n      geneFilter: {\n        type: \"string\",\n        description: \"The location in the AnnData store of a filter for the genes if using a subset of the data, like 'var.highly_variable.' if the matrix comes from 'obsm/hvg_subset.'\"\n      },\n      matrixGeneFilter: {\n        type: \"string\",\n        description: \"The location in the AnnData store of a filter for the matrix data (used in heatmap and histogram), like 'var.highly_variable.''\"\n      }\n    }\n  },\n  requestInit: {\n    type: \"object\",\n    description: \"The properties of this object correspond to the parameters of the JavaScript fetch() function.\",\n    additionalProperties: false,\n    required: [],\n    properties: {\n      method: {\n        type: \"string\"\n      },\n      headers: {\n        type: \"object\"\n      },\n      body: {\n        type: \"string\"\n      },\n      mode: {\n        type: \"string\"\n      },\n      credentials: {\n        type: \"string\"\n      },\n      cache: {\n        type: \"string\"\n      },\n      redirect: {\n        type: \"string\"\n      },\n      referrer: {\n        type: \"string\"\n      },\n      integrity: {\n        type: \"string\"\n      }\n    }\n  },\n  rasterLayer: {\n    description: \"The properties of this object are the rendering settings for the raster layer.\",\n    additionalProperties: false,\n    required: [\"channels\", \"colormap\", \"index\", \"opacity\"],\n    properties: {\n      channels: {\n        type: \"array\",\n        items: {\n          type: \"object\",\n          additionalProperties: false,\n          required: [\"selection\"],\n          properties: {\n            color: {\n              type: \"array\",\n              items: {\n                type: \"number\"\n              },\n              description: \"The color to use when rendering this channel under the null colormap.\"\n            },\n            selection: {\n              type: \"object\",\n              description: \"Determines the channel selection, e.g. some Z and time slice.\"\n            },\n            slider: {\n              type: \"array\",\n              items: {\n                type: \"number\"\n              },\n              description: \"Determines the range for color mapping.\"\n            },\n            visible: {\n              type: \"boolean\",\n              description: \"Determines whether this channel of the layer will be rendered in the spatial component.\"\n            }\n          }\n        }\n      },\n      colormap: {\n        oneOf: [{\n          type: \"string\",\n          description: \"The name of the colormap to use for this layer.\"\n        }, {\n          type: \"null\",\n          description: \"Use the solid color definitions.\"\n        }]\n      },\n      transparentColor: {\n        oneOf: [{\n          type: \"array\",\n          minItems: 3,\n          maxItems: 3,\n          items: {\n            type: \"number\",\n            description: \"One of R G or B (0 - 255).\"\n          },\n          description: \"Determines the color to be set to opacity 0\"\n        }, {\n          type: \"null\",\n          description: \"No selection.\"\n        }]\n      },\n      index: {\n        type: \"number\",\n        description: \"The index of the layer among the array of layers available in the image file.\"\n      },\n      opacity: {\n        type: \"number\"\n      },\n      modelMatrix: {\n        oneOf: [{\n          type: \"array\",\n          minItems: 16,\n          maxItems: 16,\n          description: \"transformation matrix for this layer\"\n        }, {\n          type: \"null\",\n          description: \"Use no transformation.\"\n        }]\n      },\n      domainType: {\n        type: \"string\",\n        enum: [\"Full\", \"Min/Max\"],\n        description: \"Determines the extent of the channel slider input element in the layer controller.\"\n      },\n      resolution: {\n        type: \"number\",\n        description: \"Resolution of 3D volumetric rendering\"\n      },\n      xSlice: {\n        oneOf: [{\n          type: \"array\",\n          minItems: 2,\n          maxItems: 2,\n          description: \"Slice bounds\"\n        }, {\n          type: \"null\",\n          description: \"No slicing\"\n        }]\n      },\n      renderingMode: {\n        type: \"string\",\n        description: \"Rendering mode of 3D volumetric rendering\"\n      },\n      ySlice: {\n        oneOf: [{\n          type: \"array\",\n          minItems: 2,\n          maxItems: 2,\n          description: \"Slice bounds\"\n        }, {\n          type: \"null\",\n          description: \"No slicing\"\n        }]\n      },\n      zSlice: {\n        oneOf: [{\n          type: \"array\",\n          minItems: 2,\n          maxItems: 2,\n          description: \"Slice bounds\"\n        }, {\n          type: \"null\",\n          description: \"No slicing\"\n        }]\n      },\n      type: {\n        type: \"string\",\n        enum: [\"raster\", \"bitmask\"]\n      },\n      use3d: {\n        type: \"boolean\"\n      },\n      visible: {\n        type: \"boolean\",\n        description: \"Determines whether this entire layer will be rendered in the spatial component.\"\n      }\n    }\n  },\n  moleculesLayer: {\n    type: \"object\",\n    description: \"The properties of this object are the rendering settings for the molecules layer.\",\n    additionalProperties: false,\n    required: [\"visible\", \"radius\", \"opacity\"],\n    properties: {\n      visible: {\n        type: \"boolean\"\n      },\n      radius: {\n        type: \"number\"\n      },\n      opacity: {\n        type: \"number\"\n      }\n    }\n  },\n  cellsLayer: {\n    type: \"object\",\n    description: \"The properties of this object are the rendering settings for the cells layer.\",\n    additionalProperties: false,\n    required: [\"visible\", \"stroked\", \"radius\", \"opacity\"],\n    properties: {\n      visible: {\n        type: \"boolean\"\n      },\n      stroked: {\n        type: \"boolean\"\n      },\n      radius: {\n        type: \"number\"\n      },\n      opacity: {\n        type: \"number\"\n      }\n    }\n  },\n  neighborhoodsLayer: {\n    type: \"object\",\n    description: \"The properties of this object are the rendering settings for the neighborhoods layer.\",\n    additionalProperties: false,\n    required: [\"visible\"],\n    properties: {\n      visible: {\n        type: \"boolean\"\n      }\n    }\n  },\n  spatialRasterLayers: {\n    type: \"array\",\n    description: \"Array of Spatial Layers\",\n    items: {\n      $ref: \"#/definitions/rasterLayer\"\n    }\n  }\n};\nvar additionalProperties8 = false;\nvar required8 = [\"version\", \"name\", \"datasets\", \"layout\", \"initStrategy\"];\nvar properties8 = {\n  name: {\n    type: \"string\"\n  },\n  public: {\n    type: \"boolean\"\n  },\n  description: {\n    type: \"string\"\n  },\n  datasets: {\n    type: \"array\",\n    description: \"The datasets array defines groups of files, where the files within each dataset reference the same entities (cells, genes, cell sets, etc).\",\n    items: {\n      type: \"object\",\n      additionalProperties: false,\n      required: [\"uid\", \"files\"],\n      properties: {\n        uid: {\n          type: \"string\"\n        },\n        name: {\n          type: \"string\"\n        },\n        description: {\n          type: \"string\"\n        },\n        files: {\n          type: \"array\",\n          items: {\n            type: \"object\",\n            additionalProperties: false,\n            required: [\"type\", \"fileType\"],\n            properties: {\n              name: {\n                type: \"string\"\n              },\n              type: {\n                type: \"string\"\n              },\n              fileType: {\n                type: \"string\"\n              },\n              url: {\n                type: \"string\"\n              },\n              options: {\n                oneOf: [{\n                  $ref: \"#/definitions/annDataCellSets\"\n                }, {\n                  $ref: \"https://github.com/vitessce/vitessce/#raster\"\n                }, {\n                  $ref: \"#/definitions/annDataCells\"\n                }, {\n                  $ref: \"#/definitions/annDataExpressionMatrix\"\n                }]\n              },\n              requestInit: {\n                $ref: \"#/definitions/requestInit\"\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  coordinationSpace: {\n    type: \"object\",\n    description: \"The coordination space stores the values for each scope of each coordination object.\",\n    additionalProperties: false,\n    required: [],\n    properties: {\n      dataset: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"string\"\n          }\n        }\n      },\n      embeddingZoom: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, value will be automatically set.\"\n            }, {\n              type: \"number\"\n            }]\n          }\n        }\n      },\n      embeddingRotation: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"number\"\n          }\n        }\n      },\n      embeddingTargetX: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, value will be automatically set.\"\n            }, {\n              type: \"number\"\n            }]\n          }\n        }\n      },\n      embeddingTargetY: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, value will be automatically set.\"\n            }, {\n              type: \"number\"\n            }]\n          }\n        }\n      },\n      embeddingTargetZ: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"number\"\n          }\n        }\n      },\n      embeddingType: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"string\"\n          }\n        }\n      },\n      embeddingCellSetPolygonsVisible: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"boolean\"\n          }\n        }\n      },\n      embeddingCellSetLabelsVisible: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"boolean\"\n          }\n        }\n      },\n      embeddingCellSetLabelSize: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"number\"\n          }\n        }\n      },\n      embeddingCellRadius: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"number\",\n            description: \"The cell radius value, used when embeddingCellRadiusMode is absolute or relative.\"\n          }\n        }\n      },\n      embeddingCellOpacity: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"number\",\n            description: \"The cell opacity value, used when embeddingCellOpacityMode is static.\"\n          }\n        }\n      },\n      embeddingCellRadiusMode: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"string\",\n            enum: [\"manual\", \"auto\"],\n            description: \"Should data points representing cells be assigned a static (manual) or dynamic (auto, based on zoom level and data extent) radius?\"\n          }\n        }\n      },\n      embeddingCellOpacityMode: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"string\",\n            enum: [\"manual\", \"auto\"],\n            description: \"Should data points representing cells be assigned a static (manual) or dynamic (auto, based on zoom level and data extent) opacity?\"\n          }\n        }\n      },\n      spatialZoom: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, value will be automatically set.\"\n            }, {\n              type: \"number\"\n            }]\n          }\n        }\n      },\n      spatialRotation: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"number\"\n          }\n        }\n      },\n      spatialTargetX: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, value will be automatically set.\"\n            }, {\n              type: \"number\"\n            }]\n          }\n        }\n      },\n      spatialTargetY: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, value will be automatically set.\"\n            }, {\n              type: \"number\"\n            }]\n          }\n        }\n      },\n      spatialTargetZ: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, value will be automatically set.\"\n            }, {\n              type: \"number\"\n            }]\n          }\n        }\n      },\n      spatialRotationX: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, value will be automatically set. Only useful for 3D viewing.\"\n            }, {\n              type: \"number\"\n            }]\n          }\n        }\n      },\n      spatialRotationY: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, value will be automatically set. Only useful for 3D viewing.\"\n            }, {\n              type: \"number\"\n            }]\n          }\n        }\n      },\n      spatialRotationZ: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, value will be automatically set. Only useful for 3D viewing.\"\n            }, {\n              type: \"number\"\n            }]\n          }\n        }\n      },\n      spatialRotationOrbit: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, value will be automatically set. Only useful for 3D viewing.\"\n            }, {\n              type: \"number\"\n            }]\n          }\n        }\n      },\n      spatialOrbitAxis: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, value will be automatically set. Only useful for 3D viewing.\"\n            }, {\n              type: \"string\"\n            }]\n          }\n        }\n      },\n      spatialAxisFixed: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"Whether or not to have a fixed axis for the camera. Only useful for 3D viewing.\"\n            }, {\n              type: \"boolean\"\n            }]\n          }\n        }\n      },\n      spatialRasterLayers: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided and auto layer initialization is enabled, layers will be automatically initialized.\"\n            }, {\n              $ref: \"#/definitions/spatialRasterLayers\"\n            }]\n          }\n        }\n      },\n      spatialCellsLayer: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided and auto layer initialization is enabled, layers will be automatically initialized.\"\n            }, {\n              $ref: \"#/definitions/cellsLayer\"\n            }]\n          }\n        }\n      },\n      spatialNeighborhoodsLayer: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided and auto layer initialization is enabled, layers will be automatically initialized.\"\n            }, {\n              $ref: \"#/definitions/neighborhoodsLayer\"\n            }]\n          }\n        }\n      },\n      spatialMoleculesLayer: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided and auto layer initialization is enabled, layers will be automatically initialized.\"\n            }, {\n              $ref: \"#/definitions/moleculesLayer\"\n            }]\n          }\n        }\n      },\n      heatmapZoomX: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"number\"\n          }\n        }\n      },\n      heatmapZoomY: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"number\"\n          }\n        }\n      },\n      heatmapTargetX: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"number\"\n          }\n        }\n      },\n      heatmapTargetY: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"number\"\n          }\n        }\n      },\n      cellFilter: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, no cells will be filtered out initially.\"\n            }, {\n              type: \"array\",\n              items: {\n                type: \"string\"\n              }\n            }]\n          }\n        }\n      },\n      cellHighlight: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, no cell will be highlighted initially.\"\n            }, {\n              type: \"string\"\n            }]\n          }\n        }\n      },\n      cellSetSelection: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided and auto cell set initialization is enabled, cell set selections will be automatically initialized.\"\n            }, {\n              type: \"array\"\n            }]\n          }\n        }\n      },\n      cellSetHighlight: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, no cell sets will be highlighted initially.\"\n            }, {\n              type: \"string\"\n            }]\n          }\n        }\n      },\n      cellSetColor: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, cell set colors will be automatically initialized.\"\n            }, {\n              type: \"array\",\n              items: {\n                type: \"object\",\n                additionalProperties: false,\n                required: [\"path\", \"color\"],\n                properties: {\n                  path: {\n                    type: \"array\",\n                    items: {\n                      type: \"string\"\n                    }\n                  },\n                  color: {\n                    type: \"array\",\n                    items: {\n                      type: \"number\"\n                    }\n                  }\n                }\n              }\n            }]\n          }\n        }\n      },\n      cellColorEncoding: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"string\",\n            enum: [\"geneSelection\", \"cellSetSelection\"],\n            description: \"How should data points representing cells be colored?\"\n          }\n        }\n      },\n      geneFilter: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, no genes will be filtered out initially.\"\n            }, {\n              type: \"array\",\n              items: {\n                type: \"string\"\n              }\n            }]\n          }\n        }\n      },\n      geneHighlight: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, no genes will be highlighted initially.\"\n            }, {\n              type: \"string\"\n            }]\n          }\n        }\n      },\n      geneSelection: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\"\n            }, {\n              type: \"array\",\n              items: {\n                type: \"string\"\n              }\n            }]\n          }\n        }\n      },\n      geneExpressionTransform: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\"\n            }, {\n              type: \"string\",\n              pattern: \"log1p\"\n            }]\n          }\n        }\n      },\n      geneExpressionColormap: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"string\"\n          }\n        }\n      },\n      geneExpressionColormapRange: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"array\",\n            items: {\n              type: \"number\"\n            }\n          }\n        }\n      },\n      genomicZoomX: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"number\"\n          }\n        }\n      },\n      genomicZoomY: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"number\"\n          }\n        }\n      },\n      genomicTargetX: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"number\"\n          }\n        }\n      },\n      genomicTargetY: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"number\"\n          }\n        }\n      },\n      additionalCellSets: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, no cell will be highlighted initially.\"\n            }, {\n              $ref: \"https://github.com/vitessce/vitessce/#cell-sets\"\n            }]\n          }\n        }\n      },\n      moleculeHighlight: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, no molecule will be highlighted initially.\"\n            }, {\n              type: \"string\"\n            }]\n          }\n        }\n      }\n    }\n  },\n  layout: {\n    $ref: \"#/definitions/components\"\n  },\n  initStrategy: {\n    type: \"string\",\n    enum: [\"none\", \"auto\"],\n    description: \"The initialization strategy determines how missing coordination objects and coordination scope mappings are initially filled in.\"\n  },\n  version: {\n    type: \"string\",\n    enum: [\"1.0.4\"],\n    description: \"The schema version for the view config.\"\n  }\n};\nvar config_1_0_4_schema_default = {\n  $schema: $schema14,\n  $id: $id14,\n  title: title14,\n  type: type14,\n  definitions: definitions14,\n  additionalProperties: additionalProperties8,\n  required: required8,\n  properties: properties8\n}; // src/schemas/config-1.0.5.schema.json\n\nvar $schema15 = \"http://json-schema.org/draft-07/schema#\";\nvar $id15 = \"https://github.com/vitessce/vitessce/#dataset\";\nvar title15 = \"Vitessce data set\";\nvar type15 = \"object\";\nvar definitions15 = {\n  components: {\n    description: \"The layout array defines the views, or components, rendered in the grid.\",\n    type: \"array\",\n    items: {\n      type: \"object\",\n      additionalProperties: false,\n      required: [\"component\", \"x\", \"y\"],\n      properties: {\n        component: {\n          type: \"string\",\n          description: \"Specify a component using a name defined in the component registry.\"\n        },\n        props: {\n          type: \"object\",\n          description: \"Extra prop values for the component.\"\n        },\n        x: {\n          type: \"integer\"\n        },\n        y: {\n          type: \"integer\"\n        },\n        w: {\n          type: \"integer\"\n        },\n        h: {\n          type: \"integer\"\n        },\n        coordinationScopes: {\n          type: \"object\",\n          description: \"Component-level coordination scope mappings define which coordination object values a particular component can read and write, for each coordination type.\",\n          additionalProperties: false,\n          required: [],\n          properties: {\n            dataset: {\n              type: \"string\"\n            },\n            embeddingType: {\n              type: \"string\"\n            },\n            embeddingZoom: {\n              type: \"string\"\n            },\n            embeddingRotation: {\n              type: \"string\"\n            },\n            embeddingTargetX: {\n              type: \"string\"\n            },\n            embeddingTargetY: {\n              type: \"string\"\n            },\n            embeddingTargetZ: {\n              type: \"string\"\n            },\n            embeddingCellSetPolygonsVisible: {\n              type: \"string\"\n            },\n            embeddingCellSetLabelsVisible: {\n              type: \"string\"\n            },\n            embeddingCellSetLabelSize: {\n              type: \"string\"\n            },\n            embeddingCellRadius: {\n              type: \"string\"\n            },\n            embeddingCellOpacity: {\n              type: \"string\"\n            },\n            embeddingCellRadiusMode: {\n              type: \"string\"\n            },\n            embeddingCellOpacityMode: {\n              type: \"string\"\n            },\n            spatialZoom: {\n              type: \"string\"\n            },\n            spatialRotation: {\n              type: \"string\"\n            },\n            spatialTargetX: {\n              type: \"string\"\n            },\n            spatialTargetY: {\n              type: \"string\"\n            },\n            spatialTargetZ: {\n              type: \"string\"\n            },\n            spatialRotationX: {\n              type: \"string\"\n            },\n            spatialRotationY: {\n              type: \"string\"\n            },\n            spatialRotationZ: {\n              type: \"string\"\n            },\n            spatialRotationOrbit: {\n              type: \"string\"\n            },\n            spatialOrbitAxis: {\n              type: \"string\"\n            },\n            spatialAxisFixed: {\n              type: \"string\"\n            },\n            heatmapZoomX: {\n              type: \"string\"\n            },\n            heatmapZoomY: {\n              type: \"string\"\n            },\n            heatmapTargetX: {\n              type: \"string\"\n            },\n            heatmapTargetY: {\n              type: \"string\"\n            },\n            cellFilter: {\n              type: \"string\"\n            },\n            cellHighlight: {\n              type: \"string\"\n            },\n            cellSetSelection: {\n              type: \"string\"\n            },\n            cellSetHighlight: {\n              type: \"string\"\n            },\n            cellSetColor: {\n              type: \"string\"\n            },\n            geneFilter: {\n              type: \"string\"\n            },\n            geneHighlight: {\n              type: \"string\"\n            },\n            geneSelection: {\n              type: \"string\"\n            },\n            geneExpressionTransform: {\n              type: \"string\"\n            },\n            geneExpressionColormap: {\n              type: \"string\"\n            },\n            geneExpressionColormapRange: {\n              type: \"string\"\n            },\n            cellColorEncoding: {\n              type: \"string\"\n            },\n            spatialRasterLayers: {\n              type: \"string\"\n            },\n            spatialCellsLayer: {\n              type: \"string\"\n            },\n            spatialMoleculesLayer: {\n              type: \"string\"\n            },\n            spatialNeighborhoodsLayer: {\n              type: \"string\"\n            },\n            genomicZoomX: {\n              type: \"string\"\n            },\n            genomicZoomY: {\n              type: \"string\"\n            },\n            genomicTargetX: {\n              type: \"string\"\n            },\n            genomicTargetY: {\n              type: \"string\"\n            },\n            additionalCellSets: {\n              type: \"string\"\n            },\n            moleculeHighlight: {\n              type: \"string\"\n            }\n          }\n        }\n      }\n    }\n  },\n  annDataCellSets: {\n    type: \"array\",\n    description: \"Array of cell set configuration, following closely the conventions of the tabular schema\",\n    items: {\n      type: \"object\",\n      additionalProperties: false,\n      required: [\"groupName\", \"setName\"],\n      properties: {\n        groupName: {\n          type: \"string\",\n          description: \"The display name for the set, like 'Cell Type' or 'Louvain.'\"\n        },\n        setName: {\n          oneOf: [{\n            type: \"string\",\n            description: \"The location in the AnnData store for the set, like 'obs/louvain' or 'obs/celltype.'\"\n          }, {\n            type: \"array\",\n            items: {\n              type: \"string\"\n            },\n            description: \"An array of locations in the AnnData store for a hierarchy of set names, from coarse to fine levels.\"\n          }]\n        }\n      }\n    }\n  },\n  annDataCells: {\n    type: \"object\",\n    description: \"The properties of this object are the configuration for how to layout scatterplots and spatial information\",\n    minProperties: 1,\n    additionalProperties: false,\n    required: [],\n    properties: {\n      xy: {\n        type: \"string\",\n        description: \"The location in the AnnData store of cell centroids, like 'obsm/X_centroids.'\"\n      },\n      poly: {\n        type: \"string\",\n        description: \"The location in the AnnData store of cell polygon outlines, like 'obsm/X_polygons.'\"\n      },\n      factors: {\n        type: \"array\",\n        description: \"List of locations in the AnnData store of cell sets, like 'obs/louvain'\",\n        items: {\n          type: \"string\"\n        }\n      },\n      mappings: {\n        patternProperties: {\n          \".\": {\n            type: \"object\",\n            description: \"An object containing key-values for mappings like { UMAP: { key: 'obsm/X_umap', dims: [0, 1] } }.\",\n            additionalProperties: false,\n            required: [\"key\"],\n            properties: {\n              key: {\n                type: \"string\",\n                description: \"Where to look in the AnnData store for this mapping, like 'obsm/X_umap.'\"\n              },\n              dims: {\n                type: \"array\",\n                description: \"Which indices of the obsm object to take for a scatterplot, allowing for, for example, different PCs from obsm/X_pca\",\n                minItems: 2,\n                maxItems: 2,\n                items: {\n                  type: \"number\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  annDataExpressionMatrix: {\n    type: \"object\",\n    description: \"The properties of this object are the configuration for how to fetch the cell x genes matrix\",\n    additionalProperties: false,\n    required: [\"matrix\"],\n    properties: {\n      matrix: {\n        type: \"string\",\n        description: \"The location in the AnnData store of the cell x gene matrix, like 'obsm/hvg_subset.' or 'X'\"\n      },\n      geneFilter: {\n        type: \"string\",\n        description: \"The location in the AnnData store of a filter for the genes if using a subset of the data, like 'var.highly_variable.' if the matrix comes from 'obsm/hvg_subset.'\"\n      },\n      matrixGeneFilter: {\n        type: \"string\",\n        description: \"The location in the AnnData store of a filter for the matrix data (used in heatmap and histogram), like 'var.highly_variable.''\"\n      }\n    }\n  },\n  requestInit: {\n    type: \"object\",\n    description: \"The properties of this object correspond to the parameters of the JavaScript fetch() function.\",\n    additionalProperties: false,\n    required: [],\n    properties: {\n      method: {\n        type: \"string\"\n      },\n      headers: {\n        type: \"object\"\n      },\n      body: {\n        type: \"string\"\n      },\n      mode: {\n        type: \"string\"\n      },\n      credentials: {\n        type: \"string\"\n      },\n      cache: {\n        type: \"string\"\n      },\n      redirect: {\n        type: \"string\"\n      },\n      referrer: {\n        type: \"string\"\n      },\n      integrity: {\n        type: \"string\"\n      }\n    }\n  },\n  rasterLayer: {\n    description: \"The properties of this object are the rendering settings for the raster layer.\",\n    additionalProperties: false,\n    required: [\"channels\", \"colormap\", \"index\", \"opacity\"],\n    properties: {\n      channels: {\n        type: \"array\",\n        items: {\n          type: \"object\",\n          additionalProperties: false,\n          required: [\"selection\"],\n          properties: {\n            color: {\n              type: \"array\",\n              items: {\n                type: \"number\"\n              },\n              description: \"The color to use when rendering this channel under the null colormap.\"\n            },\n            selection: {\n              type: \"object\",\n              description: \"Determines the channel selection, e.g. some Z and time slice.\"\n            },\n            slider: {\n              type: \"array\",\n              items: {\n                type: \"number\"\n              },\n              description: \"Determines the range for color mapping.\"\n            },\n            visible: {\n              type: \"boolean\",\n              description: \"Determines whether this channel of the layer will be rendered in the spatial component.\"\n            }\n          }\n        }\n      },\n      colormap: {\n        oneOf: [{\n          type: \"string\",\n          description: \"The name of the colormap to use for this layer.\"\n        }, {\n          type: \"null\",\n          description: \"Use the solid color definitions.\"\n        }]\n      },\n      transparentColor: {\n        oneOf: [{\n          type: \"array\",\n          minItems: 3,\n          maxItems: 3,\n          items: {\n            type: \"number\",\n            description: \"One of R G or B (0 - 255).\"\n          },\n          description: \"Determines the color to be set to opacity 0\"\n        }, {\n          type: \"null\",\n          description: \"No selection.\"\n        }]\n      },\n      index: {\n        type: \"number\",\n        description: \"The index of the layer among the array of layers available in the image file.\"\n      },\n      opacity: {\n        type: \"number\"\n      },\n      modelMatrix: {\n        oneOf: [{\n          type: \"array\",\n          minItems: 16,\n          maxItems: 16,\n          description: \"transformation matrix for this layer\"\n        }, {\n          type: \"null\",\n          description: \"Use no transformation.\"\n        }]\n      },\n      domainType: {\n        type: \"string\",\n        enum: [\"Full\", \"Min/Max\"],\n        description: \"Determines the extent of the channel slider input element in the layer controller.\"\n      },\n      resolution: {\n        type: \"number\",\n        description: \"Resolution of 3D volumetric rendering\"\n      },\n      xSlice: {\n        oneOf: [{\n          type: \"array\",\n          minItems: 2,\n          maxItems: 2,\n          description: \"Slice bounds\"\n        }, {\n          type: \"null\",\n          description: \"No slicing\"\n        }]\n      },\n      renderingMode: {\n        type: \"string\",\n        description: \"Rendering mode of 3D volumetric rendering\"\n      },\n      ySlice: {\n        oneOf: [{\n          type: \"array\",\n          minItems: 2,\n          maxItems: 2,\n          description: \"Slice bounds\"\n        }, {\n          type: \"null\",\n          description: \"No slicing\"\n        }]\n      },\n      zSlice: {\n        oneOf: [{\n          type: \"array\",\n          minItems: 2,\n          maxItems: 2,\n          description: \"Slice bounds\"\n        }, {\n          type: \"null\",\n          description: \"No slicing\"\n        }]\n      },\n      type: {\n        type: \"string\",\n        enum: [\"raster\", \"bitmask\"]\n      },\n      use3d: {\n        type: \"boolean\"\n      },\n      visible: {\n        type: \"boolean\",\n        description: \"Determines whether this entire layer will be rendered in the spatial component.\"\n      }\n    }\n  },\n  moleculesLayer: {\n    type: \"object\",\n    description: \"The properties of this object are the rendering settings for the molecules layer.\",\n    additionalProperties: false,\n    required: [\"visible\", \"radius\", \"opacity\"],\n    properties: {\n      visible: {\n        type: \"boolean\"\n      },\n      radius: {\n        type: \"number\"\n      },\n      opacity: {\n        type: \"number\"\n      }\n    }\n  },\n  cellsLayer: {\n    type: \"object\",\n    description: \"The properties of this object are the rendering settings for the cells layer.\",\n    additionalProperties: false,\n    required: [\"visible\", \"stroked\", \"radius\", \"opacity\"],\n    properties: {\n      visible: {\n        type: \"boolean\"\n      },\n      stroked: {\n        type: \"boolean\"\n      },\n      radius: {\n        type: \"number\"\n      },\n      opacity: {\n        type: \"number\"\n      }\n    }\n  },\n  neighborhoodsLayer: {\n    type: \"object\",\n    description: \"The properties of this object are the rendering settings for the neighborhoods layer.\",\n    additionalProperties: false,\n    required: [\"visible\"],\n    properties: {\n      visible: {\n        type: \"boolean\"\n      }\n    }\n  },\n  spatialRasterLayers: {\n    type: \"array\",\n    description: \"Array of Spatial Layers\",\n    items: {\n      $ref: \"#/definitions/rasterLayer\"\n    }\n  }\n};\nvar additionalProperties9 = false;\nvar required9 = [\"version\", \"name\", \"datasets\", \"layout\", \"initStrategy\"];\nvar properties9 = {\n  name: {\n    type: \"string\"\n  },\n  public: {\n    type: \"boolean\"\n  },\n  description: {\n    type: \"string\"\n  },\n  datasets: {\n    type: \"array\",\n    description: \"The datasets array defines groups of files, where the files within each dataset reference the same entities (cells, genes, cell sets, etc).\",\n    items: {\n      type: \"object\",\n      additionalProperties: false,\n      required: [\"uid\", \"files\"],\n      properties: {\n        uid: {\n          type: \"string\"\n        },\n        name: {\n          type: \"string\"\n        },\n        description: {\n          type: \"string\"\n        },\n        files: {\n          type: \"array\",\n          items: {\n            type: \"object\",\n            additionalProperties: false,\n            required: [\"type\", \"fileType\"],\n            properties: {\n              name: {\n                type: \"string\"\n              },\n              type: {\n                type: \"string\"\n              },\n              fileType: {\n                type: \"string\"\n              },\n              url: {\n                type: \"string\"\n              },\n              options: {\n                oneOf: [{\n                  $ref: \"#/definitions/annDataCellSets\"\n                }, {\n                  $ref: \"https://github.com/vitessce/vitessce/#raster\"\n                }, {\n                  $ref: \"#/definitions/annDataCells\"\n                }, {\n                  $ref: \"#/definitions/annDataExpressionMatrix\"\n                }]\n              },\n              requestInit: {\n                $ref: \"#/definitions/requestInit\"\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  coordinationSpace: {\n    type: \"object\",\n    description: \"The coordination space stores the values for each scope of each coordination object.\",\n    additionalProperties: false,\n    required: [],\n    properties: {\n      dataset: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"string\"\n          }\n        }\n      },\n      embeddingZoom: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, value will be automatically set.\"\n            }, {\n              type: \"number\"\n            }]\n          }\n        }\n      },\n      embeddingRotation: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"number\"\n          }\n        }\n      },\n      embeddingTargetX: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, value will be automatically set.\"\n            }, {\n              type: \"number\"\n            }]\n          }\n        }\n      },\n      embeddingTargetY: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, value will be automatically set.\"\n            }, {\n              type: \"number\"\n            }]\n          }\n        }\n      },\n      embeddingTargetZ: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"number\"\n          }\n        }\n      },\n      embeddingType: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"string\"\n          }\n        }\n      },\n      embeddingCellSetPolygonsVisible: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"boolean\"\n          }\n        }\n      },\n      embeddingCellSetLabelsVisible: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"boolean\"\n          }\n        }\n      },\n      embeddingCellSetLabelSize: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"number\"\n          }\n        }\n      },\n      embeddingCellRadius: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"number\",\n            description: \"The cell radius value, used when embeddingCellRadiusMode is absolute or relative.\"\n          }\n        }\n      },\n      embeddingCellOpacity: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"number\",\n            description: \"The cell opacity value, used when embeddingCellOpacityMode is static.\"\n          }\n        }\n      },\n      embeddingCellRadiusMode: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"string\",\n            enum: [\"manual\", \"auto\"],\n            description: \"Should data points representing cells be assigned a static (manual) or dynamic (auto, based on zoom level and data extent) radius?\"\n          }\n        }\n      },\n      embeddingCellOpacityMode: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"string\",\n            enum: [\"manual\", \"auto\"],\n            description: \"Should data points representing cells be assigned a static (manual) or dynamic (auto, based on zoom level and data extent) opacity?\"\n          }\n        }\n      },\n      spatialZoom: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, value will be automatically set.\"\n            }, {\n              type: \"number\"\n            }]\n          }\n        }\n      },\n      spatialRotation: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"number\"\n          }\n        }\n      },\n      spatialTargetX: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, value will be automatically set.\"\n            }, {\n              type: \"number\"\n            }]\n          }\n        }\n      },\n      spatialTargetY: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, value will be automatically set.\"\n            }, {\n              type: \"number\"\n            }]\n          }\n        }\n      },\n      spatialTargetZ: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, value will be automatically set.\"\n            }, {\n              type: \"number\"\n            }]\n          }\n        }\n      },\n      spatialRotationX: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, value will be automatically set. Only useful for 3D viewing.\"\n            }, {\n              type: \"number\"\n            }]\n          }\n        }\n      },\n      spatialRotationY: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, value will be automatically set. Only useful for 3D viewing.\"\n            }, {\n              type: \"number\"\n            }]\n          }\n        }\n      },\n      spatialRotationZ: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, value will be automatically set. Only useful for 3D viewing.\"\n            }, {\n              type: \"number\"\n            }]\n          }\n        }\n      },\n      spatialRotationOrbit: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, value will be automatically set. Only useful for 3D viewing.\"\n            }, {\n              type: \"number\"\n            }]\n          }\n        }\n      },\n      spatialOrbitAxis: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, value will be automatically set. Only useful for 3D viewing.\"\n            }, {\n              type: \"string\"\n            }]\n          }\n        }\n      },\n      spatialAxisFixed: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"Whether or not to have a fixed axis for the camera. Only useful for 3D viewing.\"\n            }, {\n              type: \"boolean\"\n            }]\n          }\n        }\n      },\n      spatialRasterLayers: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided and auto layer initialization is enabled, layers will be automatically initialized.\"\n            }, {\n              $ref: \"#/definitions/spatialRasterLayers\"\n            }]\n          }\n        }\n      },\n      spatialCellsLayer: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided and auto layer initialization is enabled, layers will be automatically initialized.\"\n            }, {\n              $ref: \"#/definitions/cellsLayer\"\n            }]\n          }\n        }\n      },\n      spatialNeighborhoodsLayer: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided and auto layer initialization is enabled, layers will be automatically initialized.\"\n            }, {\n              $ref: \"#/definitions/neighborhoodsLayer\"\n            }]\n          }\n        }\n      },\n      spatialMoleculesLayer: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided and auto layer initialization is enabled, layers will be automatically initialized.\"\n            }, {\n              $ref: \"#/definitions/moleculesLayer\"\n            }]\n          }\n        }\n      },\n      heatmapZoomX: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"number\"\n          }\n        }\n      },\n      heatmapZoomY: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"number\"\n          }\n        }\n      },\n      heatmapTargetX: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"number\"\n          }\n        }\n      },\n      heatmapTargetY: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"number\"\n          }\n        }\n      },\n      cellFilter: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, no cells will be filtered out initially.\"\n            }, {\n              type: \"array\",\n              items: {\n                type: \"string\"\n              }\n            }]\n          }\n        }\n      },\n      cellHighlight: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, no cell will be highlighted initially.\"\n            }, {\n              type: \"string\"\n            }]\n          }\n        }\n      },\n      cellSetSelection: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided and auto cell set initialization is enabled, cell set selections will be automatically initialized.\"\n            }, {\n              type: \"array\"\n            }]\n          }\n        }\n      },\n      cellSetHighlight: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, no cell sets will be highlighted initially.\"\n            }, {\n              type: \"string\"\n            }]\n          }\n        }\n      },\n      cellSetColor: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, cell set colors will be automatically initialized.\"\n            }, {\n              type: \"array\",\n              items: {\n                type: \"object\",\n                additionalProperties: false,\n                required: [\"path\", \"color\"],\n                properties: {\n                  path: {\n                    type: \"array\",\n                    items: {\n                      type: \"string\"\n                    }\n                  },\n                  color: {\n                    type: \"array\",\n                    items: {\n                      type: \"number\"\n                    }\n                  }\n                }\n              }\n            }]\n          }\n        }\n      },\n      cellColorEncoding: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"string\",\n            enum: [\"geneSelection\", \"cellSetSelection\"],\n            description: \"How should data points representing cells be colored?\"\n          }\n        }\n      },\n      geneFilter: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, no genes will be filtered out initially.\"\n            }, {\n              type: \"array\",\n              items: {\n                type: \"string\"\n              }\n            }]\n          }\n        }\n      },\n      geneHighlight: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, no genes will be highlighted initially.\"\n            }, {\n              type: \"string\"\n            }]\n          }\n        }\n      },\n      geneSelection: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\"\n            }, {\n              type: \"array\",\n              items: {\n                type: \"string\"\n              }\n            }]\n          }\n        }\n      },\n      geneExpressionTransform: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\"\n            }, {\n              type: \"string\",\n              pattern: \"log1p\"\n            }]\n          }\n        }\n      },\n      geneExpressionColormap: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"string\"\n          }\n        }\n      },\n      geneExpressionColormapRange: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"array\",\n            items: {\n              type: \"number\"\n            }\n          }\n        }\n      },\n      genomicZoomX: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"number\"\n          }\n        }\n      },\n      genomicZoomY: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"number\"\n          }\n        }\n      },\n      genomicTargetX: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"number\"\n          }\n        }\n      },\n      genomicTargetY: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"number\"\n          }\n        }\n      },\n      additionalCellSets: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, no cell will be highlighted initially.\"\n            }, {\n              $ref: \"https://github.com/vitessce/vitessce/#cell-sets\"\n            }]\n          }\n        }\n      },\n      moleculeHighlight: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [{\n              type: \"null\",\n              description: \"If null is provided, no molecule will be highlighted initially.\"\n            }, {\n              type: \"string\"\n            }]\n          }\n        }\n      }\n    }\n  },\n  layout: {\n    $ref: \"#/definitions/components\"\n  },\n  initStrategy: {\n    type: \"string\",\n    enum: [\"none\", \"auto\"],\n    description: \"The initialization strategy determines how missing coordination objects and coordination scope mappings are initially filled in.\"\n  },\n  version: {\n    type: \"string\",\n    enum: [\"1.0.5\"],\n    description: \"The schema version for the view config.\"\n  }\n};\nvar config_1_0_5_schema_default = {\n  $schema: $schema15,\n  $id: $id15,\n  title: title15,\n  type: type15,\n  definitions: definitions15,\n  additionalProperties: additionalProperties9,\n  required: required9,\n  properties: properties9\n}; // src/app/view-config-upgraders.js\n\nimport uuidv44 from \"uuid/v4\";\nimport cloneDeep from \"lodash/cloneDeep\";\n\nfunction upgradeReplaceViewProp(prefix, view, coordinationSpace) {\n  const prevZScopes = Object.keys(coordinationSpace[`${prefix}Zoom`]);\n  const prevTXScopes = Object.keys(coordinationSpace[`${prefix}TargetX`]);\n  const prevTYScopes = Object.keys(coordinationSpace[`${prefix}TargetY`]);\n  const nextZScope = getNextScope(prevZScopes);\n  const nextTXScope = getNextScope(prevTXScopes);\n  const nextTYScope = getNextScope(prevTYScopes);\n  const {\n    zoom,\n    target: [targetX, targetY]\n  } = view;\n  coordinationSpace[`${prefix}Zoom`][nextZScope] = zoom;\n  coordinationSpace[`${prefix}TargetX`][nextTXScope] = targetX;\n  coordinationSpace[`${prefix}TargetY`][nextTYScope] = targetY;\n  return {\n    [`${prefix}Zoom`]: nextZScope,\n    [`${prefix}TargetX`]: nextTXScope,\n    [`${prefix}TargetY`]: nextTYScope\n  };\n}\n\nfunction upgradeFrom0_1_0(config) {\n  let datasetUid = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n  const coordinationSpace = {\n    embeddingType: {},\n    embeddingZoom: {},\n    embeddingTargetX: {},\n    embeddingTargetY: {},\n    spatialZoom: {},\n    spatialTargetX: {},\n    spatialTargetY: {}\n  };\n  const layout = [];\n  config.staticLayout.forEach(componentDef => {\n    var _a2;\n\n    let newComponentDef = __spreadProps(__spreadValues({}, componentDef), {\n      coordinationScopes: {}\n    });\n\n    if (componentDef.component === \"scatterplot\") {\n      if (componentDef.props.mapping) {\n        coordinationSpace.embeddingType[componentDef.props.mapping] = componentDef.props.mapping;\n        newComponentDef = __spreadProps(__spreadValues({}, newComponentDef), {\n          coordinationScopes: __spreadProps(__spreadValues({}, newComponentDef.coordinationScopes), {\n            embeddingType: componentDef.props.mapping\n          })\n        });\n      }\n\n      if (componentDef.props.view) {\n        const newScopeValues = upgradeReplaceViewProp(\"embedding\", componentDef.props.view, coordinationSpace);\n        newComponentDef = __spreadProps(__spreadValues({}, newComponentDef), {\n          coordinationScopes: __spreadValues(__spreadValues({}, newComponentDef.coordinationScopes), newScopeValues)\n        });\n      }\n    }\n\n    if (componentDef.component === \"spatial\") {\n      if ((_a2 = componentDef == null ? void 0 : componentDef.props) == null ? void 0 : _a2.view) {\n        const newScopeValues = upgradeReplaceViewProp(\"spatial\", componentDef.props.view, coordinationSpace);\n        newComponentDef = __spreadProps(__spreadValues({}, newComponentDef), {\n          coordinationScopes: __spreadValues(__spreadValues({}, newComponentDef.coordinationScopes), newScopeValues)\n        });\n      }\n    }\n\n    layout.push(newComponentDef);\n  });\n  const newDatasetUid = datasetUid || uuidv44();\n  return {\n    version: \"1.0.1\",\n    name: config.name,\n    description: config.description,\n    public: config.public,\n    datasets: [{\n      uid: newDatasetUid,\n      name: newDatasetUid,\n      files: config.layers.map(layer => ({\n        type: layer.type.toLowerCase(),\n        fileType: layer.fileType,\n        url: layer.url\n      }))\n    }],\n    initStrategy: \"auto\",\n    coordinationSpace,\n    layout\n  };\n}\n\nfunction upgradeFrom1_0_0(config) {\n  const coordinationSpace = __spreadValues({}, config.coordinationSpace);\n\n  function replaceLayerType(layerType) {\n    const isRaster = layerType === \"raster\";\n    coordinationSpace[`spatial${capitalize(layerType)}Layer${isRaster ? \"s\" : \"\"}`] = {};\n    Object.entries(coordinationSpace.spatialLayers).forEach(_ref80 => {\n      let [scope, layers] = _ref80;\n\n      if (Array.isArray(layers) && layers.find(layer => layer.type === layerType)) {\n        const typedLayers = layers.filter(layer => layer.type === layerType).map(layer => {\n          const newLayer = __spreadValues({}, layer);\n\n          delete newLayer.type;\n          return newLayer;\n        });\n        coordinationSpace[`spatial${capitalize(layerType)}Layer${isRaster ? \"s\" : \"\"}`][scope] = isRaster ? typedLayers : typedLayers[0];\n      } else {\n        coordinationSpace[`spatial${capitalize(layerType)}Layer${isRaster ? \"s\" : \"\"}`][scope] = null;\n      }\n    });\n  }\n\n  if (coordinationSpace.spatialLayers) {\n    replaceLayerType(\"raster\");\n    replaceLayerType(\"cells\");\n    replaceLayerType(\"molecules\");\n    replaceLayerType(\"neighborhoods\");\n    delete coordinationSpace.spatialLayers;\n  }\n\n  const layout = config.layout.map(component => {\n    const newComponent = __spreadValues({}, component);\n\n    function replaceCoordinationScope(layerType) {\n      const isRaster = layerType === \"raster\";\n\n      if (COMPONENT_COORDINATION_TYPES[newComponent.component].includes(`spatial${capitalize(layerType)}Layer${isRaster ? \"s\" : \"\"}`)) {\n        newComponent.coordinationScopes[`spatial${capitalize(layerType)}Layer${isRaster ? \"s\" : \"\"}`] = newComponent.coordinationScopes.spatialLayers;\n      }\n    }\n\n    if (newComponent.coordinationScopes && newComponent.coordinationScopes.spatialLayers) {\n      replaceCoordinationScope(\"raster\");\n      replaceCoordinationScope(\"cells\");\n      replaceCoordinationScope(\"molecules\");\n      replaceCoordinationScope(\"neighborhoods\");\n      delete newComponent.coordinationScopes.spatialLayers;\n    }\n\n    return newComponent;\n  });\n  return __spreadProps(__spreadValues({}, config), {\n    coordinationSpace,\n    layout,\n    version: \"1.0.1\"\n  });\n}\n\nfunction upgradeFrom1_0_1(config) {\n  var _a2;\n\n  const layout = config.layout.map(component => {\n    const newComponent = __spreadValues({}, component);\n\n    if (newComponent.component === \"layerController\") {\n      newComponent.props = __spreadProps(__spreadValues({}, newComponent.props), {\n        globalDisable3d: true\n      });\n    }\n\n    return newComponent;\n  });\n  const newConfig = cloneDeep(config);\n  Object.keys(((_a2 = newConfig == null ? void 0 : newConfig.coordinationSpace) == null ? void 0 : _a2.spatialRasterLayers) || {}).forEach(key => {\n    if (newConfig.coordinationSpace.spatialRasterLayers[key]) {\n      newConfig.coordinationSpace.spatialRasterLayers[key].forEach((layer, index) => {\n        newConfig.coordinationSpace.spatialRasterLayers[key][index].type = [\"bitmask\", \"raster\"].includes(layer.type) ? layer.type : \"raster\";\n      });\n    }\n  });\n  return __spreadProps(__spreadValues({}, newConfig), {\n    layout,\n    version: \"1.0.2\"\n  });\n}\n\nfunction upgradeFrom1_0_2(config) {\n  const layout = config.layout.map(component => {\n    const newComponent = __spreadValues({}, component);\n\n    if (newComponent.component === \"layerController\") {\n      newComponent.props = __spreadProps(__spreadValues({}, newComponent.props), {\n        disableChannelsIfRgbDetected: true\n      });\n    }\n\n    return newComponent;\n  });\n  const newConfig = cloneDeep(config);\n  return __spreadProps(__spreadValues({}, newConfig), {\n    layout,\n    version: \"1.0.3\"\n  });\n}\n\nfunction upgradeFrom1_0_3(config) {\n  const newConfig = cloneDeep(config);\n  return __spreadProps(__spreadValues({}, newConfig), {\n    version: \"1.0.4\"\n  });\n}\n\nfunction upgradeFrom1_0_4(config) {\n  const newConfig = cloneDeep(config);\n  return __spreadProps(__spreadValues({}, newConfig), {\n    version: \"1.0.5\"\n  });\n} // src/app/view-config-versions.js\n\n\nvar LATEST_VERSION = \"1.0.5\";\nvar SCHEMA_HANDLERS = {\n  \"0.1.0\": [new Ajv3().compile(config_0_1_0_schema_default), upgradeFrom0_1_0],\n  \"1.0.0\": [new Ajv3().addSchema(cell_sets_schema_default).addSchema(raster_schema_default).compile(config_1_0_0_schema_default), upgradeFrom1_0_0],\n  \"1.0.1\": [new Ajv3().addSchema(cell_sets_schema_default).addSchema(raster_schema_default).compile(config_1_0_1_schema_default), upgradeFrom1_0_1],\n  \"1.0.2\": [new Ajv3().addSchema(cell_sets_schema_default).addSchema(raster_schema_default).compile(config_1_0_2_schema_default), upgradeFrom1_0_2],\n  \"1.0.3\": [new Ajv3().addSchema(cell_sets_schema_default).addSchema(raster_schema_default).compile(config_1_0_3_schema_default), upgradeFrom1_0_3],\n  \"1.0.4\": [new Ajv3().addSchema(cell_sets_schema_default).addSchema(raster_schema_default).compile(config_1_0_4_schema_default), upgradeFrom1_0_4],\n  \"1.0.5\": [new Ajv3().addSchema(cell_sets_schema_default).addSchema(raster_schema_default).compile(config_1_0_5_schema_default), null]\n}; // src/app/CallbackPublisher.js\n\nfunction validateViewConfig(viewConfig) {\n  try {\n    const validate = SCHEMA_HANDLERS[LATEST_VERSION][0];\n    const valid = validate(viewConfig);\n\n    if (!valid) {\n      const failureReason = JSON.stringify(validate.errors, null, 2);\n      throw new Error(`Config validation failed: ${failureReason}`);\n    }\n  } catch (e) {\n    console.error(e);\n  }\n}\n\nfunction CallbackPublisher(props) {\n  const {\n    onWarn,\n    onConfigChange,\n    onLoaderChange,\n    validateOnConfigChange\n  } = props;\n  const warning = useWarning();\n  const loaders = useLoaders();\n  const viewConfigStoreApi = useViewConfigStoreApi();\n  useEffect10(() => viewConfigStoreApi.subscribe(viewConfig => {\n    if (validateOnConfigChange && viewConfig) {\n      validateViewConfig(viewConfig);\n    }\n\n    if (onConfigChange && viewConfig) {\n      onConfigChange(viewConfig);\n    }\n  }, state => state.viewConfig), [onConfigChange, validateOnConfigChange, viewConfigStoreApi]);\n  useEffect10(() => {\n    if (onWarn && warning) {\n      onWarn(warning);\n    }\n  }, [warning, onWarn]);\n  useEffect10(() => {\n    if (onLoaderChange && loaders) {\n      onLoaderChange(loaders);\n    }\n  }, [loaders, onLoaderChange]);\n  return null;\n} // src/components/description/DescriptionSubscriber.js\n\n\nimport React34, { useEffect as useEffect11, useMemo as useMemo8 } from \"react\"; // src/components/description/Description.js\n\nimport React33 from \"react\";\n\nfunction Description(props) {\n  const {\n    description: description2,\n    metadata\n  } = props;\n  return /* @__PURE__ */React33.createElement(\"div\", {\n    className: \"description\"\n  }, /* @__PURE__ */React33.createElement(\"p\", null, description2), metadata && Array.from(metadata.entries()).map(_ref81 => {\n    let [layerIndex, {\n      name: layerName,\n      metadata: metadataRecord\n    }] = _ref81;\n    return metadataRecord && Object.entries(metadataRecord).length > 0 ? /* @__PURE__ */React33.createElement(\"details\", {\n      key: layerIndex\n    }, /* @__PURE__ */React33.createElement(\"summary\", null, layerName), /* @__PURE__ */React33.createElement(\"div\", {\n      className: \"metadata-container\"\n    }, /* @__PURE__ */React33.createElement(\"table\", null, /* @__PURE__ */React33.createElement(\"tbody\", null, Object.entries(metadataRecord).map(_ref82 => {\n      let [key, value] = _ref82;\n      return /* @__PURE__ */React33.createElement(\"tr\", {\n        key\n      }, /* @__PURE__ */React33.createElement(\"th\", {\n        title: key\n      }, key), /* @__PURE__ */React33.createElement(\"td\", {\n        title: value\n      }, value));\n    }))))) : null;\n  }));\n} // src/components/description/DescriptionSubscriber.js\n\n\nvar DESCRIPTION_DATA_TYPES = [\"raster\"];\n\nfunction DescriptionSubscriber(props) {\n  const {\n    coordinationScopes,\n    description: descriptionOverride,\n    removeGridComponent,\n    theme,\n    title: title16 = \"Data Set\"\n  } = props;\n  const loaders = useLoaders();\n  const [{\n    dataset,\n    spatialRasterLayers: rasterLayers\n  }] = useCoordination(COMPONENT_COORDINATION_TYPES.description, coordinationScopes);\n  const [isReady, setItemIsReady, setItemIsNotReady, resetReadyItems] = useReady(DESCRIPTION_DATA_TYPES);\n  useEffect11(() => {\n    resetReadyItems();\n  }, [loaders, dataset]);\n  const [description2] = useDescription(loaders, dataset);\n  const [raster, imageLayerLoaders, imageLayerMeta] = useRasterData(loaders, dataset, setItemIsReady, () => {}, false);\n  const metadata = useMemo8(() => {\n    const result = new Map();\n\n    if (rasterLayers && rasterLayers.length > 0 && raster && imageLayerMeta && imageLayerLoaders) {\n      rasterLayers.forEach(layer => {\n        if (imageLayerMeta[layer.index]) {\n          const {\n            format\n          } = imageLayerLoaders[layer.index].metadata;\n          result.set(`${layer.index}`, {\n            name: raster.meta[layer.index].name,\n            metadata: format && format()\n          });\n        }\n      });\n    }\n\n    return result;\n  }, [raster, rasterLayers, imageLayerMeta, imageLayerLoaders]);\n  return /* @__PURE__ */React34.createElement(TitleInfo, {\n    title: title16,\n    removeGridComponent,\n    isScroll: true,\n    theme,\n    isReady\n  }, /* @__PURE__ */React34.createElement(Description, {\n    description: descriptionOverride || description2,\n    metadata\n  }));\n} // src/components/status/StatusSubscriber.js\n\n\nimport React36 from \"react\"; // src/components/status/Status.js\n\nimport React35 from \"react\";\n\nfunction Status(props) {\n  const warnClass = \"alert alert-warning my-0 details\";\n  const {\n    info,\n    warn: warn2\n  } = props;\n  const messages = [];\n\n  if (info) {\n    messages.push( /* @__PURE__ */React35.createElement(\"p\", {\n      className: \"details\",\n      key: \"info\"\n    }, info));\n  }\n\n  if (warn2) {\n    messages.push( /* @__PURE__ */React35.createElement(\"p\", {\n      className: warnClass,\n      key: \"warn\"\n    }, warn2));\n  }\n\n  return messages;\n} // src/components/status/StatusSubscriber.js\n\n\nfunction StatusSubscriber(props) {\n  const {\n    coordinationScopes,\n    removeGridComponent,\n    theme,\n    title: title16 = \"Status\"\n  } = props;\n  const [{\n    cellHighlight,\n    geneHighlight,\n    moleculeHighlight\n  }] = useCoordination(COMPONENT_COORDINATION_TYPES.status, coordinationScopes);\n  const warn2 = useWarning();\n  const infos = [...(cellHighlight ? [`Hovered cell ${cellHighlight}`] : []), ...(geneHighlight ? [`Hovered gene ${geneHighlight}`] : []), ...(moleculeHighlight ? [`Hovered gene ${moleculeHighlight}`] : [])];\n  const info = infos.join(\"; \");\n  return /* @__PURE__ */React36.createElement(TitleInfo, {\n    title: title16,\n    theme,\n    removeGridComponent,\n    isScroll: true,\n    isReady: true\n  }, /* @__PURE__ */React36.createElement(Status, {\n    warn: warn2,\n    info\n  }));\n} // src/components/genes/GenesSubscriber.js\n\n\nimport React39, { useEffect as useEffect14 } from \"react\"; // src/components/genes/Genes.js\n\nimport React38, { useEffect as useEffect13, useState as useState11 } from \"react\"; // src/components/selectable-table/SelectableTable.js\n\nimport React37, { useEffect as useEffect12, useCallback as useCallback10, useState as useState10 } from \"react\";\nimport { Table as Table2, AutoSizer } from \"react-virtualized\";\nimport uuidv45 from \"uuid/v4\";\nimport union from \"lodash/union\";\nimport difference from \"lodash/difference\";\nimport isEqual8 from \"lodash/isEqual\";\n\nfunction SelectableTable(props) {\n  const {\n    hasColorEncoding,\n    columns,\n    data,\n    onChange,\n    idKey = \"id\",\n    valueKey = \"value\",\n    allowMultiple = false,\n    allowUncheck = false,\n    showTableHead = true,\n    showTableInputs = false,\n    testHeight = void 0,\n    testWidth = void 0\n  } = props;\n  const [selectedRows, setSelectedRows] = useState10(null);\n  const onSelectRow = useCallback10((value, checked) => {\n    if (checked || allowUncheck) {\n      if (!allowMultiple) {\n        setSelectedRows(checked ? [value] : []);\n      } else {\n        setSelectedRows(checked ? union(selectedRows || [], [value]) : difference(selectedRows || [], [value]));\n      }\n    }\n  }, [allowMultiple, allowUncheck, selectedRows]);\n  const handleInputChange = useCallback10(event => {\n    const {\n      target\n    } = event;\n    const {\n      checked\n    } = target;\n    const {\n      value\n    } = target;\n    onSelectRow(value, checked);\n  }, [onSelectRow]);\n  const getDataFromIds = useCallback10(ids => ids.map(id => ({\n    [idKey]: id,\n    data: data.find(item => item[idKey] === id)\n  })), [data, idKey]);\n  const isSelected = useCallback10(id => Array.isArray(selectedRows) && selectedRows.includes(id), [selectedRows]);\n  useEffect12(() => {\n    const initialSelectedRows = data.map(d => {\n      if (d[valueKey]) {\n        return d[idKey];\n      }\n\n      return null;\n    }).filter(Boolean);\n\n    if (!isEqual8(initialSelectedRows, selectedRows)) {\n      if (initialSelectedRows.length > 0) {\n        setSelectedRows(initialSelectedRows);\n      } else {\n        setSelectedRows(null);\n      }\n    }\n  }, [data, idKey, valueKey]);\n  useEffect12(() => {\n    if (!onChange || !selectedRows) {\n      return;\n    }\n\n    const selectedRowData = getDataFromIds(selectedRows);\n\n    if (allowMultiple) {\n      onChange(selectedRowData);\n    } else if (selectedRows.length === 1) {\n      onChange(selectedRowData[0]);\n    } else if (selectedRows.length === 0) {\n      onChange(null);\n    }\n  }, [selectedRows]);\n  const inputUuid = uuidv45();\n  const hiddenInputsClass = showTableInputs ? \"\" : \"hidden-input-column\";\n\n  const rowRenderer = _ref83 => {\n    let {\n      index,\n      style\n    } = _ref83;\n    return /* @__PURE__ */React37.createElement(\"div\", {\n      key: data[index][idKey],\n      className: `table-item table-row ${isSelected(data[index][idKey]) ? \"row-checked \" : \"\"}`,\n      style,\n      role: \"button\",\n      onClick: () => onSelectRow(data[index][idKey], !isSelected(data[index][idKey]) || !hasColorEncoding)\n    }, /* @__PURE__ */React37.createElement(\"div\", {\n      className: `input-container ${hiddenInputsClass} table-cell`\n    }, /* @__PURE__ */React37.createElement(\"label\", {\n      htmlFor: `${inputUuid}_${data[index][idKey]}`\n    }, /* @__PURE__ */React37.createElement(\"input\", {\n      id: `${inputUuid}_${data[index][idKey]}`,\n      type: \"checkbox\",\n      className: allowMultiple ? \"checkbox\" : \"radio\",\n      name: inputUuid,\n      value: data[index][idKey],\n      onChange: handleInputChange,\n      checked: isSelected(data[index][idKey])\n    }))), columns.map(column => /* @__PURE__ */React37.createElement(\"div\", {\n      className: \"table-cell\",\n      key: column\n    }, data[index][column])));\n  };\n\n  const headerRowRenderer = _ref84 => {\n    let {\n      style\n    } = _ref84;\n    return /* @__PURE__ */React37.createElement(\"div\", {\n      className: `${hiddenInputsClass} table-row`,\n      style\n    }, columns.map(column => /* @__PURE__ */React37.createElement(\"div\", {\n      key: column\n    }, column)));\n  };\n\n  return /* @__PURE__ */React37.createElement(\"div\", {\n    className: \"selectable-table\"\n  }, /* @__PURE__ */React37.createElement(AutoSizer, null, _ref85 => {\n    let {\n      width,\n      height\n    } = _ref85;\n    return /* @__PURE__ */React37.createElement(Table2, {\n      height: testHeight || height,\n      gridStyle: {\n        outline: \"none\"\n      },\n      rowCount: data.length,\n      rowHeight: 24,\n      headerHeight: showTableHead ? 24 : void 0,\n      rowRenderer,\n      width: testWidth || width,\n      headerRowRenderer: showTableHead ? headerRowRenderer : void 0,\n      rowGetter: _ref86 => {\n        let {\n          index\n        } = _ref86;\n        return data[index];\n      }\n    });\n  }));\n} // src/components/genes/Genes.js\n\n\nfunction Genes(props) {\n  const {\n    hasColorEncoding,\n    geneList = [],\n    geneSelection = [],\n    geneFilter = null,\n    setGeneSelection\n  } = props;\n  const [searchTerm, setSearchTerm] = useState11(\"\");\n  const [searchResults, setSearchResults] = useState11(geneList);\n  useEffect13(() => {\n    const results = geneList.filter(gene => gene.toLowerCase().includes(searchTerm.toLowerCase()));\n    setSearchResults(results);\n  }, [searchTerm, geneList]);\n\n  function onChange(selection) {\n    if (setGeneSelection && selection && selection.name) {\n      setGeneSelection([selection.name]);\n    }\n  }\n\n  const data = searchResults.filter(gene => geneFilter ? geneFilter.includes(gene) : true).sort((a, b) => a.localeCompare(b)).map(gene => ({\n    name: gene,\n    value: geneSelection ? geneSelection.includes(gene) : false\n  }));\n\n  const handleChange = event => {\n    setSearchTerm(event.target.value);\n  };\n\n  return /* @__PURE__ */React38.createElement(React38.Fragment, null, /* @__PURE__ */React38.createElement(\"input\", {\n    className: \"search-bar\",\n    type: \"text\",\n    placeholder: \"Search\",\n    value: searchTerm,\n    onChange: handleChange\n  }), /* @__PURE__ */React38.createElement(SelectableTable, {\n    columns: [\"name\"],\n    data,\n    hasColorEncoding,\n    idKey: \"name\",\n    valueKey: \"value\",\n    onChange,\n    allowUncheck: false,\n    showTableHead: false\n  }));\n} // src/components/genes/GenesSubscriber.js\n\n\nvar GENES_DATA_TYPES = [\"expression-matrix\"];\n\nfunction GenesSubscriber(props) {\n  const {\n    coordinationScopes,\n    removeGridComponent,\n    variablesLabelOverride: variablesLabel = \"gene\",\n    variablesPluralLabelOverride: variablesPluralLabel = `${variablesLabel}s`,\n    theme,\n    title: title16 = \"Expression Levels\"\n  } = props;\n  const loaders = useLoaders();\n  const [{\n    dataset,\n    geneSelection,\n    geneFilter,\n    cellColorEncoding\n  }, {\n    setGeneSelection,\n    setGeneFilter,\n    setGeneHighlight,\n    setCellColorEncoding\n  }] = useCoordination(COMPONENT_COORDINATION_TYPES.genes, coordinationScopes);\n  const [urls, addUrl, resetUrls] = useUrls();\n  const [isReady, setItemIsReady, setItemIsNotReady, resetReadyItems] = useReady(GENES_DATA_TYPES);\n  useEffect14(() => {\n    resetUrls();\n    resetReadyItems();\n  }, [loaders, dataset]);\n  const [attrs] = useExpressionAttrs(loaders, dataset, setItemIsReady, addUrl, true);\n  const geneList = attrs ? attrs.cols : [];\n  const numGenes = geneList.length;\n\n  function setGeneSelectionAndColorEncoding(newSelection) {\n    setGeneSelection(newSelection);\n    setCellColorEncoding(\"geneSelection\");\n  }\n\n  return /* @__PURE__ */React39.createElement(TitleInfo, {\n    title: title16,\n    info: `${numGenes} ${pluralize(variablesLabel, variablesPluralLabel, numGenes)}`,\n    theme,\n    isScroll: true,\n    removeGridComponent,\n    isReady,\n    urls\n  }, /* @__PURE__ */React39.createElement(Genes, {\n    hasColorEncoding: cellColorEncoding === \"geneSelection\",\n    geneList,\n    geneSelection,\n    geneFilter,\n    setGeneSelection: setGeneSelectionAndColorEncoding,\n    setGeneFilter,\n    setGeneHighlight\n  }));\n} // src/components/sets/CellSetsManagerSubscriber.js\n\n\nimport React51, { useEffect as useEffect16, useState as useState15, useMemo as useMemo10 } from \"react\";\nimport isEqual11 from \"lodash/isEqual\"; // package.json\n\nvar name = \"vitessce\";\nvar version = \"1.1.17\";\nvar description = \"Vitessce app and React component library\";\nvar author = \"C McCallum\";\nvar homepage = \"http://vitessce.io/\";\nvar license = \"MIT\";\nvar repository = \"https://github.com/vitessce/vitessce/\";\nvar keywords = [\"react-component\"];\nvar files = [\"dist\", \"src\"];\nvar main = \"dist/umd/production/index.min.js\";\nvar module = \"dist/esm/index.js\";\nvar peerDependencies = {\n  react: \"^16.8.6\",\n  \"react-dom\": \"^16.8.6\"\n};\nvar dependencies = {\n  \"@hms-dbmi/viv\": \"^0.11.0\",\n  \"@loaders.gl/3d-tiles\": \"^3.0.0\",\n  \"@loaders.gl/core\": \"^3.0.0\",\n  \"@loaders.gl/images\": \"^3.0.0\",\n  \"@loaders.gl/loader-utils\": \"^3.0.0\",\n  \"@luma.gl/core\": \"~8.5.7\",\n  \"@material-ui/core\": \"^4.8.3\",\n  \"@material-ui/icons\": \"^4.9.1\",\n  \"@turf/area\": \"^6.5.0\",\n  \"@turf/boolean-contains\": \"^6.0.1\",\n  \"@turf/boolean-overlap\": \"^6.0.1\",\n  \"@turf/boolean-point-in-polygon\": \"^6.0.1\",\n  \"@turf/boolean-within\": \"^6.0.1\",\n  \"@turf/centroid\": \"^6.0.2\",\n  \"@turf/helpers\": \"^6.1.4\",\n  ajv: \"^6.10.0\",\n  bowser: \"^2.11.0\",\n  classnames: \"^2.2.6\",\n  clsx: \"^1.1.1\",\n  concaveman: \"^1.2.0\",\n  \"d3-array\": \"^2.4.0\",\n  \"d3-dsv\": \"^1.1.1\",\n  \"d3-force\": \"^2.1.1\",\n  \"d3-quadtree\": \"^1.0.7\",\n  \"d3-scale-chromatic\": \"^1.3.3\",\n  \"deck.gl\": \"~8.5.8\",\n  \"dynamic-import-polyfill\": \"^0.1.1\",\n  \"fast-deep-equal\": \"^3.1.3\",\n  glslify: \"^7.0.0\",\n  higlass: \"1.11.4\",\n  \"higlass-register\": \"^0.3.0\",\n  \"higlass-zarr-datafetchers\": \"^0.2.1\",\n  internmap: \"^2.0.3\",\n  json2csv: \"^4.5.2\",\n  lodash: \"^4.17.15\",\n  \"lz-string\": \"^1.4.4\",\n  \"math.gl\": \"^3.1.3\",\n  mathjs: \"^9.2.0\",\n  \"nebula.gl\": \"^0.23.8\",\n  \"prop-types\": \"^15.7.2\",\n  \"rc-tooltip\": \"^4.0.3\",\n  \"rc-tree\": \"2.1.0\",\n  \"react-color\": \"^2.18.0\",\n  \"react-grid-layout\": \"^1.1.1\",\n  \"react-vega\": \"^7.3.0\",\n  \"react-virtualized\": \"^9.22.2\",\n  \"short-number\": \"^1.0.6\",\n  store: \"^2.0.12\",\n  tinycolor2: \"^1.4.1\",\n  tinyqueue: \"^2.0.3\",\n  uuid: \"^3.3.2\",\n  vega: \"^5.13.0\",\n  \"vega-lite\": \"^4.13.0\",\n  \"vega-tooltip\": \"^0.23.0\",\n  \"whatwg-fetch\": \"^3.0.0\",\n  \"window-pixi\": \"5.3.3\",\n  zarr: \"^0.4.0\",\n  zustand: \"^3.5.10\"\n};\nvar devDependencies = {\n  \"@babel/core\": \"7.9.0\",\n  \"@babel/plugin-proposal-class-properties\": \"^7.14.5\",\n  \"@svgr/webpack\": \"5.3.1\",\n  \"@typescript-eslint/eslint-plugin\": \"^2.10.0\",\n  \"@typescript-eslint/parser\": \"^2.10.0\",\n  \"babel-eslint\": \"10.0.3\",\n  \"babel-loader\": \"8.1.0\",\n  \"babel-plugin-glsl\": \"^1.0.0\",\n  \"babel-plugin-named-asset-import\": \"^0.3.6\",\n  \"babel-preset-react-app\": \"^9.1.2\",\n  camelcase: \"^5.3.1\",\n  \"case-sensitive-paths-webpack-plugin\": \"2.3.0\",\n  concurrently: \"^5.3.0\",\n  \"css-loader\": \"3.4.2\",\n  cypress: \"^3.6.1\",\n  \"cypress-fail-on-console-error\": \"^2.0.6\",\n  dotenv: \"8.2.0\",\n  \"dotenv-expand\": \"5.1.0\",\n  enzyme: \"^3.9.0\",\n  \"enzyme-adapter-react-16\": \"^1.11.2\",\n  esbuild: \"^0.12.28\",\n  \"esbuild-plugin-babel\": \"^0.2.3\",\n  \"esbuild-plugin-sass\": \"^0.6.0\",\n  eslint: \"^6.6.0\",\n  \"eslint-config-airbnb\": \"^17.1.0\",\n  \"eslint-config-react-app\": \"^5.2.0\",\n  \"eslint-loader\": \"3.0.3\",\n  \"eslint-plugin-cypress\": \"^2.2.1\",\n  \"eslint-plugin-flowtype\": \"4.6.0\",\n  \"eslint-plugin-import\": \"2.20.0\",\n  \"eslint-plugin-jsx-a11y\": \"6.2.3\",\n  \"eslint-plugin-react\": \"7.18.0\",\n  \"eslint-plugin-react-hooks\": \"^1.6.1\",\n  \"eslint-plugin-vitessce-rules\": \"file:eslint\",\n  expect: \"^24.5.0\",\n  \"file-loader\": \"4.3.0\",\n  \"fs-extra\": \"^8.1.0\",\n  \"glsl-colormap\": \"^1.0.1\",\n  \"html-webpack-plugin\": \"4.0.0-beta.11\",\n  \"http-server\": \"^0.12.3\",\n  \"identity-obj-proxy\": \"3.0.0\",\n  \"js-yaml\": \"^3.13.1\",\n  karma: \"4.4.1\",\n  \"karma-chrome-launcher\": \"3.1.0\",\n  \"karma-mocha\": \"1.3.0\",\n  \"karma-mocha-reporter\": \"2.2.5\",\n  \"karma-sourcemap-loader\": \"0.3.7\",\n  \"karma-webpack\": \"4.0.2\",\n  \"mini-css-extract-plugin\": \"0.9.0\",\n  mocha: \"7.1.0\",\n  \"node-sass\": \"^6.0.0\",\n  \"object.fromentries\": \"^2.0.2\",\n  \"optimize-css-assets-webpack-plugin\": \"5.0.3\",\n  \"pnp-webpack-plugin\": \"1.6.0\",\n  \"postcss-flexbugs-fixes\": \"4.1.0\",\n  \"postcss-loader\": \"3.0.0\",\n  \"postcss-normalize\": \"8.0.1\",\n  \"postcss-preset-env\": \"6.7.0\",\n  \"postcss-safe-parser\": \"4.0.1\",\n  react: \"^16.8.6\",\n  \"react-app-polyfill\": \"^1.0.6\",\n  \"react-dev-utils\": \"^10.2.0\",\n  \"react-dom\": \"^16.8.6\",\n  resolve: \"1.15.0\",\n  \"resolve-url-loader\": \"3.1.1\",\n  \"sass-loader\": \"^10.0.1\",\n  semver: \"6.3.0\",\n  \"style-loader\": \"0.23.1\",\n  \"terser-webpack-plugin\": \"2.3.4\",\n  \"url-loader\": \"2.3.0\",\n  \"wait-on\": \"^3.2.0\",\n  webpack: \"4.41.5\",\n  \"webpack-dev-server\": \"3.10.2\",\n  \"webpack-node-externals\": \"^2.5.2\",\n  \"workbox-webpack-plugin\": \"4.3.1\",\n  \"worker-loader\": \"^2.0.0\"\n};\nvar resolutions = {\n  \"@turf/difference\": \"6.0.1\"\n};\nvar scripts = {\n  \"build-demo:prod\": \"node scripts/build-demo.js production\",\n  \"build-lib:prod\": \"NODE_ENV=production node scripts/build-esm.mjs && node scripts/build-lib.js production\",\n  \"build-demo:dev\": \"node scripts/build-demo.js development\",\n  \"build-lib:dev\": \"NODE_ENV=development node scripts/build-esm.mjs && node scripts/build-lib.js development\",\n  \"build:prod\": \"npm run build-demo:prod && npm run build-lib:prod\",\n  \"build:dev\": \"npm run build-demo:dev && npm run build-lib:dev\",\n  prepublishOnly: \"npm run build-lib:prod\",\n  clean: \"rm -r dist-demo dist\",\n  start: \"node scripts/start-demo.js\",\n  \"start:fixtures\": 'http-server src/loaders/fixtures/ --cors=\"*\" -s',\n  \"start:fixtures-concurrently\": 'concurrently --kill-others \"npm run start:fixtures\"',\n  test: 'npm run start:fixtures-concurrently -- --success first \"karma start scripts/karma.config.js --single-run\"',\n  \"test:watch\": 'npm run start:fixtures-concurrently -- \"karma start scripts/karma.config.js --auto-watch\"',\n  \"cypress:open\": 'npm run start:fixtures-concurrently -- \"cypress open\"',\n  \"cypress:run\": 'npm run start:fixtures-concurrently -- --success first --kill-others \"cypress run\"',\n  \"lint-fix\": \"eslint -c .eslintrc.yml --ext .js --fix src/\"\n};\nvar browserslist = {\n  production: [\">0.2%\", \"not dead\", \"not op_mini all\"],\n  development: [\"last 1 chrome version\", \"last 1 firefox version\", \"last 1 safari version\"]\n};\nvar babel = {\n  presets: [\"react-app\"],\n  plugins: [\"glsl\"]\n};\nvar package_default = {\n  name,\n  version,\n  description,\n  author,\n  homepage,\n  license,\n  repository,\n  keywords,\n  files,\n  main,\n  module,\n  peerDependencies,\n  dependencies,\n  devDependencies,\n  resolutions,\n  scripts,\n  browserslist,\n  babel\n}; // src/components/sets/SetsManager.js\n\nimport React50, { useState as useState14, useMemo as useMemo9 } from \"react\";\nimport isEqual10 from \"lodash/isEqual\"; // src/components/sets/Tree.js\n\nimport React40 from \"react\";\nimport RcTree from \"rc-tree\";\nimport classNames from \"classnames\";\nvar Tree = React40.forwardRef((props, ref) => {\n  const {\n    prefixCls,\n    className,\n    showIcon,\n    blockNode,\n    children,\n    checkable\n  } = props;\n  return /* @__PURE__ */React40.createElement(RcTree, __spreadProps(__spreadValues({\n    itemHeight: 32,\n    ref\n  }, props), {\n    className: classNames(className, {\n      [`${prefixCls}-icon-hide`]: !showIcon,\n      [`${prefixCls}-block-node`]: blockNode\n    }),\n    checkable: checkable ? /* @__PURE__ */React40.createElement(\"span\", {\n      className: `${prefixCls}-checkbox-inner`\n    }) : checkable\n  }), children);\n});\nTree.defaultProps = {\n  virtual: false,\n  checkable: false,\n  showIcon: false,\n  blockNode: true,\n  prefixCls: \"rc-tree\"\n};\nvar Tree_default = Tree; // src/components/sets/TreeNode.js\n\nimport React45, { useState as useState13 } from \"react\";\nimport clsx from \"clsx\";\nimport { TreeNode as RcTreeNode } from \"rc-tree\";\nimport { getDataAndAria } from \"rc-tree/es/util\";\nimport classNames2 from \"classnames\";\nimport range8 from \"lodash/range\";\nimport isEqual9 from \"lodash/isEqual\"; // src/components/sets/PopoverMenu.js\n\nimport React43, { useState as useState12, useEffect as useEffect15 } from \"react\";\nimport { TwitterPicker } from \"react-color\"; // src/components/sets/Popover.js\n\nimport React42 from \"react\"; // src/components/sets/HelpTooltip.js\n\nimport React41, { useRef as useRef7 } from \"react\";\nimport RcTooltip from \"rc-tooltip\";\n\nfunction HelpTooltip(props) {\n  const {\n    title: title16,\n    content,\n    overlayClassName\n  } = props;\n  const spanRef = useRef7();\n  const getTooltipContainer = useVitessceContainer(spanRef);\n  const overlay = title16 || content;\n  return /* @__PURE__ */React41.createElement(React41.Fragment, null, /* @__PURE__ */React41.createElement(\"span\", {\n    ref: spanRef\n  }), /* @__PURE__ */React41.createElement(RcTooltip, __spreadValues({\n    getTooltipContainer,\n    overlayClassName,\n    overlay\n  }, props)));\n}\n\nHelpTooltip.defaultProps = {\n  overlayClassName: \"help-tooltip\",\n  placement: \"top\",\n  trigger: \"hover\",\n  mouseEnterDelay: 0.2,\n  mouseLeaveDelay: 0\n}; // src/components/sets/Popover.js\n\nfunction Popover(props) {\n  return /* @__PURE__ */React42.createElement(HelpTooltip, __spreadValues({}, props));\n}\n\nPopover.defaultProps = {\n  overlayClassName: \"popover\",\n  placement: \"top\",\n  trigger: \"click\",\n  mouseEnterDelay: 0,\n  mouseLeaveDelay: 0\n}; // src/components/sets/PopoverMenu.js\n\nfunction PopoverMenuListButton(props) {\n  const {\n    title: title16,\n    subtitle,\n    onClick,\n    handler,\n    handlerKey,\n    confirm,\n    visible\n  } = props;\n  const [isConfirming, setIsConfirming] = useState12(false);\n  useEffect15(() => {\n    setIsConfirming(false);\n  }, [visible]);\n\n  function handleOrRequireConfirm() {\n    if (!confirm || isConfirming) {\n      onClick();\n      handler();\n    } else {\n      setIsConfirming(true);\n    }\n  }\n\n  const titleWithConfirm = `${isConfirming ? \"Confirm \" : \"\"}${title16}`;\n  return /* @__PURE__ */React43.createElement(\"button\", {\n    title: titleWithConfirm,\n    type: \"button\",\n    onClick: handleOrRequireConfirm,\n    onKeyPress: e => callbackOnKeyPress(e, handlerKey, handleOrRequireConfirm)\n  }, titleWithConfirm, subtitle && /* @__PURE__ */React43.createElement(React43.Fragment, null, /* @__PURE__ */React43.createElement(\"br\", null), /* @__PURE__ */React43.createElement(\"span\", {\n    className: \"small\"\n  }, subtitle)));\n}\n\nfunction PopoverMenuList(props) {\n  const {\n    menuConfig,\n    onClick,\n    color = null,\n    palette = null,\n    setColor = null,\n    visible\n  } = props;\n\n  function handleColorChange(_ref87) {\n    let {\n      rgb\n    } = _ref87;\n\n    if (rgb && setColor) {\n      setColor([rgb.r, rgb.g, rgb.b]);\n    }\n  }\n\n  const defaultPalette = palette ? palette.map(colorArrayToString) : PALETTE.concat([[255, 255, 255], [128, 128, 128], [0, 0, 0]]).map(colorArrayToString);\n  return /* @__PURE__ */React43.createElement(\"div\", null, color && setColor && defaultPalette && /* @__PURE__ */React43.createElement(TwitterPicker, {\n    className: \"popover-menu-color\",\n    disableAlpha: true,\n    width: 108,\n    triangle: \"hide\",\n    colors: defaultPalette,\n    color: colorArrayToString(color),\n    onChangeComplete: handleColorChange\n  }), /* @__PURE__ */React43.createElement(\"ul\", {\n    className: \"popover-menu-list\"\n  }, menuConfig.map(item => /* @__PURE__ */React43.createElement(\"li\", {\n    key: item.title + item.subtitle\n  }, /* @__PURE__ */React43.createElement(PopoverMenuListButton, __spreadProps(__spreadValues({}, item), {\n    onClick,\n    visible\n  }))))));\n}\n\nfunction PopoverMenu(props) {\n  const {\n    menuConfig,\n    placement,\n    children,\n    color = null,\n    setColor = null,\n    palette = null\n  } = props;\n  const [visible, setVisible] = useState12(false);\n  return /* @__PURE__ */React43.createElement(Popover, {\n    content: /* @__PURE__ */React43.createElement(PopoverMenuList, {\n      menuConfig,\n      onClick: () => setVisible(false),\n      color,\n      setColor,\n      palette,\n      visible\n    }),\n    placement,\n    visible,\n    onVisibleChange: setVisible\n  }, children);\n} // src/assets/menu.svg\n\n\nimport { createElement as createElement4 } from \"react\";\n\nfunction SvgMenu(props) {\n  return /* @__PURE__ */createElement4(\"svg\", __spreadValues({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\"\n  }, props), /* @__PURE__ */createElement4(\"path\", {\n    d: \"M12 18c1.657 0 3 1.343 3 3s-1.343 3-3 3-3-1.343-3-3 1.343-3 3-3zm0-9c1.657 0 3 1.343 3 3s-1.343 3-3 3-3-1.343-3-3 1.343-3 3-3zm0-9c1.657 0 3 1.343 3 3s-1.343 3-3 3-3-1.343-3-3 1.343-3 3-3z\"\n  }));\n}\n\nvar ReactComponent4 = SvgMenu; // src/components/sets/TreeNode.js\n\nfunction makeNodeViewMenuConfig(props) {\n  const {\n    path,\n    level,\n    height,\n    onCheckNode,\n    onNodeRemove,\n    onNodeSetIsEditing,\n    onExportLevelZeroNodeJSON,\n    onExportLevelZeroNodeTabular,\n    onExportSetJSON,\n    checkable,\n    editable,\n    exportable,\n    checked\n  } = props;\n  return [...(editable ? [{\n    title: \"Rename\",\n    handler: () => {\n      onNodeSetIsEditing(path, true);\n    },\n    handlerKey: \"r\"\n  }, {\n    title: \"Delete\",\n    confirm: true,\n    handler: () => {\n      onNodeRemove(path);\n    },\n    handlerKey: \"d\"\n  }] : []), ...(level === 0 && exportable ? [{\n    title: \"Export hierarchy\",\n    subtitle: \"(to JSON file)\",\n    handler: () => {\n      onExportLevelZeroNodeJSON(path);\n    },\n    handlerKey: \"j\"\n  }, ...(height <= 1 ? [{\n    title: \"Export hierarchy\",\n    subtitle: \"(to CSV file)\",\n    handler: () => {\n      onExportLevelZeroNodeTabular(path);\n    },\n    handlerKey: \"t\"\n  }] : [])] : []), ...(level > 0 ? [...(checkable ? [{\n    title: checked ? \"Uncheck\" : \"Check\",\n    handler: () => {\n      onCheckNode(path, !checked);\n    },\n    handlerKey: \"s\"\n  }] : []), ...(exportable ? [{\n    title: \"Export set\",\n    subtitle: \"(to JSON file)\",\n    handler: () => {\n      onExportSetJSON(path);\n    },\n    handlerKey: \"e\"\n  }] : [])] : [])];\n}\n\nfunction NamedSetNodeStatic(props) {\n  const {\n    title: title16,\n    path,\n    nodeKey,\n    level,\n    height,\n    color,\n    checkbox,\n    isChecking,\n    isLeaf,\n    onNodeSetColor,\n    onNodeView,\n    expanded,\n    onCheckLevel,\n    checkedLevelPath,\n    checkedLevelIndex,\n    disableTooltip,\n    size,\n    datatype,\n    editable,\n    theme\n  } = props;\n  const shouldCheckNextLevel = level === 0 && !expanded;\n  const nextLevelToCheck = checkedLevelIndex && isEqual9(path, checkedLevelPath) && checkedLevelIndex < height ? checkedLevelIndex + 1 : 1;\n  const numberFormatter = new Intl.NumberFormat(\"en-US\");\n  const niceSize = numberFormatter.format(size);\n  let tooltipText;\n\n  if (shouldCheckNextLevel) {\n    tooltipText = getLevelTooltipText(nextLevelToCheck);\n  } else if (isLeaf || !expanded) {\n    tooltipText = `Color individual set (${niceSize} ${datatype}${size === 1 ? \"\" : \"s\"})`;\n  } else {\n    tooltipText = \"Color by expanded descendants\";\n  }\n\n  const onClick = level === 0 && !expanded ? () => onCheckLevel(nodeKey, nextLevelToCheck) : () => onNodeView(path);\n  const tooltipProps = disableTooltip ? {\n    visible: false\n  } : {};\n  const popoverMenuConfig = makeNodeViewMenuConfig(props);\n  return /* @__PURE__ */React45.createElement(\"span\", null, /* @__PURE__ */React45.createElement(HelpTooltip, __spreadValues({\n    title: tooltipText\n  }, tooltipProps), /* @__PURE__ */React45.createElement(\"button\", {\n    type: \"button\",\n    onClick,\n    onKeyPress: e => callbackOnKeyPress(e, \"v\", () => onNodeView(path)),\n    className: \"title-button\"\n  }, title16)), popoverMenuConfig.length > 0 ? /* @__PURE__ */React45.createElement(PopoverMenu, {\n    menuConfig: makeNodeViewMenuConfig(props),\n    color: level > 0 && editable ? color || getDefaultColor(theme) : null,\n    setColor: c => onNodeSetColor(path, c)\n  }, /* @__PURE__ */React45.createElement(ReactComponent4, {\n    className: \"node-menu-icon\"\n  })) : null, level > 0 && isChecking ? checkbox : null, level > 0 && /* @__PURE__ */React45.createElement(\"span\", {\n    className: \"node-size-label\"\n  }, niceSize));\n}\n\nfunction NamedSetNodeEditing(props) {\n  const {\n    title: title16,\n    path,\n    onNodeSetName,\n    onNodeCheckNewName\n  } = props;\n  const [currentTitle, setCurrentTitle] = useState13(title16);\n  const hasConflicts = onNodeCheckNewName(path, currentTitle);\n\n  function trySetName() {\n    if (!hasConflicts) {\n      onNodeSetName(path, currentTitle, true);\n    }\n  }\n\n  return /* @__PURE__ */React45.createElement(\"span\", {\n    className: \"title-button-with-input\"\n  }, /* @__PURE__ */React45.createElement(\"input\", {\n    autoFocus: true,\n    className: \"title-input\",\n    type: \"text\",\n    value: currentTitle,\n    onChange: e => {\n      setCurrentTitle(e.target.value);\n    },\n    onKeyPress: e => callbackOnKeyPress(e, \"Enter\", trySetName),\n    onFocus: e => e.target.select()\n  }), !hasConflicts && /* @__PURE__ */React45.createElement(\"button\", {\n    type: \"button\",\n    className: \"title-save-button\",\n    onClick: trySetName\n  }, \"Save\"));\n}\n\nfunction NamedSetNode(props) {\n  const {\n    isEditing,\n    isCurrentSet\n  } = props;\n  return isEditing || isCurrentSet ? /* @__PURE__ */React45.createElement(NamedSetNodeEditing, __spreadValues({}, props)) : /* @__PURE__ */React45.createElement(NamedSetNodeStatic, __spreadValues({}, props));\n}\n\nfunction LevelsButtons(props) {\n  const {\n    nodeKey,\n    path,\n    height,\n    onCheckLevel,\n    checkedLevelPath,\n    checkedLevelIndex,\n    hasColorEncoding\n  } = props;\n\n  function onCheck(event) {\n    if (event.target.checked) {\n      const newLevel = parseInt(event.target.value, 10);\n      onCheckLevel(nodeKey, newLevel);\n    }\n  }\n\n  return /* @__PURE__ */React45.createElement(\"div\", {\n    className: \"level-buttons-container\"\n  }, range8(1, height + 1).map(i => {\n    const isChecked = isEqual9(path, checkedLevelPath) && i === checkedLevelIndex;\n    return /* @__PURE__ */React45.createElement(\"div\", {\n      className: \"level-buttons\",\n      key: i\n    }, /* @__PURE__ */React45.createElement(HelpTooltip, {\n      title: getLevelTooltipText(i)\n    }, /* @__PURE__ */React45.createElement(\"input\", {\n      className: clsx(\"level-radio-button\", {\n        checked: isChecked && !hasColorEncoding\n      }),\n      type: \"checkbox\",\n      value: i,\n      checked: isChecked && hasColorEncoding,\n      onChange: onCheck\n    })));\n  }));\n}\n\nfunction SwitcherIcon(props) {\n  const {\n    isLeaf,\n    isOpen,\n    color\n  } = props;\n  const hexColor = color ? colorArrayToString(color) : void 0;\n\n  if (isLeaf) {\n    return /* @__PURE__ */React45.createElement(\"i\", {\n      className: \"anticon anticon-circle rc-tree-switcher-icon\"\n    }, /* @__PURE__ */React45.createElement(\"svg\", {\n      viewBox: \"0 0 1024 1024\",\n      focusable: \"false\",\n      \"data-icon\": \"caret-down\",\n      width: \"1em\",\n      height: \"1em\",\n      \"aria-hidden\": \"true\"\n    }, /* @__PURE__ */React45.createElement(\"rect\", {\n      fill: hexColor,\n      x: 600 / 2,\n      y: 600 / 2,\n      width: 1024 - 600,\n      height: 1024 - 600\n    })));\n  }\n\n  return /* @__PURE__ */React45.createElement(\"i\", {\n    className: \"anticon anticon-caret-down rc-tree-switcher-icon\"\n  }, /* @__PURE__ */React45.createElement(\"svg\", {\n    viewBox: \"0 0 1024 1024\",\n    focusable: \"false\",\n    \"data-icon\": \"caret-down\",\n    width: \"1em\",\n    height: \"1em\",\n    \"aria-hidden\": \"true\"\n  }, /* @__PURE__ */React45.createElement(\"path\", {\n    fill: isOpen ? \"#444\" : hexColor,\n    d: \"M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z\"\n  })));\n}\n\nvar TreeNode = class extends RcTreeNode {\n  constructor() {\n    super(...arguments);\n\n    __publicField(this, \"renderSelector\", () => {\n      const {\n        title: title16,\n        isCurrentSet,\n        isSelected,\n        isEditing,\n        onDragStart: onDragStartProp\n      } = this.props;\n      const {\n        rcTree: {\n          prefixCls: prefixClass,\n          draggable\n        }\n      } = this.context;\n\n      const onDragStart = e => {\n        onDragStartProp();\n        this.onDragStart(e);\n      };\n\n      const wrapClass = `${prefixClass}-node-content-wrapper`;\n      const isDraggable = !isCurrentSet && !isEditing && draggable;\n      return /* @__PURE__ */React45.createElement(\"span\", {\n        ref: this.setSelectHandle,\n        title: title16,\n        className: classNames2(wrapClass, `${wrapClass}-${this.getNodeState() || \"normal\"}`, isSelected && `${prefixClass}-node-selected`, isDraggable && \"draggable\"),\n        draggable: isDraggable,\n        \"aria-grabbed\": isDraggable,\n        onDragStart: isDraggable ? onDragStart : void 0\n      }, /* @__PURE__ */React45.createElement(NamedSetNode, __spreadProps(__spreadValues({}, this.props), {\n        prefixClass,\n        checkbox: this.renderCheckbox()\n      })), this.renderLevels());\n    });\n\n    __publicField(this, \"renderLevels\", () => {\n      const {\n        level,\n        expanded\n      } = this.props;\n\n      if (level !== 0 || expanded) {\n        return null;\n      }\n\n      return /* @__PURE__ */React45.createElement(LevelsButtons, __spreadValues({}, this.props));\n    });\n\n    __publicField(this, \"renderSwitcher\", () => {\n      const {\n        expanded,\n        isLeaf,\n        color\n      } = this.props;\n      const {\n        rcTree: {\n          prefixCls: prefixClass,\n          onNodeExpand\n        }\n      } = this.context;\n\n      const onNodeExpandWrapper = e => {\n        if (!isLeaf) {\n          onNodeExpand(e, this);\n        }\n      };\n\n      const switcherClass = classNames2(`${prefixClass}-switcher`, {\n        [`${prefixClass}-switcher_${expanded ? \"open\" : \"close\"}`]: !isLeaf\n      });\n      return /* @__PURE__ */React45.createElement(\"span\", {\n        className: switcherClass,\n        onClick: onNodeExpandWrapper,\n        onKeyPress: e => callbackOnKeyPress(e, \"d\", onNodeExpandWrapper),\n        role: \"button\",\n        tabIndex: \"0\"\n      }, /* @__PURE__ */React45.createElement(SwitcherIcon, {\n        isLeaf,\n        isOpen: expanded,\n        color\n      }));\n    });\n  }\n\n  render() {\n    const _a2 = this.props,\n          {\n      style,\n      loading,\n      level,\n      dragOver,\n      dragOverGapTop,\n      dragOverGapBottom,\n      isLeaf,\n      expanded,\n      selected,\n      checked,\n      halfChecked,\n      onDragEnd: onDragEndProp,\n      expandable\n    } = _a2,\n          otherProps = __objRest(_a2, [\"style\", \"loading\", \"level\", \"dragOver\", \"dragOverGapTop\", \"dragOverGapBottom\", \"isLeaf\", \"expanded\", \"selected\", \"checked\", \"halfChecked\", \"onDragEnd\", \"expandable\"]);\n\n    const {\n      rcTree: {\n        prefixCls: prefixClass,\n        filterTreeNode,\n        draggable\n      }\n    } = this.context;\n    const disabled = this.isDisabled();\n    const dataAndAriaAttributeProps = getDataAndAria(otherProps);\n\n    const onDragEnd = e => {\n      onDragEndProp();\n      this.onDragEnd(e);\n    };\n\n    return /* @__PURE__ */React45.createElement(\"li\", __spreadValues({\n      className: classNames2(\"rc-tree-treenode\", `level-${level}-treenode`, {\n        [`${prefixClass}-treenode-disabled`]: disabled,\n        [`${prefixClass}-treenode-switcher-${expanded ? \"open\" : \"close\"}`]: !isLeaf,\n        [`${prefixClass}-treenode-checkbox-checked`]: checked,\n        [`${prefixClass}-treenode-checkbox-indeterminate`]: halfChecked,\n        [`${prefixClass}-treenode-selected`]: selected,\n        [`${prefixClass}-treenode-loading`]: loading,\n        \"drag-over\": !disabled && dragOver,\n        \"drag-over-gap-top\": !disabled && dragOverGapTop,\n        \"drag-over-gap-bottom\": !disabled && dragOverGapBottom,\n        \"filter-node\": filterTreeNode && filterTreeNode(this)\n      }),\n      style,\n      role: \"treeitem\",\n      onDragEnter: draggable ? this.onDragEnter : void 0,\n      onDragOver: draggable ? this.onDragOver : void 0,\n      onDragLeave: draggable ? this.onDragLeave : void 0,\n      onDrop: draggable ? this.onDrop.bind(this) : void 0,\n      onDragEnd: draggable ? onDragEnd : void 0\n    }, dataAndAriaAttributeProps), expandable ? this.renderSwitcher() : null, this.renderSelector(), this.renderChildren());\n  }\n\n}; // src/components/sets/SetsManagerButtons.js\n\nimport React49, { useCallback as useCallback11 } from \"react\"; // src/assets/sets/union.svg\n\nimport { createElement as createElement5 } from \"react\";\n\nfunction SvgUnion(props) {\n  return /* @__PURE__ */createElement5(\"svg\", __spreadValues({\n    viewBox: \"0 0 16.433999 10.234\",\n    height: 12,\n    width: 18\n  }, props), /* @__PURE__ */createElement5(\"g\", {\n    transform: \"translate(0.117,-2.883)\"\n  }, /* @__PURE__ */createElement5(\"path\", {\n    d: \"m 11.467471,11.811278 c 0.198237,-0.322177 0.508,-1.011333 0.653661,-1.454255 0.659343,-2.0049141 0.44323,-4.2620847 -0.577734,-6.0340822 l -0.168844,-0.2930481 0.105744,0.017887 c 0.759902,0.1285441 1.368762,0.3699553 1.856675,0.7361658 1.988296,1.4923476 2.192477,4.3353549 0.434717,6.0529895 -0.641216,0.626581 -1.299647,0.94683 -2.294136,1.115833 l -0.108488,0.01844 z M 4.3162122,11.919169 C 1.9278944,11.487872 0.46692382,9.0323123 1.234873,6.7401372 1.5621727,5.763213 2.2610593,4.9489746 3.1840041,4.4693005 3.5978035,4.2542401 3.9427842,4.145371 4.5197023,4.0477802 L 4.6254464,4.0298927 4.4571836,4.3223069 C 3.4332707,6.1017061 3.2180432,8.3476022 3.878868,10.357023 c 0.1458466,0.443487 0.4554716,1.132155 0.6542959,1.455285 0.054471,0.08853 0.087814,0.159599 0.074096,0.157937 -0.013718,-0.0017 -0.1446898,-0.02465 -0.2910477,-0.05108 z M 5.0000001,3 C 2.2,3 0,5.2 0,8 c 0,2.8 2.2,5 5.0000001,5 0.6,0 1.1,-0.1 1.6,-0.3 C 5.3000001,11.6 4.5,9.7999998 4.5,8 4.5,6.2 5.3000001,4.5 6.6000001,3.3 c -0.5,-0.2 -1,-0.3 -1.6,-0.3 z M 4.65,4.02 C 3.92,5.17 3.51,6.54 3.51,8 c 0,1.4599998 0.42,2.83 1.14,3.98 C 2.61,11.8 1.01,10.08 1.01,8 1.01,5.92 2.61,4.2 4.65,4.02 Z M 8,4 C 6.8,4.9 6,6.4 6,8 6,9.6 6.8,11.1 8,12 9.2,11.1 10,9.7 10,8 10,6.3 9.2,4.9 8,4 Z m 3,-1 c 2.8,0 5,2.2 5,5 0,2.8 -2.2,5 -5,5 C 10.4,13 9.9,12.9 9.4,12.7 10.7,11.6 11.5,9.8 11.5,8 11.5,6.2 10.7,4.5 9.4,3.3 9.9,3.1 10.4,3 11,3 Z m 0.35,1.02 c 0.73,1.15 1.14,2.52 1.14,3.98 0,1.46 -0.42,2.83 -1.14,3.98 2.04,-0.18 3.64,-1.9 3.64,-3.98 0,-2.08 -1.6,-3.8 -3.64,-3.98 z\",\n    style: {\n      strokeWidth: 0.234,\n      strokeMiterlimit: 4,\n      strokeDasharray: \"none\",\n      strokeOpacity: 1\n    }\n  })));\n}\n\nvar ReactComponent5 = SvgUnion; // src/assets/sets/intersection.svg\n\nimport { createElement as createElement6 } from \"react\";\n\nfunction SvgIntersection(props) {\n  return /* @__PURE__ */createElement6(\"svg\", __spreadValues({\n    width: 18,\n    height: 12,\n    viewBox: \"0 0 16 10\"\n  }, props), /* @__PURE__ */createElement6(\"g\", {\n    transform: \"translate(0,-3)\"\n  }, /* @__PURE__ */createElement6(\"path\", {\n    d: \"M 5.0000001,3 C 2.2,3 0,5.2 0,8 c 0,2.8 2.2,5 5.0000001,5 0.6,0 1.1,-0.1 1.6,-0.3 C 5.3000001,11.6 4.5,9.7999998 4.5,8 4.5,6.2 5.3000001,4.5 6.6000001,3.3 c -0.5,-0.2 -1,-0.3 -1.6,-0.3 z M 4.65,4.02 C 3.92,5.17 3.51,6.54 3.51,8 c 0,1.4599998 0.42,2.83 1.14,3.98 C 2.61,11.8 1.01,10.08 1.01,8 1.01,5.92 2.61,4.2 4.65,4.02 Z M 8,4 C 6.8,4.9 6,6.4 6,8 6,9.6 6.8,11.1 8,12 9.2,11.1 10,9.7 10,8 10,6.3 9.2,4.9 8,4 Z m 3,-1 c 2.8,0 5,2.2 5,5 0,2.8 -2.2,5 -5,5 C 10.4,13 9.9,12.9 9.4,12.7 10.7,11.6 11.5,9.8 11.5,8 11.5,6.2 10.7,4.5 9.4,3.3 9.9,3.1 10.4,3 11,3 Z m 0.35,1.02 c 0.73,1.15 1.14,2.52 1.14,3.98 0,1.46 -0.42,2.83 -1.14,3.98 2.04,-0.18 3.64,-1.9 3.64,-3.98 0,-2.08 -1.6,-3.8 -3.64,-3.98 z\",\n    style: {\n      strokeWidth: 0.234,\n      strokeMiterlimit: 4,\n      strokeDasharray: \"none\",\n      strokeOpacity: 1\n    }\n  })));\n}\n\nvar ReactComponent6 = SvgIntersection; // src/assets/sets/complement.svg\n\nimport { createElement as createElement7 } from \"react\";\n\nfunction SvgComplement(props) {\n  return /* @__PURE__ */createElement7(\"svg\", __spreadValues({\n    id: \"svg14\",\n    viewBox: \"0 0 25.3804963846 16\",\n    height: 16,\n    width: 25.3804963846\n  }, props), /* @__PURE__ */createElement7(\"defs\", null, /* @__PURE__ */createElement7(\"mask\", {\n    id: \"union-mask\",\n    x: 0,\n    y: 0,\n    width: 25.3804963846,\n    height: 16\n  }, /* @__PURE__ */createElement7(\"rect\", {\n    x: \"5%\",\n    width: \"90%\",\n    height: \"100%\",\n    fill: \"white\"\n  }), /* @__PURE__ */createElement7(\"g\", {\n    transform: \"translate(4.69,0)\"\n  }, /* @__PURE__ */createElement7(\"path\", {\n    d: \"m 11.467471,11.811278 c 0.198237,-0.322177 0.508,-1.011333 0.653661,-1.454255 0.659343,-2.0049141 0.44323,-4.2620847 -0.577734,-6.0340822 l -0.168844,-0.2930481 0.105744,0.017887 c 0.759902,0.1285441 1.368762,0.3699553 1.856675,0.7361658 1.988296,1.4923476 2.192477,4.3353549 0.434717,6.0529895 -0.641216,0.626581 -1.299647,0.94683 -2.294136,1.115833 l -0.108488,0.01844 z M 4.3162122,11.919169 C 1.9278944,11.487872 0.46692382,9.0323123 1.234873,6.7401372 1.5621727,5.763213 2.2610593,4.9489746 3.1840041,4.4693005 3.5978035,4.2542401 3.9427842,4.145371 4.5197023,4.0477802 L 4.6254464,4.0298927 4.4571836,4.3223069 C 3.4332707,6.1017061 3.2180432,8.3476022 3.878868,10.357023 c 0.1458466,0.443487 0.4554716,1.132155 0.6542959,1.455285 0.054471,0.08853 0.087814,0.159599 0.074096,0.157937 -0.013718,-0.0017 -0.1446898,-0.02465 -0.2910477,-0.05108 z M 5.0000001,3 C 2.2,3 0,5.2 0,8 c 0,2.8 2.2,5 5.0000001,5 0.6,0 1.1,-0.1 1.6,-0.3 C 5.3000001,11.6 4.5,9.7999998 4.5,8 4.5,6.2 5.3000001,4.5 6.6000001,3.3 c -0.5,-0.2 -1,-0.3 -1.6,-0.3 z M 4.65,4.02 C 3.92,5.17 3.51,6.54 3.51,8 c 0,1.4599998 0.42,2.83 1.14,3.98 C 2.61,11.8 1.01,10.08 1.01,8 1.01,5.92 2.61,4.2 4.65,4.02 Z M 8,4 C 6.8,4.9 6,6.4 6,8 6,9.6 6.8,11.1 8,12 9.2,11.1 10,9.7 10,8 10,6.3 9.2,4.9 8,4 Z m 3,-1 c 2.8,0 5,2.2 5,5 0,2.8 -2.2,5 -5,5 C 10.4,13 9.9,12.9 9.4,12.7 10.7,11.6 11.5,9.8 11.5,8 11.5,6.2 10.7,4.5 9.4,3.3 9.9,3.1 10.4,3 11,3 Z m 0.35,1.02 c 0.73,1.15 1.14,2.52 1.14,3.98 0,1.46 -0.42,2.83 -1.14,3.98 2.04,-0.18 3.64,-1.9 3.64,-3.98 0,-2.08 -1.6,-3.8 -3.64,-3.98 z\",\n    style: {\n      strokeWidth: 0.234,\n      strokeMiterlimit: 4,\n      strokeDasharray: \"none\",\n      strokeOpacity: 1\n    },\n    fill: \"black\"\n  })))), /* @__PURE__ */createElement7(\"g\", null, /* @__PURE__ */createElement7(\"rect\", {\n    x: 0,\n    y: 0,\n    width: 25.3804963846,\n    height: 16,\n    mask: \"url(#union-mask)\"\n  })));\n}\n\nvar ReactComponent7 = SvgComplement; // src/components/sets/SetsManagerButtons.js\n\nfunction PlusButton(props) {\n  const {\n    datatype,\n    onError,\n    onImportTree,\n    onCreateLevelZeroNode,\n    importable,\n    editable\n  } = props;\n  const onImport = useCallback11((importHandler, mimeType) => () => {\n    const uploadInputNode = document.createElement(\"input\");\n    uploadInputNode.setAttribute(\"type\", \"file\");\n    uploadInputNode.setAttribute(\"accept\", mimeType);\n    document.body.appendChild(uploadInputNode);\n    uploadInputNode.click();\n    uploadInputNode.addEventListener(\"change\", event => {\n      if (!(window.File && window.FileReader && window.FileList && window.Blob)) {\n        onError(\"Local file reading APIs are not fully supported in this browser.\");\n        return;\n      }\n\n      const {\n        files: files2\n      } = event.target;\n\n      if (!files2 || files2.length !== 1) {\n        onError(\"Incorrect number of files selected.\");\n        return;\n      }\n\n      const reader = new FileReader();\n      reader.addEventListener(\"load\", () => {\n        const {\n          result\n        } = reader;\n\n        try {\n          const treeToImport = importHandler(result, datatype);\n          onError(false);\n          onImportTree(treeToImport);\n        } catch (e) {\n          onError(e.message);\n        }\n      }, false);\n      reader.readAsText(files2[0]);\n    });\n    uploadInputNode.remove();\n  }, [datatype, onError, onImportTree]);\n  const menuConfig = [...(editable ? [{\n    title: \"Create hierarchy\",\n    handler: onCreateLevelZeroNode,\n    handlerKey: \"n\"\n  }] : []), ...(importable ? [{\n    title: \"Import hierarchy\",\n    subtitle: \"(from CSV file)\",\n    handler: onImport(handleImportTabular, MIME_TYPE_TABULAR),\n    handlerKey: \"c\"\n  }, {\n    title: \"Import hierarchy\",\n    subtitle: \"(from JSON file)\",\n    handler: onImport(handleImportJSON, MIME_TYPE_JSON),\n    handlerKey: \"j\"\n  }] : [])];\n  return menuConfig.length > 0 ? /* @__PURE__ */React49.createElement(PopoverMenu, {\n    menuConfig\n  }, /* @__PURE__ */React49.createElement(\"button\", {\n    className: \"plus-button\",\n    type: \"submit\"\n  }, \"+\")) : null;\n}\n\nfunction SetOperationButtons(props) {\n  const {\n    onUnion,\n    onIntersection,\n    onComplement,\n    operatable,\n    hasCheckedSetsToUnion,\n    hasCheckedSetsToIntersect,\n    hasCheckedSetsToComplement\n  } = props;\n  return /* @__PURE__ */React49.createElement(React49.Fragment, null, operatable && /* @__PURE__ */React49.createElement(React49.Fragment, null, /* @__PURE__ */React49.createElement(\"button\", {\n    onClick: onUnion,\n    title: \"New set from union of checked sets\",\n    type: \"submit\",\n    disabled: !hasCheckedSetsToUnion\n  }, /* @__PURE__ */React49.createElement(ReactComponent5, null)), /* @__PURE__ */React49.createElement(\"button\", {\n    onClick: onIntersection,\n    title: \"New set from intersection of checked sets\",\n    type: \"submit\",\n    disabled: !hasCheckedSetsToIntersect\n  }, /* @__PURE__ */React49.createElement(ReactComponent6, null)), /* @__PURE__ */React49.createElement(\"button\", {\n    onClick: onComplement,\n    title: \"New set from complement of checked sets\",\n    type: \"submit\",\n    disabled: !hasCheckedSetsToComplement\n  }, /* @__PURE__ */React49.createElement(ReactComponent7, null))));\n} // src/components/sets/SetsManager.js\n\n\nfunction processNode(node, prevPath, setColor, theme) {\n  var _a2;\n\n  const nodePath = [...prevPath, node.name];\n  return __spreadProps(__spreadValues(__spreadValues({}, node), node.children ? {\n    children: node.children.map(c => processNode(c, nodePath, setColor))\n  } : {}), {\n    color: ((_a2 = setColor == null ? void 0 : setColor.find(d => isEqual10(d.path, nodePath))) == null ? void 0 : _a2.color) || getDefaultColor(theme)\n  });\n}\n\nfunction processSets(sets, setColor, theme) {\n  return __spreadProps(__spreadValues({}, sets), {\n    tree: sets ? sets.tree.map(lzn => processNode(lzn, [], setColor, theme)) : []\n  });\n}\n\nfunction getAllKeys(node) {\n  let path = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n\n  if (!node) {\n    return null;\n  }\n\n  const newPath = [...path, node.name];\n\n  if (node.children) {\n    return [pathToKey(newPath), ...node.children.flatMap(v => getAllKeys(v, newPath))];\n  }\n\n  return pathToKey(newPath);\n}\n\nfunction SetsManager(props) {\n  const {\n    theme,\n    sets,\n    additionalSets,\n    setColor,\n    levelSelection: checkedLevel,\n    setSelection,\n    setExpansion,\n    hasColorEncoding,\n    datatype,\n    draggable = true,\n    checkable = true,\n    editable = true,\n    expandable = true,\n    operatable = true,\n    exportable = true,\n    importable = true,\n    onError,\n    onCheckNode,\n    onExpandNode,\n    onDropNode,\n    onCheckLevel,\n    onNodeSetColor,\n    onNodeSetName,\n    onNodeCheckNewName,\n    onNodeRemove,\n    onNodeView,\n    onImportTree,\n    onCreateLevelZeroNode,\n    onExportLevelZeroNodeJSON,\n    onExportLevelZeroNodeTabular,\n    onExportSetJSON,\n    onUnion,\n    onIntersection,\n    onComplement,\n    hasCheckedSetsToUnion,\n    hasCheckedSetsToIntersect,\n    hasCheckedSetsToComplement\n  } = props;\n  const isChecking = true;\n  const autoExpandParent = true;\n  const [isDragging, setIsDragging] = useState14(false);\n  const [isEditingNodeName, setIsEditingNodeName] = useState14(null);\n  const processedSets = useMemo9(() => processSets(sets, setColor, theme), [sets, setColor, theme]);\n  const processedAdditionalSets = useMemo9(() => processSets(additionalSets, setColor, theme), [additionalSets, setColor, theme]);\n  const additionalSetKeys = processedAdditionalSets ? processedAdditionalSets.tree.flatMap(v => getAllKeys(v, [])) : [];\n  const allSetSelectionKeys = (setSelection || []).map(pathToKey);\n  const allSetExpansionKeys = (setExpansion || []).map(pathToKey);\n  const setSelectionKeys = allSetSelectionKeys.filter(k => !additionalSetKeys.includes(k));\n  const setExpansionKeys = allSetExpansionKeys.filter(k => !additionalSetKeys.includes(k));\n  const additionalSetSelectionKeys = allSetSelectionKeys.filter(k => additionalSetKeys.includes(k));\n  const additionalSetExpansionKeys = allSetExpansionKeys.filter(k => additionalSetKeys.includes(k));\n\n  function renderTreeNodes(nodes, readOnly, currPath) {\n    if (!nodes) {\n      return null;\n    }\n\n    return nodes.map(node => {\n      const newPath = [...currPath, node.name];\n      return /* @__PURE__ */React50.createElement(TreeNode, __spreadProps(__spreadValues({\n        theme,\n        key: pathToKey(newPath)\n      }, nodeToRenderProps(node, newPath, setColor)), {\n        isEditing: isEqual10(isEditingNodeName, newPath),\n        datatype,\n        draggable: draggable && !readOnly,\n        editable: editable && !readOnly,\n        checkable,\n        expandable,\n        exportable,\n        hasColorEncoding,\n        isChecking,\n        checkedLevelPath: checkedLevel ? checkedLevel.levelZeroPath : null,\n        checkedLevelIndex: checkedLevel ? checkedLevel.levelIndex : null,\n        onCheckNode,\n        onCheckLevel,\n        onNodeView,\n        onNodeSetColor,\n        onNodeSetName: (targetPath, name2) => {\n          onNodeSetName(targetPath, name2);\n          setIsEditingNodeName(null);\n        },\n        onNodeCheckNewName,\n        onNodeSetIsEditing: setIsEditingNodeName,\n        onNodeRemove,\n        onExportLevelZeroNodeJSON,\n        onExportLevelZeroNodeTabular,\n        onExportSetJSON,\n        disableTooltip: isDragging,\n        onDragStart: () => setIsDragging(true),\n        onDragEnd: () => setIsDragging(false)\n      }), renderTreeNodes(node.children, readOnly, newPath, theme));\n    });\n  }\n\n  return /* @__PURE__ */React50.createElement(\"div\", {\n    className: \"sets-manager\"\n  }, /* @__PURE__ */React50.createElement(\"div\", {\n    className: \"sets-manager-tree\"\n  }, /* @__PURE__ */React50.createElement(Tree_default, {\n    draggable: false,\n    checkable,\n    checkedKeys: setSelectionKeys,\n    expandedKeys: setExpansionKeys,\n    autoExpandParent,\n    onCheck: (checkedKeys, info) => onCheckNode(info.node.props.nodeKey, info.checked),\n    onExpand: (expandedKeys, info) => onExpandNode(expandedKeys, info.node.props.nodeKey, info.expanded)\n  }, renderTreeNodes(processedSets.tree, true, [], theme)), /* @__PURE__ */React50.createElement(Tree_default, {\n    draggable: true,\n    checkable,\n    checkedKeys: additionalSetSelectionKeys,\n    expandedKeys: additionalSetExpansionKeys,\n    autoExpandParent,\n    onCheck: (checkedKeys, info) => onCheckNode(info.node.props.nodeKey, info.checked),\n    onExpand: (expandedKeys, info) => onExpandNode(expandedKeys, info.node.props.nodeKey, info.expanded),\n    onDrop: info => {\n      const {\n        eventKey: dropKey\n      } = info.node.props;\n      const {\n        eventKey: dragKey\n      } = info.dragNode.props;\n      const {\n        dropToGap,\n        dropPosition\n      } = info;\n      onDropNode(dropKey, dragKey, dropPosition, dropToGap);\n    }\n  }, renderTreeNodes(processedAdditionalSets.tree, false, [], theme)), /* @__PURE__ */React50.createElement(PlusButton, {\n    datatype,\n    onError,\n    onImportTree,\n    onCreateLevelZeroNode,\n    importable,\n    editable\n  })), isChecking ? /* @__PURE__ */React50.createElement(\"div\", {\n    className: \"set-operation-buttons\"\n  }, /* @__PURE__ */React50.createElement(SetOperationButtons, {\n    onUnion,\n    onIntersection,\n    onComplement,\n    operatable,\n    hasCheckedSetsToUnion,\n    hasCheckedSetsToIntersect,\n    hasCheckedSetsToComplement\n  })) : null);\n} // src/components/sets/CellSetsManagerSubscriber.js\n\n\nvar CELL_SETS_DATA_TYPES = [\"cells\", \"cell-sets\"];\n\nfunction CellSetsManagerSubscriber(props) {\n  const {\n    coordinationScopes,\n    removeGridComponent,\n    theme,\n    title: title16 = \"Cell Sets\"\n  } = props;\n  const loaders = useLoaders();\n  const setWarning = useSetWarning();\n  const [{\n    dataset,\n    cellSetSelection,\n    cellSetColor,\n    additionalCellSets,\n    cellColorEncoding\n  }, {\n    setCellSetSelection,\n    setCellColorEncoding,\n    setCellSetColor,\n    setAdditionalCellSets\n  }] = useCoordination(COMPONENT_COORDINATION_TYPES.cellSets, coordinationScopes);\n  const [urls, addUrl, resetUrls] = useUrls();\n  const [isReady, setItemIsReady, setItemIsNotReady, resetReadyItems] = useReady(CELL_SETS_DATA_TYPES);\n  const [cellSetExpansion, setCellSetExpansion] = useState15([]);\n  useEffect16(() => {\n    resetUrls();\n    resetReadyItems();\n    setCellSetExpansion([]);\n  }, [loaders, dataset]);\n  const [cells] = useCellsData(loaders, dataset, setItemIsReady, addUrl, true);\n  const [cellSets] = useCellSetsData(loaders, dataset, setItemIsReady, addUrl, true, {\n    setCellSetSelection,\n    setCellSetColor\n  }, {\n    cellSetSelection,\n    cellSetColor\n  });\n  useEffect16(() => {\n    if (additionalCellSets) {\n      let upgradedCellSets;\n\n      try {\n        upgradedCellSets = tryUpgradeTreeToLatestSchema(additionalCellSets, SETS_DATATYPE_CELL);\n      } catch (e) {\n        setWarning(e.message);\n        return;\n      }\n\n      setAdditionalCellSets(upgradedCellSets);\n    }\n  }, [additionalCellSets, setAdditionalCellSets, setWarning]);\n  const allCellIds = useMemo10(() => cells ? Object.keys(cells) : [], [cells]);\n\n  function setCellSetColorEncoding() {\n    setCellColorEncoding(\"cellSetSelection\");\n  }\n\n  const mergedCellSets = useMemo10(() => mergeCellSets(cellSets, additionalCellSets), [cellSets, additionalCellSets]);\n  const checkedLevel = useMemo10(() => {\n    if (cellSetSelection && cellSetSelection.length > 0 && mergedCellSets && mergedCellSets.tree.length > 0) {\n      return treeToExpectedCheckedLevel(mergedCellSets, cellSetSelection);\n    }\n\n    return null;\n  }, [cellSetSelection, mergedCellSets]);\n\n  function onCheckLevel(levelZeroName, levelIndex) {\n    const lzn = mergedCellSets.tree.find(n => n.name === levelZeroName);\n\n    if (lzn) {\n      const newCellSetSelection = nodeToLevelDescendantNamePaths(lzn, levelIndex, [], true);\n      setCellSetSelection(newCellSetSelection);\n      setCellSetColorEncoding();\n    }\n  }\n\n  function onCheckNode(targetKey, checked) {\n    const targetPath = Array.isArray(targetKey) ? targetKey : targetKey.split(PATH_SEP);\n\n    if (!targetKey) {\n      return;\n    }\n\n    if (checked) {\n      setCellSetSelection([...cellSetSelection, targetPath]);\n    } else {\n      setCellSetSelection(cellSetSelection.filter(d => !isEqual11(d, targetPath)));\n    }\n\n    setCellSetColorEncoding();\n  }\n\n  function onExpandNode(expandedKeys, targetKey, expanded) {\n    if (expanded) {\n      setCellSetExpansion(prev => [...prev, targetKey.split(PATH_SEP)]);\n    } else {\n      setCellSetExpansion(prev => prev.filter(d => !isEqual11(d, targetKey.split(PATH_SEP))));\n    }\n  }\n\n  function onDropNode(dropKey, dragKey, dropPosition, dropToGap) {\n    const dropPath = dropKey.split(PATH_SEP);\n    const dropNode = treeFindNodeByNamePath(additionalCellSets, dropPath);\n\n    if (!dropNode.children && !dropToGap) {\n      return;\n    }\n\n    const dropNodeLevel = dropPath.length - 1;\n    const dropNodeIsLevelZero = dropNodeLevel === 0;\n    const dragPath = dragKey.split(PATH_SEP);\n    const dragNode = treeFindNodeByNamePath(additionalCellSets, dragPath);\n\n    if (dropNodeIsLevelZero && dropToGap && !dragNode.children) {\n      return;\n    }\n\n    let dropParentNode;\n    let dropParentPath;\n    let dropNodeCurrIndex;\n\n    if (!dropNodeIsLevelZero) {\n      dropParentPath = dropPath.slice(0, -1);\n      dropParentNode = treeFindNodeByNamePath(additionalCellSets, dropParentPath);\n      dropNodeCurrIndex = dropParentNode.children.findIndex(c => c.name === dropNode.name);\n    } else {\n      dropNodeCurrIndex = additionalCellSets.tree.findIndex(lzn => lzn.name === dropNode.name);\n    }\n\n    let hasSiblingNameConflict;\n    const dragNodeName = dragNode.name;\n\n    if (!dropNodeIsLevelZero && dropToGap) {\n      hasSiblingNameConflict = dropParentNode.children.find(c => c !== dragNode && c.name === dragNodeName);\n    } else if (!dropToGap) {\n      hasSiblingNameConflict = dropNode.children.find(c => c !== dragNode && c.name === dragNodeName);\n    } else {\n      hasSiblingNameConflict = additionalCellSets.tree.find(lzn => lzn !== dragNode && lzn.name === dragNodeName);\n    }\n\n    if (hasSiblingNameConflict) {\n      return;\n    }\n\n    const nextAdditionalCellSets = __spreadProps(__spreadValues({}, additionalCellSets), {\n      tree: additionalCellSets.tree.map(lzn => filterNode(lzn, [], dragPath)).filter(Boolean)\n    });\n\n    if (!dropNodeIsLevelZero) {\n      dropNodeCurrIndex = dropParentNode.children.findIndex(c => c.name === dropNode.name);\n    } else {\n      dropNodeCurrIndex = nextAdditionalCellSets.tree.findIndex(lzn => lzn.name === dropNode.name);\n    }\n\n    let newDragPath = [];\n\n    if (!dropToGap || !dropNodeIsLevelZero) {\n      let addChildFunction;\n      let checkPathFunction;\n      const newPath = [];\n\n      if (!dropToGap) {\n        addChildFunction = n => nodeAppendChild(n, dragNode);\n\n        checkPathFunction = path => isEqual11(path, dropPath);\n      } else if (!dropNodeIsLevelZero) {\n        checkPathFunction = path => isEqual11(path, dropParentPath);\n\n        if (dropPosition === -1) {\n          addChildFunction = n => nodePrependChild(n, dragNode);\n        } else {\n          const insertIndex = dropNodeCurrIndex + (dropPosition > dropNodeCurrIndex ? 1 : 0);\n\n          addChildFunction = n => nodeInsertChild(n, dragNode, insertIndex);\n        }\n      }\n\n      nextAdditionalCellSets.tree = nextAdditionalCellSets.tree.map(node => nodeTransform(node, (n, path) => checkPathFunction(path), n => {\n        const newNode = addChildFunction(n);\n        return newNode;\n      }, newPath));\n      setAdditionalCellSets(nextAdditionalCellSets);\n      newDragPath = [...newPath[0], dragNode.name];\n      setCellSetSelection([newDragPath]);\n    } else if (dropPosition === -1) {\n      nextAdditionalCellSets.tree.unshift(dragNode);\n      setAdditionalCellSets(nextAdditionalCellSets);\n      newDragPath = [dragNode.name];\n      setCellSetSelection([newDragPath]);\n    } else {\n      const insertIndex = dropNodeCurrIndex + (dropPosition > dropNodeCurrIndex ? 1 : 0);\n      const newLevelZero = Array.from(nextAdditionalCellSets.tree);\n      newLevelZero.splice(insertIndex, 0, dragNode);\n      nextAdditionalCellSets.tree = newLevelZero;\n      setAdditionalCellSets(nextAdditionalCellSets);\n      newDragPath = [dragNode.name];\n      setCellSetSelection([newDragPath]);\n    }\n\n    const oldColors = cellSetColor.filter(i => isEqualOrPrefix(dragPath, i.path));\n    const newColors = oldColors.map(i => __spreadProps(__spreadValues({}, i), {\n      path: !isEqual11(i.path, dragPath) ? newDragPath.concat(i.path.slice(dragPath.length)) : newDragPath\n    }));\n    const newCellSetColor = cellSetColor.filter(i => !isEqualOrPrefix(dragPath, i.path));\n    newCellSetColor.push(...newColors);\n    setCellSetColor(newCellSetColor);\n  }\n\n  function onNodeSetColor(targetPath, color) {\n    const prevNodeColor = cellSetColor == null ? void 0 : cellSetColor.find(d => isEqual11(d.path, targetPath));\n\n    if (!prevNodeColor) {\n      setCellSetColor([...(cellSetColor || []), {\n        path: targetPath,\n        color\n      }]);\n    } else {\n      setCellSetColor([...cellSetColor.filter(d => !isEqual11(d.path, targetPath)), {\n        path: targetPath,\n        color\n      }]);\n    }\n  }\n\n  function onNodeSetName(targetPath, name2) {\n    const nextNamePath = [...targetPath];\n    nextNamePath.pop();\n    nextNamePath.push(name2);\n\n    function renameNode(node, prevPath) {\n      if (isEqual11([...prevPath, node.name], targetPath)) {\n        return __spreadProps(__spreadValues({}, node), {\n          name: name2\n        });\n      }\n\n      if (!node.children) {\n        return node;\n      }\n\n      return __spreadProps(__spreadValues({}, node), {\n        children: node.children.map(c => renameNode(c, [...prevPath, node.name]))\n      });\n    }\n\n    const nextAdditionalCellSets = __spreadProps(__spreadValues({}, additionalCellSets), {\n      tree: additionalCellSets.tree.map(lzn => renameNode(lzn, []))\n    });\n\n    const nextCellSetColor = cellSetColor.map(d => ({\n      path: tryRenamePath(targetPath, d.path, nextNamePath),\n      color: d.color\n    }));\n    const nextCellSetSelection = cellSetSelection.map(d => tryRenamePath(targetPath, d, nextNamePath));\n    const nextCellSetExpansion = cellSetExpansion.map(d => tryRenamePath(targetPath, d, nextNamePath));\n    setAdditionalCellSets(nextAdditionalCellSets);\n    setCellSetColor(nextCellSetColor);\n    setCellSetSelection(nextCellSetSelection);\n    setCellSetExpansion(nextCellSetExpansion);\n  }\n\n  function onNodeCheckNewName(targetPath, name2) {\n    const nextNamePath = [...targetPath];\n    nextNamePath.pop();\n    nextNamePath.push(name2);\n    const hasConflicts = !isEqual11(targetPath, nextNamePath) && treeFindNodeByNamePath(additionalCellSets, nextNamePath);\n    return hasConflicts;\n  }\n\n  function onNodeRemove(targetPath) {\n    const nextAdditionalCellSets = __spreadProps(__spreadValues({}, additionalCellSets), {\n      tree: additionalCellSets.tree.map(lzn => filterNode(lzn, [], targetPath)).filter(Boolean)\n    });\n\n    const nextCellSetColor = cellSetColor.filter(d => !isEqualOrPrefix(targetPath, d.path));\n    const nextCellSetSelection = cellSetSelection.filter(d => !isEqualOrPrefix(targetPath, d));\n    const nextCellSetExpansion = cellSetExpansion.filter(d => !isEqualOrPrefix(targetPath, d));\n    setAdditionalCellSets(nextAdditionalCellSets);\n    setCellSetColor(nextCellSetColor);\n    setCellSetSelection(nextCellSetSelection);\n    setCellSetExpansion(nextCellSetExpansion);\n  }\n\n  function onNodeView(targetPath) {\n    const setsToView = [];\n\n    function viewNode(node, nodePath) {\n      if (cellSetExpansion.find(expandedPath => isEqual11(nodePath, expandedPath))) {\n        if (node.children) {\n          node.children.forEach(c => {\n            viewNode(c, [...nodePath, c.name]);\n          });\n        } else {\n          setsToView.push(nodePath);\n        }\n      } else {\n        setsToView.push(nodePath);\n      }\n    }\n\n    const targetNode = treeFindNodeByNamePath(mergedCellSets, targetPath);\n    viewNode(targetNode, targetPath);\n    setCellSetSelection(setsToView);\n    setCellSetColorEncoding();\n  }\n\n  function onCreateLevelZeroNode() {\n    const nextName = getNextNumberedNodeName(additionalCellSets == null ? void 0 : additionalCellSets.tree, \"My hierarchy \");\n    setAdditionalCellSets(__spreadProps(__spreadValues({}, additionalCellSets || treeInitialize(SETS_DATATYPE_CELL)), {\n      tree: [...(additionalCellSets ? additionalCellSets.tree : []), {\n        name: nextName,\n        children: []\n      }]\n    }));\n  }\n\n  function onUnion() {\n    const newSet = treeToUnion(mergedCellSets, cellSetSelection);\n    setCellSelection(newSet, additionalCellSets, cellSetColor, setCellSetSelection, setAdditionalCellSets, setCellSetColor, setCellColorEncoding, \"Union \");\n  }\n\n  function onIntersection() {\n    const newSet = treeToIntersection(mergedCellSets, cellSetSelection);\n    setCellSelection(newSet, additionalCellSets, cellSetColor, setCellSetSelection, setAdditionalCellSets, setCellSetColor, setCellColorEncoding, \"Intersection \");\n  }\n\n  function onComplement() {\n    const newSet = treeToComplement(mergedCellSets, cellSetSelection, allCellIds);\n    setCellSelection(newSet, additionalCellSets, cellSetColor, setCellSetSelection, setAdditionalCellSets, setCellSetColor, setCellColorEncoding, \"Complement \");\n  }\n\n  function onImportTree(treeToImport) {\n    const hasConflict = treesConflict(mergedCellSets, treeToImport);\n\n    if (!hasConflict) {\n      setAdditionalCellSets(__spreadProps(__spreadValues({}, additionalCellSets || treeInitialize(SETS_DATATYPE_CELL)), {\n        tree: [...(additionalCellSets ? additionalCellSets.tree : []), ...treeToImport.tree]\n      }));\n      const importAutoSetColors = initializeCellSetColor(treeToImport, cellSetColor);\n      setCellSetColor([...cellSetColor, ...importAutoSetColors]);\n    }\n  }\n\n  function onExportLevelZeroNodeJSON(nodePath) {\n    const {\n      treeToExport,\n      nodeName\n    } = treeExportLevelZeroNode(mergedCellSets, nodePath, SETS_DATATYPE_CELL, cellSetColor, theme);\n    downloadForUser(handleExportJSON(treeToExport), `${nodeName}_${package_default.name}-${SETS_DATATYPE_CELL}-hierarchy.${FILE_EXTENSION_JSON}`);\n  }\n\n  function onExportLevelZeroNodeTabular(nodePath) {\n    const {\n      treeToExport,\n      nodeName\n    } = treeExportLevelZeroNode(mergedCellSets, nodePath, SETS_DATATYPE_CELL, cellSetColor, theme);\n    downloadForUser(handleExportTabular(treeToExport), `${nodeName}_${package_default.name}-${SETS_DATATYPE_CELL}-hierarchy.${FILE_EXTENSION_TABULAR}`);\n  }\n\n  function onExportSetJSON(nodePath) {\n    const {\n      setToExport,\n      nodeName\n    } = treeExportSet(mergedCellSets, nodePath);\n    downloadForUser(handleExportJSON(setToExport), `${nodeName}_${package_default.name}-${SETS_DATATYPE_CELL}-set.${FILE_EXTENSION_JSON}`, FILE_EXTENSION_JSON);\n  }\n\n  return /* @__PURE__ */React51.createElement(TitleInfo, {\n    title: title16,\n    isScroll: true,\n    removeGridComponent,\n    urls,\n    theme,\n    isReady\n  }, /* @__PURE__ */React51.createElement(SetsManager, {\n    setColor: cellSetColor,\n    sets: cellSets,\n    additionalSets: additionalCellSets,\n    levelSelection: checkedLevel,\n    setSelection: cellSetSelection,\n    setExpansion: cellSetExpansion,\n    hasColorEncoding: cellColorEncoding === \"cellSetSelection\",\n    draggable: true,\n    datatype: SETS_DATATYPE_CELL,\n    onError: setWarning,\n    onCheckNode,\n    onExpandNode,\n    onDropNode,\n    onCheckLevel,\n    onNodeSetColor,\n    onNodeSetName,\n    onNodeCheckNewName,\n    onNodeRemove,\n    onNodeView,\n    onImportTree,\n    onCreateLevelZeroNode,\n    onExportLevelZeroNodeJSON,\n    onExportLevelZeroNodeTabular,\n    onExportSetJSON,\n    onUnion,\n    onIntersection,\n    onComplement,\n    hasCheckedSetsToUnion: (cellSetSelection == null ? void 0 : cellSetSelection.length) > 1,\n    hasCheckedSetsToIntersect: (cellSetSelection == null ? void 0 : cellSetSelection.length) > 1,\n    hasCheckedSetsToComplement: (cellSetSelection == null ? void 0 : cellSetSelection.length) > 0,\n    theme\n  }));\n} // src/components/layer-controller/LayerControllerSubscriber.js\n\n\nimport React62, { useEffect as useEffect19, useCallback as useCallback13, useRef as useRef9, forwardRef as forwardRef4 } from \"react\";\nimport Grid8 from \"@material-ui/core/Grid\"; // src/components/layer-controller/RasterChannelController.js\n\nimport React55, { useCallback as useCallback12, useState as useState17, useEffect as useEffect17 } from \"react\";\nimport Grid2 from \"@material-ui/core/Grid\";\nimport Slider5 from \"@material-ui/core/Slider\";\nimport debounce5 from \"lodash/debounce\";\nimport isEqual12 from \"lodash/isEqual\"; // src/components/layer-controller/ChannelOptions.js\n\nimport React53, { useState as useState16 } from \"react\";\nimport { makeStyles as makeStyles7 } from \"@material-ui/core/styles\";\nimport MoreVertIcon from \"@material-ui/icons/MoreVert\";\nimport MenuItem2 from \"@material-ui/core/MenuItem\"; // src/components/layer-controller/ColorPalette.js\n\nimport React52 from \"react\";\nimport IconButton4 from \"@material-ui/core/IconButton\";\nimport LensIcon from \"@material-ui/icons/Lens\";\nimport { makeStyles as makeStyles6 } from \"@material-ui/core/styles\";\nvar useStyles3 = makeStyles6(theme => ({\n  container: {\n    width: \"70px\",\n    height: \"40px\",\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n    flexWrap: \"wrap\"\n  },\n  button: {\n    padding: \"3px\",\n    width: \"16px\"\n  },\n  icon: {\n    width: \"17px\",\n    height: \"17px\",\n    stroke: theme.palette.action.selected,\n    \"stroke-width\": \"1px\"\n  }\n}));\n\nvar ColorPalette = _ref88 => {\n  let {\n    handleChange\n  } = _ref88;\n  const classes = useStyles3();\n  return /* @__PURE__ */React52.createElement(\"div\", {\n    className: classes.container,\n    \"aria-label\": \"color-swatch\"\n  }, VIEWER_PALETTE.map(color => /* @__PURE__ */React52.createElement(IconButton4, {\n    className: classes.button,\n    key: color,\n    onClick: () => handleChange(color)\n  }, /* @__PURE__ */React52.createElement(LensIcon, {\n    fontSize: \"small\",\n    style: {\n      color: `rgb(${color})`\n    },\n    className: classes.icon\n  }))));\n};\n\nvar ColorPalette_default = ColorPalette; // src/components/layer-controller/ChannelOptions.js\n\nvar useStyles4 = makeStyles7(() => ({\n  menuButton: {\n    backgroundColor: \"transparent\"\n  },\n  colors: {\n    \"&:hover\": {\n      backgroundColor: \"transparent\"\n    },\n    paddingLeft: \"2px\",\n    paddingRight: \"2px\"\n  }\n}));\n\nfunction ChannelOptions(_ref89) {\n  let {\n    handlePropertyChange,\n    handleChannelRemove,\n    handleIQRUpdate\n  } = _ref89;\n  const [open, setOpen] = useState16(false);\n  const classes = useStyles4();\n\n  const handleColorSelect = color => {\n    handlePropertyChange(\"color\", color);\n  };\n\n  const handleRemove = () => {\n    setOpen(false);\n    handleChannelRemove();\n  };\n\n  return /* @__PURE__ */React53.createElement(PopperMenu, {\n    open,\n    setOpen,\n    buttonIcon: /* @__PURE__ */React53.createElement(MoreVertIcon, {\n      fontSize: \"small\"\n    }),\n    buttonClassName: classes.menuButton\n  }, /* @__PURE__ */React53.createElement(MenuItem2, {\n    dense: true,\n    disableGutters: true,\n    onClick: handleRemove\n  }, /* @__PURE__ */React53.createElement(MuiSpan, null, \"Remove\")), /* @__PURE__ */React53.createElement(MenuItem2, {\n    dense: true,\n    disableGutters: true,\n    onClick: handleIQRUpdate\n  }, /* @__PURE__ */React53.createElement(MuiSpan, null, \"Use IQR\")), /* @__PURE__ */React53.createElement(MenuItem2, {\n    dense: true,\n    disableGutters: true,\n    className: classes.colors\n  }, /* @__PURE__ */React53.createElement(ColorPalette_default, {\n    handleChange: handleColorSelect\n  })));\n}\n\nvar ChannelOptions_default = ChannelOptions; // src/components/layer-controller/constants.js\n\nfunction getDomains() {\n  const domains = {};\n  const needMin = [\"Int8\", \"Int16\", \"Int32\"];\n  Object.keys(DTYPE_VALUES).forEach(dtype => {\n    const {\n      max: max2\n    } = DTYPE_VALUES[dtype];\n    const min = needMin.includes(dtype) ? -(max2 + 1) : 0;\n    domains[dtype] = [min, max2];\n  });\n  return domains;\n}\n\nvar DOMAINS = getDomains(); // src/components/layer-controller/shared-channel-controls.js\n\nimport React54 from \"react\";\nimport Checkbox3 from \"@material-ui/core/Checkbox\";\nimport Select2 from \"@material-ui/core/Select\"; // src/components/layer-controller/styles.js\n\nimport { makeStyles as makeStyles8, withStyles } from \"@material-ui/core/styles\";\nimport ExpansionPanelSummary from \"@material-ui/core/ExpansionPanelSummary\";\nimport ExpansionPanelDetails from \"@material-ui/core/ExpansionPanelDetails\";\nimport InputLabel from \"@material-ui/core/InputLabel\";\nimport Slider4 from \"@material-ui/core/Slider\";\nimport Grid from \"@material-ui/core/Grid\";\nvar useSelectStyles = makeStyles8(() => ({\n  selectRoot: {\n    padding: 0,\n    height: \"auto\",\n    margin: \"4px 0\"\n  }\n}));\nvar useOptionStyles = withStyles(theme => ({\n  paper: {\n    backgroundColor: theme.palette.background.paper\n  },\n  span: {\n    width: \"70px\",\n    textAlign: \"center\",\n    paddingLeft: \"2px\",\n    paddingRight: \"2px\"\n  },\n  colors: {\n    \"&:hover\": {\n      backgroundColor: \"transparent\"\n    },\n    paddingLeft: \"2px\",\n    paddingRight: \"2px\"\n  },\n  popper: {\n    zIndex: 4\n  }\n}));\nvar sharedControllerStyles = {\n  width: \"100%\",\n  flexDirection: \"column\"\n};\nvar useControllerSectionStyles = makeStyles8(() => ({\n  root: __spreadProps(__spreadValues({}, sharedControllerStyles), {\n    padding: \"0px 8px\"\n  })\n}));\nvar StyledExpansionPanelDetails = withStyles(() => ({\n  root: __spreadProps(__spreadValues({}, sharedControllerStyles), {\n    padding: \"8px 8px 24px 8px\"\n  })\n}))(ExpansionPanelDetails);\nvar StyledExpansionPanelSummary = withStyles(theme => ({\n  root: {\n    padding: \"0px 8px\"\n  },\n  content: {\n    margin: \"4px 0px\",\n    minWidth: \"0px\"\n  },\n  expanded: {\n    marginBottom: theme.spacing(-3),\n    top: theme.spacing(-1)\n  },\n  expandIcon: {\n    \"&$expanded\": {\n      top: theme.spacing(-1.3)\n    }\n  }\n}))(ExpansionPanelSummary);\nvar StyledInputLabel = withStyles(() => ({\n  root: {\n    fontSize: \"14px\"\n  }\n}))(InputLabel);\nvar OverflowEllipsisGrid = withStyles(() => ({\n  item: {\n    width: \"100%\",\n    overflow: \"hidden\",\n    whiteSpace: \"nowrap\",\n    textOverflow: \"ellipsis\"\n  }\n}))(Grid);\nvar StyledSelectionSlider = withStyles(() => ({\n  root: {\n    marginTop: \"7px\"\n  },\n  markActive: {\n    backgroundColor: \"rgba(128, 128, 128, 0.7)\"\n  }\n}))(Slider4); // src/components/layer-controller/shared-channel-controls.js\n\nfunction ChannelSelectionDropdown(_ref90) {\n  let {\n    handleChange,\n    disabled,\n    channelOptions,\n    selectionIndex\n  } = _ref90;\n  const classes = useSelectStyles();\n  return /* @__PURE__ */React54.createElement(Select2, {\n    classes: {\n      root: classes.selectRoot\n    },\n    native: true,\n    value: selectionIndex,\n    onChange: e => handleChange(Number(e.target.value))\n  }, channelOptions.map((opt, i) => /* @__PURE__ */React54.createElement(\"option\", {\n    disabled,\n    key: opt,\n    value: i\n  }, opt)));\n}\n\nfunction ChannelVisibilityCheckbox(_ref91) {\n  let {\n    color,\n    checked,\n    toggle,\n    disabled\n  } = _ref91;\n  return /* @__PURE__ */React54.createElement(Checkbox3, {\n    onChange: toggle,\n    checked,\n    disabled,\n    style: {\n      color,\n      \"&$checked\": {\n        color\n      }\n    }\n  });\n} // src/components/layer-controller/RasterChannelController.js\n\n\nvar toRgbUIString = (on, arr, theme) => {\n  const color = on || theme === \"light\" && arr.every(i => i === 255) ? [220, 220, 220] : arr;\n  return `rgb(${color})`;\n};\n\nfunction abbreviateNumber2(value) {\n  const maxLength = 5;\n  let maxNaiveDigits = maxLength;\n\n  if (!Number.isInteger(value)) {\n    --maxNaiveDigits;\n  }\n\n  if (value < 1) {\n    --maxNaiveDigits;\n  }\n\n  const naive = Intl.NumberFormat(\"en-US\", {\n    maximumSignificantDigits: maxNaiveDigits,\n    useGrouping: false\n  }).format(value);\n  if (naive.length <= maxLength) return naive;\n  return value.toExponential(0);\n}\n\nfunction ChannelSlider(_ref92) {\n  let {\n    color,\n    slider = [0, 0],\n    handleChange,\n    domain = [0, 0],\n    dtype,\n    disabled\n  } = _ref92;\n  const [min, max2] = domain;\n  const handleChangeDebounced = useCallback12(debounce5(handleChange, 3, {\n    trailing: true\n  }), [handleChange]);\n  const step = max2 - min < 500 && dtype === \"Float32\" ? (max2 - min) / 500 : 1;\n  return /* @__PURE__ */React55.createElement(Slider5, {\n    value: slider,\n    valueLabelFormat: abbreviateNumber2,\n    onChange: (e, v) => handleChangeDebounced(v),\n    valueLabelDisplay: \"auto\",\n    getAriaLabel: () => `${color}-${slider}`,\n    min,\n    max: max2,\n    step,\n    orientation: \"horizontal\",\n    style: {\n      color,\n      marginTop: \"7px\"\n    },\n    disabled\n  });\n}\n\nfunction RasterChannelController(_ref93) {\n  let {\n    visibility = false,\n    slider,\n    color,\n    channels: channels2,\n    channelId,\n    domainType: newDomainType,\n    dimName,\n    theme,\n    loader,\n    colormapOn,\n    channelOptions,\n    handlePropertyChange,\n    handleChannelRemove,\n    handleIQRUpdate,\n    selectionIndex,\n    isLoading,\n    use3d: newUse3d\n  } = _ref93;\n  const {\n    dtype\n  } = getSourceFromLoader(loader);\n  const [domain, setDomain] = useState17(null);\n  const [domainType, setDomainType] = useState17(null);\n  const [use3d, setUse3d] = useState17(null);\n  const [selection, setSelection] = useState17([__spreadValues({}, channels2[channelId].selection)]);\n  const rgbColor = toRgbUIString(colormapOn, color, theme);\n  useEffect17(() => {\n    let mounted = true;\n\n    if (dtype && loader && channels2) {\n      const selections = [__spreadValues({}, channels2[channelId].selection)];\n      let domains;\n      const hasDomainChanged = newDomainType !== domainType;\n      const has3dChanged = use3d !== newUse3d;\n      const hasSelectionChanged = !isEqual12(selections, selection);\n\n      if (hasDomainChanged || hasSelectionChanged || has3dChanged) {\n        if (newDomainType === \"Full\") {\n          domains = [DOMAINS[dtype]];\n          const [newDomain] = domains;\n\n          if (mounted) {\n            setDomain(newDomain);\n            setDomainType(newDomainType);\n\n            if (hasSelectionChanged) {\n              setSelection(selections);\n            }\n\n            if (has3dChanged) {\n              setUse3d(newUse3d);\n            }\n          }\n        } else {\n          getMultiSelectionStats({\n            loader: loader.data,\n            selections,\n            use3d: newUse3d\n          }).then(stats => {\n            domains = stats.domains;\n            const [newDomain] = domains;\n\n            if (mounted) {\n              setDomain(newDomain);\n              setDomainType(newDomainType);\n\n              if (hasSelectionChanged) {\n                setSelection(selections);\n              }\n\n              if (has3dChanged) {\n                setUse3d(newUse3d);\n              }\n            }\n          });\n        }\n      }\n    }\n\n    return () => {\n      mounted = false;\n    };\n  }, [domainType, channels2, channelId, loader, dtype, newDomainType, selection, newUse3d, use3d]);\n\n  const createSelection = index => ({\n    [dimName]: index\n  });\n\n  return /* @__PURE__ */React55.createElement(Grid2, {\n    container: true,\n    direction: \"column\",\n    m: 1,\n    justify: \"center\"\n  }, /* @__PURE__ */React55.createElement(Grid2, {\n    container: true,\n    direction: \"row\",\n    justify: \"space-between\"\n  }, /* @__PURE__ */React55.createElement(Grid2, {\n    item: true,\n    xs: 10\n  }, /* @__PURE__ */React55.createElement(ChannelSelectionDropdown, {\n    handleChange: v => handlePropertyChange(\"selection\", createSelection(v)),\n    selectionIndex,\n    channelOptions,\n    disabled: isLoading\n  })), /* @__PURE__ */React55.createElement(Grid2, {\n    item: true,\n    xs: 1,\n    style: {\n      marginTop: \"4px\"\n    }\n  }, /* @__PURE__ */React55.createElement(ChannelOptions_default, {\n    handlePropertyChange,\n    handleChannelRemove,\n    handleIQRUpdate,\n    disabled: isLoading\n  }))), /* @__PURE__ */React55.createElement(Grid2, {\n    container: true,\n    direction: \"row\",\n    justify: \"space-between\"\n  }, /* @__PURE__ */React55.createElement(Grid2, {\n    item: true,\n    xs: 2\n  }, /* @__PURE__ */React55.createElement(ChannelVisibilityCheckbox, {\n    color: rgbColor,\n    checked: visibility,\n    toggle: () => handlePropertyChange(\"visible\", !visibility),\n    disabled: isLoading\n  })), /* @__PURE__ */React55.createElement(Grid2, {\n    item: true,\n    xs: 9\n  }, /* @__PURE__ */React55.createElement(ChannelSlider, {\n    color: rgbColor,\n    slider,\n    domain: domain || DOMAINS[dtype],\n    dtype,\n    handleChange: v => handlePropertyChange(\"slider\", v),\n    disabled: isLoading\n  }))));\n}\n\nvar RasterChannelController_default = RasterChannelController; // src/components/layer-controller/BitmaskChannelController.js\n\nimport React56 from \"react\";\nimport RemoveCircleIcon from \"@material-ui/icons/RemoveCircle\";\nimport IconButton5 from \"@material-ui/core/IconButton\";\nimport Grid3 from \"@material-ui/core/Grid\";\n\nfunction BitmaskChannelController(_ref94) {\n  let {\n    visibility = false,\n    dimName,\n    channelOptions,\n    handlePropertyChange,\n    handleChannelRemove,\n    selectionIndex,\n    disableOptions = false\n  } = _ref94;\n\n  const createSelection = index => ({\n    [dimName]: index\n  });\n\n  return /* @__PURE__ */React56.createElement(Grid3, {\n    container: true,\n    direction: \"row\",\n    justify: \"space-between\"\n  }, /* @__PURE__ */React56.createElement(Grid3, {\n    item: true,\n    xs: 2\n  }, /* @__PURE__ */React56.createElement(ChannelVisibilityCheckbox, {\n    color: [220, 220, 220],\n    checked: visibility,\n    toggle: () => handlePropertyChange(\"visible\", !visibility)\n  })), /* @__PURE__ */React56.createElement(Grid3, {\n    item: true,\n    xs: 9\n  }, /* @__PURE__ */React56.createElement(ChannelSelectionDropdown, {\n    handleChange: v => handlePropertyChange(\"selection\", createSelection(v)),\n    selectionIndex,\n    disableOptions,\n    channelOptions\n  })), /* @__PURE__ */React56.createElement(Grid3, {\n    item: true,\n    xs: 1\n  }, /* @__PURE__ */React56.createElement(IconButton5, {\n    onClick: handleChannelRemove,\n    style: {\n      padding: \"6px 6px 6px 0px\"\n    }\n  }, /* @__PURE__ */React56.createElement(RemoveCircleIcon, null))));\n}\n\nvar BitmaskChannelController_default = BitmaskChannelController; // src/components/layer-controller/VectorLayerController.js\n\nimport React57 from \"react\";\nimport Grid4 from \"@material-ui/core/Grid\";\nimport Checkbox4 from \"@material-ui/core/Checkbox\";\nimport Paper3 from \"@material-ui/core/Paper\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Slider6 from \"@material-ui/core/Slider\";\n\nfunction VectorLayerController(props) {\n  const {\n    label,\n    layer,\n    layerType,\n    handleLayerChange\n  } = props;\n  const slider = layer.opacity;\n  const isOn = layer.visible;\n\n  function handleSliderChange(v) {\n    if (layerType === \"cells\") {\n      const stroked = v < 0.7;\n      handleLayerChange(__spreadProps(__spreadValues({}, layer), {\n        opacity: v,\n        stroked\n      }));\n    } else {\n      handleLayerChange(__spreadProps(__spreadValues({}, layer), {\n        opacity: v\n      }));\n    }\n  }\n\n  function handleCheckBoxChange(v) {\n    handleLayerChange(__spreadProps(__spreadValues({}, layer), {\n      visible: v\n    }));\n  }\n\n  const classes = useControllerSectionStyles();\n  return /* @__PURE__ */React57.createElement(Grid4, {\n    item: true,\n    style: {\n      marginTop: \"10px\"\n    }\n  }, /* @__PURE__ */React57.createElement(Paper3, {\n    className: classes.root\n  }, /* @__PURE__ */React57.createElement(Typography, {\n    style: {\n      padding: \"15px 8px 0px 8px\",\n      marginBottom: \"-5px\"\n    }\n  }, label), /* @__PURE__ */React57.createElement(Grid4, {\n    container: true,\n    direction: \"row\",\n    justify: \"space-between\"\n  }, /* @__PURE__ */React57.createElement(Grid4, {\n    item: true,\n    xs: 2\n  }, /* @__PURE__ */React57.createElement(Checkbox4, {\n    color: \"primary\",\n    checked: isOn,\n    onChange: (e, v) => handleCheckBoxChange(v)\n  })), /* @__PURE__ */React57.createElement(Grid4, {\n    item: true,\n    xs: 9,\n    style: {\n      paddingRight: \"8px\"\n    }\n  }, /* @__PURE__ */React57.createElement(Slider6, {\n    value: slider,\n    min: 0,\n    max: 1,\n    step: 1e-3,\n    onChange: (e, v) => handleSliderChange(v),\n    style: {\n      marginTop: \"7px\"\n    },\n    orientation: \"horizontal\"\n  })))));\n} // src/components/layer-controller/LayerController.js\n\n\nimport React60, { useState as useState18, useRef as useRef8, useEffect as useEffect18 } from \"react\";\nimport Grid7 from \"@material-ui/core/Grid\";\nimport Button2 from \"@material-ui/core/Button\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport Slider9 from \"@material-ui/core/Slider\";\nimport Tabs from \"@material-ui/core/Tabs\";\nimport Tab from \"@material-ui/core/Tab\";\nimport ExpansionPanel from \"@material-ui/core/ExpansionPanel\";\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\nimport VisibilityIcon from \"@material-ui/icons/Visibility\";\nimport VisibilityOffIcon from \"@material-ui/icons/VisibilityOff\"; // src/components/layer-controller/LayerOptions.js\n\nimport React58 from \"react\";\nimport range9 from \"lodash/range\";\nimport { Matrix4 as Matrix45 } from \"math.gl\";\nimport Grid5 from \"@material-ui/core/Grid\";\nimport Slider7 from \"@material-ui/core/Slider\";\nimport InputLabel2 from \"@material-ui/core/InputLabel\";\nimport Select3 from \"@material-ui/core/Select\";\nimport Checkbox5 from \"@material-ui/core/Checkbox\";\nvar DOMAIN_OPTIONS = [\"Full\", \"Min/Max\"];\n\nfunction VolumeDropdown(_ref95) {\n  let {\n    loader: loaderWithMeta,\n    handleMultiPropertyChange,\n    resolution: currResolution,\n    disable3d,\n    setRasterLayerCallback,\n    setAreAllChannelsLoading,\n    setViewState,\n    spatialHeight,\n    spatialWidth,\n    channels: channels2,\n    use3d,\n    modelMatrix\n  } = _ref95;\n  const classes = useSelectStyles();\n  const selections = channels2.map(i => i.selection);\n  const {\n    data: loader\n  } = loaderWithMeta;\n\n  const handleChange = val => __async(this, null, function* () {\n    const shouldUse3D = typeof val === \"number\";\n    setAreAllChannelsLoading(true);\n    setRasterLayerCallback(() => {\n      setAreAllChannelsLoading(false);\n      setRasterLayerCallback(null);\n    });\n\n    if (shouldUse3D) {\n      const [xSlice, ySlice, zSlice] = getBoundingCube(loader);\n      const propertiesChanged = {\n        resolution: val,\n        xSlice,\n        ySlice,\n        zSlice,\n        use3d: shouldUse3D\n      };\n\n      if (!use3d) {\n        const {\n          sliders\n        } = yield getMultiSelectionStats({\n          loader,\n          selections,\n          use3d: shouldUse3D\n        });\n        propertiesChanged.channels = [...channels2];\n        propertiesChanged.channels.forEach((ch, i) => {\n          ch.slider = sliders[i];\n        });\n      }\n\n      handleMultiPropertyChange(propertiesChanged);\n      const defaultViewState = getDefaultInitialViewState(loader, {\n        height: spatialHeight,\n        width: spatialWidth\n      }, 1.5, true, new Matrix45(modelMatrix));\n      setViewState(__spreadProps(__spreadValues({}, defaultViewState), {\n        rotationX: 0,\n        rotationOrbit: 0\n      }));\n    } else {\n      const {\n        sliders\n      } = yield getMultiSelectionStats({\n        loader,\n        selections,\n        use3d: shouldUse3D\n      });\n      const newChannels = [...channels2];\n      newChannels.forEach((ch, i) => {\n        ch.slider = sliders[i];\n      });\n      handleMultiPropertyChange({\n        resolution: val,\n        use3d: shouldUse3D,\n        spatialAxisFixed: false,\n        channels: newChannels\n      });\n      const defaultViewState = getDefaultInitialViewState(loader, {\n        height: spatialHeight,\n        width: spatialWidth\n      }, 0.5, false, new Matrix45(modelMatrix));\n      setViewState(__spreadProps(__spreadValues({}, defaultViewState), {\n        rotationX: null,\n        rotationOrbit: null,\n        orbitAxis: null\n      }));\n    }\n  });\n\n  const {\n    labels,\n    shape\n  } = Array.isArray(loader) ? loader[0] : loader;\n  const hasZStack = shape[labels.indexOf(\"z\")] > 1;\n  return /* @__PURE__ */React58.createElement(React58.Fragment, null, /* @__PURE__ */React58.createElement(Select3, {\n    native: true,\n    value: currResolution,\n    onChange: e => handleChange(e.target.value === \"2D\" ? e.target.value : Number(e.target.value)),\n    classes: {\n      root: classes.selectRoot\n    }\n  }, /* @__PURE__ */React58.createElement(\"option\", {\n    key: \"2D\",\n    value: \"2D\"\n  }, \"2D Visualization\"), Array.from({\n    length: loader.length\n  }).fill(0).map((_, resolution) => {\n    if (loader) {\n      if (canLoadResolution(loader, resolution)) {\n        const {\n          height,\n          width,\n          depthDownsampled,\n          totalBytes\n        } = getStatsForResolution(loader, resolution);\n        return /* @__PURE__ */React58.createElement(\"option\", {\n          key: `(${height}, ${width}, ${depthDownsampled})`,\n          value: resolution,\n          disabled: disable3d || !hasZStack\n        }, `3D: ${resolution}x Downsampled, ~${formatBytes(totalBytes)} per channel, (${height}, ${width}, ${depthDownsampled})`);\n      }\n    }\n\n    return null;\n  })));\n}\n\nfunction ColormapSelect(_ref96) {\n  let {\n    value,\n    inputId,\n    handleChange\n  } = _ref96;\n  const classes = useSelectStyles();\n  return /* @__PURE__ */React58.createElement(Select3, {\n    native: true,\n    onChange: e => handleChange(e.target.value === \"\" ? null : e.target.value),\n    value,\n    inputProps: {\n      name: \"colormap\",\n      id: inputId\n    },\n    style: {\n      width: \"100%\"\n    },\n    classes: {\n      root: classes.selectRoot\n    }\n  }, /* @__PURE__ */React58.createElement(\"option\", {\n    \"aria-label\": \"None\",\n    value: \"\"\n  }, \"None\"), COLORMAP_OPTIONS.map(name2 => /* @__PURE__ */React58.createElement(\"option\", {\n    key: name2,\n    value: name2\n  }, name2)));\n}\n\nfunction TransparentColorCheckbox(_ref97) {\n  let {\n    value,\n    handleChange\n  } = _ref97;\n  return /* @__PURE__ */React58.createElement(Checkbox5, {\n    style: {\n      float: \"left\",\n      padding: 0\n    },\n    color: \"default\",\n    onChange: () => {\n      if (value) {\n        handleChange(null);\n      } else {\n        handleChange([0, 0, 0]);\n      }\n    },\n    checked: Boolean(value)\n  });\n}\n\nfunction OpacitySlider(_ref98) {\n  let {\n    value,\n    handleChange\n  } = _ref98;\n  return /* @__PURE__ */React58.createElement(Slider7, {\n    value,\n    onChange: (e, v) => handleChange(v),\n    valueLabelDisplay: \"auto\",\n    getAriaLabel: () => \"opacity slider\",\n    min: 0,\n    max: 1,\n    step: 0.01,\n    orientation: \"horizontal\",\n    style: {\n      marginTop: \"7px\"\n    }\n  });\n}\n\nfunction SliderDomainSelector(_ref99) {\n  let {\n    value,\n    inputId,\n    handleChange\n  } = _ref99;\n  const classes = useSelectStyles();\n  return /* @__PURE__ */React58.createElement(Select3, {\n    native: true,\n    onChange: e => handleChange(e.target.value),\n    value,\n    inputProps: {\n      name: \"domain-selector\",\n      id: inputId\n    },\n    style: {\n      width: \"100%\"\n    },\n    classes: {\n      root: classes.selectRoot\n    }\n  }, DOMAIN_OPTIONS.map(name2 => /* @__PURE__ */React58.createElement(\"option\", {\n    key: name2,\n    value: name2\n  }, name2)));\n}\n\nfunction GlobalSelectionSlider(_ref100) {\n  let {\n    field,\n    value,\n    handleChange,\n    possibleValues\n  } = _ref100;\n  return /* @__PURE__ */React58.createElement(StyledSelectionSlider, {\n    value,\n    onChange: (event, newValue) => {\n      handleChange({\n        selection: {\n          [field]: newValue\n        },\n        event\n      });\n    },\n    onChangeCommitted: (event, newValue) => {\n      handleChange({\n        selection: {\n          [field]: newValue\n        },\n        event\n      });\n    },\n    valueLabelDisplay: \"auto\",\n    getAriaLabel: () => `${field} slider`,\n    marks: possibleValues.map(val => ({\n      value: val\n    })),\n    min: Number(possibleValues[0]),\n    max: Number(possibleValues.slice(-1)),\n    orientation: \"horizontal\",\n    step: null\n  });\n}\n\nfunction LayerOption(_ref101) {\n  let {\n    name: name2,\n    inputId,\n    children\n  } = _ref101;\n  return /* @__PURE__ */React58.createElement(Grid5, {\n    container: true,\n    direction: \"row\",\n    alignItems: \"center\",\n    justify: \"center\"\n  }, /* @__PURE__ */React58.createElement(Grid5, {\n    item: true,\n    xs: 6\n  }, /* @__PURE__ */React58.createElement(InputLabel2, {\n    htmlFor: inputId\n  }, name2, \":\")), /* @__PURE__ */React58.createElement(Grid5, {\n    item: true,\n    xs: 6\n  }, children));\n}\n\nfunction LayerOptions(_ref102) {\n  let {\n    colormap,\n    opacity,\n    handleColormapChange,\n    handleOpacityChange,\n    handleTransparentColorChange,\n    globalControlLabels,\n    globalLabelValues,\n    handleGlobalChannelsSelectionChange,\n    handleSliderChange,\n    handleDomainChange,\n    transparentColor,\n    channels: channels2,\n    domainType,\n    disableChannelsIfRgbDetected,\n    shouldShowTransparentColor,\n    shouldShowDomain,\n    shouldShowColormap,\n    use3d,\n    loader,\n    handleMultiPropertyChange,\n    resolution,\n    disable3d,\n    setRasterLayerCallback,\n    setAreAllChannelsLoading,\n    setViewState,\n    spatialHeight,\n    spatialWidth,\n    modelMatrix\n  } = _ref102;\n  const {\n    labels,\n    shape\n  } = Array.isArray(loader.data) ? loader.data[0] : loader.data;\n  const hasDimensionsAndChannels = labels.length > 0 && channels2.length > 0;\n  const hasZStack = shape[labels.indexOf(\"z\")] > 1;\n  const hasViewableResolutions = Boolean(Array.from({\n    length: loader.data.length\n  }).filter((_, res) => canLoadResolution(loader.data, res)).length);\n  return /* @__PURE__ */React58.createElement(Grid5, {\n    container: true,\n    direction: \"column\",\n    style: {\n      width: \"100%\"\n    }\n  }, hasZStack && !disable3d && hasViewableResolutions && /* @__PURE__ */React58.createElement(VolumeDropdown, {\n    loader,\n    handleSliderChange,\n    handleDomainChange,\n    channels: channels2,\n    handleMultiPropertyChange,\n    resolution,\n    disable3d,\n    setRasterLayerCallback,\n    setAreAllChannelsLoading,\n    setViewState,\n    spatialHeight,\n    spatialWidth,\n    use3d,\n    modelMatrix\n  }), hasDimensionsAndChannels && !use3d && globalControlLabels.map(field => shape[labels.indexOf(field)] > 1 && /* @__PURE__ */React58.createElement(LayerOption, {\n    name: field,\n    inputId: `${field}-slider`,\n    key: field\n  }, /* @__PURE__ */React58.createElement(GlobalSelectionSlider, {\n    field,\n    value: globalLabelValues[field],\n    handleChange: handleGlobalChannelsSelectionChange,\n    possibleValues: range9(shape[labels.indexOf(field)])\n  }))), !disableChannelsIfRgbDetected ? /* @__PURE__ */React58.createElement(React58.Fragment, null, shouldShowColormap && /* @__PURE__ */React58.createElement(Grid5, {\n    item: true\n  }, /* @__PURE__ */React58.createElement(LayerOption, {\n    name: \"Colormap\",\n    inputId: \"colormap-select\"\n  }, /* @__PURE__ */React58.createElement(ColormapSelect, {\n    value: colormap || \"\",\n    inputId: \"colormap-select\",\n    handleChange: handleColormapChange\n  }))), shouldShowDomain && /* @__PURE__ */React58.createElement(Grid5, {\n    item: true\n  }, /* @__PURE__ */React58.createElement(LayerOption, {\n    name: \"Domain\",\n    inputId: \"domain-selector\"\n  }, /* @__PURE__ */React58.createElement(SliderDomainSelector, {\n    value: domainType || DEFAULT_RASTER_DOMAIN_TYPE,\n    handleChange: value => {\n      handleDomainChange(value);\n    }\n  })))) : null, !use3d && /* @__PURE__ */React58.createElement(Grid5, {\n    item: true\n  }, /* @__PURE__ */React58.createElement(LayerOption, {\n    name: \"Opacity\",\n    inputId: \"opacity-slider\"\n  }, /* @__PURE__ */React58.createElement(OpacitySlider, {\n    value: opacity,\n    handleChange: handleOpacityChange\n  }))), shouldShowTransparentColor && !use3d && /* @__PURE__ */React58.createElement(Grid5, {\n    item: true\n  }, /* @__PURE__ */React58.createElement(LayerOption, {\n    name: \"Zero Transparent\",\n    inputId: \"transparent-color-selector\"\n  }, /* @__PURE__ */React58.createElement(TransparentColorCheckbox, {\n    value: transparentColor,\n    handleChange: handleTransparentColorChange\n  }))));\n}\n\nvar LayerOptions_default = LayerOptions; // src/components/layer-controller/VolumeOptions.js\n\nimport React59 from \"react\";\nimport { Matrix4 as Matrix46 } from \"math.gl\";\nimport Grid6 from \"@material-ui/core/Grid\";\nimport Typography2 from \"@material-ui/core/Typography\";\nimport Button from \"@material-ui/core/Button\";\nimport { makeStyles as makeStyles9, createStyles as createStyles2 } from \"@material-ui/core/styles\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport Select4 from \"@material-ui/core/Select\";\nimport InputLabel3 from \"@material-ui/core/InputLabel\";\nimport Slider8 from \"@material-ui/core/Slider\";\nvar useSlicerStyles = makeStyles9(theme => createStyles2({\n  enabled: {},\n  disabled: {\n    color: theme.palette.text.disabled,\n    \"& .MuiSlider-thumb\": {\n      color: \"rgb(100, 100, 100, 1.0)\"\n    },\n    \"&  .MuiSlider-track\": {\n      color: \"rgb(100, 100, 100, 1.0)\"\n    }\n  }\n}));\n\nvar Slicer = _ref103 => {\n  let {\n    xSlice,\n    ySlice,\n    zSlice,\n    handleSlicerSetting,\n    loader,\n    use3d\n  } = _ref103;\n  const [xSliceInit, ySliceInit, zSliceInit] = getBoundingCube(loader.data);\n  const sliceValuesAndSetSliceFunctions = [[xSlice, xSliceNew => handleSlicerSetting(\"x\", xSliceNew), \"x\", xSliceInit], [ySlice, ySliceNew => handleSlicerSetting(\"y\", ySliceNew), \"y\", ySliceInit], [zSlice, zSliceNew => handleSlicerSetting(\"z\", zSliceNew), \"z\", zSliceInit]];\n  const classes = useSlicerStyles();\n  const Slicers = sliceValuesAndSetSliceFunctions.map(_ref104 => {\n    let [val, setVal, label, [min, max2]] = _ref104;\n    return /* @__PURE__ */React59.createElement(Grid6, {\n      container: true,\n      direction: \"row\",\n      justify: \"flex-start\",\n      alignItems: \"center\",\n      key: label\n    }, /* @__PURE__ */React59.createElement(Grid6, {\n      item: true,\n      xs: 1\n    }, /* @__PURE__ */React59.createElement(Typography2, {\n      className: !use3d ? classes.disabled : classes.enabled,\n      style: {\n        marginBottom: 0\n      }\n    }, label, \":\")), /* @__PURE__ */React59.createElement(Grid6, {\n      item: true,\n      xs: 11\n    }, /* @__PURE__ */React59.createElement(Slider8, {\n      disabled: !use3d,\n      className: !use3d ? classes.disabled : classes.enabled,\n      value: val,\n      onChange: (e, v) => setVal(v),\n      valueLabelDisplay: \"auto\",\n      valueLabelFormat: v => abbreviateNumber(v),\n      getAriaLabel: () => `${label} slider`,\n      min,\n      max: max2,\n      step: 5e-3,\n      orientation: \"horizontal\"\n    })));\n  });\n  return /* @__PURE__ */React59.createElement(React59.Fragment, null, /* @__PURE__ */React59.createElement(Typography2, {\n    className: !use3d ? classes.disabled : classes.enabled,\n    style: {\n      marginTop: 16,\n      marginBottom: 0\n    }\n  }, \"Clipping Planes:\", \" \"), \" \", Slicers);\n};\n\nvar renderingOptions = Object.values(RENDERING_MODES);\n\nfunction RenderingModeSelect(_ref105) {\n  let {\n    handleRenderingModeChange,\n    renderingMode,\n    use3d\n  } = _ref105;\n  const classes = useSelectStyles();\n  const options = !use3d ? [...renderingOptions, \"\"] : renderingOptions;\n  return /* @__PURE__ */React59.createElement(FormControl, {\n    fullWidth: true\n  }, /* @__PURE__ */React59.createElement(InputLabel3, {\n    htmlFor: \"rendering-mode-select\"\n  }, \"Rendering Mode\"), /* @__PURE__ */React59.createElement(Select4, {\n    native: true,\n    onChange: e => handleRenderingModeChange(e.target.value),\n    value: use3d ? renderingMode : \"\",\n    inputProps: {\n      name: \"rendering-mode\",\n      id: \"rendering-mode-select\"\n    },\n    disabled: !use3d,\n    classes: {\n      root: classes.selectRoot\n    }\n  }, options.map(name2 => /* @__PURE__ */React59.createElement(\"option\", {\n    key: name2,\n    value: name2\n  }, name2))));\n}\n\nvar ReCenterButton = _ref106 => {\n  let {\n    setViewState,\n    use3d,\n    spatialHeight,\n    spatialWidth,\n    loader,\n    modelMatrix\n  } = _ref106;\n  return /* @__PURE__ */React59.createElement(Grid6, {\n    item: true,\n    xs: \"auto\",\n    key: \"recenter\"\n  }, /* @__PURE__ */React59.createElement(Button, {\n    onClick: () => {\n      const defaultViewState = getDefaultInitialViewState(loader.data, {\n        height: spatialHeight,\n        width: spatialWidth\n      }, 1.5, use3d, new Matrix46(modelMatrix));\n      setViewState(__spreadProps(__spreadValues({}, defaultViewState), {\n        rotationX: 0,\n        rotationOrbit: 0\n      }));\n    },\n    disabled: !use3d,\n    style: {\n      padding: 0,\n      marginBottom: 6\n    }\n  }, \"Re-Center\"));\n};\n\nvar VolumeOptions = _ref107 => {\n  let {\n    handleSlicerSetting,\n    handleRenderingModeChange,\n    renderingMode,\n    xSlice,\n    ySlice,\n    zSlice,\n    use3d,\n    loader,\n    setViewState,\n    spatialHeight,\n    spatialWidth,\n    modelMatrix\n  } = _ref107;\n  return /* @__PURE__ */React59.createElement(React59.Fragment, null, /* @__PURE__ */React59.createElement(RenderingModeSelect, {\n    handleRenderingModeChange,\n    renderingMode,\n    use3d\n  }), /* @__PURE__ */React59.createElement(Slicer, {\n    xSlice,\n    ySlice,\n    zSlice,\n    handleSlicerSetting,\n    use3d,\n    loader\n  }), /* @__PURE__ */React59.createElement(ReCenterButton, {\n    setViewState,\n    use3d,\n    spatialHeight,\n    spatialWidth,\n    loader,\n    modelMatrix\n  }));\n};\n\nvar VolumeOptions_default = VolumeOptions; // src/components/layer-controller/LayerController.js\n\nfunction TabPanel(props) {\n  const _a2 = props,\n        {\n    children,\n    value,\n    index\n  } = _a2,\n        other = __objRest(_a2, [\"children\", \"value\", \"index\"]);\n\n  return /* @__PURE__ */React60.createElement(\"div\", __spreadValues({\n    role: \"tabpanel\",\n    hidden: value !== index,\n    id: `simple-tabpanel-${index}`,\n    \"aria-labelledby\": `simple-tab-${index}`\n  }, other), value === index && children);\n}\n\nfunction getDomainsAndSliders(loader, selections, domainType, use3d) {\n  return __async(this, null, function* () {\n    let domains;\n    const stats = yield getMultiSelectionStats({\n      loader: loader.data,\n      selections,\n      use3d\n    });\n    const {\n      sliders\n    } = stats;\n\n    if (domainType === \"Min/Max\") {\n      domains = stats.domains;\n    }\n\n    if (domainType === \"Full\") {\n      const source = getSourceFromLoader(loader);\n      domains = selections.map(() => DOMAINS[source.dtype]);\n    }\n\n    return {\n      domains,\n      sliders\n    };\n  });\n}\n\nvar buttonStyles = {\n  borderStyle: \"dashed\",\n  marginTop: \"10px\",\n  fontWeight: 400\n};\n\nfunction LayerController(props) {\n  var _a2;\n\n  const {\n    layer,\n    name: name2,\n    loader,\n    theme,\n    handleLayerRemove,\n    handleLayerChange,\n    shouldShowTransparentColor,\n    shouldShowDomain,\n    shouldShowColormap,\n    ChannelController,\n    setViewState,\n    disable3d,\n    setRasterLayerCallback,\n    setAreLayerChannelsLoading,\n    areLayerChannelsLoading,\n    disabled,\n    spatialHeight,\n    spatialWidth,\n    disableChannelsIfRgbDetected,\n    shouldShowRemoveLayerButton\n  } = props;\n  const {\n    colormap,\n    opacity,\n    channels: channels2,\n    transparentColor,\n    renderingMode,\n    xSlice,\n    ySlice,\n    zSlice,\n    resolution,\n    use3d,\n    modelMatrix\n  } = layer;\n  const channelRef = useRef8(channels2);\n  useEffect18(() => {\n    channelRef.current = channels2;\n    return void 0;\n  }, [channels2]);\n  const firstSelection = ((_a2 = channels2[0]) == null ? void 0 : _a2.selection) || {};\n  const {\n    data,\n    channels: channelOptions\n  } = loader;\n  const [tab, setTab] = useState18(0);\n\n  const handleTabChange = (event, newTab) => {\n    setTab(newTab);\n  };\n\n  const {\n    labels,\n    shape\n  } = Array.isArray(data) ? data[data.length - 1] : data;\n  const [domainType, setDomainType] = useState18(layer.domainType);\n  const [isExpanded, setIsExpanded] = useState18(true);\n  const [globalLabelValues, setGlobalLabelValues] = useState18(GLOBAL_LABELS.filter(field => typeof firstSelection[field] === \"number\").reduce((o, key) => __spreadProps(__spreadValues({}, o), {\n    [key]: firstSelection[key]\n  }), {}));\n\n  function setVisible(v) {\n    handleLayerChange(__spreadProps(__spreadValues({}, layer), {\n      visible: v\n    }));\n  }\n\n  function setColormap(v) {\n    handleLayerChange(__spreadProps(__spreadValues({}, layer), {\n      colormap: v\n    }));\n  }\n\n  function setOpacity(v) {\n    handleLayerChange(__spreadProps(__spreadValues({}, layer), {\n      opacity: v\n    }));\n  }\n\n  function setChannels(v) {\n    handleLayerChange(__spreadProps(__spreadValues({}, layer), {\n      channels: v\n    }));\n  }\n\n  function setTransparentColor(v) {\n    handleLayerChange(__spreadProps(__spreadValues({}, layer), {\n      transparentColor: v\n    }));\n  }\n\n  function setRenderingMode(v) {\n    handleLayerChange(__spreadProps(__spreadValues({}, layer), {\n      renderingMode: v\n    }));\n  }\n\n  function handleMultiPropertyChange(obj) {\n    handleLayerChange(__spreadValues(__spreadValues({}, layer), obj));\n  }\n\n  function handleSlicerSetting(slice3, val) {\n    handleLayerChange(__spreadProps(__spreadValues({}, layer), {\n      [`${slice3}Slice`]: val\n    }));\n  }\n\n  function setChannelsAndDomainType(newChannels, newDomainType) {\n    handleLayerChange(__spreadProps(__spreadValues({}, layer), {\n      channels: newChannels,\n      domainType: newDomainType\n    }));\n  }\n\n  function setChannel(v, i) {\n    const newChannels = [...channelRef.current];\n    newChannels[i] = v;\n    handleLayerChange(__spreadProps(__spreadValues({}, layer), {\n      channels: newChannels\n    }));\n  }\n\n  function addChannel(v) {\n    const newChannels = [...channelRef.current, v];\n    handleLayerChange(__spreadProps(__spreadValues({}, layer), {\n      channels: newChannels\n    }));\n  }\n\n  function removeChannel(i) {\n    const newChannels = [...channelRef.current];\n    newChannels.splice(i, 1);\n    handleLayerChange(__spreadProps(__spreadValues({}, layer), {\n      channels: newChannels\n    }));\n  }\n\n  const setAreAllChannelsLoading = val => {\n    const newAreLayerChannelsLoading = channelRef.current.map(() => val);\n    setAreLayerChannelsLoading(newAreLayerChannelsLoading);\n  };\n\n  const handleChannelAdd = () => __async(this, null, function* () {\n    const selection = {};\n    labels.forEach(label => {\n      selection[label] = GLOBAL_LABELS.includes(label) ? globalLabelValues[label] || 0 : 0;\n    });\n    const {\n      domains,\n      sliders\n    } = yield getDomainsAndSliders(loader, [selection], domainType, use3d);\n    const domain = domains[0];\n    const slider = domain;\n    const color = [255, 255, 255];\n    const visible2 = true;\n    const newChannelId = channels2.length;\n    const newAreLayerChannelsLoading = [...areLayerChannelsLoading];\n    newAreLayerChannelsLoading[newChannelId] = true;\n    setAreLayerChannelsLoading(newAreLayerChannelsLoading);\n    const channel = {\n      selection,\n      slider,\n      visible: visible2,\n      color\n    };\n    setRasterLayerCallback(() => {\n      setChannel(__spreadProps(__spreadValues({}, channel), {\n        slider: sliders[0]\n      }), newChannelId);\n      const areLayerChannelsLoadingCallback = [...newAreLayerChannelsLoading];\n      areLayerChannelsLoadingCallback[newChannelId] = false;\n      setAreLayerChannelsLoading(areLayerChannelsLoadingCallback);\n      setRasterLayerCallback(null);\n    });\n    addChannel(channel);\n  });\n\n  const handleDomainChange = value => __async(this, null, function* () {\n    setDomainType(value);\n    const selections = channels2.map(channel => channel.selection);\n    let sliders = channels2.map(channel => channel.slider);\n    const {\n      domains\n    } = yield getDomainsAndSliders(loader, selections, value, use3d);\n    sliders = sliders.map((slider, i) => {\n      const [left, right] = slider;\n      return [Math.max(left, domains[i][0]), Math.min(right, domains[i][1])];\n    });\n    const newChannels = channels2.map((c, i) => __spreadProps(__spreadValues({}, c), {\n      slider: sliders[i]\n    }));\n    setChannelsAndDomainType(newChannels, value);\n  });\n\n  const handleGlobalChannelsSelectionChange = _0 => __async(this, [_0], function* (_ref108) {\n    let {\n      selection,\n      event\n    } = _ref108;\n    const selections = channels2.map(channel => __spreadValues(__spreadValues({}, channel.selection), selection));\n    const canUpdateChannels = event.type === \"mouseup\" || event.type === \"keydown\";\n\n    if (canUpdateChannels) {\n      setAreAllChannelsLoading(true);\n      getDomainsAndSliders(loader, selections, domainType, use3d).then(_ref109 => {\n        let {\n          sliders\n        } = _ref109;\n        const newChannelsWithSelection = channels2.map(c => __spreadProps(__spreadValues({}, c), {\n          selection: __spreadValues(__spreadValues({}, c.selection), selection)\n        }));\n        setRasterLayerCallback(() => {\n          setRasterLayerCallback(null);\n          setAreAllChannelsLoading(false);\n          const newChannelsWithSliders = [...newChannelsWithSelection].map((c, i) => __spreadProps(__spreadValues({}, c), {\n            slider: sliders[i]\n          }));\n          setChannels(newChannelsWithSliders);\n        });\n        setChannels(newChannelsWithSelection);\n      });\n    }\n\n    setGlobalLabelValues(prev => __spreadValues(__spreadValues({}, prev), selection));\n  });\n\n  let channelControllers = [];\n\n  if (labels.length > 0) {\n    const channelLabel = labels.find(c => c === \"channel\" || c === \"c\") || labels[0];\n    channelControllers = channels2.map((c, channelId) => {\n      const setIsLoading = val => {\n        const newAreLayerChannelsLoading = [...areLayerChannelsLoading];\n        newAreLayerChannelsLoading[channelId] = val;\n        setAreLayerChannelsLoading(newAreLayerChannelsLoading);\n      };\n\n      const handleChannelPropertyChange = (property, value) => {\n        const update = {\n          [property]: value\n        };\n\n        if (property === \"selection\") {\n          setIsLoading(true);\n          update.selection = __spreadValues(__spreadValues({}, globalLabelValues), update.selection);\n          setChannel(__spreadValues(__spreadValues({}, c), update), channelId);\n          setRasterLayerCallback(() => __async(this, null, function* () {\n            const selections = [__spreadValues(__spreadValues({}, channels2[channelId][property]), value)];\n            const {\n              sliders\n            } = yield getDomainsAndSliders(loader, selections, domainType, use3d);\n            [update.slider] = sliders;\n            setChannel(__spreadValues(__spreadValues({}, c), update), channelId);\n            setRasterLayerCallback(null);\n            setIsLoading(false);\n          }));\n        } else {\n          setChannel(__spreadValues(__spreadValues({}, c), update), channelId);\n        }\n      };\n\n      const handleChannelRemove = () => {\n        removeChannel(channelId);\n      };\n\n      const handleIQRUpdate = () => __async(this, null, function* () {\n        const {\n          data: loaderData\n        } = loader;\n        const source = Array.isArray(loaderData) ? loaderData[loaderData.length - 1] : loaderData;\n        const raster = yield source.getRaster({\n          selection: channels2[channelId].selection\n        });\n        const stats = getChannelStats(raster.data);\n        const {\n          q1,\n          q3\n        } = stats;\n        setChannel(__spreadProps(__spreadValues({}, c), {\n          slider: [q1, q3]\n        }), channelId);\n      });\n\n      return /* @__PURE__ */React60.createElement(ChannelController, {\n        key: `channel-controller-${channelId}`,\n        dimName: channelLabel,\n        visibility: c.visible,\n        selectionIndex: c.selection[channelLabel],\n        slider: c.slider,\n        color: c.color,\n        channels: channels2,\n        channelId,\n        domainType,\n        loader,\n        globalLabelValues,\n        theme,\n        channelOptions,\n        colormapOn: Boolean(colormap),\n        handlePropertyChange: handleChannelPropertyChange,\n        handleChannelRemove,\n        handleIQRUpdate,\n        setRasterLayerCallback,\n        isLoading: areLayerChannelsLoading[channelId],\n        use3d\n      });\n    });\n  }\n\n  const controllerSectionClasses = useControllerSectionStyles();\n  const {\n    visible\n  } = layer;\n  const visibleSetting = typeof visible === \"boolean\" ? visible : true;\n  const Visibility = visibleSetting ? VisibilityIcon : VisibilityOffIcon;\n  const hasViewableResolutions = Boolean(Array.from({\n    length: loader.data.length\n  }).filter((_, res) => canLoadResolution(loader.data, res)).length);\n  const useVolumeTabs = !disable3d && shape[labels.indexOf(\"z\")] > 1 && hasViewableResolutions;\n  const FullController = /* @__PURE__ */React60.createElement(React60.Fragment, null, /* @__PURE__ */React60.createElement(LayerOptions_default, {\n    channels: channels2,\n    opacity,\n    colormap,\n    transparentColor,\n    domainType,\n    globalControlLabels: labels.filter(label => GLOBAL_LABELS.includes(label)),\n    globalLabelValues,\n    handleOpacityChange: setOpacity,\n    handleColormapChange: setColormap,\n    handleGlobalChannelsSelectionChange,\n    handleTransparentColorChange: setTransparentColor,\n    disableChannelsIfRgbDetected: isRgb(loader) && disableChannelsIfRgbDetected,\n    handleDomainChange,\n    shouldShowTransparentColor,\n    shouldShowDomain,\n    shouldShowColormap,\n    use3d,\n    loader,\n    handleMultiPropertyChange,\n    resolution,\n    disable3d,\n    setRasterLayerCallback,\n    setAreAllChannelsLoading,\n    setViewState,\n    spatialHeight,\n    spatialWidth,\n    modelMatrix\n  }), isRgb(loader) && disableChannelsIfRgbDetected ? null : channelControllers, isRgb(loader) && disableChannelsIfRgbDetected ? null : /* @__PURE__ */React60.createElement(Button2, {\n    disabled: channels2.length === MAX_CHANNELS,\n    onClick: handleChannelAdd,\n    fullWidth: true,\n    variant: \"outlined\",\n    style: buttonStyles,\n    startIcon: /* @__PURE__ */React60.createElement(AddIcon, null),\n    size: \"small\"\n  }, \"Add Channel\"));\n  return /* @__PURE__ */React60.createElement(ExpansionPanel, {\n    className: controllerSectionClasses.root,\n    onChange: (e, expanded) => {\n      var _a3, _b2, _c;\n\n      return !disabled && setIsExpanded(expanded && ((_c = (_b2 = (_a3 = e == null ? void 0 : e.target) == null ? void 0 : _a3.attributes) == null ? void 0 : _b2.role) == null ? void 0 : _c.value) === \"presentation\");\n    },\n    TransitionProps: {\n      enter: false\n    },\n    expanded: !disabled && isExpanded\n  }, /* @__PURE__ */React60.createElement(StyledExpansionPanelSummary, {\n    expandIcon: /* @__PURE__ */React60.createElement(ExpandMoreIcon, null),\n    \"aria-controls\": `layer-${name2}-controls`\n  }, /* @__PURE__ */React60.createElement(Grid7, {\n    container: true,\n    direction: \"column\",\n    m: 1,\n    justify: \"center\"\n  }, /* @__PURE__ */React60.createElement(OverflowEllipsisGrid, {\n    item: true\n  }, /* @__PURE__ */React60.createElement(Button2, {\n    onClick: e => {\n      if (!disabled) {\n        e.stopPropagation();\n        const nextVisible = typeof visible === \"boolean\" ? !visible : false;\n        setVisible(nextVisible);\n      }\n    },\n    style: {\n      marginRight: 8,\n      marginBottom: 2,\n      padding: 0,\n      minWidth: 0\n    }\n  }, /* @__PURE__ */React60.createElement(Visibility, null)), name2), !disabled && !isExpanded && !use3d && /* @__PURE__ */React60.createElement(Grid7, {\n    container: true,\n    direction: \"row\",\n    alignItems: \"center\",\n    justify: \"center\"\n  }, /* @__PURE__ */React60.createElement(Grid7, {\n    item: true,\n    xs: 6\n  }, /* @__PURE__ */React60.createElement(StyledInputLabel, {\n    htmlFor: `layer-${name2}-opacity-closed`\n  }, \"Opacity:\")), /* @__PURE__ */React60.createElement(Grid7, {\n    item: true,\n    xs: 6\n  }, /* @__PURE__ */React60.createElement(Slider9, {\n    id: `layer-${name2}-opacity-closed`,\n    value: opacity,\n    onChange: (e, v) => setOpacity(v),\n    valueLabelDisplay: \"auto\",\n    getAriaLabel: () => \"opacity slider\",\n    min: 0,\n    max: 1,\n    step: 0.01,\n    orientation: \"horizontal\"\n  }))))), /* @__PURE__ */React60.createElement(StyledExpansionPanelDetails, null, useVolumeTabs ? /* @__PURE__ */React60.createElement(React60.Fragment, null, /* @__PURE__ */React60.createElement(Tabs, {\n    value: tab,\n    onChange: handleTabChange,\n    \"aria-label\": \"simple tabs example\",\n    style: {\n      height: \"24px\",\n      minHeight: \"24px\"\n    }\n  }, /* @__PURE__ */React60.createElement(Tab, {\n    label: \"Channels\",\n    style: {\n      fontSize: \".75rem\",\n      bottom: 12,\n      width: \"50%\",\n      minWidth: \"50%\"\n    },\n    disableRipple: true\n  }), /* @__PURE__ */React60.createElement(Tab, {\n    label: \"Volume\",\n    style: {\n      fontSize: \".75rem\",\n      bottom: 12,\n      width: \"50%\",\n      minWidth: \"50%\"\n    }\n  })), /* @__PURE__ */React60.createElement(TabPanel, {\n    value: tab,\n    index: 0\n  }, FullController), /* @__PURE__ */React60.createElement(TabPanel, {\n    value: tab,\n    index: 1,\n    style: {\n      marginTop: 4\n    }\n  }, /* @__PURE__ */React60.createElement(VolumeOptions_default, {\n    loader,\n    handleSlicerSetting,\n    handleRenderingModeChange: setRenderingMode,\n    renderingMode,\n    xSlice,\n    ySlice,\n    zSlice,\n    use3d,\n    setViewState,\n    spatialHeight,\n    spatialWidth,\n    modelMatrix\n  }))) : FullController, shouldShowRemoveLayerButton ? /* @__PURE__ */React60.createElement(Button2, {\n    onClick: handleLayerRemove,\n    fullWidth: true,\n    variant: \"outlined\",\n    style: buttonStyles,\n    size: \"small\"\n  }, \"Remove Image Layer\") : null));\n} // src/components/layer-controller/ImageAddButton.js\n\n\nimport React61, { useState as useState19 } from \"react\";\nimport { makeStyles as makeStyles10 } from \"@material-ui/core/styles\";\nimport AddIcon2 from \"@material-ui/icons/Add\";\nimport MenuItem3 from \"@material-ui/core/MenuItem\";\nvar useStyles5 = makeStyles10(() => ({\n  addButton: {\n    marginTop: \"10px\",\n    marginBottom: \"10px\",\n    fontWeight: 400\n  }\n}));\n\nfunction ImageAddIcon() {\n  return /* @__PURE__ */React61.createElement(React61.Fragment, null, /* @__PURE__ */React61.createElement(AddIcon2, null), \"Add Image Layer\");\n}\n\nfunction ImageAddButton(_ref110) {\n  let {\n    imageOptions,\n    handleImageAdd\n  } = _ref110;\n  const [open, setOpen] = useState19(false);\n  const classes = useStyles5();\n\n  const handleAdd = imgData => {\n    setOpen(prev => !prev);\n    handleImageAdd(imgData);\n  };\n\n  if (!imageOptions) return null;\n  return /* @__PURE__ */React61.createElement(PopperMenu, {\n    open,\n    setOpen,\n    buttonIcon: /* @__PURE__ */React61.createElement(ImageAddIcon, null),\n    buttonClassName: classes.addButton\n  }, imageOptions.map((imgData, i) => /* @__PURE__ */React61.createElement(MenuItem3, {\n    dense: true,\n    key: imgData.name,\n    onClick: () => handleAdd(i)\n  }, /* @__PURE__ */React61.createElement(\"span\", null, imgData.name))));\n}\n\nvar ImageAddButton_default = ImageAddButton; // src/components/layer-controller/LayerControllerSubscriber.js\n\nvar LAYER_CONTROLLER_DATA_TYPES = [\"raster\"];\nvar LayerControllerMemoized = React62.memo(forwardRef4((props, ref) => {\n  const {\n    title: title16,\n    removeGridComponent,\n    theme,\n    isReady,\n    moleculesLayer,\n    dataset,\n    setMoleculesLayer,\n    cellsLayer,\n    canShowCellVecmask,\n    setCellsLayer,\n    rasterLayers,\n    imageLayerLoaders,\n    imageLayerMeta,\n    rasterLayersCallbacks,\n    setRasterLayersCallbacks,\n    areLoadingRasterChannnels,\n    setAreLoadingRasterChannnels,\n    handleRasterLayerChange,\n    handleRasterLayerRemove,\n    disable3d,\n    globalDisable3d,\n    disableChannelsIfRgbDetected,\n    layerIs3DIndex,\n    setZoom,\n    setTargetX,\n    setTargetY,\n    setTargetZ,\n    setRotationX,\n    setRotationOrbit,\n    componentHeight,\n    componentWidth,\n    spatialLayout,\n    handleImageAdd,\n    enableLayerButtonsWithOneLayer\n  } = props;\n  const shouldShowImageLayerButton = Boolean(enableLayerButtonsWithOneLayer || (imageLayerLoaders == null ? void 0 : imageLayerLoaders.length) > 1);\n  return /* @__PURE__ */React62.createElement(TitleInfo, {\n    title: title16,\n    isScroll: true,\n    removeGridComponent,\n    theme,\n    isReady\n  }, /* @__PURE__ */React62.createElement(\"div\", {\n    className: \"layer-controller-container\",\n    ref\n  }, moleculesLayer && /* @__PURE__ */React62.createElement(VectorLayerController, {\n    key: `${dataset}-molecules`,\n    label: \"Molecules\",\n    layerType: \"molecules\",\n    layer: moleculesLayer,\n    handleLayerChange: setMoleculesLayer\n  }), cellsLayer && canShowCellVecmask && /* @__PURE__ */React62.createElement(VectorLayerController, {\n    key: `${dataset}-cells`,\n    label: \"Cell Segmentations\",\n    layerType: \"cells\",\n    layer: cellsLayer,\n    handleLayerChange: setCellsLayer\n  }), rasterLayers && rasterLayers.map((layer, i) => {\n    var _a2;\n\n    const {\n      index\n    } = layer;\n    const loader = imageLayerLoaders[index];\n    const layerMeta = imageLayerMeta[index];\n    const isRaster = !((_a2 = layerMeta == null ? void 0 : layerMeta.metadata) == null ? void 0 : _a2.isBitmask);\n    const ChannelController = isRaster ? RasterChannelController_default : BitmaskChannelController_default;\n\n    const setRasterLayerCallback = cb => {\n      const newRasterLayersCallbacks = [...(rasterLayersCallbacks || [])];\n      newRasterLayersCallbacks[i] = cb;\n      setRasterLayersCallbacks(newRasterLayersCallbacks);\n    };\n\n    const areLayerChannelsLoading = (areLoadingRasterChannnels || [])[i] || [];\n\n    const setAreLayerChannelsLoading = v => {\n      const newAreLoadingRasterChannnels = [...(areLoadingRasterChannnels || [])];\n      newAreLoadingRasterChannnels[i] = v;\n      setAreLoadingRasterChannnels(newAreLoadingRasterChannnels);\n    };\n\n    return loader && layerMeta ? /* @__PURE__ */React62.createElement(Grid8, {\n      key: `${dataset}-raster-${index}-${i}`,\n      item: true,\n      style: {\n        marginTop: \"10px\"\n      }\n    }, /* @__PURE__ */React62.createElement(LayerController, {\n      name: layerMeta.name,\n      layer,\n      loader,\n      theme,\n      handleLayerChange: v => handleRasterLayerChange(v, i),\n      handleLayerRemove: () => handleRasterLayerRemove(i),\n      ChannelController,\n      shouldShowTransparentColor: isRaster,\n      shouldShowDomain: isRaster,\n      shouldShowColormap: isRaster,\n      disable3d: globalDisable3d || (disable3d || []).indexOf(layerMeta.name) >= 0 || typeof layerIs3DIndex === \"number\" && layerIs3DIndex !== -1 && layerIs3DIndex !== i,\n      disabled: typeof layerIs3DIndex === \"number\" && layerIs3DIndex !== -1 && layerIs3DIndex !== i,\n      disableChannelsIfRgbDetected,\n      rasterLayersCallbacks,\n      setRasterLayerCallback,\n      setViewState: _ref111 => {\n        let {\n          zoom: newZoom,\n          target,\n          rotationX: newRotationX,\n          rotationOrbit: newRotationOrbit\n        } = _ref111;\n        setZoom(newZoom);\n        setTargetX(target[0]);\n        setTargetY(target[1]);\n        setTargetZ(target[2]);\n        setRotationX(newRotationX);\n        setRotationOrbit(newRotationOrbit);\n      },\n      setAreLayerChannelsLoading,\n      areLayerChannelsLoading,\n      spatialHeight: componentHeight * (spatialLayout ? spatialLayout.h : 1) / 12,\n      spatialWidth: componentWidth * (spatialLayout ? spatialLayout.w : 1) / 12,\n      shouldShowRemoveLayerButton: shouldShowImageLayerButton\n    })) : null;\n  }), shouldShowImageLayerButton ? /* @__PURE__ */React62.createElement(Grid8, {\n    item: true\n  }, /* @__PURE__ */React62.createElement(ImageAddButton_default, {\n    imageOptions: imageLayerMeta,\n    handleImageAdd\n  })) : null));\n}));\n\nfunction LayerControllerSubscriber(props) {\n  const {\n    coordinationScopes,\n    removeGridComponent,\n    theme,\n    title: title16 = \"Spatial Layers\",\n    disable3d,\n    globalDisable3d,\n    disableChannelsIfRgbDetected,\n    enableLayerButtonsWithOneLayer\n  } = props;\n  const loaders = useLoaders();\n  const [{\n    dataset,\n    spatialRasterLayers: rasterLayers,\n    spatialCellsLayer: cellsLayer,\n    spatialMoleculesLayer: moleculesLayer\n  }, {\n    setSpatialRasterLayers: setRasterLayers,\n    setSpatialCellsLayer: setCellsLayer,\n    setSpatialMoleculesLayer: setMoleculesLayer,\n    setSpatialTargetX: setTargetX,\n    setSpatialTargetY: setTargetY,\n    setSpatialTargetZ: setTargetZ,\n    setSpatialRotationX: setRotationX,\n    setSpatialRotationOrbit: setRotationOrbit,\n    setSpatialZoom: setZoom\n  }] = useCoordination(COMPONENT_COORDINATION_TYPES.layerController, coordinationScopes);\n  const [{\n    rasterLayersCallbacks,\n    areLoadingRasterChannnels\n  }, {\n    setRasterLayersCallbacks,\n    setAreLoadingRasterChannnels\n  }] = useAuxiliaryCoordination(COMPONENT_COORDINATION_TYPES.layerController, coordinationScopes);\n  const [spatialLayout] = useComponentLayout(\"spatial\", [\"spatialRasterLayers\"], coordinationScopes);\n  const layerControllerRef = useRef9();\n  const [componentWidth, componentHeight] = useClosestVitessceContainerSize(layerControllerRef);\n  const {\n    height: windowHeight,\n    width: windowWidth\n  } = useWindowDimensions();\n  const [isReady, setItemIsReady, setItemIsNotReady, resetReadyItems] = useReady(LAYER_CONTROLLER_DATA_TYPES);\n  useEffect19(() => {\n    resetReadyItems();\n  }, [loaders, dataset]);\n  const [raster, imageLayerLoaders, imageLayerMeta] = useRasterData(loaders, dataset, setItemIsReady, () => {}, false, {\n    setSpatialRasterLayers: setRasterLayers\n  }, {\n    spatialRasterLayers: rasterLayers\n  });\n  useCellsData(loaders, dataset, setItemIsReady, () => {}, false, {\n    setSpatialCellsLayer: setCellsLayer\n  }, {\n    spatialCellsLayer: cellsLayer\n  });\n  useMoleculesData(loaders, dataset, setItemIsReady, () => {}, false, {\n    setSpatialMoleculesLayer: setMoleculesLayer\n  }, {\n    spatialMoleculesLayer: moleculesLayer\n  });\n  const handleImageAdd = useCallback13(index => __async(this, null, function* () {\n    var _a2, _b2, _c, _d, _e;\n\n    const loader = imageLayerLoaders[index];\n    const newChannels = yield initializeLayerChannels(loader, (rasterLayers[index] || {}).use3d);\n\n    const newLayer = __spreadProps(__spreadValues({\n      index,\n      modelMatrix: (_c = (_b2 = (_a2 = imageLayerMeta[index]) == null ? void 0 : _a2.metadata) == null ? void 0 : _b2.transform) == null ? void 0 : _c.matrix\n    }, DEFAULT_RASTER_LAYER_PROPS), {\n      channels: newChannels,\n      type: ((_e = (_d = imageLayerMeta[index]) == null ? void 0 : _d.metadata) == null ? void 0 : _e.isBitmask) ? \"bitmask\" : \"raster\"\n    });\n\n    const newLayers = [...rasterLayers, newLayer];\n    setRasterLayers(newLayers);\n  }), [imageLayerLoaders, imageLayerMeta, rasterLayers, setRasterLayers]);\n  const handleRasterLayerChange = useCallback13((newLayer, i) => {\n    const newLayers = [...rasterLayers];\n    newLayers[i] = newLayer;\n    setRasterLayers(newLayers);\n  }, [rasterLayers, setRasterLayers]);\n  const handleRasterLayerRemove = useCallback13(i => {\n    const newLayers = [...rasterLayers];\n    newLayers.splice(i, 1);\n    setRasterLayers(newLayers);\n  }, [rasterLayers, setRasterLayers]);\n  const hasNoBitmask = (imageLayerMeta.length ? imageLayerMeta : [{\n    metadata: {\n      isBitmask: true\n    }\n  }]).every(l => {\n    var _a2;\n\n    return !((_a2 = l == null ? void 0 : l.metadata) == null ? void 0 : _a2.isBitmask);\n  });\n  const canShowCellVecmask = hasNoBitmask;\n  const layerIs3DIndex = (rasterLayers == null ? void 0 : rasterLayers.findIndex) && rasterLayers.findIndex(layer => layer.use3d);\n  return /* @__PURE__ */React62.createElement(LayerControllerMemoized, {\n    ref: layerControllerRef,\n    title: title16,\n    removeGridComponent,\n    theme,\n    isReady,\n    moleculesLayer,\n    dataset,\n    setMoleculesLayer,\n    cellsLayer,\n    canShowCellVecmask,\n    setCellsLayer,\n    rasterLayers,\n    imageLayerLoaders,\n    imageLayerMeta,\n    rasterLayersCallbacks,\n    setRasterLayersCallbacks,\n    areLoadingRasterChannnels,\n    setAreLoadingRasterChannnels,\n    handleRasterLayerChange,\n    handleRasterLayerRemove,\n    disable3d,\n    globalDisable3d,\n    layerIs3DIndex,\n    disableChannelsIfRgbDetected,\n    enableLayerButtonsWithOneLayer,\n    setZoom,\n    setTargetX,\n    setTargetY,\n    setTargetZ,\n    setRotationX,\n    setRotationOrbit,\n    componentHeight: componentHeight || windowHeight,\n    componentWidth: componentWidth || windowWidth,\n    spatialLayout,\n    handleImageAdd\n  });\n}\n\nvar LayerControllerSubscriber_default = LayerControllerSubscriber; // src/components/higlass/HiGlassSubscriber.js\n\nimport React64 from \"react\"; // src/components/higlass/HiGlassLazy.js\n\nimport React63, { useMemo as useMemo11, useEffect as useEffect20, useRef as useRef10, Suspense, useState as useState20 } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport dynamicImportPolyfill from \"dynamic-import-polyfill\";\nimport register from \"higlass-register\";\nimport { ZarrMultivecDataFetcher } from \"higlass-zarr-datafetchers\";\nvar PIXI_BUNDLE_VERSION = package_default.dependencies[\"window-pixi\"];\nvar HIGLASS_BUNDLE_VERSION = package_default.dependencies.higlass;\nvar BUNDLE_FILE_EXT = true ? \"js\" : \"min.js\";\nvar PIXI_BUNDLE_URL = `https://unpkg.com/window-pixi@${PIXI_BUNDLE_VERSION}/dist/pixi.${BUNDLE_FILE_EXT}`;\nvar HIGLASS_BUNDLE_URL = `https://unpkg.com/higlass@${HIGLASS_BUNDLE_VERSION}/dist/hglib.${BUNDLE_FILE_EXT}`;\ndynamicImportPolyfill.initialize();\nregister({\n  dataFetcher: ZarrMultivecDataFetcher,\n  config: ZarrMultivecDataFetcher.config\n}, {\n  pluginType: \"dataFetcher\"\n});\nvar HiGlassComponent = React63.lazy(() => {\n  if (!window.React) {\n    window.React = React63;\n  }\n\n  if (!window.ReactDOM) {\n    window.ReactDOM = ReactDOM;\n  }\n\n  return new Promise(resolve => {\n    const handleImportError = e => {\n      console.warn(e);\n      resolve(asEsModule(createWarningComponent({\n        title: \"Could not load HiGlass\",\n        message: \"The HiGlass scripts could not be dynamically imported.\"\n      })));\n    };\n\n    __import__(PIXI_BUNDLE_URL).then(() => {\n      __import__(HIGLASS_BUNDLE_URL).then(() => {\n        resolve(asEsModule(window.hglib.HiGlassComponent));\n      }).catch(handleImportError);\n    }).catch(handleImportError);\n  });\n});\nvar HG_SIZE = 800;\n\nfunction HiGlassLazy(props) {\n  const {\n    coordinationScopes,\n    theme,\n    hgViewConfig: hgViewConfigProp,\n    hgOptions: hgOptionsProp,\n    genomeSize,\n    height\n  } = props;\n  const [{\n    genomicZoomX,\n    genomicZoomY,\n    genomicTargetX,\n    genomicTargetY\n  }, {\n    setGenomicZoomX,\n    setGenomicZoomY,\n    setGenomicTargetX,\n    setGenomicTargetY\n  }] = useCoordination(COMPONENT_COORDINATION_TYPES.higlass, coordinationScopes);\n  const [width, computedHeight, containerRef] = useGridItemSize();\n  const [hgInstance, setHgInstance] = useState20();\n  const isActiveRef = useRef10();\n  const hgOptions = useMemo11(() => __spreadProps(__spreadValues({}, hgOptionsProp), {\n    theme\n  }), [hgOptionsProp, theme]);\n  const hgViewConfig = useMemo11(() => {\n    const centerX = genomicTargetX;\n\n    const genomesPerUnitX = genomeSize / __pow(2, genomicZoomX);\n\n    const unitX = width / HG_SIZE;\n    const initialXDomain = [centerX - genomesPerUnitX * unitX / 2, centerX + genomesPerUnitX * unitX / 2];\n    const centerY = genomicTargetY;\n\n    const genomesPerUnitY = genomeSize / __pow(2, genomicZoomY);\n\n    const unitY = height / HG_SIZE;\n    const initialYDomain = [centerY - genomesPerUnitY * unitY / 2, centerY + genomesPerUnitY * unitY / 2];\n    return {\n      editable: false,\n      zoomFixed: false,\n      trackSourceServers: [\"//higlass.io/api/v1\"],\n      exportViewUrl: \"//higlass.io/api/v1/viewconfs\",\n      views: [__spreadProps(__spreadValues({\n        uid: \"main\"\n      }, hgViewConfigProp), {\n        initialXDomain,\n        initialYDomain\n      })],\n      zoomLocks: {\n        locksByViewUid: {},\n        locksDict: {}\n      },\n      locationLocks: {\n        locksByViewUid: {},\n        locksDict: {}\n      },\n      valueScaleLocks: {\n        locksByViewUid: {},\n        locksDict: {}\n      }\n    };\n  }, [genomicTargetX, genomeSize, genomicZoomX, width, genomicTargetY, genomicZoomY, height, hgViewConfigProp]);\n  useEffect20(() => {\n    const handleMouseEnter = () => {\n      isActiveRef.current = true;\n    };\n\n    const handleMouseLeave = () => {\n      isActiveRef.current = false;\n    };\n\n    const container = containerRef.current;\n    container.addEventListener(\"mouseenter\", handleMouseEnter);\n    container.addEventListener(\"mouseleave\", handleMouseLeave);\n    return () => {\n      container.removeEventListener(\"mouseenter\", handleMouseEnter);\n      container.removeEventListener(\"mouseenter\", handleMouseLeave);\n    };\n  }, [containerRef]);\n  useEffect20(() => {\n    if (!hgInstance) {\n      return () => {};\n    }\n\n    hgInstance.api.on(\"viewConfig\", viewConfigString => {\n      if (!isActiveRef.current) {\n        return;\n      }\n\n      const viewConfig = JSON.parse(viewConfigString);\n      const xDomain = viewConfig.views[0].initialXDomain;\n      const yDomain = viewConfig.views[0].initialYDomain;\n      const nextGenomicZoomX = Math.log2(genomeSize / ((xDomain[1] - xDomain[0]) * (HG_SIZE / width)));\n      const nextGenomicZoomY = Math.log2(genomeSize / ((yDomain[1] - yDomain[0]) * (HG_SIZE / height)));\n      const nextGenomicTargetX = xDomain[0] + (xDomain[1] - xDomain[0]) / 2;\n      const nextGenomicTargetY = yDomain[0] + (yDomain[1] - yDomain[0]) / 2;\n      setGenomicZoomX(nextGenomicZoomX);\n      setGenomicZoomY(nextGenomicZoomY);\n      setGenomicTargetX(nextGenomicTargetX);\n      setGenomicTargetY(nextGenomicTargetY);\n    });\n    return () => hgInstance.api.off(\"viewConfig\");\n  }, [hgInstance, genomeSize, width, height, setGenomicZoomX, setGenomicZoomY, setGenomicTargetX, setGenomicTargetY]);\n  return /* @__PURE__ */React63.createElement(\"div\", {\n    className: \"higlass-wrapper-parent\"\n  }, /* @__PURE__ */React63.createElement(\"div\", {\n    className: \"higlass-wrapper\",\n    ref: containerRef,\n    style: {\n      height: `${height}px`\n    }\n  }, /* @__PURE__ */React63.createElement(Suspense, {\n    fallback: /* @__PURE__ */React63.createElement(\"div\", null, \"Loading...\")\n  }, /* @__PURE__ */React63.createElement(HiGlassComponent, {\n    ref: setHgInstance,\n    zoomFixed: false,\n    viewConfig: hgViewConfig,\n    options: hgOptions\n  }))));\n}\n\nHiGlassLazy.defaultProps = {\n  hgOptions: {\n    bounded: true,\n    pixelPreciseMarginPadding: true,\n    containerPaddingX: 0,\n    containerPaddingY: 0,\n    sizeMode: \"default\"\n  },\n  genomeSize: 31e8\n}; // src/components/higlass/HiGlassSubscriber.js\n\nvar HIGLASS_DATA_TYPES = [];\n\nfunction HiGlassSubscriber(props) {\n  const {\n    coordinationScopes,\n    theme,\n    hgViewConfig,\n    removeGridComponent\n  } = props;\n  const [width, height, containerRef] = useGridItemSize();\n  const [isReady, setItemIsReady, setItemIsNotReady, resetReadyItems] = useReady(HIGLASS_DATA_TYPES);\n  const [urls, addUrl, resetUrls] = useUrls();\n  return /* @__PURE__ */React64.createElement(\"div\", {\n    className: \"higlass-title-wrapper\"\n  }, /* @__PURE__ */React64.createElement(TitleInfo, {\n    title: \"HiGlass\",\n    removeGridComponent,\n    theme,\n    isReady,\n    urls\n  }, /* @__PURE__ */React64.createElement(\"div\", {\n    className: \"higlass-lazy-wrapper\",\n    ref: containerRef\n  }, /* @__PURE__ */React64.createElement(HiGlassLazy, {\n    coordinationScopes,\n    theme,\n    hgViewConfig,\n    height\n  }))));\n} // src/components/sets/CellSetSizesPlotSubscriber.js\n\n\nimport React67, { useMemo as useMemo13, useEffect as useEffect21 } from \"react\"; // src/components/sets/CellSetSizesPlot.js\n\nimport React66 from \"react\";\nimport clamp4 from \"lodash/clamp\"; // src/components/vega/VegaPlot.js\n\nimport React65, { Suspense as Suspense2, useMemo as useMemo12 } from \"react\";\nimport { Handler } from \"vega-tooltip\"; // src/components/vega/ReactVega.js\n\nimport { Vega } from \"react-vega\"; // src/components/vega/VegaPlot.js\n\nvar DATASET_NAME = \"table\";\n\nfunction isVega(spec) {\n  return spec.$schema === \"https://vega.github.io/schema/vega/v5.json\";\n}\n\nfunction VegaPlot(props) {\n  const {\n    spec: partialSpec,\n    data,\n    signalListeners\n  } = props;\n\n  const spec = __spreadProps(__spreadValues({}, partialSpec), {\n    data: isVega(partialSpec) ? [{\n      name: DATASET_NAME\n    }, ...partialSpec.data] : {\n      name: DATASET_NAME\n    }\n  });\n\n  const vegaComponent = useMemo12(() => /* @__PURE__ */React65.createElement(Vega, {\n    spec,\n    data: {\n      [DATASET_NAME]: data\n    },\n    signalListeners,\n    tooltip: new Handler().call,\n    renderer: \"canvas\",\n    scaleFactor: 3\n  }), [spec, data, signalListeners]);\n  return spec && data && data.length > 0 ? /* @__PURE__ */React65.createElement(Suspense2, {\n    fallback: /* @__PURE__ */React65.createElement(\"div\", null, \"Loading...\")\n  }, vegaComponent) : null;\n} // src/components/vega/utils.js\n\n\nvar VEGA_THEMES = {\n  dark: {\n    background: null,\n    title: {\n      color: \"#fff\"\n    },\n    style: {\n      \"guide-label\": {\n        fill: \"#fff\"\n      },\n      \"guide-title\": {\n        fill: \"#fff\"\n      }\n    },\n    axis: {\n      domainColor: \"#fff\",\n      gridColor: \"#888\",\n      tickColor: \"#fff\"\n    }\n  },\n  light: {\n    background: null\n  }\n}; // src/components/sets/CellSetSizesPlot.js\n\nfunction CellSetSizesPlot(props) {\n  const {\n    data: rawData,\n    theme,\n    width,\n    height,\n    marginRight = 90,\n    marginBottom = 120,\n    keyLength = 36\n  } = props;\n  const data = rawData.map(d => __spreadProps(__spreadValues({}, d), {\n    keyName: d.key + d.name,\n    colorString: colorArrayToString(d.color)\n  }));\n  const colors = {\n    domain: data.map(d => d.key),\n    range: data.map(d => d.colorString)\n  };\n  const keys = data.map(d => d.keyName);\n  const spec = {\n    mark: {\n      type: \"bar\"\n    },\n    encoding: {\n      x: {\n        field: \"keyName\",\n        type: \"nominal\",\n        axis: {\n          labelExpr: `substring(datum.label, ${keyLength})`\n        },\n        title: \"Cell Set\",\n        sort: keys\n      },\n      y: {\n        field: \"size\",\n        type: \"quantitative\",\n        title: \"Cell Set Size\"\n      },\n      color: {\n        field: \"key\",\n        type: \"nominal\",\n        scale: colors,\n        legend: null\n      },\n      tooltip: {\n        field: \"size\",\n        type: \"quantitative\"\n      }\n    },\n    width: clamp4(width - marginRight, 10, Infinity),\n    height: clamp4(height - marginBottom, 10, Infinity),\n    config: VEGA_THEMES[theme]\n  };\n  return /* @__PURE__ */React66.createElement(VegaPlot, {\n    data,\n    spec\n  });\n} // src/components/sets/CellSetSizesPlotSubscriber.js\n\n\nvar CELL_SET_SIZES_DATA_TYPES = [\"cell-sets\"];\n\nfunction CellSetSizesPlotSubscriber(props) {\n  const {\n    coordinationScopes,\n    removeGridComponent,\n    theme,\n    title: title16 = \"Cell Set Sizes\"\n  } = props;\n  const loaders = useLoaders();\n  const [{\n    dataset,\n    cellSetSelection,\n    cellSetColor,\n    additionalCellSets\n  }, {\n    setCellSetSelection,\n    setCellSetColor\n  }] = useCoordination(COMPONENT_COORDINATION_TYPES.cellSetSizes, coordinationScopes);\n  const [width, height, containerRef] = useGridItemSize();\n  const [urls, addUrl, resetUrls] = useUrls();\n  const [isReady, setItemIsReady, setItemIsNotReady, resetReadyItems] = useReady(CELL_SET_SIZES_DATA_TYPES);\n  useEffect21(() => {\n    resetUrls();\n    resetReadyItems();\n  }, [loaders, dataset]);\n  const [cellSets] = useCellSetsData(loaders, dataset, setItemIsReady, addUrl, true, {\n    setCellSetSelection,\n    setCellSetColor\n  }, {\n    cellSetSelection,\n    cellSetColor\n  });\n  const mergedCellSets = useMemo13(() => mergeCellSets(cellSets, additionalCellSets), [cellSets, additionalCellSets]);\n  const data = useMemo13(() => mergedCellSets && cellSetSelection && cellSetColor ? treeToSetSizesBySetNames(mergedCellSets, cellSetSelection, cellSetColor, theme) : [], [mergedCellSets, cellSetSelection, cellSetColor, theme]);\n  return /* @__PURE__ */React67.createElement(TitleInfo, {\n    title: title16,\n    removeGridComponent,\n    urls,\n    theme,\n    isReady\n  }, /* @__PURE__ */React67.createElement(\"div\", {\n    ref: containerRef,\n    className: \"vega-container\"\n  }, /* @__PURE__ */React67.createElement(CellSetSizesPlot, {\n    data,\n    theme,\n    width,\n    height\n  })));\n} // src/components/higlass/GenomicProfilesSubscriber.js\n\n\nimport React68, { useMemo as useMemo14, useEffect as useEffect22 } from \"react\";\nimport isEqual13 from \"lodash/isEqual\";\nimport { sum as sum2 } from \"d3-array\";\nvar GENOMIC_PROFILES_DATA_TYPES = [\"genomic-profiles\"];\nvar REFERENCE_TILESETS = {\n  hg38: {\n    chromosomes: \"NyITQvZsS_mOFNlz5C2LJg\",\n    genes: \"P0PLbQMwTYGy-5uPIQid7A\"\n  },\n  hg19: {\n    chromosomes: \"N12wVGG9SPiTkk03yUayUw\",\n    genes: \"OHJakQICQD6gTD7skx4EWA\"\n  },\n  mm9: {\n    chromosomes: \"WAVhNHYxQVueq6KulwgWiQ\",\n    genes: \"GUm5aBiLRCyz2PsBea7Yzg\"\n  },\n  mm10: {\n    chromosomes: \"EtrWT0VtScixmsmwFSd7zg\",\n    genes: \"QDutvmyiSrec5nX4pA5WGQ\"\n  }\n};\n\nfunction GenomicProfilesSubscriber(props) {\n  const {\n    coordinationScopes,\n    theme,\n    removeGridComponent,\n    profileTrackUidKey = \"path\",\n    profileTrackNameKey = null,\n    higlassServer = \"https://higlass.io/api/v1\",\n    assembly = \"hg38\",\n    title: title16 = \"Genomic Profiles\"\n  } = props;\n  const [width, height, containerRef] = useGridItemSize();\n  const loaders = useLoaders();\n  const [{\n    dataset,\n    cellSetColor,\n    cellSetSelection\n  }] = useCoordination(COMPONENT_COORDINATION_TYPES.genomicProfiles, coordinationScopes);\n  const [isReady, setItemIsReady, setItemIsNotReady, resetReadyItems] = useReady(GENOMIC_PROFILES_DATA_TYPES);\n  const [urls, addUrl, resetUrls] = useUrls();\n  const [genomicProfilesAttrs] = useGenomicProfilesData(loaders, dataset, setItemIsReady, addUrl, true);\n  const hgViewConfig = useMemo14(() => {\n    if (!genomicProfilesAttrs || urls.length !== 1) {\n      return null;\n    }\n\n    const {\n      url\n    } = urls[0];\n    const foregroundColor = theme === \"dark\" ? \"#C0C0C0\" : \"#000000\";\n    const backgroundColor = theme === \"dark\" ? \"#000000\" : \"#f1f1f1\";\n    const dimColor = theme === \"dark\" ? \"dimgray\" : \"silver\";\n    const referenceTracks = [{\n      type: \"horizontal-chromosome-labels\",\n      server: higlassServer,\n      tilesetUid: REFERENCE_TILESETS[assembly].chromosomes,\n      uid: \"chromosome-labels\",\n      options: {\n        color: foregroundColor,\n        fontSize: 12,\n        fontIsLeftAligned: false,\n        showMousePosition: true,\n        mousePositionColor: foregroundColor\n      },\n      height: 30\n    }, {\n      type: \"horizontal-gene-annotations\",\n      server: higlassServer,\n      tilesetUid: REFERENCE_TILESETS[assembly].genes,\n      uid: \"gene-annotations\",\n      options: {\n        name: \"Gene Annotations (hg38)\",\n        fontSize: 10,\n        labelPosition: \"hidden\",\n        labelLeftMargin: 0,\n        labelRightMargin: 0,\n        labelTopMargin: 0,\n        labelBottomMargin: 0,\n        minHeight: 24,\n        geneAnnotationHeight: 16,\n        geneLabelPosition: \"outside\",\n        geneStrandSpacing: 4,\n        showMousePosition: true,\n        mousePositionColor: foregroundColor,\n        plusStrandColor: foregroundColor,\n        minusStrandColor: foregroundColor,\n        labelColor: \"black\",\n        labelBackgroundColor: backgroundColor,\n        trackBorderWidth: 0,\n        trackBorderColor: \"black\"\n      },\n      height: 70\n    }];\n    const referenceTracksHeightSum = sum2(referenceTracks.map(t => t.height));\n    const profileTracksHeightSum = height - referenceTracksHeightSum - 10;\n    const profileTrackHeight = profileTracksHeightSum / genomicProfilesAttrs.row_infos.length;\n    const profileTracks = genomicProfilesAttrs.row_infos.map((rowInfo, i) => {\n      var _a2;\n\n      const trackUid = rowInfo[profileTrackUidKey];\n      const isPath = Array.isArray(trackUid);\n      const trackName = profileTrackNameKey ? rowInfo[profileTrackNameKey] : isPath ? trackUid[trackUid.length - 1] : trackUid;\n      const setInSelection = isPath ? cellSetSelection == null ? void 0 : cellSetSelection.find(s => isEqual13(s, trackUid)) : false;\n      const setColor = isPath ? (_a2 = cellSetColor == null ? void 0 : cellSetColor.find(s => isEqual13(s.path, trackUid))) == null ? void 0 : _a2.color : null;\n      const trackUidString = isPath ? trackUid.join(\"__\") : trackUid;\n      const track = {\n        type: \"horizontal-bar\",\n        uid: `bar-track-${trackUidString}`,\n        data: {\n          type: \"zarr-multivec\",\n          url,\n          row: i\n        },\n        options: {\n          name: trackName,\n          showMousePosition: true,\n          mousePositionColor: foregroundColor,\n          labelColor: theme === \"dark\" ? \"white\" : \"black\",\n          labelBackgroundColor: theme === \"dark\" ? \"black\" : \"white\",\n          labelShowAssembly: false\n        },\n        height: profileTrackHeight\n      };\n\n      if (setColor && setInSelection) {\n        const c = setColor;\n        track.options.barFillColor = `rgb(${c[0]},${c[1]},${c[2]})`;\n      } else {\n        track.options.barFillColor = dimColor;\n      }\n\n      return track;\n    });\n    const hgView = {\n      tracks: {\n        top: [...referenceTracks, ...profileTracks],\n        left: [],\n        center: [],\n        right: [],\n        bottom: [],\n        whole: [],\n        gallery: []\n      },\n      layout: {\n        w: 12,\n        h: 12,\n        x: 0,\n        y: 0,\n        static: false\n      }\n    };\n    return hgView;\n  }, [genomicProfilesAttrs, urls, theme, height, profileTrackUidKey, profileTrackNameKey, cellSetSelection, cellSetColor, higlassServer, assembly]);\n  useEffect22(() => {\n    resetUrls();\n    resetReadyItems();\n  }, [loaders, dataset]);\n  return /* @__PURE__ */React68.createElement(\"div\", {\n    className: \"higlass-title-wrapper\"\n  }, /* @__PURE__ */React68.createElement(TitleInfo, {\n    title: title16,\n    removeGridComponent,\n    theme,\n    isReady,\n    urls\n  }, /* @__PURE__ */React68.createElement(\"div\", {\n    className: \"higlass-lazy-wrapper\",\n    ref: containerRef\n  }, hgViewConfig ? /* @__PURE__ */React68.createElement(HiGlassLazy, {\n    coordinationScopes,\n    theme,\n    hgViewConfig,\n    height\n  }) : null)));\n} // src/components/genes/ExpressionHistogramSubscriber.js\n\n\nimport React70, { useMemo as useMemo15, useEffect as useEffect23 } from \"react\";\nimport { sum as sum3 } from \"d3-array\"; // src/components/genes/ExpressionHistogram.js\n\nimport React69 from \"react\";\nimport clamp5 from \"lodash/clamp\";\n\nfunction ExpressionHistogram(props) {\n  const {\n    geneSelection,\n    data,\n    theme,\n    width,\n    height,\n    marginRight = 90,\n    marginBottom = 50\n  } = props;\n  const xTitle = geneSelection && geneSelection.length >= 1 ? \"Normalized Expression Value\" : \"Total Normalized Transcript Count\";\n  const spec = {\n    mark: {\n      type: \"bar\"\n    },\n    encoding: {\n      x: {\n        field: \"value\",\n        type: \"quantitative\",\n        bin: {\n          maxbins: 50\n        },\n        title: xTitle\n      },\n      y: {\n        type: \"quantitative\",\n        aggregate: \"count\",\n        title: \"Number of Cells\"\n      },\n      color: {\n        value: \"gray\"\n      }\n    },\n    width: clamp5(width - marginRight, 10, Infinity),\n    height: clamp5(height - marginBottom, 10, Infinity),\n    config: VEGA_THEMES[theme]\n  };\n  return /* @__PURE__ */React69.createElement(VegaPlot, {\n    data,\n    spec\n  });\n} // src/components/genes/ExpressionHistogramSubscriber.js\n\n\nvar EXPRESSION_HISTOGRAM_DATA_TYPES = [\"expression-matrix\"];\n\nfunction ExpressionHistogramSubscriber(props) {\n  const {\n    coordinationScopes,\n    removeGridComponent,\n    theme\n  } = props;\n  const loaders = useLoaders();\n  const [{\n    dataset,\n    geneSelection\n  }] = useCoordination(COMPONENT_COORDINATION_TYPES.expressionHistogram, coordinationScopes);\n  const [width, height, containerRef] = useGridItemSize();\n  const [urls, addUrl, resetUrls] = useUrls();\n  const [isReady, setItemIsReady, setItemIsNotReady, resetReadyItems] = useReady(EXPRESSION_HISTOGRAM_DATA_TYPES);\n  useEffect23(() => {\n    resetUrls();\n    resetReadyItems();\n  }, [loaders, dataset]);\n  const [expressionMatrix] = useExpressionMatrixData(loaders, dataset, setItemIsReady, addUrl, true);\n  const [expressionData] = useGeneSelection(loaders, dataset, setItemIsReady, false, geneSelection, setItemIsNotReady);\n  const firstGeneSelected = geneSelection && geneSelection.length >= 1 ? geneSelection[0] : null;\n  const data = useMemo15(() => {\n    if (firstGeneSelected && expressionMatrix && expressionData) {\n      return Array.from(expressionData[0]).map((_, index) => {\n        const value = expressionData[0][index];\n        const normValue = value * 100 / 255;\n        return {\n          value: normValue,\n          gene: firstGeneSelected\n        };\n      });\n    }\n\n    if (expressionMatrix) {\n      const numGenes = expressionMatrix.cols.length;\n      return expressionMatrix.rows.map((cellId, cellIndex) => {\n        const values = expressionMatrix.matrix.subarray(cellIndex * numGenes, (cellIndex + 1) * numGenes);\n        const sumValue = sum3(values) * 100 / 255;\n        return {\n          value: sumValue,\n          gene: null\n        };\n      });\n    }\n\n    return null;\n  }, [expressionMatrix, firstGeneSelected, expressionData]);\n  return /* @__PURE__ */React70.createElement(TitleInfo, {\n    title: `Expression Histogram${firstGeneSelected ? ` (${firstGeneSelected})` : \"\"}`,\n    removeGridComponent,\n    urls,\n    theme,\n    isReady\n  }, /* @__PURE__ */React70.createElement(\"div\", {\n    ref: containerRef,\n    className: \"vega-container\"\n  }, /* @__PURE__ */React70.createElement(ExpressionHistogram, {\n    geneSelection,\n    data,\n    theme,\n    width,\n    height\n  })));\n} // src/components/sets/CellSetExpressionPlotSubscriber.js\n\n\nimport React73, { useEffect as useEffect24, useReducer as useReducer2 } from \"react\"; // src/components/sets/hooks.js\n\nimport { useMemo as useMemo16 } from \"react\";\n\nfunction useExpressionByCellSet(expressionData, expressionDataAttrs, cellSets, additionalCellSets, geneSelection, cellSetSelection, cellSetColor, useGeneExpressionTransform, theme) {\n  const mergedCellSets = useMemo16(() => mergeCellSets(cellSets, additionalCellSets), [cellSets, additionalCellSets]);\n  const [expressionArr, expressionMax] = useMemo16(() => {\n    if (mergedCellSets && cellSetSelection && geneSelection && geneSelection.length >= 1 && expressionData) {\n      const cellObjects = treeToObjectsBySetNames(mergedCellSets, cellSetSelection, cellSetColor, theme);\n      const firstGeneSelected = geneSelection[0];\n      let exprMax = -Infinity;\n      const cellIndices = {};\n\n      for (let i = 0; i < expressionDataAttrs.rows.length; i += 1) {\n        cellIndices[expressionDataAttrs.rows[i]] = i;\n      }\n\n      const exprValues = cellObjects.map(cell => {\n        const cellIndex = cellIndices[cell.obsId];\n        const value = expressionData[0][cellIndex];\n        const normValue = value * 100 / 255;\n        const transformedValue = useGeneExpressionTransform ? Math.log(1 + normValue) : normValue;\n        exprMax = Math.max(transformedValue, exprMax);\n        return {\n          value: transformedValue,\n          gene: firstGeneSelected,\n          set: cell.name\n        };\n      });\n      return [exprValues, exprMax];\n    }\n\n    return [null, null];\n  }, [expressionData, expressionDataAttrs, geneSelection, theme, mergedCellSets, cellSetSelection, cellSetColor, useGeneExpressionTransform]);\n  const setArr = useMemo16(() => mergedCellSets && cellSetSelection && cellSetColor ? treeToSetSizesBySetNames(mergedCellSets, cellSetSelection, cellSetColor, theme) : [], [mergedCellSets, cellSetSelection, cellSetColor, theme]);\n  return [expressionArr, setArr, expressionMax];\n} // src/components/sets/CellSetExpressionPlotOptions.js\n\n\nimport React71 from \"react\";\nimport Checkbox6 from \"@material-ui/core/Checkbox\";\nimport TableCell5 from \"@material-ui/core/TableCell\";\nimport TableRow5 from \"@material-ui/core/TableRow\";\n\nfunction CellSetExpressionPlotOptions(props) {\n  const {\n    toggleGeneExpressionTransform,\n    useGeneExpressionTransform\n  } = props;\n  const classes = useStyles2();\n\n  function handleGeneExpressionTransformChange() {\n    toggleGeneExpressionTransform();\n  }\n\n  return /* @__PURE__ */React71.createElement(OptionsContainer, null, /* @__PURE__ */React71.createElement(TableRow5, null, /* @__PURE__ */React71.createElement(TableCell5, {\n    className: classes.labelCell\n  }, \"Log Transform\"), /* @__PURE__ */React71.createElement(TableCell5, {\n    className: classes.inputCell\n  }, /* @__PURE__ */React71.createElement(Checkbox6, {\n    className: classes.checkbox,\n    checked: Boolean(useGeneExpressionTransform),\n    onChange: handleGeneExpressionTransformChange,\n    name: \"scatterplot-option-cell-set-labels\",\n    color: \"default\"\n  }))));\n} // src/components/sets/CellSetExpressionPlot.js\n\n\nimport React72 from \"react\";\nimport clamp6 from \"lodash/clamp\";\n\nfunction CellSetExpressionPlot(props) {\n  const {\n    domainMax = 100,\n    colors,\n    data,\n    theme,\n    width,\n    height,\n    marginRight = 90,\n    marginBottom,\n    useGeneExpressionTransform\n  } = props;\n  const maxCharactersForLabel = data.reduce((acc, val) => {\n    acc = acc === void 0 || val.set.length > acc ? val.set.length : acc;\n    return acc;\n  }, 0);\n  const autoMarginBottom = marginBottom || 30 + Math.sqrt(maxCharactersForLabel / 2) * 30;\n  const colorScale = {\n    domain: colors.map(d => d.name),\n    range: colors.map(d => colorArrayToString(d.color))\n  };\n  const plotWidth = clamp6(width - marginRight, 10, Infinity);\n  const plotHeight = clamp6(height - autoMarginBottom, 10, Infinity);\n  const numBands = colors.length;\n  const bandWidth = plotWidth / numBands;\n  const rectColor = theme === \"dark\" ? \"white\" : \"black\";\n  const spec = {\n    $schema: \"https://vega.github.io/schema/vega/v5.json\",\n    description: \"A violin plot showing distributions of expression levels for selected cell sets.\",\n    width: plotWidth,\n    height: plotHeight,\n    config: __spreadProps(__spreadValues({}, VEGA_THEMES[theme]), {\n      axisBand: {\n        bandPosition: 1,\n        tickExtra: true,\n        tickOffset: 0\n      }\n    }),\n    signals: [{\n      name: \"bandWidth\",\n      value: bandWidth\n    }, {\n      name: \"width\",\n      value: plotWidth\n    }, {\n      name: \"height\",\n      value: plotHeight\n    }, {\n      name: \"trim\",\n      value: true\n    }],\n    data: [{\n      name: \"density\",\n      source: DATASET_NAME,\n      transform: [{\n        type: \"kde\",\n        field: \"value\",\n        groupby: [\"set\"],\n        bandwidth: 0,\n        extent: [0, domainMax]\n      }]\n    }, {\n      name: \"stats\",\n      source: DATASET_NAME,\n      transform: [{\n        type: \"aggregate\",\n        groupby: [\"set\"],\n        fields: [\"value\", \"value\", \"value\"],\n        ops: [\"q1\", \"median\", \"q3\"],\n        as: [\"q1\", \"median\", \"q3\"]\n      }]\n    }],\n    scales: [{\n      name: \"layout\",\n      type: \"band\",\n      range: \"width\",\n      domain: {\n        data: DATASET_NAME,\n        field: \"set\"\n      }\n    }, {\n      name: \"yscale\",\n      type: \"linear\",\n      range: \"height\",\n      domain: [0, domainMax]\n    }, {\n      name: \"wscale\",\n      type: \"linear\",\n      range: [0, {\n        signal: \"bandWidth\"\n      }],\n      domain: {\n        data: \"density\",\n        field: \"density\"\n      }\n    }, {\n      name: \"wscaleReversed\",\n      type: \"linear\",\n      reverse: true,\n      range: [0, {\n        signal: \"bandWidth\"\n      }],\n      domain: {\n        data: \"density\",\n        field: \"density\"\n      }\n    }, __spreadValues({\n      name: \"color\",\n      type: \"ordinal\"\n    }, colorScale)],\n    axes: [{\n      orient: \"left\",\n      scale: \"yscale\",\n      zindex: 1,\n      title: useGeneExpressionTransform ? [\"Log-Transformed\", \"Normalized Expression Values\"] : \"Normalized Expression Values\"\n    }, {\n      orient: \"bottom\",\n      scale: \"layout\",\n      tickCount: 5,\n      zindex: 1,\n      title: \"Cell Set\",\n      labelAngle: -45,\n      labelAlign: \"right\"\n    }],\n    marks: [{\n      type: \"group\",\n      from: {\n        facet: {\n          data: \"density\",\n          name: \"violin\",\n          groupby: \"set\"\n        }\n      },\n      encode: {\n        enter: {\n          xc: {\n            scale: \"layout\",\n            field: \"set\",\n            band: 0.5\n          },\n          width: {\n            signal: \"bandWidth\"\n          },\n          height: {\n            signal: \"height\"\n          }\n        }\n      },\n      data: [{\n        name: \"summary\",\n        source: \"stats\",\n        transform: [{\n          type: \"filter\",\n          expr: \"datum.set === parent.set\"\n        }]\n      }],\n      marks: [{\n        type: \"area\",\n        orient: \"vertical\",\n        from: {\n          data: \"violin\"\n        },\n        encode: {\n          enter: {\n            fill: {\n              scale: \"color\",\n              field: {\n                parent: \"set\"\n              }\n            }\n          },\n          update: {\n            width: {\n              scale: \"wscale\",\n              field: \"density\"\n            },\n            xc: {\n              signal: \"bandWidth / 2\"\n            },\n            y2: {\n              scale: \"yscale\",\n              field: \"value\"\n            },\n            y: {\n              scale: \"yscale\",\n              value: 0\n            }\n          }\n        }\n      }, {\n        type: \"area\",\n        orient: \"vertical\",\n        from: {\n          data: \"violin\"\n        },\n        encode: {\n          enter: {\n            fill: {\n              scale: \"color\",\n              field: {\n                parent: \"set\"\n              }\n            }\n          },\n          update: {\n            width: {\n              scale: \"wscaleReversed\",\n              field: \"density\"\n            },\n            xc: {\n              signal: \"bandWidth\"\n            },\n            y2: {\n              scale: \"yscale\",\n              field: \"value\"\n            },\n            y: {\n              scale: \"yscale\",\n              value: 0\n            }\n          }\n        }\n      }, {\n        type: \"rect\",\n        from: {\n          data: \"summary\"\n        },\n        encode: {\n          enter: {\n            fill: {\n              value: rectColor\n            },\n            width: {\n              value: 2\n            }\n          },\n          update: {\n            y: {\n              scale: \"yscale\",\n              field: \"q1\"\n            },\n            y2: {\n              scale: \"yscale\",\n              field: \"q3\"\n            },\n            xc: {\n              signal: \"bandWidth / 2\"\n            }\n          }\n        }\n      }, {\n        type: \"rect\",\n        from: {\n          data: \"summary\"\n        },\n        encode: {\n          enter: {\n            fill: {\n              value: rectColor\n            },\n            height: {\n              value: 2\n            },\n            width: {\n              value: 8\n            }\n          },\n          update: {\n            y: {\n              scale: \"yscale\",\n              field: \"median\"\n            },\n            xc: {\n              signal: \"bandWidth / 2\"\n            }\n          }\n        }\n      }]\n    }]\n  };\n  return /* @__PURE__ */React72.createElement(VegaPlot, {\n    data,\n    spec\n  });\n} // src/components/sets/CellSetExpressionPlotSubscriber.js\n\n\nvar CELL_SET_EXPRESSION_DATA_TYPES = [\"cell-sets\", \"expression-matrix\"];\n\nfunction CellSetExpressionPlotSubscriber(props) {\n  const {\n    coordinationScopes,\n    removeGridComponent,\n    theme\n  } = props;\n  const loaders = useLoaders();\n  const [{\n    dataset,\n    geneSelection,\n    geneExpressionTransform,\n    cellSetSelection,\n    cellSetColor,\n    additionalCellSets\n  }, {\n    setGeneExpressionTransform\n  }] = useCoordination(COMPONENT_COORDINATION_TYPES.cellSetExpression, coordinationScopes);\n  const [width, height, containerRef] = useGridItemSize();\n  const [urls, addUrl, resetUrls] = useUrls();\n  const [isReady, setItemIsReady, setItemIsNotReady, resetReadyItems] = useReady(CELL_SET_EXPRESSION_DATA_TYPES);\n  const [useGeneExpressionTransform, toggleGeneExpressionTransform] = useReducer2(v => {\n    const newValue = !v;\n    setGeneExpressionTransform(newValue ? \"log1p\" : null);\n    return newValue;\n  }, geneExpressionTransform);\n  useEffect24(() => {\n    resetUrls();\n    resetReadyItems();\n  }, [loaders, dataset]);\n  const [expressionData] = useGeneSelection(loaders, dataset, setItemIsReady, false, geneSelection, setItemIsNotReady);\n  const [attrs] = useExpressionAttrs(loaders, dataset, setItemIsReady, addUrl, false);\n  const [cellSets] = useCellSetsData(loaders, dataset, setItemIsReady, addUrl, true);\n  const [expressionArr, setArr, expressionMax] = useExpressionByCellSet(expressionData, attrs, cellSets, additionalCellSets, geneSelection, cellSetSelection, cellSetColor, useGeneExpressionTransform, theme);\n  const firstGeneSelected = geneSelection && geneSelection.length >= 1 ? geneSelection[0] : null;\n  return /* @__PURE__ */React73.createElement(TitleInfo, {\n    title: `Expression by Cell Set${firstGeneSelected ? ` (${firstGeneSelected})` : \"\"}`,\n    removeGridComponent,\n    urls,\n    theme,\n    isReady,\n    options: /* @__PURE__ */React73.createElement(CellSetExpressionPlotOptions, {\n      useGeneExpressionTransform,\n      toggleGeneExpressionTransform\n    })\n  }, /* @__PURE__ */React73.createElement(\"div\", {\n    ref: containerRef,\n    className: \"vega-container\"\n  }, expressionArr ? /* @__PURE__ */React73.createElement(CellSetExpressionPlot, {\n    domainMax: expressionMax,\n    colors: setArr,\n    data: expressionArr,\n    theme,\n    width,\n    height,\n    useGeneExpressionTransform\n  }) : /* @__PURE__ */React73.createElement(\"span\", null, \"Select a gene.\")));\n} // src/app/component-registry.js\n\n\nvar registry = {\n  description: DescriptionSubscriber,\n  status: StatusSubscriber,\n  genes: GenesSubscriber,\n  cellSets: CellSetsManagerSubscriber,\n  scatterplot: ScatterplotSubscriber,\n  spatial: SpatialSubscriber,\n  heatmap: HeatmapSubscriber,\n  layerController: LayerControllerSubscriber_default,\n  cellSetSizes: CellSetSizesPlotSubscriber,\n  expressionHistogram: ExpressionHistogramSubscriber,\n  genomicProfiles: GenomicProfilesSubscriber,\n  cellSetExpression: CellSetExpressionPlotSubscriber,\n  higlass: HiGlassSubscriber\n};\n\nfunction getComponent(name2) {\n  const component = registry[name2];\n\n  if (component === void 0) {\n    throw new Error(`Could not find definition for \"${name2}\" in registry.`);\n  }\n\n  return registry[name2];\n} // src/app/view-config-utils.js\n\n\nfunction getExistingScopesForCoordinationType(config, coordinationType) {\n  var _a2;\n\n  const spaceScopes = Object.keys(((_a2 = config == null ? void 0 : config.coordinationSpace) == null ? void 0 : _a2[coordinationType]) || {});\n  const componentScopes = config.layout.map(c => {\n    var _a3;\n\n    return (_a3 = c.coordinationScopes) == null ? void 0 : _a3[coordinationType];\n  });\n  return Array.from(new Set([...spaceScopes, ...componentScopes]));\n}\n\nfunction coordinateComponentsTogether(config, coordinationType, scopeValue) {\n  var _a2;\n\n  const scopeName = getNextScope(getExistingScopesForCoordinationType(config, coordinationType));\n\n  const newConfig = __spreadProps(__spreadValues({}, config), {\n    coordinationSpace: __spreadProps(__spreadValues({}, config.coordinationSpace), {\n      [coordinationType]: __spreadProps(__spreadValues({}, (_a2 = config == null ? void 0 : config.coordinationSpace) == null ? void 0 : _a2[coordinationType]), {\n        [scopeName]: scopeValue\n      })\n    }),\n    layout: config.layout.map(component => {\n      var _a3;\n\n      return __spreadProps(__spreadValues({}, component), {\n        coordinationScopes: __spreadValues(__spreadValues({}, component.coordinationScopes), COMPONENT_COORDINATION_TYPES[component.component].includes(coordinationType) && !((_a3 = component.coordinationScopes) == null ? void 0 : _a3[coordinationType]) ? {\n          [coordinationType]: scopeName\n        } : {})\n      });\n    })\n  });\n\n  return newConfig;\n}\n\nfunction coordinateComponentsIndependent(config, coordinationType, scopeValue) {\n  const newConfig = __spreadProps(__spreadValues({}, config), {\n    layout: [...config.layout]\n  });\n\n  const newScopes = {};\n  newConfig.layout.forEach((component, i) => {\n    var _a2;\n\n    if (COMPONENT_COORDINATION_TYPES[component.component].includes(coordinationType) && !((_a2 = component.coordinationScopes) == null ? void 0 : _a2[coordinationType])) {\n      const scopeName = getNextScope([...getExistingScopesForCoordinationType(config, coordinationType), ...Object.keys(newScopes)]);\n      newScopes[scopeName] = scopeValue;\n      newConfig.layout[i] = __spreadProps(__spreadValues({}, component), {\n        coordinationScopes: __spreadProps(__spreadValues({}, component.coordinationScopes), {\n          [coordinationType]: scopeName\n        })\n      });\n    }\n  });\n  newConfig.coordinationSpace = __spreadProps(__spreadValues({}, newConfig.coordinationSpace), {\n    [coordinationType]: __spreadValues(__spreadValues({}, newConfig.coordinationSpace[coordinationType]), newScopes)\n  });\n  return newConfig;\n}\n\nfunction initializeAuto(config) {\n  let newConfig = config;\n  const {\n    layout,\n    datasets\n  } = newConfig;\n  Object.values(COORDINATION_TYPES).forEach(coordinationType => {\n    const requiresCoordination = !layout.every(c => {\n      var _a2;\n\n      return !COMPONENT_COORDINATION_TYPES[c.component].includes(coordinationType) || ((_a2 = c.coordinationScopes) == null ? void 0 : _a2[coordinationType]);\n    });\n\n    if (requiresCoordination) {\n      let defaultValue = DEFAULT_COORDINATION_VALUES[coordinationType];\n\n      if (coordinationType === \"dataset\" && datasets.length >= 1) {\n        defaultValue = datasets[0].uid;\n      }\n\n      if (AUTO_INDEPENDENT_COORDINATION_TYPES.includes(coordinationType)) {\n        newConfig = coordinateComponentsIndependent(newConfig, coordinationType, defaultValue);\n      } else {\n        newConfig = coordinateComponentsTogether(newConfig, coordinationType, defaultValue);\n      }\n    }\n  });\n  return newConfig;\n}\n\nfunction initialize(config) {\n  if (config.initStrategy === \"auto\") {\n    return initializeAuto(config);\n  }\n\n  return config;\n}\n\nfunction upgradeAndValidate(oldConfig) {\n  let nextConfig = oldConfig;\n  let fromVersion;\n  let upgradeFunction;\n  let validateFunction;\n\n  do {\n    fromVersion = nextConfig.version;\n\n    if (!Object.keys(SCHEMA_HANDLERS).includes(fromVersion)) {\n      return [{\n        title: \"Config validation failed\",\n        preformatted: \"Unknown config version.\"\n      }, false];\n    }\n\n    [validateFunction, upgradeFunction] = SCHEMA_HANDLERS[fromVersion];\n    const validLegacy = validateFunction(nextConfig);\n\n    if (!validLegacy) {\n      const failureReason = JSON.stringify(validateFunction.errors, null, 2);\n      return [{\n        title: \"Config validation failed\",\n        preformatted: failureReason\n      }, false];\n    }\n\n    if (upgradeFunction) {\n      nextConfig = upgradeFunction(nextConfig);\n    }\n  } while (upgradeFunction);\n\n  console.groupCollapsed(`\\u{1F684} Vitessce (${package_default.version}) view configuration`);\n  console.info(`data:,${JSON.stringify(nextConfig)}`);\n  console.info(JSON.stringify(nextConfig, null, 2));\n  console.groupEnd();\n  return [nextConfig, true];\n} // src/app/Vitessce.js\n\n\nvar generateClassName = createGenerateClassName({\n  disableGlobal: true\n});\n\nfunction Vitessce(props) {\n  const {\n    config,\n    rowHeight,\n    height,\n    theme,\n    onWarn,\n    onConfigChange,\n    onLoaderChange,\n    validateOnConfigChange = false\n  } = props;\n  const [configOrWarning, success] = useMemo17(() => {\n    if (!config) {\n      return [{\n        title: \"No such dataset\",\n        unformatted: \"The dataset configuration could not be found.\"\n      }, false];\n    }\n\n    if (!config.version) {\n      return [{\n        title: \"Missing version\",\n        unformatted: \"The dataset configuration is missing a version, preventing validation.\"\n      }, false];\n    }\n\n    const [upgradedConfig, upgradeSuccess] = upgradeAndValidate(config);\n\n    if (upgradeSuccess) {\n      const initializedConfig = initialize(upgradedConfig);\n      return [initializedConfig, true];\n    }\n\n    return [upgradedConfig, false];\n  }, [config]);\n  useEffect25(() => {\n    if (success && !isEqual14(configOrWarning, config) && onConfigChange) {\n      onConfigChange(configOrWarning);\n    }\n  }, [success, config, configOrWarning, onConfigChange]);\n  return success ? /* @__PURE__ */React74.createElement(StylesProvider, {\n    generateClassName\n  }, /* @__PURE__ */React74.createElement(ThemeProvider, {\n    theme: muiTheme[theme]\n  }, /* @__PURE__ */React74.createElement(ViewConfigProvider, {\n    createStore: createViewConfigStore\n  }, /* @__PURE__ */React74.createElement(AuxiliaryProvider, {\n    createStore: createAuxiliaryStore\n  }, /* @__PURE__ */React74.createElement(VitessceGrid, {\n    config: configOrWarning,\n    getComponent,\n    rowHeight,\n    height,\n    theme\n  }), /* @__PURE__ */React74.createElement(CallbackPublisher, {\n    onWarn,\n    onConfigChange,\n    onLoaderChange,\n    validateOnConfigChange\n  }))))) : /* @__PURE__ */React74.createElement(Warning, __spreadValues({\n    theme\n  }, configOrWarning));\n} // src/app/app.js\n\n\nfunction AwaitResponse(props) {\n  const {\n    response,\n    theme\n  } = props;\n  const [isLoading, setIsLoading] = useState21(true);\n  const responseRef = useRef11();\n  useEffect26(() => {\n    response.then(c => {\n      responseRef.current = c;\n      setIsLoading(false);\n    });\n  }, [response]);\n  return !isLoading ? React75.createElement(responseRef.current) : /* @__PURE__ */React75.createElement(Warning, {\n    title: \"Loading...\",\n    theme\n  });\n}\n\nfunction preformattedDetails(response) {\n  return `\n    ok: ${response.ok}\n    status: ${response.status}\n    statusText: ${response.statusText}\n    redirected: ${response.redirected}\n    type: ${response.type}\n    url: ${response.url}`;\n}\n\nfunction checkResponse(response, theme, debug) {\n  if (!response.ok) {\n    return Promise.resolve(() => /* @__PURE__ */React75.createElement(Warning, {\n      title: \"Fetch response not OK\",\n      preformatted: preformattedDetails(response),\n      theme\n    }));\n  }\n\n  return response.text().then(text => {\n    try {\n      const config = JSON.parse(text);\n      return Promise.resolve(() => /* @__PURE__ */React75.createElement(Vitessce, {\n        config,\n        theme,\n        onConfigChange: debug ? console.log : void 0,\n        validateOnConfigChange: debug\n      }));\n    } catch (e) {\n      return Promise.resolve(() => /* @__PURE__ */React75.createElement(Warning, {\n        title: \"Error parsing JSON\",\n        preformatted: preformattedDetails(response),\n        unformatted: `${e.message}: ${text}`,\n        theme\n      }));\n    }\n  });\n}\n\nfunction validateTheme(theme) {\n  return [\"light\", \"dark\"].includes(theme) ? theme : \"dark\";\n}\n\nfunction createApp(params) {\n  const {\n    rowHeight = null,\n    showBetaHeader = false\n  } = params;\n  const urlParams = new URLSearchParams(window.location.search);\n  const datasetId = urlParams.get(\"dataset\");\n  const debug = urlParams.get(\"debug\") === \"true\";\n  const datasetUrl = urlParams.get(\"url\");\n  const showAll = urlParams.get(\"show\") === \"all\";\n  const theme = validateTheme(urlParams.get(\"theme\"));\n\n  if (datasetId) {\n    const config = getConfig(datasetId);\n    return /* @__PURE__ */React75.createElement(Vitessce, {\n      config,\n      rowHeight,\n      theme,\n      onConfigChange: debug ? console.log : void 0,\n      validateOnConfigChange: debug\n    });\n  }\n\n  if (datasetUrl) {\n    const responsePromise = fetch(datasetUrl).then(response => checkResponse(response, theme, debug)).catch(error => Promise.resolve(() => /* @__PURE__ */React75.createElement(Warning, {\n      title: \"Error fetching\",\n      unformatted: error.message,\n      theme\n    })));\n    return /* @__PURE__ */React75.createElement(AwaitResponse, {\n      response: responsePromise,\n      theme\n    });\n  }\n\n  const configs2 = listConfigs(showAll);\n  return /* @__PURE__ */React75.createElement(Welcome, {\n    configs: configs2,\n    theme,\n    showBetaHeader\n  });\n} // src/app/export-utils.js\n\n\nimport Bowser from \"bowser\";\nimport { compressToEncodedURIComponent, decompressFromEncodedURIComponent } from \"lz-string\";\nvar CURRENT_VERSION = \"0.0.1\";\nvar VITESSCE_CONF_QUERY_STRING = \"vitessce_conf\";\nvar VERSION_QUERY_STRING = \"vitessce_conf_version\";\nvar LENGTH_QUERY_STRING = \"vitessce_conf_length\";\n\nfunction sniffBrowser() {\n  const {\n    browser\n  } = Bowser.parse(window.navigator.userAgent);\n  return browser.name;\n}\n\nvar MAX_BROWSER_URL_LENGTHS = {\n  Chrome: 32779,\n  \"Internet Explorer\": 2047,\n  Edge: 2047,\n  Safari: 65e3,\n  Firefox: 65e3\n};\nvar CompressedConfLengthError = class {\n  constructor(message) {\n    this.message = message;\n  }\n\n};\n\nfunction encodeConfInUrl(_ref112) {\n  let {\n    conf,\n    onOverMaximumUrlLength = () => {}\n  } = _ref112;\n  const compressedConf = compressToEncodedURIComponent(JSON.stringify(conf));\n  const newParams = `${LENGTH_QUERY_STRING}=${compressedConf.length}&${VERSION_QUERY_STRING}=${CURRENT_VERSION}&${VITESSCE_CONF_QUERY_STRING}=${compressedConf}`;\n  const browser = sniffBrowser();\n  const maxLength = MAX_BROWSER_URL_LENGTHS[browser];\n\n  if (newParams.length > maxLength) {\n    const willWorkOn = Object.entries(MAX_BROWSER_URL_LENGTHS).filter(entry => entry[1] > newParams.length).map(entry => entry[0]);\n    const message = `Configuration is ${compressedConf.length} characters; max URL for ${browser} is ${maxLength}: it will work on ${willWorkOn.join(\", \") || \"no browser\"}.`;\n    console.error(message);\n    onOverMaximumUrlLength({\n      message,\n      willWorkOn\n    });\n  }\n\n  return newParams;\n}\n\nfunction decodeURLParamsToConf(queryString) {\n  const params = new URLSearchParams(queryString.replace(\"#\", \"&\"));\n  const compressedConfString = params.get(VITESSCE_CONF_QUERY_STRING);\n  const expectedConfLength = Number(params.get(LENGTH_QUERY_STRING));\n\n  if (expectedConfLength !== compressedConfString.length) {\n    throw new CompressedConfLengthError(`Compressed conf length (${compressedConfString.length}) != expected (${expectedConfLength}). URL truncated?`);\n  }\n\n  const version2 = params.get(VERSION_QUERY_STRING);\n\n  if (version2 === CURRENT_VERSION) {\n    const conf = JSON.parse(decompressFromEncodedURIComponent(compressedConfString));\n    return conf;\n  }\n\n  throw new Error(\"Unrecognized URL Param Version\");\n} // src/api/VitessceConfig.js\n\n\nvar VitessceConfigDatasetFile = class {\n  constructor(url, dataType, fileType) {\n    this.file = {\n      url,\n      type: dataType,\n      fileType\n    };\n  }\n\n  toJSON() {\n    return this.file;\n  }\n\n};\nvar VitessceConfigDataset = class {\n  constructor(uid, name2, description2) {\n    this.dataset = {\n      uid,\n      name: name2,\n      description: description2,\n      files: []\n    };\n  }\n\n  addFile(url, dataType, fileType) {\n    this.dataset.files.push(new VitessceConfigDatasetFile(url, dataType, fileType));\n    return this;\n  }\n\n  toJSON() {\n    return __spreadProps(__spreadValues({}, this.dataset), {\n      files: this.dataset.files.map(f => f.toJSON())\n    });\n  }\n\n};\nvar VitessceConfigView = class {\n  constructor(component, coordinationScopes, x, y, w, h) {\n    this.view = {\n      component,\n      coordinationScopes,\n      x,\n      y,\n      w,\n      h\n    };\n  }\n\n  useCoordination() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    const cScopes = args;\n    cScopes.forEach(cScope => {\n      this.view.coordinationScopes[cScope.cType] = cScope.cScope;\n    });\n    return this;\n  }\n\n  setXYWH(x, y, w, h) {\n    this.view.x = x;\n    this.view.y = y;\n    this.view.w = w;\n    this.view.h = h;\n  }\n\n  toJSON() {\n    return this.view;\n  }\n\n};\nvar VitessceConfigViewHConcat = class {\n  constructor(views) {\n    this.views = views;\n  }\n\n};\nvar VitessceConfigViewVConcat = class {\n  constructor(views) {\n    this.views = views;\n  }\n\n};\n\nfunction hconcat() {\n  for (var _len2 = arguments.length, views = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n    views[_key2] = arguments[_key2];\n  }\n\n  const vcvhc = new VitessceConfigViewHConcat(views);\n  return vcvhc;\n}\n\nfunction vconcat() {\n  for (var _len3 = arguments.length, views = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n    views[_key3] = arguments[_key3];\n  }\n\n  const vcvvc = new VitessceConfigViewVConcat(views);\n  return vcvvc;\n}\n\nvar VitessceConfigCoordinationScope = class {\n  constructor(cType, cScope) {\n    this.cType = cType;\n    this.cScope = cScope;\n    this.cValue = null;\n  }\n\n  setValue(cValue) {\n    this.cValue = cValue;\n    return this;\n  }\n\n};\nvar VitessceConfig = class {\n  constructor() {\n    let name2 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : void 0;\n    let description2 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : void 0;\n    this.config = {\n      version: \"1.0.0\",\n      name: name2,\n      description: description2,\n      datasets: [],\n      coordinationSpace: {},\n      layout: [],\n      initStrategy: \"auto\"\n    };\n  }\n\n  addDataset() {\n    let name2 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : void 0;\n    let description2 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : void 0;\n    let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : void 0;\n    const {\n      uid\n    } = options || {};\n    const prevDatasetUids = this.config.datasets.map(d => d.dataset.uid);\n    const nextUid = uid || getNextScope(prevDatasetUids);\n    const newDataset = new VitessceConfigDataset(nextUid, name2, description2);\n    this.config.datasets.push(newDataset);\n    const [newScope] = this.addCoordination(COORDINATION_TYPES.DATASET);\n    newScope.setValue(nextUid);\n    return newDataset;\n  }\n\n  addView(dataset, component, options) {\n    const {\n      x = 0,\n      y = 0,\n      w = 1,\n      h = 1,\n      mapping = null\n    } = options || {};\n    const datasetMatches = this.config.coordinationSpace[COORDINATION_TYPES.DATASET] ? Object.entries(this.config.coordinationSpace[COORDINATION_TYPES.DATASET]).filter(_ref113 => {\n      let [scopeName, datasetScope2] = _ref113;\n      return datasetScope2.cValue === dataset.dataset.uid;\n    }).map(_ref114 => {\n      let [scopeName] = _ref114;\n      return scopeName;\n    }) : [];\n    let datasetScope;\n\n    if (datasetMatches.length === 1) {\n      [datasetScope] = datasetMatches;\n    } else {\n      throw new Error(\"No coordination scope matching the dataset parameter could be found in the coordination space.\");\n    }\n\n    const coordinationScopes = {\n      [COORDINATION_TYPES.DATASET]: datasetScope\n    };\n    const newView = new VitessceConfigView(component, coordinationScopes, x, y, w, h);\n\n    if (mapping) {\n      const [etScope] = this.addCoordination(COORDINATION_TYPES.EMBEDDING_TYPE);\n      etScope.setValue(mapping);\n      newView.useCoordination(etScope);\n    }\n\n    this.config.layout.push(newView);\n    return newView;\n  }\n\n  addCoordination() {\n    for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n      args[_key4] = arguments[_key4];\n    }\n\n    const cTypes = args;\n    const result = [];\n    cTypes.forEach(cType => {\n      const prevScopes = this.config.coordinationSpace[cType] ? Object.keys(this.config.coordinationSpace[cType]) : [];\n      const scope = new VitessceConfigCoordinationScope(cType, getNextScope(prevScopes));\n\n      if (!this.config.coordinationSpace[scope.cType]) {\n        this.config.coordinationSpace[scope.cType] = {};\n      }\n\n      this.config.coordinationSpace[scope.cType][scope.cScope] = scope;\n      result.push(scope);\n    });\n    return result;\n  }\n\n  linkViews(views, cTypes) {\n    let cValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n    const cScopes = this.addCoordination(...cTypes);\n    views.forEach(view => {\n      cScopes.forEach(cScope => {\n        view.useCoordination(cScope);\n      });\n    });\n\n    if (Array.isArray(cValues) && cValues.length === cTypes.length) {\n      cScopes.forEach((cScope, i) => {\n        cScope.setValue(cValues[i]);\n      });\n    }\n\n    return this;\n  }\n\n  layout(viewConcat) {\n    function layoutAux(obj, xMin, xMax, yMin, yMax) {\n      const w = xMax - xMin;\n      const h = yMax - yMin;\n\n      if (obj instanceof VitessceConfigView) {\n        obj.setXYWH(xMin, yMin, w, h);\n      } else if (obj instanceof VitessceConfigViewHConcat) {\n        const {\n          views\n        } = obj;\n        const numViews = views.length;\n        views.forEach((view, i) => {\n          layoutAux(view, xMin + w / numViews * i, xMin + w / numViews * (i + 1), yMin, yMax);\n        });\n      } else if (obj instanceof VitessceConfigViewVConcat) {\n        const {\n          views\n        } = obj;\n        const numViews = views.length;\n        views.forEach((view, i) => {\n          layoutAux(view, xMin, xMax, yMin + h / numViews * i, yMin + h / numViews * (i + 1));\n        });\n      }\n    }\n\n    layoutAux(viewConcat, 0, 12, 0, 12);\n    return this;\n  }\n\n  toJSON() {\n    return __spreadProps(__spreadValues({}, this.config), {\n      datasets: this.config.datasets.map(d => d.toJSON()),\n      coordinationSpace: fromEntries(Object.entries(this.config.coordinationSpace).map(_ref115 => {\n        let [cType, cScopes] = _ref115;\n        return [cType, fromEntries(Object.entries(cScopes).map(_ref116 => {\n          let [cScopeName, cScope] = _ref116;\n          return [cScopeName, cScope.cValue];\n        }))];\n      })),\n      layout: this.config.layout.map(c => c.toJSON())\n    });\n  }\n\n  static fromJSON(config) {\n    const {\n      name: name2,\n      description: description2\n    } = config;\n    const vc = new VitessceConfig(name2, description2);\n    config.datasets.forEach(d => {\n      const newDataset = vc.addDataset(d.name, d.description, {\n        uid: d.uid\n      });\n      d.files.forEach(f => {\n        newDataset.addFile(f.url, f.type, f.fileType);\n      });\n    });\n    Object.keys(config.coordinationSpace).forEach(cType => {\n      if (cType !== COORDINATION_TYPES.DATASET) {\n        const cObj = config.coordinationSpace[cType];\n        vc.config.coordinationSpace[cType] = {};\n        Object.entries(cObj).forEach(_ref117 => {\n          let [cScopeName, cScopeValue] = _ref117;\n          const scope = new VitessceConfigCoordinationScope(cType, cScopeName);\n          scope.setValue(cScopeValue);\n          vc.config.coordinationSpace[cType][cScopeName] = scope;\n        });\n      }\n    });\n    config.layout.forEach(c => {\n      const newView = new VitessceConfigView(c.component, c.coordinationScopes, c.x, c.y, c.w, c.h);\n      vc.config.layout.push(newView);\n    });\n    return vc;\n  }\n\n};\nexport { Heatmap_default as Heatmap, Scatterplot_default as Scatterplot, Spatial_default as Spatial, Vitessce, VitessceConfig, VitessceGrid, createApp, decodeURLParamsToConf, encodeConfInUrl, hconcat, vconcat };","map":{"version":3,"sources":["/Users/chunfu/IdeaProjects/spatial-visual/node_modules/vitessce/dist/esm/index.js"],"names":["__defProp","Object","defineProperty","__defProps","defineProperties","__getOwnPropDescs","getOwnPropertyDescriptors","__getOwnPropSymbols","getOwnPropertySymbols","__hasOwnProp","prototype","hasOwnProperty","__propIsEnum","propertyIsEnumerable","__pow","Math","pow","__defNormalProp","obj","key","value","enumerable","configurable","writable","__spreadValues","a","b","prop","call","__spreadProps","__require","require","x","Error","__objRest","source","exclude","target","indexOf","__publicField","__async","__this","__arguments","generator","Promise","resolve","reject","fulfilled","step","next","e","rejected","throw","done","then","apply","React14","useEffect","useEffect5","useState","useState7","useCallback","useCallback5","useMemo","useMemo5","React3","useState2","makeStyles","makeStyles2","CloudDownloadIcon","MenuItem","IconButton2","Link","ArrowDropDownIcon","ArrowDropUpIcon","SettingsIcon","CloseIcon","TOOLTIP_ANCESTOR","CARD","PRIMARY_CARD","SECONDARY_CARD","BLACK_CARD","SCROLL_CARD","VITESSCE_CONTAINER","React","CircularProgress","LoadingIndicator","createElement","className","React2","useRef","useRef3","Paper","Popper","IconButton","MenuList","ClickAwayListener","Fade","useRef2","useCallback2","useMemo2","debounce","create","createContext","shallow","fromEntries","iterable","reduce","val","assign","range","length","Array","keys","pluralize","singular","plural","count","capitalize","word","charAt","toUpperCase","slice","getNextScope","prevScopes","chars","nextCharIndices","r","forEach","charIndex","unshift","increment","i","push","join","nextScope","includes","getSourceFromLoader","loader","level","data","isArray","isRgb","shape","dtype","labels","channelSize","Provider","ViewConfigProviderLocal","useStore","useViewConfigStoreLocal","useStoreApi","useViewConfigStoreApiLocal","ViewConfigProvider","useViewConfigStore","useViewConfigStoreApi","AuxiliaryProviderLocal","useAuxiliaryStoreLocal","AuxiliaryProvider","useAuxiliaryStore","createViewConfigStore","set","viewConfig","loaders","setViewConfig","setLoaders","setCoordinationValue","parameter","scope","state","coordinationSpace","removeComponent","newLayout","layout","splice","changeLayout","newComponentProps","newProps","useComponentLayout","component","scopes","coordinationScopes","filter","l","every","createAuxiliaryStore","auxiliaryStore","useHoverStore","componentHover","setComponentHover","useWarnStore","warning","setWarning","useViewInfoStore","viewInfo","setComponentViewInfo","uuid","useGridSizeStore","resizeCount","incrementResizeCount","useCoordination","parameters","values","map","setters","setterName","setterFunc","AUXILIARY_COORDINATION_TYPES_MAP","spatialRasterLayers","mapCoordinationScopes","newCoordinationScopes","newCoordinationTypes","coordinationType","mapParameters","Boolean","flat","useAuxiliaryCoordination","mappedCoordinationScopes","mappedParameters","useLoaders","useLayout","_a2","useRemoveComponent","useChangeLayout","useSetLoaders","useSetViewConfig","viewConfigStoreApi","setViewConfigRef","getState","current","useComponentHover","useSetComponentHover","useWarning","useSetWarning","useComponentViewInfo","useSetComponentViewInfo","setViewInfoRef","useGridResize","useEmitGridResize","getWindowDimensions","innerWidth","width","innerHeight","height","window","useVitessceContainer","ref","closest","useWindowDimensions","windowDimensions","setWindowDimensions","handleResize","onResizeDebounced","trailing","addEventListener","removeEventListener","useGridItemSize","containerRef","setHeight","setWidth","onWindowResize","container","containerRect","getBoundingClientRect","useDeckCanvasSize","deckRef","canvas","deck","canvasRect","useReady","supportedItems","items2","waiting","setWaiting","setItemIsReady","readyItem","waitingItems","nextWaitingItems","item","console","log","JSON","stringify","setItemIsNotReady","notReadyItem","resetReadyItems","isReady","useUrls","urls","setUrls","addUrl","url","name2","prev","name","resetUrls","useClosestVitessceContainerSize","clientHeight","componentHeight","clientWidth","componentWidth","useExpressionValueGetter","attrs","expressionData","cellIdMap","result","rows","getExpressionValue","entry","cellId","cellIndex","createMuiTheme","grey","styles","paper","maxHeight","overflow","position","left","top","span","textAlign","paddingLeft","paddingRight","muiTheme","dark","palette","type","primary","secondary","primaryBackground","primaryBackgroundHighlight","primaryBackgroundInput","primaryBackgroundDim","primaryBackgroundLight","primaryForeground","primaryForegroundDim","primaryForegroundActive","secondaryBackground","secondaryBackgroundDim","secondaryForeground","props","MuiButtonBase","disableRipple","light","MuiSpan","children","classes","PopperMenu","buttonIcon","open","setOpen","buttonClassName","anchorRef","handleClick","handleClose","id","getTooltipContainer","onClick","size","anchorEl","onClose","placement","transition","TransitionProps","onClickAway","timeout","elevation","useStyles","theme","iconButton","border","marginLeft","background","color","borderRadius","backgroundColor","marginRight","verticalAlign","downloadLink","SettingsIconWithArrow","Fragment","PlotOptions","options","CloudDownloadIconWithArrow","DownloadOptions","dense","underline","href","rel","ClosePaneButton","removeGridComponent","title","TitleInfo","title16","info","isScroll","isSpatial","childClassName","React4","COORDINATE_SYSTEM","$schema","$id","definitions","stringArray","items","stringProbabilityTupleArray","additionalItems","oneOf","minimum","maximum","colorArray","minItems","maxItems","treeNodeLeaf","additionalProperties","required","properties","$ref","treeNodeNonLeaf","treeNode","dataset","version","enum","datatype","tree","treeNodeLeafProbabilistic","treeNodeNonLeafProbabilistic","treeNodeProbabilistic","cell_sets_schema_default","$schema2","$id2","title2","definitions2","type2","groupName","setName","setColor","obsId","predictionScore","cell_sets_tabular_schema_default","FILE_EXTENSION_JSON","MIME_TYPE_JSON","FILE_EXTENSION_TABULAR","MIME_TYPE_TABULAR","SEPARATOR_TABULAR","NA_VALUE_TABULAR","SETS_DATATYPE_CELL","HIERARCHICAL_SCHEMAS","cell","latestVersion","schema","TABULAR_SCHEMAS","makeCellStatusMessage","cellInfoFactors","entries","factor","cellLayerDefaultProps","cells","updateStatus","setCellHighlight","coordinateSystem","CARTESIAN","pickable","autoHighlight","stroked","filled","getElevation","onHover","object","cellInfo","factors","DEFAULT_DARK_COLOR","DEFAULT_LIGHT_COLOR","getDefaultColor","PALETTE","VIEWER_PALETTE","COLORMAP_OPTIONS","DEFAULT_GL_OPTIONS","webgl2","createDefaultUpdateCellsHover","componentName","hoverInfo","warn","createDefaultUpdateGenesHover","geneId","createDefaultUpdateViewInfo","copyUint8Array","arr","newBuffer","ArrayBuffer","buffer","byteLength","newArr","Uint8Array","getNextNumberedNodeName","nodes","prefix","find","n","setCellSelection","cellSelection","additionalCellSets","cellSetColor","setCellSetSelection","setAdditionalCellSets","setCellSetColor","setCellColorEncoding","CELL_SELECTIONS_LEVEL_ZERO_NAME","selectionsLevelZeroNode","nextAdditionalCellSets","nextName","colorIndex","d","nextPath","path","mergeCellSets","cellSets","createWarningComponent","message","asEsModule","__esModule","default","formatBytes","bytes","decimals","k","dm","sizes","floor","parseFloat","toFixed","getStatsForResolution","resolution","depth","depthDownsampled","max","totalBytes","canLoadResolution","_b2","_c","maxHeapSize","performance","memory","jsHeapSizeLimit","maxSize","useState4","useEffect2","equal2","AbstractLoaderError","constructor","warnInConsole","LoaderValidationError","datasetType","datasetFileType","datasetUrl","reason","LoaderNotFoundError","COORDINATE_SYSTEM2","Layer","project32","picking","CompositeLayer","OrthographicView","Controller","OrbitView","Matrix4","GL","TileLayer","Model","Geometry","Texture2D","isWebGL2","Texture3D","hasFeature","FEATURES","BitmapLayer","BitmapLayer$1","PolygonLayer","LineLayer","TextLayer","quickselect","Plane","React5","PureComponent","useState3","useMemo3","DeckGL","equal","fromUrl","fromBlob","parser","KeyError","openGroup","BoundsCheckError","HTTPStore","fsColormap1","fsColormap2","fs1","fs2","vs1","vs2","fs$3","channels$1","defines","SAMPLER_TYPE","COLORMAP_FUNCTION","fs","fs$2","lens","MAX_COLOR_INTENSITY","DEFAULT_COLOR_OFF","MAX_CHANNELS","DEFAULT_FONT_FAMILY","DTYPE_VALUES","Uint8","format","R8UI","dataFormat","RED_INTEGER","UNSIGNED_BYTE","sampler","Uint16","R16UI","UNSIGNED_SHORT","Uint32","R32UI","UNSIGNED_INT","Float32","R32F","RED","FLOAT","Int8","R8I","BYTE","Int16","R16I","SHORT","Int32","R32I","INT","Float64","cast","Float32Array","COLORMAPS","RENDERING_MODES","RENDERING_MODES2","range2","len","padWithDefault","defaultValue","padWidth","getDtypeValues","valid","padColorsAndWindows","contrastLimits","colors","channelsVisible","domain","lengths","newColors","c","maxSliderValue","newContrastLimits","slider","padSize","paddedColors","paddedContrastLimits","paddedColorsAndWindows","acc","concat","onPointer","layer","viewportId","lensRadius","setState","unprojectLensBounds","mousePosition","context","layerView","viewManager","views","view","viewState","viewport","makeViewport","containsPixel","offsetMousePosition","y","mousePositionBounds","bounds","unproject","getPhysicalSizeScalingMatrix","z","meta","physicalSizes","min","ratio","scale","identity","SHADER_MODULES","fscmap","vs","validateWebGL2Filter","gl","interpolation","canShowFloat","TEXTURE_FLOAT","canShowLinear","TEXTURE_FILTER_LINEAR_FLOAT","LINEAR","NEAREST","getRenderingAttrs$1","isLinear","LUMINANCE","shaderModule","defaultProps$8","compare","channelData","opacity","colormap","isLensOn","lensSelection","lensBorderColor","lensBorderRadius","transparentColor","XRLayer","getShaders","modules","initializeState","pixelStorei","UNPACK_ALIGNMENT","PACK_ALIGNMENT","attributeManager","getAttributeManager","add","positions","DOUBLE","fp64","use64bitPositions","update","calculatePositions","noAlloc","numInstances","Float64Array","finalizeState","textures","tex","delete","updateState","oldProps","changeFlags","extensionsChanged","model","_getModel","invalidateAll","loadChannelTextures","invalidate","geometry","drawMode","TRIANGLE_FAN","vertexCount","attributes","texCoords","isInstanced","draw","uniforms","numTextures","t","leftMouseBound","bottomMouseBound","rightMouseBound","topMouseBound","bottom","right","leftMouseBoundScaled","bottomMouseBoundScaled","rightMouseBoundScaled","topMouseBoundScaled","setUniforms","majorLensAxis","minorLensAxis","lensCenter","useTransparentColor","channel0","channel1","channel2","channel3","channel4","channel5","dataToTexture","mipmaps","TEXTURE_MIN_FILTER","TEXTURE_MAG_FILTER","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","layerName","defaultProps","PHOTOMETRIC_INTERPRETATIONS","WhiteIsZero","BlackIsZero","RGB","Palette","TransparencyMask","CMYK","YCbCr","CIELab","ICCLab","defaultProps$7","getPhotometricInterpretationShader","photometricInterpretation","transparentColorInHook","transparentColorVector","String","error","getTransparentColor","BitmapLayerWrapper","photometricInterpretationShader","TRIANGLES","inject","args","renderLayers","image","getChannelStats","Infinity","max2","total","mean","sumSquared","sd","mid","firstQuartileLocation","thirdQuartileLocation","median","q1","q3","cutoffArr","cutoffPercentile","topCutoffLocation","bottomCutoffLocation","ensureArray","intToRgba","int","Number","isInteger","DataView","setInt32","from","isInterleaved","lastDimSize","getLabels","dimOrder","toLowerCase","split","reverse","getDims","lookup","Map","index","get","getImageSize","interleaved","prevPowerOf2","log2","SIGNAL_ABORTED","renderSubLayers","bbox","tile","maxZoom","some","v","base","tileSize","tileId","defaultProps$6","MultiscaleImageLayerBase","_updateTileset","tileset","_viewport","defaultProps$5","selections","getRaster","onViewportLoad","ImageLayer","eventManager","on","pointermove","pointerleave","wheel","abortController","abort","loaderChanged","selectionsChanged","AbortController","signal","selection","dataPromises","all","rasters","raster","catch","getPickingInfo","sourceLayer","defaultProps$4","maxRequests","refinementStrategy","excludeBackground","MultiscaleImageLayer","onTileError","modelMatrix","getTileData","_0","round","getTile","config","tiles","err","tiledLayer","zoomOffset","getScale","extent","minZoom","updateTriggers","lowestResolution","implementsGetRaster","layerModelMatrix","clone","baseLayer","visible","layers","defaultProps$3","getRasterSize","boundingBox","boundingBoxColor","boundingBoxOutlineWidth","viewportOutlineColor","viewportOutlineWidth","overviewScale","zoom","OverviewLayer","overview","boundingBoxOutline","getPolygon","f","getLineColor","getLineWidth","viewportOutline","makeBoundingBox","getDefaultInitialViewState","viewSize","zoomBackOff","use3d","physicalSizeScalingMatrix","loaderInitialViewState","transformPoint","getPosition","viewLength","yCoord","xLeftCoord","defaultProps$2","unit","ScaleBarLayer","unit2","barLength","barHeight","numUnits","lengthBar","getSourcePosition","getTargetPosition","getWidth","getColor","tickBoundsLeft","tickBoundsRight","textLayer","text","replace","getSize","fontFamily","sizeUnits","sizeScale","characterSet","fs$1","channels","RENDERING_MODES_BLEND","MAX_INTENSITY_PROJECTION","_BEFORE_RENDER","_RENDER","_AFTER_RENDER","MIN_INTENSITY_PROJECTION","ADDITIVE","RENDERING_MODES_COLORMAP","CUBE_STRIP","NUM_PLANES_DEFAULT","defaultProps$1","xSlice","ySlice","zSlice","clippingPlanes","renderingMode","resolutionMatrix","getRenderingAttrs","removeExtraColormapFunctionsFromShader","discardColormaps","discardRegex","RegExp","channelsModules","XR3DLayer","NUM_PLANES","loadTexture","TRIANGLE_STRIP","scaleMatrix","viewMatrix","viewMatrixInverse","projectionMatrix","invertedScaleMatrix","invert","invertedResolutionMatrix","paddedClippingPlanes","p","transform","normals","plane","normal","distances","distance","eye_pos","proj","volume0","volume1","volume2","volume3","volume4","volume5","texture","TEXTURE_WRAP_R","getVolume","arguments","onUpdate","downsampleDepth","rasterSize","TypedArray","globalThis","volumeData","fill","_","depthSelection","rasterData","volIndex","rasterIndex","getTextLayer","useProgressIndicator","useWebGL1Warning","VolumeLayer","clearState","progress","resolutionChanged","totalRequests","volumePromises","volumes","volume","CULL_FACE","CULL_FACE_MODE","FRONT","DEPTH_TEST","blendFunc","SRC_ALPHA","ONE","blend","VIV_PROXY_KEY","OFFSETS_PROXY_KEY","checkProxies","tiff","isProxy","proxyFlag","createOffsetsProxy","offsets","ifdRequests","offset","parseFileDirectoryAt","getImage","Reflect","Proxy","encodedJs","blob","Blob","atob","WorkerWrapper","objURL","URL","webkitURL","createObjectURL","Worker","revokeObjectURL","_a","_b","defaultPoolSize","navigator","hardwareConcurrency","Pool","workers","idleWorkers","waitQueue","decoder","w","decode","fileDirectory","currentWorker","waitForWorker","onmessage","event","finishTask","onerror","postMessage","idleWorker","pop","waiter","promise","destroy","terminate","PARSER_OPTIONS","attributeNamePrefix","attrNodeName","parseNodeValue","parseAttributeValue","ignoreAttributes","parse","str","fromString","res","OME","Image","img","Channels","Pixels","Channel","attr","Color","AquisitionDate","Description","Description2","SizeX","SizeY","Type","SizeZ","SizeT","SizeC","TiffPixelSource","indexer","pool","_indexer","_readRasters","_getTileExtent","x0","y0","window2","interleave","readRasters","aborted","zoomLevelHeight","zoomLevelWidth","maxXTileCoord","maxYTileCoord","getOmeLegacyIndexer","rootMeta","imgMeta","ifdIndexer","getOmeIFDIndexer","sel","pyramidLevel","pyramidIndex","getOmeSubIFDIndexer","ifdCache","baseImage","SubIFDs","has","subIfdOffset","ifd","geoKeyDirectory","dataView","littleEndian","cache","DimensionOrder","DTYPE_LOOKUP$1","uint8","uint16","uint32","float","double","int8","int16","int32","getOmePixelSourceMeta","dims","Interleaved","getShape","s","PhysicalSizeX","PhysicalSizeY","PhysicalSizeXUnit","PhysicalSizeYUnit","PhysicalSizeZ","PhysicalSizeZUnit","guessTileSize$1","tileWidth","getTileWidth","tileHeight","getTileHeight","load$2","firstImage","ImageDescription","PhotometricInterpretation","omexml","levels","pyramidIndexer","metadata","loadOmeTiff","opts","headers","cacheSize","loadMultiscales","store","grp","rootAttrs","asObject","paths","datasets","multiscales","path2","getItem","guessTileSize","yChunk","xChunk","chunks","getIndexer","DTYPE_LOOKUP","u1","u2","u4","f4","f8","i1","i2","i4","ZarrPixelSource","_data","xChunkSize","_xIndex","yChunkSize","_readChunks","suffix","_chunkIndex","_getSlices","xStart","xStop","yStart","yStop","getRaw","getRawChunk","storeOptions","load","pyramid","loadOmeZarr","GLOBAL_LABELS","DEFAULT_RASTER_DOMAIN_TYPE","DEFAULT_RASTER_LAYER_PROPS","domainType","DEFAULT_MOLECULES_LAYER","radius","DEFAULT_CELLS_LAYER","DEFAULT_NEIGHBORHOODS_LAYER","COORDINATION_TYPES","DATASET","EMBEDDING_TYPE","EMBEDDING_ZOOM","EMBEDDING_ROTATION","EMBEDDING_TARGET_X","EMBEDDING_TARGET_Y","EMBEDDING_TARGET_Z","EMBEDDING_CELL_SET_POLYGONS_VISIBLE","EMBEDDING_CELL_SET_LABELS_VISIBLE","EMBEDDING_CELL_SET_LABEL_SIZE","EMBEDDING_CELL_RADIUS","EMBEDDING_CELL_OPACITY","EMBEDDING_CELL_RADIUS_MODE","EMBEDDING_CELL_OPACITY_MODE","SPATIAL_ZOOM","SPATIAL_ROTATION","SPATIAL_TARGET_X","SPATIAL_TARGET_Y","SPATIAL_TARGET_Z","SPATIAL_ROTATION_X","SPATIAL_ROTATION_Y","SPATIAL_ROTATION_Z","SPATIAL_ROTATION_ORBIT","SPATIAL_ORBIT_AXIS","SPATIAL_AXIS_FIXED","HEATMAP_ZOOM_X","HEATMAP_ZOOM_Y","HEATMAP_TARGET_X","HEATMAP_TARGET_Y","CELL_FILTER","CELL_HIGHLIGHT","CELL_SET_SELECTION","CELL_SET_HIGHLIGHT","CELL_SET_COLOR","GENE_FILTER","GENE_HIGHLIGHT","GENE_SELECTION","GENE_EXPRESSION_COLORMAP","GENE_EXPRESSION_TRANSFORM","GENE_EXPRESSION_COLORMAP_RANGE","CELL_COLOR_ENCODING","SPATIAL_RASTER_LAYERS","SPATIAL_CELLS_LAYER","SPATIAL_MOLECULES_LAYER","SPATIAL_NEIGHBORHOODS_LAYER","GENOMIC_ZOOM_X","GENOMIC_ZOOM_Y","GENOMIC_TARGET_X","GENOMIC_TARGET_Y","ADDITIONAL_CELL_SETS","MOLECULE_HIGHLIGHT","DEFAULT_COORDINATION_VALUES","AUTO_INDEPENDENT_COORDINATION_TYPES","COMPONENT_COORDINATION_TYPES","scatterplot","spatial","heatmap","cellSetSizes","cellSetExpression","status","genes","expressionHistogram","layerController","higlass","genomicProfiles","description","initCoordinationSpace","initialValues","initialValue","shouldInit","useDescription","description2","setDescription","useCellsData","isRequired","coordinationSetters","initialCoordinationValues","setCells","cellsCount","setCellsCount","payload","coordinationValues","coordinationValuesOrDefault","spatialCellsLayer","useCellSetsData","setCellSets","useExpressionMatrixData","expressionMatrix","setExpressionMatrix","cols","matrix","useGeneSelection","geneData","setGeneData","implementsGeneSelection","loadGeneSelection","expressionDataForSelection","geneIndex","numGenes","numCells","useExpressionAttrs","setAttrs","implementsLoadAttrs","loadAttrs","useMoleculesData","molecules","setMolecules","moleculesCount","setMoleculesCount","locationsCount","setLocationsCount","spatialMoleculesLayer","useNeighborhoodsData","neighborhoods","setNeighborhoods","spatialNeighborhoodsLayer","useRasterData","setRaster","imageLayerLoaders","setImageLayerLoaders","imageLayerMeta","setImageLayerMeta","nextImageLoaders","nextImageMeta","useGenomicProfilesData","genomicProfilesAttrs","setGenomicProfilesAttrs","uuidv4","isNil","isEqual2","range3","featureCollection","turfFeatureCollection","point","turfPoint","centroid","concaveman","tinycolor","isEqual","callbackOnKeyPress","callback","preventDefault","colorArrayToString","rgbArray","g","toHexString","colorStringToArray","colorString","colorObj","toRgb","getLevelTooltipText","subs","j","repeat","isEqualOrPrefix","targetPath","testPath","tryRenamePath","nextTargetPath","PATH_SEP","pathToKey","generateKey","nodeToSet","currNode","flatMap","nodeToHeight","newLevel","childrenHeights","getNodeLength","curr","nodeFindNodeByNamePath","node","currLevelIndex","currNodeName","foundNodes","child","treeFindNodeByNamePath","currTree","targetNamePath","levelZeroNode","nodeTransform","predicate","transformedPaths","currPath","newPath","nodeTransformAll","newNode","nodeAppendChild","newChild","nodePrependChild","nodeInsertChild","insertIndex","newChildren","treeToUnion","checkedPaths","nodeSets","h","hEl","treeToIntersection","treeToComplement","primaryUnion","el","nodeToLevelDescendantNamePaths","prevPath","stopEarly","treeExport","treeExportLevelZeroNode","nodePath","cellSetColors","nodeWithColors","nPath","nodeColor","treeWithOneLevelZeroNode","treeToExport","nodeName","treeExportSet","setToExport","treeInitialize","nodeToRenderProps","nodeKey","isLeaf","colorMixWithUncertainty","originalColor","mixingColor","treeToCellColorsBySetNames","selectedNamePaths","cellColorsArray","setNamePath","nodeSet","prob","treeToObjectsBySetNames","cellsArray","treeToCellPolygonsBySetNames","mapping","cellSetPolygons","cellPositions","_a3","mappings","points","concavity","hullCoords","centroidCoords","coordinates","hull","treeToSetSizesBySetNames","filterNode","filterPath","treeToExpectedCheckedLevel","lzn","levelZeroPath","levelIndex","levelNodePaths","treesConflict","testCellSets","testPaths","hasConflict","getPaths","getTestPaths","initializeCellSetColor","nextCellSetColor","nodeCountPerTreePerLevel","processNode2","hierarchyLevel","treeIndex","getCellSetPolygons","params","cellSetSelection","schemeRdBu","schemePlasma","rgbSpline","spline","basis","innerBasis","t1","v0","v1","v2","v3","t2","t3","interpolateRgbBasis","interpolateSequentialMulti","range10","interpolateRdBu","interpolatePlasma","getCellColors","cellColorEncoding","expressionDataAttrs","geneExpColormap","cellColor","React6","useRef4","useState5","useCallback3","useMemo4","useEffect3","useReducer","forwardRef","uuidv42","DeckGL2","OrthographicView2","range5","clamp2","isEqual3","COORDINATE_SYSTEM3","CompositeLayer2","TextLayer2","GL2","TILE_SIZE","MIN_ROW_AGG","MAX_ROW_AGG","COLOR_BAR_SIZE","AXIS_LABEL_TEXT_SIZE","AXIS_TITLE_TEXT_SIZE","AXIS_MIN_SIZE","AXIS_MAX_SIZE","AXIS_MARGIN","THEME_TO_TEXT_COLOR","AXIS_FONT_FAMILY","PIXELATED_TEXTURE_PARAMETERS","HeatmapCompositeTextLayer","_renderAxisTopLayers","axisTopLabelData","matrixLeft","matrixWidth","viewWidth","targetX","targetY","axisTopTitle","cellWidth","axisOffsetTop","scaleFactor","showAxisTopLabels","axisLabelTop","getText","getTextAnchor","getAngle","_renderAxisLeftLayers","axisLeftLabelData","matrixTop","matrixHeight","viewHeight","axisLeftTitle","cellHeight","axisOffsetLeft","showAxisLeftLabels","axisLabelLeft","BitmapLayer2","CompositeLayer3","defaultProps2","async","desaturate","tintColor","PixelatedBitmapLayer","textureParameters","GL3","_mergeShaders","project322","picking2","BitmapLayer3","Texture2D2","GLSL_COLORMAPS","GLSL_COLORMAP_DEFAULT","COLORMAP_SHADER_PLACEHOLDER","vertexShader","fragmentShader","defaultProps3","aggSizeX","aggSizeY","colorScaleLo","colorScaleHi","HeatmapBitmapLayer","_getShaders","shaders","extensions","extension","fragmentShaderWithColormap","bitmapTexture","uBitmapTexture","uTextureSize","uAggSize","uColorScaleRange","clamp","range4","layerFilter","startsWith","getAxisSizes","transpose","geneLabelMaxLength","cellLabelMaxLength","mouseToHeatmapPosition","mouseX","mouseY","offsetLeft","offsetTop","numRows","numCols","viewMouseX","viewMouseY","bboxTargetX","bboxTargetY","bboxLeft","bboxTop","zoomedOffsetLeft","zoomedOffsetTop","zoomedViewMouseX","zoomedViewMouseY","zoomedMouseX","zoomedMouseY","rowI","colI","heatmapToMousePosition","minY","maxY","totalHeight","minInViewY","maxInViewY","inViewHeight","normalizedRowY","globalRowY","minX","maxX","totalWidth","minInViewX","maxInViewX","inViewWidth","normalizedRowX","globalRowX","encodedJs2","blob2","heatmap_default","defaultPoolSize2","Pool2","Worker2","process","HeatmapPool","Heatmap","rawViewState","setViewState","expression","cellColors","colormapRange","clearPleaseWait","setGeneHighlight","updateViewInfo","setIsRendering","variablesTitle","observationsTitle","workerPool","tilesRef","dataRef","axisLeftLabels","setAxisLeftLabels","axisTopLabels","setAxisTopLabels","tileIteration","incTileIteration","backlog","setBacklog","newCellOrdering","oldCellOrdering","matrixRight","matrixBottom","xTiles","ceil","yTiles","widthRatio","heightRatio","project","onViewStateChange","nextViewState","nextZoom","nextScaleFactor","minTargetX","maxTargetX","minTargetY","maxTargetY","nextTarget","promises","tileI","tileJ","cellOrdering","process2","currWork","currIndex","heatmapLayers","getLayer","layers2","textLayers","cellColorsTiles","colorBarTileWidthPx","colorBarTileHeightPx","tileData","Uint8ClampedArray","tileY","rValue","gValue","bValue","ImageData","cellColorsLayers","offsetCenter","obsI","varI","varId","controller","getCursor","interactionState","isDragging","glOptions","Heatmap_default","React10","React8","React7","useEffect4","useRef5","useState6","Paper2","Popper2","makeStyles3","styles2","tooltipAnchor","pointerEvents","userSelect","tooltipContent","padding","fontSize","outline","borderCollapse","Tooltip","parentWidth","parentHeight","placementX","setPlacementX","placementY","setPlacementY","flipX","flipY","style","Tooltip2D","parentUuid","sourceUuid","isTooltipVisible","crosshairWidth","React9","TooltipContent","HeatmapTooltipSubscriber","getCellInfo","getGeneInfo","cellHighlight","geneHighlight","cellCoord","geneInfo","geneCoord","React13","useCallback4","debounce2","Slider","TableCell","TableRow","makeStyles4","useStyles2","box","boxSizing","checkbox","minWidth","sliderValueLabel","tableContainer","overflowX","labelCell","inputCell","select","selectRoot","React11","Box","Table","TableBody","TableContainer","OptionsContainer","table","React12","Select","OptionSelect","classesProp","native","disableUnderline","root","HeatmapOptions","geneExpressionColormap","setGeneExpressionColormap","geneExpressionColormapRange","setGeneExpressionColormapRange","handleGeneExpressionColormapChange","handleColormapRangeChange","handleColormapRangeChangeDebounced","htmlFor","onChange","inputProps","cmap","valueLabel","valueLabelDisplay","HEATMAP_DATA_TYPES","HeatmapSubscriber","observationsLabelOverride","observationsLabel","observationsPluralLabelOverride","observationsPluralLabel","variablesLabelOverride","variablesLabel","variablesPluralLabelOverride","variablesPluralLabel","disableTooltip","heatmapZoomX","zoomX","heatmapTargetX","heatmapTargetY","geneSelection","setHeatmapZoomX","setZoomX","setHeatmapZoomY","setZoomY","setHeatmapTargetX","setTargetX","setHeatmapTargetY","setTargetY","isRendering","mergedCellSets","genesCount","selectedCount","setColormapRange","React24","useEffect6","useMemo6","useCallback7","React20","forwardRef2","isEqual5","COORDINATE_SYSTEM5","PolygonLayer2","ScatterplotLayer","ScatterplotLayer2","Matrix44","COORDINATE_SYSTEM4","DataFilterExtension","CompositeLayer4","polygon","turfPolygon","turfPoint2","booleanWithin","booleanContains","booleanOverlap","booleanPointInPolygon","SELECTION_TYPE","EditableGeoJsonLayer","DrawRectangleMode","DrawPolygonByDraggingMode","ViewMode","EDIT_TYPE_ADD","EDIT_TYPE_CLEAR","ClickableDrawRectangleMode","onEdit","editType","ClickableDrawPolygonByDraggingMode","MODE_MAP","RECTANGLE","POLYGON","defaultProps4","selectionType","layerIds","onSelect","EMPTY_DATA","features","LAYER_ID_GEOJSON","PASS_THROUGH_PROPS","SelectionLayer","_selectPolygonObjects","getCellCoords","cellsQuadTree","flippedCoordinates","poly","selectedPolygon","pickingInfos","visit","x1","y1","nodePoints","nodePolygon","nodePolygonContainsSelectedPolygon","nodePolygonWithinSelectedPolygon","nodePolygonOverlapsSelectedPolgyon","mode","inheritedProps","getSubLayerProps","modeConfig","dragToDraw","selectedFeatureIndexes","updatedData","_subLayerProps","guides","pointType","radiusScale","radiusMinPixels","radiusMaxPixels","getRadius","getBaseLayerId","layerId","getSelectionLayers","tool","updateCellsSelection","cellBaseLayerId","editHandlePointRadius","cellIds","cellObj","getTentativeFillColor","getTentativeLineColor","getTentativeLineDashArray","lineWidthMinPixels","lineWidthMaxPixels","getEditHandlePointColor","getEditHandlePointRadius","editHandlePointRadiusScale","editHandlePointRadiusMinPixels","editHandlePointRadiusMaxPixels","shortNumber","isEqual4","Matrix43","divide","GL4","project323","picking3","Texture2D3","isWebGL22","vs3","fs3","padWithDefault2","defaultProps5","hoveredCell","cellColorData","BitmaskLayer","setColorTexture","cellTexHeight","cellTexWidth","expressionTex","colorTex","isExpressionMode","hovered","colorTexHeight","colorTexWidth","uIsExpressionMode","isWebGL2On","Matrix42","getSingleSelectionStats2D","selectionStats","getSingleSelectionStats3D","lowResSource","sizeZ","raster0","rasterMid","rasterTop","stats0","statsMid","statsTop","getSingleSelectionStats","getStats","getMultiSelectionStats","stats","domains","stat","sliders","getPhysicalSizeScalingMatrix2","getBoundingCube","abbreviateNumber","maxLength","maxNaiveDigits","naive","Intl","NumberFormat","maximumSignificantDigits","useGrouping","toExponential","square","getDefaultGlobalSelection","globalIndices","dim","buildDefaultSelection","globalSelection","firstNonGlobalDimension","isInterleaved2","initializeLayerChannels","defaultSelection","channel","getMetaWithTransformMatrices","imageMeta","imageLoaders","sources","_d","_e","_f","translate","minPhysicalSize","_g","_h","_i","hasZPhyscialSize","imageMetaWithTransform","newMeta","toArray","initializeRasterLayersAndChannels","rasterLayers","rasterRenderLayers","usePhysicalSizeScaling","nextImageMetaAndLayers","autoImageLayerDefPromises","loaderCreator","layerIndex","autoImageLayerDefPromise","channels2","isBitmask","globalIndicesOfRenderLayers","imageName","findIndex","autoImageLayerDefs","makeSpatialSubtitle","observationsCount","subobservationsCount","subobservationsLabel","subobservationsPluralLabel","parts","part","getInitialSpatialTargets","useRaster","initialTargetX","initialTargetY","initialTargetZ","initialZoom","zoomBackoff","cellValues","newViewStateZoom","xy","cellCoordinates","xExtent","yExtent","xRange","yRange","getViewExtentFromPolygonExtents","extents","polygonExtentsX","polygonExtentsY","getLayerLoaderTuple","Layer2","renderSubBitmaskLayers","React19","PureComponent2","DeckGL3","OrthographicView3","OrbitView2","React18","SELECTION_TYPE2","SvgNearMe","viewBox","ReactComponent","createElement2","SvgSelectionRectangle","ReactComponent2","createElement3","SvgSelectionLasso","strokeWidth","ReactComponent3","IconButton3","alt","isActive","inactive","active","ToolMenu","setActiveTool","activeTool","visibleTools","pan","selectRectangle","selectLasso","getCursorWithTool","AbstractSpatialOrScatterplot","bind","onInitializeViewInfo","onWebGLInitialized","onToolChange","spatialAxisFixed","onToolChangeProp","getLayers","coordinate","hasBitmask","content","layerZoomScale","dataCoords","coords","hoverData","viewInfoDidUpdate","positionX","positionY","componentDidUpdate","render","layerProps","showCellSelectionTools","cellsLayer","cellsEntries","showPanTool","useDevicePixels","orbitAxis","dragPan","quadtree","createCellsQuadTree","addAll","GL5","LayerExtension","vs4","shader_module_default","defaultProps6","getSelectionState","ScaledExpressionExtension","models","topModel","sideModel","_getModels","getCurrentLayer","isComposite","expressionValue","accessor","divisor","settings","m","extensionName","ScaledExpressionExtension_default","GL6","LayerExtension2","vs5","inject2","shader_module_default2","SelectionExtension","isSelected","instanced","SelectionExtension_default","CELLS_LAYER_ID","MOLECULES_LAYER_ID","NEIGHBORHOODS_LAYER_ID","defaultGetCellCoords","makeDefaultGetCellPolygon","cellEntry","makeDefaultGetCellColors","makeDefaultGetCellIsSelected","cellSelectionSet","Set","Spatial","moleculesEntries","moleculesLayer","neighborhoodsLayer","imageLayers","layerLoaderSelections","randomColorData","random","onUpdateCellsData","onUpdateCellsLayer","onUpdateMoleculesData","onUpdateMoleculesLayer","onUpdateNeighborhoodsData","onUpdateNeighborhoodsLayer","onUpdateImages","createCellsLayer","layerDef","cellFilter","getCellIsSelected","getCellColor","getCellPolygon","onCellClick","lineWidthScale","filteredCellsEntries","flipYTooltip","getFillColor","createMoleculesLayer","setMoleculeHighlight","getMoleculeColor","getMoleculePosition","createNeighborhoodsLayer","getNeighborhoodPolygon","neighborhoodsEntry","neighborhood","neighborhoodsEntries","createSelectionLayers","setCellSelection2","createScaleBarLayer","createImageLayer","rawLayerDef","nextLoaderSelection","prevLoaderSelection","visibilities","layerLoader","createImageLayers","rasterLayersCallbacks","use3dIndex","onUpdateCellColors","onUpdateExpressionData","molecule","prevProps","shallowDiff","propName","forceUpdate","SpatialWrapper","Spatial_default","React22","useCallback6","debounce3","Checkbox","TableCell3","TableRow3","Slider2","makeStyles5","createStyles","React21","TableCell2","TableRow2","CellColorEncodingOption","observationsLabelNice","handleColorEncodingChange","useToggleStyles","cameraLabel","button","ToggleFixedAxisButton","setSpatialAxisFixed","disabled","checked","SpatialOptions","canShowExpressionOptions","canShowColorEncodingOption","canShow3DOptions","React23","SpatialTooltipSubscriber","SPATIAL_DATA_TYPES","SpatialSubscriber","subobservationsLabelOverride","subobservationsPluralLabelOverride","disable3d","globalDisable3d","spatialZoom","spatialTargetX","spatialTargetY","spatialTargetZ","targetZ","spatialRotationX","rotationX","spatialRotationY","rotationY","spatialRotationZ","rotationZ","spatialRotationOrbit","rotationOrbit","spatialOrbitAxis","setSpatialZoom","setZoom","setSpatialTargetX","setSpatialTargetY","setSpatialTargetZ","setTargetZ","setSpatialRotationX","setRotationX","setSpatialRotationOrbit","setRotationOrbit","setSpatialOrbitAxis","setOrbitAxis","setSpatialRasterLayers","setRasterLayers","setSpatialCellsLayer","setCellsLayer","setSpatialMoleculesLayer","setMoleculesLayer","setSpatialNeighborhoodsLayer","setNeighborhoodsLayer","setCellFilter","canPassInCellsLayer","setCellSelectionProp","shiftedExpressionDataForBitmask","maxId","newZoom","newRotationX","newRotationOrbit","newOrbitAxis","subtitle","hasExpressionData","hasCellsData","canLoad3DLayers","React28","useState8","useEffect7","useCallback9","useMemo7","extent2","isEqual6","React25","forwardRef3","PolygonLayer3","TextLayer3","ScatterplotLayer3","forceSimulation","quadtree2","constant","jiggle","forceCollideRects","masses","strength","iterations","xCenter","vx","yCenter","vy","prepare","quad","force","nodeSize","nodeMass","xi","yi","visitAfter","xSize","ySize","xd","abs","yd","sqrt","iterate","initialize","CELLS_LAYER_ID2","LABEL_FONT_FAMILY","NUM_FORCE_SIMULATION_TICKS","LABEL_UPDATE_ZOOM_DELTA","makeDefaultGetCellPosition","available","mappedCell","makeDefaultGetCellCoords","makeDefaultGetCellColors2","Scatterplot","cellSetsForceSimulation","cellSetsLabelPrevZoom","cellSetsLayers","onUpdateCellSetsLayers","getCellPosition","cellRadius","cellOpacity","radiusUnits","createCellSetsLayers","cellSetPolygonsVisible","cellSetLabelsVisible","cellSetLabelSize","wireframe","label","collisionForce","tick","getAlignmentBaseline","fontWeight","onlyViewStateChange","ScatterplotWrapper","Scatterplot_default","React26","ScatterplotTooltipSubscriber","React27","useCallback8","debounce4","Checkbox2","Slider3","TableCell4","TableRow4","ScatterplotOptions","setCellRadius","cellRadiusMode","setCellRadiusMode","setCellOpacity","cellOpacityMode","setCellOpacityMode","setCellSetLabelsVisible","setCellSetLabelSize","setCellSetPolygonsVisible","handleCellRadiusModeChange","handleCellOpacityModeChange","handleRadiusChange","handleOpacityChange","handleLabelVisibilityChange","handleLabelSizeChange","handlePolygonVisibilityChange","OrthographicView4","clamp3","getPointSizeDevicePixels","devicePixelRatio","pointSize","pointScreenSizeMax","pointScreenSizeMin","xAxisRange","yAxisRange","diagonalScreenSize","diagonalAxisRange","diagonalFraction","deviceSize","pointSizeDevicePixels","getPointOpacity","avgFillDensity","N","getBounds","X","Y","X0","Y0","W","H","rho","log10","alpha","pointOpacity","SCATTERPLOT_DATA_TYPES","ScatterplotSubscriber","titleOverride","averageFillDensity","embeddingZoom","embeddingTargetX","embeddingTargetY","embeddingTargetZ","embeddingType","embeddingCellSetPolygonsVisible","embeddingCellSetLabelsVisible","embeddingCellSetLabelSize","embeddingCellRadius","cellRadiusFixed","embeddingCellRadiusMode","embeddingCellOpacity","cellOpacityFixed","embeddingCellOpacityMode","setEmbeddingZoom","setEmbeddingTargetX","setEmbeddingTargetY","setEmbeddingTargetZ","setEmbeddingCellSetPolygonsVisible","setEmbeddingCellSetLabelsVisible","setEmbeddingCellSetLabelSize","setEmbeddingCellRadius","setCellRadiusFixed","setEmbeddingCellRadiusMode","setEmbeddingCellOpacity","setCellOpacityFixed","setEmbeddingCellOpacityMode","dynamicCellRadius","setDynamicCellRadius","dynamicCellOpacity","setDynamicCellOpacity","cellSetPolygonCache","setCellSetPolygonCache","cacheHas","cacheGet","newCellSetPolygons","xE","yE","xR","yR","nextCellOpacityScale","newTargetX","newTargetY","React30","useEffect9","React29","Responsive","WidthProvider","isEqual7","COMPONENT_ID_PREFIX","sum","makeGridLayout","colXs","colLayout","colWs","spec","getMaxRows","layouts","xywh","resolveLayout","breakpoints","components","def","columns","columnXs","columnCount","ResponsiveGridLayout","ResponsiveHeightGridLayout","VitessceGridLayout","getComponent","getComponent2","padding2","margin","margin2","draggableHandle","reactGridLayoutProps","rowHeight","onRemoveComponent","onLayoutChange","onLayoutChangeProp","gridCols","gridLayouts","gridBreakpoints","gridComponents","maxRows","nextC","prevC","parseInt","substring","nextProps","layoutChildren","Component","containerPadding","useState9","useEffect8","useRef6","Ajv","uuidv43","AbstractLoader","type16","requestInit","subscriptions","subscribe","subscriber","token","unsubscribe","publish","AbstractTwoStepLoader","dataSource","LoaderResult","$schema3","$id3","title3","type3","definitions3","coord","positiveFloatValues","patternProperties","stringValues","cells_schema_default","$schema4","$id4","title4","type4","definitions4","patternProperties2","molecules_schema_default","$schema5","$id5","title5","type5","definitions5","patternProperties3","neighborhoods_schema_default","$schema6","$id6","title6","type6","definitions6","dimensions","field","anyOf","isPyramid","omeTiffOffsetsUrl","method","body","credentials","redirect","referrer","integrity","schemaVersion","images","raster_schema_default","typeToSchema","JsonLoader","fileType","validate","compile","failureReason","errors","openArray","MatrixZarrLoader","getJson","loadArr","$schema7","$id7","title7","type7","definitions7","patternProperties4","genes_schema_default","GenesJsonAsMatrixZarrLoader","__super","normalizedFlatMatrix","extent3","range6","$schema8","$id8","title8","type8","definitions8","additionalProperties2","required2","properties2","clusters_schema_default","ClustersJsonAsMatrixZarrLoader","normalizedMatrix","col","normalize2","tNormalizedMatrix","openArray2","initLoader","imageData","metadataUrl","response","fetch","zarrMetadata","json","metaKey","arrMetaKeys","ok","Name","RasterLoader","imagesWithLoaderCreators","autoImageCache","autoImages","autoImageLayers","hexToRgb","hex","exec","OmeZarrLoader","fetchOptions","omero","rdefs","defaultT","defaultZ","start","end","Ajv2","isNil2","dsvFormat","json2csv","tryUpgradeTreeToLatestSchema","itemId","handleImportJSON","importData","handleImportTabular","dsvParser","row","treeToImport","uniqueGroupNames","groupRows","uniqueSetNames","setRows","levelOneNode","handleExportJSON","jsonString","dataString","encodeURIComponent","handleExportTabular","exportData","csvString","fields","delimiter","downloadForUser","fileName","downloadAnchorNode","document","setAttribute","appendChild","click","remove","CellSetsJsonLoader","rawData","upgradedData","newAutoSetSelectionParentName","newAutoSetSelections","newAutoSetColors","InternMap","dataToCellSetsTree","cellNames","cellSetsTree","cellSetIds","levelSets","getNextLevelNames","levelSuffixes","nextLevelNames","sort","localeCompare","getNode","parentLevelPrefixes","currLevelName","childLevelSuffixes","resultNode","shouldBeLeaf","nextLevelName","levelOneNodes","levelOneName","uniqueCellSetIds","clusters","cluster","CellSetsZarrLoader","loadCellSetIds","cellSetZarrLocation","loadObsVariables","loadObsIndex","CellsZarrLoader","loadXy","loadNumeric","loadPoly","loadMappings","coordinationName","loadFactors","factorsObj","openArray3","slice2","extent4","normalize","concatenateColumnVectors","BYTES_PER_ELEMENT","MatrixZarrLoader2","loadFilteredGeneNames","filteredGeneNames","geneFilter","geneFilterZarr","getFilterFn","getFlatArrDecompressed","loadVarIndex","_getFilteredGenes","filterZarr","geneNames","_getGeneIndices","gene","_getNumCells","_getNumGenes","_openSparseArrays","sparseArrays","_loadCSCGeneSelection","indices","indptrArr","indexArr","cellXGeneArr","startRowIndex","endRowIndex","isColumnAllZeros","rowIndices","cellXGeneData","rowIndex","_loadCSRGeneSelection","cellXGene","_loadCSRSparseCellXGene","_sparseMatrix","cellXGeneMatrix","rowStart","rowEnd","_loadCSCSparseCellXGene","colStart","colEnd","loadCellXGene","matrixGeneFilter","_matrixZattrs","encodingType","filteredGenes","numGenesFiltered","cellXGeneMatrixFiltered","shouldNormalize","matrixGeneFilterZarr","anndata_loaders_default","GenomicProfilesZarrLoader","openArray4","range7","HTTPStore2","KeyError2","ZarrDataSource","supportedMethods","buf","TextDecoder","readFloat32FromUint8","Int32Array","HEADER_LENGTH","parseVlenUtf8","dataEnd","output","AnnDataSource","obsPromises","obsPaths","obsPath","getObsCol","obsCol","obsPromise","_loadObsVariable","obs","categories","categoriesValues","obsArr","obsValues","mappedObsValues","parseAndMergeTextBytes","dbytes","mergeBytes","tmp","numRequests","requests","keyPrefix","compressor","dbytesArr","filters","obsIndex","_index","varIndex","DataSourceFetchError","JsonSource","ANNDATA","fileTypeToLoaderAndSource","getSourceAndLoaderFromFileType","getNumRows","bottomY","getRowHeight","containerHeight","effectiveContainerHeight","useRowHeight","initialRowHeight","setContainerHeight","setRowHeight","newRowHeight","createLoaders","configDescription","dataSources","datasetLoaders","files","file","DataSourceClass","LoaderClass","fileId","uid","VitessceGrid","onResize","onResizeStop","React75","useEffect26","useRef11","useState21","urlPrefix","makeLayerNameToConfig","datasetPrefix","linnarssonLayerNames","linnarssonDescription","linnarssonBase","linnarssonBaseNoClusters","driesDescription","driesBase","wangDescription","wangBase","vanderbiltDescription","vanderbiltBase","configs","public","staticLayout","initStrategy","PCA","TSNE","A","UMAP","spatialLayers","vanderbilt","genomicZoomX","genomicZoomY","genomicTargetX","genomicTargetY","hgViewConfig","autocompleteSource","genomePositionSearchBox","autocompleteServer","autocompleteId","chromInfoServer","chromInfoId","chromInfoPath","tracks","tilesetUid","server","labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","minHeight","geneAnnotationHeight","geneLabelPosition","geneStrandSpacing","showMousePosition","mousePositionColor","plusStrandColor","minusStrandColor","labelColor","trackBorderWidth","trackBorderColor","stroke","fontIsLeftAligned","center","contents","labelShowResolution","labelShowAssembly","labelTextOpacity","labelBackgroundColor","labelBackgroundOpacity","colorRange","colorbarBackgroundColor","colorbarBackgroundOpacity","colorbarPosition","heatmapValueScaling","showTooltip","zeroValueColor","scaleStartPercent","scaleEndPercent","transforms","whole","gallery","moved","static","profileTrackUidKey","spatialRotation","heatmapZoomY","cellSetHighlight","moleculeHighlight","listConfigs","showAll","getConfig","React31","note","branch","date","hash","version_default","DatasetList","configs2","aClassName","links","Form","Info","Welcome","showBetaHeader","React32","Warning","preformatted","unformatted","React74","useEffect25","useMemo17","ThemeProvider","StylesProvider","createGenerateClassName","isEqual14","useEffect10","Ajv3","$schema9","$id9","title9","type9","definitions9","additionalProperties3","required3","properties3","config_0_1_0_schema_default","$schema10","$id10","title10","type10","definitions10","embeddingRotation","geneExpressionTransform","annDataCellSets","annDataCells","minProperties","annDataExpressionMatrix","rasterLayer","additionalProperties4","required4","properties4","pattern","config_1_0_0_schema_default","$schema11","$id11","title11","type11","definitions11","additionalProperties5","required5","properties5","config_1_0_1_schema_default","$schema12","$id12","title12","type12","definitions12","additionalProperties6","required6","properties6","config_1_0_2_schema_default","$schema13","$id13","title13","type13","definitions13","additionalProperties7","required7","properties7","config_1_0_3_schema_default","$schema14","$id14","title14","type14","definitions14","additionalProperties8","required8","properties8","config_1_0_4_schema_default","$schema15","$id15","title15","type15","definitions15","additionalProperties9","required9","properties9","config_1_0_5_schema_default","uuidv44","cloneDeep","upgradeReplaceViewProp","prevZScopes","prevTXScopes","prevTYScopes","nextZScope","nextTXScope","nextTYScope","upgradeFrom0_1_0","datasetUid","componentDef","newComponentDef","newScopeValues","newDatasetUid","upgradeFrom1_0_0","replaceLayerType","layerType","isRaster","typedLayers","newLayer","newComponent","replaceCoordinationScope","upgradeFrom1_0_1","newConfig","upgradeFrom1_0_2","disableChannelsIfRgbDetected","upgradeFrom1_0_3","upgradeFrom1_0_4","LATEST_VERSION","SCHEMA_HANDLERS","addSchema","validateViewConfig","CallbackPublisher","onWarn","onConfigChange","onLoaderChange","validateOnConfigChange","React34","useEffect11","useMemo8","React33","metadataRecord","DESCRIPTION_DATA_TYPES","DescriptionSubscriber","descriptionOverride","React36","React35","Status","warnClass","warn2","messages","StatusSubscriber","infos","React39","useEffect14","React38","useEffect13","useState11","React37","useEffect12","useCallback10","useState10","Table2","AutoSizer","uuidv45","union","difference","isEqual8","SelectableTable","hasColorEncoding","idKey","valueKey","allowMultiple","allowUncheck","showTableHead","showTableInputs","testHeight","testWidth","selectedRows","setSelectedRows","onSelectRow","handleInputChange","getDataFromIds","ids","initialSelectedRows","selectedRowData","inputUuid","hiddenInputsClass","rowRenderer","role","column","headerRowRenderer","gridStyle","rowCount","headerHeight","rowGetter","Genes","geneList","setGeneSelection","searchTerm","setSearchTerm","searchResults","setSearchResults","results","handleChange","placeholder","GENES_DATA_TYPES","GenesSubscriber","setGeneFilter","setGeneSelectionAndColorEncoding","newSelection","React51","useEffect16","useState15","useMemo10","isEqual11","author","homepage","license","repository","keywords","main","module","peerDependencies","react","dependencies","ajv","bowser","classnames","clsx","glslify","internmap","lodash","mathjs","tinycolor2","tinyqueue","vega","zarr","zustand","devDependencies","camelcase","concurrently","cypress","dotenv","enzyme","esbuild","eslint","expect","karma","mocha","semver","webpack","resolutions","scripts","prepublishOnly","clean","test","browserslist","production","development","babel","presets","plugins","package_default","React50","useState14","useMemo9","isEqual10","React40","RcTree","classNames","Tree","prefixCls","showIcon","blockNode","checkable","itemHeight","virtual","Tree_default","React45","useState13","TreeNode","RcTreeNode","getDataAndAria","classNames2","range8","isEqual9","React43","useState12","useEffect15","TwitterPicker","React42","React41","useRef7","RcTooltip","HelpTooltip","overlayClassName","spanRef","overlay","trigger","mouseEnterDelay","mouseLeaveDelay","Popover","PopoverMenuListButton","handler","handlerKey","confirm","isConfirming","setIsConfirming","handleOrRequireConfirm","titleWithConfirm","onKeyPress","PopoverMenuList","menuConfig","handleColorChange","rgb","defaultPalette","disableAlpha","triangle","onChangeComplete","PopoverMenu","setVisible","onVisibleChange","createElement4","SvgMenu","ReactComponent4","makeNodeViewMenuConfig","onCheckNode","onNodeRemove","onNodeSetIsEditing","onExportLevelZeroNodeJSON","onExportLevelZeroNodeTabular","onExportSetJSON","editable","exportable","NamedSetNodeStatic","isChecking","onNodeSetColor","onNodeView","expanded","onCheckLevel","checkedLevelPath","checkedLevelIndex","shouldCheckNextLevel","nextLevelToCheck","numberFormatter","niceSize","tooltipText","tooltipProps","popoverMenuConfig","NamedSetNodeEditing","onNodeSetName","onNodeCheckNewName","currentTitle","setCurrentTitle","hasConflicts","trySetName","autoFocus","onFocus","NamedSetNode","isEditing","isCurrentSet","LevelsButtons","onCheck","isChecked","SwitcherIcon","isOpen","hexColor","focusable","onDragStart","onDragStartProp","rcTree","prefixClass","draggable","wrapClass","isDraggable","setSelectHandle","getNodeState","renderCheckbox","renderLevels","onNodeExpand","onNodeExpandWrapper","switcherClass","tabIndex","loading","dragOver","dragOverGapTop","dragOverGapBottom","selected","halfChecked","onDragEnd","onDragEndProp","expandable","otherProps","filterTreeNode","isDisabled","dataAndAriaAttributeProps","onDragEnter","onDragOver","onDragLeave","onDrop","renderSwitcher","renderSelector","renderChildren","React49","useCallback11","createElement5","SvgUnion","strokeMiterlimit","strokeDasharray","strokeOpacity","ReactComponent5","createElement6","SvgIntersection","ReactComponent6","createElement7","SvgComplement","mask","ReactComponent7","PlusButton","onError","onImportTree","onCreateLevelZeroNode","importable","onImport","importHandler","mimeType","uploadInputNode","File","FileReader","FileList","files2","reader","readAsText","SetOperationButtons","onUnion","onIntersection","onComplement","operatable","hasCheckedSetsToUnion","hasCheckedSetsToIntersect","hasCheckedSetsToComplement","processNode","processSets","sets","getAllKeys","SetsManager","additionalSets","levelSelection","checkedLevel","setSelection","setExpansion","onExpandNode","onDropNode","autoExpandParent","setIsDragging","isEditingNodeName","setIsEditingNodeName","processedSets","processedAdditionalSets","additionalSetKeys","allSetSelectionKeys","allSetExpansionKeys","setSelectionKeys","setExpansionKeys","additionalSetSelectionKeys","additionalSetExpansionKeys","renderTreeNodes","readOnly","checkedKeys","expandedKeys","onExpand","eventKey","dropKey","dragKey","dragNode","dropToGap","dropPosition","CELL_SETS_DATA_TYPES","CellSetsManagerSubscriber","cellSetExpansion","setCellSetExpansion","upgradedCellSets","allCellIds","setCellSetColorEncoding","levelZeroName","newCellSetSelection","targetKey","dropPath","dropNode","dropNodeLevel","dropNodeIsLevelZero","dragPath","dropParentNode","dropParentPath","dropNodeCurrIndex","hasSiblingNameConflict","dragNodeName","newDragPath","addChildFunction","checkPathFunction","newLevelZero","oldColors","newCellSetColor","prevNodeColor","nextNamePath","renameNode","nextCellSetSelection","nextCellSetExpansion","setsToView","viewNode","expandedPath","targetNode","newSet","importAutoSetColors","React62","useEffect19","useCallback13","useRef9","forwardRef4","Grid8","React55","useCallback12","useState17","useEffect17","Grid2","Slider5","debounce5","isEqual12","React53","useState16","makeStyles7","MoreVertIcon","MenuItem2","React52","IconButton4","LensIcon","makeStyles6","useStyles3","display","justifyContent","alignItems","flexWrap","icon","action","ColorPalette","ColorPalette_default","useStyles4","menuButton","ChannelOptions","handlePropertyChange","handleChannelRemove","handleIQRUpdate","handleColorSelect","handleRemove","disableGutters","ChannelOptions_default","getDomains","needMin","DOMAINS","React54","Checkbox3","Select2","makeStyles8","withStyles","ExpansionPanelSummary","ExpansionPanelDetails","InputLabel","Slider4","Grid","useSelectStyles","useOptionStyles","popper","zIndex","sharedControllerStyles","flexDirection","useControllerSectionStyles","StyledExpansionPanelDetails","StyledExpansionPanelSummary","marginBottom","spacing","expandIcon","StyledInputLabel","OverflowEllipsisGrid","whiteSpace","textOverflow","StyledSelectionSlider","marginTop","markActive","ChannelSelectionDropdown","channelOptions","selectionIndex","opt","ChannelVisibilityCheckbox","toggle","toRgbUIString","abbreviateNumber2","ChannelSlider","handleChangeDebounced","valueLabelFormat","getAriaLabel","orientation","RasterChannelController","visibility","channelId","newDomainType","dimName","colormapOn","isLoading","newUse3d","setDomain","setDomainType","setUse3d","rgbColor","mounted","hasDomainChanged","has3dChanged","hasSelectionChanged","newDomain","createSelection","direction","justify","xs","RasterChannelController_default","React56","RemoveCircleIcon","IconButton5","Grid3","BitmaskChannelController","disableOptions","BitmaskChannelController_default","React57","Grid4","Checkbox4","Paper3","Typography","Slider6","VectorLayerController","handleLayerChange","isOn","handleSliderChange","handleCheckBoxChange","React60","useState18","useRef8","useEffect18","Grid7","Button2","AddIcon","Slider9","Tabs","Tab","ExpansionPanel","ExpandMoreIcon","VisibilityIcon","VisibilityOffIcon","React58","range9","Matrix45","Grid5","Slider7","InputLabel2","Select3","Checkbox5","DOMAIN_OPTIONS","VolumeDropdown","loaderWithMeta","handleMultiPropertyChange","currResolution","setRasterLayerCallback","setAreAllChannelsLoading","spatialHeight","spatialWidth","shouldUse3D","propertiesChanged","ch","defaultViewState","newChannels","hasZStack","ColormapSelect","inputId","TransparentColorCheckbox","OpacitySlider","SliderDomainSelector","GlobalSelectionSlider","possibleValues","newValue","onChangeCommitted","marks","LayerOption","LayerOptions","handleColormapChange","handleTransparentColorChange","globalControlLabels","globalLabelValues","handleGlobalChannelsSelectionChange","handleDomainChange","shouldShowTransparentColor","shouldShowDomain","shouldShowColormap","hasDimensionsAndChannels","hasViewableResolutions","LayerOptions_default","React59","Matrix46","Grid6","Typography2","Button","makeStyles9","createStyles2","FormControl","Select4","InputLabel3","Slider8","useSlicerStyles","enabled","Slicer","handleSlicerSetting","xSliceInit","ySliceInit","zSliceInit","sliceValuesAndSetSliceFunctions","xSliceNew","ySliceNew","zSliceNew","Slicers","setVal","renderingOptions","RenderingModeSelect","handleRenderingModeChange","fullWidth","ReCenterButton","VolumeOptions","VolumeOptions_default","TabPanel","other","hidden","getDomainsAndSliders","buttonStyles","borderStyle","LayerController","handleLayerRemove","ChannelController","setAreLayerChannelsLoading","areLayerChannelsLoading","shouldShowRemoveLayerButton","channelRef","firstSelection","tab","setTab","handleTabChange","newTab","isExpanded","setIsExpanded","setGlobalLabelValues","o","setColormap","setOpacity","setChannels","setTransparentColor","setRenderingMode","slice3","setChannelsAndDomainType","setChannel","addChannel","removeChannel","newAreLayerChannelsLoading","handleChannelAdd","visible2","newChannelId","areLayerChannelsLoadingCallback","canUpdateChannels","newChannelsWithSelection","newChannelsWithSliders","channelControllers","channelLabel","setIsLoading","handleChannelPropertyChange","property","loaderData","controllerSectionClasses","visibleSetting","Visibility","useVolumeTabs","FullController","variant","startIcon","enter","stopPropagation","nextVisible","React61","useState19","makeStyles10","AddIcon2","MenuItem3","useStyles5","addButton","ImageAddIcon","ImageAddButton","imageOptions","handleImageAdd","handleAdd","imgData","ImageAddButton_default","LAYER_CONTROLLER_DATA_TYPES","LayerControllerMemoized","memo","canShowCellVecmask","setRasterLayersCallbacks","areLoadingRasterChannnels","setAreLoadingRasterChannnels","handleRasterLayerChange","handleRasterLayerRemove","layerIs3DIndex","spatialLayout","enableLayerButtonsWithOneLayer","shouldShowImageLayerButton","layerMeta","cb","newRasterLayersCallbacks","newAreLoadingRasterChannnels","LayerControllerSubscriber","layerControllerRef","windowHeight","windowWidth","newLayers","hasNoBitmask","LayerControllerSubscriber_default","React64","React63","useMemo11","useEffect20","useRef10","Suspense","useState20","ReactDOM","dynamicImportPolyfill","register","ZarrMultivecDataFetcher","PIXI_BUNDLE_VERSION","HIGLASS_BUNDLE_VERSION","BUNDLE_FILE_EXT","PIXI_BUNDLE_URL","HIGLASS_BUNDLE_URL","dataFetcher","pluginType","HiGlassComponent","lazy","handleImportError","__import__","hglib","HG_SIZE","HiGlassLazy","hgViewConfigProp","hgOptions","hgOptionsProp","genomeSize","setGenomicZoomX","setGenomicZoomY","setGenomicTargetX","setGenomicTargetY","computedHeight","hgInstance","setHgInstance","isActiveRef","centerX","genomesPerUnitX","unitX","initialXDomain","centerY","genomesPerUnitY","unitY","initialYDomain","zoomFixed","trackSourceServers","exportViewUrl","zoomLocks","locksByViewUid","locksDict","locationLocks","valueScaleLocks","handleMouseEnter","handleMouseLeave","api","viewConfigString","xDomain","yDomain","nextGenomicZoomX","nextGenomicZoomY","nextGenomicTargetX","nextGenomicTargetY","off","fallback","bounded","pixelPreciseMarginPadding","containerPaddingX","containerPaddingY","sizeMode","HIGLASS_DATA_TYPES","HiGlassSubscriber","React67","useMemo13","useEffect21","React66","clamp4","React65","Suspense2","useMemo12","Handler","Vega","DATASET_NAME","isVega","VegaPlot","partialSpec","signalListeners","vegaComponent","tooltip","renderer","VEGA_THEMES","axis","domainColor","gridColor","tickColor","CellSetSizesPlot","keyLength","keyName","mark","encoding","labelExpr","legend","CELL_SET_SIZES_DATA_TYPES","CellSetSizesPlotSubscriber","React68","useMemo14","useEffect22","isEqual13","sum2","GENOMIC_PROFILES_DATA_TYPES","REFERENCE_TILESETS","hg38","chromosomes","hg19","mm9","mm10","GenomicProfilesSubscriber","profileTrackNameKey","higlassServer","assembly","foregroundColor","dimColor","referenceTracks","referenceTracksHeightSum","profileTracksHeightSum","profileTrackHeight","row_infos","profileTracks","rowInfo","trackUid","isPath","trackName","setInSelection","trackUidString","track","barFillColor","hgView","React70","useMemo15","useEffect23","sum3","React69","clamp5","ExpressionHistogram","xTitle","bin","maxbins","aggregate","EXPRESSION_HISTOGRAM_DATA_TYPES","ExpressionHistogramSubscriber","firstGeneSelected","normValue","subarray","sumValue","React73","useEffect24","useReducer2","useMemo16","useExpressionByCellSet","useGeneExpressionTransform","expressionArr","expressionMax","cellObjects","exprMax","cellIndices","exprValues","transformedValue","setArr","React71","Checkbox6","TableCell5","TableRow5","CellSetExpressionPlotOptions","toggleGeneExpressionTransform","handleGeneExpressionTransformChange","React72","clamp6","CellSetExpressionPlot","domainMax","maxCharactersForLabel","autoMarginBottom","colorScale","plotWidth","plotHeight","numBands","bandWidth","rectColor","axisBand","bandPosition","tickExtra","tickOffset","signals","groupby","bandwidth","ops","as","scales","axes","orient","zindex","tickCount","labelAngle","labelAlign","facet","encode","xc","band","expr","parent","y2","CELL_SET_EXPRESSION_DATA_TYPES","CellSetExpressionPlotSubscriber","setGeneExpressionTransform","registry","getExistingScopesForCoordinationType","spaceScopes","componentScopes","coordinateComponentsTogether","scopeValue","scopeName","coordinateComponentsIndependent","newScopes","initializeAuto","requiresCoordination","upgradeAndValidate","oldConfig","nextConfig","fromVersion","upgradeFunction","validateFunction","validLegacy","groupCollapsed","groupEnd","generateClassName","disableGlobal","Vitessce","configOrWarning","success","upgradedConfig","upgradeSuccess","initializedConfig","createStore","AwaitResponse","responseRef","preformattedDetails","statusText","redirected","checkResponse","debug","validateTheme","createApp","urlParams","URLSearchParams","location","search","datasetId","responsePromise","Bowser","compressToEncodedURIComponent","decompressFromEncodedURIComponent","CURRENT_VERSION","VITESSCE_CONF_QUERY_STRING","VERSION_QUERY_STRING","LENGTH_QUERY_STRING","sniffBrowser","browser","userAgent","MAX_BROWSER_URL_LENGTHS","Chrome","Edge","Safari","Firefox","CompressedConfLengthError","encodeConfInUrl","conf","onOverMaximumUrlLength","compressedConf","newParams","willWorkOn","decodeURLParamsToConf","queryString","compressedConfString","expectedConfLength","version2","VitessceConfigDatasetFile","dataType","toJSON","VitessceConfigDataset","addFile","VitessceConfigView","cScopes","cScope","cType","setXYWH","VitessceConfigViewHConcat","VitessceConfigViewVConcat","hconcat","vcvhc","vconcat","vcvvc","VitessceConfigCoordinationScope","cValue","setValue","VitessceConfig","addDataset","prevDatasetUids","nextUid","newDataset","newScope","addCoordination","addView","datasetMatches","datasetScope2","datasetScope","newView","etScope","cTypes","linkViews","cValues","viewConcat","layoutAux","xMin","xMax","yMin","yMax","numViews","cScopeName","fromJSON","vc","cObj","cScopeValue"],"mappings":"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","sourcesContent":["var __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __pow = Math.pow;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nvar __require = typeof require !== \"undefined\" ? require : (x) => {\n  throw new Error('Dynamic require of \"' + x + '\" is not supported');\n};\nvar __objRest = (source, exclude) => {\n  var target = {};\n  for (var prop in source)\n    if (__hasOwnProp.call(source, prop) && exclude.indexOf(prop) < 0)\n      target[prop] = source[prop];\n  if (source != null && __getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(source)) {\n      if (exclude.indexOf(prop) < 0 && __propIsEnum.call(source, prop))\n        target[prop] = source[prop];\n    }\n  return target;\n};\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nvar __async = (__this, __arguments, generator) => {\n  return new Promise((resolve, reject) => {\n    var fulfilled = (value) => {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var rejected = (value) => {\n      try {\n        step(generator.throw(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);\n    step((generator = generator.apply(__this, __arguments)).next());\n  });\n};\n\n// src/components/heatmap/HeatmapSubscriber.js\nimport React14, {\n  useEffect as useEffect5,\n  useState as useState7,\n  useCallback as useCallback5,\n  useMemo as useMemo5\n} from \"react\";\n\n// src/components/TitleInfo.js\nimport React3, { useState as useState2 } from \"react\";\nimport { makeStyles as makeStyles2 } from \"@material-ui/core/styles\";\nimport CloudDownloadIcon from \"@material-ui/icons/CloudDownload\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport IconButton2 from \"@material-ui/core/IconButton\";\nimport Link from \"@material-ui/core/Link\";\nimport ArrowDropDownIcon from \"@material-ui/icons/ArrowDropDown\";\nimport ArrowDropUpIcon from \"@material-ui/icons/ArrowDropUp\";\nimport SettingsIcon from \"@material-ui/icons/Settings\";\nimport CloseIcon from \"@material-ui/icons/Close\";\n\n// src/components/classNames.js\nvar TOOLTIP_ANCESTOR = \"tooltip-ancestor\";\nvar CARD = `card card-body my-2 ${TOOLTIP_ANCESTOR}`;\nvar PRIMARY_CARD = `${CARD} bg-primary`;\nvar SECONDARY_CARD = `${CARD} bg-secondary`;\nvar BLACK_CARD = `${CARD} bg-black`;\nvar SCROLL_CARD = `${PRIMARY_CARD} scroll`;\nvar VITESSCE_CONTAINER = \"vitessce-container\";\n\n// src/components/LoadingIndicator.js\nimport React from \"react\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nfunction LoadingIndicator() {\n  return /* @__PURE__ */ React.createElement(\"div\", {\n    className: \"loading-indicator-backdrop\"\n  }, /* @__PURE__ */ React.createElement(\"div\", {\n    className: \"loading-indicator-container\"\n  }, /* @__PURE__ */ React.createElement(CircularProgress, null)));\n}\n\n// src/components/shared-mui/components.js\nimport React2, { useRef as useRef3 } from \"react\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Popper from \"@material-ui/core/Popper\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport MenuList from \"@material-ui/core/MenuList\";\nimport ClickAwayListener from \"@material-ui/core/ClickAwayListener\";\nimport Fade from \"@material-ui/core/Fade\";\n\n// src/components/hooks.js\nimport {\n  useRef as useRef2,\n  useState,\n  useEffect,\n  useCallback as useCallback2,\n  useMemo as useMemo2\n} from \"react\";\nimport debounce from \"lodash/debounce\";\n\n// src/app/state/hooks.js\nimport { useRef, useCallback, useMemo } from \"react\";\nimport create from \"zustand\";\nimport createContext from \"zustand/context\";\nimport shallow from \"zustand/shallow\";\n\n// src/utils.js\nfunction fromEntries(iterable) {\n  return [...iterable].reduce((obj, { 0: key, 1: val }) => Object.assign(obj, { [key]: val }), {});\n}\nfunction range(length) {\n  return [...Array(length).keys()];\n}\nfunction pluralize(singular, plural, count) {\n  return count === 1 ? singular : plural;\n}\nfunction capitalize(word) {\n  return word.charAt(0).toUpperCase() + word.slice(1);\n}\nfunction getNextScope(prevScopes) {\n  const chars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZ\";\n  const nextCharIndices = [0];\n  function next() {\n    const r = [];\n    nextCharIndices.forEach((charIndex) => {\n      r.unshift(chars[charIndex]);\n    });\n    let increment = true;\n    for (let i = 0; i < nextCharIndices.length; i++) {\n      const val = ++nextCharIndices[i];\n      if (val >= chars.length) {\n        nextCharIndices[i] = 0;\n      } else {\n        increment = false;\n        break;\n      }\n    }\n    if (increment) {\n      nextCharIndices.push(0);\n    }\n    return r.join(\"\");\n  }\n  let nextScope;\n  do {\n    nextScope = next();\n  } while (prevScopes.includes(nextScope));\n  return nextScope;\n}\nfunction getSourceFromLoader(loader, level) {\n  const { data } = loader;\n  const source = Array.isArray(data) ? data[level || data.length - 1] : data;\n  return source;\n}\nfunction isRgb(loader) {\n  const source = getSourceFromLoader(loader);\n  const { shape, dtype, labels } = source;\n  const channelSize = shape[labels.indexOf(\"c\")];\n  return channelSize === 3 && dtype === \"Uint8\";\n}\n\n// src/app/state/hooks.js\nvar {\n  Provider: ViewConfigProviderLocal,\n  useStore: useViewConfigStoreLocal,\n  useStoreApi: useViewConfigStoreApiLocal\n} = createContext();\nvar ViewConfigProvider = ViewConfigProviderLocal;\nvar useViewConfigStore = useViewConfigStoreLocal;\nvar useViewConfigStoreApi = useViewConfigStoreApiLocal;\nvar {\n  Provider: AuxiliaryProviderLocal,\n  useStore: useAuxiliaryStoreLocal\n} = createContext();\nvar AuxiliaryProvider = AuxiliaryProviderLocal;\nvar useAuxiliaryStore = useAuxiliaryStoreLocal;\nvar createViewConfigStore = () => create((set) => ({\n  viewConfig: null,\n  loaders: null,\n  setViewConfig: (viewConfig) => set({ viewConfig }),\n  setLoaders: (loaders) => set({ loaders }),\n  setCoordinationValue: ({ parameter, scope, value }) => set((state) => ({\n    viewConfig: __spreadProps(__spreadValues({}, state.viewConfig), {\n      coordinationSpace: __spreadProps(__spreadValues({}, state.viewConfig.coordinationSpace), {\n        [parameter]: __spreadProps(__spreadValues({}, state.viewConfig.coordinationSpace[parameter]), {\n          [scope]: value\n        })\n      })\n    })\n  })),\n  removeComponent: (i) => set((state) => {\n    const newLayout = state.viewConfig.layout.slice();\n    newLayout.splice(i, 1);\n    return {\n      viewConfig: __spreadProps(__spreadValues({}, state.viewConfig), {\n        layout: newLayout\n      })\n    };\n  }),\n  changeLayout: (newComponentProps) => set((state) => {\n    const newLayout = state.viewConfig.layout.slice();\n    newComponentProps.forEach(([i, newProps]) => {\n      newLayout[i] = __spreadValues(__spreadValues({}, newLayout[i]), newProps);\n    });\n    return {\n      viewConfig: __spreadProps(__spreadValues({}, state.viewConfig), {\n        layout: newLayout\n      })\n    };\n  })\n}));\nvar useComponentLayout = (component, scopes, coordinationScopes) => useViewConfigStore((state) => state.viewConfig.layout.filter((l) => l.component === component).filter((l) => scopes.every((scope) => l.coordinationScopes[scope] === coordinationScopes[scope])));\nvar createAuxiliaryStore = () => create((set) => ({\n  auxiliaryStore: null,\n  setCoordinationValue: ({ parameter, scope, value }) => set((state) => ({\n    auxiliaryStore: __spreadProps(__spreadValues({}, state.auxiliaryStore), {\n      [parameter]: {\n        [scope]: value\n      }\n    })\n  }))\n}));\nvar useHoverStore = create((set) => ({\n  componentHover: null,\n  setComponentHover: (componentHover) => set({ componentHover })\n}));\nvar useWarnStore = create((set) => ({\n  warning: null,\n  setWarning: (warning) => set({ warning })\n}));\nvar useViewInfoStore = create((set) => ({\n  viewInfo: {},\n  setComponentViewInfo: (uuid, viewInfo) => set((state) => ({\n    viewInfo: __spreadProps(__spreadValues({}, state.viewInfo), {\n      [uuid]: viewInfo\n    })\n  }))\n}));\nvar useGridSizeStore = create((set) => ({\n  resizeCount: {},\n  incrementResizeCount: () => set((state) => ({\n    resizeCount: state.resizeCount + 1\n  }))\n}));\nfunction useCoordination(parameters, coordinationScopes) {\n  const setCoordinationValue = useViewConfigStore((state) => state.setCoordinationValue);\n  const values = useViewConfigStore((state) => {\n    const { coordinationSpace } = state.viewConfig;\n    return fromEntries(parameters.map((parameter) => {\n      if (coordinationSpace && coordinationSpace[parameter]) {\n        const value = coordinationSpace[parameter][coordinationScopes[parameter]];\n        return [parameter, value];\n      }\n      return [parameter, void 0];\n    }));\n  }, shallow);\n  const setters = useMemo(() => fromEntries(parameters.map((parameter) => {\n    const setterName = `set${capitalize(parameter)}`;\n    const setterFunc = (value) => setCoordinationValue({\n      parameter,\n      scope: coordinationScopes[parameter],\n      value\n    });\n    return [setterName, setterFunc];\n  })), [parameters, coordinationScopes]);\n  return [values, setters];\n}\nvar AUXILIARY_COORDINATION_TYPES_MAP = {\n  spatialRasterLayers: [\"rasterLayersCallbacks\", \"areLoadingRasterChannnels\"]\n};\nvar mapCoordinationScopes = (coordinationScopes) => {\n  const newCoordinationScopes = {};\n  Object.keys(coordinationScopes).forEach((key) => {\n    const newCoordinationTypes = AUXILIARY_COORDINATION_TYPES_MAP[key] || [];\n    newCoordinationTypes.forEach((coordinationType) => {\n      newCoordinationScopes[coordinationType || key] = coordinationScopes[key];\n    });\n  });\n  return newCoordinationScopes;\n};\nvar mapParameters = (parameters) => parameters.map((parameter) => AUXILIARY_COORDINATION_TYPES_MAP[parameter]).filter(Boolean).flat();\nfunction useAuxiliaryCoordination(parameters, coordinationScopes) {\n  const setCoordinationValue = useAuxiliaryStore((state) => state.setCoordinationValue);\n  const mappedCoordinationScopes = mapCoordinationScopes(coordinationScopes);\n  const mappedParameters = mapParameters(parameters);\n  const values = useAuxiliaryStore((state) => {\n    const { auxiliaryStore } = state;\n    return fromEntries(mappedParameters.map((parameter) => {\n      if (auxiliaryStore && auxiliaryStore[parameter]) {\n        const value = auxiliaryStore[parameter][mappedCoordinationScopes[parameter]];\n        return [parameter, value];\n      }\n      return [parameter, void 0];\n    }));\n  }, shallow);\n  const setters = useMemo(() => fromEntries(mappedParameters.map((parameter) => {\n    const setterName = `set${capitalize(parameter)}`;\n    const setterFunc = (value) => setCoordinationValue({\n      parameter,\n      scope: mappedCoordinationScopes[parameter],\n      value\n    });\n    return [setterName, setterFunc];\n  })), [parameters, coordinationScopes]);\n  return [values, setters];\n}\nfunction useLoaders() {\n  return useViewConfigStore((state) => state.loaders);\n}\nfunction useLayout() {\n  return useViewConfigStore((state) => {\n    var _a2;\n    return (_a2 = state.viewConfig) == null ? void 0 : _a2.layout;\n  });\n}\nfunction useRemoveComponent() {\n  return useViewConfigStore((state) => state.removeComponent);\n}\nfunction useChangeLayout() {\n  return useViewConfigStore((state) => state.changeLayout);\n}\nfunction useSetLoaders() {\n  return useViewConfigStore((state) => state.setLoaders);\n}\nfunction useSetViewConfig(viewConfigStoreApi) {\n  const setViewConfigRef = useRef(viewConfigStoreApi.getState().setViewConfig);\n  const setViewConfig = setViewConfigRef.current;\n  return setViewConfig;\n}\nfunction useComponentHover() {\n  return useHoverStore((state) => state.componentHover);\n}\nfunction useSetComponentHover() {\n  return useHoverStore((state) => state.setComponentHover);\n}\nfunction useWarning() {\n  return useWarnStore((state) => state.warning);\n}\nfunction useSetWarning() {\n  return useWarnStore((state) => state.setWarning);\n}\nfunction useComponentViewInfo(uuid) {\n  return useViewInfoStore(useCallback((state) => state.viewInfo[uuid], [uuid]));\n}\nfunction useSetComponentViewInfo(uuid) {\n  const setViewInfoRef = useRef(useViewInfoStore.getState().setComponentViewInfo);\n  const setComponentViewInfo = (viewInfo) => setViewInfoRef.current(uuid, viewInfo);\n  return setComponentViewInfo;\n}\nfunction useGridResize() {\n  return useGridSizeStore((state) => state.resizeCount);\n}\nfunction useEmitGridResize() {\n  return useGridSizeStore((state) => state.incrementResizeCount);\n}\n\n// src/components/hooks.js\nfunction getWindowDimensions() {\n  const { innerWidth: width, innerHeight: height } = window;\n  return {\n    width,\n    height\n  };\n}\nfunction useVitessceContainer(ref) {\n  return useCallback2(() => {\n    if (ref.current) {\n      return ref.current.closest(`.${VITESSCE_CONTAINER}`);\n    }\n    return null;\n  }, [ref]);\n}\nfunction useWindowDimensions() {\n  const [windowDimensions, setWindowDimensions] = useState(getWindowDimensions());\n  useEffect(() => {\n    function handleResize() {\n      setWindowDimensions(getWindowDimensions());\n    }\n    const onResizeDebounced = debounce(handleResize, 100, { trailing: true });\n    window.addEventListener(\"resize\", onResizeDebounced);\n    return () => window.removeEventListener(\"resize\", onResizeDebounced);\n  }, []);\n  return windowDimensions;\n}\nfunction useGridItemSize() {\n  const containerRef = useRef2();\n  const [height, setHeight] = useState();\n  const [width, setWidth] = useState();\n  const resizeCount = useGridResize();\n  const incrementResizeCount = useEmitGridResize();\n  useEffect(() => {\n    function onWindowResize() {\n      incrementResizeCount();\n    }\n    const onResizeDebounced = debounce(onWindowResize, 100, { trailing: true });\n    window.addEventListener(\"resize\", onResizeDebounced);\n    onWindowResize();\n    return () => {\n      window.removeEventListener(\"resize\", onResizeDebounced);\n    };\n  }, [incrementResizeCount]);\n  useEffect(() => {\n    if (!containerRef.current)\n      return;\n    const container = containerRef.current;\n    const containerRect = container.getBoundingClientRect();\n    setHeight(containerRect.height);\n    setWidth(containerRect.width);\n  }, [resizeCount]);\n  return [width, height, containerRef];\n}\nfunction useDeckCanvasSize() {\n  const deckRef = useRef2();\n  const [height, setHeight] = useState();\n  const [width, setWidth] = useState();\n  const resizeCount = useGridResize();\n  const incrementResizeCount = useEmitGridResize();\n  useEffect(() => {\n    function onWindowResize() {\n      incrementResizeCount();\n    }\n    const onResizeDebounced = debounce(onWindowResize, 100, { trailing: true });\n    window.addEventListener(\"resize\", onResizeDebounced);\n    onWindowResize();\n    return () => {\n      window.removeEventListener(\"resize\", onResizeDebounced);\n    };\n  }, [incrementResizeCount]);\n  useEffect(() => {\n    if (!deckRef.current)\n      return;\n    const { canvas } = deckRef.current.deck;\n    const canvasRect = canvas.getBoundingClientRect();\n    setHeight(canvasRect.height);\n    setWidth(canvasRect.width);\n  }, [resizeCount]);\n  return [width, height, deckRef];\n}\nfunction useReady(supportedItems) {\n  const items2 = supportedItems;\n  const [waiting, setWaiting] = useState(items2);\n  const setItemIsReady = useCallback2((readyItem) => {\n    setWaiting((waitingItems) => {\n      const nextWaitingItems = waitingItems.filter((item) => item !== readyItem);\n      console.log(`cleared ${readyItem}; waiting on ${nextWaitingItems.length}: ${JSON.stringify(nextWaitingItems)}`);\n      return nextWaitingItems;\n    });\n  }, [setWaiting]);\n  const setItemIsNotReady = useCallback2((notReadyItem) => {\n    setWaiting((waitingItems) => {\n      const nextWaitingItems = [...waitingItems, notReadyItem];\n      console.log(`waiting on ${nextWaitingItems.length}: ${JSON.stringify(nextWaitingItems)}`);\n      return nextWaitingItems;\n    });\n  }, [setWaiting]);\n  const resetReadyItems = useCallback2(() => {\n    setWaiting(items2);\n    console.log(`waiting on ${items2.length}: ${JSON.stringify(items2)}`);\n  }, [setWaiting, items2]);\n  const isReady = waiting.length === 0;\n  return [isReady, setItemIsReady, setItemIsNotReady, resetReadyItems];\n}\nfunction useUrls() {\n  const [urls, setUrls] = useState([]);\n  const addUrl = useCallback2((url, name2) => {\n    if (url) {\n      setUrls((prev) => [...prev, { url, name: name2 }]);\n    }\n  }, [setUrls]);\n  const resetUrls = useCallback2(() => {\n    setUrls([]);\n  }, [setUrls]);\n  return [urls, addUrl, resetUrls];\n}\nfunction useClosestVitessceContainerSize(ref) {\n  const [height, setHeight] = useState();\n  const [width, setWidth] = useState();\n  useEffect(() => {\n    function onWindowResize() {\n      if (ref.current) {\n        const {\n          clientHeight: componentHeight,\n          clientWidth: componentWidth\n        } = ref.current.closest(\".vitessce-container\");\n        setWidth(componentWidth);\n        setHeight(componentHeight);\n      }\n    }\n    const onResizeDebounced = debounce(onWindowResize, 100, { trailing: true });\n    window.addEventListener(\"resize\", onResizeDebounced);\n    onWindowResize();\n    return () => {\n      window.removeEventListener(\"resize\", onResizeDebounced);\n    };\n  }, [ref]);\n  return [width, height];\n}\nfunction useExpressionValueGetter({ attrs, expressionData }) {\n  const cellIdMap = useMemo2(() => {\n    const result = {};\n    if (attrs && attrs.rows) {\n      for (let i = 0; i < attrs.rows.length; i++) {\n        result[attrs.rows[i]] = i;\n      }\n    }\n    return result;\n  }, [attrs]);\n  const getExpressionValue = useCallback2((entry) => {\n    const cellId = entry[0];\n    if (cellIdMap && expressionData && expressionData[0]) {\n      const cellIndex = cellIdMap[cellId];\n      const val = expressionData[0][cellIndex];\n      return val;\n    }\n    return 0;\n  }, [cellIdMap, expressionData]);\n  return getExpressionValue;\n}\n\n// src/components/shared-mui/styles.js\nimport { makeStyles, createMuiTheme } from \"@material-ui/core/styles\";\nimport { grey } from \"@material-ui/core/colors\";\nvar styles = makeStyles(() => ({\n  paper: {\n    maxHeight: 200,\n    overflow: \"auto\"\n  },\n  container: {\n    position: \"relative\",\n    left: 0,\n    top: 0\n  },\n  span: {\n    width: \"70px\",\n    textAlign: \"center\",\n    paddingLeft: \"2px\",\n    paddingRight: \"2px\"\n  }\n}));\nvar muiTheme = {\n  dark: createMuiTheme({\n    palette: {\n      type: \"dark\",\n      primary: grey,\n      secondary: grey,\n      primaryBackground: \"#222222\",\n      primaryBackgroundHighlight: \"#000000\",\n      primaryBackgroundInput: \"#D3D3D3\",\n      primaryBackgroundDim: \"#333333\",\n      primaryBackgroundLight: \"#757575\",\n      primaryForeground: \"#D3D3D3\",\n      primaryForegroundDim: \"#000000\",\n      primaryForegroundActive: \"#9bb7d6\",\n      secondaryBackground: \"#000000\",\n      secondaryBackgroundDim: \"#444444\",\n      secondaryForeground: \"#D3D3D3\"\n    },\n    props: {\n      MuiButtonBase: {\n        disableRipple: true\n      }\n    }\n  }),\n  light: createMuiTheme({\n    palette: {\n      type: \"light\",\n      primary: grey,\n      secondary: grey,\n      primaryBackground: \"#F1F1F1\",\n      primaryBackgroundHighlight: \"#FFFFFF\",\n      primaryBackgroundInput: \"#FFFFFF\",\n      primaryBackgroundDim: \"#8A8A8A\",\n      primaryBackgroundLight: \"#e0e0e0\",\n      primaryForeground: \"#333333\",\n      primaryForegroundDim: \"#808080\",\n      primaryForegroundActive: \"#0074D9\",\n      secondaryBackground: \"#F1F1F1\",\n      secondaryBackgroundDim: \"#C0C0C0\",\n      secondaryForeground: \"#222222\"\n    },\n    props: {\n      MuiButtonBase: {\n        disableRipple: true\n      }\n    }\n  })\n};\n\n// src/components/shared-mui/components.js\nfunction MuiSpan(props) {\n  const { children } = props;\n  const classes = styles();\n  return /* @__PURE__ */ React2.createElement(\"span\", {\n    className: classes.span\n  }, children);\n}\nfunction PopperMenu(props) {\n  const {\n    buttonIcon,\n    open,\n    setOpen,\n    children,\n    buttonClassName\n  } = props;\n  const classes = styles();\n  const anchorRef = useRef3();\n  const handleClick = () => {\n    setOpen((prev) => !prev);\n  };\n  const handleClose = () => {\n    setOpen(false);\n  };\n  const id = open ? \"v-popover-menu\" : void 0;\n  const getTooltipContainer = useVitessceContainer(anchorRef);\n  return /* @__PURE__ */ React2.createElement(\"div\", {\n    ref: anchorRef,\n    className: classes.container\n  }, /* @__PURE__ */ React2.createElement(IconButton, {\n    \"aria-describedby\": id,\n    onClick: handleClick,\n    size: \"small\",\n    className: buttonClassName\n  }, buttonIcon), /* @__PURE__ */ React2.createElement(Popper, {\n    id,\n    open,\n    anchorEl: anchorRef && anchorRef.current,\n    container: getTooltipContainer,\n    onClose: handleClose,\n    placement: \"bottom-end\",\n    transition: true\n  }, ({ TransitionProps }) => /* @__PURE__ */ React2.createElement(ClickAwayListener, {\n    onClickAway: handleClose\n  }, /* @__PURE__ */ React2.createElement(Fade, __spreadProps(__spreadValues({}, TransitionProps), {\n    timeout: 100\n  }), /* @__PURE__ */ React2.createElement(Paper, {\n    elevation: 4,\n    className: classes.paper\n  }, /* @__PURE__ */ React2.createElement(MenuList, null, children))))));\n}\n\n// src/components/TitleInfo.js\nvar useStyles = makeStyles2((theme) => ({\n  iconButton: {\n    border: \"none\",\n    marginLeft: 0,\n    background: \"none\",\n    color: theme.palette.primaryForeground,\n    paddingLeft: \"0.25em\",\n    paddingRight: \"0.25em\",\n    borderRadius: \"2px\",\n    \"&:hover\": {\n      backgroundColor: theme.palette.primaryBackgroundLight\n    },\n    \"&:first-child\": {\n      marginLeft: \"0.25em\"\n    },\n    \"&:last-child\": {\n      marginRight: \"0.25em\"\n    },\n    \"& svg\": {\n      width: \"0.7em\",\n      height: \"0.7em\",\n      verticalAlign: \"middle\",\n      overflow: \"visible\"\n    }\n  },\n  downloadLink: {\n    color: theme.palette.primaryForeground\n  }\n}));\nfunction SettingsIconWithArrow({ open }) {\n  return /* @__PURE__ */ React3.createElement(React3.Fragment, null, /* @__PURE__ */ React3.createElement(SettingsIcon, null), open ? /* @__PURE__ */ React3.createElement(ArrowDropUpIcon, null) : /* @__PURE__ */ React3.createElement(ArrowDropDownIcon, null));\n}\nfunction PlotOptions(props) {\n  const { options } = props;\n  const [open, setOpen] = useState2(false);\n  const classes = useStyles();\n  return /* @__PURE__ */ React3.createElement(PopperMenu, {\n    open,\n    setOpen,\n    buttonIcon: /* @__PURE__ */ React3.createElement(SettingsIconWithArrow, {\n      open\n    }),\n    buttonClassName: classes.iconButton,\n    placement: \"bottom-end\"\n  }, options);\n}\nfunction CloudDownloadIconWithArrow({ open }) {\n  return /* @__PURE__ */ React3.createElement(React3.Fragment, null, /* @__PURE__ */ React3.createElement(CloudDownloadIcon, null), open ? /* @__PURE__ */ React3.createElement(ArrowDropUpIcon, null) : /* @__PURE__ */ React3.createElement(ArrowDropDownIcon, null));\n}\nfunction DownloadOptions(props) {\n  const { urls } = props;\n  const [open, setOpen] = useState2(false);\n  const classes = useStyles();\n  return /* @__PURE__ */ React3.createElement(PopperMenu, {\n    open,\n    setOpen,\n    buttonIcon: /* @__PURE__ */ React3.createElement(CloudDownloadIconWithArrow, {\n      open\n    }),\n    buttonClassName: classes.iconButton,\n    placement: \"bottom-end\"\n  }, urls.map(({ url, name: name2 }) => /* @__PURE__ */ React3.createElement(MenuItem, {\n    dense: true,\n    key: url\n  }, /* @__PURE__ */ React3.createElement(Link, {\n    underline: \"none\",\n    href: url,\n    target: \"_blank\",\n    rel: \"noopener\",\n    className: classes.downloadLink\n  }, \"Download \", name2))));\n}\nfunction ClosePaneButton(props) {\n  const { removeGridComponent } = props;\n  const classes = useStyles();\n  return /* @__PURE__ */ React3.createElement(IconButton2, {\n    onClick: removeGridComponent,\n    size: \"small\",\n    className: classes.iconButton,\n    title: \"close\"\n  }, /* @__PURE__ */ React3.createElement(CloseIcon, null));\n}\nfunction TitleInfo(props) {\n  const {\n    title: title16,\n    info,\n    children,\n    isScroll,\n    isSpatial,\n    removeGridComponent,\n    urls,\n    isReady,\n    options\n  } = props;\n  const childClassName = isScroll ? SCROLL_CARD : isSpatial ? BLACK_CARD : SECONDARY_CARD;\n  return /* @__PURE__ */ React3.createElement(React3.Fragment, null, /* @__PURE__ */ React3.createElement(\"div\", {\n    className: \"title\"\n  }, /* @__PURE__ */ React3.createElement(\"div\", {\n    className: \"title-left\"\n  }, title16), /* @__PURE__ */ React3.createElement(\"div\", {\n    className: \"title-info\",\n    title: info\n  }, info), /* @__PURE__ */ React3.createElement(\"div\", {\n    className: \"title-buttons\"\n  }, options && /* @__PURE__ */ React3.createElement(PlotOptions, {\n    options\n  }), urls && urls.length > 0 && /* @__PURE__ */ React3.createElement(DownloadOptions, {\n    urls\n  }), /* @__PURE__ */ React3.createElement(ClosePaneButton, {\n    removeGridComponent\n  }))), /* @__PURE__ */ React3.createElement(\"div\", {\n    className: childClassName\n  }, !isReady && /* @__PURE__ */ React3.createElement(LoadingIndicator, null), children));\n}\n\n// src/components/utils.js\nimport React4 from \"react\";\nimport { COORDINATE_SYSTEM } from \"@deck.gl/core\";\n\n// src/schemas/cell-sets.schema.json\nvar $schema = \"http://json-schema.org/draft-07/schema#\";\nvar $id = \"https://github.com/vitessce/vitessce/#cell-sets\";\nvar title = \"Vitessce cell sets data\";\nvar type = \"object\";\nvar definitions = {\n  stringArray: {\n    type: \"array\",\n    items: {\n      type: \"string\"\n    }\n  },\n  stringProbabilityTupleArray: {\n    type: \"array\",\n    items: {\n      type: \"array\",\n      additionalItems: false,\n      items: [\n        {\n          type: \"string\"\n        },\n        {\n          oneOf: [\n            {\n              type: \"number\",\n              minimum: 0,\n              maximum: 1\n            },\n            {\n              type: \"null\"\n            }\n          ]\n        }\n      ]\n    }\n  },\n  colorArray: {\n    type: \"array\",\n    items: {\n      type: \"integer\",\n      minimum: 0,\n      maximum: 255\n    },\n    minItems: 3,\n    maxItems: 3\n  },\n  treeNodeLeaf: {\n    type: \"object\",\n    additionalProperties: false,\n    required: [\"name\"],\n    properties: {\n      name: {\n        type: \"string\"\n      },\n      color: {\n        $ref: \"#/definitions/colorArray\"\n      },\n      set: {\n        $ref: \"#/definitions/stringArray\"\n      }\n    }\n  },\n  treeNodeNonLeaf: {\n    type: \"object\",\n    additionalProperties: false,\n    required: [\"name\"],\n    properties: {\n      name: {\n        type: \"string\"\n      },\n      color: {\n        $ref: \"#/definitions/colorArray\"\n      },\n      children: {\n        type: \"array\",\n        items: {\n          $ref: \"#/definitions/treeNode\"\n        }\n      }\n    }\n  },\n  treeNode: {\n    oneOf: [\n      {\n        $ref: \"#/definitions/treeNodeNonLeaf\"\n      },\n      {\n        $ref: \"#/definitions/treeNodeLeaf\"\n      }\n    ]\n  },\n  \"version0.1.2\": {\n    type: \"object\",\n    additionalProperties: false,\n    required: [\"version\", \"datatype\", \"tree\"],\n    properties: {\n      dataset: {\n        type: \"string\"\n      },\n      version: {\n        type: \"string\",\n        enum: [\"0.1.2\"]\n      },\n      datatype: {\n        type: \"string\",\n        enum: [\"cell\"]\n      },\n      tree: {\n        type: \"array\",\n        items: {\n          $ref: \"#/definitions/treeNodeNonLeaf\"\n        }\n      }\n    }\n  },\n  treeNodeLeafProbabilistic: {\n    type: \"object\",\n    additionalProperties: false,\n    required: [\"name\"],\n    properties: {\n      name: {\n        type: \"string\"\n      },\n      color: {\n        $ref: \"#/definitions/colorArray\"\n      },\n      set: {\n        $ref: \"#/definitions/stringProbabilityTupleArray\"\n      }\n    }\n  },\n  treeNodeNonLeafProbabilistic: {\n    type: \"object\",\n    additionalProperties: false,\n    required: [\"name\"],\n    properties: {\n      name: {\n        type: \"string\"\n      },\n      color: {\n        $ref: \"#/definitions/colorArray\"\n      },\n      children: {\n        type: \"array\",\n        items: {\n          $ref: \"#/definitions/treeNodeProbabilistic\"\n        }\n      }\n    }\n  },\n  treeNodeProbabilistic: {\n    oneOf: [\n      {\n        $ref: \"#/definitions/treeNodeNonLeafProbabilistic\"\n      },\n      {\n        $ref: \"#/definitions/treeNodeLeafProbabilistic\"\n      }\n    ]\n  },\n  \"version0.1.3\": {\n    type: \"object\",\n    additionalProperties: false,\n    required: [\"version\", \"datatype\", \"tree\"],\n    properties: {\n      dataset: {\n        type: \"string\"\n      },\n      version: {\n        type: \"string\",\n        enum: [\"0.1.3\"]\n      },\n      datatype: {\n        type: \"string\",\n        enum: [\"cell\"]\n      },\n      tree: {\n        type: \"array\",\n        items: {\n          $ref: \"#/definitions/treeNodeNonLeafProbabilistic\"\n        }\n      }\n    }\n  }\n};\nvar oneOf = [\n  {\n    $ref: \"#/definitions/version0.1.2\"\n  },\n  {\n    $ref: \"#/definitions/version0.1.3\"\n  }\n];\nvar cell_sets_schema_default = {\n  $schema,\n  $id,\n  title,\n  type,\n  definitions,\n  oneOf\n};\n\n// src/schemas/cell-sets-tabular.schema.json\nvar $schema2 = \"http://json-schema.org/draft-07/schema#\";\nvar $id2 = \"https://github.com/vitessce/vitessce/#cell-sets-tabular\";\nvar title2 = \"Vitessce cell sets data, tabular format\";\nvar definitions2 = {\n  colorArray: {\n    type: \"array\",\n    items: { type: \"integer\", minimum: 0, maximum: 255 },\n    minItems: 3,\n    maxItems: 3\n  }\n};\nvar type2 = \"array\";\nvar items = {\n  type: \"object\",\n  additionalProperties: false,\n  required: [\"groupName\", \"setName\", \"obsId\"],\n  properties: {\n    groupName: { type: \"string\" },\n    setName: { type: \"string\" },\n    setColor: { $ref: \"#/definitions/colorArray\" },\n    obsId: { type: \"string\" },\n    predictionScore: {\n      oneOf: [\n        {\n          type: \"number\",\n          minimum: 0,\n          maximum: 1\n        },\n        {\n          type: \"null\"\n        }\n      ]\n    }\n  }\n};\nvar cell_sets_tabular_schema_default = {\n  $schema: $schema2,\n  $id: $id2,\n  title: title2,\n  definitions: definitions2,\n  type: type2,\n  items\n};\n\n// src/components/sets/constants.js\nvar FILE_EXTENSION_JSON = \"json\";\nvar MIME_TYPE_JSON = \"application/json\";\nvar FILE_EXTENSION_TABULAR = \"csv\";\nvar MIME_TYPE_TABULAR = \"text/csv\";\nvar SEPARATOR_TABULAR = \",\";\nvar NA_VALUE_TABULAR = \"NA\";\nvar SETS_DATATYPE_CELL = \"cell\";\nvar HIERARCHICAL_SCHEMAS = {\n  cell: {\n    latestVersion: \"0.1.3\",\n    schema: cell_sets_schema_default\n  }\n};\nvar TABULAR_SCHEMAS = {\n  cell: {\n    schema: cell_sets_tabular_schema_default\n  }\n};\n\n// src/components/utils.js\nfunction makeCellStatusMessage(cellInfoFactors) {\n  return Object.entries(cellInfoFactors).map(([factor, value]) => `${factor}: ${value}`).join(\"; \");\n}\nfunction cellLayerDefaultProps(cells, updateStatus, setCellHighlight, setComponentHover) {\n  return {\n    coordinateSystem: COORDINATE_SYSTEM.CARTESIAN,\n    data: cells,\n    pickable: true,\n    autoHighlight: true,\n    stroked: true,\n    filled: true,\n    getElevation: 0,\n    onHover: (info) => {\n      if (setComponentHover) {\n        setComponentHover();\n      }\n      if (info.object) {\n        const [cellId, cellInfo] = info.object;\n        const { factors = {} } = cellInfo;\n        if (updateStatus) {\n          updateStatus(makeCellStatusMessage(factors));\n        }\n        if (setCellHighlight) {\n          setCellHighlight(cellId);\n        }\n      } else if (setCellHighlight) {\n        setCellHighlight(\"\");\n      }\n    }\n  };\n}\nvar DEFAULT_DARK_COLOR = [50, 50, 50];\nvar DEFAULT_LIGHT_COLOR = [200, 200, 200];\nfunction getDefaultColor(theme) {\n  return theme === \"dark\" ? DEFAULT_DARK_COLOR : DEFAULT_LIGHT_COLOR;\n}\nvar PALETTE = [\n  [68, 119, 170],\n  [136, 204, 238],\n  [68, 170, 153],\n  [17, 119, 51],\n  [153, 153, 51],\n  [221, 204, 119],\n  [204, 102, 119],\n  [136, 34, 85],\n  [170, 68, 153]\n];\nvar VIEWER_PALETTE = [\n  [0, 0, 255],\n  [0, 255, 0],\n  [255, 0, 255],\n  [255, 255, 0],\n  [0, 255, 255],\n  [255, 255, 255],\n  [255, 128, 0],\n  [255, 0, 0]\n];\nvar COLORMAP_OPTIONS = [\n  \"viridis\",\n  \"greys\",\n  \"magma\",\n  \"jet\",\n  \"hot\",\n  \"bone\",\n  \"copper\",\n  \"summer\",\n  \"density\",\n  \"inferno\"\n];\nvar DEFAULT_GL_OPTIONS = { webgl2: true };\nfunction createDefaultUpdateCellsHover(componentName) {\n  return (hoverInfo) => console.warn(`${componentName} updateCellsHover: ${hoverInfo.cellId}`);\n}\nfunction createDefaultUpdateGenesHover(componentName) {\n  return (hoverInfo) => console.warn(`${componentName} updateGenesHover: ${hoverInfo.geneId}`);\n}\nfunction createDefaultUpdateViewInfo(componentName) {\n  return (viewInfo) => console.warn(`${componentName} updateViewInfo: ${viewInfo}`);\n}\nfunction copyUint8Array(arr) {\n  const newBuffer = new ArrayBuffer(arr.buffer.byteLength);\n  const newArr = new Uint8Array(newBuffer);\n  newArr.set(arr);\n  return newArr;\n}\nfunction getNextNumberedNodeName(nodes, prefix) {\n  let i = 1;\n  if (nodes) {\n    while (nodes.find((n) => n.name === `${prefix}${i}`)) {\n      i++;\n    }\n  }\n  return `${prefix}${i}`;\n}\nfunction setCellSelection(cellSelection, additionalCellSets, cellSetColor, setCellSetSelection, setAdditionalCellSets, setCellSetColor, setCellColorEncoding, prefix = \"Selection \") {\n  const CELL_SELECTIONS_LEVEL_ZERO_NAME = \"My Selections\";\n  const selectionsLevelZeroNode = additionalCellSets == null ? void 0 : additionalCellSets.tree.find((n) => n.name === CELL_SELECTIONS_LEVEL_ZERO_NAME);\n  const nextAdditionalCellSets = {\n    version: HIERARCHICAL_SCHEMAS[SETS_DATATYPE_CELL].latestVersion,\n    datatype: SETS_DATATYPE_CELL,\n    tree: [...additionalCellSets ? additionalCellSets.tree : []]\n  };\n  const nextName = getNextNumberedNodeName(selectionsLevelZeroNode == null ? void 0 : selectionsLevelZeroNode.children, prefix);\n  let colorIndex = 0;\n  if (selectionsLevelZeroNode) {\n    colorIndex = selectionsLevelZeroNode.children.length;\n    selectionsLevelZeroNode.children.push({\n      name: nextName,\n      set: cellSelection.map((d) => [d, null])\n    });\n  } else {\n    nextAdditionalCellSets.tree.push({\n      name: CELL_SELECTIONS_LEVEL_ZERO_NAME,\n      children: [\n        {\n          name: nextName,\n          set: cellSelection.map((d) => [d, null])\n        }\n      ]\n    });\n  }\n  setAdditionalCellSets(nextAdditionalCellSets);\n  const nextPath = [\"My Selections\", nextName];\n  setCellSetColor([\n    ...cellSetColor || [],\n    {\n      path: nextPath,\n      color: PALETTE[colorIndex % PALETTE.length]\n    }\n  ]);\n  setCellSetSelection([nextPath]);\n  setCellColorEncoding(\"cellSetSelection\");\n}\nfunction mergeCellSets(cellSets, additionalCellSets) {\n  return {\n    version: HIERARCHICAL_SCHEMAS[SETS_DATATYPE_CELL].latestVersion,\n    datatype: SETS_DATATYPE_CELL,\n    tree: [\n      ...cellSets ? cellSets.tree : [],\n      ...additionalCellSets ? additionalCellSets.tree : []\n    ]\n  };\n}\nfunction createWarningComponent(props) {\n  return () => {\n    const {\n      title: title16,\n      message\n    } = props;\n    return /* @__PURE__ */ React4.createElement(\"div\", {\n      className: PRIMARY_CARD\n    }, /* @__PURE__ */ React4.createElement(\"h1\", null, title16), /* @__PURE__ */ React4.createElement(\"div\", null, message));\n  };\n}\nfunction asEsModule(component) {\n  return {\n    __esModule: true,\n    default: component\n  };\n}\nfunction formatBytes(bytes, decimals = 2) {\n  if (bytes === 0)\n    return \"0 Bytes\";\n  const k = 1024;\n  const dm = decimals < 0 ? 0 : decimals;\n  const sizes = [\"Bytes\", \"KB\", \"MB\", \"GB\"];\n  const i = Math.floor(Math.log(bytes) / Math.log(k));\n  return `${parseFloat((bytes / Math.pow(k, i)).toFixed(dm))} ${sizes[i]}`;\n}\nvar getStatsForResolution = (loader, resolution) => {\n  const { shape, labels } = loader[resolution];\n  const height = shape[labels.indexOf(\"y\")];\n  const width = shape[labels.indexOf(\"x\")];\n  const depth = shape[labels.indexOf(\"z\")];\n  const depthDownsampled = Math.max(1, depth >> resolution);\n  const totalBytes = 4 * height * width * depthDownsampled;\n  return {\n    height,\n    width,\n    depthDownsampled,\n    totalBytes\n  };\n};\nvar canLoadResolution = (loader, resolution) => {\n  var _a2, _b2, _c;\n  const {\n    totalBytes,\n    height,\n    width,\n    depthDownsampled\n  } = getStatsForResolution(loader, resolution);\n  const maxHeapSize = ((_a2 = window.performance) == null ? void 0 : _a2.memory) && ((_c = (_b2 = window.performance) == null ? void 0 : _b2.memory) == null ? void 0 : _c.jsHeapSizeLimit) / 2;\n  const maxSize = maxHeapSize || __pow(2, 31) - 1;\n  return totalBytes < maxSize && height <= 2048 && depthDownsampled <= 2048 && width <= 2048 && depthDownsampled > 1;\n};\n\n// src/components/data-hooks.js\nimport { useState as useState4, useEffect as useEffect2 } from \"react\";\nimport equal2 from \"fast-deep-equal\";\n\n// src/loaders/errors/AbstractLoaderError.js\nvar AbstractLoaderError = class {\n  constructor(message) {\n    this.message = message;\n  }\n  warnInConsole() {\n    throw new Error(\"The warnInConsole() method has not been implemented.\");\n  }\n};\n\n// src/loaders/errors/LoaderValidationError.js\nvar LoaderValidationError = class extends AbstractLoaderError {\n  constructor(datasetType, datasetFileType, datasetUrl, reason) {\n    super(`Error while validating ${datasetType}.`);\n    this.name = \"LoaderValidationError\";\n    this.datasetType = datasetType;\n    this.datasetFileType = datasetFileType;\n    this.datasetUrl = datasetUrl;\n    this.reason = reason;\n  }\n  warnInConsole() {\n    const {\n      datasetType,\n      datasetUrl,\n      reason\n    } = this;\n    console.warn(`${datasetType} from ${datasetUrl}: validation failed`, JSON.stringify(reason, null, 2));\n  }\n};\n\n// src/loaders/errors/LoaderNotFoundError.js\nvar LoaderNotFoundError = class extends AbstractLoaderError {\n  constructor(datasetType, datasetFileType, datasetUrl) {\n    super(`Error finding loader for ${datasetType}.`);\n    this.name = \"LoaderNotFoundError\";\n    this.datasetType = datasetType;\n    this.datasetFileType = datasetFileType;\n    this.datasetUrl = datasetUrl;\n  }\n  warnInConsole() {\n    const {\n      datasetType,\n      datasetFileType,\n      datasetUrl\n    } = this;\n    if (datasetFileType && datasetUrl) {\n      console.warn(`${datasetType} from ${datasetUrl}: unable to find loader for fileType ${datasetFileType}`);\n    } else {\n      console.warn(`${datasetType}: unable to find loader`);\n    }\n  }\n};\n\n// node_modules/@hms-dbmi/viv/dist/viv.es.js\nimport { COORDINATE_SYSTEM as COORDINATE_SYSTEM2, Layer, project32, picking, CompositeLayer, OrthographicView, Controller, OrbitView } from \"@deck.gl/core\";\nimport { Matrix4 } from \"math.gl\";\nimport GL from \"@luma.gl/constants\";\nimport { TileLayer } from \"@deck.gl/geo-layers\";\nimport { Model, Geometry, Texture2D, isWebGL2, Texture3D } from \"@luma.gl/core\";\nimport { hasFeature, FEATURES } from \"@luma.gl/webgl\";\nimport { BitmapLayer as BitmapLayer$1, PolygonLayer, LineLayer, TextLayer } from \"@deck.gl/layers\";\nimport quickselect from \"quickselect\";\nimport { Plane } from \"@math.gl/culling\";\nimport React5, { PureComponent, useState as useState3, useMemo as useMemo3 } from \"react\";\nimport DeckGL from \"@deck.gl/react\";\nimport equal from \"fast-deep-equal\";\nimport { fromUrl, fromBlob } from \"geotiff\";\nimport parser from \"fast-xml-parser\";\nimport { KeyError, openGroup, BoundsCheckError, slice, HTTPStore } from \"zarr\";\nvar fsColormap1 = \"#define SHADER_NAME xr-layer-fragment-shader-colormap\\nprecision highp float;\\n#define GLSLIFY 1\\nuniform sampler2D channel0;uniform sampler2D channel1;uniform sampler2D channel2;uniform sampler2D channel3;uniform sampler2D channel4;uniform sampler2D channel5;uniform vec2 contrastLimits[6];uniform float opacity;uniform float divisor;uniform bool useTransparentColor;varying vec2 vTexCoord;void main(){float intensityValue0=sample_and_apply_contrast_limits(channel0,vTexCoord,contrastLimits[0]);float intensityValue1=sample_and_apply_contrast_limits(channel1,vTexCoord,contrastLimits[1]);float intensityValue2=sample_and_apply_contrast_limits(channel2,vTexCoord,contrastLimits[2]);float intensityValue3=sample_and_apply_contrast_limits(channel3,vTexCoord,contrastLimits[3]);float intensityValue4=sample_and_apply_contrast_limits(channel4,vTexCoord,contrastLimits[4]);float intensityValue5=sample_and_apply_contrast_limits(channel5,vTexCoord,contrastLimits[5]);float intensityCombo=0.;intensityCombo+=max(0.,intensityValue0);intensityCombo+=max(0.,intensityValue1);intensityCombo+=max(0.,intensityValue2);intensityCombo+=max(0.,intensityValue3);intensityCombo+=max(0.,intensityValue4);intensityCombo+=max(0.,intensityValue5);gl_FragColor=colormap(intensityCombo,opacity,useTransparentColor);geometry.uv=vTexCoord;DECKGL_FILTER_COLOR(gl_FragColor,geometry);}\";\nvar fsColormap2 = \"#version 300 es\\n#define SHADER_NAME xr-layer-fragment-shader\\nprecision highp float;precision highp int;precision highp SAMPLER_TYPE;\\n#define GLSLIFY 1\\nuniform SAMPLER_TYPE channel0;uniform SAMPLER_TYPE channel1;uniform SAMPLER_TYPE channel2;uniform SAMPLER_TYPE channel3;uniform SAMPLER_TYPE channel4;uniform SAMPLER_TYPE channel5;uniform vec2 contrastLimits[6];uniform float opacity;uniform bool useTransparentColor;in vec2 vTexCoord;out vec4 color;void main(){float intensityValue0=sample_and_apply_contrast_limits(channel0,vTexCoord,contrastLimits[0]);float intensityValue1=sample_and_apply_contrast_limits(channel1,vTexCoord,contrastLimits[1]);float intensityValue2=sample_and_apply_contrast_limits(channel2,vTexCoord,contrastLimits[2]);float intensityValue3=sample_and_apply_contrast_limits(channel3,vTexCoord,contrastLimits[3]);float intensityValue4=sample_and_apply_contrast_limits(channel4,vTexCoord,contrastLimits[4]);float intensityValue5=sample_and_apply_contrast_limits(channel5,vTexCoord,contrastLimits[5]);float intensityArray[6]=float[6](intensityValue0,intensityValue1,intensityValue2,intensityValue3,intensityValue4,intensityValue5);float intensityCombo=0.;for(int i=0;i<6;i++){intensityCombo+=max(0.,intensityArray[i]);}color=colormap(intensityCombo,opacity,useTransparentColor);geometry.uv=vTexCoord;DECKGL_FILTER_COLOR(color,geometry);}\";\nvar fs1 = \"#define SHADER_NAME xr-layer-fragment-shader\\nprecision highp float;\\n#define GLSLIFY 1\\nuniform sampler2D channel0;uniform sampler2D channel1;uniform sampler2D channel2;uniform sampler2D channel3;uniform sampler2D channel4;uniform sampler2D channel5;uniform vec2 contrastLimits[6];uniform vec3 colors[6];uniform float intensityArray[6];uniform float opacity;uniform float majorLensAxis;uniform float minorLensAxis;uniform vec2 lensCenter;uniform bool isLensOn;uniform int lensSelection;uniform vec3 lensBorderColor;uniform float lensBorderRadius;uniform vec3 transparentColor;uniform bool useTransparentColor;varying vec2 vTexCoord;void main(){float intensityValue0=sample_and_apply_contrast_limits(channel0,vTexCoord,contrastLimits[0]);float intensityValue1=sample_and_apply_contrast_limits(channel1,vTexCoord,contrastLimits[1]);float intensityValue2=sample_and_apply_contrast_limits(channel2,vTexCoord,contrastLimits[2]);float intensityValue3=sample_and_apply_contrast_limits(channel3,vTexCoord,contrastLimits[3]);float intensityValue4=sample_and_apply_contrast_limits(channel4,vTexCoord,contrastLimits[4]);float intensityValue5=sample_and_apply_contrast_limits(channel5,vTexCoord,contrastLimits[5]);bool isFragInLensBounds=frag_in_lens_bounds(lensCenter,vTexCoord,majorLensAxis,minorLensAxis,lensBorderRadius);bool isFragOnLensBounds=frag_on_lens_bounds(lensCenter,vTexCoord,majorLensAxis,minorLensAxis,lensBorderRadius);bool inLensAndUseLens=isLensOn&&isFragInLensBounds;vec3 rgbCombo=process_channel_intensity(intensityValue0,colors[0],0,inLensAndUseLens,lensSelection);rgbCombo+=process_channel_intensity(intensityValue1,colors[1],1,inLensAndUseLens,lensSelection);rgbCombo+=process_channel_intensity(intensityValue2,colors[2],2,inLensAndUseLens,lensSelection);rgbCombo+=process_channel_intensity(intensityValue3,colors[3],3,inLensAndUseLens,lensSelection);rgbCombo+=process_channel_intensity(intensityValue4,colors[4],4,inLensAndUseLens,lensSelection);rgbCombo+=process_channel_intensity(intensityValue5,colors[5],5,inLensAndUseLens,lensSelection);rgbCombo=(isLensOn&&isFragOnLensBounds)? lensBorderColor : rgbCombo;gl_FragColor=apply_opacity(rgbCombo,useTransparentColor,transparentColor,opacity);geometry.uv=vTexCoord;DECKGL_FILTER_COLOR(gl_FragColor,geometry);}\";\nvar fs2 = \"#version 300 es\\n#define SHADER_NAME xr-layer-fragment-shader\\nprecision highp float;precision highp int;precision highp SAMPLER_TYPE;\\n#define GLSLIFY 1\\nuniform SAMPLER_TYPE channel0;uniform SAMPLER_TYPE channel1;uniform SAMPLER_TYPE channel2;uniform SAMPLER_TYPE channel3;uniform SAMPLER_TYPE channel4;uniform SAMPLER_TYPE channel5;uniform vec2 contrastLimits[6];uniform vec3 colors[6];uniform float opacity;uniform float majorLensAxis;uniform float minorLensAxis;uniform vec2 lensCenter;uniform bool isLensOn;uniform int lensSelection;uniform vec3 lensBorderColor;uniform float lensBorderRadius;uniform vec3 transparentColor;uniform bool useTransparentColor;in vec2 vTexCoord;out vec4 color;void main(){float intensityValue0=sample_and_apply_contrast_limits(channel0,vTexCoord,contrastLimits[0]);float intensityValue1=sample_and_apply_contrast_limits(channel1,vTexCoord,contrastLimits[1]);float intensityValue2=sample_and_apply_contrast_limits(channel2,vTexCoord,contrastLimits[2]);float intensityValue3=sample_and_apply_contrast_limits(channel3,vTexCoord,contrastLimits[3]);float intensityValue4=sample_and_apply_contrast_limits(channel4,vTexCoord,contrastLimits[4]);float intensityValue5=sample_and_apply_contrast_limits(channel5,vTexCoord,contrastLimits[5]);float intensityArray[6]=float[6](intensityValue0,intensityValue1,intensityValue2,intensityValue3,intensityValue4,intensityValue5);bool isFragInLensBounds=frag_in_lens_bounds(lensCenter,vTexCoord,majorLensAxis,minorLensAxis,lensBorderRadius);bool isFragOnLensBounds=frag_on_lens_bounds(lensCenter,vTexCoord,majorLensAxis,minorLensAxis,lensBorderRadius);bool inLensAndUseLens=isLensOn&&isFragInLensBounds;vec3 rgbCombo=vec3(0.);for(int i=0;i<6;i++){rgbCombo+=process_channel_intensity(intensityArray[i],colors[i],i,inLensAndUseLens,lensSelection);}rgbCombo=(isLensOn&&isFragOnLensBounds)? lensBorderColor : rgbCombo;color=apply_opacity(rgbCombo,useTransparentColor,transparentColor,opacity);geometry.uv=vTexCoord;DECKGL_FILTER_COLOR(color,geometry);}\";\nvar vs1 = \"#define GLSLIFY 1\\n#define SHADER_NAME xr-layer-vertex-shader\\nattribute vec2 texCoords;attribute vec3 positions;attribute vec3 positions64Low;attribute vec3 instancePickingColors;varying vec2 vTexCoord;void main(void){geometry.worldPosition=positions;geometry.uv=texCoords;geometry.pickingColor=instancePickingColors;gl_Position=project_position_to_clipspace(positions,positions64Low,vec3(0.),geometry.position);DECKGL_FILTER_GL_POSITION(gl_Position,geometry);vTexCoord=texCoords;vec4 color=vec4(0.);DECKGL_FILTER_COLOR(color,geometry);}\";\nvar vs2 = \"#version 300 es\\n#define GLSLIFY 1\\n#define SHADER_NAME xr-layer-vertex-shader\\nin vec2 texCoords;in vec3 positions;in vec3 positions64Low;in vec3 instancePickingColors;out vec2 vTexCoord;void main(void){geometry.worldPosition=positions;geometry.uv=texCoords;geometry.pickingColor=instancePickingColors;gl_Position=project_position_to_clipspace(positions,positions64Low,vec3(0.),geometry.position);DECKGL_FILTER_GL_POSITION(gl_Position,geometry);vTexCoord=texCoords;vec4 color=vec4(0.);DECKGL_FILTER_COLOR(color,geometry);}\";\nvar fs$3 = \"#define GLSLIFY 1\\nvec4 jet(float x_17){const float e0=0.0;const vec4 v0=vec4(0,0,0.5137254901960784,1);const float e1=0.125;const vec4 v1=vec4(0,0.23529411764705882,0.6666666666666666,1);const float e2=0.375;const vec4 v2=vec4(0.0196078431372549,1,1,1);const float e3=0.625;const vec4 v3=vec4(1,1,0,1);const float e4=0.875;const vec4 v4=vec4(0.9803921568627451,0,0,1);const float e5=1.0;const vec4 v5=vec4(0.5019607843137255,0,0,1);float a0=smoothstep(e0,e1,x_17);float a1=smoothstep(e1,e2,x_17);float a2=smoothstep(e2,e3,x_17);float a3=smoothstep(e3,e4,x_17);float a4=smoothstep(e4,e5,x_17);return max(mix(v0,v1,a0)*step(e0,x_17)*step(x_17,e1),max(mix(v1,v2,a1)*step(e1,x_17)*step(x_17,e2),max(mix(v2,v3,a2)*step(e2,x_17)*step(x_17,e3),max(mix(v3,v4,a3)*step(e3,x_17)*step(x_17,e4),mix(v4,v5,a4)*step(e4,x_17)*step(x_17,e5)))));}vec4 hsv(float x_18){const float e0=0.0;const vec4 v0=vec4(1,0,0,1);const float e1=0.169;const vec4 v1=vec4(0.9921568627450981,1,0.00784313725490196,1);const float e2=0.173;const vec4 v2=vec4(0.9686274509803922,1,0.00784313725490196,1);const float e3=0.337;const vec4 v3=vec4(0,0.9882352941176471,0.01568627450980392,1);const float e4=0.341;const vec4 v4=vec4(0,0.9882352941176471,0.0392156862745098,1);const float e5=0.506;const vec4 v5=vec4(0.00392156862745098,0.9764705882352941,1,1);const float e6=0.671;const vec4 v6=vec4(0.00784313725490196,0,0.9921568627450981,1);const float e7=0.675;const vec4 v7=vec4(0.03137254901960784,0,0.9921568627450981,1);const float e8=0.839;const vec4 v8=vec4(1,0,0.984313725490196,1);const float e9=0.843;const vec4 v9=vec4(1,0,0.9607843137254902,1);const float e10=1.0;const vec4 v10=vec4(1,0,0.023529411764705882,1);float a0=smoothstep(e0,e1,x_18);float a1=smoothstep(e1,e2,x_18);float a2=smoothstep(e2,e3,x_18);float a3=smoothstep(e3,e4,x_18);float a4=smoothstep(e4,e5,x_18);float a5=smoothstep(e5,e6,x_18);float a6=smoothstep(e6,e7,x_18);float a7=smoothstep(e7,e8,x_18);float a8=smoothstep(e8,e9,x_18);float a9=smoothstep(e9,e10,x_18);return max(mix(v0,v1,a0)*step(e0,x_18)*step(x_18,e1),max(mix(v1,v2,a1)*step(e1,x_18)*step(x_18,e2),max(mix(v2,v3,a2)*step(e2,x_18)*step(x_18,e3),max(mix(v3,v4,a3)*step(e3,x_18)*step(x_18,e4),max(mix(v4,v5,a4)*step(e4,x_18)*step(x_18,e5),max(mix(v5,v6,a5)*step(e5,x_18)*step(x_18,e6),max(mix(v6,v7,a6)*step(e6,x_18)*step(x_18,e7),max(mix(v7,v8,a7)*step(e7,x_18)*step(x_18,e8),max(mix(v8,v9,a8)*step(e8,x_18)*step(x_18,e9),mix(v9,v10,a9)*step(e9,x_18)*step(x_18,e10))))))))));}vec4 hot(float x_13){const float e0=0.0;const vec4 v0=vec4(0,0,0,1);const float e1=0.3;const vec4 v1=vec4(0.9019607843137255,0,0,1);const float e2=0.6;const vec4 v2=vec4(1,0.8235294117647058,0,1);const float e3=1.0;const vec4 v3=vec4(1,1,1,1);float a0=smoothstep(e0,e1,x_13);float a1=smoothstep(e1,e2,x_13);float a2=smoothstep(e2,e3,x_13);return max(mix(v0,v1,a0)*step(e0,x_13)*step(x_13,e1),max(mix(v1,v2,a1)*step(e1,x_13)*step(x_13,e2),mix(v2,v3,a2)*step(e2,x_13)*step(x_13,e3)));}vec4 cool(float x_24){const float e0=0.0;const vec4 v0=vec4(0.49019607843137253,0,0.7019607843137254,1);const float e1=0.13;const vec4 v1=vec4(0.4549019607843137,0,0.8549019607843137,1);const float e2=0.25;const vec4 v2=vec4(0.3843137254901961,0.2901960784313726,0.9294117647058824,1);const float e3=0.38;const vec4 v3=vec4(0.26666666666666666,0.5725490196078431,0.9058823529411765,1);const float e4=0.5;const vec4 v4=vec4(0,0.8,0.7725490196078432,1);const float e5=0.63;const vec4 v5=vec4(0,0.9686274509803922,0.5725490196078431,1);const float e6=0.75;const vec4 v6=vec4(0,1,0.34509803921568627,1);const float e7=0.88;const vec4 v7=vec4(0.1568627450980392,1,0.03137254901960784,1);const float e8=1.0;const vec4 v8=vec4(0.5764705882352941,1,0,1);float a0=smoothstep(e0,e1,x_24);float a1=smoothstep(e1,e2,x_24);float a2=smoothstep(e2,e3,x_24);float a3=smoothstep(e3,e4,x_24);float a4=smoothstep(e4,e5,x_24);float a5=smoothstep(e5,e6,x_24);float a6=smoothstep(e6,e7,x_24);float a7=smoothstep(e7,e8,x_24);return max(mix(v0,v1,a0)*step(e0,x_24)*step(x_24,e1),max(mix(v1,v2,a1)*step(e1,x_24)*step(x_24,e2),max(mix(v2,v3,a2)*step(e2,x_24)*step(x_24,e3),max(mix(v3,v4,a3)*step(e3,x_24)*step(x_24,e4),max(mix(v4,v5,a4)*step(e4,x_24)*step(x_24,e5),max(mix(v5,v6,a5)*step(e5,x_24)*step(x_24,e6),max(mix(v6,v7,a6)*step(e6,x_24)*step(x_24,e7),mix(v7,v8,a7)*step(e7,x_24)*step(x_24,e8))))))));}vec4 spring(float x_5){const float e0=0.0;const vec4 v0=vec4(1,0,1,1);const float e1=1.0;const vec4 v1=vec4(1,1,0,1);float a0=smoothstep(e0,e1,x_5);return mix(v0,v1,a0)*step(e0,x_5)*step(x_5,e1);}vec4 summer(float x_12){const float e0=0.0;const vec4 v0=vec4(0,0.5019607843137255,0.4,1);const float e1=1.0;const vec4 v1=vec4(1,1,0.4,1);float a0=smoothstep(e0,e1,x_12);return mix(v0,v1,a0)*step(e0,x_12)*step(x_12,e1);}vec4 autumn(float x_25){const float e0=0.0;const vec4 v0=vec4(1,0,0,1);const float e1=1.0;const vec4 v1=vec4(1,1,0,1);float a0=smoothstep(e0,e1,x_25);return mix(v0,v1,a0)*step(e0,x_25)*step(x_25,e1);}vec4 winter(float x_16){const float e0=0.0;const vec4 v0=vec4(0,0,1,1);const float e1=1.0;const vec4 v1=vec4(0,1,0.5019607843137255,1);float a0=smoothstep(e0,e1,x_16);return mix(v0,v1,a0)*step(e0,x_16)*step(x_16,e1);}vec4 bone(float x_15){const float e0=0.0;const vec4 v0=vec4(0,0,0,1);const float e1=0.376;const vec4 v1=vec4(0.32941176470588235,0.32941176470588235,0.4549019607843137,1);const float e2=0.753;const vec4 v2=vec4(0.6627450980392157,0.7843137254901961,0.7843137254901961,1);const float e3=1.0;const vec4 v3=vec4(1,1,1,1);float a0=smoothstep(e0,e1,x_15);float a1=smoothstep(e1,e2,x_15);float a2=smoothstep(e2,e3,x_15);return max(mix(v0,v1,a0)*step(e0,x_15)*step(x_15,e1),max(mix(v1,v2,a1)*step(e1,x_15)*step(x_15,e2),mix(v2,v3,a2)*step(e2,x_15)*step(x_15,e3)));}vec4 copper(float x_10){const float e0=0.0;const vec4 v0=vec4(0,0,0,1);const float e1=0.804;const vec4 v1=vec4(1,0.6274509803921569,0.4,1);const float e2=1.0;const vec4 v2=vec4(1,0.7803921568627451,0.4980392156862745,1);float a0=smoothstep(e0,e1,x_10);float a1=smoothstep(e1,e2,x_10);return max(mix(v0,v1,a0)*step(e0,x_10)*step(x_10,e1),mix(v1,v2,a1)*step(e1,x_10)*step(x_10,e2));}vec4 greys(float x_4){const float e0=0.0;const vec4 v0=vec4(0,0,0,1);const float e1=1.0;const vec4 v1=vec4(1,1,1,1);float a0=smoothstep(e0,e1,x_4);return mix(v0,v1,a0)*step(e0,x_4)*step(x_4,e1);}vec4 yignbu(float x_32){const float e0=0.0;const vec4 v0=vec4(0.03137254901960784,0.11372549019607843,0.34509803921568627,1);const float e1=0.125;const vec4 v1=vec4(0.1450980392156863,0.20392156862745098,0.5803921568627451,1);const float e2=0.25;const vec4 v2=vec4(0.13333333333333333,0.3686274509803922,0.6588235294117647,1);const float e3=0.375;const vec4 v3=vec4(0.11372549019607843,0.5686274509803921,0.7529411764705882,1);const float e4=0.5;const vec4 v4=vec4(0.2549019607843137,0.7137254901960784,0.7686274509803922,1);const float e5=0.625;const vec4 v5=vec4(0.4980392156862745,0.803921568627451,0.7333333333333333,1);const float e6=0.75;const vec4 v6=vec4(0.7803921568627451,0.9137254901960784,0.7058823529411765,1);const float e7=0.875;const vec4 v7=vec4(0.9294117647058824,0.9725490196078431,0.8509803921568627,1);const float e8=1.0;const vec4 v8=vec4(1,1,0.8509803921568627,1);float a0=smoothstep(e0,e1,x_32);float a1=smoothstep(e1,e2,x_32);float a2=smoothstep(e2,e3,x_32);float a3=smoothstep(e3,e4,x_32);float a4=smoothstep(e4,e5,x_32);float a5=smoothstep(e5,e6,x_32);float a6=smoothstep(e6,e7,x_32);float a7=smoothstep(e7,e8,x_32);return max(mix(v0,v1,a0)*step(e0,x_32)*step(x_32,e1),max(mix(v1,v2,a1)*step(e1,x_32)*step(x_32,e2),max(mix(v2,v3,a2)*step(e2,x_32)*step(x_32,e3),max(mix(v3,v4,a3)*step(e3,x_32)*step(x_32,e4),max(mix(v4,v5,a4)*step(e4,x_32)*step(x_32,e5),max(mix(v5,v6,a5)*step(e5,x_32)*step(x_32,e6),max(mix(v6,v7,a6)*step(e6,x_32)*step(x_32,e7),mix(v7,v8,a7)*step(e7,x_32)*step(x_32,e8))))))));}vec4 greens(float x_34){const float e0=0.0;const vec4 v0=vec4(0,0.26666666666666666,0.10588235294117647,1);const float e1=0.125;const vec4 v1=vec4(0,0.42745098039215684,0.17254901960784313,1);const float e2=0.25;const vec4 v2=vec4(0.13725490196078433,0.5450980392156862,0.27058823529411763,1);const float e3=0.375;const vec4 v3=vec4(0.2549019607843137,0.6705882352941176,0.36470588235294116,1);const float e4=0.5;const vec4 v4=vec4(0.4549019607843137,0.7686274509803922,0.4627450980392157,1);const float e5=0.625;const vec4 v5=vec4(0.6313725490196078,0.8509803921568627,0.6078431372549019,1);const float e6=0.75;const vec4 v6=vec4(0.7803921568627451,0.9137254901960784,0.7529411764705882,1);const float e7=0.875;const vec4 v7=vec4(0.8980392156862745,0.9607843137254902,0.8784313725490196,1);const float e8=1.0;const vec4 v8=vec4(0.9686274509803922,0.9882352941176471,0.9607843137254902,1);float a0=smoothstep(e0,e1,x_34);float a1=smoothstep(e1,e2,x_34);float a2=smoothstep(e2,e3,x_34);float a3=smoothstep(e3,e4,x_34);float a4=smoothstep(e4,e5,x_34);float a5=smoothstep(e5,e6,x_34);float a6=smoothstep(e6,e7,x_34);float a7=smoothstep(e7,e8,x_34);return max(mix(v0,v1,a0)*step(e0,x_34)*step(x_34,e1),max(mix(v1,v2,a1)*step(e1,x_34)*step(x_34,e2),max(mix(v2,v3,a2)*step(e2,x_34)*step(x_34,e3),max(mix(v3,v4,a3)*step(e3,x_34)*step(x_34,e4),max(mix(v4,v5,a4)*step(e4,x_34)*step(x_34,e5),max(mix(v5,v6,a5)*step(e5,x_34)*step(x_34,e6),max(mix(v6,v7,a6)*step(e6,x_34)*step(x_34,e7),mix(v7,v8,a7)*step(e7,x_34)*step(x_34,e8))))))));}vec4 yiorrd(float x_41){const float e0=0.0;const vec4 v0=vec4(0.5019607843137255,0,0.14901960784313725,1);const float e1=0.125;const vec4 v1=vec4(0.7411764705882353,0,0.14901960784313725,1);const float e2=0.25;const vec4 v2=vec4(0.8901960784313725,0.10196078431372549,0.10980392156862745,1);const float e3=0.375;const vec4 v3=vec4(0.9882352941176471,0.3058823529411765,0.16470588235294117,1);const float e4=0.5;const vec4 v4=vec4(0.9921568627450981,0.5529411764705883,0.23529411764705882,1);const float e5=0.625;const vec4 v5=vec4(0.996078431372549,0.6980392156862745,0.2980392156862745,1);const float e6=0.75;const vec4 v6=vec4(0.996078431372549,0.8509803921568627,0.4627450980392157,1);const float e7=0.875;const vec4 v7=vec4(1,0.9294117647058824,0.6274509803921569,1);const float e8=1.0;const vec4 v8=vec4(1,1,0.8,1);float a0=smoothstep(e0,e1,x_41);float a1=smoothstep(e1,e2,x_41);float a2=smoothstep(e2,e3,x_41);float a3=smoothstep(e3,e4,x_41);float a4=smoothstep(e4,e5,x_41);float a5=smoothstep(e5,e6,x_41);float a6=smoothstep(e6,e7,x_41);float a7=smoothstep(e7,e8,x_41);return max(mix(v0,v1,a0)*step(e0,x_41)*step(x_41,e1),max(mix(v1,v2,a1)*step(e1,x_41)*step(x_41,e2),max(mix(v2,v3,a2)*step(e2,x_41)*step(x_41,e3),max(mix(v3,v4,a3)*step(e3,x_41)*step(x_41,e4),max(mix(v4,v5,a4)*step(e4,x_41)*step(x_41,e5),max(mix(v5,v6,a5)*step(e5,x_41)*step(x_41,e6),max(mix(v6,v7,a6)*step(e6,x_41)*step(x_41,e7),mix(v7,v8,a7)*step(e7,x_41)*step(x_41,e8))))))));}vec4 bluered(float x_23){const float e0=0.0;const vec4 v0=vec4(0,0,1,1);const float e1=1.0;const vec4 v1=vec4(1,0,0,1);float a0=smoothstep(e0,e1,x_23);return mix(v0,v1,a0)*step(e0,x_23)*step(x_23,e1);}vec4 rdbu(float x_1){const float e0=0.0;const vec4 v0=vec4(0.0196078431372549,0.0392156862745098,0.6745098039215687,1);const float e1=0.35;const vec4 v1=vec4(0.41568627450980394,0.5372549019607843,0.9686274509803922,1);const float e2=0.5;const vec4 v2=vec4(0.7450980392156863,0.7450980392156863,0.7450980392156863,1);const float e3=0.6;const vec4 v3=vec4(0.8627450980392157,0.6666666666666666,0.5176470588235295,1);const float e4=0.7;const vec4 v4=vec4(0.9019607843137255,0.5686274509803921,0.35294117647058826,1);const float e5=1.0;const vec4 v5=vec4(0.6980392156862745,0.0392156862745098,0.10980392156862745,1);float a0=smoothstep(e0,e1,x_1);float a1=smoothstep(e1,e2,x_1);float a2=smoothstep(e2,e3,x_1);float a3=smoothstep(e3,e4,x_1);float a4=smoothstep(e4,e5,x_1);return max(mix(v0,v1,a0)*step(e0,x_1)*step(x_1,e1),max(mix(v1,v2,a1)*step(e1,x_1)*step(x_1,e2),max(mix(v2,v3,a2)*step(e2,x_1)*step(x_1,e3),max(mix(v3,v4,a3)*step(e3,x_1)*step(x_1,e4),mix(v4,v5,a4)*step(e4,x_1)*step(x_1,e5)))));}vec4 picnic(float x_42){const float e0=0.0;const vec4 v0=vec4(0,0,1,1);const float e1=0.1;const vec4 v1=vec4(0.2,0.6,1,1);const float e2=0.2;const vec4 v2=vec4(0.4,0.8,1,1);const float e3=0.3;const vec4 v3=vec4(0.6,0.8,1,1);const float e4=0.4;const vec4 v4=vec4(0.8,0.8,1,1);const float e5=0.5;const vec4 v5=vec4(1,1,1,1);const float e6=0.6;const vec4 v6=vec4(1,0.8,1,1);const float e7=0.7;const vec4 v7=vec4(1,0.6,1,1);const float e8=0.8;const vec4 v8=vec4(1,0.4,0.8,1);const float e9=0.9;const vec4 v9=vec4(1,0.4,0.4,1);const float e10=1.0;const vec4 v10=vec4(1,0,0,1);float a0=smoothstep(e0,e1,x_42);float a1=smoothstep(e1,e2,x_42);float a2=smoothstep(e2,e3,x_42);float a3=smoothstep(e3,e4,x_42);float a4=smoothstep(e4,e5,x_42);float a5=smoothstep(e5,e6,x_42);float a6=smoothstep(e6,e7,x_42);float a7=smoothstep(e7,e8,x_42);float a8=smoothstep(e8,e9,x_42);float a9=smoothstep(e9,e10,x_42);return max(mix(v0,v1,a0)*step(e0,x_42)*step(x_42,e1),max(mix(v1,v2,a1)*step(e1,x_42)*step(x_42,e2),max(mix(v2,v3,a2)*step(e2,x_42)*step(x_42,e3),max(mix(v3,v4,a3)*step(e3,x_42)*step(x_42,e4),max(mix(v4,v5,a4)*step(e4,x_42)*step(x_42,e5),max(mix(v5,v6,a5)*step(e5,x_42)*step(x_42,e6),max(mix(v6,v7,a6)*step(e6,x_42)*step(x_42,e7),max(mix(v7,v8,a7)*step(e7,x_42)*step(x_42,e8),max(mix(v8,v9,a8)*step(e8,x_42)*step(x_42,e9),mix(v9,v10,a9)*step(e9,x_42)*step(x_42,e10))))))))));}vec4 rainbow(float x_31){const float e0=0.0;const vec4 v0=vec4(0.5882352941176471,0,0.35294117647058826,1);const float e1=0.125;const vec4 v1=vec4(0,0,0.7843137254901961,1);const float e2=0.25;const vec4 v2=vec4(0,0.09803921568627451,1,1);const float e3=0.375;const vec4 v3=vec4(0,0.596078431372549,1,1);const float e4=0.5;const vec4 v4=vec4(0.17254901960784313,1,0.5882352941176471,1);const float e5=0.625;const vec4 v5=vec4(0.592156862745098,1,0,1);const float e6=0.75;const vec4 v6=vec4(1,0.9176470588235294,0,1);const float e7=0.875;const vec4 v7=vec4(1,0.43529411764705883,0,1);const float e8=1.0;const vec4 v8=vec4(1,0,0,1);float a0=smoothstep(e0,e1,x_31);float a1=smoothstep(e1,e2,x_31);float a2=smoothstep(e2,e3,x_31);float a3=smoothstep(e3,e4,x_31);float a4=smoothstep(e4,e5,x_31);float a5=smoothstep(e5,e6,x_31);float a6=smoothstep(e6,e7,x_31);float a7=smoothstep(e7,e8,x_31);return max(mix(v0,v1,a0)*step(e0,x_31)*step(x_31,e1),max(mix(v1,v2,a1)*step(e1,x_31)*step(x_31,e2),max(mix(v2,v3,a2)*step(e2,x_31)*step(x_31,e3),max(mix(v3,v4,a3)*step(e3,x_31)*step(x_31,e4),max(mix(v4,v5,a4)*step(e4,x_31)*step(x_31,e5),max(mix(v5,v6,a5)*step(e5,x_31)*step(x_31,e6),max(mix(v6,v7,a6)*step(e6,x_31)*step(x_31,e7),mix(v7,v8,a7)*step(e7,x_31)*step(x_31,e8))))))));}vec4 portland(float x_21){const float e0=0.0;const vec4 v0=vec4(0.047058823529411764,0.2,0.5137254901960784,1);const float e1=0.25;const vec4 v1=vec4(0.0392156862745098,0.5333333333333333,0.7294117647058823,1);const float e2=0.5;const vec4 v2=vec4(0.9490196078431372,0.8274509803921568,0.2196078431372549,1);const float e3=0.75;const vec4 v3=vec4(0.9490196078431372,0.5607843137254902,0.2196078431372549,1);const float e4=1.0;const vec4 v4=vec4(0.8509803921568627,0.11764705882352941,0.11764705882352941,1);float a0=smoothstep(e0,e1,x_21);float a1=smoothstep(e1,e2,x_21);float a2=smoothstep(e2,e3,x_21);float a3=smoothstep(e3,e4,x_21);return max(mix(v0,v1,a0)*step(e0,x_21)*step(x_21,e1),max(mix(v1,v2,a1)*step(e1,x_21)*step(x_21,e2),max(mix(v2,v3,a2)*step(e2,x_21)*step(x_21,e3),mix(v3,v4,a3)*step(e3,x_21)*step(x_21,e4))));}vec4 blackbody(float x_38){const float e0=0.0;const vec4 v0=vec4(0,0,0,1);const float e1=0.2;const vec4 v1=vec4(0.9019607843137255,0,0,1);const float e2=0.4;const vec4 v2=vec4(0.9019607843137255,0.8235294117647058,0,1);const float e3=0.7;const vec4 v3=vec4(1,1,1,1);const float e4=1.0;const vec4 v4=vec4(0.6274509803921569,0.7843137254901961,1,1);float a0=smoothstep(e0,e1,x_38);float a1=smoothstep(e1,e2,x_38);float a2=smoothstep(e2,e3,x_38);float a3=smoothstep(e3,e4,x_38);return max(mix(v0,v1,a0)*step(e0,x_38)*step(x_38,e1),max(mix(v1,v2,a1)*step(e1,x_38)*step(x_38,e2),max(mix(v2,v3,a2)*step(e2,x_38)*step(x_38,e3),mix(v3,v4,a3)*step(e3,x_38)*step(x_38,e4))));}vec4 earth(float x_29){const float e0=0.0;const vec4 v0=vec4(0,0,0.5098039215686274,1);const float e1=0.1;const vec4 v1=vec4(0,0.7058823529411765,0.7058823529411765,1);const float e2=0.2;const vec4 v2=vec4(0.1568627450980392,0.8235294117647058,0.1568627450980392,1);const float e3=0.4;const vec4 v3=vec4(0.9019607843137255,0.9019607843137255,0.19607843137254902,1);const float e4=0.6;const vec4 v4=vec4(0.47058823529411764,0.27450980392156865,0.0784313725490196,1);const float e5=1.0;const vec4 v5=vec4(1,1,1,1);float a0=smoothstep(e0,e1,x_29);float a1=smoothstep(e1,e2,x_29);float a2=smoothstep(e2,e3,x_29);float a3=smoothstep(e3,e4,x_29);float a4=smoothstep(e4,e5,x_29);return max(mix(v0,v1,a0)*step(e0,x_29)*step(x_29,e1),max(mix(v1,v2,a1)*step(e1,x_29)*step(x_29,e2),max(mix(v2,v3,a2)*step(e2,x_29)*step(x_29,e3),max(mix(v3,v4,a3)*step(e3,x_29)*step(x_29,e4),mix(v4,v5,a4)*step(e4,x_29)*step(x_29,e5)))));}vec4 electric(float x_9){const float e0=0.0;const vec4 v0=vec4(0,0,0,1);const float e1=0.15;const vec4 v1=vec4(0.11764705882352941,0,0.39215686274509803,1);const float e2=0.4;const vec4 v2=vec4(0.47058823529411764,0,0.39215686274509803,1);const float e3=0.6;const vec4 v3=vec4(0.6274509803921569,0.35294117647058826,0,1);const float e4=0.8;const vec4 v4=vec4(0.9019607843137255,0.7843137254901961,0,1);const float e5=1.0;const vec4 v5=vec4(1,0.9803921568627451,0.8627450980392157,1);float a0=smoothstep(e0,e1,x_9);float a1=smoothstep(e1,e2,x_9);float a2=smoothstep(e2,e3,x_9);float a3=smoothstep(e3,e4,x_9);float a4=smoothstep(e4,e5,x_9);return max(mix(v0,v1,a0)*step(e0,x_9)*step(x_9,e1),max(mix(v1,v2,a1)*step(e1,x_9)*step(x_9,e2),max(mix(v2,v3,a2)*step(e2,x_9)*step(x_9,e3),max(mix(v3,v4,a3)*step(e3,x_9)*step(x_9,e4),mix(v4,v5,a4)*step(e4,x_9)*step(x_9,e5)))));}vec4 alpha(float x_0){const float e0=0.0;const vec4 v0=vec4(1,1,1,0);const float e1=1.0;const vec4 v1=vec4(1,1,1,1);float a0=smoothstep(e0,e1,x_0);return mix(v0,v1,a0)*step(e0,x_0)*step(x_0,e1);}vec4 viridis(float x_22){const float e0=0.0;const vec4 v0=vec4(0.26666666666666666,0.00392156862745098,0.32941176470588235,1);const float e1=0.13;const vec4 v1=vec4(0.2784313725490196,0.17254901960784313,0.47843137254901963,1);const float e2=0.25;const vec4 v2=vec4(0.23137254901960785,0.3176470588235294,0.5450980392156862,1);const float e3=0.38;const vec4 v3=vec4(0.17254901960784313,0.44313725490196076,0.5568627450980392,1);const float e4=0.5;const vec4 v4=vec4(0.12941176470588237,0.5647058823529412,0.5529411764705883,1);const float e5=0.63;const vec4 v5=vec4(0.15294117647058825,0.6784313725490196,0.5058823529411764,1);const float e6=0.75;const vec4 v6=vec4(0.3607843137254902,0.7843137254901961,0.38823529411764707,1);const float e7=0.88;const vec4 v7=vec4(0.6666666666666666,0.8627450980392157,0.19607843137254902,1);const float e8=1.0;const vec4 v8=vec4(0.9921568627450981,0.9058823529411765,0.1450980392156863,1);float a0=smoothstep(e0,e1,x_22);float a1=smoothstep(e1,e2,x_22);float a2=smoothstep(e2,e3,x_22);float a3=smoothstep(e3,e4,x_22);float a4=smoothstep(e4,e5,x_22);float a5=smoothstep(e5,e6,x_22);float a6=smoothstep(e6,e7,x_22);float a7=smoothstep(e7,e8,x_22);return max(mix(v0,v1,a0)*step(e0,x_22)*step(x_22,e1),max(mix(v1,v2,a1)*step(e1,x_22)*step(x_22,e2),max(mix(v2,v3,a2)*step(e2,x_22)*step(x_22,e3),max(mix(v3,v4,a3)*step(e3,x_22)*step(x_22,e4),max(mix(v4,v5,a4)*step(e4,x_22)*step(x_22,e5),max(mix(v5,v6,a5)*step(e5,x_22)*step(x_22,e6),max(mix(v6,v7,a6)*step(e6,x_22)*step(x_22,e7),mix(v7,v8,a7)*step(e7,x_22)*step(x_22,e8))))))));}vec4 inferno(float x_30){const float e0=0.0;const vec4 v0=vec4(0,0,0.01568627450980392,1);const float e1=0.13;const vec4 v1=vec4(0.12156862745098039,0.047058823529411764,0.2823529411764706,1);const float e2=0.25;const vec4 v2=vec4(0.3333333333333333,0.058823529411764705,0.42745098039215684,1);const float e3=0.38;const vec4 v3=vec4(0.5333333333333333,0.13333333333333333,0.41568627450980394,1);const float e4=0.5;const vec4 v4=vec4(0.7294117647058823,0.21176470588235294,0.3333333333333333,1);const float e5=0.63;const vec4 v5=vec4(0.8901960784313725,0.34901960784313724,0.2,1);const float e6=0.75;const vec4 v6=vec4(0.9764705882352941,0.5490196078431373,0.0392156862745098,1);const float e7=0.88;const vec4 v7=vec4(0.9764705882352941,0.788235294117647,0.19607843137254902,1);const float e8=1.0;const vec4 v8=vec4(0.9882352941176471,1,0.6431372549019608,1);float a0=smoothstep(e0,e1,x_30);float a1=smoothstep(e1,e2,x_30);float a2=smoothstep(e2,e3,x_30);float a3=smoothstep(e3,e4,x_30);float a4=smoothstep(e4,e5,x_30);float a5=smoothstep(e5,e6,x_30);float a6=smoothstep(e6,e7,x_30);float a7=smoothstep(e7,e8,x_30);return max(mix(v0,v1,a0)*step(e0,x_30)*step(x_30,e1),max(mix(v1,v2,a1)*step(e1,x_30)*step(x_30,e2),max(mix(v2,v3,a2)*step(e2,x_30)*step(x_30,e3),max(mix(v3,v4,a3)*step(e3,x_30)*step(x_30,e4),max(mix(v4,v5,a4)*step(e4,x_30)*step(x_30,e5),max(mix(v5,v6,a5)*step(e5,x_30)*step(x_30,e6),max(mix(v6,v7,a6)*step(e6,x_30)*step(x_30,e7),mix(v7,v8,a7)*step(e7,x_30)*step(x_30,e8))))))));}vec4 magma(float x_33){const float e0=0.0;const vec4 v0=vec4(0,0,0.01568627450980392,1);const float e1=0.13;const vec4 v1=vec4(0.10980392156862745,0.06274509803921569,0.26666666666666666,1);const float e2=0.25;const vec4 v2=vec4(0.30980392156862746,0.07058823529411765,0.4823529411764706,1);const float e3=0.38;const vec4 v3=vec4(0.5058823529411764,0.1450980392156863,0.5058823529411764,1);const float e4=0.5;const vec4 v4=vec4(0.7098039215686275,0.21176470588235294,0.47843137254901963,1);const float e5=0.63;const vec4 v5=vec4(0.8980392156862745,0.3137254901960784,0.39215686274509803,1);const float e6=0.75;const vec4 v6=vec4(0.984313725490196,0.5294117647058824,0.3803921568627451,1);const float e7=0.88;const vec4 v7=vec4(0.996078431372549,0.7607843137254902,0.5294117647058824,1);const float e8=1.0;const vec4 v8=vec4(0.9882352941176471,0.9921568627450981,0.7490196078431373,1);float a0=smoothstep(e0,e1,x_33);float a1=smoothstep(e1,e2,x_33);float a2=smoothstep(e2,e3,x_33);float a3=smoothstep(e3,e4,x_33);float a4=smoothstep(e4,e5,x_33);float a5=smoothstep(e5,e6,x_33);float a6=smoothstep(e6,e7,x_33);float a7=smoothstep(e7,e8,x_33);return max(mix(v0,v1,a0)*step(e0,x_33)*step(x_33,e1),max(mix(v1,v2,a1)*step(e1,x_33)*step(x_33,e2),max(mix(v2,v3,a2)*step(e2,x_33)*step(x_33,e3),max(mix(v3,v4,a3)*step(e3,x_33)*step(x_33,e4),max(mix(v4,v5,a4)*step(e4,x_33)*step(x_33,e5),max(mix(v5,v6,a5)*step(e5,x_33)*step(x_33,e6),max(mix(v6,v7,a6)*step(e6,x_33)*step(x_33,e7),mix(v7,v8,a7)*step(e7,x_33)*step(x_33,e8))))))));}vec4 plasma(float x_3){const float e0=0.0;const vec4 v0=vec4(0.050980392156862744,0.03137254901960784,0.5294117647058824,1);const float e1=0.13;const vec4 v1=vec4(0.29411764705882354,0.011764705882352941,0.6313725490196078,1);const float e2=0.25;const vec4 v2=vec4(0.49019607843137253,0.011764705882352941,0.6588235294117647,1);const float e3=0.38;const vec4 v3=vec4(0.6588235294117647,0.13333333333333333,0.5882352941176471,1);const float e4=0.5;const vec4 v4=vec4(0.796078431372549,0.27450980392156865,0.4745098039215686,1);const float e5=0.63;const vec4 v5=vec4(0.8980392156862745,0.4196078431372549,0.36470588235294116,1);const float e6=0.75;const vec4 v6=vec4(0.9725490196078431,0.5803921568627451,0.2549019607843137,1);const float e7=0.88;const vec4 v7=vec4(0.9921568627450981,0.7647058823529411,0.1568627450980392,1);const float e8=1.0;const vec4 v8=vec4(0.9411764705882353,0.9764705882352941,0.12941176470588237,1);float a0=smoothstep(e0,e1,x_3);float a1=smoothstep(e1,e2,x_3);float a2=smoothstep(e2,e3,x_3);float a3=smoothstep(e3,e4,x_3);float a4=smoothstep(e4,e5,x_3);float a5=smoothstep(e5,e6,x_3);float a6=smoothstep(e6,e7,x_3);float a7=smoothstep(e7,e8,x_3);return max(mix(v0,v1,a0)*step(e0,x_3)*step(x_3,e1),max(mix(v1,v2,a1)*step(e1,x_3)*step(x_3,e2),max(mix(v2,v3,a2)*step(e2,x_3)*step(x_3,e3),max(mix(v3,v4,a3)*step(e3,x_3)*step(x_3,e4),max(mix(v4,v5,a4)*step(e4,x_3)*step(x_3,e5),max(mix(v5,v6,a5)*step(e5,x_3)*step(x_3,e6),max(mix(v6,v7,a6)*step(e6,x_3)*step(x_3,e7),mix(v7,v8,a7)*step(e7,x_3)*step(x_3,e8))))))));}vec4 warm(float x_43){const float e0=0.0;const vec4 v0=vec4(0.49019607843137253,0,0.7019607843137254,1);const float e1=0.13;const vec4 v1=vec4(0.6745098039215687,0,0.7333333333333333,1);const float e2=0.25;const vec4 v2=vec4(0.8588235294117647,0,0.6666666666666666,1);const float e3=0.38;const vec4 v3=vec4(1,0,0.5098039215686274,1);const float e4=0.5;const vec4 v4=vec4(1,0.24705882352941178,0.2901960784313726,1);const float e5=0.63;const vec4 v5=vec4(1,0.4823529411764706,0,1);const float e6=0.75;const vec4 v6=vec4(0.9176470588235294,0.6901960784313725,0,1);const float e7=0.88;const vec4 v7=vec4(0.7450980392156863,0.8941176470588236,0,1);const float e8=1.0;const vec4 v8=vec4(0.5764705882352941,1,0,1);float a0=smoothstep(e0,e1,x_43);float a1=smoothstep(e1,e2,x_43);float a2=smoothstep(e2,e3,x_43);float a3=smoothstep(e3,e4,x_43);float a4=smoothstep(e4,e5,x_43);float a5=smoothstep(e5,e6,x_43);float a6=smoothstep(e6,e7,x_43);float a7=smoothstep(e7,e8,x_43);return max(mix(v0,v1,a0)*step(e0,x_43)*step(x_43,e1),max(mix(v1,v2,a1)*step(e1,x_43)*step(x_43,e2),max(mix(v2,v3,a2)*step(e2,x_43)*step(x_43,e3),max(mix(v3,v4,a3)*step(e3,x_43)*step(x_43,e4),max(mix(v4,v5,a4)*step(e4,x_43)*step(x_43,e5),max(mix(v5,v6,a5)*step(e5,x_43)*step(x_43,e6),max(mix(v6,v7,a6)*step(e6,x_43)*step(x_43,e7),mix(v7,v8,a7)*step(e7,x_43)*step(x_43,e8))))))));}vec4 rainbow_soft_1310269270(float x_14){const float e0=0.0;const vec4 v0=vec4(0.49019607843137253,0,0.7019607843137254,1);const float e1=0.1;const vec4 v1=vec4(0.7803921568627451,0,0.7058823529411765,1);const float e2=0.2;const vec4 v2=vec4(1,0,0.4745098039215686,1);const float e3=0.3;const vec4 v3=vec4(1,0.4235294117647059,0,1);const float e4=0.4;const vec4 v4=vec4(0.8705882352941177,0.7607843137254902,0,1);const float e5=0.5;const vec4 v5=vec4(0.5882352941176471,1,0,1);const float e6=0.6;const vec4 v6=vec4(0,1,0.21568627450980393,1);const float e7=0.7;const vec4 v7=vec4(0,0.9647058823529412,0.5882352941176471,1);const float e8=0.8;const vec4 v8=vec4(0.19607843137254902,0.6549019607843137,0.8705882352941177,1);const float e9=0.9;const vec4 v9=vec4(0.403921568627451,0.2,0.9215686274509803,1);const float e10=1.0;const vec4 v10=vec4(0.48627450980392156,0,0.7294117647058823,1);float a0=smoothstep(e0,e1,x_14);float a1=smoothstep(e1,e2,x_14);float a2=smoothstep(e2,e3,x_14);float a3=smoothstep(e3,e4,x_14);float a4=smoothstep(e4,e5,x_14);float a5=smoothstep(e5,e6,x_14);float a6=smoothstep(e6,e7,x_14);float a7=smoothstep(e7,e8,x_14);float a8=smoothstep(e8,e9,x_14);float a9=smoothstep(e9,e10,x_14);return max(mix(v0,v1,a0)*step(e0,x_14)*step(x_14,e1),max(mix(v1,v2,a1)*step(e1,x_14)*step(x_14,e2),max(mix(v2,v3,a2)*step(e2,x_14)*step(x_14,e3),max(mix(v3,v4,a3)*step(e3,x_14)*step(x_14,e4),max(mix(v4,v5,a4)*step(e4,x_14)*step(x_14,e5),max(mix(v5,v6,a5)*step(e5,x_14)*step(x_14,e6),max(mix(v6,v7,a6)*step(e6,x_14)*step(x_14,e7),max(mix(v7,v8,a7)*step(e7,x_14)*step(x_14,e8),max(mix(v8,v9,a8)*step(e8,x_14)*step(x_14,e9),mix(v9,v10,a9)*step(e9,x_14)*step(x_14,e10))))))))));}vec4 bathymetry(float x_36){const float e0=0.0;const vec4 v0=vec4(0.1568627450980392,0.10196078431372549,0.17254901960784313,1);const float e1=0.13;const vec4 v1=vec4(0.23137254901960785,0.19215686274509805,0.35294117647058826,1);const float e2=0.25;const vec4 v2=vec4(0.25098039215686274,0.2980392156862745,0.5450980392156862,1);const float e3=0.38;const vec4 v3=vec4(0.24705882352941178,0.43137254901960786,0.592156862745098,1);const float e4=0.5;const vec4 v4=vec4(0.2823529411764706,0.5568627450980392,0.6196078431372549,1);const float e5=0.63;const vec4 v5=vec4(0.3333333333333333,0.6823529411764706,0.6392156862745098,1);const float e6=0.75;const vec4 v6=vec4(0.47058823529411764,0.807843137254902,0.6392156862745098,1);const float e7=0.88;const vec4 v7=vec4(0.7333333333333333,0.9019607843137255,0.6745098039215687,1);const float e8=1.0;const vec4 v8=vec4(0.9921568627450981,0.996078431372549,0.8,1);float a0=smoothstep(e0,e1,x_36);float a1=smoothstep(e1,e2,x_36);float a2=smoothstep(e2,e3,x_36);float a3=smoothstep(e3,e4,x_36);float a4=smoothstep(e4,e5,x_36);float a5=smoothstep(e5,e6,x_36);float a6=smoothstep(e6,e7,x_36);float a7=smoothstep(e7,e8,x_36);return max(mix(v0,v1,a0)*step(e0,x_36)*step(x_36,e1),max(mix(v1,v2,a1)*step(e1,x_36)*step(x_36,e2),max(mix(v2,v3,a2)*step(e2,x_36)*step(x_36,e3),max(mix(v3,v4,a3)*step(e3,x_36)*step(x_36,e4),max(mix(v4,v5,a4)*step(e4,x_36)*step(x_36,e5),max(mix(v5,v6,a5)*step(e5,x_36)*step(x_36,e6),max(mix(v6,v7,a6)*step(e6,x_36)*step(x_36,e7),mix(v7,v8,a7)*step(e7,x_36)*step(x_36,e8))))))));}vec4 cdom(float x_7){const float e0=0.0;const vec4 v0=vec4(0.1843137254901961,0.058823529411764705,0.24313725490196078,1);const float e1=0.13;const vec4 v1=vec4(0.3411764705882353,0.09019607843137255,0.33725490196078434,1);const float e2=0.25;const vec4 v2=vec4(0.5098039215686274,0.10980392156862745,0.38823529411764707,1);const float e3=0.38;const vec4 v3=vec4(0.6705882352941176,0.1607843137254902,0.3764705882352941,1);const float e4=0.5;const vec4 v4=vec4(0.807843137254902,0.2627450980392157,0.33725490196078434,1);const float e5=0.63;const vec4 v5=vec4(0.9019607843137255,0.41568627450980394,0.32941176470588235,1);const float e6=0.75;const vec4 v6=vec4(0.9490196078431372,0.5843137254901961,0.403921568627451,1);const float e7=0.88;const vec4 v7=vec4(0.9764705882352941,0.7568627450980392,0.5294117647058824,1);const float e8=1.0;const vec4 v8=vec4(0.996078431372549,0.9294117647058824,0.6901960784313725,1);float a0=smoothstep(e0,e1,x_7);float a1=smoothstep(e1,e2,x_7);float a2=smoothstep(e2,e3,x_7);float a3=smoothstep(e3,e4,x_7);float a4=smoothstep(e4,e5,x_7);float a5=smoothstep(e5,e6,x_7);float a6=smoothstep(e6,e7,x_7);float a7=smoothstep(e7,e8,x_7);return max(mix(v0,v1,a0)*step(e0,x_7)*step(x_7,e1),max(mix(v1,v2,a1)*step(e1,x_7)*step(x_7,e2),max(mix(v2,v3,a2)*step(e2,x_7)*step(x_7,e3),max(mix(v3,v4,a3)*step(e3,x_7)*step(x_7,e4),max(mix(v4,v5,a4)*step(e4,x_7)*step(x_7,e5),max(mix(v5,v6,a5)*step(e5,x_7)*step(x_7,e6),max(mix(v6,v7,a6)*step(e6,x_7)*step(x_7,e7),mix(v7,v8,a7)*step(e7,x_7)*step(x_7,e8))))))));}vec4 chlorophyll(float x_6){const float e0=0.0;const vec4 v0=vec4(0.07058823529411765,0.1411764705882353,0.0784313725490196,1);const float e1=0.13;const vec4 v1=vec4(0.09803921568627451,0.24705882352941178,0.1607843137254902,1);const float e2=0.25;const vec4 v2=vec4(0.09411764705882353,0.3568627450980392,0.23137254901960785,1);const float e3=0.38;const vec4 v3=vec4(0.050980392156862744,0.4666666666666667,0.2823529411764706,1);const float e4=0.5;const vec4 v4=vec4(0.07058823529411765,0.5803921568627451,0.3137254901960784,1);const float e5=0.63;const vec4 v5=vec4(0.3137254901960784,0.6784313725490196,0.34901960784313724,1);const float e6=0.75;const vec4 v6=vec4(0.5176470588235295,0.7686274509803922,0.47843137254901963,1);const float e7=0.88;const vec4 v7=vec4(0.6862745098039216,0.8666666666666667,0.6352941176470588,1);const float e8=1.0;const vec4 v8=vec4(0.8431372549019608,0.9764705882352941,0.8156862745098039,1);float a0=smoothstep(e0,e1,x_6);float a1=smoothstep(e1,e2,x_6);float a2=smoothstep(e2,e3,x_6);float a3=smoothstep(e3,e4,x_6);float a4=smoothstep(e4,e5,x_6);float a5=smoothstep(e5,e6,x_6);float a6=smoothstep(e6,e7,x_6);float a7=smoothstep(e7,e8,x_6);return max(mix(v0,v1,a0)*step(e0,x_6)*step(x_6,e1),max(mix(v1,v2,a1)*step(e1,x_6)*step(x_6,e2),max(mix(v2,v3,a2)*step(e2,x_6)*step(x_6,e3),max(mix(v3,v4,a3)*step(e3,x_6)*step(x_6,e4),max(mix(v4,v5,a4)*step(e4,x_6)*step(x_6,e5),max(mix(v5,v6,a5)*step(e5,x_6)*step(x_6,e6),max(mix(v6,v7,a6)*step(e6,x_6)*step(x_6,e7),mix(v7,v8,a7)*step(e7,x_6)*step(x_6,e8))))))));}vec4 density(float x_19){const float e0=0.0;const vec4 v0=vec4(0.21176470588235294,0.054901960784313725,0.1411764705882353,1);const float e1=0.13;const vec4 v1=vec4(0.34901960784313724,0.09019607843137255,0.3137254901960784,1);const float e2=0.25;const vec4 v2=vec4(0.43137254901960786,0.17647058823529413,0.5176470588235295,1);const float e3=0.38;const vec4 v3=vec4(0.47058823529411764,0.30196078431372547,0.6980392156862745,1);const float e4=0.5;const vec4 v4=vec4(0.47058823529411764,0.44313725490196076,0.8352941176470589,1);const float e5=0.63;const vec4 v5=vec4(0.45098039215686275,0.592156862745098,0.8941176470588236,1);const float e6=0.75;const vec4 v6=vec4(0.5254901960784314,0.7254901960784313,0.8901960784313725,1);const float e7=0.88;const vec4 v7=vec4(0.6941176470588235,0.8392156862745098,0.8901960784313725,1);const float e8=1.0;const vec4 v8=vec4(0.9019607843137255,0.9450980392156862,0.9450980392156862,1);float a0=smoothstep(e0,e1,x_19);float a1=smoothstep(e1,e2,x_19);float a2=smoothstep(e2,e3,x_19);float a3=smoothstep(e3,e4,x_19);float a4=smoothstep(e4,e5,x_19);float a5=smoothstep(e5,e6,x_19);float a6=smoothstep(e6,e7,x_19);float a7=smoothstep(e7,e8,x_19);return max(mix(v0,v1,a0)*step(e0,x_19)*step(x_19,e1),max(mix(v1,v2,a1)*step(e1,x_19)*step(x_19,e2),max(mix(v2,v3,a2)*step(e2,x_19)*step(x_19,e3),max(mix(v3,v4,a3)*step(e3,x_19)*step(x_19,e4),max(mix(v4,v5,a4)*step(e4,x_19)*step(x_19,e5),max(mix(v5,v6,a5)*step(e5,x_19)*step(x_19,e6),max(mix(v6,v7,a6)*step(e6,x_19)*step(x_19,e7),mix(v7,v8,a7)*step(e7,x_19)*step(x_19,e8))))))));}vec4 freesurface_blue_3154355989(float x_35){const float e0=0.0;const vec4 v0=vec4(0.11764705882352941,0.01568627450980392,0.43137254901960786,1);const float e1=0.13;const vec4 v1=vec4(0.1843137254901961,0.054901960784313725,0.6901960784313725,1);const float e2=0.25;const vec4 v2=vec4(0.1607843137254902,0.17647058823529413,0.9254901960784314,1);const float e3=0.38;const vec4 v3=vec4(0.09803921568627451,0.38823529411764707,0.8313725490196079,1);const float e4=0.5;const vec4 v4=vec4(0.26666666666666666,0.5137254901960784,0.7843137254901961,1);const float e5=0.63;const vec4 v5=vec4(0.4470588235294118,0.611764705882353,0.7725490196078432,1);const float e6=0.75;const vec4 v6=vec4(0.615686274509804,0.7098039215686275,0.796078431372549,1);const float e7=0.88;const vec4 v7=vec4(0.7843137254901961,0.8156862745098039,0.8470588235294118,1);const float e8=1.0;const vec4 v8=vec4(0.9450980392156862,0.9294117647058824,0.9254901960784314,1);float a0=smoothstep(e0,e1,x_35);float a1=smoothstep(e1,e2,x_35);float a2=smoothstep(e2,e3,x_35);float a3=smoothstep(e3,e4,x_35);float a4=smoothstep(e4,e5,x_35);float a5=smoothstep(e5,e6,x_35);float a6=smoothstep(e6,e7,x_35);float a7=smoothstep(e7,e8,x_35);return max(mix(v0,v1,a0)*step(e0,x_35)*step(x_35,e1),max(mix(v1,v2,a1)*step(e1,x_35)*step(x_35,e2),max(mix(v2,v3,a2)*step(e2,x_35)*step(x_35,e3),max(mix(v3,v4,a3)*step(e3,x_35)*step(x_35,e4),max(mix(v4,v5,a4)*step(e4,x_35)*step(x_35,e5),max(mix(v5,v6,a5)*step(e5,x_35)*step(x_35,e6),max(mix(v6,v7,a6)*step(e6,x_35)*step(x_35,e7),mix(v7,v8,a7)*step(e7,x_35)*step(x_35,e8))))))));}vec4 freesurface_red_1679163293(float x_20){const float e0=0.0;const vec4 v0=vec4(0.23529411764705882,0.03529411764705882,0.07058823529411765,1);const float e1=0.13;const vec4 v1=vec4(0.39215686274509803,0.06666666666666667,0.10588235294117647,1);const float e2=0.25;const vec4 v2=vec4(0.5568627450980392,0.0784313725490196,0.11372549019607843,1);const float e3=0.38;const vec4 v3=vec4(0.6941176470588235,0.16862745098039217,0.10588235294117647,1);const float e4=0.5;const vec4 v4=vec4(0.7529411764705882,0.3411764705882353,0.24705882352941178,1);const float e5=0.63;const vec4 v5=vec4(0.803921568627451,0.49019607843137253,0.4117647058823529,1);const float e6=0.75;const vec4 v6=vec4(0.8470588235294118,0.6352941176470588,0.5803921568627451,1);const float e7=0.88;const vec4 v7=vec4(0.8901960784313725,0.7803921568627451,0.7568627450980392,1);const float e8=1.0;const vec4 v8=vec4(0.9450980392156862,0.9294117647058824,0.9254901960784314,1);float a0=smoothstep(e0,e1,x_20);float a1=smoothstep(e1,e2,x_20);float a2=smoothstep(e2,e3,x_20);float a3=smoothstep(e3,e4,x_20);float a4=smoothstep(e4,e5,x_20);float a5=smoothstep(e5,e6,x_20);float a6=smoothstep(e6,e7,x_20);float a7=smoothstep(e7,e8,x_20);return max(mix(v0,v1,a0)*step(e0,x_20)*step(x_20,e1),max(mix(v1,v2,a1)*step(e1,x_20)*step(x_20,e2),max(mix(v2,v3,a2)*step(e2,x_20)*step(x_20,e3),max(mix(v3,v4,a3)*step(e3,x_20)*step(x_20,e4),max(mix(v4,v5,a4)*step(e4,x_20)*step(x_20,e5),max(mix(v5,v6,a5)*step(e5,x_20)*step(x_20,e6),max(mix(v6,v7,a6)*step(e6,x_20)*step(x_20,e7),mix(v7,v8,a7)*step(e7,x_20)*step(x_20,e8))))))));}vec4 oxygen(float x_11){const float e0=0.0;const vec4 v0=vec4(0.25098039215686274,0.0196078431372549,0.0196078431372549,1);const float e1=0.13;const vec4 v1=vec4(0.41568627450980394,0.023529411764705882,0.058823529411764705,1);const float e2=0.25;const vec4 v2=vec4(0.5647058823529412,0.10196078431372549,0.027450980392156862,1);const float e3=0.38;const vec4 v3=vec4(0.6588235294117647,0.25098039215686274,0.011764705882352941,1);const float e4=0.5;const vec4 v4=vec4(0.7372549019607844,0.39215686274509803,0.01568627450980392,1);const float e5=0.63;const vec4 v5=vec4(0.807843137254902,0.5333333333333333,0.043137254901960784,1);const float e6=0.75;const vec4 v6=vec4(0.8627450980392157,0.6823529411764706,0.09803921568627451,1);const float e7=0.88;const vec4 v7=vec4(0.9058823529411765,0.8431372549019608,0.17254901960784313,1);const float e8=1.0;const vec4 v8=vec4(0.9725490196078431,0.996078431372549,0.4117647058823529,1);float a0=smoothstep(e0,e1,x_11);float a1=smoothstep(e1,e2,x_11);float a2=smoothstep(e2,e3,x_11);float a3=smoothstep(e3,e4,x_11);float a4=smoothstep(e4,e5,x_11);float a5=smoothstep(e5,e6,x_11);float a6=smoothstep(e6,e7,x_11);float a7=smoothstep(e7,e8,x_11);return max(mix(v0,v1,a0)*step(e0,x_11)*step(x_11,e1),max(mix(v1,v2,a1)*step(e1,x_11)*step(x_11,e2),max(mix(v2,v3,a2)*step(e2,x_11)*step(x_11,e3),max(mix(v3,v4,a3)*step(e3,x_11)*step(x_11,e4),max(mix(v4,v5,a4)*step(e4,x_11)*step(x_11,e5),max(mix(v5,v6,a5)*step(e5,x_11)*step(x_11,e6),max(mix(v6,v7,a6)*step(e6,x_11)*step(x_11,e7),mix(v7,v8,a7)*step(e7,x_11)*step(x_11,e8))))))));}vec4 par(float x_28){const float e0=0.0;const vec4 v0=vec4(0.2,0.0784313725490196,0.09411764705882353,1);const float e1=0.13;const vec4 v1=vec4(0.35294117647058826,0.12549019607843137,0.13725490196078433,1);const float e2=0.25;const vec4 v2=vec4(0.5058823529411764,0.17254901960784313,0.13333333333333333,1);const float e3=0.38;const vec4 v3=vec4(0.6235294117647059,0.26666666666666666,0.09803921568627451,1);const float e4=0.5;const vec4 v4=vec4(0.7137254901960784,0.38823529411764707,0.07450980392156863,1);const float e5=0.63;const vec4 v5=vec4(0.7803921568627451,0.5254901960784314,0.08627450980392157,1);const float e6=0.75;const vec4 v6=vec4(0.8313725490196079,0.6705882352941176,0.13725490196078433,1);const float e7=0.88;const vec4 v7=vec4(0.8666666666666667,0.8235294117647058,0.21176470588235294,1);const float e8=1.0;const vec4 v8=vec4(0.8823529411764706,0.9921568627450981,0.29411764705882354,1);float a0=smoothstep(e0,e1,x_28);float a1=smoothstep(e1,e2,x_28);float a2=smoothstep(e2,e3,x_28);float a3=smoothstep(e3,e4,x_28);float a4=smoothstep(e4,e5,x_28);float a5=smoothstep(e5,e6,x_28);float a6=smoothstep(e6,e7,x_28);float a7=smoothstep(e7,e8,x_28);return max(mix(v0,v1,a0)*step(e0,x_28)*step(x_28,e1),max(mix(v1,v2,a1)*step(e1,x_28)*step(x_28,e2),max(mix(v2,v3,a2)*step(e2,x_28)*step(x_28,e3),max(mix(v3,v4,a3)*step(e3,x_28)*step(x_28,e4),max(mix(v4,v5,a4)*step(e4,x_28)*step(x_28,e5),max(mix(v5,v6,a5)*step(e5,x_28)*step(x_28,e6),max(mix(v6,v7,a6)*step(e6,x_28)*step(x_28,e7),mix(v7,v8,a7)*step(e7,x_28)*step(x_28,e8))))))));}vec4 phase(float x_39){const float e0=0.0;const vec4 v0=vec4(0.5686274509803921,0.4117647058823529,0.07058823529411765,1);const float e1=0.13;const vec4 v1=vec4(0.7215686274509804,0.2784313725490196,0.14901960784313725,1);const float e2=0.25;const vec4 v2=vec4(0.7294117647058823,0.22745098039215686,0.45098039215686275,1);const float e3=0.38;const vec4 v3=vec4(0.6274509803921569,0.2784313725490196,0.7254901960784313,1);const float e4=0.5;const vec4 v4=vec4(0.43137254901960786,0.3803921568627451,0.8549019607843137,1);const float e5=0.63;const vec4 v5=vec4(0.19607843137254902,0.4823529411764706,0.6431372549019608,1);const float e6=0.75;const vec4 v6=vec4(0.12156862745098039,0.5137254901960784,0.43137254901960786,1);const float e7=0.88;const vec4 v7=vec4(0.30196078431372547,0.5058823529411764,0.13333333333333333,1);const float e8=1.0;const vec4 v8=vec4(0.5686274509803921,0.4117647058823529,0.07058823529411765,1);float a0=smoothstep(e0,e1,x_39);float a1=smoothstep(e1,e2,x_39);float a2=smoothstep(e2,e3,x_39);float a3=smoothstep(e3,e4,x_39);float a4=smoothstep(e4,e5,x_39);float a5=smoothstep(e5,e6,x_39);float a6=smoothstep(e6,e7,x_39);float a7=smoothstep(e7,e8,x_39);return max(mix(v0,v1,a0)*step(e0,x_39)*step(x_39,e1),max(mix(v1,v2,a1)*step(e1,x_39)*step(x_39,e2),max(mix(v2,v3,a2)*step(e2,x_39)*step(x_39,e3),max(mix(v3,v4,a3)*step(e3,x_39)*step(x_39,e4),max(mix(v4,v5,a4)*step(e4,x_39)*step(x_39,e5),max(mix(v5,v6,a5)*step(e5,x_39)*step(x_39,e6),max(mix(v6,v7,a6)*step(e6,x_39)*step(x_39,e7),mix(v7,v8,a7)*step(e7,x_39)*step(x_39,e8))))))));}vec4 salinity(float x_26){const float e0=0.0;const vec4 v0=vec4(0.16470588235294117,0.09411764705882353,0.4235294117647059,1);const float e1=0.13;const vec4 v1=vec4(0.12941176470588237,0.19607843137254902,0.6352941176470588,1);const float e2=0.25;const vec4 v2=vec4(0.058823529411764705,0.35294117647058826,0.5686274509803921,1);const float e3=0.38;const vec4 v3=vec4(0.1568627450980392,0.4627450980392157,0.5372549019607843,1);const float e4=0.5;const vec4 v4=vec4(0.23137254901960785,0.5725490196078431,0.5294117647058824,1);const float e5=0.63;const vec4 v5=vec4(0.30980392156862746,0.6862745098039216,0.49411764705882355,1);const float e6=0.75;const vec4 v6=vec4(0.47058823529411764,0.796078431372549,0.40784313725490196,1);const float e7=0.88;const vec4 v7=vec4(0.7568627450980392,0.8666666666666667,0.39215686274509803,1);const float e8=1.0;const vec4 v8=vec4(0.9921568627450981,0.9372549019607843,0.6039215686274509,1);float a0=smoothstep(e0,e1,x_26);float a1=smoothstep(e1,e2,x_26);float a2=smoothstep(e2,e3,x_26);float a3=smoothstep(e3,e4,x_26);float a4=smoothstep(e4,e5,x_26);float a5=smoothstep(e5,e6,x_26);float a6=smoothstep(e6,e7,x_26);float a7=smoothstep(e7,e8,x_26);return max(mix(v0,v1,a0)*step(e0,x_26)*step(x_26,e1),max(mix(v1,v2,a1)*step(e1,x_26)*step(x_26,e2),max(mix(v2,v3,a2)*step(e2,x_26)*step(x_26,e3),max(mix(v3,v4,a3)*step(e3,x_26)*step(x_26,e4),max(mix(v4,v5,a4)*step(e4,x_26)*step(x_26,e5),max(mix(v5,v6,a5)*step(e5,x_26)*step(x_26,e6),max(mix(v6,v7,a6)*step(e6,x_26)*step(x_26,e7),mix(v7,v8,a7)*step(e7,x_26)*step(x_26,e8))))))));}vec4 temperature(float x_8){const float e0=0.0;const vec4 v0=vec4(0.01568627450980392,0.13725490196078433,0.2,1);const float e1=0.13;const vec4 v1=vec4(0.09019607843137255,0.2,0.47843137254901963,1);const float e2=0.25;const vec4 v2=vec4(0.3333333333333333,0.23137254901960785,0.615686274509804,1);const float e3=0.38;const vec4 v3=vec4(0.5058823529411764,0.30980392156862746,0.5607843137254902,1);const float e4=0.5;const vec4 v4=vec4(0.6862745098039216,0.37254901960784315,0.5098039215686274,1);const float e5=0.63;const vec4 v5=vec4(0.8705882352941177,0.4392156862745098,0.396078431372549,1);const float e6=0.75;const vec4 v6=vec4(0.9764705882352941,0.5725490196078431,0.25882352941176473,1);const float e7=0.88;const vec4 v7=vec4(0.9764705882352941,0.7686274509803922,0.2549019607843137,1);const float e8=1.0;const vec4 v8=vec4(0.9098039215686274,0.9803921568627451,0.3568627450980392,1);float a0=smoothstep(e0,e1,x_8);float a1=smoothstep(e1,e2,x_8);float a2=smoothstep(e2,e3,x_8);float a3=smoothstep(e3,e4,x_8);float a4=smoothstep(e4,e5,x_8);float a5=smoothstep(e5,e6,x_8);float a6=smoothstep(e6,e7,x_8);float a7=smoothstep(e7,e8,x_8);return max(mix(v0,v1,a0)*step(e0,x_8)*step(x_8,e1),max(mix(v1,v2,a1)*step(e1,x_8)*step(x_8,e2),max(mix(v2,v3,a2)*step(e2,x_8)*step(x_8,e3),max(mix(v3,v4,a3)*step(e3,x_8)*step(x_8,e4),max(mix(v4,v5,a4)*step(e4,x_8)*step(x_8,e5),max(mix(v5,v6,a5)*step(e5,x_8)*step(x_8,e6),max(mix(v6,v7,a6)*step(e6,x_8)*step(x_8,e7),mix(v7,v8,a7)*step(e7,x_8)*step(x_8,e8))))))));}vec4 turbidity(float x_40){const float e0=0.0;const vec4 v0=vec4(0.13333333333333333,0.12156862745098039,0.10588235294117647,1);const float e1=0.13;const vec4 v1=vec4(0.2549019607843137,0.19607843137254902,0.1607843137254902,1);const float e2=0.25;const vec4 v2=vec4(0.3843137254901961,0.27058823529411763,0.20392156862745098,1);const float e3=0.38;const vec4 v3=vec4(0.5137254901960784,0.34901960784313724,0.2235294117647059,1);const float e4=0.5;const vec4 v4=vec4(0.6313725490196078,0.4392156862745098,0.23137254901960785,1);const float e5=0.63;const vec4 v5=vec4(0.7254901960784313,0.5490196078431373,0.25882352941176473,1);const float e6=0.75;const vec4 v6=vec4(0.792156862745098,0.6823529411764706,0.34509803921568627,1);const float e7=0.88;const vec4 v7=vec4(0.8470588235294118,0.8196078431372549,0.49411764705882355,1);const float e8=1.0;const vec4 v8=vec4(0.9137254901960784,0.9647058823529412,0.6705882352941176,1);float a0=smoothstep(e0,e1,x_40);float a1=smoothstep(e1,e2,x_40);float a2=smoothstep(e2,e3,x_40);float a3=smoothstep(e3,e4,x_40);float a4=smoothstep(e4,e5,x_40);float a5=smoothstep(e5,e6,x_40);float a6=smoothstep(e6,e7,x_40);float a7=smoothstep(e7,e8,x_40);return max(mix(v0,v1,a0)*step(e0,x_40)*step(x_40,e1),max(mix(v1,v2,a1)*step(e1,x_40)*step(x_40,e2),max(mix(v2,v3,a2)*step(e2,x_40)*step(x_40,e3),max(mix(v3,v4,a3)*step(e3,x_40)*step(x_40,e4),max(mix(v4,v5,a4)*step(e4,x_40)*step(x_40,e5),max(mix(v5,v6,a5)*step(e5,x_40)*step(x_40,e6),max(mix(v6,v7,a6)*step(e6,x_40)*step(x_40,e7),mix(v7,v8,a7)*step(e7,x_40)*step(x_40,e8))))))));}vec4 velocity_blue_297387650(float x_2){const float e0=0.0;const vec4 v0=vec4(0.06666666666666667,0.12549019607843137,0.25098039215686274,1);const float e1=0.13;const vec4 v1=vec4(0.13725490196078433,0.20392156862745098,0.4549019607843137,1);const float e2=0.25;const vec4 v2=vec4(0.11372549019607843,0.3176470588235294,0.611764705882353,1);const float e3=0.38;const vec4 v3=vec4(0.12156862745098039,0.44313725490196076,0.6352941176470588,1);const float e4=0.5;const vec4 v4=vec4(0.19607843137254902,0.5647058823529412,0.6627450980392157,1);const float e5=0.63;const vec4 v5=vec4(0.3411764705882353,0.6784313725490196,0.6901960784313725,1);const float e6=0.75;const vec4 v6=vec4(0.5843137254901961,0.7686274509803922,0.7411764705882353,1);const float e7=0.88;const vec4 v7=vec4(0.796078431372549,0.8666666666666667,0.8274509803921568,1);const float e8=1.0;const vec4 v8=vec4(0.996078431372549,0.984313725490196,0.9019607843137255,1);float a0=smoothstep(e0,e1,x_2);float a1=smoothstep(e1,e2,x_2);float a2=smoothstep(e2,e3,x_2);float a3=smoothstep(e3,e4,x_2);float a4=smoothstep(e4,e5,x_2);float a5=smoothstep(e5,e6,x_2);float a6=smoothstep(e6,e7,x_2);float a7=smoothstep(e7,e8,x_2);return max(mix(v0,v1,a0)*step(e0,x_2)*step(x_2,e1),max(mix(v1,v2,a1)*step(e1,x_2)*step(x_2,e2),max(mix(v2,v3,a2)*step(e2,x_2)*step(x_2,e3),max(mix(v3,v4,a3)*step(e3,x_2)*step(x_2,e4),max(mix(v4,v5,a4)*step(e4,x_2)*step(x_2,e5),max(mix(v5,v6,a5)*step(e5,x_2)*step(x_2,e6),max(mix(v6,v7,a6)*step(e6,x_2)*step(x_2,e7),mix(v7,v8,a7)*step(e7,x_2)*step(x_2,e8))))))));}vec4 velocity_green_2558432129(float x_27){const float e0=0.0;const vec4 v0=vec4(0.09019607843137255,0.13725490196078433,0.07450980392156863,1);const float e1=0.13;const vec4 v1=vec4(0.09411764705882353,0.25098039215686274,0.14901960784313725,1);const float e2=0.25;const vec4 v2=vec4(0.043137254901960784,0.37254901960784315,0.17647058823529413,1);const float e3=0.38;const vec4 v3=vec4(0.15294117647058825,0.4823529411764706,0.13725490196078433,1);const float e4=0.5;const vec4 v4=vec4(0.37254901960784315,0.5725490196078431,0.047058823529411764,1);const float e5=0.63;const vec4 v5=vec4(0.596078431372549,0.6470588235294118,0.07058823529411765,1);const float e6=0.75;const vec4 v6=vec4(0.788235294117647,0.7294117647058823,0.27058823529411763,1);const float e7=0.88;const vec4 v7=vec4(0.9137254901960784,0.8470588235294118,0.5372549019607843,1);const float e8=1.0;const vec4 v8=vec4(1,0.9921568627450981,0.803921568627451,1);float a0=smoothstep(e0,e1,x_27);float a1=smoothstep(e1,e2,x_27);float a2=smoothstep(e2,e3,x_27);float a3=smoothstep(e3,e4,x_27);float a4=smoothstep(e4,e5,x_27);float a5=smoothstep(e5,e6,x_27);float a6=smoothstep(e6,e7,x_27);float a7=smoothstep(e7,e8,x_27);return max(mix(v0,v1,a0)*step(e0,x_27)*step(x_27,e1),max(mix(v1,v2,a1)*step(e1,x_27)*step(x_27,e2),max(mix(v2,v3,a2)*step(e2,x_27)*step(x_27,e3),max(mix(v3,v4,a3)*step(e3,x_27)*step(x_27,e4),max(mix(v4,v5,a4)*step(e4,x_27)*step(x_27,e5),max(mix(v5,v6,a5)*step(e5,x_27)*step(x_27,e6),max(mix(v6,v7,a6)*step(e6,x_27)*step(x_27,e7),mix(v7,v8,a7)*step(e7,x_27)*step(x_27,e8))))))));}vec4 cubehelix(float x_37){const float e0=0.0;const vec4 v0=vec4(0,0,0,1);const float e1=0.07;const vec4 v1=vec4(0.08627450980392157,0.0196078431372549,0.23137254901960785,1);const float e2=0.13;const vec4 v2=vec4(0.23529411764705882,0.01568627450980392,0.4117647058823529,1);const float e3=0.2;const vec4 v3=vec4(0.42745098039215684,0.00392156862745098,0.5294117647058824,1);const float e4=0.27;const vec4 v4=vec4(0.6313725490196078,0,0.5764705882352941,1);const float e5=0.33;const vec4 v5=vec4(0.8235294117647058,0.00784313725490196,0.5568627450980392,1);const float e6=0.4;const vec4 v6=vec4(0.984313725490196,0.043137254901960784,0.4823529411764706,1);const float e7=0.47;const vec4 v7=vec4(1,0.11372549019607843,0.3803921568627451,1);const float e8=0.53;const vec4 v8=vec4(1,0.21176470588235294,0.27058823529411763,1);const float e9=0.6;const vec4 v9=vec4(1,0.3333333333333333,0.1803921568627451,1);const float e10=0.67;const vec4 v10=vec4(1,0.47058823529411764,0.13333333333333333,1);const float e11=0.73;const vec4 v11=vec4(1,0.615686274509804,0.1450980392156863,1);const float e12=0.8;const vec4 v12=vec4(0.9450980392156862,0.7490196078431373,0.2235294117647059,1);const float e13=0.87;const vec4 v13=vec4(0.8784313725490196,0.8627450980392157,0.36470588235294116,1);const float e14=0.93;const vec4 v14=vec4(0.8549019607843137,0.9450980392156862,0.5568627450980392,1);const float e15=1.0;const vec4 v15=vec4(0.8901960784313725,0.9921568627450981,0.7764705882352941,1);float a0=smoothstep(e0,e1,x_37);float a1=smoothstep(e1,e2,x_37);float a2=smoothstep(e2,e3,x_37);float a3=smoothstep(e3,e4,x_37);float a4=smoothstep(e4,e5,x_37);float a5=smoothstep(e5,e6,x_37);float a6=smoothstep(e6,e7,x_37);float a7=smoothstep(e7,e8,x_37);float a8=smoothstep(e8,e9,x_37);float a9=smoothstep(e9,e10,x_37);float a10=smoothstep(e10,e11,x_37);float a11=smoothstep(e11,e12,x_37);float a12=smoothstep(e12,e13,x_37);float a13=smoothstep(e13,e14,x_37);float a14=smoothstep(e14,e15,x_37);return max(mix(v0,v1,a0)*step(e0,x_37)*step(x_37,e1),max(mix(v1,v2,a1)*step(e1,x_37)*step(x_37,e2),max(mix(v2,v3,a2)*step(e2,x_37)*step(x_37,e3),max(mix(v3,v4,a3)*step(e3,x_37)*step(x_37,e4),max(mix(v4,v5,a4)*step(e4,x_37)*step(x_37,e5),max(mix(v5,v6,a5)*step(e5,x_37)*step(x_37,e6),max(mix(v6,v7,a6)*step(e6,x_37)*step(x_37,e7),max(mix(v7,v8,a7)*step(e7,x_37)*step(x_37,e8),max(mix(v8,v9,a8)*step(e8,x_37)*step(x_37,e9),max(mix(v9,v10,a9)*step(e9,x_37)*step(x_37,e10),max(mix(v10,v11,a10)*step(e10,x_37)*step(x_37,e11),max(mix(v11,v12,a11)*step(e11,x_37)*step(x_37,e12),max(mix(v12,v13,a12)*step(e12,x_37)*step(x_37,e13),max(mix(v13,v14,a13)*step(e13,x_37)*step(x_37,e14),mix(v14,v15,a14)*step(e14,x_37)*step(x_37,e15)))))))))))))));}float sample_and_apply_contrast_limits(SAMPLER_TYPE channel,vec2 vTexCoord,vec2 contrastLimits){float fragIntensity=float(texture(channel,vTexCoord).r);float contrastLimitsAppliedToIntensity=(fragIntensity-contrastLimits[0])/max(0.0005,(contrastLimits[1]-contrastLimits[0]));return max(0.,contrastLimitsAppliedToIntensity);}vec3 process_channel_intensity(float intensity,vec3 colors,int channelIndex,bool inLensAndUseLens,int lensSelection){float useColorValue=float(int((inLensAndUseLens&&channelIndex==lensSelection)||(!inLensAndUseLens)));vec3 rgb=max(0.,min(1.,intensity))*max(vec3(colors),(1.-useColorValue)*vec3(1.,1.,1.));return rgb;}vec4 apply_opacity(vec3 color,bool useTransparentColor,vec3 transparentColor,float opacity){return vec4(color,(color==transparentColor&&useTransparentColor)? 0. : opacity);}vec4 colormap(float intensity,float opacity,bool useTransparentColor){return apply_opacity(COLORMAP_FUNCTION(min(1.,intensity)).xyz,useTransparentColor,COLORMAP_FUNCTION(0.).xyz,opacity);}\";\nvar channels$1 = {\n  name: \"channel-intensity-module\",\n  defines: {\n    SAMPLER_TYPE: \"usampler2D\",\n    COLORMAP_FUNCTION: \"\"\n  },\n  fs: fs$3\n};\nvar fs$2 = \"#define GLSLIFY 1\\nbool frag_in_lens_bounds(vec2 lensCenter,vec2 vTexCoord,float majorLensAxis,float minorLensAxis,float lensBorderRadius){return pow((lensCenter.x-vTexCoord.x)/majorLensAxis,2.)+pow((lensCenter.y-vTexCoord.y)/minorLensAxis,2.)<(1.-lensBorderRadius);}bool frag_on_lens_bounds(vec2 lensCenter,vec2 vTexCoord,float majorLensAxis,float minorLensAxis,float lensBorderRadius){float ellipseDistance=pow((lensCenter.x-vTexCoord.x)/majorLensAxis,2.)+pow((lensCenter.y-vTexCoord.y)/minorLensAxis,2.);return ellipseDistance<=1.&&ellipseDistance>=(1.-lensBorderRadius);}\";\nvar lens = {\n  name: \"lens-module\",\n  defines: {\n    SAMPLER_TYPE: \"usampler2D\"\n  },\n  fs: fs$2\n};\nvar MAX_COLOR_INTENSITY = 255;\nvar DEFAULT_COLOR_OFF = [0, 0, 0];\nvar MAX_CHANNELS = 6;\nvar DEFAULT_FONT_FAMILY = \"-apple-system, 'Helvetica Neue', Arial, sans-serif\";\nvar DTYPE_VALUES = {\n  Uint8: {\n    format: GL.R8UI,\n    dataFormat: GL.RED_INTEGER,\n    type: GL.UNSIGNED_BYTE,\n    max: __pow(2, 8) - 1,\n    sampler: \"usampler2D\"\n  },\n  Uint16: {\n    format: GL.R16UI,\n    dataFormat: GL.RED_INTEGER,\n    type: GL.UNSIGNED_SHORT,\n    max: __pow(2, 16) - 1,\n    sampler: \"usampler2D\"\n  },\n  Uint32: {\n    format: GL.R32UI,\n    dataFormat: GL.RED_INTEGER,\n    type: GL.UNSIGNED_INT,\n    max: __pow(2, 32) - 1,\n    sampler: \"usampler2D\"\n  },\n  Float32: {\n    format: GL.R32F,\n    dataFormat: GL.RED,\n    type: GL.FLOAT,\n    max: 3.4 * __pow(10, 38),\n    sampler: \"sampler2D\"\n  },\n  Int8: {\n    format: GL.R8I,\n    dataFormat: GL.RED_INTEGER,\n    type: GL.BYTE,\n    max: __pow(2, 8 - 1) - 1,\n    sampler: \"isampler2D\"\n  },\n  Int16: {\n    format: GL.R16I,\n    dataFormat: GL.RED_INTEGER,\n    type: GL.SHORT,\n    max: __pow(2, 16 - 1) - 1,\n    sampler: \"isampler2D\"\n  },\n  Int32: {\n    format: GL.R32I,\n    dataFormat: GL.RED_INTEGER,\n    type: GL.INT,\n    max: __pow(2, 32 - 1) - 1,\n    sampler: \"isampler2D\"\n  },\n  Float64: {\n    format: GL.R32F,\n    dataFormat: GL.RED,\n    type: GL.FLOAT,\n    max: 3.4 * __pow(10, 38),\n    sampler: \"sampler2D\",\n    cast: (data) => new Float32Array(data)\n  }\n};\nvar COLORMAPS = [\n  \"jet\",\n  \"hsv\",\n  \"hot\",\n  \"cool\",\n  \"spring\",\n  \"summer\",\n  \"autumn\",\n  \"winter\",\n  \"bone\",\n  \"copper\",\n  \"greys\",\n  \"yignbu\",\n  \"greens\",\n  \"yiorrd\",\n  \"bluered\",\n  \"rdbu\",\n  \"picnic\",\n  \"rainbow\",\n  \"portland\",\n  \"blackbody\",\n  \"earth\",\n  \"electric\",\n  \"alpha\",\n  \"viridis\",\n  \"inferno\",\n  \"magma\",\n  \"plasma\",\n  \"warm\",\n  \"rainbow-soft\",\n  \"bathymetry\",\n  \"cdom\",\n  \"chlorophyll\",\n  \"density\",\n  \"freesurface-blue\",\n  \"freesurface-red\",\n  \"oxygen\",\n  \"par\",\n  \"phase\",\n  \"salinity\",\n  \"temperature\",\n  \"turbidity\",\n  \"velocity-blue\",\n  \"velocity-green\",\n  \"cubehelix\"\n];\nvar RENDERING_MODES;\n(function(RENDERING_MODES2) {\n  RENDERING_MODES2[\"MAX_INTENSITY_PROJECTION\"] = \"Maximum Intensity Projection\";\n  RENDERING_MODES2[\"MIN_INTENSITY_PROJECTION\"] = \"Minimum Intensity Projection\";\n  RENDERING_MODES2[\"ADDITIVE\"] = \"Additive\";\n})(RENDERING_MODES || (RENDERING_MODES = {}));\nfunction range2(len) {\n  return [...Array(len).keys()];\n}\nfunction padWithDefault(arr, defaultValue, padWidth) {\n  for (let i = 0; i < padWidth; i += 1) {\n    arr.push(defaultValue);\n  }\n  return arr;\n}\nfunction getDtypeValues(dtype) {\n  const values = DTYPE_VALUES[dtype];\n  if (!values) {\n    const valid = Object.keys(DTYPE_VALUES);\n    throw Error(`Dtype not supported, got ${dtype}. Must be one of ${valid}.`);\n  }\n  return values;\n}\nfunction padColorsAndWindows({\n  contrastLimits,\n  colors,\n  channelsVisible,\n  domain,\n  dtype\n}) {\n  const lengths = [contrastLimits.length, colors.length];\n  if (lengths.every((l) => l !== lengths[0])) {\n    throw Error(\"Inconsistent number of slider values and colors provided\");\n  }\n  const newColors = colors.map((color, i) => channelsVisible[i] ? color.map((c) => c / MAX_COLOR_INTENSITY) : DEFAULT_COLOR_OFF);\n  const maxSliderValue = domain && domain[1] || getDtypeValues(dtype).max;\n  const newContrastLimits = contrastLimits.map((slider, i) => channelsVisible[i] ? slider : [maxSliderValue, maxSliderValue]);\n  const padSize = MAX_CHANNELS - newColors.length;\n  if (padSize < 0) {\n    throw Error(`${lengths} channels passed in, but only 6 are allowed.`);\n  }\n  const paddedColors = padWithDefault(newColors, DEFAULT_COLOR_OFF, padSize);\n  const paddedContrastLimits = padWithDefault(newContrastLimits, [maxSliderValue, maxSliderValue], padSize);\n  const paddedColorsAndWindows = {\n    paddedContrastLimits: paddedContrastLimits.reduce((acc, val) => acc.concat(val), []),\n    paddedColors: paddedColors.reduce((acc, val) => acc.concat(val), [])\n  };\n  return paddedColorsAndWindows;\n}\nfunction onPointer(layer) {\n  const { viewportId, lensRadius } = layer.props;\n  if (!viewportId) {\n    layer.setState({ unprojectLensBounds: [0, 0, 0, 0] });\n    return;\n  }\n  const { mousePosition } = layer.context;\n  const layerView = layer.context.deck.viewManager.views.filter((view) => view.id === viewportId)[0];\n  const viewState = layer.context.deck.viewManager.viewState[viewportId];\n  const viewport = layerView.makeViewport(__spreadProps(__spreadValues({}, viewState), {\n    viewState\n  }));\n  if (mousePosition && viewport.containsPixel(mousePosition)) {\n    const offsetMousePosition = {\n      x: mousePosition.x - viewport.x,\n      y: mousePosition.y - viewport.y\n    };\n    const mousePositionBounds = [\n      [offsetMousePosition.x - lensRadius, offsetMousePosition.y],\n      [offsetMousePosition.x, offsetMousePosition.y + lensRadius],\n      [offsetMousePosition.x + lensRadius, offsetMousePosition.y],\n      [offsetMousePosition.x, offsetMousePosition.y - lensRadius]\n    ];\n    const unprojectLensBounds = mousePositionBounds.map((bounds, i) => viewport.unproject(bounds)[i % 2]);\n    layer.setState({ unprojectLensBounds });\n  } else {\n    layer.setState({ unprojectLensBounds: [0, 0, 0, 0] });\n  }\n}\nfunction getPhysicalSizeScalingMatrix(loader) {\n  var _a2, _b2;\n  const { x, y, z } = (_b2 = (_a2 = loader == null ? void 0 : loader.meta) == null ? void 0 : _a2.physicalSizes) != null ? _b2 : {};\n  if ((x == null ? void 0 : x.size) && (y == null ? void 0 : y.size) && (z == null ? void 0 : z.size)) {\n    const min = Math.min(z.size, x.size, y.size);\n    const ratio = [x.size / min, y.size / min, z.size / min];\n    return new Matrix4().scale(ratio);\n  }\n  return new Matrix4().identity();\n}\nvar SHADER_MODULES = [\n  { fs: fs1, fscmap: fsColormap1, vs: vs1 },\n  { fs: fs2, fscmap: fsColormap2, vs: vs2 }\n];\nfunction validateWebGL2Filter(gl, interpolation) {\n  const canShowFloat = hasFeature(gl, FEATURES.TEXTURE_FLOAT);\n  const canShowLinear = hasFeature(gl, FEATURES.TEXTURE_FILTER_LINEAR_FLOAT);\n  if (!canShowFloat) {\n    throw new Error(\"WebGL1 context does not support floating point textures.  Unable to display raster data.\");\n  }\n  if (!canShowLinear && interpolation === GL.LINEAR) {\n    console.warn(\"LINEAR filtering not supported in WebGL1 context.  Falling back to NEAREST.\");\n    return GL.NEAREST;\n  }\n  return interpolation;\n}\nfunction getRenderingAttrs$1(dtype, gl, interpolation) {\n  const isLinear = interpolation === GL.LINEAR;\n  if (!isWebGL2(gl)) {\n    return {\n      format: GL.LUMINANCE,\n      dataFormat: GL.LUMINANCE,\n      type: GL.FLOAT,\n      sampler: \"sampler2D\",\n      shaderModule: SHADER_MODULES[0],\n      filter: validateWebGL2Filter(gl, interpolation),\n      cast: (data) => new Float32Array(data)\n    };\n  }\n  const values = getDtypeValues(isLinear ? \"Float32\" : dtype);\n  return __spreadProps(__spreadValues({}, values), {\n    shaderModule: SHADER_MODULES[1],\n    filter: interpolation,\n    cast: isLinear ? (data) => new Float32Array(data) : (data) => data\n  });\n}\nvar defaultProps$8 = {\n  pickable: { type: \"boolean\", value: true, compare: true },\n  coordinateSystem: COORDINATE_SYSTEM2.CARTESIAN,\n  channelData: { type: \"object\", value: {}, compare: true },\n  bounds: { type: \"array\", value: [0, 0, 1, 1], compare: true },\n  colors: { type: \"array\", value: [], compare: true },\n  contrastLimits: { type: \"array\", value: [], compare: true },\n  channelsVisible: { type: \"array\", value: [], compare: true },\n  opacity: { type: \"number\", value: 1, compare: true },\n  dtype: { type: \"string\", value: \"Uint16\", compare: true },\n  colormap: { type: \"string\", value: \"\", compare: true },\n  isLensOn: { type: \"boolean\", value: false, compare: true },\n  lensSelection: { type: \"number\", value: 0, compare: true },\n  lensBorderColor: { type: \"array\", value: [255, 255, 255], compare: true },\n  lensBorderRadius: { type: \"number\", value: 0.02, compare: true },\n  unprojectLensBounds: { type: \"array\", value: [0, 0, 0, 0], compare: true },\n  transparentColor: { type: \"array\", value: null, compare: true },\n  interpolation: {\n    type: \"number\",\n    value: GL.NEAREST,\n    compare: true\n  }\n};\nvar XRLayer = class extends Layer {\n  getShaders() {\n    const { colormap, dtype, interpolation } = this.props;\n    const { shaderModule, sampler } = getRenderingAttrs$1(dtype, this.context.gl, interpolation);\n    return super.getShaders({\n      fs: colormap ? shaderModule.fscmap : shaderModule.fs,\n      vs: shaderModule.vs,\n      defines: {\n        SAMPLER_TYPE: sampler,\n        COLORMAP_FUNCTION: colormap || \"viridis\"\n      },\n      modules: [project32, picking, channels$1, lens]\n    });\n  }\n  initializeState() {\n    const { gl } = this.context;\n    gl.pixelStorei(GL.UNPACK_ALIGNMENT, 1);\n    gl.pixelStorei(GL.PACK_ALIGNMENT, 1);\n    const attributeManager = this.getAttributeManager();\n    attributeManager.add({\n      positions: {\n        size: 3,\n        type: GL.DOUBLE,\n        fp64: this.use64bitPositions(),\n        update: this.calculatePositions,\n        noAlloc: true\n      }\n    });\n    this.setState({\n      numInstances: 1,\n      positions: new Float64Array(12)\n    });\n  }\n  finalizeState() {\n    super.finalizeState();\n    if (this.state.textures) {\n      Object.values(this.state.textures).forEach((tex) => tex && tex.delete());\n    }\n  }\n  updateState({ props, oldProps, changeFlags }) {\n    var _a2, _b2;\n    if (changeFlags.extensionsChanged || props.colormap !== oldProps.colormap || props.interpolation !== oldProps.interpolation) {\n      const { gl } = this.context;\n      if (this.state.model) {\n        this.state.model.delete();\n      }\n      this.setState({ model: this._getModel(gl) });\n      this.getAttributeManager().invalidateAll();\n    }\n    if (props.channelData !== oldProps.channelData && ((_a2 = props.channelData) == null ? void 0 : _a2.data) !== ((_b2 = oldProps.channelData) == null ? void 0 : _b2.data) || props.interpolation !== oldProps.interpolation) {\n      this.loadChannelTextures(props.channelData);\n    }\n    const attributeManager = this.getAttributeManager();\n    if (props.bounds !== oldProps.bounds) {\n      attributeManager.invalidate(\"positions\");\n    }\n  }\n  _getModel(gl) {\n    if (!gl) {\n      return null;\n    }\n    return new Model(gl, __spreadProps(__spreadValues({}, this.getShaders()), {\n      id: this.props.id,\n      geometry: new Geometry({\n        drawMode: GL.TRIANGLE_FAN,\n        vertexCount: 4,\n        attributes: {\n          texCoords: new Float32Array([0, 1, 0, 0, 1, 0, 1, 1])\n        }\n      }),\n      isInstanced: false\n    }));\n  }\n  calculatePositions(attributes) {\n    const { positions } = this.state;\n    const { bounds } = this.props;\n    positions[0] = bounds[0];\n    positions[1] = bounds[1];\n    positions[2] = 0;\n    positions[3] = bounds[0];\n    positions[4] = bounds[3];\n    positions[5] = 0;\n    positions[6] = bounds[2];\n    positions[7] = bounds[3];\n    positions[8] = 0;\n    positions[9] = bounds[2];\n    positions[10] = bounds[1];\n    positions[11] = 0;\n    attributes.value = positions;\n  }\n  draw({ uniforms }) {\n    const { textures, model } = this.state;\n    if (textures && model) {\n      const {\n        contrastLimits,\n        colors,\n        opacity,\n        domain,\n        dtype,\n        channelsVisible,\n        unprojectLensBounds,\n        bounds,\n        isLensOn,\n        lensSelection,\n        lensBorderColor,\n        lensBorderRadius,\n        transparentColor\n      } = this.props;\n      const numTextures = Object.values(textures).filter((t) => t).length;\n      const { paddedContrastLimits, paddedColors } = padColorsAndWindows({\n        contrastLimits: contrastLimits.slice(0, numTextures),\n        colors: colors.slice(0, numTextures),\n        channelsVisible: channelsVisible.slice(0, numTextures),\n        domain,\n        dtype\n      });\n      const [\n        leftMouseBound,\n        bottomMouseBound,\n        rightMouseBound,\n        topMouseBound\n      ] = unprojectLensBounds;\n      const [left, bottom, right, top] = bounds;\n      const leftMouseBoundScaled = (leftMouseBound - left) / (right - left);\n      const bottomMouseBoundScaled = (bottomMouseBound - top) / (bottom - top);\n      const rightMouseBoundScaled = (rightMouseBound - left) / (right - left);\n      const topMouseBoundScaled = (topMouseBound - top) / (bottom - top);\n      model.setUniforms(__spreadValues(__spreadProps(__spreadValues({}, uniforms), {\n        colors: paddedColors,\n        contrastLimits: paddedContrastLimits,\n        opacity,\n        majorLensAxis: (rightMouseBoundScaled - leftMouseBoundScaled) / 2,\n        minorLensAxis: (bottomMouseBoundScaled - topMouseBoundScaled) / 2,\n        lensCenter: [\n          (rightMouseBoundScaled + leftMouseBoundScaled) / 2,\n          (bottomMouseBoundScaled + topMouseBoundScaled) / 2\n        ],\n        isLensOn,\n        lensSelection,\n        lensBorderColor,\n        lensBorderRadius,\n        transparentColor: (transparentColor || [0, 0, 0]).map((i) => i / 255),\n        useTransparentColor: Boolean(transparentColor)\n      }), textures)).draw();\n    }\n  }\n  loadChannelTextures(channelData) {\n    const textures = {\n      channel0: null,\n      channel1: null,\n      channel2: null,\n      channel3: null,\n      channel4: null,\n      channel5: null\n    };\n    if (this.state.textures) {\n      Object.values(this.state.textures).forEach((tex) => tex && tex.delete());\n    }\n    if (channelData && Object.keys(channelData).length > 0 && channelData.data) {\n      channelData.data.forEach((d, i) => {\n        textures[`channel${i}`] = this.dataToTexture(d, channelData.width, channelData.height);\n      }, this);\n      this.setState({ textures });\n    }\n  }\n  dataToTexture(data, width, height) {\n    var _a2, _b2;\n    const { interpolation } = this.props;\n    const attrs = getRenderingAttrs$1(this.props.dtype, this.context.gl, interpolation);\n    return new Texture2D(this.context.gl, {\n      width,\n      height,\n      data: (_b2 = (_a2 = attrs.cast) == null ? void 0 : _a2.call(attrs, data)) != null ? _b2 : data,\n      mipmaps: false,\n      parameters: {\n        [GL.TEXTURE_MIN_FILTER]: attrs.filter,\n        [GL.TEXTURE_MAG_FILTER]: attrs.filter,\n        [GL.TEXTURE_WRAP_S]: GL.CLAMP_TO_EDGE,\n        [GL.TEXTURE_WRAP_T]: GL.CLAMP_TO_EDGE\n      },\n      format: attrs.format,\n      dataFormat: attrs.dataFormat,\n      type: attrs.type\n    });\n  }\n};\nXRLayer.layerName = \"XRLayer\";\nXRLayer.defaultProps = defaultProps$8;\nvar PHOTOMETRIC_INTERPRETATIONS = {\n  WhiteIsZero: 0,\n  BlackIsZero: 1,\n  RGB: 2,\n  Palette: 3,\n  TransparencyMask: 4,\n  CMYK: 5,\n  YCbCr: 6,\n  CIELab: 8,\n  ICCLab: 9\n};\nvar defaultProps$7 = __spreadProps(__spreadValues({}, BitmapLayer$1.defaultProps), {\n  pickable: { type: \"boolean\", value: true, compare: true },\n  coordinateSystem: COORDINATE_SYSTEM2.CARTESIAN\n});\nvar getPhotometricInterpretationShader = (photometricInterpretation, transparentColorInHook) => {\n  const useTransparentColor = transparentColorInHook ? \"true\" : \"false\";\n  const transparentColorVector = `vec3(${(transparentColorInHook || [0, 0, 0]).map((i) => String(i / 255)).join(\",\")})`;\n  switch (photometricInterpretation) {\n    case PHOTOMETRIC_INTERPRETATIONS.RGB:\n      return `color[3] = (${useTransparentColor} && (color.rgb == ${transparentColorVector})) ? 0.0 : color.a;`;\n    case PHOTOMETRIC_INTERPRETATIONS.WhiteIsZero:\n      return `          float value = 1.0 - (color.r / 256.0);\n          color = vec4(value, value, value, (${useTransparentColor} && vec3(value, value, value) == ${transparentColorVector}) ? 0.0 : color.a);\n        `;\n    case PHOTOMETRIC_INTERPRETATIONS.BlackIsZero:\n      return `          float value = (color.r / 256.0);\n          color = vec4(value, value, value, (${useTransparentColor} && vec3(value, value, value) == ${transparentColorVector}) ? 0.0 : color.a);\n        `;\n    case PHOTOMETRIC_INTERPRETATIONS.YCbCr:\n      return `          float y = color[0];\n          float cb = color[1];\n          float cr = color[2];\n          color[0] = (y + (1.40200 * (cr - .5)));\n          color[1] = (y - (0.34414 * (cb - .5)) - (0.71414 * (cr - .5)));\n          color[2] = (y + (1.77200 * (cb - .5)));\n          color[3] = (${useTransparentColor} && distance(color.rgb, ${transparentColorVector}) < 0.01) ? 0.0 : color.a;\n        `;\n    default:\n      console.error(\"Unsupported photometric interpretation or none provided.  No transformation will be done to image data\");\n      return \"\";\n  }\n};\nvar getTransparentColor = (photometricInterpretation) => {\n  switch (photometricInterpretation) {\n    case PHOTOMETRIC_INTERPRETATIONS.RGB:\n      return [0, 0, 0, 0];\n    case PHOTOMETRIC_INTERPRETATIONS.WhiteIsZero:\n      return [255, 255, 255, 0];\n    case PHOTOMETRIC_INTERPRETATIONS.BlackIsZero:\n      return [0, 0, 0, 0];\n    case PHOTOMETRIC_INTERPRETATIONS.YCbCr:\n      return [16, 128, 128, 0];\n    default:\n      console.error(\"Unsupported photometric interpretation or none provided.  No transformation will be done to image data\");\n      return [0, 0, 0, 0];\n  }\n};\nvar BitmapLayerWrapper = class extends BitmapLayer$1 {\n  _getModel(gl) {\n    const { photometricInterpretation, transparentColorInHook } = this.props;\n    const photometricInterpretationShader = getPhotometricInterpretationShader(photometricInterpretation, transparentColorInHook);\n    if (!gl) {\n      return null;\n    }\n    return new Model(gl, __spreadProps(__spreadValues({}, this.getShaders()), {\n      id: this.props.id,\n      geometry: new Geometry({\n        drawMode: GL.TRIANGLES,\n        vertexCount: 6\n      }),\n      isInstanced: false,\n      inject: {\n        \"fs:DECKGL_FILTER_COLOR\": photometricInterpretationShader\n      }\n    }));\n  }\n};\nvar BitmapLayer = class extends CompositeLayer {\n  initializeState(args) {\n    const { gl } = this.context;\n    gl.pixelStorei(GL.UNPACK_ALIGNMENT, 1);\n    gl.pixelStorei(GL.PACK_ALIGNMENT, 1);\n    super.initializeState(args);\n  }\n  renderLayers() {\n    const {\n      photometricInterpretation,\n      transparentColor: transparentColorInHook\n    } = this.props;\n    const transparentColor = getTransparentColor(photometricInterpretation);\n    return new BitmapLayerWrapper(this.props, {\n      transparentColor,\n      transparentColorInHook,\n      id: `${this.props.id}-wrapped`\n    });\n  }\n};\nBitmapLayer.layerName = \"BitmapLayer\";\nBitmapLayer.PHOTOMETRIC_INTERPRETATIONS = PHOTOMETRIC_INTERPRETATIONS;\nBitmapLayer.defaultProps = __spreadProps(__spreadValues({}, defaultProps$7), {\n  image: { type: \"object\", value: {}, compare: true },\n  transparentColor: { type: \"array\", value: [0, 0, 0], compare: true },\n  photometricInterpretation: { type: \"number\", value: 2, compare: true }\n});\nBitmapLayerWrapper.defaultProps = defaultProps$7;\nBitmapLayerWrapper.layerName = \"BitmapLayerWrapper\";\nfunction getChannelStats(arr) {\n  let len = arr.length;\n  let min = Infinity;\n  let max2 = -Infinity;\n  let total = 0;\n  while (len--) {\n    if (arr[len] < min) {\n      min = arr[len];\n    }\n    if (arr[len] > max2) {\n      max2 = arr[len];\n    }\n    total += arr[len];\n  }\n  const mean = total / arr.length;\n  len = arr.length;\n  let sumSquared = 0;\n  while (len--) {\n    sumSquared += __pow(arr[len] - mean, 2);\n  }\n  const sd = __pow(sumSquared / arr.length, 0.5);\n  const mid = Math.floor(arr.length / 2);\n  const firstQuartileLocation = Math.floor(arr.length / 4);\n  const thirdQuartileLocation = 3 * Math.floor(arr.length / 4);\n  quickselect(arr, mid);\n  const median = arr[mid];\n  quickselect(arr, firstQuartileLocation, 0, mid);\n  const q1 = arr[firstQuartileLocation];\n  quickselect(arr, thirdQuartileLocation, mid, arr.length - 1);\n  const q3 = arr[thirdQuartileLocation];\n  const cutoffArr = arr.filter((i) => i > 0);\n  const cutoffPercentile = 5e-4;\n  const topCutoffLocation = Math.floor(cutoffArr.length * (1 - cutoffPercentile));\n  const bottomCutoffLocation = Math.floor(cutoffArr.length * cutoffPercentile);\n  quickselect(cutoffArr, topCutoffLocation);\n  quickselect(cutoffArr, bottomCutoffLocation, 0, topCutoffLocation);\n  const contrastLimits = [\n    cutoffArr[bottomCutoffLocation] || 0,\n    cutoffArr[topCutoffLocation] || 0\n  ];\n  return {\n    mean,\n    sd,\n    q1,\n    q3,\n    median,\n    domain: [min, max2],\n    contrastLimits\n  };\n}\nfunction ensureArray(x) {\n  return Array.isArray(x) ? x : [x];\n}\nfunction intToRgba(int) {\n  if (!Number.isInteger(int)) {\n    throw Error(\"Not an integer.\");\n  }\n  const buffer = new ArrayBuffer(4);\n  const view = new DataView(buffer);\n  view.setInt32(0, int, false);\n  const bytes = new Uint8Array(buffer);\n  return Array.from(bytes);\n}\nfunction isInterleaved(shape) {\n  const lastDimSize = shape[shape.length - 1];\n  return lastDimSize === 3 || lastDimSize === 4;\n}\nfunction getLabels(dimOrder) {\n  return dimOrder.toLowerCase().split(\"\").reverse();\n}\nfunction getDims(labels) {\n  const lookup = new Map(labels.map((name2, i) => [name2, i]));\n  if (lookup.size !== labels.length) {\n    throw Error(\"Labels must be unique, found duplicated label.\");\n  }\n  return (name2) => {\n    const index = lookup.get(name2);\n    if (index === void 0) {\n      throw Error(\"Invalid dimension.\");\n    }\n    return index;\n  };\n}\nfunction getImageSize(source) {\n  const interleaved = isInterleaved(source.shape);\n  const [height, width] = source.shape.slice(interleaved ? -3 : -2);\n  return { height, width };\n}\nfunction prevPowerOf2(x) {\n  return __pow(2, Math.floor(Math.log2(x)));\n}\nvar SIGNAL_ABORTED = \"__vivSignalAborted\";\nfunction renderSubLayers(props) {\n  const {\n    bbox: { left, top, right, bottom },\n    x,\n    y,\n    z\n  } = props.tile;\n  const { data, id, loader, maxZoom } = props;\n  if ([left, bottom, right, top].some((v) => v < 0) || !data) {\n    return null;\n  }\n  const base = loader[0];\n  const { height, width } = getImageSize(base);\n  const bounds = [\n    left,\n    data.height < base.tileSize ? height : bottom,\n    data.width < base.tileSize ? width : right,\n    top\n  ];\n  if (isInterleaved(base.shape)) {\n    const { photometricInterpretation = 2 } = base.meta;\n    return new BitmapLayer(props, {\n      image: data,\n      photometricInterpretation,\n      bounds,\n      id: `tile-sub-layer-${bounds}-${id}`,\n      tileId: { x, y, z }\n    });\n  }\n  return new XRLayer(props, {\n    channelData: data,\n    bounds,\n    id: `tile-sub-layer-${bounds}-${id}`,\n    tileId: { x, y, z },\n    interpolation: z === maxZoom ? GL.NEAREST : GL.LINEAR\n  });\n}\nvar defaultProps$6 = {\n  pickable: { type: \"boolean\", value: true, compare: true },\n  coordinateSystem: COORDINATE_SYSTEM2.CARTESIAN,\n  contrastLimits: { type: \"array\", value: [], compare: true },\n  colors: { type: \"array\", value: [], compare: true },\n  channelsVisible: { type: \"array\", value: [], compare: true },\n  renderSubLayers: { type: \"function\", value: renderSubLayers, compare: false },\n  colormap: { type: \"string\", value: \"\", compare: true },\n  dtype: { type: \"string\", value: \"Uint16\", compare: true },\n  domain: { type: \"array\", value: [], compare: true },\n  viewportId: { type: \"string\", value: \"\", compare: true },\n  unprojectLensBounds: { type: \"array\", value: [0, 0, 0, 0], compare: true },\n  isLensOn: { type: \"boolean\", value: false, compare: true },\n  lensSelection: { type: \"number\", value: 0, compare: true },\n  lensRadius: { type: \"number\", value: 100, compare: true },\n  lensBorderColor: { type: \"array\", value: [255, 255, 255], compare: true },\n  lensBorderRadius: { type: \"number\", value: 0.02, compare: true },\n  transparentColor: { type: \"array\", value: null, compare: true },\n  interpolation: { type: \"number\", value: null, compare: true }\n};\nvar MultiscaleImageLayerBase = class extends TileLayer {\n  _updateTileset() {\n    if (!this.props.viewportId) {\n      super._updateTileset();\n    }\n    if (this.props.viewportId && this.context.viewport.id === this.props.viewportId || !this.state.tileset._viewport) {\n      super._updateTileset();\n    }\n  }\n};\nMultiscaleImageLayerBase.layerName = \"MultiscaleImageLayerBase\";\nMultiscaleImageLayerBase.defaultProps = defaultProps$6;\nvar defaultProps$5 = {\n  pickable: { type: \"boolean\", value: true, compare: true },\n  coordinateSystem: COORDINATE_SYSTEM2.CARTESIAN,\n  contrastLimits: { type: \"array\", value: [], compare: true },\n  channelsVisible: { type: \"array\", value: [], compare: true },\n  colors: { type: \"array\", value: [], compare: true },\n  selections: { type: \"array\", value: [], compare: true },\n  colormap: { type: \"string\", value: \"\", compare: true },\n  domain: { type: \"array\", value: [], compare: true },\n  viewportId: { type: \"string\", value: \"\", compare: true },\n  loader: {\n    type: \"object\",\n    value: {\n      getRaster: () => __async(void 0, null, function* () {\n        return { data: [], height: 0, width: 0 };\n      }),\n      dtype: \"Uint16\"\n    },\n    compare: true\n  },\n  isLensOn: { type: \"boolean\", value: false, compare: true },\n  lensSelection: { type: \"number\", value: 0, compare: true },\n  lensRadius: { type: \"number\", value: 100, compare: true },\n  lensBorderColor: { type: \"array\", value: [255, 255, 255], compare: true },\n  lensBorderRadius: { type: \"number\", value: 0.02, compare: true },\n  onClick: { type: \"function\", value: null, compare: true },\n  transparentColor: { type: \"array\", value: null, compare: true },\n  onViewportLoad: { type: \"function\", value: null, compare: true },\n  interpolation: {\n    type: \"number\",\n    value: GL.NEAREST,\n    compare: true\n  }\n};\nvar ImageLayer = class extends CompositeLayer {\n  initializeState() {\n    this.state = {\n      unprojectLensBounds: [0, 0, 0, 0],\n      width: 0,\n      height: 0,\n      data: []\n    };\n    if (this.context.deck) {\n      this.context.deck.eventManager.on({\n        pointermove: () => onPointer(this),\n        pointerleave: () => onPointer(this),\n        wheel: () => onPointer(this)\n      });\n    }\n  }\n  finalizeState() {\n    this.state.abortController.abort();\n  }\n  updateState({ props, oldProps }) {\n    const loaderChanged = props.loader !== oldProps.loader;\n    const selectionsChanged = props.selections !== oldProps.selections;\n    if (loaderChanged || selectionsChanged) {\n      const { loader, selections = [], onViewportLoad } = this.props;\n      const abortController = new AbortController();\n      this.setState({ abortController });\n      const { signal } = abortController;\n      const getRaster = (selection) => loader.getRaster({ selection, signal });\n      const dataPromises = selections.map(getRaster);\n      Promise.all(dataPromises).then((rasters) => {\n        const raster = {\n          data: rasters.map((d) => d.data),\n          width: rasters[0].width,\n          height: rasters[0].height\n        };\n        if (isInterleaved(loader.shape)) {\n          raster.data = raster.data[0];\n          if (raster.data.length === raster.width * raster.height * 3) {\n            raster.format = GL.RGB;\n            raster.dataFormat = GL.RGB;\n          }\n        }\n        if (onViewportLoad) {\n          onViewportLoad(raster);\n        }\n        this.setState(__spreadValues({}, raster));\n      }).catch((e) => {\n        if (e !== SIGNAL_ABORTED) {\n          throw e;\n        }\n      });\n    }\n  }\n  getPickingInfo({ info, sourceLayer }) {\n    info.sourceLayer = sourceLayer;\n    info.tile = sourceLayer.props.tile;\n    return info;\n  }\n  renderLayers() {\n    const { loader, id } = this.props;\n    const { dtype } = loader;\n    const { width, height, data, unprojectLensBounds } = this.state;\n    if (!(width && height))\n      return null;\n    const bounds = [0, height, width, 0];\n    if (isInterleaved(loader.shape)) {\n      const { photometricInterpretation = 2 } = loader.meta;\n      return new BitmapLayer(this.props, {\n        image: this.state,\n        photometricInterpretation,\n        bounds,\n        id: `image-sub-layer-${bounds}-${id}`\n      });\n    }\n    return new XRLayer(this.props, {\n      channelData: { data, height, width },\n      bounds,\n      id: `image-sub-layer-${bounds}-${id}`,\n      dtype,\n      unprojectLensBounds\n    });\n  }\n};\nImageLayer.layerName = \"ImageLayer\";\nImageLayer.defaultProps = defaultProps$5;\nvar defaultProps$4 = {\n  pickable: { type: \"boolean\", value: true, compare: true },\n  onHover: { type: \"function\", value: null, compare: false },\n  contrastLimits: { type: \"array\", value: [], compare: true },\n  colors: { type: \"array\", value: [], compare: true },\n  channelsVisible: { type: \"array\", value: [], compare: true },\n  opacity: { type: \"number\", value: 1, compare: true },\n  colormap: { type: \"string\", value: \"\", compare: true },\n  domain: { type: \"array\", value: [], compare: true },\n  viewportId: { type: \"string\", value: \"\", compare: true },\n  isLensOn: { type: \"boolean\", value: false, compare: true },\n  lensSelection: { type: \"number\", value: 0, compare: true },\n  lensRadius: { type: \"number\", value: 100, compare: true },\n  lensBorderColor: { type: \"array\", value: [255, 255, 255], compare: true },\n  lensBorderRadius: { type: \"number\", value: 0.02, compare: true },\n  maxRequests: { type: \"number\", value: 10, compare: true },\n  onClick: { type: \"function\", value: null, compare: true },\n  transparentColor: { type: \"array\", value: null, compare: true },\n  refinementStrategy: { type: \"string\", value: null, compare: true },\n  excludeBackground: { type: \"boolean\", value: false, compare: true }\n};\nvar MultiscaleImageLayer = class extends CompositeLayer {\n  initializeState() {\n    this.state = {\n      unprojectLensBounds: [0, 0, 0, 0]\n    };\n    if (this.context.deck) {\n      this.context.deck.eventManager.on({\n        pointermove: () => onPointer(this),\n        pointerleave: () => onPointer(this),\n        wheel: () => onPointer(this)\n      });\n    }\n  }\n  renderLayers() {\n    const {\n      loader,\n      selections,\n      opacity,\n      viewportId,\n      onTileError,\n      onHover,\n      id,\n      onClick,\n      modelMatrix,\n      transparentColor,\n      excludeBackground,\n      refinementStrategy\n    } = this.props;\n    const { tileSize, dtype } = loader[0];\n    const { unprojectLensBounds } = this.state;\n    const getTileData = (_0) => __async(this, [_0], function* ({ x, y, z, signal }) {\n      if (!selections || selections.length === 0) {\n        return null;\n      }\n      const resolution = Math.round(-z);\n      const getTile = (selection) => {\n        const config = { x, y, selection, signal };\n        return loader[resolution].getTile(config);\n      };\n      try {\n        const tiles = yield Promise.all(selections.map(getTile));\n        const tile = {\n          data: tiles.map((d) => d.data),\n          width: tiles[0].width,\n          height: tiles[0].height\n        };\n        if (isInterleaved(loader[resolution].shape)) {\n          tile.data = tile.data[0];\n          if (tile.data.length === tile.width * tile.height * 3) {\n            tile.format = GL.RGB;\n            tile.dataFormat = GL.RGB;\n          }\n          return tile;\n        }\n        return tile;\n      } catch (err) {\n        if (err === SIGNAL_ABORTED) {\n          return null;\n        }\n        throw err;\n      }\n    });\n    const { height, width } = getImageSize(loader[0]);\n    const tiledLayer = new MultiscaleImageLayerBase(this.props, {\n      id: `Tiled-Image-${id}`,\n      getTileData,\n      dtype,\n      tileSize,\n      zoomOffset: Math.round(Math.log2(modelMatrix ? modelMatrix.getScale()[0] : 1)),\n      extent: [0, 0, width, height],\n      minZoom: Math.round(-(loader.length - 1)),\n      maxZoom: 0,\n      refinementStrategy: refinementStrategy || (opacity === 1 ? \"best-available\" : \"no-overlap\"),\n      updateTriggers: {\n        getTileData: [loader, selections]\n      },\n      onTileError: onTileError || loader[0].onTileError,\n      unprojectLensBounds\n    });\n    const lowestResolution = loader[loader.length - 1];\n    const implementsGetRaster = typeof lowestResolution.getRaster === \"function\";\n    const layerModelMatrix = modelMatrix ? modelMatrix.clone() : new Matrix4();\n    const baseLayer = implementsGetRaster && !excludeBackground && new ImageLayer(this.props, {\n      id: `Background-Image-${id}`,\n      loader: lowestResolution,\n      modelMatrix: layerModelMatrix.scale(__pow(2, loader.length - 1)),\n      visible: opacity === 1 && (!viewportId || this.context.viewport.id === viewportId) && !transparentColor,\n      pickable: { type: \"boolean\", value: true, compare: true },\n      onHover,\n      onClick,\n      interpolation: GL.LINEAR\n    });\n    const layers = [baseLayer, tiledLayer];\n    return layers;\n  }\n};\nMultiscaleImageLayer.layerName = \"MultiscaleImageLayer\";\nMultiscaleImageLayer.defaultProps = defaultProps$4;\nvar defaultProps$3 = {\n  pickable: { type: \"boolean\", value: true, compare: true },\n  loader: {\n    type: \"object\",\n    value: {\n      getRaster: () => __async(void 0, null, function* () {\n        return { data: [], height: 0, width: 0 };\n      }),\n      getRasterSize: () => ({ height: 0, width: 0 }),\n      dtype: \"<u2\"\n    },\n    compare: true\n  },\n  id: { type: \"string\", value: \"\", compare: true },\n  boundingBox: {\n    type: \"array\",\n    value: [\n      [0, 0],\n      [0, 1],\n      [1, 1],\n      [1, 0]\n    ],\n    compare: true\n  },\n  boundingBoxColor: { type: \"array\", value: [255, 0, 0], compare: true },\n  boundingBoxOutlineWidth: { type: \"number\", value: 1, compare: true },\n  viewportOutlineColor: { type: \"array\", value: [255, 190, 0], compare: true },\n  viewportOutlineWidth: { type: \"number\", value: 2, compare: true },\n  overviewScale: { type: \"number\", value: 1, compare: true },\n  zoom: { type: \"number\", value: 1, compare: true }\n};\nvar OverviewLayer = class extends CompositeLayer {\n  renderLayers() {\n    const {\n      loader,\n      id,\n      zoom,\n      boundingBox,\n      boundingBoxColor,\n      boundingBoxOutlineWidth,\n      viewportOutlineColor,\n      viewportOutlineWidth,\n      overviewScale\n    } = this.props;\n    const { width, height } = getImageSize(loader[0]);\n    const z = loader.length - 1;\n    const lowestResolution = loader[z];\n    const overview = new ImageLayer(this.props, {\n      id: `viewport-${id}`,\n      modelMatrix: new Matrix4().scale(__pow(2, z) * overviewScale),\n      loader: lowestResolution\n    });\n    const boundingBoxOutline = new PolygonLayer({\n      id: `bounding-box-overview-${id}`,\n      coordinateSystem: COORDINATE_SYSTEM2.CARTESIAN,\n      data: [boundingBox],\n      getPolygon: (f) => f,\n      filled: false,\n      stroked: true,\n      getLineColor: boundingBoxColor,\n      getLineWidth: boundingBoxOutlineWidth * __pow(2, zoom)\n    });\n    const viewportOutline = new PolygonLayer({\n      id: `viewport-outline-${id}`,\n      coordinateSystem: COORDINATE_SYSTEM2.CARTESIAN,\n      data: [\n        [\n          [0, 0],\n          [width * overviewScale, 0],\n          [width * overviewScale, height * overviewScale],\n          [0, height * overviewScale]\n        ]\n      ],\n      getPolygon: (f) => f,\n      filled: false,\n      stroked: true,\n      getLineColor: viewportOutlineColor,\n      getLineWidth: viewportOutlineWidth * __pow(2, zoom)\n    });\n    const layers = [overview, boundingBoxOutline, viewportOutline];\n    return layers;\n  }\n};\nOverviewLayer.layerName = \"OverviewLayer\";\nOverviewLayer.defaultProps = defaultProps$3;\nfunction makeBoundingBox(viewState) {\n  const viewport = new OrthographicView().makeViewport({\n    viewState,\n    height: viewState.height,\n    width: viewState.width\n  });\n  return [\n    viewport.unproject([0, 0]),\n    viewport.unproject([viewport.width, 0]),\n    viewport.unproject([viewport.width, viewport.height]),\n    viewport.unproject([0, viewport.height])\n  ];\n}\nfunction getDefaultInitialViewState(loader, viewSize, zoomBackOff = 0, use3d = false, modelMatrix) {\n  const source = Array.isArray(loader) ? loader[0] : loader;\n  const { width, height } = getImageSize(source);\n  const depth = source.shape[source.labels.indexOf(\"z\")];\n  const zoom = Math.log2(Math.min(viewSize.width / width, viewSize.height / height)) - zoomBackOff;\n  const physicalSizeScalingMatrix = getPhysicalSizeScalingMatrix(source);\n  const loaderInitialViewState = {\n    target: (modelMatrix || new Matrix4()).transformPoint((use3d ? physicalSizeScalingMatrix : new Matrix4()).transformPoint([\n      width / 2,\n      height / 2,\n      use3d ? depth / 2 : 0\n    ])),\n    zoom\n  };\n  return loaderInitialViewState;\n}\nfunction getPosition(boundingBox, position, length) {\n  const viewLength = boundingBox[2][0] - boundingBox[0][0];\n  switch (position) {\n    case \"bottom-right\": {\n      const yCoord = boundingBox[2][1] - (boundingBox[2][1] - boundingBox[0][1]) * length;\n      const xLeftCoord = boundingBox[2][0] - viewLength * length;\n      return [yCoord, xLeftCoord];\n    }\n    case \"top-right\": {\n      const yCoord = (boundingBox[2][1] - boundingBox[0][1]) * length;\n      const xLeftCoord = boundingBox[2][0] - viewLength * length;\n      return [yCoord, xLeftCoord];\n    }\n    case \"top-left\": {\n      const yCoord = (boundingBox[2][1] - boundingBox[0][1]) * length;\n      const xLeftCoord = viewLength * length;\n      return [yCoord, xLeftCoord];\n    }\n    case \"bottom-left\": {\n      const yCoord = boundingBox[2][1] - (boundingBox[2][1] - boundingBox[0][1]) * length;\n      const xLeftCoord = viewLength * length;\n      return [yCoord, xLeftCoord];\n    }\n    default: {\n      throw new Error(`Position ${position} not found`);\n    }\n  }\n}\nvar defaultProps$2 = {\n  pickable: { type: \"boolean\", value: true, compare: true },\n  viewState: {\n    type: \"object\",\n    value: { zoom: 0, target: [0, 0, 0] },\n    compare: true\n  },\n  unit: { type: \"string\", value: \"\", compare: true },\n  size: { type: \"number\", value: 1, compare: true },\n  position: { type: \"string\", value: \"bottom-right\", compare: true },\n  length: { type: \"number\", value: 0.085, compare: true }\n};\nvar ScaleBarLayer = class extends CompositeLayer {\n  renderLayers() {\n    const { id, unit: unit2, size, position, viewState, length } = this.props;\n    const boundingBox = makeBoundingBox(viewState);\n    const { zoom } = viewState;\n    const viewLength = boundingBox[2][0] - boundingBox[0][0];\n    const barLength = viewLength * 0.05;\n    const barHeight = Math.max(__pow(2, -zoom + 1.5), (boundingBox[2][1] - boundingBox[0][1]) * 7e-3);\n    const numUnits = barLength * size;\n    const [yCoord, xLeftCoord] = getPosition(boundingBox, position, length);\n    const lengthBar = new LineLayer({\n      id: `scale-bar-length-${id}`,\n      coordinateSystem: COORDINATE_SYSTEM2.CARTESIAN,\n      data: [\n        [\n          [xLeftCoord, yCoord],\n          [xLeftCoord + barLength, yCoord]\n        ]\n      ],\n      getSourcePosition: (d) => d[0],\n      getTargetPosition: (d) => d[1],\n      getWidth: 2,\n      getColor: [220, 220, 220]\n    });\n    const tickBoundsLeft = new LineLayer({\n      id: `scale-bar-height-left-${id}`,\n      coordinateSystem: COORDINATE_SYSTEM2.CARTESIAN,\n      data: [\n        [\n          [xLeftCoord, yCoord - barHeight],\n          [xLeftCoord, yCoord + barHeight]\n        ]\n      ],\n      getSourcePosition: (d) => d[0],\n      getTargetPosition: (d) => d[1],\n      getWidth: 2,\n      getColor: [220, 220, 220]\n    });\n    const tickBoundsRight = new LineLayer({\n      id: `scale-bar-height-right-${id}`,\n      coordinateSystem: COORDINATE_SYSTEM2.CARTESIAN,\n      data: [\n        [\n          [xLeftCoord + barLength, yCoord - barHeight],\n          [xLeftCoord + barLength, yCoord + barHeight]\n        ]\n      ],\n      getSourcePosition: (d) => d[0],\n      getTargetPosition: (d) => d[1],\n      getWidth: 2,\n      getColor: [220, 220, 220]\n    });\n    const textLayer = new TextLayer({\n      id: `units-label-layer-${id}`,\n      coordinateSystem: COORDINATE_SYSTEM2.CARTESIAN,\n      data: [\n        {\n          text: String(numUnits).slice(0, 5).replace(/\\.$/, \"\") + unit2,\n          position: [xLeftCoord + barLength * 0.5, yCoord + barHeight * 4]\n        }\n      ],\n      getColor: [220, 220, 220, 255],\n      getSize: 12,\n      fontFamily: DEFAULT_FONT_FAMILY,\n      sizeUnits: \"meters\",\n      sizeScale: __pow(2, -zoom),\n      characterSet: [...unit2.split(\"\"), ...range2(10).map((i) => String(i)), \".\"]\n    });\n    return [lengthBar, tickBoundsLeft, tickBoundsRight, textLayer];\n  }\n};\nScaleBarLayer.layerName = \"ScaleBarLayer\";\nScaleBarLayer.defaultProps = defaultProps$2;\nvar vs = '#version 300 es\\n#define GLSLIFY 1\\n#define SHADER_NAME xr-layer-vertex-shader\\nin vec3 positions;uniform vec3 eye_pos;uniform mat4 proj;uniform mat4 model;uniform mat4 view;uniform mat4 scale;uniform mat4 resolution;out vec3 vray_dir;flat out vec3 transformed_eye;void main(){gl_Position=proj*view*model*scale*resolution*vec4(positions,1.);/*This first diagram is a skewed volume(i.e a \"shear\" model matrix applied)top down with the eye marked as #,all in world space^___|__\\\\|\\\\\\\\|\\\\|____|||\\n#\\nThis next diagram shows the volume after the inverse model matrix has placed it back in model coordinates,but the eye still in world space.^___|___|||||||__|__||||\\n#\\nFinally,we apply the inverse model matrix transformation to the eye as well to bring it too into world space.Notice that the ray here matches the \"voxels\" through which the first ray also passes,as desired.^____/__|/||/||/____|///\\n#\\n*/transformed_eye=(inverse(resolution)*inverse(scale)*inverse(model)*(vec4(eye_pos,1.))).xyz;vray_dir=positions-transformed_eye;}';\nvar fs$1 = \"#version 300 es\\nprecision highp int;precision highp float;precision highp SAMPLER_TYPE;\\n#define GLSLIFY 1\\nuniform highp SAMPLER_TYPE volume0;uniform highp SAMPLER_TYPE volume1;uniform highp SAMPLER_TYPE volume2;uniform highp SAMPLER_TYPE volume3;uniform highp SAMPLER_TYPE volume4;uniform highp SAMPLER_TYPE volume5;uniform vec3 scaledDimensions;uniform mat4 scale;uniform vec3 normals[NUM_PLANES];uniform float distances[NUM_PLANES];uniform vec2 contrastLimits[6];uniform vec3 colors[6];uniform vec2 xSlice;uniform vec2 ySlice;uniform vec2 zSlice;in vec3 vray_dir;flat in vec3 transformed_eye;out vec4 color;vec2 intersect_box(vec3 orig,vec3 dir){vec3 box_min=vec3(xSlice[0],ySlice[0],zSlice[0]);vec3 box_max=vec3(xSlice[1],ySlice[1],zSlice[1]);vec3 inv_dir=1./dir;vec3 tmin_tmp=(box_min-orig)*inv_dir;vec3 tmax_tmp=(box_max-orig)*inv_dir;vec3 tmin=min(tmin_tmp,tmax_tmp);vec3 tmax=max(tmin_tmp,tmax_tmp);float t0=max(tmin.x,max(tmin.y,tmin.z));float t1=min(tmax.x,min(tmax.y,tmax.z));vec2 val=vec2(t0,t1);return val;}float linear_to_srgb(float x){if(x<=0.0031308f){return 12.92f*x;}return 1.055f*pow(x,1.f/2.4f)-0.055f;}float wang_hash(int seed){seed=(seed ^ 61)^(seed>>16);seed*=9;seed=seed ^(seed>>4);seed*=0x27d4eb2d;seed=seed ^(seed>>15);return float(seed % 2147483647)/float(2147483647);}void main(void){vec3 ray_dir=normalize(vray_dir);vec2 t_hit=intersect_box(transformed_eye,ray_dir);if(t_hit.x>t_hit.y){discard;}t_hit.x=max(t_hit.x,0.);vec3 dt_vec=1./(scale*vec4(abs(ray_dir),1.)).xyz;float dt=1.*min(dt_vec.x,min(dt_vec.y,dt_vec.z));float offset=wang_hash(int(gl_FragCoord.x+640.*gl_FragCoord.y));vec3 p=transformed_eye+(t_hit.x+offset*dt)*ray_dir;_BEFORE_RENDERfor(float t=t_hit.x;t<t_hit.y;t+=dt){float canShow=1.;for(int i=0;i<NUM_PLANES;i+=1){canShow*=max(0.,sign(dot(normals[i],p)+distances[i]));}float canShowXCoordinate=max(p.x-0.,0.)*max(1.-p.x,0.);float canShowYCoordinate=max(p.y-0.,0.)*max(1.-p.y,0.);float canShowZCoordinate=max(p.z-0.,0.)*max(1.-p.z,0.);float canShowCoordinate=float(ceil(canShowXCoordinate*canShowYCoordinate*canShowZCoordinate));canShow=canShowCoordinate*canShow;float intensityValue0=canShow*sample_and_apply_contrast_limits(volume0,p,contrastLimits[0]);float intensityValue1=canShow*sample_and_apply_contrast_limits(volume1,p,contrastLimits[1]);float intensityValue2=canShow*sample_and_apply_contrast_limits(volume2,p,contrastLimits[2]);float intensityValue3=canShow*sample_and_apply_contrast_limits(volume3,p,contrastLimits[3]);float intensityValue4=canShow*sample_and_apply_contrast_limits(volume4,p,contrastLimits[4]);float intensityValue5=canShow*sample_and_apply_contrast_limits(volume5,p,contrastLimits[5]);_RENDERp+=ray_dir*dt;}_AFTER_RENDERcolor.r=linear_to_srgb(color.r);color.g=linear_to_srgb(color.g);color.b=linear_to_srgb(color.b);}\";\nvar fs = \"#define GLSLIFY 1\\nvec4 jet(float x_17){const float e0=0.0;const vec4 v0=vec4(0,0,0.5137254901960784,1);const float e1=0.125;const vec4 v1=vec4(0,0.23529411764705882,0.6666666666666666,1);const float e2=0.375;const vec4 v2=vec4(0.0196078431372549,1,1,1);const float e3=0.625;const vec4 v3=vec4(1,1,0,1);const float e4=0.875;const vec4 v4=vec4(0.9803921568627451,0,0,1);const float e5=1.0;const vec4 v5=vec4(0.5019607843137255,0,0,1);float a0=smoothstep(e0,e1,x_17);float a1=smoothstep(e1,e2,x_17);float a2=smoothstep(e2,e3,x_17);float a3=smoothstep(e3,e4,x_17);float a4=smoothstep(e4,e5,x_17);return max(mix(v0,v1,a0)*step(e0,x_17)*step(x_17,e1),max(mix(v1,v2,a1)*step(e1,x_17)*step(x_17,e2),max(mix(v2,v3,a2)*step(e2,x_17)*step(x_17,e3),max(mix(v3,v4,a3)*step(e3,x_17)*step(x_17,e4),mix(v4,v5,a4)*step(e4,x_17)*step(x_17,e5)))));}vec4 hsv(float x_18){const float e0=0.0;const vec4 v0=vec4(1,0,0,1);const float e1=0.169;const vec4 v1=vec4(0.9921568627450981,1,0.00784313725490196,1);const float e2=0.173;const vec4 v2=vec4(0.9686274509803922,1,0.00784313725490196,1);const float e3=0.337;const vec4 v3=vec4(0,0.9882352941176471,0.01568627450980392,1);const float e4=0.341;const vec4 v4=vec4(0,0.9882352941176471,0.0392156862745098,1);const float e5=0.506;const vec4 v5=vec4(0.00392156862745098,0.9764705882352941,1,1);const float e6=0.671;const vec4 v6=vec4(0.00784313725490196,0,0.9921568627450981,1);const float e7=0.675;const vec4 v7=vec4(0.03137254901960784,0,0.9921568627450981,1);const float e8=0.839;const vec4 v8=vec4(1,0,0.984313725490196,1);const float e9=0.843;const vec4 v9=vec4(1,0,0.9607843137254902,1);const float e10=1.0;const vec4 v10=vec4(1,0,0.023529411764705882,1);float a0=smoothstep(e0,e1,x_18);float a1=smoothstep(e1,e2,x_18);float a2=smoothstep(e2,e3,x_18);float a3=smoothstep(e3,e4,x_18);float a4=smoothstep(e4,e5,x_18);float a5=smoothstep(e5,e6,x_18);float a6=smoothstep(e6,e7,x_18);float a7=smoothstep(e7,e8,x_18);float a8=smoothstep(e8,e9,x_18);float a9=smoothstep(e9,e10,x_18);return max(mix(v0,v1,a0)*step(e0,x_18)*step(x_18,e1),max(mix(v1,v2,a1)*step(e1,x_18)*step(x_18,e2),max(mix(v2,v3,a2)*step(e2,x_18)*step(x_18,e3),max(mix(v3,v4,a3)*step(e3,x_18)*step(x_18,e4),max(mix(v4,v5,a4)*step(e4,x_18)*step(x_18,e5),max(mix(v5,v6,a5)*step(e5,x_18)*step(x_18,e6),max(mix(v6,v7,a6)*step(e6,x_18)*step(x_18,e7),max(mix(v7,v8,a7)*step(e7,x_18)*step(x_18,e8),max(mix(v8,v9,a8)*step(e8,x_18)*step(x_18,e9),mix(v9,v10,a9)*step(e9,x_18)*step(x_18,e10))))))))));}vec4 hot(float x_13){const float e0=0.0;const vec4 v0=vec4(0,0,0,1);const float e1=0.3;const vec4 v1=vec4(0.9019607843137255,0,0,1);const float e2=0.6;const vec4 v2=vec4(1,0.8235294117647058,0,1);const float e3=1.0;const vec4 v3=vec4(1,1,1,1);float a0=smoothstep(e0,e1,x_13);float a1=smoothstep(e1,e2,x_13);float a2=smoothstep(e2,e3,x_13);return max(mix(v0,v1,a0)*step(e0,x_13)*step(x_13,e1),max(mix(v1,v2,a1)*step(e1,x_13)*step(x_13,e2),mix(v2,v3,a2)*step(e2,x_13)*step(x_13,e3)));}vec4 cool(float x_24){const float e0=0.0;const vec4 v0=vec4(0.49019607843137253,0,0.7019607843137254,1);const float e1=0.13;const vec4 v1=vec4(0.4549019607843137,0,0.8549019607843137,1);const float e2=0.25;const vec4 v2=vec4(0.3843137254901961,0.2901960784313726,0.9294117647058824,1);const float e3=0.38;const vec4 v3=vec4(0.26666666666666666,0.5725490196078431,0.9058823529411765,1);const float e4=0.5;const vec4 v4=vec4(0,0.8,0.7725490196078432,1);const float e5=0.63;const vec4 v5=vec4(0,0.9686274509803922,0.5725490196078431,1);const float e6=0.75;const vec4 v6=vec4(0,1,0.34509803921568627,1);const float e7=0.88;const vec4 v7=vec4(0.1568627450980392,1,0.03137254901960784,1);const float e8=1.0;const vec4 v8=vec4(0.5764705882352941,1,0,1);float a0=smoothstep(e0,e1,x_24);float a1=smoothstep(e1,e2,x_24);float a2=smoothstep(e2,e3,x_24);float a3=smoothstep(e3,e4,x_24);float a4=smoothstep(e4,e5,x_24);float a5=smoothstep(e5,e6,x_24);float a6=smoothstep(e6,e7,x_24);float a7=smoothstep(e7,e8,x_24);return max(mix(v0,v1,a0)*step(e0,x_24)*step(x_24,e1),max(mix(v1,v2,a1)*step(e1,x_24)*step(x_24,e2),max(mix(v2,v3,a2)*step(e2,x_24)*step(x_24,e3),max(mix(v3,v4,a3)*step(e3,x_24)*step(x_24,e4),max(mix(v4,v5,a4)*step(e4,x_24)*step(x_24,e5),max(mix(v5,v6,a5)*step(e5,x_24)*step(x_24,e6),max(mix(v6,v7,a6)*step(e6,x_24)*step(x_24,e7),mix(v7,v8,a7)*step(e7,x_24)*step(x_24,e8))))))));}vec4 spring(float x_5){const float e0=0.0;const vec4 v0=vec4(1,0,1,1);const float e1=1.0;const vec4 v1=vec4(1,1,0,1);float a0=smoothstep(e0,e1,x_5);return mix(v0,v1,a0)*step(e0,x_5)*step(x_5,e1);}vec4 summer(float x_12){const float e0=0.0;const vec4 v0=vec4(0,0.5019607843137255,0.4,1);const float e1=1.0;const vec4 v1=vec4(1,1,0.4,1);float a0=smoothstep(e0,e1,x_12);return mix(v0,v1,a0)*step(e0,x_12)*step(x_12,e1);}vec4 autumn(float x_25){const float e0=0.0;const vec4 v0=vec4(1,0,0,1);const float e1=1.0;const vec4 v1=vec4(1,1,0,1);float a0=smoothstep(e0,e1,x_25);return mix(v0,v1,a0)*step(e0,x_25)*step(x_25,e1);}vec4 winter(float x_16){const float e0=0.0;const vec4 v0=vec4(0,0,1,1);const float e1=1.0;const vec4 v1=vec4(0,1,0.5019607843137255,1);float a0=smoothstep(e0,e1,x_16);return mix(v0,v1,a0)*step(e0,x_16)*step(x_16,e1);}vec4 bone(float x_15){const float e0=0.0;const vec4 v0=vec4(0,0,0,1);const float e1=0.376;const vec4 v1=vec4(0.32941176470588235,0.32941176470588235,0.4549019607843137,1);const float e2=0.753;const vec4 v2=vec4(0.6627450980392157,0.7843137254901961,0.7843137254901961,1);const float e3=1.0;const vec4 v3=vec4(1,1,1,1);float a0=smoothstep(e0,e1,x_15);float a1=smoothstep(e1,e2,x_15);float a2=smoothstep(e2,e3,x_15);return max(mix(v0,v1,a0)*step(e0,x_15)*step(x_15,e1),max(mix(v1,v2,a1)*step(e1,x_15)*step(x_15,e2),mix(v2,v3,a2)*step(e2,x_15)*step(x_15,e3)));}vec4 copper(float x_10){const float e0=0.0;const vec4 v0=vec4(0,0,0,1);const float e1=0.804;const vec4 v1=vec4(1,0.6274509803921569,0.4,1);const float e2=1.0;const vec4 v2=vec4(1,0.7803921568627451,0.4980392156862745,1);float a0=smoothstep(e0,e1,x_10);float a1=smoothstep(e1,e2,x_10);return max(mix(v0,v1,a0)*step(e0,x_10)*step(x_10,e1),mix(v1,v2,a1)*step(e1,x_10)*step(x_10,e2));}vec4 greys(float x_4){const float e0=0.0;const vec4 v0=vec4(0,0,0,1);const float e1=1.0;const vec4 v1=vec4(1,1,1,1);float a0=smoothstep(e0,e1,x_4);return mix(v0,v1,a0)*step(e0,x_4)*step(x_4,e1);}vec4 yignbu(float x_32){const float e0=0.0;const vec4 v0=vec4(0.03137254901960784,0.11372549019607843,0.34509803921568627,1);const float e1=0.125;const vec4 v1=vec4(0.1450980392156863,0.20392156862745098,0.5803921568627451,1);const float e2=0.25;const vec4 v2=vec4(0.13333333333333333,0.3686274509803922,0.6588235294117647,1);const float e3=0.375;const vec4 v3=vec4(0.11372549019607843,0.5686274509803921,0.7529411764705882,1);const float e4=0.5;const vec4 v4=vec4(0.2549019607843137,0.7137254901960784,0.7686274509803922,1);const float e5=0.625;const vec4 v5=vec4(0.4980392156862745,0.803921568627451,0.7333333333333333,1);const float e6=0.75;const vec4 v6=vec4(0.7803921568627451,0.9137254901960784,0.7058823529411765,1);const float e7=0.875;const vec4 v7=vec4(0.9294117647058824,0.9725490196078431,0.8509803921568627,1);const float e8=1.0;const vec4 v8=vec4(1,1,0.8509803921568627,1);float a0=smoothstep(e0,e1,x_32);float a1=smoothstep(e1,e2,x_32);float a2=smoothstep(e2,e3,x_32);float a3=smoothstep(e3,e4,x_32);float a4=smoothstep(e4,e5,x_32);float a5=smoothstep(e5,e6,x_32);float a6=smoothstep(e6,e7,x_32);float a7=smoothstep(e7,e8,x_32);return max(mix(v0,v1,a0)*step(e0,x_32)*step(x_32,e1),max(mix(v1,v2,a1)*step(e1,x_32)*step(x_32,e2),max(mix(v2,v3,a2)*step(e2,x_32)*step(x_32,e3),max(mix(v3,v4,a3)*step(e3,x_32)*step(x_32,e4),max(mix(v4,v5,a4)*step(e4,x_32)*step(x_32,e5),max(mix(v5,v6,a5)*step(e5,x_32)*step(x_32,e6),max(mix(v6,v7,a6)*step(e6,x_32)*step(x_32,e7),mix(v7,v8,a7)*step(e7,x_32)*step(x_32,e8))))))));}vec4 greens(float x_34){const float e0=0.0;const vec4 v0=vec4(0,0.26666666666666666,0.10588235294117647,1);const float e1=0.125;const vec4 v1=vec4(0,0.42745098039215684,0.17254901960784313,1);const float e2=0.25;const vec4 v2=vec4(0.13725490196078433,0.5450980392156862,0.27058823529411763,1);const float e3=0.375;const vec4 v3=vec4(0.2549019607843137,0.6705882352941176,0.36470588235294116,1);const float e4=0.5;const vec4 v4=vec4(0.4549019607843137,0.7686274509803922,0.4627450980392157,1);const float e5=0.625;const vec4 v5=vec4(0.6313725490196078,0.8509803921568627,0.6078431372549019,1);const float e6=0.75;const vec4 v6=vec4(0.7803921568627451,0.9137254901960784,0.7529411764705882,1);const float e7=0.875;const vec4 v7=vec4(0.8980392156862745,0.9607843137254902,0.8784313725490196,1);const float e8=1.0;const vec4 v8=vec4(0.9686274509803922,0.9882352941176471,0.9607843137254902,1);float a0=smoothstep(e0,e1,x_34);float a1=smoothstep(e1,e2,x_34);float a2=smoothstep(e2,e3,x_34);float a3=smoothstep(e3,e4,x_34);float a4=smoothstep(e4,e5,x_34);float a5=smoothstep(e5,e6,x_34);float a6=smoothstep(e6,e7,x_34);float a7=smoothstep(e7,e8,x_34);return max(mix(v0,v1,a0)*step(e0,x_34)*step(x_34,e1),max(mix(v1,v2,a1)*step(e1,x_34)*step(x_34,e2),max(mix(v2,v3,a2)*step(e2,x_34)*step(x_34,e3),max(mix(v3,v4,a3)*step(e3,x_34)*step(x_34,e4),max(mix(v4,v5,a4)*step(e4,x_34)*step(x_34,e5),max(mix(v5,v6,a5)*step(e5,x_34)*step(x_34,e6),max(mix(v6,v7,a6)*step(e6,x_34)*step(x_34,e7),mix(v7,v8,a7)*step(e7,x_34)*step(x_34,e8))))))));}vec4 yiorrd(float x_41){const float e0=0.0;const vec4 v0=vec4(0.5019607843137255,0,0.14901960784313725,1);const float e1=0.125;const vec4 v1=vec4(0.7411764705882353,0,0.14901960784313725,1);const float e2=0.25;const vec4 v2=vec4(0.8901960784313725,0.10196078431372549,0.10980392156862745,1);const float e3=0.375;const vec4 v3=vec4(0.9882352941176471,0.3058823529411765,0.16470588235294117,1);const float e4=0.5;const vec4 v4=vec4(0.9921568627450981,0.5529411764705883,0.23529411764705882,1);const float e5=0.625;const vec4 v5=vec4(0.996078431372549,0.6980392156862745,0.2980392156862745,1);const float e6=0.75;const vec4 v6=vec4(0.996078431372549,0.8509803921568627,0.4627450980392157,1);const float e7=0.875;const vec4 v7=vec4(1,0.9294117647058824,0.6274509803921569,1);const float e8=1.0;const vec4 v8=vec4(1,1,0.8,1);float a0=smoothstep(e0,e1,x_41);float a1=smoothstep(e1,e2,x_41);float a2=smoothstep(e2,e3,x_41);float a3=smoothstep(e3,e4,x_41);float a4=smoothstep(e4,e5,x_41);float a5=smoothstep(e5,e6,x_41);float a6=smoothstep(e6,e7,x_41);float a7=smoothstep(e7,e8,x_41);return max(mix(v0,v1,a0)*step(e0,x_41)*step(x_41,e1),max(mix(v1,v2,a1)*step(e1,x_41)*step(x_41,e2),max(mix(v2,v3,a2)*step(e2,x_41)*step(x_41,e3),max(mix(v3,v4,a3)*step(e3,x_41)*step(x_41,e4),max(mix(v4,v5,a4)*step(e4,x_41)*step(x_41,e5),max(mix(v5,v6,a5)*step(e5,x_41)*step(x_41,e6),max(mix(v6,v7,a6)*step(e6,x_41)*step(x_41,e7),mix(v7,v8,a7)*step(e7,x_41)*step(x_41,e8))))))));}vec4 bluered(float x_23){const float e0=0.0;const vec4 v0=vec4(0,0,1,1);const float e1=1.0;const vec4 v1=vec4(1,0,0,1);float a0=smoothstep(e0,e1,x_23);return mix(v0,v1,a0)*step(e0,x_23)*step(x_23,e1);}vec4 rdbu(float x_1){const float e0=0.0;const vec4 v0=vec4(0.0196078431372549,0.0392156862745098,0.6745098039215687,1);const float e1=0.35;const vec4 v1=vec4(0.41568627450980394,0.5372549019607843,0.9686274509803922,1);const float e2=0.5;const vec4 v2=vec4(0.7450980392156863,0.7450980392156863,0.7450980392156863,1);const float e3=0.6;const vec4 v3=vec4(0.8627450980392157,0.6666666666666666,0.5176470588235295,1);const float e4=0.7;const vec4 v4=vec4(0.9019607843137255,0.5686274509803921,0.35294117647058826,1);const float e5=1.0;const vec4 v5=vec4(0.6980392156862745,0.0392156862745098,0.10980392156862745,1);float a0=smoothstep(e0,e1,x_1);float a1=smoothstep(e1,e2,x_1);float a2=smoothstep(e2,e3,x_1);float a3=smoothstep(e3,e4,x_1);float a4=smoothstep(e4,e5,x_1);return max(mix(v0,v1,a0)*step(e0,x_1)*step(x_1,e1),max(mix(v1,v2,a1)*step(e1,x_1)*step(x_1,e2),max(mix(v2,v3,a2)*step(e2,x_1)*step(x_1,e3),max(mix(v3,v4,a3)*step(e3,x_1)*step(x_1,e4),mix(v4,v5,a4)*step(e4,x_1)*step(x_1,e5)))));}vec4 picnic(float x_42){const float e0=0.0;const vec4 v0=vec4(0,0,1,1);const float e1=0.1;const vec4 v1=vec4(0.2,0.6,1,1);const float e2=0.2;const vec4 v2=vec4(0.4,0.8,1,1);const float e3=0.3;const vec4 v3=vec4(0.6,0.8,1,1);const float e4=0.4;const vec4 v4=vec4(0.8,0.8,1,1);const float e5=0.5;const vec4 v5=vec4(1,1,1,1);const float e6=0.6;const vec4 v6=vec4(1,0.8,1,1);const float e7=0.7;const vec4 v7=vec4(1,0.6,1,1);const float e8=0.8;const vec4 v8=vec4(1,0.4,0.8,1);const float e9=0.9;const vec4 v9=vec4(1,0.4,0.4,1);const float e10=1.0;const vec4 v10=vec4(1,0,0,1);float a0=smoothstep(e0,e1,x_42);float a1=smoothstep(e1,e2,x_42);float a2=smoothstep(e2,e3,x_42);float a3=smoothstep(e3,e4,x_42);float a4=smoothstep(e4,e5,x_42);float a5=smoothstep(e5,e6,x_42);float a6=smoothstep(e6,e7,x_42);float a7=smoothstep(e7,e8,x_42);float a8=smoothstep(e8,e9,x_42);float a9=smoothstep(e9,e10,x_42);return max(mix(v0,v1,a0)*step(e0,x_42)*step(x_42,e1),max(mix(v1,v2,a1)*step(e1,x_42)*step(x_42,e2),max(mix(v2,v3,a2)*step(e2,x_42)*step(x_42,e3),max(mix(v3,v4,a3)*step(e3,x_42)*step(x_42,e4),max(mix(v4,v5,a4)*step(e4,x_42)*step(x_42,e5),max(mix(v5,v6,a5)*step(e5,x_42)*step(x_42,e6),max(mix(v6,v7,a6)*step(e6,x_42)*step(x_42,e7),max(mix(v7,v8,a7)*step(e7,x_42)*step(x_42,e8),max(mix(v8,v9,a8)*step(e8,x_42)*step(x_42,e9),mix(v9,v10,a9)*step(e9,x_42)*step(x_42,e10))))))))));}vec4 rainbow(float x_31){const float e0=0.0;const vec4 v0=vec4(0.5882352941176471,0,0.35294117647058826,1);const float e1=0.125;const vec4 v1=vec4(0,0,0.7843137254901961,1);const float e2=0.25;const vec4 v2=vec4(0,0.09803921568627451,1,1);const float e3=0.375;const vec4 v3=vec4(0,0.596078431372549,1,1);const float e4=0.5;const vec4 v4=vec4(0.17254901960784313,1,0.5882352941176471,1);const float e5=0.625;const vec4 v5=vec4(0.592156862745098,1,0,1);const float e6=0.75;const vec4 v6=vec4(1,0.9176470588235294,0,1);const float e7=0.875;const vec4 v7=vec4(1,0.43529411764705883,0,1);const float e8=1.0;const vec4 v8=vec4(1,0,0,1);float a0=smoothstep(e0,e1,x_31);float a1=smoothstep(e1,e2,x_31);float a2=smoothstep(e2,e3,x_31);float a3=smoothstep(e3,e4,x_31);float a4=smoothstep(e4,e5,x_31);float a5=smoothstep(e5,e6,x_31);float a6=smoothstep(e6,e7,x_31);float a7=smoothstep(e7,e8,x_31);return max(mix(v0,v1,a0)*step(e0,x_31)*step(x_31,e1),max(mix(v1,v2,a1)*step(e1,x_31)*step(x_31,e2),max(mix(v2,v3,a2)*step(e2,x_31)*step(x_31,e3),max(mix(v3,v4,a3)*step(e3,x_31)*step(x_31,e4),max(mix(v4,v5,a4)*step(e4,x_31)*step(x_31,e5),max(mix(v5,v6,a5)*step(e5,x_31)*step(x_31,e6),max(mix(v6,v7,a6)*step(e6,x_31)*step(x_31,e7),mix(v7,v8,a7)*step(e7,x_31)*step(x_31,e8))))))));}vec4 portland(float x_21){const float e0=0.0;const vec4 v0=vec4(0.047058823529411764,0.2,0.5137254901960784,1);const float e1=0.25;const vec4 v1=vec4(0.0392156862745098,0.5333333333333333,0.7294117647058823,1);const float e2=0.5;const vec4 v2=vec4(0.9490196078431372,0.8274509803921568,0.2196078431372549,1);const float e3=0.75;const vec4 v3=vec4(0.9490196078431372,0.5607843137254902,0.2196078431372549,1);const float e4=1.0;const vec4 v4=vec4(0.8509803921568627,0.11764705882352941,0.11764705882352941,1);float a0=smoothstep(e0,e1,x_21);float a1=smoothstep(e1,e2,x_21);float a2=smoothstep(e2,e3,x_21);float a3=smoothstep(e3,e4,x_21);return max(mix(v0,v1,a0)*step(e0,x_21)*step(x_21,e1),max(mix(v1,v2,a1)*step(e1,x_21)*step(x_21,e2),max(mix(v2,v3,a2)*step(e2,x_21)*step(x_21,e3),mix(v3,v4,a3)*step(e3,x_21)*step(x_21,e4))));}vec4 blackbody(float x_38){const float e0=0.0;const vec4 v0=vec4(0,0,0,1);const float e1=0.2;const vec4 v1=vec4(0.9019607843137255,0,0,1);const float e2=0.4;const vec4 v2=vec4(0.9019607843137255,0.8235294117647058,0,1);const float e3=0.7;const vec4 v3=vec4(1,1,1,1);const float e4=1.0;const vec4 v4=vec4(0.6274509803921569,0.7843137254901961,1,1);float a0=smoothstep(e0,e1,x_38);float a1=smoothstep(e1,e2,x_38);float a2=smoothstep(e2,e3,x_38);float a3=smoothstep(e3,e4,x_38);return max(mix(v0,v1,a0)*step(e0,x_38)*step(x_38,e1),max(mix(v1,v2,a1)*step(e1,x_38)*step(x_38,e2),max(mix(v2,v3,a2)*step(e2,x_38)*step(x_38,e3),mix(v3,v4,a3)*step(e3,x_38)*step(x_38,e4))));}vec4 earth(float x_29){const float e0=0.0;const vec4 v0=vec4(0,0,0.5098039215686274,1);const float e1=0.1;const vec4 v1=vec4(0,0.7058823529411765,0.7058823529411765,1);const float e2=0.2;const vec4 v2=vec4(0.1568627450980392,0.8235294117647058,0.1568627450980392,1);const float e3=0.4;const vec4 v3=vec4(0.9019607843137255,0.9019607843137255,0.19607843137254902,1);const float e4=0.6;const vec4 v4=vec4(0.47058823529411764,0.27450980392156865,0.0784313725490196,1);const float e5=1.0;const vec4 v5=vec4(1,1,1,1);float a0=smoothstep(e0,e1,x_29);float a1=smoothstep(e1,e2,x_29);float a2=smoothstep(e2,e3,x_29);float a3=smoothstep(e3,e4,x_29);float a4=smoothstep(e4,e5,x_29);return max(mix(v0,v1,a0)*step(e0,x_29)*step(x_29,e1),max(mix(v1,v2,a1)*step(e1,x_29)*step(x_29,e2),max(mix(v2,v3,a2)*step(e2,x_29)*step(x_29,e3),max(mix(v3,v4,a3)*step(e3,x_29)*step(x_29,e4),mix(v4,v5,a4)*step(e4,x_29)*step(x_29,e5)))));}vec4 electric(float x_9){const float e0=0.0;const vec4 v0=vec4(0,0,0,1);const float e1=0.15;const vec4 v1=vec4(0.11764705882352941,0,0.39215686274509803,1);const float e2=0.4;const vec4 v2=vec4(0.47058823529411764,0,0.39215686274509803,1);const float e3=0.6;const vec4 v3=vec4(0.6274509803921569,0.35294117647058826,0,1);const float e4=0.8;const vec4 v4=vec4(0.9019607843137255,0.7843137254901961,0,1);const float e5=1.0;const vec4 v5=vec4(1,0.9803921568627451,0.8627450980392157,1);float a0=smoothstep(e0,e1,x_9);float a1=smoothstep(e1,e2,x_9);float a2=smoothstep(e2,e3,x_9);float a3=smoothstep(e3,e4,x_9);float a4=smoothstep(e4,e5,x_9);return max(mix(v0,v1,a0)*step(e0,x_9)*step(x_9,e1),max(mix(v1,v2,a1)*step(e1,x_9)*step(x_9,e2),max(mix(v2,v3,a2)*step(e2,x_9)*step(x_9,e3),max(mix(v3,v4,a3)*step(e3,x_9)*step(x_9,e4),mix(v4,v5,a4)*step(e4,x_9)*step(x_9,e5)))));}vec4 alpha(float x_0){const float e0=0.0;const vec4 v0=vec4(1,1,1,0);const float e1=1.0;const vec4 v1=vec4(1,1,1,1);float a0=smoothstep(e0,e1,x_0);return mix(v0,v1,a0)*step(e0,x_0)*step(x_0,e1);}vec4 viridis(float x_22){const float e0=0.0;const vec4 v0=vec4(0.26666666666666666,0.00392156862745098,0.32941176470588235,1);const float e1=0.13;const vec4 v1=vec4(0.2784313725490196,0.17254901960784313,0.47843137254901963,1);const float e2=0.25;const vec4 v2=vec4(0.23137254901960785,0.3176470588235294,0.5450980392156862,1);const float e3=0.38;const vec4 v3=vec4(0.17254901960784313,0.44313725490196076,0.5568627450980392,1);const float e4=0.5;const vec4 v4=vec4(0.12941176470588237,0.5647058823529412,0.5529411764705883,1);const float e5=0.63;const vec4 v5=vec4(0.15294117647058825,0.6784313725490196,0.5058823529411764,1);const float e6=0.75;const vec4 v6=vec4(0.3607843137254902,0.7843137254901961,0.38823529411764707,1);const float e7=0.88;const vec4 v7=vec4(0.6666666666666666,0.8627450980392157,0.19607843137254902,1);const float e8=1.0;const vec4 v8=vec4(0.9921568627450981,0.9058823529411765,0.1450980392156863,1);float a0=smoothstep(e0,e1,x_22);float a1=smoothstep(e1,e2,x_22);float a2=smoothstep(e2,e3,x_22);float a3=smoothstep(e3,e4,x_22);float a4=smoothstep(e4,e5,x_22);float a5=smoothstep(e5,e6,x_22);float a6=smoothstep(e6,e7,x_22);float a7=smoothstep(e7,e8,x_22);return max(mix(v0,v1,a0)*step(e0,x_22)*step(x_22,e1),max(mix(v1,v2,a1)*step(e1,x_22)*step(x_22,e2),max(mix(v2,v3,a2)*step(e2,x_22)*step(x_22,e3),max(mix(v3,v4,a3)*step(e3,x_22)*step(x_22,e4),max(mix(v4,v5,a4)*step(e4,x_22)*step(x_22,e5),max(mix(v5,v6,a5)*step(e5,x_22)*step(x_22,e6),max(mix(v6,v7,a6)*step(e6,x_22)*step(x_22,e7),mix(v7,v8,a7)*step(e7,x_22)*step(x_22,e8))))))));}vec4 inferno(float x_30){const float e0=0.0;const vec4 v0=vec4(0,0,0.01568627450980392,1);const float e1=0.13;const vec4 v1=vec4(0.12156862745098039,0.047058823529411764,0.2823529411764706,1);const float e2=0.25;const vec4 v2=vec4(0.3333333333333333,0.058823529411764705,0.42745098039215684,1);const float e3=0.38;const vec4 v3=vec4(0.5333333333333333,0.13333333333333333,0.41568627450980394,1);const float e4=0.5;const vec4 v4=vec4(0.7294117647058823,0.21176470588235294,0.3333333333333333,1);const float e5=0.63;const vec4 v5=vec4(0.8901960784313725,0.34901960784313724,0.2,1);const float e6=0.75;const vec4 v6=vec4(0.9764705882352941,0.5490196078431373,0.0392156862745098,1);const float e7=0.88;const vec4 v7=vec4(0.9764705882352941,0.788235294117647,0.19607843137254902,1);const float e8=1.0;const vec4 v8=vec4(0.9882352941176471,1,0.6431372549019608,1);float a0=smoothstep(e0,e1,x_30);float a1=smoothstep(e1,e2,x_30);float a2=smoothstep(e2,e3,x_30);float a3=smoothstep(e3,e4,x_30);float a4=smoothstep(e4,e5,x_30);float a5=smoothstep(e5,e6,x_30);float a6=smoothstep(e6,e7,x_30);float a7=smoothstep(e7,e8,x_30);return max(mix(v0,v1,a0)*step(e0,x_30)*step(x_30,e1),max(mix(v1,v2,a1)*step(e1,x_30)*step(x_30,e2),max(mix(v2,v3,a2)*step(e2,x_30)*step(x_30,e3),max(mix(v3,v4,a3)*step(e3,x_30)*step(x_30,e4),max(mix(v4,v5,a4)*step(e4,x_30)*step(x_30,e5),max(mix(v5,v6,a5)*step(e5,x_30)*step(x_30,e6),max(mix(v6,v7,a6)*step(e6,x_30)*step(x_30,e7),mix(v7,v8,a7)*step(e7,x_30)*step(x_30,e8))))))));}vec4 magma(float x_33){const float e0=0.0;const vec4 v0=vec4(0,0,0.01568627450980392,1);const float e1=0.13;const vec4 v1=vec4(0.10980392156862745,0.06274509803921569,0.26666666666666666,1);const float e2=0.25;const vec4 v2=vec4(0.30980392156862746,0.07058823529411765,0.4823529411764706,1);const float e3=0.38;const vec4 v3=vec4(0.5058823529411764,0.1450980392156863,0.5058823529411764,1);const float e4=0.5;const vec4 v4=vec4(0.7098039215686275,0.21176470588235294,0.47843137254901963,1);const float e5=0.63;const vec4 v5=vec4(0.8980392156862745,0.3137254901960784,0.39215686274509803,1);const float e6=0.75;const vec4 v6=vec4(0.984313725490196,0.5294117647058824,0.3803921568627451,1);const float e7=0.88;const vec4 v7=vec4(0.996078431372549,0.7607843137254902,0.5294117647058824,1);const float e8=1.0;const vec4 v8=vec4(0.9882352941176471,0.9921568627450981,0.7490196078431373,1);float a0=smoothstep(e0,e1,x_33);float a1=smoothstep(e1,e2,x_33);float a2=smoothstep(e2,e3,x_33);float a3=smoothstep(e3,e4,x_33);float a4=smoothstep(e4,e5,x_33);float a5=smoothstep(e5,e6,x_33);float a6=smoothstep(e6,e7,x_33);float a7=smoothstep(e7,e8,x_33);return max(mix(v0,v1,a0)*step(e0,x_33)*step(x_33,e1),max(mix(v1,v2,a1)*step(e1,x_33)*step(x_33,e2),max(mix(v2,v3,a2)*step(e2,x_33)*step(x_33,e3),max(mix(v3,v4,a3)*step(e3,x_33)*step(x_33,e4),max(mix(v4,v5,a4)*step(e4,x_33)*step(x_33,e5),max(mix(v5,v6,a5)*step(e5,x_33)*step(x_33,e6),max(mix(v6,v7,a6)*step(e6,x_33)*step(x_33,e7),mix(v7,v8,a7)*step(e7,x_33)*step(x_33,e8))))))));}vec4 plasma(float x_3){const float e0=0.0;const vec4 v0=vec4(0.050980392156862744,0.03137254901960784,0.5294117647058824,1);const float e1=0.13;const vec4 v1=vec4(0.29411764705882354,0.011764705882352941,0.6313725490196078,1);const float e2=0.25;const vec4 v2=vec4(0.49019607843137253,0.011764705882352941,0.6588235294117647,1);const float e3=0.38;const vec4 v3=vec4(0.6588235294117647,0.13333333333333333,0.5882352941176471,1);const float e4=0.5;const vec4 v4=vec4(0.796078431372549,0.27450980392156865,0.4745098039215686,1);const float e5=0.63;const vec4 v5=vec4(0.8980392156862745,0.4196078431372549,0.36470588235294116,1);const float e6=0.75;const vec4 v6=vec4(0.9725490196078431,0.5803921568627451,0.2549019607843137,1);const float e7=0.88;const vec4 v7=vec4(0.9921568627450981,0.7647058823529411,0.1568627450980392,1);const float e8=1.0;const vec4 v8=vec4(0.9411764705882353,0.9764705882352941,0.12941176470588237,1);float a0=smoothstep(e0,e1,x_3);float a1=smoothstep(e1,e2,x_3);float a2=smoothstep(e2,e3,x_3);float a3=smoothstep(e3,e4,x_3);float a4=smoothstep(e4,e5,x_3);float a5=smoothstep(e5,e6,x_3);float a6=smoothstep(e6,e7,x_3);float a7=smoothstep(e7,e8,x_3);return max(mix(v0,v1,a0)*step(e0,x_3)*step(x_3,e1),max(mix(v1,v2,a1)*step(e1,x_3)*step(x_3,e2),max(mix(v2,v3,a2)*step(e2,x_3)*step(x_3,e3),max(mix(v3,v4,a3)*step(e3,x_3)*step(x_3,e4),max(mix(v4,v5,a4)*step(e4,x_3)*step(x_3,e5),max(mix(v5,v6,a5)*step(e5,x_3)*step(x_3,e6),max(mix(v6,v7,a6)*step(e6,x_3)*step(x_3,e7),mix(v7,v8,a7)*step(e7,x_3)*step(x_3,e8))))))));}vec4 warm(float x_43){const float e0=0.0;const vec4 v0=vec4(0.49019607843137253,0,0.7019607843137254,1);const float e1=0.13;const vec4 v1=vec4(0.6745098039215687,0,0.7333333333333333,1);const float e2=0.25;const vec4 v2=vec4(0.8588235294117647,0,0.6666666666666666,1);const float e3=0.38;const vec4 v3=vec4(1,0,0.5098039215686274,1);const float e4=0.5;const vec4 v4=vec4(1,0.24705882352941178,0.2901960784313726,1);const float e5=0.63;const vec4 v5=vec4(1,0.4823529411764706,0,1);const float e6=0.75;const vec4 v6=vec4(0.9176470588235294,0.6901960784313725,0,1);const float e7=0.88;const vec4 v7=vec4(0.7450980392156863,0.8941176470588236,0,1);const float e8=1.0;const vec4 v8=vec4(0.5764705882352941,1,0,1);float a0=smoothstep(e0,e1,x_43);float a1=smoothstep(e1,e2,x_43);float a2=smoothstep(e2,e3,x_43);float a3=smoothstep(e3,e4,x_43);float a4=smoothstep(e4,e5,x_43);float a5=smoothstep(e5,e6,x_43);float a6=smoothstep(e6,e7,x_43);float a7=smoothstep(e7,e8,x_43);return max(mix(v0,v1,a0)*step(e0,x_43)*step(x_43,e1),max(mix(v1,v2,a1)*step(e1,x_43)*step(x_43,e2),max(mix(v2,v3,a2)*step(e2,x_43)*step(x_43,e3),max(mix(v3,v4,a3)*step(e3,x_43)*step(x_43,e4),max(mix(v4,v5,a4)*step(e4,x_43)*step(x_43,e5),max(mix(v5,v6,a5)*step(e5,x_43)*step(x_43,e6),max(mix(v6,v7,a6)*step(e6,x_43)*step(x_43,e7),mix(v7,v8,a7)*step(e7,x_43)*step(x_43,e8))))))));}vec4 rainbow_soft_1310269270(float x_14){const float e0=0.0;const vec4 v0=vec4(0.49019607843137253,0,0.7019607843137254,1);const float e1=0.1;const vec4 v1=vec4(0.7803921568627451,0,0.7058823529411765,1);const float e2=0.2;const vec4 v2=vec4(1,0,0.4745098039215686,1);const float e3=0.3;const vec4 v3=vec4(1,0.4235294117647059,0,1);const float e4=0.4;const vec4 v4=vec4(0.8705882352941177,0.7607843137254902,0,1);const float e5=0.5;const vec4 v5=vec4(0.5882352941176471,1,0,1);const float e6=0.6;const vec4 v6=vec4(0,1,0.21568627450980393,1);const float e7=0.7;const vec4 v7=vec4(0,0.9647058823529412,0.5882352941176471,1);const float e8=0.8;const vec4 v8=vec4(0.19607843137254902,0.6549019607843137,0.8705882352941177,1);const float e9=0.9;const vec4 v9=vec4(0.403921568627451,0.2,0.9215686274509803,1);const float e10=1.0;const vec4 v10=vec4(0.48627450980392156,0,0.7294117647058823,1);float a0=smoothstep(e0,e1,x_14);float a1=smoothstep(e1,e2,x_14);float a2=smoothstep(e2,e3,x_14);float a3=smoothstep(e3,e4,x_14);float a4=smoothstep(e4,e5,x_14);float a5=smoothstep(e5,e6,x_14);float a6=smoothstep(e6,e7,x_14);float a7=smoothstep(e7,e8,x_14);float a8=smoothstep(e8,e9,x_14);float a9=smoothstep(e9,e10,x_14);return max(mix(v0,v1,a0)*step(e0,x_14)*step(x_14,e1),max(mix(v1,v2,a1)*step(e1,x_14)*step(x_14,e2),max(mix(v2,v3,a2)*step(e2,x_14)*step(x_14,e3),max(mix(v3,v4,a3)*step(e3,x_14)*step(x_14,e4),max(mix(v4,v5,a4)*step(e4,x_14)*step(x_14,e5),max(mix(v5,v6,a5)*step(e5,x_14)*step(x_14,e6),max(mix(v6,v7,a6)*step(e6,x_14)*step(x_14,e7),max(mix(v7,v8,a7)*step(e7,x_14)*step(x_14,e8),max(mix(v8,v9,a8)*step(e8,x_14)*step(x_14,e9),mix(v9,v10,a9)*step(e9,x_14)*step(x_14,e10))))))))));}vec4 bathymetry(float x_36){const float e0=0.0;const vec4 v0=vec4(0.1568627450980392,0.10196078431372549,0.17254901960784313,1);const float e1=0.13;const vec4 v1=vec4(0.23137254901960785,0.19215686274509805,0.35294117647058826,1);const float e2=0.25;const vec4 v2=vec4(0.25098039215686274,0.2980392156862745,0.5450980392156862,1);const float e3=0.38;const vec4 v3=vec4(0.24705882352941178,0.43137254901960786,0.592156862745098,1);const float e4=0.5;const vec4 v4=vec4(0.2823529411764706,0.5568627450980392,0.6196078431372549,1);const float e5=0.63;const vec4 v5=vec4(0.3333333333333333,0.6823529411764706,0.6392156862745098,1);const float e6=0.75;const vec4 v6=vec4(0.47058823529411764,0.807843137254902,0.6392156862745098,1);const float e7=0.88;const vec4 v7=vec4(0.7333333333333333,0.9019607843137255,0.6745098039215687,1);const float e8=1.0;const vec4 v8=vec4(0.9921568627450981,0.996078431372549,0.8,1);float a0=smoothstep(e0,e1,x_36);float a1=smoothstep(e1,e2,x_36);float a2=smoothstep(e2,e3,x_36);float a3=smoothstep(e3,e4,x_36);float a4=smoothstep(e4,e5,x_36);float a5=smoothstep(e5,e6,x_36);float a6=smoothstep(e6,e7,x_36);float a7=smoothstep(e7,e8,x_36);return max(mix(v0,v1,a0)*step(e0,x_36)*step(x_36,e1),max(mix(v1,v2,a1)*step(e1,x_36)*step(x_36,e2),max(mix(v2,v3,a2)*step(e2,x_36)*step(x_36,e3),max(mix(v3,v4,a3)*step(e3,x_36)*step(x_36,e4),max(mix(v4,v5,a4)*step(e4,x_36)*step(x_36,e5),max(mix(v5,v6,a5)*step(e5,x_36)*step(x_36,e6),max(mix(v6,v7,a6)*step(e6,x_36)*step(x_36,e7),mix(v7,v8,a7)*step(e7,x_36)*step(x_36,e8))))))));}vec4 cdom(float x_7){const float e0=0.0;const vec4 v0=vec4(0.1843137254901961,0.058823529411764705,0.24313725490196078,1);const float e1=0.13;const vec4 v1=vec4(0.3411764705882353,0.09019607843137255,0.33725490196078434,1);const float e2=0.25;const vec4 v2=vec4(0.5098039215686274,0.10980392156862745,0.38823529411764707,1);const float e3=0.38;const vec4 v3=vec4(0.6705882352941176,0.1607843137254902,0.3764705882352941,1);const float e4=0.5;const vec4 v4=vec4(0.807843137254902,0.2627450980392157,0.33725490196078434,1);const float e5=0.63;const vec4 v5=vec4(0.9019607843137255,0.41568627450980394,0.32941176470588235,1);const float e6=0.75;const vec4 v6=vec4(0.9490196078431372,0.5843137254901961,0.403921568627451,1);const float e7=0.88;const vec4 v7=vec4(0.9764705882352941,0.7568627450980392,0.5294117647058824,1);const float e8=1.0;const vec4 v8=vec4(0.996078431372549,0.9294117647058824,0.6901960784313725,1);float a0=smoothstep(e0,e1,x_7);float a1=smoothstep(e1,e2,x_7);float a2=smoothstep(e2,e3,x_7);float a3=smoothstep(e3,e4,x_7);float a4=smoothstep(e4,e5,x_7);float a5=smoothstep(e5,e6,x_7);float a6=smoothstep(e6,e7,x_7);float a7=smoothstep(e7,e8,x_7);return max(mix(v0,v1,a0)*step(e0,x_7)*step(x_7,e1),max(mix(v1,v2,a1)*step(e1,x_7)*step(x_7,e2),max(mix(v2,v3,a2)*step(e2,x_7)*step(x_7,e3),max(mix(v3,v4,a3)*step(e3,x_7)*step(x_7,e4),max(mix(v4,v5,a4)*step(e4,x_7)*step(x_7,e5),max(mix(v5,v6,a5)*step(e5,x_7)*step(x_7,e6),max(mix(v6,v7,a6)*step(e6,x_7)*step(x_7,e7),mix(v7,v8,a7)*step(e7,x_7)*step(x_7,e8))))))));}vec4 chlorophyll(float x_6){const float e0=0.0;const vec4 v0=vec4(0.07058823529411765,0.1411764705882353,0.0784313725490196,1);const float e1=0.13;const vec4 v1=vec4(0.09803921568627451,0.24705882352941178,0.1607843137254902,1);const float e2=0.25;const vec4 v2=vec4(0.09411764705882353,0.3568627450980392,0.23137254901960785,1);const float e3=0.38;const vec4 v3=vec4(0.050980392156862744,0.4666666666666667,0.2823529411764706,1);const float e4=0.5;const vec4 v4=vec4(0.07058823529411765,0.5803921568627451,0.3137254901960784,1);const float e5=0.63;const vec4 v5=vec4(0.3137254901960784,0.6784313725490196,0.34901960784313724,1);const float e6=0.75;const vec4 v6=vec4(0.5176470588235295,0.7686274509803922,0.47843137254901963,1);const float e7=0.88;const vec4 v7=vec4(0.6862745098039216,0.8666666666666667,0.6352941176470588,1);const float e8=1.0;const vec4 v8=vec4(0.8431372549019608,0.9764705882352941,0.8156862745098039,1);float a0=smoothstep(e0,e1,x_6);float a1=smoothstep(e1,e2,x_6);float a2=smoothstep(e2,e3,x_6);float a3=smoothstep(e3,e4,x_6);float a4=smoothstep(e4,e5,x_6);float a5=smoothstep(e5,e6,x_6);float a6=smoothstep(e6,e7,x_6);float a7=smoothstep(e7,e8,x_6);return max(mix(v0,v1,a0)*step(e0,x_6)*step(x_6,e1),max(mix(v1,v2,a1)*step(e1,x_6)*step(x_6,e2),max(mix(v2,v3,a2)*step(e2,x_6)*step(x_6,e3),max(mix(v3,v4,a3)*step(e3,x_6)*step(x_6,e4),max(mix(v4,v5,a4)*step(e4,x_6)*step(x_6,e5),max(mix(v5,v6,a5)*step(e5,x_6)*step(x_6,e6),max(mix(v6,v7,a6)*step(e6,x_6)*step(x_6,e7),mix(v7,v8,a7)*step(e7,x_6)*step(x_6,e8))))))));}vec4 density(float x_19){const float e0=0.0;const vec4 v0=vec4(0.21176470588235294,0.054901960784313725,0.1411764705882353,1);const float e1=0.13;const vec4 v1=vec4(0.34901960784313724,0.09019607843137255,0.3137254901960784,1);const float e2=0.25;const vec4 v2=vec4(0.43137254901960786,0.17647058823529413,0.5176470588235295,1);const float e3=0.38;const vec4 v3=vec4(0.47058823529411764,0.30196078431372547,0.6980392156862745,1);const float e4=0.5;const vec4 v4=vec4(0.47058823529411764,0.44313725490196076,0.8352941176470589,1);const float e5=0.63;const vec4 v5=vec4(0.45098039215686275,0.592156862745098,0.8941176470588236,1);const float e6=0.75;const vec4 v6=vec4(0.5254901960784314,0.7254901960784313,0.8901960784313725,1);const float e7=0.88;const vec4 v7=vec4(0.6941176470588235,0.8392156862745098,0.8901960784313725,1);const float e8=1.0;const vec4 v8=vec4(0.9019607843137255,0.9450980392156862,0.9450980392156862,1);float a0=smoothstep(e0,e1,x_19);float a1=smoothstep(e1,e2,x_19);float a2=smoothstep(e2,e3,x_19);float a3=smoothstep(e3,e4,x_19);float a4=smoothstep(e4,e5,x_19);float a5=smoothstep(e5,e6,x_19);float a6=smoothstep(e6,e7,x_19);float a7=smoothstep(e7,e8,x_19);return max(mix(v0,v1,a0)*step(e0,x_19)*step(x_19,e1),max(mix(v1,v2,a1)*step(e1,x_19)*step(x_19,e2),max(mix(v2,v3,a2)*step(e2,x_19)*step(x_19,e3),max(mix(v3,v4,a3)*step(e3,x_19)*step(x_19,e4),max(mix(v4,v5,a4)*step(e4,x_19)*step(x_19,e5),max(mix(v5,v6,a5)*step(e5,x_19)*step(x_19,e6),max(mix(v6,v7,a6)*step(e6,x_19)*step(x_19,e7),mix(v7,v8,a7)*step(e7,x_19)*step(x_19,e8))))))));}vec4 freesurface_blue_3154355989(float x_35){const float e0=0.0;const vec4 v0=vec4(0.11764705882352941,0.01568627450980392,0.43137254901960786,1);const float e1=0.13;const vec4 v1=vec4(0.1843137254901961,0.054901960784313725,0.6901960784313725,1);const float e2=0.25;const vec4 v2=vec4(0.1607843137254902,0.17647058823529413,0.9254901960784314,1);const float e3=0.38;const vec4 v3=vec4(0.09803921568627451,0.38823529411764707,0.8313725490196079,1);const float e4=0.5;const vec4 v4=vec4(0.26666666666666666,0.5137254901960784,0.7843137254901961,1);const float e5=0.63;const vec4 v5=vec4(0.4470588235294118,0.611764705882353,0.7725490196078432,1);const float e6=0.75;const vec4 v6=vec4(0.615686274509804,0.7098039215686275,0.796078431372549,1);const float e7=0.88;const vec4 v7=vec4(0.7843137254901961,0.8156862745098039,0.8470588235294118,1);const float e8=1.0;const vec4 v8=vec4(0.9450980392156862,0.9294117647058824,0.9254901960784314,1);float a0=smoothstep(e0,e1,x_35);float a1=smoothstep(e1,e2,x_35);float a2=smoothstep(e2,e3,x_35);float a3=smoothstep(e3,e4,x_35);float a4=smoothstep(e4,e5,x_35);float a5=smoothstep(e5,e6,x_35);float a6=smoothstep(e6,e7,x_35);float a7=smoothstep(e7,e8,x_35);return max(mix(v0,v1,a0)*step(e0,x_35)*step(x_35,e1),max(mix(v1,v2,a1)*step(e1,x_35)*step(x_35,e2),max(mix(v2,v3,a2)*step(e2,x_35)*step(x_35,e3),max(mix(v3,v4,a3)*step(e3,x_35)*step(x_35,e4),max(mix(v4,v5,a4)*step(e4,x_35)*step(x_35,e5),max(mix(v5,v6,a5)*step(e5,x_35)*step(x_35,e6),max(mix(v6,v7,a6)*step(e6,x_35)*step(x_35,e7),mix(v7,v8,a7)*step(e7,x_35)*step(x_35,e8))))))));}vec4 freesurface_red_1679163293(float x_20){const float e0=0.0;const vec4 v0=vec4(0.23529411764705882,0.03529411764705882,0.07058823529411765,1);const float e1=0.13;const vec4 v1=vec4(0.39215686274509803,0.06666666666666667,0.10588235294117647,1);const float e2=0.25;const vec4 v2=vec4(0.5568627450980392,0.0784313725490196,0.11372549019607843,1);const float e3=0.38;const vec4 v3=vec4(0.6941176470588235,0.16862745098039217,0.10588235294117647,1);const float e4=0.5;const vec4 v4=vec4(0.7529411764705882,0.3411764705882353,0.24705882352941178,1);const float e5=0.63;const vec4 v5=vec4(0.803921568627451,0.49019607843137253,0.4117647058823529,1);const float e6=0.75;const vec4 v6=vec4(0.8470588235294118,0.6352941176470588,0.5803921568627451,1);const float e7=0.88;const vec4 v7=vec4(0.8901960784313725,0.7803921568627451,0.7568627450980392,1);const float e8=1.0;const vec4 v8=vec4(0.9450980392156862,0.9294117647058824,0.9254901960784314,1);float a0=smoothstep(e0,e1,x_20);float a1=smoothstep(e1,e2,x_20);float a2=smoothstep(e2,e3,x_20);float a3=smoothstep(e3,e4,x_20);float a4=smoothstep(e4,e5,x_20);float a5=smoothstep(e5,e6,x_20);float a6=smoothstep(e6,e7,x_20);float a7=smoothstep(e7,e8,x_20);return max(mix(v0,v1,a0)*step(e0,x_20)*step(x_20,e1),max(mix(v1,v2,a1)*step(e1,x_20)*step(x_20,e2),max(mix(v2,v3,a2)*step(e2,x_20)*step(x_20,e3),max(mix(v3,v4,a3)*step(e3,x_20)*step(x_20,e4),max(mix(v4,v5,a4)*step(e4,x_20)*step(x_20,e5),max(mix(v5,v6,a5)*step(e5,x_20)*step(x_20,e6),max(mix(v6,v7,a6)*step(e6,x_20)*step(x_20,e7),mix(v7,v8,a7)*step(e7,x_20)*step(x_20,e8))))))));}vec4 oxygen(float x_11){const float e0=0.0;const vec4 v0=vec4(0.25098039215686274,0.0196078431372549,0.0196078431372549,1);const float e1=0.13;const vec4 v1=vec4(0.41568627450980394,0.023529411764705882,0.058823529411764705,1);const float e2=0.25;const vec4 v2=vec4(0.5647058823529412,0.10196078431372549,0.027450980392156862,1);const float e3=0.38;const vec4 v3=vec4(0.6588235294117647,0.25098039215686274,0.011764705882352941,1);const float e4=0.5;const vec4 v4=vec4(0.7372549019607844,0.39215686274509803,0.01568627450980392,1);const float e5=0.63;const vec4 v5=vec4(0.807843137254902,0.5333333333333333,0.043137254901960784,1);const float e6=0.75;const vec4 v6=vec4(0.8627450980392157,0.6823529411764706,0.09803921568627451,1);const float e7=0.88;const vec4 v7=vec4(0.9058823529411765,0.8431372549019608,0.17254901960784313,1);const float e8=1.0;const vec4 v8=vec4(0.9725490196078431,0.996078431372549,0.4117647058823529,1);float a0=smoothstep(e0,e1,x_11);float a1=smoothstep(e1,e2,x_11);float a2=smoothstep(e2,e3,x_11);float a3=smoothstep(e3,e4,x_11);float a4=smoothstep(e4,e5,x_11);float a5=smoothstep(e5,e6,x_11);float a6=smoothstep(e6,e7,x_11);float a7=smoothstep(e7,e8,x_11);return max(mix(v0,v1,a0)*step(e0,x_11)*step(x_11,e1),max(mix(v1,v2,a1)*step(e1,x_11)*step(x_11,e2),max(mix(v2,v3,a2)*step(e2,x_11)*step(x_11,e3),max(mix(v3,v4,a3)*step(e3,x_11)*step(x_11,e4),max(mix(v4,v5,a4)*step(e4,x_11)*step(x_11,e5),max(mix(v5,v6,a5)*step(e5,x_11)*step(x_11,e6),max(mix(v6,v7,a6)*step(e6,x_11)*step(x_11,e7),mix(v7,v8,a7)*step(e7,x_11)*step(x_11,e8))))))));}vec4 par(float x_28){const float e0=0.0;const vec4 v0=vec4(0.2,0.0784313725490196,0.09411764705882353,1);const float e1=0.13;const vec4 v1=vec4(0.35294117647058826,0.12549019607843137,0.13725490196078433,1);const float e2=0.25;const vec4 v2=vec4(0.5058823529411764,0.17254901960784313,0.13333333333333333,1);const float e3=0.38;const vec4 v3=vec4(0.6235294117647059,0.26666666666666666,0.09803921568627451,1);const float e4=0.5;const vec4 v4=vec4(0.7137254901960784,0.38823529411764707,0.07450980392156863,1);const float e5=0.63;const vec4 v5=vec4(0.7803921568627451,0.5254901960784314,0.08627450980392157,1);const float e6=0.75;const vec4 v6=vec4(0.8313725490196079,0.6705882352941176,0.13725490196078433,1);const float e7=0.88;const vec4 v7=vec4(0.8666666666666667,0.8235294117647058,0.21176470588235294,1);const float e8=1.0;const vec4 v8=vec4(0.8823529411764706,0.9921568627450981,0.29411764705882354,1);float a0=smoothstep(e0,e1,x_28);float a1=smoothstep(e1,e2,x_28);float a2=smoothstep(e2,e3,x_28);float a3=smoothstep(e3,e4,x_28);float a4=smoothstep(e4,e5,x_28);float a5=smoothstep(e5,e6,x_28);float a6=smoothstep(e6,e7,x_28);float a7=smoothstep(e7,e8,x_28);return max(mix(v0,v1,a0)*step(e0,x_28)*step(x_28,e1),max(mix(v1,v2,a1)*step(e1,x_28)*step(x_28,e2),max(mix(v2,v3,a2)*step(e2,x_28)*step(x_28,e3),max(mix(v3,v4,a3)*step(e3,x_28)*step(x_28,e4),max(mix(v4,v5,a4)*step(e4,x_28)*step(x_28,e5),max(mix(v5,v6,a5)*step(e5,x_28)*step(x_28,e6),max(mix(v6,v7,a6)*step(e6,x_28)*step(x_28,e7),mix(v7,v8,a7)*step(e7,x_28)*step(x_28,e8))))))));}vec4 phase(float x_39){const float e0=0.0;const vec4 v0=vec4(0.5686274509803921,0.4117647058823529,0.07058823529411765,1);const float e1=0.13;const vec4 v1=vec4(0.7215686274509804,0.2784313725490196,0.14901960784313725,1);const float e2=0.25;const vec4 v2=vec4(0.7294117647058823,0.22745098039215686,0.45098039215686275,1);const float e3=0.38;const vec4 v3=vec4(0.6274509803921569,0.2784313725490196,0.7254901960784313,1);const float e4=0.5;const vec4 v4=vec4(0.43137254901960786,0.3803921568627451,0.8549019607843137,1);const float e5=0.63;const vec4 v5=vec4(0.19607843137254902,0.4823529411764706,0.6431372549019608,1);const float e6=0.75;const vec4 v6=vec4(0.12156862745098039,0.5137254901960784,0.43137254901960786,1);const float e7=0.88;const vec4 v7=vec4(0.30196078431372547,0.5058823529411764,0.13333333333333333,1);const float e8=1.0;const vec4 v8=vec4(0.5686274509803921,0.4117647058823529,0.07058823529411765,1);float a0=smoothstep(e0,e1,x_39);float a1=smoothstep(e1,e2,x_39);float a2=smoothstep(e2,e3,x_39);float a3=smoothstep(e3,e4,x_39);float a4=smoothstep(e4,e5,x_39);float a5=smoothstep(e5,e6,x_39);float a6=smoothstep(e6,e7,x_39);float a7=smoothstep(e7,e8,x_39);return max(mix(v0,v1,a0)*step(e0,x_39)*step(x_39,e1),max(mix(v1,v2,a1)*step(e1,x_39)*step(x_39,e2),max(mix(v2,v3,a2)*step(e2,x_39)*step(x_39,e3),max(mix(v3,v4,a3)*step(e3,x_39)*step(x_39,e4),max(mix(v4,v5,a4)*step(e4,x_39)*step(x_39,e5),max(mix(v5,v6,a5)*step(e5,x_39)*step(x_39,e6),max(mix(v6,v7,a6)*step(e6,x_39)*step(x_39,e7),mix(v7,v8,a7)*step(e7,x_39)*step(x_39,e8))))))));}vec4 salinity(float x_26){const float e0=0.0;const vec4 v0=vec4(0.16470588235294117,0.09411764705882353,0.4235294117647059,1);const float e1=0.13;const vec4 v1=vec4(0.12941176470588237,0.19607843137254902,0.6352941176470588,1);const float e2=0.25;const vec4 v2=vec4(0.058823529411764705,0.35294117647058826,0.5686274509803921,1);const float e3=0.38;const vec4 v3=vec4(0.1568627450980392,0.4627450980392157,0.5372549019607843,1);const float e4=0.5;const vec4 v4=vec4(0.23137254901960785,0.5725490196078431,0.5294117647058824,1);const float e5=0.63;const vec4 v5=vec4(0.30980392156862746,0.6862745098039216,0.49411764705882355,1);const float e6=0.75;const vec4 v6=vec4(0.47058823529411764,0.796078431372549,0.40784313725490196,1);const float e7=0.88;const vec4 v7=vec4(0.7568627450980392,0.8666666666666667,0.39215686274509803,1);const float e8=1.0;const vec4 v8=vec4(0.9921568627450981,0.9372549019607843,0.6039215686274509,1);float a0=smoothstep(e0,e1,x_26);float a1=smoothstep(e1,e2,x_26);float a2=smoothstep(e2,e3,x_26);float a3=smoothstep(e3,e4,x_26);float a4=smoothstep(e4,e5,x_26);float a5=smoothstep(e5,e6,x_26);float a6=smoothstep(e6,e7,x_26);float a7=smoothstep(e7,e8,x_26);return max(mix(v0,v1,a0)*step(e0,x_26)*step(x_26,e1),max(mix(v1,v2,a1)*step(e1,x_26)*step(x_26,e2),max(mix(v2,v3,a2)*step(e2,x_26)*step(x_26,e3),max(mix(v3,v4,a3)*step(e3,x_26)*step(x_26,e4),max(mix(v4,v5,a4)*step(e4,x_26)*step(x_26,e5),max(mix(v5,v6,a5)*step(e5,x_26)*step(x_26,e6),max(mix(v6,v7,a6)*step(e6,x_26)*step(x_26,e7),mix(v7,v8,a7)*step(e7,x_26)*step(x_26,e8))))))));}vec4 temperature(float x_8){const float e0=0.0;const vec4 v0=vec4(0.01568627450980392,0.13725490196078433,0.2,1);const float e1=0.13;const vec4 v1=vec4(0.09019607843137255,0.2,0.47843137254901963,1);const float e2=0.25;const vec4 v2=vec4(0.3333333333333333,0.23137254901960785,0.615686274509804,1);const float e3=0.38;const vec4 v3=vec4(0.5058823529411764,0.30980392156862746,0.5607843137254902,1);const float e4=0.5;const vec4 v4=vec4(0.6862745098039216,0.37254901960784315,0.5098039215686274,1);const float e5=0.63;const vec4 v5=vec4(0.8705882352941177,0.4392156862745098,0.396078431372549,1);const float e6=0.75;const vec4 v6=vec4(0.9764705882352941,0.5725490196078431,0.25882352941176473,1);const float e7=0.88;const vec4 v7=vec4(0.9764705882352941,0.7686274509803922,0.2549019607843137,1);const float e8=1.0;const vec4 v8=vec4(0.9098039215686274,0.9803921568627451,0.3568627450980392,1);float a0=smoothstep(e0,e1,x_8);float a1=smoothstep(e1,e2,x_8);float a2=smoothstep(e2,e3,x_8);float a3=smoothstep(e3,e4,x_8);float a4=smoothstep(e4,e5,x_8);float a5=smoothstep(e5,e6,x_8);float a6=smoothstep(e6,e7,x_8);float a7=smoothstep(e7,e8,x_8);return max(mix(v0,v1,a0)*step(e0,x_8)*step(x_8,e1),max(mix(v1,v2,a1)*step(e1,x_8)*step(x_8,e2),max(mix(v2,v3,a2)*step(e2,x_8)*step(x_8,e3),max(mix(v3,v4,a3)*step(e3,x_8)*step(x_8,e4),max(mix(v4,v5,a4)*step(e4,x_8)*step(x_8,e5),max(mix(v5,v6,a5)*step(e5,x_8)*step(x_8,e6),max(mix(v6,v7,a6)*step(e6,x_8)*step(x_8,e7),mix(v7,v8,a7)*step(e7,x_8)*step(x_8,e8))))))));}vec4 turbidity(float x_40){const float e0=0.0;const vec4 v0=vec4(0.13333333333333333,0.12156862745098039,0.10588235294117647,1);const float e1=0.13;const vec4 v1=vec4(0.2549019607843137,0.19607843137254902,0.1607843137254902,1);const float e2=0.25;const vec4 v2=vec4(0.3843137254901961,0.27058823529411763,0.20392156862745098,1);const float e3=0.38;const vec4 v3=vec4(0.5137254901960784,0.34901960784313724,0.2235294117647059,1);const float e4=0.5;const vec4 v4=vec4(0.6313725490196078,0.4392156862745098,0.23137254901960785,1);const float e5=0.63;const vec4 v5=vec4(0.7254901960784313,0.5490196078431373,0.25882352941176473,1);const float e6=0.75;const vec4 v6=vec4(0.792156862745098,0.6823529411764706,0.34509803921568627,1);const float e7=0.88;const vec4 v7=vec4(0.8470588235294118,0.8196078431372549,0.49411764705882355,1);const float e8=1.0;const vec4 v8=vec4(0.9137254901960784,0.9647058823529412,0.6705882352941176,1);float a0=smoothstep(e0,e1,x_40);float a1=smoothstep(e1,e2,x_40);float a2=smoothstep(e2,e3,x_40);float a3=smoothstep(e3,e4,x_40);float a4=smoothstep(e4,e5,x_40);float a5=smoothstep(e5,e6,x_40);float a6=smoothstep(e6,e7,x_40);float a7=smoothstep(e7,e8,x_40);return max(mix(v0,v1,a0)*step(e0,x_40)*step(x_40,e1),max(mix(v1,v2,a1)*step(e1,x_40)*step(x_40,e2),max(mix(v2,v3,a2)*step(e2,x_40)*step(x_40,e3),max(mix(v3,v4,a3)*step(e3,x_40)*step(x_40,e4),max(mix(v4,v5,a4)*step(e4,x_40)*step(x_40,e5),max(mix(v5,v6,a5)*step(e5,x_40)*step(x_40,e6),max(mix(v6,v7,a6)*step(e6,x_40)*step(x_40,e7),mix(v7,v8,a7)*step(e7,x_40)*step(x_40,e8))))))));}vec4 velocity_blue_297387650(float x_2){const float e0=0.0;const vec4 v0=vec4(0.06666666666666667,0.12549019607843137,0.25098039215686274,1);const float e1=0.13;const vec4 v1=vec4(0.13725490196078433,0.20392156862745098,0.4549019607843137,1);const float e2=0.25;const vec4 v2=vec4(0.11372549019607843,0.3176470588235294,0.611764705882353,1);const float e3=0.38;const vec4 v3=vec4(0.12156862745098039,0.44313725490196076,0.6352941176470588,1);const float e4=0.5;const vec4 v4=vec4(0.19607843137254902,0.5647058823529412,0.6627450980392157,1);const float e5=0.63;const vec4 v5=vec4(0.3411764705882353,0.6784313725490196,0.6901960784313725,1);const float e6=0.75;const vec4 v6=vec4(0.5843137254901961,0.7686274509803922,0.7411764705882353,1);const float e7=0.88;const vec4 v7=vec4(0.796078431372549,0.8666666666666667,0.8274509803921568,1);const float e8=1.0;const vec4 v8=vec4(0.996078431372549,0.984313725490196,0.9019607843137255,1);float a0=smoothstep(e0,e1,x_2);float a1=smoothstep(e1,e2,x_2);float a2=smoothstep(e2,e3,x_2);float a3=smoothstep(e3,e4,x_2);float a4=smoothstep(e4,e5,x_2);float a5=smoothstep(e5,e6,x_2);float a6=smoothstep(e6,e7,x_2);float a7=smoothstep(e7,e8,x_2);return max(mix(v0,v1,a0)*step(e0,x_2)*step(x_2,e1),max(mix(v1,v2,a1)*step(e1,x_2)*step(x_2,e2),max(mix(v2,v3,a2)*step(e2,x_2)*step(x_2,e3),max(mix(v3,v4,a3)*step(e3,x_2)*step(x_2,e4),max(mix(v4,v5,a4)*step(e4,x_2)*step(x_2,e5),max(mix(v5,v6,a5)*step(e5,x_2)*step(x_2,e6),max(mix(v6,v7,a6)*step(e6,x_2)*step(x_2,e7),mix(v7,v8,a7)*step(e7,x_2)*step(x_2,e8))))))));}vec4 velocity_green_2558432129(float x_27){const float e0=0.0;const vec4 v0=vec4(0.09019607843137255,0.13725490196078433,0.07450980392156863,1);const float e1=0.13;const vec4 v1=vec4(0.09411764705882353,0.25098039215686274,0.14901960784313725,1);const float e2=0.25;const vec4 v2=vec4(0.043137254901960784,0.37254901960784315,0.17647058823529413,1);const float e3=0.38;const vec4 v3=vec4(0.15294117647058825,0.4823529411764706,0.13725490196078433,1);const float e4=0.5;const vec4 v4=vec4(0.37254901960784315,0.5725490196078431,0.047058823529411764,1);const float e5=0.63;const vec4 v5=vec4(0.596078431372549,0.6470588235294118,0.07058823529411765,1);const float e6=0.75;const vec4 v6=vec4(0.788235294117647,0.7294117647058823,0.27058823529411763,1);const float e7=0.88;const vec4 v7=vec4(0.9137254901960784,0.8470588235294118,0.5372549019607843,1);const float e8=1.0;const vec4 v8=vec4(1,0.9921568627450981,0.803921568627451,1);float a0=smoothstep(e0,e1,x_27);float a1=smoothstep(e1,e2,x_27);float a2=smoothstep(e2,e3,x_27);float a3=smoothstep(e3,e4,x_27);float a4=smoothstep(e4,e5,x_27);float a5=smoothstep(e5,e6,x_27);float a6=smoothstep(e6,e7,x_27);float a7=smoothstep(e7,e8,x_27);return max(mix(v0,v1,a0)*step(e0,x_27)*step(x_27,e1),max(mix(v1,v2,a1)*step(e1,x_27)*step(x_27,e2),max(mix(v2,v3,a2)*step(e2,x_27)*step(x_27,e3),max(mix(v3,v4,a3)*step(e3,x_27)*step(x_27,e4),max(mix(v4,v5,a4)*step(e4,x_27)*step(x_27,e5),max(mix(v5,v6,a5)*step(e5,x_27)*step(x_27,e6),max(mix(v6,v7,a6)*step(e6,x_27)*step(x_27,e7),mix(v7,v8,a7)*step(e7,x_27)*step(x_27,e8))))))));}vec4 cubehelix(float x_37){const float e0=0.0;const vec4 v0=vec4(0,0,0,1);const float e1=0.07;const vec4 v1=vec4(0.08627450980392157,0.0196078431372549,0.23137254901960785,1);const float e2=0.13;const vec4 v2=vec4(0.23529411764705882,0.01568627450980392,0.4117647058823529,1);const float e3=0.2;const vec4 v3=vec4(0.42745098039215684,0.00392156862745098,0.5294117647058824,1);const float e4=0.27;const vec4 v4=vec4(0.6313725490196078,0,0.5764705882352941,1);const float e5=0.33;const vec4 v5=vec4(0.8235294117647058,0.00784313725490196,0.5568627450980392,1);const float e6=0.4;const vec4 v6=vec4(0.984313725490196,0.043137254901960784,0.4823529411764706,1);const float e7=0.47;const vec4 v7=vec4(1,0.11372549019607843,0.3803921568627451,1);const float e8=0.53;const vec4 v8=vec4(1,0.21176470588235294,0.27058823529411763,1);const float e9=0.6;const vec4 v9=vec4(1,0.3333333333333333,0.1803921568627451,1);const float e10=0.67;const vec4 v10=vec4(1,0.47058823529411764,0.13333333333333333,1);const float e11=0.73;const vec4 v11=vec4(1,0.615686274509804,0.1450980392156863,1);const float e12=0.8;const vec4 v12=vec4(0.9450980392156862,0.7490196078431373,0.2235294117647059,1);const float e13=0.87;const vec4 v13=vec4(0.8784313725490196,0.8627450980392157,0.36470588235294116,1);const float e14=0.93;const vec4 v14=vec4(0.8549019607843137,0.9450980392156862,0.5568627450980392,1);const float e15=1.0;const vec4 v15=vec4(0.8901960784313725,0.9921568627450981,0.7764705882352941,1);float a0=smoothstep(e0,e1,x_37);float a1=smoothstep(e1,e2,x_37);float a2=smoothstep(e2,e3,x_37);float a3=smoothstep(e3,e4,x_37);float a4=smoothstep(e4,e5,x_37);float a5=smoothstep(e5,e6,x_37);float a6=smoothstep(e6,e7,x_37);float a7=smoothstep(e7,e8,x_37);float a8=smoothstep(e8,e9,x_37);float a9=smoothstep(e9,e10,x_37);float a10=smoothstep(e10,e11,x_37);float a11=smoothstep(e11,e12,x_37);float a12=smoothstep(e12,e13,x_37);float a13=smoothstep(e13,e14,x_37);float a14=smoothstep(e14,e15,x_37);return max(mix(v0,v1,a0)*step(e0,x_37)*step(x_37,e1),max(mix(v1,v2,a1)*step(e1,x_37)*step(x_37,e2),max(mix(v2,v3,a2)*step(e2,x_37)*step(x_37,e3),max(mix(v3,v4,a3)*step(e3,x_37)*step(x_37,e4),max(mix(v4,v5,a4)*step(e4,x_37)*step(x_37,e5),max(mix(v5,v6,a5)*step(e5,x_37)*step(x_37,e6),max(mix(v6,v7,a6)*step(e6,x_37)*step(x_37,e7),max(mix(v7,v8,a7)*step(e7,x_37)*step(x_37,e8),max(mix(v8,v9,a8)*step(e8,x_37)*step(x_37,e9),max(mix(v9,v10,a9)*step(e9,x_37)*step(x_37,e10),max(mix(v10,v11,a10)*step(e10,x_37)*step(x_37,e11),max(mix(v11,v12,a11)*step(e11,x_37)*step(x_37,e12),max(mix(v12,v13,a12)*step(e12,x_37)*step(x_37,e13),max(mix(v13,v14,a13)*step(e13,x_37)*step(x_37,e14),mix(v14,v15,a14)*step(e14,x_37)*step(x_37,e15)))))))))))))));}float sample_and_apply_contrast_limits(SAMPLER_TYPE channel,vec3 vTexCoord,vec2 contrastLimits){float fragIntensity=float(texture(channel,vTexCoord).r);float contrastLimitsAppliedToIntensity=(fragIntensity-contrastLimits[0])/max(0.0005,(contrastLimits[1]-contrastLimits[0]));return max(0.,contrastLimitsAppliedToIntensity);}vec4 colormap(float intensity,float opacity){return vec4(COLORMAP_FUNCTION(min(1.,intensity)).xyz,opacity);}\";\nvar channels = {\n  name: \"channel-intensity-module\",\n  fs\n};\nvar RENDERING_MODES_BLEND = {\n  [RENDERING_MODES.MAX_INTENSITY_PROJECTION]: {\n    _BEFORE_RENDER: `      float maxVals[6] = float[6](-1.0, -1.0, -1.0, -1.0, -1.0, -1.0);\n    `,\n    _RENDER: `    \n      float intensityArray[6] = float[6](intensityValue0, intensityValue1, intensityValue2, intensityValue3, intensityValue4, intensityValue5);\n\n      for(int i = 0; i < 6; i++) {\n        if(intensityArray[i] > maxVals[i]) {\n          maxVals[i] = intensityArray[i];\n        }\n      }\n    `,\n    _AFTER_RENDER: `      vec3 rgbCombo = vec3(0.0);\n      for(int i = 0; i < 6; i++) {\n        rgbCombo += max(0.0, min(1.0, maxVals[i])) * vec3(colors[i]);\n      }\n      color = vec4(rgbCombo, 1.0);\n    `\n  },\n  [RENDERING_MODES.MIN_INTENSITY_PROJECTION]: {\n    _BEFORE_RENDER: `      float minVals[6] = float[6](1. / 0., 1. / 0., 1. / 0., 1. / 0., 1. / 0., 1. / 0.);\n    `,\n    _RENDER: `    \n      float intensityArray[6] = float[6](intensityValue0, intensityValue1, intensityValue2, intensityValue3, intensityValue4, intensityValue5);\n\n      for(int i = 0; i < 6; i++) {\n        if(intensityArray[i] < minVals[i]) {\n          minVals[i] = intensityArray[i];\n        }\n      }\n    `,\n    _AFTER_RENDER: `      vec3 rgbCombo = vec3(0.0);\n      for(int i = 0; i < 6; i++) {\n        rgbCombo += max(0.0, min(1.0, minVals[i])) * vec3(colors[i]);\n      }\n      color = vec4(rgbCombo, 1.0);\n    `\n  },\n  [RENDERING_MODES.ADDITIVE]: {\n    _BEFORE_RENDER: ``,\n    _RENDER: `      vec3 rgbCombo = vec3(0.0);\n      vec3 hsvCombo = vec3(0.0);\n      float intensityArray[6] = float[6](intensityValue0, intensityValue1, intensityValue2, intensityValue3, intensityValue4, intensityValue5);\n      float total = 0.0;\n      for(int i = 0; i < 6; i++) {\n        float intensityValue = intensityArray[i];\n        rgbCombo += max(0.0, min(1.0, intensityValue)) * colors[i];\n        total += intensityValue;\n      }\n      // Do not go past 1 in opacity.\n      total = min(total, 1.0);\n      vec4 val_color = vec4(rgbCombo, total);\n      // Opacity correction\n      val_color.a = 1.0 - pow(1.0 - val_color.a, 1.0);\n      color.rgb += (1.0 - color.a) * val_color.a * val_color.rgb;\n      color.a += (1.0 - color.a) * val_color.a;\n      if (color.a >= 0.95) {\n        break;\n      }\n    `,\n    _AFTER_RENDER: ``\n  }\n};\nvar RENDERING_MODES_COLORMAP = {\n  [RENDERING_MODES.MAX_INTENSITY_PROJECTION]: {\n    _BEFORE_RENDER: `      float maxVals[6] = float[6](-1.0, -1.0, -1.0, -1.0, -1.0, -1.0);\n    `,\n    _RENDER: `    \n      float intensityArray[6] = float[6](intensityValue0, intensityValue1, intensityValue2, intensityValue3, intensityValue4, intensityValue5);\n\n      for(int i = 0; i < 6; i++) {\n        if(intensityArray[i] > maxVals[i]) {\n          maxVals[i] = intensityArray[i];\n        }\n      }\n    `,\n    _AFTER_RENDER: `      float total = 0.0;\n      for(int i = 0; i < 6; i++) {\n        total += maxVals[i];\n      }\n      // Do not go past 1 in opacity/colormap value.\n      total = min(total, 1.0);\n      color = colormap(total, total);\n    `\n  },\n  [RENDERING_MODES.MIN_INTENSITY_PROJECTION]: {\n    _BEFORE_RENDER: `      float minVals[6] = float[6](1. / 0., 1. / 0., 1. / 0., 1. / 0., 1. / 0., 1. / 0.);\n    `,\n    _RENDER: `    \n      float intensityArray[6] = float[6](intensityValue0, intensityValue1, intensityValue2, intensityValue3, intensityValue4, intensityValue5);\n\n      for(int i = 0; i < 6; i++) {\n        if(intensityArray[i] < minVals[i]) {\n          minVals[i] = intensityArray[i];\n        }\n      }\n    `,\n    _AFTER_RENDER: `      float total = 0.0;\n      for(int i = 0; i < 6; i++) {\n        total += minVals[i];\n      }\n      // Do not go past 1 in opacity/colormap value.\n      total = min(total, 1.0);\n      color = colormap(total, total);\n    `\n  },\n  [RENDERING_MODES.ADDITIVE]: {\n    _BEFORE_RENDER: ``,\n    _RENDER: `    float intensityArray[6] = float[6](intensityValue0, intensityValue1, intensityValue2, intensityValue3, intensityValue4, intensityValue5);\n\t\tfloat total = 0.0;\n\n\t\tfor(int i = 0; i < 6; i++) {\n\t\t\ttotal += intensityArray[i];\n\t\t}\n\t\t// Do not go past 1 in opacity/colormap value.\n\t\ttotal = min(total, 1.0);\n\n\t\tvec4 val_color = colormap(total, total);\n\n\t\t// Opacity correction\n\t\tval_color.a = 1.0 - pow(1.0 - val_color.a, 1.0);\n\t\tcolor.rgb += (1.0 - color.a) * val_color.a * val_color.rgb;\n\t\tcolor.a += (1.0 - color.a) * val_color.a;\n\t\tif (color.a >= 0.95) {\n\t\t\tbreak;\n\t\t}\n    p += ray_dir * dt;\n    `,\n    _AFTER_RENDER: ``\n  }\n};\nvar CUBE_STRIP = [\n  1,\n  1,\n  0,\n  0,\n  1,\n  0,\n  1,\n  1,\n  1,\n  0,\n  1,\n  1,\n  0,\n  0,\n  1,\n  0,\n  1,\n  0,\n  0,\n  0,\n  0,\n  1,\n  1,\n  0,\n  1,\n  0,\n  0,\n  1,\n  1,\n  1,\n  1,\n  0,\n  1,\n  0,\n  0,\n  1,\n  1,\n  0,\n  0,\n  0,\n  0,\n  0\n];\nvar NUM_PLANES_DEFAULT = 1;\nvar defaultProps$1 = {\n  pickable: false,\n  coordinateSystem: COORDINATE_SYSTEM2.CARTESIAN,\n  channelData: { type: \"object\", value: {}, compare: true },\n  colors: { type: \"array\", value: [], compare: true },\n  contrastLimits: { type: \"array\", value: [], compare: true },\n  dtype: { type: \"string\", value: \"Uint8\", compare: true },\n  colormap: { type: \"string\", value: \"\", compare: true },\n  xSlice: { type: \"array\", value: null, compare: true },\n  ySlice: { type: \"array\", value: null, compare: true },\n  zSlice: { type: \"array\", value: null, compare: true },\n  clippingPlanes: { type: \"array\", value: [], compare: true },\n  renderingMode: {\n    type: \"string\",\n    value: RENDERING_MODES.ADDITIVE,\n    compare: true\n  },\n  resolutionMatrix: { type: \"object\", value: new Matrix4(), compare: true }\n};\nfunction getRenderingAttrs() {\n  const values = getDtypeValues(\"Float32\");\n  return __spreadProps(__spreadValues({}, values), {\n    sampler: values.sampler.replace(\"2D\", \"3D\"),\n    cast: (data) => new Float32Array(data)\n  });\n}\nfunction removeExtraColormapFunctionsFromShader(colormap) {\n  const discardColormaps = COLORMAPS.filter((i) => i !== (colormap || \"viridis\")).map((i) => i.replace(/-/g, \"_\"));\n  const discardRegex = new RegExp(`vec4 (${discardColormaps.join(\"(_([0-9]*))?|\")})\\\\(float x_[0-9]+\\\\){([^}]+)}`, \"g\");\n  const channelsModules = __spreadProps(__spreadValues({}, channels), {\n    fs: channels.fs.replace(discardRegex, \"\"),\n    defines: {\n      COLORMAP_FUNCTION: colormap || \"viridis\"\n    }\n  });\n  return channelsModules;\n}\nvar XR3DLayer = class extends Layer {\n  initializeState() {\n    const { gl } = this.context;\n    this.setState({\n      model: this._getModel(gl)\n    });\n    gl.pixelStorei(GL.UNPACK_ALIGNMENT, 1);\n    gl.pixelStorei(GL.PACK_ALIGNMENT, 1);\n  }\n  getShaders() {\n    const { colormap, renderingMode, clippingPlanes } = this.props;\n    const { sampler } = getRenderingAttrs();\n    const { _BEFORE_RENDER, _RENDER, _AFTER_RENDER } = colormap ? RENDERING_MODES_COLORMAP[renderingMode] : RENDERING_MODES_BLEND[renderingMode];\n    const channelsModules = removeExtraColormapFunctionsFromShader(colormap);\n    return super.getShaders({\n      vs,\n      fs: fs$1.replace(\"_BEFORE_RENDER\", _BEFORE_RENDER).replace(\"_RENDER\", _RENDER).replace(\"_AFTER_RENDER\", _AFTER_RENDER),\n      defines: {\n        SAMPLER_TYPE: sampler,\n        COLORMAP_FUNCTION: colormap || \"viridis\",\n        NUM_PLANES: String(clippingPlanes.length || NUM_PLANES_DEFAULT)\n      },\n      modules: [channelsModules]\n    });\n  }\n  finalizeState() {\n    super.finalizeState();\n    if (this.state.textures) {\n      Object.values(this.state.textures).forEach((tex) => tex && tex.delete());\n    }\n  }\n  updateState({ props, oldProps, changeFlags }) {\n    var _a2, _b2;\n    if (changeFlags.extensionsChanged || props.colormap !== oldProps.colormap || props.renderingMode !== oldProps.renderingMode || props.clippingPlanes.length !== oldProps.clippingPlanes.length) {\n      const { gl } = this.context;\n      if (this.state.model) {\n        this.state.model.delete();\n      }\n      this.setState({ model: this._getModel(gl) });\n    }\n    if (props.channelData && ((_a2 = props == null ? void 0 : props.channelData) == null ? void 0 : _a2.data) !== ((_b2 = oldProps == null ? void 0 : oldProps.channelData) == null ? void 0 : _b2.data)) {\n      this.loadTexture(props.channelData);\n    }\n  }\n  _getModel(gl) {\n    if (!gl) {\n      return null;\n    }\n    return new Model(gl, __spreadProps(__spreadValues({}, this.getShaders()), {\n      geometry: new Geometry({\n        drawMode: gl.TRIANGLE_STRIP,\n        attributes: {\n          positions: new Float32Array(CUBE_STRIP)\n        }\n      })\n    }));\n  }\n  draw({ uniforms }) {\n    const { textures, model, scaleMatrix } = this.state;\n    const {\n      contrastLimits,\n      colors,\n      xSlice,\n      ySlice,\n      zSlice,\n      modelMatrix,\n      channelsVisible,\n      domain,\n      dtype,\n      clippingPlanes,\n      resolutionMatrix\n    } = this.props;\n    const {\n      viewMatrix,\n      viewMatrixInverse,\n      projectionMatrix\n    } = this.context.viewport;\n    if (textures && model && scaleMatrix) {\n      const { paddedContrastLimits, paddedColors } = padColorsAndWindows({\n        contrastLimits,\n        colors,\n        channelsVisible,\n        domain,\n        dtype\n      });\n      const invertedScaleMatrix = scaleMatrix.clone().invert();\n      const invertedResolutionMatrix = resolutionMatrix.clone().invert();\n      const paddedClippingPlanes = padWithDefault(clippingPlanes.map((p) => p.clone().transform(invertedScaleMatrix).transform(invertedResolutionMatrix)), new Plane([1, 0, 0]), clippingPlanes.length || NUM_PLANES_DEFAULT);\n      const normals = paddedClippingPlanes.map((plane) => plane.normal).flat();\n      const distances = paddedClippingPlanes.map((plane) => plane.distance);\n      model.setUniforms(__spreadProps(__spreadValues(__spreadValues({}, uniforms), textures), {\n        contrastLimits: paddedContrastLimits,\n        colors: paddedColors,\n        xSlice: new Float32Array(xSlice ? xSlice.map((i) => i / scaleMatrix[0] / resolutionMatrix[0]) : [0, 1]),\n        ySlice: new Float32Array(ySlice ? ySlice.map((i) => i / scaleMatrix[5] / resolutionMatrix[5]) : [0, 1]),\n        zSlice: new Float32Array(zSlice ? zSlice.map((i) => i / scaleMatrix[10] / resolutionMatrix[10]) : [0, 1]),\n        eye_pos: new Float32Array([\n          viewMatrixInverse[12],\n          viewMatrixInverse[13],\n          viewMatrixInverse[14]\n        ]),\n        view: viewMatrix,\n        proj: projectionMatrix,\n        scale: scaleMatrix,\n        resolution: resolutionMatrix,\n        model: modelMatrix || new Matrix4(),\n        normals,\n        distances\n      })).draw();\n    }\n  }\n  loadTexture(channelData) {\n    const textures = {\n      volume0: null,\n      volume1: null,\n      volume2: null,\n      volume3: null,\n      volume4: null,\n      volume5: null\n    };\n    if (this.state.textures) {\n      Object.values(this.state.textures).forEach((tex) => tex && tex.delete());\n    }\n    if (channelData && Object.keys(channelData).length > 0 && channelData.data) {\n      const { height, width, depth } = channelData;\n      channelData.data.forEach((d, i) => {\n        textures[`volume${i}`] = this.dataToTexture(d, width, height, depth);\n      }, this);\n      this.setState({\n        textures,\n        scaleMatrix: new Matrix4().scale(this.props.physicalSizeScalingMatrix.transformPoint([\n          width,\n          height,\n          depth\n        ]))\n      });\n    }\n  }\n  dataToTexture(data, width, height, depth) {\n    var _a2, _b2;\n    const attrs = getRenderingAttrs();\n    const texture = new Texture3D(this.context.gl, {\n      width,\n      height,\n      depth,\n      data: (_b2 = (_a2 = attrs.cast) == null ? void 0 : _a2.call(attrs, data)) != null ? _b2 : data,\n      format: attrs.dataFormat,\n      dataFormat: attrs.format,\n      type: attrs.type,\n      mipmaps: false,\n      parameters: {\n        [GL.TEXTURE_MIN_FILTER]: GL.LINEAR,\n        [GL.TEXTURE_MAG_FILTER]: GL.LINEAR,\n        [GL.TEXTURE_WRAP_S]: GL.CLAMP_TO_EDGE,\n        [GL.TEXTURE_WRAP_T]: GL.CLAMP_TO_EDGE,\n        [GL.TEXTURE_WRAP_R]: GL.CLAMP_TO_EDGE\n      }\n    });\n    return texture;\n  }\n};\nXR3DLayer.layerName = \"XR3DLayer\";\nXR3DLayer.defaultProps = defaultProps$1;\nfunction getVolume(_0) {\n  return __async(this, arguments, function* ({\n    source,\n    selection,\n    onUpdate = () => {\n    },\n    downsampleDepth = 1,\n    signal\n  }) {\n    const { shape, labels, dtype } = source;\n    const { height, width } = getImageSize(source);\n    const depth = shape[labels.indexOf(\"z\")];\n    const depthDownsampled = Math.max(1, Math.floor(depth / downsampleDepth));\n    const rasterSize = height * width;\n    const name2 = `${dtype}Array`;\n    const TypedArray = globalThis[name2];\n    const volumeData = new TypedArray(rasterSize * depthDownsampled);\n    yield Promise.all(new Array(depthDownsampled).fill(0).map((_, z) => __async(this, null, function* () {\n      const depthSelection = __spreadProps(__spreadValues({}, selection), {\n        z: z * downsampleDepth\n      });\n      const { data: rasterData } = yield source.getRaster({\n        selection: depthSelection,\n        signal\n      });\n      let r = 0;\n      onUpdate();\n      while (r < rasterSize) {\n        const volIndex = z * rasterSize + (rasterSize - r - 1);\n        const rasterIndex = (width - r - 1) % width + width * Math.floor(r / width);\n        volumeData[volIndex] = rasterData[rasterIndex];\n        r += 1;\n      }\n      onUpdate();\n    })));\n    return {\n      data: volumeData,\n      height,\n      width,\n      depth: depthDownsampled\n    };\n  });\n}\nvar getTextLayer = (text, viewport, id) => {\n  return new TextLayer({\n    id: `text-${id}`,\n    coordinateSystem: COORDINATE_SYSTEM2.CARTESIAN,\n    data: [\n      {\n        text,\n        position: viewport.position\n      }\n    ],\n    getColor: [220, 220, 220, 255],\n    getSize: 25,\n    sizeUnits: \"meters\",\n    sizeScale: __pow(2, -viewport.zoom),\n    fontFamily: \"Helvetica\"\n  });\n};\nvar defaultProps = {\n  pickable: false,\n  coordinateSystem: COORDINATE_SYSTEM2.CARTESIAN,\n  contrastLimits: { type: \"array\", value: [], compare: true },\n  channelsVisible: { type: \"array\", value: [], compare: true },\n  colors: { type: \"array\", value: [], compare: true },\n  colormap: { type: \"string\", value: \"\", compare: true },\n  selections: { type: \"array\", value: [], compare: true },\n  resolution: { type: \"number\", value: 0, compare: true },\n  domain: { type: \"array\", value: [], compare: true },\n  loader: {\n    type: \"object\",\n    value: [\n      {\n        getRaster: () => __async(void 0, null, function* () {\n          return { data: [], height: 0, width: 0 };\n        }),\n        dtype: \"Uint16\",\n        shape: [1],\n        labels: [\"z\"]\n      }\n    ],\n    compare: true\n  },\n  xSlice: { type: \"array\", value: null, compare: true },\n  ySlice: { type: \"array\", value: null, compare: true },\n  zSlice: { type: \"array\", value: null, compare: true },\n  clippingPlanes: { type: \"array\", value: [], compare: true },\n  renderingMode: {\n    type: \"string\",\n    value: RENDERING_MODES.MAX_INTENSITY_PROJECTION,\n    compare: true\n  },\n  onUpdate: { type: \"function\", value: () => {\n  }, compare: true },\n  useProgressIndicator: { type: \"boolean\", value: true, compare: true },\n  useWebGL1Warning: { type: \"boolean\", value: true, compare: true }\n};\nvar VolumeLayer = class extends CompositeLayer {\n  clearState() {\n    this.setState({\n      height: null,\n      width: null,\n      depth: null,\n      data: null,\n      physicalSizeScalingMatrix: null,\n      resolutionMatrix: null,\n      progress: 0,\n      abortController: null\n    });\n  }\n  finalizeState() {\n    this.state.abortController.abort();\n  }\n  updateState({ oldProps, props }) {\n    const loaderChanged = props.loader !== oldProps.loader;\n    const resolutionChanged = props.resolution !== oldProps.resolution;\n    const selectionsChanged = props.selections !== oldProps.selections;\n    if (resolutionChanged) {\n      this.clearState();\n    }\n    if (loaderChanged || selectionsChanged || resolutionChanged) {\n      const {\n        loader,\n        selections = [],\n        resolution,\n        onViewportLoad\n      } = this.props;\n      const source = loader[resolution];\n      let progress = 0;\n      const totalRequests = (source.shape[source.labels.indexOf(\"z\")] >> resolution) * selections.length;\n      const onUpdate = () => {\n        progress += 0.5 / totalRequests;\n        if (this.props.onUpdate) {\n          this.props.onUpdate({ progress });\n        }\n        this.setState({ progress });\n      };\n      const abortController = new AbortController();\n      this.setState({ abortController });\n      const { signal } = abortController;\n      const volumePromises = selections.map((selection) => getVolume({\n        selection,\n        source,\n        onUpdate,\n        downsampleDepth: __pow(2, resolution),\n        signal\n      }));\n      const physicalSizeScalingMatrix = getPhysicalSizeScalingMatrix(loader[resolution]);\n      Promise.all(volumePromises).then((volumes) => {\n        if (onViewportLoad) {\n          onViewportLoad(volumes);\n        }\n        const volume = {\n          data: volumes.map((d) => d.data),\n          width: volumes[0].width,\n          height: volumes[0].height,\n          depth: volumes[0].depth\n        };\n        this.setState(__spreadProps(__spreadValues({}, volume), {\n          physicalSizeScalingMatrix,\n          resolutionMatrix: new Matrix4().scale(__pow(2, resolution))\n        }));\n      });\n    }\n  }\n  renderLayers() {\n    const {\n      loader,\n      id,\n      resolution,\n      useProgressIndicator,\n      useWebGL1Warning\n    } = this.props;\n    const { dtype } = loader[resolution];\n    const {\n      data,\n      width,\n      height,\n      depth,\n      progress,\n      physicalSizeScalingMatrix,\n      resolutionMatrix\n    } = this.state;\n    const { gl } = this.context;\n    if (!isWebGL2(gl) && useWebGL1Warning) {\n      const { viewport } = this.context;\n      return getTextLayer([\n        \"Volume rendering is only available on browsers that support WebGL2. If you\",\n        \"are using Safari, you can turn on WebGL2 by navigating in the top menubar\",\n        \"to check Develop > Experimental Features > WebGL 2.0 and then refreshing\",\n        \"the page.\"\n      ].join(\"\\n\"), viewport, id);\n    }\n    if (!(width && height) && useProgressIndicator) {\n      const { viewport } = this.context;\n      return getTextLayer(`Loading Volume ${String((progress || 0) * 100).slice(0, 5)}%...`, viewport, id);\n    }\n    return new XR3DLayer(this.props, {\n      channelData: { data, width, height, depth },\n      id: `XR3DLayer-${0}-${height}-${width}-${0}-${resolution}-${id}`,\n      physicalSizeScalingMatrix,\n      parameters: {\n        [GL.CULL_FACE]: true,\n        [GL.CULL_FACE_MODE]: GL.FRONT,\n        [GL.DEPTH_TEST]: false,\n        blendFunc: [GL.SRC_ALPHA, GL.ONE],\n        blend: true\n      },\n      resolutionMatrix,\n      dtype\n    });\n  }\n};\nVolumeLayer.layerName = \"VolumeLayer\";\nVolumeLayer.defaultProps = defaultProps;\nvar VIV_PROXY_KEY = \"__viv\";\nvar OFFSETS_PROXY_KEY = `${VIV_PROXY_KEY}-offsets`;\nfunction checkProxies(tiff) {\n  if (!isProxy(tiff, OFFSETS_PROXY_KEY)) {\n    console.warn(\"GeoTIFF source is missing offsets proxy.\");\n  }\n}\nfunction isProxy(tiff, proxyFlag) {\n  return tiff[proxyFlag];\n}\nfunction createOffsetsProxy(tiff, offsets) {\n  const get = (target, key) => {\n    if (key === \"getImage\") {\n      return (index) => {\n        if (!(index in target.ifdRequests) && index in offsets) {\n          const offset = offsets[index];\n          target.ifdRequests[index] = target.parseFileDirectoryAt(offset);\n        }\n        return target.getImage(index);\n      };\n    }\n    if (key === OFFSETS_PROXY_KEY) {\n      return true;\n    }\n    return Reflect.get(target, key);\n  };\n  return new Proxy(tiff, { get });\n}\nvar encodedJs = \"KGZ1bmN0aW9uICgpIHsKICAndXNlIHN0cmljdCc7CgogIGZ1bmN0aW9uIGRlY29kZVJvd0FjYyhyb3csIHN0cmlkZSkgewogICAgbGV0IGxlbmd0aCA9IHJvdy5sZW5ndGggLSBzdHJpZGU7CiAgICBsZXQgb2Zmc2V0ID0gMDsKICAgIGRvIHsKICAgICAgZm9yIChsZXQgaSA9IHN0cmlkZTsgaSA+IDA7IGktLSkgewogICAgICAgIHJvd1tvZmZzZXQgKyBzdHJpZGVdICs9IHJvd1tvZmZzZXRdOwogICAgICAgIG9mZnNldCsrOwogICAgICB9CgogICAgICBsZW5ndGggLT0gc3RyaWRlOwogICAgfSB3aGlsZSAobGVuZ3RoID4gMCk7CiAgfQoKICBmdW5jdGlvbiBkZWNvZGVSb3dGbG9hdGluZ1BvaW50KHJvdywgc3RyaWRlLCBieXRlc1BlclNhbXBsZSkgewogICAgbGV0IGluZGV4ID0gMDsKICAgIGxldCBjb3VudCA9IHJvdy5sZW5ndGg7CiAgICBjb25zdCB3YyA9IGNvdW50IC8gYnl0ZXNQZXJTYW1wbGU7CgogICAgd2hpbGUgKGNvdW50ID4gc3RyaWRlKSB7CiAgICAgIGZvciAobGV0IGkgPSBzdHJpZGU7IGkgPiAwOyAtLWkpIHsKICAgICAgICByb3dbaW5kZXggKyBzdHJpZGVdICs9IHJvd1tpbmRleF07CiAgICAgICAgKytpbmRleDsKICAgICAgfQogICAgICBjb3VudCAtPSBzdHJpZGU7CiAgICB9CgogICAgY29uc3QgY29weSA9IHJvdy5zbGljZSgpOwogICAgZm9yIChsZXQgaSA9IDA7IGkgPCB3YzsgKytpKSB7CiAgICAgIGZvciAobGV0IGIgPSAwOyBiIDwgYnl0ZXNQZXJTYW1wbGU7ICsrYikgewogICAgICAgIHJvd1soYnl0ZXNQZXJTYW1wbGUgKiBpKSArIGJdID0gY29weVsoKGJ5dGVzUGVyU2FtcGxlIC0gYiAtIDEpICogd2MpICsgaV07CiAgICAgIH0KICAgIH0KICB9CgogIGZ1bmN0aW9uIGFwcGx5UHJlZGljdG9yKGJsb2NrLCBwcmVkaWN0b3IsIHdpZHRoLCBoZWlnaHQsIGJpdHNQZXJTYW1wbGUsCiAgICBwbGFuYXJDb25maWd1cmF0aW9uKSB7CiAgICBpZiAoIXByZWRpY3RvciB8fCBwcmVkaWN0b3IgPT09IDEpIHsKICAgICAgcmV0dXJuIGJsb2NrOwogICAgfQoKICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYml0c1BlclNhbXBsZS5sZW5ndGg7ICsraSkgewogICAgICBpZiAoYml0c1BlclNhbXBsZVtpXSAlIDggIT09IDApIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1doZW4gZGVjb2Rpbmcgd2l0aCBwcmVkaWN0b3IsIG9ubHkgbXVsdGlwbGUgb2YgOCBiaXRzIGFyZSBzdXBwb3J0ZWQuJyk7CiAgICAgIH0KICAgICAgaWYgKGJpdHNQZXJTYW1wbGVbaV0gIT09IGJpdHNQZXJTYW1wbGVbMF0pIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1doZW4gZGVjb2Rpbmcgd2l0aCBwcmVkaWN0b3IsIGFsbCBzYW1wbGVzIG11c3QgaGF2ZSB0aGUgc2FtZSBzaXplLicpOwogICAgICB9CiAgICB9CgogICAgY29uc3QgYnl0ZXNQZXJTYW1wbGUgPSBiaXRzUGVyU2FtcGxlWzBdIC8gODsKICAgIGNvbnN0IHN0cmlkZSA9IHBsYW5hckNvbmZpZ3VyYXRpb24gPT09IDIgPyAxIDogYml0c1BlclNhbXBsZS5sZW5ndGg7CgogICAgZm9yIChsZXQgaSA9IDA7IGkgPCBoZWlnaHQ7ICsraSkgewogICAgICAvLyBMYXN0IHN0cmlwIHdpbGwgYmUgdHJ1bmNhdGVkIGlmIGhlaWdodCAlIHN0cmlwSGVpZ2h0ICE9IDAKICAgICAgaWYgKGkgKiBzdHJpZGUgKiB3aWR0aCAqIGJ5dGVzUGVyU2FtcGxlID49IGJsb2NrLmJ5dGVMZW5ndGgpIHsKICAgICAgICBicmVhazsKICAgICAgfQogICAgICBsZXQgcm93OwogICAgICBpZiAocHJlZGljdG9yID09PSAyKSB7IC8vIGhvcml6b250YWwgcHJlZGljdGlvbgogICAgICAgIHN3aXRjaCAoYml0c1BlclNhbXBsZVswXSkgewogICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICByb3cgPSBuZXcgVWludDhBcnJheSgKICAgICAgICAgICAgICBibG9jaywgaSAqIHN0cmlkZSAqIHdpZHRoICogYnl0ZXNQZXJTYW1wbGUsIHN0cmlkZSAqIHdpZHRoICogYnl0ZXNQZXJTYW1wbGUsCiAgICAgICAgICAgICk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAxNjoKICAgICAgICAgICAgcm93ID0gbmV3IFVpbnQxNkFycmF5KAogICAgICAgICAgICAgIGJsb2NrLCBpICogc3RyaWRlICogd2lkdGggKiBieXRlc1BlclNhbXBsZSwgc3RyaWRlICogd2lkdGggKiBieXRlc1BlclNhbXBsZSAvIDIsCiAgICAgICAgICAgICk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAzMjoKICAgICAgICAgICAgcm93ID0gbmV3IFVpbnQzMkFycmF5KAogICAgICAgICAgICAgIGJsb2NrLCBpICogc3RyaWRlICogd2lkdGggKiBieXRlc1BlclNhbXBsZSwgc3RyaWRlICogd2lkdGggKiBieXRlc1BlclNhbXBsZSAvIDQsCiAgICAgICAgICAgICk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBQcmVkaWN0b3IgMiBub3QgYWxsb3dlZCB3aXRoICR7Yml0c1BlclNhbXBsZVswXX0gYml0cyBwZXIgc2FtcGxlLmApOwogICAgICAgIH0KICAgICAgICBkZWNvZGVSb3dBY2Mocm93LCBzdHJpZGUpOwogICAgICB9IGVsc2UgaWYgKHByZWRpY3RvciA9PT0gMykgeyAvLyBob3Jpem9udGFsIGZsb2F0aW5nIHBvaW50CiAgICAgICAgcm93ID0gbmV3IFVpbnQ4QXJyYXkoCiAgICAgICAgICBibG9jaywgaSAqIHN0cmlkZSAqIHdpZHRoICogYnl0ZXNQZXJTYW1wbGUsIHN0cmlkZSAqIHdpZHRoICogYnl0ZXNQZXJTYW1wbGUsCiAgICAgICAgKTsKICAgICAgICBkZWNvZGVSb3dGbG9hdGluZ1BvaW50KHJvdywgc3RyaWRlLCBieXRlc1BlclNhbXBsZSk7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBibG9jazsKICB9CgogIGNsYXNzIEJhc2VEZWNvZGVyIHsKICAgIGFzeW5jIGRlY29kZShmaWxlRGlyZWN0b3J5LCBidWZmZXIpIHsKICAgICAgY29uc3QgZGVjb2RlZCA9IGF3YWl0IHRoaXMuZGVjb2RlQmxvY2soYnVmZmVyKTsKICAgICAgY29uc3QgcHJlZGljdG9yID0gZmlsZURpcmVjdG9yeS5QcmVkaWN0b3IgfHwgMTsKICAgICAgaWYgKHByZWRpY3RvciAhPT0gMSkgewogICAgICAgIGNvbnN0IGlzVGlsZWQgPSAhZmlsZURpcmVjdG9yeS5TdHJpcE9mZnNldHM7CiAgICAgICAgY29uc3QgdGlsZVdpZHRoID0gaXNUaWxlZCA/IGZpbGVEaXJlY3RvcnkuVGlsZVdpZHRoIDogZmlsZURpcmVjdG9yeS5JbWFnZVdpZHRoOwogICAgICAgIGNvbnN0IHRpbGVIZWlnaHQgPSBpc1RpbGVkID8gZmlsZURpcmVjdG9yeS5UaWxlTGVuZ3RoIDogKAogICAgICAgICAgZmlsZURpcmVjdG9yeS5Sb3dzUGVyU3RyaXAgfHwgZmlsZURpcmVjdG9yeS5JbWFnZUxlbmd0aAogICAgICAgICk7CiAgICAgICAgcmV0dXJuIGFwcGx5UHJlZGljdG9yKAogICAgICAgICAgZGVjb2RlZCwgcHJlZGljdG9yLCB0aWxlV2lkdGgsIHRpbGVIZWlnaHQsIGZpbGVEaXJlY3RvcnkuQml0c1BlclNhbXBsZSwKICAgICAgICAgIGZpbGVEaXJlY3RvcnkuUGxhbmFyQ29uZmlndXJhdGlvbiwKICAgICAgICApOwogICAgICB9CiAgICAgIHJldHVybiBkZWNvZGVkOwogICAgfQogIH0KCiAgY2xhc3MgUmF3RGVjb2RlciBleHRlbmRzIEJhc2VEZWNvZGVyIHsKICAgIGRlY29kZUJsb2NrKGJ1ZmZlcikgewogICAgICByZXR1cm4gYnVmZmVyOwogICAgfQogIH0KCiAgbGV0IEEsST1udWxsO2Z1bmN0aW9uIGcoKXtyZXR1cm4gbnVsbCE9PUkmJkkuYnVmZmVyPT09QS5tZW1vcnkuYnVmZmVyfHwoST1uZXcgVWludDhBcnJheShBLm1lbW9yeS5idWZmZXIpKSxJfWxldCBCPTA7bGV0IFE9bnVsbDtmdW5jdGlvbiBDKCl7cmV0dXJuIG51bGwhPT1RJiZRLmJ1ZmZlcj09PUEubWVtb3J5LmJ1ZmZlcnx8KFE9bmV3IEludDMyQXJyYXkoQS5tZW1vcnkuYnVmZmVyKSksUX1hc3luYyBmdW5jdGlvbiBFKEkpe3ZvaWQgMD09PUkmJihJPSIiLnJlcGxhY2UoL1wuanMkLywiX2JnLndhc20iKSk7KCJzdHJpbmciPT10eXBlb2YgSXx8ImZ1bmN0aW9uIj09dHlwZW9mIFJlcXVlc3QmJkkgaW5zdGFuY2VvZiBSZXF1ZXN0fHwiZnVuY3Rpb24iPT10eXBlb2YgVVJMJiZJIGluc3RhbmNlb2YgVVJMKSYmKEk9ZmV0Y2goSSkpO2NvbnN0e2luc3RhbmNlOmcsbW9kdWxlOkJ9PWF3YWl0IGFzeW5jIGZ1bmN0aW9uKEEsSSl7aWYoImZ1bmN0aW9uIj09dHlwZW9mIFJlc3BvbnNlJiZBIGluc3RhbmNlb2YgUmVzcG9uc2Upe2lmKCJmdW5jdGlvbiI9PXR5cGVvZiBXZWJBc3NlbWJseS5pbnN0YW50aWF0ZVN0cmVhbWluZyl0cnl7cmV0dXJuIGF3YWl0IFdlYkFzc2VtYmx5Lmluc3RhbnRpYXRlU3RyZWFtaW5nKEEsSSl9Y2F0Y2goSSl7aWYoImFwcGxpY2F0aW9uL3dhc20iPT1BLmhlYWRlcnMuZ2V0KCJDb250ZW50LVR5cGUiKSl0aHJvdyBJO2NvbnNvbGUud2FybigiYFdlYkFzc2VtYmx5Lmluc3RhbnRpYXRlU3RyZWFtaW5nYCBmYWlsZWQgYmVjYXVzZSB5b3VyIHNlcnZlciBkb2VzIG5vdCBzZXJ2ZSB3YXNtIHdpdGggYGFwcGxpY2F0aW9uL3dhc21gIE1JTUUgdHlwZS4gRmFsbGluZyBiYWNrIHRvIGBXZWJBc3NlbWJseS5pbnN0YW50aWF0ZWAgd2hpY2ggaXMgc2xvd2VyLiBPcmlnaW5hbCBlcnJvcjpcbiIsSSk7fWNvbnN0IGc9YXdhaXQgQS5hcnJheUJ1ZmZlcigpO3JldHVybiBhd2FpdCBXZWJBc3NlbWJseS5pbnN0YW50aWF0ZShnLEkpfXtjb25zdCBnPWF3YWl0IFdlYkFzc2VtYmx5Lmluc3RhbnRpYXRlKEEsSSk7cmV0dXJuIGcgaW5zdGFuY2VvZiBXZWJBc3NlbWJseS5JbnN0YW5jZT97aW5zdGFuY2U6Zyxtb2R1bGU6QX06Z319KGF3YWl0IEkse30pO3JldHVybiBBPWcuZXhwb3J0cyxFLl9fd2JpbmRnZW5fd2FzbV9tb2R1bGU9QixBfXZhciBEPU9iamVjdC5mcmVlemUoe19fcHJvdG9fXzpudWxsLGRlY29tcHJlc3M6ZnVuY3Rpb24oSSxRKXt0cnl7Y29uc3QgRj1BLl9fd2JpbmRnZW5fYWRkX3RvX3N0YWNrX3BvaW50ZXIoLTE2KTt2YXIgRT1mdW5jdGlvbihBLEkpe2NvbnN0IFE9SSgxKkEubGVuZ3RoKTtyZXR1cm4gZygpLnNldChBLFEvMSksQj1BLmxlbmd0aCxRfShJLEEuX193YmluZGdlbl9tYWxsb2MpLEQ9QjtBLmRlY29tcHJlc3MoRixFLEQsUSk7dmFyIGk9QygpW0YvNCswXSx3PUMoKVtGLzQrMV0sRz0obz1pLE49dyxnKCkuc3ViYXJyYXkoby8xLG8vMStOKSkuc2xpY2UoKTtyZXR1cm4gQS5fX3diaW5kZ2VuX2ZyZWUoaSwxKncpLEd9ZmluYWxseXtBLl9fd2JpbmRnZW5fYWRkX3RvX3N0YWNrX3BvaW50ZXIoMTYpO312YXIgbyxOO30sZGVmYXVsdDpFfSk7Y29uc3QgaT1bNjIsMCwwLDAsNjMsNTIsNTMsNTQsNTUsNTYsNTcsNTgsNTksNjAsNjEsMCwwLDAsMCwwLDAsMCwwLDEsMiwzLDQsNSw2LDcsOCw5LDEwLDExLDEyLDEzLDE0LDE1LDE2LDE3LDE4LDE5LDIwLDIxLDIyLDIzLDI0LDI1LDAsMCwwLDAsMCwwLDI2LDI3LDI4LDI5LDMwLDMxLDMyLDMzLDM0LDM1LDM2LDM3LDM4LDM5LDQwLDQxLDQyLDQzLDQ0LDQ1LDQ2LDQ3LDQ4LDQ5LDUwLDUxXTtmdW5jdGlvbiB3KEEpe3JldHVybiBpW0EtNDNdfWNvbnN0IEc9ZnVuY3Rpb24oQSl7bGV0IEksZz1BLmVuZHNXaXRoKCI9PSIpPzI6QS5lbmRzV2l0aCgiPSIpPzE6MCxCPUEubGVuZ3RoLFE9bmV3IFVpbnQ4QXJyYXkoQi80KjMpO2ZvcihsZXQgZz0wLEM9MDtnPEI7Zys9NCxDKz0zKUk9dyhBLmNoYXJDb2RlQXQoZykpPDwxOHx3KEEuY2hhckNvZGVBdChnKzEpKTw8MTJ8dyhBLmNoYXJDb2RlQXQoZysyKSk8PDZ8dyhBLmNoYXJDb2RlQXQoZyszKSksUVtDXT1JPj4xNixRW0MrMV09ST4+OCYyNTUsUVtDKzJdPTI1NSZJO3JldHVybiBRLnN1YmFycmF5KDAsUS5sZW5ndGgtZyl9KCJBR0Z6YlFFQUFBQUJXUTVnQW45L0FYOWdBMzkvZndGL1lBSi9md0JnQVg4QVlBTi9mMzhBWUFGL0FYOWdCSDkvZjM4QVlBUi9mMzkvQVg5Z0JuOS9mMzkvZndCZ0FYOEJmbUFBQUdBRmYzOS9mMzhBWUFWL2YzOS9md0YvWUFKK2Z3Ri9BMjFzQlFnSUN3TUJBZ1VNQVFBQkFBSUFCUUFDQWdZR0RRWURBZ0FDQUFBRUJBUUNBZ1lHQUFZQkJnSUhBd1FEQkFRREF3QURCUU1EQkFRRUJBUUNBZ0FIQUFRQUFnTUJBZ2NGQkFJREFRVUNBZ0lEQWdJREF3Y0NBUUFBQkFJQUNnQUFBUUFGQWdBREJRa0pDUU1DQkFVQmNBRXJLd1VEQVFBUkJna0Jmd0ZCZ0lEQUFBc0hYd1VHYldWdGIzSjVBZ0FLWkdWamIyMXdjbVZ6Y3dBbkgxOWZkMkpwYm1SblpXNWZZV1JrWDNSdlgzTjBZV05yWDNCdmFXNTBaWElBWWhGZlgzZGlhVzVrWjJWdVgyMWhiR3h2WXdCTUQxOWZkMkpwYm1SblpXNWZabkpsWlFCV0NUQUJBRUVCQ3lwcUpEVUNabVZETlFGbVpVTmhhMnBYREQxcFZCb2hTVnRUYUdkZlhERU9YbGhxYVFzY1FXQWJQMlFLc3VnQmJOTXFBZ2gvQVg0Q1FBSkFBa0FDUUNBQVFmVUJUd1JBSUFCQnpmOTdUdzBDSUFCQkMyb2lBRUY0Y1NFR1FaQ253QUFvQWdBaUNFVU5BVUVBSUFacklRUUNRQUpBQW45QkFDQUFRUWgySWdCRkRRQWFRUjhnQmtILy8vOEhTdzBBR2lBR1FRWWdBR2NpQUd0QkgzRjJRUUZ4SUFCQkFYUnJRVDVxQ3lJSFFRSjBRWnlwd0FCcUtBSUFJZ0FFUUNBR1FRQkJHU0FIUVFGMmEwRWZjU0FIUVI5R0czUWhBZ05BQWtBZ0FFRUVhaWdDQUVGNGNTSUZJQVpKRFFBZ0JTQUdheUlGSUFSUERRQWdBQ0VESUFVaUJBMEFRUUFoQkF3REN5QUFRUlJxS0FJQUlnVWdBU0FGSUFBZ0FrRWRka0VFY1dwQkVHb29BZ0FpQUVjYklBRWdCUnNoQVNBQ1FRRjBJUUlnQUEwQUN5QUJCRUFnQVNFQURBSUxJQU1OQWd0QkFDRURRUUlnQjBFZmNYUWlBRUVBSUFCcmNpQUljU0lBUlEwRElBQkJBQ0FBYTNGb1FRSjBRWnlwd0FCcUtBSUFJZ0JGRFFNTEEwQWdBQ0FESUFCQkJHb29BZ0JCZUhFaUFpQUdUeUFDSUFacklnSWdCRWx4SWdFYklRTWdBaUFFSUFFYklRUWdBQ2dDRUNJQ0JIOGdBZ1VnQUVFVWFpZ0NBQXNpQUEwQUN5QURSUTBDQzBHY3FzQUFLQUlBSWdBZ0JrOUJBQ0FFSUFBZ0JtdFBHdzBCSUFNb0FoZ2hCd0pBQWtBZ0F5QURLQUlNSWdGR0JFQWdBMEVVUVJBZ0EwRVVhaUlDS0FJQUlnRWJhaWdDQUNJQURRRkJBQ0VCREFJTElBTW9BZ2dpQUNBQk5nSU1JQUVnQURZQ0NBd0JDeUFDSUFOQkVHb2dBUnNoQWdOQUlBSWhCU0FBSWdGQkZHb2lBaWdDQUNJQVJRUkFJQUZCRUdvaEFpQUJLQUlRSVFBTElBQU5BQXNnQlVFQU5nSUFDd0pBSUFkRkRRQUNRQ0FESUFNb0FoeEJBblJCbktuQUFHb2lBQ2dDQUVjRVFDQUhRUkJCRkNBSEtBSVFJQU5HRzJvZ0FUWUNBQ0FCUlEwQ0RBRUxJQUFnQVRZQ0FDQUJEUUJCa0tmQUFFR1FwOEFBS0FJQVFYNGdBeWdDSEhkeE5nSUFEQUVMSUFFZ0J6WUNHQ0FES0FJUUlnQUVRQ0FCSUFBMkFoQWdBQ0FCTmdJWUN5QURRUlJxS0FJQUlnQkZEUUFnQVVFVWFpQUFOZ0lBSUFBZ0FUWUNHQXNDUUNBRVFSQlBCRUFnQXlBR1FRTnlOZ0lFSUFNZ0Jtb2lCU0FFUVFGeU5nSUVJQVFnQldvZ0JEWUNBQ0FFUVlBQ1R3UkFJQVZDQURjQ0VDQUZBbjlCQUNBRVFRaDJJZ0JGRFFBYVFSOGdCRUgvLy84SFN3MEFHaUFFUVFZZ0FHY2lBR3RCSDNGMlFRRnhJQUJCQVhSclFUNXFDeUlBTmdJY0lBQkJBblJCbktuQUFHb2hBZ0pBQWtBQ1FBSkFRWkNud0FBb0FnQWlBVUVCSUFCQkgzRjBJZ1p4QkVBZ0FpZ0NBQ0lDUVFScUtBSUFRWGh4SUFSSERRRWdBaUVBREFJTFFaQ253QUFnQVNBR2NqWUNBQ0FDSUFVMkFnQU1Bd3NnQkVFQVFSa2dBRUVCZG10QkgzRWdBRUVmUmh0MElRRURRQ0FDSUFGQkhYWkJCSEZxUVJCcUlnWW9BZ0FpQUVVTkFpQUJRUUYwSVFFZ0FDRUNJQUJCQkdvb0FnQkJlSEVnQkVjTkFBc0xJQUFvQWdnaUFpQUZOZ0lNSUFBZ0JUWUNDQ0FGUVFBMkFoZ2dCU0FBTmdJTUlBVWdBallDQ0F3RUN5QUdJQVUyQWdBTElBVWdBallDR0NBRklBVTJBZ3dnQlNBRk5nSUlEQUlMSUFSQkEzWWlBa0VEZEVHVXA4QUFhaUVBQW45QmpLZkFBQ2dDQUNJQlFRRWdBblFpQW5FRVFDQUFLQUlJREFFTFFZeW53QUFnQVNBQ2NqWUNBQ0FBQ3lFQ0lBQWdCVFlDQ0NBQ0lBVTJBZ3dnQlNBQU5nSU1JQVVnQWpZQ0NBd0JDeUFESUFRZ0Jtb2lBRUVEY2pZQ0JDQUFJQU5xSWdBZ0FDZ0NCRUVCY2pZQ0JBc2dBMEVJYWc4TEFrQUNRRUdNcDhBQUtBSUFJZ0ZCRUNBQVFRdHFRWGh4SUFCQkMwa2JJZ1pCQTNZaUFIWWlBa0VEY1VVRVFDQUdRWnlxd0FBb0FnQk5EUU1nQWcwQlFaQ253QUFvQWdBaUFFVU5BeUFBUVFBZ0FHdHhhRUVDZEVHY3FjQUFhaWdDQUNJQlFRUnFLQUlBUVhoeElBWnJJUVFnQVNFQ0EwQWdBU2dDRUNJQVJRUkFJQUZCRkdvb0FnQWlBRVVOQkFzZ0FFRUVhaWdDQUVGNGNTQUdheUlCSUFRZ0FTQUVTU0lCR3lFRUlBQWdBaUFCR3lFQ0lBQWhBUXdBQ3dBTEFrQWdBa0YvYzBFQmNTQUFhaUlBUVFOMFFZeW53QUJxSWdOQkVHb29BZ0FpQWtFSWFpSUZLQUlBSWdRZ0EwRUlhaUlEUndSQUlBUWdBellDRENBRElBUTJBZ2dNQVF0QmpLZkFBQ0FCUVg0Z0FIZHhOZ0lBQ3lBQ0lBQkJBM1FpQUVFRGNqWUNCQ0FBSUFKcUlnQWdBQ2dDQkVFQmNqWUNCQ0FGRHdzQ1FFRUNJQUIwSWdSQkFDQUVhM0lnQWlBQWRIRWlBRUVBSUFCcmNXZ2lBa0VEZEVHTXA4QUFhaUlEUVJCcUtBSUFJZ0JCQ0dvaUJTZ0NBQ0lFSUFOQkNHb2lBMGNFUUNBRUlBTTJBZ3dnQXlBRU5nSUlEQUVMUVl5bndBQWdBVUYrSUFKM2NUWUNBQXNnQUNBR1FRTnlOZ0lFSUFBZ0Jtb2lBeUFDUVFOMElnSWdCbXNpQVVFQmNqWUNCQ0FBSUFKcUlBRTJBZ0JCbktyQUFDZ0NBQ0lBQkVBZ0FFRURkaUlFUVFOMFFaU253QUJxSVFCQnBLckFBQ2dDQUNFQ0FuOUJqS2ZBQUNnQ0FDSUdRUUVnQkVFZmNYUWlCSEVFUUNBQUtBSUlEQUVMUVl5bndBQWdCQ0FHY2pZQ0FDQUFDeUVFSUFBZ0FqWUNDQ0FFSUFJMkFnd2dBaUFBTmdJTUlBSWdCRFlDQ0F0QnBLckFBQ0FETmdJQVFaeXF3QUFnQVRZQ0FDQUZEd3NnQWlnQ0dDRUhBa0FDUUNBQ0lBSW9BZ3dpQVVZRVFDQUNRUlJCRUNBQ1FSUnFJZ0VvQWdBaUF4dHFLQUlBSWdBTkFVRUFJUUVNQWdzZ0FpZ0NDQ0lBSUFFMkFnd2dBU0FBTmdJSURBRUxJQUVnQWtFUWFpQURHeUVEQTBBZ0F5RUZJQUFpQVVFVWFpSURLQUlBSWdCRkJFQWdBVUVRYWlFRElBRW9BaEFoQUFzZ0FBMEFDeUFGUVFBMkFnQUxJQWRGRFFNZ0FpQUNLQUljUVFKMFFaeXB3QUJxSWdBb0FnQkhCRUFnQjBFUVFSUWdCeWdDRUNBQ1JodHFJQUUyQWdBZ0FVVU5CQXdEQ3lBQUlBRTJBZ0FnQVEwQ1FaQ253QUJCa0tmQUFDZ0NBRUYrSUFJb0FoeDNjVFlDQUF3REN3SkFBa0FDUUFKQUFrQkJuS3JBQUNnQ0FDSUFJQVpKQkVCQm9LckFBQ2dDQUNJQUlBWkxEUU5CQUNFQ0lBWkJyNEFFYWlJQVFSQjJRQUFpQVVGL1JnMEdJQUZCRUhRaUJVVU5Ca0dzcXNBQUlBQkJnSUI4Y1NJRVFheXF3QUFvQWdCcUlnQTJBZ0JCc0tyQUFFR3dxc0FBS0FJQUlnRWdBQ0FCSUFCTEd6WUNBRUdvcXNBQUtBSUFJZ05GRFFGQnRLckFBQ0VBQTBBZ0FDZ0NBQ0lCSUFBb0FnUWlCMm9nQlVZTkF5QUFLQUlJSWdBTkFBc01CQXRCcEtyQUFDZ0NBQ0VDQW44Z0FDQUdheUlCUVE5TkJFQkJwS3JBQUVFQU5nSUFRWnlxd0FCQkFEWUNBQ0FDSUFCQkEzSTJBZ1FnQUNBQ2FpSUJRUVJxSVFBZ0FTZ0NCRUVCY2d3QkMwR2Nxc0FBSUFFMkFnQkJwS3JBQUNBQ0lBWnFJZ1EyQWdBZ0JDQUJRUUZ5TmdJRUlBQWdBbW9nQVRZQ0FDQUNRUVJxSVFBZ0JrRURjZ3NoQVNBQUlBRTJBZ0FnQWtFSWFnOExRY2lxd0FBb0FnQWlBRUVBSUFBZ0JVMGJSUVJBUWNpcXdBQWdCVFlDQUF0QnpLckFBRUgvSHpZQ0FFRzBxc0FBSUFVMkFnQkJ3S3JBQUVFQU5nSUFRYmlxd0FBZ0JEWUNBRUdncDhBQVFaU253QUEyQWdCQnFLZkFBRUdjcDhBQU5nSUFRWnlud0FCQmxLZkFBRFlDQUVHd3A4QUFRYVNud0FBMkFnQkJwS2ZBQUVHY3A4QUFOZ0lBUWJpbndBQkJyS2ZBQURZQ0FFR3NwOEFBUWFTbndBQTJBZ0JCd0tmQUFFRzBwOEFBTmdJQVFiU253QUJCcktmQUFEWUNBRUhJcDhBQVFieW53QUEyQWdCQnZLZkFBRUcwcDhBQU5nSUFRZENud0FCQnhLZkFBRFlDQUVIRXA4QUFRYnlud0FBMkFnQkIyS2ZBQUVITXA4QUFOZ0lBUWN5bndBQkJ4S2ZBQURZQ0FFSGdwOEFBUWRTbndBQTJBZ0JCMUtmQUFFSE1wOEFBTmdJQVFkeW53QUJCMUtmQUFEWUNBRUhvcDhBQVFkeW53QUEyQWdCQjVLZkFBRUhjcDhBQU5nSUFRZkNud0FCQjVLZkFBRFlDQUVIc3A4QUFRZVNud0FBMkFnQkIrS2ZBQUVIc3A4QUFOZ0lBUWZTbndBQkI3S2ZBQURZQ0FFR0FxTUFBUWZTbndBQTJBZ0JCL0tmQUFFSDBwOEFBTmdJQVFZaW93QUJCL0tmQUFEWUNBRUdFcU1BQVFmeW53QUEyQWdCQmtLakFBRUdFcU1BQU5nSUFRWXlvd0FCQmhLakFBRFlDQUVHWXFNQUFRWXlvd0FBMkFnQkJsS2pBQUVHTXFNQUFOZ0lBUWFDb3dBQkJsS2pBQURZQ0FFR29xTUFBUVp5b3dBQTJBZ0JCbktqQUFFR1VxTUFBTmdJQVFiQ293QUJCcEtqQUFEWUNBRUdrcU1BQVFaeW93QUEyQWdCQnVLakFBRUdzcU1BQU5nSUFRYXlvd0FCQnBLakFBRFlDQUVIQXFNQUFRYlNvd0FBMkFnQkJ0S2pBQUVHc3FNQUFOZ0lBUWNpb3dBQkJ2S2pBQURZQ0FFRzhxTUFBUWJTb3dBQTJBZ0JCMEtqQUFFSEVxTUFBTmdJQVFjU293QUJCdktqQUFEWUNBRUhZcU1BQVFjeW93QUEyQWdCQnpLakFBRUhFcU1BQU5nSUFRZUNvd0FCQjFLakFBRFlDQUVIVXFNQUFRY3lvd0FBMkFnQkI2S2pBQUVIY3FNQUFOZ0lBUWR5b3dBQkIxS2pBQURZQ0FFSHdxTUFBUWVTb3dBQTJBZ0JCNUtqQUFFSGNxTUFBTmdJQVFmaW93QUJCN0tqQUFEWUNBRUhzcU1BQVFlU293QUEyQWdCQmdLbkFBRUgwcU1BQU5nSUFRZlNvd0FCQjdLakFBRFlDQUVHSXFjQUFRZnlvd0FBMkFnQkIvS2pBQUVIMHFNQUFOZ0lBUVpDcHdBQkJoS25BQURZQ0FFR0VxY0FBUWZ5b3dBQTJBZ0JCbUtuQUFFR01xY0FBTmdJQVFZeXB3QUJCaEtuQUFEWUNBRUdvcXNBQUlBVTJBZ0JCbEtuQUFFR01xY0FBTmdJQVFhQ3F3QUFnQkVGWWFpSUFOZ0lBSUFVZ0FFRUJjallDQkNBQUlBVnFRU2cyQWdSQnhLckFBRUdBZ0lBQk5nSUFEQU1MSUFCQkRHb29BZ0FnQlNBRFRYSWdBU0FEUzNJTkFTQUFJQVFnQjJvMkFnUkJxS3JBQUVHb3FzQUFLQUlBSWdCQkQycEJlSEVpQVVGNGFqWUNBRUdncXNBQVFhQ3F3QUFvQWdBZ0JHb2lCQ0FBSUFGcmFrRUlhaUlETmdJQUlBRkJmR29nQTBFQmNqWUNBQ0FBSUFScVFTZzJBZ1JCeEtyQUFFR0FnSUFCTmdJQURBSUxRYUNxd0FBZ0FDQUdheUlDTmdJQVFhaXF3QUJCcUtyQUFDZ0NBQ0lBSUFacUlnRTJBZ0FnQVNBQ1FRRnlOZ0lFSUFBZ0JrRURjallDQkNBQVFRaHFJUUlNQWd0QnlLckFBRUhJcXNBQUtBSUFJZ0FnQlNBQUlBVkpHellDQUNBRUlBVnFJUUZCdEtyQUFDRUFBa0FEUUNBQklBQW9BZ0JIQkVBZ0FDZ0NDQ0lBRFFFTUFnc0xJQUJCREdvb0FnQU5BQ0FBSUFVMkFnQWdBQ0FBS0FJRUlBUnFOZ0lFSUFVZ0JrRURjallDQkNBRklBWnFJUUFnQVNBRmF5QUdheUVHQWtBQ1FDQUJRYWlxd0FBb0FnQkhCRUJCcEtyQUFDZ0NBQ0FCUmcwQklBRkJCR29vQWdBaUFrRURjVUVCUmdSQUlBRWdBa0Y0Y1NJQ0VCRWdBaUFHYWlFR0lBRWdBbW9oQVFzZ0FTQUJLQUlFUVg1eE5nSUVJQUFnQmtFQmNqWUNCQ0FBSUFacUlBWTJBZ0FnQmtHQUFrOEVRQ0FBUWdBM0FoQWdBQUovUVFBZ0JrRUlkaUlDUlEwQUdrRWZJQVpCLy8vL0Iwc05BQm9nQmtFR0lBSm5JZ0pyUVI5eGRrRUJjU0FDUVFGMGEwRSthZ3NpQVRZQ0hDQUJRUUowUVp5cHdBQnFJUUlDUUFKQUFrQUNRRUdRcDhBQUtBSUFJZ1JCQVNBQlFSOXhkQ0lEY1FSQUlBSW9BZ0FpQWtFRWFpZ0NBRUY0Y1NBR1J3MEJJQUloQkF3Q0MwR1FwOEFBSUFNZ0JISTJBZ0FnQWlBQU5nSUFEQU1MSUFaQkFFRVpJQUZCQVhaclFSOXhJQUZCSDBZYmRDRUJBMEFnQWlBQlFSMTJRUVJ4YWtFUWFpSURLQUlBSWdSRkRRSWdBVUVCZENFQklBUWlBa0VFYWlnQ0FFRjRjU0FHUncwQUN3c2dCQ2dDQ0NJQ0lBQTJBZ3dnQkNBQU5nSUlJQUJCQURZQ0dDQUFJQVEyQWd3Z0FDQUNOZ0lJREFVTElBTWdBRFlDQUFzZ0FDQUNOZ0lZSUFBZ0FEWUNEQ0FBSUFBMkFnZ01Bd3NnQmtFRGRpSUJRUU4wUVpTbndBQnFJUUlDZjBHTXA4QUFLQUlBSWdSQkFTQUJkQ0lCY1FSQUlBSW9BZ2dNQVF0QmpLZkFBQ0FCSUFSeU5nSUFJQUlMSVFFZ0FpQUFOZ0lJSUFFZ0FEWUNEQ0FBSUFJMkFnd2dBQ0FCTmdJSURBSUxRYWlxd0FBZ0FEWUNBRUdncXNBQVFhQ3F3QUFvQWdBZ0Jtb2lBallDQUNBQUlBSkJBWEkyQWdRTUFRdEJwS3JBQUNBQU5nSUFRWnlxd0FCQm5LckFBQ2dDQUNBR2FpSUNOZ0lBSUFBZ0FrRUJjallDQkNBQUlBSnFJQUkyQWdBTElBVkJDR29QQzBHMHFzQUFJUUFEUUFKQUlBQW9BZ0FpQVNBRFRRUkFJQUVnQUNnQ0JHb2lCeUFEU3cwQkN5QUFLQUlJSVFBTUFRc0xRYWlxd0FBZ0JUWUNBRUdncXNBQUlBUkJXR29pQURZQ0FDQUZJQUJCQVhJMkFnUWdBQ0FGYWtFb05nSUVRY1Nxd0FCQmdJQ0FBVFlDQUNBRElBZEJZR3BCZUhGQmVHb2lBQ0FBSUFOQkVHcEpHeUlCUVJzMkFnUkJ0S3JBQUNrQ0FDRUpJQUZCRUdwQnZLckFBQ2tDQURjQ0FDQUJJQWszQWdoQndLckFBRUVBTmdJQVFiaXF3QUFnQkRZQ0FFRzBxc0FBSUFVMkFnQkJ2S3JBQUNBQlFRaHFOZ0lBSUFGQkhHb2hBQU5BSUFCQkJ6WUNBQ0FISUFCQkJHb2lBRXNOQUFzZ0FTQURSZzBBSUFFZ0FTZ0NCRUYrY1RZQ0JDQURJQUVnQTJzaUJVRUJjallDQkNBQklBVTJBZ0FnQlVHQUFrOEVRQ0FEUWdBM0FoQWdBMEVjYWdKL1FRQWdCVUVJZGlJQVJRMEFHa0VmSUFWQi8vLy9CMHNOQUJvZ0JVRUdJQUJuSWdCclFSOXhka0VCY1NBQVFRRjBhMEUrYWdzaUFEWUNBQ0FBUVFKMFFaeXB3QUJxSVFFQ1FBSkFBa0FDUUVHUXA4QUFLQUlBSWdSQkFTQUFRUjl4ZENJSGNRUkFJQUVvQWdBaUJFRUVhaWdDQUVGNGNTQUZSdzBCSUFRaEFBd0NDMEdRcDhBQUlBUWdCM0kyQWdBZ0FTQUROZ0lBSUFOQkdHb2dBVFlDQUF3REN5QUZRUUJCR1NBQVFRRjJhMEVmY1NBQVFSOUdHM1FoQVFOQUlBUWdBVUVkZGtFRWNXcEJFR29pQnlnQ0FDSUFSUTBDSUFGQkFYUWhBU0FBSVFRZ0FFRUVhaWdDQUVGNGNTQUZSdzBBQ3dzZ0FDZ0NDQ0lCSUFNMkFnd2dBQ0FETmdJSUlBTkJHR3BCQURZQ0FDQURJQUEyQWd3Z0F5QUJOZ0lJREFNTElBY2dBellDQUNBRFFSaHFJQVEyQWdBTElBTWdBellDRENBRElBTTJBZ2dNQVFzZ0JVRURkaUlCUVFOMFFaU253QUJxSVFBQ2YwR01wOEFBS0FJQUlnUkJBU0FCZENJQmNRUkFJQUFvQWdnTUFRdEJqS2ZBQUNBQklBUnlOZ0lBSUFBTElRRWdBQ0FETmdJSUlBRWdBellDRENBRElBQTJBZ3dnQXlBQk5nSUlDMEdncXNBQUtBSUFJZ0FnQmswTkFFR2dxc0FBSUFBZ0Jtc2lBallDQUVHb3FzQUFRYWlxd0FBb0FnQWlBQ0FHYWlJQk5nSUFJQUVnQWtFQmNqWUNCQ0FBSUFaQkEzSTJBZ1FnQUVFSWFnOExJQUlQQ3lBQklBYzJBaGdnQWlnQ0VDSUFCRUFnQVNBQU5nSVFJQUFnQVRZQ0dBc2dBa0VVYWlnQ0FDSUFSUTBBSUFGQkZHb2dBRFlDQUNBQUlBRTJBaGdMQWtBZ0JFRVFUd1JBSUFJZ0JrRURjallDQkNBQ0lBWnFJZ01nQkVFQmNqWUNCQ0FESUFScUlBUTJBZ0JCbktyQUFDZ0NBQ0lBQkVBZ0FFRURkaUlGUVFOMFFaU253QUJxSVFCQnBLckFBQ2dDQUNFQkFuOUJqS2ZBQUNnQ0FDSUdRUUVnQlVFZmNYUWlCWEVFUUNBQUtBSUlEQUVMUVl5bndBQWdCU0FHY2pZQ0FDQUFDeUVGSUFBZ0FUWUNDQ0FGSUFFMkFnd2dBU0FBTmdJTUlBRWdCVFlDQ0F0QnBLckFBQ0FETmdJQVFaeXF3QUFnQkRZQ0FBd0JDeUFDSUFRZ0Jtb2lBRUVEY2pZQ0JDQUFJQUpxSWdBZ0FDZ0NCRUVCY2pZQ0JBc2dBa0VJYWd2aEVBSVNmd0orSXdCQmdBRnJJZ1lrQUNBR0lBTTJBaXdnQmlBQ05nSW9Ba0FDZndKQUFrQUNRQUpBSUFFdEFFZEZCRUFnQVNrRE9DRVlJQUZDQURjRE9BSi9JQmhDLy84RGcxQkZCRUFnR0VJd2lLY2hFU0FZUWhDSXB5RU1JQmhDSUlpbkRBRUxJQVpCSUdvZ0FTQUdRU2hxRUNzZ0JpOEJJRVVFUUVFQklRME1CZ3RCQXlFTklBWXZBU0lpRENJQ0lBRXZBVUJQRFFVZ0FpQUJMd0ZDUmcwQ0lBRXZBVVFnREVILy93TnhSZzBESUFGQkdHb29BZ0JGRFFVZ0FVRW9haUFCUVJCcUlnY2dEQkFtR2lBQktBSVlJZ0lnREVILy93TnhJZ3BORFFRZ0J5Z0NBQ0FLUVFKMGFpSUNMUUFDSVJFZ0FpOEJBQXNoRXlBR1FSaHFJQUZCS0dvUVFpQUdLQUlZSVFJQ1FDQUdLQUljSWdjZ0JVMEVRQ0FIRFFGQkFTRVNRUUVoRFNBRklRZEJBUXdIQ3lBRlJRUkFRUUVoRFVFQUlRZEJBUXdIQ3lBRUlBSWdCUkJMR2lBQlFUQnFJZ0lnQWlnQ0FDQUZhallDQUVHSWc4QUFJUVJCQUNFTlFRQWhCMEVCREFZTElBUWdBaUFIRUVzZ0FVRXdhaUlDSUFJb0FnQWdCMm8yQWdBZ0Iyb2hCQ0FGSUFkcklRZEJBQ0VOUVFFTUJRc2dBRUVDT2dBSUlBQkNBRGNDQUF3RkN5QUJJQUV0QUVZaUIwRUJhaUlDT2dBS0lBRkJBU0FIUVE5eGRFRUNhanNCUUNBQlFYOGdBa0VQY1hSQmYzTTdBUWdnQVVFUWFpQUhFQTFCQUNFTVFRQWhEU0FGSVFkQkFBd0RDeUFCUVFFNkFFZEJBaUVOREFFTElBb2dBa0hvaHNBQUVEWUFDMEVBSVF3Z0JTRUhRUUFMSVFJZ0JrRTRha0VBTmdJQUlBWkNBRGNETUNBR1FjZ0Fha0VBTmdJQUlBWkNBRGNEUUNBR1Fmd0Fha0VBTmdJQUlBWkI5QUJxUVFBMkFnQWdCa0hzQUdwQkFEWUNBQ0FHUWVRQWFrRUFOZ0lBSUFaQjNBQnFRUUEyQWdBZ0JrSFlpY0FBTmdKNElBWkIySW5BQURZQ2NDQUdRZGlKd0FBMkFtZ2dCa0hZaWNBQU5nSmdJQVpCMkluQUFEWUNXQ0FHUVFBMkFsUWdCa0hZaWNBQU5nSlFBa0FDZndKQUlBSkZEUUFnQVVFUWFpRVVJQUZCS0dvaEZTQUdRY2dBYWlFWElBWkJQbW9oRmdKQUFrQUNRQUpBQWtBQ1FBSkFBa0FEUUFKQUFrQWdCdzBBSUFaQkVHb2dGUkJDSUFZb0FoUkZEUUJCQUNFSERBRUxJQUVnQmtFb2FoQVlRUUFoQ3lBWElSQkJBQ0VPQWtBQ1FBSkFBa0FDUUFKQUFrQUNRQUpBQTBBZ0FTMEFDeUlDSUFFdEFBb2lDRWtOQVNBQklBSWdDR3M2QUFzZ0JrRXdhaUFMYWlJS0lBRXZBUWdpQWlBQktRTUFJQWl0aVNJWXAzRTdBUUFnQVNBWUlBS3RRbitGUW9DQWZJU0ROd01BSUE0RVFDQU9RWDlxUVFWTERRVWdCeUFMSUJacUx3RUFJZ0pKRFFZZ0VDQUVOZ0lBSUJCQkJHb2dBallDQUNBSElBSnJJUWNnQWlBRWFpRUVDeUFCTHdGQUlnSWdEbXBCLy84RGNTQUJMd0VJSUFFdEFFaHJRZi8vQTNGR0RRSWdDaThCQUNJS0lBRXZBVUpHSUFvZ0FrOXlEUUlnQ2lBQkx3RkVSZzBDSUFFb0FpUWlBaUFLVFEwR0lBY2dBU2dDSENBS1FRRjBhaThCQUNJQ1NRMENJQTVCQVdvaERpQUxJQlpxUVFKcUlBSTdBUUFnRUVFSWFpRVFJQXRCQW1vaUMwRU1SdzBBQzBFR0lRNUJCU0VRSUFZdkFUb2hDQXdIQ3lBT0RRRkJBU0FOSUJJYklRME1DQXNnRGtFQmFpRU9DeUFPUVFkUERRTWdCa0V3YWlBT1FYOXFJaEJCQVhScUx3RUFJUWdnRUEwRUlBd2hDZ3dGQ3lBT1FYOXFRUVpCbUlUQUFCQTJBQXRCNklIQUFFRWpRZmlDd0FBUVNBQUxJQW9nQWtHb2hNQUFFRFlBQ3lBT1FRWkJ1SVRBQUJBM0FBc2dCa0hRQUdvaEFpQUdRVEJxSVFzRFFDQUdRUWhxSUJRZ0ZDQUxMd0VBSWdvZ0FpZ0NBQ0FDUVFScUtBSUFFQ2tnREJBaklBWXRBQW9oRVNBR0x3RUlJUk1nQVNBQkx3RkFRUUZxT3dGQUlBdEJBbW9oQ3lBQ1FRaHFJUUlnQ2lFTUlCQkJmMm9pRUEwQUN5QU9RUU4wSUFacVFVQnJJZ0lvQWdRaENTQUNRUUEyQWdRZ0FpZ0NBQ0VQSUFKQmlJUEFBRFlDQUFzZ0NDSU1JQUV2QVVKR0RRTUNRQ0FCTHdGRUlBaEhCRUFnQ0NBQkx3RkFJZ0pORFFGQkF5RU5RUUFNRFFzZ0FVRUJPZ0JIUVFJaERVRUFEQXdMQW44Z0J3Si9Ba0FDUUNBQ0lBaEhCRUFnQVNnQ0pDSUNJQWhMRFFFZ0NDQUNRZGlFd0FBUU5nQUxJQUVvQWlRaUFpQUtRZi8vQTNFaUNFME5DQ0FISUFFb0Fod2dDRUVCZEdvdkFRQkJBV3BCLy84RGNTSUNUdzBCSUE4RVFDQUJLQUlzSWdJZ0NVa05DaUFCS0FJb0lBOGdDUkJMR2lBQklBazJBakFnQVNBSk5nSTBDMEVBSVE4Z0ZSQXpJUXRCQVF3REN5QUhJQUVvQWh3Z0NFRUJkR292QVFBaUFra0VRRUVBSVE4Z0ZTQVVJQXdRSmlFTFFRRU1Bd3NnRkNBTUlBUWdBaEFwSVFzZ0Fnd0JDeUFQUlFSQUlBRW9BaXdpQ0NBQktBSTBJZ2xKRFFrZ0ZTZ0NBQ0VQQ3lBSlJRMEVJQWtnQWtzTkNTQVBMUUFBSVFzZ0JDQVBJQWtRU3lBQ0lBbEdEUW9nQ1dvZ0N6b0FBQ0FDQ3lJSmF5RUhJQWtnQkNJUGFpRUVRUUFMSUFFb0FoaEIveDlOQkVBZ0JpQVVJQXNnQ2hBaklBRXZBVUFoRUNBR0xRQUNJUkVnQmk4QkFDRVRBa0FnQVMwQUNpSUlRUXRMRFFBZ0VDQUJMd0VJSWdvZ0FTMEFTR3RCLy84RGNVY05BQ0FCSUFoQkFXbzZBQW9nQVNBS1FRRjBRUUZ5T3dFSUN5QUJJQkJCQVdvN0FVQUxRUUFoRWtVTkFRc0xRZ0VoR1NBUFJRMEtJQUVvQWl3aUFpQUpTUTBISUFFb0FpZ2dEeUFKRUVzYUlBRWdDVFlDTUNBQklBazJBalFNQ2d0QkFFRUFRWWlGd0FBUU5nQUxJQUVRTkF3R0N5QUlJQUpCeUlUQUFCQTJBQXNnQ1NBQ1FlaUV3QUFRTndBTElBa2dDRUg0aE1BQUVEY0FDeUFKSUFKQm1JWEFBQkEzQUF0QkFFRUFRYWlGd0FBUU5nQUxJQWtnQWtHNGhjQUFFRGNBQzBFQUN5RU1RUUFoRTBFQUlSRUxJQUFnQlNBSGF6WUNCQ0FBSUFNZ0JpZ0NMQ0lDYXpZQ0FDQUFRUUFnRFNBRElBSkxHeUFOSUExQkFVWWJPZ0FJSUFFZ0RLMUMvLzhEZzBJUWhpQVpoQ0FUclVMLy93T0RRaUNHaENBUnJVTC9BWU5DTUlhRU53TTRDeUFHUVlBQmFpUUFDOVlRQWhGL0FuNGpBRUdBQVdzaUJpUUFJQVlnQXpZQ0xDQUdJQUkyQWlnQ1FBSi9Ba0FDUUFKQUFrQWdBUzBBUjBVRVFDQUJLUU00SVJjZ0FVSUFOd000QW44Z0YwTC8vd09EVUVVRVFDQVhRakNJcHlFUklCZENFSWluSVF3Z0YwSWdpS2NNQVFzZ0JrRWdhaUFCSUFaQktHb1FMaUFHTHdFZ1JRUkFRUUVoRFF3R0MwRURJUTBnQmk4QklpSU1JZ0lnQVM4QlFFOE5CU0FDSUFFdkFVSkdEUUlnQVM4QlJDQU1RZi8vQTNGR0RRTWdBVUVZYWlnQ0FFVU5CU0FCUVNocUlBRkJFR29pQnlBTUVDWWFJQUVvQWhnaUFpQU1RZi8vQTNFaUNVME5CQ0FIS0FJQUlBbEJBblJxSWdJdEFBSWhFU0FDTHdFQUN5RVNJQVpCR0dvZ0FVRW9haEJDSUFZb0FoZ2hBZ0pBSUFZb0Fod2lCeUFGVFFSQUlBY05BVUVCSVFoQkFTRU5JQVVoQjBFQkRBY0xJQVZGQkVCQkFTRU5RUUFoQjBFQkRBY0xJQVFnQWlBRkVFc2FJQUZCTUdvaUFpQUNLQUlBSUFWcU5nSUFRWWlEd0FBaEJFRUFJUTFCQUNFSFFRRU1CZ3NnQkNBQ0lBY1FTeUFCUVRCcUlnSWdBaWdDQUNBSGFqWUNBQ0FIYWlFRUlBVWdCMnNoQjBFQUlRMUJBUXdGQ3lBQVFRSTZBQWdnQUVJQU53SUFEQVVMSUFFZ0FTMEFSaUlIUVFGcUlnSTZBQW9nQVVFQklBZEJEM0YwUVFKcU93RkFJQUZCZnlBQ1FROXhkRUYvY3pzQkNDQUJRUkJxSUFjUURVRUFJUXhCQUNFTklBVWhCMEVBREFNTElBRkJBVG9BUjBFQ0lRME1BUXNnQ1NBQ1FlaUd3QUFRTmdBTFFRQWhEQ0FGSVFkQkFBc2hBaUFHUVRocVFRQTJBZ0FnQmtJQU53TXdJQVpCeUFCcVFRQTJBZ0FnQmtJQU53TkFJQVpCL0FCcVFRQTJBZ0FnQmtIMEFHcEJBRFlDQUNBR1Fld0Fha0VBTmdJQUlBWkI1QUJxUVFBMkFnQWdCa0hjQUdwQkFEWUNBQ0FHUWRpSndBQTJBbmdnQmtIWWljQUFOZ0p3SUFaQjJJbkFBRFlDYUNBR1FkaUp3QUEyQW1BZ0JrSFlpY0FBTmdKWUlBWkJBRFlDVkNBR1FkaUp3QUEyQWxBQ1FBSi9Ba0FnQWtVTkFDQUJRUkJxSVJNZ0FVRW9haUVVSUFaQnlBQnFJUllnQmtFK2FpRVZBa0FDUUFKQUFrQUNRQUpBQWtBQ1FBTkFBa0FDUUNBSERRQWdCa0VRYWlBVUVFSWdCaWdDRkVVTkFFRUFJUWNNQVFzZ0FTQUdRU2hxRUNCQkFDRUxJQlloRUVFQUlRNENRQUpBQWtBQ1FBSkFBa0FDUUFKQUFrQURRQ0FCTFFBTElnSWdBUzBBQ2lJSlNRMEJJQUVnQWlBSmF6b0FDeUFCSUFFcEF3QWlGeUFKclVJL2c0ZzNBd0FnQmtFd2FpQUxhaUlKSUFFdkFRZ2dGNmR4T3dFQUlBNEVRQ0FPUVg5cVFRVkxEUVVnQnlBTElCVnFMd0VBSWdKSkRRWWdFQ0FFTmdJQUlCQkJCR29nQWpZQ0FDQUhJQUpySVFjZ0FpQUVhaUVFQ3lBQkx3RkFJZ0lnRG1wQi8vOERjU0FCTHdFSUlBRXRBRWhyUWYvL0EzRkdEUUlnQ1M4QkFDSUpJQUV2QVVKR0lBa2dBazl5RFFJZ0NTQUJMd0ZFUmcwQ0lBRW9BaVFpQWlBSlRRMEdJQWNnQVNnQ0hDQUpRUUYwYWk4QkFDSUNTUTBDSUE1QkFXb2hEaUFMSUJWcVFRSnFJQUk3QVFBZ0VFRUlhaUVRSUF0QkFtb2lDMEVNUncwQUMwRUdJUTVCQlNFUUlBWXZBVG9oQ0F3SEN5QU9EUUZCQVNBTklBZ2JJUTBNQ0FzZ0RrRUJhaUVPQ3lBT1FRZFBEUU1nQmtFd2FpQU9RWDlxSWhCQkFYUnFMd0VBSVFnZ0VBMEVJQXdoQ1F3RkN5QU9RWDlxUVFaQm1JVEFBQkEyQUF0QjZJSEFBRUVqUWZpQ3dBQVFTQUFMSUFrZ0FrR29oTUFBRURZQUN5QU9RUVpCdUlUQUFCQTNBQXNnQmtIUUFHb2hBaUFHUVRCcUlRc0RRQ0FHUVFocUlCTWdFeUFMTHdFQUlna2dBaWdDQUNBQ1FRUnFLQUlBRUNrZ0RCQWpJQVl0QUFvaEVTQUdMd0VJSVJJZ0FTQUJMd0ZBUVFGcU93RkFJQXRCQW1vaEN5QUNRUWhxSVFJZ0NTRU1JQkJCZjJvaUVBMEFDeUFPUVFOMElBWnFRVUJySWdJb0FnUWhDaUFDUVFBMkFnUWdBaWdDQUNFUElBSkJpSVBBQURZQ0FBc2dDQ0lNSUFFdkFVSkdEUU1DUUNBQkx3RkVJQWhIQkVBZ0NDQUJMd0ZBSWdKTkRRRkJBeUVOUVFBTURRc2dBVUVCT2dCSFFRSWhEVUVBREF3TEFuOGdCd0ovQWtBQ1FDQUNJQWhIQkVBZ0FTZ0NKQ0lDSUFoTERRRWdDQ0FDUWRpRXdBQVFOZ0FMSUFFb0FpUWlBaUFKUWYvL0EzRWlDRTBOQ0NBSElBRW9BaHdnQ0VFQmRHb3ZBUUJCQVdwQi8vOERjU0lDVHcwQklBOEVRQ0FCS0FJc0lnSWdDa2tOQ2lBQktBSW9JQThnQ2hCTEdpQUJJQW8yQWpBZ0FTQUtOZ0kwQzBFQUlROGdGQkF6SVF0QkFRd0RDeUFISUFFb0Fod2dDRUVCZEdvdkFRQWlBa2tFUUVFQUlROGdGQ0FUSUF3UUppRUxRUUVNQXdzZ0V5QU1JQVFnQWhBcElRc2dBZ3dCQ3lBUFJRUkFJQUVvQWl3aUNDQUJLQUkwSWdwSkRRa2dGQ2dDQUNFUEN5QUtSUTBFSUFvZ0Frc05DU0FQTFFBQUlRc2dCQ0FQSUFvUVN5QUNJQXBHRFFvZ0Ntb2dDem9BQUNBQ0N5SUtheUVISUFvZ0JDSVBhaUVFUVFBTElBRW9BaGhCL3g5TkJFQWdCaUFUSUFzZ0NSQWpJQUV2QVVBaEVDQUdMUUFDSVJFZ0JpOEJBQ0VTQWtBZ0FTMEFDaUlJUVF0TERRQWdFQ0FCTHdFSUlna2dBUzBBU0d0Qi8vOERjVWNOQUNBQklBaEJBV282QUFvZ0FTQUpRUUYwUVFGeU93RUlDeUFCSUJCQkFXbzdBVUFMUVFBaENFVU5BUXNMUWdFaEdDQVBSUTBLSUFFb0Fpd2lBaUFLU1EwSElBRW9BaWdnRHlBS0VFc2FJQUVnQ2pZQ01DQUJJQW8yQWpRTUNndEJBRUVBUVlpRndBQVFOZ0FMSUFFUU5Bd0dDeUFJSUFKQnlJVEFBQkEyQUFzZ0NpQUNRZWlFd0FBUU53QUxJQW9nQ0VINGhNQUFFRGNBQ3lBS0lBSkJtSVhBQUJBM0FBdEJBRUVBUWFpRndBQVFOZ0FMSUFvZ0FrRzRoY0FBRURjQUMwRUFDeUVNUVFBaEVrRUFJUkVMSUFBZ0JTQUhhellDQkNBQUlBTWdCaWdDTENJQ2F6WUNBQ0FBUVFBZ0RTQURJQUpMR3lBTklBMUJBVVliT2dBSUlBRWdESzFDLy84RGcwSVFoaUFZaENBU3JVTC8vd09EUWlDR2hDQVJyVUwvQVlOQ01JYUVOd000Q3lBR1FZQUJhaVFBQzZvSUFRWi9Jd0JCOEFCcklnVWtBQ0FGSUFNMkFnd2dCU0FDTmdJSVFRRWhCeUFCSVFZQ1FDQUJRWUVDU1EwQVFRQWdBV3NoQ1VHQUFpRUlBMEFDUUNBSUlBRlBEUUJCQUNFSElBQWdDR29zQUFCQnYzOU1EUUFnQ0NFR0RBSUxJQWhCZjJvaEJrRUFJUWNnQ0VFQlJnMEJJQWdnQ1dvZ0JpRUlRUUZIRFFBTEN5QUZJQVkyQWhRZ0JTQUFOZ0lRSUFWQkFFRUZJQWNiTmdJY0lBVkI4SXZBQUVIQWtzQUFJQWNiTmdJWUFrQUNmd0pBQWtBZ0FpQUJTeUlISUFNZ0FVdHlSUVJBSUFJZ0Ewc05BUUpBSUFKRklBRWdBa1p5UlFSQUlBRWdBazBOQVNBQUlBSnFMQUFBUVVCSURRRUxJQU1oQWdzZ0JTQUNOZ0lnSUFKQkFDQUJJQUpIRzBVRVFDQUNJUWNNQXdzZ0FVRUJhaUVEQTBBQ1FDQUNJQUZQRFFBZ0FDQUNhaXdBQUVGQVNBMEFJQUloQnlBRlFTUnFEQVVMSUFKQmYyb2hCeUFDUVFGR0RRTWdBaUFEUmlBSElRSkZEUUFMREFJTElBVWdBaUFESUFjYk5nSW9JQVZCeEFCcVFRTTJBZ0FnQlVIY0FHcEJIVFlDQUNBRlFkUUFha0VkTmdJQUlBVkNBemNDTkNBRlFlaVN3QUEyQWpBZ0JVRWNOZ0pNSUFVZ0JVSElBR28yQWtBZ0JTQUZRUmhxTmdKWUlBVWdCVUVRYWpZQ1VDQUZJQVZCS0dvMkFrZ01Bd3NnQlVIa0FHcEJIVFlDQUNBRlFkd0Fha0VkTmdJQUlBVkIxQUJxUVJ3MkFnQWdCVUhFQUdwQkJEWUNBQ0FGUWdRM0FqUWdCVUdrazhBQU5nSXdJQVZCSERZQ1RDQUZJQVZCeUFCcU5nSkFJQVVnQlVFWWFqWUNZQ0FGSUFWQkVHbzJBbGdnQlNBRlFReHFOZ0pRSUFVZ0JVRUlhallDU0F3Q0N5QUZRU1JxQ3lFSUFrQWdBU0FIUmcwQVFRRWhBd0pBQWtBQ1FDQUFJQWRxSWdZc0FBQWlBa0YvVEFSQVFRQWhBeUFBSUFGcUlnRWhBQ0FCSUFaQkFXcEhCRUFnQmkwQUFVRS9jU0VESUFaQkFtb2hBQXNnQWtFZmNTRUpJQUpCL3dGeFFkOEJTdzBCSUFNZ0NVRUdkSEloQWd3Q0N5QUZJQUpCL3dGeE5nSWtJQVZCS0dvaEFRd0NDMEVBSVFvZ0FTRUdJQUFnQVVjRVFDQUFMUUFBUVQ5eElRb2dBRUVCYWlFR0N5QUtJQU5CQm5SeUlRQWdBa0gvQVhGQjhBRkpCRUFnQUNBSlFReDBjaUVDREFFTFFRQWhBaUFCSUFaSEJIOGdCaTBBQUVFL2NRVkJBQXNnQ1VFU2RFR0FnUEFBY1NBQVFRWjBjbklpQWtHQWdNUUFSZzBDQ3lBRklBSTJBaVJCQVNFRElBVkJLR29oQVNBQ1FZQUJTUTBBUVFJaEF5QUNRWUFRU1EwQVFRTkJCQ0FDUVlDQUJFa2JJUU1MSUFVZ0J6WUNLQ0FGSUFNZ0IybzJBaXdnQlVIRUFHcEJCVFlDQUNBRlFld0Fha0VkTmdJQUlBVkI1QUJxUVIwMkFnQWdCVUhjQUdwQkhqWUNBQ0FGUWRRQWFrRWZOZ0lBSUFWQ0JUY0NOQ0FGUWZpVHdBQTJBakFnQlNBQk5nSllJQVVnQ0RZQ1VDQUZRUncyQWt3Z0JTQUZRY2dBYWpZQ1FDQUZJQVZCR0dvMkFtZ2dCU0FGUVJCcU5nSmdJQVVnQlVFZ2FqWUNTQXdCQzBIOGk4QUFRU3NnQkJCSUFBc2dCVUV3YWlBRUVGRUFDOUlJQVFWL0lBQkJlR29pQVNBQVFYeHFLQUlBSWdOQmVIRWlBR29oQWdKQUFrQWdBMEVCY1EwQUlBTkJBM0ZGRFFFZ0FTZ0NBQ0lESUFCcUlRQWdBU0FEYXlJQlFhU3F3QUFvQWdCR0JFQWdBaWdDQkVFRGNVRURSdzBCUVp5cXdBQWdBRFlDQUNBQ0lBSW9BZ1JCZm5FMkFnUWdBU0FBUVFGeU5nSUVJQUFnQVdvZ0FEWUNBQThMSUFFZ0F4QVJDd0pBSUFKQkJHb2lCQ2dDQUNJRFFRSnhCRUFnQkNBRFFYNXhOZ0lBSUFFZ0FFRUJjallDQkNBQUlBRnFJQUEyQWdBTUFRc0NRQ0FDUWFpcXdBQW9BZ0JIQkVCQnBLckFBQ2dDQUNBQ1JnMEJJQUlnQTBGNGNTSUNFQkVnQVNBQUlBSnFJZ0JCQVhJMkFnUWdBQ0FCYWlBQU5nSUFJQUZCcEtyQUFDZ0NBRWNOQWtHY3FzQUFJQUEyQWdBUEMwR29xc0FBSUFFMkFnQkJvS3JBQUVHZ3FzQUFLQUlBSUFCcUlnQTJBZ0FnQVNBQVFRRnlOZ0lFUWFTcXdBQW9BZ0FnQVVZRVFFR2Nxc0FBUVFBMkFnQkJwS3JBQUVFQU5nSUFDMEhFcXNBQUtBSUFJZ0lnQUU4TkFrR29xc0FBS0FJQUlnQkZEUUlDUUVHZ3FzQUFLQUlBSWdOQktVa05BRUcwcXNBQUlRRURRQ0FCS0FJQUlnUWdBRTBFUUNBRUlBRW9BZ1JxSUFCTERRSUxJQUVvQWdnaUFRMEFDd3RCektyQUFBSi9RZjhmUWJ5cXdBQW9BZ0FpQUVVTkFCcEJBQ0VCQTBBZ0FVRUJhaUVCSUFBb0FnZ2lBQTBBQ3lBQlFmOGZJQUZCL3g5TEd3czJBZ0FnQXlBQ1RRMENRY1Nxd0FCQmZ6WUNBQThMUWFTcXdBQWdBVFlDQUVHY3FzQUFRWnlxd0FBb0FnQWdBR29pQURZQ0FDQUJJQUJCQVhJMkFnUWdBQ0FCYWlBQU5nSUFEd3RCektyQUFBSi9Ba0FnQUVHQUFrOEVRQ0FCUWdBM0FoQWdBVUVjYWdKL1FRQWdBRUVJZGlJQ1JRMEFHa0VmSUFCQi8vLy9CMHNOQUJvZ0FFRUdJQUpuSWdKclFSOXhka0VCY1NBQ1FRRjBhMEUrYWdzaUF6WUNBQ0FEUVFKMFFaeXB3QUJxSVFJQ1FBSkFBa0FDUUFKQVFaQ253QUFvQWdBaUJFRUJJQU5CSDNGMElnVnhCRUFnQWlnQ0FDSUNRUVJxS0FJQVFYaHhJQUJIRFFFZ0FpRUREQUlMUVpDbndBQWdCQ0FGY2pZQ0FDQUNJQUUyQWdBTUF3c2dBRUVBUVJrZ0EwRUJkbXRCSDNFZ0EwRWZSaHQwSVFRRFFDQUNJQVJCSFhaQkJIRnFRUkJxSWdVb0FnQWlBMFVOQWlBRVFRRjBJUVFnQXlJQ1FRUnFLQUlBUVhoeElBQkhEUUFMQ3lBREtBSUlJZ0FnQVRZQ0RDQURJQUUyQWdnZ0FVRVlha0VBTmdJQUlBRWdBellDRENBQklBQTJBZ2dNQWdzZ0JTQUJOZ0lBQ3lBQlFSaHFJQUkyQWdBZ0FTQUJOZ0lNSUFFZ0FUWUNDQXRCektyQUFFSE1xc0FBS0FJQVFYOXFJZ0EyQWdBZ0FBMERRYnlxd0FBb0FnQWlBQTBCUWY4ZkRBSUxJQUJCQTNZaUFrRURkRUdVcDhBQWFpRUFBbjlCaktmQUFDZ0NBQ0lEUVFFZ0FuUWlBbkVFUUNBQUtBSUlEQUVMUVl5bndBQWdBaUFEY2pZQ0FDQUFDeUVDSUFBZ0FUWUNDQ0FDSUFFMkFnd2dBU0FBTmdJTUlBRWdBallDQ0E4TFFRQWhBUU5BSUFGQkFXb2hBU0FBS0FJSUlnQU5BQXNnQVVIL0h5QUJRZjhmU3hzTE5nSUFDd3VXQndFS2Z5QUFLQUlRSVFNQ1FBSkFBa0FnQUNnQ0NDSU1RUUZIQkVBZ0EwRUJSZzBCREFNTElBTkJBVWNOQVFzZ0FTQUNhaUVEQWtBQ1FDQUFRUlJxS0FJQUlnaEZCRUFnQVNFRURBRUxJQUVoQkFOQUlBTWdCQ0lIUmcwQ0lBZEJBV29oQkFKQUlBY3NBQUFpQmtGL1NnMEFJQVpCL3dGeElRa0NmeUFESUFSR0JFQkJBQ0VLSUFNTUFRc2dCeTBBQVVFL2NTRUtJQWRCQW1vaUJBc2hCaUFKUWVBQlNRMEFBbjhnQXlBR1JnUkFRUUFoQ3lBRERBRUxJQVl0QUFCQlAzRWhDeUFHUVFGcUlnUUxJUVlnQ1VId0FVa05BQ0FESUFaR0JIOUJBQVVnQmtFQmFpRUVJQVl0QUFCQlAzRUxJQWxCRW5SQmdJRHdBSEVnQ2tFTWRISWdDMEVHZEhKeVFZQ0F4QUJHRFFNTElBUWdCMnNnQldvaEJTQUlRWDlxSWdnTkFBc0xJQU1nQkVZTkFBSkFJQVFzQUFBaUIwRi9TZzBBQW44Z0F5QUVRUUZxUmdSQUlBTWhDRUVBREFFTElBUkJBbW9oQ0NBRUxRQUJRVDl4UVFaMEN5QUhRZjhCY1VIZ0FVa05BQUovSUFNZ0NFWUVRQ0FESVFaQkFBd0JDeUFJUVFGcUlRWWdDQzBBQUVFL2NRc2dCMEgvQVhGQjhBRkpEUUFnQjBIL0FYRWhCM0loQkNBRElBWkdCSDlCQUFVZ0JpMEFBRUUvY1FzZ0IwRVNkRUdBZ1BBQWNTQUVRUVowY25KQmdJREVBRVlOQVFzQ1FDQUZSU0FDSUFWR2NrVUVRRUVBSVFNZ0JTQUNUdzBCSUFFZ0JXb3NBQUJCUUVnTkFRc2dBU0VEQ3lBRklBSWdBeHNoQWlBRElBRWdBeHNoQVFzZ0RFRUJSZzBBREFFTEFrQWdBZ1JBUVFBaEJDQUNJUVVnQVNFREEwQWdCQ0FETFFBQVFjQUJjVUdBQVVacUlRUWdBMEVCYWlFRElBVkJmMm9pQlEwQUN5QUNJQVJySUFBb0Fnd2lCazhOQWtFQUlRUWdBaUVGSUFFaEF3TkFJQVFnQXkwQUFFSEFBWEZCZ0FGR2FpRUVJQU5CQVdvaEF5QUZRWDlxSWdVTkFBc01BUXRCQUNFRUlBQW9BZ3dpQmcwQURBRUxRUUFoQXlBRUlBSnJJQVpxSWdRaEJRSkFBa0FDUUVFQUlBQXRBQ0FpQmlBR1FRTkdHMEVEY1VFQmF3NERBUUFCQWdzZ0JFRUJkaUVESUFSQkFXcEJBWFloQlF3QkMwRUFJUVVnQkNFREN5QURRUUZxSVFNQ1FBTkFJQU5CZjJvaUF3UkFJQUFvQWhnZ0FDZ0NCQ0FBS0FJY0tBSVFFUUFBUlEwQkRBSUxDeUFBS0FJRUlRUWdBQ2dDR0NBQklBSWdBQ2dDSENnQ0RCRUJBQTBBSUFWQkFXb2hBeUFBS0FJY0lRRWdBQ2dDR0NFQUEwQWdBMEYvYWlJRFJRUkFRUUFQQ3lBQUlBUWdBU2dDRUJFQUFFVU5BQXNMUVFFUEN5QUFLQUlZSUFFZ0FpQUFRUnhxS0FJQUtBSU1FUUVBQzdzR0FRUi9JQUFnQVdvaEFnSkFBa0FnQUVFRWFpZ0NBQ0lEUVFGeERRQWdBMEVEY1VVTkFTQUFLQUlBSWdNZ0FXb2hBU0FBSUFOcklnQkJwS3JBQUNnQ0FFWUVRQ0FDS0FJRVFRTnhRUU5IRFFGQm5LckFBQ0FCTmdJQUlBSWdBaWdDQkVGK2NUWUNCQ0FBSUFGQkFYSTJBZ1FnQWlBQk5nSUFEd3NnQUNBREVCRUxBa0FnQWtFRWFpZ0NBQ0lEUVFKeEJFQWdBa0VFYWlBRFFYNXhOZ0lBSUFBZ0FVRUJjallDQkNBQUlBRnFJQUUyQWdBTUFRc0NRQ0FDUWFpcXdBQW9BZ0JIQkVCQnBLckFBQ2dDQUNBQ1JnMEJJQUlnQTBGNGNTSUNFQkVnQUNBQklBSnFJZ0ZCQVhJMkFnUWdBQ0FCYWlBQk5nSUFJQUJCcEtyQUFDZ0NBRWNOQWtHY3FzQUFJQUUyQWdBUEMwR29xc0FBSUFBMkFnQkJvS3JBQUVHZ3FzQUFLQUlBSUFGcUlnRTJBZ0FnQUNBQlFRRnlOZ0lFSUFCQnBLckFBQ2dDQUVjTkFrR2Nxc0FBUVFBMkFnQkJwS3JBQUVFQU5nSUFEd3RCcEtyQUFDQUFOZ0lBUVp5cXdBQkJuS3JBQUNnQ0FDQUJhaUlCTmdJQUlBQWdBVUVCY2pZQ0JDQUFJQUZxSUFFMkFnQVBDeUFCUVlBQ1R3UkFJQUJDQURjQ0VDQUFRUnhxQW45QkFDQUJRUWgySWdKRkRRQWFRUjhnQVVILy8vOEhTdzBBR2lBQlFRWWdBbWNpQW10QkgzRjJRUUZ4SUFKQkFYUnJRVDVxQ3lJRE5nSUFJQU5CQW5SQm5LbkFBR29oQWdKQUFrQUNRQUpBUVpDbndBQW9BZ0FpQkVFQklBTkJIM0YwSWdWeEJFQWdBaWdDQUNJQ1FRUnFLQUlBUVhoeElBRkhEUUVnQWlFRERBSUxRWkNud0FBZ0JDQUZjallDQUNBQ0lBQTJBZ0FNQXdzZ0FVRUFRUmtnQTBFQmRtdEJIM0VnQTBFZlJodDBJUVFEUUNBQ0lBUkJIWFpCQkhGcVFSQnFJZ1VvQWdBaUEwVU5BaUFFUVFGMElRUWdBeUlDUVFScUtBSUFRWGh4SUFGSERRQUxDeUFES0FJSUlnRWdBRFlDRENBRElBQTJBZ2dnQUVFWWFrRUFOZ0lBSUFBZ0F6WUNEQ0FBSUFFMkFnZ1BDeUFGSUFBMkFnQUxJQUJCR0dvZ0FqWUNBQ0FBSUFBMkFnd2dBQ0FBTmdJSUR3c2dBVUVEZGlJQ1FRTjBRWlNud0FCcUlRRUNmMEdNcDhBQUtBSUFJZ05CQVNBQ2RDSUNjUVJBSUFFb0FnZ01BUXRCaktmQUFDQUNJQU55TmdJQUlBRUxJUUlnQVNBQU5nSUlJQUlnQURZQ0RDQUFJQUUyQWd3Z0FDQUNOZ0lJQ3d1cUJnRUhmd0pBQWtBQ1FBSkFBa0FDUUFKQUFrQWdBRUdBZ0FSUEJFQWdBRUdBZ0FoSkRRRWdBRUcxMlhOcVFiWGJLMGtnQUVIaWkzUnFRZUlMU1hJZ0FFR2ZxSFJxUVo4WVNTQUFRZDdpZEdwQkRrbHljaUFBUWY3Ly93QnhRWjd3Q2tZZ0FFR2lzblZxUVNKSmNpQUFRY3VSZFdwQkMwbHljZzBDSUFCQjhJTTRTUThMSUFCQmdQNERjVUVJZGlFR1FlaVV3QUFoQVNBQVFmOEJjU0VIQTBBQ1FDQUJRUUpxSVFVZ0FpQUJMUUFCSWdScUlRTWdCaUFCTFFBQUlnRkhCRUFnQVNBR1N3MEJJQU1oQWlBRklnRkJ1cFhBQUVjTkFnd0JDeUFESUFKSkRRUWdBMEdpQWtzTkJTQUNRYnFWd0FCcUlRRUNRQU5BSUFSRkRRRWdCRUYvYWlFRUlBRXRBQUFnQVVFQmFpRUJJQWRIRFFBTFFRQWhCQXdFQ3lBRElRSWdCU0lCUWJxVndBQkhEUUVMQ3lBQVFmLy9BM0VoQTBIY2w4QUFJUUZCQVNFRUEwQWdBVUVCYWlFQUFuOGdBQ0FCTFFBQUlnSkJHSFJCR0hVaUJVRUFUZzBBR2lBQVFaR2F3QUJHRFFZZ0FTMEFBU0FGUWY4QWNVRUlkSEloQWlBQlFRSnFDeUVCSUFNZ0Ftc2lBMEVBU0EwQ0lBUkJBWE1oQkNBQlFaR2F3QUJIRFFBTERBRUxJQUJCZ1A0RGNVRUlkaUVHUVpHYXdBQWhBU0FBUWY4QmNTRUhBMEFDUUNBQlFRSnFJUVVnQWlBQkxRQUJJZ1JxSVFNZ0JpQUJMUUFBSWdGSEJFQWdBU0FHU3cwQklBTWhBaUFGSWdGQjNackFBRWNOQWd3QkN5QURJQUpKRFFZZ0EwR3ZBVXNOQnlBQ1FkMmF3QUJxSVFFQ1FBTkFJQVJGRFFFZ0JFRi9haUVFSUFFdEFBQWdBVUVCYWlFQklBZEhEUUFMUVFBaEJBd0RDeUFESVFJZ0JTSUJRZDJhd0FCSERRRUxDeUFBUWYvL0EzRWhBMEdNbk1BQUlRRkJBU0VFQTBBZ0FVRUJhaUVBQW44Z0FDQUJMUUFBSWdKQkdIUkJHSFVpQlVFQVRnMEFHaUFBUWErZndBQkdEUWdnQVMwQUFTQUZRZjhBY1VFSWRISWhBaUFCUVFKcUN5RUJJQU1nQW1zaUEwRUFTQTBCSUFSQkFYTWhCQ0FCUWErZndBQkhEUUFMQ3lBRVFRRnhEd3NnQWlBRFFjaVV3QUFRT0FBTElBTkJvZ0pCeUpUQUFCQTNBQXRCL0l2QUFFRXJRZGlVd0FBUVNBQUxJQUlnQTBISWxNQUFFRGdBQ3lBRFFhOEJRY2lVd0FBUU53QUxRZnlMd0FCQkswSFlsTUFBRUVnQUM3RUZBUWQvUVN0QmdJREVBQ0FBS0FJQUlnbEJBWEVpQlJzaENpQUVJQVZxSVFnQ1FDQUpRUVJ4UlFSQVFRQWhBUXdCQ3lBQ0JFQWdBaUVHSUFFaEJRTkFJQWNnQlMwQUFFSEFBWEZCZ0FGR2FpRUhJQVZCQVdvaEJTQUdRWDlxSWdZTkFBc0xJQUlnQ0dvZ0Iyc2hDQXNDUUFKQUlBQW9BZ2hCQVVjRVFDQUFJQW9nQVNBQ0VFWU5BUXdDQ3lBQVFReHFLQUlBSWdZZ0NFMEVRQ0FBSUFvZ0FTQUNFRVlOQVF3Q0N3SkFBa0FDUUFKQUlBbEJDSEVFUUNBQUtBSUVJUWtnQUVFd05nSUVJQUF0QUNBaEN5QUFRUUU2QUNBZ0FDQUtJQUVnQWhCR0RRVkJBQ0VGSUFZZ0NHc2lBU0VDUVFFZ0FDMEFJQ0lHSUFaQkEwWWJRUU54UVFGckRnTUNBUUlEQzBFQUlRVWdCaUFJYXlJR0lRZ0NRQUpBQWtCQkFTQUFMUUFnSWdjZ0IwRURSaHRCQTNGQkFXc09Bd0VBQVFJTElBWkJBWFloQlNBR1FRRnFRUUYySVFnTUFRdEJBQ0VJSUFZaEJRc2dCVUVCYWlFRkEwQWdCVUYvYWlJRlJRMEVJQUFvQWhnZ0FDZ0NCQ0FBS0FJY0tBSVFFUUFBUlEwQUMwRUJEd3NnQVVFQmRpRUZJQUZCQVdwQkFYWWhBZ3dCQzBFQUlRSWdBU0VGQ3lBRlFRRnFJUVVDUUFOQUlBVkJmMm9pQlVVTkFTQUFLQUlZSUFBb0FnUWdBQ2dDSENnQ0VCRUFBRVVOQUF0QkFROExJQUFvQWdRaEFTQUFLQUlZSUFNZ0JDQUFLQUljS0FJTUVRRUFEUUVnQWtFQmFpRUhJQUFvQWh3aEFpQUFLQUlZSVFNRFFDQUhRWDlxSWdjRVFDQURJQUVnQWlnQ0VCRUFBRVVOQVF3REN3c2dBQ0FMT2dBZ0lBQWdDVFlDQkVFQUR3c2dBQ2dDQkNFRklBQWdDaUFCSUFJUVJnMEFJQUFvQWhnZ0F5QUVJQUFvQWh3b0Fnd1JBUUFOQUNBSVFRRnFJUWNnQUNnQ0hDRUJJQUFvQWhnaEFBTkFJQWRCZjJvaUIwVUVRRUVBRHdzZ0FDQUZJQUVvQWhBUkFBQkZEUUFMQzBFQkR3c2dBQ2dDR0NBRElBUWdBRUVjYWlnQ0FDZ0NEQkVCQUF2MEJRRUtmeU1BUVRCcklnTWtBQ0FEUVNScUlBRTJBZ0FnQTBFRE9nQW9JQU5DZ0lDQWdJQUVOd01JSUFNZ0FEWUNJQ0FEUVFBMkFoZ2dBMEVBTmdJUUFuOENRQUpBQWtBZ0FpZ0NDQ0lFQkVBZ0FpZ0NBQ0VHSUFJb0FnUWlDQ0FDUVF4cUtBSUFJZ1VnQlNBSVN4c2lCVVVOQVNBQUlBWW9BZ0FnQmlnQ0JDQUJLQUlNRVFFQURRTWdCa0VNYWlFQUlBSW9BaFFoQnlBQ0tBSVFJUW9nQlNFSkEwQWdBeUFFUVJ4cUxRQUFPZ0FvSUFNZ0JFRUVhaWtDQUVJZ2lUY0RDQ0FFUVJocUtBSUFJUUpCQUNFTFFRQWhBUUpBQWtBQ1FDQUVRUlJxS0FJQVFRRnJEZ0lBQWdFTElBSWdCMDhFUUNBQ0lBZEJ0SkRBQUJBMkFBc2dBa0VEZENBS2FpSU1LQUlFUVNCSERRRWdEQ2dDQUNnQ0FDRUNDMEVCSVFFTElBTWdBallDRkNBRElBRTJBaEFnQkVFUWFpZ0NBQ0VDQWtBQ1FBSkFJQVJCREdvb0FnQkJBV3NPQWdBQ0FRc2dBaUFIVHdSQUlBSWdCMEcwa01BQUVEWUFDeUFDUVFOMElBcHFJZ0VvQWdSQklFY05BU0FCS0FJQUtBSUFJUUlMUVFFaEN3c2dBeUFDTmdJY0lBTWdDellDR0NBRUtBSUFJZ0VnQjBrRVFDQUtJQUZCQTNScUlnRW9BZ0FnQTBFSWFpQUJLQUlFRVFBQURRVWdDVUYvYWlJSlJRMEVJQVJCSUdvaEJDQUFRWHhxSVFFZ0FDZ0NBQ0VDSUFCQkNHb2hBQ0FES0FJZ0lBRW9BZ0FnQWlBREtBSWtLQUlNRVFFQVJRMEJEQVVMQ3lBQklBZEJwSkRBQUJBMkFBc2dBaWdDQUNFR0lBSW9BZ1FpQ0NBQ1FSUnFLQUlBSWdVZ0JTQUlTeHNpQlVVTkFDQUNLQUlRSVFRZ0FDQUdLQUlBSUFZb0FnUWdBU2dDREJFQkFBMENJQVpCREdvaEFDQUZJUUlEUUNBRUtBSUFJQU5CQ0dvZ0JFRUVhaWdDQUJFQUFBMERJQUpCZjJvaUFrVU5BaUFFUVFocUlRUWdBRUY4YWlFQklBQW9BZ0FoQ1NBQVFRaHFJUUFnQXlnQ0lDQUJLQUlBSUFrZ0F5Z0NKQ2dDREJFQkFFVU5BQXNNQWd0QkFDRUZDeUFJSUFWTEJFQWdBeWdDSUNBR0lBVkJBM1JxSWdBb0FnQWdBQ2dDQkNBREtBSWtLQUlNRVFFQURRRUxRUUFNQVF0QkFRc2dBMEV3YWlRQUM0MEZBUWQvQWtBZ0FVSE0vM3RMRFFCQkVDQUJRUXRxUVhoeElBRkJDMGtiSVFJZ0FFRjhhaUlGS0FJQUlnWkJlSEVoQXdKQUFrQUNRQUpBQWtBQ1FDQUdRUU54QkVBZ0FFRjRhaUlISUFOcUlRZ2dBeUFDVHcwQlFhaXF3QUFvQWdBZ0NFWU5Ba0drcXNBQUtBSUFJQWhHRFFNZ0NFRUVhaWdDQUNJR1FRSnhEUVlnQmtGNGNTSUdJQU5xSWdNZ0FrOE5CQXdHQ3lBQ1FZQUNTU0FESUFKQkJISkpjaUFESUFKclFZR0FDRTl5RFFVTUJBc2dBeUFDYXlJQlFSQkpEUU1nQlNBQ0lBWkJBWEZ5UVFKeU5nSUFJQUlnQjJvaUJDQUJRUU55TmdJRUlBZ2dDQ2dDQkVFQmNqWUNCQ0FFSUFFUUJnd0RDMEdncXNBQUtBSUFJQU5xSWdNZ0FrME5BeUFGSUFJZ0JrRUJjWEpCQW5JMkFnQWdBaUFIYWlJQklBTWdBbXNpQkVFQmNqWUNCRUdncXNBQUlBUTJBZ0JCcUtyQUFDQUJOZ0lBREFJTFFaeXF3QUFvQWdBZ0Eyb2lBeUFDU1EwQ0FrQWdBeUFDYXlJQlFROU5CRUFnQlNBR1FRRnhJQU55UVFKeU5nSUFJQU1nQjJvaUFTQUJLQUlFUVFGeU5nSUVRUUFoQVF3QkN5QUZJQUlnQmtFQmNYSkJBbkkyQWdBZ0FpQUhhaUlFSUFGQkFYSTJBZ1FnQXlBSGFpSUNJQUUyQWdBZ0FpQUNLQUlFUVg1eE5nSUVDMEdrcXNBQUlBUTJBZ0JCbktyQUFDQUJOZ0lBREFFTElBZ2dCaEFSSUFNZ0Ftc2lBVUVRVHdSQUlBVWdBaUFGS0FJQVFRRnhja0VDY2pZQ0FDQUNJQWRxSWdRZ0FVRURjallDQkNBRElBZHFJZ0lnQWlnQ0JFRUJjallDQkNBRUlBRVFCZ3dCQ3lBRklBTWdCU2dDQUVFQmNYSkJBbkkyQWdBZ0F5QUhhaUlCSUFFb0FnUkJBWEkyQWdRTElBQWhCQXdCQ3lBQkVBQWlBa1VOQUNBQ0lBQWdBVUY4UVhnZ0JTZ0NBQ0lFUVFOeEd5QUVRWGh4YWlJRUlBUWdBVXNiRUVzZ0FCQUVEd3NnQkF2MEJBRUpmeU1BUVRCcklnUWtBQUpBQW44Z0FnUkFJQVJCS0dvaENRTkFBa0FnQUNnQ0NDMEFBRVVOQUNBQUtBSUFRY2lOd0FCQkJDQUFLQUlFS0FJTUVRRUFSUTBBUVFFTUF3c2dCRUVLTmdJb0lBUkNpb0NBZ0JBM0F5QWdCQ0FDTmdJY1FRQWhCU0FFUVFBMkFoZ2dCQ0FDTmdJVUlBUWdBVFlDRUVFQklRY2dBU0VHSUFJaUF5RUlBbjhDUUFKQUEwQWdCU0FHYWlFR0lBUWdCMnBCSjJvdEFBQWhDZ0pBQWtBQ1FDQURRUWROQkVBZ0EwVU5BU0FJSUFWcklRdEJBQ0VEQTBBZ0F5QUdhaTBBQUNBS1JnMEVJQXNnQTBFQmFpSURSdzBBQ3d3QkN5QUVRUWhxSUFvZ0JpQURFQlFnQkNnQ0NFRUJSZzBCSUFRb0Fod2hDQXNnQkNBSU5nSVlEQVFMSUFRb0Fnd2hBeUFFS0FJa0lRY2dCQ2dDR0NFRkN5QUVJQU1nQldwQkFXb2lCVFlDR0FKQUFrQWdCU0FIU1FSQUlBUW9BaFFoQXd3QkN5QUVLQUlVSWdNZ0JVa05BQ0FIUVFWUERRTWdCU0FIYXlJR0lBUW9BaEJxSWdnZ0NVWU5BU0FJSUFrZ0J4QkVSUTBCQ3lBRUtBSWNJZ2dnQlVrZ0F5QUlTWElOQXlBSUlBVnJJUU1nQkNnQ0VDRUdEQUVMQ3lBQUtBSUlRUUU2QUFBZ0JrRUJhZ3dDQ3lBSFFRUkJzSkxBQUJBM0FBc2dBQ2dDQ0VFQU9nQUFJQUlMSVFNZ0FDZ0NCQ0VHSUFBb0FnQWhCUUpBQWtBZ0EwVWdBaUFEUm5KRkJFQWdBaUFEU3dSQUlBRWdBMm9pQnl3QUFFRy9mMG9OQWdzZ0FTQUNRUUFnQTBITWpjQUFFQU1BQ3lBRklBRWdBeUFHS0FJTUVRRUFSUTBCUVFFTUJBdEJBU0FGSUFFZ0F5QUdLQUlNRVFFQURRTWFJQWNzQUFCQnYzOU1EUVFMSUFFZ0Eyb2hBU0FDSUFOcklnSU5BQXNMUVFBTElBUkJNR29rQUE4TElBRWdBaUFESUFKQjNJM0FBQkFEQUF1NkF3RUVmeU1BUVJCcklnSWtBQ0FBS0FJQUlRUUNRQUpBQWtBQ2Z3SkFBa0FnQVVHQUFVOEVRQ0FDUVFBMkFnd2dBVUdBRUVrTkFTQUNRUXhxSVFBZ0FVR0FnQVJKQkVBZ0FpQUJRVDl4UVlBQmNqb0FEaUFDSUFGQkRIWkI0QUZ5T2dBTUlBSWdBVUVHZGtFL2NVR0FBWEk2QUExQkF5RUJEQVlMSUFJZ0FVRS9jVUdBQVhJNkFBOGdBaUFCUVJKMlFmQUJjam9BRENBQ0lBRkJCblpCUDNGQmdBRnlPZ0FPSUFJZ0FVRU1ka0UvY1VHQUFYSTZBQTFCQkNFQkRBVUxJQVFvQWdnaUFDQUVRUVJxS0FJQVJ3UkFJQVFvQWdBaEJRd0VDd0pBSUFCQkFXb2lBeUFBU1EwQUlBQkJBWFFpQlNBRElBVWdBMHNiSWdOQkNDQURRUWhMR3lFRElBQUVRQ0FEUVFCSURRRWdCQ2dDQUNJRlJRMERJQVVnQUVFQklBTVFWUXdFQ3lBRFFRQk9EUUlMRUYwQUN5QUNJQUZCUDNGQmdBRnlPZ0FOSUFJZ0FVRUdka0hBQVhJNkFBd2dBa0VNYWlFQVFRSWhBUXdEQ3lBRFFRRVFXUXNpQlFSQUlBUWdCVFlDQUNBRVFRUnFJQU0yQWdBZ0JDZ0NDQ0VBREFFTElBTkJBUkJqQUFzZ0FDQUZhaUFCT2dBQUlBUWdCQ2dDQ0VFQmFqWUNDQXdCQ3lBRUlBQWdBQ0FCYWhBZkN5QUNRUkJxSkFCQkFBdTBBd0VFZnlBQVFRQTJBZ2dnQUVFVWFrRUFOZ0lBSUFGQkQzRWhCQ0FBUVF4cUlRSkJBQ0VCQTBBZ0FDZ0NCQ0FCUmdSQUlBQWdBUkE4SUFBb0FnZ2hBUXNnQUNnQ0FDQUJRUUowYWlJQklBTTZBQUlnQVVFQU93RUFJQUFnQUNnQ0NFRUJhallDQ0NBQUtBSVVJZ0VnQUNnQ0VFWUVRQ0FDSUFFUU95QUFLQUlVSVFFTElBQW9BZ3dnQVVFQmRHcEJBVHNCQUNBQUlBQW9BaFJCQVdvMkFoUWdBQ2dDQ0NFQklBTkJBV29pQlNFRElBVkIvLzhEY1NBRWRrVU5BQXNnQUNnQ0JDQUJSZ1JBSUFBZ0FSQThJQUFvQWdnaEFRc2dBQ2dDQUNBQlFRSjBhaUlCUVFBNkFBSWdBVUVBT3dFQUlBQWdBQ2dDQ0VFQmFqWUNDQ0FBS0FJVUlnRWdBQ2dDRUVZRVFDQUNJQUVRT3lBQUtBSVVJUUVMSUFBb0Fnd2dBVUVCZEdwQkFEc0JBQ0FBSUFBb0FoUkJBV28yQWhRZ0FDZ0NDQ0lCSUFBb0FnUkdCRUFnQUNBQkVEd2dBQ2dDQ0NFQkN5QUFLQUlBSUFGQkFuUnFJZ0ZCQURvQUFpQUJRUUE3QVFBZ0FDQUFLQUlJUVFGcU5nSUlJQUFvQWhRaUFTQUFLQUlRUmdSQUlBSWdBUkE3SUFBb0FoUWhBUXNnQUNnQ0RDQUJRUUYwYWtFQU93RUFJQUFnQUNnQ0ZFRUJhallDRkF2K0F3SURmd0YrSUFFb0FoaEJKeUFCUVJ4cUtBSUFLQUlRRVFBQVJRUkFRZlFBSVFOQkFpRUNBa0FDUUFKQUFrQUNRQUpBSUFBb0FnQWlBRUYzYWc0ZkJRRURBd0FEQXdNREF3TURBd01EQXdNREF3TURBd01EQXdRREF3TURCQUlMUWZJQUlRTU1CQXRCN2dBaEF3d0RDeUFBUWR3QVJnMEJDd0ovQW40Q1FDQUFFQTlGQkVBZ0FCQUhSUTBCUVFFTUF3c2dBRUVCY21kQkFuWkJCM090UW9DQWdJRFFBSVFNQVFzZ0FFRUJjbWRCQW5aQkIzT3RRb0NBZ0lEUUFJUUxJUVZCQXdzaEFpQUFJUU1NQVFzZ0FDRURDd05BSUFJaEJFSGNBQ0VBUVFFaEFnSkFBbjRDUUFKQUFrQUNRQ0FFUVFGckRnTUJCUUFDQ3dKQUFrQUNRQUpBSUFWQ0lJaW5RZjhCY1VFQmF3NEZBd0lCQUFZRkMwSDFBQ0VBSUFWQy8vLy8vNDlnZzBLQWdJQ0FNSVFNQmd0Qit3QWhBQ0FGUXYvLy8vK1BZSU5DZ0lDQWdDQ0VEQVVMUVRCQjF3QWdBeUFGcHlJRVFRSjBRUnh4ZGtFUGNTSUFRUXBKR3lBQWFpRUFJQVZDZjN4Qy8vLy8vdytESUFWQ2dJQ0FnSENEaENBRURRUWFJQVZDLy8vLy80OWdnMEtBZ0lDQUVJUU1CQXRCL1FBaEFDQUZRdi8vLy8rUFlJTU1Bd3RCQUNFQ0lBTWhBQXdEQ3lBQktBSVlRU2NnQVNnQ0hDZ0NFQkVBQUE4TElBVkMvLy8vLzQ5Z2cwS0FnSUNBd0FDRUN5RUZRUU1oQWdzZ0FTZ0NHQ0FBSUFFb0Fod29BaEFSQUFCRkRRQUxDMEVCQzZBREFRVi9Ba0FDUUVFQVFROGdBRUdrbWdSSkd5SUJJQUZCQ0dvaUFTQUJRUUowUVppZ3dBQnFLQUlBUVF0MElBQkJDM1FpQWtzYklnRWdBVUVFYWlJQklBRkJBblJCbUtEQUFHb29BZ0JCQzNRZ0Frc2JJZ0VnQVVFQ2FpSUJJQUZCQW5SQm1LREFBR29vQWdCQkMzUWdBa3NiSWdFZ0FVRUJhaUlCSUFGQkFuUkJtS0RBQUdvb0FnQkJDM1FnQWtzYklnTkJBblJCbUtEQUFHb29BZ0JCQzNRaUFTQUNSaUFCSUFKSmFpQURhaUlDUVI1TkJFQkJzUVVoQkNBQ1FSNUhCRUFnQWtFQ2RFR2NvTUFBYWlnQ0FFRVZkaUVFQzBFQUlRRWdBa0YvYWlJRElBSk5CRUFnQTBFZlR3MERJQU5CQW5SQm1LREFBR29vQWdCQi8vLy9BSEVoQVFzQ1FDQUVJQUpCQW5SQm1LREFBR29vQWdCQkZYWWlBMEVCYWtZTkFDQUFJQUZySVFJZ0EwR3hCU0FEUWJFRlN4c2hCU0FFUVg5cUlRRkJBQ0VBQTBBZ0F5QUZSZzBESUFBZ0EwR1VvY0FBYWkwQUFHb2lBQ0FDU3cwQklBRWdBMEVCYWlJRFJ3MEFDeUFCSVFNTElBTkJBWEVQQ3lBQ1FSOUIySi9BQUJBMkFBc2dCVUd4QlVIb244QUFFRFlBQ3lBRFFSOUIrSi9BQUJBMkFBdm9BZ0VGZndKQVFjMy9leUFBUVJBZ0FFRVFTeHNpQUdzZ0FVME5BQ0FBUVJBZ0FVRUxha0Y0Y1NBQlFRdEpHeUlFYWtFTWFoQUFJZ0pGRFFBZ0FrRjRhaUVCQWtBZ0FFRi9haUlESUFKeFJRUkFJQUVoQUF3QkN5QUNRWHhxSWdVb0FnQWlCa0Y0Y1NBQ0lBTnFRUUFnQUd0eFFYaHFJZ0lnQUNBQ2FpQUNJQUZyUVJCTEd5SUFJQUZySWdKcklRTWdCa0VEY1FSQUlBQWdBeUFBS0FJRVFRRnhja0VDY2pZQ0JDQUFJQU5xSWdNZ0F5Z0NCRUVCY2pZQ0JDQUZJQUlnQlNnQ0FFRUJjWEpCQW5JMkFnQWdBQ0FBS0FJRVFRRnlOZ0lFSUFFZ0FoQUdEQUVMSUFFb0FnQWhBU0FBSUFNMkFnUWdBQ0FCSUFKcU5nSUFDd0pBSUFCQkJHb29BZ0FpQVVFRGNVVU5BQ0FCUVhoeElnSWdCRUVRYWswTkFDQUFRUVJxSUFRZ0FVRUJjWEpCQW5JMkFnQWdBQ0FFYWlJQklBSWdCR3NpQkVFRGNqWUNCQ0FBSUFKcUlnSWdBaWdDQkVFQmNqWUNCQ0FCSUFRUUJnc2dBRUVJYWlFREN5QURDNFVEQVFSL0FrQUNRQ0FCUVlBQ1R3UkFJQUJCR0dvb0FnQWhCQUpBQWtBZ0FDQUFLQUlNSWdKR0JFQWdBRUVVUVJBZ0FFRVVhaUlDS0FJQUlnTWJhaWdDQUNJQkRRRkJBQ0VDREFJTElBQW9BZ2dpQVNBQ05nSU1JQUlnQVRZQ0NBd0JDeUFDSUFCQkVHb2dBeHNoQXdOQUlBTWhCU0FCSWdKQkZHb2lBeWdDQUNJQlJRUkFJQUpCRUdvaEF5QUNLQUlRSVFFTElBRU5BQXNnQlVFQU5nSUFDeUFFUlEwQ0lBQWdBRUVjYWlnQ0FFRUNkRUdjcWNBQWFpSUJLQUlBUndSQUlBUkJFRUVVSUFRb0FoQWdBRVliYWlBQ05nSUFJQUpGRFFNTUFnc2dBU0FDTmdJQUlBSU5BVUdRcDhBQVFaQ253QUFvQWdCQmZpQUFLQUljZDNFMkFnQVBDeUFBUVF4cUtBSUFJZ0lnQUVFSWFpZ0NBQ0lBUndSQUlBQWdBallDRENBQ0lBQTJBZ2dQQzBHTXA4QUFRWXlud0FBb0FnQkJmaUFCUVFOMmQzRTJBZ0FNQVFzZ0FpQUVOZ0lZSUFBb0FoQWlBUVJBSUFJZ0FUWUNFQ0FCSUFJMkFoZ0xJQUJCRkdvb0FnQWlBRVVOQUNBQ1FSUnFJQUEyQWdBZ0FDQUNOZ0lZQ3d1akF3SUVmd0orSXdCQlFHb2lBaVFBUVFFaEJBSkFJQUF0QUFRTkFDQUFMUUFGSVFVZ0FDZ0NBQ0lETFFBQVFRUnhSUVJBSUFNb0FoaEI4WTNBQUVIempjQUFJQVViUVFKQkF5QUZHeUFEUVJ4cUtBSUFLQUlNRVFFQURRRWdBQ2dDQUNJREtBSVlRYzZtd0FCQkJ5QURRUnhxS0FJQUtBSU1FUUVBRFFFZ0FDZ0NBQ0lES0FJWVFhZU13QUJCQWlBRFFSeHFLQUlBS0FJTUVRRUFEUUVnQVNBQUtBSUFRWlNnd0FBb0FnQVJBQUFoQkF3QkN5QUZSUVJBSUFNb0FoaEI3STNBQUVFRElBTkJIR29vQWdBb0Fnd1JBUUFOQVNBQUtBSUFJUU1MSUFKQkFUb0FGeUFDUVRScVFiQ053QUEyQWdBZ0FpQURLUUlZTndNSUlBSWdBa0VYYWpZQ0VDQURLUUlJSVFZZ0F5a0NFQ0VISUFJZ0F5MEFJRG9BT0NBQ0lBYzNBeWdnQWlBR053TWdJQUlnQXlrQ0FEY0RHQ0FDSUFKQkNHbzJBakFnQWtFSWFrSE9wc0FBUVFjUUN3MEFJQUpCQ0dwQnA0ekFBRUVDRUFzTkFDQUJJQUpCR0dwQmxLREFBQ2dDQUJFQUFBMEFJQUlvQWpCQjc0M0FBRUVDSUFJb0FqUW9BZ3dSQVFBaEJBc2dBRUVCT2dBRklBQWdCRG9BQkNBQ1FVQnJKQUFMNWdJQ0JuOEJmaU1BUVRCcklnUWtBQ0FFUVJCcUVDb2dCQ0FFS0FJVUlnVTJBaHdnQkNBRUtBSVFJZ1kyQWhnZ0JFRUlhaUFEUVFBUVFDQUVLUU1JSVFvZ0FFRUFOZ0lJSUFBZ0NqY0NBQUpBQWtBZ0F3UkFRUUFoQmtFQUlRVURRQ0FBSUFWQmdDQVFPaUFBSUFNZ0FDZ0NCQ0lISUFjZ0Ewc2JFRThnQmlBQ1N3MENJQUFvQWdBaENDQUFLQUlJSWdjZ0JVa05BeUFFUVNCcUlBUkJHR29pQ1NnQ0FDQUJJQVpxSUFJZ0Jtc2dCU0FJYWlBSElBVnJJQWtvQWdRb0Fnd1JDQUFnQkNnQ0pDQUZhaUVISUFRb0FpQWhDQ0FBS0FJSUlnVWdCMDhFUUNBQUtBSUFHaUFBSUFjMkFnZ2dCeUVGQ3lBRUxRQW9RUUpIQkVBZ0JpQUlhaUVHSUFVZ0Ewa05BUXNMSUFRb0FoZ2hCaUFFS0FJY0lRVUxJQVlnQlNnQ0FCRURBQ0FFS0FJY0lnQW9BZ2dhSUFRb0FoZ2hBU0FBS0FJRUJFQWdBUkFFQ3lBRVFUQnFKQUFQQ3lBR0lBSkJ5SUhBQUJBNUFBc2dCU0FIUWRpQndBQVFPUUFMMkFJQkJYOENRQUpBQWtBQ1FBSkFJQUpCQTJwQmZIRWdBbXNpQkVVTkFDQURJQVFnQkNBRFN4c2lCVVVOQUVFQUlRUWdBVUgvQVhFaEJnSkFBMEFnQWlBRWFpMEFBQ0FHUmcwQklBVWdCRUVCYWlJRVJ3MEFDeUFGSUFOQmVHb2lCRTBOQWd3REMwRUJJUWNNQXdzZ0EwRjRhaUVFUVFBaEJRc2dBVUgvQVhGQmdZS0VDR3doQmdOQUlBSWdCV29pQjBFRWFpZ0NBQ0FHY3lJSVFYOXpJQWhCLy8zN2QycHhJQWNvQWdBZ0JuTWlCMEYvY3lBSFFmLzkrM2RxY1hKQmdJR0NoSGh4UlFSQUlBVkJDR29pQlNBRVRRMEJDd3NnQlNBRFN3MENDMEVBSVFZQ2YwRUFJQU1nQlVZTkFCb2dBaUFGYWlFQ0lBTWdCV3NoQmtFQUlRUWdBVUgvQVhFaEFRSkFBMEFnQWlBRWFpMEFBQ0FCUmcwQklBWWdCRUVCYWlJRVJ3MEFDMEVBREFFTElBUWhCa0VCQ3lFSElBVWdCbW9oQkFzZ0FDQUVOZ0lFSUFBZ0J6WUNBQThMSUFVZ0EwSG9rTUFBRURrQUM3NENBZ1YvQVg0akFFRXdheUlFSkFCQkp5RUNBa0FnQUVLUXpnQlVCRUFnQUNFSERBRUxBMEFnQkVFSmFpQUNhaUlEUVh4cUlBQWdBRUtRemdDQUlnZENrTTRBZm4ybklnVkIvLzhEY1VIa0FHNGlCa0VCZEVHbWpzQUFhaThBQURzQUFDQURRWDVxSUFVZ0JrSGtBR3hyUWYvL0EzRkJBWFJCcG83QUFHb3ZBQUE3QUFBZ0FrRjhhaUVDSUFCQy84SFhMMVlnQnlFQURRQUxDeUFIcHlJRFFlTUFTZ1JBSUFKQmZtb2lBaUFFUVFscWFpQUhweUlESUFOQi8vOERjVUhrQUc0aUEwSGtBR3hyUWYvL0EzRkJBWFJCcG83QUFHb3ZBQUE3QUFBTEFrQWdBMEVLVGdSQUlBSkJmbW9pQWlBRVFRbHFhaUFEUVFGMFFhYU93QUJxTHdBQU93QUFEQUVMSUFKQmYyb2lBaUFFUVFscWFpQURRVEJxT2dBQUN5QUJRZkNMd0FCQkFDQUVRUWxxSUFKcVFTY2dBbXNRQ0NBRVFUQnFKQUFMb3dJQ0JIOEJmaU1BUVVCcUlnUWtBQUpBQWtBQ1FDQUNJQU5xSWdNZ0FrOEVRQ0FCS0FJRUlRVWdCRUVZYWtLQmdJQ0FFRGNEQUNBRUtBSWNJZ0pCZjJvaUJpQUVLQUlZYWtFQUlBSnJJZ2R4clNBRlFRRjBJZ1VnQXlBRklBTkxHeUlEUVFnZ0EwRUlTeHV0ZmlJSVFpQ0lweUFDUlhJTkFTQUNhVUVCUmdSQUlBaW5JQVpxSUFkeElRTU1Bd3NnQkVFd2FoQXdBQXNnQkVFSWFpQURRUUFRV2lBQUlBUXBBd2czQWdSQkFTRUNEQUlMUVFBaEFnc2dCRUV3YWlBQkVFMGdCRUVnYWlBRElBSWdCRUV3YWhBbFFRRWhBaUFFUVNocUtBSUFJUU1nQkNnQ0pDRUZJQVFvQWlCQkFVY0VRQ0FCSUFVZ0F4QmFRUUFoQWd3QkN5QUVRUkJxSUFVZ0F4QmFJQUFnQkNrREVEY0NCQXNnQUNBQ05nSUFJQVJCUUdza0FBdXVBZ0VJZnlNQVFUQnJJZ0VrQUVHQUlDRUNJQUZCR0dvUUx5QUJLQUljSVFRZ0FTZ0NHQ0VGSUFGQkVHb1FNaUFCS0FJVUlRWWdBU2dDRUNFSElBRkJDR3BCZ0NCQkFSQkFJQUZCZ0NBMkFpZ2dBU0FCS0FJTUlnZzJBaVFnQVNBQktBSUlJZ00yQWlBZ0NFR0JJRThFUUNBQlFTQnFRWUFnRUVVZ0FTZ0NJQ0VESUFFb0FpZ2hBZ3NnQUVFQU93QkhJQUJCQURzQk9DQUFJQU0yQWlnZ0FDQUZOZ0lRSUFCQkNEb0FSaUFBUVFBNkFBc2dBRUlBTndNQUlBQkJNR3BDQURjREFDQUFRU3hxSUFJMkFnQWdBRUVrYWtFQU5nSUFJQUJCSUdvZ0JqWUNBQ0FBUVJ4cUlBYzJBZ0FnQUVFWWFrRUFOZ0lBSUFCQkZHb2dCRFlDQUNBQVFRazZBQW9nQUVHQUFqc0JRaUFBUVlFQ093RkVJQUJCZ2dJN0FVQWdBRUgvQXpzQkNDQUJRVEJxSkFBTHh3SUNCWDhCZmlNQVFSQnJJZ01rQUNBQUxRQUxJUUlnQTBJQU53TUlJQUVvQWdBaEJRSkFBa0FnQUFKL0lBRW9BZ1FpQkVIQUFDQUNheUlHUWZnQmNVRURkaUlDU1FSQUlBUkJDVThOQWlBRFFRaHFJQVVnQkJCTEdpQUJRUUEyQWdRZ0FVR0lnOEFBTmdJQUlBUkJBM1FNQVFzZ0JrSC9BWEZCeUFCUERRSWdBMEVJYWlBRklBSVFTeG9nQVNBRUlBSnJOZ0lFSUFFZ0FpQUZhallDQUNBR1FmZ0JjUXNnQUMwQUN5SUJham9BQ3lBQUlBQXBBd0FnQXlrRENDSUhRamlHSUFkQ0tJWkNnSUNBZ0lDQXdQOEFnNFFnQjBJWWhrS0FnSUNBZ09BL2d5QUhRZ2lHUW9DQWdJRHdINE9FaENBSFFnaUlRb0NBZ1BnUGd5QUhRaGlJUW9DQS9BZURoQ0FIUWlpSVFvRCtBNE1nQjBJNGlJU0VoQ0FCUVQ5eHJZaUVOd01BSUFOQkVHb2tBQThMSUFSQkNFSFloY0FBRURjQUN5QUNRUWhCeUlYQUFCQTNBQXVxQWdFRGZ5TUFRWUFCYXlJRUpBQUNRQUpBQW44Q1FDQUJLQUlBSWdOQkVIRkZCRUFnQUNnQ0FDRUNJQU5CSUhFTkFTQUNyU0FCRUJVTUFnc2dBQ2dDQUNFQ1FRQWhBQU5BSUFBZ0JHcEIvd0JxSUFKQkQzRWlBMEV3Y2lBRFFkY0FhaUFEUVFwSkd6b0FBQ0FBUVg5cUlRQWdBa0VFZGlJQ0RRQUxJQUJCZ0FGcUlnSkJnUUZQRFFJZ0FVR2tqc0FBUVFJZ0FDQUVha0dBQVdwQkFDQUFheEFJREFFTFFRQWhBQU5BSUFBZ0JHcEIvd0JxSUFKQkQzRWlBMEV3Y2lBRFFUZHFJQU5CQ2trYk9nQUFJQUJCZjJvaEFDQUNRUVIySWdJTkFBc2dBRUdBQVdvaUFrR0JBVThOQWlBQlFhU093QUJCQWlBQUlBUnFRWUFCYWtFQUlBQnJFQWdMSUFSQmdBRnFKQUFQQ3lBQ1FZQUJRWlNPd0FBUU9RQUxJQUpCZ0FGQmxJN0FBQkE1QUF1eEFnRUVmeU1BUVVCcUlnSWtBQ0FCS0FJRUlnTkZCRUFnQVVFRWFpRURJQUVvQWdBaEJDQUNRUUEyQWlBZ0FrSUJOd01ZSUFJZ0FrRVlhallDSkNBQ1FUaHFJQVJCRUdvcEFnQTNBd0FnQWtFd2FpQUVRUWhxS1FJQU53TUFJQUlnQkNrQ0FEY0RLQ0FDUVNScVFkaUp3QUFnQWtFb2FoQUpHaUFDUVJCcUlnUWdBaWdDSURZQ0FDQUNJQUlwQXhnM0F3Z0NRQ0FCS0FJRUlnVkZEUUFnQVVFSWFpZ0NBRVVOQUNBRkVBUUxJQU1nQWlrRENEY0NBQ0FEUVFocUlBUW9BZ0EyQWdBZ0F5Z0NBQ0VEQ3lBQlFRRTJBZ1FnQVVFTWFpZ0NBQ0VFSUFGQkNHb2lBU2dDQUNFRklBRkNBRGNDQUVFTVFRUVFXU0lCUlFSQVFReEJCQkJqQUFzZ0FTQUVOZ0lJSUFFZ0JUWUNCQ0FCSUFNMkFnQWdBRUdRaThBQU5nSUVJQUFnQVRZQ0FDQUNRVUJySkFBTC9BRUJBbjhqQUVFUWF5SUNKQUFnQUNnQ0FDQUNRUUEyQWd3Q2Z3SkFBa0FnQVVHQUFVOEVRQ0FCUVlBUVNRMEJJQUpCREdvaEFDQUJRWUNBQkU4TkFpQUNJQUZCUDNGQmdBRnlPZ0FPSUFJZ0FVRU1ka0hnQVhJNkFBd2dBaUFCUVFaMlFUOXhRWUFCY2pvQURVRUREQU1MSUFJZ0FUb0FEQ0FDUVF4cUlRQkJBUXdDQ3lBQ0lBRkJQM0ZCZ0FGeU9nQU5JQUlnQVVFR2RrSEFBWEk2QUF3Z0FrRU1haUVBUVFJTUFRc2dBaUFCUVQ5eFFZQUJjam9BRHlBQ0lBRkJFblpCOEFGeU9nQU1JQUlnQVVFR2RrRS9jVUdBQVhJNkFBNGdBaUFCUVF4MlFUOXhRWUFCY2pvQURVRUVDeUVCSUFBZ0FSQUxJQUpCRUdva0FBdjVBUUVDZnlNQVFSQnJJZ0lrQUNBQ1FRQTJBZ3dDZndKQUFrQWdBVUdBQVU4RVFDQUJRWUFRU1EwQklBSkJER29oQXlBQlFZQ0FCRThOQWlBQ0lBRkJQM0ZCZ0FGeU9nQU9JQUlnQVVFTWRrSGdBWEk2QUF3Z0FpQUJRUVoyUVQ5eFFZQUJjam9BRFVFRERBTUxJQUlnQVRvQURDQUNRUXhxSVFOQkFRd0NDeUFDSUFGQlAzRkJnQUZ5T2dBTklBSWdBVUVHZGtIQUFYSTZBQXdnQWtFTWFpRURRUUlNQVFzZ0FpQUJRVDl4UVlBQmNqb0FEeUFDSUFGQkVuWkI4QUZ5T2dBTUlBSWdBVUVHZGtFL2NVR0FBWEk2QUE0Z0FpQUJRUXgyUVQ5eFFZQUJjam9BRFVFRUN5RUJJQUFnQXlBQkVBc2dBa0VRYWlRQUMvd0JBUU4vSXdCQklHc2lCQ1FBQWtBZ0FrRUJhaUlESUFKUEJFQWdBU2dDQkNJQ1FRRjBJZ1VnQXlBRklBTkxHeUlEUVFRZ0EwRUVTeHNpQTBILy8vLy9BM0VnQTBaQkFYUWhCU0FEUVFKMElRTUNRQ0FDQkVBZ0JFRVlha0VDTmdJQUlBUWdBa0VDZERZQ0ZDQUVJQUVvQWdBMkFoQU1BUXNnQkVFQU5nSVFDeUFFSUFNZ0JTQUVRUkJxRUNWQkFTRUNJQVJCQ0dvb0FnQWhBeUFFS0FJRUlRVWdCQ2dDQUVFQlJ3UkFJQUVnQlRZQ0FDQUJJQU5CQW5ZMkFnUkJBQ0VDREFJTElBQWdCVFlDQkNBQVFRaHFJQU0yQWdBTUFRc2dBQ0FETmdJRUlBQkJDR3BCQURZQ0FFRUJJUUlMSUFBZ0FqWUNBQ0FFUVNCcUpBQUw4QUVCQkg4akFFRWdheUlFSkFBQ1FDQUNRUUZxSWdNZ0FrOEVRQ0FCS0FJRUlnVkJBWFFpQWlBRElBSWdBMHNiSWdOQkJDQURRUVJMR3lJRElBTnFJZ1lnQTA5QkFYUWhBd0pBSUFVRVFDQUVRUmhxUVFJMkFnQWdCQ0FDTmdJVUlBUWdBU2dDQURZQ0VBd0JDeUFFUVFBMkFoQUxJQVFnQmlBRElBUkJFR29RSlVFQklRSWdCRUVJYWlnQ0FDRURJQVFvQWdRaEJTQUVLQUlBUVFGSEJFQWdBU0FGTmdJQUlBRWdBMEVCZGpZQ0JFRUFJUUlNQWdzZ0FDQUZOZ0lFSUFCQkNHb2dBellDQUF3QkN5QUFJQU0yQWdRZ0FFRUlha0VBTmdJQVFRRWhBZ3NnQUNBQ05nSUFJQVJCSUdva0FBdlpBUUVEZndKQUlBQkJCR29vQWdBaUJDQUFRUWhxS0FJQUlnTnJJQUlnQVdzaUJVOEVRQ0FBS0FJQUlRUU1BUXNDZndKQUFrQWdBeUFGYWlJQ0lBTkpEUUFnQkVFQmRDSURJQUlnQXlBQ1N4c2lBa0VJSUFKQkNFc2JJUUlnQkFSQUlBSkJBRWdOQVNBQUtBSUFJZ05GRFFJZ0F5QUVRUUVnQWhCVkRBTUxJQUpCQUU0TkFRc1FYUUFMSUFKQkFSQlpDeUlFQkVBZ0FDQUVOZ0lBSUFCQkJHb2dBallDQUNBQVFRaHFLQUlBSVFNTUFRc2dBa0VCRUdNQUN5QURJQVJxSUFFZ0JSQkxHaUFBUVFocUlnQWdBQ2dDQUNBRmFqWUNBQXZvQVFFRmZ5TUFRUkJySWdNa0FDQUFMUUFMSVFJZ0EwSUFOd01JSUFFb0FnQWhCUUpBQWtBZ0FBSi9JQUVvQWdRaUJFSEFBQ0FDYXlJR1FmZ0JjVUVEZGlJQ1NRUkFJQVJCQ1U4TkFpQURRUWhxSUFVZ0JCQkxHaUFCUVFBMkFnUWdBVUdJZzhBQU5nSUFJQVJCQTNRTUFRc2dCa0gvQVhGQnlBQlBEUUlnQTBFSWFpQUZJQUlRU3hvZ0FTQUVJQUpyTmdJRUlBRWdBaUFGYWpZQ0FDQUdRZmdCY1FzZ0FDMEFDeUlCYWpvQUN5QUFJQUFwQXdBZ0F5a0RDQ0FCUVQ5eHJZYUVOd01BSUFOQkVHb2tBQThMSUFSQkNFSDRoY0FBRURjQUN5QUNRUWhCNklYQUFCQTNBQXZjQVFFRWZ5TUFRVUJxSWdJa0FDQUJRUVJxSVFRZ0FTZ0NCRVVFUUNBQktBSUFJUU1nQWtFQU5nSWdJQUpDQVRjREdDQUNJQUpCR0dvMkFpUWdBa0U0YWlBRFFSQnFLUUlBTndNQUlBSkJNR29nQTBFSWFpa0NBRGNEQUNBQ0lBTXBBZ0EzQXlnZ0FrRWtha0hZaWNBQUlBSkJLR29RQ1JvZ0FrRVFhaUlESUFJb0FpQTJBZ0FnQWlBQ0tRTVlOd01JQWtBZ0FTZ0NCQ0lGUlEwQUlBRkJDR29vQWdCRkRRQWdCUkFFQ3lBRUlBSXBBd2czQWdBZ0JFRUlhaUFES0FJQU5nSUFDeUFBUVpDTHdBQTJBZ1FnQUNBRU5nSUFJQUpCUUdza0FBdVlBZ0VDZnlNQVFTQnJJZ1FrQUVFQklRVkJpS2ZBQUVHSXA4QUFLQUlBUVFGcU5nSUFBa0FDUUFKQVFkQ3F3QUFvQWdCQkFVY0VRRUhRcXNBQVFvR0FnSUFRTndNQURBRUxRZFNxd0FCQjFLckFBQ2dDQUVFQmFpSUZOZ0lBSUFWQkFrc05BUXNnQkNBRE5nSWNJQVFnQWpZQ0dDQUVRZkNKd0FBMkFoUWdCRUh3aWNBQU5nSVFRZnltd0FBb0FnQWlBa0YvVEEwQVFmeW13QUFnQWtFQmFpSUNOZ0lBUWZ5bXdBQkJoS2ZBQUNnQ0FDSURCSDlCZ0tmQUFDZ0NBQ0FFUVFocUlBQWdBU2dDRUJFQ0FDQUVJQVFwQXdnM0F4QWdCRUVRYWlBREtBSU1FUUlBUWZ5bXdBQW9BZ0FGSUFJTFFYOXFOZ0lBSUFWQkFVME5BUXNBQ3lNQVFSQnJJZ0lrQUNBQ0lBRTJBZ3dnQWlBQU5nSUlBQXZNQVFFQ2Z5QUJRUlJxS0FJQUlnVWdBMEgvL3dOeElnUkxCRUFnQVNnQ0RDQUVRUUYwYWk4QkFDRUZJQUVvQWdnaUJDQUJLQUlFUmdSQUlBRWdCQkE4SUFFb0FnZ2hCQXNnQVNnQ0FDQUVRUUowYWlJRUlBSTZBQUlnQkNBRE93RUFJQUVnQVNnQ0NFRUJhallDQ0NBQktBSVVJZ1FnQVVFUWFpZ0NBRVlFUUNBQlFReHFJQVFRT3lBQktBSVVJUVFMSUFFb0Fnd2dCRUVCZEdvZ0JVRUJhanNCQUNBQklBRW9BaFJCQVdvMkFoUWdBQ0FDT2dBQ0lBQWdBenNCQUE4TElBUWdCVUg0aHNBQUVEWUFDOFFCQVFKL0l3QkJFR3NpQWlRQUlBSWdBYTFDZ0lDQWdCQkNBQ0FCS0FJWVFjV213QUJCQ1NBQlFSeHFLQUlBS0FJTUVRRUFHNFEzQXdBZ0FpQUFOZ0lNSUFJZ0FrRU1haEFTSUFJdEFBUWhBU0FDTFFBRkJFQWdBVUgvQVhFaEFDQUNBbjlCQVNBQURRQWFJQUlvQWdBaUFFRWNhaWdDQUNnQ0RDRUJJQUFvQWhnaEF5QUFMUUFBUVFSeFJRUkFJQU5COTQzQUFFRUNJQUVSQVFBTUFRc2dBMEgyamNBQVFRRWdBUkVCQUFzaUFUb0FCQXNnQWtFUWFpUUFJQUZCL3dGeFFRQkhDNm9CQVFKL0FrQUNRQUpBSUFJRVFFRUJJUVFnQVVFQVRnMEJEQUlMSUFBZ0FUWUNCRUVCSVFRTUFRc0NRQUpBQWtBQ1FBSkFJQU1vQWdBaUJVVUVRQ0FCUlEwQkRBTUxJQU1vQWdRaUF3MEJJQUVOQWdzZ0FpRUREQU1MSUFVZ0F5QUNJQUVRVlNJRFJRMEJEQUlMSUFFZ0FoQlpJZ01OQVFzZ0FDQUJOZ0lFSUFJaEFRd0NDeUFBSUFNMkFnUkJBQ0VFREFFTFFRQWhBUXNnQUNBRU5nSUFJQUJCQ0dvZ0FUWUNBQXVmQVFFRGZ5QUFRZ0EzQWdnQ1FDQUJRUlJxS0FJQUlnUWdBa0gvL3dOeElnTkxCRUFnQVNnQ0RDQURRUUYwYWk4QkFDRURJQUFvQWdRaEJDQUFRUUEyQWdRZ0FDZ0NBQ0VGSUFCQkFUWUNBQ0FFSUFOSkRRRWdBU0FDSUFVZ0F4QXBJQUFvQWdRRVFDQUFLQUlBRUFRTElBQWdBellDRENBQUlBUTJBZ1FnQUNBRk5nSUFEd3NnQXlBRVFiaUd3QUFRTmdBTElBTWdCRUhJaHNBQUVEY0FDNGNCQVFKL0l3QkJNR3NpQkNRQUlBUkJJR29pQlNBQ05nSUlJQVVnQWpZQ0JDQUZJQUUyQWdBZ0JFRUlhaUFFUVNCcUVFNGdCRUVRYWlBRUtBSUlJZ0VnQkNnQ0RDSUNJQU1RRXlBQ0JFQWdBUkFFQ3lBRVFTaHFJQVJCR0dvb0FnQTJBZ0FnQkNBRUtRTVFOd01nSUFRZ0JFRWdhaEJPSUFBZ0JDa0RBRGNEQUNBRVFUQnFKQUFMZ2dFQkJuOGpBRUVRYXlJREpBQWdBQ0FBS0FJSUlBRVFPaUFBS0FJQUlRVWdBQ2dDQ0NFQ0lBTkJDR3BCQVNBQkVGb2dBaUFGYWlFRUlBTW9BZ3dpQmlBREtBSUlJZ2RMQkVBZ0JDQUdJQWRyRUZJZ0JTQUNJQVpxSUFkcklnSnFJUVFMSUFBZ0FRUi9JQVJCQURvQUFDQUNRUUZxQlNBQ0N6WUNDQ0FEUVJCcUpBQUxqZ0VCQTM4Z0FDZ0NDQ0lFSUFGQi8vOERjU0lGU3dSQUlBTUVRQ0FBS0FJQUlRUWdBa0YvYWlFRklBRWhBQU5BSUFRZ0FFSC8vd054UVFKMGFpSUdMd0VBSVFBZ0F5QUZhaUFHTFFBQ09nQUFJQUFnQVNBQUlBRkIvLzhEY1VrYklRQWdBMEYvYWlJRERRQUxJQUl0QUFBUEMwRUFRUUJCbUlmQUFCQTJBQXNnQlVFQmFpQUVRWWlId0FBUU53QUxhQUVDZnlNQVFkQUFheUlDSkFBakFFRXdheUlCSkFBZ0FVRUlPZ0FQSUFGQk1Hb2tBQ0FDRUJkQjBBQkJDQkJaSWdFRVFDQUJJQUpCMEFBUVN4b2dBVUVCT2dCSUlBQkJwSVBBQURZQ0JDQUFJQUUyQWdBZ0FrSFFBR29rQUE4TFFkQUFRUWdRWXdBTGdBRUNBbjhCZmlBQkxRQUxJZ1FnQVMwQUNpSURTUVJBSUFFZ0FoQVlJQUV0QUFzaEJDQUJMUUFLSVFNTElBUWdBMEgvQVhGSkJIOUJBQVVnQVNBRUlBTnJPZ0FMSUFFZ0FTa0RBQ0FEcllraUJTQUJMd0VJSWdHdFFuK0ZRb0NBZklTRE53TUFJQUVnQmFkeElRTkJBUXNoQVNBQUlBTTdBUUlnQUNBQk93RUFDNklCQVFOL0l3QkJFR3NpQVNRQUlBQW9BZ0FpQWtFVWFpZ0NBQ0VEQWtBQ2Z3SkFBa0FnQWlnQ0JBNENBQUVEQ3lBRERRSkJBQ0VDUWZDSndBQU1BUXNnQXcwQklBSW9BZ0FpQXlnQ0JDRUNJQU1vQWdBTElRTWdBU0FDTmdJRUlBRWdBellDQUNBQlFmeUt3QUFnQUNnQ0JDZ0NDQ0FBS0FJSUVDSUFDeUFCUVFBMkFnUWdBU0FDTmdJQUlBRkI2SXJBQUNBQUtBSUVLQUlJSUFBb0FnZ1FJZ0FMZ1FFQkEzOGdBU2dDQkNJRElBSlBCRUFDUUNBRFJRMEFJQUVvQWdBaEJBSkFBa0FnQWtVRVFFRUJJUU1nQkJBRURBRUxJQVFnQTBFQklBSVFWU0lEUlEwQkN5QUJJQUkyQWdRZ0FTQUROZ0lBREFFTElBQWdBallDQkNBQVFRaHFRUUUyQWdCQkFTRUZDeUFBSUFVMkFnQVBDMEdVaU1BQVFTUkJ1SWpBQUJCSUFBdDFBZ0ovQVg0Z0FTMEFDeUlFSUFFdEFBb2lBMGtFUUNBQklBSVFJQ0FCTFFBTElRUWdBUzBBQ2lFREN5QUVJQU5CL3dGeFNRUi9RUUFGSUFFZ0JDQURhem9BQ3lBQklBRXBBd0FpQlNBRHJVSS9nNGczQXdBZ0FTOEJDQ0FGcDNFaEEwRUJDeUVCSUFBZ0F6c0JBaUFBSUFFN0FRQUxNQUVCZndKQUFrQkJnSUFCUVFJUVdTSUJEUUVNQUF0QmdJQUJRUUlRWXdBTElBQWdBVFlDQUNBQVFZQWdOZ0lFQzRZQkFRRi9Jd0JCUUdvaUFTUUFJQUZCS3pZQ0RDQUJRWUNCd0FBMkFnZ2dBVUdzZ2NBQU5nSVVJQUVnQURZQ0VDQUJRU3hxUVFJMkFnQWdBVUU4YWtFaE5nSUFJQUZDQWpjQ0hDQUJRYXlNd0FBMkFoZ2dBVUVkTmdJMElBRWdBVUV3YWpZQ0tDQUJJQUZCRUdvMkFqZ2dBU0FCUVFocU5nSXdJQUZCR0dwQjhJREFBQkJSQUF0eEFRTi9Jd0JCSUdzaUFpUUFBa0FnQUNBQkVCa05BQ0FCUVJ4cUtBSUFJUU1nQVNnQ0dDQUNRUnhxUVFBMkFnQWdBa0h3aThBQU5nSVlJQUpDQVRjQ0RDQUNRZlNMd0FBMkFnZ2dBeUFDUVFocUVBa05BQ0FBUVFScUlBRVFHU0FDUVNCcUpBQVBDeUFDUVNCcUpBQkJBUXN3QVFGL0FrQUNRRUdBd0FCQkFoQlpJZ0VOQVF3QUMwR0F3QUJCQWhCakFBc2dBQ0FCTmdJQUlBQkJnQ0EyQWdRTGV3RUNmd0pBQWtBZ0FDZ0NCQ0lCQkVBZ0FDZ0NEQ0lDSUFGUERRRWdBQ2dDQUNJQklBSnFJQUV0QUFBNkFBQWdBRUVBTmdJSUlBQWdBQ2dDREVFQmFqWUNEQ0FBS0FJRVJRMENJQUFvQWdBdEFBQVBDMEVBUVFCQmlJYkFBQkEyQUFzZ0FpQUJRWmlHd0FBUU5nQUxRUUJCQUVHb2hzQUFFRFlBQzJnQkFuOGdBQ0FBTFFCR0lnRkJBV29pQWpvQUNpQUFRUUVnQVVFUGNYUkJBbW9pQVRzQlFDQUFRWDhnQWtFUGNYUkJmM003QVFnZ0FFRVlhaWdDQUNBQlFmLy9BM0VpQVU4RVFDQUFJQUUyQWhnTElBQkJKR29vQWdBZ0FVOEVRQ0FBSUFFMkFpUUxDMUFCQVg4Z0FFRVVhaWdDQUNJQlJTQUJRUUowUlhKRkJFQWdBQ2dDRUJBRUN5QUFRU0JxS0FJQUlnRkZJQUZCQVhSRmNrVUVRQ0FBS0FJY0VBUUxJQUJCTEdvb0FnQUVRQ0FBS0FJb0VBUUxDMndCQVg4akFFRXdheUlESkFBZ0F5QUJOZ0lFSUFNZ0FEWUNBQ0FEUVJ4cVFRSTJBZ0FnQTBFc2FrRWNOZ0lBSUFOQ0FqY0NEQ0FEUVlDTndBQTJBZ2dnQTBFY05nSWtJQU1nQTBFZ2FqWUNHQ0FESUFNMkFpZ2dBeUFEUVFScU5nSWdJQU5CQ0dvZ0FoQlJBQXRzQVFGL0l3QkJNR3NpQXlRQUlBTWdBVFlDQkNBRElBQTJBZ0FnQTBFY2FrRUNOZ0lBSUFOQkxHcEJIRFlDQUNBRFFnSTNBZ3dnQTBITWtjQUFOZ0lJSUFOQkhEWUNKQ0FESUFOQklHbzJBaGdnQXlBRFFRUnFOZ0lvSUFNZ0F6WUNJQ0FEUVFocUlBSVFVUUFMYkFFQmZ5TUFRVEJySWdNa0FDQURJQUUyQWdRZ0F5QUFOZ0lBSUFOQkhHcEJBallDQUNBRFFTeHFRUncyQWdBZ0EwSUNOd0lNSUFOQmdKTEFBRFlDQ0NBRFFSdzJBaVFnQXlBRFFTQnFOZ0lZSUFNZ0EwRUVhallDS0NBRElBTTJBaUFnQTBFSWFpQUNFRkVBQzJ3QkFYOGpBRUV3YXlJREpBQWdBeUFCTmdJRUlBTWdBRFlDQUNBRFFSeHFRUUkyQWdBZ0EwRXNha0VjTmdJQUlBTkNBamNDRENBRFFheVJ3QUEyQWdnZ0EwRWNOZ0lrSUFNZ0EwRWdhallDR0NBRElBTkJCR28yQWlnZ0F5QUROZ0lnSUFOQkNHb2dBaEJSQUF0Y0FRRi9Jd0JCRUdzaUF5UUFBa0FnQUNnQ0JDQUJheUFDVHdSQUlBTkJBRFlDQUF3QkN5QURJQUFnQVNBQ0VCWWdBeWdDQUVFQlJ3MEFJQU5CQ0dvb0FnQWlBQVJBSUFNb0FnUWdBQkJqQUFzUVhRQUxJQU5CRUdva0FBdGFBUUYvSXdCQkVHc2lBaVFBQWtBZ0FDZ0NCQ0FCYTBFQlR3UkFJQUpCQURZQ0FBd0JDeUFDSUFBZ0FSQWVJQUlvQWdCQkFVY05BQ0FDUVFocUtBSUFJZ0FFUUNBQ0tBSUVJQUFRWXdBTEVGMEFDeUFDUVJCcUpBQUxXZ0VCZnlNQVFSQnJJZ0lrQUFKQUlBQW9BZ1FnQVd0QkFVOEVRQ0FDUVFBMkFnQU1BUXNnQWlBQUlBRVFIU0FDS0FJQVFRRkhEUUFnQWtFSWFpZ0NBQ0lBQkVBZ0FpZ0NCQ0FBRUdNQUN4QmRBQXNnQWtFUWFpUUFDMWtCQVg4akFFRWdheUlDSkFBZ0FpQUFLQUlBTmdJRUlBSkJHR29nQVVFUWFpa0NBRGNEQUNBQ1FSQnFJQUZCQ0dvcEFnQTNBd0FnQWlBQktRSUFOd01JSUFKQkJHcEIySW5BQUNBQ1FRaHFFQWtnQWtFZ2FpUUFDMFlBQWtCQkNDQUNTUVJBQW45QkNDQUNTUVJBSUFJZ0F4QVFEQUVMSUFNUUFBc2lBZzBCUVFBUEN5QUFJQU1RQ2c4TElBSWdBQ0FESUFFZ0FTQURTeHNRU3lBQUVBUUxXUUVCZnlNQVFTQnJJZ0lrQUNBQ0lBQW9BZ0EyQWdRZ0FrRVlhaUFCUVJCcUtRSUFOd01BSUFKQkVHb2dBVUVJYWlrQ0FEY0RBQ0FDSUFFcEFnQTNBd2dnQWtFRWFrSHdqOEFBSUFKQkNHb1FDU0FDUVNCcUpBQUxXUUFDUUFKQUFrQWdBVUYvU2dSQUFrQWdBZ1JBSUFFTkFRd0VDeUFCUlEwRElBRkJBUkJaSWdJTkJBd0NDeUFCRUVjaUFrVU5BUXdEQ3hCZEFBc2dBVUVCRUdNQUMwRUJJUUlMSUFBZ0FUWUNCQ0FBSUFJMkFnQUxWZ0VCZnlNQVFTQnJJZ0lrQUNBQ0lBQTJBZ1FnQWtFWWFpQUJRUkJxS1FJQU53TUFJQUpCRUdvZ0FVRUlhaWtDQURjREFDQUNJQUVwQWdBM0F3Z2dBa0VFYWtId2o4QUFJQUpCQ0dvUUNTQUNRU0JxSkFBTFdRRURmd0pBSUFFb0Fnd2lBaUFCS0FJSUlnTlBCRUFnQVNnQ0JDSUVJQUpKRFFFZ0FTZ0NBQ0VCSUFBZ0FpQURhellDQkNBQUlBRWdBMm8yQWdBUEN5QURJQUpCMkliQUFCQTRBQXNnQWlBRVFkaUd3QUFRTndBTFZRRUJmeUFBUVJCcUlBQXRBRVlRRFNBQVFRQTZBRWNnQUVFQU93RTRJQUJCTUdwQ0FEY0RBQ0FBUVFBNkFBc2dBRUlBTndNQUlBQWdBQzBBUmtFQmFpSUJPZ0FLSUFCQmZ5QUJRUTl4ZEVGL2N6c0JDQXREQVFOL0FrQWdBa1VOQUFOQUlBQXRBQUFpQkNBQkxRQUFJZ1ZHQkVBZ0FFRUJhaUVBSUFGQkFXb2hBU0FDUVg5cUlnSU5BUXdDQ3dzZ0JDQUZheUVEQ3lBREMwVUJBWDhqQUVFUWF5SUNKQUFnQWlBQUlBRVFMUUpBSUFJb0FnQkJBVVlFUUNBQ1FRaHFLQUlBSWdCRkRRRWdBaWdDQkNBQUVHTUFDeUFDUVJCcUpBQVBDeEJkQUF0S0FBSi9JQUZCZ0lERUFFY0VRRUVCSUFBb0FoZ2dBU0FBUVJ4cUtBSUFLQUlRRVFBQURRRWFDeUFDUlFSQVFRQVBDeUFBS0FJWUlBSWdBeUFBUVJ4cUtBSUFLQUlNRVFFQUN3c21BUUYvQWtBZ0FCQUFJZ0ZGRFFBZ0FVRjhhaTBBQUVFRGNVVU5BQ0FCSUFBUVVnc2dBUXRIQVFGL0l3QkJJR3NpQXlRQUlBTkJGR3BCQURZQ0FDQURRZkNMd0FBMkFoQWdBMElCTndJRUlBTWdBVFlDSENBRElBQTJBaGdnQXlBRFFSaHFOZ0lBSUFNZ0FoQlJBQXRFQVFKL0lBRW9BZ1FoQWlBQktBSUFJUU5CQ0VFRUVGa2lBVVVFUUVFSVFRUVFZd0FMSUFFZ0FqWUNCQ0FCSUFNMkFnQWdBRUdnaThBQU5nSUVJQUFnQVRZQ0FBdGJBUU4vSXdCQkVHc2lBU1FBSUFBb0Fnd2lBa1VFUUVHQWlzQUFRU3RCeUlyQUFCQklBQXNnQUNnQ0NDSURSUVJBUVlDS3dBQkJLMEhZaXNBQUVFZ0FDeUFCSUFJMkFnZ2dBU0FBTmdJRUlBRWdBellDQUNBQkVGQUFDek1CQVg4Z0FnUkFJQUFoQXdOQUlBTWdBUzBBQURvQUFDQUJRUUZxSVFFZ0EwRUJhaUVESUFKQmYyb2lBZzBBQ3dzZ0FBc3NBQUpBSUFCQmZFMEVRQ0FBUlFSQVFRUWhBQXdDQ3lBQUlBQkJmVWxCQW5RUVdTSUFEUUVMQUFzZ0FBc3hBUUYvSUFFb0FnUWlBZ1JBSUFBZ0FqWUNCQ0FBUVFocVFRRTJBZ0FnQUNBQktBSUFOZ0lBRHdzZ0FFRUFOZ0lBQ3pFQkFYOGdBQ0FCS0FJRUlBRW9BZ2dpQWtzRWZ5QUJJQUlRUlNBQktBSUlCU0FDQ3pZQ0JDQUFJQUVvQWdBMkFnQUxLQUVCZnlBQUtBSUlJZ0lnQVU4RVFDQUFLQUlBR2lBQUlBRTJBZ2dQQ3lBQUlBRWdBbXNRS0Fzc0FRRi9Jd0JCRUdzaUFTUUFJQUZCQ0dvZ0FFRUlhaWdDQURZQ0FDQUJJQUFwQWdBM0F3QWdBUkFzQUFzMEFRRi9Jd0JCRUdzaUFpUUFJQUlnQVRZQ0RDQUNJQUEyQWdnZ0FrRzhqTUFBTmdJRUlBSkI4SXZBQURZQ0FDQUNFRW9BQ3lFQUlBRUVRQU5BSUFCQkFEb0FBQ0FBUVFGcUlRQWdBVUYvYWlJQkRRQUxDd3NnQVFGL0FrQWdBQ2dDQUNJQlJRMEFJQUJCQkdvb0FnQkZEUUFnQVJBRUN3c2dBUUYvQWtBZ0FDZ0NCQ0lCUlEwQUlBQkJDR29vQWdCRkRRQWdBUkFFQ3dzTUFDQUFJQUVnQWlBREVENExDd0FnQVFSQUlBQVFCQXNMRWdBZ0FDZ0NBQ0FCSUFFZ0Ftb1FIMEVBQ3hRQUlBQW9BZ0FnQVNBQUtBSUVLQUlNRVFBQUN4a0FBbjlCQ0NBQlNRUkFJQUVnQUJBUURBRUxJQUFRQUFzTEVBQWdBQ0FDTmdJRUlBQWdBVFlDQUFzVEFDQUFRYUNMd0FBMkFnUWdBQ0FCTmdJQUN4QUFJQUVnQUNnQ0FDQUFLQUlFRUFVTEVRQkJ6SXZBQUVFUlFlQ0x3QUFRU0FBTERnQWdBQ2dDQUJvRFFBd0FDd0FMQ3dBZ0FEVUNBQ0FCRUJVTERRQWdBQ2dDQUNBQklBSVFDd3NMQUNBQU1RQUFJQUVRRlFzTEFDQUFJd0JxSkFBakFBc1pBQ0FBSUFGQitLYkFBQ2dDQUNJQVFRNGdBQnNSQWdBQUN3MEFJQUZCeEpEQUFFRUNFQVVMQ1FBZ0FFRUFPZ0JIQ3djQUlBQXRBRWNMRFFCQzlQbWU1dTZqcXZuK0FBc05BRUwzdU83NnFzelY3dVVBQ3d3QVF1blFvdHZNb3VxN1Jnc0RBQUVMQXdBQkN3dmZKZ0VBUVlDQXdBQUwxU1l2VlhObGNuTXZabTA0TVRNdkxuSjFjM1IxY0M5MGIyOXNZMmhoYVc1ekwzTjBZV0pzWlMxNE9EWmZOalF0WVhCd2JHVXRaR0Z5ZDJsdUwyeHBZaTl5ZFhOMGJHbGlMM055WXk5eWRYTjBMMnhwWW5KaGNua3ZZMjl5WlM5emNtTXZZV3hzYjJNdmJHRjViM1YwTG5KekFBQVFBSEFBQUFBTEFRQUFPUUFBQUdOaGJHeGxaQ0JnVW1WemRXeDBPanAxYm5keVlYQW9LV0FnYjI0Z1lXNGdZRVZ5Y21BZ2RtRnNkV1VBQVFBQUFBQUFBQUFCQUFBQUFnQUFBSE55WXk5c2FXSXVjbk1BQUx3QUVBQUtBQUFBR3dBQUFBNEFBQUM4QUJBQUNnQUFBQndBQUFBU0FBQUFZWE56WlhKMGFXOXVJR1poYVd4bFpEb2diV2xrSUR3OUlITmxiR1l1YkdWdUtDa3ZWWE5sY25NdlptMDRNVE12TG5KMWMzUjFjQzkwYjI5c1kyaGhhVzV6TDNOMFlXSnNaUzE0T0RaZk5qUXRZWEJ3YkdVdFpHRnlkMmx1TDJ4cFlpOXlkWE4wYkdsaUwzTnlZeTl5ZFhOMEwyeHBZbkpoY25rdlkyOXlaUzl6Y21NdmMyeHBZMlV2Ylc5a0xuSnpDd0VRQUcwQUFBRDlCQUFBQ1FBQUFBTUFBQUJRQUFBQUNBQUFBQVFBQUFBRkFBQUFCZ0FBQUFjQUFBQUlBQUFBVUFBQUFBZ0FBQUFKQUFBQUNnQUFBQXNBQUFBTUFBQUFMMVZ6WlhKekwyWnRPREV6THk1allYSm5ieTl5WldkcGMzUnllUzl6Y21NdloybDBhSFZpTG1OdmJTMHhaV05qTmpJNU9XUmlPV1ZqT0RJekwzZGxaWHBzTFRBdU1TNDBMM055WXk5a1pXTnZaR1V1Y25NQUFNQUJFQUJXQUFBQVdnSUFBQjhBQUFEQUFSQUFWZ0FBQUcwQ0FBQWJBQUFBd0FFUUFGWUFBQUNDQWdBQUpnQUFBTUFCRUFCV0FBQUFxd0lBQUJFQUFBREFBUkFBVmdBQUFLMENBQUFSQUFBQXdBRVFBRllBQUFDNUFnQUFHUUFBQU1BQkVBQldBQUFBelFJQUFDSUFBQURBQVJBQVZnQUFBTThDQUFBYkFBQUF3QUVRQUZZQUFBRFFBZ0FBRlFBQUFNQUJFQUJXQUFBQTBRSUFBQlVBQUFEQUFSQUFWZ0FBQVBvQ0FBQU5BQUFBd0FFUUFGWUFBQUJGQXdBQUVRQUFBTUFCRUFCV0FBQUFTd01BQUJFQUFBREFBUkFBVmdBQUFJb0RBQUFSQUFBQXdBRVFBRllBQUFDUUF3QUFFUUFBQU1BQkVBQldBQUFBdkFNQUFDY0FBQURBQVJBQVZnQUFBTHdEQUFBSkFBQUF3QUVRQUZZQUFBQy9Bd0FBQ1FBQUFNQUJFQUJXQUFBQXhnTUFBQlVBQUFEQUFSQUFWZ0FBQU1rREFBQVlBQUFBd0FFUUFGWUFBQURTQXdBQUNnQUFBTUFCRUFCV0FBQUErQU1BQUFvQUFBREFBUkFBVmdBQUFBVUVBQUFWQUFBQXdBRVFBRllBQUFBTkJBQUFGZ0FBQU1BQkVBQldBQUFBR0FRQUFBa0FBQUF2VlhObGNuTXZabTA0TVRNdkxuSjFjM1IxY0M5MGIyOXNZMmhoYVc1ekwzTjBZV0pzWlMxNE9EWmZOalF0WVhCd2JHVXRaR0Z5ZDJsdUwyeHBZaTl5ZFhOMGJHbGlMM055WXk5eWRYTjBMMnhwWW5KaGNua3ZZV3hzYjJNdmMzSmpMM0poZDE5MlpXTXVjbk5VY21sbFpDQjBieUJ6YUhKcGJtc2dkRzhnWVNCc1lYSm5aWElnWTJGd1lXTnBkSG1vQXhBQWJBQUFBTVVCQUFBSkFBQUFUV0Y0YVcxMWJTQmpiMlJsSUhOcGVtVWdNVElnY21WeGRXbHlaV1FzSUdkdmRDQUFTQVFRQUNNQUFBQXZWWE5sY25NdlptMDRNVE12TG1OaGNtZHZMM0psWjJsemRISjVMM055WXk5bmFYUm9kV0l1WTI5dExURmxZMk0yTWprNVpHSTVaV000TWpNdmQyVmxlbXd0TUM0eExqUXZjM0pqTDJ4cFlpNXljd0IwQkJBQVV3QUFBRTBBQUFBRkFBQUFEd0FBQUFRQUFBQUVBQUFBRUFBQUFCRUFBQUFTQUFBQUR3QUFBQUFBQUFBQkFBQUFFd0FBQUdOaGJHeGxaQ0JnVDNCMGFXOXVPanAxYm5keVlYQW9LV0FnYjI0Z1lTQmdUbTl1WldBZ2RtRnNkV1ZzYVdKeVlYSjVMM04wWkM5emNtTXZjR0Z1YVdOcmFXNW5Mbkp6QUNzRkVBQWNBQUFBN1FFQUFCOEFBQUFyQlJBQUhBQUFBTzRCQUFBZUFBQUFGQUFBQUJBQUFBQUVBQUFBRlFBQUFCWUFBQUFQQUFBQUNBQUFBQVFBQUFBWEFBQUFHQUFBQUJrQUFBQU1BQUFBQkFBQUFCb0FBQUFQQUFBQUNBQUFBQVFBQUFBYkFBQUFiR2xpY21GeWVTOWhiR3h2WXk5emNtTXZjbUYzWDNabFl5NXljMk5oY0dGamFYUjVJRzkyWlhKbWJHOTNBQUFBc0FVUUFCd0FBQUFlQWdBQUJRQUFBR0F1TGdEeEJSQUFBZ0FBQUdOaGJHeGxaQ0JnVDNCMGFXOXVPanAxYm5keVlYQW9LV0FnYjI0Z1lTQmdUbTl1WldBZ2RtRnNkV1U2SUFBQUFQQUZFQUFBQUFBQUp3WVFBQUlBQUFBaUFBQUFBQUFBQUFFQUFBQWpBQUFBYVc1a1pYZ2diM1YwSUc5bUlHSnZkVzVrY3pvZ2RHaGxJR3hsYmlCcGN5QWdZblYwSUhSb1pTQnBibVJsZUNCcGN5QUFBRXdHRUFBZ0FBQUFiQVlRQUJJQUFBQnNhV0p5WVhKNUwyTnZjbVV2YzNKakwyWnRkQzlpZFdsc1pHVnljeTV5Y3lJQUFBQU1BQUFBQkFBQUFDUUFBQUFsQUFBQUpnQUFBQ0FnSUNDUUJoQUFJQUFBQURJQUFBQWhBQUFBa0FZUUFDQUFBQUF6QUFBQUVnQUFBQ0I3Q2l3S0xDQWdleUI5SUgxc2FXSnlZWEo1TDJOdmNtVXZjM0pqTDJadGRDOXVkVzB1Y25QNUJoQUFHd0FBQUdVQUFBQVVBQUFBTUhnd01EQXhNREl3TXpBME1EVXdOakEzTURnd09URXdNVEV4TWpFek1UUXhOVEUyTVRjeE9ERTVNakF5TVRJeU1qTXlOREkxTWpZeU56STRNamt6TURNeE16SXpNek0wTXpVek5qTTNNemd6T1RRd05ERTBNalF6TkRRME5UUTJORGMwT0RRNU5UQTFNVFV5TlRNMU5EVTFOVFkxTnpVNE5UazJNRFl4TmpJMk16WTBOalUyTmpZM05qZzJPVGN3TnpFM01qY3pOelEzTlRjMk56YzNPRGM1T0RBNE1UZ3lPRE00TkRnMU9EWTROemc0T0RrNU1Ea3hPVEk1TXprME9UVTVOamszT1RnNU9RQUFJZ0FBQUFRQUFBQUVBQUFBSndBQUFDZ0FBQUFwQUFBQWJHbGljbUZ5ZVM5amIzSmxMM055WXk5bWJYUXZiVzlrTG5KekFBZ0lFQUFiQUFBQVZRUUFBQkVBQUFBSUNCQUFHd0FBQUY4RUFBQWtBQUFBS0Nsc2FXSnlZWEo1TDJOdmNtVXZjM0pqTDNOc2FXTmxMMjFsYldOb2NpNXljd0FBUmdnUUFDQUFBQUJhQUFBQUJRQUFBSEpoYm1kbElITjBZWEowSUdsdVpHVjRJQ0J2ZFhRZ2IyWWdjbUZ1WjJVZ1ptOXlJSE5zYVdObElHOW1JR3hsYm1kMGFDQjRDQkFBRWdBQUFJb0lFQUFpQUFBQWNtRnVaMlVnWlc1a0lHbHVaR1Y0SUx3SUVBQVFBQUFBaWdnUUFDSUFBQUJ6YkdsalpTQnBibVJsZUNCemRHRnlkSE1nWVhRZ0lHSjFkQ0JsYm1SeklHRjBJQURjQ0JBQUZnQUFBUElJRUFBTkFBQUFiR2xpY21GeWVTOWpiM0psTDNOeVl5OXpkSEl2Y0dGMGRHVnliaTV5Y3dBUUNSQUFId0FBQUxBQkFBQW1BQUFBV3k0dUxsMWllWFJsSUdsdVpHVjRJQ0JwY3lCdmRYUWdiMllnWW05MWJtUnpJRzltSUdBQUFFVUpFQUFMQUFBQVVBa1FBQllBQUFEd0JSQUFBUUFBQUdKbFoybHVJRHc5SUdWdVpDQW9JRHc5SUNrZ2QyaGxiaUJ6YkdsamFXNW5JR0FBQUlBSkVBQU9BQUFBamdrUUFBUUFBQUNTQ1JBQUVBQUFBUEFGRUFBQkFBQUFJR2x6SUc1dmRDQmhJR05vWVhJZ1ltOTFibVJoY25rN0lHbDBJR2x6SUdsdWMybGtaU0FnS0dKNWRHVnpJQ2tnYjJZZ1lFVUpFQUFMQUFBQXhBa1FBQ1lBQUFEcUNSQUFDQUFBQVBJSkVBQUdBQUFBOEFVUUFBRUFBQUJzYVdKeVlYSjVMMk52Y21VdmMzSmpMM1Z1YVdOdlpHVXZjSEpwYm5SaFlteGxMbkp6QUFBQUlBb1FBQ1VBQUFBS0FBQUFIQUFBQUNBS0VBQWxBQUFBR2dBQUFEWUFBQUFBQVFNRkJRWUdBd2NHQ0FnSkVRb2NDeGtNRkEwUURnMFBCQkFERWhJVENSWUJGd1VZQWhrREdnY2NBaDBCSHhZZ0F5c0RMQUl0Q3k0Qk1BTXhBaklCcHdLcEFxb0Vxd2o2QXZzRi9RVCtBLzhKclhoNWk0MmlNRmRZaTR5UUhCM2REZzlMVFB2OExpOC9YRjFmdGVLRWpZNlJrcW14dXJ2RnhzbkszdVRsL3dBRUVSSXBNVFEzT2pzOVNVcGRoSTZTcWJHMHVydkd5czdQNU9VQUJBME9FUklwTVRRNk8wVkdTVXBlWkdXRWtadWR5YzdQRFJFcFJVbFhaR1dOa2FtMHVydkZ5ZC9rNWZBTkVVVkpaR1dBaExLOHZyL1YxL0R4ZzRXTHBLYSt2OFhIenMvYTIwaVl2YzNHenM5SlRrOVhXVjVmaVk2UHNiYTN2OEhHeDljUkZoZGJYUGIzL3YrQURXMXgzdDhPRHg5dWJ4d2RYMzErcnErN3ZQb1dGeDRmUmtkT1QxaGFYRjUrZjdYRjFOWGM4UEgxY25PUGRIV1dMMThtTGkrbnI3ZS94OC9YMzVwQWw1Z3dqeC9Bd2M3L1RrOWFXd2NJRHhBbkwrN3ZibTgzUFQ5Q1JaQ1IvdjlUWjNYSXlkRFIyTm5uL3Y4QUlGOGlndDhFZ2tRSUd3UUdFWUdzRG9Dck5TZ0xnT0FER1FnQkJDOEVOQVFIQXdFSEJnY1JDbEFQRWdkVkJ3TUVIQW9KQXdnREJ3TUNBd01EREFRRkF3c0dBUTRWQlRvREVRY0dCUkFIVndjQ0J4VU5VQVJEQXkwREFRUVJCZzhNT2dRZEpWOGdiUVJxSllESUJZS3dBeG9HZ3YwRFdRY1ZDeGNKRkF3VURHb0dDZ1lhQmxrSEt3VkdDaXdFREFRQkF6RUxMQVFhQmdzRGdLd0dDZ1loUDB3RUxRTjBDRHdERHdNOEJ6Z0lLd1dDL3hFWUNDOFJMUU1nRUNFUGdJd0VncGNaQ3hXSWxBVXZCVHNIQWc0WUNZQ3pMWFFNZ05ZYURBV0Evd1dBM3d6dURRT0VqUU0zQ1lGY0ZJQzRDSURMS2pnRENnWTRDRVlJREFaMEN4NERXZ1JaQ1lDREdCd0tGZ2xNQklDS0JxdWtEQmNFTWFFRWdkb21Cd3dGQllDbEVZRnRFSGdvS2daTUJJQ05CSUMrQXhzRER3MEFCZ0VCQXdFRUFnZ0lDUUlLQlFzQ0RnUVFBUkVDRWdVVEVSUUJGUUlYQWhrTkhBVWRDQ1FCYWdOckFyd0MwUUxVRE5VSjFnTFhBdG9CNEFYaEF1Z0M3aUR3QlBnQytRTDZBdnNCRENjN1BrNVBqNTZlbndZSENUWTlQbGJ6ME5FRUZCZzJOMVpYZjZxdXI3MDE0QktIaVk2ZUJBME9FUklwTVRRNlJVWkpTazVQWkdWY3RyY2JIQWNJQ2dzVUZ6WTVPcWlwMk5rSk41Q1JxQWNLT3o1bWFZK1NiMS91NzFwaW1wc25LRldkb0tHanBLZW9yYnE4eEFZTERCVWRPajlGVWFhbnpNMmdCeGthSWlVK1A4WEdCQ0FqSlNZb016ZzZTRXBNVUZOVlZsaGFYRjVnWTJWbWEzTjRmWCtLcEtxdnNNRFFycTk1ekc1dmsxNGlld1VEQkMwRFpnTUJMeTZBZ2gwRE1ROGNCQ1FKSGdVckJVUUVEaXFBcWdZa0JDUUVLQWcwQ3dHQWtJRTNDUllLQ0lDWU9RTmpDQWt3RmdVaEF4c0ZBVUE0QkVzRkx3UUtCd2tIUUNBbkJBd0pOZ002QlJvSEJBd0hVRWszTXcwekJ5NElDb0VtVWs0b0NDcFdIQlFYQ1U0RUhnOUREaGtIQ2daSUNDY0pkUXMvUVNvR093VUtCbEVHQVFVUUF3V0FpMkllU0FnS2dLWmVJa1VMQ2dZTkV6a0hDallzQkJDQXdEeGtVd3hJQ1FwR1JSdElDRk1kT1lFSFJnb2RBMGRKTndNT0NBb0dPUWNLZ1RZWmdMY0JEeklOZzV0bWRRdUF4SXE4aEMrUDBZSkhvYm1DT1FjcUJBSmdKZ3BHQ2lnRkU0S3dXMlZMQkRrSEVVQUZDd0lPbC9nSWhOWXFDYUwzZ1I4eEF4RUVDSUdNaVFSckJRMERDUWNRazJDQTlncHpDRzRYUm9DYUZBeFhDUm1BaDRGSEE0VkNEeFdGVUN1QTFTMERHZ1FDZ1hBNkJRR0ZBSURYS1V3RUNnUUNneEZFVEQyQXdqd0dBUVJWQlJzMEFvRU9MQVJrREZZS2dLNDRIUTBzQkFrSEFnNEdnSnFEMkFnTkF3MERkQXhaQnd3VURBUTRDQW9HS0FnaVRvRlVEQlVEQXdVSENSa0hCd2tERFFjcGdNc2xDb1FHYkdsaWNtRnllUzlqYjNKbEwzTnlZeTkxYm1samIyUmxMM1Z1YVdOdlpHVmZaR0YwWVM1eWN3Q3ZEeEFBS0FBQUFFc0FBQUFvQUFBQXJ3OFFBQ2dBQUFCWEFBQUFGZ0FBQUs4UEVBQW9BQUFBVWdBQUFENEFBQUFpQUFBQUJBQUFBQVFBQUFBcUFBQUFBQU1BQUlNRUlBQ1JCV0FBWFJPZ0FCSVhvQjRNSU9BZTd5d2dLeW93b0N0dnBtQXNBcWpnTEI3NzRDMEEvcUExbnYvZ05mMEJZVFlCQ3FFMkpBMWhONnNPNFRndkdDRTVNQnhoUnZNZW9VcndhbUZPVDIraFRwMjhJVTlsMGVGUEFOb2hVQURnNFZFdzRXRlQ3T0toVk5EbzRWUWdBQzVWOEFHL1ZRQndBQWNBTFFFQkFRSUJBZ0VCU0Fzd0ZSQUJaUWNDQmdJQ0FRUWpBUjRiV3dzNkNRa0JHQVFCQ1FFREFRVXJBM2NQQVNBM0FRRUJCQWdFQVFNSENnSWRBVG9CQVFFQ0JBZ0JDUUVLQWhvQkFnSTVBUVFDQkFJQ0F3TUJIZ0lEQVFzQ09RRUVCUUVDQkFFVUFoWUdBUUU2QVFFQ0FRUUlBUWNEQ2dJZUFUc0JBUUVNQVFrQktBRURBVGtEQlFNQkJBY0NDd0lkQVRvQkFnRUNBUU1CQlFJSEFnc0NIQUk1QWdFQkFnUUlBUWtCQ2dJZEFVZ0JCQUVDQXdFQkNBRlJBUUlIREFoaUFRSUpDd1pLQWhzQkFRRUJBVGNPQVFVQkFnVUxBU1FKQVdZRUFRWUJBZ0lDR1FJRUF4QUVEUUVDQWdZQkR3RUFBd0FESFFNZEFoNENRQUlCQndnQkFnc0pBUzBEZHdJaUFYWURCQUlKQVFZRDJ3SUNBVG9CQVFjQkFRRUJBZ2dHQ2dJQk1CRS9CREFIQVFFRkFTZ0pEQUlnQkFJQ0FRTTRBUUVDQXdFQkF6b0lBZ0tZQXdFTkFRY0VBUVlCQXdMR09nRUZBQUhESVFBRGpRRmdJQUFHYVFJQUJBRUtJQUpRQWdBQkF3RUVBUmtDQlFHWEFob1NEUUVtQ0JrTExnTXdBUUlFQWdJbkFVTUdBZ0lDQWd3QkNBRXZBVE1CQVFNQ0FnVUNBUUVxQWdnQjdnRUNBUVFCQUFFQUVCQVFBQUlBQWVJQmxRVUFBd0VDQlFRb0F3UUJwUUlBQkFBQ21RdXdBVFlQT0FNeEJBSUNSUU1rQlFFSVBnRU1BalFKQ2dRQ0FWOERBZ0VCQWdZQm9BRURDQlVDT1FJQkFRRUJGZ0VPQndNRnd3Z0NBd0VCRndGUkFRSUdBUUVDQVFFQ0FRTHJBUUlFQmdJQkFoc0NWUWdDQVFFQ2FnRUJBUUlHQVFGbEF3SUVBUVVBQ1FFQzlRRUtBZ0VCQkFHUUJBSUNCQUVnQ2lnR0FnUUlBUWtHQWdNdURRRUNBQWNCQmdFQlVoWUNCd0VDQVFKNkJnTUJBUUlCQndFQlNBSURBUUVCQUFJQUJUc0hBQUUvQkZFQkFBSUFBUUVEQkFVSUNBSUhIZ1NVQXdBM0JESUlBUTRCRmdVQkR3QUhBUkVDQndFQ0FRVUFCd0FFQUFkdEJ3QmdnUEFBVEdGNWIzVjBSWEp5Y0hKcGRtRjBaUUI3Q1hCeWIyUjFZMlZ5Y3dJSWJHRnVaM1ZoWjJVQkJGSjFjM1FBREhCeWIyTmxjM05sWkMxaWVRTUZjblZ6ZEdNZE1TNDBPUzR3SUNobE1UZzROR0U0WlRNZ01qQXlNQzB4TWkweU9Ta0dkMkZzY25WekJqQXVNVGd1TUF4M1lYTnRMV0pwYm1SblpXNFNNQzR5TGpjd0lDaGlOak0xTldNeU56QXAiKTtsZXQgbzthc3luYyBmdW5jdGlvbiBOKEEsSSl7b3x8KG89YXdhaXQoYXN5bmMoKT0+KGF3YWl0IEUoRyksRCkpKCkpO2NvbnN0IGc9by5kZWNvbXByZXNzKEEsSSk7aWYoMD09PWcubGVuZ3RoKXRocm93IEVycm9yKCJGYWlsZWQgdG8gZGVjb2RlIHdpdGggTFpXIGRlY29kZXIuIik7cmV0dXJuIGd9CgogIGNsYXNzIExaV0RlY29kZXIgZXh0ZW5kcyBCYXNlRGVjb2RlciB7CiAgICBjb25zdHJ1Y3RvcihmaWxlRGlyZWN0b3J5KSB7CiAgICAgIHN1cGVyKCk7CiAgICAgIGNvbnN0IHdpZHRoID0gZmlsZURpcmVjdG9yeS5UaWxlV2lkdGggfHwgZmlsZURpcmVjdG9yeS5JbWFnZVdpZHRoOwogICAgICBjb25zdCBoZWlnaHQgPSBmaWxlRGlyZWN0b3J5LlRpbGVMZW5ndGggfHwgZmlsZURpcmVjdG9yeS5JbWFnZUxlbmd0aDsKICAgICAgY29uc3QgbmJ5dGVzID0gZmlsZURpcmVjdG9yeS5CaXRzUGVyU2FtcGxlWzBdIC8gODsKICAgICAgdGhpcy5tYXhVbmNvbXByZXNzZWRTaXplID0gd2lkdGggKiBoZWlnaHQgKiBuYnl0ZXM7CiAgICB9CgogICAgYXN5bmMgZGVjb2RlQmxvY2soYnVmZmVyKSB7CiAgICAgIGNvbnN0IGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoYnVmZmVyKTsKICAgICAgY29uc3QgZGVjb2RlZCA9IGF3YWl0IE4oYnl0ZXMsIHRoaXMubWF4VW5jb21wcmVzc2VkU2l6ZSk7CiAgICAgIHJldHVybiBkZWNvZGVkLmJ1ZmZlcjsKICAgIH0KICB9CgogIC8qIC0qLSB0YWItd2lkdGg6IDI7IGluZGVudC10YWJzLW1vZGU6IG5pbDsgYy1iYXNpYy1vZmZzZXQ6IDIgLSotIC8KICAvKiB2aW06IHNldCBzaGlmdHdpZHRoPTIgdGFic3RvcD0yIGF1dG9pbmRlbnQgY2luZGVudCBleHBhbmR0YWI6ICovCiAgLyoKICAgICBDb3B5cmlnaHQgMjAxMSBub3RtYXN0ZXJ5ZXQKICAgICBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICAgICB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAgICAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAgICAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogICAgIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICAgICBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogICAgIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogICAgIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICAgICBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICAqLwoKICAvLyAtIFRoZSBKUEVHIHNwZWNpZmljYXRpb24gY2FuIGJlIGZvdW5kIGluIHRoZSBJVFUgQ0NJVFQgUmVjb21tZW5kYXRpb24gVC44MQogIC8vICAgKHd3dy53My5vcmcvR3JhcGhpY3MvSlBFRy9pdHUtdDgxLnBkZikKICAvLyAtIFRoZSBKRklGIHNwZWNpZmljYXRpb24gY2FuIGJlIGZvdW5kIGluIHRoZSBKUEVHIEZpbGUgSW50ZXJjaGFuZ2UgRm9ybWF0CiAgLy8gICAod3d3LnczLm9yZy9HcmFwaGljcy9KUEVHL2pmaWYzLnBkZikKICAvLyAtIFRoZSBBZG9iZSBBcHBsaWNhdGlvbi1TcGVjaWZpYyBKUEVHIG1hcmtlcnMgaW4gdGhlIFN1cHBvcnRpbmcgdGhlIERDVCBGaWx0ZXJzCiAgLy8gICBpbiBQb3N0U2NyaXB0IExldmVsIDIsIFRlY2huaWNhbCBOb3RlICM1MTE2CiAgLy8gICAocGFydG5lcnMuYWRvYmUuY29tL3B1YmxpYy9kZXZlbG9wZXIvZW4vcHMvc2RrLzUxMTYuRENUX0ZpbHRlci5wZGYpCgoKICBjb25zdCBkY3RaaWdaYWcgPSBuZXcgSW50MzJBcnJheShbCiAgICAwLAogICAgMSwgOCwKICAgIDE2LCA5LCAyLAogICAgMywgMTAsIDE3LCAyNCwKICAgIDMyLCAyNSwgMTgsIDExLCA0LAogICAgNSwgMTIsIDE5LCAyNiwgMzMsIDQwLAogICAgNDgsIDQxLCAzNCwgMjcsIDIwLCAxMywgNiwKICAgIDcsIDE0LCAyMSwgMjgsIDM1LCA0MiwgNDksIDU2LAogICAgNTcsIDUwLCA0MywgMzYsIDI5LCAyMiwgMTUsCiAgICAyMywgMzAsIDM3LCA0NCwgNTEsIDU4LAogICAgNTksIDUyLCA0NSwgMzgsIDMxLAogICAgMzksIDQ2LCA1MywgNjAsCiAgICA2MSwgNTQsIDQ3LAogICAgNTUsIDYyLAogICAgNjMsCiAgXSk7CgogIGNvbnN0IGRjdENvczEgPSA0MDE3OyAvLyBjb3MocGkvMTYpCiAgY29uc3QgZGN0U2luMSA9IDc5OTsgLy8gc2luKHBpLzE2KQogIGNvbnN0IGRjdENvczMgPSAzNDA2OyAvLyBjb3MoMypwaS8xNikKICBjb25zdCBkY3RTaW4zID0gMjI3NjsgLy8gc2luKDMqcGkvMTYpCiAgY29uc3QgZGN0Q29zNiA9IDE1Njc7IC8vIGNvcyg2KnBpLzE2KQogIGNvbnN0IGRjdFNpbjYgPSAzNzg0OyAvLyBzaW4oNipwaS8xNikKICBjb25zdCBkY3RTcXJ0MiA9IDU3OTM7IC8vIHNxcnQoMikKICBjb25zdCBkY3RTcXJ0MWQyID0gMjg5NjsvLyBzcXJ0KDIpIC8gMgoKICBmdW5jdGlvbiBidWlsZEh1ZmZtYW5UYWJsZShjb2RlTGVuZ3RocywgdmFsdWVzKSB7CiAgICBsZXQgayA9IDA7CiAgICBjb25zdCBjb2RlID0gW107CiAgICBsZXQgbGVuZ3RoID0gMTY7CiAgICB3aGlsZSAobGVuZ3RoID4gMCAmJiAhY29kZUxlbmd0aHNbbGVuZ3RoIC0gMV0pIHsKICAgICAgLS1sZW5ndGg7CiAgICB9CiAgICBjb2RlLnB1c2goeyBjaGlsZHJlbjogW10sIGluZGV4OiAwIH0pOwoKICAgIGxldCBwID0gY29kZVswXTsKICAgIGxldCBxOwogICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgewogICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGNvZGVMZW5ndGhzW2ldOyBqKyspIHsKICAgICAgICBwID0gY29kZS5wb3AoKTsKICAgICAgICBwLmNoaWxkcmVuW3AuaW5kZXhdID0gdmFsdWVzW2tdOwogICAgICAgIHdoaWxlIChwLmluZGV4ID4gMCkgewogICAgICAgICAgcCA9IGNvZGUucG9wKCk7CiAgICAgICAgfQogICAgICAgIHAuaW5kZXgrKzsKICAgICAgICBjb2RlLnB1c2gocCk7CiAgICAgICAgd2hpbGUgKGNvZGUubGVuZ3RoIDw9IGkpIHsKICAgICAgICAgIGNvZGUucHVzaChxID0geyBjaGlsZHJlbjogW10sIGluZGV4OiAwIH0pOwogICAgICAgICAgcC5jaGlsZHJlbltwLmluZGV4XSA9IHEuY2hpbGRyZW47CiAgICAgICAgICBwID0gcTsKICAgICAgICB9CiAgICAgICAgaysrOwogICAgICB9CiAgICAgIGlmIChpICsgMSA8IGxlbmd0aCkgewogICAgICAgIC8vIHAgaGVyZSBwb2ludHMgdG8gbGFzdCBjb2RlCiAgICAgICAgY29kZS5wdXNoKHEgPSB7IGNoaWxkcmVuOiBbXSwgaW5kZXg6IDAgfSk7CiAgICAgICAgcC5jaGlsZHJlbltwLmluZGV4XSA9IHEuY2hpbGRyZW47CiAgICAgICAgcCA9IHE7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBjb2RlWzBdLmNoaWxkcmVuOwogIH0KCiAgZnVuY3Rpb24gZGVjb2RlU2NhbihkYXRhLCBpbml0aWFsT2Zmc2V0LAogICAgZnJhbWUsIGNvbXBvbmVudHMsIHJlc2V0SW50ZXJ2YWwsCiAgICBzcGVjdHJhbFN0YXJ0LCBzcGVjdHJhbEVuZCwKICAgIHN1Y2Nlc3NpdmVQcmV2LCBzdWNjZXNzaXZlKSB7CiAgICBjb25zdCB7IG1jdXNQZXJMaW5lLCBwcm9ncmVzc2l2ZSB9ID0gZnJhbWU7CgogICAgY29uc3Qgc3RhcnRPZmZzZXQgPSBpbml0aWFsT2Zmc2V0OwogICAgbGV0IG9mZnNldCA9IGluaXRpYWxPZmZzZXQ7CiAgICBsZXQgYml0c0RhdGEgPSAwOwogICAgbGV0IGJpdHNDb3VudCA9IDA7CiAgICBmdW5jdGlvbiByZWFkQml0KCkgewogICAgICBpZiAoYml0c0NvdW50ID4gMCkgewogICAgICAgIGJpdHNDb3VudC0tOwogICAgICAgIHJldHVybiAoYml0c0RhdGEgPj4gYml0c0NvdW50KSAmIDE7CiAgICAgIH0KICAgICAgYml0c0RhdGEgPSBkYXRhW29mZnNldCsrXTsKICAgICAgaWYgKGJpdHNEYXRhID09PSAweEZGKSB7CiAgICAgICAgY29uc3QgbmV4dEJ5dGUgPSBkYXRhW29mZnNldCsrXTsKICAgICAgICBpZiAobmV4dEJ5dGUpIHsKICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgdW5leHBlY3RlZCBtYXJrZXI6ICR7KChiaXRzRGF0YSA8PCA4KSB8IG5leHRCeXRlKS50b1N0cmluZygxNil9YCk7CiAgICAgICAgfQogICAgICAgIC8vIHVuc3R1ZmYgMAogICAgICB9CiAgICAgIGJpdHNDb3VudCA9IDc7CiAgICAgIHJldHVybiBiaXRzRGF0YSA+Pj4gNzsKICAgIH0KICAgIGZ1bmN0aW9uIGRlY29kZUh1ZmZtYW4odHJlZSkgewogICAgICBsZXQgbm9kZSA9IHRyZWU7CiAgICAgIGxldCBiaXQ7CiAgICAgIHdoaWxlICgoYml0ID0gcmVhZEJpdCgpKSAhPT0gbnVsbCkgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbmQtYXNzaWduCiAgICAgICAgbm9kZSA9IG5vZGVbYml0XTsKICAgICAgICBpZiAodHlwZW9mIG5vZGUgPT09ICdudW1iZXInKSB7CiAgICAgICAgICByZXR1cm4gbm9kZTsKICAgICAgICB9CiAgICAgICAgaWYgKHR5cGVvZiBub2RlICE9PSAnb2JqZWN0JykgewogICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdpbnZhbGlkIGh1ZmZtYW4gc2VxdWVuY2UnKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIG51bGw7CiAgICB9CiAgICBmdW5jdGlvbiByZWNlaXZlKGluaXRpYWxMZW5ndGgpIHsKICAgICAgbGV0IGxlbmd0aCA9IGluaXRpYWxMZW5ndGg7CiAgICAgIGxldCBuID0gMDsKICAgICAgd2hpbGUgKGxlbmd0aCA+IDApIHsKICAgICAgICBjb25zdCBiaXQgPSByZWFkQml0KCk7CiAgICAgICAgaWYgKGJpdCA9PT0gbnVsbCkgewogICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDsKICAgICAgICB9CiAgICAgICAgbiA9IChuIDw8IDEpIHwgYml0OwogICAgICAgIC0tbGVuZ3RoOwogICAgICB9CiAgICAgIHJldHVybiBuOwogICAgfQogICAgZnVuY3Rpb24gcmVjZWl2ZUFuZEV4dGVuZChsZW5ndGgpIHsKICAgICAgY29uc3QgbiA9IHJlY2VpdmUobGVuZ3RoKTsKICAgICAgaWYgKG4gPj0gMSA8PCAobGVuZ3RoIC0gMSkpIHsKICAgICAgICByZXR1cm4gbjsKICAgICAgfQogICAgICByZXR1cm4gbiArICgtMSA8PCBsZW5ndGgpICsgMTsKICAgIH0KICAgIGZ1bmN0aW9uIGRlY29kZUJhc2VsaW5lKGNvbXBvbmVudCwgenopIHsKICAgICAgY29uc3QgdCA9IGRlY29kZUh1ZmZtYW4oY29tcG9uZW50Lmh1ZmZtYW5UYWJsZURDKTsKICAgICAgY29uc3QgZGlmZiA9IHQgPT09IDAgPyAwIDogcmVjZWl2ZUFuZEV4dGVuZCh0KTsKICAgICAgY29tcG9uZW50LnByZWQgKz0gZGlmZjsKICAgICAgenpbMF0gPSBjb21wb25lbnQucHJlZDsKICAgICAgbGV0IGsgPSAxOwogICAgICB3aGlsZSAoayA8IDY0KSB7CiAgICAgICAgY29uc3QgcnMgPSBkZWNvZGVIdWZmbWFuKGNvbXBvbmVudC5odWZmbWFuVGFibGVBQyk7CiAgICAgICAgY29uc3QgcyA9IHJzICYgMTU7CiAgICAgICAgY29uc3QgciA9IHJzID4+IDQ7CiAgICAgICAgaWYgKHMgPT09IDApIHsKICAgICAgICAgIGlmIChyIDwgMTUpIHsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgICBrICs9IDE2OwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBrICs9IHI7CiAgICAgICAgICBjb25zdCB6ID0gZGN0WmlnWmFnW2tdOwogICAgICAgICAgenpbel0gPSByZWNlaXZlQW5kRXh0ZW5kKHMpOwogICAgICAgICAgaysrOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgZnVuY3Rpb24gZGVjb2RlRENGaXJzdChjb21wb25lbnQsIHp6KSB7CiAgICAgIGNvbnN0IHQgPSBkZWNvZGVIdWZmbWFuKGNvbXBvbmVudC5odWZmbWFuVGFibGVEQyk7CiAgICAgIGNvbnN0IGRpZmYgPSB0ID09PSAwID8gMCA6IChyZWNlaXZlQW5kRXh0ZW5kKHQpIDw8IHN1Y2Nlc3NpdmUpOwogICAgICBjb21wb25lbnQucHJlZCArPSBkaWZmOwogICAgICB6elswXSA9IGNvbXBvbmVudC5wcmVkOwogICAgfQogICAgZnVuY3Rpb24gZGVjb2RlRENTdWNjZXNzaXZlKGNvbXBvbmVudCwgenopIHsKICAgICAgenpbMF0gfD0gcmVhZEJpdCgpIDw8IHN1Y2Nlc3NpdmU7CiAgICB9CiAgICBsZXQgZW9icnVuID0gMDsKICAgIGZ1bmN0aW9uIGRlY29kZUFDRmlyc3QoY29tcG9uZW50LCB6eikgewogICAgICBpZiAoZW9icnVuID4gMCkgewogICAgICAgIGVvYnJ1bi0tOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBsZXQgayA9IHNwZWN0cmFsU3RhcnQ7CiAgICAgIGNvbnN0IGUgPSBzcGVjdHJhbEVuZDsKICAgICAgd2hpbGUgKGsgPD0gZSkgewogICAgICAgIGNvbnN0IHJzID0gZGVjb2RlSHVmZm1hbihjb21wb25lbnQuaHVmZm1hblRhYmxlQUMpOwogICAgICAgIGNvbnN0IHMgPSBycyAmIDE1OwogICAgICAgIGNvbnN0IHIgPSBycyA+PiA0OwogICAgICAgIGlmIChzID09PSAwKSB7CiAgICAgICAgICBpZiAociA8IDE1KSB7CiAgICAgICAgICAgIGVvYnJ1biA9IHJlY2VpdmUocikgKyAoMSA8PCByKSAtIDE7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgICAgayArPSAxNjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgayArPSByOwogICAgICAgICAgY29uc3QgeiA9IGRjdFppZ1phZ1trXTsKICAgICAgICAgIHp6W3pdID0gcmVjZWl2ZUFuZEV4dGVuZChzKSAqICgxIDw8IHN1Y2Nlc3NpdmUpOwogICAgICAgICAgaysrOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgbGV0IHN1Y2Nlc3NpdmVBQ1N0YXRlID0gMDsKICAgIGxldCBzdWNjZXNzaXZlQUNOZXh0VmFsdWU7CiAgICBmdW5jdGlvbiBkZWNvZGVBQ1N1Y2Nlc3NpdmUoY29tcG9uZW50LCB6eikgewogICAgICBsZXQgayA9IHNwZWN0cmFsU3RhcnQ7CiAgICAgIGNvbnN0IGUgPSBzcGVjdHJhbEVuZDsKICAgICAgbGV0IHIgPSAwOwogICAgICB3aGlsZSAoayA8PSBlKSB7CiAgICAgICAgY29uc3QgeiA9IGRjdFppZ1phZ1trXTsKICAgICAgICBjb25zdCBkaXJlY3Rpb24gPSB6elt6XSA8IDAgPyAtMSA6IDE7CiAgICAgICAgc3dpdGNoIChzdWNjZXNzaXZlQUNTdGF0ZSkgewogICAgICAgICAgY2FzZSAwOiB7IC8vIGluaXRpYWwgc3RhdGUKICAgICAgICAgICAgY29uc3QgcnMgPSBkZWNvZGVIdWZmbWFuKGNvbXBvbmVudC5odWZmbWFuVGFibGVBQyk7CiAgICAgICAgICAgIGNvbnN0IHMgPSBycyAmIDE1OwogICAgICAgICAgICByID0gcnMgPj4gNDsKICAgICAgICAgICAgaWYgKHMgPT09IDApIHsKICAgICAgICAgICAgICBpZiAociA8IDE1KSB7CiAgICAgICAgICAgICAgICBlb2JydW4gPSByZWNlaXZlKHIpICsgKDEgPDwgcik7CiAgICAgICAgICAgICAgICBzdWNjZXNzaXZlQUNTdGF0ZSA9IDQ7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHIgPSAxNjsKICAgICAgICAgICAgICAgIHN1Y2Nlc3NpdmVBQ1N0YXRlID0gMTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgaWYgKHMgIT09IDEpIHsKICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignaW52YWxpZCBBQ24gZW5jb2RpbmcnKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgc3VjY2Vzc2l2ZUFDTmV4dFZhbHVlID0gcmVjZWl2ZUFuZEV4dGVuZChzKTsKICAgICAgICAgICAgICBzdWNjZXNzaXZlQUNTdGF0ZSA9IHIgPyAyIDogMzsKICAgICAgICAgICAgfQogICAgICAgICAgICBjb250aW51ZTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1jb250aW51ZQogICAgICAgICAgfQogICAgICAgICAgY2FzZSAxOiAvLyBza2lwcGluZyByIHplcm8gaXRlbXMKICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgaWYgKHp6W3pdKSB7CiAgICAgICAgICAgICAgenpbel0gKz0gKHJlYWRCaXQoKSA8PCBzdWNjZXNzaXZlKSAqIGRpcmVjdGlvbjsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICByLS07CiAgICAgICAgICAgICAgaWYgKHIgPT09IDApIHsKICAgICAgICAgICAgICAgIHN1Y2Nlc3NpdmVBQ1N0YXRlID0gc3VjY2Vzc2l2ZUFDU3RhdGUgPT09IDIgPyAzIDogMDsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlIDM6IC8vIHNldCB2YWx1ZSBmb3IgYSB6ZXJvIGl0ZW0KICAgICAgICAgICAgaWYgKHp6W3pdKSB7CiAgICAgICAgICAgICAgenpbel0gKz0gKHJlYWRCaXQoKSA8PCBzdWNjZXNzaXZlKSAqIGRpcmVjdGlvbjsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB6elt6XSA9IHN1Y2Nlc3NpdmVBQ05leHRWYWx1ZSA8PCBzdWNjZXNzaXZlOwogICAgICAgICAgICAgIHN1Y2Nlc3NpdmVBQ1N0YXRlID0gMDsKICAgICAgICAgICAgfQogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgNDogLy8gZW9iCiAgICAgICAgICAgIGlmICh6elt6XSkgewogICAgICAgICAgICAgIHp6W3pdICs9IChyZWFkQml0KCkgPDwgc3VjY2Vzc2l2ZSkgKiBkaXJlY3Rpb247CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICAgIGsrKzsKICAgICAgfQogICAgICBpZiAoc3VjY2Vzc2l2ZUFDU3RhdGUgPT09IDQpIHsKICAgICAgICBlb2JydW4tLTsKICAgICAgICBpZiAoZW9icnVuID09PSAwKSB7CiAgICAgICAgICBzdWNjZXNzaXZlQUNTdGF0ZSA9IDA7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICBmdW5jdGlvbiBkZWNvZGVNY3UoY29tcG9uZW50LCBkZWNvZGVGdW5jdGlvbiwgbWN1LCByb3csIGNvbCkgewogICAgICBjb25zdCBtY3VSb3cgPSAobWN1IC8gbWN1c1BlckxpbmUpIHwgMDsKICAgICAgY29uc3QgbWN1Q29sID0gbWN1ICUgbWN1c1BlckxpbmU7CiAgICAgIGNvbnN0IGJsb2NrUm93ID0gKG1jdVJvdyAqIGNvbXBvbmVudC52KSArIHJvdzsKICAgICAgY29uc3QgYmxvY2tDb2wgPSAobWN1Q29sICogY29tcG9uZW50LmgpICsgY29sOwogICAgICBkZWNvZGVGdW5jdGlvbihjb21wb25lbnQsIGNvbXBvbmVudC5ibG9ja3NbYmxvY2tSb3ddW2Jsb2NrQ29sXSk7CiAgICB9CiAgICBmdW5jdGlvbiBkZWNvZGVCbG9jayhjb21wb25lbnQsIGRlY29kZUZ1bmN0aW9uLCBtY3UpIHsKICAgICAgY29uc3QgYmxvY2tSb3cgPSAobWN1IC8gY29tcG9uZW50LmJsb2Nrc1BlckxpbmUpIHwgMDsKICAgICAgY29uc3QgYmxvY2tDb2wgPSBtY3UgJSBjb21wb25lbnQuYmxvY2tzUGVyTGluZTsKICAgICAgZGVjb2RlRnVuY3Rpb24oY29tcG9uZW50LCBjb21wb25lbnQuYmxvY2tzW2Jsb2NrUm93XVtibG9ja0NvbF0pOwogICAgfQoKICAgIGNvbnN0IGNvbXBvbmVudHNMZW5ndGggPSBjb21wb25lbnRzLmxlbmd0aDsKICAgIGxldCBjb21wb25lbnQ7CiAgICBsZXQgaTsKICAgIGxldCBqOwogICAgbGV0IGs7CiAgICBsZXQgbjsKICAgIGxldCBkZWNvZGVGbjsKICAgIGlmIChwcm9ncmVzc2l2ZSkgewogICAgICBpZiAoc3BlY3RyYWxTdGFydCA9PT0gMCkgewogICAgICAgIGRlY29kZUZuID0gc3VjY2Vzc2l2ZVByZXYgPT09IDAgPyBkZWNvZGVEQ0ZpcnN0IDogZGVjb2RlRENTdWNjZXNzaXZlOwogICAgICB9IGVsc2UgewogICAgICAgIGRlY29kZUZuID0gc3VjY2Vzc2l2ZVByZXYgPT09IDAgPyBkZWNvZGVBQ0ZpcnN0IDogZGVjb2RlQUNTdWNjZXNzaXZlOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICBkZWNvZGVGbiA9IGRlY29kZUJhc2VsaW5lOwogICAgfQoKICAgIGxldCBtY3UgPSAwOwogICAgbGV0IG1hcmtlcjsKICAgIGxldCBtY3VFeHBlY3RlZDsKICAgIGlmIChjb21wb25lbnRzTGVuZ3RoID09PSAxKSB7CiAgICAgIG1jdUV4cGVjdGVkID0gY29tcG9uZW50c1swXS5ibG9ja3NQZXJMaW5lICogY29tcG9uZW50c1swXS5ibG9ja3NQZXJDb2x1bW47CiAgICB9IGVsc2UgewogICAgICBtY3VFeHBlY3RlZCA9IG1jdXNQZXJMaW5lICogZnJhbWUubWN1c1BlckNvbHVtbjsKICAgIH0KCiAgICBjb25zdCB1c2VkUmVzZXRJbnRlcnZhbCA9IHJlc2V0SW50ZXJ2YWwgfHwgbWN1RXhwZWN0ZWQ7CgogICAgd2hpbGUgKG1jdSA8IG1jdUV4cGVjdGVkKSB7CiAgICAgIC8vIHJlc2V0IGludGVydmFsIHN0dWZmCiAgICAgIGZvciAoaSA9IDA7IGkgPCBjb21wb25lbnRzTGVuZ3RoOyBpKyspIHsKICAgICAgICBjb21wb25lbnRzW2ldLnByZWQgPSAwOwogICAgICB9CiAgICAgIGVvYnJ1biA9IDA7CgogICAgICBpZiAoY29tcG9uZW50c0xlbmd0aCA9PT0gMSkgewogICAgICAgIGNvbXBvbmVudCA9IGNvbXBvbmVudHNbMF07CiAgICAgICAgZm9yIChuID0gMDsgbiA8IHVzZWRSZXNldEludGVydmFsOyBuKyspIHsKICAgICAgICAgIGRlY29kZUJsb2NrKGNvbXBvbmVudCwgZGVjb2RlRm4sIG1jdSk7CiAgICAgICAgICBtY3UrKzsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZm9yIChuID0gMDsgbiA8IHVzZWRSZXNldEludGVydmFsOyBuKyspIHsKICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBjb21wb25lbnRzTGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgY29tcG9uZW50ID0gY29tcG9uZW50c1tpXTsKICAgICAgICAgICAgY29uc3QgeyBoLCB2IH0gPSBjb21wb25lbnQ7CiAgICAgICAgICAgIGZvciAoaiA9IDA7IGogPCB2OyBqKyspIHsKICAgICAgICAgICAgICBmb3IgKGsgPSAwOyBrIDwgaDsgaysrKSB7CiAgICAgICAgICAgICAgICBkZWNvZGVNY3UoY29tcG9uZW50LCBkZWNvZGVGbiwgbWN1LCBqLCBrKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIG1jdSsrOwoKICAgICAgICAgIC8vIElmIHdlJ3ZlIHJlYWNoZWQgb3VyIGV4cGVjdGVkIE1DVSdzLCBzdG9wIGRlY29kaW5nCiAgICAgICAgICBpZiAobWN1ID09PSBtY3VFeHBlY3RlZCkgewogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIC8vIGZpbmQgbWFya2VyCiAgICAgIGJpdHNDb3VudCA9IDA7CiAgICAgIG1hcmtlciA9IChkYXRhW29mZnNldF0gPDwgOCkgfCBkYXRhW29mZnNldCArIDFdOwogICAgICBpZiAobWFya2VyIDwgMHhGRjAwKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdtYXJrZXIgd2FzIG5vdCBmb3VuZCcpOwogICAgICB9CgogICAgICBpZiAobWFya2VyID49IDB4RkZEMCAmJiBtYXJrZXIgPD0gMHhGRkQ3KSB7IC8vIFJTVHgKICAgICAgICBvZmZzZXQgKz0gMjsKICAgICAgfSBlbHNlIHsKICAgICAgICBicmVhazsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBvZmZzZXQgLSBzdGFydE9mZnNldDsKICB9CgogIGZ1bmN0aW9uIGJ1aWxkQ29tcG9uZW50RGF0YShmcmFtZSwgY29tcG9uZW50KSB7CiAgICBjb25zdCBsaW5lcyA9IFtdOwogICAgY29uc3QgeyBibG9ja3NQZXJMaW5lLCBibG9ja3NQZXJDb2x1bW4gfSA9IGNvbXBvbmVudDsKICAgIGNvbnN0IHNhbXBsZXNQZXJMaW5lID0gYmxvY2tzUGVyTGluZSA8PCAzOwogICAgY29uc3QgUiA9IG5ldyBJbnQzMkFycmF5KDY0KTsKICAgIGNvbnN0IHIgPSBuZXcgVWludDhBcnJheSg2NCk7CgogICAgLy8gQSBwb3J0IG9mIHBvcHBsZXIncyBJRENUIG1ldGhvZCB3aGljaCBpbiB0dXJuIGlzIHRha2VuIGZyb206CiAgICAvLyAgIENocmlzdG9waCBMb2VmZmxlciwgQWRyaWFhbiBMaWd0ZW5iZXJnLCBHZW9yZ2UgUy4gTW9zY2h5dHosCiAgICAvLyAgICJQcmFjdGljYWwgRmFzdCAxLUQgRENUIEFsZ29yaXRobXMgd2l0aCAxMSBNdWx0aXBsaWNhdGlvbnMiLAogICAgLy8gICBJRUVFIEludGwuIENvbmYuIG9uIEFjb3VzdGljcywgU3BlZWNoICYgU2lnbmFsIFByb2Nlc3NpbmcsIDE5ODksCiAgICAvLyAgIDk4OC05OTEuCiAgICBmdW5jdGlvbiBxdWFudGl6ZUFuZEludmVyc2UoenosIGRhdGFPdXQsIGRhdGFJbikgewogICAgICBjb25zdCBxdCA9IGNvbXBvbmVudC5xdWFudGl6YXRpb25UYWJsZTsKICAgICAgbGV0IHYwOwogICAgICBsZXQgdjE7CiAgICAgIGxldCB2MjsKICAgICAgbGV0IHYzOwogICAgICBsZXQgdjQ7CiAgICAgIGxldCB2NTsKICAgICAgbGV0IHY2OwogICAgICBsZXQgdjc7CiAgICAgIGxldCB0OwogICAgICBjb25zdCBwID0gZGF0YUluOwogICAgICBsZXQgaTsKCiAgICAgIC8vIGRlcXVhbnQKICAgICAgZm9yIChpID0gMDsgaSA8IDY0OyBpKyspIHsKICAgICAgICBwW2ldID0genpbaV0gKiBxdFtpXTsKICAgICAgfQoKICAgICAgLy8gaW52ZXJzZSBEQ1Qgb24gcm93cwogICAgICBmb3IgKGkgPSAwOyBpIDwgODsgKytpKSB7CiAgICAgICAgY29uc3Qgcm93ID0gOCAqIGk7CgogICAgICAgIC8vIGNoZWNrIGZvciBhbGwtemVybyBBQyBjb2VmZmljaWVudHMKICAgICAgICBpZiAocFsxICsgcm93XSA9PT0gMCAmJiBwWzIgKyByb3ddID09PSAwICYmIHBbMyArIHJvd10gPT09IDAKICAgICAgICAgICYmIHBbNCArIHJvd10gPT09IDAgJiYgcFs1ICsgcm93XSA9PT0gMCAmJiBwWzYgKyByb3ddID09PSAwCiAgICAgICAgICAmJiBwWzcgKyByb3ddID09PSAwKSB7CiAgICAgICAgICB0ID0gKChkY3RTcXJ0MiAqIHBbMCArIHJvd10pICsgNTEyKSA+PiAxMDsKICAgICAgICAgIHBbMCArIHJvd10gPSB0OwogICAgICAgICAgcFsxICsgcm93XSA9IHQ7CiAgICAgICAgICBwWzIgKyByb3ddID0gdDsKICAgICAgICAgIHBbMyArIHJvd10gPSB0OwogICAgICAgICAgcFs0ICsgcm93XSA9IHQ7CiAgICAgICAgICBwWzUgKyByb3ddID0gdDsKICAgICAgICAgIHBbNiArIHJvd10gPSB0OwogICAgICAgICAgcFs3ICsgcm93XSA9IHQ7CiAgICAgICAgICBjb250aW51ZTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1jb250aW51ZQogICAgICAgIH0KCiAgICAgICAgLy8gc3RhZ2UgNAogICAgICAgIHYwID0gKChkY3RTcXJ0MiAqIHBbMCArIHJvd10pICsgMTI4KSA+PiA4OwogICAgICAgIHYxID0gKChkY3RTcXJ0MiAqIHBbNCArIHJvd10pICsgMTI4KSA+PiA4OwogICAgICAgIHYyID0gcFsyICsgcm93XTsKICAgICAgICB2MyA9IHBbNiArIHJvd107CiAgICAgICAgdjQgPSAoKGRjdFNxcnQxZDIgKiAocFsxICsgcm93XSAtIHBbNyArIHJvd10pKSArIDEyOCkgPj4gODsKICAgICAgICB2NyA9ICgoZGN0U3FydDFkMiAqIChwWzEgKyByb3ddICsgcFs3ICsgcm93XSkpICsgMTI4KSA+PiA4OwogICAgICAgIHY1ID0gcFszICsgcm93XSA8PCA0OwogICAgICAgIHY2ID0gcFs1ICsgcm93XSA8PCA0OwoKICAgICAgICAvLyBzdGFnZSAzCiAgICAgICAgdCA9ICh2MCAtIHYxICsgMSkgPj4gMTsKICAgICAgICB2MCA9ICh2MCArIHYxICsgMSkgPj4gMTsKICAgICAgICB2MSA9IHQ7CiAgICAgICAgdCA9ICgodjIgKiBkY3RTaW42KSArICh2MyAqIGRjdENvczYpICsgMTI4KSA+PiA4OwogICAgICAgIHYyID0gKCh2MiAqIGRjdENvczYpIC0gKHYzICogZGN0U2luNikgKyAxMjgpID4+IDg7CiAgICAgICAgdjMgPSB0OwogICAgICAgIHQgPSAodjQgLSB2NiArIDEpID4+IDE7CiAgICAgICAgdjQgPSAodjQgKyB2NiArIDEpID4+IDE7CiAgICAgICAgdjYgPSB0OwogICAgICAgIHQgPSAodjcgKyB2NSArIDEpID4+IDE7CiAgICAgICAgdjUgPSAodjcgLSB2NSArIDEpID4+IDE7CiAgICAgICAgdjcgPSB0OwoKICAgICAgICAvLyBzdGFnZSAyCiAgICAgICAgdCA9ICh2MCAtIHYzICsgMSkgPj4gMTsKICAgICAgICB2MCA9ICh2MCArIHYzICsgMSkgPj4gMTsKICAgICAgICB2MyA9IHQ7CiAgICAgICAgdCA9ICh2MSAtIHYyICsgMSkgPj4gMTsKICAgICAgICB2MSA9ICh2MSArIHYyICsgMSkgPj4gMTsKICAgICAgICB2MiA9IHQ7CiAgICAgICAgdCA9ICgodjQgKiBkY3RTaW4zKSArICh2NyAqIGRjdENvczMpICsgMjA0OCkgPj4gMTI7CiAgICAgICAgdjQgPSAoKHY0ICogZGN0Q29zMykgLSAodjcgKiBkY3RTaW4zKSArIDIwNDgpID4+IDEyOwogICAgICAgIHY3ID0gdDsKICAgICAgICB0ID0gKCh2NSAqIGRjdFNpbjEpICsgKHY2ICogZGN0Q29zMSkgKyAyMDQ4KSA+PiAxMjsKICAgICAgICB2NSA9ICgodjUgKiBkY3RDb3MxKSAtICh2NiAqIGRjdFNpbjEpICsgMjA0OCkgPj4gMTI7CiAgICAgICAgdjYgPSB0OwoKICAgICAgICAvLyBzdGFnZSAxCiAgICAgICAgcFswICsgcm93XSA9IHYwICsgdjc7CiAgICAgICAgcFs3ICsgcm93XSA9IHYwIC0gdjc7CiAgICAgICAgcFsxICsgcm93XSA9IHYxICsgdjY7CiAgICAgICAgcFs2ICsgcm93XSA9IHYxIC0gdjY7CiAgICAgICAgcFsyICsgcm93XSA9IHYyICsgdjU7CiAgICAgICAgcFs1ICsgcm93XSA9IHYyIC0gdjU7CiAgICAgICAgcFszICsgcm93XSA9IHYzICsgdjQ7CiAgICAgICAgcFs0ICsgcm93XSA9IHYzIC0gdjQ7CiAgICAgIH0KCiAgICAgIC8vIGludmVyc2UgRENUIG9uIGNvbHVtbnMKICAgICAgZm9yIChpID0gMDsgaSA8IDg7ICsraSkgewogICAgICAgIGNvbnN0IGNvbCA9IGk7CgogICAgICAgIC8vIGNoZWNrIGZvciBhbGwtemVybyBBQyBjb2VmZmljaWVudHMKICAgICAgICBpZiAocFsoMSAqIDgpICsgY29sXSA9PT0gMCAmJiBwWygyICogOCkgKyBjb2xdID09PSAwICYmIHBbKDMgKiA4KSArIGNvbF0gPT09IDAKICAgICAgICAgICYmIHBbKDQgKiA4KSArIGNvbF0gPT09IDAgJiYgcFsoNSAqIDgpICsgY29sXSA9PT0gMCAmJiBwWyg2ICogOCkgKyBjb2xdID09PSAwCiAgICAgICAgICAmJiBwWyg3ICogOCkgKyBjb2xdID09PSAwKSB7CiAgICAgICAgICB0ID0gKChkY3RTcXJ0MiAqIGRhdGFJbltpICsgMF0pICsgODE5MikgPj4gMTQ7CiAgICAgICAgICBwWygwICogOCkgKyBjb2xdID0gdDsKICAgICAgICAgIHBbKDEgKiA4KSArIGNvbF0gPSB0OwogICAgICAgICAgcFsoMiAqIDgpICsgY29sXSA9IHQ7CiAgICAgICAgICBwWygzICogOCkgKyBjb2xdID0gdDsKICAgICAgICAgIHBbKDQgKiA4KSArIGNvbF0gPSB0OwogICAgICAgICAgcFsoNSAqIDgpICsgY29sXSA9IHQ7CiAgICAgICAgICBwWyg2ICogOCkgKyBjb2xdID0gdDsKICAgICAgICAgIHBbKDcgKiA4KSArIGNvbF0gPSB0OwogICAgICAgICAgY29udGludWU7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tY29udGludWUKICAgICAgICB9CgogICAgICAgIC8vIHN0YWdlIDQKICAgICAgICB2MCA9ICgoZGN0U3FydDIgKiBwWygwICogOCkgKyBjb2xdKSArIDIwNDgpID4+IDEyOwogICAgICAgIHYxID0gKChkY3RTcXJ0MiAqIHBbKDQgKiA4KSArIGNvbF0pICsgMjA0OCkgPj4gMTI7CiAgICAgICAgdjIgPSBwWygyICogOCkgKyBjb2xdOwogICAgICAgIHYzID0gcFsoNiAqIDgpICsgY29sXTsKICAgICAgICB2NCA9ICgoZGN0U3FydDFkMiAqIChwWygxICogOCkgKyBjb2xdIC0gcFsoNyAqIDgpICsgY29sXSkpICsgMjA0OCkgPj4gMTI7CiAgICAgICAgdjcgPSAoKGRjdFNxcnQxZDIgKiAocFsoMSAqIDgpICsgY29sXSArIHBbKDcgKiA4KSArIGNvbF0pKSArIDIwNDgpID4+IDEyOwogICAgICAgIHY1ID0gcFsoMyAqIDgpICsgY29sXTsKICAgICAgICB2NiA9IHBbKDUgKiA4KSArIGNvbF07CgogICAgICAgIC8vIHN0YWdlIDMKICAgICAgICB0ID0gKHYwIC0gdjEgKyAxKSA+PiAxOwogICAgICAgIHYwID0gKHYwICsgdjEgKyAxKSA+PiAxOwogICAgICAgIHYxID0gdDsKICAgICAgICB0ID0gKCh2MiAqIGRjdFNpbjYpICsgKHYzICogZGN0Q29zNikgKyAyMDQ4KSA+PiAxMjsKICAgICAgICB2MiA9ICgodjIgKiBkY3RDb3M2KSAtICh2MyAqIGRjdFNpbjYpICsgMjA0OCkgPj4gMTI7CiAgICAgICAgdjMgPSB0OwogICAgICAgIHQgPSAodjQgLSB2NiArIDEpID4+IDE7CiAgICAgICAgdjQgPSAodjQgKyB2NiArIDEpID4+IDE7CiAgICAgICAgdjYgPSB0OwogICAgICAgIHQgPSAodjcgKyB2NSArIDEpID4+IDE7CiAgICAgICAgdjUgPSAodjcgLSB2NSArIDEpID4+IDE7CiAgICAgICAgdjcgPSB0OwoKICAgICAgICAvLyBzdGFnZSAyCiAgICAgICAgdCA9ICh2MCAtIHYzICsgMSkgPj4gMTsKICAgICAgICB2MCA9ICh2MCArIHYzICsgMSkgPj4gMTsKICAgICAgICB2MyA9IHQ7CiAgICAgICAgdCA9ICh2MSAtIHYyICsgMSkgPj4gMTsKICAgICAgICB2MSA9ICh2MSArIHYyICsgMSkgPj4gMTsKICAgICAgICB2MiA9IHQ7CiAgICAgICAgdCA9ICgodjQgKiBkY3RTaW4zKSArICh2NyAqIGRjdENvczMpICsgMjA0OCkgPj4gMTI7CiAgICAgICAgdjQgPSAoKHY0ICogZGN0Q29zMykgLSAodjcgKiBkY3RTaW4zKSArIDIwNDgpID4+IDEyOwogICAgICAgIHY3ID0gdDsKICAgICAgICB0ID0gKCh2NSAqIGRjdFNpbjEpICsgKHY2ICogZGN0Q29zMSkgKyAyMDQ4KSA+PiAxMjsKICAgICAgICB2NSA9ICgodjUgKiBkY3RDb3MxKSAtICh2NiAqIGRjdFNpbjEpICsgMjA0OCkgPj4gMTI7CiAgICAgICAgdjYgPSB0OwoKICAgICAgICAvLyBzdGFnZSAxCiAgICAgICAgcFsoMCAqIDgpICsgY29sXSA9IHYwICsgdjc7CiAgICAgICAgcFsoNyAqIDgpICsgY29sXSA9IHYwIC0gdjc7CiAgICAgICAgcFsoMSAqIDgpICsgY29sXSA9IHYxICsgdjY7CiAgICAgICAgcFsoNiAqIDgpICsgY29sXSA9IHYxIC0gdjY7CiAgICAgICAgcFsoMiAqIDgpICsgY29sXSA9IHYyICsgdjU7CiAgICAgICAgcFsoNSAqIDgpICsgY29sXSA9IHYyIC0gdjU7CiAgICAgICAgcFsoMyAqIDgpICsgY29sXSA9IHYzICsgdjQ7CiAgICAgICAgcFsoNCAqIDgpICsgY29sXSA9IHYzIC0gdjQ7CiAgICAgIH0KCiAgICAgIC8vIGNvbnZlcnQgdG8gOC1iaXQgaW50ZWdlcnMKICAgICAgZm9yIChpID0gMDsgaSA8IDY0OyArK2kpIHsKICAgICAgICBjb25zdCBzYW1wbGUgPSAxMjggKyAoKHBbaV0gKyA4KSA+PiA0KTsKICAgICAgICBpZiAoc2FtcGxlIDwgMCkgewogICAgICAgICAgZGF0YU91dFtpXSA9IDA7CiAgICAgICAgfSBlbHNlIGlmIChzYW1wbGUgPiAwWEZGKSB7CiAgICAgICAgICBkYXRhT3V0W2ldID0gMHhGRjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgZGF0YU91dFtpXSA9IHNhbXBsZTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBmb3IgKGxldCBibG9ja1JvdyA9IDA7IGJsb2NrUm93IDwgYmxvY2tzUGVyQ29sdW1uOyBibG9ja1JvdysrKSB7CiAgICAgIGNvbnN0IHNjYW5MaW5lID0gYmxvY2tSb3cgPDwgMzsKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA4OyBpKyspIHsKICAgICAgICBsaW5lcy5wdXNoKG5ldyBVaW50OEFycmF5KHNhbXBsZXNQZXJMaW5lKSk7CiAgICAgIH0KICAgICAgZm9yIChsZXQgYmxvY2tDb2wgPSAwOyBibG9ja0NvbCA8IGJsb2Nrc1BlckxpbmU7IGJsb2NrQ29sKyspIHsKICAgICAgICBxdWFudGl6ZUFuZEludmVyc2UoY29tcG9uZW50LmJsb2Nrc1tibG9ja1Jvd11bYmxvY2tDb2xdLCByLCBSKTsKCiAgICAgICAgbGV0IG9mZnNldCA9IDA7CiAgICAgICAgY29uc3Qgc2FtcGxlID0gYmxvY2tDb2wgPDwgMzsKICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IDg7IGorKykgewogICAgICAgICAgY29uc3QgbGluZSA9IGxpbmVzW3NjYW5MaW5lICsgal07CiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDg7IGkrKykgewogICAgICAgICAgICBsaW5lW3NhbXBsZSArIGldID0gcltvZmZzZXQrK107CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICByZXR1cm4gbGluZXM7CiAgfQoKICBjbGFzcyBKcGVnU3RyZWFtUmVhZGVyIHsKICAgIGNvbnN0cnVjdG9yKCkgewogICAgICB0aGlzLmpmaWYgPSBudWxsOwogICAgICB0aGlzLmFkb2JlID0gbnVsbDsKCiAgICAgIHRoaXMucXVhbnRpemF0aW9uVGFibGVzID0gW107CiAgICAgIHRoaXMuaHVmZm1hblRhYmxlc0FDID0gW107CiAgICAgIHRoaXMuaHVmZm1hblRhYmxlc0RDID0gW107CiAgICAgIHRoaXMucmVzZXRGcmFtZXMoKTsKICAgIH0KCiAgICByZXNldEZyYW1lcygpIHsKICAgICAgdGhpcy5mcmFtZXMgPSBbXTsKICAgIH0KCiAgICBwYXJzZShkYXRhKSB7CiAgICAgIGxldCBvZmZzZXQgPSAwOwogICAgICAvLyBjb25zdCB7IGxlbmd0aCB9ID0gZGF0YTsKICAgICAgZnVuY3Rpb24gcmVhZFVpbnQxNigpIHsKICAgICAgICBjb25zdCB2YWx1ZSA9IChkYXRhW29mZnNldF0gPDwgOCkgfCBkYXRhW29mZnNldCArIDFdOwogICAgICAgIG9mZnNldCArPSAyOwogICAgICAgIHJldHVybiB2YWx1ZTsKICAgICAgfQogICAgICBmdW5jdGlvbiByZWFkRGF0YUJsb2NrKCkgewogICAgICAgIGNvbnN0IGxlbmd0aCA9IHJlYWRVaW50MTYoKTsKICAgICAgICBjb25zdCBhcnJheSA9IGRhdGEuc3ViYXJyYXkob2Zmc2V0LCBvZmZzZXQgKyBsZW5ndGggLSAyKTsKICAgICAgICBvZmZzZXQgKz0gYXJyYXkubGVuZ3RoOwogICAgICAgIHJldHVybiBhcnJheTsKICAgICAgfQogICAgICBmdW5jdGlvbiBwcmVwYXJlQ29tcG9uZW50cyhmcmFtZSkgewogICAgICAgIGxldCBtYXhIID0gMDsKICAgICAgICBsZXQgbWF4ViA9IDA7CiAgICAgICAgbGV0IGNvbXBvbmVudDsKICAgICAgICBsZXQgY29tcG9uZW50SWQ7CiAgICAgICAgZm9yIChjb21wb25lbnRJZCBpbiBmcmFtZS5jb21wb25lbnRzKSB7CiAgICAgICAgICBpZiAoZnJhbWUuY29tcG9uZW50cy5oYXNPd25Qcm9wZXJ0eShjb21wb25lbnRJZCkpIHsKICAgICAgICAgICAgY29tcG9uZW50ID0gZnJhbWUuY29tcG9uZW50c1tjb21wb25lbnRJZF07CiAgICAgICAgICAgIGlmIChtYXhIIDwgY29tcG9uZW50LmgpIHsKICAgICAgICAgICAgICBtYXhIID0gY29tcG9uZW50Lmg7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKG1heFYgPCBjb21wb25lbnQudikgewogICAgICAgICAgICAgIG1heFYgPSBjb21wb25lbnQudjsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBjb25zdCBtY3VzUGVyTGluZSA9IE1hdGguY2VpbChmcmFtZS5zYW1wbGVzUGVyTGluZSAvIDggLyBtYXhIKTsKICAgICAgICBjb25zdCBtY3VzUGVyQ29sdW1uID0gTWF0aC5jZWlsKGZyYW1lLnNjYW5MaW5lcyAvIDggLyBtYXhWKTsKICAgICAgICBmb3IgKGNvbXBvbmVudElkIGluIGZyYW1lLmNvbXBvbmVudHMpIHsKICAgICAgICAgIGlmIChmcmFtZS5jb21wb25lbnRzLmhhc093blByb3BlcnR5KGNvbXBvbmVudElkKSkgewogICAgICAgICAgICBjb21wb25lbnQgPSBmcmFtZS5jb21wb25lbnRzW2NvbXBvbmVudElkXTsKICAgICAgICAgICAgY29uc3QgYmxvY2tzUGVyTGluZSA9IE1hdGguY2VpbChNYXRoLmNlaWwoZnJhbWUuc2FtcGxlc1BlckxpbmUgLyA4KSAqIGNvbXBvbmVudC5oIC8gbWF4SCk7CiAgICAgICAgICAgIGNvbnN0IGJsb2Nrc1BlckNvbHVtbiA9IE1hdGguY2VpbChNYXRoLmNlaWwoZnJhbWUuc2NhbkxpbmVzIC8gOCkgKiBjb21wb25lbnQudiAvIG1heFYpOwogICAgICAgICAgICBjb25zdCBibG9ja3NQZXJMaW5lRm9yTWN1ID0gbWN1c1BlckxpbmUgKiBjb21wb25lbnQuaDsKICAgICAgICAgICAgY29uc3QgYmxvY2tzUGVyQ29sdW1uRm9yTWN1ID0gbWN1c1BlckNvbHVtbiAqIGNvbXBvbmVudC52OwogICAgICAgICAgICBjb25zdCBibG9ja3MgPSBbXTsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBibG9ja3NQZXJDb2x1bW5Gb3JNY3U7IGkrKykgewogICAgICAgICAgICAgIGNvbnN0IHJvdyA9IFtdOwogICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgYmxvY2tzUGVyTGluZUZvck1jdTsgaisrKSB7CiAgICAgICAgICAgICAgICByb3cucHVzaChuZXcgSW50MzJBcnJheSg2NCkpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBibG9ja3MucHVzaChyb3cpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNvbXBvbmVudC5ibG9ja3NQZXJMaW5lID0gYmxvY2tzUGVyTGluZTsKICAgICAgICAgICAgY29tcG9uZW50LmJsb2Nrc1BlckNvbHVtbiA9IGJsb2Nrc1BlckNvbHVtbjsKICAgICAgICAgICAgY29tcG9uZW50LmJsb2NrcyA9IGJsb2NrczsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgZnJhbWUubWF4SCA9IG1heEg7CiAgICAgICAgZnJhbWUubWF4ViA9IG1heFY7CiAgICAgICAgZnJhbWUubWN1c1BlckxpbmUgPSBtY3VzUGVyTGluZTsKICAgICAgICBmcmFtZS5tY3VzUGVyQ29sdW1uID0gbWN1c1BlckNvbHVtbjsKICAgICAgfQoKICAgICAgbGV0IGZpbGVNYXJrZXIgPSByZWFkVWludDE2KCk7CiAgICAgIGlmIChmaWxlTWFya2VyICE9PSAweEZGRDgpIHsgLy8gU09JIChTdGFydCBvZiBJbWFnZSkKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1NPSSBub3QgZm91bmQnKTsKICAgICAgfQoKICAgICAgZmlsZU1hcmtlciA9IHJlYWRVaW50MTYoKTsKICAgICAgd2hpbGUgKGZpbGVNYXJrZXIgIT09IDB4RkZEOSkgeyAvLyBFT0kgKEVuZCBvZiBpbWFnZSkKICAgICAgICBzd2l0Y2ggKGZpbGVNYXJrZXIpIHsKICAgICAgICAgIGNhc2UgMHhGRjAwOiBicmVhazsKICAgICAgICAgIGNhc2UgMHhGRkUwOiAvLyBBUFAwIChBcHBsaWNhdGlvbiBTcGVjaWZpYykKICAgICAgICAgIGNhc2UgMHhGRkUxOiAvLyBBUFAxCiAgICAgICAgICBjYXNlIDB4RkZFMjogLy8gQVBQMgogICAgICAgICAgY2FzZSAweEZGRTM6IC8vIEFQUDMKICAgICAgICAgIGNhc2UgMHhGRkU0OiAvLyBBUFA0CiAgICAgICAgICBjYXNlIDB4RkZFNTogLy8gQVBQNQogICAgICAgICAgY2FzZSAweEZGRTY6IC8vIEFQUDYKICAgICAgICAgIGNhc2UgMHhGRkU3OiAvLyBBUFA3CiAgICAgICAgICBjYXNlIDB4RkZFODogLy8gQVBQOAogICAgICAgICAgY2FzZSAweEZGRTk6IC8vIEFQUDkKICAgICAgICAgIGNhc2UgMHhGRkVBOiAvLyBBUFAxMAogICAgICAgICAgY2FzZSAweEZGRUI6IC8vIEFQUDExCiAgICAgICAgICBjYXNlIDB4RkZFQzogLy8gQVBQMTIKICAgICAgICAgIGNhc2UgMHhGRkVEOiAvLyBBUFAxMwogICAgICAgICAgY2FzZSAweEZGRUU6IC8vIEFQUDE0CiAgICAgICAgICBjYXNlIDB4RkZFRjogLy8gQVBQMTUKICAgICAgICAgIGNhc2UgMHhGRkZFOiB7IC8vIENPTSAoQ29tbWVudCkKICAgICAgICAgICAgY29uc3QgYXBwRGF0YSA9IHJlYWREYXRhQmxvY2soKTsKCiAgICAgICAgICAgIGlmIChmaWxlTWFya2VyID09PSAweEZGRTApIHsKICAgICAgICAgICAgICBpZiAoYXBwRGF0YVswXSA9PT0gMHg0QSAmJiBhcHBEYXRhWzFdID09PSAweDQ2ICYmIGFwcERhdGFbMl0gPT09IDB4NDkKICAgICAgICAgICAgICAgICYmIGFwcERhdGFbM10gPT09IDB4NDYgJiYgYXBwRGF0YVs0XSA9PT0gMCkgeyAvLyAnSkZJRlx4MDAnCiAgICAgICAgICAgICAgICB0aGlzLmpmaWYgPSB7CiAgICAgICAgICAgICAgICAgIHZlcnNpb246IHsgbWFqb3I6IGFwcERhdGFbNV0sIG1pbm9yOiBhcHBEYXRhWzZdIH0sCiAgICAgICAgICAgICAgICAgIGRlbnNpdHlVbml0czogYXBwRGF0YVs3XSwKICAgICAgICAgICAgICAgICAgeERlbnNpdHk6IChhcHBEYXRhWzhdIDw8IDgpIHwgYXBwRGF0YVs5XSwKICAgICAgICAgICAgICAgICAgeURlbnNpdHk6IChhcHBEYXRhWzEwXSA8PCA4KSB8IGFwcERhdGFbMTFdLAogICAgICAgICAgICAgICAgICB0aHVtYldpZHRoOiBhcHBEYXRhWzEyXSwKICAgICAgICAgICAgICAgICAgdGh1bWJIZWlnaHQ6IGFwcERhdGFbMTNdLAogICAgICAgICAgICAgICAgICB0aHVtYkRhdGE6IGFwcERhdGEuc3ViYXJyYXkoMTQsIDE0ICsgKDMgKiBhcHBEYXRhWzEyXSAqIGFwcERhdGFbMTNdKSksCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICAvLyBUT0RPIEFQUDEgLSBFeGlmCiAgICAgICAgICAgIGlmIChmaWxlTWFya2VyID09PSAweEZGRUUpIHsKICAgICAgICAgICAgICBpZiAoYXBwRGF0YVswXSA9PT0gMHg0MSAmJiBhcHBEYXRhWzFdID09PSAweDY0ICYmIGFwcERhdGFbMl0gPT09IDB4NkYKICAgICAgICAgICAgICAgICYmIGFwcERhdGFbM10gPT09IDB4NjIgJiYgYXBwRGF0YVs0XSA9PT0gMHg2NSAmJiBhcHBEYXRhWzVdID09PSAwKSB7IC8vICdBZG9iZVx4MDAnCiAgICAgICAgICAgICAgICB0aGlzLmFkb2JlID0gewogICAgICAgICAgICAgICAgICB2ZXJzaW9uOiBhcHBEYXRhWzZdLAogICAgICAgICAgICAgICAgICBmbGFnczA6IChhcHBEYXRhWzddIDw8IDgpIHwgYXBwRGF0YVs4XSwKICAgICAgICAgICAgICAgICAgZmxhZ3MxOiAoYXBwRGF0YVs5XSA8PCA4KSB8IGFwcERhdGFbMTBdLAogICAgICAgICAgICAgICAgICB0cmFuc2Zvcm1Db2RlOiBhcHBEYXRhWzExXSwKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQoKICAgICAgICAgIGNhc2UgMHhGRkRCOiB7IC8vIERRVCAoRGVmaW5lIFF1YW50aXphdGlvbiBUYWJsZXMpCiAgICAgICAgICAgIGNvbnN0IHF1YW50aXphdGlvblRhYmxlc0xlbmd0aCA9IHJlYWRVaW50MTYoKTsKICAgICAgICAgICAgY29uc3QgcXVhbnRpemF0aW9uVGFibGVzRW5kID0gcXVhbnRpemF0aW9uVGFibGVzTGVuZ3RoICsgb2Zmc2V0IC0gMjsKICAgICAgICAgICAgd2hpbGUgKG9mZnNldCA8IHF1YW50aXphdGlvblRhYmxlc0VuZCkgewogICAgICAgICAgICAgIGNvbnN0IHF1YW50aXphdGlvblRhYmxlU3BlYyA9IGRhdGFbb2Zmc2V0KytdOwogICAgICAgICAgICAgIGNvbnN0IHRhYmxlRGF0YSA9IG5ldyBJbnQzMkFycmF5KDY0KTsKICAgICAgICAgICAgICBpZiAoKHF1YW50aXphdGlvblRhYmxlU3BlYyA+PiA0KSA9PT0gMCkgeyAvLyA4IGJpdCB2YWx1ZXMKICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgNjQ7IGorKykgewogICAgICAgICAgICAgICAgICBjb25zdCB6ID0gZGN0WmlnWmFnW2pdOwogICAgICAgICAgICAgICAgICB0YWJsZURhdGFbel0gPSBkYXRhW29mZnNldCsrXTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9IGVsc2UgaWYgKChxdWFudGl6YXRpb25UYWJsZVNwZWMgPj4gNCkgPT09IDEpIHsgLy8gMTYgYml0CiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IDY0OyBqKyspIHsKICAgICAgICAgICAgICAgICAgY29uc3QgeiA9IGRjdFppZ1phZ1tqXTsKICAgICAgICAgICAgICAgICAgdGFibGVEYXRhW3pdID0gcmVhZFVpbnQxNigpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0RRVDogaW52YWxpZCB0YWJsZSBzcGVjJyk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHRoaXMucXVhbnRpemF0aW9uVGFibGVzW3F1YW50aXphdGlvblRhYmxlU3BlYyAmIDE1XSA9IHRhYmxlRGF0YTsKICAgICAgICAgICAgfQogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KCiAgICAgICAgICBjYXNlIDB4RkZDMDogLy8gU09GMCAoU3RhcnQgb2YgRnJhbWUsIEJhc2VsaW5lIERDVCkKICAgICAgICAgIGNhc2UgMHhGRkMxOiAvLyBTT0YxIChTdGFydCBvZiBGcmFtZSwgRXh0ZW5kZWQgRENUKQogICAgICAgICAgY2FzZSAweEZGQzI6IHsgLy8gU09GMiAoU3RhcnQgb2YgRnJhbWUsIFByb2dyZXNzaXZlIERDVCkKICAgICAgICAgICAgcmVhZFVpbnQxNigpOyAvLyBza2lwIGRhdGEgbGVuZ3RoCiAgICAgICAgICAgIGNvbnN0IGZyYW1lID0gewogICAgICAgICAgICAgIGV4dGVuZGVkOiAoZmlsZU1hcmtlciA9PT0gMHhGRkMxKSwKICAgICAgICAgICAgICBwcm9ncmVzc2l2ZTogKGZpbGVNYXJrZXIgPT09IDB4RkZDMiksCiAgICAgICAgICAgICAgcHJlY2lzaW9uOiBkYXRhW29mZnNldCsrXSwKICAgICAgICAgICAgICBzY2FuTGluZXM6IHJlYWRVaW50MTYoKSwKICAgICAgICAgICAgICBzYW1wbGVzUGVyTGluZTogcmVhZFVpbnQxNigpLAogICAgICAgICAgICAgIGNvbXBvbmVudHM6IHt9LAogICAgICAgICAgICAgIGNvbXBvbmVudHNPcmRlcjogW10sCiAgICAgICAgICAgIH07CgogICAgICAgICAgICBjb25zdCBjb21wb25lbnRzQ291bnQgPSBkYXRhW29mZnNldCsrXTsKICAgICAgICAgICAgbGV0IGNvbXBvbmVudElkOwogICAgICAgICAgICAvLyBsZXQgbWF4SCA9IDA7CiAgICAgICAgICAgIC8vIGxldCBtYXhWID0gMDsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb21wb25lbnRzQ291bnQ7IGkrKykgewogICAgICAgICAgICAgIGNvbXBvbmVudElkID0gZGF0YVtvZmZzZXRdOwogICAgICAgICAgICAgIGNvbnN0IGggPSBkYXRhW29mZnNldCArIDFdID4+IDQ7CiAgICAgICAgICAgICAgY29uc3QgdiA9IGRhdGFbb2Zmc2V0ICsgMV0gJiAxNTsKICAgICAgICAgICAgICBjb25zdCBxSWQgPSBkYXRhW29mZnNldCArIDJdOwogICAgICAgICAgICAgIGZyYW1lLmNvbXBvbmVudHNPcmRlci5wdXNoKGNvbXBvbmVudElkKTsKICAgICAgICAgICAgICBmcmFtZS5jb21wb25lbnRzW2NvbXBvbmVudElkXSA9IHsKICAgICAgICAgICAgICAgIGgsCiAgICAgICAgICAgICAgICB2LAogICAgICAgICAgICAgICAgcXVhbnRpemF0aW9uSWR4OiBxSWQsCiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICBvZmZzZXQgKz0gMzsKICAgICAgICAgICAgfQogICAgICAgICAgICBwcmVwYXJlQ29tcG9uZW50cyhmcmFtZSk7CiAgICAgICAgICAgIHRoaXMuZnJhbWVzLnB1c2goZnJhbWUpOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KCiAgICAgICAgICBjYXNlIDB4RkZDNDogeyAvLyBESFQgKERlZmluZSBIdWZmbWFuIFRhYmxlcykKICAgICAgICAgICAgY29uc3QgaHVmZm1hbkxlbmd0aCA9IHJlYWRVaW50MTYoKTsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDI7IGkgPCBodWZmbWFuTGVuZ3RoOykgewogICAgICAgICAgICAgIGNvbnN0IGh1ZmZtYW5UYWJsZVNwZWMgPSBkYXRhW29mZnNldCsrXTsKICAgICAgICAgICAgICBjb25zdCBjb2RlTGVuZ3RocyA9IG5ldyBVaW50OEFycmF5KDE2KTsKICAgICAgICAgICAgICBsZXQgY29kZUxlbmd0aFN1bSA9IDA7CiAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCAxNjsgaisrLCBvZmZzZXQrKykgewogICAgICAgICAgICAgICAgY29kZUxlbmd0aHNbal0gPSBkYXRhW29mZnNldF07CiAgICAgICAgICAgICAgICBjb2RlTGVuZ3RoU3VtICs9IGNvZGVMZW5ndGhzW2pdOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBjb25zdCBodWZmbWFuVmFsdWVzID0gbmV3IFVpbnQ4QXJyYXkoY29kZUxlbmd0aFN1bSk7CiAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBjb2RlTGVuZ3RoU3VtOyBqKyssIG9mZnNldCsrKSB7CiAgICAgICAgICAgICAgICBodWZmbWFuVmFsdWVzW2pdID0gZGF0YVtvZmZzZXRdOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpICs9IDE3ICsgY29kZUxlbmd0aFN1bTsKCiAgICAgICAgICAgICAgaWYgKChodWZmbWFuVGFibGVTcGVjID4+IDQpID09PSAwKSB7CiAgICAgICAgICAgICAgICB0aGlzLmh1ZmZtYW5UYWJsZXNEQ1todWZmbWFuVGFibGVTcGVjICYgMTVdID0gYnVpbGRIdWZmbWFuVGFibGUoCiAgICAgICAgICAgICAgICAgIGNvZGVMZW5ndGhzLCBodWZmbWFuVmFsdWVzLAogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdGhpcy5odWZmbWFuVGFibGVzQUNbaHVmZm1hblRhYmxlU3BlYyAmIDE1XSA9IGJ1aWxkSHVmZm1hblRhYmxlKAogICAgICAgICAgICAgICAgICBjb2RlTGVuZ3RocywgaHVmZm1hblZhbHVlcywKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQoKICAgICAgICAgIGNhc2UgMHhGRkREOiAvLyBEUkkgKERlZmluZSBSZXN0YXJ0IEludGVydmFsKQogICAgICAgICAgICByZWFkVWludDE2KCk7IC8vIHNraXAgZGF0YSBsZW5ndGgKICAgICAgICAgICAgdGhpcy5yZXNldEludGVydmFsID0gcmVhZFVpbnQxNigpOwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlIDB4RkZEQTogeyAvLyBTT1MgKFN0YXJ0IG9mIFNjYW4pCiAgICAgICAgICAgIHJlYWRVaW50MTYoKTsgLy8gc2tpcCBsZW5ndGgKICAgICAgICAgICAgY29uc3Qgc2VsZWN0b3JzQ291bnQgPSBkYXRhW29mZnNldCsrXTsKICAgICAgICAgICAgY29uc3QgY29tcG9uZW50cyA9IFtdOwogICAgICAgICAgICBjb25zdCBmcmFtZSA9IHRoaXMuZnJhbWVzWzBdOwogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNlbGVjdG9yc0NvdW50OyBpKyspIHsKICAgICAgICAgICAgICBjb25zdCBjb21wb25lbnQgPSBmcmFtZS5jb21wb25lbnRzW2RhdGFbb2Zmc2V0KytdXTsKICAgICAgICAgICAgICBjb25zdCB0YWJsZVNwZWMgPSBkYXRhW29mZnNldCsrXTsKICAgICAgICAgICAgICBjb21wb25lbnQuaHVmZm1hblRhYmxlREMgPSB0aGlzLmh1ZmZtYW5UYWJsZXNEQ1t0YWJsZVNwZWMgPj4gNF07CiAgICAgICAgICAgICAgY29tcG9uZW50Lmh1ZmZtYW5UYWJsZUFDID0gdGhpcy5odWZmbWFuVGFibGVzQUNbdGFibGVTcGVjICYgMTVdOwogICAgICAgICAgICAgIGNvbXBvbmVudHMucHVzaChjb21wb25lbnQpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNvbnN0IHNwZWN0cmFsU3RhcnQgPSBkYXRhW29mZnNldCsrXTsKICAgICAgICAgICAgY29uc3Qgc3BlY3RyYWxFbmQgPSBkYXRhW29mZnNldCsrXTsKICAgICAgICAgICAgY29uc3Qgc3VjY2Vzc2l2ZUFwcHJveGltYXRpb24gPSBkYXRhW29mZnNldCsrXTsKICAgICAgICAgICAgY29uc3QgcHJvY2Vzc2VkID0gZGVjb2RlU2NhbihkYXRhLCBvZmZzZXQsCiAgICAgICAgICAgICAgZnJhbWUsIGNvbXBvbmVudHMsIHRoaXMucmVzZXRJbnRlcnZhbCwKICAgICAgICAgICAgICBzcGVjdHJhbFN0YXJ0LCBzcGVjdHJhbEVuZCwKICAgICAgICAgICAgICBzdWNjZXNzaXZlQXBwcm94aW1hdGlvbiA+PiA0LCBzdWNjZXNzaXZlQXBwcm94aW1hdGlvbiAmIDE1KTsKICAgICAgICAgICAgb2Zmc2V0ICs9IHByb2Nlc3NlZDsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CgogICAgICAgICAgY2FzZSAweEZGRkY6IC8vIEZpbGwgYnl0ZXMKICAgICAgICAgICAgaWYgKGRhdGFbb2Zmc2V0XSAhPT0gMHhGRikgeyAvLyBBdm9pZCBza2lwcGluZyBhIHZhbGlkIG1hcmtlci4KICAgICAgICAgICAgICBvZmZzZXQtLTsKICAgICAgICAgICAgfQogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICBpZiAoZGF0YVtvZmZzZXQgLSAzXSA9PT0gMHhGRgogICAgICAgICAgICAgICYmIGRhdGFbb2Zmc2V0IC0gMl0gPj0gMHhDMCAmJiBkYXRhW29mZnNldCAtIDJdIDw9IDB4RkUpIHsKICAgICAgICAgICAgICAvLyBjb3VsZCBiZSBpbmNvcnJlY3QgZW5jb2RpbmcgLS0gbGFzdCAweEZGIGJ5dGUgb2YgdGhlIHByZXZpb3VzCiAgICAgICAgICAgICAgLy8gYmxvY2sgd2FzIGVhdGVuIGJ5IHRoZSBlbmNvZGVyCiAgICAgICAgICAgICAgb2Zmc2V0IC09IDM7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGB1bmtub3duIEpQRUcgbWFya2VyICR7ZmlsZU1hcmtlci50b1N0cmluZygxNil9YCk7CiAgICAgICAgfQogICAgICAgIGZpbGVNYXJrZXIgPSByZWFkVWludDE2KCk7CiAgICAgIH0KICAgIH0KCiAgICBnZXRSZXN1bHQoKSB7CiAgICAgIGNvbnN0IHsgZnJhbWVzIH0gPSB0aGlzOwogICAgICBpZiAodGhpcy5mcmFtZXMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdubyBmcmFtZXMgd2VyZSBkZWNvZGVkJyk7CiAgICAgIH0gZWxzZSBpZiAodGhpcy5mcmFtZXMubGVuZ3RoID4gMSkgewogICAgICAgIGNvbnNvbGUud2FybignbW9yZSB0aGFuIG9uZSBmcmFtZSBpcyBub3Qgc3VwcG9ydGVkJyk7CiAgICAgIH0KCiAgICAgIC8vIHNldCBlYWNoIGZyYW1lJ3MgY29tcG9uZW50cyBxdWFudGl6YXRpb24gdGFibGUKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmZyYW1lcy5sZW5ndGg7IGkrKykgewogICAgICAgIGNvbnN0IGNwID0gdGhpcy5mcmFtZXNbaV0uY29tcG9uZW50czsKICAgICAgICBmb3IgKGNvbnN0IGogb2YgT2JqZWN0LmtleXMoY3ApKSB7CiAgICAgICAgICBjcFtqXS5xdWFudGl6YXRpb25UYWJsZSA9IHRoaXMucXVhbnRpemF0aW9uVGFibGVzW2NwW2pdLnF1YW50aXphdGlvbklkeF07CiAgICAgICAgICBkZWxldGUgY3Bbal0ucXVhbnRpemF0aW9uSWR4OwogICAgICAgIH0KICAgICAgfQoKICAgICAgY29uc3QgZnJhbWUgPSBmcmFtZXNbMF07CiAgICAgIGNvbnN0IHsgY29tcG9uZW50cywgY29tcG9uZW50c09yZGVyIH0gPSBmcmFtZTsKICAgICAgY29uc3Qgb3V0Q29tcG9uZW50cyA9IFtdOwogICAgICBjb25zdCB3aWR0aCA9IGZyYW1lLnNhbXBsZXNQZXJMaW5lOwogICAgICBjb25zdCBoZWlnaHQgPSBmcmFtZS5zY2FuTGluZXM7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbXBvbmVudHNPcmRlci5sZW5ndGg7IGkrKykgewogICAgICAgIGNvbnN0IGNvbXBvbmVudCA9IGNvbXBvbmVudHNbY29tcG9uZW50c09yZGVyW2ldXTsKICAgICAgICBvdXRDb21wb25lbnRzLnB1c2goewogICAgICAgICAgbGluZXM6IGJ1aWxkQ29tcG9uZW50RGF0YShmcmFtZSwgY29tcG9uZW50KSwKICAgICAgICAgIHNjYWxlWDogY29tcG9uZW50LmggLyBmcmFtZS5tYXhILAogICAgICAgICAgc2NhbGVZOiBjb21wb25lbnQudiAvIGZyYW1lLm1heFYsCiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIGNvbnN0IG91dCA9IG5ldyBVaW50OEFycmF5KHdpZHRoICogaGVpZ2h0ICogb3V0Q29tcG9uZW50cy5sZW5ndGgpOwogICAgICBsZXQgb2kgPSAwOwogICAgICBmb3IgKGxldCB5ID0gMDsgeSA8IGhlaWdodDsgKyt5KSB7CiAgICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCB3aWR0aDsgKyt4KSB7CiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG91dENvbXBvbmVudHMubGVuZ3RoOyArK2kpIHsKICAgICAgICAgICAgY29uc3QgY29tcG9uZW50ID0gb3V0Q29tcG9uZW50c1tpXTsKICAgICAgICAgICAgb3V0W29pXSA9IGNvbXBvbmVudC5saW5lc1swIHwgeSAqIGNvbXBvbmVudC5zY2FsZVldWzAgfCB4ICogY29tcG9uZW50LnNjYWxlWF07CiAgICAgICAgICAgICsrb2k7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBvdXQ7CiAgICB9CiAgfQoKICBjbGFzcyBKcGVnRGVjb2RlciBleHRlbmRzIEJhc2VEZWNvZGVyIHsKICAgIGNvbnN0cnVjdG9yKGZpbGVEaXJlY3RvcnkpIHsKICAgICAgc3VwZXIoKTsKICAgICAgdGhpcy5yZWFkZXIgPSBuZXcgSnBlZ1N0cmVhbVJlYWRlcigpOwogICAgICBpZiAoZmlsZURpcmVjdG9yeS5KUEVHVGFibGVzKSB7CiAgICAgICAgdGhpcy5yZWFkZXIucGFyc2UoZmlsZURpcmVjdG9yeS5KUEVHVGFibGVzKTsKICAgICAgfQogICAgfQoKICAgIGRlY29kZUJsb2NrKGJ1ZmZlcikgewogICAgICB0aGlzLnJlYWRlci5yZXNldEZyYW1lcygpOwogICAgICB0aGlzLnJlYWRlci5wYXJzZShuZXcgVWludDhBcnJheShidWZmZXIpKTsKICAgICAgcmV0dXJuIHRoaXMucmVhZGVyLmdldFJlc3VsdCgpLmJ1ZmZlcjsKICAgIH0KICB9CgogIC8qISBwYWtvIDIuMC40IGh0dHBzOi8vZ2l0aHViLmNvbS9ub2RlY2EvcGFrbyBAbGljZW5zZSAoTUlUIEFORCBabGliKSAqLwogIC8vIChDKSAxOTk1LTIwMTMgSmVhbi1sb3VwIEdhaWxseSBhbmQgTWFyayBBZGxlcgogIC8vIChDKSAyMDE0LTIwMTcgVml0YWx5IFB1enJpbiBhbmQgQW5kcmV5IFR1cGl0c2luCiAgLy8KICAvLyBUaGlzIHNvZnR3YXJlIGlzIHByb3ZpZGVkICdhcy1pcycsIHdpdGhvdXQgYW55IGV4cHJlc3Mgb3IgaW1wbGllZAogIC8vIHdhcnJhbnR5LiBJbiBubyBldmVudCB3aWxsIHRoZSBhdXRob3JzIGJlIGhlbGQgbGlhYmxlIGZvciBhbnkgZGFtYWdlcwogIC8vIGFyaXNpbmcgZnJvbSB0aGUgdXNlIG9mIHRoaXMgc29mdHdhcmUuCiAgLy8KICAvLyBQZXJtaXNzaW9uIGlzIGdyYW50ZWQgdG8gYW55b25lIHRvIHVzZSB0aGlzIHNvZnR3YXJlIGZvciBhbnkgcHVycG9zZSwKICAvLyBpbmNsdWRpbmcgY29tbWVyY2lhbCBhcHBsaWNhdGlvbnMsIGFuZCB0byBhbHRlciBpdCBhbmQgcmVkaXN0cmlidXRlIGl0CiAgLy8gZnJlZWx5LCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgcmVzdHJpY3Rpb25zOgogIC8vCiAgLy8gMS4gVGhlIG9yaWdpbiBvZiB0aGlzIHNvZnR3YXJlIG11c3Qgbm90IGJlIG1pc3JlcHJlc2VudGVkOyB5b3UgbXVzdCBub3QKICAvLyAgIGNsYWltIHRoYXQgeW91IHdyb3RlIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS4gSWYgeW91IHVzZSB0aGlzIHNvZnR3YXJlCiAgLy8gICBpbiBhIHByb2R1Y3QsIGFuIGFja25vd2xlZGdtZW50IGluIHRoZSBwcm9kdWN0IGRvY3VtZW50YXRpb24gd291bGQgYmUKICAvLyAgIGFwcHJlY2lhdGVkIGJ1dCBpcyBub3QgcmVxdWlyZWQuCiAgLy8gMi4gQWx0ZXJlZCBzb3VyY2UgdmVyc2lvbnMgbXVzdCBiZSBwbGFpbmx5IG1hcmtlZCBhcyBzdWNoLCBhbmQgbXVzdCBub3QgYmUKICAvLyAgIG1pc3JlcHJlc2VudGVkIGFzIGJlaW5nIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS4KICAvLyAzLiBUaGlzIG5vdGljZSBtYXkgbm90IGJlIHJlbW92ZWQgb3IgYWx0ZXJlZCBmcm9tIGFueSBzb3VyY2UgZGlzdHJpYnV0aW9uLgoKICAvKiBlc2xpbnQtZGlzYWJsZSBzcGFjZS11bmFyeS1vcHMgKi8KCiAgLyogUHVibGljIGNvbnN0YW50cyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki8KICAvKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qLwoKCiAgLy9jb25zdCBaX0ZJTFRFUkVEICAgICAgICAgID0gMTsKICAvL2NvbnN0IFpfSFVGRk1BTl9PTkxZICAgICAgPSAyOwogIC8vY29uc3QgWl9STEUgICAgICAgICAgICAgICA9IDM7CiAgY29uc3QgWl9GSVhFRCQxICAgICAgICAgICAgICAgPSA0OwogIC8vY29uc3QgWl9ERUZBVUxUX1NUUkFURUdZICA9IDA7CgogIC8qIFBvc3NpYmxlIHZhbHVlcyBvZiB0aGUgZGF0YV90eXBlIGZpZWxkICh0aG91Z2ggc2VlIGluZmxhdGUoKSkgKi8KICBjb25zdCBaX0JJTkFSWSAgICAgICAgICAgICAgPSAwOwogIGNvbnN0IFpfVEVYVCAgICAgICAgICAgICAgICA9IDE7CiAgLy9jb25zdCBaX0FTQ0lJICAgICAgICAgICAgID0gMTsgLy8gPSBaX1RFWFQKICBjb25zdCBaX1VOS05PV04kMSAgICAgICAgICAgICA9IDI7CgogIC8qPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovCgoKICBmdW5jdGlvbiB6ZXJvJDEoYnVmKSB7IGxldCBsZW4gPSBidWYubGVuZ3RoOyB3aGlsZSAoLS1sZW4gPj0gMCkgeyBidWZbbGVuXSA9IDA7IH0gfQoKICAvLyBGcm9tIHp1dGlsLmgKCiAgY29uc3QgU1RPUkVEX0JMT0NLID0gMDsKICBjb25zdCBTVEFUSUNfVFJFRVMgPSAxOwogIGNvbnN0IERZTl9UUkVFUyAgICA9IDI7CiAgLyogVGhlIHRocmVlIGtpbmRzIG9mIGJsb2NrIHR5cGUgKi8KCiAgY29uc3QgTUlOX01BVENIJDEgICAgPSAzOwogIGNvbnN0IE1BWF9NQVRDSCQxICAgID0gMjU4OwogIC8qIFRoZSBtaW5pbXVtIGFuZCBtYXhpbXVtIG1hdGNoIGxlbmd0aHMgKi8KCiAgLy8gRnJvbSBkZWZsYXRlLmgKICAvKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgKiBJbnRlcm5hbCBjb21wcmVzc2lvbiBzdGF0ZS4KICAgKi8KCiAgY29uc3QgTEVOR1RIX0NPREVTJDEgID0gMjk7CiAgLyogbnVtYmVyIG9mIGxlbmd0aCBjb2Rlcywgbm90IGNvdW50aW5nIHRoZSBzcGVjaWFsIEVORF9CTE9DSyBjb2RlICovCgogIGNvbnN0IExJVEVSQUxTJDEgICAgICA9IDI1NjsKICAvKiBudW1iZXIgb2YgbGl0ZXJhbCBieXRlcyAwLi4yNTUgKi8KCiAgY29uc3QgTF9DT0RFUyQxICAgICAgID0gTElURVJBTFMkMSArIDEgKyBMRU5HVEhfQ09ERVMkMTsKICAvKiBudW1iZXIgb2YgTGl0ZXJhbCBvciBMZW5ndGggY29kZXMsIGluY2x1ZGluZyB0aGUgRU5EX0JMT0NLIGNvZGUgKi8KCiAgY29uc3QgRF9DT0RFUyQxICAgICAgID0gMzA7CiAgLyogbnVtYmVyIG9mIGRpc3RhbmNlIGNvZGVzICovCgogIGNvbnN0IEJMX0NPREVTJDEgICAgICA9IDE5OwogIC8qIG51bWJlciBvZiBjb2RlcyB1c2VkIHRvIHRyYW5zZmVyIHRoZSBiaXQgbGVuZ3RocyAqLwoKICBjb25zdCBIRUFQX1NJWkUkMSAgICAgPSAyICogTF9DT0RFUyQxICsgMTsKICAvKiBtYXhpbXVtIGhlYXAgc2l6ZSAqLwoKICBjb25zdCBNQVhfQklUUyQxICAgICAgPSAxNTsKICAvKiBBbGwgY29kZXMgbXVzdCBub3QgZXhjZWVkIE1BWF9CSVRTIGJpdHMgKi8KCiAgY29uc3QgQnVmX3NpemUgICAgICA9IDE2OwogIC8qIHNpemUgb2YgYml0IGJ1ZmZlciBpbiBiaV9idWYgKi8KCgogIC8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAqIENvbnN0YW50cwogICAqLwoKICBjb25zdCBNQVhfQkxfQklUUyA9IDc7CiAgLyogQml0IGxlbmd0aCBjb2RlcyBtdXN0IG5vdCBleGNlZWQgTUFYX0JMX0JJVFMgYml0cyAqLwoKICBjb25zdCBFTkRfQkxPQ0sgICA9IDI1NjsKICAvKiBlbmQgb2YgYmxvY2sgbGl0ZXJhbCBjb2RlICovCgogIGNvbnN0IFJFUF8zXzYgICAgID0gMTY7CiAgLyogcmVwZWF0IHByZXZpb3VzIGJpdCBsZW5ndGggMy02IHRpbWVzICgyIGJpdHMgb2YgcmVwZWF0IGNvdW50KSAqLwoKICBjb25zdCBSRVBaXzNfMTAgICA9IDE3OwogIC8qIHJlcGVhdCBhIHplcm8gbGVuZ3RoIDMtMTAgdGltZXMgICgzIGJpdHMgb2YgcmVwZWF0IGNvdW50KSAqLwoKICBjb25zdCBSRVBaXzExXzEzOCA9IDE4OwogIC8qIHJlcGVhdCBhIHplcm8gbGVuZ3RoIDExLTEzOCB0aW1lcyAgKDcgYml0cyBvZiByZXBlYXQgY291bnQpICovCgogIC8qIGVzbGludC1kaXNhYmxlIGNvbW1hLXNwYWNpbmcsYXJyYXktYnJhY2tldC1zcGFjaW5nICovCiAgY29uc3QgZXh0cmFfbGJpdHMgPSAgIC8qIGV4dHJhIGJpdHMgZm9yIGVhY2ggbGVuZ3RoIGNvZGUgKi8KICAgIG5ldyBVaW50OEFycmF5KFswLDAsMCwwLDAsMCwwLDAsMSwxLDEsMSwyLDIsMiwyLDMsMywzLDMsNCw0LDQsNCw1LDUsNSw1LDBdKTsKCiAgY29uc3QgZXh0cmFfZGJpdHMgPSAgIC8qIGV4dHJhIGJpdHMgZm9yIGVhY2ggZGlzdGFuY2UgY29kZSAqLwogICAgbmV3IFVpbnQ4QXJyYXkoWzAsMCwwLDAsMSwxLDIsMiwzLDMsNCw0LDUsNSw2LDYsNyw3LDgsOCw5LDksMTAsMTAsMTEsMTEsMTIsMTIsMTMsMTNdKTsKCiAgY29uc3QgZXh0cmFfYmxiaXRzID0gIC8qIGV4dHJhIGJpdHMgZm9yIGVhY2ggYml0IGxlbmd0aCBjb2RlICovCiAgICBuZXcgVWludDhBcnJheShbMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwyLDMsN10pOwoKICBjb25zdCBibF9vcmRlciA9CiAgICBuZXcgVWludDhBcnJheShbMTYsMTcsMTgsMCw4LDcsOSw2LDEwLDUsMTEsNCwxMiwzLDEzLDIsMTQsMSwxNV0pOwogIC8qIGVzbGludC1lbmFibGUgY29tbWEtc3BhY2luZyxhcnJheS1icmFja2V0LXNwYWNpbmcgKi8KCiAgLyogVGhlIGxlbmd0aHMgb2YgdGhlIGJpdCBsZW5ndGggY29kZXMgYXJlIHNlbnQgaW4gb3JkZXIgb2YgZGVjcmVhc2luZwogICAqIHByb2JhYmlsaXR5LCB0byBhdm9pZCB0cmFuc21pdHRpbmcgdGhlIGxlbmd0aHMgZm9yIHVudXNlZCBiaXQgbGVuZ3RoIGNvZGVzLgogICAqLwoKICAvKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgKiBMb2NhbCBkYXRhLiBUaGVzZSBhcmUgaW5pdGlhbGl6ZWQgb25seSBvbmNlLgogICAqLwoKICAvLyBXZSBwcmUtZmlsbCBhcnJheXMgd2l0aCAwIHRvIGF2b2lkIHVuaW5pdGlhbGl6ZWQgZ2FwcwoKICBjb25zdCBESVNUX0NPREVfTEVOID0gNTEyOyAvKiBzZWUgZGVmaW5pdGlvbiBvZiBhcnJheSBkaXN0X2NvZGUgYmVsb3cgKi8KCiAgLy8gISEhISBVc2UgZmxhdCBhcnJheSBpbnN0ZWFkIG9mIHN0cnVjdHVyZSwgRnJlcSA9IGkqMiwgTGVuID0gaSoyKzEKICBjb25zdCBzdGF0aWNfbHRyZWUgID0gbmV3IEFycmF5KChMX0NPREVTJDEgKyAyKSAqIDIpOwogIHplcm8kMShzdGF0aWNfbHRyZWUpOwogIC8qIFRoZSBzdGF0aWMgbGl0ZXJhbCB0cmVlLiBTaW5jZSB0aGUgYml0IGxlbmd0aHMgYXJlIGltcG9zZWQsIHRoZXJlIGlzIG5vCiAgICogbmVlZCBmb3IgdGhlIExfQ09ERVMgZXh0cmEgY29kZXMgdXNlZCBkdXJpbmcgaGVhcCBjb25zdHJ1Y3Rpb24uIEhvd2V2ZXIKICAgKiBUaGUgY29kZXMgMjg2IGFuZCAyODcgYXJlIG5lZWRlZCB0byBidWlsZCBhIGNhbm9uaWNhbCB0cmVlIChzZWUgX3RyX2luaXQKICAgKiBiZWxvdykuCiAgICovCgogIGNvbnN0IHN0YXRpY19kdHJlZSAgPSBuZXcgQXJyYXkoRF9DT0RFUyQxICogMik7CiAgemVybyQxKHN0YXRpY19kdHJlZSk7CiAgLyogVGhlIHN0YXRpYyBkaXN0YW5jZSB0cmVlLiAoQWN0dWFsbHkgYSB0cml2aWFsIHRyZWUgc2luY2UgYWxsIGNvZGVzIHVzZQogICAqIDUgYml0cy4pCiAgICovCgogIGNvbnN0IF9kaXN0X2NvZGUgICAgPSBuZXcgQXJyYXkoRElTVF9DT0RFX0xFTik7CiAgemVybyQxKF9kaXN0X2NvZGUpOwogIC8qIERpc3RhbmNlIGNvZGVzLiBUaGUgZmlyc3QgMjU2IHZhbHVlcyBjb3JyZXNwb25kIHRvIHRoZSBkaXN0YW5jZXMKICAgKiAzIC4uIDI1OCwgdGhlIGxhc3QgMjU2IHZhbHVlcyBjb3JyZXNwb25kIHRvIHRoZSB0b3AgOCBiaXRzIG9mCiAgICogdGhlIDE1IGJpdCBkaXN0YW5jZXMuCiAgICovCgogIGNvbnN0IF9sZW5ndGhfY29kZSAgPSBuZXcgQXJyYXkoTUFYX01BVENIJDEgLSBNSU5fTUFUQ0gkMSArIDEpOwogIHplcm8kMShfbGVuZ3RoX2NvZGUpOwogIC8qIGxlbmd0aCBjb2RlIGZvciBlYWNoIG5vcm1hbGl6ZWQgbWF0Y2ggbGVuZ3RoICgwID09IE1JTl9NQVRDSCkgKi8KCiAgY29uc3QgYmFzZV9sZW5ndGggICA9IG5ldyBBcnJheShMRU5HVEhfQ09ERVMkMSk7CiAgemVybyQxKGJhc2VfbGVuZ3RoKTsKICAvKiBGaXJzdCBub3JtYWxpemVkIGxlbmd0aCBmb3IgZWFjaCBjb2RlICgwID0gTUlOX01BVENIKSAqLwoKICBjb25zdCBiYXNlX2Rpc3QgICAgID0gbmV3IEFycmF5KERfQ09ERVMkMSk7CiAgemVybyQxKGJhc2VfZGlzdCk7CiAgLyogRmlyc3Qgbm9ybWFsaXplZCBkaXN0YW5jZSBmb3IgZWFjaCBjb2RlICgwID0gZGlzdGFuY2Ugb2YgMSkgKi8KCgogIGZ1bmN0aW9uIFN0YXRpY1RyZWVEZXNjKHN0YXRpY190cmVlLCBleHRyYV9iaXRzLCBleHRyYV9iYXNlLCBlbGVtcywgbWF4X2xlbmd0aCkgewoKICAgIHRoaXMuc3RhdGljX3RyZWUgID0gc3RhdGljX3RyZWU7ICAvKiBzdGF0aWMgdHJlZSBvciBOVUxMICovCiAgICB0aGlzLmV4dHJhX2JpdHMgICA9IGV4dHJhX2JpdHM7ICAgLyogZXh0cmEgYml0cyBmb3IgZWFjaCBjb2RlIG9yIE5VTEwgKi8KICAgIHRoaXMuZXh0cmFfYmFzZSAgID0gZXh0cmFfYmFzZTsgICAvKiBiYXNlIGluZGV4IGZvciBleHRyYV9iaXRzICovCiAgICB0aGlzLmVsZW1zICAgICAgICA9IGVsZW1zOyAgICAgICAgLyogbWF4IG51bWJlciBvZiBlbGVtZW50cyBpbiB0aGUgdHJlZSAqLwogICAgdGhpcy5tYXhfbGVuZ3RoICAgPSBtYXhfbGVuZ3RoOyAgIC8qIG1heCBiaXQgbGVuZ3RoIGZvciB0aGUgY29kZXMgKi8KCiAgICAvLyBzaG93IGlmIGBzdGF0aWNfdHJlZWAgaGFzIGRhdGEgb3IgZHVtbXkgLSBuZWVkZWQgZm9yIG1vbm9tb3JwaGljIG9iamVjdHMKICAgIHRoaXMuaGFzX3N0cmVlICAgID0gc3RhdGljX3RyZWUgJiYgc3RhdGljX3RyZWUubGVuZ3RoOwogIH0KCgogIGxldCBzdGF0aWNfbF9kZXNjOwogIGxldCBzdGF0aWNfZF9kZXNjOwogIGxldCBzdGF0aWNfYmxfZGVzYzsKCgogIGZ1bmN0aW9uIFRyZWVEZXNjKGR5bl90cmVlLCBzdGF0X2Rlc2MpIHsKICAgIHRoaXMuZHluX3RyZWUgPSBkeW5fdHJlZTsgICAgIC8qIHRoZSBkeW5hbWljIHRyZWUgKi8KICAgIHRoaXMubWF4X2NvZGUgPSAwOyAgICAgICAgICAgIC8qIGxhcmdlc3QgY29kZSB3aXRoIG5vbiB6ZXJvIGZyZXF1ZW5jeSAqLwogICAgdGhpcy5zdGF0X2Rlc2MgPSBzdGF0X2Rlc2M7ICAgLyogdGhlIGNvcnJlc3BvbmRpbmcgc3RhdGljIHRyZWUgKi8KICB9CgoKCiAgY29uc3QgZF9jb2RlID0gKGRpc3QpID0+IHsKCiAgICByZXR1cm4gZGlzdCA8IDI1NiA/IF9kaXN0X2NvZGVbZGlzdF0gOiBfZGlzdF9jb2RlWzI1NiArIChkaXN0ID4+PiA3KV07CiAgfTsKCgogIC8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAqIE91dHB1dCBhIHNob3J0IExTQiBmaXJzdCBvbiB0aGUgc3RyZWFtLgogICAqIElOIGFzc2VydGlvbjogdGhlcmUgaXMgZW5vdWdoIHJvb20gaW4gcGVuZGluZ0J1Zi4KICAgKi8KICBjb25zdCBwdXRfc2hvcnQgPSAocywgdykgPT4gewogIC8vICAgIHB1dF9ieXRlKHMsICh1Y2gpKCh3KSAmIDB4ZmYpKTsKICAvLyAgICBwdXRfYnl0ZShzLCAodWNoKSgodXNoKSh3KSA+PiA4KSk7CiAgICBzLnBlbmRpbmdfYnVmW3MucGVuZGluZysrXSA9ICh3KSAmIDB4ZmY7CiAgICBzLnBlbmRpbmdfYnVmW3MucGVuZGluZysrXSA9ICh3ID4+PiA4KSAmIDB4ZmY7CiAgfTsKCgogIC8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAqIFNlbmQgYSB2YWx1ZSBvbiBhIGdpdmVuIG51bWJlciBvZiBiaXRzLgogICAqIElOIGFzc2VydGlvbjogbGVuZ3RoIDw9IDE2IGFuZCB2YWx1ZSBmaXRzIGluIGxlbmd0aCBiaXRzLgogICAqLwogIGNvbnN0IHNlbmRfYml0cyA9IChzLCB2YWx1ZSwgbGVuZ3RoKSA9PiB7CgogICAgaWYgKHMuYmlfdmFsaWQgPiAoQnVmX3NpemUgLSBsZW5ndGgpKSB7CiAgICAgIHMuYmlfYnVmIHw9ICh2YWx1ZSA8PCBzLmJpX3ZhbGlkKSAmIDB4ZmZmZjsKICAgICAgcHV0X3Nob3J0KHMsIHMuYmlfYnVmKTsKICAgICAgcy5iaV9idWYgPSB2YWx1ZSA+PiAoQnVmX3NpemUgLSBzLmJpX3ZhbGlkKTsKICAgICAgcy5iaV92YWxpZCArPSBsZW5ndGggLSBCdWZfc2l6ZTsKICAgIH0gZWxzZSB7CiAgICAgIHMuYmlfYnVmIHw9ICh2YWx1ZSA8PCBzLmJpX3ZhbGlkKSAmIDB4ZmZmZjsKICAgICAgcy5iaV92YWxpZCArPSBsZW5ndGg7CiAgICB9CiAgfTsKCgogIGNvbnN0IHNlbmRfY29kZSA9IChzLCBjLCB0cmVlKSA9PiB7CgogICAgc2VuZF9iaXRzKHMsIHRyZWVbYyAqIDJdLyouQ29kZSovLCB0cmVlW2MgKiAyICsgMV0vKi5MZW4qLyk7CiAgfTsKCgogIC8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAqIFJldmVyc2UgdGhlIGZpcnN0IGxlbiBiaXRzIG9mIGEgY29kZSwgdXNpbmcgc3RyYWlnaHRmb3J3YXJkIGNvZGUgKGEgZmFzdGVyCiAgICogbWV0aG9kIHdvdWxkIHVzZSBhIHRhYmxlKQogICAqIElOIGFzc2VydGlvbjogMSA8PSBsZW4gPD0gMTUKICAgKi8KICBjb25zdCBiaV9yZXZlcnNlID0gKGNvZGUsIGxlbikgPT4gewoKICAgIGxldCByZXMgPSAwOwogICAgZG8gewogICAgICByZXMgfD0gY29kZSAmIDE7CiAgICAgIGNvZGUgPj4+PSAxOwogICAgICByZXMgPDw9IDE7CiAgICB9IHdoaWxlICgtLWxlbiA+IDApOwogICAgcmV0dXJuIHJlcyA+Pj4gMTsKICB9OwoKCiAgLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgICogRmx1c2ggdGhlIGJpdCBidWZmZXIsIGtlZXBpbmcgYXQgbW9zdCA3IGJpdHMgaW4gaXQuCiAgICovCiAgY29uc3QgYmlfZmx1c2ggPSAocykgPT4gewoKICAgIGlmIChzLmJpX3ZhbGlkID09PSAxNikgewogICAgICBwdXRfc2hvcnQocywgcy5iaV9idWYpOwogICAgICBzLmJpX2J1ZiA9IDA7CiAgICAgIHMuYmlfdmFsaWQgPSAwOwoKICAgIH0gZWxzZSBpZiAocy5iaV92YWxpZCA+PSA4KSB7CiAgICAgIHMucGVuZGluZ19idWZbcy5wZW5kaW5nKytdID0gcy5iaV9idWYgJiAweGZmOwogICAgICBzLmJpX2J1ZiA+Pj0gODsKICAgICAgcy5iaV92YWxpZCAtPSA4OwogICAgfQogIH07CgoKICAvKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgKiBDb21wdXRlIHRoZSBvcHRpbWFsIGJpdCBsZW5ndGhzIGZvciBhIHRyZWUgYW5kIHVwZGF0ZSB0aGUgdG90YWwgYml0IGxlbmd0aAogICAqIGZvciB0aGUgY3VycmVudCBibG9jay4KICAgKiBJTiBhc3NlcnRpb246IHRoZSBmaWVsZHMgZnJlcSBhbmQgZGFkIGFyZSBzZXQsIGhlYXBbaGVhcF9tYXhdIGFuZAogICAqICAgIGFib3ZlIGFyZSB0aGUgdHJlZSBub2RlcyBzb3J0ZWQgYnkgaW5jcmVhc2luZyBmcmVxdWVuY3kuCiAgICogT1VUIGFzc2VydGlvbnM6IHRoZSBmaWVsZCBsZW4gaXMgc2V0IHRvIHRoZSBvcHRpbWFsIGJpdCBsZW5ndGgsIHRoZQogICAqICAgICBhcnJheSBibF9jb3VudCBjb250YWlucyB0aGUgZnJlcXVlbmNpZXMgZm9yIGVhY2ggYml0IGxlbmd0aC4KICAgKiAgICAgVGhlIGxlbmd0aCBvcHRfbGVuIGlzIHVwZGF0ZWQ7IHN0YXRpY19sZW4gaXMgYWxzbyB1cGRhdGVkIGlmIHN0cmVlIGlzCiAgICogICAgIG5vdCBudWxsLgogICAqLwogIGNvbnN0IGdlbl9iaXRsZW4gPSAocywgZGVzYykgPT4KICAvLyAgICBkZWZsYXRlX3N0YXRlICpzOwogIC8vICAgIHRyZWVfZGVzYyAqZGVzYzsgICAgLyogdGhlIHRyZWUgZGVzY3JpcHRvciAqLwogIHsKICAgIGNvbnN0IHRyZWUgICAgICAgICAgICA9IGRlc2MuZHluX3RyZWU7CiAgICBjb25zdCBtYXhfY29kZSAgICAgICAgPSBkZXNjLm1heF9jb2RlOwogICAgY29uc3Qgc3RyZWUgICAgICAgICAgID0gZGVzYy5zdGF0X2Rlc2Muc3RhdGljX3RyZWU7CiAgICBjb25zdCBoYXNfc3RyZWUgICAgICAgPSBkZXNjLnN0YXRfZGVzYy5oYXNfc3RyZWU7CiAgICBjb25zdCBleHRyYSAgICAgICAgICAgPSBkZXNjLnN0YXRfZGVzYy5leHRyYV9iaXRzOwogICAgY29uc3QgYmFzZSAgICAgICAgICAgID0gZGVzYy5zdGF0X2Rlc2MuZXh0cmFfYmFzZTsKICAgIGNvbnN0IG1heF9sZW5ndGggICAgICA9IGRlc2Muc3RhdF9kZXNjLm1heF9sZW5ndGg7CiAgICBsZXQgaDsgICAgICAgICAgICAgIC8qIGhlYXAgaW5kZXggKi8KICAgIGxldCBuLCBtOyAgICAgICAgICAgLyogaXRlcmF0ZSBvdmVyIHRoZSB0cmVlIGVsZW1lbnRzICovCiAgICBsZXQgYml0czsgICAgICAgICAgIC8qIGJpdCBsZW5ndGggKi8KICAgIGxldCB4Yml0czsgICAgICAgICAgLyogZXh0cmEgYml0cyAqLwogICAgbGV0IGY7ICAgICAgICAgICAgICAvKiBmcmVxdWVuY3kgKi8KICAgIGxldCBvdmVyZmxvdyA9IDA7ICAgLyogbnVtYmVyIG9mIGVsZW1lbnRzIHdpdGggYml0IGxlbmd0aCB0b28gbGFyZ2UgKi8KCiAgICBmb3IgKGJpdHMgPSAwOyBiaXRzIDw9IE1BWF9CSVRTJDE7IGJpdHMrKykgewogICAgICBzLmJsX2NvdW50W2JpdHNdID0gMDsKICAgIH0KCiAgICAvKiBJbiBhIGZpcnN0IHBhc3MsIGNvbXB1dGUgdGhlIG9wdGltYWwgYml0IGxlbmd0aHMgKHdoaWNoIG1heQogICAgICogb3ZlcmZsb3cgaW4gdGhlIGNhc2Ugb2YgdGhlIGJpdCBsZW5ndGggdHJlZSkuCiAgICAgKi8KICAgIHRyZWVbcy5oZWFwW3MuaGVhcF9tYXhdICogMiArIDFdLyouTGVuKi8gPSAwOyAvKiByb290IG9mIHRoZSBoZWFwICovCgogICAgZm9yIChoID0gcy5oZWFwX21heCArIDE7IGggPCBIRUFQX1NJWkUkMTsgaCsrKSB7CiAgICAgIG4gPSBzLmhlYXBbaF07CiAgICAgIGJpdHMgPSB0cmVlW3RyZWVbbiAqIDIgKyAxXS8qLkRhZCovICogMiArIDFdLyouTGVuKi8gKyAxOwogICAgICBpZiAoYml0cyA+IG1heF9sZW5ndGgpIHsKICAgICAgICBiaXRzID0gbWF4X2xlbmd0aDsKICAgICAgICBvdmVyZmxvdysrOwogICAgICB9CiAgICAgIHRyZWVbbiAqIDIgKyAxXS8qLkxlbiovID0gYml0czsKICAgICAgLyogV2Ugb3ZlcndyaXRlIHRyZWVbbl0uRGFkIHdoaWNoIGlzIG5vIGxvbmdlciBuZWVkZWQgKi8KCiAgICAgIGlmIChuID4gbWF4X2NvZGUpIHsgY29udGludWU7IH0gLyogbm90IGEgbGVhZiBub2RlICovCgogICAgICBzLmJsX2NvdW50W2JpdHNdKys7CiAgICAgIHhiaXRzID0gMDsKICAgICAgaWYgKG4gPj0gYmFzZSkgewogICAgICAgIHhiaXRzID0gZXh0cmFbbiAtIGJhc2VdOwogICAgICB9CiAgICAgIGYgPSB0cmVlW24gKiAyXS8qLkZyZXEqLzsKICAgICAgcy5vcHRfbGVuICs9IGYgKiAoYml0cyArIHhiaXRzKTsKICAgICAgaWYgKGhhc19zdHJlZSkgewogICAgICAgIHMuc3RhdGljX2xlbiArPSBmICogKHN0cmVlW24gKiAyICsgMV0vKi5MZW4qLyArIHhiaXRzKTsKICAgICAgfQogICAgfQogICAgaWYgKG92ZXJmbG93ID09PSAwKSB7IHJldHVybjsgfQoKICAgIC8vIFRyYWNlKChzdGRlcnIsIlxuYml0IGxlbmd0aCBvdmVyZmxvd1xuIikpOwogICAgLyogVGhpcyBoYXBwZW5zIGZvciBleGFtcGxlIG9uIG9iajIgYW5kIHBpYyBvZiB0aGUgQ2FsZ2FyeSBjb3JwdXMgKi8KCiAgICAvKiBGaW5kIHRoZSBmaXJzdCBiaXQgbGVuZ3RoIHdoaWNoIGNvdWxkIGluY3JlYXNlOiAqLwogICAgZG8gewogICAgICBiaXRzID0gbWF4X2xlbmd0aCAtIDE7CiAgICAgIHdoaWxlIChzLmJsX2NvdW50W2JpdHNdID09PSAwKSB7IGJpdHMtLTsgfQogICAgICBzLmJsX2NvdW50W2JpdHNdLS07ICAgICAgLyogbW92ZSBvbmUgbGVhZiBkb3duIHRoZSB0cmVlICovCiAgICAgIHMuYmxfY291bnRbYml0cyArIDFdICs9IDI7IC8qIG1vdmUgb25lIG92ZXJmbG93IGl0ZW0gYXMgaXRzIGJyb3RoZXIgKi8KICAgICAgcy5ibF9jb3VudFttYXhfbGVuZ3RoXS0tOwogICAgICAvKiBUaGUgYnJvdGhlciBvZiB0aGUgb3ZlcmZsb3cgaXRlbSBhbHNvIG1vdmVzIG9uZSBzdGVwIHVwLAogICAgICAgKiBidXQgdGhpcyBkb2VzIG5vdCBhZmZlY3QgYmxfY291bnRbbWF4X2xlbmd0aF0KICAgICAgICovCiAgICAgIG92ZXJmbG93IC09IDI7CiAgICB9IHdoaWxlIChvdmVyZmxvdyA+IDApOwoKICAgIC8qIE5vdyByZWNvbXB1dGUgYWxsIGJpdCBsZW5ndGhzLCBzY2FubmluZyBpbiBpbmNyZWFzaW5nIGZyZXF1ZW5jeS4KICAgICAqIGggaXMgc3RpbGwgZXF1YWwgdG8gSEVBUF9TSVpFLiAoSXQgaXMgc2ltcGxlciB0byByZWNvbnN0cnVjdCBhbGwKICAgICAqIGxlbmd0aHMgaW5zdGVhZCBvZiBmaXhpbmcgb25seSB0aGUgd3Jvbmcgb25lcy4gVGhpcyBpZGVhIGlzIHRha2VuCiAgICAgKiBmcm9tICdhcicgd3JpdHRlbiBieSBIYXJ1aGlrbyBPa3VtdXJhLikKICAgICAqLwogICAgZm9yIChiaXRzID0gbWF4X2xlbmd0aDsgYml0cyAhPT0gMDsgYml0cy0tKSB7CiAgICAgIG4gPSBzLmJsX2NvdW50W2JpdHNdOwogICAgICB3aGlsZSAobiAhPT0gMCkgewogICAgICAgIG0gPSBzLmhlYXBbLS1oXTsKICAgICAgICBpZiAobSA+IG1heF9jb2RlKSB7IGNvbnRpbnVlOyB9CiAgICAgICAgaWYgKHRyZWVbbSAqIDIgKyAxXS8qLkxlbiovICE9PSBiaXRzKSB7CiAgICAgICAgICAvLyBUcmFjZSgoc3RkZXJyLCJjb2RlICVkIGJpdHMgJWQtPiVkXG4iLCBtLCB0cmVlW21dLkxlbiwgYml0cykpOwogICAgICAgICAgcy5vcHRfbGVuICs9IChiaXRzIC0gdHJlZVttICogMiArIDFdLyouTGVuKi8pICogdHJlZVttICogMl0vKi5GcmVxKi87CiAgICAgICAgICB0cmVlW20gKiAyICsgMV0vKi5MZW4qLyA9IGJpdHM7CiAgICAgICAgfQogICAgICAgIG4tLTsKICAgICAgfQogICAgfQogIH07CgoKICAvKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgKiBHZW5lcmF0ZSB0aGUgY29kZXMgZm9yIGEgZ2l2ZW4gdHJlZSBhbmQgYml0IGNvdW50cyAod2hpY2ggbmVlZCBub3QgYmUKICAgKiBvcHRpbWFsKS4KICAgKiBJTiBhc3NlcnRpb246IHRoZSBhcnJheSBibF9jb3VudCBjb250YWlucyB0aGUgYml0IGxlbmd0aCBzdGF0aXN0aWNzIGZvcgogICAqIHRoZSBnaXZlbiB0cmVlIGFuZCB0aGUgZmllbGQgbGVuIGlzIHNldCBmb3IgYWxsIHRyZWUgZWxlbWVudHMuCiAgICogT1VUIGFzc2VydGlvbjogdGhlIGZpZWxkIGNvZGUgaXMgc2V0IGZvciBhbGwgdHJlZSBlbGVtZW50cyBvZiBub24KICAgKiAgICAgemVybyBjb2RlIGxlbmd0aC4KICAgKi8KICBjb25zdCBnZW5fY29kZXMgPSAodHJlZSwgbWF4X2NvZGUsIGJsX2NvdW50KSA9PgogIC8vICAgIGN0X2RhdGEgKnRyZWU7ICAgICAgICAgICAgIC8qIHRoZSB0cmVlIHRvIGRlY29yYXRlICovCiAgLy8gICAgaW50IG1heF9jb2RlOyAgICAgICAgICAgICAgLyogbGFyZ2VzdCBjb2RlIHdpdGggbm9uIHplcm8gZnJlcXVlbmN5ICovCiAgLy8gICAgdXNoZiAqYmxfY291bnQ7ICAgICAgICAgICAgLyogbnVtYmVyIG9mIGNvZGVzIGF0IGVhY2ggYml0IGxlbmd0aCAqLwogIHsKICAgIGNvbnN0IG5leHRfY29kZSA9IG5ldyBBcnJheShNQVhfQklUUyQxICsgMSk7IC8qIG5leHQgY29kZSB2YWx1ZSBmb3IgZWFjaCBiaXQgbGVuZ3RoICovCiAgICBsZXQgY29kZSA9IDA7ICAgICAgICAgICAgICAvKiBydW5uaW5nIGNvZGUgdmFsdWUgKi8KICAgIGxldCBiaXRzOyAgICAgICAgICAgICAgICAgIC8qIGJpdCBpbmRleCAqLwogICAgbGV0IG47ICAgICAgICAgICAgICAgICAgICAgLyogY29kZSBpbmRleCAqLwoKICAgIC8qIFRoZSBkaXN0cmlidXRpb24gY291bnRzIGFyZSBmaXJzdCB1c2VkIHRvIGdlbmVyYXRlIHRoZSBjb2RlIHZhbHVlcwogICAgICogd2l0aG91dCBiaXQgcmV2ZXJzYWwuCiAgICAgKi8KICAgIGZvciAoYml0cyA9IDE7IGJpdHMgPD0gTUFYX0JJVFMkMTsgYml0cysrKSB7CiAgICAgIG5leHRfY29kZVtiaXRzXSA9IGNvZGUgPSAoY29kZSArIGJsX2NvdW50W2JpdHMgLSAxXSkgPDwgMTsKICAgIH0KICAgIC8qIENoZWNrIHRoYXQgdGhlIGJpdCBjb3VudHMgaW4gYmxfY291bnQgYXJlIGNvbnNpc3RlbnQuIFRoZSBsYXN0IGNvZGUKICAgICAqIG11c3QgYmUgYWxsIG9uZXMuCiAgICAgKi8KICAgIC8vQXNzZXJ0IChjb2RlICsgYmxfY291bnRbTUFYX0JJVFNdLTEgPT0gKDE8PE1BWF9CSVRTKS0xLAogICAgLy8gICAgICAgICJpbmNvbnNpc3RlbnQgYml0IGNvdW50cyIpOwogICAgLy9UcmFjZXYoKHN0ZGVyciwiXG5nZW5fY29kZXM6IG1heF9jb2RlICVkICIsIG1heF9jb2RlKSk7CgogICAgZm9yIChuID0gMDsgIG4gPD0gbWF4X2NvZGU7IG4rKykgewogICAgICBsZXQgbGVuID0gdHJlZVtuICogMiArIDFdLyouTGVuKi87CiAgICAgIGlmIChsZW4gPT09IDApIHsgY29udGludWU7IH0KICAgICAgLyogTm93IHJldmVyc2UgdGhlIGJpdHMgKi8KICAgICAgdHJlZVtuICogMl0vKi5Db2RlKi8gPSBiaV9yZXZlcnNlKG5leHRfY29kZVtsZW5dKyssIGxlbik7CgogICAgICAvL1RyYWNlY3YodHJlZSAhPSBzdGF0aWNfbHRyZWUsIChzdGRlcnIsIlxubiAlM2QgJWMgbCAlMmQgYyAlNHggKCV4KSAiLAogICAgICAvLyAgICAgbiwgKGlzZ3JhcGgobikgPyBuIDogJyAnKSwgbGVuLCB0cmVlW25dLkNvZGUsIG5leHRfY29kZVtsZW5dLTEpKTsKICAgIH0KICB9OwoKCiAgLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgICogSW5pdGlhbGl6ZSB0aGUgdmFyaW91cyAnY29uc3RhbnQnIHRhYmxlcy4KICAgKi8KICBjb25zdCB0cl9zdGF0aWNfaW5pdCA9ICgpID0+IHsKCiAgICBsZXQgbjsgICAgICAgIC8qIGl0ZXJhdGVzIG92ZXIgdHJlZSBlbGVtZW50cyAqLwogICAgbGV0IGJpdHM7ICAgICAvKiBiaXQgY291bnRlciAqLwogICAgbGV0IGxlbmd0aDsgICAvKiBsZW5ndGggdmFsdWUgKi8KICAgIGxldCBjb2RlOyAgICAgLyogY29kZSB2YWx1ZSAqLwogICAgbGV0IGRpc3Q7ICAgICAvKiBkaXN0YW5jZSBpbmRleCAqLwogICAgY29uc3QgYmxfY291bnQgPSBuZXcgQXJyYXkoTUFYX0JJVFMkMSArIDEpOwogICAgLyogbnVtYmVyIG9mIGNvZGVzIGF0IGVhY2ggYml0IGxlbmd0aCBmb3IgYW4gb3B0aW1hbCB0cmVlICovCgogICAgLy8gZG8gY2hlY2sgaW4gX3RyX2luaXQoKQogICAgLy9pZiAoc3RhdGljX2luaXRfZG9uZSkgcmV0dXJuOwoKICAgIC8qIEZvciBzb21lIGVtYmVkZGVkIHRhcmdldHMsIGdsb2JhbCB2YXJpYWJsZXMgYXJlIG5vdCBpbml0aWFsaXplZDogKi8KICAvKiNpZmRlZiBOT19JTklUX0dMT0JBTF9QT0lOVEVSUwogICAgc3RhdGljX2xfZGVzYy5zdGF0aWNfdHJlZSA9IHN0YXRpY19sdHJlZTsKICAgIHN0YXRpY19sX2Rlc2MuZXh0cmFfYml0cyA9IGV4dHJhX2xiaXRzOwogICAgc3RhdGljX2RfZGVzYy5zdGF0aWNfdHJlZSA9IHN0YXRpY19kdHJlZTsKICAgIHN0YXRpY19kX2Rlc2MuZXh0cmFfYml0cyA9IGV4dHJhX2RiaXRzOwogICAgc3RhdGljX2JsX2Rlc2MuZXh0cmFfYml0cyA9IGV4dHJhX2JsYml0czsKICAjZW5kaWYqLwoKICAgIC8qIEluaXRpYWxpemUgdGhlIG1hcHBpbmcgbGVuZ3RoICgwLi4yNTUpIC0+IGxlbmd0aCBjb2RlICgwLi4yOCkgKi8KICAgIGxlbmd0aCA9IDA7CiAgICBmb3IgKGNvZGUgPSAwOyBjb2RlIDwgTEVOR1RIX0NPREVTJDEgLSAxOyBjb2RlKyspIHsKICAgICAgYmFzZV9sZW5ndGhbY29kZV0gPSBsZW5ndGg7CiAgICAgIGZvciAobiA9IDA7IG4gPCAoMSA8PCBleHRyYV9sYml0c1tjb2RlXSk7IG4rKykgewogICAgICAgIF9sZW5ndGhfY29kZVtsZW5ndGgrK10gPSBjb2RlOwogICAgICB9CiAgICB9CiAgICAvL0Fzc2VydCAobGVuZ3RoID09IDI1NiwgInRyX3N0YXRpY19pbml0OiBsZW5ndGggIT0gMjU2Iik7CiAgICAvKiBOb3RlIHRoYXQgdGhlIGxlbmd0aCAyNTUgKG1hdGNoIGxlbmd0aCAyNTgpIGNhbiBiZSByZXByZXNlbnRlZAogICAgICogaW4gdHdvIGRpZmZlcmVudCB3YXlzOiBjb2RlIDI4NCArIDUgYml0cyBvciBjb2RlIDI4NSwgc28gd2UKICAgICAqIG92ZXJ3cml0ZSBsZW5ndGhfY29kZVsyNTVdIHRvIHVzZSB0aGUgYmVzdCBlbmNvZGluZzoKICAgICAqLwogICAgX2xlbmd0aF9jb2RlW2xlbmd0aCAtIDFdID0gY29kZTsKCiAgICAvKiBJbml0aWFsaXplIHRoZSBtYXBwaW5nIGRpc3QgKDAuLjMySykgLT4gZGlzdCBjb2RlICgwLi4yOSkgKi8KICAgIGRpc3QgPSAwOwogICAgZm9yIChjb2RlID0gMDsgY29kZSA8IDE2OyBjb2RlKyspIHsKICAgICAgYmFzZV9kaXN0W2NvZGVdID0gZGlzdDsKICAgICAgZm9yIChuID0gMDsgbiA8ICgxIDw8IGV4dHJhX2RiaXRzW2NvZGVdKTsgbisrKSB7CiAgICAgICAgX2Rpc3RfY29kZVtkaXN0KytdID0gY29kZTsKICAgICAgfQogICAgfQogICAgLy9Bc3NlcnQgKGRpc3QgPT0gMjU2LCAidHJfc3RhdGljX2luaXQ6IGRpc3QgIT0gMjU2Iik7CiAgICBkaXN0ID4+PSA3OyAvKiBmcm9tIG5vdyBvbiwgYWxsIGRpc3RhbmNlcyBhcmUgZGl2aWRlZCBieSAxMjggKi8KICAgIGZvciAoOyBjb2RlIDwgRF9DT0RFUyQxOyBjb2RlKyspIHsKICAgICAgYmFzZV9kaXN0W2NvZGVdID0gZGlzdCA8PCA3OwogICAgICBmb3IgKG4gPSAwOyBuIDwgKDEgPDwgKGV4dHJhX2RiaXRzW2NvZGVdIC0gNykpOyBuKyspIHsKICAgICAgICBfZGlzdF9jb2RlWzI1NiArIGRpc3QrK10gPSBjb2RlOwogICAgICB9CiAgICB9CiAgICAvL0Fzc2VydCAoZGlzdCA9PSAyNTYsICJ0cl9zdGF0aWNfaW5pdDogMjU2K2Rpc3QgIT0gNTEyIik7CgogICAgLyogQ29uc3RydWN0IHRoZSBjb2RlcyBvZiB0aGUgc3RhdGljIGxpdGVyYWwgdHJlZSAqLwogICAgZm9yIChiaXRzID0gMDsgYml0cyA8PSBNQVhfQklUUyQxOyBiaXRzKyspIHsKICAgICAgYmxfY291bnRbYml0c10gPSAwOwogICAgfQoKICAgIG4gPSAwOwogICAgd2hpbGUgKG4gPD0gMTQzKSB7CiAgICAgIHN0YXRpY19sdHJlZVtuICogMiArIDFdLyouTGVuKi8gPSA4OwogICAgICBuKys7CiAgICAgIGJsX2NvdW50WzhdKys7CiAgICB9CiAgICB3aGlsZSAobiA8PSAyNTUpIHsKICAgICAgc3RhdGljX2x0cmVlW24gKiAyICsgMV0vKi5MZW4qLyA9IDk7CiAgICAgIG4rKzsKICAgICAgYmxfY291bnRbOV0rKzsKICAgIH0KICAgIHdoaWxlIChuIDw9IDI3OSkgewogICAgICBzdGF0aWNfbHRyZWVbbiAqIDIgKyAxXS8qLkxlbiovID0gNzsKICAgICAgbisrOwogICAgICBibF9jb3VudFs3XSsrOwogICAgfQogICAgd2hpbGUgKG4gPD0gMjg3KSB7CiAgICAgIHN0YXRpY19sdHJlZVtuICogMiArIDFdLyouTGVuKi8gPSA4OwogICAgICBuKys7CiAgICAgIGJsX2NvdW50WzhdKys7CiAgICB9CiAgICAvKiBDb2RlcyAyODYgYW5kIDI4NyBkbyBub3QgZXhpc3QsIGJ1dCB3ZSBtdXN0IGluY2x1ZGUgdGhlbSBpbiB0aGUKICAgICAqIHRyZWUgY29uc3RydWN0aW9uIHRvIGdldCBhIGNhbm9uaWNhbCBIdWZmbWFuIHRyZWUgKGxvbmdlc3QgY29kZQogICAgICogYWxsIG9uZXMpCiAgICAgKi8KICAgIGdlbl9jb2RlcyhzdGF0aWNfbHRyZWUsIExfQ09ERVMkMSArIDEsIGJsX2NvdW50KTsKCiAgICAvKiBUaGUgc3RhdGljIGRpc3RhbmNlIHRyZWUgaXMgdHJpdmlhbDogKi8KICAgIGZvciAobiA9IDA7IG4gPCBEX0NPREVTJDE7IG4rKykgewogICAgICBzdGF0aWNfZHRyZWVbbiAqIDIgKyAxXS8qLkxlbiovID0gNTsKICAgICAgc3RhdGljX2R0cmVlW24gKiAyXS8qLkNvZGUqLyA9IGJpX3JldmVyc2UobiwgNSk7CiAgICB9CgogICAgLy8gTm93IGRhdGEgcmVhZHkgYW5kIHdlIGNhbiBpbml0IHN0YXRpYyB0cmVlcwogICAgc3RhdGljX2xfZGVzYyA9IG5ldyBTdGF0aWNUcmVlRGVzYyhzdGF0aWNfbHRyZWUsIGV4dHJhX2xiaXRzLCBMSVRFUkFMUyQxICsgMSwgTF9DT0RFUyQxLCBNQVhfQklUUyQxKTsKICAgIHN0YXRpY19kX2Rlc2MgPSBuZXcgU3RhdGljVHJlZURlc2Moc3RhdGljX2R0cmVlLCBleHRyYV9kYml0cywgMCwgICAgICAgICAgRF9DT0RFUyQxLCBNQVhfQklUUyQxKTsKICAgIHN0YXRpY19ibF9kZXNjID0gbmV3IFN0YXRpY1RyZWVEZXNjKG5ldyBBcnJheSgwKSwgZXh0cmFfYmxiaXRzLCAwLCAgICAgICAgIEJMX0NPREVTJDEsIE1BWF9CTF9CSVRTKTsKCiAgICAvL3N0YXRpY19pbml0X2RvbmUgPSB0cnVlOwogIH07CgoKICAvKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgKiBJbml0aWFsaXplIGEgbmV3IGJsb2NrLgogICAqLwogIGNvbnN0IGluaXRfYmxvY2sgPSAocykgPT4gewoKICAgIGxldCBuOyAvKiBpdGVyYXRlcyBvdmVyIHRyZWUgZWxlbWVudHMgKi8KCiAgICAvKiBJbml0aWFsaXplIHRoZSB0cmVlcy4gKi8KICAgIGZvciAobiA9IDA7IG4gPCBMX0NPREVTJDE7ICBuKyspIHsgcy5keW5fbHRyZWVbbiAqIDJdLyouRnJlcSovID0gMDsgfQogICAgZm9yIChuID0gMDsgbiA8IERfQ09ERVMkMTsgIG4rKykgeyBzLmR5bl9kdHJlZVtuICogMl0vKi5GcmVxKi8gPSAwOyB9CiAgICBmb3IgKG4gPSAwOyBuIDwgQkxfQ09ERVMkMTsgbisrKSB7IHMuYmxfdHJlZVtuICogMl0vKi5GcmVxKi8gPSAwOyB9CgogICAgcy5keW5fbHRyZWVbRU5EX0JMT0NLICogMl0vKi5GcmVxKi8gPSAxOwogICAgcy5vcHRfbGVuID0gcy5zdGF0aWNfbGVuID0gMDsKICAgIHMubGFzdF9saXQgPSBzLm1hdGNoZXMgPSAwOwogIH07CgoKICAvKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgKiBGbHVzaCB0aGUgYml0IGJ1ZmZlciBhbmQgYWxpZ24gdGhlIG91dHB1dCBvbiBhIGJ5dGUgYm91bmRhcnkKICAgKi8KICBjb25zdCBiaV93aW5kdXAgPSAocykgPT4KICB7CiAgICBpZiAocy5iaV92YWxpZCA+IDgpIHsKICAgICAgcHV0X3Nob3J0KHMsIHMuYmlfYnVmKTsKICAgIH0gZWxzZSBpZiAocy5iaV92YWxpZCA+IDApIHsKICAgICAgLy9wdXRfYnl0ZShzLCAoQnl0ZSlzLT5iaV9idWYpOwogICAgICBzLnBlbmRpbmdfYnVmW3MucGVuZGluZysrXSA9IHMuYmlfYnVmOwogICAgfQogICAgcy5iaV9idWYgPSAwOwogICAgcy5iaV92YWxpZCA9IDA7CiAgfTsKCiAgLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgICogQ29weSBhIHN0b3JlZCBibG9jaywgc3RvcmluZyBmaXJzdCB0aGUgbGVuZ3RoIGFuZCBpdHMKICAgKiBvbmUncyBjb21wbGVtZW50IGlmIHJlcXVlc3RlZC4KICAgKi8KICBjb25zdCBjb3B5X2Jsb2NrID0gKHMsIGJ1ZiwgbGVuLCBoZWFkZXIpID0+CiAgLy9EZWZsYXRlU3RhdGUgKnM7CiAgLy9jaGFyZiAgICAqYnVmOyAgICAvKiB0aGUgaW5wdXQgZGF0YSAqLwogIC8vdW5zaWduZWQgbGVuOyAgICAgLyogaXRzIGxlbmd0aCAqLwogIC8vaW50ICAgICAgaGVhZGVyOyAgLyogdHJ1ZSBpZiBibG9jayBoZWFkZXIgbXVzdCBiZSB3cml0dGVuICovCiAgewogICAgYmlfd2luZHVwKHMpOyAgICAgICAgLyogYWxpZ24gb24gYnl0ZSBib3VuZGFyeSAqLwoKICAgIGlmIChoZWFkZXIpIHsKICAgICAgcHV0X3Nob3J0KHMsIGxlbik7CiAgICAgIHB1dF9zaG9ydChzLCB+bGVuKTsKICAgIH0KICAvLyAgd2hpbGUgKGxlbi0tKSB7CiAgLy8gICAgcHV0X2J5dGUocywgKmJ1ZisrKTsKICAvLyAgfQogICAgcy5wZW5kaW5nX2J1Zi5zZXQocy53aW5kb3cuc3ViYXJyYXkoYnVmLCBidWYgKyBsZW4pLCBzLnBlbmRpbmcpOwogICAgcy5wZW5kaW5nICs9IGxlbjsKICB9OwoKICAvKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgKiBDb21wYXJlcyB0byBzdWJ0cmVlcywgdXNpbmcgdGhlIHRyZWUgZGVwdGggYXMgdGllIGJyZWFrZXIgd2hlbgogICAqIHRoZSBzdWJ0cmVlcyBoYXZlIGVxdWFsIGZyZXF1ZW5jeS4gVGhpcyBtaW5pbWl6ZXMgdGhlIHdvcnN0IGNhc2UgbGVuZ3RoLgogICAqLwogIGNvbnN0IHNtYWxsZXIgPSAodHJlZSwgbiwgbSwgZGVwdGgpID0+IHsKCiAgICBjb25zdCBfbjIgPSBuICogMjsKICAgIGNvbnN0IF9tMiA9IG0gKiAyOwogICAgcmV0dXJuICh0cmVlW19uMl0vKi5GcmVxKi8gPCB0cmVlW19tMl0vKi5GcmVxKi8gfHwKICAgICAgICAgICAodHJlZVtfbjJdLyouRnJlcSovID09PSB0cmVlW19tMl0vKi5GcmVxKi8gJiYgZGVwdGhbbl0gPD0gZGVwdGhbbV0pKTsKICB9OwoKICAvKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgKiBSZXN0b3JlIHRoZSBoZWFwIHByb3BlcnR5IGJ5IG1vdmluZyBkb3duIHRoZSB0cmVlIHN0YXJ0aW5nIGF0IG5vZGUgaywKICAgKiBleGNoYW5naW5nIGEgbm9kZSB3aXRoIHRoZSBzbWFsbGVzdCBvZiBpdHMgdHdvIHNvbnMgaWYgbmVjZXNzYXJ5LCBzdG9wcGluZwogICAqIHdoZW4gdGhlIGhlYXAgcHJvcGVydHkgaXMgcmUtZXN0YWJsaXNoZWQgKGVhY2ggZmF0aGVyIHNtYWxsZXIgdGhhbiBpdHMKICAgKiB0d28gc29ucykuCiAgICovCiAgY29uc3QgcHFkb3duaGVhcCA9IChzLCB0cmVlLCBrKSA9PgogIC8vICAgIGRlZmxhdGVfc3RhdGUgKnM7CiAgLy8gICAgY3RfZGF0YSAqdHJlZTsgIC8qIHRoZSB0cmVlIHRvIHJlc3RvcmUgKi8KICAvLyAgICBpbnQgazsgICAgICAgICAgICAgICAvKiBub2RlIHRvIG1vdmUgZG93biAqLwogIHsKICAgIGNvbnN0IHYgPSBzLmhlYXBba107CiAgICBsZXQgaiA9IGsgPDwgMTsgIC8qIGxlZnQgc29uIG9mIGsgKi8KICAgIHdoaWxlIChqIDw9IHMuaGVhcF9sZW4pIHsKICAgICAgLyogU2V0IGogdG8gdGhlIHNtYWxsZXN0IG9mIHRoZSB0d28gc29uczogKi8KICAgICAgaWYgKGogPCBzLmhlYXBfbGVuICYmCiAgICAgICAgc21hbGxlcih0cmVlLCBzLmhlYXBbaiArIDFdLCBzLmhlYXBbal0sIHMuZGVwdGgpKSB7CiAgICAgICAgaisrOwogICAgICB9CiAgICAgIC8qIEV4aXQgaWYgdiBpcyBzbWFsbGVyIHRoYW4gYm90aCBzb25zICovCiAgICAgIGlmIChzbWFsbGVyKHRyZWUsIHYsIHMuaGVhcFtqXSwgcy5kZXB0aCkpIHsgYnJlYWs7IH0KCiAgICAgIC8qIEV4Y2hhbmdlIHYgd2l0aCB0aGUgc21hbGxlc3Qgc29uICovCiAgICAgIHMuaGVhcFtrXSA9IHMuaGVhcFtqXTsKICAgICAgayA9IGo7CgogICAgICAvKiBBbmQgY29udGludWUgZG93biB0aGUgdHJlZSwgc2V0dGluZyBqIHRvIHRoZSBsZWZ0IHNvbiBvZiBrICovCiAgICAgIGogPDw9IDE7CiAgICB9CiAgICBzLmhlYXBba10gPSB2OwogIH07CgoKICAvLyBpbmxpbmVkIG1hbnVhbGx5CiAgLy8gY29uc3QgU01BTExFU1QgPSAxOwoKICAvKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgKiBTZW5kIHRoZSBibG9jayBkYXRhIGNvbXByZXNzZWQgdXNpbmcgdGhlIGdpdmVuIEh1ZmZtYW4gdHJlZXMKICAgKi8KICBjb25zdCBjb21wcmVzc19ibG9jayA9IChzLCBsdHJlZSwgZHRyZWUpID0+CiAgLy8gICAgZGVmbGF0ZV9zdGF0ZSAqczsKICAvLyAgICBjb25zdCBjdF9kYXRhICpsdHJlZTsgLyogbGl0ZXJhbCB0cmVlICovCiAgLy8gICAgY29uc3QgY3RfZGF0YSAqZHRyZWU7IC8qIGRpc3RhbmNlIHRyZWUgKi8KICB7CiAgICBsZXQgZGlzdDsgICAgICAgICAgIC8qIGRpc3RhbmNlIG9mIG1hdGNoZWQgc3RyaW5nICovCiAgICBsZXQgbGM7ICAgICAgICAgICAgIC8qIG1hdGNoIGxlbmd0aCBvciB1bm1hdGNoZWQgY2hhciAoaWYgZGlzdCA9PSAwKSAqLwogICAgbGV0IGx4ID0gMDsgICAgICAgICAvKiBydW5uaW5nIGluZGV4IGluIGxfYnVmICovCiAgICBsZXQgY29kZTsgICAgICAgICAgIC8qIHRoZSBjb2RlIHRvIHNlbmQgKi8KICAgIGxldCBleHRyYTsgICAgICAgICAgLyogbnVtYmVyIG9mIGV4dHJhIGJpdHMgdG8gc2VuZCAqLwoKICAgIGlmIChzLmxhc3RfbGl0ICE9PSAwKSB7CiAgICAgIGRvIHsKICAgICAgICBkaXN0ID0gKHMucGVuZGluZ19idWZbcy5kX2J1ZiArIGx4ICogMl0gPDwgOCkgfCAocy5wZW5kaW5nX2J1ZltzLmRfYnVmICsgbHggKiAyICsgMV0pOwogICAgICAgIGxjID0gcy5wZW5kaW5nX2J1ZltzLmxfYnVmICsgbHhdOwogICAgICAgIGx4Kys7CgogICAgICAgIGlmIChkaXN0ID09PSAwKSB7CiAgICAgICAgICBzZW5kX2NvZGUocywgbGMsIGx0cmVlKTsgLyogc2VuZCBhIGxpdGVyYWwgYnl0ZSAqLwogICAgICAgICAgLy9UcmFjZWN2KGlzZ3JhcGgobGMpLCAoc3RkZXJyLCIgJyVjJyAiLCBsYykpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAvKiBIZXJlLCBsYyBpcyB0aGUgbWF0Y2ggbGVuZ3RoIC0gTUlOX01BVENIICovCiAgICAgICAgICBjb2RlID0gX2xlbmd0aF9jb2RlW2xjXTsKICAgICAgICAgIHNlbmRfY29kZShzLCBjb2RlICsgTElURVJBTFMkMSArIDEsIGx0cmVlKTsgLyogc2VuZCB0aGUgbGVuZ3RoIGNvZGUgKi8KICAgICAgICAgIGV4dHJhID0gZXh0cmFfbGJpdHNbY29kZV07CiAgICAgICAgICBpZiAoZXh0cmEgIT09IDApIHsKICAgICAgICAgICAgbGMgLT0gYmFzZV9sZW5ndGhbY29kZV07CiAgICAgICAgICAgIHNlbmRfYml0cyhzLCBsYywgZXh0cmEpOyAgICAgICAvKiBzZW5kIHRoZSBleHRyYSBsZW5ndGggYml0cyAqLwogICAgICAgICAgfQogICAgICAgICAgZGlzdC0tOyAvKiBkaXN0IGlzIG5vdyB0aGUgbWF0Y2ggZGlzdGFuY2UgLSAxICovCiAgICAgICAgICBjb2RlID0gZF9jb2RlKGRpc3QpOwogICAgICAgICAgLy9Bc3NlcnQgKGNvZGUgPCBEX0NPREVTLCAiYmFkIGRfY29kZSIpOwoKICAgICAgICAgIHNlbmRfY29kZShzLCBjb2RlLCBkdHJlZSk7ICAgICAgIC8qIHNlbmQgdGhlIGRpc3RhbmNlIGNvZGUgKi8KICAgICAgICAgIGV4dHJhID0gZXh0cmFfZGJpdHNbY29kZV07CiAgICAgICAgICBpZiAoZXh0cmEgIT09IDApIHsKICAgICAgICAgICAgZGlzdCAtPSBiYXNlX2Rpc3RbY29kZV07CiAgICAgICAgICAgIHNlbmRfYml0cyhzLCBkaXN0LCBleHRyYSk7ICAgLyogc2VuZCB0aGUgZXh0cmEgZGlzdGFuY2UgYml0cyAqLwogICAgICAgICAgfQogICAgICAgIH0gLyogbGl0ZXJhbCBvciBtYXRjaCBwYWlyID8gKi8KCiAgICAgICAgLyogQ2hlY2sgdGhhdCB0aGUgb3ZlcmxheSBiZXR3ZWVuIHBlbmRpbmdfYnVmIGFuZCBkX2J1ZitsX2J1ZiBpcyBvazogKi8KICAgICAgICAvL0Fzc2VydCgodUludCkocy0+cGVuZGluZykgPCBzLT5saXRfYnVmc2l6ZSArIDIqbHgsCiAgICAgICAgLy8gICAgICAgInBlbmRpbmdCdWYgb3ZlcmZsb3ciKTsKCiAgICAgIH0gd2hpbGUgKGx4IDwgcy5sYXN0X2xpdCk7CiAgICB9CgogICAgc2VuZF9jb2RlKHMsIEVORF9CTE9DSywgbHRyZWUpOwogIH07CgoKICAvKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgKiBDb25zdHJ1Y3Qgb25lIEh1ZmZtYW4gdHJlZSBhbmQgYXNzaWducyB0aGUgY29kZSBiaXQgc3RyaW5ncyBhbmQgbGVuZ3Rocy4KICAgKiBVcGRhdGUgdGhlIHRvdGFsIGJpdCBsZW5ndGggZm9yIHRoZSBjdXJyZW50IGJsb2NrLgogICAqIElOIGFzc2VydGlvbjogdGhlIGZpZWxkIGZyZXEgaXMgc2V0IGZvciBhbGwgdHJlZSBlbGVtZW50cy4KICAgKiBPVVQgYXNzZXJ0aW9uczogdGhlIGZpZWxkcyBsZW4gYW5kIGNvZGUgYXJlIHNldCB0byB0aGUgb3B0aW1hbCBiaXQgbGVuZ3RoCiAgICogICAgIGFuZCBjb3JyZXNwb25kaW5nIGNvZGUuIFRoZSBsZW5ndGggb3B0X2xlbiBpcyB1cGRhdGVkOyBzdGF0aWNfbGVuIGlzCiAgICogICAgIGFsc28gdXBkYXRlZCBpZiBzdHJlZSBpcyBub3QgbnVsbC4gVGhlIGZpZWxkIG1heF9jb2RlIGlzIHNldC4KICAgKi8KICBjb25zdCBidWlsZF90cmVlID0gKHMsIGRlc2MpID0+CiAgLy8gICAgZGVmbGF0ZV9zdGF0ZSAqczsKICAvLyAgICB0cmVlX2Rlc2MgKmRlc2M7IC8qIHRoZSB0cmVlIGRlc2NyaXB0b3IgKi8KICB7CiAgICBjb25zdCB0cmVlICAgICA9IGRlc2MuZHluX3RyZWU7CiAgICBjb25zdCBzdHJlZSAgICA9IGRlc2Muc3RhdF9kZXNjLnN0YXRpY190cmVlOwogICAgY29uc3QgaGFzX3N0cmVlID0gZGVzYy5zdGF0X2Rlc2MuaGFzX3N0cmVlOwogICAgY29uc3QgZWxlbXMgICAgPSBkZXNjLnN0YXRfZGVzYy5lbGVtczsKICAgIGxldCBuLCBtOyAgICAgICAgICAvKiBpdGVyYXRlIG92ZXIgaGVhcCBlbGVtZW50cyAqLwogICAgbGV0IG1heF9jb2RlID0gLTE7IC8qIGxhcmdlc3QgY29kZSB3aXRoIG5vbiB6ZXJvIGZyZXF1ZW5jeSAqLwogICAgbGV0IG5vZGU7ICAgICAgICAgIC8qIG5ldyBub2RlIGJlaW5nIGNyZWF0ZWQgKi8KCiAgICAvKiBDb25zdHJ1Y3QgdGhlIGluaXRpYWwgaGVhcCwgd2l0aCBsZWFzdCBmcmVxdWVudCBlbGVtZW50IGluCiAgICAgKiBoZWFwW1NNQUxMRVNUXS4gVGhlIHNvbnMgb2YgaGVhcFtuXSBhcmUgaGVhcFsyKm5dIGFuZCBoZWFwWzIqbisxXS4KICAgICAqIGhlYXBbMF0gaXMgbm90IHVzZWQuCiAgICAgKi8KICAgIHMuaGVhcF9sZW4gPSAwOwogICAgcy5oZWFwX21heCA9IEhFQVBfU0laRSQxOwoKICAgIGZvciAobiA9IDA7IG4gPCBlbGVtczsgbisrKSB7CiAgICAgIGlmICh0cmVlW24gKiAyXS8qLkZyZXEqLyAhPT0gMCkgewogICAgICAgIHMuaGVhcFsrK3MuaGVhcF9sZW5dID0gbWF4X2NvZGUgPSBuOwogICAgICAgIHMuZGVwdGhbbl0gPSAwOwoKICAgICAgfSBlbHNlIHsKICAgICAgICB0cmVlW24gKiAyICsgMV0vKi5MZW4qLyA9IDA7CiAgICAgIH0KICAgIH0KCiAgICAvKiBUaGUgcGt6aXAgZm9ybWF0IHJlcXVpcmVzIHRoYXQgYXQgbGVhc3Qgb25lIGRpc3RhbmNlIGNvZGUgZXhpc3RzLAogICAgICogYW5kIHRoYXQgYXQgbGVhc3Qgb25lIGJpdCBzaG91bGQgYmUgc2VudCBldmVuIGlmIHRoZXJlIGlzIG9ubHkgb25lCiAgICAgKiBwb3NzaWJsZSBjb2RlLiBTbyB0byBhdm9pZCBzcGVjaWFsIGNoZWNrcyBsYXRlciBvbiB3ZSBmb3JjZSBhdCBsZWFzdAogICAgICogdHdvIGNvZGVzIG9mIG5vbiB6ZXJvIGZyZXF1ZW5jeS4KICAgICAqLwogICAgd2hpbGUgKHMuaGVhcF9sZW4gPCAyKSB7CiAgICAgIG5vZGUgPSBzLmhlYXBbKytzLmhlYXBfbGVuXSA9IChtYXhfY29kZSA8IDIgPyArK21heF9jb2RlIDogMCk7CiAgICAgIHRyZWVbbm9kZSAqIDJdLyouRnJlcSovID0gMTsKICAgICAgcy5kZXB0aFtub2RlXSA9IDA7CiAgICAgIHMub3B0X2xlbi0tOwoKICAgICAgaWYgKGhhc19zdHJlZSkgewogICAgICAgIHMuc3RhdGljX2xlbiAtPSBzdHJlZVtub2RlICogMiArIDFdLyouTGVuKi87CiAgICAgIH0KICAgICAgLyogbm9kZSBpcyAwIG9yIDEgc28gaXQgZG9lcyBub3QgaGF2ZSBleHRyYSBiaXRzICovCiAgICB9CiAgICBkZXNjLm1heF9jb2RlID0gbWF4X2NvZGU7CgogICAgLyogVGhlIGVsZW1lbnRzIGhlYXBbaGVhcF9sZW4vMisxIC4uIGhlYXBfbGVuXSBhcmUgbGVhdmVzIG9mIHRoZSB0cmVlLAogICAgICogZXN0YWJsaXNoIHN1Yi1oZWFwcyBvZiBpbmNyZWFzaW5nIGxlbmd0aHM6CiAgICAgKi8KICAgIGZvciAobiA9IChzLmhlYXBfbGVuID4+IDEvKmludCAvMiovKTsgbiA+PSAxOyBuLS0pIHsgcHFkb3duaGVhcChzLCB0cmVlLCBuKTsgfQoKICAgIC8qIENvbnN0cnVjdCB0aGUgSHVmZm1hbiB0cmVlIGJ5IHJlcGVhdGVkbHkgY29tYmluaW5nIHRoZSBsZWFzdCB0d28KICAgICAqIGZyZXF1ZW50IG5vZGVzLgogICAgICovCiAgICBub2RlID0gZWxlbXM7ICAgICAgICAgICAgICAvKiBuZXh0IGludGVybmFsIG5vZGUgb2YgdGhlIHRyZWUgKi8KICAgIGRvIHsKICAgICAgLy9wcXJlbW92ZShzLCB0cmVlLCBuKTsgIC8qIG4gPSBub2RlIG9mIGxlYXN0IGZyZXF1ZW5jeSAqLwogICAgICAvKioqIHBxcmVtb3ZlICoqKi8KICAgICAgbiA9IHMuaGVhcFsxLypTTUFMTEVTVCovXTsKICAgICAgcy5oZWFwWzEvKlNNQUxMRVNUKi9dID0gcy5oZWFwW3MuaGVhcF9sZW4tLV07CiAgICAgIHBxZG93bmhlYXAocywgdHJlZSwgMS8qU01BTExFU1QqLyk7CiAgICAgIC8qKiovCgogICAgICBtID0gcy5oZWFwWzEvKlNNQUxMRVNUKi9dOyAvKiBtID0gbm9kZSBvZiBuZXh0IGxlYXN0IGZyZXF1ZW5jeSAqLwoKICAgICAgcy5oZWFwWy0tcy5oZWFwX21heF0gPSBuOyAvKiBrZWVwIHRoZSBub2RlcyBzb3J0ZWQgYnkgZnJlcXVlbmN5ICovCiAgICAgIHMuaGVhcFstLXMuaGVhcF9tYXhdID0gbTsKCiAgICAgIC8qIENyZWF0ZSBhIG5ldyBub2RlIGZhdGhlciBvZiBuIGFuZCBtICovCiAgICAgIHRyZWVbbm9kZSAqIDJdLyouRnJlcSovID0gdHJlZVtuICogMl0vKi5GcmVxKi8gKyB0cmVlW20gKiAyXS8qLkZyZXEqLzsKICAgICAgcy5kZXB0aFtub2RlXSA9IChzLmRlcHRoW25dID49IHMuZGVwdGhbbV0gPyBzLmRlcHRoW25dIDogcy5kZXB0aFttXSkgKyAxOwogICAgICB0cmVlW24gKiAyICsgMV0vKi5EYWQqLyA9IHRyZWVbbSAqIDIgKyAxXS8qLkRhZCovID0gbm9kZTsKCiAgICAgIC8qIGFuZCBpbnNlcnQgdGhlIG5ldyBub2RlIGluIHRoZSBoZWFwICovCiAgICAgIHMuaGVhcFsxLypTTUFMTEVTVCovXSA9IG5vZGUrKzsKICAgICAgcHFkb3duaGVhcChzLCB0cmVlLCAxLypTTUFMTEVTVCovKTsKCiAgICB9IHdoaWxlIChzLmhlYXBfbGVuID49IDIpOwoKICAgIHMuaGVhcFstLXMuaGVhcF9tYXhdID0gcy5oZWFwWzEvKlNNQUxMRVNUKi9dOwoKICAgIC8qIEF0IHRoaXMgcG9pbnQsIHRoZSBmaWVsZHMgZnJlcSBhbmQgZGFkIGFyZSBzZXQuIFdlIGNhbiBub3cKICAgICAqIGdlbmVyYXRlIHRoZSBiaXQgbGVuZ3Rocy4KICAgICAqLwogICAgZ2VuX2JpdGxlbihzLCBkZXNjKTsKCiAgICAvKiBUaGUgZmllbGQgbGVuIGlzIG5vdyBzZXQsIHdlIGNhbiBnZW5lcmF0ZSB0aGUgYml0IGNvZGVzICovCiAgICBnZW5fY29kZXModHJlZSwgbWF4X2NvZGUsIHMuYmxfY291bnQpOwogIH07CgoKICAvKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgKiBTY2FuIGEgbGl0ZXJhbCBvciBkaXN0YW5jZSB0cmVlIHRvIGRldGVybWluZSB0aGUgZnJlcXVlbmNpZXMgb2YgdGhlIGNvZGVzCiAgICogaW4gdGhlIGJpdCBsZW5ndGggdHJlZS4KICAgKi8KICBjb25zdCBzY2FuX3RyZWUgPSAocywgdHJlZSwgbWF4X2NvZGUpID0+CiAgLy8gICAgZGVmbGF0ZV9zdGF0ZSAqczsKICAvLyAgICBjdF9kYXRhICp0cmVlOyAgIC8qIHRoZSB0cmVlIHRvIGJlIHNjYW5uZWQgKi8KICAvLyAgICBpbnQgbWF4X2NvZGU7ICAgIC8qIGFuZCBpdHMgbGFyZ2VzdCBjb2RlIG9mIG5vbiB6ZXJvIGZyZXF1ZW5jeSAqLwogIHsKICAgIGxldCBuOyAgICAgICAgICAgICAgICAgICAgIC8qIGl0ZXJhdGVzIG92ZXIgYWxsIHRyZWUgZWxlbWVudHMgKi8KICAgIGxldCBwcmV2bGVuID0gLTE7ICAgICAgICAgIC8qIGxhc3QgZW1pdHRlZCBsZW5ndGggKi8KICAgIGxldCBjdXJsZW47ICAgICAgICAgICAgICAgIC8qIGxlbmd0aCBvZiBjdXJyZW50IGNvZGUgKi8KCiAgICBsZXQgbmV4dGxlbiA9IHRyZWVbMCAqIDIgKyAxXS8qLkxlbiovOyAvKiBsZW5ndGggb2YgbmV4dCBjb2RlICovCgogICAgbGV0IGNvdW50ID0gMDsgICAgICAgICAgICAgLyogcmVwZWF0IGNvdW50IG9mIHRoZSBjdXJyZW50IGNvZGUgKi8KICAgIGxldCBtYXhfY291bnQgPSA3OyAgICAgICAgIC8qIG1heCByZXBlYXQgY291bnQgKi8KICAgIGxldCBtaW5fY291bnQgPSA0OyAgICAgICAgIC8qIG1pbiByZXBlYXQgY291bnQgKi8KCiAgICBpZiAobmV4dGxlbiA9PT0gMCkgewogICAgICBtYXhfY291bnQgPSAxMzg7CiAgICAgIG1pbl9jb3VudCA9IDM7CiAgICB9CiAgICB0cmVlWyhtYXhfY29kZSArIDEpICogMiArIDFdLyouTGVuKi8gPSAweGZmZmY7IC8qIGd1YXJkICovCgogICAgZm9yIChuID0gMDsgbiA8PSBtYXhfY29kZTsgbisrKSB7CiAgICAgIGN1cmxlbiA9IG5leHRsZW47CiAgICAgIG5leHRsZW4gPSB0cmVlWyhuICsgMSkgKiAyICsgMV0vKi5MZW4qLzsKCiAgICAgIGlmICgrK2NvdW50IDwgbWF4X2NvdW50ICYmIGN1cmxlbiA9PT0gbmV4dGxlbikgewogICAgICAgIGNvbnRpbnVlOwoKICAgICAgfSBlbHNlIGlmIChjb3VudCA8IG1pbl9jb3VudCkgewogICAgICAgIHMuYmxfdHJlZVtjdXJsZW4gKiAyXS8qLkZyZXEqLyArPSBjb3VudDsKCiAgICAgIH0gZWxzZSBpZiAoY3VybGVuICE9PSAwKSB7CgogICAgICAgIGlmIChjdXJsZW4gIT09IHByZXZsZW4pIHsgcy5ibF90cmVlW2N1cmxlbiAqIDJdLyouRnJlcSovKys7IH0KICAgICAgICBzLmJsX3RyZWVbUkVQXzNfNiAqIDJdLyouRnJlcSovKys7CgogICAgICB9IGVsc2UgaWYgKGNvdW50IDw9IDEwKSB7CiAgICAgICAgcy5ibF90cmVlW1JFUFpfM18xMCAqIDJdLyouRnJlcSovKys7CgogICAgICB9IGVsc2UgewogICAgICAgIHMuYmxfdHJlZVtSRVBaXzExXzEzOCAqIDJdLyouRnJlcSovKys7CiAgICAgIH0KCiAgICAgIGNvdW50ID0gMDsKICAgICAgcHJldmxlbiA9IGN1cmxlbjsKCiAgICAgIGlmIChuZXh0bGVuID09PSAwKSB7CiAgICAgICAgbWF4X2NvdW50ID0gMTM4OwogICAgICAgIG1pbl9jb3VudCA9IDM7CgogICAgICB9IGVsc2UgaWYgKGN1cmxlbiA9PT0gbmV4dGxlbikgewogICAgICAgIG1heF9jb3VudCA9IDY7CiAgICAgICAgbWluX2NvdW50ID0gMzsKCiAgICAgIH0gZWxzZSB7CiAgICAgICAgbWF4X2NvdW50ID0gNzsKICAgICAgICBtaW5fY291bnQgPSA0OwogICAgICB9CiAgICB9CiAgfTsKCgogIC8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAqIFNlbmQgYSBsaXRlcmFsIG9yIGRpc3RhbmNlIHRyZWUgaW4gY29tcHJlc3NlZCBmb3JtLCB1c2luZyB0aGUgY29kZXMgaW4KICAgKiBibF90cmVlLgogICAqLwogIGNvbnN0IHNlbmRfdHJlZSA9IChzLCB0cmVlLCBtYXhfY29kZSkgPT4KICAvLyAgICBkZWZsYXRlX3N0YXRlICpzOwogIC8vICAgIGN0X2RhdGEgKnRyZWU7IC8qIHRoZSB0cmVlIHRvIGJlIHNjYW5uZWQgKi8KICAvLyAgICBpbnQgbWF4X2NvZGU7ICAgICAgIC8qIGFuZCBpdHMgbGFyZ2VzdCBjb2RlIG9mIG5vbiB6ZXJvIGZyZXF1ZW5jeSAqLwogIHsKICAgIGxldCBuOyAgICAgICAgICAgICAgICAgICAgIC8qIGl0ZXJhdGVzIG92ZXIgYWxsIHRyZWUgZWxlbWVudHMgKi8KICAgIGxldCBwcmV2bGVuID0gLTE7ICAgICAgICAgIC8qIGxhc3QgZW1pdHRlZCBsZW5ndGggKi8KICAgIGxldCBjdXJsZW47ICAgICAgICAgICAgICAgIC8qIGxlbmd0aCBvZiBjdXJyZW50IGNvZGUgKi8KCiAgICBsZXQgbmV4dGxlbiA9IHRyZWVbMCAqIDIgKyAxXS8qLkxlbiovOyAvKiBsZW5ndGggb2YgbmV4dCBjb2RlICovCgogICAgbGV0IGNvdW50ID0gMDsgICAgICAgICAgICAgLyogcmVwZWF0IGNvdW50IG9mIHRoZSBjdXJyZW50IGNvZGUgKi8KICAgIGxldCBtYXhfY291bnQgPSA3OyAgICAgICAgIC8qIG1heCByZXBlYXQgY291bnQgKi8KICAgIGxldCBtaW5fY291bnQgPSA0OyAgICAgICAgIC8qIG1pbiByZXBlYXQgY291bnQgKi8KCiAgICAvKiB0cmVlW21heF9jb2RlKzFdLkxlbiA9IC0xOyAqLyAgLyogZ3VhcmQgYWxyZWFkeSBzZXQgKi8KICAgIGlmIChuZXh0bGVuID09PSAwKSB7CiAgICAgIG1heF9jb3VudCA9IDEzODsKICAgICAgbWluX2NvdW50ID0gMzsKICAgIH0KCiAgICBmb3IgKG4gPSAwOyBuIDw9IG1heF9jb2RlOyBuKyspIHsKICAgICAgY3VybGVuID0gbmV4dGxlbjsKICAgICAgbmV4dGxlbiA9IHRyZWVbKG4gKyAxKSAqIDIgKyAxXS8qLkxlbiovOwoKICAgICAgaWYgKCsrY291bnQgPCBtYXhfY291bnQgJiYgY3VybGVuID09PSBuZXh0bGVuKSB7CiAgICAgICAgY29udGludWU7CgogICAgICB9IGVsc2UgaWYgKGNvdW50IDwgbWluX2NvdW50KSB7CiAgICAgICAgZG8geyBzZW5kX2NvZGUocywgY3VybGVuLCBzLmJsX3RyZWUpOyB9IHdoaWxlICgtLWNvdW50ICE9PSAwKTsKCiAgICAgIH0gZWxzZSBpZiAoY3VybGVuICE9PSAwKSB7CiAgICAgICAgaWYgKGN1cmxlbiAhPT0gcHJldmxlbikgewogICAgICAgICAgc2VuZF9jb2RlKHMsIGN1cmxlbiwgcy5ibF90cmVlKTsKICAgICAgICAgIGNvdW50LS07CiAgICAgICAgfQogICAgICAgIC8vQXNzZXJ0KGNvdW50ID49IDMgJiYgY291bnQgPD0gNiwgIiAzXzY/Iik7CiAgICAgICAgc2VuZF9jb2RlKHMsIFJFUF8zXzYsIHMuYmxfdHJlZSk7CiAgICAgICAgc2VuZF9iaXRzKHMsIGNvdW50IC0gMywgMik7CgogICAgICB9IGVsc2UgaWYgKGNvdW50IDw9IDEwKSB7CiAgICAgICAgc2VuZF9jb2RlKHMsIFJFUFpfM18xMCwgcy5ibF90cmVlKTsKICAgICAgICBzZW5kX2JpdHMocywgY291bnQgLSAzLCAzKTsKCiAgICAgIH0gZWxzZSB7CiAgICAgICAgc2VuZF9jb2RlKHMsIFJFUFpfMTFfMTM4LCBzLmJsX3RyZWUpOwogICAgICAgIHNlbmRfYml0cyhzLCBjb3VudCAtIDExLCA3KTsKICAgICAgfQoKICAgICAgY291bnQgPSAwOwogICAgICBwcmV2bGVuID0gY3VybGVuOwogICAgICBpZiAobmV4dGxlbiA9PT0gMCkgewogICAgICAgIG1heF9jb3VudCA9IDEzODsKICAgICAgICBtaW5fY291bnQgPSAzOwoKICAgICAgfSBlbHNlIGlmIChjdXJsZW4gPT09IG5leHRsZW4pIHsKICAgICAgICBtYXhfY291bnQgPSA2OwogICAgICAgIG1pbl9jb3VudCA9IDM7CgogICAgICB9IGVsc2UgewogICAgICAgIG1heF9jb3VudCA9IDc7CiAgICAgICAgbWluX2NvdW50ID0gNDsKICAgICAgfQogICAgfQogIH07CgoKICAvKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgKiBDb25zdHJ1Y3QgdGhlIEh1ZmZtYW4gdHJlZSBmb3IgdGhlIGJpdCBsZW5ndGhzIGFuZCByZXR1cm4gdGhlIGluZGV4IGluCiAgICogYmxfb3JkZXIgb2YgdGhlIGxhc3QgYml0IGxlbmd0aCBjb2RlIHRvIHNlbmQuCiAgICovCiAgY29uc3QgYnVpbGRfYmxfdHJlZSA9IChzKSA9PiB7CgogICAgbGV0IG1heF9ibGluZGV4OyAgLyogaW5kZXggb2YgbGFzdCBiaXQgbGVuZ3RoIGNvZGUgb2Ygbm9uIHplcm8gZnJlcSAqLwoKICAgIC8qIERldGVybWluZSB0aGUgYml0IGxlbmd0aCBmcmVxdWVuY2llcyBmb3IgbGl0ZXJhbCBhbmQgZGlzdGFuY2UgdHJlZXMgKi8KICAgIHNjYW5fdHJlZShzLCBzLmR5bl9sdHJlZSwgcy5sX2Rlc2MubWF4X2NvZGUpOwogICAgc2Nhbl90cmVlKHMsIHMuZHluX2R0cmVlLCBzLmRfZGVzYy5tYXhfY29kZSk7CgogICAgLyogQnVpbGQgdGhlIGJpdCBsZW5ndGggdHJlZTogKi8KICAgIGJ1aWxkX3RyZWUocywgcy5ibF9kZXNjKTsKICAgIC8qIG9wdF9sZW4gbm93IGluY2x1ZGVzIHRoZSBsZW5ndGggb2YgdGhlIHRyZWUgcmVwcmVzZW50YXRpb25zLCBleGNlcHQKICAgICAqIHRoZSBsZW5ndGhzIG9mIHRoZSBiaXQgbGVuZ3RocyBjb2RlcyBhbmQgdGhlIDUrNSs0IGJpdHMgZm9yIHRoZSBjb3VudHMuCiAgICAgKi8KCiAgICAvKiBEZXRlcm1pbmUgdGhlIG51bWJlciBvZiBiaXQgbGVuZ3RoIGNvZGVzIHRvIHNlbmQuIFRoZSBwa3ppcCBmb3JtYXQKICAgICAqIHJlcXVpcmVzIHRoYXQgYXQgbGVhc3QgNCBiaXQgbGVuZ3RoIGNvZGVzIGJlIHNlbnQuIChhcHBub3RlLnR4dCBzYXlzCiAgICAgKiAzIGJ1dCB0aGUgYWN0dWFsIHZhbHVlIHVzZWQgaXMgNC4pCiAgICAgKi8KICAgIGZvciAobWF4X2JsaW5kZXggPSBCTF9DT0RFUyQxIC0gMTsgbWF4X2JsaW5kZXggPj0gMzsgbWF4X2JsaW5kZXgtLSkgewogICAgICBpZiAocy5ibF90cmVlW2JsX29yZGVyW21heF9ibGluZGV4XSAqIDIgKyAxXS8qLkxlbiovICE9PSAwKSB7CiAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0KICAgIC8qIFVwZGF0ZSBvcHRfbGVuIHRvIGluY2x1ZGUgdGhlIGJpdCBsZW5ndGggdHJlZSBhbmQgY291bnRzICovCiAgICBzLm9wdF9sZW4gKz0gMyAqIChtYXhfYmxpbmRleCArIDEpICsgNSArIDUgKyA0OwogICAgLy9UcmFjZXYoKHN0ZGVyciwgIlxuZHluIHRyZWVzOiBkeW4gJWxkLCBzdGF0ICVsZCIsCiAgICAvLyAgICAgICAgcy0+b3B0X2xlbiwgcy0+c3RhdGljX2xlbikpOwoKICAgIHJldHVybiBtYXhfYmxpbmRleDsKICB9OwoKCiAgLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgICogU2VuZCB0aGUgaGVhZGVyIGZvciBhIGJsb2NrIHVzaW5nIGR5bmFtaWMgSHVmZm1hbiB0cmVlczogdGhlIGNvdW50cywgdGhlCiAgICogbGVuZ3RocyBvZiB0aGUgYml0IGxlbmd0aCBjb2RlcywgdGhlIGxpdGVyYWwgdHJlZSBhbmQgdGhlIGRpc3RhbmNlIHRyZWUuCiAgICogSU4gYXNzZXJ0aW9uOiBsY29kZXMgPj0gMjU3LCBkY29kZXMgPj0gMSwgYmxjb2RlcyA+PSA0LgogICAqLwogIGNvbnN0IHNlbmRfYWxsX3RyZWVzID0gKHMsIGxjb2RlcywgZGNvZGVzLCBibGNvZGVzKSA9PgogIC8vICAgIGRlZmxhdGVfc3RhdGUgKnM7CiAgLy8gICAgaW50IGxjb2RlcywgZGNvZGVzLCBibGNvZGVzOyAvKiBudW1iZXIgb2YgY29kZXMgZm9yIGVhY2ggdHJlZSAqLwogIHsKICAgIGxldCByYW5rOyAgICAgICAgICAgICAgICAgICAgLyogaW5kZXggaW4gYmxfb3JkZXIgKi8KCiAgICAvL0Fzc2VydCAobGNvZGVzID49IDI1NyAmJiBkY29kZXMgPj0gMSAmJiBibGNvZGVzID49IDQsICJub3QgZW5vdWdoIGNvZGVzIik7CiAgICAvL0Fzc2VydCAobGNvZGVzIDw9IExfQ09ERVMgJiYgZGNvZGVzIDw9IERfQ09ERVMgJiYgYmxjb2RlcyA8PSBCTF9DT0RFUywKICAgIC8vICAgICAgICAidG9vIG1hbnkgY29kZXMiKTsKICAgIC8vVHJhY2V2KChzdGRlcnIsICJcbmJsIGNvdW50czogIikpOwogICAgc2VuZF9iaXRzKHMsIGxjb2RlcyAtIDI1NywgNSk7IC8qIG5vdCArMjU1IGFzIHN0YXRlZCBpbiBhcHBub3RlLnR4dCAqLwogICAgc2VuZF9iaXRzKHMsIGRjb2RlcyAtIDEsICAgNSk7CiAgICBzZW5kX2JpdHMocywgYmxjb2RlcyAtIDQsICA0KTsgLyogbm90IC0zIGFzIHN0YXRlZCBpbiBhcHBub3RlLnR4dCAqLwogICAgZm9yIChyYW5rID0gMDsgcmFuayA8IGJsY29kZXM7IHJhbmsrKykgewogICAgICAvL1RyYWNldigoc3RkZXJyLCAiXG5ibCBjb2RlICUyZCAiLCBibF9vcmRlcltyYW5rXSkpOwogICAgICBzZW5kX2JpdHMocywgcy5ibF90cmVlW2JsX29yZGVyW3JhbmtdICogMiArIDFdLyouTGVuKi8sIDMpOwogICAgfQogICAgLy9UcmFjZXYoKHN0ZGVyciwgIlxuYmwgdHJlZTogc2VudCAlbGQiLCBzLT5iaXRzX3NlbnQpKTsKCiAgICBzZW5kX3RyZWUocywgcy5keW5fbHRyZWUsIGxjb2RlcyAtIDEpOyAvKiBsaXRlcmFsIHRyZWUgKi8KICAgIC8vVHJhY2V2KChzdGRlcnIsICJcbmxpdCB0cmVlOiBzZW50ICVsZCIsIHMtPmJpdHNfc2VudCkpOwoKICAgIHNlbmRfdHJlZShzLCBzLmR5bl9kdHJlZSwgZGNvZGVzIC0gMSk7IC8qIGRpc3RhbmNlIHRyZWUgKi8KICAgIC8vVHJhY2V2KChzdGRlcnIsICJcbmRpc3QgdHJlZTogc2VudCAlbGQiLCBzLT5iaXRzX3NlbnQpKTsKICB9OwoKCiAgLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgICogQ2hlY2sgaWYgdGhlIGRhdGEgdHlwZSBpcyBURVhUIG9yIEJJTkFSWSwgdXNpbmcgdGhlIGZvbGxvd2luZyBhbGdvcml0aG06CiAgICogLSBURVhUIGlmIHRoZSB0d28gY29uZGl0aW9ucyBiZWxvdyBhcmUgc2F0aXNmaWVkOgogICAqICAgIGEpIFRoZXJlIGFyZSBubyBub24tcG9ydGFibGUgY29udHJvbCBjaGFyYWN0ZXJzIGJlbG9uZ2luZyB0byB0aGUKICAgKiAgICAgICAiYmxhY2sgbGlzdCIgKDAuLjYsIDE0Li4yNSwgMjguLjMxKS4KICAgKiAgICBiKSBUaGVyZSBpcyBhdCBsZWFzdCBvbmUgcHJpbnRhYmxlIGNoYXJhY3RlciBiZWxvbmdpbmcgdG8gdGhlCiAgICogICAgICAgIndoaXRlIGxpc3QiICg5IHtUQUJ9LCAxMCB7TEZ9LCAxMyB7Q1J9LCAzMi4uMjU1KS4KICAgKiAtIEJJTkFSWSBvdGhlcndpc2UuCiAgICogLSBUaGUgZm9sbG93aW5nIHBhcnRpYWxseS1wb3J0YWJsZSBjb250cm9sIGNoYXJhY3RlcnMgZm9ybSBhCiAgICogICAiZ3JheSBsaXN0IiB0aGF0IGlzIGlnbm9yZWQgaW4gdGhpcyBkZXRlY3Rpb24gYWxnb3JpdGhtOgogICAqICAgKDcge0JFTH0sIDgge0JTfSwgMTEge1ZUfSwgMTIge0ZGfSwgMjYge1NVQn0sIDI3IHtFU0N9KS4KICAgKiBJTiBhc3NlcnRpb246IHRoZSBmaWVsZHMgRnJlcSBvZiBkeW5fbHRyZWUgYXJlIHNldC4KICAgKi8KICBjb25zdCBkZXRlY3RfZGF0YV90eXBlID0gKHMpID0+IHsKICAgIC8qIGJsYWNrX21hc2sgaXMgdGhlIGJpdCBtYXNrIG9mIGJsYWNrLWxpc3RlZCBieXRlcwogICAgICogc2V0IGJpdHMgMC4uNiwgMTQuLjI1LCBhbmQgMjguLjMxCiAgICAgKiAweGYzZmZjMDdmID0gYmluYXJ5IDExMTEwMDExMTExMTExMTExMTAwMDAwMDAxMTExMTExCiAgICAgKi8KICAgIGxldCBibGFja19tYXNrID0gMHhmM2ZmYzA3ZjsKICAgIGxldCBuOwoKICAgIC8qIENoZWNrIGZvciBub24tdGV4dHVhbCAoImJsYWNrLWxpc3RlZCIpIGJ5dGVzLiAqLwogICAgZm9yIChuID0gMDsgbiA8PSAzMTsgbisrLCBibGFja19tYXNrID4+Pj0gMSkgewogICAgICBpZiAoKGJsYWNrX21hc2sgJiAxKSAmJiAocy5keW5fbHRyZWVbbiAqIDJdLyouRnJlcSovICE9PSAwKSkgewogICAgICAgIHJldHVybiBaX0JJTkFSWTsKICAgICAgfQogICAgfQoKICAgIC8qIENoZWNrIGZvciB0ZXh0dWFsICgid2hpdGUtbGlzdGVkIikgYnl0ZXMuICovCiAgICBpZiAocy5keW5fbHRyZWVbOSAqIDJdLyouRnJlcSovICE9PSAwIHx8IHMuZHluX2x0cmVlWzEwICogMl0vKi5GcmVxKi8gIT09IDAgfHwKICAgICAgICBzLmR5bl9sdHJlZVsxMyAqIDJdLyouRnJlcSovICE9PSAwKSB7CiAgICAgIHJldHVybiBaX1RFWFQ7CiAgICB9CiAgICBmb3IgKG4gPSAzMjsgbiA8IExJVEVSQUxTJDE7IG4rKykgewogICAgICBpZiAocy5keW5fbHRyZWVbbiAqIDJdLyouRnJlcSovICE9PSAwKSB7CiAgICAgICAgcmV0dXJuIFpfVEVYVDsKICAgICAgfQogICAgfQoKICAgIC8qIFRoZXJlIGFyZSBubyAiYmxhY2stbGlzdGVkIiBvciAid2hpdGUtbGlzdGVkIiBieXRlczoKICAgICAqIHRoaXMgc3RyZWFtIGVpdGhlciBpcyBlbXB0eSBvciBoYXMgdG9sZXJhdGVkICgiZ3JheS1saXN0ZWQiKSBieXRlcyBvbmx5LgogICAgICovCiAgICByZXR1cm4gWl9CSU5BUlk7CiAgfTsKCgogIGxldCBzdGF0aWNfaW5pdF9kb25lID0gZmFsc2U7CgogIC8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAqIEluaXRpYWxpemUgdGhlIHRyZWUgZGF0YSBzdHJ1Y3R1cmVzIGZvciBhIG5ldyB6bGliIHN0cmVhbS4KICAgKi8KICBjb25zdCBfdHJfaW5pdCQxID0gKHMpID0+CiAgewoKICAgIGlmICghc3RhdGljX2luaXRfZG9uZSkgewogICAgICB0cl9zdGF0aWNfaW5pdCgpOwogICAgICBzdGF0aWNfaW5pdF9kb25lID0gdHJ1ZTsKICAgIH0KCiAgICBzLmxfZGVzYyAgPSBuZXcgVHJlZURlc2Mocy5keW5fbHRyZWUsIHN0YXRpY19sX2Rlc2MpOwogICAgcy5kX2Rlc2MgID0gbmV3IFRyZWVEZXNjKHMuZHluX2R0cmVlLCBzdGF0aWNfZF9kZXNjKTsKICAgIHMuYmxfZGVzYyA9IG5ldyBUcmVlRGVzYyhzLmJsX3RyZWUsIHN0YXRpY19ibF9kZXNjKTsKCiAgICBzLmJpX2J1ZiA9IDA7CiAgICBzLmJpX3ZhbGlkID0gMDsKCiAgICAvKiBJbml0aWFsaXplIHRoZSBmaXJzdCBibG9jayBvZiB0aGUgZmlyc3QgZmlsZTogKi8KICAgIGluaXRfYmxvY2socyk7CiAgfTsKCgogIC8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAqIFNlbmQgYSBzdG9yZWQgYmxvY2sKICAgKi8KICBjb25zdCBfdHJfc3RvcmVkX2Jsb2NrJDEgPSAocywgYnVmLCBzdG9yZWRfbGVuLCBsYXN0KSA9PgogIC8vRGVmbGF0ZVN0YXRlICpzOwogIC8vY2hhcmYgKmJ1ZjsgICAgICAgLyogaW5wdXQgYmxvY2sgKi8KICAvL3VsZyBzdG9yZWRfbGVuOyAgIC8qIGxlbmd0aCBvZiBpbnB1dCBibG9jayAqLwogIC8vaW50IGxhc3Q7ICAgICAgICAgLyogb25lIGlmIHRoaXMgaXMgdGhlIGxhc3QgYmxvY2sgZm9yIGEgZmlsZSAqLwogIHsKICAgIHNlbmRfYml0cyhzLCAoU1RPUkVEX0JMT0NLIDw8IDEpICsgKGxhc3QgPyAxIDogMCksIDMpOyAgICAvKiBzZW5kIGJsb2NrIHR5cGUgKi8KICAgIGNvcHlfYmxvY2socywgYnVmLCBzdG9yZWRfbGVuLCB0cnVlKTsgLyogd2l0aCBoZWFkZXIgKi8KICB9OwoKCiAgLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgICogU2VuZCBvbmUgZW1wdHkgc3RhdGljIGJsb2NrIHRvIGdpdmUgZW5vdWdoIGxvb2thaGVhZCBmb3IgaW5mbGF0ZS4KICAgKiBUaGlzIHRha2VzIDEwIGJpdHMsIG9mIHdoaWNoIDcgbWF5IHJlbWFpbiBpbiB0aGUgYml0IGJ1ZmZlci4KICAgKi8KICBjb25zdCBfdHJfYWxpZ24kMSA9IChzKSA9PiB7CiAgICBzZW5kX2JpdHMocywgU1RBVElDX1RSRUVTIDw8IDEsIDMpOwogICAgc2VuZF9jb2RlKHMsIEVORF9CTE9DSywgc3RhdGljX2x0cmVlKTsKICAgIGJpX2ZsdXNoKHMpOwogIH07CgoKICAvKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgKiBEZXRlcm1pbmUgdGhlIGJlc3QgZW5jb2RpbmcgZm9yIHRoZSBjdXJyZW50IGJsb2NrOiBkeW5hbWljIHRyZWVzLCBzdGF0aWMKICAgKiB0cmVlcyBvciBzdG9yZSwgYW5kIG91dHB1dCB0aGUgZW5jb2RlZCBibG9jayB0byB0aGUgemlwIGZpbGUuCiAgICovCiAgY29uc3QgX3RyX2ZsdXNoX2Jsb2NrJDEgPSAocywgYnVmLCBzdG9yZWRfbGVuLCBsYXN0KSA9PgogIC8vRGVmbGF0ZVN0YXRlICpzOwogIC8vY2hhcmYgKmJ1ZjsgICAgICAgLyogaW5wdXQgYmxvY2ssIG9yIE5VTEwgaWYgdG9vIG9sZCAqLwogIC8vdWxnIHN0b3JlZF9sZW47ICAgLyogbGVuZ3RoIG9mIGlucHV0IGJsb2NrICovCiAgLy9pbnQgbGFzdDsgICAgICAgICAvKiBvbmUgaWYgdGhpcyBpcyB0aGUgbGFzdCBibG9jayBmb3IgYSBmaWxlICovCiAgewogICAgbGV0IG9wdF9sZW5iLCBzdGF0aWNfbGVuYjsgIC8qIG9wdF9sZW4gYW5kIHN0YXRpY19sZW4gaW4gYnl0ZXMgKi8KICAgIGxldCBtYXhfYmxpbmRleCA9IDA7ICAgICAgICAvKiBpbmRleCBvZiBsYXN0IGJpdCBsZW5ndGggY29kZSBvZiBub24gemVybyBmcmVxICovCgogICAgLyogQnVpbGQgdGhlIEh1ZmZtYW4gdHJlZXMgdW5sZXNzIGEgc3RvcmVkIGJsb2NrIGlzIGZvcmNlZCAqLwogICAgaWYgKHMubGV2ZWwgPiAwKSB7CgogICAgICAvKiBDaGVjayBpZiB0aGUgZmlsZSBpcyBiaW5hcnkgb3IgdGV4dCAqLwogICAgICBpZiAocy5zdHJtLmRhdGFfdHlwZSA9PT0gWl9VTktOT1dOJDEpIHsKICAgICAgICBzLnN0cm0uZGF0YV90eXBlID0gZGV0ZWN0X2RhdGFfdHlwZShzKTsKICAgICAgfQoKICAgICAgLyogQ29uc3RydWN0IHRoZSBsaXRlcmFsIGFuZCBkaXN0YW5jZSB0cmVlcyAqLwogICAgICBidWlsZF90cmVlKHMsIHMubF9kZXNjKTsKICAgICAgLy8gVHJhY2V2KChzdGRlcnIsICJcbmxpdCBkYXRhOiBkeW4gJWxkLCBzdGF0ICVsZCIsIHMtPm9wdF9sZW4sCiAgICAgIC8vICAgICAgICBzLT5zdGF0aWNfbGVuKSk7CgogICAgICBidWlsZF90cmVlKHMsIHMuZF9kZXNjKTsKICAgICAgLy8gVHJhY2V2KChzdGRlcnIsICJcbmRpc3QgZGF0YTogZHluICVsZCwgc3RhdCAlbGQiLCBzLT5vcHRfbGVuLAogICAgICAvLyAgICAgICAgcy0+c3RhdGljX2xlbikpOwogICAgICAvKiBBdCB0aGlzIHBvaW50LCBvcHRfbGVuIGFuZCBzdGF0aWNfbGVuIGFyZSB0aGUgdG90YWwgYml0IGxlbmd0aHMgb2YKICAgICAgICogdGhlIGNvbXByZXNzZWQgYmxvY2sgZGF0YSwgZXhjbHVkaW5nIHRoZSB0cmVlIHJlcHJlc2VudGF0aW9ucy4KICAgICAgICovCgogICAgICAvKiBCdWlsZCB0aGUgYml0IGxlbmd0aCB0cmVlIGZvciB0aGUgYWJvdmUgdHdvIHRyZWVzLCBhbmQgZ2V0IHRoZSBpbmRleAogICAgICAgKiBpbiBibF9vcmRlciBvZiB0aGUgbGFzdCBiaXQgbGVuZ3RoIGNvZGUgdG8gc2VuZC4KICAgICAgICovCiAgICAgIG1heF9ibGluZGV4ID0gYnVpbGRfYmxfdHJlZShzKTsKCiAgICAgIC8qIERldGVybWluZSB0aGUgYmVzdCBlbmNvZGluZy4gQ29tcHV0ZSB0aGUgYmxvY2sgbGVuZ3RocyBpbiBieXRlcy4gKi8KICAgICAgb3B0X2xlbmIgPSAocy5vcHRfbGVuICsgMyArIDcpID4+PiAzOwogICAgICBzdGF0aWNfbGVuYiA9IChzLnN0YXRpY19sZW4gKyAzICsgNykgPj4+IDM7CgogICAgICAvLyBUcmFjZXYoKHN0ZGVyciwgIlxub3B0ICVsdSglbHUpIHN0YXQgJWx1KCVsdSkgc3RvcmVkICVsdSBsaXQgJXUgIiwKICAgICAgLy8gICAgICAgIG9wdF9sZW5iLCBzLT5vcHRfbGVuLCBzdGF0aWNfbGVuYiwgcy0+c3RhdGljX2xlbiwgc3RvcmVkX2xlbiwKICAgICAgLy8gICAgICAgIHMtPmxhc3RfbGl0KSk7CgogICAgICBpZiAoc3RhdGljX2xlbmIgPD0gb3B0X2xlbmIpIHsgb3B0X2xlbmIgPSBzdGF0aWNfbGVuYjsgfQoKICAgIH0gZWxzZSB7CiAgICAgIC8vIEFzc2VydChidWYgIT0gKGNoYXIqKTAsICJsb3N0IGJ1ZiIpOwogICAgICBvcHRfbGVuYiA9IHN0YXRpY19sZW5iID0gc3RvcmVkX2xlbiArIDU7IC8qIGZvcmNlIGEgc3RvcmVkIGJsb2NrICovCiAgICB9CgogICAgaWYgKChzdG9yZWRfbGVuICsgNCA8PSBvcHRfbGVuYikgJiYgKGJ1ZiAhPT0gLTEpKSB7CiAgICAgIC8qIDQ6IHR3byB3b3JkcyBmb3IgdGhlIGxlbmd0aHMgKi8KCiAgICAgIC8qIFRoZSB0ZXN0IGJ1ZiAhPSBOVUxMIGlzIG9ubHkgbmVjZXNzYXJ5IGlmIExJVF9CVUZTSVpFID4gV1NJWkUuCiAgICAgICAqIE90aGVyd2lzZSB3ZSBjYW4ndCBoYXZlIHByb2Nlc3NlZCBtb3JlIHRoYW4gV1NJWkUgaW5wdXQgYnl0ZXMgc2luY2UKICAgICAgICogdGhlIGxhc3QgYmxvY2sgZmx1c2gsIGJlY2F1c2UgY29tcHJlc3Npb24gd291bGQgaGF2ZSBiZWVuCiAgICAgICAqIHN1Y2Nlc3NmdWwuIElmIExJVF9CVUZTSVpFIDw9IFdTSVpFLCBpdCBpcyBuZXZlciB0b28gbGF0ZSB0bwogICAgICAgKiB0cmFuc2Zvcm0gYSBibG9jayBpbnRvIGEgc3RvcmVkIGJsb2NrLgogICAgICAgKi8KICAgICAgX3RyX3N0b3JlZF9ibG9jayQxKHMsIGJ1Ziwgc3RvcmVkX2xlbiwgbGFzdCk7CgogICAgfSBlbHNlIGlmIChzLnN0cmF0ZWd5ID09PSBaX0ZJWEVEJDEgfHwgc3RhdGljX2xlbmIgPT09IG9wdF9sZW5iKSB7CgogICAgICBzZW5kX2JpdHMocywgKFNUQVRJQ19UUkVFUyA8PCAxKSArIChsYXN0ID8gMSA6IDApLCAzKTsKICAgICAgY29tcHJlc3NfYmxvY2socywgc3RhdGljX2x0cmVlLCBzdGF0aWNfZHRyZWUpOwoKICAgIH0gZWxzZSB7CiAgICAgIHNlbmRfYml0cyhzLCAoRFlOX1RSRUVTIDw8IDEpICsgKGxhc3QgPyAxIDogMCksIDMpOwogICAgICBzZW5kX2FsbF90cmVlcyhzLCBzLmxfZGVzYy5tYXhfY29kZSArIDEsIHMuZF9kZXNjLm1heF9jb2RlICsgMSwgbWF4X2JsaW5kZXggKyAxKTsKICAgICAgY29tcHJlc3NfYmxvY2socywgcy5keW5fbHRyZWUsIHMuZHluX2R0cmVlKTsKICAgIH0KICAgIC8vIEFzc2VydCAocy0+Y29tcHJlc3NlZF9sZW4gPT0gcy0+Yml0c19zZW50LCAiYmFkIGNvbXByZXNzZWQgc2l6ZSIpOwogICAgLyogVGhlIGFib3ZlIGNoZWNrIGlzIG1hZGUgbW9kIDJeMzIsIGZvciBmaWxlcyBsYXJnZXIgdGhhbiA1MTIgTUIKICAgICAqIGFuZCB1TG9uZyBpbXBsZW1lbnRlZCBvbiAzMiBiaXRzLgogICAgICovCiAgICBpbml0X2Jsb2NrKHMpOwoKICAgIGlmIChsYXN0KSB7CiAgICAgIGJpX3dpbmR1cChzKTsKICAgIH0KICAgIC8vIFRyYWNldigoc3RkZXJyLCJcbmNvbXBybGVuICVsdSglbHUpICIsIHMtPmNvbXByZXNzZWRfbGVuPj4zLAogICAgLy8gICAgICAgcy0+Y29tcHJlc3NlZF9sZW4tNypsYXN0KSk7CiAgfTsKCiAgLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgICogU2F2ZSB0aGUgbWF0Y2ggaW5mbyBhbmQgdGFsbHkgdGhlIGZyZXF1ZW5jeSBjb3VudHMuIFJldHVybiB0cnVlIGlmCiAgICogdGhlIGN1cnJlbnQgYmxvY2sgbXVzdCBiZSBmbHVzaGVkLgogICAqLwogIGNvbnN0IF90cl90YWxseSQxID0gKHMsIGRpc3QsIGxjKSA9PgogIC8vICAgIGRlZmxhdGVfc3RhdGUgKnM7CiAgLy8gICAgdW5zaWduZWQgZGlzdDsgIC8qIGRpc3RhbmNlIG9mIG1hdGNoZWQgc3RyaW5nICovCiAgLy8gICAgdW5zaWduZWQgbGM7ICAgIC8qIG1hdGNoIGxlbmd0aC1NSU5fTUFUQ0ggb3IgdW5tYXRjaGVkIGNoYXIgKGlmIGRpc3Q9PTApICovCiAgewogICAgLy9sZXQgb3V0X2xlbmd0aCwgaW5fbGVuZ3RoLCBkY29kZTsKCiAgICBzLnBlbmRpbmdfYnVmW3MuZF9idWYgKyBzLmxhc3RfbGl0ICogMl0gICAgID0gKGRpc3QgPj4+IDgpICYgMHhmZjsKICAgIHMucGVuZGluZ19idWZbcy5kX2J1ZiArIHMubGFzdF9saXQgKiAyICsgMV0gPSBkaXN0ICYgMHhmZjsKCiAgICBzLnBlbmRpbmdfYnVmW3MubF9idWYgKyBzLmxhc3RfbGl0XSA9IGxjICYgMHhmZjsKICAgIHMubGFzdF9saXQrKzsKCiAgICBpZiAoZGlzdCA9PT0gMCkgewogICAgICAvKiBsYyBpcyB0aGUgdW5tYXRjaGVkIGNoYXIgKi8KICAgICAgcy5keW5fbHRyZWVbbGMgKiAyXS8qLkZyZXEqLysrOwogICAgfSBlbHNlIHsKICAgICAgcy5tYXRjaGVzKys7CiAgICAgIC8qIEhlcmUsIGxjIGlzIHRoZSBtYXRjaCBsZW5ndGggLSBNSU5fTUFUQ0ggKi8KICAgICAgZGlzdC0tOyAgICAgICAgICAgICAvKiBkaXN0ID0gbWF0Y2ggZGlzdGFuY2UgLSAxICovCiAgICAgIC8vQXNzZXJ0KCh1c2gpZGlzdCA8ICh1c2gpTUFYX0RJU1QocykgJiYKICAgICAgLy8gICAgICAgKHVzaClsYyA8PSAodXNoKShNQVhfTUFUQ0gtTUlOX01BVENIKSAmJgogICAgICAvLyAgICAgICAodXNoKWRfY29kZShkaXN0KSA8ICh1c2gpRF9DT0RFUywgICJfdHJfdGFsbHk6IGJhZCBtYXRjaCIpOwoKICAgICAgcy5keW5fbHRyZWVbKF9sZW5ndGhfY29kZVtsY10gKyBMSVRFUkFMUyQxICsgMSkgKiAyXS8qLkZyZXEqLysrOwogICAgICBzLmR5bl9kdHJlZVtkX2NvZGUoZGlzdCkgKiAyXS8qLkZyZXEqLysrOwogICAgfQoKICAvLyAoISkgVGhpcyBibG9jayBpcyBkaXNhYmxlZCBpbiB6bGliIGRlZmF1bHRzLAogIC8vIGRvbid0IGVuYWJsZSBpdCBmb3IgYmluYXJ5IGNvbXBhdGliaWxpdHkKCiAgLy8jaWZkZWYgVFJVTkNBVEVfQkxPQ0sKICAvLyAgLyogVHJ5IHRvIGd1ZXNzIGlmIGl0IGlzIHByb2ZpdGFibGUgdG8gc3RvcCB0aGUgY3VycmVudCBibG9jayBoZXJlICovCiAgLy8gIGlmICgocy5sYXN0X2xpdCAmIDB4MWZmZikgPT09IDAgJiYgcy5sZXZlbCA+IDIpIHsKICAvLyAgICAvKiBDb21wdXRlIGFuIHVwcGVyIGJvdW5kIGZvciB0aGUgY29tcHJlc3NlZCBsZW5ndGggKi8KICAvLyAgICBvdXRfbGVuZ3RoID0gcy5sYXN0X2xpdCo4OwogIC8vICAgIGluX2xlbmd0aCA9IHMuc3Ryc3RhcnQgLSBzLmJsb2NrX3N0YXJ0OwogIC8vCiAgLy8gICAgZm9yIChkY29kZSA9IDA7IGRjb2RlIDwgRF9DT0RFUzsgZGNvZGUrKykgewogIC8vICAgICAgb3V0X2xlbmd0aCArPSBzLmR5bl9kdHJlZVtkY29kZSoyXS8qLkZyZXEqLyAqICg1ICsgZXh0cmFfZGJpdHNbZGNvZGVdKTsKICAvLyAgICB9CiAgLy8gICAgb3V0X2xlbmd0aCA+Pj49IDM7CiAgLy8gICAgLy9UcmFjZXYoKHN0ZGVyciwiXG5sYXN0X2xpdCAldSwgaW4gJWxkLCBvdXQgfiVsZCglbGQlJSkgIiwKICAvLyAgICAvLyAgICAgICBzLT5sYXN0X2xpdCwgaW5fbGVuZ3RoLCBvdXRfbGVuZ3RoLAogIC8vICAgIC8vICAgICAgIDEwMEwgLSBvdXRfbGVuZ3RoKjEwMEwvaW5fbGVuZ3RoKSk7CiAgLy8gICAgaWYgKHMubWF0Y2hlcyA8IChzLmxhc3RfbGl0Pj4xKS8qaW50IC8yKi8gJiYgb3V0X2xlbmd0aCA8IChpbl9sZW5ndGg+PjEpLyppbnQgLzIqLykgewogIC8vICAgICAgcmV0dXJuIHRydWU7CiAgLy8gICAgfQogIC8vICB9CiAgLy8jZW5kaWYKCiAgICByZXR1cm4gKHMubGFzdF9saXQgPT09IHMubGl0X2J1ZnNpemUgLSAxKTsKICAgIC8qIFdlIGF2b2lkIGVxdWFsaXR5IHdpdGggbGl0X2J1ZnNpemUgYmVjYXVzZSBvZiB3cmFwYXJvdW5kIGF0IDY0SwogICAgICogb24gMTYgYml0IG1hY2hpbmVzIGFuZCBiZWNhdXNlIHN0b3JlZCBibG9ja3MgYXJlIHJlc3RyaWN0ZWQgdG8KICAgICAqIDY0Sy0xIGJ5dGVzLgogICAgICovCiAgfTsKCiAgdmFyIF90cl9pbml0XzEgID0gX3RyX2luaXQkMTsKICB2YXIgX3RyX3N0b3JlZF9ibG9ja18xID0gX3RyX3N0b3JlZF9ibG9jayQxOwogIHZhciBfdHJfZmx1c2hfYmxvY2tfMSAgPSBfdHJfZmx1c2hfYmxvY2skMTsKICB2YXIgX3RyX3RhbGx5XzEgPSBfdHJfdGFsbHkkMTsKICB2YXIgX3RyX2FsaWduXzEgPSBfdHJfYWxpZ24kMTsKCiAgdmFyIHRyZWVzID0gewogIAlfdHJfaW5pdDogX3RyX2luaXRfMSwKICAJX3RyX3N0b3JlZF9ibG9jazogX3RyX3N0b3JlZF9ibG9ja18xLAogIAlfdHJfZmx1c2hfYmxvY2s6IF90cl9mbHVzaF9ibG9ja18xLAogIAlfdHJfdGFsbHk6IF90cl90YWxseV8xLAogIAlfdHJfYWxpZ246IF90cl9hbGlnbl8xCiAgfTsKCiAgLy8gTm90ZTogYWRsZXIzMiB0YWtlcyAxMiUgZm9yIGxldmVsIDAgYW5kIDIlIGZvciBsZXZlbCA2LgogIC8vIEl0IGlzbid0IHdvcnRoIGl0IHRvIG1ha2UgYWRkaXRpb25hbCBvcHRpbWl6YXRpb25zIGFzIGluIG9yaWdpbmFsLgogIC8vIFNtYWxsIHNpemUgaXMgcHJlZmVyYWJsZS4KCiAgLy8gKEMpIDE5OTUtMjAxMyBKZWFuLWxvdXAgR2FpbGx5IGFuZCBNYXJrIEFkbGVyCiAgLy8gKEMpIDIwMTQtMjAxNyBWaXRhbHkgUHV6cmluIGFuZCBBbmRyZXkgVHVwaXRzaW4KICAvLwogIC8vIFRoaXMgc29mdHdhcmUgaXMgcHJvdmlkZWQgJ2FzLWlzJywgd2l0aG91dCBhbnkgZXhwcmVzcyBvciBpbXBsaWVkCiAgLy8gd2FycmFudHkuIEluIG5vIGV2ZW50IHdpbGwgdGhlIGF1dGhvcnMgYmUgaGVsZCBsaWFibGUgZm9yIGFueSBkYW1hZ2VzCiAgLy8gYXJpc2luZyBmcm9tIHRoZSB1c2Ugb2YgdGhpcyBzb2Z0d2FyZS4KICAvLwogIC8vIFBlcm1pc3Npb24gaXMgZ3JhbnRlZCB0byBhbnlvbmUgdG8gdXNlIHRoaXMgc29mdHdhcmUgZm9yIGFueSBwdXJwb3NlLAogIC8vIGluY2x1ZGluZyBjb21tZXJjaWFsIGFwcGxpY2F0aW9ucywgYW5kIHRvIGFsdGVyIGl0IGFuZCByZWRpc3RyaWJ1dGUgaXQKICAvLyBmcmVlbHksIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyByZXN0cmljdGlvbnM6CiAgLy8KICAvLyAxLiBUaGUgb3JpZ2luIG9mIHRoaXMgc29mdHdhcmUgbXVzdCBub3QgYmUgbWlzcmVwcmVzZW50ZWQ7IHlvdSBtdXN0IG5vdAogIC8vICAgY2xhaW0gdGhhdCB5b3Ugd3JvdGUgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLiBJZiB5b3UgdXNlIHRoaXMgc29mdHdhcmUKICAvLyAgIGluIGEgcHJvZHVjdCwgYW4gYWNrbm93bGVkZ21lbnQgaW4gdGhlIHByb2R1Y3QgZG9jdW1lbnRhdGlvbiB3b3VsZCBiZQogIC8vICAgYXBwcmVjaWF0ZWQgYnV0IGlzIG5vdCByZXF1aXJlZC4KICAvLyAyLiBBbHRlcmVkIHNvdXJjZSB2ZXJzaW9ucyBtdXN0IGJlIHBsYWlubHkgbWFya2VkIGFzIHN1Y2gsIGFuZCBtdXN0IG5vdCBiZQogIC8vICAgbWlzcmVwcmVzZW50ZWQgYXMgYmVpbmcgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLgogIC8vIDMuIFRoaXMgbm90aWNlIG1heSBub3QgYmUgcmVtb3ZlZCBvciBhbHRlcmVkIGZyb20gYW55IHNvdXJjZSBkaXN0cmlidXRpb24uCgogIGNvbnN0IGFkbGVyMzIgPSAoYWRsZXIsIGJ1ZiwgbGVuLCBwb3MpID0+IHsKICAgIGxldCBzMSA9IChhZGxlciAmIDB4ZmZmZikgfDAsCiAgICAgICAgczIgPSAoKGFkbGVyID4+PiAxNikgJiAweGZmZmYpIHwwLAogICAgICAgIG4gPSAwOwoKICAgIHdoaWxlIChsZW4gIT09IDApIHsKICAgICAgLy8gU2V0IGxpbWl0IH4gdHdpY2UgbGVzcyB0aGFuIDU1NTIsIHRvIGtlZXAKICAgICAgLy8gczIgaW4gMzEtYml0cywgYmVjYXVzZSB3ZSBmb3JjZSBzaWduZWQgaW50cy4KICAgICAgLy8gaW4gb3RoZXIgY2FzZSAlPSB3aWxsIGZhaWwuCiAgICAgIG4gPSBsZW4gPiAyMDAwID8gMjAwMCA6IGxlbjsKICAgICAgbGVuIC09IG47CgogICAgICBkbyB7CiAgICAgICAgczEgPSAoczEgKyBidWZbcG9zKytdKSB8MDsKICAgICAgICBzMiA9IChzMiArIHMxKSB8MDsKICAgICAgfSB3aGlsZSAoLS1uKTsKCiAgICAgIHMxICU9IDY1NTIxOwogICAgICBzMiAlPSA2NTUyMTsKICAgIH0KCiAgICByZXR1cm4gKHMxIHwgKHMyIDw8IDE2KSkgfDA7CiAgfTsKCgogIHZhciBhZGxlcjMyXzEgPSBhZGxlcjMyOwoKICAvLyBOb3RlOiB3ZSBjYW4ndCBnZXQgc2lnbmlmaWNhbnQgc3BlZWQgYm9vc3QgaGVyZS4KICAvLyBTbyB3cml0ZSBjb2RlIHRvIG1pbmltaXplIHNpemUgLSBubyBwcmVnZW5lcmF0ZWQgdGFibGVzCiAgLy8gYW5kIGFycmF5IHRvb2xzIGRlcGVuZGVuY2llcy4KCiAgLy8gKEMpIDE5OTUtMjAxMyBKZWFuLWxvdXAgR2FpbGx5IGFuZCBNYXJrIEFkbGVyCiAgLy8gKEMpIDIwMTQtMjAxNyBWaXRhbHkgUHV6cmluIGFuZCBBbmRyZXkgVHVwaXRzaW4KICAvLwogIC8vIFRoaXMgc29mdHdhcmUgaXMgcHJvdmlkZWQgJ2FzLWlzJywgd2l0aG91dCBhbnkgZXhwcmVzcyBvciBpbXBsaWVkCiAgLy8gd2FycmFudHkuIEluIG5vIGV2ZW50IHdpbGwgdGhlIGF1dGhvcnMgYmUgaGVsZCBsaWFibGUgZm9yIGFueSBkYW1hZ2VzCiAgLy8gYXJpc2luZyBmcm9tIHRoZSB1c2Ugb2YgdGhpcyBzb2Z0d2FyZS4KICAvLwogIC8vIFBlcm1pc3Npb24gaXMgZ3JhbnRlZCB0byBhbnlvbmUgdG8gdXNlIHRoaXMgc29mdHdhcmUgZm9yIGFueSBwdXJwb3NlLAogIC8vIGluY2x1ZGluZyBjb21tZXJjaWFsIGFwcGxpY2F0aW9ucywgYW5kIHRvIGFsdGVyIGl0IGFuZCByZWRpc3RyaWJ1dGUgaXQKICAvLyBmcmVlbHksIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyByZXN0cmljdGlvbnM6CiAgLy8KICAvLyAxLiBUaGUgb3JpZ2luIG9mIHRoaXMgc29mdHdhcmUgbXVzdCBub3QgYmUgbWlzcmVwcmVzZW50ZWQ7IHlvdSBtdXN0IG5vdAogIC8vICAgY2xhaW0gdGhhdCB5b3Ugd3JvdGUgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLiBJZiB5b3UgdXNlIHRoaXMgc29mdHdhcmUKICAvLyAgIGluIGEgcHJvZHVjdCwgYW4gYWNrbm93bGVkZ21lbnQgaW4gdGhlIHByb2R1Y3QgZG9jdW1lbnRhdGlvbiB3b3VsZCBiZQogIC8vICAgYXBwcmVjaWF0ZWQgYnV0IGlzIG5vdCByZXF1aXJlZC4KICAvLyAyLiBBbHRlcmVkIHNvdXJjZSB2ZXJzaW9ucyBtdXN0IGJlIHBsYWlubHkgbWFya2VkIGFzIHN1Y2gsIGFuZCBtdXN0IG5vdCBiZQogIC8vICAgbWlzcmVwcmVzZW50ZWQgYXMgYmVpbmcgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLgogIC8vIDMuIFRoaXMgbm90aWNlIG1heSBub3QgYmUgcmVtb3ZlZCBvciBhbHRlcmVkIGZyb20gYW55IHNvdXJjZSBkaXN0cmlidXRpb24uCgogIC8vIFVzZSBvcmRpbmFyeSBhcnJheSwgc2luY2UgdW50eXBlZCBtYWtlcyBubyBib29zdCBoZXJlCiAgY29uc3QgbWFrZVRhYmxlID0gKCkgPT4gewogICAgbGV0IGMsIHRhYmxlID0gW107CgogICAgZm9yICh2YXIgbiA9IDA7IG4gPCAyNTY7IG4rKykgewogICAgICBjID0gbjsKICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCA4OyBrKyspIHsKICAgICAgICBjID0gKChjICYgMSkgPyAoMHhFREI4ODMyMCBeIChjID4+PiAxKSkgOiAoYyA+Pj4gMSkpOwogICAgICB9CiAgICAgIHRhYmxlW25dID0gYzsKICAgIH0KCiAgICByZXR1cm4gdGFibGU7CiAgfTsKCiAgLy8gQ3JlYXRlIHRhYmxlIG9uIGxvYWQuIEp1c3QgMjU1IHNpZ25lZCBsb25ncy4gTm90IGEgcHJvYmxlbS4KICBjb25zdCBjcmNUYWJsZSA9IG5ldyBVaW50MzJBcnJheShtYWtlVGFibGUoKSk7CgoKICBjb25zdCBjcmMzMiA9IChjcmMsIGJ1ZiwgbGVuLCBwb3MpID0+IHsKICAgIGNvbnN0IHQgPSBjcmNUYWJsZTsKICAgIGNvbnN0IGVuZCA9IHBvcyArIGxlbjsKCiAgICBjcmMgXj0gLTE7CgogICAgZm9yIChsZXQgaSA9IHBvczsgaSA8IGVuZDsgaSsrKSB7CiAgICAgIGNyYyA9IChjcmMgPj4+IDgpIF4gdFsoY3JjIF4gYnVmW2ldKSAmIDB4RkZdOwogICAgfQoKICAgIHJldHVybiAoY3JjIF4gKC0xKSk7IC8vID4+PiAwOwogIH07CgoKICB2YXIgY3JjMzJfMSA9IGNyYzMyOwoKICAvLyAoQykgMTk5NS0yMDEzIEplYW4tbG91cCBHYWlsbHkgYW5kIE1hcmsgQWRsZXIKICAvLyAoQykgMjAxNC0yMDE3IFZpdGFseSBQdXpyaW4gYW5kIEFuZHJleSBUdXBpdHNpbgogIC8vCiAgLy8gVGhpcyBzb2Z0d2FyZSBpcyBwcm92aWRlZCAnYXMtaXMnLCB3aXRob3V0IGFueSBleHByZXNzIG9yIGltcGxpZWQKICAvLyB3YXJyYW50eS4gSW4gbm8gZXZlbnQgd2lsbCB0aGUgYXV0aG9ycyBiZSBoZWxkIGxpYWJsZSBmb3IgYW55IGRhbWFnZXMKICAvLyBhcmlzaW5nIGZyb20gdGhlIHVzZSBvZiB0aGlzIHNvZnR3YXJlLgogIC8vCiAgLy8gUGVybWlzc2lvbiBpcyBncmFudGVkIHRvIGFueW9uZSB0byB1c2UgdGhpcyBzb2Z0d2FyZSBmb3IgYW55IHB1cnBvc2UsCiAgLy8gaW5jbHVkaW5nIGNvbW1lcmNpYWwgYXBwbGljYXRpb25zLCBhbmQgdG8gYWx0ZXIgaXQgYW5kIHJlZGlzdHJpYnV0ZSBpdAogIC8vIGZyZWVseSwgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIHJlc3RyaWN0aW9uczoKICAvLwogIC8vIDEuIFRoZSBvcmlnaW4gb2YgdGhpcyBzb2Z0d2FyZSBtdXN0IG5vdCBiZSBtaXNyZXByZXNlbnRlZDsgeW91IG11c3Qgbm90CiAgLy8gICBjbGFpbSB0aGF0IHlvdSB3cm90ZSB0aGUgb3JpZ2luYWwgc29mdHdhcmUuIElmIHlvdSB1c2UgdGhpcyBzb2Z0d2FyZQogIC8vICAgaW4gYSBwcm9kdWN0LCBhbiBhY2tub3dsZWRnbWVudCBpbiB0aGUgcHJvZHVjdCBkb2N1bWVudGF0aW9uIHdvdWxkIGJlCiAgLy8gICBhcHByZWNpYXRlZCBidXQgaXMgbm90IHJlcXVpcmVkLgogIC8vIDIuIEFsdGVyZWQgc291cmNlIHZlcnNpb25zIG11c3QgYmUgcGxhaW5seSBtYXJrZWQgYXMgc3VjaCwgYW5kIG11c3Qgbm90IGJlCiAgLy8gICBtaXNyZXByZXNlbnRlZCBhcyBiZWluZyB0aGUgb3JpZ2luYWwgc29mdHdhcmUuCiAgLy8gMy4gVGhpcyBub3RpY2UgbWF5IG5vdCBiZSByZW1vdmVkIG9yIGFsdGVyZWQgZnJvbSBhbnkgc291cmNlIGRpc3RyaWJ1dGlvbi4KCiAgdmFyIG1lc3NhZ2VzID0gewogICAgMjogICAgICAnbmVlZCBkaWN0aW9uYXJ5JywgICAgIC8qIFpfTkVFRF9ESUNUICAgICAgIDIgICovCiAgICAxOiAgICAgICdzdHJlYW0gZW5kJywgICAgICAgICAgLyogWl9TVFJFQU1fRU5EICAgICAgMSAgKi8KICAgIDA6ICAgICAgJycsICAgICAgICAgICAgICAgICAgICAvKiBaX09LICAgICAgICAgICAgICAwICAqLwogICAgJy0xJzogICAnZmlsZSBlcnJvcicsICAgICAgICAgIC8qIFpfRVJSTk8gICAgICAgICAoLTEpICovCiAgICAnLTInOiAgICdzdHJlYW0gZXJyb3InLCAgICAgICAgLyogWl9TVFJFQU1fRVJST1IgICgtMikgKi8KICAgICctMyc6ICAgJ2RhdGEgZXJyb3InLCAgICAgICAgICAvKiBaX0RBVEFfRVJST1IgICAgKC0zKSAqLwogICAgJy00JzogICAnaW5zdWZmaWNpZW50IG1lbW9yeScsIC8qIFpfTUVNX0VSUk9SICAgICAoLTQpICovCiAgICAnLTUnOiAgICdidWZmZXIgZXJyb3InLCAgICAgICAgLyogWl9CVUZfRVJST1IgICAgICgtNSkgKi8KICAgICctNic6ICAgJ2luY29tcGF0aWJsZSB2ZXJzaW9uJyAvKiBaX1ZFUlNJT05fRVJST1IgKC02KSAqLwogIH07CgogIC8vIChDKSAxOTk1LTIwMTMgSmVhbi1sb3VwIEdhaWxseSBhbmQgTWFyayBBZGxlcgogIC8vIChDKSAyMDE0LTIwMTcgVml0YWx5IFB1enJpbiBhbmQgQW5kcmV5IFR1cGl0c2luCiAgLy8KICAvLyBUaGlzIHNvZnR3YXJlIGlzIHByb3ZpZGVkICdhcy1pcycsIHdpdGhvdXQgYW55IGV4cHJlc3Mgb3IgaW1wbGllZAogIC8vIHdhcnJhbnR5LiBJbiBubyBldmVudCB3aWxsIHRoZSBhdXRob3JzIGJlIGhlbGQgbGlhYmxlIGZvciBhbnkgZGFtYWdlcwogIC8vIGFyaXNpbmcgZnJvbSB0aGUgdXNlIG9mIHRoaXMgc29mdHdhcmUuCiAgLy8KICAvLyBQZXJtaXNzaW9uIGlzIGdyYW50ZWQgdG8gYW55b25lIHRvIHVzZSB0aGlzIHNvZnR3YXJlIGZvciBhbnkgcHVycG9zZSwKICAvLyBpbmNsdWRpbmcgY29tbWVyY2lhbCBhcHBsaWNhdGlvbnMsIGFuZCB0byBhbHRlciBpdCBhbmQgcmVkaXN0cmlidXRlIGl0CiAgLy8gZnJlZWx5LCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgcmVzdHJpY3Rpb25zOgogIC8vCiAgLy8gMS4gVGhlIG9yaWdpbiBvZiB0aGlzIHNvZnR3YXJlIG11c3Qgbm90IGJlIG1pc3JlcHJlc2VudGVkOyB5b3UgbXVzdCBub3QKICAvLyAgIGNsYWltIHRoYXQgeW91IHdyb3RlIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS4gSWYgeW91IHVzZSB0aGlzIHNvZnR3YXJlCiAgLy8gICBpbiBhIHByb2R1Y3QsIGFuIGFja25vd2xlZGdtZW50IGluIHRoZSBwcm9kdWN0IGRvY3VtZW50YXRpb24gd291bGQgYmUKICAvLyAgIGFwcHJlY2lhdGVkIGJ1dCBpcyBub3QgcmVxdWlyZWQuCiAgLy8gMi4gQWx0ZXJlZCBzb3VyY2UgdmVyc2lvbnMgbXVzdCBiZSBwbGFpbmx5IG1hcmtlZCBhcyBzdWNoLCBhbmQgbXVzdCBub3QgYmUKICAvLyAgIG1pc3JlcHJlc2VudGVkIGFzIGJlaW5nIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS4KICAvLyAzLiBUaGlzIG5vdGljZSBtYXkgbm90IGJlIHJlbW92ZWQgb3IgYWx0ZXJlZCBmcm9tIGFueSBzb3VyY2UgZGlzdHJpYnV0aW9uLgoKICB2YXIgY29uc3RhbnRzJDIgPSB7CgogICAgLyogQWxsb3dlZCBmbHVzaCB2YWx1ZXM7IHNlZSBkZWZsYXRlKCkgYW5kIGluZmxhdGUoKSBiZWxvdyBmb3IgZGV0YWlscyAqLwogICAgWl9OT19GTFVTSDogICAgICAgICAwLAogICAgWl9QQVJUSUFMX0ZMVVNIOiAgICAxLAogICAgWl9TWU5DX0ZMVVNIOiAgICAgICAyLAogICAgWl9GVUxMX0ZMVVNIOiAgICAgICAzLAogICAgWl9GSU5JU0g6ICAgICAgICAgICA0LAogICAgWl9CTE9DSzogICAgICAgICAgICA1LAogICAgWl9UUkVFUzogICAgICAgICAgICA2LAoKICAgIC8qIFJldHVybiBjb2RlcyBmb3IgdGhlIGNvbXByZXNzaW9uL2RlY29tcHJlc3Npb24gZnVuY3Rpb25zLiBOZWdhdGl2ZSB2YWx1ZXMKICAgICogYXJlIGVycm9ycywgcG9zaXRpdmUgdmFsdWVzIGFyZSB1c2VkIGZvciBzcGVjaWFsIGJ1dCBub3JtYWwgZXZlbnRzLgogICAgKi8KICAgIFpfT0s6ICAgICAgICAgICAgICAgMCwKICAgIFpfU1RSRUFNX0VORDogICAgICAgMSwKICAgIFpfTkVFRF9ESUNUOiAgICAgICAgMiwKICAgIFpfRVJSTk86ICAgICAgICAgICAtMSwKICAgIFpfU1RSRUFNX0VSUk9SOiAgICAtMiwKICAgIFpfREFUQV9FUlJPUjogICAgICAtMywKICAgIFpfTUVNX0VSUk9SOiAgICAgICAtNCwKICAgIFpfQlVGX0VSUk9SOiAgICAgICAtNSwKICAgIC8vWl9WRVJTSU9OX0VSUk9SOiAtNiwKCiAgICAvKiBjb21wcmVzc2lvbiBsZXZlbHMgKi8KICAgIFpfTk9fQ09NUFJFU1NJT046ICAgICAgICAgMCwKICAgIFpfQkVTVF9TUEVFRDogICAgICAgICAgICAgMSwKICAgIFpfQkVTVF9DT01QUkVTU0lPTjogICAgICAgOSwKICAgIFpfREVGQVVMVF9DT01QUkVTU0lPTjogICAtMSwKCgogICAgWl9GSUxURVJFRDogICAgICAgICAgICAgICAxLAogICAgWl9IVUZGTUFOX09OTFk6ICAgICAgICAgICAyLAogICAgWl9STEU6ICAgICAgICAgICAgICAgICAgICAzLAogICAgWl9GSVhFRDogICAgICAgICAgICAgICAgICA0LAogICAgWl9ERUZBVUxUX1NUUkFURUdZOiAgICAgICAwLAoKICAgIC8qIFBvc3NpYmxlIHZhbHVlcyBvZiB0aGUgZGF0YV90eXBlIGZpZWxkICh0aG91Z2ggc2VlIGluZmxhdGUoKSkgKi8KICAgIFpfQklOQVJZOiAgICAgICAgICAgICAgICAgMCwKICAgIFpfVEVYVDogICAgICAgICAgICAgICAgICAgMSwKICAgIC8vWl9BU0NJSTogICAgICAgICAgICAgICAgMSwgLy8gPSBaX1RFWFQgKGRlcHJlY2F0ZWQpCiAgICBaX1VOS05PV046ICAgICAgICAgICAgICAgIDIsCgogICAgLyogVGhlIGRlZmxhdGUgY29tcHJlc3Npb24gbWV0aG9kICovCiAgICBaX0RFRkxBVEVEOiAgICAgICAgICAgICAgIDgKICAgIC8vWl9OVUxMOiAgICAgICAgICAgICAgICAgbnVsbCAvLyBVc2UgLTEgb3IgbnVsbCBpbmxpbmUsIGRlcGVuZGluZyBvbiB2YXIgdHlwZQogIH07CgogIC8vIChDKSAxOTk1LTIwMTMgSmVhbi1sb3VwIEdhaWxseSBhbmQgTWFyayBBZGxlcgogIC8vIChDKSAyMDE0LTIwMTcgVml0YWx5IFB1enJpbiBhbmQgQW5kcmV5IFR1cGl0c2luCiAgLy8KICAvLyBUaGlzIHNvZnR3YXJlIGlzIHByb3ZpZGVkICdhcy1pcycsIHdpdGhvdXQgYW55IGV4cHJlc3Mgb3IgaW1wbGllZAogIC8vIHdhcnJhbnR5LiBJbiBubyBldmVudCB3aWxsIHRoZSBhdXRob3JzIGJlIGhlbGQgbGlhYmxlIGZvciBhbnkgZGFtYWdlcwogIC8vIGFyaXNpbmcgZnJvbSB0aGUgdXNlIG9mIHRoaXMgc29mdHdhcmUuCiAgLy8KICAvLyBQZXJtaXNzaW9uIGlzIGdyYW50ZWQgdG8gYW55b25lIHRvIHVzZSB0aGlzIHNvZnR3YXJlIGZvciBhbnkgcHVycG9zZSwKICAvLyBpbmNsdWRpbmcgY29tbWVyY2lhbCBhcHBsaWNhdGlvbnMsIGFuZCB0byBhbHRlciBpdCBhbmQgcmVkaXN0cmlidXRlIGl0CiAgLy8gZnJlZWx5LCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgcmVzdHJpY3Rpb25zOgogIC8vCiAgLy8gMS4gVGhlIG9yaWdpbiBvZiB0aGlzIHNvZnR3YXJlIG11c3Qgbm90IGJlIG1pc3JlcHJlc2VudGVkOyB5b3UgbXVzdCBub3QKICAvLyAgIGNsYWltIHRoYXQgeW91IHdyb3RlIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS4gSWYgeW91IHVzZSB0aGlzIHNvZnR3YXJlCiAgLy8gICBpbiBhIHByb2R1Y3QsIGFuIGFja25vd2xlZGdtZW50IGluIHRoZSBwcm9kdWN0IGRvY3VtZW50YXRpb24gd291bGQgYmUKICAvLyAgIGFwcHJlY2lhdGVkIGJ1dCBpcyBub3QgcmVxdWlyZWQuCiAgLy8gMi4gQWx0ZXJlZCBzb3VyY2UgdmVyc2lvbnMgbXVzdCBiZSBwbGFpbmx5IG1hcmtlZCBhcyBzdWNoLCBhbmQgbXVzdCBub3QgYmUKICAvLyAgIG1pc3JlcHJlc2VudGVkIGFzIGJlaW5nIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS4KICAvLyAzLiBUaGlzIG5vdGljZSBtYXkgbm90IGJlIHJlbW92ZWQgb3IgYWx0ZXJlZCBmcm9tIGFueSBzb3VyY2UgZGlzdHJpYnV0aW9uLgoKICBjb25zdCB7IF90cl9pbml0LCBfdHJfc3RvcmVkX2Jsb2NrLCBfdHJfZmx1c2hfYmxvY2ssIF90cl90YWxseSwgX3RyX2FsaWduIH0gPSB0cmVlczsKCgoKCiAgLyogUHVibGljIGNvbnN0YW50cyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki8KICAvKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qLwoKICBjb25zdCB7CiAgICBaX05PX0ZMVVNIOiBaX05PX0ZMVVNIJDIsIFpfUEFSVElBTF9GTFVTSCwgWl9GVUxMX0ZMVVNIOiBaX0ZVTExfRkxVU0gkMSwgWl9GSU5JU0g6IFpfRklOSVNIJDMsIFpfQkxPQ0s6IFpfQkxPQ0skMSwKICAgIFpfT0s6IFpfT0skMywgWl9TVFJFQU1fRU5EOiBaX1NUUkVBTV9FTkQkMywgWl9TVFJFQU1fRVJST1I6IFpfU1RSRUFNX0VSUk9SJDIsIFpfREFUQV9FUlJPUjogWl9EQVRBX0VSUk9SJDIsIFpfQlVGX0VSUk9SOiBaX0JVRl9FUlJPUiQxLAogICAgWl9ERUZBVUxUX0NPTVBSRVNTSU9OOiBaX0RFRkFVTFRfQ09NUFJFU1NJT04kMSwKICAgIFpfRklMVEVSRUQsIFpfSFVGRk1BTl9PTkxZLCBaX1JMRSwgWl9GSVhFRCwgWl9ERUZBVUxUX1NUUkFURUdZOiBaX0RFRkFVTFRfU1RSQVRFR1kkMSwKICAgIFpfVU5LTk9XTiwKICAgIFpfREVGTEFURUQ6IFpfREVGTEFURUQkMgogIH0gPSBjb25zdGFudHMkMjsKCiAgLyo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki8KCgogIGNvbnN0IE1BWF9NRU1fTEVWRUwgPSA5OwogIC8qIE1heGltdW0gdmFsdWUgZm9yIG1lbUxldmVsIGluIGRlZmxhdGVJbml0MiAqLwogIGNvbnN0IE1BWF9XQklUUyQxID0gMTU7CiAgLyogMzJLIExaNzcgd2luZG93ICovCiAgY29uc3QgREVGX01FTV9MRVZFTCA9IDg7CgoKICBjb25zdCBMRU5HVEhfQ09ERVMgID0gMjk7CiAgLyogbnVtYmVyIG9mIGxlbmd0aCBjb2Rlcywgbm90IGNvdW50aW5nIHRoZSBzcGVjaWFsIEVORF9CTE9DSyBjb2RlICovCiAgY29uc3QgTElURVJBTFMgICAgICA9IDI1NjsKICAvKiBudW1iZXIgb2YgbGl0ZXJhbCBieXRlcyAwLi4yNTUgKi8KICBjb25zdCBMX0NPREVTICAgICAgID0gTElURVJBTFMgKyAxICsgTEVOR1RIX0NPREVTOwogIC8qIG51bWJlciBvZiBMaXRlcmFsIG9yIExlbmd0aCBjb2RlcywgaW5jbHVkaW5nIHRoZSBFTkRfQkxPQ0sgY29kZSAqLwogIGNvbnN0IERfQ09ERVMgICAgICAgPSAzMDsKICAvKiBudW1iZXIgb2YgZGlzdGFuY2UgY29kZXMgKi8KICBjb25zdCBCTF9DT0RFUyAgICAgID0gMTk7CiAgLyogbnVtYmVyIG9mIGNvZGVzIHVzZWQgdG8gdHJhbnNmZXIgdGhlIGJpdCBsZW5ndGhzICovCiAgY29uc3QgSEVBUF9TSVpFICAgICA9IDIgKiBMX0NPREVTICsgMTsKICAvKiBtYXhpbXVtIGhlYXAgc2l6ZSAqLwogIGNvbnN0IE1BWF9CSVRTICA9IDE1OwogIC8qIEFsbCBjb2RlcyBtdXN0IG5vdCBleGNlZWQgTUFYX0JJVFMgYml0cyAqLwoKICBjb25zdCBNSU5fTUFUQ0ggPSAzOwogIGNvbnN0IE1BWF9NQVRDSCA9IDI1ODsKICBjb25zdCBNSU5fTE9PS0FIRUFEID0gKE1BWF9NQVRDSCArIE1JTl9NQVRDSCArIDEpOwoKICBjb25zdCBQUkVTRVRfRElDVCA9IDB4MjA7CgogIGNvbnN0IElOSVRfU1RBVEUgPSA0MjsKICBjb25zdCBFWFRSQV9TVEFURSA9IDY5OwogIGNvbnN0IE5BTUVfU1RBVEUgPSA3MzsKICBjb25zdCBDT01NRU5UX1NUQVRFID0gOTE7CiAgY29uc3QgSENSQ19TVEFURSA9IDEwMzsKICBjb25zdCBCVVNZX1NUQVRFID0gMTEzOwogIGNvbnN0IEZJTklTSF9TVEFURSA9IDY2NjsKCiAgY29uc3QgQlNfTkVFRF9NT1JFICAgICAgPSAxOyAvKiBibG9jayBub3QgY29tcGxldGVkLCBuZWVkIG1vcmUgaW5wdXQgb3IgbW9yZSBvdXRwdXQgKi8KICBjb25zdCBCU19CTE9DS19ET05FICAgICA9IDI7IC8qIGJsb2NrIGZsdXNoIHBlcmZvcm1lZCAqLwogIGNvbnN0IEJTX0ZJTklTSF9TVEFSVEVEID0gMzsgLyogZmluaXNoIHN0YXJ0ZWQsIG5lZWQgb25seSBtb3JlIG91dHB1dCBhdCBuZXh0IGRlZmxhdGUgKi8KICBjb25zdCBCU19GSU5JU0hfRE9ORSAgICA9IDQ7IC8qIGZpbmlzaCBkb25lLCBhY2NlcHQgbm8gbW9yZSBpbnB1dCBvciBvdXRwdXQgKi8KCiAgY29uc3QgT1NfQ09ERSA9IDB4MDM7IC8vIFVuaXggOikgLiBEb24ndCBkZXRlY3QsIHVzZSB0aGlzIGRlZmF1bHQuCgogIGNvbnN0IGVyciA9IChzdHJtLCBlcnJvckNvZGUpID0+IHsKICAgIHN0cm0ubXNnID0gbWVzc2FnZXNbZXJyb3JDb2RlXTsKICAgIHJldHVybiBlcnJvckNvZGU7CiAgfTsKCiAgY29uc3QgcmFuayA9IChmKSA9PiB7CiAgICByZXR1cm4gKChmKSA8PCAxKSAtICgoZikgPiA0ID8gOSA6IDApOwogIH07CgogIGNvbnN0IHplcm8gPSAoYnVmKSA9PiB7CiAgICBsZXQgbGVuID0gYnVmLmxlbmd0aDsgd2hpbGUgKC0tbGVuID49IDApIHsgYnVmW2xlbl0gPSAwOyB9CiAgfTsKCgogIC8qIGVzbGludC1kaXNhYmxlIG5ldy1jYXAgKi8KICBsZXQgSEFTSF9aTElCID0gKHMsIHByZXYsIGRhdGEpID0+ICgocHJldiA8PCBzLmhhc2hfc2hpZnQpIF4gZGF0YSkgJiBzLmhhc2hfbWFzazsKICAvLyBUaGlzIGhhc2ggY2F1c2VzIGxlc3MgY29sbGlzaW9ucywgaHR0cHM6Ly9naXRodWIuY29tL25vZGVjYS9wYWtvL2lzc3Vlcy8xMzUKICAvLyBCdXQgYnJlYWtzIGJpbmFyeSBjb21wYXRpYmlsaXR5CiAgLy9sZXQgSEFTSF9GQVNUID0gKHMsIHByZXYsIGRhdGEpID0+ICgocHJldiA8PCA4KSArIChwcmV2ID4+IDgpICsgKGRhdGEgPDwgNCkpICYgcy5oYXNoX21hc2s7CiAgbGV0IEhBU0ggPSBIQVNIX1pMSUI7CgogIC8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgKiBGbHVzaCBhcyBtdWNoIHBlbmRpbmcgb3V0cHV0IGFzIHBvc3NpYmxlLiBBbGwgZGVmbGF0ZSgpIG91dHB1dCBnb2VzCiAgICogdGhyb3VnaCB0aGlzIGZ1bmN0aW9uIHNvIHNvbWUgYXBwbGljYXRpb25zIG1heSB3aXNoIHRvIG1vZGlmeSBpdAogICAqIHRvIGF2b2lkIGFsbG9jYXRpbmcgYSBsYXJnZSBzdHJtLT5vdXRwdXQgYnVmZmVyIGFuZCBjb3B5aW5nIGludG8gaXQuCiAgICogKFNlZSBhbHNvIHJlYWRfYnVmKCkpLgogICAqLwogIGNvbnN0IGZsdXNoX3BlbmRpbmcgPSAoc3RybSkgPT4gewogICAgY29uc3QgcyA9IHN0cm0uc3RhdGU7CgogICAgLy9fdHJfZmx1c2hfYml0cyhzKTsKICAgIGxldCBsZW4gPSBzLnBlbmRpbmc7CiAgICBpZiAobGVuID4gc3RybS5hdmFpbF9vdXQpIHsKICAgICAgbGVuID0gc3RybS5hdmFpbF9vdXQ7CiAgICB9CiAgICBpZiAobGVuID09PSAwKSB7IHJldHVybjsgfQoKICAgIHN0cm0ub3V0cHV0LnNldChzLnBlbmRpbmdfYnVmLnN1YmFycmF5KHMucGVuZGluZ19vdXQsIHMucGVuZGluZ19vdXQgKyBsZW4pLCBzdHJtLm5leHRfb3V0KTsKICAgIHN0cm0ubmV4dF9vdXQgKz0gbGVuOwogICAgcy5wZW5kaW5nX291dCArPSBsZW47CiAgICBzdHJtLnRvdGFsX291dCArPSBsZW47CiAgICBzdHJtLmF2YWlsX291dCAtPSBsZW47CiAgICBzLnBlbmRpbmcgLT0gbGVuOwogICAgaWYgKHMucGVuZGluZyA9PT0gMCkgewogICAgICBzLnBlbmRpbmdfb3V0ID0gMDsKICAgIH0KICB9OwoKCiAgY29uc3QgZmx1c2hfYmxvY2tfb25seSA9IChzLCBsYXN0KSA9PiB7CiAgICBfdHJfZmx1c2hfYmxvY2socywgKHMuYmxvY2tfc3RhcnQgPj0gMCA/IHMuYmxvY2tfc3RhcnQgOiAtMSksIHMuc3Ryc3RhcnQgLSBzLmJsb2NrX3N0YXJ0LCBsYXN0KTsKICAgIHMuYmxvY2tfc3RhcnQgPSBzLnN0cnN0YXJ0OwogICAgZmx1c2hfcGVuZGluZyhzLnN0cm0pOwogIH07CgoKICBjb25zdCBwdXRfYnl0ZSA9IChzLCBiKSA9PiB7CiAgICBzLnBlbmRpbmdfYnVmW3MucGVuZGluZysrXSA9IGI7CiAgfTsKCgogIC8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgKiBQdXQgYSBzaG9ydCBpbiB0aGUgcGVuZGluZyBidWZmZXIuIFRoZSAxNi1iaXQgdmFsdWUgaXMgcHV0IGluIE1TQiBvcmRlci4KICAgKiBJTiBhc3NlcnRpb246IHRoZSBzdHJlYW0gc3RhdGUgaXMgY29ycmVjdCBhbmQgdGhlcmUgaXMgZW5vdWdoIHJvb20gaW4KICAgKiBwZW5kaW5nX2J1Zi4KICAgKi8KICBjb25zdCBwdXRTaG9ydE1TQiA9IChzLCBiKSA9PiB7CgogICAgLy8gIHB1dF9ieXRlKHMsIChCeXRlKShiID4+IDgpKTsKICAvLyAgcHV0X2J5dGUocywgKEJ5dGUpKGIgJiAweGZmKSk7CiAgICBzLnBlbmRpbmdfYnVmW3MucGVuZGluZysrXSA9IChiID4+PiA4KSAmIDB4ZmY7CiAgICBzLnBlbmRpbmdfYnVmW3MucGVuZGluZysrXSA9IGIgJiAweGZmOwogIH07CgoKICAvKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgKiBSZWFkIGEgbmV3IGJ1ZmZlciBmcm9tIHRoZSBjdXJyZW50IGlucHV0IHN0cmVhbSwgdXBkYXRlIHRoZSBhZGxlcjMyCiAgICogYW5kIHRvdGFsIG51bWJlciBvZiBieXRlcyByZWFkLiAgQWxsIGRlZmxhdGUoKSBpbnB1dCBnb2VzIHRocm91Z2gKICAgKiB0aGlzIGZ1bmN0aW9uIHNvIHNvbWUgYXBwbGljYXRpb25zIG1heSB3aXNoIHRvIG1vZGlmeSBpdCB0byBhdm9pZAogICAqIGFsbG9jYXRpbmcgYSBsYXJnZSBzdHJtLT5pbnB1dCBidWZmZXIgYW5kIGNvcHlpbmcgZnJvbSBpdC4KICAgKiAoU2VlIGFsc28gZmx1c2hfcGVuZGluZygpKS4KICAgKi8KICBjb25zdCByZWFkX2J1ZiA9IChzdHJtLCBidWYsIHN0YXJ0LCBzaXplKSA9PiB7CgogICAgbGV0IGxlbiA9IHN0cm0uYXZhaWxfaW47CgogICAgaWYgKGxlbiA+IHNpemUpIHsgbGVuID0gc2l6ZTsgfQogICAgaWYgKGxlbiA9PT0gMCkgeyByZXR1cm4gMDsgfQoKICAgIHN0cm0uYXZhaWxfaW4gLT0gbGVuOwoKICAgIC8vIHptZW1jcHkoYnVmLCBzdHJtLT5uZXh0X2luLCBsZW4pOwogICAgYnVmLnNldChzdHJtLmlucHV0LnN1YmFycmF5KHN0cm0ubmV4dF9pbiwgc3RybS5uZXh0X2luICsgbGVuKSwgc3RhcnQpOwogICAgaWYgKHN0cm0uc3RhdGUud3JhcCA9PT0gMSkgewogICAgICBzdHJtLmFkbGVyID0gYWRsZXIzMl8xKHN0cm0uYWRsZXIsIGJ1ZiwgbGVuLCBzdGFydCk7CiAgICB9CgogICAgZWxzZSBpZiAoc3RybS5zdGF0ZS53cmFwID09PSAyKSB7CiAgICAgIHN0cm0uYWRsZXIgPSBjcmMzMl8xKHN0cm0uYWRsZXIsIGJ1ZiwgbGVuLCBzdGFydCk7CiAgICB9CgogICAgc3RybS5uZXh0X2luICs9IGxlbjsKICAgIHN0cm0udG90YWxfaW4gKz0gbGVuOwoKICAgIHJldHVybiBsZW47CiAgfTsKCgogIC8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAqIFNldCBtYXRjaF9zdGFydCB0byB0aGUgbG9uZ2VzdCBtYXRjaCBzdGFydGluZyBhdCB0aGUgZ2l2ZW4gc3RyaW5nIGFuZAogICAqIHJldHVybiBpdHMgbGVuZ3RoLiBNYXRjaGVzIHNob3J0ZXIgb3IgZXF1YWwgdG8gcHJldl9sZW5ndGggYXJlIGRpc2NhcmRlZCwKICAgKiBpbiB3aGljaCBjYXNlIHRoZSByZXN1bHQgaXMgZXF1YWwgdG8gcHJldl9sZW5ndGggYW5kIG1hdGNoX3N0YXJ0IGlzCiAgICogZ2FyYmFnZS4KICAgKiBJTiBhc3NlcnRpb25zOiBjdXJfbWF0Y2ggaXMgdGhlIGhlYWQgb2YgdGhlIGhhc2ggY2hhaW4gZm9yIHRoZSBjdXJyZW50CiAgICogICBzdHJpbmcgKHN0cnN0YXJ0KSBhbmQgaXRzIGRpc3RhbmNlIGlzIDw9IE1BWF9ESVNULCBhbmQgcHJldl9sZW5ndGggPj0gMQogICAqIE9VVCBhc3NlcnRpb246IHRoZSBtYXRjaCBsZW5ndGggaXMgbm90IGdyZWF0ZXIgdGhhbiBzLT5sb29rYWhlYWQuCiAgICovCiAgY29uc3QgbG9uZ2VzdF9tYXRjaCA9IChzLCBjdXJfbWF0Y2gpID0+IHsKCiAgICBsZXQgY2hhaW5fbGVuZ3RoID0gcy5tYXhfY2hhaW5fbGVuZ3RoOyAgICAgIC8qIG1heCBoYXNoIGNoYWluIGxlbmd0aCAqLwogICAgbGV0IHNjYW4gPSBzLnN0cnN0YXJ0OyAvKiBjdXJyZW50IHN0cmluZyAqLwogICAgbGV0IG1hdGNoOyAgICAgICAgICAgICAgICAgICAgICAgLyogbWF0Y2hlZCBzdHJpbmcgKi8KICAgIGxldCBsZW47ICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogbGVuZ3RoIG9mIGN1cnJlbnQgbWF0Y2ggKi8KICAgIGxldCBiZXN0X2xlbiA9IHMucHJldl9sZW5ndGg7ICAgICAgICAgICAgICAvKiBiZXN0IG1hdGNoIGxlbmd0aCBzbyBmYXIgKi8KICAgIGxldCBuaWNlX21hdGNoID0gcy5uaWNlX21hdGNoOyAgICAgICAgICAgICAvKiBzdG9wIGlmIG1hdGNoIGxvbmcgZW5vdWdoICovCiAgICBjb25zdCBsaW1pdCA9IChzLnN0cnN0YXJ0ID4gKHMud19zaXplIC0gTUlOX0xPT0tBSEVBRCkpID8KICAgICAgICBzLnN0cnN0YXJ0IC0gKHMud19zaXplIC0gTUlOX0xPT0tBSEVBRCkgOiAwLypOSUwqLzsKCiAgICBjb25zdCBfd2luID0gcy53aW5kb3c7IC8vIHNob3J0Y3V0CgogICAgY29uc3Qgd21hc2sgPSBzLndfbWFzazsKICAgIGNvbnN0IHByZXYgID0gcy5wcmV2OwoKICAgIC8qIFN0b3Agd2hlbiBjdXJfbWF0Y2ggYmVjb21lcyA8PSBsaW1pdC4gVG8gc2ltcGxpZnkgdGhlIGNvZGUsCiAgICAgKiB3ZSBwcmV2ZW50IG1hdGNoZXMgd2l0aCB0aGUgc3RyaW5nIG9mIHdpbmRvdyBpbmRleCAwLgogICAgICovCgogICAgY29uc3Qgc3RyZW5kID0gcy5zdHJzdGFydCArIE1BWF9NQVRDSDsKICAgIGxldCBzY2FuX2VuZDEgID0gX3dpbltzY2FuICsgYmVzdF9sZW4gLSAxXTsKICAgIGxldCBzY2FuX2VuZCAgID0gX3dpbltzY2FuICsgYmVzdF9sZW5dOwoKICAgIC8qIFRoZSBjb2RlIGlzIG9wdGltaXplZCBmb3IgSEFTSF9CSVRTID49IDggYW5kIE1BWF9NQVRDSC0yIG11bHRpcGxlIG9mIDE2LgogICAgICogSXQgaXMgZWFzeSB0byBnZXQgcmlkIG9mIHRoaXMgb3B0aW1pemF0aW9uIGlmIG5lY2Vzc2FyeS4KICAgICAqLwogICAgLy8gQXNzZXJ0KHMtPmhhc2hfYml0cyA+PSA4ICYmIE1BWF9NQVRDSCA9PSAyNTgsICJDb2RlIHRvbyBjbGV2ZXIiKTsKCiAgICAvKiBEbyBub3Qgd2FzdGUgdG9vIG11Y2ggdGltZSBpZiB3ZSBhbHJlYWR5IGhhdmUgYSBnb29kIG1hdGNoOiAqLwogICAgaWYgKHMucHJldl9sZW5ndGggPj0gcy5nb29kX21hdGNoKSB7CiAgICAgIGNoYWluX2xlbmd0aCA+Pj0gMjsKICAgIH0KICAgIC8qIERvIG5vdCBsb29rIGZvciBtYXRjaGVzIGJleW9uZCB0aGUgZW5kIG9mIHRoZSBpbnB1dC4gVGhpcyBpcyBuZWNlc3NhcnkKICAgICAqIHRvIG1ha2UgZGVmbGF0ZSBkZXRlcm1pbmlzdGljLgogICAgICovCiAgICBpZiAobmljZV9tYXRjaCA+IHMubG9va2FoZWFkKSB7IG5pY2VfbWF0Y2ggPSBzLmxvb2thaGVhZDsgfQoKICAgIC8vIEFzc2VydCgodWxnKXMtPnN0cnN0YXJ0IDw9IHMtPndpbmRvd19zaXplLU1JTl9MT09LQUhFQUQsICJuZWVkIGxvb2thaGVhZCIpOwoKICAgIGRvIHsKICAgICAgLy8gQXNzZXJ0KGN1cl9tYXRjaCA8IHMtPnN0cnN0YXJ0LCAibm8gZnV0dXJlIik7CiAgICAgIG1hdGNoID0gY3VyX21hdGNoOwoKICAgICAgLyogU2tpcCB0byBuZXh0IG1hdGNoIGlmIHRoZSBtYXRjaCBsZW5ndGggY2Fubm90IGluY3JlYXNlCiAgICAgICAqIG9yIGlmIHRoZSBtYXRjaCBsZW5ndGggaXMgbGVzcyB0aGFuIDIuICBOb3RlIHRoYXQgdGhlIGNoZWNrcyBiZWxvdwogICAgICAgKiBmb3IgaW5zdWZmaWNpZW50IGxvb2thaGVhZCBvbmx5IG9jY3VyIG9jY2FzaW9uYWxseSBmb3IgcGVyZm9ybWFuY2UKICAgICAgICogcmVhc29ucy4gIFRoZXJlZm9yZSB1bmluaXRpYWxpemVkIG1lbW9yeSB3aWxsIGJlIGFjY2Vzc2VkLCBhbmQKICAgICAgICogY29uZGl0aW9uYWwganVtcHMgd2lsbCBiZSBtYWRlIHRoYXQgZGVwZW5kIG9uIHRob3NlIHZhbHVlcy4KICAgICAgICogSG93ZXZlciB0aGUgbGVuZ3RoIG9mIHRoZSBtYXRjaCBpcyBsaW1pdGVkIHRvIHRoZSBsb29rYWhlYWQsIHNvCiAgICAgICAqIHRoZSBvdXRwdXQgb2YgZGVmbGF0ZSBpcyBub3QgYWZmZWN0ZWQgYnkgdGhlIHVuaW5pdGlhbGl6ZWQgdmFsdWVzLgogICAgICAgKi8KCiAgICAgIGlmIChfd2luW21hdGNoICsgYmVzdF9sZW5dICAgICAhPT0gc2Nhbl9lbmQgIHx8CiAgICAgICAgICBfd2luW21hdGNoICsgYmVzdF9sZW4gLSAxXSAhPT0gc2Nhbl9lbmQxIHx8CiAgICAgICAgICBfd2luW21hdGNoXSAgICAgICAgICAgICAgICAhPT0gX3dpbltzY2FuXSB8fAogICAgICAgICAgX3dpblsrK21hdGNoXSAgICAgICAgICAgICAgIT09IF93aW5bc2NhbiArIDFdKSB7CiAgICAgICAgY29udGludWU7CiAgICAgIH0KCiAgICAgIC8qIFRoZSBjaGVjayBhdCBiZXN0X2xlbi0xIGNhbiBiZSByZW1vdmVkIGJlY2F1c2UgaXQgd2lsbCBiZSBtYWRlCiAgICAgICAqIGFnYWluIGxhdGVyLiAoVGhpcyBoZXVyaXN0aWMgaXMgbm90IGFsd2F5cyBhIHdpbi4pCiAgICAgICAqIEl0IGlzIG5vdCBuZWNlc3NhcnkgdG8gY29tcGFyZSBzY2FuWzJdIGFuZCBtYXRjaFsyXSBzaW5jZSB0aGV5CiAgICAgICAqIGFyZSBhbHdheXMgZXF1YWwgd2hlbiB0aGUgb3RoZXIgYnl0ZXMgbWF0Y2gsIGdpdmVuIHRoYXQKICAgICAgICogdGhlIGhhc2gga2V5cyBhcmUgZXF1YWwgYW5kIHRoYXQgSEFTSF9CSVRTID49IDguCiAgICAgICAqLwogICAgICBzY2FuICs9IDI7CiAgICAgIG1hdGNoKys7CiAgICAgIC8vIEFzc2VydCgqc2NhbiA9PSAqbWF0Y2gsICJtYXRjaFsyXT8iKTsKCiAgICAgIC8qIFdlIGNoZWNrIGZvciBpbnN1ZmZpY2llbnQgbG9va2FoZWFkIG9ubHkgZXZlcnkgOHRoIGNvbXBhcmlzb247CiAgICAgICAqIHRoZSAyNTZ0aCBjaGVjayB3aWxsIGJlIG1hZGUgYXQgc3Ryc3RhcnQrMjU4LgogICAgICAgKi8KICAgICAgZG8gewogICAgICAgIC8qanNoaW50IG5vZW1wdHk6ZmFsc2UqLwogICAgICB9IHdoaWxlIChfd2luWysrc2Nhbl0gPT09IF93aW5bKyttYXRjaF0gJiYgX3dpblsrK3NjYW5dID09PSBfd2luWysrbWF0Y2hdICYmCiAgICAgICAgICAgICAgIF93aW5bKytzY2FuXSA9PT0gX3dpblsrK21hdGNoXSAmJiBfd2luWysrc2Nhbl0gPT09IF93aW5bKyttYXRjaF0gJiYKICAgICAgICAgICAgICAgX3dpblsrK3NjYW5dID09PSBfd2luWysrbWF0Y2hdICYmIF93aW5bKytzY2FuXSA9PT0gX3dpblsrK21hdGNoXSAmJgogICAgICAgICAgICAgICBfd2luWysrc2Nhbl0gPT09IF93aW5bKyttYXRjaF0gJiYgX3dpblsrK3NjYW5dID09PSBfd2luWysrbWF0Y2hdICYmCiAgICAgICAgICAgICAgIHNjYW4gPCBzdHJlbmQpOwoKICAgICAgLy8gQXNzZXJ0KHNjYW4gPD0gcy0+d2luZG93Kyh1bnNpZ25lZCkocy0+d2luZG93X3NpemUtMSksICJ3aWxkIHNjYW4iKTsKCiAgICAgIGxlbiA9IE1BWF9NQVRDSCAtIChzdHJlbmQgLSBzY2FuKTsKICAgICAgc2NhbiA9IHN0cmVuZCAtIE1BWF9NQVRDSDsKCiAgICAgIGlmIChsZW4gPiBiZXN0X2xlbikgewogICAgICAgIHMubWF0Y2hfc3RhcnQgPSBjdXJfbWF0Y2g7CiAgICAgICAgYmVzdF9sZW4gPSBsZW47CiAgICAgICAgaWYgKGxlbiA+PSBuaWNlX21hdGNoKSB7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgICAgc2Nhbl9lbmQxICA9IF93aW5bc2NhbiArIGJlc3RfbGVuIC0gMV07CiAgICAgICAgc2Nhbl9lbmQgICA9IF93aW5bc2NhbiArIGJlc3RfbGVuXTsKICAgICAgfQogICAgfSB3aGlsZSAoKGN1cl9tYXRjaCA9IHByZXZbY3VyX21hdGNoICYgd21hc2tdKSA+IGxpbWl0ICYmIC0tY2hhaW5fbGVuZ3RoICE9PSAwKTsKCiAgICBpZiAoYmVzdF9sZW4gPD0gcy5sb29rYWhlYWQpIHsKICAgICAgcmV0dXJuIGJlc3RfbGVuOwogICAgfQogICAgcmV0dXJuIHMubG9va2FoZWFkOwogIH07CgoKICAvKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgKiBGaWxsIHRoZSB3aW5kb3cgd2hlbiB0aGUgbG9va2FoZWFkIGJlY29tZXMgaW5zdWZmaWNpZW50LgogICAqIFVwZGF0ZXMgc3Ryc3RhcnQgYW5kIGxvb2thaGVhZC4KICAgKgogICAqIElOIGFzc2VydGlvbjogbG9va2FoZWFkIDwgTUlOX0xPT0tBSEVBRAogICAqIE9VVCBhc3NlcnRpb25zOiBzdHJzdGFydCA8PSB3aW5kb3dfc2l6ZS1NSU5fTE9PS0FIRUFECiAgICogICAgQXQgbGVhc3Qgb25lIGJ5dGUgaGFzIGJlZW4gcmVhZCwgb3IgYXZhaWxfaW4gPT0gMDsgcmVhZHMgYXJlCiAgICogICAgcGVyZm9ybWVkIGZvciBhdCBsZWFzdCB0d28gYnl0ZXMgKHJlcXVpcmVkIGZvciB0aGUgemlwIHRyYW5zbGF0ZV9lb2wKICAgKiAgICBvcHRpb24gLS0gbm90IHN1cHBvcnRlZCBoZXJlKS4KICAgKi8KICBjb25zdCBmaWxsX3dpbmRvdyA9IChzKSA9PiB7CgogICAgY29uc3QgX3dfc2l6ZSA9IHMud19zaXplOwogICAgbGV0IHAsIG4sIG0sIG1vcmUsIHN0cjsKCiAgICAvL0Fzc2VydChzLT5sb29rYWhlYWQgPCBNSU5fTE9PS0FIRUFELCAiYWxyZWFkeSBlbm91Z2ggbG9va2FoZWFkIik7CgogICAgZG8gewogICAgICBtb3JlID0gcy53aW5kb3dfc2l6ZSAtIHMubG9va2FoZWFkIC0gcy5zdHJzdGFydDsKCiAgICAgIC8vIEpTIGludHMgaGF2ZSAzMiBiaXQsIGJsb2NrIGJlbG93IG5vdCBuZWVkZWQKICAgICAgLyogRGVhbCB3aXRoICFAIyQlIDY0SyBsaW1pdDogKi8KICAgICAgLy9pZiAoc2l6ZW9mKGludCkgPD0gMikgewogICAgICAvLyAgICBpZiAobW9yZSA9PSAwICYmIHMtPnN0cnN0YXJ0ID09IDAgJiYgcy0+bG9va2FoZWFkID09IDApIHsKICAgICAgLy8gICAgICAgIG1vcmUgPSB3c2l6ZTsKICAgICAgLy8KICAgICAgLy8gIH0gZWxzZSBpZiAobW9yZSA9PSAodW5zaWduZWQpKC0xKSkgewogICAgICAvLyAgICAgICAgLyogVmVyeSB1bmxpa2VseSwgYnV0IHBvc3NpYmxlIG9uIDE2IGJpdCBtYWNoaW5lIGlmCiAgICAgIC8vICAgICAgICAgKiBzdHJzdGFydCA9PSAwICYmIGxvb2thaGVhZCA9PSAxIChpbnB1dCBkb25lIGEgYnl0ZSBhdCB0aW1lKQogICAgICAvLyAgICAgICAgICovCiAgICAgIC8vICAgICAgICBtb3JlLS07CiAgICAgIC8vICAgIH0KICAgICAgLy99CgoKICAgICAgLyogSWYgdGhlIHdpbmRvdyBpcyBhbG1vc3QgZnVsbCBhbmQgdGhlcmUgaXMgaW5zdWZmaWNpZW50IGxvb2thaGVhZCwKICAgICAgICogbW92ZSB0aGUgdXBwZXIgaGFsZiB0byB0aGUgbG93ZXIgb25lIHRvIG1ha2Ugcm9vbSBpbiB0aGUgdXBwZXIgaGFsZi4KICAgICAgICovCiAgICAgIGlmIChzLnN0cnN0YXJ0ID49IF93X3NpemUgKyAoX3dfc2l6ZSAtIE1JTl9MT09LQUhFQUQpKSB7CgogICAgICAgIHMud2luZG93LnNldChzLndpbmRvdy5zdWJhcnJheShfd19zaXplLCBfd19zaXplICsgX3dfc2l6ZSksIDApOwogICAgICAgIHMubWF0Y2hfc3RhcnQgLT0gX3dfc2l6ZTsKICAgICAgICBzLnN0cnN0YXJ0IC09IF93X3NpemU7CiAgICAgICAgLyogd2Ugbm93IGhhdmUgc3Ryc3RhcnQgPj0gTUFYX0RJU1QgKi8KICAgICAgICBzLmJsb2NrX3N0YXJ0IC09IF93X3NpemU7CgogICAgICAgIC8qIFNsaWRlIHRoZSBoYXNoIHRhYmxlIChjb3VsZCBiZSBhdm9pZGVkIHdpdGggMzIgYml0IHZhbHVlcwogICAgICAgICBhdCB0aGUgZXhwZW5zZSBvZiBtZW1vcnkgdXNhZ2UpLiBXZSBzbGlkZSBldmVuIHdoZW4gbGV2ZWwgPT0gMAogICAgICAgICB0byBrZWVwIHRoZSBoYXNoIHRhYmxlIGNvbnNpc3RlbnQgaWYgd2Ugc3dpdGNoIGJhY2sgdG8gbGV2ZWwgPiAwCiAgICAgICAgIGxhdGVyLiAoVXNpbmcgbGV2ZWwgMCBwZXJtYW5lbnRseSBpcyBub3QgYW4gb3B0aW1hbCB1c2FnZSBvZgogICAgICAgICB6bGliLCBzbyB3ZSBkb24ndCBjYXJlIGFib3V0IHRoaXMgcGF0aG9sb2dpY2FsIGNhc2UuKQogICAgICAgICAqLwoKICAgICAgICBuID0gcy5oYXNoX3NpemU7CiAgICAgICAgcCA9IG47CgogICAgICAgIGRvIHsKICAgICAgICAgIG0gPSBzLmhlYWRbLS1wXTsKICAgICAgICAgIHMuaGVhZFtwXSA9IChtID49IF93X3NpemUgPyBtIC0gX3dfc2l6ZSA6IDApOwogICAgICAgIH0gd2hpbGUgKC0tbik7CgogICAgICAgIG4gPSBfd19zaXplOwogICAgICAgIHAgPSBuOwoKICAgICAgICBkbyB7CiAgICAgICAgICBtID0gcy5wcmV2Wy0tcF07CiAgICAgICAgICBzLnByZXZbcF0gPSAobSA+PSBfd19zaXplID8gbSAtIF93X3NpemUgOiAwKTsKICAgICAgICAgIC8qIElmIG4gaXMgbm90IG9uIGFueSBoYXNoIGNoYWluLCBwcmV2W25dIGlzIGdhcmJhZ2UgYnV0CiAgICAgICAgICAgKiBpdHMgdmFsdWUgd2lsbCBuZXZlciBiZSB1c2VkLgogICAgICAgICAgICovCiAgICAgICAgfSB3aGlsZSAoLS1uKTsKCiAgICAgICAgbW9yZSArPSBfd19zaXplOwogICAgICB9CiAgICAgIGlmIChzLnN0cm0uYXZhaWxfaW4gPT09IDApIHsKICAgICAgICBicmVhazsKICAgICAgfQoKICAgICAgLyogSWYgdGhlcmUgd2FzIG5vIHNsaWRpbmc6CiAgICAgICAqICAgIHN0cnN0YXJ0IDw9IFdTSVpFK01BWF9ESVNULTEgJiYgbG9va2FoZWFkIDw9IE1JTl9MT09LQUhFQUQgLSAxICYmCiAgICAgICAqICAgIG1vcmUgPT0gd2luZG93X3NpemUgLSBsb29rYWhlYWQgLSBzdHJzdGFydAogICAgICAgKiA9PiBtb3JlID49IHdpbmRvd19zaXplIC0gKE1JTl9MT09LQUhFQUQtMSArIFdTSVpFICsgTUFYX0RJU1QtMSkKICAgICAgICogPT4gbW9yZSA+PSB3aW5kb3dfc2l6ZSAtIDIqV1NJWkUgKyAyCiAgICAgICAqIEluIHRoZSBCSUdfTUVNIG9yIE1NQVAgY2FzZSAobm90IHlldCBzdXBwb3J0ZWQpLAogICAgICAgKiAgIHdpbmRvd19zaXplID09IGlucHV0X3NpemUgKyBNSU5fTE9PS0FIRUFEICAmJgogICAgICAgKiAgIHN0cnN0YXJ0ICsgcy0+bG9va2FoZWFkIDw9IGlucHV0X3NpemUgPT4gbW9yZSA+PSBNSU5fTE9PS0FIRUFELgogICAgICAgKiBPdGhlcndpc2UsIHdpbmRvd19zaXplID09IDIqV1NJWkUgc28gbW9yZSA+PSAyLgogICAgICAgKiBJZiB0aGVyZSB3YXMgc2xpZGluZywgbW9yZSA+PSBXU0laRS4gU28gaW4gYWxsIGNhc2VzLCBtb3JlID49IDIuCiAgICAgICAqLwogICAgICAvL0Fzc2VydChtb3JlID49IDIsICJtb3JlIDwgMiIpOwogICAgICBuID0gcmVhZF9idWYocy5zdHJtLCBzLndpbmRvdywgcy5zdHJzdGFydCArIHMubG9va2FoZWFkLCBtb3JlKTsKICAgICAgcy5sb29rYWhlYWQgKz0gbjsKCiAgICAgIC8qIEluaXRpYWxpemUgdGhlIGhhc2ggdmFsdWUgbm93IHRoYXQgd2UgaGF2ZSBzb21lIGlucHV0OiAqLwogICAgICBpZiAocy5sb29rYWhlYWQgKyBzLmluc2VydCA+PSBNSU5fTUFUQ0gpIHsKICAgICAgICBzdHIgPSBzLnN0cnN0YXJ0IC0gcy5pbnNlcnQ7CiAgICAgICAgcy5pbnNfaCA9IHMud2luZG93W3N0cl07CgogICAgICAgIC8qIFVQREFURV9IQVNIKHMsIHMtPmluc19oLCBzLT53aW5kb3dbc3RyICsgMV0pOyAqLwogICAgICAgIHMuaW5zX2ggPSBIQVNIKHMsIHMuaW5zX2gsIHMud2luZG93W3N0ciArIDFdKTsKICAvLyNpZiBNSU5fTUFUQ0ggIT0gMwogIC8vICAgICAgICBDYWxsIHVwZGF0ZV9oYXNoKCkgTUlOX01BVENILTMgbW9yZSB0aW1lcwogIC8vI2VuZGlmCiAgICAgICAgd2hpbGUgKHMuaW5zZXJ0KSB7CiAgICAgICAgICAvKiBVUERBVEVfSEFTSChzLCBzLT5pbnNfaCwgcy0+d2luZG93W3N0ciArIE1JTl9NQVRDSC0xXSk7ICovCiAgICAgICAgICBzLmluc19oID0gSEFTSChzLCBzLmluc19oLCBzLndpbmRvd1tzdHIgKyBNSU5fTUFUQ0ggLSAxXSk7CgogICAgICAgICAgcy5wcmV2W3N0ciAmIHMud19tYXNrXSA9IHMuaGVhZFtzLmluc19oXTsKICAgICAgICAgIHMuaGVhZFtzLmluc19oXSA9IHN0cjsKICAgICAgICAgIHN0cisrOwogICAgICAgICAgcy5pbnNlcnQtLTsKICAgICAgICAgIGlmIChzLmxvb2thaGVhZCArIHMuaW5zZXJ0IDwgTUlOX01BVENIKSB7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgICAvKiBJZiB0aGUgd2hvbGUgaW5wdXQgaGFzIGxlc3MgdGhhbiBNSU5fTUFUQ0ggYnl0ZXMsIGluc19oIGlzIGdhcmJhZ2UsCiAgICAgICAqIGJ1dCB0aGlzIGlzIG5vdCBpbXBvcnRhbnQgc2luY2Ugb25seSBsaXRlcmFsIGJ5dGVzIHdpbGwgYmUgZW1pdHRlZC4KICAgICAgICovCgogICAgfSB3aGlsZSAocy5sb29rYWhlYWQgPCBNSU5fTE9PS0FIRUFEICYmIHMuc3RybS5hdmFpbF9pbiAhPT0gMCk7CgogICAgLyogSWYgdGhlIFdJTl9JTklUIGJ5dGVzIGFmdGVyIHRoZSBlbmQgb2YgdGhlIGN1cnJlbnQgZGF0YSBoYXZlIG5ldmVyIGJlZW4KICAgICAqIHdyaXR0ZW4sIHRoZW4gemVybyB0aG9zZSBieXRlcyBpbiBvcmRlciB0byBhdm9pZCBtZW1vcnkgY2hlY2sgcmVwb3J0cyBvZgogICAgICogdGhlIHVzZSBvZiB1bmluaXRpYWxpemVkIChvciB1bmluaXRpYWxpc2VkIGFzIEp1bGlhbiB3cml0ZXMpIGJ5dGVzIGJ5CiAgICAgKiB0aGUgbG9uZ2VzdCBtYXRjaCByb3V0aW5lcy4gIFVwZGF0ZSB0aGUgaGlnaCB3YXRlciBtYXJrIGZvciB0aGUgbmV4dAogICAgICogdGltZSB0aHJvdWdoIGhlcmUuICBXSU5fSU5JVCBpcyBzZXQgdG8gTUFYX01BVENIIHNpbmNlIHRoZSBsb25nZXN0IG1hdGNoCiAgICAgKiByb3V0aW5lcyBhbGxvdyBzY2FubmluZyB0byBzdHJzdGFydCArIE1BWF9NQVRDSCwgaWdub3JpbmcgbG9va2FoZWFkLgogICAgICovCiAgLy8gIGlmIChzLmhpZ2hfd2F0ZXIgPCBzLndpbmRvd19zaXplKSB7CiAgLy8gICAgY29uc3QgY3VyciA9IHMuc3Ryc3RhcnQgKyBzLmxvb2thaGVhZDsKICAvLyAgICBsZXQgaW5pdCA9IDA7CiAgLy8KICAvLyAgICBpZiAocy5oaWdoX3dhdGVyIDwgY3VycikgewogIC8vICAgICAgLyogUHJldmlvdXMgaGlnaCB3YXRlciBtYXJrIGJlbG93IGN1cnJlbnQgZGF0YSAtLSB6ZXJvIFdJTl9JTklUCiAgLy8gICAgICAgKiBieXRlcyBvciB1cCB0byBlbmQgb2Ygd2luZG93LCB3aGljaGV2ZXIgaXMgbGVzcy4KICAvLyAgICAgICAqLwogIC8vICAgICAgaW5pdCA9IHMud2luZG93X3NpemUgLSBjdXJyOwogIC8vICAgICAgaWYgKGluaXQgPiBXSU5fSU5JVCkKICAvLyAgICAgICAgaW5pdCA9IFdJTl9JTklUOwogIC8vICAgICAgem1lbXplcm8ocy0+d2luZG93ICsgY3VyciwgKHVuc2lnbmVkKWluaXQpOwogIC8vICAgICAgcy0+aGlnaF93YXRlciA9IGN1cnIgKyBpbml0OwogIC8vICAgIH0KICAvLyAgICBlbHNlIGlmIChzLT5oaWdoX3dhdGVyIDwgKHVsZyljdXJyICsgV0lOX0lOSVQpIHsKICAvLyAgICAgIC8qIEhpZ2ggd2F0ZXIgbWFyayBhdCBvciBhYm92ZSBjdXJyZW50IGRhdGEsIGJ1dCBiZWxvdyBjdXJyZW50IGRhdGEKICAvLyAgICAgICAqIHBsdXMgV0lOX0lOSVQgLS0gemVybyBvdXQgdG8gY3VycmVudCBkYXRhIHBsdXMgV0lOX0lOSVQsIG9yIHVwCiAgLy8gICAgICAgKiB0byBlbmQgb2Ygd2luZG93LCB3aGljaGV2ZXIgaXMgbGVzcy4KICAvLyAgICAgICAqLwogIC8vICAgICAgaW5pdCA9ICh1bGcpY3VyciArIFdJTl9JTklUIC0gcy0+aGlnaF93YXRlcjsKICAvLyAgICAgIGlmIChpbml0ID4gcy0+d2luZG93X3NpemUgLSBzLT5oaWdoX3dhdGVyKQogIC8vICAgICAgICBpbml0ID0gcy0+d2luZG93X3NpemUgLSBzLT5oaWdoX3dhdGVyOwogIC8vICAgICAgem1lbXplcm8ocy0+d2luZG93ICsgcy0+aGlnaF93YXRlciwgKHVuc2lnbmVkKWluaXQpOwogIC8vICAgICAgcy0+aGlnaF93YXRlciArPSBpbml0OwogIC8vICAgIH0KICAvLyAgfQogIC8vCiAgLy8gIEFzc2VydCgodWxnKXMtPnN0cnN0YXJ0IDw9IHMtPndpbmRvd19zaXplIC0gTUlOX0xPT0tBSEVBRCwKICAvLyAgICAibm90IGVub3VnaCByb29tIGZvciBzZWFyY2giKTsKICB9OwoKICAvKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgKiBDb3B5IHdpdGhvdXQgY29tcHJlc3Npb24gYXMgbXVjaCBhcyBwb3NzaWJsZSBmcm9tIHRoZSBpbnB1dCBzdHJlYW0sIHJldHVybgogICAqIHRoZSBjdXJyZW50IGJsb2NrIHN0YXRlLgogICAqIFRoaXMgZnVuY3Rpb24gZG9lcyBub3QgaW5zZXJ0IG5ldyBzdHJpbmdzIGluIHRoZSBkaWN0aW9uYXJ5IHNpbmNlCiAgICogdW5jb21wcmVzc2libGUgZGF0YSBpcyBwcm9iYWJseSBub3QgdXNlZnVsLiBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQKICAgKiBvbmx5IGZvciB0aGUgbGV2ZWw9MCBjb21wcmVzc2lvbiBvcHRpb24uCiAgICogTk9URTogdGhpcyBmdW5jdGlvbiBzaG91bGQgYmUgb3B0aW1pemVkIHRvIGF2b2lkIGV4dHJhIGNvcHlpbmcgZnJvbQogICAqIHdpbmRvdyB0byBwZW5kaW5nX2J1Zi4KICAgKi8KICBjb25zdCBkZWZsYXRlX3N0b3JlZCA9IChzLCBmbHVzaCkgPT4gewoKICAgIC8qIFN0b3JlZCBibG9ja3MgYXJlIGxpbWl0ZWQgdG8gMHhmZmZmIGJ5dGVzLCBwZW5kaW5nX2J1ZiBpcyBsaW1pdGVkCiAgICAgKiB0byBwZW5kaW5nX2J1Zl9zaXplLCBhbmQgZWFjaCBzdG9yZWQgYmxvY2sgaGFzIGEgNSBieXRlIGhlYWRlcjoKICAgICAqLwogICAgbGV0IG1heF9ibG9ja19zaXplID0gMHhmZmZmOwoKICAgIGlmIChtYXhfYmxvY2tfc2l6ZSA+IHMucGVuZGluZ19idWZfc2l6ZSAtIDUpIHsKICAgICAgbWF4X2Jsb2NrX3NpemUgPSBzLnBlbmRpbmdfYnVmX3NpemUgLSA1OwogICAgfQoKICAgIC8qIENvcHkgYXMgbXVjaCBhcyBwb3NzaWJsZSBmcm9tIGlucHV0IHRvIG91dHB1dDogKi8KICAgIGZvciAoOzspIHsKICAgICAgLyogRmlsbCB0aGUgd2luZG93IGFzIG11Y2ggYXMgcG9zc2libGU6ICovCiAgICAgIGlmIChzLmxvb2thaGVhZCA8PSAxKSB7CgogICAgICAgIC8vQXNzZXJ0KHMtPnN0cnN0YXJ0IDwgcy0+d19zaXplK01BWF9ESVNUKHMpIHx8CiAgICAgICAgLy8gIHMtPmJsb2NrX3N0YXJ0ID49IChsb25nKXMtPndfc2l6ZSwgInNsaWRlIHRvbyBsYXRlIik7CiAgLy8gICAgICBpZiAoIShzLnN0cnN0YXJ0IDwgcy53X3NpemUgKyAocy53X3NpemUgLSBNSU5fTE9PS0FIRUFEKSB8fAogIC8vICAgICAgICBzLmJsb2NrX3N0YXJ0ID49IHMud19zaXplKSkgewogIC8vICAgICAgICB0aHJvdyAgbmV3IEVycm9yKCJzbGlkZSB0b28gbGF0ZSIpOwogIC8vICAgICAgfQoKICAgICAgICBmaWxsX3dpbmRvdyhzKTsKICAgICAgICBpZiAocy5sb29rYWhlYWQgPT09IDAgJiYgZmx1c2ggPT09IFpfTk9fRkxVU0gkMikgewogICAgICAgICAgcmV0dXJuIEJTX05FRURfTU9SRTsKICAgICAgICB9CgogICAgICAgIGlmIChzLmxvb2thaGVhZCA9PT0gMCkgewogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICAgIC8qIGZsdXNoIHRoZSBjdXJyZW50IGJsb2NrICovCiAgICAgIH0KICAgICAgLy9Bc3NlcnQocy0+YmxvY2tfc3RhcnQgPj0gMEwsICJibG9jayBnb25lIik7CiAgLy8gICAgaWYgKHMuYmxvY2tfc3RhcnQgPCAwKSB0aHJvdyBuZXcgRXJyb3IoImJsb2NrIGdvbmUiKTsKCiAgICAgIHMuc3Ryc3RhcnQgKz0gcy5sb29rYWhlYWQ7CiAgICAgIHMubG9va2FoZWFkID0gMDsKCiAgICAgIC8qIEVtaXQgYSBzdG9yZWQgYmxvY2sgaWYgcGVuZGluZ19idWYgd2lsbCBiZSBmdWxsOiAqLwogICAgICBjb25zdCBtYXhfc3RhcnQgPSBzLmJsb2NrX3N0YXJ0ICsgbWF4X2Jsb2NrX3NpemU7CgogICAgICBpZiAocy5zdHJzdGFydCA9PT0gMCB8fCBzLnN0cnN0YXJ0ID49IG1heF9zdGFydCkgewogICAgICAgIC8qIHN0cnN0YXJ0ID09IDAgaXMgcG9zc2libGUgd2hlbiB3cmFwYXJvdW5kIG9uIDE2LWJpdCBtYWNoaW5lICovCiAgICAgICAgcy5sb29rYWhlYWQgPSBzLnN0cnN0YXJ0IC0gbWF4X3N0YXJ0OwogICAgICAgIHMuc3Ryc3RhcnQgPSBtYXhfc3RhcnQ7CiAgICAgICAgLyoqKiBGTFVTSF9CTE9DSyhzLCAwKTsgKioqLwogICAgICAgIGZsdXNoX2Jsb2NrX29ubHkocywgZmFsc2UpOwogICAgICAgIGlmIChzLnN0cm0uYXZhaWxfb3V0ID09PSAwKSB7CiAgICAgICAgICByZXR1cm4gQlNfTkVFRF9NT1JFOwogICAgICAgIH0KICAgICAgICAvKioqLwoKCiAgICAgIH0KICAgICAgLyogRmx1c2ggaWYgd2UgbWF5IGhhdmUgdG8gc2xpZGUsIG90aGVyd2lzZSBibG9ja19zdGFydCBtYXkgYmVjb21lCiAgICAgICAqIG5lZ2F0aXZlIGFuZCB0aGUgZGF0YSB3aWxsIGJlIGdvbmU6CiAgICAgICAqLwogICAgICBpZiAocy5zdHJzdGFydCAtIHMuYmxvY2tfc3RhcnQgPj0gKHMud19zaXplIC0gTUlOX0xPT0tBSEVBRCkpIHsKICAgICAgICAvKioqIEZMVVNIX0JMT0NLKHMsIDApOyAqKiovCiAgICAgICAgZmx1c2hfYmxvY2tfb25seShzLCBmYWxzZSk7CiAgICAgICAgaWYgKHMuc3RybS5hdmFpbF9vdXQgPT09IDApIHsKICAgICAgICAgIHJldHVybiBCU19ORUVEX01PUkU7CiAgICAgICAgfQogICAgICAgIC8qKiovCiAgICAgIH0KICAgIH0KCiAgICBzLmluc2VydCA9IDA7CgogICAgaWYgKGZsdXNoID09PSBaX0ZJTklTSCQzKSB7CiAgICAgIC8qKiogRkxVU0hfQkxPQ0socywgMSk7ICoqKi8KICAgICAgZmx1c2hfYmxvY2tfb25seShzLCB0cnVlKTsKICAgICAgaWYgKHMuc3RybS5hdmFpbF9vdXQgPT09IDApIHsKICAgICAgICByZXR1cm4gQlNfRklOSVNIX1NUQVJURUQ7CiAgICAgIH0KICAgICAgLyoqKi8KICAgICAgcmV0dXJuIEJTX0ZJTklTSF9ET05FOwogICAgfQoKICAgIGlmIChzLnN0cnN0YXJ0ID4gcy5ibG9ja19zdGFydCkgewogICAgICAvKioqIEZMVVNIX0JMT0NLKHMsIDApOyAqKiovCiAgICAgIGZsdXNoX2Jsb2NrX29ubHkocywgZmFsc2UpOwogICAgICBpZiAocy5zdHJtLmF2YWlsX291dCA9PT0gMCkgewogICAgICAgIHJldHVybiBCU19ORUVEX01PUkU7CiAgICAgIH0KICAgICAgLyoqKi8KICAgIH0KCiAgICByZXR1cm4gQlNfTkVFRF9NT1JFOwogIH07CgogIC8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAqIENvbXByZXNzIGFzIG11Y2ggYXMgcG9zc2libGUgZnJvbSB0aGUgaW5wdXQgc3RyZWFtLCByZXR1cm4gdGhlIGN1cnJlbnQKICAgKiBibG9jayBzdGF0ZS4KICAgKiBUaGlzIGZ1bmN0aW9uIGRvZXMgbm90IHBlcmZvcm0gbGF6eSBldmFsdWF0aW9uIG9mIG1hdGNoZXMgYW5kIGluc2VydHMKICAgKiBuZXcgc3RyaW5ncyBpbiB0aGUgZGljdGlvbmFyeSBvbmx5IGZvciB1bm1hdGNoZWQgc3RyaW5ncyBvciBmb3Igc2hvcnQKICAgKiBtYXRjaGVzLiBJdCBpcyB1c2VkIG9ubHkgZm9yIHRoZSBmYXN0IGNvbXByZXNzaW9uIG9wdGlvbnMuCiAgICovCiAgY29uc3QgZGVmbGF0ZV9mYXN0ID0gKHMsIGZsdXNoKSA9PiB7CgogICAgbGV0IGhhc2hfaGVhZDsgICAgICAgIC8qIGhlYWQgb2YgdGhlIGhhc2ggY2hhaW4gKi8KICAgIGxldCBiZmx1c2g7ICAgICAgICAgICAvKiBzZXQgaWYgY3VycmVudCBibG9jayBtdXN0IGJlIGZsdXNoZWQgKi8KCiAgICBmb3IgKDs7KSB7CiAgICAgIC8qIE1ha2Ugc3VyZSB0aGF0IHdlIGFsd2F5cyBoYXZlIGVub3VnaCBsb29rYWhlYWQsIGV4Y2VwdAogICAgICAgKiBhdCB0aGUgZW5kIG9mIHRoZSBpbnB1dCBmaWxlLiBXZSBuZWVkIE1BWF9NQVRDSCBieXRlcwogICAgICAgKiBmb3IgdGhlIG5leHQgbWF0Y2gsIHBsdXMgTUlOX01BVENIIGJ5dGVzIHRvIGluc2VydCB0aGUKICAgICAgICogc3RyaW5nIGZvbGxvd2luZyB0aGUgbmV4dCBtYXRjaC4KICAgICAgICovCiAgICAgIGlmIChzLmxvb2thaGVhZCA8IE1JTl9MT09LQUhFQUQpIHsKICAgICAgICBmaWxsX3dpbmRvdyhzKTsKICAgICAgICBpZiAocy5sb29rYWhlYWQgPCBNSU5fTE9PS0FIRUFEICYmIGZsdXNoID09PSBaX05PX0ZMVVNIJDIpIHsKICAgICAgICAgIHJldHVybiBCU19ORUVEX01PUkU7CiAgICAgICAgfQogICAgICAgIGlmIChzLmxvb2thaGVhZCA9PT0gMCkgewogICAgICAgICAgYnJlYWs7IC8qIGZsdXNoIHRoZSBjdXJyZW50IGJsb2NrICovCiAgICAgICAgfQogICAgICB9CgogICAgICAvKiBJbnNlcnQgdGhlIHN0cmluZyB3aW5kb3dbc3Ryc3RhcnQgLi4gc3Ryc3RhcnQrMl0gaW4gdGhlCiAgICAgICAqIGRpY3Rpb25hcnksIGFuZCBzZXQgaGFzaF9oZWFkIHRvIHRoZSBoZWFkIG9mIHRoZSBoYXNoIGNoYWluOgogICAgICAgKi8KICAgICAgaGFzaF9oZWFkID0gMC8qTklMKi87CiAgICAgIGlmIChzLmxvb2thaGVhZCA+PSBNSU5fTUFUQ0gpIHsKICAgICAgICAvKioqIElOU0VSVF9TVFJJTkcocywgcy5zdHJzdGFydCwgaGFzaF9oZWFkKTsgKioqLwogICAgICAgIHMuaW5zX2ggPSBIQVNIKHMsIHMuaW5zX2gsIHMud2luZG93W3Muc3Ryc3RhcnQgKyBNSU5fTUFUQ0ggLSAxXSk7CiAgICAgICAgaGFzaF9oZWFkID0gcy5wcmV2W3Muc3Ryc3RhcnQgJiBzLndfbWFza10gPSBzLmhlYWRbcy5pbnNfaF07CiAgICAgICAgcy5oZWFkW3MuaW5zX2hdID0gcy5zdHJzdGFydDsKICAgICAgICAvKioqLwogICAgICB9CgogICAgICAvKiBGaW5kIHRoZSBsb25nZXN0IG1hdGNoLCBkaXNjYXJkaW5nIHRob3NlIDw9IHByZXZfbGVuZ3RoLgogICAgICAgKiBBdCB0aGlzIHBvaW50IHdlIGhhdmUgYWx3YXlzIG1hdGNoX2xlbmd0aCA8IE1JTl9NQVRDSAogICAgICAgKi8KICAgICAgaWYgKGhhc2hfaGVhZCAhPT0gMC8qTklMKi8gJiYgKChzLnN0cnN0YXJ0IC0gaGFzaF9oZWFkKSA8PSAocy53X3NpemUgLSBNSU5fTE9PS0FIRUFEKSkpIHsKICAgICAgICAvKiBUbyBzaW1wbGlmeSB0aGUgY29kZSwgd2UgcHJldmVudCBtYXRjaGVzIHdpdGggdGhlIHN0cmluZwogICAgICAgICAqIG9mIHdpbmRvdyBpbmRleCAwIChpbiBwYXJ0aWN1bGFyIHdlIGhhdmUgdG8gYXZvaWQgYSBtYXRjaAogICAgICAgICAqIG9mIHRoZSBzdHJpbmcgd2l0aCBpdHNlbGYgYXQgdGhlIHN0YXJ0IG9mIHRoZSBpbnB1dCBmaWxlKS4KICAgICAgICAgKi8KICAgICAgICBzLm1hdGNoX2xlbmd0aCA9IGxvbmdlc3RfbWF0Y2gocywgaGFzaF9oZWFkKTsKICAgICAgICAvKiBsb25nZXN0X21hdGNoKCkgc2V0cyBtYXRjaF9zdGFydCAqLwogICAgICB9CiAgICAgIGlmIChzLm1hdGNoX2xlbmd0aCA+PSBNSU5fTUFUQ0gpIHsKICAgICAgICAvLyBjaGVja19tYXRjaChzLCBzLnN0cnN0YXJ0LCBzLm1hdGNoX3N0YXJ0LCBzLm1hdGNoX2xlbmd0aCk7IC8vIGZvciBkZWJ1ZyBvbmx5CgogICAgICAgIC8qKiogX3RyX3RhbGx5X2Rpc3Qocywgcy5zdHJzdGFydCAtIHMubWF0Y2hfc3RhcnQsCiAgICAgICAgICAgICAgICAgICAgICAgcy5tYXRjaF9sZW5ndGggLSBNSU5fTUFUQ0gsIGJmbHVzaCk7ICoqKi8KICAgICAgICBiZmx1c2ggPSBfdHJfdGFsbHkocywgcy5zdHJzdGFydCAtIHMubWF0Y2hfc3RhcnQsIHMubWF0Y2hfbGVuZ3RoIC0gTUlOX01BVENIKTsKCiAgICAgICAgcy5sb29rYWhlYWQgLT0gcy5tYXRjaF9sZW5ndGg7CgogICAgICAgIC8qIEluc2VydCBuZXcgc3RyaW5ncyBpbiB0aGUgaGFzaCB0YWJsZSBvbmx5IGlmIHRoZSBtYXRjaCBsZW5ndGgKICAgICAgICAgKiBpcyBub3QgdG9vIGxhcmdlLiBUaGlzIHNhdmVzIHRpbWUgYnV0IGRlZ3JhZGVzIGNvbXByZXNzaW9uLgogICAgICAgICAqLwogICAgICAgIGlmIChzLm1hdGNoX2xlbmd0aCA8PSBzLm1heF9sYXp5X21hdGNoLyptYXhfaW5zZXJ0X2xlbmd0aCovICYmIHMubG9va2FoZWFkID49IE1JTl9NQVRDSCkgewogICAgICAgICAgcy5tYXRjaF9sZW5ndGgtLTsgLyogc3RyaW5nIGF0IHN0cnN0YXJ0IGFscmVhZHkgaW4gdGFibGUgKi8KICAgICAgICAgIGRvIHsKICAgICAgICAgICAgcy5zdHJzdGFydCsrOwogICAgICAgICAgICAvKioqIElOU0VSVF9TVFJJTkcocywgcy5zdHJzdGFydCwgaGFzaF9oZWFkKTsgKioqLwogICAgICAgICAgICBzLmluc19oID0gSEFTSChzLCBzLmluc19oLCBzLndpbmRvd1tzLnN0cnN0YXJ0ICsgTUlOX01BVENIIC0gMV0pOwogICAgICAgICAgICBoYXNoX2hlYWQgPSBzLnByZXZbcy5zdHJzdGFydCAmIHMud19tYXNrXSA9IHMuaGVhZFtzLmluc19oXTsKICAgICAgICAgICAgcy5oZWFkW3MuaW5zX2hdID0gcy5zdHJzdGFydDsKICAgICAgICAgICAgLyoqKi8KICAgICAgICAgICAgLyogc3Ryc3RhcnQgbmV2ZXIgZXhjZWVkcyBXU0laRS1NQVhfTUFUQ0gsIHNvIHRoZXJlIGFyZQogICAgICAgICAgICAgKiBhbHdheXMgTUlOX01BVENIIGJ5dGVzIGFoZWFkLgogICAgICAgICAgICAgKi8KICAgICAgICAgIH0gd2hpbGUgKC0tcy5tYXRjaF9sZW5ndGggIT09IDApOwogICAgICAgICAgcy5zdHJzdGFydCsrOwogICAgICAgIH0gZWxzZQogICAgICAgIHsKICAgICAgICAgIHMuc3Ryc3RhcnQgKz0gcy5tYXRjaF9sZW5ndGg7CiAgICAgICAgICBzLm1hdGNoX2xlbmd0aCA9IDA7CiAgICAgICAgICBzLmluc19oID0gcy53aW5kb3dbcy5zdHJzdGFydF07CiAgICAgICAgICAvKiBVUERBVEVfSEFTSChzLCBzLmluc19oLCBzLndpbmRvd1tzLnN0cnN0YXJ0KzFdKTsgKi8KICAgICAgICAgIHMuaW5zX2ggPSBIQVNIKHMsIHMuaW5zX2gsIHMud2luZG93W3Muc3Ryc3RhcnQgKyAxXSk7CgogIC8vI2lmIE1JTl9NQVRDSCAhPSAzCiAgLy8gICAgICAgICAgICAgICAgQ2FsbCBVUERBVEVfSEFTSCgpIE1JTl9NQVRDSC0zIG1vcmUgdGltZXMKICAvLyNlbmRpZgogICAgICAgICAgLyogSWYgbG9va2FoZWFkIDwgTUlOX01BVENILCBpbnNfaCBpcyBnYXJiYWdlLCBidXQgaXQgZG9lcyBub3QKICAgICAgICAgICAqIG1hdHRlciBzaW5jZSBpdCB3aWxsIGJlIHJlY29tcHV0ZWQgYXQgbmV4dCBkZWZsYXRlIGNhbGwuCiAgICAgICAgICAgKi8KICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLyogTm8gbWF0Y2gsIG91dHB1dCBhIGxpdGVyYWwgYnl0ZSAqLwogICAgICAgIC8vVHJhY2V2digoc3RkZXJyLCIlYyIsIHMud2luZG93W3Muc3Ryc3RhcnRdKSk7CiAgICAgICAgLyoqKiBfdHJfdGFsbHlfbGl0KHMsIHMud2luZG93W3Muc3Ryc3RhcnRdLCBiZmx1c2gpOyAqKiovCiAgICAgICAgYmZsdXNoID0gX3RyX3RhbGx5KHMsIDAsIHMud2luZG93W3Muc3Ryc3RhcnRdKTsKCiAgICAgICAgcy5sb29rYWhlYWQtLTsKICAgICAgICBzLnN0cnN0YXJ0Kys7CiAgICAgIH0KICAgICAgaWYgKGJmbHVzaCkgewogICAgICAgIC8qKiogRkxVU0hfQkxPQ0socywgMCk7ICoqKi8KICAgICAgICBmbHVzaF9ibG9ja19vbmx5KHMsIGZhbHNlKTsKICAgICAgICBpZiAocy5zdHJtLmF2YWlsX291dCA9PT0gMCkgewogICAgICAgICAgcmV0dXJuIEJTX05FRURfTU9SRTsKICAgICAgICB9CiAgICAgICAgLyoqKi8KICAgICAgfQogICAgfQogICAgcy5pbnNlcnQgPSAoKHMuc3Ryc3RhcnQgPCAoTUlOX01BVENIIC0gMSkpID8gcy5zdHJzdGFydCA6IE1JTl9NQVRDSCAtIDEpOwogICAgaWYgKGZsdXNoID09PSBaX0ZJTklTSCQzKSB7CiAgICAgIC8qKiogRkxVU0hfQkxPQ0socywgMSk7ICoqKi8KICAgICAgZmx1c2hfYmxvY2tfb25seShzLCB0cnVlKTsKICAgICAgaWYgKHMuc3RybS5hdmFpbF9vdXQgPT09IDApIHsKICAgICAgICByZXR1cm4gQlNfRklOSVNIX1NUQVJURUQ7CiAgICAgIH0KICAgICAgLyoqKi8KICAgICAgcmV0dXJuIEJTX0ZJTklTSF9ET05FOwogICAgfQogICAgaWYgKHMubGFzdF9saXQpIHsKICAgICAgLyoqKiBGTFVTSF9CTE9DSyhzLCAwKTsgKioqLwogICAgICBmbHVzaF9ibG9ja19vbmx5KHMsIGZhbHNlKTsKICAgICAgaWYgKHMuc3RybS5hdmFpbF9vdXQgPT09IDApIHsKICAgICAgICByZXR1cm4gQlNfTkVFRF9NT1JFOwogICAgICB9CiAgICAgIC8qKiovCiAgICB9CiAgICByZXR1cm4gQlNfQkxPQ0tfRE9ORTsKICB9OwoKICAvKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgKiBTYW1lIGFzIGFib3ZlLCBidXQgYWNoaWV2ZXMgYmV0dGVyIGNvbXByZXNzaW9uLiBXZSB1c2UgYSBsYXp5CiAgICogZXZhbHVhdGlvbiBmb3IgbWF0Y2hlczogYSBtYXRjaCBpcyBmaW5hbGx5IGFkb3B0ZWQgb25seSBpZiB0aGVyZSBpcwogICAqIG5vIGJldHRlciBtYXRjaCBhdCB0aGUgbmV4dCB3aW5kb3cgcG9zaXRpb24uCiAgICovCiAgY29uc3QgZGVmbGF0ZV9zbG93ID0gKHMsIGZsdXNoKSA9PiB7CgogICAgbGV0IGhhc2hfaGVhZDsgICAgICAgICAgLyogaGVhZCBvZiBoYXNoIGNoYWluICovCiAgICBsZXQgYmZsdXNoOyAgICAgICAgICAgICAgLyogc2V0IGlmIGN1cnJlbnQgYmxvY2sgbXVzdCBiZSBmbHVzaGVkICovCgogICAgbGV0IG1heF9pbnNlcnQ7CgogICAgLyogUHJvY2VzcyB0aGUgaW5wdXQgYmxvY2suICovCiAgICBmb3IgKDs7KSB7CiAgICAgIC8qIE1ha2Ugc3VyZSB0aGF0IHdlIGFsd2F5cyBoYXZlIGVub3VnaCBsb29rYWhlYWQsIGV4Y2VwdAogICAgICAgKiBhdCB0aGUgZW5kIG9mIHRoZSBpbnB1dCBmaWxlLiBXZSBuZWVkIE1BWF9NQVRDSCBieXRlcwogICAgICAgKiBmb3IgdGhlIG5leHQgbWF0Y2gsIHBsdXMgTUlOX01BVENIIGJ5dGVzIHRvIGluc2VydCB0aGUKICAgICAgICogc3RyaW5nIGZvbGxvd2luZyB0aGUgbmV4dCBtYXRjaC4KICAgICAgICovCiAgICAgIGlmIChzLmxvb2thaGVhZCA8IE1JTl9MT09LQUhFQUQpIHsKICAgICAgICBmaWxsX3dpbmRvdyhzKTsKICAgICAgICBpZiAocy5sb29rYWhlYWQgPCBNSU5fTE9PS0FIRUFEICYmIGZsdXNoID09PSBaX05PX0ZMVVNIJDIpIHsKICAgICAgICAgIHJldHVybiBCU19ORUVEX01PUkU7CiAgICAgICAgfQogICAgICAgIGlmIChzLmxvb2thaGVhZCA9PT0gMCkgeyBicmVhazsgfSAvKiBmbHVzaCB0aGUgY3VycmVudCBibG9jayAqLwogICAgICB9CgogICAgICAvKiBJbnNlcnQgdGhlIHN0cmluZyB3aW5kb3dbc3Ryc3RhcnQgLi4gc3Ryc3RhcnQrMl0gaW4gdGhlCiAgICAgICAqIGRpY3Rpb25hcnksIGFuZCBzZXQgaGFzaF9oZWFkIHRvIHRoZSBoZWFkIG9mIHRoZSBoYXNoIGNoYWluOgogICAgICAgKi8KICAgICAgaGFzaF9oZWFkID0gMC8qTklMKi87CiAgICAgIGlmIChzLmxvb2thaGVhZCA+PSBNSU5fTUFUQ0gpIHsKICAgICAgICAvKioqIElOU0VSVF9TVFJJTkcocywgcy5zdHJzdGFydCwgaGFzaF9oZWFkKTsgKioqLwogICAgICAgIHMuaW5zX2ggPSBIQVNIKHMsIHMuaW5zX2gsIHMud2luZG93W3Muc3Ryc3RhcnQgKyBNSU5fTUFUQ0ggLSAxXSk7CiAgICAgICAgaGFzaF9oZWFkID0gcy5wcmV2W3Muc3Ryc3RhcnQgJiBzLndfbWFza10gPSBzLmhlYWRbcy5pbnNfaF07CiAgICAgICAgcy5oZWFkW3MuaW5zX2hdID0gcy5zdHJzdGFydDsKICAgICAgICAvKioqLwogICAgICB9CgogICAgICAvKiBGaW5kIHRoZSBsb25nZXN0IG1hdGNoLCBkaXNjYXJkaW5nIHRob3NlIDw9IHByZXZfbGVuZ3RoLgogICAgICAgKi8KICAgICAgcy5wcmV2X2xlbmd0aCA9IHMubWF0Y2hfbGVuZ3RoOwogICAgICBzLnByZXZfbWF0Y2ggPSBzLm1hdGNoX3N0YXJ0OwogICAgICBzLm1hdGNoX2xlbmd0aCA9IE1JTl9NQVRDSCAtIDE7CgogICAgICBpZiAoaGFzaF9oZWFkICE9PSAwLypOSUwqLyAmJiBzLnByZXZfbGVuZ3RoIDwgcy5tYXhfbGF6eV9tYXRjaCAmJgogICAgICAgICAgcy5zdHJzdGFydCAtIGhhc2hfaGVhZCA8PSAocy53X3NpemUgLSBNSU5fTE9PS0FIRUFEKS8qTUFYX0RJU1QocykqLykgewogICAgICAgIC8qIFRvIHNpbXBsaWZ5IHRoZSBjb2RlLCB3ZSBwcmV2ZW50IG1hdGNoZXMgd2l0aCB0aGUgc3RyaW5nCiAgICAgICAgICogb2Ygd2luZG93IGluZGV4IDAgKGluIHBhcnRpY3VsYXIgd2UgaGF2ZSB0byBhdm9pZCBhIG1hdGNoCiAgICAgICAgICogb2YgdGhlIHN0cmluZyB3aXRoIGl0c2VsZiBhdCB0aGUgc3RhcnQgb2YgdGhlIGlucHV0IGZpbGUpLgogICAgICAgICAqLwogICAgICAgIHMubWF0Y2hfbGVuZ3RoID0gbG9uZ2VzdF9tYXRjaChzLCBoYXNoX2hlYWQpOwogICAgICAgIC8qIGxvbmdlc3RfbWF0Y2goKSBzZXRzIG1hdGNoX3N0YXJ0ICovCgogICAgICAgIGlmIChzLm1hdGNoX2xlbmd0aCA8PSA1ICYmCiAgICAgICAgICAgKHMuc3RyYXRlZ3kgPT09IFpfRklMVEVSRUQgfHwgKHMubWF0Y2hfbGVuZ3RoID09PSBNSU5fTUFUQ0ggJiYgcy5zdHJzdGFydCAtIHMubWF0Y2hfc3RhcnQgPiA0MDk2LypUT09fRkFSKi8pKSkgewoKICAgICAgICAgIC8qIElmIHByZXZfbWF0Y2ggaXMgYWxzbyBNSU5fTUFUQ0gsIG1hdGNoX3N0YXJ0IGlzIGdhcmJhZ2UKICAgICAgICAgICAqIGJ1dCB3ZSB3aWxsIGlnbm9yZSB0aGUgY3VycmVudCBtYXRjaCBhbnl3YXkuCiAgICAgICAgICAgKi8KICAgICAgICAgIHMubWF0Y2hfbGVuZ3RoID0gTUlOX01BVENIIC0gMTsKICAgICAgICB9CiAgICAgIH0KICAgICAgLyogSWYgdGhlcmUgd2FzIGEgbWF0Y2ggYXQgdGhlIHByZXZpb3VzIHN0ZXAgYW5kIHRoZSBjdXJyZW50CiAgICAgICAqIG1hdGNoIGlzIG5vdCBiZXR0ZXIsIG91dHB1dCB0aGUgcHJldmlvdXMgbWF0Y2g6CiAgICAgICAqLwogICAgICBpZiAocy5wcmV2X2xlbmd0aCA+PSBNSU5fTUFUQ0ggJiYgcy5tYXRjaF9sZW5ndGggPD0gcy5wcmV2X2xlbmd0aCkgewogICAgICAgIG1heF9pbnNlcnQgPSBzLnN0cnN0YXJ0ICsgcy5sb29rYWhlYWQgLSBNSU5fTUFUQ0g7CiAgICAgICAgLyogRG8gbm90IGluc2VydCBzdHJpbmdzIGluIGhhc2ggdGFibGUgYmV5b25kIHRoaXMuICovCgogICAgICAgIC8vY2hlY2tfbWF0Y2gocywgcy5zdHJzdGFydC0xLCBzLnByZXZfbWF0Y2gsIHMucHJldl9sZW5ndGgpOwoKICAgICAgICAvKioqX3RyX3RhbGx5X2Rpc3Qocywgcy5zdHJzdGFydCAtIDEgLSBzLnByZXZfbWF0Y2gsCiAgICAgICAgICAgICAgICAgICAgICAgcy5wcmV2X2xlbmd0aCAtIE1JTl9NQVRDSCwgYmZsdXNoKTsqKiovCiAgICAgICAgYmZsdXNoID0gX3RyX3RhbGx5KHMsIHMuc3Ryc3RhcnQgLSAxIC0gcy5wcmV2X21hdGNoLCBzLnByZXZfbGVuZ3RoIC0gTUlOX01BVENIKTsKICAgICAgICAvKiBJbnNlcnQgaW4gaGFzaCB0YWJsZSBhbGwgc3RyaW5ncyB1cCB0byB0aGUgZW5kIG9mIHRoZSBtYXRjaC4KICAgICAgICAgKiBzdHJzdGFydC0xIGFuZCBzdHJzdGFydCBhcmUgYWxyZWFkeSBpbnNlcnRlZC4gSWYgdGhlcmUgaXMgbm90CiAgICAgICAgICogZW5vdWdoIGxvb2thaGVhZCwgdGhlIGxhc3QgdHdvIHN0cmluZ3MgYXJlIG5vdCBpbnNlcnRlZCBpbgogICAgICAgICAqIHRoZSBoYXNoIHRhYmxlLgogICAgICAgICAqLwogICAgICAgIHMubG9va2FoZWFkIC09IHMucHJldl9sZW5ndGggLSAxOwogICAgICAgIHMucHJldl9sZW5ndGggLT0gMjsKICAgICAgICBkbyB7CiAgICAgICAgICBpZiAoKytzLnN0cnN0YXJ0IDw9IG1heF9pbnNlcnQpIHsKICAgICAgICAgICAgLyoqKiBJTlNFUlRfU1RSSU5HKHMsIHMuc3Ryc3RhcnQsIGhhc2hfaGVhZCk7ICoqKi8KICAgICAgICAgICAgcy5pbnNfaCA9IEhBU0gocywgcy5pbnNfaCwgcy53aW5kb3dbcy5zdHJzdGFydCArIE1JTl9NQVRDSCAtIDFdKTsKICAgICAgICAgICAgaGFzaF9oZWFkID0gcy5wcmV2W3Muc3Ryc3RhcnQgJiBzLndfbWFza10gPSBzLmhlYWRbcy5pbnNfaF07CiAgICAgICAgICAgIHMuaGVhZFtzLmluc19oXSA9IHMuc3Ryc3RhcnQ7CiAgICAgICAgICAgIC8qKiovCiAgICAgICAgICB9CiAgICAgICAgfSB3aGlsZSAoLS1zLnByZXZfbGVuZ3RoICE9PSAwKTsKICAgICAgICBzLm1hdGNoX2F2YWlsYWJsZSA9IDA7CiAgICAgICAgcy5tYXRjaF9sZW5ndGggPSBNSU5fTUFUQ0ggLSAxOwogICAgICAgIHMuc3Ryc3RhcnQrKzsKCiAgICAgICAgaWYgKGJmbHVzaCkgewogICAgICAgICAgLyoqKiBGTFVTSF9CTE9DSyhzLCAwKTsgKioqLwogICAgICAgICAgZmx1c2hfYmxvY2tfb25seShzLCBmYWxzZSk7CiAgICAgICAgICBpZiAocy5zdHJtLmF2YWlsX291dCA9PT0gMCkgewogICAgICAgICAgICByZXR1cm4gQlNfTkVFRF9NT1JFOwogICAgICAgICAgfQogICAgICAgICAgLyoqKi8KICAgICAgICB9CgogICAgICB9IGVsc2UgaWYgKHMubWF0Y2hfYXZhaWxhYmxlKSB7CiAgICAgICAgLyogSWYgdGhlcmUgd2FzIG5vIG1hdGNoIGF0IHRoZSBwcmV2aW91cyBwb3NpdGlvbiwgb3V0cHV0IGEKICAgICAgICAgKiBzaW5nbGUgbGl0ZXJhbC4gSWYgdGhlcmUgd2FzIGEgbWF0Y2ggYnV0IHRoZSBjdXJyZW50IG1hdGNoCiAgICAgICAgICogaXMgbG9uZ2VyLCB0cnVuY2F0ZSB0aGUgcHJldmlvdXMgbWF0Y2ggdG8gYSBzaW5nbGUgbGl0ZXJhbC4KICAgICAgICAgKi8KICAgICAgICAvL1RyYWNldnYoKHN0ZGVyciwiJWMiLCBzLT53aW5kb3dbcy0+c3Ryc3RhcnQtMV0pKTsKICAgICAgICAvKioqIF90cl90YWxseV9saXQocywgcy53aW5kb3dbcy5zdHJzdGFydC0xXSwgYmZsdXNoKTsgKioqLwogICAgICAgIGJmbHVzaCA9IF90cl90YWxseShzLCAwLCBzLndpbmRvd1tzLnN0cnN0YXJ0IC0gMV0pOwoKICAgICAgICBpZiAoYmZsdXNoKSB7CiAgICAgICAgICAvKioqIEZMVVNIX0JMT0NLX09OTFkocywgMCkgKioqLwogICAgICAgICAgZmx1c2hfYmxvY2tfb25seShzLCBmYWxzZSk7CiAgICAgICAgICAvKioqLwogICAgICAgIH0KICAgICAgICBzLnN0cnN0YXJ0Kys7CiAgICAgICAgcy5sb29rYWhlYWQtLTsKICAgICAgICBpZiAocy5zdHJtLmF2YWlsX291dCA9PT0gMCkgewogICAgICAgICAgcmV0dXJuIEJTX05FRURfTU9SRTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLyogVGhlcmUgaXMgbm8gcHJldmlvdXMgbWF0Y2ggdG8gY29tcGFyZSB3aXRoLCB3YWl0IGZvcgogICAgICAgICAqIHRoZSBuZXh0IHN0ZXAgdG8gZGVjaWRlLgogICAgICAgICAqLwogICAgICAgIHMubWF0Y2hfYXZhaWxhYmxlID0gMTsKICAgICAgICBzLnN0cnN0YXJ0Kys7CiAgICAgICAgcy5sb29rYWhlYWQtLTsKICAgICAgfQogICAgfQogICAgLy9Bc3NlcnQgKGZsdXNoICE9IFpfTk9fRkxVU0gsICJubyBmbHVzaD8iKTsKICAgIGlmIChzLm1hdGNoX2F2YWlsYWJsZSkgewogICAgICAvL1RyYWNldnYoKHN0ZGVyciwiJWMiLCBzLT53aW5kb3dbcy0+c3Ryc3RhcnQtMV0pKTsKICAgICAgLyoqKiBfdHJfdGFsbHlfbGl0KHMsIHMud2luZG93W3Muc3Ryc3RhcnQtMV0sIGJmbHVzaCk7ICoqKi8KICAgICAgYmZsdXNoID0gX3RyX3RhbGx5KHMsIDAsIHMud2luZG93W3Muc3Ryc3RhcnQgLSAxXSk7CgogICAgICBzLm1hdGNoX2F2YWlsYWJsZSA9IDA7CiAgICB9CiAgICBzLmluc2VydCA9IHMuc3Ryc3RhcnQgPCBNSU5fTUFUQ0ggLSAxID8gcy5zdHJzdGFydCA6IE1JTl9NQVRDSCAtIDE7CiAgICBpZiAoZmx1c2ggPT09IFpfRklOSVNIJDMpIHsKICAgICAgLyoqKiBGTFVTSF9CTE9DSyhzLCAxKTsgKioqLwogICAgICBmbHVzaF9ibG9ja19vbmx5KHMsIHRydWUpOwogICAgICBpZiAocy5zdHJtLmF2YWlsX291dCA9PT0gMCkgewogICAgICAgIHJldHVybiBCU19GSU5JU0hfU1RBUlRFRDsKICAgICAgfQogICAgICAvKioqLwogICAgICByZXR1cm4gQlNfRklOSVNIX0RPTkU7CiAgICB9CiAgICBpZiAocy5sYXN0X2xpdCkgewogICAgICAvKioqIEZMVVNIX0JMT0NLKHMsIDApOyAqKiovCiAgICAgIGZsdXNoX2Jsb2NrX29ubHkocywgZmFsc2UpOwogICAgICBpZiAocy5zdHJtLmF2YWlsX291dCA9PT0gMCkgewogICAgICAgIHJldHVybiBCU19ORUVEX01PUkU7CiAgICAgIH0KICAgICAgLyoqKi8KICAgIH0KCiAgICByZXR1cm4gQlNfQkxPQ0tfRE9ORTsKICB9OwoKCiAgLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgICogRm9yIFpfUkxFLCBzaW1wbHkgbG9vayBmb3IgcnVucyBvZiBieXRlcywgZ2VuZXJhdGUgbWF0Y2hlcyBvbmx5IG9mIGRpc3RhbmNlCiAgICogb25lLiAgRG8gbm90IG1haW50YWluIGEgaGFzaCB0YWJsZS4gIChJdCB3aWxsIGJlIHJlZ2VuZXJhdGVkIGlmIHRoaXMgcnVuIG9mCiAgICogZGVmbGF0ZSBzd2l0Y2hlcyBhd2F5IGZyb20gWl9STEUuKQogICAqLwogIGNvbnN0IGRlZmxhdGVfcmxlID0gKHMsIGZsdXNoKSA9PiB7CgogICAgbGV0IGJmbHVzaDsgICAgICAgICAgICAvKiBzZXQgaWYgY3VycmVudCBibG9jayBtdXN0IGJlIGZsdXNoZWQgKi8KICAgIGxldCBwcmV2OyAgICAgICAgICAgICAgLyogYnl0ZSBhdCBkaXN0YW5jZSBvbmUgdG8gbWF0Y2ggKi8KICAgIGxldCBzY2FuLCBzdHJlbmQ7ICAgICAgLyogc2NhbiBnb2VzIHVwIHRvIHN0cmVuZCBmb3IgbGVuZ3RoIG9mIHJ1biAqLwoKICAgIGNvbnN0IF93aW4gPSBzLndpbmRvdzsKCiAgICBmb3IgKDs7KSB7CiAgICAgIC8qIE1ha2Ugc3VyZSB0aGF0IHdlIGFsd2F5cyBoYXZlIGVub3VnaCBsb29rYWhlYWQsIGV4Y2VwdAogICAgICAgKiBhdCB0aGUgZW5kIG9mIHRoZSBpbnB1dCBmaWxlLiBXZSBuZWVkIE1BWF9NQVRDSCBieXRlcwogICAgICAgKiBmb3IgdGhlIGxvbmdlc3QgcnVuLCBwbHVzIG9uZSBmb3IgdGhlIHVucm9sbGVkIGxvb3AuCiAgICAgICAqLwogICAgICBpZiAocy5sb29rYWhlYWQgPD0gTUFYX01BVENIKSB7CiAgICAgICAgZmlsbF93aW5kb3cocyk7CiAgICAgICAgaWYgKHMubG9va2FoZWFkIDw9IE1BWF9NQVRDSCAmJiBmbHVzaCA9PT0gWl9OT19GTFVTSCQyKSB7CiAgICAgICAgICByZXR1cm4gQlNfTkVFRF9NT1JFOwogICAgICAgIH0KICAgICAgICBpZiAocy5sb29rYWhlYWQgPT09IDApIHsgYnJlYWs7IH0gLyogZmx1c2ggdGhlIGN1cnJlbnQgYmxvY2sgKi8KICAgICAgfQoKICAgICAgLyogU2VlIGhvdyBtYW55IHRpbWVzIHRoZSBwcmV2aW91cyBieXRlIHJlcGVhdHMgKi8KICAgICAgcy5tYXRjaF9sZW5ndGggPSAwOwogICAgICBpZiAocy5sb29rYWhlYWQgPj0gTUlOX01BVENIICYmIHMuc3Ryc3RhcnQgPiAwKSB7CiAgICAgICAgc2NhbiA9IHMuc3Ryc3RhcnQgLSAxOwogICAgICAgIHByZXYgPSBfd2luW3NjYW5dOwogICAgICAgIGlmIChwcmV2ID09PSBfd2luWysrc2Nhbl0gJiYgcHJldiA9PT0gX3dpblsrK3NjYW5dICYmIHByZXYgPT09IF93aW5bKytzY2FuXSkgewogICAgICAgICAgc3RyZW5kID0gcy5zdHJzdGFydCArIE1BWF9NQVRDSDsKICAgICAgICAgIGRvIHsKICAgICAgICAgICAgLypqc2hpbnQgbm9lbXB0eTpmYWxzZSovCiAgICAgICAgICB9IHdoaWxlIChwcmV2ID09PSBfd2luWysrc2Nhbl0gJiYgcHJldiA9PT0gX3dpblsrK3NjYW5dICYmCiAgICAgICAgICAgICAgICAgICBwcmV2ID09PSBfd2luWysrc2Nhbl0gJiYgcHJldiA9PT0gX3dpblsrK3NjYW5dICYmCiAgICAgICAgICAgICAgICAgICBwcmV2ID09PSBfd2luWysrc2Nhbl0gJiYgcHJldiA9PT0gX3dpblsrK3NjYW5dICYmCiAgICAgICAgICAgICAgICAgICBwcmV2ID09PSBfd2luWysrc2Nhbl0gJiYgcHJldiA9PT0gX3dpblsrK3NjYW5dICYmCiAgICAgICAgICAgICAgICAgICBzY2FuIDwgc3RyZW5kKTsKICAgICAgICAgIHMubWF0Y2hfbGVuZ3RoID0gTUFYX01BVENIIC0gKHN0cmVuZCAtIHNjYW4pOwogICAgICAgICAgaWYgKHMubWF0Y2hfbGVuZ3RoID4gcy5sb29rYWhlYWQpIHsKICAgICAgICAgICAgcy5tYXRjaF9sZW5ndGggPSBzLmxvb2thaGVhZDsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgLy9Bc3NlcnQoc2NhbiA8PSBzLT53aW5kb3crKHVJbnQpKHMtPndpbmRvd19zaXplLTEpLCAid2lsZCBzY2FuIik7CiAgICAgIH0KCiAgICAgIC8qIEVtaXQgbWF0Y2ggaWYgaGF2ZSBydW4gb2YgTUlOX01BVENIIG9yIGxvbmdlciwgZWxzZSBlbWl0IGxpdGVyYWwgKi8KICAgICAgaWYgKHMubWF0Y2hfbGVuZ3RoID49IE1JTl9NQVRDSCkgewogICAgICAgIC8vY2hlY2tfbWF0Y2gocywgcy5zdHJzdGFydCwgcy5zdHJzdGFydCAtIDEsIHMubWF0Y2hfbGVuZ3RoKTsKCiAgICAgICAgLyoqKiBfdHJfdGFsbHlfZGlzdChzLCAxLCBzLm1hdGNoX2xlbmd0aCAtIE1JTl9NQVRDSCwgYmZsdXNoKTsgKioqLwogICAgICAgIGJmbHVzaCA9IF90cl90YWxseShzLCAxLCBzLm1hdGNoX2xlbmd0aCAtIE1JTl9NQVRDSCk7CgogICAgICAgIHMubG9va2FoZWFkIC09IHMubWF0Y2hfbGVuZ3RoOwogICAgICAgIHMuc3Ryc3RhcnQgKz0gcy5tYXRjaF9sZW5ndGg7CiAgICAgICAgcy5tYXRjaF9sZW5ndGggPSAwOwogICAgICB9IGVsc2UgewogICAgICAgIC8qIE5vIG1hdGNoLCBvdXRwdXQgYSBsaXRlcmFsIGJ5dGUgKi8KICAgICAgICAvL1RyYWNldnYoKHN0ZGVyciwiJWMiLCBzLT53aW5kb3dbcy0+c3Ryc3RhcnRdKSk7CiAgICAgICAgLyoqKiBfdHJfdGFsbHlfbGl0KHMsIHMud2luZG93W3Muc3Ryc3RhcnRdLCBiZmx1c2gpOyAqKiovCiAgICAgICAgYmZsdXNoID0gX3RyX3RhbGx5KHMsIDAsIHMud2luZG93W3Muc3Ryc3RhcnRdKTsKCiAgICAgICAgcy5sb29rYWhlYWQtLTsKICAgICAgICBzLnN0cnN0YXJ0Kys7CiAgICAgIH0KICAgICAgaWYgKGJmbHVzaCkgewogICAgICAgIC8qKiogRkxVU0hfQkxPQ0socywgMCk7ICoqKi8KICAgICAgICBmbHVzaF9ibG9ja19vbmx5KHMsIGZhbHNlKTsKICAgICAgICBpZiAocy5zdHJtLmF2YWlsX291dCA9PT0gMCkgewogICAgICAgICAgcmV0dXJuIEJTX05FRURfTU9SRTsKICAgICAgICB9CiAgICAgICAgLyoqKi8KICAgICAgfQogICAgfQogICAgcy5pbnNlcnQgPSAwOwogICAgaWYgKGZsdXNoID09PSBaX0ZJTklTSCQzKSB7CiAgICAgIC8qKiogRkxVU0hfQkxPQ0socywgMSk7ICoqKi8KICAgICAgZmx1c2hfYmxvY2tfb25seShzLCB0cnVlKTsKICAgICAgaWYgKHMuc3RybS5hdmFpbF9vdXQgPT09IDApIHsKICAgICAgICByZXR1cm4gQlNfRklOSVNIX1NUQVJURUQ7CiAgICAgIH0KICAgICAgLyoqKi8KICAgICAgcmV0dXJuIEJTX0ZJTklTSF9ET05FOwogICAgfQogICAgaWYgKHMubGFzdF9saXQpIHsKICAgICAgLyoqKiBGTFVTSF9CTE9DSyhzLCAwKTsgKioqLwogICAgICBmbHVzaF9ibG9ja19vbmx5KHMsIGZhbHNlKTsKICAgICAgaWYgKHMuc3RybS5hdmFpbF9vdXQgPT09IDApIHsKICAgICAgICByZXR1cm4gQlNfTkVFRF9NT1JFOwogICAgICB9CiAgICAgIC8qKiovCiAgICB9CiAgICByZXR1cm4gQlNfQkxPQ0tfRE9ORTsKICB9OwoKICAvKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgKiBGb3IgWl9IVUZGTUFOX09OTFksIGRvIG5vdCBsb29rIGZvciBtYXRjaGVzLiAgRG8gbm90IG1haW50YWluIGEgaGFzaCB0YWJsZS4KICAgKiAoSXQgd2lsbCBiZSByZWdlbmVyYXRlZCBpZiB0aGlzIHJ1biBvZiBkZWZsYXRlIHN3aXRjaGVzIGF3YXkgZnJvbSBIdWZmbWFuLikKICAgKi8KICBjb25zdCBkZWZsYXRlX2h1ZmYgPSAocywgZmx1c2gpID0+IHsKCiAgICBsZXQgYmZsdXNoOyAgICAgICAgICAgICAvKiBzZXQgaWYgY3VycmVudCBibG9jayBtdXN0IGJlIGZsdXNoZWQgKi8KCiAgICBmb3IgKDs7KSB7CiAgICAgIC8qIE1ha2Ugc3VyZSB0aGF0IHdlIGhhdmUgYSBsaXRlcmFsIHRvIHdyaXRlLiAqLwogICAgICBpZiAocy5sb29rYWhlYWQgPT09IDApIHsKICAgICAgICBmaWxsX3dpbmRvdyhzKTsKICAgICAgICBpZiAocy5sb29rYWhlYWQgPT09IDApIHsKICAgICAgICAgIGlmIChmbHVzaCA9PT0gWl9OT19GTFVTSCQyKSB7CiAgICAgICAgICAgIHJldHVybiBCU19ORUVEX01PUkU7CiAgICAgICAgICB9CiAgICAgICAgICBicmVhazsgICAgICAvKiBmbHVzaCB0aGUgY3VycmVudCBibG9jayAqLwogICAgICAgIH0KICAgICAgfQoKICAgICAgLyogT3V0cHV0IGEgbGl0ZXJhbCBieXRlICovCiAgICAgIHMubWF0Y2hfbGVuZ3RoID0gMDsKICAgICAgLy9UcmFjZXZ2KChzdGRlcnIsIiVjIiwgcy0+d2luZG93W3MtPnN0cnN0YXJ0XSkpOwogICAgICAvKioqIF90cl90YWxseV9saXQocywgcy53aW5kb3dbcy5zdHJzdGFydF0sIGJmbHVzaCk7ICoqKi8KICAgICAgYmZsdXNoID0gX3RyX3RhbGx5KHMsIDAsIHMud2luZG93W3Muc3Ryc3RhcnRdKTsKICAgICAgcy5sb29rYWhlYWQtLTsKICAgICAgcy5zdHJzdGFydCsrOwogICAgICBpZiAoYmZsdXNoKSB7CiAgICAgICAgLyoqKiBGTFVTSF9CTE9DSyhzLCAwKTsgKioqLwogICAgICAgIGZsdXNoX2Jsb2NrX29ubHkocywgZmFsc2UpOwogICAgICAgIGlmIChzLnN0cm0uYXZhaWxfb3V0ID09PSAwKSB7CiAgICAgICAgICByZXR1cm4gQlNfTkVFRF9NT1JFOwogICAgICAgIH0KICAgICAgICAvKioqLwogICAgICB9CiAgICB9CiAgICBzLmluc2VydCA9IDA7CiAgICBpZiAoZmx1c2ggPT09IFpfRklOSVNIJDMpIHsKICAgICAgLyoqKiBGTFVTSF9CTE9DSyhzLCAxKTsgKioqLwogICAgICBmbHVzaF9ibG9ja19vbmx5KHMsIHRydWUpOwogICAgICBpZiAocy5zdHJtLmF2YWlsX291dCA9PT0gMCkgewogICAgICAgIHJldHVybiBCU19GSU5JU0hfU1RBUlRFRDsKICAgICAgfQogICAgICAvKioqLwogICAgICByZXR1cm4gQlNfRklOSVNIX0RPTkU7CiAgICB9CiAgICBpZiAocy5sYXN0X2xpdCkgewogICAgICAvKioqIEZMVVNIX0JMT0NLKHMsIDApOyAqKiovCiAgICAgIGZsdXNoX2Jsb2NrX29ubHkocywgZmFsc2UpOwogICAgICBpZiAocy5zdHJtLmF2YWlsX291dCA9PT0gMCkgewogICAgICAgIHJldHVybiBCU19ORUVEX01PUkU7CiAgICAgIH0KICAgICAgLyoqKi8KICAgIH0KICAgIHJldHVybiBCU19CTE9DS19ET05FOwogIH07CgogIC8qIFZhbHVlcyBmb3IgbWF4X2xhenlfbWF0Y2gsIGdvb2RfbWF0Y2ggYW5kIG1heF9jaGFpbl9sZW5ndGgsIGRlcGVuZGluZyBvbgogICAqIHRoZSBkZXNpcmVkIHBhY2sgbGV2ZWwgKDAuLjkpLiBUaGUgdmFsdWVzIGdpdmVuIGJlbG93IGhhdmUgYmVlbiB0dW5lZCB0bwogICAqIGV4Y2x1ZGUgd29yc3QgY2FzZSBwZXJmb3JtYW5jZSBmb3IgcGF0aG9sb2dpY2FsIGZpbGVzLiBCZXR0ZXIgdmFsdWVzIG1heSBiZQogICAqIGZvdW5kIGZvciBzcGVjaWZpYyBmaWxlcy4KICAgKi8KICBmdW5jdGlvbiBDb25maWcoZ29vZF9sZW5ndGgsIG1heF9sYXp5LCBuaWNlX2xlbmd0aCwgbWF4X2NoYWluLCBmdW5jKSB7CgogICAgdGhpcy5nb29kX2xlbmd0aCA9IGdvb2RfbGVuZ3RoOwogICAgdGhpcy5tYXhfbGF6eSA9IG1heF9sYXp5OwogICAgdGhpcy5uaWNlX2xlbmd0aCA9IG5pY2VfbGVuZ3RoOwogICAgdGhpcy5tYXhfY2hhaW4gPSBtYXhfY2hhaW47CiAgICB0aGlzLmZ1bmMgPSBmdW5jOwogIH0KCiAgY29uc3QgY29uZmlndXJhdGlvbl90YWJsZSA9IFsKICAgIC8qICAgICAgZ29vZCBsYXp5IG5pY2UgY2hhaW4gKi8KICAgIG5ldyBDb25maWcoMCwgMCwgMCwgMCwgZGVmbGF0ZV9zdG9yZWQpLCAgICAgICAgICAvKiAwIHN0b3JlIG9ubHkgKi8KICAgIG5ldyBDb25maWcoNCwgNCwgOCwgNCwgZGVmbGF0ZV9mYXN0KSwgICAgICAgICAgICAvKiAxIG1heCBzcGVlZCwgbm8gbGF6eSBtYXRjaGVzICovCiAgICBuZXcgQ29uZmlnKDQsIDUsIDE2LCA4LCBkZWZsYXRlX2Zhc3QpLCAgICAgICAgICAgLyogMiAqLwogICAgbmV3IENvbmZpZyg0LCA2LCAzMiwgMzIsIGRlZmxhdGVfZmFzdCksICAgICAgICAgIC8qIDMgKi8KCiAgICBuZXcgQ29uZmlnKDQsIDQsIDE2LCAxNiwgZGVmbGF0ZV9zbG93KSwgICAgICAgICAgLyogNCBsYXp5IG1hdGNoZXMgKi8KICAgIG5ldyBDb25maWcoOCwgMTYsIDMyLCAzMiwgZGVmbGF0ZV9zbG93KSwgICAgICAgICAvKiA1ICovCiAgICBuZXcgQ29uZmlnKDgsIDE2LCAxMjgsIDEyOCwgZGVmbGF0ZV9zbG93KSwgICAgICAgLyogNiAqLwogICAgbmV3IENvbmZpZyg4LCAzMiwgMTI4LCAyNTYsIGRlZmxhdGVfc2xvdyksICAgICAgIC8qIDcgKi8KICAgIG5ldyBDb25maWcoMzIsIDEyOCwgMjU4LCAxMDI0LCBkZWZsYXRlX3Nsb3cpLCAgICAvKiA4ICovCiAgICBuZXcgQ29uZmlnKDMyLCAyNTgsIDI1OCwgNDA5NiwgZGVmbGF0ZV9zbG93KSAgICAgLyogOSBtYXggY29tcHJlc3Npb24gKi8KICBdOwoKCiAgLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgICogSW5pdGlhbGl6ZSB0aGUgImxvbmdlc3QgbWF0Y2giIHJvdXRpbmVzIGZvciBhIG5ldyB6bGliIHN0cmVhbQogICAqLwogIGNvbnN0IGxtX2luaXQgPSAocykgPT4gewoKICAgIHMud2luZG93X3NpemUgPSAyICogcy53X3NpemU7CgogICAgLyoqKiBDTEVBUl9IQVNIKHMpOyAqKiovCiAgICB6ZXJvKHMuaGVhZCk7IC8vIEZpbGwgd2l0aCBOSUwgKD0gMCk7CgogICAgLyogU2V0IHRoZSBkZWZhdWx0IGNvbmZpZ3VyYXRpb24gcGFyYW1ldGVyczoKICAgICAqLwogICAgcy5tYXhfbGF6eV9tYXRjaCA9IGNvbmZpZ3VyYXRpb25fdGFibGVbcy5sZXZlbF0ubWF4X2xhenk7CiAgICBzLmdvb2RfbWF0Y2ggPSBjb25maWd1cmF0aW9uX3RhYmxlW3MubGV2ZWxdLmdvb2RfbGVuZ3RoOwogICAgcy5uaWNlX21hdGNoID0gY29uZmlndXJhdGlvbl90YWJsZVtzLmxldmVsXS5uaWNlX2xlbmd0aDsKICAgIHMubWF4X2NoYWluX2xlbmd0aCA9IGNvbmZpZ3VyYXRpb25fdGFibGVbcy5sZXZlbF0ubWF4X2NoYWluOwoKICAgIHMuc3Ryc3RhcnQgPSAwOwogICAgcy5ibG9ja19zdGFydCA9IDA7CiAgICBzLmxvb2thaGVhZCA9IDA7CiAgICBzLmluc2VydCA9IDA7CiAgICBzLm1hdGNoX2xlbmd0aCA9IHMucHJldl9sZW5ndGggPSBNSU5fTUFUQ0ggLSAxOwogICAgcy5tYXRjaF9hdmFpbGFibGUgPSAwOwogICAgcy5pbnNfaCA9IDA7CiAgfTsKCgogIGZ1bmN0aW9uIERlZmxhdGVTdGF0ZSgpIHsKICAgIHRoaXMuc3RybSA9IG51bGw7ICAgICAgICAgICAgLyogcG9pbnRlciBiYWNrIHRvIHRoaXMgemxpYiBzdHJlYW0gKi8KICAgIHRoaXMuc3RhdHVzID0gMDsgICAgICAgICAgICAvKiBhcyB0aGUgbmFtZSBpbXBsaWVzICovCiAgICB0aGlzLnBlbmRpbmdfYnVmID0gbnVsbDsgICAgICAvKiBvdXRwdXQgc3RpbGwgcGVuZGluZyAqLwogICAgdGhpcy5wZW5kaW5nX2J1Zl9zaXplID0gMDsgIC8qIHNpemUgb2YgcGVuZGluZ19idWYgKi8KICAgIHRoaXMucGVuZGluZ19vdXQgPSAwOyAgICAgICAvKiBuZXh0IHBlbmRpbmcgYnl0ZSB0byBvdXRwdXQgdG8gdGhlIHN0cmVhbSAqLwogICAgdGhpcy5wZW5kaW5nID0gMDsgICAgICAgICAgIC8qIG5iIG9mIGJ5dGVzIGluIHRoZSBwZW5kaW5nIGJ1ZmZlciAqLwogICAgdGhpcy53cmFwID0gMDsgICAgICAgICAgICAgIC8qIGJpdCAwIHRydWUgZm9yIHpsaWIsIGJpdCAxIHRydWUgZm9yIGd6aXAgKi8KICAgIHRoaXMuZ3poZWFkID0gbnVsbDsgICAgICAgICAvKiBnemlwIGhlYWRlciBpbmZvcm1hdGlvbiB0byB3cml0ZSAqLwogICAgdGhpcy5nemluZGV4ID0gMDsgICAgICAgICAgIC8qIHdoZXJlIGluIGV4dHJhLCBuYW1lLCBvciBjb21tZW50ICovCiAgICB0aGlzLm1ldGhvZCA9IFpfREVGTEFURUQkMjsgLyogY2FuIG9ubHkgYmUgREVGTEFURUQgKi8KICAgIHRoaXMubGFzdF9mbHVzaCA9IC0xOyAgIC8qIHZhbHVlIG9mIGZsdXNoIHBhcmFtIGZvciBwcmV2aW91cyBkZWZsYXRlIGNhbGwgKi8KCiAgICB0aGlzLndfc2l6ZSA9IDA7ICAvKiBMWjc3IHdpbmRvdyBzaXplICgzMksgYnkgZGVmYXVsdCkgKi8KICAgIHRoaXMud19iaXRzID0gMDsgIC8qIGxvZzIod19zaXplKSAgKDguLjE2KSAqLwogICAgdGhpcy53X21hc2sgPSAwOyAgLyogd19zaXplIC0gMSAqLwoKICAgIHRoaXMud2luZG93ID0gbnVsbDsKICAgIC8qIFNsaWRpbmcgd2luZG93LiBJbnB1dCBieXRlcyBhcmUgcmVhZCBpbnRvIHRoZSBzZWNvbmQgaGFsZiBvZiB0aGUgd2luZG93LAogICAgICogYW5kIG1vdmUgdG8gdGhlIGZpcnN0IGhhbGYgbGF0ZXIgdG8ga2VlcCBhIGRpY3Rpb25hcnkgb2YgYXQgbGVhc3Qgd1NpemUKICAgICAqIGJ5dGVzLiBXaXRoIHRoaXMgb3JnYW5pemF0aW9uLCBtYXRjaGVzIGFyZSBsaW1pdGVkIHRvIGEgZGlzdGFuY2Ugb2YKICAgICAqIHdTaXplLU1BWF9NQVRDSCBieXRlcywgYnV0IHRoaXMgZW5zdXJlcyB0aGF0IElPIGlzIGFsd2F5cwogICAgICogcGVyZm9ybWVkIHdpdGggYSBsZW5ndGggbXVsdGlwbGUgb2YgdGhlIGJsb2NrIHNpemUuCiAgICAgKi8KCiAgICB0aGlzLndpbmRvd19zaXplID0gMDsKICAgIC8qIEFjdHVhbCBzaXplIG9mIHdpbmRvdzogMip3U2l6ZSwgZXhjZXB0IHdoZW4gdGhlIHVzZXIgaW5wdXQgYnVmZmVyCiAgICAgKiBpcyBkaXJlY3RseSB1c2VkIGFzIHNsaWRpbmcgd2luZG93LgogICAgICovCgogICAgdGhpcy5wcmV2ID0gbnVsbDsKICAgIC8qIExpbmsgdG8gb2xkZXIgc3RyaW5nIHdpdGggc2FtZSBoYXNoIGluZGV4LiBUbyBsaW1pdCB0aGUgc2l6ZSBvZiB0aGlzCiAgICAgKiBhcnJheSB0byA2NEssIHRoaXMgbGluayBpcyBtYWludGFpbmVkIG9ubHkgZm9yIHRoZSBsYXN0IDMySyBzdHJpbmdzLgogICAgICogQW4gaW5kZXggaW4gdGhpcyBhcnJheSBpcyB0aHVzIGEgd2luZG93IGluZGV4IG1vZHVsbyAzMksuCiAgICAgKi8KCiAgICB0aGlzLmhlYWQgPSBudWxsOyAgIC8qIEhlYWRzIG9mIHRoZSBoYXNoIGNoYWlucyBvciBOSUwuICovCgogICAgdGhpcy5pbnNfaCA9IDA7ICAgICAgIC8qIGhhc2ggaW5kZXggb2Ygc3RyaW5nIHRvIGJlIGluc2VydGVkICovCiAgICB0aGlzLmhhc2hfc2l6ZSA9IDA7ICAgLyogbnVtYmVyIG9mIGVsZW1lbnRzIGluIGhhc2ggdGFibGUgKi8KICAgIHRoaXMuaGFzaF9iaXRzID0gMDsgICAvKiBsb2cyKGhhc2hfc2l6ZSkgKi8KICAgIHRoaXMuaGFzaF9tYXNrID0gMDsgICAvKiBoYXNoX3NpemUtMSAqLwoKICAgIHRoaXMuaGFzaF9zaGlmdCA9IDA7CiAgICAvKiBOdW1iZXIgb2YgYml0cyBieSB3aGljaCBpbnNfaCBtdXN0IGJlIHNoaWZ0ZWQgYXQgZWFjaCBpbnB1dAogICAgICogc3RlcC4gSXQgbXVzdCBiZSBzdWNoIHRoYXQgYWZ0ZXIgTUlOX01BVENIIHN0ZXBzLCB0aGUgb2xkZXN0CiAgICAgKiBieXRlIG5vIGxvbmdlciB0YWtlcyBwYXJ0IGluIHRoZSBoYXNoIGtleSwgdGhhdCBpczoKICAgICAqICAgaGFzaF9zaGlmdCAqIE1JTl9NQVRDSCA+PSBoYXNoX2JpdHMKICAgICAqLwoKICAgIHRoaXMuYmxvY2tfc3RhcnQgPSAwOwogICAgLyogV2luZG93IHBvc2l0aW9uIGF0IHRoZSBiZWdpbm5pbmcgb2YgdGhlIGN1cnJlbnQgb3V0cHV0IGJsb2NrLiBHZXRzCiAgICAgKiBuZWdhdGl2ZSB3aGVuIHRoZSB3aW5kb3cgaXMgbW92ZWQgYmFja3dhcmRzLgogICAgICovCgogICAgdGhpcy5tYXRjaF9sZW5ndGggPSAwOyAgICAgIC8qIGxlbmd0aCBvZiBiZXN0IG1hdGNoICovCiAgICB0aGlzLnByZXZfbWF0Y2ggPSAwOyAgICAgICAgLyogcHJldmlvdXMgbWF0Y2ggKi8KICAgIHRoaXMubWF0Y2hfYXZhaWxhYmxlID0gMDsgICAvKiBzZXQgaWYgcHJldmlvdXMgbWF0Y2ggZXhpc3RzICovCiAgICB0aGlzLnN0cnN0YXJ0ID0gMDsgICAgICAgICAgLyogc3RhcnQgb2Ygc3RyaW5nIHRvIGluc2VydCAqLwogICAgdGhpcy5tYXRjaF9zdGFydCA9IDA7ICAgICAgIC8qIHN0YXJ0IG9mIG1hdGNoaW5nIHN0cmluZyAqLwogICAgdGhpcy5sb29rYWhlYWQgPSAwOyAgICAgICAgIC8qIG51bWJlciBvZiB2YWxpZCBieXRlcyBhaGVhZCBpbiB3aW5kb3cgKi8KCiAgICB0aGlzLnByZXZfbGVuZ3RoID0gMDsKICAgIC8qIExlbmd0aCBvZiB0aGUgYmVzdCBtYXRjaCBhdCBwcmV2aW91cyBzdGVwLiBNYXRjaGVzIG5vdCBncmVhdGVyIHRoYW4gdGhpcwogICAgICogYXJlIGRpc2NhcmRlZC4gVGhpcyBpcyB1c2VkIGluIHRoZSBsYXp5IG1hdGNoIGV2YWx1YXRpb24uCiAgICAgKi8KCiAgICB0aGlzLm1heF9jaGFpbl9sZW5ndGggPSAwOwogICAgLyogVG8gc3BlZWQgdXAgZGVmbGF0aW9uLCBoYXNoIGNoYWlucyBhcmUgbmV2ZXIgc2VhcmNoZWQgYmV5b25kIHRoaXMKICAgICAqIGxlbmd0aC4gIEEgaGlnaGVyIGxpbWl0IGltcHJvdmVzIGNvbXByZXNzaW9uIHJhdGlvIGJ1dCBkZWdyYWRlcyB0aGUKICAgICAqIHNwZWVkLgogICAgICovCgogICAgdGhpcy5tYXhfbGF6eV9tYXRjaCA9IDA7CiAgICAvKiBBdHRlbXB0IHRvIGZpbmQgYSBiZXR0ZXIgbWF0Y2ggb25seSB3aGVuIHRoZSBjdXJyZW50IG1hdGNoIGlzIHN0cmljdGx5CiAgICAgKiBzbWFsbGVyIHRoYW4gdGhpcyB2YWx1ZS4gVGhpcyBtZWNoYW5pc20gaXMgdXNlZCBvbmx5IGZvciBjb21wcmVzc2lvbgogICAgICogbGV2ZWxzID49IDQuCiAgICAgKi8KICAgIC8vIFRoYXQncyBhbGlhcyB0byBtYXhfbGF6eV9tYXRjaCwgZG9uJ3QgdXNlIGRpcmVjdGx5CiAgICAvL3RoaXMubWF4X2luc2VydF9sZW5ndGggPSAwOwogICAgLyogSW5zZXJ0IG5ldyBzdHJpbmdzIGluIHRoZSBoYXNoIHRhYmxlIG9ubHkgaWYgdGhlIG1hdGNoIGxlbmd0aCBpcyBub3QKICAgICAqIGdyZWF0ZXIgdGhhbiB0aGlzIGxlbmd0aC4gVGhpcyBzYXZlcyB0aW1lIGJ1dCBkZWdyYWRlcyBjb21wcmVzc2lvbi4KICAgICAqIG1heF9pbnNlcnRfbGVuZ3RoIGlzIHVzZWQgb25seSBmb3IgY29tcHJlc3Npb24gbGV2ZWxzIDw9IDMuCiAgICAgKi8KCiAgICB0aGlzLmxldmVsID0gMDsgICAgIC8qIGNvbXByZXNzaW9uIGxldmVsICgxLi45KSAqLwogICAgdGhpcy5zdHJhdGVneSA9IDA7ICAvKiBmYXZvciBvciBmb3JjZSBIdWZmbWFuIGNvZGluZyovCgogICAgdGhpcy5nb29kX21hdGNoID0gMDsKICAgIC8qIFVzZSBhIGZhc3RlciBzZWFyY2ggd2hlbiB0aGUgcHJldmlvdXMgbWF0Y2ggaXMgbG9uZ2VyIHRoYW4gdGhpcyAqLwoKICAgIHRoaXMubmljZV9tYXRjaCA9IDA7IC8qIFN0b3Agc2VhcmNoaW5nIHdoZW4gY3VycmVudCBtYXRjaCBleGNlZWRzIHRoaXMgKi8KCiAgICAgICAgICAgICAgICAvKiB1c2VkIGJ5IHRyZWVzLmM6ICovCgogICAgLyogRGlkbid0IHVzZSBjdF9kYXRhIHR5cGVkZWYgYmVsb3cgdG8gc3VwcHJlc3MgY29tcGlsZXIgd2FybmluZyAqLwoKICAgIC8vIHN0cnVjdCBjdF9kYXRhX3MgZHluX2x0cmVlW0hFQVBfU0laRV07ICAgLyogbGl0ZXJhbCBhbmQgbGVuZ3RoIHRyZWUgKi8KICAgIC8vIHN0cnVjdCBjdF9kYXRhX3MgZHluX2R0cmVlWzIqRF9DT0RFUysxXTsgLyogZGlzdGFuY2UgdHJlZSAqLwogICAgLy8gc3RydWN0IGN0X2RhdGFfcyBibF90cmVlWzIqQkxfQ09ERVMrMV07ICAvKiBIdWZmbWFuIHRyZWUgZm9yIGJpdCBsZW5ndGhzICovCgogICAgLy8gVXNlIGZsYXQgYXJyYXkgb2YgRE9VQkxFIHNpemUsIHdpdGggaW50ZXJsZWF2ZWQgZmF0YSwKICAgIC8vIGJlY2F1c2UgSlMgZG9lcyBub3Qgc3VwcG9ydCBlZmZlY3RpdmUKICAgIHRoaXMuZHluX2x0cmVlICA9IG5ldyBVaW50MTZBcnJheShIRUFQX1NJWkUgKiAyKTsKICAgIHRoaXMuZHluX2R0cmVlICA9IG5ldyBVaW50MTZBcnJheSgoMiAqIERfQ09ERVMgKyAxKSAqIDIpOwogICAgdGhpcy5ibF90cmVlICAgID0gbmV3IFVpbnQxNkFycmF5KCgyICogQkxfQ09ERVMgKyAxKSAqIDIpOwogICAgemVybyh0aGlzLmR5bl9sdHJlZSk7CiAgICB6ZXJvKHRoaXMuZHluX2R0cmVlKTsKICAgIHplcm8odGhpcy5ibF90cmVlKTsKCiAgICB0aGlzLmxfZGVzYyAgID0gbnVsbDsgICAgICAgICAvKiBkZXNjLiBmb3IgbGl0ZXJhbCB0cmVlICovCiAgICB0aGlzLmRfZGVzYyAgID0gbnVsbDsgICAgICAgICAvKiBkZXNjLiBmb3IgZGlzdGFuY2UgdHJlZSAqLwogICAgdGhpcy5ibF9kZXNjICA9IG51bGw7ICAgICAgICAgLyogZGVzYy4gZm9yIGJpdCBsZW5ndGggdHJlZSAqLwoKICAgIC8vdXNoIGJsX2NvdW50W01BWF9CSVRTKzFdOwogICAgdGhpcy5ibF9jb3VudCA9IG5ldyBVaW50MTZBcnJheShNQVhfQklUUyArIDEpOwogICAgLyogbnVtYmVyIG9mIGNvZGVzIGF0IGVhY2ggYml0IGxlbmd0aCBmb3IgYW4gb3B0aW1hbCB0cmVlICovCgogICAgLy9pbnQgaGVhcFsyKkxfQ09ERVMrMV07ICAgICAgLyogaGVhcCB1c2VkIHRvIGJ1aWxkIHRoZSBIdWZmbWFuIHRyZWVzICovCiAgICB0aGlzLmhlYXAgPSBuZXcgVWludDE2QXJyYXkoMiAqIExfQ09ERVMgKyAxKTsgIC8qIGhlYXAgdXNlZCB0byBidWlsZCB0aGUgSHVmZm1hbiB0cmVlcyAqLwogICAgemVybyh0aGlzLmhlYXApOwoKICAgIHRoaXMuaGVhcF9sZW4gPSAwOyAgICAgICAgICAgICAgIC8qIG51bWJlciBvZiBlbGVtZW50cyBpbiB0aGUgaGVhcCAqLwogICAgdGhpcy5oZWFwX21heCA9IDA7ICAgICAgICAgICAgICAgLyogZWxlbWVudCBvZiBsYXJnZXN0IGZyZXF1ZW5jeSAqLwogICAgLyogVGhlIHNvbnMgb2YgaGVhcFtuXSBhcmUgaGVhcFsyKm5dIGFuZCBoZWFwWzIqbisxXS4gaGVhcFswXSBpcyBub3QgdXNlZC4KICAgICAqIFRoZSBzYW1lIGhlYXAgYXJyYXkgaXMgdXNlZCB0byBidWlsZCBhbGwgdHJlZXMuCiAgICAgKi8KCiAgICB0aGlzLmRlcHRoID0gbmV3IFVpbnQxNkFycmF5KDIgKiBMX0NPREVTICsgMSk7IC8vdWNoIGRlcHRoWzIqTF9DT0RFUysxXTsKICAgIHplcm8odGhpcy5kZXB0aCk7CiAgICAvKiBEZXB0aCBvZiBlYWNoIHN1YnRyZWUgdXNlZCBhcyB0aWUgYnJlYWtlciBmb3IgdHJlZXMgb2YgZXF1YWwgZnJlcXVlbmN5CiAgICAgKi8KCiAgICB0aGlzLmxfYnVmID0gMDsgICAgICAgICAgLyogYnVmZmVyIGluZGV4IGZvciBsaXRlcmFscyBvciBsZW5ndGhzICovCgogICAgdGhpcy5saXRfYnVmc2l6ZSA9IDA7CiAgICAvKiBTaXplIG9mIG1hdGNoIGJ1ZmZlciBmb3IgbGl0ZXJhbHMvbGVuZ3Rocy4gIFRoZXJlIGFyZSA0IHJlYXNvbnMgZm9yCiAgICAgKiBsaW1pdGluZyBsaXRfYnVmc2l6ZSB0byA2NEs6CiAgICAgKiAgIC0gZnJlcXVlbmNpZXMgY2FuIGJlIGtlcHQgaW4gMTYgYml0IGNvdW50ZXJzCiAgICAgKiAgIC0gaWYgY29tcHJlc3Npb24gaXMgbm90IHN1Y2Nlc3NmdWwgZm9yIHRoZSBmaXJzdCBibG9jaywgYWxsIGlucHV0CiAgICAgKiAgICAgZGF0YSBpcyBzdGlsbCBpbiB0aGUgd2luZG93IHNvIHdlIGNhbiBzdGlsbCBlbWl0IGEgc3RvcmVkIGJsb2NrIGV2ZW4KICAgICAqICAgICB3aGVuIGlucHV0IGNvbWVzIGZyb20gc3RhbmRhcmQgaW5wdXQuICAoVGhpcyBjYW4gYWxzbyBiZSBkb25lIGZvcgogICAgICogICAgIGFsbCBibG9ja3MgaWYgbGl0X2J1ZnNpemUgaXMgbm90IGdyZWF0ZXIgdGhhbiAzMksuKQogICAgICogICAtIGlmIGNvbXByZXNzaW9uIGlzIG5vdCBzdWNjZXNzZnVsIGZvciBhIGZpbGUgc21hbGxlciB0aGFuIDY0Sywgd2UgY2FuCiAgICAgKiAgICAgZXZlbiBlbWl0IGEgc3RvcmVkIGZpbGUgaW5zdGVhZCBvZiBhIHN0b3JlZCBibG9jayAoc2F2aW5nIDUgYnl0ZXMpLgogICAgICogICAgIFRoaXMgaXMgYXBwbGljYWJsZSBvbmx5IGZvciB6aXAgKG5vdCBnemlwIG9yIHpsaWIpLgogICAgICogICAtIGNyZWF0aW5nIG5ldyBIdWZmbWFuIHRyZWVzIGxlc3MgZnJlcXVlbnRseSBtYXkgbm90IHByb3ZpZGUgZmFzdAogICAgICogICAgIGFkYXB0YXRpb24gdG8gY2hhbmdlcyBpbiB0aGUgaW5wdXQgZGF0YSBzdGF0aXN0aWNzLiAoVGFrZSBmb3IKICAgICAqICAgICBleGFtcGxlIGEgYmluYXJ5IGZpbGUgd2l0aCBwb29ybHkgY29tcHJlc3NpYmxlIGNvZGUgZm9sbG93ZWQgYnkKICAgICAqICAgICBhIGhpZ2hseSBjb21wcmVzc2libGUgc3RyaW5nIHRhYmxlLikgU21hbGxlciBidWZmZXIgc2l6ZXMgZ2l2ZQogICAgICogICAgIGZhc3QgYWRhcHRhdGlvbiBidXQgaGF2ZSBvZiBjb3Vyc2UgdGhlIG92ZXJoZWFkIG9mIHRyYW5zbWl0dGluZwogICAgICogICAgIHRyZWVzIG1vcmUgZnJlcXVlbnRseS4KICAgICAqICAgLSBJIGNhbid0IGNvdW50IGFib3ZlIDQKICAgICAqLwoKICAgIHRoaXMubGFzdF9saXQgPSAwOyAgICAgIC8qIHJ1bm5pbmcgaW5kZXggaW4gbF9idWYgKi8KCiAgICB0aGlzLmRfYnVmID0gMDsKICAgIC8qIEJ1ZmZlciBpbmRleCBmb3IgZGlzdGFuY2VzLiBUbyBzaW1wbGlmeSB0aGUgY29kZSwgZF9idWYgYW5kIGxfYnVmIGhhdmUKICAgICAqIHRoZSBzYW1lIG51bWJlciBvZiBlbGVtZW50cy4gVG8gdXNlIGRpZmZlcmVudCBsZW5ndGhzLCBhbiBleHRyYSBmbGFnCiAgICAgKiBhcnJheSB3b3VsZCBiZSBuZWNlc3NhcnkuCiAgICAgKi8KCiAgICB0aGlzLm9wdF9sZW4gPSAwOyAgICAgICAvKiBiaXQgbGVuZ3RoIG9mIGN1cnJlbnQgYmxvY2sgd2l0aCBvcHRpbWFsIHRyZWVzICovCiAgICB0aGlzLnN0YXRpY19sZW4gPSAwOyAgICAvKiBiaXQgbGVuZ3RoIG9mIGN1cnJlbnQgYmxvY2sgd2l0aCBzdGF0aWMgdHJlZXMgKi8KICAgIHRoaXMubWF0Y2hlcyA9IDA7ICAgICAgIC8qIG51bWJlciBvZiBzdHJpbmcgbWF0Y2hlcyBpbiBjdXJyZW50IGJsb2NrICovCiAgICB0aGlzLmluc2VydCA9IDA7ICAgICAgICAvKiBieXRlcyBhdCBlbmQgb2Ygd2luZG93IGxlZnQgdG8gaW5zZXJ0ICovCgoKICAgIHRoaXMuYmlfYnVmID0gMDsKICAgIC8qIE91dHB1dCBidWZmZXIuIGJpdHMgYXJlIGluc2VydGVkIHN0YXJ0aW5nIGF0IHRoZSBib3R0b20gKGxlYXN0CiAgICAgKiBzaWduaWZpY2FudCBiaXRzKS4KICAgICAqLwogICAgdGhpcy5iaV92YWxpZCA9IDA7CiAgICAvKiBOdW1iZXIgb2YgdmFsaWQgYml0cyBpbiBiaV9idWYuICBBbGwgYml0cyBhYm92ZSB0aGUgbGFzdCB2YWxpZCBiaXQKICAgICAqIGFyZSBhbHdheXMgemVyby4KICAgICAqLwoKICAgIC8vIFVzZWQgZm9yIHdpbmRvdyBtZW1vcnkgaW5pdC4gV2Ugc2FmZWx5IGlnbm9yZSBpdCBmb3IgSlMuIFRoYXQgbWFrZXMKICAgIC8vIHNlbnNlIG9ubHkgZm9yIHBvaW50ZXJzIGFuZCBtZW1vcnkgY2hlY2sgdG9vbHMuCiAgICAvL3RoaXMuaGlnaF93YXRlciA9IDA7CiAgICAvKiBIaWdoIHdhdGVyIG1hcmsgb2Zmc2V0IGluIHdpbmRvdyBmb3IgaW5pdGlhbGl6ZWQgYnl0ZXMgLS0gYnl0ZXMgYWJvdmUKICAgICAqIHRoaXMgYXJlIHNldCB0byB6ZXJvIGluIG9yZGVyIHRvIGF2b2lkIG1lbW9yeSBjaGVjayB3YXJuaW5ncyB3aGVuCiAgICAgKiBsb25nZXN0IG1hdGNoIHJvdXRpbmVzIGFjY2VzcyBieXRlcyBwYXN0IHRoZSBpbnB1dC4gIFRoaXMgaXMgdGhlbgogICAgICogdXBkYXRlZCB0byB0aGUgbmV3IGhpZ2ggd2F0ZXIgbWFyay4KICAgICAqLwogIH0KCgogIGNvbnN0IGRlZmxhdGVSZXNldEtlZXAgPSAoc3RybSkgPT4gewoKICAgIGlmICghc3RybSB8fCAhc3RybS5zdGF0ZSkgewogICAgICByZXR1cm4gZXJyKHN0cm0sIFpfU1RSRUFNX0VSUk9SJDIpOwogICAgfQoKICAgIHN0cm0udG90YWxfaW4gPSBzdHJtLnRvdGFsX291dCA9IDA7CiAgICBzdHJtLmRhdGFfdHlwZSA9IFpfVU5LTk9XTjsKCiAgICBjb25zdCBzID0gc3RybS5zdGF0ZTsKICAgIHMucGVuZGluZyA9IDA7CiAgICBzLnBlbmRpbmdfb3V0ID0gMDsKCiAgICBpZiAocy53cmFwIDwgMCkgewogICAgICBzLndyYXAgPSAtcy53cmFwOwogICAgICAvKiB3YXMgbWFkZSBuZWdhdGl2ZSBieSBkZWZsYXRlKC4uLiwgWl9GSU5JU0gpOyAqLwogICAgfQogICAgcy5zdGF0dXMgPSAocy53cmFwID8gSU5JVF9TVEFURSA6IEJVU1lfU1RBVEUpOwogICAgc3RybS5hZGxlciA9IChzLndyYXAgPT09IDIpID8KICAgICAgMCAgLy8gY3JjMzIoMCwgWl9OVUxMLCAwKQogICAgOgogICAgICAxOyAvLyBhZGxlcjMyKDAsIFpfTlVMTCwgMCkKICAgIHMubGFzdF9mbHVzaCA9IFpfTk9fRkxVU0gkMjsKICAgIF90cl9pbml0KHMpOwogICAgcmV0dXJuIFpfT0skMzsKICB9OwoKCiAgY29uc3QgZGVmbGF0ZVJlc2V0ID0gKHN0cm0pID0+IHsKCiAgICBjb25zdCByZXQgPSBkZWZsYXRlUmVzZXRLZWVwKHN0cm0pOwogICAgaWYgKHJldCA9PT0gWl9PSyQzKSB7CiAgICAgIGxtX2luaXQoc3RybS5zdGF0ZSk7CiAgICB9CiAgICByZXR1cm4gcmV0OwogIH07CgoKICBjb25zdCBkZWZsYXRlU2V0SGVhZGVyID0gKHN0cm0sIGhlYWQpID0+IHsKCiAgICBpZiAoIXN0cm0gfHwgIXN0cm0uc3RhdGUpIHsgcmV0dXJuIFpfU1RSRUFNX0VSUk9SJDI7IH0KICAgIGlmIChzdHJtLnN0YXRlLndyYXAgIT09IDIpIHsgcmV0dXJuIFpfU1RSRUFNX0VSUk9SJDI7IH0KICAgIHN0cm0uc3RhdGUuZ3poZWFkID0gaGVhZDsKICAgIHJldHVybiBaX09LJDM7CiAgfTsKCgogIGNvbnN0IGRlZmxhdGVJbml0MiA9IChzdHJtLCBsZXZlbCwgbWV0aG9kLCB3aW5kb3dCaXRzLCBtZW1MZXZlbCwgc3RyYXRlZ3kpID0+IHsKCiAgICBpZiAoIXN0cm0pIHsgLy8gPT09IFpfTlVMTAogICAgICByZXR1cm4gWl9TVFJFQU1fRVJST1IkMjsKICAgIH0KICAgIGxldCB3cmFwID0gMTsKCiAgICBpZiAobGV2ZWwgPT09IFpfREVGQVVMVF9DT01QUkVTU0lPTiQxKSB7CiAgICAgIGxldmVsID0gNjsKICAgIH0KCiAgICBpZiAod2luZG93Qml0cyA8IDApIHsgLyogc3VwcHJlc3MgemxpYiB3cmFwcGVyICovCiAgICAgIHdyYXAgPSAwOwogICAgICB3aW5kb3dCaXRzID0gLXdpbmRvd0JpdHM7CiAgICB9CgogICAgZWxzZSBpZiAod2luZG93Qml0cyA+IDE1KSB7CiAgICAgIHdyYXAgPSAyOyAgICAgICAgICAgLyogd3JpdGUgZ3ppcCB3cmFwcGVyIGluc3RlYWQgKi8KICAgICAgd2luZG93Qml0cyAtPSAxNjsKICAgIH0KCgogICAgaWYgKG1lbUxldmVsIDwgMSB8fCBtZW1MZXZlbCA+IE1BWF9NRU1fTEVWRUwgfHwgbWV0aG9kICE9PSBaX0RFRkxBVEVEJDIgfHwKICAgICAgd2luZG93Qml0cyA8IDggfHwgd2luZG93Qml0cyA+IDE1IHx8IGxldmVsIDwgMCB8fCBsZXZlbCA+IDkgfHwKICAgICAgc3RyYXRlZ3kgPCAwIHx8IHN0cmF0ZWd5ID4gWl9GSVhFRCkgewogICAgICByZXR1cm4gZXJyKHN0cm0sIFpfU1RSRUFNX0VSUk9SJDIpOwogICAgfQoKCiAgICBpZiAod2luZG93Qml0cyA9PT0gOCkgewogICAgICB3aW5kb3dCaXRzID0gOTsKICAgIH0KICAgIC8qIHVudGlsIDI1Ni1ieXRlIHdpbmRvdyBidWcgZml4ZWQgKi8KCiAgICBjb25zdCBzID0gbmV3IERlZmxhdGVTdGF0ZSgpOwoKICAgIHN0cm0uc3RhdGUgPSBzOwogICAgcy5zdHJtID0gc3RybTsKCiAgICBzLndyYXAgPSB3cmFwOwogICAgcy5nemhlYWQgPSBudWxsOwogICAgcy53X2JpdHMgPSB3aW5kb3dCaXRzOwogICAgcy53X3NpemUgPSAxIDw8IHMud19iaXRzOwogICAgcy53X21hc2sgPSBzLndfc2l6ZSAtIDE7CgogICAgcy5oYXNoX2JpdHMgPSBtZW1MZXZlbCArIDc7CiAgICBzLmhhc2hfc2l6ZSA9IDEgPDwgcy5oYXNoX2JpdHM7CiAgICBzLmhhc2hfbWFzayA9IHMuaGFzaF9zaXplIC0gMTsKICAgIHMuaGFzaF9zaGlmdCA9IH5+KChzLmhhc2hfYml0cyArIE1JTl9NQVRDSCAtIDEpIC8gTUlOX01BVENIKTsKCiAgICBzLndpbmRvdyA9IG5ldyBVaW50OEFycmF5KHMud19zaXplICogMik7CiAgICBzLmhlYWQgPSBuZXcgVWludDE2QXJyYXkocy5oYXNoX3NpemUpOwogICAgcy5wcmV2ID0gbmV3IFVpbnQxNkFycmF5KHMud19zaXplKTsKCiAgICAvLyBEb24ndCBuZWVkIG1lbSBpbml0IG1hZ2ljIGZvciBKUy4KICAgIC8vcy5oaWdoX3dhdGVyID0gMDsgIC8qIG5vdGhpbmcgd3JpdHRlbiB0byBzLT53aW5kb3cgeWV0ICovCgogICAgcy5saXRfYnVmc2l6ZSA9IDEgPDwgKG1lbUxldmVsICsgNik7IC8qIDE2SyBlbGVtZW50cyBieSBkZWZhdWx0ICovCgogICAgcy5wZW5kaW5nX2J1Zl9zaXplID0gcy5saXRfYnVmc2l6ZSAqIDQ7CgogICAgLy9vdmVybGF5ID0gKHVzaGYgKikgWkFMTE9DKHN0cm0sIHMtPmxpdF9idWZzaXplLCBzaXplb2YodXNoKSsyKTsKICAgIC8vcy0+cGVuZGluZ19idWYgPSAodWNoZiAqKSBvdmVybGF5OwogICAgcy5wZW5kaW5nX2J1ZiA9IG5ldyBVaW50OEFycmF5KHMucGVuZGluZ19idWZfc2l6ZSk7CgogICAgLy8gSXQgaXMgb2Zmc2V0IGZyb20gYHMucGVuZGluZ19idWZgIChzaXplIGlzIGBzLmxpdF9idWZzaXplICogMmApCiAgICAvL3MtPmRfYnVmID0gb3ZlcmxheSArIHMtPmxpdF9idWZzaXplL3NpemVvZih1c2gpOwogICAgcy5kX2J1ZiA9IDEgKiBzLmxpdF9idWZzaXplOwoKICAgIC8vcy0+bF9idWYgPSBzLT5wZW5kaW5nX2J1ZiArICgxK3NpemVvZih1c2gpKSpzLT5saXRfYnVmc2l6ZTsKICAgIHMubF9idWYgPSAoMSArIDIpICogcy5saXRfYnVmc2l6ZTsKCiAgICBzLmxldmVsID0gbGV2ZWw7CiAgICBzLnN0cmF0ZWd5ID0gc3RyYXRlZ3k7CiAgICBzLm1ldGhvZCA9IG1ldGhvZDsKCiAgICByZXR1cm4gZGVmbGF0ZVJlc2V0KHN0cm0pOwogIH07CgogIGNvbnN0IGRlZmxhdGVJbml0ID0gKHN0cm0sIGxldmVsKSA9PiB7CgogICAgcmV0dXJuIGRlZmxhdGVJbml0MihzdHJtLCBsZXZlbCwgWl9ERUZMQVRFRCQyLCBNQVhfV0JJVFMkMSwgREVGX01FTV9MRVZFTCwgWl9ERUZBVUxUX1NUUkFURUdZJDEpOwogIH07CgoKICBjb25zdCBkZWZsYXRlJDIgPSAoc3RybSwgZmx1c2gpID0+IHsKCiAgICBsZXQgYmVnLCB2YWw7IC8vIGZvciBnemlwIGhlYWRlciB3cml0ZSBvbmx5CgogICAgaWYgKCFzdHJtIHx8ICFzdHJtLnN0YXRlIHx8CiAgICAgIGZsdXNoID4gWl9CTE9DSyQxIHx8IGZsdXNoIDwgMCkgewogICAgICByZXR1cm4gc3RybSA/IGVycihzdHJtLCBaX1NUUkVBTV9FUlJPUiQyKSA6IFpfU1RSRUFNX0VSUk9SJDI7CiAgICB9CgogICAgY29uc3QgcyA9IHN0cm0uc3RhdGU7CgogICAgaWYgKCFzdHJtLm91dHB1dCB8fAogICAgICAgICghc3RybS5pbnB1dCAmJiBzdHJtLmF2YWlsX2luICE9PSAwKSB8fAogICAgICAgIChzLnN0YXR1cyA9PT0gRklOSVNIX1NUQVRFICYmIGZsdXNoICE9PSBaX0ZJTklTSCQzKSkgewogICAgICByZXR1cm4gZXJyKHN0cm0sIChzdHJtLmF2YWlsX291dCA9PT0gMCkgPyBaX0JVRl9FUlJPUiQxIDogWl9TVFJFQU1fRVJST1IkMik7CiAgICB9CgogICAgcy5zdHJtID0gc3RybTsgLyoganVzdCBpbiBjYXNlICovCiAgICBjb25zdCBvbGRfZmx1c2ggPSBzLmxhc3RfZmx1c2g7CiAgICBzLmxhc3RfZmx1c2ggPSBmbHVzaDsKCiAgICAvKiBXcml0ZSB0aGUgaGVhZGVyICovCiAgICBpZiAocy5zdGF0dXMgPT09IElOSVRfU1RBVEUpIHsKCiAgICAgIGlmIChzLndyYXAgPT09IDIpIHsgLy8gR1pJUCBoZWFkZXIKICAgICAgICBzdHJtLmFkbGVyID0gMDsgIC8vY3JjMzIoMEwsIFpfTlVMTCwgMCk7CiAgICAgICAgcHV0X2J5dGUocywgMzEpOwogICAgICAgIHB1dF9ieXRlKHMsIDEzOSk7CiAgICAgICAgcHV0X2J5dGUocywgOCk7CiAgICAgICAgaWYgKCFzLmd6aGVhZCkgeyAvLyBzLT5nemhlYWQgPT0gWl9OVUxMCiAgICAgICAgICBwdXRfYnl0ZShzLCAwKTsKICAgICAgICAgIHB1dF9ieXRlKHMsIDApOwogICAgICAgICAgcHV0X2J5dGUocywgMCk7CiAgICAgICAgICBwdXRfYnl0ZShzLCAwKTsKICAgICAgICAgIHB1dF9ieXRlKHMsIDApOwogICAgICAgICAgcHV0X2J5dGUocywgcy5sZXZlbCA9PT0gOSA/IDIgOgogICAgICAgICAgICAgICAgICAgICAgKHMuc3RyYXRlZ3kgPj0gWl9IVUZGTUFOX09OTFkgfHwgcy5sZXZlbCA8IDIgPwogICAgICAgICAgICAgICAgICAgICAgIDQgOiAwKSk7CiAgICAgICAgICBwdXRfYnl0ZShzLCBPU19DT0RFKTsKICAgICAgICAgIHMuc3RhdHVzID0gQlVTWV9TVEFURTsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICBwdXRfYnl0ZShzLCAocy5nemhlYWQudGV4dCA/IDEgOiAwKSArCiAgICAgICAgICAgICAgICAgICAgICAocy5nemhlYWQuaGNyYyA/IDIgOiAwKSArCiAgICAgICAgICAgICAgICAgICAgICAoIXMuZ3poZWFkLmV4dHJhID8gMCA6IDQpICsKICAgICAgICAgICAgICAgICAgICAgICghcy5nemhlYWQubmFtZSA/IDAgOiA4KSArCiAgICAgICAgICAgICAgICAgICAgICAoIXMuZ3poZWFkLmNvbW1lbnQgPyAwIDogMTYpCiAgICAgICAgICApOwogICAgICAgICAgcHV0X2J5dGUocywgcy5nemhlYWQudGltZSAmIDB4ZmYpOwogICAgICAgICAgcHV0X2J5dGUocywgKHMuZ3poZWFkLnRpbWUgPj4gOCkgJiAweGZmKTsKICAgICAgICAgIHB1dF9ieXRlKHMsIChzLmd6aGVhZC50aW1lID4+IDE2KSAmIDB4ZmYpOwogICAgICAgICAgcHV0X2J5dGUocywgKHMuZ3poZWFkLnRpbWUgPj4gMjQpICYgMHhmZik7CiAgICAgICAgICBwdXRfYnl0ZShzLCBzLmxldmVsID09PSA5ID8gMiA6CiAgICAgICAgICAgICAgICAgICAgICAocy5zdHJhdGVneSA+PSBaX0hVRkZNQU5fT05MWSB8fCBzLmxldmVsIDwgMiA/CiAgICAgICAgICAgICAgICAgICAgICAgNCA6IDApKTsKICAgICAgICAgIHB1dF9ieXRlKHMsIHMuZ3poZWFkLm9zICYgMHhmZik7CiAgICAgICAgICBpZiAocy5nemhlYWQuZXh0cmEgJiYgcy5nemhlYWQuZXh0cmEubGVuZ3RoKSB7CiAgICAgICAgICAgIHB1dF9ieXRlKHMsIHMuZ3poZWFkLmV4dHJhLmxlbmd0aCAmIDB4ZmYpOwogICAgICAgICAgICBwdXRfYnl0ZShzLCAocy5nemhlYWQuZXh0cmEubGVuZ3RoID4+IDgpICYgMHhmZik7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAocy5nemhlYWQuaGNyYykgewogICAgICAgICAgICBzdHJtLmFkbGVyID0gY3JjMzJfMShzdHJtLmFkbGVyLCBzLnBlbmRpbmdfYnVmLCBzLnBlbmRpbmcsIDApOwogICAgICAgICAgfQogICAgICAgICAgcy5nemluZGV4ID0gMDsKICAgICAgICAgIHMuc3RhdHVzID0gRVhUUkFfU1RBVEU7CiAgICAgICAgfQogICAgICB9CiAgICAgIGVsc2UgLy8gREVGTEFURSBoZWFkZXIKICAgICAgewogICAgICAgIGxldCBoZWFkZXIgPSAoWl9ERUZMQVRFRCQyICsgKChzLndfYml0cyAtIDgpIDw8IDQpKSA8PCA4OwogICAgICAgIGxldCBsZXZlbF9mbGFncyA9IC0xOwoKICAgICAgICBpZiAocy5zdHJhdGVneSA+PSBaX0hVRkZNQU5fT05MWSB8fCBzLmxldmVsIDwgMikgewogICAgICAgICAgbGV2ZWxfZmxhZ3MgPSAwOwogICAgICAgIH0gZWxzZSBpZiAocy5sZXZlbCA8IDYpIHsKICAgICAgICAgIGxldmVsX2ZsYWdzID0gMTsKICAgICAgICB9IGVsc2UgaWYgKHMubGV2ZWwgPT09IDYpIHsKICAgICAgICAgIGxldmVsX2ZsYWdzID0gMjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgbGV2ZWxfZmxhZ3MgPSAzOwogICAgICAgIH0KICAgICAgICBoZWFkZXIgfD0gKGxldmVsX2ZsYWdzIDw8IDYpOwogICAgICAgIGlmIChzLnN0cnN0YXJ0ICE9PSAwKSB7IGhlYWRlciB8PSBQUkVTRVRfRElDVDsgfQogICAgICAgIGhlYWRlciArPSAzMSAtIChoZWFkZXIgJSAzMSk7CgogICAgICAgIHMuc3RhdHVzID0gQlVTWV9TVEFURTsKICAgICAgICBwdXRTaG9ydE1TQihzLCBoZWFkZXIpOwoKICAgICAgICAvKiBTYXZlIHRoZSBhZGxlcjMyIG9mIHRoZSBwcmVzZXQgZGljdGlvbmFyeTogKi8KICAgICAgICBpZiAocy5zdHJzdGFydCAhPT0gMCkgewogICAgICAgICAgcHV0U2hvcnRNU0Iocywgc3RybS5hZGxlciA+Pj4gMTYpOwogICAgICAgICAgcHV0U2hvcnRNU0Iocywgc3RybS5hZGxlciAmIDB4ZmZmZik7CiAgICAgICAgfQogICAgICAgIHN0cm0uYWRsZXIgPSAxOyAvLyBhZGxlcjMyKDBMLCBaX05VTEwsIDApOwogICAgICB9CiAgICB9CgogIC8vI2lmZGVmIEdaSVAKICAgIGlmIChzLnN0YXR1cyA9PT0gRVhUUkFfU1RBVEUpIHsKICAgICAgaWYgKHMuZ3poZWFkLmV4dHJhLyogIT0gWl9OVUxMKi8pIHsKICAgICAgICBiZWcgPSBzLnBlbmRpbmc7ICAvKiBzdGFydCBvZiBieXRlcyB0byB1cGRhdGUgY3JjICovCgogICAgICAgIHdoaWxlIChzLmd6aW5kZXggPCAocy5nemhlYWQuZXh0cmEubGVuZ3RoICYgMHhmZmZmKSkgewogICAgICAgICAgaWYgKHMucGVuZGluZyA9PT0gcy5wZW5kaW5nX2J1Zl9zaXplKSB7CiAgICAgICAgICAgIGlmIChzLmd6aGVhZC5oY3JjICYmIHMucGVuZGluZyA+IGJlZykgewogICAgICAgICAgICAgIHN0cm0uYWRsZXIgPSBjcmMzMl8xKHN0cm0uYWRsZXIsIHMucGVuZGluZ19idWYsIHMucGVuZGluZyAtIGJlZywgYmVnKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBmbHVzaF9wZW5kaW5nKHN0cm0pOwogICAgICAgICAgICBiZWcgPSBzLnBlbmRpbmc7CiAgICAgICAgICAgIGlmIChzLnBlbmRpbmcgPT09IHMucGVuZGluZ19idWZfc2l6ZSkgewogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBwdXRfYnl0ZShzLCBzLmd6aGVhZC5leHRyYVtzLmd6aW5kZXhdICYgMHhmZik7CiAgICAgICAgICBzLmd6aW5kZXgrKzsKICAgICAgICB9CiAgICAgICAgaWYgKHMuZ3poZWFkLmhjcmMgJiYgcy5wZW5kaW5nID4gYmVnKSB7CiAgICAgICAgICBzdHJtLmFkbGVyID0gY3JjMzJfMShzdHJtLmFkbGVyLCBzLnBlbmRpbmdfYnVmLCBzLnBlbmRpbmcgLSBiZWcsIGJlZyk7CiAgICAgICAgfQogICAgICAgIGlmIChzLmd6aW5kZXggPT09IHMuZ3poZWFkLmV4dHJhLmxlbmd0aCkgewogICAgICAgICAgcy5nemluZGV4ID0gMDsKICAgICAgICAgIHMuc3RhdHVzID0gTkFNRV9TVEFURTsKICAgICAgICB9CiAgICAgIH0KICAgICAgZWxzZSB7CiAgICAgICAgcy5zdGF0dXMgPSBOQU1FX1NUQVRFOwogICAgICB9CiAgICB9CiAgICBpZiAocy5zdGF0dXMgPT09IE5BTUVfU1RBVEUpIHsKICAgICAgaWYgKHMuZ3poZWFkLm5hbWUvKiAhPSBaX05VTEwqLykgewogICAgICAgIGJlZyA9IHMucGVuZGluZzsgIC8qIHN0YXJ0IG9mIGJ5dGVzIHRvIHVwZGF0ZSBjcmMgKi8KICAgICAgICAvL2ludCB2YWw7CgogICAgICAgIGRvIHsKICAgICAgICAgIGlmIChzLnBlbmRpbmcgPT09IHMucGVuZGluZ19idWZfc2l6ZSkgewogICAgICAgICAgICBpZiAocy5nemhlYWQuaGNyYyAmJiBzLnBlbmRpbmcgPiBiZWcpIHsKICAgICAgICAgICAgICBzdHJtLmFkbGVyID0gY3JjMzJfMShzdHJtLmFkbGVyLCBzLnBlbmRpbmdfYnVmLCBzLnBlbmRpbmcgLSBiZWcsIGJlZyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZmx1c2hfcGVuZGluZyhzdHJtKTsKICAgICAgICAgICAgYmVnID0gcy5wZW5kaW5nOwogICAgICAgICAgICBpZiAocy5wZW5kaW5nID09PSBzLnBlbmRpbmdfYnVmX3NpemUpIHsKICAgICAgICAgICAgICB2YWwgPSAxOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICAvLyBKUyBzcGVjaWZpYzogbGl0dGxlIG1hZ2ljIHRvIGFkZCB6ZXJvIHRlcm1pbmF0b3IgdG8gZW5kIG9mIHN0cmluZwogICAgICAgICAgaWYgKHMuZ3ppbmRleCA8IHMuZ3poZWFkLm5hbWUubGVuZ3RoKSB7CiAgICAgICAgICAgIHZhbCA9IHMuZ3poZWFkLm5hbWUuY2hhckNvZGVBdChzLmd6aW5kZXgrKykgJiAweGZmOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdmFsID0gMDsKICAgICAgICAgIH0KICAgICAgICAgIHB1dF9ieXRlKHMsIHZhbCk7CiAgICAgICAgfSB3aGlsZSAodmFsICE9PSAwKTsKCiAgICAgICAgaWYgKHMuZ3poZWFkLmhjcmMgJiYgcy5wZW5kaW5nID4gYmVnKSB7CiAgICAgICAgICBzdHJtLmFkbGVyID0gY3JjMzJfMShzdHJtLmFkbGVyLCBzLnBlbmRpbmdfYnVmLCBzLnBlbmRpbmcgLSBiZWcsIGJlZyk7CiAgICAgICAgfQogICAgICAgIGlmICh2YWwgPT09IDApIHsKICAgICAgICAgIHMuZ3ppbmRleCA9IDA7CiAgICAgICAgICBzLnN0YXR1cyA9IENPTU1FTlRfU1RBVEU7CiAgICAgICAgfQogICAgICB9CiAgICAgIGVsc2UgewogICAgICAgIHMuc3RhdHVzID0gQ09NTUVOVF9TVEFURTsKICAgICAgfQogICAgfQogICAgaWYgKHMuc3RhdHVzID09PSBDT01NRU5UX1NUQVRFKSB7CiAgICAgIGlmIChzLmd6aGVhZC5jb21tZW50LyogIT0gWl9OVUxMKi8pIHsKICAgICAgICBiZWcgPSBzLnBlbmRpbmc7ICAvKiBzdGFydCBvZiBieXRlcyB0byB1cGRhdGUgY3JjICovCiAgICAgICAgLy9pbnQgdmFsOwoKICAgICAgICBkbyB7CiAgICAgICAgICBpZiAocy5wZW5kaW5nID09PSBzLnBlbmRpbmdfYnVmX3NpemUpIHsKICAgICAgICAgICAgaWYgKHMuZ3poZWFkLmhjcmMgJiYgcy5wZW5kaW5nID4gYmVnKSB7CiAgICAgICAgICAgICAgc3RybS5hZGxlciA9IGNyYzMyXzEoc3RybS5hZGxlciwgcy5wZW5kaW5nX2J1Ziwgcy5wZW5kaW5nIC0gYmVnLCBiZWcpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZsdXNoX3BlbmRpbmcoc3RybSk7CiAgICAgICAgICAgIGJlZyA9IHMucGVuZGluZzsKICAgICAgICAgICAgaWYgKHMucGVuZGluZyA9PT0gcy5wZW5kaW5nX2J1Zl9zaXplKSB7CiAgICAgICAgICAgICAgdmFsID0gMTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgLy8gSlMgc3BlY2lmaWM6IGxpdHRsZSBtYWdpYyB0byBhZGQgemVybyB0ZXJtaW5hdG9yIHRvIGVuZCBvZiBzdHJpbmcKICAgICAgICAgIGlmIChzLmd6aW5kZXggPCBzLmd6aGVhZC5jb21tZW50Lmxlbmd0aCkgewogICAgICAgICAgICB2YWwgPSBzLmd6aGVhZC5jb21tZW50LmNoYXJDb2RlQXQocy5nemluZGV4KyspICYgMHhmZjsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHZhbCA9IDA7CiAgICAgICAgICB9CiAgICAgICAgICBwdXRfYnl0ZShzLCB2YWwpOwogICAgICAgIH0gd2hpbGUgKHZhbCAhPT0gMCk7CgogICAgICAgIGlmIChzLmd6aGVhZC5oY3JjICYmIHMucGVuZGluZyA+IGJlZykgewogICAgICAgICAgc3RybS5hZGxlciA9IGNyYzMyXzEoc3RybS5hZGxlciwgcy5wZW5kaW5nX2J1Ziwgcy5wZW5kaW5nIC0gYmVnLCBiZWcpOwogICAgICAgIH0KICAgICAgICBpZiAodmFsID09PSAwKSB7CiAgICAgICAgICBzLnN0YXR1cyA9IEhDUkNfU1RBVEU7CiAgICAgICAgfQogICAgICB9CiAgICAgIGVsc2UgewogICAgICAgIHMuc3RhdHVzID0gSENSQ19TVEFURTsKICAgICAgfQogICAgfQogICAgaWYgKHMuc3RhdHVzID09PSBIQ1JDX1NUQVRFKSB7CiAgICAgIGlmIChzLmd6aGVhZC5oY3JjKSB7CiAgICAgICAgaWYgKHMucGVuZGluZyArIDIgPiBzLnBlbmRpbmdfYnVmX3NpemUpIHsKICAgICAgICAgIGZsdXNoX3BlbmRpbmcoc3RybSk7CiAgICAgICAgfQogICAgICAgIGlmIChzLnBlbmRpbmcgKyAyIDw9IHMucGVuZGluZ19idWZfc2l6ZSkgewogICAgICAgICAgcHV0X2J5dGUocywgc3RybS5hZGxlciAmIDB4ZmYpOwogICAgICAgICAgcHV0X2J5dGUocywgKHN0cm0uYWRsZXIgPj4gOCkgJiAweGZmKTsKICAgICAgICAgIHN0cm0uYWRsZXIgPSAwOyAvL2NyYzMyKDBMLCBaX05VTEwsIDApOwogICAgICAgICAgcy5zdGF0dXMgPSBCVVNZX1NUQVRFOwogICAgICAgIH0KICAgICAgfQogICAgICBlbHNlIHsKICAgICAgICBzLnN0YXR1cyA9IEJVU1lfU1RBVEU7CiAgICAgIH0KICAgIH0KICAvLyNlbmRpZgoKICAgIC8qIEZsdXNoIGFzIG11Y2ggcGVuZGluZyBvdXRwdXQgYXMgcG9zc2libGUgKi8KICAgIGlmIChzLnBlbmRpbmcgIT09IDApIHsKICAgICAgZmx1c2hfcGVuZGluZyhzdHJtKTsKICAgICAgaWYgKHN0cm0uYXZhaWxfb3V0ID09PSAwKSB7CiAgICAgICAgLyogU2luY2UgYXZhaWxfb3V0IGlzIDAsIGRlZmxhdGUgd2lsbCBiZSBjYWxsZWQgYWdhaW4gd2l0aAogICAgICAgICAqIG1vcmUgb3V0cHV0IHNwYWNlLCBidXQgcG9zc2libHkgd2l0aCBib3RoIHBlbmRpbmcgYW5kCiAgICAgICAgICogYXZhaWxfaW4gZXF1YWwgdG8gemVyby4gVGhlcmUgd29uJ3QgYmUgYW55dGhpbmcgdG8gZG8sCiAgICAgICAgICogYnV0IHRoaXMgaXMgbm90IGFuIGVycm9yIHNpdHVhdGlvbiBzbyBtYWtlIHN1cmUgd2UKICAgICAgICAgKiByZXR1cm4gT0sgaW5zdGVhZCBvZiBCVUZfRVJST1IgYXQgbmV4dCBjYWxsIG9mIGRlZmxhdGU6CiAgICAgICAgICovCiAgICAgICAgcy5sYXN0X2ZsdXNoID0gLTE7CiAgICAgICAgcmV0dXJuIFpfT0skMzsKICAgICAgfQoKICAgICAgLyogTWFrZSBzdXJlIHRoZXJlIGlzIHNvbWV0aGluZyB0byBkbyBhbmQgYXZvaWQgZHVwbGljYXRlIGNvbnNlY3V0aXZlCiAgICAgICAqIGZsdXNoZXMuIEZvciByZXBlYXRlZCBhbmQgdXNlbGVzcyBjYWxscyB3aXRoIFpfRklOSVNILCB3ZSBrZWVwCiAgICAgICAqIHJldHVybmluZyBaX1NUUkVBTV9FTkQgaW5zdGVhZCBvZiBaX0JVRl9FUlJPUi4KICAgICAgICovCiAgICB9IGVsc2UgaWYgKHN0cm0uYXZhaWxfaW4gPT09IDAgJiYgcmFuayhmbHVzaCkgPD0gcmFuayhvbGRfZmx1c2gpICYmCiAgICAgIGZsdXNoICE9PSBaX0ZJTklTSCQzKSB7CiAgICAgIHJldHVybiBlcnIoc3RybSwgWl9CVUZfRVJST1IkMSk7CiAgICB9CgogICAgLyogVXNlciBtdXN0IG5vdCBwcm92aWRlIG1vcmUgaW5wdXQgYWZ0ZXIgdGhlIGZpcnN0IEZJTklTSDogKi8KICAgIGlmIChzLnN0YXR1cyA9PT0gRklOSVNIX1NUQVRFICYmIHN0cm0uYXZhaWxfaW4gIT09IDApIHsKICAgICAgcmV0dXJuIGVycihzdHJtLCBaX0JVRl9FUlJPUiQxKTsKICAgIH0KCiAgICAvKiBTdGFydCBhIG5ldyBibG9jayBvciBjb250aW51ZSB0aGUgY3VycmVudCBvbmUuCiAgICAgKi8KICAgIGlmIChzdHJtLmF2YWlsX2luICE9PSAwIHx8IHMubG9va2FoZWFkICE9PSAwIHx8CiAgICAgIChmbHVzaCAhPT0gWl9OT19GTFVTSCQyICYmIHMuc3RhdHVzICE9PSBGSU5JU0hfU1RBVEUpKSB7CiAgICAgIGxldCBic3RhdGUgPSAocy5zdHJhdGVneSA9PT0gWl9IVUZGTUFOX09OTFkpID8gZGVmbGF0ZV9odWZmKHMsIGZsdXNoKSA6CiAgICAgICAgKHMuc3RyYXRlZ3kgPT09IFpfUkxFID8gZGVmbGF0ZV9ybGUocywgZmx1c2gpIDoKICAgICAgICAgIGNvbmZpZ3VyYXRpb25fdGFibGVbcy5sZXZlbF0uZnVuYyhzLCBmbHVzaCkpOwoKICAgICAgaWYgKGJzdGF0ZSA9PT0gQlNfRklOSVNIX1NUQVJURUQgfHwgYnN0YXRlID09PSBCU19GSU5JU0hfRE9ORSkgewogICAgICAgIHMuc3RhdHVzID0gRklOSVNIX1NUQVRFOwogICAgICB9CiAgICAgIGlmIChic3RhdGUgPT09IEJTX05FRURfTU9SRSB8fCBic3RhdGUgPT09IEJTX0ZJTklTSF9TVEFSVEVEKSB7CiAgICAgICAgaWYgKHN0cm0uYXZhaWxfb3V0ID09PSAwKSB7CiAgICAgICAgICBzLmxhc3RfZmx1c2ggPSAtMTsKICAgICAgICAgIC8qIGF2b2lkIEJVRl9FUlJPUiBuZXh0IGNhbGwsIHNlZSBhYm92ZSAqLwogICAgICAgIH0KICAgICAgICByZXR1cm4gWl9PSyQzOwogICAgICAgIC8qIElmIGZsdXNoICE9IFpfTk9fRkxVU0ggJiYgYXZhaWxfb3V0ID09IDAsIHRoZSBuZXh0IGNhbGwKICAgICAgICAgKiBvZiBkZWZsYXRlIHNob3VsZCB1c2UgdGhlIHNhbWUgZmx1c2ggcGFyYW1ldGVyIHRvIG1ha2Ugc3VyZQogICAgICAgICAqIHRoYXQgdGhlIGZsdXNoIGlzIGNvbXBsZXRlLiBTbyB3ZSBkb24ndCBoYXZlIHRvIG91dHB1dCBhbgogICAgICAgICAqIGVtcHR5IGJsb2NrIGhlcmUsIHRoaXMgd2lsbCBiZSBkb25lIGF0IG5leHQgY2FsbC4gVGhpcyBhbHNvCiAgICAgICAgICogZW5zdXJlcyB0aGF0IGZvciBhIHZlcnkgc21hbGwgb3V0cHV0IGJ1ZmZlciwgd2UgZW1pdCBhdCBtb3N0CiAgICAgICAgICogb25lIGVtcHR5IGJsb2NrLgogICAgICAgICAqLwogICAgICB9CiAgICAgIGlmIChic3RhdGUgPT09IEJTX0JMT0NLX0RPTkUpIHsKICAgICAgICBpZiAoZmx1c2ggPT09IFpfUEFSVElBTF9GTFVTSCkgewogICAgICAgICAgX3RyX2FsaWduKHMpOwogICAgICAgIH0KICAgICAgICBlbHNlIGlmIChmbHVzaCAhPT0gWl9CTE9DSyQxKSB7IC8qIEZVTExfRkxVU0ggb3IgU1lOQ19GTFVTSCAqLwoKICAgICAgICAgIF90cl9zdG9yZWRfYmxvY2socywgMCwgMCwgZmFsc2UpOwogICAgICAgICAgLyogRm9yIGEgZnVsbCBmbHVzaCwgdGhpcyBlbXB0eSBibG9jayB3aWxsIGJlIHJlY29nbml6ZWQKICAgICAgICAgICAqIGFzIGEgc3BlY2lhbCBtYXJrZXIgYnkgaW5mbGF0ZV9zeW5jKCkuCiAgICAgICAgICAgKi8KICAgICAgICAgIGlmIChmbHVzaCA9PT0gWl9GVUxMX0ZMVVNIJDEpIHsKICAgICAgICAgICAgLyoqKiBDTEVBUl9IQVNIKHMpOyAqKiovICAgICAgICAgICAgIC8qIGZvcmdldCBoaXN0b3J5ICovCiAgICAgICAgICAgIHplcm8ocy5oZWFkKTsgLy8gRmlsbCB3aXRoIE5JTCAoPSAwKTsKCiAgICAgICAgICAgIGlmIChzLmxvb2thaGVhZCA9PT0gMCkgewogICAgICAgICAgICAgIHMuc3Ryc3RhcnQgPSAwOwogICAgICAgICAgICAgIHMuYmxvY2tfc3RhcnQgPSAwOwogICAgICAgICAgICAgIHMuaW5zZXJ0ID0gMDsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBmbHVzaF9wZW5kaW5nKHN0cm0pOwogICAgICAgIGlmIChzdHJtLmF2YWlsX291dCA9PT0gMCkgewogICAgICAgICAgcy5sYXN0X2ZsdXNoID0gLTE7IC8qIGF2b2lkIEJVRl9FUlJPUiBhdCBuZXh0IGNhbGwsIHNlZSBhYm92ZSAqLwogICAgICAgICAgcmV0dXJuIFpfT0skMzsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIC8vQXNzZXJ0KHN0cm0tPmF2YWlsX291dCA+IDAsICJidWcyIik7CiAgICAvL2lmIChzdHJtLmF2YWlsX291dCA8PSAwKSB7IHRocm93IG5ldyBFcnJvcigiYnVnMiIpO30KCiAgICBpZiAoZmx1c2ggIT09IFpfRklOSVNIJDMpIHsgcmV0dXJuIFpfT0skMzsgfQogICAgaWYgKHMud3JhcCA8PSAwKSB7IHJldHVybiBaX1NUUkVBTV9FTkQkMzsgfQoKICAgIC8qIFdyaXRlIHRoZSB0cmFpbGVyICovCiAgICBpZiAocy53cmFwID09PSAyKSB7CiAgICAgIHB1dF9ieXRlKHMsIHN0cm0uYWRsZXIgJiAweGZmKTsKICAgICAgcHV0X2J5dGUocywgKHN0cm0uYWRsZXIgPj4gOCkgJiAweGZmKTsKICAgICAgcHV0X2J5dGUocywgKHN0cm0uYWRsZXIgPj4gMTYpICYgMHhmZik7CiAgICAgIHB1dF9ieXRlKHMsIChzdHJtLmFkbGVyID4+IDI0KSAmIDB4ZmYpOwogICAgICBwdXRfYnl0ZShzLCBzdHJtLnRvdGFsX2luICYgMHhmZik7CiAgICAgIHB1dF9ieXRlKHMsIChzdHJtLnRvdGFsX2luID4+IDgpICYgMHhmZik7CiAgICAgIHB1dF9ieXRlKHMsIChzdHJtLnRvdGFsX2luID4+IDE2KSAmIDB4ZmYpOwogICAgICBwdXRfYnl0ZShzLCAoc3RybS50b3RhbF9pbiA+PiAyNCkgJiAweGZmKTsKICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgcHV0U2hvcnRNU0Iocywgc3RybS5hZGxlciA+Pj4gMTYpOwogICAgICBwdXRTaG9ydE1TQihzLCBzdHJtLmFkbGVyICYgMHhmZmZmKTsKICAgIH0KCiAgICBmbHVzaF9wZW5kaW5nKHN0cm0pOwogICAgLyogSWYgYXZhaWxfb3V0IGlzIHplcm8sIHRoZSBhcHBsaWNhdGlvbiB3aWxsIGNhbGwgZGVmbGF0ZSBhZ2FpbgogICAgICogdG8gZmx1c2ggdGhlIHJlc3QuCiAgICAgKi8KICAgIGlmIChzLndyYXAgPiAwKSB7IHMud3JhcCA9IC1zLndyYXA7IH0KICAgIC8qIHdyaXRlIHRoZSB0cmFpbGVyIG9ubHkgb25jZSEgKi8KICAgIHJldHVybiBzLnBlbmRpbmcgIT09IDAgPyBaX09LJDMgOiBaX1NUUkVBTV9FTkQkMzsKICB9OwoKCiAgY29uc3QgZGVmbGF0ZUVuZCA9IChzdHJtKSA9PiB7CgogICAgaWYgKCFzdHJtLyo9PSBaX05VTEwqLyB8fCAhc3RybS5zdGF0ZS8qPT0gWl9OVUxMKi8pIHsKICAgICAgcmV0dXJuIFpfU1RSRUFNX0VSUk9SJDI7CiAgICB9CgogICAgY29uc3Qgc3RhdHVzID0gc3RybS5zdGF0ZS5zdGF0dXM7CiAgICBpZiAoc3RhdHVzICE9PSBJTklUX1NUQVRFICYmCiAgICAgIHN0YXR1cyAhPT0gRVhUUkFfU1RBVEUgJiYKICAgICAgc3RhdHVzICE9PSBOQU1FX1NUQVRFICYmCiAgICAgIHN0YXR1cyAhPT0gQ09NTUVOVF9TVEFURSAmJgogICAgICBzdGF0dXMgIT09IEhDUkNfU1RBVEUgJiYKICAgICAgc3RhdHVzICE9PSBCVVNZX1NUQVRFICYmCiAgICAgIHN0YXR1cyAhPT0gRklOSVNIX1NUQVRFCiAgICApIHsKICAgICAgcmV0dXJuIGVycihzdHJtLCBaX1NUUkVBTV9FUlJPUiQyKTsKICAgIH0KCiAgICBzdHJtLnN0YXRlID0gbnVsbDsKCiAgICByZXR1cm4gc3RhdHVzID09PSBCVVNZX1NUQVRFID8gZXJyKHN0cm0sIFpfREFUQV9FUlJPUiQyKSA6IFpfT0skMzsKICB9OwoKCiAgLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAqIEluaXRpYWxpemVzIHRoZSBjb21wcmVzc2lvbiBkaWN0aW9uYXJ5IGZyb20gdGhlIGdpdmVuIGJ5dGUKICAgKiBzZXF1ZW5jZSB3aXRob3V0IHByb2R1Y2luZyBhbnkgY29tcHJlc3NlZCBvdXRwdXQuCiAgICovCiAgY29uc3QgZGVmbGF0ZVNldERpY3Rpb25hcnkgPSAoc3RybSwgZGljdGlvbmFyeSkgPT4gewoKICAgIGxldCBkaWN0TGVuZ3RoID0gZGljdGlvbmFyeS5sZW5ndGg7CgogICAgaWYgKCFzdHJtLyo9PSBaX05VTEwqLyB8fCAhc3RybS5zdGF0ZS8qPT0gWl9OVUxMKi8pIHsKICAgICAgcmV0dXJuIFpfU1RSRUFNX0VSUk9SJDI7CiAgICB9CgogICAgY29uc3QgcyA9IHN0cm0uc3RhdGU7CiAgICBjb25zdCB3cmFwID0gcy53cmFwOwoKICAgIGlmICh3cmFwID09PSAyIHx8ICh3cmFwID09PSAxICYmIHMuc3RhdHVzICE9PSBJTklUX1NUQVRFKSB8fCBzLmxvb2thaGVhZCkgewogICAgICByZXR1cm4gWl9TVFJFQU1fRVJST1IkMjsKICAgIH0KCiAgICAvKiB3aGVuIHVzaW5nIHpsaWIgd3JhcHBlcnMsIGNvbXB1dGUgQWRsZXItMzIgZm9yIHByb3ZpZGVkIGRpY3Rpb25hcnkgKi8KICAgIGlmICh3cmFwID09PSAxKSB7CiAgICAgIC8qIGFkbGVyMzIoc3RybS0+YWRsZXIsIGRpY3Rpb25hcnksIGRpY3RMZW5ndGgpOyAqLwogICAgICBzdHJtLmFkbGVyID0gYWRsZXIzMl8xKHN0cm0uYWRsZXIsIGRpY3Rpb25hcnksIGRpY3RMZW5ndGgsIDApOwogICAgfQoKICAgIHMud3JhcCA9IDA7ICAgLyogYXZvaWQgY29tcHV0aW5nIEFkbGVyLTMyIGluIHJlYWRfYnVmICovCgogICAgLyogaWYgZGljdGlvbmFyeSB3b3VsZCBmaWxsIHdpbmRvdywganVzdCByZXBsYWNlIHRoZSBoaXN0b3J5ICovCiAgICBpZiAoZGljdExlbmd0aCA+PSBzLndfc2l6ZSkgewogICAgICBpZiAod3JhcCA9PT0gMCkgeyAgICAgICAgICAgIC8qIGFscmVhZHkgZW1wdHkgb3RoZXJ3aXNlICovCiAgICAgICAgLyoqKiBDTEVBUl9IQVNIKHMpOyAqKiovCiAgICAgICAgemVybyhzLmhlYWQpOyAvLyBGaWxsIHdpdGggTklMICg9IDApOwogICAgICAgIHMuc3Ryc3RhcnQgPSAwOwogICAgICAgIHMuYmxvY2tfc3RhcnQgPSAwOwogICAgICAgIHMuaW5zZXJ0ID0gMDsKICAgICAgfQogICAgICAvKiB1c2UgdGhlIHRhaWwgKi8KICAgICAgLy8gZGljdGlvbmFyeSA9IGRpY3Rpb25hcnkuc2xpY2UoZGljdExlbmd0aCAtIHMud19zaXplKTsKICAgICAgbGV0IHRtcERpY3QgPSBuZXcgVWludDhBcnJheShzLndfc2l6ZSk7CiAgICAgIHRtcERpY3Quc2V0KGRpY3Rpb25hcnkuc3ViYXJyYXkoZGljdExlbmd0aCAtIHMud19zaXplLCBkaWN0TGVuZ3RoKSwgMCk7CiAgICAgIGRpY3Rpb25hcnkgPSB0bXBEaWN0OwogICAgICBkaWN0TGVuZ3RoID0gcy53X3NpemU7CiAgICB9CiAgICAvKiBpbnNlcnQgZGljdGlvbmFyeSBpbnRvIHdpbmRvdyBhbmQgaGFzaCAqLwogICAgY29uc3QgYXZhaWwgPSBzdHJtLmF2YWlsX2luOwogICAgY29uc3QgbmV4dCA9IHN0cm0ubmV4dF9pbjsKICAgIGNvbnN0IGlucHV0ID0gc3RybS5pbnB1dDsKICAgIHN0cm0uYXZhaWxfaW4gPSBkaWN0TGVuZ3RoOwogICAgc3RybS5uZXh0X2luID0gMDsKICAgIHN0cm0uaW5wdXQgPSBkaWN0aW9uYXJ5OwogICAgZmlsbF93aW5kb3cocyk7CiAgICB3aGlsZSAocy5sb29rYWhlYWQgPj0gTUlOX01BVENIKSB7CiAgICAgIGxldCBzdHIgPSBzLnN0cnN0YXJ0OwogICAgICBsZXQgbiA9IHMubG9va2FoZWFkIC0gKE1JTl9NQVRDSCAtIDEpOwogICAgICBkbyB7CiAgICAgICAgLyogVVBEQVRFX0hBU0gocywgcy0+aW5zX2gsIHMtPndpbmRvd1tzdHIgKyBNSU5fTUFUQ0gtMV0pOyAqLwogICAgICAgIHMuaW5zX2ggPSBIQVNIKHMsIHMuaW5zX2gsIHMud2luZG93W3N0ciArIE1JTl9NQVRDSCAtIDFdKTsKCiAgICAgICAgcy5wcmV2W3N0ciAmIHMud19tYXNrXSA9IHMuaGVhZFtzLmluc19oXTsKCiAgICAgICAgcy5oZWFkW3MuaW5zX2hdID0gc3RyOwogICAgICAgIHN0cisrOwogICAgICB9IHdoaWxlICgtLW4pOwogICAgICBzLnN0cnN0YXJ0ID0gc3RyOwogICAgICBzLmxvb2thaGVhZCA9IE1JTl9NQVRDSCAtIDE7CiAgICAgIGZpbGxfd2luZG93KHMpOwogICAgfQogICAgcy5zdHJzdGFydCArPSBzLmxvb2thaGVhZDsKICAgIHMuYmxvY2tfc3RhcnQgPSBzLnN0cnN0YXJ0OwogICAgcy5pbnNlcnQgPSBzLmxvb2thaGVhZDsKICAgIHMubG9va2FoZWFkID0gMDsKICAgIHMubWF0Y2hfbGVuZ3RoID0gcy5wcmV2X2xlbmd0aCA9IE1JTl9NQVRDSCAtIDE7CiAgICBzLm1hdGNoX2F2YWlsYWJsZSA9IDA7CiAgICBzdHJtLm5leHRfaW4gPSBuZXh0OwogICAgc3RybS5pbnB1dCA9IGlucHV0OwogICAgc3RybS5hdmFpbF9pbiA9IGF2YWlsOwogICAgcy53cmFwID0gd3JhcDsKICAgIHJldHVybiBaX09LJDM7CiAgfTsKCgogIHZhciBkZWZsYXRlSW5pdF8xID0gZGVmbGF0ZUluaXQ7CiAgdmFyIGRlZmxhdGVJbml0Ml8xID0gZGVmbGF0ZUluaXQyOwogIHZhciBkZWZsYXRlUmVzZXRfMSA9IGRlZmxhdGVSZXNldDsKICB2YXIgZGVmbGF0ZVJlc2V0S2VlcF8xID0gZGVmbGF0ZVJlc2V0S2VlcDsKICB2YXIgZGVmbGF0ZVNldEhlYWRlcl8xID0gZGVmbGF0ZVNldEhlYWRlcjsKICB2YXIgZGVmbGF0ZV8yJDEgPSBkZWZsYXRlJDI7CiAgdmFyIGRlZmxhdGVFbmRfMSA9IGRlZmxhdGVFbmQ7CiAgdmFyIGRlZmxhdGVTZXREaWN0aW9uYXJ5XzEgPSBkZWZsYXRlU2V0RGljdGlvbmFyeTsKICB2YXIgZGVmbGF0ZUluZm8gPSAncGFrbyBkZWZsYXRlIChmcm9tIE5vZGVjYSBwcm9qZWN0KSc7CgogIC8qIE5vdCBpbXBsZW1lbnRlZAogIG1vZHVsZS5leHBvcnRzLmRlZmxhdGVCb3VuZCA9IGRlZmxhdGVCb3VuZDsKICBtb2R1bGUuZXhwb3J0cy5kZWZsYXRlQ29weSA9IGRlZmxhdGVDb3B5OwogIG1vZHVsZS5leHBvcnRzLmRlZmxhdGVQYXJhbXMgPSBkZWZsYXRlUGFyYW1zOwogIG1vZHVsZS5leHBvcnRzLmRlZmxhdGVQZW5kaW5nID0gZGVmbGF0ZVBlbmRpbmc7CiAgbW9kdWxlLmV4cG9ydHMuZGVmbGF0ZVByaW1lID0gZGVmbGF0ZVByaW1lOwogIG1vZHVsZS5leHBvcnRzLmRlZmxhdGVUdW5lID0gZGVmbGF0ZVR1bmU7CiAgKi8KCiAgdmFyIGRlZmxhdGVfMSQyID0gewogIAlkZWZsYXRlSW5pdDogZGVmbGF0ZUluaXRfMSwKICAJZGVmbGF0ZUluaXQyOiBkZWZsYXRlSW5pdDJfMSwKICAJZGVmbGF0ZVJlc2V0OiBkZWZsYXRlUmVzZXRfMSwKICAJZGVmbGF0ZVJlc2V0S2VlcDogZGVmbGF0ZVJlc2V0S2VlcF8xLAogIAlkZWZsYXRlU2V0SGVhZGVyOiBkZWZsYXRlU2V0SGVhZGVyXzEsCiAgCWRlZmxhdGU6IGRlZmxhdGVfMiQxLAogIAlkZWZsYXRlRW5kOiBkZWZsYXRlRW5kXzEsCiAgCWRlZmxhdGVTZXREaWN0aW9uYXJ5OiBkZWZsYXRlU2V0RGljdGlvbmFyeV8xLAogIAlkZWZsYXRlSW5mbzogZGVmbGF0ZUluZm8KICB9OwoKICBjb25zdCBfaGFzID0gKG9iaiwga2V5KSA9PiB7CiAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KTsKICB9OwoKICB2YXIgYXNzaWduID0gZnVuY3Rpb24gKG9iaiAvKmZyb20xLCBmcm9tMiwgZnJvbTMsIC4uLiovKSB7CiAgICBjb25zdCBzb3VyY2VzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTsKICAgIHdoaWxlIChzb3VyY2VzLmxlbmd0aCkgewogICAgICBjb25zdCBzb3VyY2UgPSBzb3VyY2VzLnNoaWZ0KCk7CiAgICAgIGlmICghc291cmNlKSB7IGNvbnRpbnVlOyB9CgogICAgICBpZiAodHlwZW9mIHNvdXJjZSAhPT0gJ29iamVjdCcpIHsKICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHNvdXJjZSArICdtdXN0IGJlIG5vbi1vYmplY3QnKTsKICAgICAgfQoKICAgICAgZm9yIChjb25zdCBwIGluIHNvdXJjZSkgewogICAgICAgIGlmIChfaGFzKHNvdXJjZSwgcCkpIHsKICAgICAgICAgIG9ialtwXSA9IHNvdXJjZVtwXTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gb2JqOwogIH07CgoKICAvLyBKb2luIGFycmF5IG9mIGNodW5rcyB0byBzaW5nbGUgYXJyYXkuCiAgdmFyIGZsYXR0ZW5DaHVua3MgPSAoY2h1bmtzKSA9PiB7CiAgICAvLyBjYWxjdWxhdGUgZGF0YSBsZW5ndGgKICAgIGxldCBsZW4gPSAwOwoKICAgIGZvciAobGV0IGkgPSAwLCBsID0gY2h1bmtzLmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgICBsZW4gKz0gY2h1bmtzW2ldLmxlbmd0aDsKICAgIH0KCiAgICAvLyBqb2luIGNodW5rcwogICAgY29uc3QgcmVzdWx0ID0gbmV3IFVpbnQ4QXJyYXkobGVuKTsKCiAgICBmb3IgKGxldCBpID0gMCwgcG9zID0gMCwgbCA9IGNodW5rcy5sZW5ndGg7IGkgPCBsOyBpKyspIHsKICAgICAgbGV0IGNodW5rID0gY2h1bmtzW2ldOwogICAgICByZXN1bHQuc2V0KGNodW5rLCBwb3MpOwogICAgICBwb3MgKz0gY2h1bmsubGVuZ3RoOwogICAgfQoKICAgIHJldHVybiByZXN1bHQ7CiAgfTsKCiAgdmFyIGNvbW1vbiA9IHsKICAJYXNzaWduOiBhc3NpZ24sCiAgCWZsYXR0ZW5DaHVua3M6IGZsYXR0ZW5DaHVua3MKICB9OwoKICAvLyBTdHJpbmcgZW5jb2RlL2RlY29kZSBoZWxwZXJzCgoKICAvLyBRdWljayBjaGVjayBpZiB3ZSBjYW4gdXNlIGZhc3QgYXJyYXkgdG8gYmluIHN0cmluZyBjb252ZXJzaW9uCiAgLy8KICAvLyAtIGFwcGx5KEFycmF5KSBjYW4gZmFpbCBvbiBBbmRyb2lkIDIuMgogIC8vIC0gYXBwbHkoVWludDhBcnJheSkgY2FuIGZhaWwgb24gaU9TIDUuMSBTYWZhcmkKICAvLwogIGxldCBTVFJfQVBQTFlfVUlBX09LID0gdHJ1ZTsKCiAgdHJ5IHsgU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLCBuZXcgVWludDhBcnJheSgxKSk7IH0gY2F0Y2ggKF9fKSB7IFNUUl9BUFBMWV9VSUFfT0sgPSBmYWxzZTsgfQoKCiAgLy8gVGFibGUgd2l0aCB1dGY4IGxlbmd0aHMgKGNhbGN1bGF0ZWQgYnkgZmlyc3QgYnl0ZSBvZiBzZXF1ZW5jZSkKICAvLyBOb3RlLCB0aGF0IDUgJiA2LWJ5dGUgdmFsdWVzIGFuZCBzb21lIDQtYnl0ZSB2YWx1ZXMgY2FuIG5vdCBiZSByZXByZXNlbnRlZCBpbiBKUywKICAvLyBiZWNhdXNlIG1heCBwb3NzaWJsZSBjb2RlcG9pbnQgaXMgMHgxMGZmZmYKICBjb25zdCBfdXRmOGxlbiA9IG5ldyBVaW50OEFycmF5KDI1Nik7CiAgZm9yIChsZXQgcSA9IDA7IHEgPCAyNTY7IHErKykgewogICAgX3V0ZjhsZW5bcV0gPSAocSA+PSAyNTIgPyA2IDogcSA+PSAyNDggPyA1IDogcSA+PSAyNDAgPyA0IDogcSA+PSAyMjQgPyAzIDogcSA+PSAxOTIgPyAyIDogMSk7CiAgfQogIF91dGY4bGVuWzI1NF0gPSBfdXRmOGxlblsyNTRdID0gMTsgLy8gSW52YWxpZCBzZXF1ZW5jZSBzdGFydAoKCiAgLy8gY29udmVydCBzdHJpbmcgdG8gYXJyYXkgKHR5cGVkLCB3aGVuIHBvc3NpYmxlKQogIHZhciBzdHJpbmcyYnVmID0gKHN0cikgPT4gewogICAgaWYgKHR5cGVvZiBUZXh0RW5jb2RlciA9PT0gJ2Z1bmN0aW9uJyAmJiBUZXh0RW5jb2Rlci5wcm90b3R5cGUuZW5jb2RlKSB7CiAgICAgIHJldHVybiBuZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUoc3RyKTsKICAgIH0KCiAgICBsZXQgYnVmLCBjLCBjMiwgbV9wb3MsIGksIHN0cl9sZW4gPSBzdHIubGVuZ3RoLCBidWZfbGVuID0gMDsKCiAgICAvLyBjb3VudCBiaW5hcnkgc2l6ZQogICAgZm9yIChtX3BvcyA9IDA7IG1fcG9zIDwgc3RyX2xlbjsgbV9wb3MrKykgewogICAgICBjID0gc3RyLmNoYXJDb2RlQXQobV9wb3MpOwogICAgICBpZiAoKGMgJiAweGZjMDApID09PSAweGQ4MDAgJiYgKG1fcG9zICsgMSA8IHN0cl9sZW4pKSB7CiAgICAgICAgYzIgPSBzdHIuY2hhckNvZGVBdChtX3BvcyArIDEpOwogICAgICAgIGlmICgoYzIgJiAweGZjMDApID09PSAweGRjMDApIHsKICAgICAgICAgIGMgPSAweDEwMDAwICsgKChjIC0gMHhkODAwKSA8PCAxMCkgKyAoYzIgLSAweGRjMDApOwogICAgICAgICAgbV9wb3MrKzsKICAgICAgICB9CiAgICAgIH0KICAgICAgYnVmX2xlbiArPSBjIDwgMHg4MCA/IDEgOiBjIDwgMHg4MDAgPyAyIDogYyA8IDB4MTAwMDAgPyAzIDogNDsKICAgIH0KCiAgICAvLyBhbGxvY2F0ZSBidWZmZXIKICAgIGJ1ZiA9IG5ldyBVaW50OEFycmF5KGJ1Zl9sZW4pOwoKICAgIC8vIGNvbnZlcnQKICAgIGZvciAoaSA9IDAsIG1fcG9zID0gMDsgaSA8IGJ1Zl9sZW47IG1fcG9zKyspIHsKICAgICAgYyA9IHN0ci5jaGFyQ29kZUF0KG1fcG9zKTsKICAgICAgaWYgKChjICYgMHhmYzAwKSA9PT0gMHhkODAwICYmIChtX3BvcyArIDEgPCBzdHJfbGVuKSkgewogICAgICAgIGMyID0gc3RyLmNoYXJDb2RlQXQobV9wb3MgKyAxKTsKICAgICAgICBpZiAoKGMyICYgMHhmYzAwKSA9PT0gMHhkYzAwKSB7CiAgICAgICAgICBjID0gMHgxMDAwMCArICgoYyAtIDB4ZDgwMCkgPDwgMTApICsgKGMyIC0gMHhkYzAwKTsKICAgICAgICAgIG1fcG9zKys7CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmIChjIDwgMHg4MCkgewogICAgICAgIC8qIG9uZSBieXRlICovCiAgICAgICAgYnVmW2krK10gPSBjOwogICAgICB9IGVsc2UgaWYgKGMgPCAweDgwMCkgewogICAgICAgIC8qIHR3byBieXRlcyAqLwogICAgICAgIGJ1ZltpKytdID0gMHhDMCB8IChjID4+PiA2KTsKICAgICAgICBidWZbaSsrXSA9IDB4ODAgfCAoYyAmIDB4M2YpOwogICAgICB9IGVsc2UgaWYgKGMgPCAweDEwMDAwKSB7CiAgICAgICAgLyogdGhyZWUgYnl0ZXMgKi8KICAgICAgICBidWZbaSsrXSA9IDB4RTAgfCAoYyA+Pj4gMTIpOwogICAgICAgIGJ1ZltpKytdID0gMHg4MCB8IChjID4+PiA2ICYgMHgzZik7CiAgICAgICAgYnVmW2krK10gPSAweDgwIHwgKGMgJiAweDNmKTsKICAgICAgfSBlbHNlIHsKICAgICAgICAvKiBmb3VyIGJ5dGVzICovCiAgICAgICAgYnVmW2krK10gPSAweGYwIHwgKGMgPj4+IDE4KTsKICAgICAgICBidWZbaSsrXSA9IDB4ODAgfCAoYyA+Pj4gMTIgJiAweDNmKTsKICAgICAgICBidWZbaSsrXSA9IDB4ODAgfCAoYyA+Pj4gNiAmIDB4M2YpOwogICAgICAgIGJ1ZltpKytdID0gMHg4MCB8IChjICYgMHgzZik7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gYnVmOwogIH07CgogIC8vIEhlbHBlcgogIGNvbnN0IGJ1ZjJiaW5zdHJpbmcgPSAoYnVmLCBsZW4pID0+IHsKICAgIC8vIE9uIENocm9tZSwgdGhlIGFyZ3VtZW50cyBpbiBhIGZ1bmN0aW9uIGNhbGwgdGhhdCBhcmUgYWxsb3dlZCBpcyBgNjU1MzRgLgogICAgLy8gSWYgdGhlIGxlbmd0aCBvZiB0aGUgYnVmZmVyIGlzIHNtYWxsZXIgdGhhbiB0aGF0LCB3ZSBjYW4gdXNlIHRoaXMgb3B0aW1pemF0aW9uLAogICAgLy8gb3RoZXJ3aXNlIHdlIHdpbGwgdGFrZSBhIHNsb3dlciBwYXRoLgogICAgaWYgKGxlbiA8IDY1NTM0KSB7CiAgICAgIGlmIChidWYuc3ViYXJyYXkgJiYgU1RSX0FQUExZX1VJQV9PSykgewogICAgICAgIHJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsIGJ1Zi5sZW5ndGggPT09IGxlbiA/IGJ1ZiA6IGJ1Zi5zdWJhcnJheSgwLCBsZW4pKTsKICAgICAgfQogICAgfQoKICAgIGxldCByZXN1bHQgPSAnJzsKICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyBpKyspIHsKICAgICAgcmVzdWx0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYnVmW2ldKTsKICAgIH0KICAgIHJldHVybiByZXN1bHQ7CiAgfTsKCgogIC8vIGNvbnZlcnQgYXJyYXkgdG8gc3RyaW5nCiAgdmFyIGJ1ZjJzdHJpbmcgPSAoYnVmLCBtYXgpID0+IHsKICAgIGNvbnN0IGxlbiA9IG1heCB8fCBidWYubGVuZ3RoOwoKICAgIGlmICh0eXBlb2YgVGV4dERlY29kZXIgPT09ICdmdW5jdGlvbicgJiYgVGV4dERlY29kZXIucHJvdG90eXBlLmRlY29kZSkgewogICAgICByZXR1cm4gbmV3IFRleHREZWNvZGVyKCkuZGVjb2RlKGJ1Zi5zdWJhcnJheSgwLCBtYXgpKTsKICAgIH0KCiAgICBsZXQgaSwgb3V0OwoKICAgIC8vIFJlc2VydmUgbWF4IHBvc3NpYmxlIGxlbmd0aCAoMiB3b3JkcyBwZXIgY2hhcikKICAgIC8vIE5COiBieSB1bmtub3duIHJlYXNvbnMsIEFycmF5IGlzIHNpZ25pZmljYW50bHkgZmFzdGVyIGZvcgogICAgLy8gICAgIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkgdGhhbiBVaW50MTZBcnJheS4KICAgIGNvbnN0IHV0ZjE2YnVmID0gbmV3IEFycmF5KGxlbiAqIDIpOwoKICAgIGZvciAob3V0ID0gMCwgaSA9IDA7IGkgPCBsZW47KSB7CiAgICAgIGxldCBjID0gYnVmW2krK107CiAgICAgIC8vIHF1aWNrIHByb2Nlc3MgYXNjaWkKICAgICAgaWYgKGMgPCAweDgwKSB7IHV0ZjE2YnVmW291dCsrXSA9IGM7IGNvbnRpbnVlOyB9CgogICAgICBsZXQgY19sZW4gPSBfdXRmOGxlbltjXTsKICAgICAgLy8gc2tpcCA1ICYgNiBieXRlIGNvZGVzCiAgICAgIGlmIChjX2xlbiA+IDQpIHsgdXRmMTZidWZbb3V0KytdID0gMHhmZmZkOyBpICs9IGNfbGVuIC0gMTsgY29udGludWU7IH0KCiAgICAgIC8vIGFwcGx5IG1hc2sgb24gZmlyc3QgYnl0ZQogICAgICBjICY9IGNfbGVuID09PSAyID8gMHgxZiA6IGNfbGVuID09PSAzID8gMHgwZiA6IDB4MDc7CiAgICAgIC8vIGpvaW4gdGhlIHJlc3QKICAgICAgd2hpbGUgKGNfbGVuID4gMSAmJiBpIDwgbGVuKSB7CiAgICAgICAgYyA9IChjIDw8IDYpIHwgKGJ1ZltpKytdICYgMHgzZik7CiAgICAgICAgY19sZW4tLTsKICAgICAgfQoKICAgICAgLy8gdGVybWluYXRlZCBieSBlbmQgb2Ygc3RyaW5nPwogICAgICBpZiAoY19sZW4gPiAxKSB7IHV0ZjE2YnVmW291dCsrXSA9IDB4ZmZmZDsgY29udGludWU7IH0KCiAgICAgIGlmIChjIDwgMHgxMDAwMCkgewogICAgICAgIHV0ZjE2YnVmW291dCsrXSA9IGM7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgYyAtPSAweDEwMDAwOwogICAgICAgIHV0ZjE2YnVmW291dCsrXSA9IDB4ZDgwMCB8ICgoYyA+PiAxMCkgJiAweDNmZik7CiAgICAgICAgdXRmMTZidWZbb3V0KytdID0gMHhkYzAwIHwgKGMgJiAweDNmZik7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gYnVmMmJpbnN0cmluZyh1dGYxNmJ1Ziwgb3V0KTsKICB9OwoKCiAgLy8gQ2FsY3VsYXRlIG1heCBwb3NzaWJsZSBwb3NpdGlvbiBpbiB1dGY4IGJ1ZmZlciwKICAvLyB0aGF0IHdpbGwgbm90IGJyZWFrIHNlcXVlbmNlLiBJZiB0aGF0J3Mgbm90IHBvc3NpYmxlCiAgLy8gLSAodmVyeSBzbWFsbCBsaW1pdHMpIHJldHVybiBtYXggc2l6ZSBhcyBpcy4KICAvLwogIC8vIGJ1ZltdIC0gdXRmOCBieXRlcyBhcnJheQogIC8vIG1heCAgIC0gbGVuZ3RoIGxpbWl0IChtYW5kYXRvcnkpOwogIHZhciB1dGY4Ym9yZGVyID0gKGJ1ZiwgbWF4KSA9PiB7CgogICAgbWF4ID0gbWF4IHx8IGJ1Zi5sZW5ndGg7CiAgICBpZiAobWF4ID4gYnVmLmxlbmd0aCkgeyBtYXggPSBidWYubGVuZ3RoOyB9CgogICAgLy8gZ28gYmFjayBmcm9tIGxhc3QgcG9zaXRpb24sIHVudGlsIHN0YXJ0IG9mIHNlcXVlbmNlIGZvdW5kCiAgICBsZXQgcG9zID0gbWF4IC0gMTsKICAgIHdoaWxlIChwb3MgPj0gMCAmJiAoYnVmW3Bvc10gJiAweEMwKSA9PT0gMHg4MCkgeyBwb3MtLTsgfQoKICAgIC8vIFZlcnkgc21hbGwgYW5kIGJyb2tlbiBzZXF1ZW5jZSwKICAgIC8vIHJldHVybiBtYXgsIGJlY2F1c2Ugd2Ugc2hvdWxkIHJldHVybiBzb21ldGhpbmcgYW55d2F5LgogICAgaWYgKHBvcyA8IDApIHsgcmV0dXJuIG1heDsgfQoKICAgIC8vIElmIHdlIGNhbWUgdG8gc3RhcnQgb2YgYnVmZmVyIC0gdGhhdCBtZWFucyBidWZmZXIgaXMgdG9vIHNtYWxsLAogICAgLy8gcmV0dXJuIG1heCB0b28uCiAgICBpZiAocG9zID09PSAwKSB7IHJldHVybiBtYXg7IH0KCiAgICByZXR1cm4gKHBvcyArIF91dGY4bGVuW2J1Zltwb3NdXSA+IG1heCkgPyBwb3MgOiBtYXg7CiAgfTsKCiAgdmFyIHN0cmluZ3MgPSB7CiAgCXN0cmluZzJidWY6IHN0cmluZzJidWYsCiAgCWJ1ZjJzdHJpbmc6IGJ1ZjJzdHJpbmcsCiAgCXV0Zjhib3JkZXI6IHV0Zjhib3JkZXIKICB9OwoKICAvLyAoQykgMTk5NS0yMDEzIEplYW4tbG91cCBHYWlsbHkgYW5kIE1hcmsgQWRsZXIKICAvLyAoQykgMjAxNC0yMDE3IFZpdGFseSBQdXpyaW4gYW5kIEFuZHJleSBUdXBpdHNpbgogIC8vCiAgLy8gVGhpcyBzb2Z0d2FyZSBpcyBwcm92aWRlZCAnYXMtaXMnLCB3aXRob3V0IGFueSBleHByZXNzIG9yIGltcGxpZWQKICAvLyB3YXJyYW50eS4gSW4gbm8gZXZlbnQgd2lsbCB0aGUgYXV0aG9ycyBiZSBoZWxkIGxpYWJsZSBmb3IgYW55IGRhbWFnZXMKICAvLyBhcmlzaW5nIGZyb20gdGhlIHVzZSBvZiB0aGlzIHNvZnR3YXJlLgogIC8vCiAgLy8gUGVybWlzc2lvbiBpcyBncmFudGVkIHRvIGFueW9uZSB0byB1c2UgdGhpcyBzb2Z0d2FyZSBmb3IgYW55IHB1cnBvc2UsCiAgLy8gaW5jbHVkaW5nIGNvbW1lcmNpYWwgYXBwbGljYXRpb25zLCBhbmQgdG8gYWx0ZXIgaXQgYW5kIHJlZGlzdHJpYnV0ZSBpdAogIC8vIGZyZWVseSwgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIHJlc3RyaWN0aW9uczoKICAvLwogIC8vIDEuIFRoZSBvcmlnaW4gb2YgdGhpcyBzb2Z0d2FyZSBtdXN0IG5vdCBiZSBtaXNyZXByZXNlbnRlZDsgeW91IG11c3Qgbm90CiAgLy8gICBjbGFpbSB0aGF0IHlvdSB3cm90ZSB0aGUgb3JpZ2luYWwgc29mdHdhcmUuIElmIHlvdSB1c2UgdGhpcyBzb2Z0d2FyZQogIC8vICAgaW4gYSBwcm9kdWN0LCBhbiBhY2tub3dsZWRnbWVudCBpbiB0aGUgcHJvZHVjdCBkb2N1bWVudGF0aW9uIHdvdWxkIGJlCiAgLy8gICBhcHByZWNpYXRlZCBidXQgaXMgbm90IHJlcXVpcmVkLgogIC8vIDIuIEFsdGVyZWQgc291cmNlIHZlcnNpb25zIG11c3QgYmUgcGxhaW5seSBtYXJrZWQgYXMgc3VjaCwgYW5kIG11c3Qgbm90IGJlCiAgLy8gICBtaXNyZXByZXNlbnRlZCBhcyBiZWluZyB0aGUgb3JpZ2luYWwgc29mdHdhcmUuCiAgLy8gMy4gVGhpcyBub3RpY2UgbWF5IG5vdCBiZSByZW1vdmVkIG9yIGFsdGVyZWQgZnJvbSBhbnkgc291cmNlIGRpc3RyaWJ1dGlvbi4KCiAgZnVuY3Rpb24gWlN0cmVhbSgpIHsKICAgIC8qIG5leHQgaW5wdXQgYnl0ZSAqLwogICAgdGhpcy5pbnB1dCA9IG51bGw7IC8vIEpTIHNwZWNpZmljLCBiZWNhdXNlIHdlIGhhdmUgbm8gcG9pbnRlcnMKICAgIHRoaXMubmV4dF9pbiA9IDA7CiAgICAvKiBudW1iZXIgb2YgYnl0ZXMgYXZhaWxhYmxlIGF0IGlucHV0ICovCiAgICB0aGlzLmF2YWlsX2luID0gMDsKICAgIC8qIHRvdGFsIG51bWJlciBvZiBpbnB1dCBieXRlcyByZWFkIHNvIGZhciAqLwogICAgdGhpcy50b3RhbF9pbiA9IDA7CiAgICAvKiBuZXh0IG91dHB1dCBieXRlIHNob3VsZCBiZSBwdXQgdGhlcmUgKi8KICAgIHRoaXMub3V0cHV0ID0gbnVsbDsgLy8gSlMgc3BlY2lmaWMsIGJlY2F1c2Ugd2UgaGF2ZSBubyBwb2ludGVycwogICAgdGhpcy5uZXh0X291dCA9IDA7CiAgICAvKiByZW1haW5pbmcgZnJlZSBzcGFjZSBhdCBvdXRwdXQgKi8KICAgIHRoaXMuYXZhaWxfb3V0ID0gMDsKICAgIC8qIHRvdGFsIG51bWJlciBvZiBieXRlcyBvdXRwdXQgc28gZmFyICovCiAgICB0aGlzLnRvdGFsX291dCA9IDA7CiAgICAvKiBsYXN0IGVycm9yIG1lc3NhZ2UsIE5VTEwgaWYgbm8gZXJyb3IgKi8KICAgIHRoaXMubXNnID0gJycvKlpfTlVMTCovOwogICAgLyogbm90IHZpc2libGUgYnkgYXBwbGljYXRpb25zICovCiAgICB0aGlzLnN0YXRlID0gbnVsbDsKICAgIC8qIGJlc3QgZ3Vlc3MgYWJvdXQgdGhlIGRhdGEgdHlwZTogYmluYXJ5IG9yIHRleHQgKi8KICAgIHRoaXMuZGF0YV90eXBlID0gMi8qWl9VTktOT1dOKi87CiAgICAvKiBhZGxlcjMyIHZhbHVlIG9mIHRoZSB1bmNvbXByZXNzZWQgZGF0YSAqLwogICAgdGhpcy5hZGxlciA9IDA7CiAgfQoKICB2YXIgenN0cmVhbSA9IFpTdHJlYW07CgogIGNvbnN0IHRvU3RyaW5nJDEgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nOwoKICAvKiBQdWJsaWMgY29uc3RhbnRzID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qLwogIC8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovCgogIGNvbnN0IHsKICAgIFpfTk9fRkxVU0g6IFpfTk9fRkxVU0gkMSwgWl9TWU5DX0ZMVVNILCBaX0ZVTExfRkxVU0gsIFpfRklOSVNIOiBaX0ZJTklTSCQyLAogICAgWl9PSzogWl9PSyQyLCBaX1NUUkVBTV9FTkQ6IFpfU1RSRUFNX0VORCQyLAogICAgWl9ERUZBVUxUX0NPTVBSRVNTSU9OLAogICAgWl9ERUZBVUxUX1NUUkFURUdZLAogICAgWl9ERUZMQVRFRDogWl9ERUZMQVRFRCQxCiAgfSA9IGNvbnN0YW50cyQyOwoKICAvKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qLwoKCiAgLyoqCiAgICogY2xhc3MgRGVmbGF0ZQogICAqCiAgICogR2VuZXJpYyBKUy1zdHlsZSB3cmFwcGVyIGZvciB6bGliIGNhbGxzLiBJZiB5b3UgZG9uJ3QgbmVlZAogICAqIHN0cmVhbWluZyBiZWhhdmlvdXIgLSB1c2UgbW9yZSBzaW1wbGUgZnVuY3Rpb25zOiBbW2RlZmxhdGVdXSwKICAgKiBbW2RlZmxhdGVSYXddXSBhbmQgW1tnemlwXV0uCiAgICoqLwoKICAvKiBpbnRlcm5hbAogICAqIERlZmxhdGUuY2h1bmtzIC0+IEFycmF5CiAgICoKICAgKiBDaHVua3Mgb2Ygb3V0cHV0IGRhdGEsIGlmIFtbRGVmbGF0ZSNvbkRhdGFdXSBub3Qgb3ZlcnJpZGRlbi4KICAgKiovCgogIC8qKgogICAqIERlZmxhdGUucmVzdWx0IC0+IFVpbnQ4QXJyYXkKICAgKgogICAqIENvbXByZXNzZWQgcmVzdWx0LCBnZW5lcmF0ZWQgYnkgZGVmYXVsdCBbW0RlZmxhdGUjb25EYXRhXV0KICAgKiBhbmQgW1tEZWZsYXRlI29uRW5kXV0gaGFuZGxlcnMuIEZpbGxlZCBhZnRlciB5b3UgcHVzaCBsYXN0IGNodW5rCiAgICogKGNhbGwgW1tEZWZsYXRlI3B1c2hdXSB3aXRoIGBaX0ZJTklTSGAgLyBgdHJ1ZWAgcGFyYW0pLgogICAqKi8KCiAgLyoqCiAgICogRGVmbGF0ZS5lcnIgLT4gTnVtYmVyCiAgICoKICAgKiBFcnJvciBjb2RlIGFmdGVyIGRlZmxhdGUgZmluaXNoZWQuIDAgKFpfT0spIG9uIHN1Y2Nlc3MuCiAgICogWW91IHdpbGwgbm90IG5lZWQgaXQgaW4gcmVhbCBsaWZlLCBiZWNhdXNlIGRlZmxhdGUgZXJyb3JzCiAgICogYXJlIHBvc3NpYmxlIG9ubHkgb24gd3Jvbmcgb3B0aW9ucyBvciBiYWQgYG9uRGF0YWAgLyBgb25FbmRgCiAgICogY3VzdG9tIGhhbmRsZXJzLgogICAqKi8KCiAgLyoqCiAgICogRGVmbGF0ZS5tc2cgLT4gU3RyaW5nCiAgICoKICAgKiBFcnJvciBtZXNzYWdlLCBpZiBbW0RlZmxhdGUuZXJyXV0gIT0gMAogICAqKi8KCgogIC8qKgogICAqIG5ldyBEZWZsYXRlKG9wdGlvbnMpCiAgICogLSBvcHRpb25zIChPYmplY3QpOiB6bGliIGRlZmxhdGUgb3B0aW9ucy4KICAgKgogICAqIENyZWF0ZXMgbmV3IGRlZmxhdG9yIGluc3RhbmNlIHdpdGggc3BlY2lmaWVkIHBhcmFtcy4gVGhyb3dzIGV4Y2VwdGlvbgogICAqIG9uIGJhZCBwYXJhbXMuIFN1cHBvcnRlZCBvcHRpb25zOgogICAqCiAgICogLSBgbGV2ZWxgCiAgICogLSBgd2luZG93Qml0c2AKICAgKiAtIGBtZW1MZXZlbGAKICAgKiAtIGBzdHJhdGVneWAKICAgKiAtIGBkaWN0aW9uYXJ5YAogICAqCiAgICogW2h0dHA6Ly96bGliLm5ldC9tYW51YWwuaHRtbCNBZHZhbmNlZF0oaHR0cDovL3psaWIubmV0L21hbnVhbC5odG1sI0FkdmFuY2VkKQogICAqIGZvciBtb3JlIGluZm9ybWF0aW9uIG9uIHRoZXNlLgogICAqCiAgICogQWRkaXRpb25hbCBvcHRpb25zLCBmb3IgaW50ZXJuYWwgbmVlZHM6CiAgICoKICAgKiAtIGBjaHVua1NpemVgIC0gc2l6ZSBvZiBnZW5lcmF0ZWQgZGF0YSBjaHVua3MgKDE2SyBieSBkZWZhdWx0KQogICAqIC0gYHJhd2AgKEJvb2xlYW4pIC0gZG8gcmF3IGRlZmxhdGUKICAgKiAtIGBnemlwYCAoQm9vbGVhbikgLSBjcmVhdGUgZ3ppcCB3cmFwcGVyCiAgICogLSBgaGVhZGVyYCAoT2JqZWN0KSAtIGN1c3RvbSBoZWFkZXIgZm9yIGd6aXAKICAgKiAgIC0gYHRleHRgIChCb29sZWFuKSAtIHRydWUgaWYgY29tcHJlc3NlZCBkYXRhIGJlbGlldmVkIHRvIGJlIHRleHQKICAgKiAgIC0gYHRpbWVgIChOdW1iZXIpIC0gbW9kaWZpY2F0aW9uIHRpbWUsIHVuaXggdGltZXN0YW1wCiAgICogICAtIGBvc2AgKE51bWJlcikgLSBvcGVyYXRpb24gc3lzdGVtIGNvZGUKICAgKiAgIC0gYGV4dHJhYCAoQXJyYXkpIC0gYXJyYXkgb2YgYnl0ZXMgd2l0aCBleHRyYSBkYXRhIChtYXggNjU1MzYpCiAgICogICAtIGBuYW1lYCAoU3RyaW5nKSAtIGZpbGUgbmFtZSAoYmluYXJ5IHN0cmluZykKICAgKiAgIC0gYGNvbW1lbnRgIChTdHJpbmcpIC0gY29tbWVudCAoYmluYXJ5IHN0cmluZykKICAgKiAgIC0gYGhjcmNgIChCb29sZWFuKSAtIHRydWUgaWYgaGVhZGVyIGNyYyBzaG91bGQgYmUgYWRkZWQKICAgKgogICAqICMjIyMjIEV4YW1wbGU6CiAgICoKICAgKiBgYGBqYXZhc2NyaXB0CiAgICogY29uc3QgcGFrbyA9IHJlcXVpcmUoJ3Bha28nKQogICAqICAgLCBjaHVuazEgPSBuZXcgVWludDhBcnJheShbMSwyLDMsNCw1LDYsNyw4LDldKQogICAqICAgLCBjaHVuazIgPSBuZXcgVWludDhBcnJheShbMTAsMTEsMTIsMTMsMTQsMTUsMTYsMTcsMTgsMTldKTsKICAgKgogICAqIGNvbnN0IGRlZmxhdGUgPSBuZXcgcGFrby5EZWZsYXRlKHsgbGV2ZWw6IDN9KTsKICAgKgogICAqIGRlZmxhdGUucHVzaChjaHVuazEsIGZhbHNlKTsKICAgKiBkZWZsYXRlLnB1c2goY2h1bmsyLCB0cnVlKTsgIC8vIHRydWUgLT4gbGFzdCBjaHVuawogICAqCiAgICogaWYgKGRlZmxhdGUuZXJyKSB7IHRocm93IG5ldyBFcnJvcihkZWZsYXRlLmVycik7IH0KICAgKgogICAqIGNvbnNvbGUubG9nKGRlZmxhdGUucmVzdWx0KTsKICAgKiBgYGAKICAgKiovCiAgZnVuY3Rpb24gRGVmbGF0ZSQxKG9wdGlvbnMpIHsKICAgIHRoaXMub3B0aW9ucyA9IGNvbW1vbi5hc3NpZ24oewogICAgICBsZXZlbDogWl9ERUZBVUxUX0NPTVBSRVNTSU9OLAogICAgICBtZXRob2Q6IFpfREVGTEFURUQkMSwKICAgICAgY2h1bmtTaXplOiAxNjM4NCwKICAgICAgd2luZG93Qml0czogMTUsCiAgICAgIG1lbUxldmVsOiA4LAogICAgICBzdHJhdGVneTogWl9ERUZBVUxUX1NUUkFURUdZCiAgICB9LCBvcHRpb25zIHx8IHt9KTsKCiAgICBsZXQgb3B0ID0gdGhpcy5vcHRpb25zOwoKICAgIGlmIChvcHQucmF3ICYmIChvcHQud2luZG93Qml0cyA+IDApKSB7CiAgICAgIG9wdC53aW5kb3dCaXRzID0gLW9wdC53aW5kb3dCaXRzOwogICAgfQoKICAgIGVsc2UgaWYgKG9wdC5nemlwICYmIChvcHQud2luZG93Qml0cyA+IDApICYmIChvcHQud2luZG93Qml0cyA8IDE2KSkgewogICAgICBvcHQud2luZG93Qml0cyArPSAxNjsKICAgIH0KCiAgICB0aGlzLmVyciAgICA9IDA7ICAgICAgLy8gZXJyb3IgY29kZSwgaWYgaGFwcGVucyAoMCA9IFpfT0spCiAgICB0aGlzLm1zZyAgICA9ICcnOyAgICAgLy8gZXJyb3IgbWVzc2FnZQogICAgdGhpcy5lbmRlZCAgPSBmYWxzZTsgIC8vIHVzZWQgdG8gYXZvaWQgbXVsdGlwbGUgb25FbmQoKSBjYWxscwogICAgdGhpcy5jaHVua3MgPSBbXTsgICAgIC8vIGNodW5rcyBvZiBjb21wcmVzc2VkIGRhdGEKCiAgICB0aGlzLnN0cm0gPSBuZXcgenN0cmVhbSgpOwogICAgdGhpcy5zdHJtLmF2YWlsX291dCA9IDA7CgogICAgbGV0IHN0YXR1cyA9IGRlZmxhdGVfMSQyLmRlZmxhdGVJbml0MigKICAgICAgdGhpcy5zdHJtLAogICAgICBvcHQubGV2ZWwsCiAgICAgIG9wdC5tZXRob2QsCiAgICAgIG9wdC53aW5kb3dCaXRzLAogICAgICBvcHQubWVtTGV2ZWwsCiAgICAgIG9wdC5zdHJhdGVneQogICAgKTsKCiAgICBpZiAoc3RhdHVzICE9PSBaX09LJDIpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKG1lc3NhZ2VzW3N0YXR1c10pOwogICAgfQoKICAgIGlmIChvcHQuaGVhZGVyKSB7CiAgICAgIGRlZmxhdGVfMSQyLmRlZmxhdGVTZXRIZWFkZXIodGhpcy5zdHJtLCBvcHQuaGVhZGVyKTsKICAgIH0KCiAgICBpZiAob3B0LmRpY3Rpb25hcnkpIHsKICAgICAgbGV0IGRpY3Q7CiAgICAgIC8vIENvbnZlcnQgZGF0YSBpZiBuZWVkZWQKICAgICAgaWYgKHR5cGVvZiBvcHQuZGljdGlvbmFyeSA9PT0gJ3N0cmluZycpIHsKICAgICAgICAvLyBJZiB3ZSBuZWVkIHRvIGNvbXByZXNzIHRleHQsIGNoYW5nZSBlbmNvZGluZyB0byB1dGY4LgogICAgICAgIGRpY3QgPSBzdHJpbmdzLnN0cmluZzJidWYob3B0LmRpY3Rpb25hcnkpOwogICAgICB9IGVsc2UgaWYgKHRvU3RyaW5nJDEuY2FsbChvcHQuZGljdGlvbmFyeSkgPT09ICdbb2JqZWN0IEFycmF5QnVmZmVyXScpIHsKICAgICAgICBkaWN0ID0gbmV3IFVpbnQ4QXJyYXkob3B0LmRpY3Rpb25hcnkpOwogICAgICB9IGVsc2UgewogICAgICAgIGRpY3QgPSBvcHQuZGljdGlvbmFyeTsKICAgICAgfQoKICAgICAgc3RhdHVzID0gZGVmbGF0ZV8xJDIuZGVmbGF0ZVNldERpY3Rpb25hcnkodGhpcy5zdHJtLCBkaWN0KTsKCiAgICAgIGlmIChzdGF0dXMgIT09IFpfT0skMikgewogICAgICAgIHRocm93IG5ldyBFcnJvcihtZXNzYWdlc1tzdGF0dXNdKTsKICAgICAgfQoKICAgICAgdGhpcy5fZGljdF9zZXQgPSB0cnVlOwogICAgfQogIH0KCiAgLyoqCiAgICogRGVmbGF0ZSNwdXNoKGRhdGFbLCBmbHVzaF9tb2RlXSkgLT4gQm9vbGVhbgogICAqIC0gZGF0YSAoVWludDhBcnJheXxBcnJheUJ1ZmZlcnxTdHJpbmcpOiBpbnB1dCBkYXRhLiBTdHJpbmdzIHdpbGwgYmUKICAgKiAgIGNvbnZlcnRlZCB0byB1dGY4IGJ5dGUgc2VxdWVuY2UuCiAgICogLSBmbHVzaF9tb2RlIChOdW1iZXJ8Qm9vbGVhbik6IDAuLjYgZm9yIGNvcnJlc3BvbmRpbmcgWl9OT19GTFVTSC4uWl9UUkVFIG1vZGVzLgogICAqICAgU2VlIGNvbnN0YW50cy4gU2tpcHBlZCBvciBgZmFsc2VgIG1lYW5zIFpfTk9fRkxVU0gsIGB0cnVlYCBtZWFucyBaX0ZJTklTSC4KICAgKgogICAqIFNlbmRzIGlucHV0IGRhdGEgdG8gZGVmbGF0ZSBwaXBlLCBnZW5lcmF0aW5nIFtbRGVmbGF0ZSNvbkRhdGFdXSBjYWxscyB3aXRoCiAgICogbmV3IGNvbXByZXNzZWQgY2h1bmtzLiBSZXR1cm5zIGB0cnVlYCBvbiBzdWNjZXNzLiBUaGUgbGFzdCBkYXRhIGJsb2NrIG11c3QKICAgKiBoYXZlIGBmbHVzaF9tb2RlYCBaX0ZJTklTSCAob3IgYHRydWVgKS4gVGhhdCB3aWxsIGZsdXNoIGludGVybmFsIHBlbmRpbmcKICAgKiBidWZmZXJzIGFuZCBjYWxsIFtbRGVmbGF0ZSNvbkVuZF1dLgogICAqCiAgICogT24gZmFpbCBjYWxsIFtbRGVmbGF0ZSNvbkVuZF1dIHdpdGggZXJyb3IgY29kZSBhbmQgcmV0dXJuIGZhbHNlLgogICAqCiAgICogIyMjIyMgRXhhbXBsZQogICAqCiAgICogYGBgamF2YXNjcmlwdAogICAqIHB1c2goY2h1bmssIGZhbHNlKTsgLy8gcHVzaCBvbmUgb2YgZGF0YSBjaHVua3MKICAgKiAuLi4KICAgKiBwdXNoKGNodW5rLCB0cnVlKTsgIC8vIHB1c2ggbGFzdCBjaHVuawogICAqIGBgYAogICAqKi8KICBEZWZsYXRlJDEucHJvdG90eXBlLnB1c2ggPSBmdW5jdGlvbiAoZGF0YSwgZmx1c2hfbW9kZSkgewogICAgY29uc3Qgc3RybSA9IHRoaXMuc3RybTsKICAgIGNvbnN0IGNodW5rU2l6ZSA9IHRoaXMub3B0aW9ucy5jaHVua1NpemU7CiAgICBsZXQgc3RhdHVzLCBfZmx1c2hfbW9kZTsKCiAgICBpZiAodGhpcy5lbmRlZCkgeyByZXR1cm4gZmFsc2U7IH0KCiAgICBpZiAoZmx1c2hfbW9kZSA9PT0gfn5mbHVzaF9tb2RlKSBfZmx1c2hfbW9kZSA9IGZsdXNoX21vZGU7CiAgICBlbHNlIF9mbHVzaF9tb2RlID0gZmx1c2hfbW9kZSA9PT0gdHJ1ZSA/IFpfRklOSVNIJDIgOiBaX05PX0ZMVVNIJDE7CgogICAgLy8gQ29udmVydCBkYXRhIGlmIG5lZWRlZAogICAgaWYgKHR5cGVvZiBkYXRhID09PSAnc3RyaW5nJykgewogICAgICAvLyBJZiB3ZSBuZWVkIHRvIGNvbXByZXNzIHRleHQsIGNoYW5nZSBlbmNvZGluZyB0byB1dGY4LgogICAgICBzdHJtLmlucHV0ID0gc3RyaW5ncy5zdHJpbmcyYnVmKGRhdGEpOwogICAgfSBlbHNlIGlmICh0b1N0cmluZyQxLmNhbGwoZGF0YSkgPT09ICdbb2JqZWN0IEFycmF5QnVmZmVyXScpIHsKICAgICAgc3RybS5pbnB1dCA9IG5ldyBVaW50OEFycmF5KGRhdGEpOwogICAgfSBlbHNlIHsKICAgICAgc3RybS5pbnB1dCA9IGRhdGE7CiAgICB9CgogICAgc3RybS5uZXh0X2luID0gMDsKICAgIHN0cm0uYXZhaWxfaW4gPSBzdHJtLmlucHV0Lmxlbmd0aDsKCiAgICBmb3IgKDs7KSB7CiAgICAgIGlmIChzdHJtLmF2YWlsX291dCA9PT0gMCkgewogICAgICAgIHN0cm0ub3V0cHV0ID0gbmV3IFVpbnQ4QXJyYXkoY2h1bmtTaXplKTsKICAgICAgICBzdHJtLm5leHRfb3V0ID0gMDsKICAgICAgICBzdHJtLmF2YWlsX291dCA9IGNodW5rU2l6ZTsKICAgICAgfQoKICAgICAgLy8gTWFrZSBzdXJlIGF2YWlsX291dCA+IDYgdG8gYXZvaWQgcmVwZWF0aW5nIG1hcmtlcnMKICAgICAgaWYgKChfZmx1c2hfbW9kZSA9PT0gWl9TWU5DX0ZMVVNIIHx8IF9mbHVzaF9tb2RlID09PSBaX0ZVTExfRkxVU0gpICYmIHN0cm0uYXZhaWxfb3V0IDw9IDYpIHsKICAgICAgICB0aGlzLm9uRGF0YShzdHJtLm91dHB1dC5zdWJhcnJheSgwLCBzdHJtLm5leHRfb3V0KSk7CiAgICAgICAgc3RybS5hdmFpbF9vdXQgPSAwOwogICAgICAgIGNvbnRpbnVlOwogICAgICB9CgogICAgICBzdGF0dXMgPSBkZWZsYXRlXzEkMi5kZWZsYXRlKHN0cm0sIF9mbHVzaF9tb2RlKTsKCiAgICAgIC8vIEVuZGVkID0+IGZsdXNoIGFuZCBmaW5pc2gKICAgICAgaWYgKHN0YXR1cyA9PT0gWl9TVFJFQU1fRU5EJDIpIHsKICAgICAgICBpZiAoc3RybS5uZXh0X291dCA+IDApIHsKICAgICAgICAgIHRoaXMub25EYXRhKHN0cm0ub3V0cHV0LnN1YmFycmF5KDAsIHN0cm0ubmV4dF9vdXQpKTsKICAgICAgICB9CiAgICAgICAgc3RhdHVzID0gZGVmbGF0ZV8xJDIuZGVmbGF0ZUVuZCh0aGlzLnN0cm0pOwogICAgICAgIHRoaXMub25FbmQoc3RhdHVzKTsKICAgICAgICB0aGlzLmVuZGVkID0gdHJ1ZTsKICAgICAgICByZXR1cm4gc3RhdHVzID09PSBaX09LJDI7CiAgICAgIH0KCiAgICAgIC8vIEZsdXNoIGlmIG91dCBidWZmZXIgZnVsbAogICAgICBpZiAoc3RybS5hdmFpbF9vdXQgPT09IDApIHsKICAgICAgICB0aGlzLm9uRGF0YShzdHJtLm91dHB1dCk7CiAgICAgICAgY29udGludWU7CiAgICAgIH0KCiAgICAgIC8vIEZsdXNoIGlmIHJlcXVlc3RlZCBhbmQgaGFzIGRhdGEKICAgICAgaWYgKF9mbHVzaF9tb2RlID4gMCAmJiBzdHJtLm5leHRfb3V0ID4gMCkgewogICAgICAgIHRoaXMub25EYXRhKHN0cm0ub3V0cHV0LnN1YmFycmF5KDAsIHN0cm0ubmV4dF9vdXQpKTsKICAgICAgICBzdHJtLmF2YWlsX291dCA9IDA7CiAgICAgICAgY29udGludWU7CiAgICAgIH0KCiAgICAgIGlmIChzdHJtLmF2YWlsX2luID09PSAwKSBicmVhazsKICAgIH0KCiAgICByZXR1cm4gdHJ1ZTsKICB9OwoKCiAgLyoqCiAgICogRGVmbGF0ZSNvbkRhdGEoY2h1bmspIC0+IFZvaWQKICAgKiAtIGNodW5rIChVaW50OEFycmF5KTogb3V0cHV0IGRhdGEuCiAgICoKICAgKiBCeSBkZWZhdWx0LCBzdG9yZXMgZGF0YSBibG9ja3MgaW4gYGNodW5rc1tdYCBwcm9wZXJ0eSBhbmQgZ2x1ZQogICAqIHRob3NlIGluIGBvbkVuZGAuIE92ZXJyaWRlIHRoaXMgaGFuZGxlciwgaWYgeW91IG5lZWQgYW5vdGhlciBiZWhhdmlvdXIuCiAgICoqLwogIERlZmxhdGUkMS5wcm90b3R5cGUub25EYXRhID0gZnVuY3Rpb24gKGNodW5rKSB7CiAgICB0aGlzLmNodW5rcy5wdXNoKGNodW5rKTsKICB9OwoKCiAgLyoqCiAgICogRGVmbGF0ZSNvbkVuZChzdGF0dXMpIC0+IFZvaWQKICAgKiAtIHN0YXR1cyAoTnVtYmVyKTogZGVmbGF0ZSBzdGF0dXMuIDAgKFpfT0spIG9uIHN1Y2Nlc3MsCiAgICogICBvdGhlciBpZiBub3QuCiAgICoKICAgKiBDYWxsZWQgb25jZSBhZnRlciB5b3UgdGVsbCBkZWZsYXRlIHRoYXQgdGhlIGlucHV0IHN0cmVhbSBpcwogICAqIGNvbXBsZXRlIChaX0ZJTklTSCkuIEJ5IGRlZmF1bHQgLSBqb2luIGNvbGxlY3RlZCBjaHVua3MsCiAgICogZnJlZSBtZW1vcnkgYW5kIGZpbGwgYHJlc3VsdHNgIC8gYGVycmAgcHJvcGVydGllcy4KICAgKiovCiAgRGVmbGF0ZSQxLnByb3RvdHlwZS5vbkVuZCA9IGZ1bmN0aW9uIChzdGF0dXMpIHsKICAgIC8vIE9uIHN1Y2Nlc3MgLSBqb2luCiAgICBpZiAoc3RhdHVzID09PSBaX09LJDIpIHsKICAgICAgdGhpcy5yZXN1bHQgPSBjb21tb24uZmxhdHRlbkNodW5rcyh0aGlzLmNodW5rcyk7CiAgICB9CiAgICB0aGlzLmNodW5rcyA9IFtdOwogICAgdGhpcy5lcnIgPSBzdGF0dXM7CiAgICB0aGlzLm1zZyA9IHRoaXMuc3RybS5tc2c7CiAgfTsKCiAgLy8gKEMpIDE5OTUtMjAxMyBKZWFuLWxvdXAgR2FpbGx5IGFuZCBNYXJrIEFkbGVyCiAgLy8gKEMpIDIwMTQtMjAxNyBWaXRhbHkgUHV6cmluIGFuZCBBbmRyZXkgVHVwaXRzaW4KICAvLwogIC8vIFRoaXMgc29mdHdhcmUgaXMgcHJvdmlkZWQgJ2FzLWlzJywgd2l0aG91dCBhbnkgZXhwcmVzcyBvciBpbXBsaWVkCiAgLy8gd2FycmFudHkuIEluIG5vIGV2ZW50IHdpbGwgdGhlIGF1dGhvcnMgYmUgaGVsZCBsaWFibGUgZm9yIGFueSBkYW1hZ2VzCiAgLy8gYXJpc2luZyBmcm9tIHRoZSB1c2Ugb2YgdGhpcyBzb2Z0d2FyZS4KICAvLwogIC8vIFBlcm1pc3Npb24gaXMgZ3JhbnRlZCB0byBhbnlvbmUgdG8gdXNlIHRoaXMgc29mdHdhcmUgZm9yIGFueSBwdXJwb3NlLAogIC8vIGluY2x1ZGluZyBjb21tZXJjaWFsIGFwcGxpY2F0aW9ucywgYW5kIHRvIGFsdGVyIGl0IGFuZCByZWRpc3RyaWJ1dGUgaXQKICAvLyBmcmVlbHksIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyByZXN0cmljdGlvbnM6CiAgLy8KICAvLyAxLiBUaGUgb3JpZ2luIG9mIHRoaXMgc29mdHdhcmUgbXVzdCBub3QgYmUgbWlzcmVwcmVzZW50ZWQ7IHlvdSBtdXN0IG5vdAogIC8vICAgY2xhaW0gdGhhdCB5b3Ugd3JvdGUgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLiBJZiB5b3UgdXNlIHRoaXMgc29mdHdhcmUKICAvLyAgIGluIGEgcHJvZHVjdCwgYW4gYWNrbm93bGVkZ21lbnQgaW4gdGhlIHByb2R1Y3QgZG9jdW1lbnRhdGlvbiB3b3VsZCBiZQogIC8vICAgYXBwcmVjaWF0ZWQgYnV0IGlzIG5vdCByZXF1aXJlZC4KICAvLyAyLiBBbHRlcmVkIHNvdXJjZSB2ZXJzaW9ucyBtdXN0IGJlIHBsYWlubHkgbWFya2VkIGFzIHN1Y2gsIGFuZCBtdXN0IG5vdCBiZQogIC8vICAgbWlzcmVwcmVzZW50ZWQgYXMgYmVpbmcgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLgogIC8vIDMuIFRoaXMgbm90aWNlIG1heSBub3QgYmUgcmVtb3ZlZCBvciBhbHRlcmVkIGZyb20gYW55IHNvdXJjZSBkaXN0cmlidXRpb24uCgogIC8vIFNlZSBzdGF0ZSBkZWZzIGZyb20gaW5mbGF0ZS5qcwogIGNvbnN0IEJBRCQxID0gMzA7ICAgICAgIC8qIGdvdCBhIGRhdGEgZXJyb3IgLS0gcmVtYWluIGhlcmUgdW50aWwgcmVzZXQgKi8KICBjb25zdCBUWVBFJDEgPSAxMjsgICAgICAvKiBpOiB3YWl0aW5nIGZvciB0eXBlIGJpdHMsIGluY2x1ZGluZyBsYXN0LWZsYWcgYml0ICovCgogIC8qCiAgICAgRGVjb2RlIGxpdGVyYWwsIGxlbmd0aCwgYW5kIGRpc3RhbmNlIGNvZGVzIGFuZCB3cml0ZSBvdXQgdGhlIHJlc3VsdGluZwogICAgIGxpdGVyYWwgYW5kIG1hdGNoIGJ5dGVzIHVudGlsIGVpdGhlciBub3QgZW5vdWdoIGlucHV0IG9yIG91dHB1dCBpcwogICAgIGF2YWlsYWJsZSwgYW4gZW5kLW9mLWJsb2NrIGlzIGVuY291bnRlcmVkLCBvciBhIGRhdGEgZXJyb3IgaXMgZW5jb3VudGVyZWQuCiAgICAgV2hlbiBsYXJnZSBlbm91Z2ggaW5wdXQgYW5kIG91dHB1dCBidWZmZXJzIGFyZSBzdXBwbGllZCB0byBpbmZsYXRlKCksIGZvcgogICAgIGV4YW1wbGUsIGEgMTZLIGlucHV0IGJ1ZmZlciBhbmQgYSA2NEsgb3V0cHV0IGJ1ZmZlciwgbW9yZSB0aGFuIDk1JSBvZiB0aGUKICAgICBpbmZsYXRlIGV4ZWN1dGlvbiB0aW1lIGlzIHNwZW50IGluIHRoaXMgcm91dGluZS4KCiAgICAgRW50cnkgYXNzdW1wdGlvbnM6CgogICAgICAgICAgc3RhdGUubW9kZSA9PT0gTEVOCiAgICAgICAgICBzdHJtLmF2YWlsX2luID49IDYKICAgICAgICAgIHN0cm0uYXZhaWxfb3V0ID49IDI1OAogICAgICAgICAgc3RhcnQgPj0gc3RybS5hdmFpbF9vdXQKICAgICAgICAgIHN0YXRlLmJpdHMgPCA4CgogICAgIE9uIHJldHVybiwgc3RhdGUubW9kZSBpcyBvbmUgb2Y6CgogICAgICAgICAgTEVOIC0tIHJhbiBvdXQgb2YgZW5vdWdoIG91dHB1dCBzcGFjZSBvciBlbm91Z2ggYXZhaWxhYmxlIGlucHV0CiAgICAgICAgICBUWVBFIC0tIHJlYWNoZWQgZW5kIG9mIGJsb2NrIGNvZGUsIGluZmxhdGUoKSB0byBpbnRlcnByZXQgbmV4dCBibG9jawogICAgICAgICAgQkFEIC0tIGVycm9yIGluIGJsb2NrIGRhdGEKCiAgICAgTm90ZXM6CgogICAgICAtIFRoZSBtYXhpbXVtIGlucHV0IGJpdHMgdXNlZCBieSBhIGxlbmd0aC9kaXN0YW5jZSBwYWlyIGlzIDE1IGJpdHMgZm9yIHRoZQogICAgICAgIGxlbmd0aCBjb2RlLCA1IGJpdHMgZm9yIHRoZSBsZW5ndGggZXh0cmEsIDE1IGJpdHMgZm9yIHRoZSBkaXN0YW5jZSBjb2RlLAogICAgICAgIGFuZCAxMyBiaXRzIGZvciB0aGUgZGlzdGFuY2UgZXh0cmEuICBUaGlzIHRvdGFscyA0OCBiaXRzLCBvciBzaXggYnl0ZXMuCiAgICAgICAgVGhlcmVmb3JlIGlmIHN0cm0uYXZhaWxfaW4gPj0gNiwgdGhlbiB0aGVyZSBpcyBlbm91Z2ggaW5wdXQgdG8gYXZvaWQKICAgICAgICBjaGVja2luZyBmb3IgYXZhaWxhYmxlIGlucHV0IHdoaWxlIGRlY29kaW5nLgoKICAgICAgLSBUaGUgbWF4aW11bSBieXRlcyB0aGF0IGEgc2luZ2xlIGxlbmd0aC9kaXN0YW5jZSBwYWlyIGNhbiBvdXRwdXQgaXMgMjU4CiAgICAgICAgYnl0ZXMsIHdoaWNoIGlzIHRoZSBtYXhpbXVtIGxlbmd0aCB0aGF0IGNhbiBiZSBjb2RlZC4gIGluZmxhdGVfZmFzdCgpCiAgICAgICAgcmVxdWlyZXMgc3RybS5hdmFpbF9vdXQgPj0gMjU4IGZvciBlYWNoIGxvb3AgdG8gYXZvaWQgY2hlY2tpbmcgZm9yCiAgICAgICAgb3V0cHV0IHNwYWNlLgogICAqLwogIHZhciBpbmZmYXN0ID0gZnVuY3Rpb24gaW5mbGF0ZV9mYXN0KHN0cm0sIHN0YXJ0KSB7CiAgICBsZXQgX2luOyAgICAgICAgICAgICAgICAgICAgLyogbG9jYWwgc3RybS5pbnB1dCAqLwogICAgbGV0IGxhc3Q7ICAgICAgICAgICAgICAgICAgIC8qIGhhdmUgZW5vdWdoIGlucHV0IHdoaWxlIGluIDwgbGFzdCAqLwogICAgbGV0IF9vdXQ7ICAgICAgICAgICAgICAgICAgIC8qIGxvY2FsIHN0cm0ub3V0cHV0ICovCiAgICBsZXQgYmVnOyAgICAgICAgICAgICAgICAgICAgLyogaW5mbGF0ZSgpJ3MgaW5pdGlhbCBzdHJtLm91dHB1dCAqLwogICAgbGV0IGVuZDsgICAgICAgICAgICAgICAgICAgIC8qIHdoaWxlIG91dCA8IGVuZCwgZW5vdWdoIHNwYWNlIGF2YWlsYWJsZSAqLwogIC8vI2lmZGVmIElORkxBVEVfU1RSSUNUCiAgICBsZXQgZG1heDsgICAgICAgICAgICAgICAgICAgLyogbWF4aW11bSBkaXN0YW5jZSBmcm9tIHpsaWIgaGVhZGVyICovCiAgLy8jZW5kaWYKICAgIGxldCB3c2l6ZTsgICAgICAgICAgICAgICAgICAvKiB3aW5kb3cgc2l6ZSBvciB6ZXJvIGlmIG5vdCB1c2luZyB3aW5kb3cgKi8KICAgIGxldCB3aGF2ZTsgICAgICAgICAgICAgICAgICAvKiB2YWxpZCBieXRlcyBpbiB0aGUgd2luZG93ICovCiAgICBsZXQgd25leHQ7ICAgICAgICAgICAgICAgICAgLyogd2luZG93IHdyaXRlIGluZGV4ICovCiAgICAvLyBVc2UgYHNfd2luZG93YCBpbnN0ZWFkIGB3aW5kb3dgLCBhdm9pZCBjb25mbGljdCB3aXRoIGluc3RydW1lbnRhdGlvbiB0b29scwogICAgbGV0IHNfd2luZG93OyAgICAgICAgICAgICAgIC8qIGFsbG9jYXRlZCBzbGlkaW5nIHdpbmRvdywgaWYgd3NpemUgIT0gMCAqLwogICAgbGV0IGhvbGQ7ICAgICAgICAgICAgICAgICAgIC8qIGxvY2FsIHN0cm0uaG9sZCAqLwogICAgbGV0IGJpdHM7ICAgICAgICAgICAgICAgICAgIC8qIGxvY2FsIHN0cm0uYml0cyAqLwogICAgbGV0IGxjb2RlOyAgICAgICAgICAgICAgICAgIC8qIGxvY2FsIHN0cm0ubGVuY29kZSAqLwogICAgbGV0IGRjb2RlOyAgICAgICAgICAgICAgICAgIC8qIGxvY2FsIHN0cm0uZGlzdGNvZGUgKi8KICAgIGxldCBsbWFzazsgICAgICAgICAgICAgICAgICAvKiBtYXNrIGZvciBmaXJzdCBsZXZlbCBvZiBsZW5ndGggY29kZXMgKi8KICAgIGxldCBkbWFzazsgICAgICAgICAgICAgICAgICAvKiBtYXNrIGZvciBmaXJzdCBsZXZlbCBvZiBkaXN0YW5jZSBjb2RlcyAqLwogICAgbGV0IGhlcmU7ICAgICAgICAgICAgICAgICAgIC8qIHJldHJpZXZlZCB0YWJsZSBlbnRyeSAqLwogICAgbGV0IG9wOyAgICAgICAgICAgICAgICAgICAgIC8qIGNvZGUgYml0cywgb3BlcmF0aW9uLCBleHRyYSBiaXRzLCBvciAqLwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qICB3aW5kb3cgcG9zaXRpb24sIHdpbmRvdyBieXRlcyB0byBjb3B5ICovCiAgICBsZXQgbGVuOyAgICAgICAgICAgICAgICAgICAgLyogbWF0Y2ggbGVuZ3RoLCB1bnVzZWQgYnl0ZXMgKi8KICAgIGxldCBkaXN0OyAgICAgICAgICAgICAgICAgICAvKiBtYXRjaCBkaXN0YW5jZSAqLwogICAgbGV0IGZyb207ICAgICAgICAgICAgICAgICAgIC8qIHdoZXJlIHRvIGNvcHkgbWF0Y2ggZnJvbSAqLwogICAgbGV0IGZyb21fc291cmNlOwoKCiAgICBsZXQgaW5wdXQsIG91dHB1dDsgLy8gSlMgc3BlY2lmaWMsIGJlY2F1c2Ugd2UgaGF2ZSBubyBwb2ludGVycwoKICAgIC8qIGNvcHkgc3RhdGUgdG8gbG9jYWwgdmFyaWFibGVzICovCiAgICBjb25zdCBzdGF0ZSA9IHN0cm0uc3RhdGU7CiAgICAvL2hlcmUgPSBzdGF0ZS5oZXJlOwogICAgX2luID0gc3RybS5uZXh0X2luOwogICAgaW5wdXQgPSBzdHJtLmlucHV0OwogICAgbGFzdCA9IF9pbiArIChzdHJtLmF2YWlsX2luIC0gNSk7CiAgICBfb3V0ID0gc3RybS5uZXh0X291dDsKICAgIG91dHB1dCA9IHN0cm0ub3V0cHV0OwogICAgYmVnID0gX291dCAtIChzdGFydCAtIHN0cm0uYXZhaWxfb3V0KTsKICAgIGVuZCA9IF9vdXQgKyAoc3RybS5hdmFpbF9vdXQgLSAyNTcpOwogIC8vI2lmZGVmIElORkxBVEVfU1RSSUNUCiAgICBkbWF4ID0gc3RhdGUuZG1heDsKICAvLyNlbmRpZgogICAgd3NpemUgPSBzdGF0ZS53c2l6ZTsKICAgIHdoYXZlID0gc3RhdGUud2hhdmU7CiAgICB3bmV4dCA9IHN0YXRlLnduZXh0OwogICAgc193aW5kb3cgPSBzdGF0ZS53aW5kb3c7CiAgICBob2xkID0gc3RhdGUuaG9sZDsKICAgIGJpdHMgPSBzdGF0ZS5iaXRzOwogICAgbGNvZGUgPSBzdGF0ZS5sZW5jb2RlOwogICAgZGNvZGUgPSBzdGF0ZS5kaXN0Y29kZTsKICAgIGxtYXNrID0gKDEgPDwgc3RhdGUubGVuYml0cykgLSAxOwogICAgZG1hc2sgPSAoMSA8PCBzdGF0ZS5kaXN0Yml0cykgLSAxOwoKCiAgICAvKiBkZWNvZGUgbGl0ZXJhbHMgYW5kIGxlbmd0aC9kaXN0YW5jZXMgdW50aWwgZW5kLW9mLWJsb2NrIG9yIG5vdCBlbm91Z2gKICAgICAgIGlucHV0IGRhdGEgb3Igb3V0cHV0IHNwYWNlICovCgogICAgdG9wOgogICAgZG8gewogICAgICBpZiAoYml0cyA8IDE1KSB7CiAgICAgICAgaG9sZCArPSBpbnB1dFtfaW4rK10gPDwgYml0czsKICAgICAgICBiaXRzICs9IDg7CiAgICAgICAgaG9sZCArPSBpbnB1dFtfaW4rK10gPDwgYml0czsKICAgICAgICBiaXRzICs9IDg7CiAgICAgIH0KCiAgICAgIGhlcmUgPSBsY29kZVtob2xkICYgbG1hc2tdOwoKICAgICAgZG9sZW46CiAgICAgIGZvciAoOzspIHsgLy8gR290byBlbXVsYXRpb24KICAgICAgICBvcCA9IGhlcmUgPj4+IDI0LypoZXJlLmJpdHMqLzsKICAgICAgICBob2xkID4+Pj0gb3A7CiAgICAgICAgYml0cyAtPSBvcDsKICAgICAgICBvcCA9IChoZXJlID4+PiAxNikgJiAweGZmLypoZXJlLm9wKi87CiAgICAgICAgaWYgKG9wID09PSAwKSB7ICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBsaXRlcmFsICovCiAgICAgICAgICAvL1RyYWNldnYoKHN0ZGVyciwgaGVyZS52YWwgPj0gMHgyMCAmJiBoZXJlLnZhbCA8IDB4N2YgPwogICAgICAgICAgLy8gICAgICAgICJpbmZsYXRlOiAgICAgICAgIGxpdGVyYWwgJyVjJ1xuIiA6CiAgICAgICAgICAvLyAgICAgICAgImluZmxhdGU6ICAgICAgICAgbGl0ZXJhbCAweCUwMnhcbiIsIGhlcmUudmFsKSk7CiAgICAgICAgICBvdXRwdXRbX291dCsrXSA9IGhlcmUgJiAweGZmZmYvKmhlcmUudmFsKi87CiAgICAgICAgfQogICAgICAgIGVsc2UgaWYgKG9wICYgMTYpIHsgICAgICAgICAgICAgICAgICAgICAvKiBsZW5ndGggYmFzZSAqLwogICAgICAgICAgbGVuID0gaGVyZSAmIDB4ZmZmZi8qaGVyZS52YWwqLzsKICAgICAgICAgIG9wICY9IDE1OyAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIG51bWJlciBvZiBleHRyYSBiaXRzICovCiAgICAgICAgICBpZiAob3ApIHsKICAgICAgICAgICAgaWYgKGJpdHMgPCBvcCkgewogICAgICAgICAgICAgIGhvbGQgKz0gaW5wdXRbX2luKytdIDw8IGJpdHM7CiAgICAgICAgICAgICAgYml0cyArPSA4OwogICAgICAgICAgICB9CiAgICAgICAgICAgIGxlbiArPSBob2xkICYgKCgxIDw8IG9wKSAtIDEpOwogICAgICAgICAgICBob2xkID4+Pj0gb3A7CiAgICAgICAgICAgIGJpdHMgLT0gb3A7CiAgICAgICAgICB9CiAgICAgICAgICAvL1RyYWNldnYoKHN0ZGVyciwgImluZmxhdGU6ICAgICAgICAgbGVuZ3RoICV1XG4iLCBsZW4pKTsKICAgICAgICAgIGlmIChiaXRzIDwgMTUpIHsKICAgICAgICAgICAgaG9sZCArPSBpbnB1dFtfaW4rK10gPDwgYml0czsKICAgICAgICAgICAgYml0cyArPSA4OwogICAgICAgICAgICBob2xkICs9IGlucHV0W19pbisrXSA8PCBiaXRzOwogICAgICAgICAgICBiaXRzICs9IDg7CiAgICAgICAgICB9CiAgICAgICAgICBoZXJlID0gZGNvZGVbaG9sZCAmIGRtYXNrXTsKCiAgICAgICAgICBkb2Rpc3Q6CiAgICAgICAgICBmb3IgKDs7KSB7IC8vIGdvdG8gZW11bGF0aW9uCiAgICAgICAgICAgIG9wID0gaGVyZSA+Pj4gMjQvKmhlcmUuYml0cyovOwogICAgICAgICAgICBob2xkID4+Pj0gb3A7CiAgICAgICAgICAgIGJpdHMgLT0gb3A7CiAgICAgICAgICAgIG9wID0gKGhlcmUgPj4+IDE2KSAmIDB4ZmYvKmhlcmUub3AqLzsKCiAgICAgICAgICAgIGlmIChvcCAmIDE2KSB7ICAgICAgICAgICAgICAgICAgICAgIC8qIGRpc3RhbmNlIGJhc2UgKi8KICAgICAgICAgICAgICBkaXN0ID0gaGVyZSAmIDB4ZmZmZi8qaGVyZS52YWwqLzsKICAgICAgICAgICAgICBvcCAmPSAxNTsgICAgICAgICAgICAgICAgICAgICAgIC8qIG51bWJlciBvZiBleHRyYSBiaXRzICovCiAgICAgICAgICAgICAgaWYgKGJpdHMgPCBvcCkgewogICAgICAgICAgICAgICAgaG9sZCArPSBpbnB1dFtfaW4rK10gPDwgYml0czsKICAgICAgICAgICAgICAgIGJpdHMgKz0gODsKICAgICAgICAgICAgICAgIGlmIChiaXRzIDwgb3ApIHsKICAgICAgICAgICAgICAgICAgaG9sZCArPSBpbnB1dFtfaW4rK10gPDwgYml0czsKICAgICAgICAgICAgICAgICAgYml0cyArPSA4OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBkaXN0ICs9IGhvbGQgJiAoKDEgPDwgb3ApIC0gMSk7CiAgLy8jaWZkZWYgSU5GTEFURV9TVFJJQ1QKICAgICAgICAgICAgICBpZiAoZGlzdCA+IGRtYXgpIHsKICAgICAgICAgICAgICAgIHN0cm0ubXNnID0gJ2ludmFsaWQgZGlzdGFuY2UgdG9vIGZhciBiYWNrJzsKICAgICAgICAgICAgICAgIHN0YXRlLm1vZGUgPSBCQUQkMTsKICAgICAgICAgICAgICAgIGJyZWFrIHRvcDsKICAgICAgICAgICAgICB9CiAgLy8jZW5kaWYKICAgICAgICAgICAgICBob2xkID4+Pj0gb3A7CiAgICAgICAgICAgICAgYml0cyAtPSBvcDsKICAgICAgICAgICAgICAvL1RyYWNldnYoKHN0ZGVyciwgImluZmxhdGU6ICAgICAgICAgZGlzdGFuY2UgJXVcbiIsIGRpc3QpKTsKICAgICAgICAgICAgICBvcCA9IF9vdXQgLSBiZWc7ICAgICAgICAgICAgICAgIC8qIG1heCBkaXN0YW5jZSBpbiBvdXRwdXQgKi8KICAgICAgICAgICAgICBpZiAoZGlzdCA+IG9wKSB7ICAgICAgICAgICAgICAgIC8qIHNlZSBpZiBjb3B5IGZyb20gd2luZG93ICovCiAgICAgICAgICAgICAgICBvcCA9IGRpc3QgLSBvcDsgICAgICAgICAgICAgICAvKiBkaXN0YW5jZSBiYWNrIGluIHdpbmRvdyAqLwogICAgICAgICAgICAgICAgaWYgKG9wID4gd2hhdmUpIHsKICAgICAgICAgICAgICAgICAgaWYgKHN0YXRlLnNhbmUpIHsKICAgICAgICAgICAgICAgICAgICBzdHJtLm1zZyA9ICdpbnZhbGlkIGRpc3RhbmNlIHRvbyBmYXIgYmFjayc7CiAgICAgICAgICAgICAgICAgICAgc3RhdGUubW9kZSA9IEJBRCQxOwogICAgICAgICAgICAgICAgICAgIGJyZWFrIHRvcDsKICAgICAgICAgICAgICAgICAgfQoKICAvLyAoISkgVGhpcyBibG9jayBpcyBkaXNhYmxlZCBpbiB6bGliIGRlZmF1bHRzLAogIC8vIGRvbid0IGVuYWJsZSBpdCBmb3IgYmluYXJ5IGNvbXBhdGliaWxpdHkKICAvLyNpZmRlZiBJTkZMQVRFX0FMTE9XX0lOVkFMSURfRElTVEFOQ0VfVE9PRkFSX0FSUlIKICAvLyAgICAgICAgICAgICAgICBpZiAobGVuIDw9IG9wIC0gd2hhdmUpIHsKICAvLyAgICAgICAgICAgICAgICAgIGRvIHsKICAvLyAgICAgICAgICAgICAgICAgICAgb3V0cHV0W19vdXQrK10gPSAwOwogIC8vICAgICAgICAgICAgICAgICAgfSB3aGlsZSAoLS1sZW4pOwogIC8vICAgICAgICAgICAgICAgICAgY29udGludWUgdG9wOwogIC8vICAgICAgICAgICAgICAgIH0KICAvLyAgICAgICAgICAgICAgICBsZW4gLT0gb3AgLSB3aGF2ZTsKICAvLyAgICAgICAgICAgICAgICBkbyB7CiAgLy8gICAgICAgICAgICAgICAgICBvdXRwdXRbX291dCsrXSA9IDA7CiAgLy8gICAgICAgICAgICAgICAgfSB3aGlsZSAoLS1vcCA+IHdoYXZlKTsKICAvLyAgICAgICAgICAgICAgICBpZiAob3AgPT09IDApIHsKICAvLyAgICAgICAgICAgICAgICAgIGZyb20gPSBfb3V0IC0gZGlzdDsKICAvLyAgICAgICAgICAgICAgICAgIGRvIHsKICAvLyAgICAgICAgICAgICAgICAgICAgb3V0cHV0W19vdXQrK10gPSBvdXRwdXRbZnJvbSsrXTsKICAvLyAgICAgICAgICAgICAgICAgIH0gd2hpbGUgKC0tbGVuKTsKICAvLyAgICAgICAgICAgICAgICAgIGNvbnRpbnVlIHRvcDsKICAvLyAgICAgICAgICAgICAgICB9CiAgLy8jZW5kaWYKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGZyb20gPSAwOyAvLyB3aW5kb3cgaW5kZXgKICAgICAgICAgICAgICAgIGZyb21fc291cmNlID0gc193aW5kb3c7CiAgICAgICAgICAgICAgICBpZiAod25leHQgPT09IDApIHsgICAgICAgICAgIC8qIHZlcnkgY29tbW9uIGNhc2UgKi8KICAgICAgICAgICAgICAgICAgZnJvbSArPSB3c2l6ZSAtIG9wOwogICAgICAgICAgICAgICAgICBpZiAob3AgPCBsZW4pIHsgICAgICAgICAvKiBzb21lIGZyb20gd2luZG93ICovCiAgICAgICAgICAgICAgICAgICAgbGVuIC09IG9wOwogICAgICAgICAgICAgICAgICAgIGRvIHsKICAgICAgICAgICAgICAgICAgICAgIG91dHB1dFtfb3V0KytdID0gc193aW5kb3dbZnJvbSsrXTsKICAgICAgICAgICAgICAgICAgICB9IHdoaWxlICgtLW9wKTsKICAgICAgICAgICAgICAgICAgICBmcm9tID0gX291dCAtIGRpc3Q7ICAvKiByZXN0IGZyb20gb3V0cHV0ICovCiAgICAgICAgICAgICAgICAgICAgZnJvbV9zb3VyY2UgPSBvdXRwdXQ7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKHduZXh0IDwgb3ApIHsgICAgICAvKiB3cmFwIGFyb3VuZCB3aW5kb3cgKi8KICAgICAgICAgICAgICAgICAgZnJvbSArPSB3c2l6ZSArIHduZXh0IC0gb3A7CiAgICAgICAgICAgICAgICAgIG9wIC09IHduZXh0OwogICAgICAgICAgICAgICAgICBpZiAob3AgPCBsZW4pIHsgICAgICAgICAvKiBzb21lIGZyb20gZW5kIG9mIHdpbmRvdyAqLwogICAgICAgICAgICAgICAgICAgIGxlbiAtPSBvcDsKICAgICAgICAgICAgICAgICAgICBkbyB7CiAgICAgICAgICAgICAgICAgICAgICBvdXRwdXRbX291dCsrXSA9IHNfd2luZG93W2Zyb20rK107CiAgICAgICAgICAgICAgICAgICAgfSB3aGlsZSAoLS1vcCk7CiAgICAgICAgICAgICAgICAgICAgZnJvbSA9IDA7CiAgICAgICAgICAgICAgICAgICAgaWYgKHduZXh0IDwgbGVuKSB7ICAvKiBzb21lIGZyb20gc3RhcnQgb2Ygd2luZG93ICovCiAgICAgICAgICAgICAgICAgICAgICBvcCA9IHduZXh0OwogICAgICAgICAgICAgICAgICAgICAgbGVuIC09IG9wOwogICAgICAgICAgICAgICAgICAgICAgZG8gewogICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXRbX291dCsrXSA9IHNfd2luZG93W2Zyb20rK107CiAgICAgICAgICAgICAgICAgICAgICB9IHdoaWxlICgtLW9wKTsKICAgICAgICAgICAgICAgICAgICAgIGZyb20gPSBfb3V0IC0gZGlzdDsgICAgICAvKiByZXN0IGZyb20gb3V0cHV0ICovCiAgICAgICAgICAgICAgICAgICAgICBmcm9tX3NvdXJjZSA9IG91dHB1dDsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgeyAgICAgICAgICAgICAgICAgICAgICAvKiBjb250aWd1b3VzIGluIHdpbmRvdyAqLwogICAgICAgICAgICAgICAgICBmcm9tICs9IHduZXh0IC0gb3A7CiAgICAgICAgICAgICAgICAgIGlmIChvcCA8IGxlbikgeyAgICAgICAgIC8qIHNvbWUgZnJvbSB3aW5kb3cgKi8KICAgICAgICAgICAgICAgICAgICBsZW4gLT0gb3A7CiAgICAgICAgICAgICAgICAgICAgZG8gewogICAgICAgICAgICAgICAgICAgICAgb3V0cHV0W19vdXQrK10gPSBzX3dpbmRvd1tmcm9tKytdOwogICAgICAgICAgICAgICAgICAgIH0gd2hpbGUgKC0tb3ApOwogICAgICAgICAgICAgICAgICAgIGZyb20gPSBfb3V0IC0gZGlzdDsgIC8qIHJlc3QgZnJvbSBvdXRwdXQgKi8KICAgICAgICAgICAgICAgICAgICBmcm9tX3NvdXJjZSA9IG91dHB1dDsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgd2hpbGUgKGxlbiA+IDIpIHsKICAgICAgICAgICAgICAgICAgb3V0cHV0W19vdXQrK10gPSBmcm9tX3NvdXJjZVtmcm9tKytdOwogICAgICAgICAgICAgICAgICBvdXRwdXRbX291dCsrXSA9IGZyb21fc291cmNlW2Zyb20rK107CiAgICAgICAgICAgICAgICAgIG91dHB1dFtfb3V0KytdID0gZnJvbV9zb3VyY2VbZnJvbSsrXTsKICAgICAgICAgICAgICAgICAgbGVuIC09IDM7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAobGVuKSB7CiAgICAgICAgICAgICAgICAgIG91dHB1dFtfb3V0KytdID0gZnJvbV9zb3VyY2VbZnJvbSsrXTsKICAgICAgICAgICAgICAgICAgaWYgKGxlbiA+IDEpIHsKICAgICAgICAgICAgICAgICAgICBvdXRwdXRbX291dCsrXSA9IGZyb21fc291cmNlW2Zyb20rK107CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICBmcm9tID0gX291dCAtIGRpc3Q7ICAgICAgICAgIC8qIGNvcHkgZGlyZWN0IGZyb20gb3V0cHV0ICovCiAgICAgICAgICAgICAgICBkbyB7ICAgICAgICAgICAgICAgICAgICAgICAgLyogbWluaW11bSBsZW5ndGggaXMgdGhyZWUgKi8KICAgICAgICAgICAgICAgICAgb3V0cHV0W19vdXQrK10gPSBvdXRwdXRbZnJvbSsrXTsKICAgICAgICAgICAgICAgICAgb3V0cHV0W19vdXQrK10gPSBvdXRwdXRbZnJvbSsrXTsKICAgICAgICAgICAgICAgICAgb3V0cHV0W19vdXQrK10gPSBvdXRwdXRbZnJvbSsrXTsKICAgICAgICAgICAgICAgICAgbGVuIC09IDM7CiAgICAgICAgICAgICAgICB9IHdoaWxlIChsZW4gPiAyKTsKICAgICAgICAgICAgICAgIGlmIChsZW4pIHsKICAgICAgICAgICAgICAgICAgb3V0cHV0W19vdXQrK10gPSBvdXRwdXRbZnJvbSsrXTsKICAgICAgICAgICAgICAgICAgaWYgKGxlbiA+IDEpIHsKICAgICAgICAgICAgICAgICAgICBvdXRwdXRbX291dCsrXSA9IG91dHB1dFtmcm9tKytdOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgaWYgKChvcCAmIDY0KSA9PT0gMCkgeyAgICAgICAgICAvKiAybmQgbGV2ZWwgZGlzdGFuY2UgY29kZSAqLwogICAgICAgICAgICAgIGhlcmUgPSBkY29kZVsoaGVyZSAmIDB4ZmZmZikvKmhlcmUudmFsKi8gKyAoaG9sZCAmICgoMSA8PCBvcCkgLSAxKSldOwogICAgICAgICAgICAgIGNvbnRpbnVlIGRvZGlzdDsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICBzdHJtLm1zZyA9ICdpbnZhbGlkIGRpc3RhbmNlIGNvZGUnOwogICAgICAgICAgICAgIHN0YXRlLm1vZGUgPSBCQUQkMTsKICAgICAgICAgICAgICBicmVhayB0b3A7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGJyZWFrOyAvLyBuZWVkIHRvIGVtdWxhdGUgZ290byB2aWEgImNvbnRpbnVlIgogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBlbHNlIGlmICgob3AgJiA2NCkgPT09IDApIHsgICAgICAgICAgICAgIC8qIDJuZCBsZXZlbCBsZW5ndGggY29kZSAqLwogICAgICAgICAgaGVyZSA9IGxjb2RlWyhoZXJlICYgMHhmZmZmKS8qaGVyZS52YWwqLyArIChob2xkICYgKCgxIDw8IG9wKSAtIDEpKV07CiAgICAgICAgICBjb250aW51ZSBkb2xlbjsKICAgICAgICB9CiAgICAgICAgZWxzZSBpZiAob3AgJiAzMikgeyAgICAgICAgICAgICAgICAgICAgIC8qIGVuZC1vZi1ibG9jayAqLwogICAgICAgICAgLy9UcmFjZXZ2KChzdGRlcnIsICJpbmZsYXRlOiAgICAgICAgIGVuZCBvZiBibG9ja1xuIikpOwogICAgICAgICAgc3RhdGUubW9kZSA9IFRZUEUkMTsKICAgICAgICAgIGJyZWFrIHRvcDsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICBzdHJtLm1zZyA9ICdpbnZhbGlkIGxpdGVyYWwvbGVuZ3RoIGNvZGUnOwogICAgICAgICAgc3RhdGUubW9kZSA9IEJBRCQxOwogICAgICAgICAgYnJlYWsgdG9wOwogICAgICAgIH0KCiAgICAgICAgYnJlYWs7IC8vIG5lZWQgdG8gZW11bGF0ZSBnb3RvIHZpYSAiY29udGludWUiCiAgICAgIH0KICAgIH0gd2hpbGUgKF9pbiA8IGxhc3QgJiYgX291dCA8IGVuZCk7CgogICAgLyogcmV0dXJuIHVudXNlZCBieXRlcyAob24gZW50cnksIGJpdHMgPCA4LCBzbyBpbiB3b24ndCBnbyB0b28gZmFyIGJhY2spICovCiAgICBsZW4gPSBiaXRzID4+IDM7CiAgICBfaW4gLT0gbGVuOwogICAgYml0cyAtPSBsZW4gPDwgMzsKICAgIGhvbGQgJj0gKDEgPDwgYml0cykgLSAxOwoKICAgIC8qIHVwZGF0ZSBzdGF0ZSBhbmQgcmV0dXJuICovCiAgICBzdHJtLm5leHRfaW4gPSBfaW47CiAgICBzdHJtLm5leHRfb3V0ID0gX291dDsKICAgIHN0cm0uYXZhaWxfaW4gPSAoX2luIDwgbGFzdCA/IDUgKyAobGFzdCAtIF9pbikgOiA1IC0gKF9pbiAtIGxhc3QpKTsKICAgIHN0cm0uYXZhaWxfb3V0ID0gKF9vdXQgPCBlbmQgPyAyNTcgKyAoZW5kIC0gX291dCkgOiAyNTcgLSAoX291dCAtIGVuZCkpOwogICAgc3RhdGUuaG9sZCA9IGhvbGQ7CiAgICBzdGF0ZS5iaXRzID0gYml0czsKICAgIHJldHVybjsKICB9OwoKICAvLyAoQykgMTk5NS0yMDEzIEplYW4tbG91cCBHYWlsbHkgYW5kIE1hcmsgQWRsZXIKICAvLyAoQykgMjAxNC0yMDE3IFZpdGFseSBQdXpyaW4gYW5kIEFuZHJleSBUdXBpdHNpbgogIC8vCiAgLy8gVGhpcyBzb2Z0d2FyZSBpcyBwcm92aWRlZCAnYXMtaXMnLCB3aXRob3V0IGFueSBleHByZXNzIG9yIGltcGxpZWQKICAvLyB3YXJyYW50eS4gSW4gbm8gZXZlbnQgd2lsbCB0aGUgYXV0aG9ycyBiZSBoZWxkIGxpYWJsZSBmb3IgYW55IGRhbWFnZXMKICAvLyBhcmlzaW5nIGZyb20gdGhlIHVzZSBvZiB0aGlzIHNvZnR3YXJlLgogIC8vCiAgLy8gUGVybWlzc2lvbiBpcyBncmFudGVkIHRvIGFueW9uZSB0byB1c2UgdGhpcyBzb2Z0d2FyZSBmb3IgYW55IHB1cnBvc2UsCiAgLy8gaW5jbHVkaW5nIGNvbW1lcmNpYWwgYXBwbGljYXRpb25zLCBhbmQgdG8gYWx0ZXIgaXQgYW5kIHJlZGlzdHJpYnV0ZSBpdAogIC8vIGZyZWVseSwgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIHJlc3RyaWN0aW9uczoKICAvLwogIC8vIDEuIFRoZSBvcmlnaW4gb2YgdGhpcyBzb2Z0d2FyZSBtdXN0IG5vdCBiZSBtaXNyZXByZXNlbnRlZDsgeW91IG11c3Qgbm90CiAgLy8gICBjbGFpbSB0aGF0IHlvdSB3cm90ZSB0aGUgb3JpZ2luYWwgc29mdHdhcmUuIElmIHlvdSB1c2UgdGhpcyBzb2Z0d2FyZQogIC8vICAgaW4gYSBwcm9kdWN0LCBhbiBhY2tub3dsZWRnbWVudCBpbiB0aGUgcHJvZHVjdCBkb2N1bWVudGF0aW9uIHdvdWxkIGJlCiAgLy8gICBhcHByZWNpYXRlZCBidXQgaXMgbm90IHJlcXVpcmVkLgogIC8vIDIuIEFsdGVyZWQgc291cmNlIHZlcnNpb25zIG11c3QgYmUgcGxhaW5seSBtYXJrZWQgYXMgc3VjaCwgYW5kIG11c3Qgbm90IGJlCiAgLy8gICBtaXNyZXByZXNlbnRlZCBhcyBiZWluZyB0aGUgb3JpZ2luYWwgc29mdHdhcmUuCiAgLy8gMy4gVGhpcyBub3RpY2UgbWF5IG5vdCBiZSByZW1vdmVkIG9yIGFsdGVyZWQgZnJvbSBhbnkgc291cmNlIGRpc3RyaWJ1dGlvbi4KCiAgY29uc3QgTUFYQklUUyA9IDE1OwogIGNvbnN0IEVOT1VHSF9MRU5TJDEgPSA4NTI7CiAgY29uc3QgRU5PVUdIX0RJU1RTJDEgPSA1OTI7CiAgLy9jb25zdCBFTk9VR0ggPSAoRU5PVUdIX0xFTlMrRU5PVUdIX0RJU1RTKTsKCiAgY29uc3QgQ09ERVMkMSA9IDA7CiAgY29uc3QgTEVOUyQxID0gMTsKICBjb25zdCBESVNUUyQxID0gMjsKCiAgY29uc3QgbGJhc2UgPSBuZXcgVWludDE2QXJyYXkoWyAvKiBMZW5ndGggY29kZXMgMjU3Li4yODUgYmFzZSAqLwogICAgMywgNCwgNSwgNiwgNywgOCwgOSwgMTAsIDExLCAxMywgMTUsIDE3LCAxOSwgMjMsIDI3LCAzMSwKICAgIDM1LCA0MywgNTEsIDU5LCA2NywgODMsIDk5LCAxMTUsIDEzMSwgMTYzLCAxOTUsIDIyNywgMjU4LCAwLCAwCiAgXSk7CgogIGNvbnN0IGxleHQgPSBuZXcgVWludDhBcnJheShbIC8qIExlbmd0aCBjb2RlcyAyNTcuLjI4NSBleHRyYSAqLwogICAgMTYsIDE2LCAxNiwgMTYsIDE2LCAxNiwgMTYsIDE2LCAxNywgMTcsIDE3LCAxNywgMTgsIDE4LCAxOCwgMTgsCiAgICAxOSwgMTksIDE5LCAxOSwgMjAsIDIwLCAyMCwgMjAsIDIxLCAyMSwgMjEsIDIxLCAxNiwgNzIsIDc4CiAgXSk7CgogIGNvbnN0IGRiYXNlID0gbmV3IFVpbnQxNkFycmF5KFsgLyogRGlzdGFuY2UgY29kZXMgMC4uMjkgYmFzZSAqLwogICAgMSwgMiwgMywgNCwgNSwgNywgOSwgMTMsIDE3LCAyNSwgMzMsIDQ5LCA2NSwgOTcsIDEyOSwgMTkzLAogICAgMjU3LCAzODUsIDUxMywgNzY5LCAxMDI1LCAxNTM3LCAyMDQ5LCAzMDczLCA0MDk3LCA2MTQ1LAogICAgODE5MywgMTIyODksIDE2Mzg1LCAyNDU3NywgMCwgMAogIF0pOwoKICBjb25zdCBkZXh0ID0gbmV3IFVpbnQ4QXJyYXkoWyAvKiBEaXN0YW5jZSBjb2RlcyAwLi4yOSBleHRyYSAqLwogICAgMTYsIDE2LCAxNiwgMTYsIDE3LCAxNywgMTgsIDE4LCAxOSwgMTksIDIwLCAyMCwgMjEsIDIxLCAyMiwgMjIsCiAgICAyMywgMjMsIDI0LCAyNCwgMjUsIDI1LCAyNiwgMjYsIDI3LCAyNywKICAgIDI4LCAyOCwgMjksIDI5LCA2NCwgNjQKICBdKTsKCiAgY29uc3QgaW5mbGF0ZV90YWJsZSA9ICh0eXBlLCBsZW5zLCBsZW5zX2luZGV4LCBjb2RlcywgdGFibGUsIHRhYmxlX2luZGV4LCB3b3JrLCBvcHRzKSA9PgogIHsKICAgIGNvbnN0IGJpdHMgPSBvcHRzLmJpdHM7CiAgICAgICAgLy9oZXJlID0gb3B0cy5oZXJlOyAvKiB0YWJsZSBlbnRyeSBmb3IgZHVwbGljYXRpb24gKi8KCiAgICBsZXQgbGVuID0gMDsgICAgICAgICAgICAgICAvKiBhIGNvZGUncyBsZW5ndGggaW4gYml0cyAqLwogICAgbGV0IHN5bSA9IDA7ICAgICAgICAgICAgICAgLyogaW5kZXggb2YgY29kZSBzeW1ib2xzICovCiAgICBsZXQgbWluID0gMCwgbWF4ID0gMDsgICAgICAgICAgLyogbWluaW11bSBhbmQgbWF4aW11bSBjb2RlIGxlbmd0aHMgKi8KICAgIGxldCByb290ID0gMDsgICAgICAgICAgICAgIC8qIG51bWJlciBvZiBpbmRleCBiaXRzIGZvciByb290IHRhYmxlICovCiAgICBsZXQgY3VyciA9IDA7ICAgICAgICAgICAgICAvKiBudW1iZXIgb2YgaW5kZXggYml0cyBmb3IgY3VycmVudCB0YWJsZSAqLwogICAgbGV0IGRyb3AgPSAwOyAgICAgICAgICAgICAgLyogY29kZSBiaXRzIHRvIGRyb3AgZm9yIHN1Yi10YWJsZSAqLwogICAgbGV0IGxlZnQgPSAwOyAgICAgICAgICAgICAgICAgICAvKiBudW1iZXIgb2YgcHJlZml4IGNvZGVzIGF2YWlsYWJsZSAqLwogICAgbGV0IHVzZWQgPSAwOyAgICAgICAgICAgICAgLyogY29kZSBlbnRyaWVzIGluIHRhYmxlIHVzZWQgKi8KICAgIGxldCBodWZmID0gMDsgICAgICAgICAgICAgIC8qIEh1ZmZtYW4gY29kZSAqLwogICAgbGV0IGluY3I7ICAgICAgICAgICAgICAvKiBmb3IgaW5jcmVtZW50aW5nIGNvZGUsIGluZGV4ICovCiAgICBsZXQgZmlsbDsgICAgICAgICAgICAgIC8qIGluZGV4IGZvciByZXBsaWNhdGluZyBlbnRyaWVzICovCiAgICBsZXQgbG93OyAgICAgICAgICAgICAgIC8qIGxvdyBiaXRzIGZvciBjdXJyZW50IHJvb3QgZW50cnkgKi8KICAgIGxldCBtYXNrOyAgICAgICAgICAgICAgLyogbWFzayBmb3IgbG93IHJvb3QgYml0cyAqLwogICAgbGV0IG5leHQ7ICAgICAgICAgICAgIC8qIG5leHQgYXZhaWxhYmxlIHNwYWNlIGluIHRhYmxlICovCiAgICBsZXQgYmFzZSA9IG51bGw7ICAgICAvKiBiYXNlIHZhbHVlIHRhYmxlIHRvIHVzZSAqLwogICAgbGV0IGJhc2VfaW5kZXggPSAwOwogIC8vICBsZXQgc2hvZXh0cmE7ICAgIC8qIGV4dHJhIGJpdHMgdGFibGUgdG8gdXNlICovCiAgICBsZXQgZW5kOyAgICAgICAgICAgICAgICAgICAgLyogdXNlIGJhc2UgYW5kIGV4dHJhIGZvciBzeW1ib2wgPiBlbmQgKi8KICAgIGNvbnN0IGNvdW50ID0gbmV3IFVpbnQxNkFycmF5KE1BWEJJVFMgKyAxKTsgLy9bTUFYQklUUysxXTsgICAgLyogbnVtYmVyIG9mIGNvZGVzIG9mIGVhY2ggbGVuZ3RoICovCiAgICBjb25zdCBvZmZzID0gbmV3IFVpbnQxNkFycmF5KE1BWEJJVFMgKyAxKTsgLy9bTUFYQklUUysxXTsgICAgIC8qIG9mZnNldHMgaW4gdGFibGUgZm9yIGVhY2ggbGVuZ3RoICovCiAgICBsZXQgZXh0cmEgPSBudWxsOwogICAgbGV0IGV4dHJhX2luZGV4ID0gMDsKCiAgICBsZXQgaGVyZV9iaXRzLCBoZXJlX29wLCBoZXJlX3ZhbDsKCiAgICAvKgogICAgIFByb2Nlc3MgYSBzZXQgb2YgY29kZSBsZW5ndGhzIHRvIGNyZWF0ZSBhIGNhbm9uaWNhbCBIdWZmbWFuIGNvZGUuICBUaGUKICAgICBjb2RlIGxlbmd0aHMgYXJlIGxlbnNbMC4uY29kZXMtMV0uICBFYWNoIGxlbmd0aCBjb3JyZXNwb25kcyB0byB0aGUKICAgICBzeW1ib2xzIDAuLmNvZGVzLTEuICBUaGUgSHVmZm1hbiBjb2RlIGlzIGdlbmVyYXRlZCBieSBmaXJzdCBzb3J0aW5nIHRoZQogICAgIHN5bWJvbHMgYnkgbGVuZ3RoIGZyb20gc2hvcnQgdG8gbG9uZywgYW5kIHJldGFpbmluZyB0aGUgc3ltYm9sIG9yZGVyCiAgICAgZm9yIGNvZGVzIHdpdGggZXF1YWwgbGVuZ3Rocy4gIFRoZW4gdGhlIGNvZGUgc3RhcnRzIHdpdGggYWxsIHplcm8gYml0cwogICAgIGZvciB0aGUgZmlyc3QgY29kZSBvZiB0aGUgc2hvcnRlc3QgbGVuZ3RoLCBhbmQgdGhlIGNvZGVzIGFyZSBpbnRlZ2VyCiAgICAgaW5jcmVtZW50cyBmb3IgdGhlIHNhbWUgbGVuZ3RoLCBhbmQgemVyb3MgYXJlIGFwcGVuZGVkIGFzIHRoZSBsZW5ndGgKICAgICBpbmNyZWFzZXMuICBGb3IgdGhlIGRlZmxhdGUgZm9ybWF0LCB0aGVzZSBiaXRzIGFyZSBzdG9yZWQgYmFja3dhcmRzCiAgICAgZnJvbSB0aGVpciBtb3JlIG5hdHVyYWwgaW50ZWdlciBpbmNyZW1lbnQgb3JkZXJpbmcsIGFuZCBzbyB3aGVuIHRoZQogICAgIGRlY29kaW5nIHRhYmxlcyBhcmUgYnVpbHQgaW4gdGhlIGxhcmdlIGxvb3AgYmVsb3csIHRoZSBpbnRlZ2VyIGNvZGVzCiAgICAgYXJlIGluY3JlbWVudGVkIGJhY2t3YXJkcy4KCiAgICAgVGhpcyByb3V0aW5lIGFzc3VtZXMsIGJ1dCBkb2VzIG5vdCBjaGVjaywgdGhhdCBhbGwgb2YgdGhlIGVudHJpZXMgaW4KICAgICBsZW5zW10gYXJlIGluIHRoZSByYW5nZSAwLi5NQVhCSVRTLiAgVGhlIGNhbGxlciBtdXN0IGFzc3VyZSB0aGlzLgogICAgIDEuLk1BWEJJVFMgaXMgaW50ZXJwcmV0ZWQgYXMgdGhhdCBjb2RlIGxlbmd0aC4gIHplcm8gbWVhbnMgdGhhdCB0aGF0CiAgICAgc3ltYm9sIGRvZXMgbm90IG9jY3VyIGluIHRoaXMgY29kZS4KCiAgICAgVGhlIGNvZGVzIGFyZSBzb3J0ZWQgYnkgY29tcHV0aW5nIGEgY291bnQgb2YgY29kZXMgZm9yIGVhY2ggbGVuZ3RoLAogICAgIGNyZWF0aW5nIGZyb20gdGhhdCBhIHRhYmxlIG9mIHN0YXJ0aW5nIGluZGljZXMgZm9yIGVhY2ggbGVuZ3RoIGluIHRoZQogICAgIHNvcnRlZCB0YWJsZSwgYW5kIHRoZW4gZW50ZXJpbmcgdGhlIHN5bWJvbHMgaW4gb3JkZXIgaW4gdGhlIHNvcnRlZAogICAgIHRhYmxlLiAgVGhlIHNvcnRlZCB0YWJsZSBpcyB3b3JrW10sIHdpdGggdGhhdCBzcGFjZSBiZWluZyBwcm92aWRlZCBieQogICAgIHRoZSBjYWxsZXIuCgogICAgIFRoZSBsZW5ndGggY291bnRzIGFyZSB1c2VkIGZvciBvdGhlciBwdXJwb3NlcyBhcyB3ZWxsLCBpLmUuIGZpbmRpbmcKICAgICB0aGUgbWluaW11bSBhbmQgbWF4aW11bSBsZW5ndGggY29kZXMsIGRldGVybWluaW5nIGlmIHRoZXJlIGFyZSBhbnkKICAgICBjb2RlcyBhdCBhbGwsIGNoZWNraW5nIGZvciBhIHZhbGlkIHNldCBvZiBsZW5ndGhzLCBhbmQgbG9va2luZyBhaGVhZAogICAgIGF0IGxlbmd0aCBjb3VudHMgdG8gZGV0ZXJtaW5lIHN1Yi10YWJsZSBzaXplcyB3aGVuIGJ1aWxkaW5nIHRoZQogICAgIGRlY29kaW5nIHRhYmxlcy4KICAgICAqLwoKICAgIC8qIGFjY3VtdWxhdGUgbGVuZ3RocyBmb3IgY29kZXMgKGFzc3VtZXMgbGVuc1tdIGFsbCBpbiAwLi5NQVhCSVRTKSAqLwogICAgZm9yIChsZW4gPSAwOyBsZW4gPD0gTUFYQklUUzsgbGVuKyspIHsKICAgICAgY291bnRbbGVuXSA9IDA7CiAgICB9CiAgICBmb3IgKHN5bSA9IDA7IHN5bSA8IGNvZGVzOyBzeW0rKykgewogICAgICBjb3VudFtsZW5zW2xlbnNfaW5kZXggKyBzeW1dXSsrOwogICAgfQoKICAgIC8qIGJvdW5kIGNvZGUgbGVuZ3RocywgZm9yY2Ugcm9vdCB0byBiZSB3aXRoaW4gY29kZSBsZW5ndGhzICovCiAgICByb290ID0gYml0czsKICAgIGZvciAobWF4ID0gTUFYQklUUzsgbWF4ID49IDE7IG1heC0tKSB7CiAgICAgIGlmIChjb3VudFttYXhdICE9PSAwKSB7IGJyZWFrOyB9CiAgICB9CiAgICBpZiAocm9vdCA+IG1heCkgewogICAgICByb290ID0gbWF4OwogICAgfQogICAgaWYgKG1heCA9PT0gMCkgeyAgICAgICAgICAgICAgICAgICAgIC8qIG5vIHN5bWJvbHMgdG8gY29kZSBhdCBhbGwgKi8KICAgICAgLy90YWJsZS5vcFtvcHRzLnRhYmxlX2luZGV4XSA9IDY0OyAgLy9oZXJlLm9wID0gKHZhciBjaGFyKTY0OyAgICAvKiBpbnZhbGlkIGNvZGUgbWFya2VyICovCiAgICAgIC8vdGFibGUuYml0c1tvcHRzLnRhYmxlX2luZGV4XSA9IDE7ICAgLy9oZXJlLmJpdHMgPSAodmFyIGNoYXIpMTsKICAgICAgLy90YWJsZS52YWxbb3B0cy50YWJsZV9pbmRleCsrXSA9IDA7ICAgLy9oZXJlLnZhbCA9ICh2YXIgc2hvcnQpMDsKICAgICAgdGFibGVbdGFibGVfaW5kZXgrK10gPSAoMSA8PCAyNCkgfCAoNjQgPDwgMTYpIHwgMDsKCgogICAgICAvL3RhYmxlLm9wW29wdHMudGFibGVfaW5kZXhdID0gNjQ7CiAgICAgIC8vdGFibGUuYml0c1tvcHRzLnRhYmxlX2luZGV4XSA9IDE7CiAgICAgIC8vdGFibGUudmFsW29wdHMudGFibGVfaW5kZXgrK10gPSAwOwogICAgICB0YWJsZVt0YWJsZV9pbmRleCsrXSA9ICgxIDw8IDI0KSB8ICg2NCA8PCAxNikgfCAwOwoKICAgICAgb3B0cy5iaXRzID0gMTsKICAgICAgcmV0dXJuIDA7ICAgICAvKiBubyBzeW1ib2xzLCBidXQgd2FpdCBmb3IgZGVjb2RpbmcgdG8gcmVwb3J0IGVycm9yICovCiAgICB9CiAgICBmb3IgKG1pbiA9IDE7IG1pbiA8IG1heDsgbWluKyspIHsKICAgICAgaWYgKGNvdW50W21pbl0gIT09IDApIHsgYnJlYWs7IH0KICAgIH0KICAgIGlmIChyb290IDwgbWluKSB7CiAgICAgIHJvb3QgPSBtaW47CiAgICB9CgogICAgLyogY2hlY2sgZm9yIGFuIG92ZXItc3Vic2NyaWJlZCBvciBpbmNvbXBsZXRlIHNldCBvZiBsZW5ndGhzICovCiAgICBsZWZ0ID0gMTsKICAgIGZvciAobGVuID0gMTsgbGVuIDw9IE1BWEJJVFM7IGxlbisrKSB7CiAgICAgIGxlZnQgPDw9IDE7CiAgICAgIGxlZnQgLT0gY291bnRbbGVuXTsKICAgICAgaWYgKGxlZnQgPCAwKSB7CiAgICAgICAgcmV0dXJuIC0xOwogICAgICB9ICAgICAgICAvKiBvdmVyLXN1YnNjcmliZWQgKi8KICAgIH0KICAgIGlmIChsZWZ0ID4gMCAmJiAodHlwZSA9PT0gQ09ERVMkMSB8fCBtYXggIT09IDEpKSB7CiAgICAgIHJldHVybiAtMTsgICAgICAgICAgICAgICAgICAgICAgLyogaW5jb21wbGV0ZSBzZXQgKi8KICAgIH0KCiAgICAvKiBnZW5lcmF0ZSBvZmZzZXRzIGludG8gc3ltYm9sIHRhYmxlIGZvciBlYWNoIGxlbmd0aCBmb3Igc29ydGluZyAqLwogICAgb2Zmc1sxXSA9IDA7CiAgICBmb3IgKGxlbiA9IDE7IGxlbiA8IE1BWEJJVFM7IGxlbisrKSB7CiAgICAgIG9mZnNbbGVuICsgMV0gPSBvZmZzW2xlbl0gKyBjb3VudFtsZW5dOwogICAgfQoKICAgIC8qIHNvcnQgc3ltYm9scyBieSBsZW5ndGgsIGJ5IHN5bWJvbCBvcmRlciB3aXRoaW4gZWFjaCBsZW5ndGggKi8KICAgIGZvciAoc3ltID0gMDsgc3ltIDwgY29kZXM7IHN5bSsrKSB7CiAgICAgIGlmIChsZW5zW2xlbnNfaW5kZXggKyBzeW1dICE9PSAwKSB7CiAgICAgICAgd29ya1tvZmZzW2xlbnNbbGVuc19pbmRleCArIHN5bV1dKytdID0gc3ltOwogICAgICB9CiAgICB9CgogICAgLyoKICAgICBDcmVhdGUgYW5kIGZpbGwgaW4gZGVjb2RpbmcgdGFibGVzLiAgSW4gdGhpcyBsb29wLCB0aGUgdGFibGUgYmVpbmcKICAgICBmaWxsZWQgaXMgYXQgbmV4dCBhbmQgaGFzIGN1cnIgaW5kZXggYml0cy4gIFRoZSBjb2RlIGJlaW5nIHVzZWQgaXMgaHVmZgogICAgIHdpdGggbGVuZ3RoIGxlbi4gIFRoYXQgY29kZSBpcyBjb252ZXJ0ZWQgdG8gYW4gaW5kZXggYnkgZHJvcHBpbmcgZHJvcAogICAgIGJpdHMgb2ZmIG9mIHRoZSBib3R0b20uICBGb3IgY29kZXMgd2hlcmUgbGVuIGlzIGxlc3MgdGhhbiBkcm9wICsgY3VyciwKICAgICB0aG9zZSB0b3AgZHJvcCArIGN1cnIgLSBsZW4gYml0cyBhcmUgaW5jcmVtZW50ZWQgdGhyb3VnaCBhbGwgdmFsdWVzIHRvCiAgICAgZmlsbCB0aGUgdGFibGUgd2l0aCByZXBsaWNhdGVkIGVudHJpZXMuCgogICAgIHJvb3QgaXMgdGhlIG51bWJlciBvZiBpbmRleCBiaXRzIGZvciB0aGUgcm9vdCB0YWJsZS4gIFdoZW4gbGVuIGV4Y2VlZHMKICAgICByb290LCBzdWItdGFibGVzIGFyZSBjcmVhdGVkIHBvaW50ZWQgdG8gYnkgdGhlIHJvb3QgZW50cnkgd2l0aCBhbiBpbmRleAogICAgIG9mIHRoZSBsb3cgcm9vdCBiaXRzIG9mIGh1ZmYuICBUaGlzIGlzIHNhdmVkIGluIGxvdyB0byBjaGVjayBmb3Igd2hlbiBhCiAgICAgbmV3IHN1Yi10YWJsZSBzaG91bGQgYmUgc3RhcnRlZC4gIGRyb3AgaXMgemVybyB3aGVuIHRoZSByb290IHRhYmxlIGlzCiAgICAgYmVpbmcgZmlsbGVkLCBhbmQgZHJvcCBpcyByb290IHdoZW4gc3ViLXRhYmxlcyBhcmUgYmVpbmcgZmlsbGVkLgoKICAgICBXaGVuIGEgbmV3IHN1Yi10YWJsZSBpcyBuZWVkZWQsIGl0IGlzIG5lY2Vzc2FyeSB0byBsb29rIGFoZWFkIGluIHRoZQogICAgIGNvZGUgbGVuZ3RocyB0byBkZXRlcm1pbmUgd2hhdCBzaXplIHN1Yi10YWJsZSBpcyBuZWVkZWQuICBUaGUgbGVuZ3RoCiAgICAgY291bnRzIGFyZSB1c2VkIGZvciB0aGlzLCBhbmQgc28gY291bnRbXSBpcyBkZWNyZW1lbnRlZCBhcyBjb2RlcyBhcmUKICAgICBlbnRlcmVkIGluIHRoZSB0YWJsZXMuCgogICAgIHVzZWQga2VlcHMgdHJhY2sgb2YgaG93IG1hbnkgdGFibGUgZW50cmllcyBoYXZlIGJlZW4gYWxsb2NhdGVkIGZyb20gdGhlCiAgICAgcHJvdmlkZWQgKnRhYmxlIHNwYWNlLiAgSXQgaXMgY2hlY2tlZCBmb3IgTEVOUyBhbmQgRElTVCB0YWJsZXMgYWdhaW5zdAogICAgIHRoZSBjb25zdGFudHMgRU5PVUdIX0xFTlMgYW5kIEVOT1VHSF9ESVNUUyB0byBndWFyZCBhZ2FpbnN0IGNoYW5nZXMgaW4KICAgICB0aGUgaW5pdGlhbCByb290IHRhYmxlIHNpemUgY29uc3RhbnRzLiAgU2VlIHRoZSBjb21tZW50cyBpbiBpbmZ0cmVlcy5oCiAgICAgZm9yIG1vcmUgaW5mb3JtYXRpb24uCgogICAgIHN5bSBpbmNyZW1lbnRzIHRocm91Z2ggYWxsIHN5bWJvbHMsIGFuZCB0aGUgbG9vcCB0ZXJtaW5hdGVzIHdoZW4KICAgICBhbGwgY29kZXMgb2YgbGVuZ3RoIG1heCwgaS5lLiBhbGwgY29kZXMsIGhhdmUgYmVlbiBwcm9jZXNzZWQuICBUaGlzCiAgICAgcm91dGluZSBwZXJtaXRzIGluY29tcGxldGUgY29kZXMsIHNvIGFub3RoZXIgbG9vcCBhZnRlciB0aGlzIG9uZSBmaWxscwogICAgIGluIHRoZSByZXN0IG9mIHRoZSBkZWNvZGluZyB0YWJsZXMgd2l0aCBpbnZhbGlkIGNvZGUgbWFya2Vycy4KICAgICAqLwoKICAgIC8qIHNldCB1cCBmb3IgY29kZSB0eXBlICovCiAgICAvLyBwb29yIG1hbiBvcHRpbWl6YXRpb24gLSB1c2UgaWYtZWxzZSBpbnN0ZWFkIG9mIHN3aXRjaCwKICAgIC8vIHRvIGF2b2lkIGRlb3B0cyBpbiBvbGQgdjgKICAgIGlmICh0eXBlID09PSBDT0RFUyQxKSB7CiAgICAgIGJhc2UgPSBleHRyYSA9IHdvcms7ICAgIC8qIGR1bW15IHZhbHVlLS1ub3QgdXNlZCAqLwogICAgICBlbmQgPSAxOTsKCiAgICB9IGVsc2UgaWYgKHR5cGUgPT09IExFTlMkMSkgewogICAgICBiYXNlID0gbGJhc2U7CiAgICAgIGJhc2VfaW5kZXggLT0gMjU3OwogICAgICBleHRyYSA9IGxleHQ7CiAgICAgIGV4dHJhX2luZGV4IC09IDI1NzsKICAgICAgZW5kID0gMjU2OwoKICAgIH0gZWxzZSB7ICAgICAgICAgICAgICAgICAgICAvKiBESVNUUyAqLwogICAgICBiYXNlID0gZGJhc2U7CiAgICAgIGV4dHJhID0gZGV4dDsKICAgICAgZW5kID0gLTE7CiAgICB9CgogICAgLyogaW5pdGlhbGl6ZSBvcHRzIGZvciBsb29wICovCiAgICBodWZmID0gMDsgICAgICAgICAgICAgICAgICAgLyogc3RhcnRpbmcgY29kZSAqLwogICAgc3ltID0gMDsgICAgICAgICAgICAgICAgICAgIC8qIHN0YXJ0aW5nIGNvZGUgc3ltYm9sICovCiAgICBsZW4gPSBtaW47ICAgICAgICAgICAgICAgICAgLyogc3RhcnRpbmcgY29kZSBsZW5ndGggKi8KICAgIG5leHQgPSB0YWJsZV9pbmRleDsgICAgICAgICAgICAgIC8qIGN1cnJlbnQgdGFibGUgdG8gZmlsbCBpbiAqLwogICAgY3VyciA9IHJvb3Q7ICAgICAgICAgICAgICAgIC8qIGN1cnJlbnQgdGFibGUgaW5kZXggYml0cyAqLwogICAgZHJvcCA9IDA7ICAgICAgICAgICAgICAgICAgIC8qIGN1cnJlbnQgYml0cyB0byBkcm9wIGZyb20gY29kZSBmb3IgaW5kZXggKi8KICAgIGxvdyA9IC0xOyAgICAgICAgICAgICAgICAgICAvKiB0cmlnZ2VyIG5ldyBzdWItdGFibGUgd2hlbiBsZW4gPiByb290ICovCiAgICB1c2VkID0gMSA8PCByb290OyAgICAgICAgICAvKiB1c2Ugcm9vdCB0YWJsZSBlbnRyaWVzICovCiAgICBtYXNrID0gdXNlZCAtIDE7ICAgICAgICAgICAgLyogbWFzayBmb3IgY29tcGFyaW5nIGxvdyAqLwoKICAgIC8qIGNoZWNrIGF2YWlsYWJsZSB0YWJsZSBzcGFjZSAqLwogICAgaWYgKCh0eXBlID09PSBMRU5TJDEgJiYgdXNlZCA+IEVOT1VHSF9MRU5TJDEpIHx8CiAgICAgICh0eXBlID09PSBESVNUUyQxICYmIHVzZWQgPiBFTk9VR0hfRElTVFMkMSkpIHsKICAgICAgcmV0dXJuIDE7CiAgICB9CgogICAgLyogcHJvY2VzcyBhbGwgY29kZXMgYW5kIG1ha2UgdGFibGUgZW50cmllcyAqLwogICAgZm9yICg7OykgewogICAgICAvKiBjcmVhdGUgdGFibGUgZW50cnkgKi8KICAgICAgaGVyZV9iaXRzID0gbGVuIC0gZHJvcDsKICAgICAgaWYgKHdvcmtbc3ltXSA8IGVuZCkgewogICAgICAgIGhlcmVfb3AgPSAwOwogICAgICAgIGhlcmVfdmFsID0gd29ya1tzeW1dOwogICAgICB9CiAgICAgIGVsc2UgaWYgKHdvcmtbc3ltXSA+IGVuZCkgewogICAgICAgIGhlcmVfb3AgPSBleHRyYVtleHRyYV9pbmRleCArIHdvcmtbc3ltXV07CiAgICAgICAgaGVyZV92YWwgPSBiYXNlW2Jhc2VfaW5kZXggKyB3b3JrW3N5bV1dOwogICAgICB9CiAgICAgIGVsc2UgewogICAgICAgIGhlcmVfb3AgPSAzMiArIDY0OyAgICAgICAgIC8qIGVuZCBvZiBibG9jayAqLwogICAgICAgIGhlcmVfdmFsID0gMDsKICAgICAgfQoKICAgICAgLyogcmVwbGljYXRlIGZvciB0aG9zZSBpbmRpY2VzIHdpdGggbG93IGxlbiBiaXRzIGVxdWFsIHRvIGh1ZmYgKi8KICAgICAgaW5jciA9IDEgPDwgKGxlbiAtIGRyb3ApOwogICAgICBmaWxsID0gMSA8PCBjdXJyOwogICAgICBtaW4gPSBmaWxsOyAgICAgICAgICAgICAgICAgLyogc2F2ZSBvZmZzZXQgdG8gbmV4dCB0YWJsZSAqLwogICAgICBkbyB7CiAgICAgICAgZmlsbCAtPSBpbmNyOwogICAgICAgIHRhYmxlW25leHQgKyAoaHVmZiA+PiBkcm9wKSArIGZpbGxdID0gKGhlcmVfYml0cyA8PCAyNCkgfCAoaGVyZV9vcCA8PCAxNikgfCBoZXJlX3ZhbCB8MDsKICAgICAgfSB3aGlsZSAoZmlsbCAhPT0gMCk7CgogICAgICAvKiBiYWNrd2FyZHMgaW5jcmVtZW50IHRoZSBsZW4tYml0IGNvZGUgaHVmZiAqLwogICAgICBpbmNyID0gMSA8PCAobGVuIC0gMSk7CiAgICAgIHdoaWxlIChodWZmICYgaW5jcikgewogICAgICAgIGluY3IgPj49IDE7CiAgICAgIH0KICAgICAgaWYgKGluY3IgIT09IDApIHsKICAgICAgICBodWZmICY9IGluY3IgLSAxOwogICAgICAgIGh1ZmYgKz0gaW5jcjsKICAgICAgfSBlbHNlIHsKICAgICAgICBodWZmID0gMDsKICAgICAgfQoKICAgICAgLyogZ28gdG8gbmV4dCBzeW1ib2wsIHVwZGF0ZSBjb3VudCwgbGVuICovCiAgICAgIHN5bSsrOwogICAgICBpZiAoLS1jb3VudFtsZW5dID09PSAwKSB7CiAgICAgICAgaWYgKGxlbiA9PT0gbWF4KSB7IGJyZWFrOyB9CiAgICAgICAgbGVuID0gbGVuc1tsZW5zX2luZGV4ICsgd29ya1tzeW1dXTsKICAgICAgfQoKICAgICAgLyogY3JlYXRlIG5ldyBzdWItdGFibGUgaWYgbmVlZGVkICovCiAgICAgIGlmIChsZW4gPiByb290ICYmIChodWZmICYgbWFzaykgIT09IGxvdykgewogICAgICAgIC8qIGlmIGZpcnN0IHRpbWUsIHRyYW5zaXRpb24gdG8gc3ViLXRhYmxlcyAqLwogICAgICAgIGlmIChkcm9wID09PSAwKSB7CiAgICAgICAgICBkcm9wID0gcm9vdDsKICAgICAgICB9CgogICAgICAgIC8qIGluY3JlbWVudCBwYXN0IGxhc3QgdGFibGUgKi8KICAgICAgICBuZXh0ICs9IG1pbjsgICAgICAgICAgICAvKiBoZXJlIG1pbiBpcyAxIDw8IGN1cnIgKi8KCiAgICAgICAgLyogZGV0ZXJtaW5lIGxlbmd0aCBvZiBuZXh0IHRhYmxlICovCiAgICAgICAgY3VyciA9IGxlbiAtIGRyb3A7CiAgICAgICAgbGVmdCA9IDEgPDwgY3VycjsKICAgICAgICB3aGlsZSAoY3VyciArIGRyb3AgPCBtYXgpIHsKICAgICAgICAgIGxlZnQgLT0gY291bnRbY3VyciArIGRyb3BdOwogICAgICAgICAgaWYgKGxlZnQgPD0gMCkgeyBicmVhazsgfQogICAgICAgICAgY3VycisrOwogICAgICAgICAgbGVmdCA8PD0gMTsKICAgICAgICB9CgogICAgICAgIC8qIGNoZWNrIGZvciBlbm91Z2ggc3BhY2UgKi8KICAgICAgICB1c2VkICs9IDEgPDwgY3VycjsKICAgICAgICBpZiAoKHR5cGUgPT09IExFTlMkMSAmJiB1c2VkID4gRU5PVUdIX0xFTlMkMSkgfHwKICAgICAgICAgICh0eXBlID09PSBESVNUUyQxICYmIHVzZWQgPiBFTk9VR0hfRElTVFMkMSkpIHsKICAgICAgICAgIHJldHVybiAxOwogICAgICAgIH0KCiAgICAgICAgLyogcG9pbnQgZW50cnkgaW4gcm9vdCB0YWJsZSB0byBzdWItdGFibGUgKi8KICAgICAgICBsb3cgPSBodWZmICYgbWFzazsKICAgICAgICAvKnRhYmxlLm9wW2xvd10gPSBjdXJyOwogICAgICAgIHRhYmxlLmJpdHNbbG93XSA9IHJvb3Q7CiAgICAgICAgdGFibGUudmFsW2xvd10gPSBuZXh0IC0gb3B0cy50YWJsZV9pbmRleDsqLwogICAgICAgIHRhYmxlW2xvd10gPSAocm9vdCA8PCAyNCkgfCAoY3VyciA8PCAxNikgfCAobmV4dCAtIHRhYmxlX2luZGV4KSB8MDsKICAgICAgfQogICAgfQoKICAgIC8qIGZpbGwgaW4gcmVtYWluaW5nIHRhYmxlIGVudHJ5IGlmIGNvZGUgaXMgaW5jb21wbGV0ZSAoZ3VhcmFudGVlZCB0byBoYXZlCiAgICAgYXQgbW9zdCBvbmUgcmVtYWluaW5nIGVudHJ5LCBzaW5jZSBpZiB0aGUgY29kZSBpcyBpbmNvbXBsZXRlLCB0aGUKICAgICBtYXhpbXVtIGNvZGUgbGVuZ3RoIHRoYXQgd2FzIGFsbG93ZWQgdG8gZ2V0IHRoaXMgZmFyIGlzIG9uZSBiaXQpICovCiAgICBpZiAoaHVmZiAhPT0gMCkgewogICAgICAvL3RhYmxlLm9wW25leHQgKyBodWZmXSA9IDY0OyAgICAgICAgICAgIC8qIGludmFsaWQgY29kZSBtYXJrZXIgKi8KICAgICAgLy90YWJsZS5iaXRzW25leHQgKyBodWZmXSA9IGxlbiAtIGRyb3A7CiAgICAgIC8vdGFibGUudmFsW25leHQgKyBodWZmXSA9IDA7CiAgICAgIHRhYmxlW25leHQgKyBodWZmXSA9ICgobGVuIC0gZHJvcCkgPDwgMjQpIHwgKDY0IDw8IDE2KSB8MDsKICAgIH0KCiAgICAvKiBzZXQgcmV0dXJuIHBhcmFtZXRlcnMgKi8KICAgIC8vb3B0cy50YWJsZV9pbmRleCArPSB1c2VkOwogICAgb3B0cy5iaXRzID0gcm9vdDsKICAgIHJldHVybiAwOwogIH07CgoKICB2YXIgaW5mdHJlZXMgPSBpbmZsYXRlX3RhYmxlOwoKICAvLyAoQykgMTk5NS0yMDEzIEplYW4tbG91cCBHYWlsbHkgYW5kIE1hcmsgQWRsZXIKICAvLyAoQykgMjAxNC0yMDE3IFZpdGFseSBQdXpyaW4gYW5kIEFuZHJleSBUdXBpdHNpbgogIC8vCiAgLy8gVGhpcyBzb2Z0d2FyZSBpcyBwcm92aWRlZCAnYXMtaXMnLCB3aXRob3V0IGFueSBleHByZXNzIG9yIGltcGxpZWQKICAvLyB3YXJyYW50eS4gSW4gbm8gZXZlbnQgd2lsbCB0aGUgYXV0aG9ycyBiZSBoZWxkIGxpYWJsZSBmb3IgYW55IGRhbWFnZXMKICAvLyBhcmlzaW5nIGZyb20gdGhlIHVzZSBvZiB0aGlzIHNvZnR3YXJlLgogIC8vCiAgLy8gUGVybWlzc2lvbiBpcyBncmFudGVkIHRvIGFueW9uZSB0byB1c2UgdGhpcyBzb2Z0d2FyZSBmb3IgYW55IHB1cnBvc2UsCiAgLy8gaW5jbHVkaW5nIGNvbW1lcmNpYWwgYXBwbGljYXRpb25zLCBhbmQgdG8gYWx0ZXIgaXQgYW5kIHJlZGlzdHJpYnV0ZSBpdAogIC8vIGZyZWVseSwgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIHJlc3RyaWN0aW9uczoKICAvLwogIC8vIDEuIFRoZSBvcmlnaW4gb2YgdGhpcyBzb2Z0d2FyZSBtdXN0IG5vdCBiZSBtaXNyZXByZXNlbnRlZDsgeW91IG11c3Qgbm90CiAgLy8gICBjbGFpbSB0aGF0IHlvdSB3cm90ZSB0aGUgb3JpZ2luYWwgc29mdHdhcmUuIElmIHlvdSB1c2UgdGhpcyBzb2Z0d2FyZQogIC8vICAgaW4gYSBwcm9kdWN0LCBhbiBhY2tub3dsZWRnbWVudCBpbiB0aGUgcHJvZHVjdCBkb2N1bWVudGF0aW9uIHdvdWxkIGJlCiAgLy8gICBhcHByZWNpYXRlZCBidXQgaXMgbm90IHJlcXVpcmVkLgogIC8vIDIuIEFsdGVyZWQgc291cmNlIHZlcnNpb25zIG11c3QgYmUgcGxhaW5seSBtYXJrZWQgYXMgc3VjaCwgYW5kIG11c3Qgbm90IGJlCiAgLy8gICBtaXNyZXByZXNlbnRlZCBhcyBiZWluZyB0aGUgb3JpZ2luYWwgc29mdHdhcmUuCiAgLy8gMy4gVGhpcyBub3RpY2UgbWF5IG5vdCBiZSByZW1vdmVkIG9yIGFsdGVyZWQgZnJvbSBhbnkgc291cmNlIGRpc3RyaWJ1dGlvbi4KCgoKCgoKICBjb25zdCBDT0RFUyA9IDA7CiAgY29uc3QgTEVOUyA9IDE7CiAgY29uc3QgRElTVFMgPSAyOwoKICAvKiBQdWJsaWMgY29uc3RhbnRzID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qLwogIC8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovCgogIGNvbnN0IHsKICAgIFpfRklOSVNIOiBaX0ZJTklTSCQxLCBaX0JMT0NLLCBaX1RSRUVTLAogICAgWl9PSzogWl9PSyQxLCBaX1NUUkVBTV9FTkQ6IFpfU1RSRUFNX0VORCQxLCBaX05FRURfRElDVDogWl9ORUVEX0RJQ1QkMSwgWl9TVFJFQU1fRVJST1I6IFpfU1RSRUFNX0VSUk9SJDEsIFpfREFUQV9FUlJPUjogWl9EQVRBX0VSUk9SJDEsIFpfTUVNX0VSUk9SOiBaX01FTV9FUlJPUiQxLCBaX0JVRl9FUlJPUiwKICAgIFpfREVGTEFURUQKICB9ID0gY29uc3RhbnRzJDI7CgoKICAvKiBTVEFURVMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qLwogIC8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovCgoKICBjb25zdCAgICBIRUFEID0gMTsgICAgICAgLyogaTogd2FpdGluZyBmb3IgbWFnaWMgaGVhZGVyICovCiAgY29uc3QgICAgRkxBR1MgPSAyOyAgICAgIC8qIGk6IHdhaXRpbmcgZm9yIG1ldGhvZCBhbmQgZmxhZ3MgKGd6aXApICovCiAgY29uc3QgICAgVElNRSA9IDM7ICAgICAgIC8qIGk6IHdhaXRpbmcgZm9yIG1vZGlmaWNhdGlvbiB0aW1lIChnemlwKSAqLwogIGNvbnN0ICAgIE9TID0gNDsgICAgICAgICAvKiBpOiB3YWl0aW5nIGZvciBleHRyYSBmbGFncyBhbmQgb3BlcmF0aW5nIHN5c3RlbSAoZ3ppcCkgKi8KICBjb25zdCAgICBFWExFTiA9IDU7ICAgICAgLyogaTogd2FpdGluZyBmb3IgZXh0cmEgbGVuZ3RoIChnemlwKSAqLwogIGNvbnN0ICAgIEVYVFJBID0gNjsgICAgICAvKiBpOiB3YWl0aW5nIGZvciBleHRyYSBieXRlcyAoZ3ppcCkgKi8KICBjb25zdCAgICBOQU1FID0gNzsgICAgICAgLyogaTogd2FpdGluZyBmb3IgZW5kIG9mIGZpbGUgbmFtZSAoZ3ppcCkgKi8KICBjb25zdCAgICBDT01NRU5UID0gODsgICAgLyogaTogd2FpdGluZyBmb3IgZW5kIG9mIGNvbW1lbnQgKGd6aXApICovCiAgY29uc3QgICAgSENSQyA9IDk7ICAgICAgIC8qIGk6IHdhaXRpbmcgZm9yIGhlYWRlciBjcmMgKGd6aXApICovCiAgY29uc3QgICAgRElDVElEID0gMTA7ICAgIC8qIGk6IHdhaXRpbmcgZm9yIGRpY3Rpb25hcnkgY2hlY2sgdmFsdWUgKi8KICBjb25zdCAgICBESUNUID0gMTE7ICAgICAgLyogd2FpdGluZyBmb3IgaW5mbGF0ZVNldERpY3Rpb25hcnkoKSBjYWxsICovCiAgY29uc3QgICAgICAgIFRZUEUgPSAxMjsgICAgICAvKiBpOiB3YWl0aW5nIGZvciB0eXBlIGJpdHMsIGluY2x1ZGluZyBsYXN0LWZsYWcgYml0ICovCiAgY29uc3QgICAgICAgIFRZUEVETyA9IDEzOyAgICAvKiBpOiBzYW1lLCBidXQgc2tpcCBjaGVjayB0byBleGl0IGluZmxhdGUgb24gbmV3IGJsb2NrICovCiAgY29uc3QgICAgICAgIFNUT1JFRCA9IDE0OyAgICAvKiBpOiB3YWl0aW5nIGZvciBzdG9yZWQgc2l6ZSAobGVuZ3RoIGFuZCBjb21wbGVtZW50KSAqLwogIGNvbnN0ICAgICAgICBDT1BZXyA9IDE1OyAgICAgLyogaS9vOiBzYW1lIGFzIENPUFkgYmVsb3csIGJ1dCBvbmx5IGZpcnN0IHRpbWUgaW4gKi8KICBjb25zdCAgICAgICAgQ09QWSA9IDE2OyAgICAgIC8qIGkvbzogd2FpdGluZyBmb3IgaW5wdXQgb3Igb3V0cHV0IHRvIGNvcHkgc3RvcmVkIGJsb2NrICovCiAgY29uc3QgICAgICAgIFRBQkxFID0gMTc7ICAgICAvKiBpOiB3YWl0aW5nIGZvciBkeW5hbWljIGJsb2NrIHRhYmxlIGxlbmd0aHMgKi8KICBjb25zdCAgICAgICAgTEVOTEVOUyA9IDE4OyAgIC8qIGk6IHdhaXRpbmcgZm9yIGNvZGUgbGVuZ3RoIGNvZGUgbGVuZ3RocyAqLwogIGNvbnN0ICAgICAgICBDT0RFTEVOUyA9IDE5OyAgLyogaTogd2FpdGluZyBmb3IgbGVuZ3RoL2xpdCBhbmQgZGlzdGFuY2UgY29kZSBsZW5ndGhzICovCiAgY29uc3QgICAgICAgICAgICBMRU5fID0gMjA7ICAgICAgLyogaTogc2FtZSBhcyBMRU4gYmVsb3csIGJ1dCBvbmx5IGZpcnN0IHRpbWUgaW4gKi8KICBjb25zdCAgICAgICAgICAgIExFTiA9IDIxOyAgICAgICAvKiBpOiB3YWl0aW5nIGZvciBsZW5ndGgvbGl0L2VvYiBjb2RlICovCiAgY29uc3QgICAgICAgICAgICBMRU5FWFQgPSAyMjsgICAgLyogaTogd2FpdGluZyBmb3IgbGVuZ3RoIGV4dHJhIGJpdHMgKi8KICBjb25zdCAgICAgICAgICAgIERJU1QgPSAyMzsgICAgICAvKiBpOiB3YWl0aW5nIGZvciBkaXN0YW5jZSBjb2RlICovCiAgY29uc3QgICAgICAgICAgICBESVNURVhUID0gMjQ7ICAgLyogaTogd2FpdGluZyBmb3IgZGlzdGFuY2UgZXh0cmEgYml0cyAqLwogIGNvbnN0ICAgICAgICAgICAgTUFUQ0ggPSAyNTsgICAgIC8qIG86IHdhaXRpbmcgZm9yIG91dHB1dCBzcGFjZSB0byBjb3B5IHN0cmluZyAqLwogIGNvbnN0ICAgICAgICAgICAgTElUID0gMjY7ICAgICAgIC8qIG86IHdhaXRpbmcgZm9yIG91dHB1dCBzcGFjZSB0byB3cml0ZSBsaXRlcmFsICovCiAgY29uc3QgICAgQ0hFQ0sgPSAyNzsgICAgIC8qIGk6IHdhaXRpbmcgZm9yIDMyLWJpdCBjaGVjayB2YWx1ZSAqLwogIGNvbnN0ICAgIExFTkdUSCA9IDI4OyAgICAvKiBpOiB3YWl0aW5nIGZvciAzMi1iaXQgbGVuZ3RoIChnemlwKSAqLwogIGNvbnN0ICAgIERPTkUgPSAyOTsgICAgICAvKiBmaW5pc2hlZCBjaGVjaywgZG9uZSAtLSByZW1haW4gaGVyZSB1bnRpbCByZXNldCAqLwogIGNvbnN0ICAgIEJBRCA9IDMwOyAgICAgICAvKiBnb3QgYSBkYXRhIGVycm9yIC0tIHJlbWFpbiBoZXJlIHVudGlsIHJlc2V0ICovCiAgY29uc3QgICAgTUVNID0gMzE7ICAgICAgIC8qIGdvdCBhbiBpbmZsYXRlKCkgbWVtb3J5IGVycm9yIC0tIHJlbWFpbiBoZXJlIHVudGlsIHJlc2V0ICovCiAgY29uc3QgICAgU1lOQyA9IDMyOyAgICAgIC8qIGxvb2tpbmcgZm9yIHN5bmNocm9uaXphdGlvbiBieXRlcyB0byByZXN0YXJ0IGluZmxhdGUoKSAqLwoKICAvKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qLwoKCgogIGNvbnN0IEVOT1VHSF9MRU5TID0gODUyOwogIGNvbnN0IEVOT1VHSF9ESVNUUyA9IDU5MjsKICAvL2NvbnN0IEVOT1VHSCA9ICAoRU5PVUdIX0xFTlMrRU5PVUdIX0RJU1RTKTsKCiAgY29uc3QgTUFYX1dCSVRTID0gMTU7CiAgLyogMzJLIExaNzcgd2luZG93ICovCiAgY29uc3QgREVGX1dCSVRTID0gTUFYX1dCSVRTOwoKCiAgY29uc3QgenN3YXAzMiA9IChxKSA9PiB7CgogICAgcmV0dXJuICAoKChxID4+PiAyNCkgJiAweGZmKSArCiAgICAgICAgICAgICgocSA+Pj4gOCkgJiAweGZmMDApICsKICAgICAgICAgICAgKChxICYgMHhmZjAwKSA8PCA4KSArCiAgICAgICAgICAgICgocSAmIDB4ZmYpIDw8IDI0KSk7CiAgfTsKCgogIGZ1bmN0aW9uIEluZmxhdGVTdGF0ZSgpIHsKICAgIHRoaXMubW9kZSA9IDA7ICAgICAgICAgICAgIC8qIGN1cnJlbnQgaW5mbGF0ZSBtb2RlICovCiAgICB0aGlzLmxhc3QgPSBmYWxzZTsgICAgICAgICAgLyogdHJ1ZSBpZiBwcm9jZXNzaW5nIGxhc3QgYmxvY2sgKi8KICAgIHRoaXMud3JhcCA9IDA7ICAgICAgICAgICAgICAvKiBiaXQgMCB0cnVlIGZvciB6bGliLCBiaXQgMSB0cnVlIGZvciBnemlwICovCiAgICB0aGlzLmhhdmVkaWN0ID0gZmFsc2U7ICAgICAgLyogdHJ1ZSBpZiBkaWN0aW9uYXJ5IHByb3ZpZGVkICovCiAgICB0aGlzLmZsYWdzID0gMDsgICAgICAgICAgICAgLyogZ3ppcCBoZWFkZXIgbWV0aG9kIGFuZCBmbGFncyAoMCBpZiB6bGliKSAqLwogICAgdGhpcy5kbWF4ID0gMDsgICAgICAgICAgICAgIC8qIHpsaWIgaGVhZGVyIG1heCBkaXN0YW5jZSAoSU5GTEFURV9TVFJJQ1QpICovCiAgICB0aGlzLmNoZWNrID0gMDsgICAgICAgICAgICAgLyogcHJvdGVjdGVkIGNvcHkgb2YgY2hlY2sgdmFsdWUgKi8KICAgIHRoaXMudG90YWwgPSAwOyAgICAgICAgICAgICAvKiBwcm90ZWN0ZWQgY29weSBvZiBvdXRwdXQgY291bnQgKi8KICAgIC8vIFRPRE86IG1heSBiZSB7fQogICAgdGhpcy5oZWFkID0gbnVsbDsgICAgICAgICAgIC8qIHdoZXJlIHRvIHNhdmUgZ3ppcCBoZWFkZXIgaW5mb3JtYXRpb24gKi8KCiAgICAvKiBzbGlkaW5nIHdpbmRvdyAqLwogICAgdGhpcy53Yml0cyA9IDA7ICAgICAgICAgICAgIC8qIGxvZyBiYXNlIDIgb2YgcmVxdWVzdGVkIHdpbmRvdyBzaXplICovCiAgICB0aGlzLndzaXplID0gMDsgICAgICAgICAgICAgLyogd2luZG93IHNpemUgb3IgemVybyBpZiBub3QgdXNpbmcgd2luZG93ICovCiAgICB0aGlzLndoYXZlID0gMDsgICAgICAgICAgICAgLyogdmFsaWQgYnl0ZXMgaW4gdGhlIHdpbmRvdyAqLwogICAgdGhpcy53bmV4dCA9IDA7ICAgICAgICAgICAgIC8qIHdpbmRvdyB3cml0ZSBpbmRleCAqLwogICAgdGhpcy53aW5kb3cgPSBudWxsOyAgICAgICAgIC8qIGFsbG9jYXRlZCBzbGlkaW5nIHdpbmRvdywgaWYgbmVlZGVkICovCgogICAgLyogYml0IGFjY3VtdWxhdG9yICovCiAgICB0aGlzLmhvbGQgPSAwOyAgICAgICAgICAgICAgLyogaW5wdXQgYml0IGFjY3VtdWxhdG9yICovCiAgICB0aGlzLmJpdHMgPSAwOyAgICAgICAgICAgICAgLyogbnVtYmVyIG9mIGJpdHMgaW4gImluIiAqLwoKICAgIC8qIGZvciBzdHJpbmcgYW5kIHN0b3JlZCBibG9jayBjb3B5aW5nICovCiAgICB0aGlzLmxlbmd0aCA9IDA7ICAgICAgICAgICAgLyogbGl0ZXJhbCBvciBsZW5ndGggb2YgZGF0YSB0byBjb3B5ICovCiAgICB0aGlzLm9mZnNldCA9IDA7ICAgICAgICAgICAgLyogZGlzdGFuY2UgYmFjayB0byBjb3B5IHN0cmluZyBmcm9tICovCgogICAgLyogZm9yIHRhYmxlIGFuZCBjb2RlIGRlY29kaW5nICovCiAgICB0aGlzLmV4dHJhID0gMDsgICAgICAgICAgICAgLyogZXh0cmEgYml0cyBuZWVkZWQgKi8KCiAgICAvKiBmaXhlZCBhbmQgZHluYW1pYyBjb2RlIHRhYmxlcyAqLwogICAgdGhpcy5sZW5jb2RlID0gbnVsbDsgICAgICAgICAgLyogc3RhcnRpbmcgdGFibGUgZm9yIGxlbmd0aC9saXRlcmFsIGNvZGVzICovCiAgICB0aGlzLmRpc3Rjb2RlID0gbnVsbDsgICAgICAgICAvKiBzdGFydGluZyB0YWJsZSBmb3IgZGlzdGFuY2UgY29kZXMgKi8KICAgIHRoaXMubGVuYml0cyA9IDA7ICAgICAgICAgICAvKiBpbmRleCBiaXRzIGZvciBsZW5jb2RlICovCiAgICB0aGlzLmRpc3RiaXRzID0gMDsgICAgICAgICAgLyogaW5kZXggYml0cyBmb3IgZGlzdGNvZGUgKi8KCiAgICAvKiBkeW5hbWljIHRhYmxlIGJ1aWxkaW5nICovCiAgICB0aGlzLm5jb2RlID0gMDsgICAgICAgICAgICAgLyogbnVtYmVyIG9mIGNvZGUgbGVuZ3RoIGNvZGUgbGVuZ3RocyAqLwogICAgdGhpcy5ubGVuID0gMDsgICAgICAgICAgICAgIC8qIG51bWJlciBvZiBsZW5ndGggY29kZSBsZW5ndGhzICovCiAgICB0aGlzLm5kaXN0ID0gMDsgICAgICAgICAgICAgLyogbnVtYmVyIG9mIGRpc3RhbmNlIGNvZGUgbGVuZ3RocyAqLwogICAgdGhpcy5oYXZlID0gMDsgICAgICAgICAgICAgIC8qIG51bWJlciBvZiBjb2RlIGxlbmd0aHMgaW4gbGVuc1tdICovCiAgICB0aGlzLm5leHQgPSBudWxsOyAgICAgICAgICAgICAgLyogbmV4dCBhdmFpbGFibGUgc3BhY2UgaW4gY29kZXNbXSAqLwoKICAgIHRoaXMubGVucyA9IG5ldyBVaW50MTZBcnJheSgzMjApOyAvKiB0ZW1wb3Jhcnkgc3RvcmFnZSBmb3IgY29kZSBsZW5ndGhzICovCiAgICB0aGlzLndvcmsgPSBuZXcgVWludDE2QXJyYXkoMjg4KTsgLyogd29yayBhcmVhIGZvciBjb2RlIHRhYmxlIGJ1aWxkaW5nICovCgogICAgLyoKICAgICBiZWNhdXNlIHdlIGRvbid0IGhhdmUgcG9pbnRlcnMgaW4ganMsIHdlIHVzZSBsZW5jb2RlIGFuZCBkaXN0Y29kZSBkaXJlY3RseQogICAgIGFzIGJ1ZmZlcnMgc28gd2UgZG9uJ3QgbmVlZCBjb2RlcwogICAgKi8KICAgIC8vdGhpcy5jb2RlcyA9IG5ldyBJbnQzMkFycmF5KEVOT1VHSCk7ICAgICAgIC8qIHNwYWNlIGZvciBjb2RlIHRhYmxlcyAqLwogICAgdGhpcy5sZW5keW4gPSBudWxsOyAgICAgICAgICAgICAgLyogZHluYW1pYyB0YWJsZSBmb3IgbGVuZ3RoL2xpdGVyYWwgY29kZXMgKEpTIHNwZWNpZmljKSAqLwogICAgdGhpcy5kaXN0ZHluID0gbnVsbDsgICAgICAgICAgICAgLyogZHluYW1pYyB0YWJsZSBmb3IgZGlzdGFuY2UgY29kZXMgKEpTIHNwZWNpZmljKSAqLwogICAgdGhpcy5zYW5lID0gMDsgICAgICAgICAgICAgICAgICAgLyogaWYgZmFsc2UsIGFsbG93IGludmFsaWQgZGlzdGFuY2UgdG9vIGZhciAqLwogICAgdGhpcy5iYWNrID0gMDsgICAgICAgICAgICAgICAgICAgLyogYml0cyBiYWNrIG9mIGxhc3QgdW5wcm9jZXNzZWQgbGVuZ3RoL2xpdCAqLwogICAgdGhpcy53YXMgPSAwOyAgICAgICAgICAgICAgICAgICAgLyogaW5pdGlhbCBsZW5ndGggb2YgbWF0Y2ggKi8KICB9CgoKICBjb25zdCBpbmZsYXRlUmVzZXRLZWVwID0gKHN0cm0pID0+IHsKCiAgICBpZiAoIXN0cm0gfHwgIXN0cm0uc3RhdGUpIHsgcmV0dXJuIFpfU1RSRUFNX0VSUk9SJDE7IH0KICAgIGNvbnN0IHN0YXRlID0gc3RybS5zdGF0ZTsKICAgIHN0cm0udG90YWxfaW4gPSBzdHJtLnRvdGFsX291dCA9IHN0YXRlLnRvdGFsID0gMDsKICAgIHN0cm0ubXNnID0gJyc7IC8qWl9OVUxMKi8KICAgIGlmIChzdGF0ZS53cmFwKSB7ICAgICAgIC8qIHRvIHN1cHBvcnQgaWxsLWNvbmNlaXZlZCBKYXZhIHRlc3Qgc3VpdGUgKi8KICAgICAgc3RybS5hZGxlciA9IHN0YXRlLndyYXAgJiAxOwogICAgfQogICAgc3RhdGUubW9kZSA9IEhFQUQ7CiAgICBzdGF0ZS5sYXN0ID0gMDsKICAgIHN0YXRlLmhhdmVkaWN0ID0gMDsKICAgIHN0YXRlLmRtYXggPSAzMjc2ODsKICAgIHN0YXRlLmhlYWQgPSBudWxsLypaX05VTEwqLzsKICAgIHN0YXRlLmhvbGQgPSAwOwogICAgc3RhdGUuYml0cyA9IDA7CiAgICAvL3N0YXRlLmxlbmNvZGUgPSBzdGF0ZS5kaXN0Y29kZSA9IHN0YXRlLm5leHQgPSBzdGF0ZS5jb2RlczsKICAgIHN0YXRlLmxlbmNvZGUgPSBzdGF0ZS5sZW5keW4gPSBuZXcgSW50MzJBcnJheShFTk9VR0hfTEVOUyk7CiAgICBzdGF0ZS5kaXN0Y29kZSA9IHN0YXRlLmRpc3RkeW4gPSBuZXcgSW50MzJBcnJheShFTk9VR0hfRElTVFMpOwoKICAgIHN0YXRlLnNhbmUgPSAxOwogICAgc3RhdGUuYmFjayA9IC0xOwogICAgLy9UcmFjZXYoKHN0ZGVyciwgImluZmxhdGU6IHJlc2V0XG4iKSk7CiAgICByZXR1cm4gWl9PSyQxOwogIH07CgoKICBjb25zdCBpbmZsYXRlUmVzZXQgPSAoc3RybSkgPT4gewoKICAgIGlmICghc3RybSB8fCAhc3RybS5zdGF0ZSkgeyByZXR1cm4gWl9TVFJFQU1fRVJST1IkMTsgfQogICAgY29uc3Qgc3RhdGUgPSBzdHJtLnN0YXRlOwogICAgc3RhdGUud3NpemUgPSAwOwogICAgc3RhdGUud2hhdmUgPSAwOwogICAgc3RhdGUud25leHQgPSAwOwogICAgcmV0dXJuIGluZmxhdGVSZXNldEtlZXAoc3RybSk7CgogIH07CgoKICBjb25zdCBpbmZsYXRlUmVzZXQyID0gKHN0cm0sIHdpbmRvd0JpdHMpID0+IHsKICAgIGxldCB3cmFwOwoKICAgIC8qIGdldCB0aGUgc3RhdGUgKi8KICAgIGlmICghc3RybSB8fCAhc3RybS5zdGF0ZSkgeyByZXR1cm4gWl9TVFJFQU1fRVJST1IkMTsgfQogICAgY29uc3Qgc3RhdGUgPSBzdHJtLnN0YXRlOwoKICAgIC8qIGV4dHJhY3Qgd3JhcCByZXF1ZXN0IGZyb20gd2luZG93Qml0cyBwYXJhbWV0ZXIgKi8KICAgIGlmICh3aW5kb3dCaXRzIDwgMCkgewogICAgICB3cmFwID0gMDsKICAgICAgd2luZG93Qml0cyA9IC13aW5kb3dCaXRzOwogICAgfQogICAgZWxzZSB7CiAgICAgIHdyYXAgPSAod2luZG93Qml0cyA+PiA0KSArIDE7CiAgICAgIGlmICh3aW5kb3dCaXRzIDwgNDgpIHsKICAgICAgICB3aW5kb3dCaXRzICY9IDE1OwogICAgICB9CiAgICB9CgogICAgLyogc2V0IG51bWJlciBvZiB3aW5kb3cgYml0cywgZnJlZSB3aW5kb3cgaWYgZGlmZmVyZW50ICovCiAgICBpZiAod2luZG93Qml0cyAmJiAod2luZG93Qml0cyA8IDggfHwgd2luZG93Qml0cyA+IDE1KSkgewogICAgICByZXR1cm4gWl9TVFJFQU1fRVJST1IkMTsKICAgIH0KICAgIGlmIChzdGF0ZS53aW5kb3cgIT09IG51bGwgJiYgc3RhdGUud2JpdHMgIT09IHdpbmRvd0JpdHMpIHsKICAgICAgc3RhdGUud2luZG93ID0gbnVsbDsKICAgIH0KCiAgICAvKiB1cGRhdGUgc3RhdGUgYW5kIHJlc2V0IHRoZSByZXN0IG9mIGl0ICovCiAgICBzdGF0ZS53cmFwID0gd3JhcDsKICAgIHN0YXRlLndiaXRzID0gd2luZG93Qml0czsKICAgIHJldHVybiBpbmZsYXRlUmVzZXQoc3RybSk7CiAgfTsKCgogIGNvbnN0IGluZmxhdGVJbml0MiA9IChzdHJtLCB3aW5kb3dCaXRzKSA9PiB7CgogICAgaWYgKCFzdHJtKSB7IHJldHVybiBaX1NUUkVBTV9FUlJPUiQxOyB9CiAgICAvL3N0cm0ubXNnID0gWl9OVUxMOyAgICAgICAgICAgICAgICAgLyogaW4gY2FzZSB3ZSByZXR1cm4gYW4gZXJyb3IgKi8KCiAgICBjb25zdCBzdGF0ZSA9IG5ldyBJbmZsYXRlU3RhdGUoKTsKCiAgICAvL2lmIChzdGF0ZSA9PT0gWl9OVUxMKSByZXR1cm4gWl9NRU1fRVJST1I7CiAgICAvL1RyYWNldigoc3RkZXJyLCAiaW5mbGF0ZTogYWxsb2NhdGVkXG4iKSk7CiAgICBzdHJtLnN0YXRlID0gc3RhdGU7CiAgICBzdGF0ZS53aW5kb3cgPSBudWxsLypaX05VTEwqLzsKICAgIGNvbnN0IHJldCA9IGluZmxhdGVSZXNldDIoc3RybSwgd2luZG93Qml0cyk7CiAgICBpZiAocmV0ICE9PSBaX09LJDEpIHsKICAgICAgc3RybS5zdGF0ZSA9IG51bGwvKlpfTlVMTCovOwogICAgfQogICAgcmV0dXJuIHJldDsKICB9OwoKCiAgY29uc3QgaW5mbGF0ZUluaXQgPSAoc3RybSkgPT4gewoKICAgIHJldHVybiBpbmZsYXRlSW5pdDIoc3RybSwgREVGX1dCSVRTKTsKICB9OwoKCiAgLyoKICAgUmV0dXJuIHN0YXRlIHdpdGggbGVuZ3RoIGFuZCBkaXN0YW5jZSBkZWNvZGluZyB0YWJsZXMgYW5kIGluZGV4IHNpemVzIHNldCB0bwogICBmaXhlZCBjb2RlIGRlY29kaW5nLiAgTm9ybWFsbHkgdGhpcyByZXR1cm5zIGZpeGVkIHRhYmxlcyBmcm9tIGluZmZpeGVkLmguCiAgIElmIEJVSUxERklYRUQgaXMgZGVmaW5lZCwgdGhlbiBpbnN0ZWFkIHRoaXMgcm91dGluZSBidWlsZHMgdGhlIHRhYmxlcyB0aGUKICAgZmlyc3QgdGltZSBpdCdzIGNhbGxlZCwgYW5kIHJldHVybnMgdGhvc2UgdGFibGVzIHRoZSBmaXJzdCB0aW1lIGFuZAogICB0aGVyZWFmdGVyLiAgVGhpcyByZWR1Y2VzIHRoZSBzaXplIG9mIHRoZSBjb2RlIGJ5IGFib3V0IDJLIGJ5dGVzLCBpbgogICBleGNoYW5nZSBmb3IgYSBsaXR0bGUgZXhlY3V0aW9uIHRpbWUuICBIb3dldmVyLCBCVUlMREZJWEVEIHNob3VsZCBub3QgYmUKICAgdXNlZCBmb3IgdGhyZWFkZWQgYXBwbGljYXRpb25zLCBzaW5jZSB0aGUgcmV3cml0aW5nIG9mIHRoZSB0YWJsZXMgYW5kIHZpcmdpbgogICBtYXkgbm90IGJlIHRocmVhZC1zYWZlLgogICAqLwogIGxldCB2aXJnaW4gPSB0cnVlOwoKICBsZXQgbGVuZml4LCBkaXN0Zml4OyAvLyBXZSBoYXZlIG5vIHBvaW50ZXJzIGluIEpTLCBzbyBrZWVwIHRhYmxlcyBzZXBhcmF0ZQoKCiAgY29uc3QgZml4ZWR0YWJsZXMgPSAoc3RhdGUpID0+IHsKCiAgICAvKiBidWlsZCBmaXhlZCBodWZmbWFuIHRhYmxlcyBpZiBmaXJzdCBjYWxsIChtYXkgbm90IGJlIHRocmVhZCBzYWZlKSAqLwogICAgaWYgKHZpcmdpbikgewogICAgICBsZW5maXggPSBuZXcgSW50MzJBcnJheSg1MTIpOwogICAgICBkaXN0Zml4ID0gbmV3IEludDMyQXJyYXkoMzIpOwoKICAgICAgLyogbGl0ZXJhbC9sZW5ndGggdGFibGUgKi8KICAgICAgbGV0IHN5bSA9IDA7CiAgICAgIHdoaWxlIChzeW0gPCAxNDQpIHsgc3RhdGUubGVuc1tzeW0rK10gPSA4OyB9CiAgICAgIHdoaWxlIChzeW0gPCAyNTYpIHsgc3RhdGUubGVuc1tzeW0rK10gPSA5OyB9CiAgICAgIHdoaWxlIChzeW0gPCAyODApIHsgc3RhdGUubGVuc1tzeW0rK10gPSA3OyB9CiAgICAgIHdoaWxlIChzeW0gPCAyODgpIHsgc3RhdGUubGVuc1tzeW0rK10gPSA4OyB9CgogICAgICBpbmZ0cmVlcyhMRU5TLCAgc3RhdGUubGVucywgMCwgMjg4LCBsZW5maXgsICAgMCwgc3RhdGUud29yaywgeyBiaXRzOiA5IH0pOwoKICAgICAgLyogZGlzdGFuY2UgdGFibGUgKi8KICAgICAgc3ltID0gMDsKICAgICAgd2hpbGUgKHN5bSA8IDMyKSB7IHN0YXRlLmxlbnNbc3ltKytdID0gNTsgfQoKICAgICAgaW5mdHJlZXMoRElTVFMsIHN0YXRlLmxlbnMsIDAsIDMyLCAgIGRpc3RmaXgsIDAsIHN0YXRlLndvcmssIHsgYml0czogNSB9KTsKCiAgICAgIC8qIGRvIHRoaXMganVzdCBvbmNlICovCiAgICAgIHZpcmdpbiA9IGZhbHNlOwogICAgfQoKICAgIHN0YXRlLmxlbmNvZGUgPSBsZW5maXg7CiAgICBzdGF0ZS5sZW5iaXRzID0gOTsKICAgIHN0YXRlLmRpc3Rjb2RlID0gZGlzdGZpeDsKICAgIHN0YXRlLmRpc3RiaXRzID0gNTsKICB9OwoKCiAgLyoKICAgVXBkYXRlIHRoZSB3aW5kb3cgd2l0aCB0aGUgbGFzdCB3c2l6ZSAobm9ybWFsbHkgMzJLKSBieXRlcyB3cml0dGVuIGJlZm9yZQogICByZXR1cm5pbmcuICBJZiB3aW5kb3cgZG9lcyBub3QgZXhpc3QgeWV0LCBjcmVhdGUgaXQuICBUaGlzIGlzIG9ubHkgY2FsbGVkCiAgIHdoZW4gYSB3aW5kb3cgaXMgYWxyZWFkeSBpbiB1c2UsIG9yIHdoZW4gb3V0cHV0IGhhcyBiZWVuIHdyaXR0ZW4gZHVyaW5nIHRoaXMKICAgaW5mbGF0ZSBjYWxsLCBidXQgdGhlIGVuZCBvZiB0aGUgZGVmbGF0ZSBzdHJlYW0gaGFzIG5vdCBiZWVuIHJlYWNoZWQgeWV0LgogICBJdCBpcyBhbHNvIGNhbGxlZCB0byBjcmVhdGUgYSB3aW5kb3cgZm9yIGRpY3Rpb25hcnkgZGF0YSB3aGVuIGEgZGljdGlvbmFyeQogICBpcyBsb2FkZWQuCgogICBQcm92aWRpbmcgb3V0cHV0IGJ1ZmZlcnMgbGFyZ2VyIHRoYW4gMzJLIHRvIGluZmxhdGUoKSBzaG91bGQgcHJvdmlkZSBhIHNwZWVkCiAgIGFkdmFudGFnZSwgc2luY2Ugb25seSB0aGUgbGFzdCAzMksgb2Ygb3V0cHV0IGlzIGNvcGllZCB0byB0aGUgc2xpZGluZyB3aW5kb3cKICAgdXBvbiByZXR1cm4gZnJvbSBpbmZsYXRlKCksIGFuZCBzaW5jZSBhbGwgZGlzdGFuY2VzIGFmdGVyIHRoZSBmaXJzdCAzMksgb2YKICAgb3V0cHV0IHdpbGwgZmFsbCBpbiB0aGUgb3V0cHV0IGRhdGEsIG1ha2luZyBtYXRjaCBjb3BpZXMgc2ltcGxlciBhbmQgZmFzdGVyLgogICBUaGUgYWR2YW50YWdlIG1heSBiZSBkZXBlbmRlbnQgb24gdGhlIHNpemUgb2YgdGhlIHByb2Nlc3NvcidzIGRhdGEgY2FjaGVzLgogICAqLwogIGNvbnN0IHVwZGF0ZXdpbmRvdyA9IChzdHJtLCBzcmMsIGVuZCwgY29weSkgPT4gewoKICAgIGxldCBkaXN0OwogICAgY29uc3Qgc3RhdGUgPSBzdHJtLnN0YXRlOwoKICAgIC8qIGlmIGl0IGhhc24ndCBiZWVuIGRvbmUgYWxyZWFkeSwgYWxsb2NhdGUgc3BhY2UgZm9yIHRoZSB3aW5kb3cgKi8KICAgIGlmIChzdGF0ZS53aW5kb3cgPT09IG51bGwpIHsKICAgICAgc3RhdGUud3NpemUgPSAxIDw8IHN0YXRlLndiaXRzOwogICAgICBzdGF0ZS53bmV4dCA9IDA7CiAgICAgIHN0YXRlLndoYXZlID0gMDsKCiAgICAgIHN0YXRlLndpbmRvdyA9IG5ldyBVaW50OEFycmF5KHN0YXRlLndzaXplKTsKICAgIH0KCiAgICAvKiBjb3B5IHN0YXRlLT53c2l6ZSBvciBsZXNzIG91dHB1dCBieXRlcyBpbnRvIHRoZSBjaXJjdWxhciB3aW5kb3cgKi8KICAgIGlmIChjb3B5ID49IHN0YXRlLndzaXplKSB7CiAgICAgIHN0YXRlLndpbmRvdy5zZXQoc3JjLnN1YmFycmF5KGVuZCAtIHN0YXRlLndzaXplLCBlbmQpLCAwKTsKICAgICAgc3RhdGUud25leHQgPSAwOwogICAgICBzdGF0ZS53aGF2ZSA9IHN0YXRlLndzaXplOwogICAgfQogICAgZWxzZSB7CiAgICAgIGRpc3QgPSBzdGF0ZS53c2l6ZSAtIHN0YXRlLnduZXh0OwogICAgICBpZiAoZGlzdCA+IGNvcHkpIHsKICAgICAgICBkaXN0ID0gY29weTsKICAgICAgfQogICAgICAvL3ptZW1jcHkoc3RhdGUtPndpbmRvdyArIHN0YXRlLT53bmV4dCwgZW5kIC0gY29weSwgZGlzdCk7CiAgICAgIHN0YXRlLndpbmRvdy5zZXQoc3JjLnN1YmFycmF5KGVuZCAtIGNvcHksIGVuZCAtIGNvcHkgKyBkaXN0KSwgc3RhdGUud25leHQpOwogICAgICBjb3B5IC09IGRpc3Q7CiAgICAgIGlmIChjb3B5KSB7CiAgICAgICAgLy96bWVtY3B5KHN0YXRlLT53aW5kb3csIGVuZCAtIGNvcHksIGNvcHkpOwogICAgICAgIHN0YXRlLndpbmRvdy5zZXQoc3JjLnN1YmFycmF5KGVuZCAtIGNvcHksIGVuZCksIDApOwogICAgICAgIHN0YXRlLnduZXh0ID0gY29weTsKICAgICAgICBzdGF0ZS53aGF2ZSA9IHN0YXRlLndzaXplOwogICAgICB9CiAgICAgIGVsc2UgewogICAgICAgIHN0YXRlLnduZXh0ICs9IGRpc3Q7CiAgICAgICAgaWYgKHN0YXRlLnduZXh0ID09PSBzdGF0ZS53c2l6ZSkgeyBzdGF0ZS53bmV4dCA9IDA7IH0KICAgICAgICBpZiAoc3RhdGUud2hhdmUgPCBzdGF0ZS53c2l6ZSkgeyBzdGF0ZS53aGF2ZSArPSBkaXN0OyB9CiAgICAgIH0KICAgIH0KICAgIHJldHVybiAwOwogIH07CgoKICBjb25zdCBpbmZsYXRlJDIgPSAoc3RybSwgZmx1c2gpID0+IHsKCiAgICBsZXQgc3RhdGU7CiAgICBsZXQgaW5wdXQsIG91dHB1dDsgICAgICAgICAgLy8gaW5wdXQvb3V0cHV0IGJ1ZmZlcnMKICAgIGxldCBuZXh0OyAgICAgICAgICAgICAgICAgICAvKiBuZXh0IGlucHV0IElOREVYICovCiAgICBsZXQgcHV0OyAgICAgICAgICAgICAgICAgICAgLyogbmV4dCBvdXRwdXQgSU5ERVggKi8KICAgIGxldCBoYXZlLCBsZWZ0OyAgICAgICAgICAgICAvKiBhdmFpbGFibGUgaW5wdXQgYW5kIG91dHB1dCAqLwogICAgbGV0IGhvbGQ7ICAgICAgICAgICAgICAgICAgIC8qIGJpdCBidWZmZXIgKi8KICAgIGxldCBiaXRzOyAgICAgICAgICAgICAgICAgICAvKiBiaXRzIGluIGJpdCBidWZmZXIgKi8KICAgIGxldCBfaW4sIF9vdXQ7ICAgICAgICAgICAgICAvKiBzYXZlIHN0YXJ0aW5nIGF2YWlsYWJsZSBpbnB1dCBhbmQgb3V0cHV0ICovCiAgICBsZXQgY29weTsgICAgICAgICAgICAgICAgICAgLyogbnVtYmVyIG9mIHN0b3JlZCBvciBtYXRjaCBieXRlcyB0byBjb3B5ICovCiAgICBsZXQgZnJvbTsgICAgICAgICAgICAgICAgICAgLyogd2hlcmUgdG8gY29weSBtYXRjaCBieXRlcyBmcm9tICovCiAgICBsZXQgZnJvbV9zb3VyY2U7CiAgICBsZXQgaGVyZSA9IDA7ICAgICAgICAgICAgICAgLyogY3VycmVudCBkZWNvZGluZyB0YWJsZSBlbnRyeSAqLwogICAgbGV0IGhlcmVfYml0cywgaGVyZV9vcCwgaGVyZV92YWw7IC8vIHBha2VkICJoZXJlIiBkZW5vcm1hbGl6ZWQgKEpTIHNwZWNpZmljKQogICAgLy9sZXQgbGFzdDsgICAgICAgICAgICAgICAgICAgLyogcGFyZW50IHRhYmxlIGVudHJ5ICovCiAgICBsZXQgbGFzdF9iaXRzLCBsYXN0X29wLCBsYXN0X3ZhbDsgLy8gcGFrZWQgImxhc3QiIGRlbm9ybWFsaXplZCAoSlMgc3BlY2lmaWMpCiAgICBsZXQgbGVuOyAgICAgICAgICAgICAgICAgICAgLyogbGVuZ3RoIHRvIGNvcHkgZm9yIHJlcGVhdHMsIGJpdHMgdG8gZHJvcCAqLwogICAgbGV0IHJldDsgICAgICAgICAgICAgICAgICAgIC8qIHJldHVybiBjb2RlICovCiAgICBjb25zdCBoYnVmID0gbmV3IFVpbnQ4QXJyYXkoNCk7ICAgIC8qIGJ1ZmZlciBmb3IgZ3ppcCBoZWFkZXIgY3JjIGNhbGN1bGF0aW9uICovCiAgICBsZXQgb3B0czsKCiAgICBsZXQgbjsgLy8gdGVtcG9yYXJ5IHZhcmlhYmxlIGZvciBORUVEX0JJVFMKCiAgICBjb25zdCBvcmRlciA9IC8qIHBlcm11dGF0aW9uIG9mIGNvZGUgbGVuZ3RocyAqLwogICAgICBuZXcgVWludDhBcnJheShbIDE2LCAxNywgMTgsIDAsIDgsIDcsIDksIDYsIDEwLCA1LCAxMSwgNCwgMTIsIDMsIDEzLCAyLCAxNCwgMSwgMTUgXSk7CgoKICAgIGlmICghc3RybSB8fCAhc3RybS5zdGF0ZSB8fCAhc3RybS5vdXRwdXQgfHwKICAgICAgICAoIXN0cm0uaW5wdXQgJiYgc3RybS5hdmFpbF9pbiAhPT0gMCkpIHsKICAgICAgcmV0dXJuIFpfU1RSRUFNX0VSUk9SJDE7CiAgICB9CgogICAgc3RhdGUgPSBzdHJtLnN0YXRlOwogICAgaWYgKHN0YXRlLm1vZGUgPT09IFRZUEUpIHsgc3RhdGUubW9kZSA9IFRZUEVETzsgfSAgICAvKiBza2lwIGNoZWNrICovCgoKICAgIC8vLS0tIExPQUQoKSAtLS0KICAgIHB1dCA9IHN0cm0ubmV4dF9vdXQ7CiAgICBvdXRwdXQgPSBzdHJtLm91dHB1dDsKICAgIGxlZnQgPSBzdHJtLmF2YWlsX291dDsKICAgIG5leHQgPSBzdHJtLm5leHRfaW47CiAgICBpbnB1dCA9IHN0cm0uaW5wdXQ7CiAgICBoYXZlID0gc3RybS5hdmFpbF9pbjsKICAgIGhvbGQgPSBzdGF0ZS5ob2xkOwogICAgYml0cyA9IHN0YXRlLmJpdHM7CiAgICAvLy0tLQoKICAgIF9pbiA9IGhhdmU7CiAgICBfb3V0ID0gbGVmdDsKICAgIHJldCA9IFpfT0skMTsKCiAgICBpbmZfbGVhdmU6IC8vIGdvdG8gZW11bGF0aW9uCiAgICBmb3IgKDs7KSB7CiAgICAgIHN3aXRjaCAoc3RhdGUubW9kZSkgewogICAgICAgIGNhc2UgSEVBRDoKICAgICAgICAgIGlmIChzdGF0ZS53cmFwID09PSAwKSB7CiAgICAgICAgICAgIHN0YXRlLm1vZGUgPSBUWVBFRE87CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgICAgLy89PT0gTkVFREJJVFMoMTYpOwogICAgICAgICAgd2hpbGUgKGJpdHMgPCAxNikgewogICAgICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH0KICAgICAgICAgICAgaGF2ZS0tOwogICAgICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0czsKICAgICAgICAgICAgYml0cyArPSA4OwogICAgICAgICAgfQogICAgICAgICAgLy89PT0vLwogICAgICAgICAgaWYgKChzdGF0ZS53cmFwICYgMikgJiYgaG9sZCA9PT0gMHg4YjFmKSB7ICAvKiBnemlwIGhlYWRlciAqLwogICAgICAgICAgICBzdGF0ZS5jaGVjayA9IDAvKmNyYzMyKDBMLCBaX05VTEwsIDApKi87CiAgICAgICAgICAgIC8vPT09IENSQzIoc3RhdGUuY2hlY2ssIGhvbGQpOwogICAgICAgICAgICBoYnVmWzBdID0gaG9sZCAmIDB4ZmY7CiAgICAgICAgICAgIGhidWZbMV0gPSAoaG9sZCA+Pj4gOCkgJiAweGZmOwogICAgICAgICAgICBzdGF0ZS5jaGVjayA9IGNyYzMyXzEoc3RhdGUuY2hlY2ssIGhidWYsIDIsIDApOwogICAgICAgICAgICAvLz09PS8vCgogICAgICAgICAgICAvLz09PSBJTklUQklUUygpOwogICAgICAgICAgICBob2xkID0gMDsKICAgICAgICAgICAgYml0cyA9IDA7CiAgICAgICAgICAgIC8vPT09Ly8KICAgICAgICAgICAgc3RhdGUubW9kZSA9IEZMQUdTOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICAgIHN0YXRlLmZsYWdzID0gMDsgICAgICAgICAgIC8qIGV4cGVjdCB6bGliIGhlYWRlciAqLwogICAgICAgICAgaWYgKHN0YXRlLmhlYWQpIHsKICAgICAgICAgICAgc3RhdGUuaGVhZC5kb25lID0gZmFsc2U7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoIShzdGF0ZS53cmFwICYgMSkgfHwgICAvKiBjaGVjayBpZiB6bGliIGhlYWRlciBhbGxvd2VkICovCiAgICAgICAgICAgICgoKGhvbGQgJiAweGZmKS8qQklUUyg4KSovIDw8IDgpICsgKGhvbGQgPj4gOCkpICUgMzEpIHsKICAgICAgICAgICAgc3RybS5tc2cgPSAnaW5jb3JyZWN0IGhlYWRlciBjaGVjayc7CiAgICAgICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgICAgaWYgKChob2xkICYgMHgwZikvKkJJVFMoNCkqLyAhPT0gWl9ERUZMQVRFRCkgewogICAgICAgICAgICBzdHJtLm1zZyA9ICd1bmtub3duIGNvbXByZXNzaW9uIG1ldGhvZCc7CiAgICAgICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgICAgLy8tLS0gRFJPUEJJVFMoNCkgLS0tLy8KICAgICAgICAgIGhvbGQgPj4+PSA0OwogICAgICAgICAgYml0cyAtPSA0OwogICAgICAgICAgLy8tLS0vLwogICAgICAgICAgbGVuID0gKGhvbGQgJiAweDBmKS8qQklUUyg0KSovICsgODsKICAgICAgICAgIGlmIChzdGF0ZS53Yml0cyA9PT0gMCkgewogICAgICAgICAgICBzdGF0ZS53Yml0cyA9IGxlbjsKICAgICAgICAgIH0KICAgICAgICAgIGVsc2UgaWYgKGxlbiA+IHN0YXRlLndiaXRzKSB7CiAgICAgICAgICAgIHN0cm0ubXNnID0gJ2ludmFsaWQgd2luZG93IHNpemUnOwogICAgICAgICAgICBzdGF0ZS5tb2RlID0gQkFEOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KCiAgICAgICAgICAvLyAhISEgcGFrbyBwYXRjaC4gRm9yY2UgdXNlIGBvcHRpb25zLndpbmRvd0JpdHNgIGlmIHBhc3NlZC4KICAgICAgICAgIC8vIFJlcXVpcmVkIHRvIGFsd2F5cyB1c2UgbWF4IHdpbmRvdyBzaXplIGJ5IGRlZmF1bHQuCiAgICAgICAgICBzdGF0ZS5kbWF4ID0gMSA8PCBzdGF0ZS53Yml0czsKICAgICAgICAgIC8vc3RhdGUuZG1heCA9IDEgPDwgbGVuOwoKICAgICAgICAgIC8vVHJhY2V2KChzdGRlcnIsICJpbmZsYXRlOiAgIHpsaWIgaGVhZGVyIG9rXG4iKSk7CiAgICAgICAgICBzdHJtLmFkbGVyID0gc3RhdGUuY2hlY2sgPSAxLyphZGxlcjMyKDBMLCBaX05VTEwsIDApKi87CiAgICAgICAgICBzdGF0ZS5tb2RlID0gaG9sZCAmIDB4MjAwID8gRElDVElEIDogVFlQRTsKICAgICAgICAgIC8vPT09IElOSVRCSVRTKCk7CiAgICAgICAgICBob2xkID0gMDsKICAgICAgICAgIGJpdHMgPSAwOwogICAgICAgICAgLy89PT0vLwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSBGTEFHUzoKICAgICAgICAgIC8vPT09IE5FRURCSVRTKDE2KTsgKi8KICAgICAgICAgIHdoaWxlIChiaXRzIDwgMTYpIHsKICAgICAgICAgICAgaWYgKGhhdmUgPT09IDApIHsgYnJlYWsgaW5mX2xlYXZlOyB9CiAgICAgICAgICAgIGhhdmUtLTsKICAgICAgICAgICAgaG9sZCArPSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7CiAgICAgICAgICAgIGJpdHMgKz0gODsKICAgICAgICAgIH0KICAgICAgICAgIC8vPT09Ly8KICAgICAgICAgIHN0YXRlLmZsYWdzID0gaG9sZDsKICAgICAgICAgIGlmICgoc3RhdGUuZmxhZ3MgJiAweGZmKSAhPT0gWl9ERUZMQVRFRCkgewogICAgICAgICAgICBzdHJtLm1zZyA9ICd1bmtub3duIGNvbXByZXNzaW9uIG1ldGhvZCc7CiAgICAgICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgICAgaWYgKHN0YXRlLmZsYWdzICYgMHhlMDAwKSB7CiAgICAgICAgICAgIHN0cm0ubXNnID0gJ3Vua25vd24gaGVhZGVyIGZsYWdzIHNldCc7CiAgICAgICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgICAgaWYgKHN0YXRlLmhlYWQpIHsKICAgICAgICAgICAgc3RhdGUuaGVhZC50ZXh0ID0gKChob2xkID4+IDgpICYgMSk7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoc3RhdGUuZmxhZ3MgJiAweDAyMDApIHsKICAgICAgICAgICAgLy89PT0gQ1JDMihzdGF0ZS5jaGVjaywgaG9sZCk7CiAgICAgICAgICAgIGhidWZbMF0gPSBob2xkICYgMHhmZjsKICAgICAgICAgICAgaGJ1ZlsxXSA9IChob2xkID4+PiA4KSAmIDB4ZmY7CiAgICAgICAgICAgIHN0YXRlLmNoZWNrID0gY3JjMzJfMShzdGF0ZS5jaGVjaywgaGJ1ZiwgMiwgMCk7CiAgICAgICAgICAgIC8vPT09Ly8KICAgICAgICAgIH0KICAgICAgICAgIC8vPT09IElOSVRCSVRTKCk7CiAgICAgICAgICBob2xkID0gMDsKICAgICAgICAgIGJpdHMgPSAwOwogICAgICAgICAgLy89PT0vLwogICAgICAgICAgc3RhdGUubW9kZSA9IFRJTUU7CiAgICAgICAgICAvKiBmYWxscyB0aHJvdWdoICovCiAgICAgICAgY2FzZSBUSU1FOgogICAgICAgICAgLy89PT0gTkVFREJJVFMoMzIpOyAqLwogICAgICAgICAgd2hpbGUgKGJpdHMgPCAzMikgewogICAgICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH0KICAgICAgICAgICAgaGF2ZS0tOwogICAgICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0czsKICAgICAgICAgICAgYml0cyArPSA4OwogICAgICAgICAgfQogICAgICAgICAgLy89PT0vLwogICAgICAgICAgaWYgKHN0YXRlLmhlYWQpIHsKICAgICAgICAgICAgc3RhdGUuaGVhZC50aW1lID0gaG9sZDsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChzdGF0ZS5mbGFncyAmIDB4MDIwMCkgewogICAgICAgICAgICAvLz09PSBDUkM0KHN0YXRlLmNoZWNrLCBob2xkKQogICAgICAgICAgICBoYnVmWzBdID0gaG9sZCAmIDB4ZmY7CiAgICAgICAgICAgIGhidWZbMV0gPSAoaG9sZCA+Pj4gOCkgJiAweGZmOwogICAgICAgICAgICBoYnVmWzJdID0gKGhvbGQgPj4+IDE2KSAmIDB4ZmY7CiAgICAgICAgICAgIGhidWZbM10gPSAoaG9sZCA+Pj4gMjQpICYgMHhmZjsKICAgICAgICAgICAgc3RhdGUuY2hlY2sgPSBjcmMzMl8xKHN0YXRlLmNoZWNrLCBoYnVmLCA0LCAwKTsKICAgICAgICAgICAgLy89PT0KICAgICAgICAgIH0KICAgICAgICAgIC8vPT09IElOSVRCSVRTKCk7CiAgICAgICAgICBob2xkID0gMDsKICAgICAgICAgIGJpdHMgPSAwOwogICAgICAgICAgLy89PT0vLwogICAgICAgICAgc3RhdGUubW9kZSA9IE9TOwogICAgICAgICAgLyogZmFsbHMgdGhyb3VnaCAqLwogICAgICAgIGNhc2UgT1M6CiAgICAgICAgICAvLz09PSBORUVEQklUUygxNik7ICovCiAgICAgICAgICB3aGlsZSAoYml0cyA8IDE2KSB7CiAgICAgICAgICAgIGlmIChoYXZlID09PSAwKSB7IGJyZWFrIGluZl9sZWF2ZTsgfQogICAgICAgICAgICBoYXZlLS07CiAgICAgICAgICAgIGhvbGQgKz0gaW5wdXRbbmV4dCsrXSA8PCBiaXRzOwogICAgICAgICAgICBiaXRzICs9IDg7CiAgICAgICAgICB9CiAgICAgICAgICAvLz09PS8vCiAgICAgICAgICBpZiAoc3RhdGUuaGVhZCkgewogICAgICAgICAgICBzdGF0ZS5oZWFkLnhmbGFncyA9IChob2xkICYgMHhmZik7CiAgICAgICAgICAgIHN0YXRlLmhlYWQub3MgPSAoaG9sZCA+PiA4KTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChzdGF0ZS5mbGFncyAmIDB4MDIwMCkgewogICAgICAgICAgICAvLz09PSBDUkMyKHN0YXRlLmNoZWNrLCBob2xkKTsKICAgICAgICAgICAgaGJ1ZlswXSA9IGhvbGQgJiAweGZmOwogICAgICAgICAgICBoYnVmWzFdID0gKGhvbGQgPj4+IDgpICYgMHhmZjsKICAgICAgICAgICAgc3RhdGUuY2hlY2sgPSBjcmMzMl8xKHN0YXRlLmNoZWNrLCBoYnVmLCAyLCAwKTsKICAgICAgICAgICAgLy89PT0vLwogICAgICAgICAgfQogICAgICAgICAgLy89PT0gSU5JVEJJVFMoKTsKICAgICAgICAgIGhvbGQgPSAwOwogICAgICAgICAgYml0cyA9IDA7CiAgICAgICAgICAvLz09PS8vCiAgICAgICAgICBzdGF0ZS5tb2RlID0gRVhMRU47CiAgICAgICAgICAvKiBmYWxscyB0aHJvdWdoICovCiAgICAgICAgY2FzZSBFWExFTjoKICAgICAgICAgIGlmIChzdGF0ZS5mbGFncyAmIDB4MDQwMCkgewogICAgICAgICAgICAvLz09PSBORUVEQklUUygxNik7ICovCiAgICAgICAgICAgIHdoaWxlIChiaXRzIDwgMTYpIHsKICAgICAgICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH0KICAgICAgICAgICAgICBoYXZlLS07CiAgICAgICAgICAgICAgaG9sZCArPSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7CiAgICAgICAgICAgICAgYml0cyArPSA4OwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vPT09Ly8KICAgICAgICAgICAgc3RhdGUubGVuZ3RoID0gaG9sZDsKICAgICAgICAgICAgaWYgKHN0YXRlLmhlYWQpIHsKICAgICAgICAgICAgICBzdGF0ZS5oZWFkLmV4dHJhX2xlbiA9IGhvbGQ7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHN0YXRlLmZsYWdzICYgMHgwMjAwKSB7CiAgICAgICAgICAgICAgLy89PT0gQ1JDMihzdGF0ZS5jaGVjaywgaG9sZCk7CiAgICAgICAgICAgICAgaGJ1ZlswXSA9IGhvbGQgJiAweGZmOwogICAgICAgICAgICAgIGhidWZbMV0gPSAoaG9sZCA+Pj4gOCkgJiAweGZmOwogICAgICAgICAgICAgIHN0YXRlLmNoZWNrID0gY3JjMzJfMShzdGF0ZS5jaGVjaywgaGJ1ZiwgMiwgMCk7CiAgICAgICAgICAgICAgLy89PT0vLwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vPT09IElOSVRCSVRTKCk7CiAgICAgICAgICAgIGhvbGQgPSAwOwogICAgICAgICAgICBiaXRzID0gMDsKICAgICAgICAgICAgLy89PT0vLwogICAgICAgICAgfQogICAgICAgICAgZWxzZSBpZiAoc3RhdGUuaGVhZCkgewogICAgICAgICAgICBzdGF0ZS5oZWFkLmV4dHJhID0gbnVsbC8qWl9OVUxMKi87CiAgICAgICAgICB9CiAgICAgICAgICBzdGF0ZS5tb2RlID0gRVhUUkE7CiAgICAgICAgICAvKiBmYWxscyB0aHJvdWdoICovCiAgICAgICAgY2FzZSBFWFRSQToKICAgICAgICAgIGlmIChzdGF0ZS5mbGFncyAmIDB4MDQwMCkgewogICAgICAgICAgICBjb3B5ID0gc3RhdGUubGVuZ3RoOwogICAgICAgICAgICBpZiAoY29weSA+IGhhdmUpIHsgY29weSA9IGhhdmU7IH0KICAgICAgICAgICAgaWYgKGNvcHkpIHsKICAgICAgICAgICAgICBpZiAoc3RhdGUuaGVhZCkgewogICAgICAgICAgICAgICAgbGVuID0gc3RhdGUuaGVhZC5leHRyYV9sZW4gLSBzdGF0ZS5sZW5ndGg7CiAgICAgICAgICAgICAgICBpZiAoIXN0YXRlLmhlYWQuZXh0cmEpIHsKICAgICAgICAgICAgICAgICAgLy8gVXNlIHVudHlwZWQgYXJyYXkgZm9yIG1vcmUgY29udmVuaWVudCBwcm9jZXNzaW5nIGxhdGVyCiAgICAgICAgICAgICAgICAgIHN0YXRlLmhlYWQuZXh0cmEgPSBuZXcgVWludDhBcnJheShzdGF0ZS5oZWFkLmV4dHJhX2xlbik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBzdGF0ZS5oZWFkLmV4dHJhLnNldCgKICAgICAgICAgICAgICAgICAgaW5wdXQuc3ViYXJyYXkoCiAgICAgICAgICAgICAgICAgICAgbmV4dCwKICAgICAgICAgICAgICAgICAgICAvLyBleHRyYSBmaWVsZCBpcyBsaW1pdGVkIHRvIDY1NTM2IGJ5dGVzCiAgICAgICAgICAgICAgICAgICAgLy8gLSBubyBuZWVkIGZvciBhZGRpdGlvbmFsIHNpemUgY2hlY2sKICAgICAgICAgICAgICAgICAgICBuZXh0ICsgY29weQogICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgICAvKmxlbiArIGNvcHkgPiBzdGF0ZS5oZWFkLmV4dHJhX21heCAtIGxlbiA/IHN0YXRlLmhlYWQuZXh0cmFfbWF4IDogY29weSwqLwogICAgICAgICAgICAgICAgICBsZW4KICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAvL3ptZW1jcHkoc3RhdGUuaGVhZC5leHRyYSArIGxlbiwgbmV4dCwKICAgICAgICAgICAgICAgIC8vICAgICAgICBsZW4gKyBjb3B5ID4gc3RhdGUuaGVhZC5leHRyYV9tYXggPwogICAgICAgICAgICAgICAgLy8gICAgICAgIHN0YXRlLmhlYWQuZXh0cmFfbWF4IC0gbGVuIDogY29weSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmIChzdGF0ZS5mbGFncyAmIDB4MDIwMCkgewogICAgICAgICAgICAgICAgc3RhdGUuY2hlY2sgPSBjcmMzMl8xKHN0YXRlLmNoZWNrLCBpbnB1dCwgY29weSwgbmV4dCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGhhdmUgLT0gY29weTsKICAgICAgICAgICAgICBuZXh0ICs9IGNvcHk7CiAgICAgICAgICAgICAgc3RhdGUubGVuZ3RoIC09IGNvcHk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHN0YXRlLmxlbmd0aCkgeyBicmVhayBpbmZfbGVhdmU7IH0KICAgICAgICAgIH0KICAgICAgICAgIHN0YXRlLmxlbmd0aCA9IDA7CiAgICAgICAgICBzdGF0ZS5tb2RlID0gTkFNRTsKICAgICAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi8KICAgICAgICBjYXNlIE5BTUU6CiAgICAgICAgICBpZiAoc3RhdGUuZmxhZ3MgJiAweDA4MDApIHsKICAgICAgICAgICAgaWYgKGhhdmUgPT09IDApIHsgYnJlYWsgaW5mX2xlYXZlOyB9CiAgICAgICAgICAgIGNvcHkgPSAwOwogICAgICAgICAgICBkbyB7CiAgICAgICAgICAgICAgLy8gVE9ETzogMiBvciAxIGJ5dGVzPwogICAgICAgICAgICAgIGxlbiA9IGlucHV0W25leHQgKyBjb3B5KytdOwogICAgICAgICAgICAgIC8qIHVzZSBjb25zdGFudCBsaW1pdCBiZWNhdXNlIGluIGpzIHdlIHNob3VsZCBub3QgcHJlYWxsb2NhdGUgbWVtb3J5ICovCiAgICAgICAgICAgICAgaWYgKHN0YXRlLmhlYWQgJiYgbGVuICYmCiAgICAgICAgICAgICAgICAgIChzdGF0ZS5sZW5ndGggPCA2NTUzNiAvKnN0YXRlLmhlYWQubmFtZV9tYXgqLykpIHsKICAgICAgICAgICAgICAgIHN0YXRlLmhlYWQubmFtZSArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGxlbik7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IHdoaWxlIChsZW4gJiYgY29weSA8IGhhdmUpOwoKICAgICAgICAgICAgaWYgKHN0YXRlLmZsYWdzICYgMHgwMjAwKSB7CiAgICAgICAgICAgICAgc3RhdGUuY2hlY2sgPSBjcmMzMl8xKHN0YXRlLmNoZWNrLCBpbnB1dCwgY29weSwgbmV4dCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaGF2ZSAtPSBjb3B5OwogICAgICAgICAgICBuZXh0ICs9IGNvcHk7CiAgICAgICAgICAgIGlmIChsZW4pIHsgYnJlYWsgaW5mX2xlYXZlOyB9CiAgICAgICAgICB9CiAgICAgICAgICBlbHNlIGlmIChzdGF0ZS5oZWFkKSB7CiAgICAgICAgICAgIHN0YXRlLmhlYWQubmFtZSA9IG51bGw7CiAgICAgICAgICB9CiAgICAgICAgICBzdGF0ZS5sZW5ndGggPSAwOwogICAgICAgICAgc3RhdGUubW9kZSA9IENPTU1FTlQ7CiAgICAgICAgICAvKiBmYWxscyB0aHJvdWdoICovCiAgICAgICAgY2FzZSBDT01NRU5UOgogICAgICAgICAgaWYgKHN0YXRlLmZsYWdzICYgMHgxMDAwKSB7CiAgICAgICAgICAgIGlmIChoYXZlID09PSAwKSB7IGJyZWFrIGluZl9sZWF2ZTsgfQogICAgICAgICAgICBjb3B5ID0gMDsKICAgICAgICAgICAgZG8gewogICAgICAgICAgICAgIGxlbiA9IGlucHV0W25leHQgKyBjb3B5KytdOwogICAgICAgICAgICAgIC8qIHVzZSBjb25zdGFudCBsaW1pdCBiZWNhdXNlIGluIGpzIHdlIHNob3VsZCBub3QgcHJlYWxsb2NhdGUgbWVtb3J5ICovCiAgICAgICAgICAgICAgaWYgKHN0YXRlLmhlYWQgJiYgbGVuICYmCiAgICAgICAgICAgICAgICAgIChzdGF0ZS5sZW5ndGggPCA2NTUzNiAvKnN0YXRlLmhlYWQuY29tbV9tYXgqLykpIHsKICAgICAgICAgICAgICAgIHN0YXRlLmhlYWQuY29tbWVudCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGxlbik7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IHdoaWxlIChsZW4gJiYgY29weSA8IGhhdmUpOwogICAgICAgICAgICBpZiAoc3RhdGUuZmxhZ3MgJiAweDAyMDApIHsKICAgICAgICAgICAgICBzdGF0ZS5jaGVjayA9IGNyYzMyXzEoc3RhdGUuY2hlY2ssIGlucHV0LCBjb3B5LCBuZXh0KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBoYXZlIC09IGNvcHk7CiAgICAgICAgICAgIG5leHQgKz0gY29weTsKICAgICAgICAgICAgaWYgKGxlbikgeyBicmVhayBpbmZfbGVhdmU7IH0KICAgICAgICAgIH0KICAgICAgICAgIGVsc2UgaWYgKHN0YXRlLmhlYWQpIHsKICAgICAgICAgICAgc3RhdGUuaGVhZC5jb21tZW50ID0gbnVsbDsKICAgICAgICAgIH0KICAgICAgICAgIHN0YXRlLm1vZGUgPSBIQ1JDOwogICAgICAgICAgLyogZmFsbHMgdGhyb3VnaCAqLwogICAgICAgIGNhc2UgSENSQzoKICAgICAgICAgIGlmIChzdGF0ZS5mbGFncyAmIDB4MDIwMCkgewogICAgICAgICAgICAvLz09PSBORUVEQklUUygxNik7ICovCiAgICAgICAgICAgIHdoaWxlIChiaXRzIDwgMTYpIHsKICAgICAgICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH0KICAgICAgICAgICAgICBoYXZlLS07CiAgICAgICAgICAgICAgaG9sZCArPSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7CiAgICAgICAgICAgICAgYml0cyArPSA4OwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vPT09Ly8KICAgICAgICAgICAgaWYgKGhvbGQgIT09IChzdGF0ZS5jaGVjayAmIDB4ZmZmZikpIHsKICAgICAgICAgICAgICBzdHJtLm1zZyA9ICdoZWFkZXIgY3JjIG1pc21hdGNoJzsKICAgICAgICAgICAgICBzdGF0ZS5tb2RlID0gQkFEOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vPT09IElOSVRCSVRTKCk7CiAgICAgICAgICAgIGhvbGQgPSAwOwogICAgICAgICAgICBiaXRzID0gMDsKICAgICAgICAgICAgLy89PT0vLwogICAgICAgICAgfQogICAgICAgICAgaWYgKHN0YXRlLmhlYWQpIHsKICAgICAgICAgICAgc3RhdGUuaGVhZC5oY3JjID0gKChzdGF0ZS5mbGFncyA+PiA5KSAmIDEpOwogICAgICAgICAgICBzdGF0ZS5oZWFkLmRvbmUgPSB0cnVlOwogICAgICAgICAgfQogICAgICAgICAgc3RybS5hZGxlciA9IHN0YXRlLmNoZWNrID0gMDsKICAgICAgICAgIHN0YXRlLm1vZGUgPSBUWVBFOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSBESUNUSUQ6CiAgICAgICAgICAvLz09PSBORUVEQklUUygzMik7ICovCiAgICAgICAgICB3aGlsZSAoYml0cyA8IDMyKSB7CiAgICAgICAgICAgIGlmIChoYXZlID09PSAwKSB7IGJyZWFrIGluZl9sZWF2ZTsgfQogICAgICAgICAgICBoYXZlLS07CiAgICAgICAgICAgIGhvbGQgKz0gaW5wdXRbbmV4dCsrXSA8PCBiaXRzOwogICAgICAgICAgICBiaXRzICs9IDg7CiAgICAgICAgICB9CiAgICAgICAgICAvLz09PS8vCiAgICAgICAgICBzdHJtLmFkbGVyID0gc3RhdGUuY2hlY2sgPSB6c3dhcDMyKGhvbGQpOwogICAgICAgICAgLy89PT0gSU5JVEJJVFMoKTsKICAgICAgICAgIGhvbGQgPSAwOwogICAgICAgICAgYml0cyA9IDA7CiAgICAgICAgICAvLz09PS8vCiAgICAgICAgICBzdGF0ZS5tb2RlID0gRElDVDsKICAgICAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi8KICAgICAgICBjYXNlIERJQ1Q6CiAgICAgICAgICBpZiAoc3RhdGUuaGF2ZWRpY3QgPT09IDApIHsKICAgICAgICAgICAgLy8tLS0gUkVTVE9SRSgpIC0tLQogICAgICAgICAgICBzdHJtLm5leHRfb3V0ID0gcHV0OwogICAgICAgICAgICBzdHJtLmF2YWlsX291dCA9IGxlZnQ7CiAgICAgICAgICAgIHN0cm0ubmV4dF9pbiA9IG5leHQ7CiAgICAgICAgICAgIHN0cm0uYXZhaWxfaW4gPSBoYXZlOwogICAgICAgICAgICBzdGF0ZS5ob2xkID0gaG9sZDsKICAgICAgICAgICAgc3RhdGUuYml0cyA9IGJpdHM7CiAgICAgICAgICAgIC8vLS0tCiAgICAgICAgICAgIHJldHVybiBaX05FRURfRElDVCQxOwogICAgICAgICAgfQogICAgICAgICAgc3RybS5hZGxlciA9IHN0YXRlLmNoZWNrID0gMS8qYWRsZXIzMigwTCwgWl9OVUxMLCAwKSovOwogICAgICAgICAgc3RhdGUubW9kZSA9IFRZUEU7CiAgICAgICAgICAvKiBmYWxscyB0aHJvdWdoICovCiAgICAgICAgY2FzZSBUWVBFOgogICAgICAgICAgaWYgKGZsdXNoID09PSBaX0JMT0NLIHx8IGZsdXNoID09PSBaX1RSRUVTKSB7IGJyZWFrIGluZl9sZWF2ZTsgfQogICAgICAgICAgLyogZmFsbHMgdGhyb3VnaCAqLwogICAgICAgIGNhc2UgVFlQRURPOgogICAgICAgICAgaWYgKHN0YXRlLmxhc3QpIHsKICAgICAgICAgICAgLy8tLS0gQllURUJJVFMoKSAtLS0vLwogICAgICAgICAgICBob2xkID4+Pj0gYml0cyAmIDc7CiAgICAgICAgICAgIGJpdHMgLT0gYml0cyAmIDc7CiAgICAgICAgICAgIC8vLS0tLy8KICAgICAgICAgICAgc3RhdGUubW9kZSA9IENIRUNLOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICAgIC8vPT09IE5FRURCSVRTKDMpOyAqLwogICAgICAgICAgd2hpbGUgKGJpdHMgPCAzKSB7CiAgICAgICAgICAgIGlmIChoYXZlID09PSAwKSB7IGJyZWFrIGluZl9sZWF2ZTsgfQogICAgICAgICAgICBoYXZlLS07CiAgICAgICAgICAgIGhvbGQgKz0gaW5wdXRbbmV4dCsrXSA8PCBiaXRzOwogICAgICAgICAgICBiaXRzICs9IDg7CiAgICAgICAgICB9CiAgICAgICAgICAvLz09PS8vCiAgICAgICAgICBzdGF0ZS5sYXN0ID0gKGhvbGQgJiAweDAxKS8qQklUUygxKSovOwogICAgICAgICAgLy8tLS0gRFJPUEJJVFMoMSkgLS0tLy8KICAgICAgICAgIGhvbGQgPj4+PSAxOwogICAgICAgICAgYml0cyAtPSAxOwogICAgICAgICAgLy8tLS0vLwoKICAgICAgICAgIHN3aXRjaCAoKGhvbGQgJiAweDAzKS8qQklUUygyKSovKSB7CiAgICAgICAgICAgIGNhc2UgMDogICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIHN0b3JlZCBibG9jayAqLwogICAgICAgICAgICAgIC8vVHJhY2V2KChzdGRlcnIsICJpbmZsYXRlOiAgICAgc3RvcmVkIGJsb2NrJXNcbiIsCiAgICAgICAgICAgICAgLy8gICAgICAgIHN0YXRlLmxhc3QgPyAiIChsYXN0KSIgOiAiIikpOwogICAgICAgICAgICAgIHN0YXRlLm1vZGUgPSBTVE9SRUQ7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgMTogICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIGZpeGVkIGJsb2NrICovCiAgICAgICAgICAgICAgZml4ZWR0YWJsZXMoc3RhdGUpOwogICAgICAgICAgICAgIC8vVHJhY2V2KChzdGRlcnIsICJpbmZsYXRlOiAgICAgZml4ZWQgY29kZXMgYmxvY2slc1xuIiwKICAgICAgICAgICAgICAvLyAgICAgICAgc3RhdGUubGFzdCA/ICIgKGxhc3QpIiA6ICIiKSk7CiAgICAgICAgICAgICAgc3RhdGUubW9kZSA9IExFTl87ICAgICAgICAgICAgIC8qIGRlY29kZSBjb2RlcyAqLwogICAgICAgICAgICAgIGlmIChmbHVzaCA9PT0gWl9UUkVFUykgewogICAgICAgICAgICAgICAgLy8tLS0gRFJPUEJJVFMoMikgLS0tLy8KICAgICAgICAgICAgICAgIGhvbGQgPj4+PSAyOwogICAgICAgICAgICAgICAgYml0cyAtPSAyOwogICAgICAgICAgICAgICAgLy8tLS0vLwogICAgICAgICAgICAgICAgYnJlYWsgaW5mX2xlYXZlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAyOiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogZHluYW1pYyBibG9jayAqLwogICAgICAgICAgICAgIC8vVHJhY2V2KChzdGRlcnIsICJpbmZsYXRlOiAgICAgZHluYW1pYyBjb2RlcyBibG9jayVzXG4iLAogICAgICAgICAgICAgIC8vICAgICAgICBzdGF0ZS5sYXN0ID8gIiAobGFzdCkiIDogIiIpKTsKICAgICAgICAgICAgICBzdGF0ZS5tb2RlID0gVEFCTEU7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICBzdHJtLm1zZyA9ICdpbnZhbGlkIGJsb2NrIHR5cGUnOwogICAgICAgICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7CiAgICAgICAgICB9CiAgICAgICAgICAvLy0tLSBEUk9QQklUUygyKSAtLS0vLwogICAgICAgICAgaG9sZCA+Pj49IDI7CiAgICAgICAgICBiaXRzIC09IDI7CiAgICAgICAgICAvLy0tLS8vCiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlIFNUT1JFRDoKICAgICAgICAgIC8vLS0tIEJZVEVCSVRTKCkgLS0tLy8gLyogZ28gdG8gYnl0ZSBib3VuZGFyeSAqLwogICAgICAgICAgaG9sZCA+Pj49IGJpdHMgJiA3OwogICAgICAgICAgYml0cyAtPSBiaXRzICYgNzsKICAgICAgICAgIC8vLS0tLy8KICAgICAgICAgIC8vPT09IE5FRURCSVRTKDMyKTsgKi8KICAgICAgICAgIHdoaWxlIChiaXRzIDwgMzIpIHsKICAgICAgICAgICAgaWYgKGhhdmUgPT09IDApIHsgYnJlYWsgaW5mX2xlYXZlOyB9CiAgICAgICAgICAgIGhhdmUtLTsKICAgICAgICAgICAgaG9sZCArPSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7CiAgICAgICAgICAgIGJpdHMgKz0gODsKICAgICAgICAgIH0KICAgICAgICAgIC8vPT09Ly8KICAgICAgICAgIGlmICgoaG9sZCAmIDB4ZmZmZikgIT09ICgoaG9sZCA+Pj4gMTYpIF4gMHhmZmZmKSkgewogICAgICAgICAgICBzdHJtLm1zZyA9ICdpbnZhbGlkIHN0b3JlZCBibG9jayBsZW5ndGhzJzsKICAgICAgICAgICAgc3RhdGUubW9kZSA9IEJBRDsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgICBzdGF0ZS5sZW5ndGggPSBob2xkICYgMHhmZmZmOwogICAgICAgICAgLy9UcmFjZXYoKHN0ZGVyciwgImluZmxhdGU6ICAgICAgIHN0b3JlZCBsZW5ndGggJXVcbiIsCiAgICAgICAgICAvLyAgICAgICAgc3RhdGUubGVuZ3RoKSk7CiAgICAgICAgICAvLz09PSBJTklUQklUUygpOwogICAgICAgICAgaG9sZCA9IDA7CiAgICAgICAgICBiaXRzID0gMDsKICAgICAgICAgIC8vPT09Ly8KICAgICAgICAgIHN0YXRlLm1vZGUgPSBDT1BZXzsKICAgICAgICAgIGlmIChmbHVzaCA9PT0gWl9UUkVFUykgeyBicmVhayBpbmZfbGVhdmU7IH0KICAgICAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi8KICAgICAgICBjYXNlIENPUFlfOgogICAgICAgICAgc3RhdGUubW9kZSA9IENPUFk7CiAgICAgICAgICAvKiBmYWxscyB0aHJvdWdoICovCiAgICAgICAgY2FzZSBDT1BZOgogICAgICAgICAgY29weSA9IHN0YXRlLmxlbmd0aDsKICAgICAgICAgIGlmIChjb3B5KSB7CiAgICAgICAgICAgIGlmIChjb3B5ID4gaGF2ZSkgeyBjb3B5ID0gaGF2ZTsgfQogICAgICAgICAgICBpZiAoY29weSA+IGxlZnQpIHsgY29weSA9IGxlZnQ7IH0KICAgICAgICAgICAgaWYgKGNvcHkgPT09IDApIHsgYnJlYWsgaW5mX2xlYXZlOyB9CiAgICAgICAgICAgIC8vLS0tIHptZW1jcHkocHV0LCBuZXh0LCBjb3B5KTsgLS0tCiAgICAgICAgICAgIG91dHB1dC5zZXQoaW5wdXQuc3ViYXJyYXkobmV4dCwgbmV4dCArIGNvcHkpLCBwdXQpOwogICAgICAgICAgICAvLy0tLS8vCiAgICAgICAgICAgIGhhdmUgLT0gY29weTsKICAgICAgICAgICAgbmV4dCArPSBjb3B5OwogICAgICAgICAgICBsZWZ0IC09IGNvcHk7CiAgICAgICAgICAgIHB1dCArPSBjb3B5OwogICAgICAgICAgICBzdGF0ZS5sZW5ndGggLT0gY29weTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgICAvL1RyYWNldigoc3RkZXJyLCAiaW5mbGF0ZTogICAgICAgc3RvcmVkIGVuZFxuIikpOwogICAgICAgICAgc3RhdGUubW9kZSA9IFRZUEU7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlIFRBQkxFOgogICAgICAgICAgLy89PT0gTkVFREJJVFMoMTQpOyAqLwogICAgICAgICAgd2hpbGUgKGJpdHMgPCAxNCkgewogICAgICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH0KICAgICAgICAgICAgaGF2ZS0tOwogICAgICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0czsKICAgICAgICAgICAgYml0cyArPSA4OwogICAgICAgICAgfQogICAgICAgICAgLy89PT0vLwogICAgICAgICAgc3RhdGUubmxlbiA9IChob2xkICYgMHgxZikvKkJJVFMoNSkqLyArIDI1NzsKICAgICAgICAgIC8vLS0tIERST1BCSVRTKDUpIC0tLS8vCiAgICAgICAgICBob2xkID4+Pj0gNTsKICAgICAgICAgIGJpdHMgLT0gNTsKICAgICAgICAgIC8vLS0tLy8KICAgICAgICAgIHN0YXRlLm5kaXN0ID0gKGhvbGQgJiAweDFmKS8qQklUUyg1KSovICsgMTsKICAgICAgICAgIC8vLS0tIERST1BCSVRTKDUpIC0tLS8vCiAgICAgICAgICBob2xkID4+Pj0gNTsKICAgICAgICAgIGJpdHMgLT0gNTsKICAgICAgICAgIC8vLS0tLy8KICAgICAgICAgIHN0YXRlLm5jb2RlID0gKGhvbGQgJiAweDBmKS8qQklUUyg0KSovICsgNDsKICAgICAgICAgIC8vLS0tIERST1BCSVRTKDQpIC0tLS8vCiAgICAgICAgICBob2xkID4+Pj0gNDsKICAgICAgICAgIGJpdHMgLT0gNDsKICAgICAgICAgIC8vLS0tLy8KICAvLyNpZm5kZWYgUEtaSVBfQlVHX1dPUktBUk9VTkQKICAgICAgICAgIGlmIChzdGF0ZS5ubGVuID4gMjg2IHx8IHN0YXRlLm5kaXN0ID4gMzApIHsKICAgICAgICAgICAgc3RybS5tc2cgPSAndG9vIG1hbnkgbGVuZ3RoIG9yIGRpc3RhbmNlIHN5bWJvbHMnOwogICAgICAgICAgICBzdGF0ZS5tb2RlID0gQkFEOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAvLyNlbmRpZgogICAgICAgICAgLy9UcmFjZXYoKHN0ZGVyciwgImluZmxhdGU6ICAgICAgIHRhYmxlIHNpemVzIG9rXG4iKSk7CiAgICAgICAgICBzdGF0ZS5oYXZlID0gMDsKICAgICAgICAgIHN0YXRlLm1vZGUgPSBMRU5MRU5TOwogICAgICAgICAgLyogZmFsbHMgdGhyb3VnaCAqLwogICAgICAgIGNhc2UgTEVOTEVOUzoKICAgICAgICAgIHdoaWxlIChzdGF0ZS5oYXZlIDwgc3RhdGUubmNvZGUpIHsKICAgICAgICAgICAgLy89PT0gTkVFREJJVFMoMyk7CiAgICAgICAgICAgIHdoaWxlIChiaXRzIDwgMykgewogICAgICAgICAgICAgIGlmIChoYXZlID09PSAwKSB7IGJyZWFrIGluZl9sZWF2ZTsgfQogICAgICAgICAgICAgIGhhdmUtLTsKICAgICAgICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0czsKICAgICAgICAgICAgICBiaXRzICs9IDg7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy89PT0vLwogICAgICAgICAgICBzdGF0ZS5sZW5zW29yZGVyW3N0YXRlLmhhdmUrK11dID0gKGhvbGQgJiAweDA3KTsvL0JJVFMoMyk7CiAgICAgICAgICAgIC8vLS0tIERST1BCSVRTKDMpIC0tLS8vCiAgICAgICAgICAgIGhvbGQgPj4+PSAzOwogICAgICAgICAgICBiaXRzIC09IDM7CiAgICAgICAgICAgIC8vLS0tLy8KICAgICAgICAgIH0KICAgICAgICAgIHdoaWxlIChzdGF0ZS5oYXZlIDwgMTkpIHsKICAgICAgICAgICAgc3RhdGUubGVuc1tvcmRlcltzdGF0ZS5oYXZlKytdXSA9IDA7CiAgICAgICAgICB9CiAgICAgICAgICAvLyBXZSBoYXZlIHNlcGFyYXRlIHRhYmxlcyAmIG5vIHBvaW50ZXJzLiAyIGNvbW1lbnRlZCBsaW5lcyBiZWxvdyBub3QgbmVlZGVkLgogICAgICAgICAgLy9zdGF0ZS5uZXh0ID0gc3RhdGUuY29kZXM7CiAgICAgICAgICAvL3N0YXRlLmxlbmNvZGUgPSBzdGF0ZS5uZXh0OwogICAgICAgICAgLy8gU3dpdGNoIHRvIHVzZSBkeW5hbWljIHRhYmxlCiAgICAgICAgICBzdGF0ZS5sZW5jb2RlID0gc3RhdGUubGVuZHluOwogICAgICAgICAgc3RhdGUubGVuYml0cyA9IDc7CgogICAgICAgICAgb3B0cyA9IHsgYml0czogc3RhdGUubGVuYml0cyB9OwogICAgICAgICAgcmV0ID0gaW5mdHJlZXMoQ09ERVMsIHN0YXRlLmxlbnMsIDAsIDE5LCBzdGF0ZS5sZW5jb2RlLCAwLCBzdGF0ZS53b3JrLCBvcHRzKTsKICAgICAgICAgIHN0YXRlLmxlbmJpdHMgPSBvcHRzLmJpdHM7CgogICAgICAgICAgaWYgKHJldCkgewogICAgICAgICAgICBzdHJtLm1zZyA9ICdpbnZhbGlkIGNvZGUgbGVuZ3RocyBzZXQnOwogICAgICAgICAgICBzdGF0ZS5tb2RlID0gQkFEOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICAgIC8vVHJhY2V2KChzdGRlcnIsICJpbmZsYXRlOiAgICAgICBjb2RlIGxlbmd0aHMgb2tcbiIpKTsKICAgICAgICAgIHN0YXRlLmhhdmUgPSAwOwogICAgICAgICAgc3RhdGUubW9kZSA9IENPREVMRU5TOwogICAgICAgICAgLyogZmFsbHMgdGhyb3VnaCAqLwogICAgICAgIGNhc2UgQ09ERUxFTlM6CiAgICAgICAgICB3aGlsZSAoc3RhdGUuaGF2ZSA8IHN0YXRlLm5sZW4gKyBzdGF0ZS5uZGlzdCkgewogICAgICAgICAgICBmb3IgKDs7KSB7CiAgICAgICAgICAgICAgaGVyZSA9IHN0YXRlLmxlbmNvZGVbaG9sZCAmICgoMSA8PCBzdGF0ZS5sZW5iaXRzKSAtIDEpXTsvKkJJVFMoc3RhdGUubGVuYml0cykqLwogICAgICAgICAgICAgIGhlcmVfYml0cyA9IGhlcmUgPj4+IDI0OwogICAgICAgICAgICAgIGhlcmVfb3AgPSAoaGVyZSA+Pj4gMTYpICYgMHhmZjsKICAgICAgICAgICAgICBoZXJlX3ZhbCA9IGhlcmUgJiAweGZmZmY7CgogICAgICAgICAgICAgIGlmICgoaGVyZV9iaXRzKSA8PSBiaXRzKSB7IGJyZWFrOyB9CiAgICAgICAgICAgICAgLy8tLS0gUFVMTEJZVEUoKSAtLS0vLwogICAgICAgICAgICAgIGlmIChoYXZlID09PSAwKSB7IGJyZWFrIGluZl9sZWF2ZTsgfQogICAgICAgICAgICAgIGhhdmUtLTsKICAgICAgICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0czsKICAgICAgICAgICAgICBiaXRzICs9IDg7CiAgICAgICAgICAgICAgLy8tLS0vLwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChoZXJlX3ZhbCA8IDE2KSB7CiAgICAgICAgICAgICAgLy8tLS0gRFJPUEJJVFMoaGVyZS5iaXRzKSAtLS0vLwogICAgICAgICAgICAgIGhvbGQgPj4+PSBoZXJlX2JpdHM7CiAgICAgICAgICAgICAgYml0cyAtPSBoZXJlX2JpdHM7CiAgICAgICAgICAgICAgLy8tLS0vLwogICAgICAgICAgICAgIHN0YXRlLmxlbnNbc3RhdGUuaGF2ZSsrXSA9IGhlcmVfdmFsOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgIGlmIChoZXJlX3ZhbCA9PT0gMTYpIHsKICAgICAgICAgICAgICAgIC8vPT09IE5FRURCSVRTKGhlcmUuYml0cyArIDIpOwogICAgICAgICAgICAgICAgbiA9IGhlcmVfYml0cyArIDI7CiAgICAgICAgICAgICAgICB3aGlsZSAoYml0cyA8IG4pIHsKICAgICAgICAgICAgICAgICAgaWYgKGhhdmUgPT09IDApIHsgYnJlYWsgaW5mX2xlYXZlOyB9CiAgICAgICAgICAgICAgICAgIGhhdmUtLTsKICAgICAgICAgICAgICAgICAgaG9sZCArPSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7CiAgICAgICAgICAgICAgICAgIGJpdHMgKz0gODsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIC8vPT09Ly8KICAgICAgICAgICAgICAgIC8vLS0tIERST1BCSVRTKGhlcmUuYml0cykgLS0tLy8KICAgICAgICAgICAgICAgIGhvbGQgPj4+PSBoZXJlX2JpdHM7CiAgICAgICAgICAgICAgICBiaXRzIC09IGhlcmVfYml0czsKICAgICAgICAgICAgICAgIC8vLS0tLy8KICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5oYXZlID09PSAwKSB7CiAgICAgICAgICAgICAgICAgIHN0cm0ubXNnID0gJ2ludmFsaWQgYml0IGxlbmd0aCByZXBlYXQnOwogICAgICAgICAgICAgICAgICBzdGF0ZS5tb2RlID0gQkFEOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGxlbiA9IHN0YXRlLmxlbnNbc3RhdGUuaGF2ZSAtIDFdOwogICAgICAgICAgICAgICAgY29weSA9IDMgKyAoaG9sZCAmIDB4MDMpOy8vQklUUygyKTsKICAgICAgICAgICAgICAgIC8vLS0tIERST1BCSVRTKDIpIC0tLS8vCiAgICAgICAgICAgICAgICBob2xkID4+Pj0gMjsKICAgICAgICAgICAgICAgIGJpdHMgLT0gMjsKICAgICAgICAgICAgICAgIC8vLS0tLy8KICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgZWxzZSBpZiAoaGVyZV92YWwgPT09IDE3KSB7CiAgICAgICAgICAgICAgICAvLz09PSBORUVEQklUUyhoZXJlLmJpdHMgKyAzKTsKICAgICAgICAgICAgICAgIG4gPSBoZXJlX2JpdHMgKyAzOwogICAgICAgICAgICAgICAgd2hpbGUgKGJpdHMgPCBuKSB7CiAgICAgICAgICAgICAgICAgIGlmIChoYXZlID09PSAwKSB7IGJyZWFrIGluZl9sZWF2ZTsgfQogICAgICAgICAgICAgICAgICBoYXZlLS07CiAgICAgICAgICAgICAgICAgIGhvbGQgKz0gaW5wdXRbbmV4dCsrXSA8PCBiaXRzOwogICAgICAgICAgICAgICAgICBiaXRzICs9IDg7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAvLz09PS8vCiAgICAgICAgICAgICAgICAvLy0tLSBEUk9QQklUUyhoZXJlLmJpdHMpIC0tLS8vCiAgICAgICAgICAgICAgICBob2xkID4+Pj0gaGVyZV9iaXRzOwogICAgICAgICAgICAgICAgYml0cyAtPSBoZXJlX2JpdHM7CiAgICAgICAgICAgICAgICAvLy0tLS8vCiAgICAgICAgICAgICAgICBsZW4gPSAwOwogICAgICAgICAgICAgICAgY29weSA9IDMgKyAoaG9sZCAmIDB4MDcpOy8vQklUUygzKTsKICAgICAgICAgICAgICAgIC8vLS0tIERST1BCSVRTKDMpIC0tLS8vCiAgICAgICAgICAgICAgICBob2xkID4+Pj0gMzsKICAgICAgICAgICAgICAgIGJpdHMgLT0gMzsKICAgICAgICAgICAgICAgIC8vLS0tLy8KICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAvLz09PSBORUVEQklUUyhoZXJlLmJpdHMgKyA3KTsKICAgICAgICAgICAgICAgIG4gPSBoZXJlX2JpdHMgKyA3OwogICAgICAgICAgICAgICAgd2hpbGUgKGJpdHMgPCBuKSB7CiAgICAgICAgICAgICAgICAgIGlmIChoYXZlID09PSAwKSB7IGJyZWFrIGluZl9sZWF2ZTsgfQogICAgICAgICAgICAgICAgICBoYXZlLS07CiAgICAgICAgICAgICAgICAgIGhvbGQgKz0gaW5wdXRbbmV4dCsrXSA8PCBiaXRzOwogICAgICAgICAgICAgICAgICBiaXRzICs9IDg7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAvLz09PS8vCiAgICAgICAgICAgICAgICAvLy0tLSBEUk9QQklUUyhoZXJlLmJpdHMpIC0tLS8vCiAgICAgICAgICAgICAgICBob2xkID4+Pj0gaGVyZV9iaXRzOwogICAgICAgICAgICAgICAgYml0cyAtPSBoZXJlX2JpdHM7CiAgICAgICAgICAgICAgICAvLy0tLS8vCiAgICAgICAgICAgICAgICBsZW4gPSAwOwogICAgICAgICAgICAgICAgY29weSA9IDExICsgKGhvbGQgJiAweDdmKTsvL0JJVFMoNyk7CiAgICAgICAgICAgICAgICAvLy0tLSBEUk9QQklUUyg3KSAtLS0vLwogICAgICAgICAgICAgICAgaG9sZCA+Pj49IDc7CiAgICAgICAgICAgICAgICBiaXRzIC09IDc7CiAgICAgICAgICAgICAgICAvLy0tLS8vCiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmIChzdGF0ZS5oYXZlICsgY29weSA+IHN0YXRlLm5sZW4gKyBzdGF0ZS5uZGlzdCkgewogICAgICAgICAgICAgICAgc3RybS5tc2cgPSAnaW52YWxpZCBiaXQgbGVuZ3RoIHJlcGVhdCc7CiAgICAgICAgICAgICAgICBzdGF0ZS5tb2RlID0gQkFEOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHdoaWxlIChjb3B5LS0pIHsKICAgICAgICAgICAgICAgIHN0YXRlLmxlbnNbc3RhdGUuaGF2ZSsrXSA9IGxlbjsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICAvKiBoYW5kbGUgZXJyb3IgYnJlYWtzIGluIHdoaWxlICovCiAgICAgICAgICBpZiAoc3RhdGUubW9kZSA9PT0gQkFEKSB7IGJyZWFrOyB9CgogICAgICAgICAgLyogY2hlY2sgZm9yIGVuZC1vZi1ibG9jayBjb2RlIChiZXR0ZXIgaGF2ZSBvbmUpICovCiAgICAgICAgICBpZiAoc3RhdGUubGVuc1syNTZdID09PSAwKSB7CiAgICAgICAgICAgIHN0cm0ubXNnID0gJ2ludmFsaWQgY29kZSAtLSBtaXNzaW5nIGVuZC1vZi1ibG9jayc7CiAgICAgICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQoKICAgICAgICAgIC8qIGJ1aWxkIGNvZGUgdGFibGVzIC0tIG5vdGU6IGRvIG5vdCBjaGFuZ2UgdGhlIGxlbmJpdHMgb3IgZGlzdGJpdHMKICAgICAgICAgICAgIHZhbHVlcyBoZXJlICg5IGFuZCA2KSB3aXRob3V0IHJlYWRpbmcgdGhlIGNvbW1lbnRzIGluIGluZnRyZWVzLmgKICAgICAgICAgICAgIGNvbmNlcm5pbmcgdGhlIEVOT1VHSCBjb25zdGFudHMsIHdoaWNoIGRlcGVuZCBvbiB0aG9zZSB2YWx1ZXMgKi8KICAgICAgICAgIHN0YXRlLmxlbmJpdHMgPSA5OwoKICAgICAgICAgIG9wdHMgPSB7IGJpdHM6IHN0YXRlLmxlbmJpdHMgfTsKICAgICAgICAgIHJldCA9IGluZnRyZWVzKExFTlMsIHN0YXRlLmxlbnMsIDAsIHN0YXRlLm5sZW4sIHN0YXRlLmxlbmNvZGUsIDAsIHN0YXRlLndvcmssIG9wdHMpOwogICAgICAgICAgLy8gV2UgaGF2ZSBzZXBhcmF0ZSB0YWJsZXMgJiBubyBwb2ludGVycy4gMiBjb21tZW50ZWQgbGluZXMgYmVsb3cgbm90IG5lZWRlZC4KICAgICAgICAgIC8vIHN0YXRlLm5leHRfaW5kZXggPSBvcHRzLnRhYmxlX2luZGV4OwogICAgICAgICAgc3RhdGUubGVuYml0cyA9IG9wdHMuYml0czsKICAgICAgICAgIC8vIHN0YXRlLmxlbmNvZGUgPSBzdGF0ZS5uZXh0OwoKICAgICAgICAgIGlmIChyZXQpIHsKICAgICAgICAgICAgc3RybS5tc2cgPSAnaW52YWxpZCBsaXRlcmFsL2xlbmd0aHMgc2V0JzsKICAgICAgICAgICAgc3RhdGUubW9kZSA9IEJBRDsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CgogICAgICAgICAgc3RhdGUuZGlzdGJpdHMgPSA2OwogICAgICAgICAgLy9zdGF0ZS5kaXN0Y29kZS5jb3B5KHN0YXRlLmNvZGVzKTsKICAgICAgICAgIC8vIFN3aXRjaCB0byB1c2UgZHluYW1pYyB0YWJsZQogICAgICAgICAgc3RhdGUuZGlzdGNvZGUgPSBzdGF0ZS5kaXN0ZHluOwogICAgICAgICAgb3B0cyA9IHsgYml0czogc3RhdGUuZGlzdGJpdHMgfTsKICAgICAgICAgIHJldCA9IGluZnRyZWVzKERJU1RTLCBzdGF0ZS5sZW5zLCBzdGF0ZS5ubGVuLCBzdGF0ZS5uZGlzdCwgc3RhdGUuZGlzdGNvZGUsIDAsIHN0YXRlLndvcmssIG9wdHMpOwogICAgICAgICAgLy8gV2UgaGF2ZSBzZXBhcmF0ZSB0YWJsZXMgJiBubyBwb2ludGVycy4gMiBjb21tZW50ZWQgbGluZXMgYmVsb3cgbm90IG5lZWRlZC4KICAgICAgICAgIC8vIHN0YXRlLm5leHRfaW5kZXggPSBvcHRzLnRhYmxlX2luZGV4OwogICAgICAgICAgc3RhdGUuZGlzdGJpdHMgPSBvcHRzLmJpdHM7CiAgICAgICAgICAvLyBzdGF0ZS5kaXN0Y29kZSA9IHN0YXRlLm5leHQ7CgogICAgICAgICAgaWYgKHJldCkgewogICAgICAgICAgICBzdHJtLm1zZyA9ICdpbnZhbGlkIGRpc3RhbmNlcyBzZXQnOwogICAgICAgICAgICBzdGF0ZS5tb2RlID0gQkFEOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICAgIC8vVHJhY2V2KChzdGRlcnIsICdpbmZsYXRlOiAgICAgICBjb2RlcyBva1xuJykpOwogICAgICAgICAgc3RhdGUubW9kZSA9IExFTl87CiAgICAgICAgICBpZiAoZmx1c2ggPT09IFpfVFJFRVMpIHsgYnJlYWsgaW5mX2xlYXZlOyB9CiAgICAgICAgICAvKiBmYWxscyB0aHJvdWdoICovCiAgICAgICAgY2FzZSBMRU5fOgogICAgICAgICAgc3RhdGUubW9kZSA9IExFTjsKICAgICAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi8KICAgICAgICBjYXNlIExFTjoKICAgICAgICAgIGlmIChoYXZlID49IDYgJiYgbGVmdCA+PSAyNTgpIHsKICAgICAgICAgICAgLy8tLS0gUkVTVE9SRSgpIC0tLQogICAgICAgICAgICBzdHJtLm5leHRfb3V0ID0gcHV0OwogICAgICAgICAgICBzdHJtLmF2YWlsX291dCA9IGxlZnQ7CiAgICAgICAgICAgIHN0cm0ubmV4dF9pbiA9IG5leHQ7CiAgICAgICAgICAgIHN0cm0uYXZhaWxfaW4gPSBoYXZlOwogICAgICAgICAgICBzdGF0ZS5ob2xkID0gaG9sZDsKICAgICAgICAgICAgc3RhdGUuYml0cyA9IGJpdHM7CiAgICAgICAgICAgIC8vLS0tCiAgICAgICAgICAgIGluZmZhc3Qoc3RybSwgX291dCk7CiAgICAgICAgICAgIC8vLS0tIExPQUQoKSAtLS0KICAgICAgICAgICAgcHV0ID0gc3RybS5uZXh0X291dDsKICAgICAgICAgICAgb3V0cHV0ID0gc3RybS5vdXRwdXQ7CiAgICAgICAgICAgIGxlZnQgPSBzdHJtLmF2YWlsX291dDsKICAgICAgICAgICAgbmV4dCA9IHN0cm0ubmV4dF9pbjsKICAgICAgICAgICAgaW5wdXQgPSBzdHJtLmlucHV0OwogICAgICAgICAgICBoYXZlID0gc3RybS5hdmFpbF9pbjsKICAgICAgICAgICAgaG9sZCA9IHN0YXRlLmhvbGQ7CiAgICAgICAgICAgIGJpdHMgPSBzdGF0ZS5iaXRzOwogICAgICAgICAgICAvLy0tLQoKICAgICAgICAgICAgaWYgKHN0YXRlLm1vZGUgPT09IFRZUEUpIHsKICAgICAgICAgICAgICBzdGF0ZS5iYWNrID0gLTE7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgICBzdGF0ZS5iYWNrID0gMDsKICAgICAgICAgIGZvciAoOzspIHsKICAgICAgICAgICAgaGVyZSA9IHN0YXRlLmxlbmNvZGVbaG9sZCAmICgoMSA8PCBzdGF0ZS5sZW5iaXRzKSAtIDEpXTsgIC8qQklUUyhzdGF0ZS5sZW5iaXRzKSovCiAgICAgICAgICAgIGhlcmVfYml0cyA9IGhlcmUgPj4+IDI0OwogICAgICAgICAgICBoZXJlX29wID0gKGhlcmUgPj4+IDE2KSAmIDB4ZmY7CiAgICAgICAgICAgIGhlcmVfdmFsID0gaGVyZSAmIDB4ZmZmZjsKCiAgICAgICAgICAgIGlmIChoZXJlX2JpdHMgPD0gYml0cykgeyBicmVhazsgfQogICAgICAgICAgICAvLy0tLSBQVUxMQllURSgpIC0tLS8vCiAgICAgICAgICAgIGlmIChoYXZlID09PSAwKSB7IGJyZWFrIGluZl9sZWF2ZTsgfQogICAgICAgICAgICBoYXZlLS07CiAgICAgICAgICAgIGhvbGQgKz0gaW5wdXRbbmV4dCsrXSA8PCBiaXRzOwogICAgICAgICAgICBiaXRzICs9IDg7CiAgICAgICAgICAgIC8vLS0tLy8KICAgICAgICAgIH0KICAgICAgICAgIGlmIChoZXJlX29wICYmIChoZXJlX29wICYgMHhmMCkgPT09IDApIHsKICAgICAgICAgICAgbGFzdF9iaXRzID0gaGVyZV9iaXRzOwogICAgICAgICAgICBsYXN0X29wID0gaGVyZV9vcDsKICAgICAgICAgICAgbGFzdF92YWwgPSBoZXJlX3ZhbDsKICAgICAgICAgICAgZm9yICg7OykgewogICAgICAgICAgICAgIGhlcmUgPSBzdGF0ZS5sZW5jb2RlW2xhc3RfdmFsICsKICAgICAgICAgICAgICAgICAgICAgICgoaG9sZCAmICgoMSA8PCAobGFzdF9iaXRzICsgbGFzdF9vcCkpIC0gMSkpLypCSVRTKGxhc3QuYml0cyArIGxhc3Qub3ApKi8gPj4gbGFzdF9iaXRzKV07CiAgICAgICAgICAgICAgaGVyZV9iaXRzID0gaGVyZSA+Pj4gMjQ7CiAgICAgICAgICAgICAgaGVyZV9vcCA9IChoZXJlID4+PiAxNikgJiAweGZmOwogICAgICAgICAgICAgIGhlcmVfdmFsID0gaGVyZSAmIDB4ZmZmZjsKCiAgICAgICAgICAgICAgaWYgKChsYXN0X2JpdHMgKyBoZXJlX2JpdHMpIDw9IGJpdHMpIHsgYnJlYWs7IH0KICAgICAgICAgICAgICAvLy0tLSBQVUxMQllURSgpIC0tLS8vCiAgICAgICAgICAgICAgaWYgKGhhdmUgPT09IDApIHsgYnJlYWsgaW5mX2xlYXZlOyB9CiAgICAgICAgICAgICAgaGF2ZS0tOwogICAgICAgICAgICAgIGhvbGQgKz0gaW5wdXRbbmV4dCsrXSA8PCBiaXRzOwogICAgICAgICAgICAgIGJpdHMgKz0gODsKICAgICAgICAgICAgICAvLy0tLS8vCiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy8tLS0gRFJPUEJJVFMobGFzdC5iaXRzKSAtLS0vLwogICAgICAgICAgICBob2xkID4+Pj0gbGFzdF9iaXRzOwogICAgICAgICAgICBiaXRzIC09IGxhc3RfYml0czsKICAgICAgICAgICAgLy8tLS0vLwogICAgICAgICAgICBzdGF0ZS5iYWNrICs9IGxhc3RfYml0czsKICAgICAgICAgIH0KICAgICAgICAgIC8vLS0tIERST1BCSVRTKGhlcmUuYml0cykgLS0tLy8KICAgICAgICAgIGhvbGQgPj4+PSBoZXJlX2JpdHM7CiAgICAgICAgICBiaXRzIC09IGhlcmVfYml0czsKICAgICAgICAgIC8vLS0tLy8KICAgICAgICAgIHN0YXRlLmJhY2sgKz0gaGVyZV9iaXRzOwogICAgICAgICAgc3RhdGUubGVuZ3RoID0gaGVyZV92YWw7CiAgICAgICAgICBpZiAoaGVyZV9vcCA9PT0gMCkgewogICAgICAgICAgICAvL1RyYWNldnYoKHN0ZGVyciwgaGVyZS52YWwgPj0gMHgyMCAmJiBoZXJlLnZhbCA8IDB4N2YgPwogICAgICAgICAgICAvLyAgICAgICAgImluZmxhdGU6ICAgICAgICAgbGl0ZXJhbCAnJWMnXG4iIDoKICAgICAgICAgICAgLy8gICAgICAgICJpbmZsYXRlOiAgICAgICAgIGxpdGVyYWwgMHglMDJ4XG4iLCBoZXJlLnZhbCkpOwogICAgICAgICAgICBzdGF0ZS5tb2RlID0gTElUOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChoZXJlX29wICYgMzIpIHsKICAgICAgICAgICAgLy9UcmFjZXZ2KChzdGRlcnIsICJpbmZsYXRlOiAgICAgICAgIGVuZCBvZiBibG9ja1xuIikpOwogICAgICAgICAgICBzdGF0ZS5iYWNrID0gLTE7CiAgICAgICAgICAgIHN0YXRlLm1vZGUgPSBUWVBFOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChoZXJlX29wICYgNjQpIHsKICAgICAgICAgICAgc3RybS5tc2cgPSAnaW52YWxpZCBsaXRlcmFsL2xlbmd0aCBjb2RlJzsKICAgICAgICAgICAgc3RhdGUubW9kZSA9IEJBRDsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgICBzdGF0ZS5leHRyYSA9IGhlcmVfb3AgJiAxNTsKICAgICAgICAgIHN0YXRlLm1vZGUgPSBMRU5FWFQ7CiAgICAgICAgICAvKiBmYWxscyB0aHJvdWdoICovCiAgICAgICAgY2FzZSBMRU5FWFQ6CiAgICAgICAgICBpZiAoc3RhdGUuZXh0cmEpIHsKICAgICAgICAgICAgLy89PT0gTkVFREJJVFMoc3RhdGUuZXh0cmEpOwogICAgICAgICAgICBuID0gc3RhdGUuZXh0cmE7CiAgICAgICAgICAgIHdoaWxlIChiaXRzIDwgbikgewogICAgICAgICAgICAgIGlmIChoYXZlID09PSAwKSB7IGJyZWFrIGluZl9sZWF2ZTsgfQogICAgICAgICAgICAgIGhhdmUtLTsKICAgICAgICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0czsKICAgICAgICAgICAgICBiaXRzICs9IDg7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy89PT0vLwogICAgICAgICAgICBzdGF0ZS5sZW5ndGggKz0gaG9sZCAmICgoMSA8PCBzdGF0ZS5leHRyYSkgLSAxKS8qQklUUyhzdGF0ZS5leHRyYSkqLzsKICAgICAgICAgICAgLy8tLS0gRFJPUEJJVFMoc3RhdGUuZXh0cmEpIC0tLS8vCiAgICAgICAgICAgIGhvbGQgPj4+PSBzdGF0ZS5leHRyYTsKICAgICAgICAgICAgYml0cyAtPSBzdGF0ZS5leHRyYTsKICAgICAgICAgICAgLy8tLS0vLwogICAgICAgICAgICBzdGF0ZS5iYWNrICs9IHN0YXRlLmV4dHJhOwogICAgICAgICAgfQogICAgICAgICAgLy9UcmFjZXZ2KChzdGRlcnIsICJpbmZsYXRlOiAgICAgICAgIGxlbmd0aCAldVxuIiwgc3RhdGUubGVuZ3RoKSk7CiAgICAgICAgICBzdGF0ZS53YXMgPSBzdGF0ZS5sZW5ndGg7CiAgICAgICAgICBzdGF0ZS5tb2RlID0gRElTVDsKICAgICAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi8KICAgICAgICBjYXNlIERJU1Q6CiAgICAgICAgICBmb3IgKDs7KSB7CiAgICAgICAgICAgIGhlcmUgPSBzdGF0ZS5kaXN0Y29kZVtob2xkICYgKCgxIDw8IHN0YXRlLmRpc3RiaXRzKSAtIDEpXTsvKkJJVFMoc3RhdGUuZGlzdGJpdHMpKi8KICAgICAgICAgICAgaGVyZV9iaXRzID0gaGVyZSA+Pj4gMjQ7CiAgICAgICAgICAgIGhlcmVfb3AgPSAoaGVyZSA+Pj4gMTYpICYgMHhmZjsKICAgICAgICAgICAgaGVyZV92YWwgPSBoZXJlICYgMHhmZmZmOwoKICAgICAgICAgICAgaWYgKChoZXJlX2JpdHMpIDw9IGJpdHMpIHsgYnJlYWs7IH0KICAgICAgICAgICAgLy8tLS0gUFVMTEJZVEUoKSAtLS0vLwogICAgICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH0KICAgICAgICAgICAgaGF2ZS0tOwogICAgICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0czsKICAgICAgICAgICAgYml0cyArPSA4OwogICAgICAgICAgICAvLy0tLS8vCiAgICAgICAgICB9CiAgICAgICAgICBpZiAoKGhlcmVfb3AgJiAweGYwKSA9PT0gMCkgewogICAgICAgICAgICBsYXN0X2JpdHMgPSBoZXJlX2JpdHM7CiAgICAgICAgICAgIGxhc3Rfb3AgPSBoZXJlX29wOwogICAgICAgICAgICBsYXN0X3ZhbCA9IGhlcmVfdmFsOwogICAgICAgICAgICBmb3IgKDs7KSB7CiAgICAgICAgICAgICAgaGVyZSA9IHN0YXRlLmRpc3Rjb2RlW2xhc3RfdmFsICsKICAgICAgICAgICAgICAgICAgICAgICgoaG9sZCAmICgoMSA8PCAobGFzdF9iaXRzICsgbGFzdF9vcCkpIC0gMSkpLypCSVRTKGxhc3QuYml0cyArIGxhc3Qub3ApKi8gPj4gbGFzdF9iaXRzKV07CiAgICAgICAgICAgICAgaGVyZV9iaXRzID0gaGVyZSA+Pj4gMjQ7CiAgICAgICAgICAgICAgaGVyZV9vcCA9IChoZXJlID4+PiAxNikgJiAweGZmOwogICAgICAgICAgICAgIGhlcmVfdmFsID0gaGVyZSAmIDB4ZmZmZjsKCiAgICAgICAgICAgICAgaWYgKChsYXN0X2JpdHMgKyBoZXJlX2JpdHMpIDw9IGJpdHMpIHsgYnJlYWs7IH0KICAgICAgICAgICAgICAvLy0tLSBQVUxMQllURSgpIC0tLS8vCiAgICAgICAgICAgICAgaWYgKGhhdmUgPT09IDApIHsgYnJlYWsgaW5mX2xlYXZlOyB9CiAgICAgICAgICAgICAgaGF2ZS0tOwogICAgICAgICAgICAgIGhvbGQgKz0gaW5wdXRbbmV4dCsrXSA8PCBiaXRzOwogICAgICAgICAgICAgIGJpdHMgKz0gODsKICAgICAgICAgICAgICAvLy0tLS8vCiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy8tLS0gRFJPUEJJVFMobGFzdC5iaXRzKSAtLS0vLwogICAgICAgICAgICBob2xkID4+Pj0gbGFzdF9iaXRzOwogICAgICAgICAgICBiaXRzIC09IGxhc3RfYml0czsKICAgICAgICAgICAgLy8tLS0vLwogICAgICAgICAgICBzdGF0ZS5iYWNrICs9IGxhc3RfYml0czsKICAgICAgICAgIH0KICAgICAgICAgIC8vLS0tIERST1BCSVRTKGhlcmUuYml0cykgLS0tLy8KICAgICAgICAgIGhvbGQgPj4+PSBoZXJlX2JpdHM7CiAgICAgICAgICBiaXRzIC09IGhlcmVfYml0czsKICAgICAgICAgIC8vLS0tLy8KICAgICAgICAgIHN0YXRlLmJhY2sgKz0gaGVyZV9iaXRzOwogICAgICAgICAgaWYgKGhlcmVfb3AgJiA2NCkgewogICAgICAgICAgICBzdHJtLm1zZyA9ICdpbnZhbGlkIGRpc3RhbmNlIGNvZGUnOwogICAgICAgICAgICBzdGF0ZS5tb2RlID0gQkFEOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICAgIHN0YXRlLm9mZnNldCA9IGhlcmVfdmFsOwogICAgICAgICAgc3RhdGUuZXh0cmEgPSAoaGVyZV9vcCkgJiAxNTsKICAgICAgICAgIHN0YXRlLm1vZGUgPSBESVNURVhUOwogICAgICAgICAgLyogZmFsbHMgdGhyb3VnaCAqLwogICAgICAgIGNhc2UgRElTVEVYVDoKICAgICAgICAgIGlmIChzdGF0ZS5leHRyYSkgewogICAgICAgICAgICAvLz09PSBORUVEQklUUyhzdGF0ZS5leHRyYSk7CiAgICAgICAgICAgIG4gPSBzdGF0ZS5leHRyYTsKICAgICAgICAgICAgd2hpbGUgKGJpdHMgPCBuKSB7CiAgICAgICAgICAgICAgaWYgKGhhdmUgPT09IDApIHsgYnJlYWsgaW5mX2xlYXZlOyB9CiAgICAgICAgICAgICAgaGF2ZS0tOwogICAgICAgICAgICAgIGhvbGQgKz0gaW5wdXRbbmV4dCsrXSA8PCBiaXRzOwogICAgICAgICAgICAgIGJpdHMgKz0gODsKICAgICAgICAgICAgfQogICAgICAgICAgICAvLz09PS8vCiAgICAgICAgICAgIHN0YXRlLm9mZnNldCArPSBob2xkICYgKCgxIDw8IHN0YXRlLmV4dHJhKSAtIDEpLypCSVRTKHN0YXRlLmV4dHJhKSovOwogICAgICAgICAgICAvLy0tLSBEUk9QQklUUyhzdGF0ZS5leHRyYSkgLS0tLy8KICAgICAgICAgICAgaG9sZCA+Pj49IHN0YXRlLmV4dHJhOwogICAgICAgICAgICBiaXRzIC09IHN0YXRlLmV4dHJhOwogICAgICAgICAgICAvLy0tLS8vCiAgICAgICAgICAgIHN0YXRlLmJhY2sgKz0gc3RhdGUuZXh0cmE7CiAgICAgICAgICB9CiAgLy8jaWZkZWYgSU5GTEFURV9TVFJJQ1QKICAgICAgICAgIGlmIChzdGF0ZS5vZmZzZXQgPiBzdGF0ZS5kbWF4KSB7CiAgICAgICAgICAgIHN0cm0ubXNnID0gJ2ludmFsaWQgZGlzdGFuY2UgdG9vIGZhciBiYWNrJzsKICAgICAgICAgICAgc3RhdGUubW9kZSA9IEJBRDsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgLy8jZW5kaWYKICAgICAgICAgIC8vVHJhY2V2digoc3RkZXJyLCAiaW5mbGF0ZTogICAgICAgICBkaXN0YW5jZSAldVxuIiwgc3RhdGUub2Zmc2V0KSk7CiAgICAgICAgICBzdGF0ZS5tb2RlID0gTUFUQ0g7CiAgICAgICAgICAvKiBmYWxscyB0aHJvdWdoICovCiAgICAgICAgY2FzZSBNQVRDSDoKICAgICAgICAgIGlmIChsZWZ0ID09PSAwKSB7IGJyZWFrIGluZl9sZWF2ZTsgfQogICAgICAgICAgY29weSA9IF9vdXQgLSBsZWZ0OwogICAgICAgICAgaWYgKHN0YXRlLm9mZnNldCA+IGNvcHkpIHsgICAgICAgICAvKiBjb3B5IGZyb20gd2luZG93ICovCiAgICAgICAgICAgIGNvcHkgPSBzdGF0ZS5vZmZzZXQgLSBjb3B5OwogICAgICAgICAgICBpZiAoY29weSA+IHN0YXRlLndoYXZlKSB7CiAgICAgICAgICAgICAgaWYgKHN0YXRlLnNhbmUpIHsKICAgICAgICAgICAgICAgIHN0cm0ubXNnID0gJ2ludmFsaWQgZGlzdGFuY2UgdG9vIGZhciBiYWNrJzsKICAgICAgICAgICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgLy8gKCEpIFRoaXMgYmxvY2sgaXMgZGlzYWJsZWQgaW4gemxpYiBkZWZhdWx0cywKICAvLyBkb24ndCBlbmFibGUgaXQgZm9yIGJpbmFyeSBjb21wYXRpYmlsaXR5CiAgLy8jaWZkZWYgSU5GTEFURV9BTExPV19JTlZBTElEX0RJU1RBTkNFX1RPT0ZBUl9BUlJSCiAgLy8gICAgICAgICAgVHJhY2UoKHN0ZGVyciwgImluZmxhdGUuYyB0b28gZmFyXG4iKSk7CiAgLy8gICAgICAgICAgY29weSAtPSBzdGF0ZS53aGF2ZTsKICAvLyAgICAgICAgICBpZiAoY29weSA+IHN0YXRlLmxlbmd0aCkgeyBjb3B5ID0gc3RhdGUubGVuZ3RoOyB9CiAgLy8gICAgICAgICAgaWYgKGNvcHkgPiBsZWZ0KSB7IGNvcHkgPSBsZWZ0OyB9CiAgLy8gICAgICAgICAgbGVmdCAtPSBjb3B5OwogIC8vICAgICAgICAgIHN0YXRlLmxlbmd0aCAtPSBjb3B5OwogIC8vICAgICAgICAgIGRvIHsKICAvLyAgICAgICAgICAgIG91dHB1dFtwdXQrK10gPSAwOwogIC8vICAgICAgICAgIH0gd2hpbGUgKC0tY29weSk7CiAgLy8gICAgICAgICAgaWYgKHN0YXRlLmxlbmd0aCA9PT0gMCkgeyBzdGF0ZS5tb2RlID0gTEVOOyB9CiAgLy8gICAgICAgICAgYnJlYWs7CiAgLy8jZW5kaWYKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoY29weSA+IHN0YXRlLnduZXh0KSB7CiAgICAgICAgICAgICAgY29weSAtPSBzdGF0ZS53bmV4dDsKICAgICAgICAgICAgICBmcm9tID0gc3RhdGUud3NpemUgLSBjb3B5OwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgIGZyb20gPSBzdGF0ZS53bmV4dCAtIGNvcHk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGNvcHkgPiBzdGF0ZS5sZW5ndGgpIHsgY29weSA9IHN0YXRlLmxlbmd0aDsgfQogICAgICAgICAgICBmcm9tX3NvdXJjZSA9IHN0YXRlLndpbmRvdzsKICAgICAgICAgIH0KICAgICAgICAgIGVsc2UgeyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIGNvcHkgZnJvbSBvdXRwdXQgKi8KICAgICAgICAgICAgZnJvbV9zb3VyY2UgPSBvdXRwdXQ7CiAgICAgICAgICAgIGZyb20gPSBwdXQgLSBzdGF0ZS5vZmZzZXQ7CiAgICAgICAgICAgIGNvcHkgPSBzdGF0ZS5sZW5ndGg7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoY29weSA+IGxlZnQpIHsgY29weSA9IGxlZnQ7IH0KICAgICAgICAgIGxlZnQgLT0gY29weTsKICAgICAgICAgIHN0YXRlLmxlbmd0aCAtPSBjb3B5OwogICAgICAgICAgZG8gewogICAgICAgICAgICBvdXRwdXRbcHV0KytdID0gZnJvbV9zb3VyY2VbZnJvbSsrXTsKICAgICAgICAgIH0gd2hpbGUgKC0tY29weSk7CiAgICAgICAgICBpZiAoc3RhdGUubGVuZ3RoID09PSAwKSB7IHN0YXRlLm1vZGUgPSBMRU47IH0KICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgTElUOgogICAgICAgICAgaWYgKGxlZnQgPT09IDApIHsgYnJlYWsgaW5mX2xlYXZlOyB9CiAgICAgICAgICBvdXRwdXRbcHV0KytdID0gc3RhdGUubGVuZ3RoOwogICAgICAgICAgbGVmdC0tOwogICAgICAgICAgc3RhdGUubW9kZSA9IExFTjsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgQ0hFQ0s6CiAgICAgICAgICBpZiAoc3RhdGUud3JhcCkgewogICAgICAgICAgICAvLz09PSBORUVEQklUUygzMik7CiAgICAgICAgICAgIHdoaWxlIChiaXRzIDwgMzIpIHsKICAgICAgICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH0KICAgICAgICAgICAgICBoYXZlLS07CiAgICAgICAgICAgICAgLy8gVXNlICd8JyBpbnN0ZWFkIG9mICcrJyB0byBtYWtlIHN1cmUgdGhhdCByZXN1bHQgaXMgc2lnbmVkCiAgICAgICAgICAgICAgaG9sZCB8PSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7CiAgICAgICAgICAgICAgYml0cyArPSA4OwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vPT09Ly8KICAgICAgICAgICAgX291dCAtPSBsZWZ0OwogICAgICAgICAgICBzdHJtLnRvdGFsX291dCArPSBfb3V0OwogICAgICAgICAgICBzdGF0ZS50b3RhbCArPSBfb3V0OwogICAgICAgICAgICBpZiAoX291dCkgewogICAgICAgICAgICAgIHN0cm0uYWRsZXIgPSBzdGF0ZS5jaGVjayA9CiAgICAgICAgICAgICAgICAgIC8qVVBEQVRFKHN0YXRlLmNoZWNrLCBwdXQgLSBfb3V0LCBfb3V0KTsqLwogICAgICAgICAgICAgICAgICAoc3RhdGUuZmxhZ3MgPyBjcmMzMl8xKHN0YXRlLmNoZWNrLCBvdXRwdXQsIF9vdXQsIHB1dCAtIF9vdXQpIDogYWRsZXIzMl8xKHN0YXRlLmNoZWNrLCBvdXRwdXQsIF9vdXQsIHB1dCAtIF9vdXQpKTsKCiAgICAgICAgICAgIH0KICAgICAgICAgICAgX291dCA9IGxlZnQ7CiAgICAgICAgICAgIC8vIE5COiBjcmMzMiBzdG9yZWQgYXMgc2lnbmVkIDMyLWJpdCBpbnQsIHpzd2FwMzIgcmV0dXJucyBzaWduZWQgdG9vCiAgICAgICAgICAgIGlmICgoc3RhdGUuZmxhZ3MgPyBob2xkIDogenN3YXAzMihob2xkKSkgIT09IHN0YXRlLmNoZWNrKSB7CiAgICAgICAgICAgICAgc3RybS5tc2cgPSAnaW5jb3JyZWN0IGRhdGEgY2hlY2snOwogICAgICAgICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy89PT0gSU5JVEJJVFMoKTsKICAgICAgICAgICAgaG9sZCA9IDA7CiAgICAgICAgICAgIGJpdHMgPSAwOwogICAgICAgICAgICAvLz09PS8vCiAgICAgICAgICAgIC8vVHJhY2V2KChzdGRlcnIsICJpbmZsYXRlOiAgIGNoZWNrIG1hdGNoZXMgdHJhaWxlclxuIikpOwogICAgICAgICAgfQogICAgICAgICAgc3RhdGUubW9kZSA9IExFTkdUSDsKICAgICAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi8KICAgICAgICBjYXNlIExFTkdUSDoKICAgICAgICAgIGlmIChzdGF0ZS53cmFwICYmIHN0YXRlLmZsYWdzKSB7CiAgICAgICAgICAgIC8vPT09IE5FRURCSVRTKDMyKTsKICAgICAgICAgICAgd2hpbGUgKGJpdHMgPCAzMikgewogICAgICAgICAgICAgIGlmIChoYXZlID09PSAwKSB7IGJyZWFrIGluZl9sZWF2ZTsgfQogICAgICAgICAgICAgIGhhdmUtLTsKICAgICAgICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0czsKICAgICAgICAgICAgICBiaXRzICs9IDg7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy89PT0vLwogICAgICAgICAgICBpZiAoaG9sZCAhPT0gKHN0YXRlLnRvdGFsICYgMHhmZmZmZmZmZikpIHsKICAgICAgICAgICAgICBzdHJtLm1zZyA9ICdpbmNvcnJlY3QgbGVuZ3RoIGNoZWNrJzsKICAgICAgICAgICAgICBzdGF0ZS5tb2RlID0gQkFEOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vPT09IElOSVRCSVRTKCk7CiAgICAgICAgICAgIGhvbGQgPSAwOwogICAgICAgICAgICBiaXRzID0gMDsKICAgICAgICAgICAgLy89PT0vLwogICAgICAgICAgICAvL1RyYWNldigoc3RkZXJyLCAiaW5mbGF0ZTogICBsZW5ndGggbWF0Y2hlcyB0cmFpbGVyXG4iKSk7CiAgICAgICAgICB9CiAgICAgICAgICBzdGF0ZS5tb2RlID0gRE9ORTsKICAgICAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi8KICAgICAgICBjYXNlIERPTkU6CiAgICAgICAgICByZXQgPSBaX1NUUkVBTV9FTkQkMTsKICAgICAgICAgIGJyZWFrIGluZl9sZWF2ZTsKICAgICAgICBjYXNlIEJBRDoKICAgICAgICAgIHJldCA9IFpfREFUQV9FUlJPUiQxOwogICAgICAgICAgYnJlYWsgaW5mX2xlYXZlOwogICAgICAgIGNhc2UgTUVNOgogICAgICAgICAgcmV0dXJuIFpfTUVNX0VSUk9SJDE7CiAgICAgICAgY2FzZSBTWU5DOgogICAgICAgICAgLyogZmFsbHMgdGhyb3VnaCAqLwogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICByZXR1cm4gWl9TVFJFQU1fRVJST1IkMTsKICAgICAgfQogICAgfQoKICAgIC8vIGluZl9sZWF2ZSA8LSBoZXJlIGlzIHJlYWwgcGxhY2UgZm9yICJnb3RvIGluZl9sZWF2ZSIsIGVtdWxhdGVkIHZpYSAiYnJlYWsgaW5mX2xlYXZlIgoKICAgIC8qCiAgICAgICBSZXR1cm4gZnJvbSBpbmZsYXRlKCksIHVwZGF0aW5nIHRoZSB0b3RhbCBjb3VudHMgYW5kIHRoZSBjaGVjayB2YWx1ZS4KICAgICAgIElmIHRoZXJlIHdhcyBubyBwcm9ncmVzcyBkdXJpbmcgdGhlIGluZmxhdGUoKSBjYWxsLCByZXR1cm4gYSBidWZmZXIKICAgICAgIGVycm9yLiAgQ2FsbCB1cGRhdGV3aW5kb3coKSB0byBjcmVhdGUgYW5kL29yIHVwZGF0ZSB0aGUgd2luZG93IHN0YXRlLgogICAgICAgTm90ZTogYSBtZW1vcnkgZXJyb3IgZnJvbSBpbmZsYXRlKCkgaXMgbm9uLXJlY292ZXJhYmxlLgogICAgICovCgogICAgLy8tLS0gUkVTVE9SRSgpIC0tLQogICAgc3RybS5uZXh0X291dCA9IHB1dDsKICAgIHN0cm0uYXZhaWxfb3V0ID0gbGVmdDsKICAgIHN0cm0ubmV4dF9pbiA9IG5leHQ7CiAgICBzdHJtLmF2YWlsX2luID0gaGF2ZTsKICAgIHN0YXRlLmhvbGQgPSBob2xkOwogICAgc3RhdGUuYml0cyA9IGJpdHM7CiAgICAvLy0tLQoKICAgIGlmIChzdGF0ZS53c2l6ZSB8fCAoX291dCAhPT0gc3RybS5hdmFpbF9vdXQgJiYgc3RhdGUubW9kZSA8IEJBRCAmJgogICAgICAgICAgICAgICAgICAgICAgICAoc3RhdGUubW9kZSA8IENIRUNLIHx8IGZsdXNoICE9PSBaX0ZJTklTSCQxKSkpIHsKICAgICAgaWYgKHVwZGF0ZXdpbmRvdyhzdHJtLCBzdHJtLm91dHB1dCwgc3RybS5uZXh0X291dCwgX291dCAtIHN0cm0uYXZhaWxfb3V0KSkgOwogICAgfQogICAgX2luIC09IHN0cm0uYXZhaWxfaW47CiAgICBfb3V0IC09IHN0cm0uYXZhaWxfb3V0OwogICAgc3RybS50b3RhbF9pbiArPSBfaW47CiAgICBzdHJtLnRvdGFsX291dCArPSBfb3V0OwogICAgc3RhdGUudG90YWwgKz0gX291dDsKICAgIGlmIChzdGF0ZS53cmFwICYmIF9vdXQpIHsKICAgICAgc3RybS5hZGxlciA9IHN0YXRlLmNoZWNrID0gLypVUERBVEUoc3RhdGUuY2hlY2ssIHN0cm0ubmV4dF9vdXQgLSBfb3V0LCBfb3V0KTsqLwogICAgICAgIChzdGF0ZS5mbGFncyA/IGNyYzMyXzEoc3RhdGUuY2hlY2ssIG91dHB1dCwgX291dCwgc3RybS5uZXh0X291dCAtIF9vdXQpIDogYWRsZXIzMl8xKHN0YXRlLmNoZWNrLCBvdXRwdXQsIF9vdXQsIHN0cm0ubmV4dF9vdXQgLSBfb3V0KSk7CiAgICB9CiAgICBzdHJtLmRhdGFfdHlwZSA9IHN0YXRlLmJpdHMgKyAoc3RhdGUubGFzdCA/IDY0IDogMCkgKwogICAgICAgICAgICAgICAgICAgICAgKHN0YXRlLm1vZGUgPT09IFRZUEUgPyAxMjggOiAwKSArCiAgICAgICAgICAgICAgICAgICAgICAoc3RhdGUubW9kZSA9PT0gTEVOXyB8fCBzdGF0ZS5tb2RlID09PSBDT1BZXyA/IDI1NiA6IDApOwogICAgaWYgKCgoX2luID09PSAwICYmIF9vdXQgPT09IDApIHx8IGZsdXNoID09PSBaX0ZJTklTSCQxKSAmJiByZXQgPT09IFpfT0skMSkgewogICAgICByZXQgPSBaX0JVRl9FUlJPUjsKICAgIH0KICAgIHJldHVybiByZXQ7CiAgfTsKCgogIGNvbnN0IGluZmxhdGVFbmQgPSAoc3RybSkgPT4gewoKICAgIGlmICghc3RybSB8fCAhc3RybS5zdGF0ZSAvKnx8IHN0cm0tPnpmcmVlID09IChmcmVlX2Z1bmMpMCovKSB7CiAgICAgIHJldHVybiBaX1NUUkVBTV9FUlJPUiQxOwogICAgfQoKICAgIGxldCBzdGF0ZSA9IHN0cm0uc3RhdGU7CiAgICBpZiAoc3RhdGUud2luZG93KSB7CiAgICAgIHN0YXRlLndpbmRvdyA9IG51bGw7CiAgICB9CiAgICBzdHJtLnN0YXRlID0gbnVsbDsKICAgIHJldHVybiBaX09LJDE7CiAgfTsKCgogIGNvbnN0IGluZmxhdGVHZXRIZWFkZXIgPSAoc3RybSwgaGVhZCkgPT4gewoKICAgIC8qIGNoZWNrIHN0YXRlICovCiAgICBpZiAoIXN0cm0gfHwgIXN0cm0uc3RhdGUpIHsgcmV0dXJuIFpfU1RSRUFNX0VSUk9SJDE7IH0KICAgIGNvbnN0IHN0YXRlID0gc3RybS5zdGF0ZTsKICAgIGlmICgoc3RhdGUud3JhcCAmIDIpID09PSAwKSB7IHJldHVybiBaX1NUUkVBTV9FUlJPUiQxOyB9CgogICAgLyogc2F2ZSBoZWFkZXIgc3RydWN0dXJlICovCiAgICBzdGF0ZS5oZWFkID0gaGVhZDsKICAgIGhlYWQuZG9uZSA9IGZhbHNlOwogICAgcmV0dXJuIFpfT0skMTsKICB9OwoKCiAgY29uc3QgaW5mbGF0ZVNldERpY3Rpb25hcnkgPSAoc3RybSwgZGljdGlvbmFyeSkgPT4gewogICAgY29uc3QgZGljdExlbmd0aCA9IGRpY3Rpb25hcnkubGVuZ3RoOwoKICAgIGxldCBzdGF0ZTsKICAgIGxldCBkaWN0aWQ7CiAgICBsZXQgcmV0OwoKICAgIC8qIGNoZWNrIHN0YXRlICovCiAgICBpZiAoIXN0cm0gLyogPT0gWl9OVUxMICovIHx8ICFzdHJtLnN0YXRlIC8qID09IFpfTlVMTCAqLykgeyByZXR1cm4gWl9TVFJFQU1fRVJST1IkMTsgfQogICAgc3RhdGUgPSBzdHJtLnN0YXRlOwoKICAgIGlmIChzdGF0ZS53cmFwICE9PSAwICYmIHN0YXRlLm1vZGUgIT09IERJQ1QpIHsKICAgICAgcmV0dXJuIFpfU1RSRUFNX0VSUk9SJDE7CiAgICB9CgogICAgLyogY2hlY2sgZm9yIGNvcnJlY3QgZGljdGlvbmFyeSBpZGVudGlmaWVyICovCiAgICBpZiAoc3RhdGUubW9kZSA9PT0gRElDVCkgewogICAgICBkaWN0aWQgPSAxOyAvKiBhZGxlcjMyKDAsIG51bGwsIDApKi8KICAgICAgLyogZGljdGlkID0gYWRsZXIzMihkaWN0aWQsIGRpY3Rpb25hcnksIGRpY3RMZW5ndGgpOyAqLwogICAgICBkaWN0aWQgPSBhZGxlcjMyXzEoZGljdGlkLCBkaWN0aW9uYXJ5LCBkaWN0TGVuZ3RoLCAwKTsKICAgICAgaWYgKGRpY3RpZCAhPT0gc3RhdGUuY2hlY2spIHsKICAgICAgICByZXR1cm4gWl9EQVRBX0VSUk9SJDE7CiAgICAgIH0KICAgIH0KICAgIC8qIGNvcHkgZGljdGlvbmFyeSB0byB3aW5kb3cgdXNpbmcgdXBkYXRld2luZG93KCksIHdoaWNoIHdpbGwgYW1lbmQgdGhlCiAgICAgZXhpc3RpbmcgZGljdGlvbmFyeSBpZiBhcHByb3ByaWF0ZSAqLwogICAgcmV0ID0gdXBkYXRld2luZG93KHN0cm0sIGRpY3Rpb25hcnksIGRpY3RMZW5ndGgsIGRpY3RMZW5ndGgpOwogICAgaWYgKHJldCkgewogICAgICBzdGF0ZS5tb2RlID0gTUVNOwogICAgICByZXR1cm4gWl9NRU1fRVJST1IkMTsKICAgIH0KICAgIHN0YXRlLmhhdmVkaWN0ID0gMTsKICAgIC8vIFRyYWNldigoc3RkZXJyLCAiaW5mbGF0ZTogICBkaWN0aW9uYXJ5IHNldFxuIikpOwogICAgcmV0dXJuIFpfT0skMTsKICB9OwoKCiAgdmFyIGluZmxhdGVSZXNldF8xID0gaW5mbGF0ZVJlc2V0OwogIHZhciBpbmZsYXRlUmVzZXQyXzEgPSBpbmZsYXRlUmVzZXQyOwogIHZhciBpbmZsYXRlUmVzZXRLZWVwXzEgPSBpbmZsYXRlUmVzZXRLZWVwOwogIHZhciBpbmZsYXRlSW5pdF8xID0gaW5mbGF0ZUluaXQ7CiAgdmFyIGluZmxhdGVJbml0Ml8xID0gaW5mbGF0ZUluaXQyOwogIHZhciBpbmZsYXRlXzIkMSA9IGluZmxhdGUkMjsKICB2YXIgaW5mbGF0ZUVuZF8xID0gaW5mbGF0ZUVuZDsKICB2YXIgaW5mbGF0ZUdldEhlYWRlcl8xID0gaW5mbGF0ZUdldEhlYWRlcjsKICB2YXIgaW5mbGF0ZVNldERpY3Rpb25hcnlfMSA9IGluZmxhdGVTZXREaWN0aW9uYXJ5OwogIHZhciBpbmZsYXRlSW5mbyA9ICdwYWtvIGluZmxhdGUgKGZyb20gTm9kZWNhIHByb2plY3QpJzsKCiAgLyogTm90IGltcGxlbWVudGVkCiAgbW9kdWxlLmV4cG9ydHMuaW5mbGF0ZUNvcHkgPSBpbmZsYXRlQ29weTsKICBtb2R1bGUuZXhwb3J0cy5pbmZsYXRlR2V0RGljdGlvbmFyeSA9IGluZmxhdGVHZXREaWN0aW9uYXJ5OwogIG1vZHVsZS5leHBvcnRzLmluZmxhdGVNYXJrID0gaW5mbGF0ZU1hcms7CiAgbW9kdWxlLmV4cG9ydHMuaW5mbGF0ZVByaW1lID0gaW5mbGF0ZVByaW1lOwogIG1vZHVsZS5leHBvcnRzLmluZmxhdGVTeW5jID0gaW5mbGF0ZVN5bmM7CiAgbW9kdWxlLmV4cG9ydHMuaW5mbGF0ZVN5bmNQb2ludCA9IGluZmxhdGVTeW5jUG9pbnQ7CiAgbW9kdWxlLmV4cG9ydHMuaW5mbGF0ZVVuZGVybWluZSA9IGluZmxhdGVVbmRlcm1pbmU7CiAgKi8KCiAgdmFyIGluZmxhdGVfMSQyID0gewogIAlpbmZsYXRlUmVzZXQ6IGluZmxhdGVSZXNldF8xLAogIAlpbmZsYXRlUmVzZXQyOiBpbmZsYXRlUmVzZXQyXzEsCiAgCWluZmxhdGVSZXNldEtlZXA6IGluZmxhdGVSZXNldEtlZXBfMSwKICAJaW5mbGF0ZUluaXQ6IGluZmxhdGVJbml0XzEsCiAgCWluZmxhdGVJbml0MjogaW5mbGF0ZUluaXQyXzEsCiAgCWluZmxhdGU6IGluZmxhdGVfMiQxLAogIAlpbmZsYXRlRW5kOiBpbmZsYXRlRW5kXzEsCiAgCWluZmxhdGVHZXRIZWFkZXI6IGluZmxhdGVHZXRIZWFkZXJfMSwKICAJaW5mbGF0ZVNldERpY3Rpb25hcnk6IGluZmxhdGVTZXREaWN0aW9uYXJ5XzEsCiAgCWluZmxhdGVJbmZvOiBpbmZsYXRlSW5mbwogIH07CgogIC8vIChDKSAxOTk1LTIwMTMgSmVhbi1sb3VwIEdhaWxseSBhbmQgTWFyayBBZGxlcgogIC8vIChDKSAyMDE0LTIwMTcgVml0YWx5IFB1enJpbiBhbmQgQW5kcmV5IFR1cGl0c2luCiAgLy8KICAvLyBUaGlzIHNvZnR3YXJlIGlzIHByb3ZpZGVkICdhcy1pcycsIHdpdGhvdXQgYW55IGV4cHJlc3Mgb3IgaW1wbGllZAogIC8vIHdhcnJhbnR5LiBJbiBubyBldmVudCB3aWxsIHRoZSBhdXRob3JzIGJlIGhlbGQgbGlhYmxlIGZvciBhbnkgZGFtYWdlcwogIC8vIGFyaXNpbmcgZnJvbSB0aGUgdXNlIG9mIHRoaXMgc29mdHdhcmUuCiAgLy8KICAvLyBQZXJtaXNzaW9uIGlzIGdyYW50ZWQgdG8gYW55b25lIHRvIHVzZSB0aGlzIHNvZnR3YXJlIGZvciBhbnkgcHVycG9zZSwKICAvLyBpbmNsdWRpbmcgY29tbWVyY2lhbCBhcHBsaWNhdGlvbnMsIGFuZCB0byBhbHRlciBpdCBhbmQgcmVkaXN0cmlidXRlIGl0CiAgLy8gZnJlZWx5LCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgcmVzdHJpY3Rpb25zOgogIC8vCiAgLy8gMS4gVGhlIG9yaWdpbiBvZiB0aGlzIHNvZnR3YXJlIG11c3Qgbm90IGJlIG1pc3JlcHJlc2VudGVkOyB5b3UgbXVzdCBub3QKICAvLyAgIGNsYWltIHRoYXQgeW91IHdyb3RlIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS4gSWYgeW91IHVzZSB0aGlzIHNvZnR3YXJlCiAgLy8gICBpbiBhIHByb2R1Y3QsIGFuIGFja25vd2xlZGdtZW50IGluIHRoZSBwcm9kdWN0IGRvY3VtZW50YXRpb24gd291bGQgYmUKICAvLyAgIGFwcHJlY2lhdGVkIGJ1dCBpcyBub3QgcmVxdWlyZWQuCiAgLy8gMi4gQWx0ZXJlZCBzb3VyY2UgdmVyc2lvbnMgbXVzdCBiZSBwbGFpbmx5IG1hcmtlZCBhcyBzdWNoLCBhbmQgbXVzdCBub3QgYmUKICAvLyAgIG1pc3JlcHJlc2VudGVkIGFzIGJlaW5nIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS4KICAvLyAzLiBUaGlzIG5vdGljZSBtYXkgbm90IGJlIHJlbW92ZWQgb3IgYWx0ZXJlZCBmcm9tIGFueSBzb3VyY2UgZGlzdHJpYnV0aW9uLgoKICBmdW5jdGlvbiBHWmhlYWRlcigpIHsKICAgIC8qIHRydWUgaWYgY29tcHJlc3NlZCBkYXRhIGJlbGlldmVkIHRvIGJlIHRleHQgKi8KICAgIHRoaXMudGV4dCAgICAgICA9IDA7CiAgICAvKiBtb2RpZmljYXRpb24gdGltZSAqLwogICAgdGhpcy50aW1lICAgICAgID0gMDsKICAgIC8qIGV4dHJhIGZsYWdzIChub3QgdXNlZCB3aGVuIHdyaXRpbmcgYSBnemlwIGZpbGUpICovCiAgICB0aGlzLnhmbGFncyAgICAgPSAwOwogICAgLyogb3BlcmF0aW5nIHN5c3RlbSAqLwogICAgdGhpcy5vcyAgICAgICAgID0gMDsKICAgIC8qIHBvaW50ZXIgdG8gZXh0cmEgZmllbGQgb3IgWl9OVUxMIGlmIG5vbmUgKi8KICAgIHRoaXMuZXh0cmEgICAgICA9IG51bGw7CiAgICAvKiBleHRyYSBmaWVsZCBsZW5ndGggKHZhbGlkIGlmIGV4dHJhICE9IFpfTlVMTCkgKi8KICAgIHRoaXMuZXh0cmFfbGVuICA9IDA7IC8vIEFjdHVhbGx5LCB3ZSBkb24ndCBuZWVkIGl0IGluIEpTLAogICAgICAgICAgICAgICAgICAgICAgICAgLy8gYnV0IGxlYXZlIGZvciBmZXcgY29kZSBtb2RpZmljYXRpb25zCgogICAgLy8KICAgIC8vIFNldHVwIGxpbWl0cyBpcyBub3QgbmVjZXNzYXJ5IGJlY2F1c2UgaW4ganMgd2Ugc2hvdWxkIG5vdCBwcmVhbGxvY2F0ZSBtZW1vcnkKICAgIC8vIGZvciBpbmZsYXRlIHVzZSBjb25zdGFudCBsaW1pdCBpbiA2NTUzNiBieXRlcwogICAgLy8KCiAgICAvKiBzcGFjZSBhdCBleHRyYSAob25seSB3aGVuIHJlYWRpbmcgaGVhZGVyKSAqLwogICAgLy8gdGhpcy5leHRyYV9tYXggID0gMDsKICAgIC8qIHBvaW50ZXIgdG8gemVyby10ZXJtaW5hdGVkIGZpbGUgbmFtZSBvciBaX05VTEwgKi8KICAgIHRoaXMubmFtZSAgICAgICA9ICcnOwogICAgLyogc3BhY2UgYXQgbmFtZSAob25seSB3aGVuIHJlYWRpbmcgaGVhZGVyKSAqLwogICAgLy8gdGhpcy5uYW1lX21heCAgID0gMDsKICAgIC8qIHBvaW50ZXIgdG8gemVyby10ZXJtaW5hdGVkIGNvbW1lbnQgb3IgWl9OVUxMICovCiAgICB0aGlzLmNvbW1lbnQgICAgPSAnJzsKICAgIC8qIHNwYWNlIGF0IGNvbW1lbnQgKG9ubHkgd2hlbiByZWFkaW5nIGhlYWRlcikgKi8KICAgIC8vIHRoaXMuY29tbV9tYXggICA9IDA7CiAgICAvKiB0cnVlIGlmIHRoZXJlIHdhcyBvciB3aWxsIGJlIGEgaGVhZGVyIGNyYyAqLwogICAgdGhpcy5oY3JjICAgICAgID0gMDsKICAgIC8qIHRydWUgd2hlbiBkb25lIHJlYWRpbmcgZ3ppcCBoZWFkZXIgKG5vdCB1c2VkIHdoZW4gd3JpdGluZyBhIGd6aXAgZmlsZSkgKi8KICAgIHRoaXMuZG9uZSAgICAgICA9IGZhbHNlOwogIH0KCiAgdmFyIGd6aGVhZGVyID0gR1poZWFkZXI7CgogIGNvbnN0IHRvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZzsKCiAgLyogUHVibGljIGNvbnN0YW50cyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki8KICAvKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qLwoKICBjb25zdCB7CiAgICBaX05PX0ZMVVNILCBaX0ZJTklTSCwKICAgIFpfT0ssIFpfU1RSRUFNX0VORCwgWl9ORUVEX0RJQ1QsIFpfU1RSRUFNX0VSUk9SLCBaX0RBVEFfRVJST1IsIFpfTUVNX0VSUk9SCiAgfSA9IGNvbnN0YW50cyQyOwoKICAvKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qLwoKCiAgLyoqCiAgICogY2xhc3MgSW5mbGF0ZQogICAqCiAgICogR2VuZXJpYyBKUy1zdHlsZSB3cmFwcGVyIGZvciB6bGliIGNhbGxzLiBJZiB5b3UgZG9uJ3QgbmVlZAogICAqIHN0cmVhbWluZyBiZWhhdmlvdXIgLSB1c2UgbW9yZSBzaW1wbGUgZnVuY3Rpb25zOiBbW2luZmxhdGVdXQogICAqIGFuZCBbW2luZmxhdGVSYXddXS4KICAgKiovCgogIC8qIGludGVybmFsCiAgICogaW5mbGF0ZS5jaHVua3MgLT4gQXJyYXkKICAgKgogICAqIENodW5rcyBvZiBvdXRwdXQgZGF0YSwgaWYgW1tJbmZsYXRlI29uRGF0YV1dIG5vdCBvdmVycmlkZGVuLgogICAqKi8KCiAgLyoqCiAgICogSW5mbGF0ZS5yZXN1bHQgLT4gVWludDhBcnJheXxTdHJpbmcKICAgKgogICAqIFVuY29tcHJlc3NlZCByZXN1bHQsIGdlbmVyYXRlZCBieSBkZWZhdWx0IFtbSW5mbGF0ZSNvbkRhdGFdXQogICAqIGFuZCBbW0luZmxhdGUjb25FbmRdXSBoYW5kbGVycy4gRmlsbGVkIGFmdGVyIHlvdSBwdXNoIGxhc3QgY2h1bmsKICAgKiAoY2FsbCBbW0luZmxhdGUjcHVzaF1dIHdpdGggYFpfRklOSVNIYCAvIGB0cnVlYCBwYXJhbSkuCiAgICoqLwoKICAvKioKICAgKiBJbmZsYXRlLmVyciAtPiBOdW1iZXIKICAgKgogICAqIEVycm9yIGNvZGUgYWZ0ZXIgaW5mbGF0ZSBmaW5pc2hlZC4gMCAoWl9PSykgb24gc3VjY2Vzcy4KICAgKiBTaG91bGQgYmUgY2hlY2tlZCBpZiBicm9rZW4gZGF0YSBwb3NzaWJsZS4KICAgKiovCgogIC8qKgogICAqIEluZmxhdGUubXNnIC0+IFN0cmluZwogICAqCiAgICogRXJyb3IgbWVzc2FnZSwgaWYgW1tJbmZsYXRlLmVycl1dICE9IDAKICAgKiovCgoKICAvKioKICAgKiBuZXcgSW5mbGF0ZShvcHRpb25zKQogICAqIC0gb3B0aW9ucyAoT2JqZWN0KTogemxpYiBpbmZsYXRlIG9wdGlvbnMuCiAgICoKICAgKiBDcmVhdGVzIG5ldyBpbmZsYXRvciBpbnN0YW5jZSB3aXRoIHNwZWNpZmllZCBwYXJhbXMuIFRocm93cyBleGNlcHRpb24KICAgKiBvbiBiYWQgcGFyYW1zLiBTdXBwb3J0ZWQgb3B0aW9uczoKICAgKgogICAqIC0gYHdpbmRvd0JpdHNgCiAgICogLSBgZGljdGlvbmFyeWAKICAgKgogICAqIFtodHRwOi8vemxpYi5uZXQvbWFudWFsLmh0bWwjQWR2YW5jZWRdKGh0dHA6Ly96bGliLm5ldC9tYW51YWwuaHRtbCNBZHZhbmNlZCkKICAgKiBmb3IgbW9yZSBpbmZvcm1hdGlvbiBvbiB0aGVzZS4KICAgKgogICAqIEFkZGl0aW9uYWwgb3B0aW9ucywgZm9yIGludGVybmFsIG5lZWRzOgogICAqCiAgICogLSBgY2h1bmtTaXplYCAtIHNpemUgb2YgZ2VuZXJhdGVkIGRhdGEgY2h1bmtzICgxNksgYnkgZGVmYXVsdCkKICAgKiAtIGByYXdgIChCb29sZWFuKSAtIGRvIHJhdyBpbmZsYXRlCiAgICogLSBgdG9gIChTdHJpbmcpIC0gaWYgZXF1YWwgdG8gJ3N0cmluZycsIHRoZW4gcmVzdWx0IHdpbGwgYmUgY29udmVydGVkCiAgICogICBmcm9tIHV0ZjggdG8gdXRmMTYgKGphdmFzY3JpcHQpIHN0cmluZy4gV2hlbiBzdHJpbmcgb3V0cHV0IHJlcXVlc3RlZCwKICAgKiAgIGNodW5rIGxlbmd0aCBjYW4gZGlmZmVyIGZyb20gYGNodW5rU2l6ZWAsIGRlcGVuZGluZyBvbiBjb250ZW50LgogICAqCiAgICogQnkgZGVmYXVsdCwgd2hlbiBubyBvcHRpb25zIHNldCwgYXV0b2RldGVjdCBkZWZsYXRlL2d6aXAgZGF0YSBmb3JtYXQgdmlhCiAgICogd3JhcHBlciBoZWFkZXIuCiAgICoKICAgKiAjIyMjIyBFeGFtcGxlOgogICAqCiAgICogYGBgamF2YXNjcmlwdAogICAqIGNvbnN0IHBha28gPSByZXF1aXJlKCdwYWtvJykKICAgKiBjb25zdCBjaHVuazEgPSBuZXcgVWludDhBcnJheShbMSwyLDMsNCw1LDYsNyw4LDldKQogICAqIGNvbnN0IGNodW5rMiA9IG5ldyBVaW50OEFycmF5KFsxMCwxMSwxMiwxMywxNCwxNSwxNiwxNywxOCwxOV0pOwogICAqCiAgICogY29uc3QgaW5mbGF0ZSA9IG5ldyBwYWtvLkluZmxhdGUoeyBsZXZlbDogM30pOwogICAqCiAgICogaW5mbGF0ZS5wdXNoKGNodW5rMSwgZmFsc2UpOwogICAqIGluZmxhdGUucHVzaChjaHVuazIsIHRydWUpOyAgLy8gdHJ1ZSAtPiBsYXN0IGNodW5rCiAgICoKICAgKiBpZiAoaW5mbGF0ZS5lcnIpIHsgdGhyb3cgbmV3IEVycm9yKGluZmxhdGUuZXJyKTsgfQogICAqCiAgICogY29uc29sZS5sb2coaW5mbGF0ZS5yZXN1bHQpOwogICAqIGBgYAogICAqKi8KICBmdW5jdGlvbiBJbmZsYXRlJDEob3B0aW9ucykgewogICAgdGhpcy5vcHRpb25zID0gY29tbW9uLmFzc2lnbih7CiAgICAgIGNodW5rU2l6ZTogMTAyNCAqIDY0LAogICAgICB3aW5kb3dCaXRzOiAxNSwKICAgICAgdG86ICcnCiAgICB9LCBvcHRpb25zIHx8IHt9KTsKCiAgICBjb25zdCBvcHQgPSB0aGlzLm9wdGlvbnM7CgogICAgLy8gRm9yY2Ugd2luZG93IHNpemUgZm9yIGByYXdgIGRhdGEsIGlmIG5vdCBzZXQgZGlyZWN0bHksCiAgICAvLyBiZWNhdXNlIHdlIGhhdmUgbm8gaGVhZGVyIGZvciBhdXRvZGV0ZWN0LgogICAgaWYgKG9wdC5yYXcgJiYgKG9wdC53aW5kb3dCaXRzID49IDApICYmIChvcHQud2luZG93Qml0cyA8IDE2KSkgewogICAgICBvcHQud2luZG93Qml0cyA9IC1vcHQud2luZG93Qml0czsKICAgICAgaWYgKG9wdC53aW5kb3dCaXRzID09PSAwKSB7IG9wdC53aW5kb3dCaXRzID0gLTE1OyB9CiAgICB9CgogICAgLy8gSWYgYHdpbmRvd0JpdHNgIG5vdCBkZWZpbmVkIChhbmQgbW9kZSBub3QgcmF3KSAtIHNldCBhdXRvZGV0ZWN0IGZsYWcgZm9yIGd6aXAvZGVmbGF0ZQogICAgaWYgKChvcHQud2luZG93Qml0cyA+PSAwKSAmJiAob3B0LndpbmRvd0JpdHMgPCAxNikgJiYKICAgICAgICAhKG9wdGlvbnMgJiYgb3B0aW9ucy53aW5kb3dCaXRzKSkgewogICAgICBvcHQud2luZG93Qml0cyArPSAzMjsKICAgIH0KCiAgICAvLyBHemlwIGhlYWRlciBoYXMgbm8gaW5mbyBhYm91dCB3aW5kb3dzIHNpemUsIHdlIGNhbiBkbyBhdXRvZGV0ZWN0IG9ubHkKICAgIC8vIGZvciBkZWZsYXRlLiBTbywgaWYgd2luZG93IHNpemUgbm90IHNldCwgZm9yY2UgaXQgdG8gbWF4IHdoZW4gZ3ppcCBwb3NzaWJsZQogICAgaWYgKChvcHQud2luZG93Qml0cyA+IDE1KSAmJiAob3B0LndpbmRvd0JpdHMgPCA0OCkpIHsKICAgICAgLy8gYml0IDMgKDE2KSAtPiBnemlwcGVkIGRhdGEKICAgICAgLy8gYml0IDQgKDMyKSAtPiBhdXRvZGV0ZWN0IGd6aXAvZGVmbGF0ZQogICAgICBpZiAoKG9wdC53aW5kb3dCaXRzICYgMTUpID09PSAwKSB7CiAgICAgICAgb3B0LndpbmRvd0JpdHMgfD0gMTU7CiAgICAgIH0KICAgIH0KCiAgICB0aGlzLmVyciAgICA9IDA7ICAgICAgLy8gZXJyb3IgY29kZSwgaWYgaGFwcGVucyAoMCA9IFpfT0spCiAgICB0aGlzLm1zZyAgICA9ICcnOyAgICAgLy8gZXJyb3IgbWVzc2FnZQogICAgdGhpcy5lbmRlZCAgPSBmYWxzZTsgIC8vIHVzZWQgdG8gYXZvaWQgbXVsdGlwbGUgb25FbmQoKSBjYWxscwogICAgdGhpcy5jaHVua3MgPSBbXTsgICAgIC8vIGNodW5rcyBvZiBjb21wcmVzc2VkIGRhdGEKCiAgICB0aGlzLnN0cm0gICA9IG5ldyB6c3RyZWFtKCk7CiAgICB0aGlzLnN0cm0uYXZhaWxfb3V0ID0gMDsKCiAgICBsZXQgc3RhdHVzICA9IGluZmxhdGVfMSQyLmluZmxhdGVJbml0MigKICAgICAgdGhpcy5zdHJtLAogICAgICBvcHQud2luZG93Qml0cwogICAgKTsKCiAgICBpZiAoc3RhdHVzICE9PSBaX09LKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcihtZXNzYWdlc1tzdGF0dXNdKTsKICAgIH0KCiAgICB0aGlzLmhlYWRlciA9IG5ldyBnemhlYWRlcigpOwoKICAgIGluZmxhdGVfMSQyLmluZmxhdGVHZXRIZWFkZXIodGhpcy5zdHJtLCB0aGlzLmhlYWRlcik7CgogICAgLy8gU2V0dXAgZGljdGlvbmFyeQogICAgaWYgKG9wdC5kaWN0aW9uYXJ5KSB7CiAgICAgIC8vIENvbnZlcnQgZGF0YSBpZiBuZWVkZWQKICAgICAgaWYgKHR5cGVvZiBvcHQuZGljdGlvbmFyeSA9PT0gJ3N0cmluZycpIHsKICAgICAgICBvcHQuZGljdGlvbmFyeSA9IHN0cmluZ3Muc3RyaW5nMmJ1ZihvcHQuZGljdGlvbmFyeSk7CiAgICAgIH0gZWxzZSBpZiAodG9TdHJpbmcuY2FsbChvcHQuZGljdGlvbmFyeSkgPT09ICdbb2JqZWN0IEFycmF5QnVmZmVyXScpIHsKICAgICAgICBvcHQuZGljdGlvbmFyeSA9IG5ldyBVaW50OEFycmF5KG9wdC5kaWN0aW9uYXJ5KTsKICAgICAgfQogICAgICBpZiAob3B0LnJhdykgeyAvL0luIHJhdyBtb2RlIHdlIG5lZWQgdG8gc2V0IHRoZSBkaWN0aW9uYXJ5IGVhcmx5CiAgICAgICAgc3RhdHVzID0gaW5mbGF0ZV8xJDIuaW5mbGF0ZVNldERpY3Rpb25hcnkodGhpcy5zdHJtLCBvcHQuZGljdGlvbmFyeSk7CiAgICAgICAgaWYgKHN0YXR1cyAhPT0gWl9PSykgewogICAgICAgICAgdGhyb3cgbmV3IEVycm9yKG1lc3NhZ2VzW3N0YXR1c10pOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0KCiAgLyoqCiAgICogSW5mbGF0ZSNwdXNoKGRhdGFbLCBmbHVzaF9tb2RlXSkgLT4gQm9vbGVhbgogICAqIC0gZGF0YSAoVWludDhBcnJheXxBcnJheUJ1ZmZlcik6IGlucHV0IGRhdGEKICAgKiAtIGZsdXNoX21vZGUgKE51bWJlcnxCb29sZWFuKTogMC4uNiBmb3IgY29ycmVzcG9uZGluZyBaX05PX0ZMVVNILi5aX1RSRUUKICAgKiAgIGZsdXNoIG1vZGVzLiBTZWUgY29uc3RhbnRzLiBTa2lwcGVkIG9yIGBmYWxzZWAgbWVhbnMgWl9OT19GTFVTSCwKICAgKiAgIGB0cnVlYCBtZWFucyBaX0ZJTklTSC4KICAgKgogICAqIFNlbmRzIGlucHV0IGRhdGEgdG8gaW5mbGF0ZSBwaXBlLCBnZW5lcmF0aW5nIFtbSW5mbGF0ZSNvbkRhdGFdXSBjYWxscyB3aXRoCiAgICogbmV3IG91dHB1dCBjaHVua3MuIFJldHVybnMgYHRydWVgIG9uIHN1Y2Nlc3MuIElmIGVuZCBvZiBzdHJlYW0gZGV0ZWN0ZWQsCiAgICogW1tJbmZsYXRlI29uRW5kXV0gd2lsbCBiZSBjYWxsZWQuCiAgICoKICAgKiBgZmx1c2hfbW9kZWAgaXMgbm90IG5lZWRlZCBmb3Igbm9ybWFsIG9wZXJhdGlvbiwgYmVjYXVzZSBlbmQgb2Ygc3RyZWFtCiAgICogZGV0ZWN0ZWQgYXV0b21hdGljYWxseS4gWW91IG1heSB0cnkgdG8gdXNlIGl0IGZvciBhZHZhbmNlZCB0aGluZ3MsIGJ1dAogICAqIHRoaXMgZnVuY3Rpb25hbGl0eSB3YXMgbm90IHRlc3RlZC4KICAgKgogICAqIE9uIGZhaWwgY2FsbCBbW0luZmxhdGUjb25FbmRdXSB3aXRoIGVycm9yIGNvZGUgYW5kIHJldHVybiBmYWxzZS4KICAgKgogICAqICMjIyMjIEV4YW1wbGUKICAgKgogICAqIGBgYGphdmFzY3JpcHQKICAgKiBwdXNoKGNodW5rLCBmYWxzZSk7IC8vIHB1c2ggb25lIG9mIGRhdGEgY2h1bmtzCiAgICogLi4uCiAgICogcHVzaChjaHVuaywgdHJ1ZSk7ICAvLyBwdXNoIGxhc3QgY2h1bmsKICAgKiBgYGAKICAgKiovCiAgSW5mbGF0ZSQxLnByb3RvdHlwZS5wdXNoID0gZnVuY3Rpb24gKGRhdGEsIGZsdXNoX21vZGUpIHsKICAgIGNvbnN0IHN0cm0gPSB0aGlzLnN0cm07CiAgICBjb25zdCBjaHVua1NpemUgPSB0aGlzLm9wdGlvbnMuY2h1bmtTaXplOwogICAgY29uc3QgZGljdGlvbmFyeSA9IHRoaXMub3B0aW9ucy5kaWN0aW9uYXJ5OwogICAgbGV0IHN0YXR1cywgX2ZsdXNoX21vZGUsIGxhc3RfYXZhaWxfb3V0OwoKICAgIGlmICh0aGlzLmVuZGVkKSByZXR1cm4gZmFsc2U7CgogICAgaWYgKGZsdXNoX21vZGUgPT09IH5+Zmx1c2hfbW9kZSkgX2ZsdXNoX21vZGUgPSBmbHVzaF9tb2RlOwogICAgZWxzZSBfZmx1c2hfbW9kZSA9IGZsdXNoX21vZGUgPT09IHRydWUgPyBaX0ZJTklTSCA6IFpfTk9fRkxVU0g7CgogICAgLy8gQ29udmVydCBkYXRhIGlmIG5lZWRlZAogICAgaWYgKHRvU3RyaW5nLmNhbGwoZGF0YSkgPT09ICdbb2JqZWN0IEFycmF5QnVmZmVyXScpIHsKICAgICAgc3RybS5pbnB1dCA9IG5ldyBVaW50OEFycmF5KGRhdGEpOwogICAgfSBlbHNlIHsKICAgICAgc3RybS5pbnB1dCA9IGRhdGE7CiAgICB9CgogICAgc3RybS5uZXh0X2luID0gMDsKICAgIHN0cm0uYXZhaWxfaW4gPSBzdHJtLmlucHV0Lmxlbmd0aDsKCiAgICBmb3IgKDs7KSB7CiAgICAgIGlmIChzdHJtLmF2YWlsX291dCA9PT0gMCkgewogICAgICAgIHN0cm0ub3V0cHV0ID0gbmV3IFVpbnQ4QXJyYXkoY2h1bmtTaXplKTsKICAgICAgICBzdHJtLm5leHRfb3V0ID0gMDsKICAgICAgICBzdHJtLmF2YWlsX291dCA9IGNodW5rU2l6ZTsKICAgICAgfQoKICAgICAgc3RhdHVzID0gaW5mbGF0ZV8xJDIuaW5mbGF0ZShzdHJtLCBfZmx1c2hfbW9kZSk7CgogICAgICBpZiAoc3RhdHVzID09PSBaX05FRURfRElDVCAmJiBkaWN0aW9uYXJ5KSB7CiAgICAgICAgc3RhdHVzID0gaW5mbGF0ZV8xJDIuaW5mbGF0ZVNldERpY3Rpb25hcnkoc3RybSwgZGljdGlvbmFyeSk7CgogICAgICAgIGlmIChzdGF0dXMgPT09IFpfT0spIHsKICAgICAgICAgIHN0YXR1cyA9IGluZmxhdGVfMSQyLmluZmxhdGUoc3RybSwgX2ZsdXNoX21vZGUpOwogICAgICAgIH0gZWxzZSBpZiAoc3RhdHVzID09PSBaX0RBVEFfRVJST1IpIHsKICAgICAgICAgIC8vIFJlcGxhY2UgY29kZSB3aXRoIG1vcmUgdmVyYm9zZQogICAgICAgICAgc3RhdHVzID0gWl9ORUVEX0RJQ1Q7CiAgICAgICAgfQogICAgICB9CgogICAgICAvLyBTa2lwIHNueWMgbWFya2VycyBpZiBtb3JlIGRhdGEgZm9sbG93cyBhbmQgbm90IHJhdyBtb2RlCiAgICAgIHdoaWxlIChzdHJtLmF2YWlsX2luID4gMCAmJgogICAgICAgICAgICAgc3RhdHVzID09PSBaX1NUUkVBTV9FTkQgJiYKICAgICAgICAgICAgIHN0cm0uc3RhdGUud3JhcCA+IDAgJiYKICAgICAgICAgICAgIGRhdGFbc3RybS5uZXh0X2luXSAhPT0gMCkKICAgICAgewogICAgICAgIGluZmxhdGVfMSQyLmluZmxhdGVSZXNldChzdHJtKTsKICAgICAgICBzdGF0dXMgPSBpbmZsYXRlXzEkMi5pbmZsYXRlKHN0cm0sIF9mbHVzaF9tb2RlKTsKICAgICAgfQoKICAgICAgc3dpdGNoIChzdGF0dXMpIHsKICAgICAgICBjYXNlIFpfU1RSRUFNX0VSUk9SOgogICAgICAgIGNhc2UgWl9EQVRBX0VSUk9SOgogICAgICAgIGNhc2UgWl9ORUVEX0RJQ1Q6CiAgICAgICAgY2FzZSBaX01FTV9FUlJPUjoKICAgICAgICAgIHRoaXMub25FbmQoc3RhdHVzKTsKICAgICAgICAgIHRoaXMuZW5kZWQgPSB0cnVlOwogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CgogICAgICAvLyBSZW1lbWJlciByZWFsIGBhdmFpbF9vdXRgIHZhbHVlLCBiZWNhdXNlIHdlIG1heSBwYXRjaCBvdXQgYnVmZmVyIGNvbnRlbnQKICAgICAgLy8gdG8gYWxpZ24gdXRmOCBzdHJpbmdzIGJvdW5kYXJpZXMuCiAgICAgIGxhc3RfYXZhaWxfb3V0ID0gc3RybS5hdmFpbF9vdXQ7CgogICAgICBpZiAoc3RybS5uZXh0X291dCkgewogICAgICAgIGlmIChzdHJtLmF2YWlsX291dCA9PT0gMCB8fCBzdGF0dXMgPT09IFpfU1RSRUFNX0VORCkgewoKICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMudG8gPT09ICdzdHJpbmcnKSB7CgogICAgICAgICAgICBsZXQgbmV4dF9vdXRfdXRmOCA9IHN0cmluZ3MudXRmOGJvcmRlcihzdHJtLm91dHB1dCwgc3RybS5uZXh0X291dCk7CgogICAgICAgICAgICBsZXQgdGFpbCA9IHN0cm0ubmV4dF9vdXQgLSBuZXh0X291dF91dGY4OwogICAgICAgICAgICBsZXQgdXRmOHN0ciA9IHN0cmluZ3MuYnVmMnN0cmluZyhzdHJtLm91dHB1dCwgbmV4dF9vdXRfdXRmOCk7CgogICAgICAgICAgICAvLyBtb3ZlIHRhaWwgJiByZWFsaWduIGNvdW50ZXJzCiAgICAgICAgICAgIHN0cm0ubmV4dF9vdXQgPSB0YWlsOwogICAgICAgICAgICBzdHJtLmF2YWlsX291dCA9IGNodW5rU2l6ZSAtIHRhaWw7CiAgICAgICAgICAgIGlmICh0YWlsKSBzdHJtLm91dHB1dC5zZXQoc3RybS5vdXRwdXQuc3ViYXJyYXkobmV4dF9vdXRfdXRmOCwgbmV4dF9vdXRfdXRmOCArIHRhaWwpLCAwKTsKCiAgICAgICAgICAgIHRoaXMub25EYXRhKHV0ZjhzdHIpOwoKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMub25EYXRhKHN0cm0ub3V0cHV0Lmxlbmd0aCA9PT0gc3RybS5uZXh0X291dCA/IHN0cm0ub3V0cHV0IDogc3RybS5vdXRwdXQuc3ViYXJyYXkoMCwgc3RybS5uZXh0X291dCkpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgLy8gTXVzdCByZXBlYXQgaXRlcmF0aW9uIGlmIG91dCBidWZmZXIgaXMgZnVsbAogICAgICBpZiAoc3RhdHVzID09PSBaX09LICYmIGxhc3RfYXZhaWxfb3V0ID09PSAwKSBjb250aW51ZTsKCiAgICAgIC8vIEZpbmFsaXplIGlmIGVuZCBvZiBzdHJlYW0gcmVhY2hlZC4KICAgICAgaWYgKHN0YXR1cyA9PT0gWl9TVFJFQU1fRU5EKSB7CiAgICAgICAgc3RhdHVzID0gaW5mbGF0ZV8xJDIuaW5mbGF0ZUVuZCh0aGlzLnN0cm0pOwogICAgICAgIHRoaXMub25FbmQoc3RhdHVzKTsKICAgICAgICB0aGlzLmVuZGVkID0gdHJ1ZTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQoKICAgICAgaWYgKHN0cm0uYXZhaWxfaW4gPT09IDApIGJyZWFrOwogICAgfQoKICAgIHJldHVybiB0cnVlOwogIH07CgoKICAvKioKICAgKiBJbmZsYXRlI29uRGF0YShjaHVuaykgLT4gVm9pZAogICAqIC0gY2h1bmsgKFVpbnQ4QXJyYXl8U3RyaW5nKTogb3V0cHV0IGRhdGEuIFdoZW4gc3RyaW5nIG91dHB1dCByZXF1ZXN0ZWQsCiAgICogICBlYWNoIGNodW5rIHdpbGwgYmUgc3RyaW5nLgogICAqCiAgICogQnkgZGVmYXVsdCwgc3RvcmVzIGRhdGEgYmxvY2tzIGluIGBjaHVua3NbXWAgcHJvcGVydHkgYW5kIGdsdWUKICAgKiB0aG9zZSBpbiBgb25FbmRgLiBPdmVycmlkZSB0aGlzIGhhbmRsZXIsIGlmIHlvdSBuZWVkIGFub3RoZXIgYmVoYXZpb3VyLgogICAqKi8KICBJbmZsYXRlJDEucHJvdG90eXBlLm9uRGF0YSA9IGZ1bmN0aW9uIChjaHVuaykgewogICAgdGhpcy5jaHVua3MucHVzaChjaHVuayk7CiAgfTsKCgogIC8qKgogICAqIEluZmxhdGUjb25FbmQoc3RhdHVzKSAtPiBWb2lkCiAgICogLSBzdGF0dXMgKE51bWJlcik6IGluZmxhdGUgc3RhdHVzLiAwIChaX09LKSBvbiBzdWNjZXNzLAogICAqICAgb3RoZXIgaWYgbm90LgogICAqCiAgICogQ2FsbGVkIGVpdGhlciBhZnRlciB5b3UgdGVsbCBpbmZsYXRlIHRoYXQgdGhlIGlucHV0IHN0cmVhbSBpcwogICAqIGNvbXBsZXRlIChaX0ZJTklTSCkuIEJ5IGRlZmF1bHQgLSBqb2luIGNvbGxlY3RlZCBjaHVua3MsCiAgICogZnJlZSBtZW1vcnkgYW5kIGZpbGwgYHJlc3VsdHNgIC8gYGVycmAgcHJvcGVydGllcy4KICAgKiovCiAgSW5mbGF0ZSQxLnByb3RvdHlwZS5vbkVuZCA9IGZ1bmN0aW9uIChzdGF0dXMpIHsKICAgIC8vIE9uIHN1Y2Nlc3MgLSBqb2luCiAgICBpZiAoc3RhdHVzID09PSBaX09LKSB7CiAgICAgIGlmICh0aGlzLm9wdGlvbnMudG8gPT09ICdzdHJpbmcnKSB7CiAgICAgICAgdGhpcy5yZXN1bHQgPSB0aGlzLmNodW5rcy5qb2luKCcnKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnJlc3VsdCA9IGNvbW1vbi5mbGF0dGVuQ2h1bmtzKHRoaXMuY2h1bmtzKTsKICAgICAgfQogICAgfQogICAgdGhpcy5jaHVua3MgPSBbXTsKICAgIHRoaXMuZXJyID0gc3RhdHVzOwogICAgdGhpcy5tc2cgPSB0aGlzLnN0cm0ubXNnOwogIH07CgoKICAvKioKICAgKiBpbmZsYXRlKGRhdGFbLCBvcHRpb25zXSkgLT4gVWludDhBcnJheXxTdHJpbmcKICAgKiAtIGRhdGEgKFVpbnQ4QXJyYXkpOiBpbnB1dCBkYXRhIHRvIGRlY29tcHJlc3MuCiAgICogLSBvcHRpb25zIChPYmplY3QpOiB6bGliIGluZmxhdGUgb3B0aW9ucy4KICAgKgogICAqIERlY29tcHJlc3MgYGRhdGFgIHdpdGggaW5mbGF0ZS91bmd6aXAgYW5kIGBvcHRpb25zYC4gQXV0b2RldGVjdAogICAqIGZvcm1hdCB2aWEgd3JhcHBlciBoZWFkZXIgYnkgZGVmYXVsdC4gVGhhdCdzIHdoeSB3ZSBkb24ndCBwcm92aWRlCiAgICogc2VwYXJhdGUgYHVuZ3ppcGAgbWV0aG9kLgogICAqCiAgICogU3VwcG9ydGVkIG9wdGlvbnMgYXJlOgogICAqCiAgICogLSB3aW5kb3dCaXRzCiAgICoKICAgKiBbaHR0cDovL3psaWIubmV0L21hbnVhbC5odG1sI0FkdmFuY2VkXShodHRwOi8vemxpYi5uZXQvbWFudWFsLmh0bWwjQWR2YW5jZWQpCiAgICogZm9yIG1vcmUgaW5mb3JtYXRpb24uCiAgICoKICAgKiBTdWdhciAob3B0aW9ucyk6CiAgICoKICAgKiAtIGByYXdgIChCb29sZWFuKSAtIHNheSB0aGF0IHdlIHdvcmsgd2l0aCByYXcgc3RyZWFtLCBpZiB5b3UgZG9uJ3Qgd2lzaCB0byBzcGVjaWZ5CiAgICogICBuZWdhdGl2ZSB3aW5kb3dCaXRzIGltcGxpY2l0bHkuCiAgICogLSBgdG9gIChTdHJpbmcpIC0gaWYgZXF1YWwgdG8gJ3N0cmluZycsIHRoZW4gcmVzdWx0IHdpbGwgYmUgY29udmVydGVkCiAgICogICBmcm9tIHV0ZjggdG8gdXRmMTYgKGphdmFzY3JpcHQpIHN0cmluZy4gV2hlbiBzdHJpbmcgb3V0cHV0IHJlcXVlc3RlZCwKICAgKiAgIGNodW5rIGxlbmd0aCBjYW4gZGlmZmVyIGZyb20gYGNodW5rU2l6ZWAsIGRlcGVuZGluZyBvbiBjb250ZW50LgogICAqCiAgICoKICAgKiAjIyMjIyBFeGFtcGxlOgogICAqCiAgICogYGBgamF2YXNjcmlwdAogICAqIGNvbnN0IHBha28gPSByZXF1aXJlKCdwYWtvJyk7CiAgICogY29uc3QgaW5wdXQgPSBwYWtvLmRlZmxhdGUobmV3IFVpbnQ4QXJyYXkoWzEsMiwzLDQsNSw2LDcsOCw5XSkpOwogICAqIGxldCBvdXRwdXQ7CiAgICoKICAgKiB0cnkgewogICAqICAgb3V0cHV0ID0gcGFrby5pbmZsYXRlKGlucHV0KTsKICAgKiB9IGNhdGNoIChlcnIpIHsKICAgKiAgIGNvbnNvbGUubG9nKGVycik7CiAgICogfQogICAqIGBgYAogICAqKi8KICBmdW5jdGlvbiBpbmZsYXRlJDEoaW5wdXQsIG9wdGlvbnMpIHsKICAgIGNvbnN0IGluZmxhdG9yID0gbmV3IEluZmxhdGUkMShvcHRpb25zKTsKCiAgICBpbmZsYXRvci5wdXNoKGlucHV0KTsKCiAgICAvLyBUaGF0IHdpbGwgbmV2ZXIgaGFwcGVucywgaWYgeW91IGRvbid0IGNoZWF0IHdpdGggb3B0aW9ucyA6KQogICAgaWYgKGluZmxhdG9yLmVycikgdGhyb3cgaW5mbGF0b3IubXNnIHx8IG1lc3NhZ2VzW2luZmxhdG9yLmVycl07CgogICAgcmV0dXJuIGluZmxhdG9yLnJlc3VsdDsKICB9CgoKICAvKioKICAgKiBpbmZsYXRlUmF3KGRhdGFbLCBvcHRpb25zXSkgLT4gVWludDhBcnJheXxTdHJpbmcKICAgKiAtIGRhdGEgKFVpbnQ4QXJyYXkpOiBpbnB1dCBkYXRhIHRvIGRlY29tcHJlc3MuCiAgICogLSBvcHRpb25zIChPYmplY3QpOiB6bGliIGluZmxhdGUgb3B0aW9ucy4KICAgKgogICAqIFRoZSBzYW1lIGFzIFtbaW5mbGF0ZV1dLCBidXQgY3JlYXRlcyByYXcgZGF0YSwgd2l0aG91dCB3cmFwcGVyCiAgICogKGhlYWRlciBhbmQgYWRsZXIzMiBjcmMpLgogICAqKi8KICBmdW5jdGlvbiBpbmZsYXRlUmF3JDEoaW5wdXQsIG9wdGlvbnMpIHsKICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9OwogICAgb3B0aW9ucy5yYXcgPSB0cnVlOwogICAgcmV0dXJuIGluZmxhdGUkMShpbnB1dCwgb3B0aW9ucyk7CiAgfQoKCiAgLyoqCiAgICogdW5nemlwKGRhdGFbLCBvcHRpb25zXSkgLT4gVWludDhBcnJheXxTdHJpbmcKICAgKiAtIGRhdGEgKFVpbnQ4QXJyYXkpOiBpbnB1dCBkYXRhIHRvIGRlY29tcHJlc3MuCiAgICogLSBvcHRpb25zIChPYmplY3QpOiB6bGliIGluZmxhdGUgb3B0aW9ucy4KICAgKgogICAqIEp1c3Qgc2hvcnRjdXQgdG8gW1tpbmZsYXRlXV0sIGJlY2F1c2UgaXQgYXV0b2RldGVjdHMgZm9ybWF0CiAgICogYnkgaGVhZGVyLmNvbnRlbnQuIERvbmUgZm9yIGNvbnZlbmllbmNlLgogICAqKi8KCgogIHZhciBJbmZsYXRlXzEkMSA9IEluZmxhdGUkMTsKICB2YXIgaW5mbGF0ZV8yID0gaW5mbGF0ZSQxOwogIHZhciBpbmZsYXRlUmF3XzEkMSA9IGluZmxhdGVSYXckMTsKICB2YXIgdW5nemlwJDEgPSBpbmZsYXRlJDE7CiAgdmFyIGNvbnN0YW50cyA9IGNvbnN0YW50cyQyOwoKICB2YXIgaW5mbGF0ZV8xJDEgPSB7CiAgCUluZmxhdGU6IEluZmxhdGVfMSQxLAogIAlpbmZsYXRlOiBpbmZsYXRlXzIsCiAgCWluZmxhdGVSYXc6IGluZmxhdGVSYXdfMSQxLAogIAl1bmd6aXA6IHVuZ3ppcCQxLAogIAljb25zdGFudHM6IGNvbnN0YW50cwogIH07CgogIGNvbnN0IHsgSW5mbGF0ZSwgaW5mbGF0ZSwgaW5mbGF0ZVJhdywgdW5nemlwIH0gPSBpbmZsYXRlXzEkMTsKICB2YXIgaW5mbGF0ZV8xID0gaW5mbGF0ZTsKCiAgY2xhc3MgRGVmbGF0ZURlY29kZXIgZXh0ZW5kcyBCYXNlRGVjb2RlciB7CiAgICBkZWNvZGVCbG9jayhidWZmZXIpIHsKICAgICAgcmV0dXJuIGluZmxhdGVfMShuZXcgVWludDhBcnJheShidWZmZXIpKS5idWZmZXI7CiAgICB9CiAgfQoKICBjbGFzcyBQYWNrYml0c0RlY29kZXIgZXh0ZW5kcyBCYXNlRGVjb2RlciB7CiAgICBkZWNvZGVCbG9jayhidWZmZXIpIHsKICAgICAgY29uc3QgZGF0YVZpZXcgPSBuZXcgRGF0YVZpZXcoYnVmZmVyKTsKICAgICAgY29uc3Qgb3V0ID0gW107CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJ1ZmZlci5ieXRlTGVuZ3RoOyArK2kpIHsKICAgICAgICBsZXQgaGVhZGVyID0gZGF0YVZpZXcuZ2V0SW50OChpKTsKICAgICAgICBpZiAoaGVhZGVyIDwgMCkgewogICAgICAgICAgY29uc3QgbmV4dCA9IGRhdGFWaWV3LmdldFVpbnQ4KGkgKyAxKTsKICAgICAgICAgIGhlYWRlciA9IC1oZWFkZXI7CiAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8PSBoZWFkZXI7ICsraikgewogICAgICAgICAgICBvdXQucHVzaChuZXh0KTsKICAgICAgICAgIH0KICAgICAgICAgIGkgKz0gMTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPD0gaGVhZGVyOyArK2opIHsKICAgICAgICAgICAgb3V0LnB1c2goZGF0YVZpZXcuZ2V0VWludDgoaSArIGogKyAxKSk7CiAgICAgICAgICB9CiAgICAgICAgICBpICs9IGhlYWRlciArIDE7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBuZXcgVWludDhBcnJheShvdXQpLmJ1ZmZlcjsKICAgIH0KICB9CgogIHZhciBMZXJjRGVjb2RlID0ge2V4cG9ydHM6IHt9fTsKCiAgLyoganNoaW50IGZvcmluOiBmYWxzZSwgYml0d2lzZTogZmFsc2UgKi8KCiAgKGZ1bmN0aW9uIChtb2R1bGUpIHsKICAvKgogIENvcHlyaWdodCAyMDE1LTIwMTggRXNyaQoKICBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgogIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoKICBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgogIEEgY29weSBvZiB0aGUgbGljZW5zZSBhbmQgYWRkaXRpb25hbCBub3RpY2VzIGFyZSBsb2NhdGVkIHdpdGggdGhlCiAgc291cmNlIGRpc3RyaWJ1dGlvbiBhdDoKCiAgaHR0cDovL2dpdGh1Yi5jb20vRXNyaS9sZXJjLwoKICBDb250cmlidXRvcnM6ICBKb2hhbm5lcyBTY2htaWQsIChMRVJDIHYxKQogICAgICAgICAgICAgICAgIENoYXlhbmlrYSBLaGF0dWEsIChMRVJDIHYxKQogICAgICAgICAgICAgICAgIFdlbnh1ZSBKdSAoTEVSQyB2MSwgdjIueCkKICAqLwoKICAvKiBDb3B5cmlnaHQgMjAxNS0yMDE4IEVzcmkuIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdCBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAgQHByZXNlcnZlICovCgogIC8qKgogICAqIGEgbW9kdWxlIGZvciBkZWNvZGluZyBMRVJDIGJsb2JzCiAgICogQG1vZHVsZSBMZXJjCiAgICovCiAgKGZ1bmN0aW9uKCkgewogICAgLy90aGUgb3JpZ2luYWwgTGVyY0RlY29kZSBmb3IgVmVyc2lvbiAxCiAgICB2YXIgTGVyY0RlY29kZSA9IChmdW5jdGlvbigpIHsKCiAgICAgIC8vIFdBUk5JTkc6IFRoaXMgZGVjb2RlciB2ZXJzaW9uIGNhbiBvbmx5IHJlYWQgb2xkIHZlcnNpb24gMSBMZXJjIGJsb2JzLiBVc2Ugd2l0aCBjYXV0aW9uLgoKICAgICAgLy8gTm90ZTogY3VycmVudGx5LCB0aGlzIG1vZHVsZSBvbmx5IGhhcyBhbiBpbXBsZW1lbnRhdGlvbiBmb3IgZGVjb2RpbmcgTEVSQyBkYXRhLCBub3QgZW5jb2RpbmcuIFRoZSBuYW1lIG9mCiAgICAgIC8vIHRoZSBjbGFzcyB3YXMgY2hvc2VuIHRvIGJlIGZ1dHVyZSBwcm9vZi4KCiAgICAgIHZhciBDbnRaSW1hZ2UgPSB7fTsKCiAgICAgIENudFpJbWFnZS5kZWZhdWx0Tm9EYXRhVmFsdWUgPSAtMy40MDI3OTk5Mzg3OTAxNDg0ZSszODsgLy8gc21hbGxlc3QgRmxvYXQzMiB2YWx1ZQoKICAgICAgLyoqCiAgICAgICAqIERlY29kZSBhIExFUkMgYnl0ZSBzdHJlYW0gYW5kIHJldHVybiBhbiBvYmplY3QgY29udGFpbmluZyB0aGUgcGl4ZWwgZGF0YSBhbmQgc29tZSByZXF1aXJlZCBhbmQgb3B0aW9uYWwKICAgICAgICogaW5mb3JtYXRpb24gYWJvdXQgaXQsIHN1Y2ggYXMgdGhlIGltYWdlJ3Mgd2lkdGggYW5kIGhlaWdodC4KICAgICAgICoKICAgICAgICogQHBhcmFtIHtBcnJheUJ1ZmZlcn0gaW5wdXQgVGhlIExFUkMgaW5wdXQgYnl0ZSBzdHJlYW0KICAgICAgICogQHBhcmFtIHtvYmplY3R9IFtvcHRpb25zXSBEZWNvZGluZyBvcHRpb25zLCBjb250YWluaW5nIGFueSBvZiB0aGUgZm9sbG93aW5nIHByb3BlcnRpZXM6CiAgICAgICAqIEBjb25maWcge251bWJlcn0gW2lucHV0T2Zmc2V0ID0gMF0KICAgICAgICogICAgICAgIFNraXAgdGhlIGZpcnN0IGlucHV0T2Zmc2V0IGJ5dGVzIG9mIHRoZSBpbnB1dCBieXRlIHN0cmVhbS4gQSB2YWxpZCBMRVJDIGZpbGUgaXMgZXhwZWN0ZWQgYXQgdGhhdCBwb3NpdGlvbi4KICAgICAgICogQGNvbmZpZyB7VWludDhBcnJheX0gW2VuY29kZWRNYXNrID0gbnVsbF0KICAgICAgICogICAgICAgIElmIHNwZWNpZmllZCwgdGhlIGRlY29kZXIgd2lsbCBub3QgcmVhZCBtYXNrIGluZm9ybWF0aW9uIGZyb20gdGhlIGlucHV0IGFuZCB1c2UgdGhlIHNwZWNpZmllZCBlbmNvZGVkCiAgICAgICAqICAgICAgICBtYXNrIGRhdGEgaW5zdGVhZC4gTWFzayBoZWFkZXIvZGF0YSBtdXN0IG5vdCBiZSBwcmVzZW50IGluIHRoZSBMRVJDIGJ5dGUgc3RyZWFtIGluIHRoaXMgY2FzZS4KICAgICAgICogQGNvbmZpZyB7bnVtYmVyfSBbbm9EYXRhVmFsdWUgPSBMZXJjQ29kZS5kZWZhdWx0Tm9EYXRhVmFsdWVdCiAgICAgICAqICAgICAgICBQaXhlbCB2YWx1ZSB0byB1c2UgZm9yIG1hc2tlZCBwaXhlbHMuCiAgICAgICAqIEBjb25maWcge0FycmF5QnVmZmVyVmlld3xBcnJheX0gW3BpeGVsVHlwZSA9IEZsb2F0MzJBcnJheV0KICAgICAgICogICAgICAgIFRoZSBkZXNpcmVkIHR5cGUgb2YgdGhlIHBpeGVsRGF0YSBhcnJheSBpbiB0aGUgcmV0dXJuIHZhbHVlLiBOb3RlIHRoYXQgaXQgaXMgdGhlIGNhbGxlcidzIHJlc3BvbnNpYmlsaXR5IHRvCiAgICAgICAqICAgICAgICBwcm92aWRlIGFuIGFwcHJvcHJpYXRlIG5vRGF0YVZhbHVlIGlmIHRoZSBkZWZhdWx0IHBpeGVsVHlwZSBpcyBvdmVycmlkZGVuLgogICAgICAgKiBAY29uZmlnIHtib29sZWFufSBbcmV0dXJuTWFzayA9IGZhbHNlXQogICAgICAgKiAgICAgICAgSWYgdHJ1ZSwgdGhlIHJldHVybiB2YWx1ZSB3aWxsIGNvbnRhaW4gYSBtYXNrRGF0YSBwcm9wZXJ0eSBvZiB0eXBlIFVpbnQ4QXJyYXkgd2hpY2ggaGFzIG9uZSBlbGVtZW50IHBlcgogICAgICAgKiAgICAgICAgcGl4ZWwsIHRoZSB2YWx1ZSBvZiB3aGljaCBpcyAxIG9yIDAgZGVwZW5kaW5nIG9uIHdoZXRoZXIgdGhhdCBwaXhlbCdzIGRhdGEgaXMgcHJlc2VudCBvciBtYXNrZWQuIElmIHRoZQogICAgICAgKiAgICAgICAgaW5wdXQgTEVSQyBkYXRhIGRvZXMgbm90IGNvbnRhaW4gYSBtYXNrLCBtYXNrRGF0YSB3aWxsIG5vdCBiZSByZXR1cm5lZC4KICAgICAgICogQGNvbmZpZyB7Ym9vbGVhbn0gW3JldHVybkVuY29kZWRNYXNrID0gZmFsc2VdCiAgICAgICAqICAgICAgICBJZiB0cnVlLCB0aGUgcmV0dXJuIHZhbHVlIHdpbGwgY29udGFpbiBhIGVuY29kZWRNYXNrRGF0YSBwcm9wZXJ0eSwgd2hpY2ggY2FuIGJlIHBhc3NlZCBpbnRvIGVuY29kZSgpIGFzCiAgICAgICAqICAgICAgICBlbmNvZGVkTWFzay4KICAgICAgICogQGNvbmZpZyB7Ym9vbGVhbn0gW3JldHVybkZpbGVJbmZvID0gZmFsc2VdCiAgICAgICAqICAgICAgICBJZiB0cnVlLCB0aGUgcmV0dXJuIHZhbHVlIHdpbGwgaGF2ZSBhIGZpbGVJbmZvIHByb3BlcnR5IHRoYXQgY29udGFpbnMgbWV0YWRhdGEgb2J0YWluZWQgZnJvbSB0aGUKICAgICAgICogICAgICAgIExFUkMgaGVhZGVycyBhbmQgdGhlIGRlY29kaW5nIHByb2Nlc3MuCiAgICAgICAqIEBjb25maWcge2Jvb2xlYW59IFtjb21wdXRlVXNlZEJpdERlcHRocyA9IGZhbHNlXQogICAgICAgKiAgICAgICAgSWYgdHJ1ZSwgdGhlIGZpbGVJbmZvIHByb3BlcnR5IGluIHRoZSByZXR1cm4gdmFsdWUgd2lsbCBjb250YWluIHRoZSBzZXQgb2YgYWxsIGJsb2NrIGJpdCBkZXB0aHMKICAgICAgICogICAgICAgIGVuY291bnRlcmVkIGR1cmluZyBkZWNvZGluZy4gV2lsbCBvbmx5IGhhdmUgYW4gZWZmZWN0IGlmIHJldHVybkZpbGVJbmZvIG9wdGlvbiBpcyB0cnVlLgogICAgICAgKiBAcmV0dXJucyB7e3dpZHRoLCBoZWlnaHQsIHBpeGVsRGF0YSwgbWluVmFsdWUsIG1heFZhbHVlLCBub0RhdGFWYWx1ZSwgbWFza0RhdGEsIGVuY29kZWRNYXNrRGF0YSwgZmlsZUluZm99fQogICAgICAgKi8KICAgICAgQ250WkltYWdlLmRlY29kZSA9IGZ1bmN0aW9uKGlucHV0LCBvcHRpb25zKSB7CiAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307CgogICAgICAgIHZhciBza2lwTWFzayA9IG9wdGlvbnMuZW5jb2RlZE1hc2tEYXRhIHx8IChvcHRpb25zLmVuY29kZWRNYXNrRGF0YSA9PT0gbnVsbCk7CiAgICAgICAgdmFyIHBhcnNlZERhdGEgPSBwYXJzZShpbnB1dCwgb3B0aW9ucy5pbnB1dE9mZnNldCB8fCAwLCBza2lwTWFzayk7CgogICAgICAgIHZhciBub0RhdGFWYWx1ZSA9IChvcHRpb25zLm5vRGF0YVZhbHVlICE9PSBudWxsKSA/IG9wdGlvbnMubm9EYXRhVmFsdWUgOiBDbnRaSW1hZ2UuZGVmYXVsdE5vRGF0YVZhbHVlOwoKICAgICAgICB2YXIgdW5jb21wcmVzc2VkRGF0YSA9IHVuY29tcHJlc3NQaXhlbFZhbHVlcyhwYXJzZWREYXRhLCBvcHRpb25zLnBpeGVsVHlwZSB8fCBGbG9hdDMyQXJyYXksCiAgICAgICAgICBvcHRpb25zLmVuY29kZWRNYXNrRGF0YSwgbm9EYXRhVmFsdWUsIG9wdGlvbnMucmV0dXJuTWFzayk7CgogICAgICAgIHZhciByZXN1bHQgPSB7CiAgICAgICAgICB3aWR0aDogcGFyc2VkRGF0YS53aWR0aCwKICAgICAgICAgIGhlaWdodDogcGFyc2VkRGF0YS5oZWlnaHQsCiAgICAgICAgICBwaXhlbERhdGE6IHVuY29tcHJlc3NlZERhdGEucmVzdWx0UGl4ZWxzLAogICAgICAgICAgbWluVmFsdWU6IHVuY29tcHJlc3NlZERhdGEubWluVmFsdWUsCiAgICAgICAgICBtYXhWYWx1ZTogcGFyc2VkRGF0YS5waXhlbHMubWF4VmFsdWUsCiAgICAgICAgICBub0RhdGFWYWx1ZTogbm9EYXRhVmFsdWUKICAgICAgICB9OwoKICAgICAgICBpZiAodW5jb21wcmVzc2VkRGF0YS5yZXN1bHRNYXNrKSB7CiAgICAgICAgICByZXN1bHQubWFza0RhdGEgPSB1bmNvbXByZXNzZWREYXRhLnJlc3VsdE1hc2s7CiAgICAgICAgfQoKICAgICAgICBpZiAob3B0aW9ucy5yZXR1cm5FbmNvZGVkTWFzayAmJiBwYXJzZWREYXRhLm1hc2spIHsKICAgICAgICAgIHJlc3VsdC5lbmNvZGVkTWFza0RhdGEgPSBwYXJzZWREYXRhLm1hc2suYml0c2V0ID8gcGFyc2VkRGF0YS5tYXNrLmJpdHNldCA6IG51bGw7CiAgICAgICAgfQoKICAgICAgICBpZiAob3B0aW9ucy5yZXR1cm5GaWxlSW5mbykgewogICAgICAgICAgcmVzdWx0LmZpbGVJbmZvID0gZm9ybWF0RmlsZUluZm8ocGFyc2VkRGF0YSk7CiAgICAgICAgICBpZiAob3B0aW9ucy5jb21wdXRlVXNlZEJpdERlcHRocykgewogICAgICAgICAgICByZXN1bHQuZmlsZUluZm8uYml0RGVwdGhzID0gY29tcHV0ZVVzZWRCaXREZXB0aHMocGFyc2VkRGF0YSk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICB9OwoKICAgICAgdmFyIHVuY29tcHJlc3NQaXhlbFZhbHVlcyA9IGZ1bmN0aW9uKGRhdGEsIFR5cGVkQXJyYXlDbGFzcywgbWFza0JpdHNldCwgbm9EYXRhVmFsdWUsIHN0b3JlRGVjb2RlZE1hc2spIHsKICAgICAgICB2YXIgYmxvY2tJZHggPSAwOwogICAgICAgIHZhciBudW1YID0gZGF0YS5waXhlbHMubnVtQmxvY2tzWDsKICAgICAgICB2YXIgbnVtWSA9IGRhdGEucGl4ZWxzLm51bUJsb2Nrc1k7CiAgICAgICAgdmFyIGJsb2NrV2lkdGggPSBNYXRoLmZsb29yKGRhdGEud2lkdGggLyBudW1YKTsKICAgICAgICB2YXIgYmxvY2tIZWlnaHQgPSBNYXRoLmZsb29yKGRhdGEuaGVpZ2h0IC8gbnVtWSk7CiAgICAgICAgdmFyIHNjYWxlID0gMiAqIGRhdGEubWF4WkVycm9yOwogICAgICAgIHZhciBtaW5WYWx1ZSA9IE51bWJlci5NQVhfVkFMVUUsIGN1cnJlbnRWYWx1ZTsKICAgICAgICBtYXNrQml0c2V0ID0gbWFza0JpdHNldCB8fCAoKGRhdGEubWFzaykgPyBkYXRhLm1hc2suYml0c2V0IDogbnVsbCk7CgogICAgICAgIHZhciByZXN1bHRQaXhlbHMsIHJlc3VsdE1hc2s7CiAgICAgICAgcmVzdWx0UGl4ZWxzID0gbmV3IFR5cGVkQXJyYXlDbGFzcyhkYXRhLndpZHRoICogZGF0YS5oZWlnaHQpOwogICAgICAgIGlmIChzdG9yZURlY29kZWRNYXNrICYmIG1hc2tCaXRzZXQpIHsKICAgICAgICAgIHJlc3VsdE1hc2sgPSBuZXcgVWludDhBcnJheShkYXRhLndpZHRoICogZGF0YS5oZWlnaHQpOwogICAgICAgIH0KICAgICAgICB2YXIgYmxvY2tEYXRhQnVmZmVyID0gbmV3IEZsb2F0MzJBcnJheShibG9ja1dpZHRoICogYmxvY2tIZWlnaHQpOwoKICAgICAgICB2YXIgeHgsIHl5OwogICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDw9IG51bVk7IHkrKykgewogICAgICAgICAgdmFyIHRoaXNCbG9ja0hlaWdodCA9ICh5ICE9PSBudW1ZKSA/IGJsb2NrSGVpZ2h0IDogKGRhdGEuaGVpZ2h0ICUgbnVtWSk7CiAgICAgICAgICBpZiAodGhpc0Jsb2NrSGVpZ2h0ID09PSAwKSB7CiAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgfQogICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPD0gbnVtWDsgeCsrKSB7CiAgICAgICAgICAgIHZhciB0aGlzQmxvY2tXaWR0aCA9ICh4ICE9PSBudW1YKSA/IGJsb2NrV2lkdGggOiAoZGF0YS53aWR0aCAlIG51bVgpOwogICAgICAgICAgICBpZiAodGhpc0Jsb2NrV2lkdGggPT09IDApIHsKICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdmFyIG91dFB0ciA9IHkgKiBkYXRhLndpZHRoICogYmxvY2tIZWlnaHQgKyB4ICogYmxvY2tXaWR0aDsKICAgICAgICAgICAgdmFyIG91dFN0cmlkZSA9IGRhdGEud2lkdGggLSB0aGlzQmxvY2tXaWR0aDsKCiAgICAgICAgICAgIHZhciBibG9jayA9IGRhdGEucGl4ZWxzLmJsb2Nrc1tibG9ja0lkeF07CgogICAgICAgICAgICB2YXIgYmxvY2tEYXRhLCBibG9ja1B0ciwgY29uc3RWYWx1ZTsKICAgICAgICAgICAgaWYgKGJsb2NrLmVuY29kaW5nIDwgMikgewogICAgICAgICAgICAgIC8vIGJsb2NrIGlzIGVpdGhlciB1bmNvbXByZXNzZWQgb3IgYml0LXN0dWZmZWQgKGVuY29kaW5ncyAwIGFuZCAxKQogICAgICAgICAgICAgIGlmIChibG9jay5lbmNvZGluZyA9PT0gMCkgewogICAgICAgICAgICAgICAgLy8gYmxvY2sgaXMgdW5jb21wcmVzc2VkCiAgICAgICAgICAgICAgICBibG9ja0RhdGEgPSBibG9jay5yYXdEYXRhOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAvLyBibG9jayBpcyBiaXQtc3R1ZmZlZAogICAgICAgICAgICAgICAgdW5zdHVmZihibG9jay5zdHVmZmVkRGF0YSwgYmxvY2suYml0c1BlclBpeGVsLCBibG9jay5udW1WYWxpZFBpeGVscywgYmxvY2sub2Zmc2V0LCBzY2FsZSwgYmxvY2tEYXRhQnVmZmVyLCBkYXRhLnBpeGVscy5tYXhWYWx1ZSk7CiAgICAgICAgICAgICAgICBibG9ja0RhdGEgPSBibG9ja0RhdGFCdWZmZXI7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGJsb2NrUHRyID0gMDsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIGlmIChibG9jay5lbmNvZGluZyA9PT0gMikgewogICAgICAgICAgICAgIC8vIGJsb2NrIGlzIGFsbCAwCiAgICAgICAgICAgICAgY29uc3RWYWx1ZSA9IDA7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgLy8gYmxvY2sgaGFzIGNvbnN0YW50IHZhbHVlIChlbmNvZGluZyA9PT0gMykKICAgICAgICAgICAgICBjb25zdFZhbHVlID0gYmxvY2sub2Zmc2V0OwogICAgICAgICAgICB9CgogICAgICAgICAgICB2YXIgbWFza0J5dGU7CiAgICAgICAgICAgIGlmIChtYXNrQml0c2V0KSB7CiAgICAgICAgICAgICAgZm9yICh5eSA9IDA7IHl5IDwgdGhpc0Jsb2NrSGVpZ2h0OyB5eSsrKSB7CiAgICAgICAgICAgICAgICBpZiAob3V0UHRyICYgNykgewogICAgICAgICAgICAgICAgICAvLwogICAgICAgICAgICAgICAgICBtYXNrQnl0ZSA9IG1hc2tCaXRzZXRbb3V0UHRyID4+IDNdOwogICAgICAgICAgICAgICAgICBtYXNrQnl0ZSA8PD0gb3V0UHRyICYgNzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGZvciAoeHggPSAwOyB4eCA8IHRoaXNCbG9ja1dpZHRoOyB4eCsrKSB7CiAgICAgICAgICAgICAgICAgIGlmICghKG91dFB0ciAmIDcpKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gcmVhZCBuZXh0IGJ5dGUgZnJvbSBtYXNrCiAgICAgICAgICAgICAgICAgICAgbWFza0J5dGUgPSBtYXNrQml0c2V0W291dFB0ciA+PiAzXTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICBpZiAobWFza0J5dGUgJiAxMjgpIHsKICAgICAgICAgICAgICAgICAgICAvLyBwaXhlbCBkYXRhIHByZXNlbnQKICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0TWFzaykgewogICAgICAgICAgICAgICAgICAgICAgcmVzdWx0TWFza1tvdXRQdHJdID0gMTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgY3VycmVudFZhbHVlID0gKGJsb2NrLmVuY29kaW5nIDwgMikgPyBibG9ja0RhdGFbYmxvY2tQdHIrK10gOiBjb25zdFZhbHVlOwogICAgICAgICAgICAgICAgICAgIG1pblZhbHVlID0gbWluVmFsdWUgPiBjdXJyZW50VmFsdWUgPyBjdXJyZW50VmFsdWUgOiBtaW5WYWx1ZTsKICAgICAgICAgICAgICAgICAgICByZXN1bHRQaXhlbHNbb3V0UHRyKytdID0gY3VycmVudFZhbHVlOwogICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIC8vIHBpeGVsIGRhdGEgbm90IHByZXNlbnQKICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0TWFzaykgewogICAgICAgICAgICAgICAgICAgICAgcmVzdWx0TWFza1tvdXRQdHJdID0gMDsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgcmVzdWx0UGl4ZWxzW291dFB0cisrXSA9IG5vRGF0YVZhbHVlOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIG1hc2tCeXRlIDw8PSAxOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgb3V0UHRyICs9IG91dFN0cmlkZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgLy8gbWFzayBub3QgcHJlc2VudCwgc2ltcGx5IGNvcHkgYmxvY2sgb3ZlcgogICAgICAgICAgICAgIGlmIChibG9jay5lbmNvZGluZyA8IDIpIHsKICAgICAgICAgICAgICAgIC8vIGR1cGxpY2F0aW5nIHRoaXMgY29kZSBibG9jayBmb3IgcGVyZm9ybWFuY2UgcmVhc29ucwogICAgICAgICAgICAgICAgLy8gYmxvY2tEYXRhIGNhc2U6CiAgICAgICAgICAgICAgICBmb3IgKHl5ID0gMDsgeXkgPCB0aGlzQmxvY2tIZWlnaHQ7IHl5KyspIHsKICAgICAgICAgICAgICAgICAgZm9yICh4eCA9IDA7IHh4IDwgdGhpc0Jsb2NrV2lkdGg7IHh4KyspIHsKICAgICAgICAgICAgICAgICAgICBjdXJyZW50VmFsdWUgPSBibG9ja0RhdGFbYmxvY2tQdHIrK107CiAgICAgICAgICAgICAgICAgICAgbWluVmFsdWUgPSBtaW5WYWx1ZSA+IGN1cnJlbnRWYWx1ZSA/IGN1cnJlbnRWYWx1ZSA6IG1pblZhbHVlOwogICAgICAgICAgICAgICAgICAgIHJlc3VsdFBpeGVsc1tvdXRQdHIrK10gPSBjdXJyZW50VmFsdWU7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgb3V0UHRyICs9IG91dFN0cmlkZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAvLyBjb25zdFZhbHVlIGNhc2U6CiAgICAgICAgICAgICAgICBtaW5WYWx1ZSA9IG1pblZhbHVlID4gY29uc3RWYWx1ZSA/IGNvbnN0VmFsdWUgOiBtaW5WYWx1ZTsKICAgICAgICAgICAgICAgIGZvciAoeXkgPSAwOyB5eSA8IHRoaXNCbG9ja0hlaWdodDsgeXkrKykgewogICAgICAgICAgICAgICAgICBmb3IgKHh4ID0gMDsgeHggPCB0aGlzQmxvY2tXaWR0aDsgeHgrKykgewogICAgICAgICAgICAgICAgICAgIHJlc3VsdFBpeGVsc1tvdXRQdHIrK10gPSBjb25zdFZhbHVlOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIG91dFB0ciArPSBvdXRTdHJpZGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICgoYmxvY2suZW5jb2RpbmcgPT09IDEpICYmIChibG9ja1B0ciAhPT0gYmxvY2subnVtVmFsaWRQaXhlbHMpKSB7CiAgICAgICAgICAgICAgdGhyb3cgIkJsb2NrIGFuZCBNYXNrIGRvIG5vdCBtYXRjaCI7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYmxvY2tJZHgrKzsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHJldHVybiB7CiAgICAgICAgICByZXN1bHRQaXhlbHM6IHJlc3VsdFBpeGVscywKICAgICAgICAgIHJlc3VsdE1hc2s6IHJlc3VsdE1hc2ssCiAgICAgICAgICBtaW5WYWx1ZTogbWluVmFsdWUKICAgICAgICB9OwogICAgICB9OwoKICAgICAgdmFyIGZvcm1hdEZpbGVJbmZvID0gZnVuY3Rpb24oZGF0YSkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAiZmlsZUlkZW50aWZpZXJTdHJpbmciOiBkYXRhLmZpbGVJZGVudGlmaWVyU3RyaW5nLAogICAgICAgICAgImZpbGVWZXJzaW9uIjogZGF0YS5maWxlVmVyc2lvbiwKICAgICAgICAgICJpbWFnZVR5cGUiOiBkYXRhLmltYWdlVHlwZSwKICAgICAgICAgICJoZWlnaHQiOiBkYXRhLmhlaWdodCwKICAgICAgICAgICJ3aWR0aCI6IGRhdGEud2lkdGgsCiAgICAgICAgICAibWF4WkVycm9yIjogZGF0YS5tYXhaRXJyb3IsCiAgICAgICAgICAiZW9mT2Zmc2V0IjogZGF0YS5lb2ZPZmZzZXQsCiAgICAgICAgICAibWFzayI6IGRhdGEubWFzayA/IHsKICAgICAgICAgICAgIm51bUJsb2Nrc1giOiBkYXRhLm1hc2subnVtQmxvY2tzWCwKICAgICAgICAgICAgIm51bUJsb2Nrc1kiOiBkYXRhLm1hc2subnVtQmxvY2tzWSwKICAgICAgICAgICAgIm51bUJ5dGVzIjogZGF0YS5tYXNrLm51bUJ5dGVzLAogICAgICAgICAgICAibWF4VmFsdWUiOiBkYXRhLm1hc2subWF4VmFsdWUKICAgICAgICAgIH0gOiBudWxsLAogICAgICAgICAgInBpeGVscyI6IHsKICAgICAgICAgICAgIm51bUJsb2Nrc1giOiBkYXRhLnBpeGVscy5udW1CbG9ja3NYLAogICAgICAgICAgICAibnVtQmxvY2tzWSI6IGRhdGEucGl4ZWxzLm51bUJsb2Nrc1ksCiAgICAgICAgICAgICJudW1CeXRlcyI6IGRhdGEucGl4ZWxzLm51bUJ5dGVzLAogICAgICAgICAgICAibWF4VmFsdWUiOiBkYXRhLnBpeGVscy5tYXhWYWx1ZSwKICAgICAgICAgICAgIm5vRGF0YVZhbHVlIjogZGF0YS5ub0RhdGFWYWx1ZQogICAgICAgICAgfQogICAgICAgIH07CiAgICAgIH07CgogICAgICB2YXIgY29tcHV0ZVVzZWRCaXREZXB0aHMgPSBmdW5jdGlvbihkYXRhKSB7CiAgICAgICAgdmFyIG51bUJsb2NrcyA9IGRhdGEucGl4ZWxzLm51bUJsb2Nrc1ggKiBkYXRhLnBpeGVscy5udW1CbG9ja3NZOwogICAgICAgIHZhciBiaXREZXB0aHMgPSB7fTsKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG51bUJsb2NrczsgaSsrKSB7CiAgICAgICAgICB2YXIgYmxvY2sgPSBkYXRhLnBpeGVscy5ibG9ja3NbaV07CiAgICAgICAgICBpZiAoYmxvY2suZW5jb2RpbmcgPT09IDApIHsKICAgICAgICAgICAgYml0RGVwdGhzLmZsb2F0MzIgPSB0cnVlOwogICAgICAgICAgfSBlbHNlIGlmIChibG9jay5lbmNvZGluZyA9PT0gMSkgewogICAgICAgICAgICBiaXREZXB0aHNbYmxvY2suYml0c1BlclBpeGVsXSA9IHRydWU7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBiaXREZXB0aHNbMF0gPSB0cnVlOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKGJpdERlcHRocyk7CiAgICAgIH07CgogICAgICB2YXIgcGFyc2UgPSBmdW5jdGlvbihpbnB1dCwgZnAsIHNraXBNYXNrKSB7CiAgICAgICAgdmFyIGRhdGEgPSB7fTsKCiAgICAgICAgLy8gRmlsZSBoZWFkZXIKICAgICAgICB2YXIgZmlsZUlkVmlldyA9IG5ldyBVaW50OEFycmF5KGlucHV0LCBmcCwgMTApOwogICAgICAgIGRhdGEuZmlsZUlkZW50aWZpZXJTdHJpbmcgPSBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsIGZpbGVJZFZpZXcpOwogICAgICAgIGlmIChkYXRhLmZpbGVJZGVudGlmaWVyU3RyaW5nLnRyaW0oKSAhPT0gIkNudFpJbWFnZSIpIHsKICAgICAgICAgIHRocm93ICJVbmV4cGVjdGVkIGZpbGUgaWRlbnRpZmllciBzdHJpbmc6ICIgKyBkYXRhLmZpbGVJZGVudGlmaWVyU3RyaW5nOwogICAgICAgIH0KICAgICAgICBmcCArPSAxMDsKICAgICAgICB2YXIgdmlldyA9IG5ldyBEYXRhVmlldyhpbnB1dCwgZnAsIDI0KTsKICAgICAgICBkYXRhLmZpbGVWZXJzaW9uID0gdmlldy5nZXRJbnQzMigwLCB0cnVlKTsKICAgICAgICBkYXRhLmltYWdlVHlwZSA9IHZpZXcuZ2V0SW50MzIoNCwgdHJ1ZSk7CiAgICAgICAgZGF0YS5oZWlnaHQgPSB2aWV3LmdldFVpbnQzMig4LCB0cnVlKTsKICAgICAgICBkYXRhLndpZHRoID0gdmlldy5nZXRVaW50MzIoMTIsIHRydWUpOwogICAgICAgIGRhdGEubWF4WkVycm9yID0gdmlldy5nZXRGbG9hdDY0KDE2LCB0cnVlKTsKICAgICAgICBmcCArPSAyNDsKCiAgICAgICAgLy8gTWFzayBIZWFkZXIKICAgICAgICBpZiAoIXNraXBNYXNrKSB7CiAgICAgICAgICB2aWV3ID0gbmV3IERhdGFWaWV3KGlucHV0LCBmcCwgMTYpOwogICAgICAgICAgZGF0YS5tYXNrID0ge307CiAgICAgICAgICBkYXRhLm1hc2subnVtQmxvY2tzWSA9IHZpZXcuZ2V0VWludDMyKDAsIHRydWUpOwogICAgICAgICAgZGF0YS5tYXNrLm51bUJsb2Nrc1ggPSB2aWV3LmdldFVpbnQzMig0LCB0cnVlKTsKICAgICAgICAgIGRhdGEubWFzay5udW1CeXRlcyA9IHZpZXcuZ2V0VWludDMyKDgsIHRydWUpOwogICAgICAgICAgZGF0YS5tYXNrLm1heFZhbHVlID0gdmlldy5nZXRGbG9hdDMyKDEyLCB0cnVlKTsKICAgICAgICAgIGZwICs9IDE2OwoKICAgICAgICAgIC8vIE1hc2sgRGF0YQogICAgICAgICAgaWYgKGRhdGEubWFzay5udW1CeXRlcyA+IDApIHsKICAgICAgICAgICAgdmFyIGJpdHNldCA9IG5ldyBVaW50OEFycmF5KE1hdGguY2VpbChkYXRhLndpZHRoICogZGF0YS5oZWlnaHQgLyA4KSk7CiAgICAgICAgICAgIHZpZXcgPSBuZXcgRGF0YVZpZXcoaW5wdXQsIGZwLCBkYXRhLm1hc2subnVtQnl0ZXMpOwogICAgICAgICAgICB2YXIgY250ID0gdmlldy5nZXRJbnQxNigwLCB0cnVlKTsKICAgICAgICAgICAgdmFyIGlwID0gMiwgb3AgPSAwOwogICAgICAgICAgICBkbyB7CiAgICAgICAgICAgICAgaWYgKGNudCA+IDApIHsKICAgICAgICAgICAgICAgIHdoaWxlIChjbnQtLSkgeyBiaXRzZXRbb3ArK10gPSB2aWV3LmdldFVpbnQ4KGlwKyspOyB9CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHZhciB2YWwgPSB2aWV3LmdldFVpbnQ4KGlwKyspOwogICAgICAgICAgICAgICAgY250ID0gLWNudDsKICAgICAgICAgICAgICAgIHdoaWxlIChjbnQtLSkgeyBiaXRzZXRbb3ArK10gPSB2YWw7IH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgY250ID0gdmlldy5nZXRJbnQxNihpcCwgdHJ1ZSk7CiAgICAgICAgICAgICAgaXAgKz0gMjsKICAgICAgICAgICAgfSB3aGlsZSAoaXAgPCBkYXRhLm1hc2subnVtQnl0ZXMpOwogICAgICAgICAgICBpZiAoKGNudCAhPT0gLTMyNzY4KSB8fCAob3AgPCBiaXRzZXQubGVuZ3RoKSkgewogICAgICAgICAgICAgIHRocm93ICJVbmV4cGVjdGVkIGVuZCBvZiBtYXNrIFJMRSBlbmNvZGluZyI7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZGF0YS5tYXNrLmJpdHNldCA9IGJpdHNldDsKICAgICAgICAgICAgZnAgKz0gZGF0YS5tYXNrLm51bUJ5dGVzOwogICAgICAgICAgfQogICAgICAgICAgZWxzZSBpZiAoKGRhdGEubWFzay5udW1CeXRlcyB8IGRhdGEubWFzay5udW1CbG9ja3NZIHwgZGF0YS5tYXNrLm1heFZhbHVlKSA9PT0gMCkgeyAgLy8gU3BlY2lhbCBjYXNlLCBhbGwgbm9kYXRhCiAgICAgICAgICAgIGRhdGEubWFzay5iaXRzZXQgPSBuZXcgVWludDhBcnJheShNYXRoLmNlaWwoZGF0YS53aWR0aCAqIGRhdGEuaGVpZ2h0IC8gOCkpOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgLy8gUGl4ZWwgSGVhZGVyCiAgICAgICAgdmlldyA9IG5ldyBEYXRhVmlldyhpbnB1dCwgZnAsIDE2KTsKICAgICAgICBkYXRhLnBpeGVscyA9IHt9OwogICAgICAgIGRhdGEucGl4ZWxzLm51bUJsb2Nrc1kgPSB2aWV3LmdldFVpbnQzMigwLCB0cnVlKTsKICAgICAgICBkYXRhLnBpeGVscy5udW1CbG9ja3NYID0gdmlldy5nZXRVaW50MzIoNCwgdHJ1ZSk7CiAgICAgICAgZGF0YS5waXhlbHMubnVtQnl0ZXMgPSB2aWV3LmdldFVpbnQzMig4LCB0cnVlKTsKICAgICAgICBkYXRhLnBpeGVscy5tYXhWYWx1ZSA9IHZpZXcuZ2V0RmxvYXQzMigxMiwgdHJ1ZSk7CiAgICAgICAgZnAgKz0gMTY7CgogICAgICAgIHZhciBudW1CbG9ja3NYID0gZGF0YS5waXhlbHMubnVtQmxvY2tzWDsKICAgICAgICB2YXIgbnVtQmxvY2tzWSA9IGRhdGEucGl4ZWxzLm51bUJsb2Nrc1k7CiAgICAgICAgLy8gdGhlIG51bWJlciBvZiBibG9ja3Mgc3BlY2lmaWVkIGluIHRoZSBoZWFkZXIgZG9lcyBub3QgdGFrZSBpbnRvIGFjY291bnQgdGhlIGJsb2NrcyBhdCB0aGUgZW5kIG9mCiAgICAgICAgLy8gZWFjaCByb3cvY29sdW1uIHdpdGggYSBzcGVjaWFsIHdpZHRoL2hlaWdodCB0aGF0IG1ha2UgdGhlIGltYWdlIGNvbXBsZXRlIGluIGNhc2UgdGhlIHdpZHRoIGlzIG5vdAogICAgICAgIC8vIGV2ZW5seSBkaXZpc2libGUgYnkgdGhlIG51bWJlciBvZiBibG9ja3MuCiAgICAgICAgdmFyIGFjdHVhbE51bUJsb2Nrc1ggPSBudW1CbG9ja3NYICsgKChkYXRhLndpZHRoICUgbnVtQmxvY2tzWCkgPiAwID8gMSA6IDApOwogICAgICAgIHZhciBhY3R1YWxOdW1CbG9ja3NZID0gbnVtQmxvY2tzWSArICgoZGF0YS5oZWlnaHQgJSBudW1CbG9ja3NZKSA+IDAgPyAxIDogMCk7CiAgICAgICAgZGF0YS5waXhlbHMuYmxvY2tzID0gbmV3IEFycmF5KGFjdHVhbE51bUJsb2Nrc1ggKiBhY3R1YWxOdW1CbG9ja3NZKTsKICAgICAgICB2YXIgYmxvY2tJID0gMDsKICAgICAgICBmb3IgKHZhciBibG9ja1kgPSAwOyBibG9ja1kgPCBhY3R1YWxOdW1CbG9ja3NZOyBibG9ja1krKykgewogICAgICAgICAgZm9yICh2YXIgYmxvY2tYID0gMDsgYmxvY2tYIDwgYWN0dWFsTnVtQmxvY2tzWDsgYmxvY2tYKyspIHsKCiAgICAgICAgICAgIC8vIEJsb2NrCiAgICAgICAgICAgIHZhciBzaXplID0gMDsKICAgICAgICAgICAgdmFyIGJ5dGVzTGVmdCA9IGlucHV0LmJ5dGVMZW5ndGggLSBmcDsKICAgICAgICAgICAgdmlldyA9IG5ldyBEYXRhVmlldyhpbnB1dCwgZnAsIE1hdGgubWluKDEwLCBieXRlc0xlZnQpKTsKICAgICAgICAgICAgdmFyIGJsb2NrID0ge307CiAgICAgICAgICAgIGRhdGEucGl4ZWxzLmJsb2Nrc1tibG9ja0krK10gPSBibG9jazsKICAgICAgICAgICAgdmFyIGhlYWRlckJ5dGUgPSB2aWV3LmdldFVpbnQ4KDApOyBzaXplKys7CiAgICAgICAgICAgIGJsb2NrLmVuY29kaW5nID0gaGVhZGVyQnl0ZSAmIDYzOwogICAgICAgICAgICBpZiAoYmxvY2suZW5jb2RpbmcgPiAzKSB7CiAgICAgICAgICAgICAgdGhyb3cgIkludmFsaWQgYmxvY2sgZW5jb2RpbmcgKCIgKyBibG9jay5lbmNvZGluZyArICIpIjsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoYmxvY2suZW5jb2RpbmcgPT09IDIpIHsKICAgICAgICAgICAgICBmcCsrOwogICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICgoaGVhZGVyQnl0ZSAhPT0gMCkgJiYgKGhlYWRlckJ5dGUgIT09IDIpKSB7CiAgICAgICAgICAgICAgaGVhZGVyQnl0ZSA+Pj0gNjsKICAgICAgICAgICAgICBibG9jay5vZmZzZXRUeXBlID0gaGVhZGVyQnl0ZTsKICAgICAgICAgICAgICBpZiAoaGVhZGVyQnl0ZSA9PT0gMikgewogICAgICAgICAgICAgICAgYmxvY2sub2Zmc2V0ID0gdmlldy5nZXRJbnQ4KDEpOyBzaXplKys7CiAgICAgICAgICAgICAgfSBlbHNlIGlmIChoZWFkZXJCeXRlID09PSAxKSB7CiAgICAgICAgICAgICAgICBibG9jay5vZmZzZXQgPSB2aWV3LmdldEludDE2KDEsIHRydWUpOyBzaXplICs9IDI7CiAgICAgICAgICAgICAgfSBlbHNlIGlmIChoZWFkZXJCeXRlID09PSAwKSB7CiAgICAgICAgICAgICAgICBibG9jay5vZmZzZXQgPSB2aWV3LmdldEZsb2F0MzIoMSwgdHJ1ZSk7IHNpemUgKz0gNDsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdGhyb3cgIkludmFsaWQgYmxvY2sgb2Zmc2V0IHR5cGUiOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgaWYgKGJsb2NrLmVuY29kaW5nID09PSAxKSB7CiAgICAgICAgICAgICAgICBoZWFkZXJCeXRlID0gdmlldy5nZXRVaW50OChzaXplKTsgc2l6ZSsrOwogICAgICAgICAgICAgICAgYmxvY2suYml0c1BlclBpeGVsID0gaGVhZGVyQnl0ZSAmIDYzOwogICAgICAgICAgICAgICAgaGVhZGVyQnl0ZSA+Pj0gNjsKICAgICAgICAgICAgICAgIGJsb2NrLm51bVZhbGlkUGl4ZWxzVHlwZSA9IGhlYWRlckJ5dGU7CiAgICAgICAgICAgICAgICBpZiAoaGVhZGVyQnl0ZSA9PT0gMikgewogICAgICAgICAgICAgICAgICBibG9jay5udW1WYWxpZFBpeGVscyA9IHZpZXcuZ2V0VWludDgoc2l6ZSk7IHNpemUrKzsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaGVhZGVyQnl0ZSA9PT0gMSkgewogICAgICAgICAgICAgICAgICBibG9jay5udW1WYWxpZFBpeGVscyA9IHZpZXcuZ2V0VWludDE2KHNpemUsIHRydWUpOyBzaXplICs9IDI7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGhlYWRlckJ5dGUgPT09IDApIHsKICAgICAgICAgICAgICAgICAgYmxvY2subnVtVmFsaWRQaXhlbHMgPSB2aWV3LmdldFVpbnQzMihzaXplLCB0cnVlKTsgc2l6ZSArPSA0OwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgdGhyb3cgIkludmFsaWQgdmFsaWQgcGl4ZWwgY291bnQgdHlwZSI7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGZwICs9IHNpemU7CgogICAgICAgICAgICBpZiAoYmxvY2suZW5jb2RpbmcgPT09IDMpIHsKICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdmFyIGFycmF5QnVmLCBzdG9yZTg7CiAgICAgICAgICAgIGlmIChibG9jay5lbmNvZGluZyA9PT0gMCkgewogICAgICAgICAgICAgIHZhciBudW1QaXhlbHMgPSAoZGF0YS5waXhlbHMubnVtQnl0ZXMgLSAxKSAvIDQ7CiAgICAgICAgICAgICAgaWYgKG51bVBpeGVscyAhPT0gTWF0aC5mbG9vcihudW1QaXhlbHMpKSB7CiAgICAgICAgICAgICAgICB0aHJvdyAidW5jb21wcmVzc2VkIGJsb2NrIGhhcyBpbnZhbGlkIGxlbmd0aCI7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGFycmF5QnVmID0gbmV3IEFycmF5QnVmZmVyKG51bVBpeGVscyAqIDQpOwogICAgICAgICAgICAgIHN0b3JlOCA9IG5ldyBVaW50OEFycmF5KGFycmF5QnVmKTsKICAgICAgICAgICAgICBzdG9yZTguc2V0KG5ldyBVaW50OEFycmF5KGlucHV0LCBmcCwgbnVtUGl4ZWxzICogNCkpOwogICAgICAgICAgICAgIHZhciByYXdEYXRhID0gbmV3IEZsb2F0MzJBcnJheShhcnJheUJ1Zik7CiAgICAgICAgICAgICAgYmxvY2sucmF3RGF0YSA9IHJhd0RhdGE7CiAgICAgICAgICAgICAgZnAgKz0gbnVtUGl4ZWxzICogNDsKICAgICAgICAgICAgfSBlbHNlIGlmIChibG9jay5lbmNvZGluZyA9PT0gMSkgewogICAgICAgICAgICAgIHZhciBkYXRhQnl0ZXMgPSBNYXRoLmNlaWwoYmxvY2subnVtVmFsaWRQaXhlbHMgKiBibG9jay5iaXRzUGVyUGl4ZWwgLyA4KTsKICAgICAgICAgICAgICB2YXIgZGF0YVdvcmRzID0gTWF0aC5jZWlsKGRhdGFCeXRlcyAvIDQpOwogICAgICAgICAgICAgIGFycmF5QnVmID0gbmV3IEFycmF5QnVmZmVyKGRhdGFXb3JkcyAqIDQpOwogICAgICAgICAgICAgIHN0b3JlOCA9IG5ldyBVaW50OEFycmF5KGFycmF5QnVmKTsKICAgICAgICAgICAgICBzdG9yZTguc2V0KG5ldyBVaW50OEFycmF5KGlucHV0LCBmcCwgZGF0YUJ5dGVzKSk7CiAgICAgICAgICAgICAgYmxvY2suc3R1ZmZlZERhdGEgPSBuZXcgVWludDMyQXJyYXkoYXJyYXlCdWYpOwogICAgICAgICAgICAgIGZwICs9IGRhdGFCeXRlczsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBkYXRhLmVvZk9mZnNldCA9IGZwOwogICAgICAgIHJldHVybiBkYXRhOwogICAgICB9OwoKICAgICAgdmFyIHVuc3R1ZmYgPSBmdW5jdGlvbihzcmMsIGJpdHNQZXJQaXhlbCwgbnVtUGl4ZWxzLCBvZmZzZXQsIHNjYWxlLCBkZXN0LCBtYXhWYWx1ZSkgewogICAgICAgIHZhciBiaXRNYXNrID0gKDEgPDwgYml0c1BlclBpeGVsKSAtIDE7CiAgICAgICAgdmFyIGkgPSAwLCBvOwogICAgICAgIHZhciBiaXRzTGVmdCA9IDA7CiAgICAgICAgdmFyIG4sIGJ1ZmZlcjsKICAgICAgICB2YXIgbm1heCA9IE1hdGguY2VpbCgobWF4VmFsdWUgLSBvZmZzZXQpIC8gc2NhbGUpOwogICAgICAgIC8vIGdldCByaWQgb2YgdHJhaWxpbmcgYnl0ZXMgdGhhdCBhcmUgYWxyZWFkeSBwYXJ0IG9mIG5leHQgYmxvY2sKICAgICAgICB2YXIgbnVtSW52YWxpZFRhaWxCeXRlcyA9IHNyYy5sZW5ndGggKiA0IC0gTWF0aC5jZWlsKGJpdHNQZXJQaXhlbCAqIG51bVBpeGVscyAvIDgpOwogICAgICAgIHNyY1tzcmMubGVuZ3RoIC0gMV0gPDw9IDggKiBudW1JbnZhbGlkVGFpbEJ5dGVzOwoKICAgICAgICBmb3IgKG8gPSAwOyBvIDwgbnVtUGl4ZWxzOyBvKyspIHsKICAgICAgICAgIGlmIChiaXRzTGVmdCA9PT0gMCkgewogICAgICAgICAgICBidWZmZXIgPSBzcmNbaSsrXTsKICAgICAgICAgICAgYml0c0xlZnQgPSAzMjsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChiaXRzTGVmdCA+PSBiaXRzUGVyUGl4ZWwpIHsKICAgICAgICAgICAgbiA9IChidWZmZXIgPj4+IChiaXRzTGVmdCAtIGJpdHNQZXJQaXhlbCkpICYgYml0TWFzazsKICAgICAgICAgICAgYml0c0xlZnQgLT0gYml0c1BlclBpeGVsOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdmFyIG1pc3NpbmdCaXRzID0gKGJpdHNQZXJQaXhlbCAtIGJpdHNMZWZ0KTsKICAgICAgICAgICAgbiA9ICgoYnVmZmVyICYgYml0TWFzaykgPDwgbWlzc2luZ0JpdHMpICYgYml0TWFzazsKICAgICAgICAgICAgYnVmZmVyID0gc3JjW2krK107CiAgICAgICAgICAgIGJpdHNMZWZ0ID0gMzIgLSBtaXNzaW5nQml0czsKICAgICAgICAgICAgbiArPSAoYnVmZmVyID4+PiBiaXRzTGVmdCk7CiAgICAgICAgICB9CiAgICAgICAgICAvL3BpeGVsIHZhbHVlcyBtYXkgZXhjZWVkIG1heCBkdWUgdG8gcXVhbnRpemF0aW9uCiAgICAgICAgICBkZXN0W29dID0gbiA8IG5tYXggPyBvZmZzZXQgKyBuICogc2NhbGUgOiBtYXhWYWx1ZTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGRlc3Q7CiAgICAgIH07CgogICAgICByZXR1cm4gQ250WkltYWdlOwogICAgfSkoKTsKCiAgICAvL3ZlcnNpb24gMi4gU3VwcG9ydHMgMi4xLCAyLjIsIDIuMwogICAgdmFyIExlcmMyRGVjb2RlID0gKGZ1bmN0aW9uKCkgewogICAgICAvLyBOb3RlOiBjdXJyZW50bHksIHRoaXMgbW9kdWxlIG9ubHkgaGFzIGFuIGltcGxlbWVudGF0aW9uIGZvciBkZWNvZGluZyBMRVJDIGRhdGEsIG5vdCBlbmNvZGluZy4gVGhlIG5hbWUgb2YKICAgICAgLy8gdGhlIGNsYXNzIHdhcyBjaG9zZW4gdG8gYmUgZnV0dXJlIHByb29mLCBmb2xsb3dpbmcgTGVyY0RlY29kZS4KCiAgICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgogICAgICAqIHByaXZhdGUgc3RhdGljIGNsYXNzIGJpdHN1dGZmZXIgdXNlZCBieSBMZXJjMkRlY29kZQogICAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLwogICAgICB2YXIgQml0U3R1ZmZlciA9IHsKICAgICAgICAvL21ldGhvZHMgZW5kaW5nIHdpdGggMiBhcmUgZm9yIHRoZSBuZXcgYnl0ZSBvcmRlciB1c2VkIGJ5IExlcmMyLjMgYW5kIGFib3ZlLgogICAgICAgIC8vb3JpZ2luYWxVbnN0dWZmIGlzIHVzZWQgdG8gdW5wYWNrIEh1ZmZtYW4gY29kZSB0YWJsZS4gY29kZSBpcyBkdXBsaWNhdGVkIHRvIHVuc3R1ZmZ4IGZvciBwZXJmb3JtYW5jZSByZWFzb25zLgogICAgICAgIHVuc3R1ZmY6IGZ1bmN0aW9uKHNyYywgZGVzdCwgYml0c1BlclBpeGVsLCBudW1QaXhlbHMsIGx1dEFyciwgb2Zmc2V0LCBzY2FsZSwgbWF4VmFsdWUpIHsKICAgICAgICAgIHZhciBiaXRNYXNrID0gKDEgPDwgYml0c1BlclBpeGVsKSAtIDE7CiAgICAgICAgICB2YXIgaSA9IDAsIG87CiAgICAgICAgICB2YXIgYml0c0xlZnQgPSAwOwogICAgICAgICAgdmFyIG4sIGJ1ZmZlciwgbWlzc2luZ0JpdHMsIG5tYXg7CgogICAgICAgICAgLy8gZ2V0IHJpZCBvZiB0cmFpbGluZyBieXRlcyB0aGF0IGFyZSBhbHJlYWR5IHBhcnQgb2YgbmV4dCBibG9jawogICAgICAgICAgdmFyIG51bUludmFsaWRUYWlsQnl0ZXMgPSBzcmMubGVuZ3RoICogNCAtIE1hdGguY2VpbChiaXRzUGVyUGl4ZWwgKiBudW1QaXhlbHMgLyA4KTsKICAgICAgICAgIHNyY1tzcmMubGVuZ3RoIC0gMV0gPDw9IDggKiBudW1JbnZhbGlkVGFpbEJ5dGVzOwogICAgICAgICAgaWYgKGx1dEFycikgewogICAgICAgICAgICBmb3IgKG8gPSAwOyBvIDwgbnVtUGl4ZWxzOyBvKyspIHsKICAgICAgICAgICAgICBpZiAoYml0c0xlZnQgPT09IDApIHsKICAgICAgICAgICAgICAgIGJ1ZmZlciA9IHNyY1tpKytdOwogICAgICAgICAgICAgICAgYml0c0xlZnQgPSAzMjsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYgKGJpdHNMZWZ0ID49IGJpdHNQZXJQaXhlbCkgewogICAgICAgICAgICAgICAgbiA9IChidWZmZXIgPj4+IChiaXRzTGVmdCAtIGJpdHNQZXJQaXhlbCkpICYgYml0TWFzazsKICAgICAgICAgICAgICAgIGJpdHNMZWZ0IC09IGJpdHNQZXJQaXhlbDsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICBtaXNzaW5nQml0cyA9IChiaXRzUGVyUGl4ZWwgLSBiaXRzTGVmdCk7CiAgICAgICAgICAgICAgICBuID0gKChidWZmZXIgJiBiaXRNYXNrKSA8PCBtaXNzaW5nQml0cykgJiBiaXRNYXNrOwogICAgICAgICAgICAgICAgYnVmZmVyID0gc3JjW2krK107CiAgICAgICAgICAgICAgICBiaXRzTGVmdCA9IDMyIC0gbWlzc2luZ0JpdHM7CiAgICAgICAgICAgICAgICBuICs9IChidWZmZXIgPj4+IGJpdHNMZWZ0KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgZGVzdFtvXSA9IGx1dEFycltuXTsvL29mZnNldCArIGx1dEFycltuXSAqIHNjYWxlOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgbm1heCA9IE1hdGguY2VpbCgobWF4VmFsdWUgLSBvZmZzZXQpIC8gc2NhbGUpOwogICAgICAgICAgICBmb3IgKG8gPSAwOyBvIDwgbnVtUGl4ZWxzOyBvKyspIHsKICAgICAgICAgICAgICBpZiAoYml0c0xlZnQgPT09IDApIHsKICAgICAgICAgICAgICAgIGJ1ZmZlciA9IHNyY1tpKytdOwogICAgICAgICAgICAgICAgYml0c0xlZnQgPSAzMjsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYgKGJpdHNMZWZ0ID49IGJpdHNQZXJQaXhlbCkgewogICAgICAgICAgICAgICAgbiA9IChidWZmZXIgPj4+IChiaXRzTGVmdCAtIGJpdHNQZXJQaXhlbCkpICYgYml0TWFzazsKICAgICAgICAgICAgICAgIGJpdHNMZWZ0IC09IGJpdHNQZXJQaXhlbDsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICBtaXNzaW5nQml0cyA9IChiaXRzUGVyUGl4ZWwgLSBiaXRzTGVmdCk7CiAgICAgICAgICAgICAgICBuID0gKChidWZmZXIgJiBiaXRNYXNrKSA8PCBtaXNzaW5nQml0cykgJiBiaXRNYXNrOwogICAgICAgICAgICAgICAgYnVmZmVyID0gc3JjW2krK107CiAgICAgICAgICAgICAgICBiaXRzTGVmdCA9IDMyIC0gbWlzc2luZ0JpdHM7CiAgICAgICAgICAgICAgICBuICs9IChidWZmZXIgPj4+IGJpdHNMZWZ0KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgLy9waXhlbCB2YWx1ZXMgbWF5IGV4Y2VlZCBtYXggZHVlIHRvIHF1YW50aXphdGlvbgogICAgICAgICAgICAgIGRlc3Rbb10gPSBuIDwgbm1heCA/IG9mZnNldCArIG4gKiBzY2FsZSA6IG1heFZhbHVlOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwKCiAgICAgICAgdW5zdHVmZkxVVDogZnVuY3Rpb24oc3JjLCBiaXRzUGVyUGl4ZWwsIG51bVBpeGVscywgb2Zmc2V0LCBzY2FsZSwgbWF4VmFsdWUpIHsKICAgICAgICAgIHZhciBiaXRNYXNrID0gKDEgPDwgYml0c1BlclBpeGVsKSAtIDE7CiAgICAgICAgICB2YXIgaSA9IDAsIG8gPSAwLCBtaXNzaW5nQml0cyA9IDAsIGJpdHNMZWZ0ID0gMCwgbiA9IDA7CiAgICAgICAgICB2YXIgYnVmZmVyOwogICAgICAgICAgdmFyIGRlc3QgPSBbXTsKCiAgICAgICAgICAvLyBnZXQgcmlkIG9mIHRyYWlsaW5nIGJ5dGVzIHRoYXQgYXJlIGFscmVhZHkgcGFydCBvZiBuZXh0IGJsb2NrCiAgICAgICAgICB2YXIgbnVtSW52YWxpZFRhaWxCeXRlcyA9IHNyYy5sZW5ndGggKiA0IC0gTWF0aC5jZWlsKGJpdHNQZXJQaXhlbCAqIG51bVBpeGVscyAvIDgpOwogICAgICAgICAgc3JjW3NyYy5sZW5ndGggLSAxXSA8PD0gOCAqIG51bUludmFsaWRUYWlsQnl0ZXM7CgogICAgICAgICAgdmFyIG5tYXggPSBNYXRoLmNlaWwoKG1heFZhbHVlIC0gb2Zmc2V0KSAvIHNjYWxlKTsKICAgICAgICAgIGZvciAobyA9IDA7IG8gPCBudW1QaXhlbHM7IG8rKykgewogICAgICAgICAgICBpZiAoYml0c0xlZnQgPT09IDApIHsKICAgICAgICAgICAgICBidWZmZXIgPSBzcmNbaSsrXTsKICAgICAgICAgICAgICBiaXRzTGVmdCA9IDMyOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChiaXRzTGVmdCA+PSBiaXRzUGVyUGl4ZWwpIHsKICAgICAgICAgICAgICBuID0gKGJ1ZmZlciA+Pj4gKGJpdHNMZWZ0IC0gYml0c1BlclBpeGVsKSkgJiBiaXRNYXNrOwogICAgICAgICAgICAgIGJpdHNMZWZ0IC09IGJpdHNQZXJQaXhlbDsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBtaXNzaW5nQml0cyA9IChiaXRzUGVyUGl4ZWwgLSBiaXRzTGVmdCk7CiAgICAgICAgICAgICAgbiA9ICgoYnVmZmVyICYgYml0TWFzaykgPDwgbWlzc2luZ0JpdHMpICYgYml0TWFzazsKICAgICAgICAgICAgICBidWZmZXIgPSBzcmNbaSsrXTsKICAgICAgICAgICAgICBiaXRzTGVmdCA9IDMyIC0gbWlzc2luZ0JpdHM7CiAgICAgICAgICAgICAgbiArPSAoYnVmZmVyID4+PiBiaXRzTGVmdCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy9kZXN0LnB1c2gobik7CiAgICAgICAgICAgIGRlc3Rbb10gPSBuIDwgbm1heCA/IG9mZnNldCArIG4gKiBzY2FsZSA6IG1heFZhbHVlOwogICAgICAgICAgfQogICAgICAgICAgZGVzdC51bnNoaWZ0KG9mZnNldCk7Ly8xc3Qgb25lCiAgICAgICAgICByZXR1cm4gZGVzdDsKICAgICAgICB9LAoKICAgICAgICB1bnN0dWZmMjogZnVuY3Rpb24oc3JjLCBkZXN0LCBiaXRzUGVyUGl4ZWwsIG51bVBpeGVscywgbHV0QXJyLCBvZmZzZXQsIHNjYWxlLCBtYXhWYWx1ZSkgewogICAgICAgICAgdmFyIGJpdE1hc2sgPSAoMSA8PCBiaXRzUGVyUGl4ZWwpIC0gMTsKICAgICAgICAgIHZhciBpID0gMCwgbzsKICAgICAgICAgIHZhciBiaXRzTGVmdCA9IDAsIGJpdFBvcyA9IDA7CiAgICAgICAgICB2YXIgbiwgYnVmZmVyLCBtaXNzaW5nQml0czsKICAgICAgICAgIGlmIChsdXRBcnIpIHsKICAgICAgICAgICAgZm9yIChvID0gMDsgbyA8IG51bVBpeGVsczsgbysrKSB7CiAgICAgICAgICAgICAgaWYgKGJpdHNMZWZ0ID09PSAwKSB7CiAgICAgICAgICAgICAgICBidWZmZXIgPSBzcmNbaSsrXTsKICAgICAgICAgICAgICAgIGJpdHNMZWZ0ID0gMzI7CiAgICAgICAgICAgICAgICBiaXRQb3MgPSAwOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAoYml0c0xlZnQgPj0gYml0c1BlclBpeGVsKSB7CiAgICAgICAgICAgICAgICBuID0gKChidWZmZXIgPj4+IGJpdFBvcykgJiBiaXRNYXNrKTsKICAgICAgICAgICAgICAgIGJpdHNMZWZ0IC09IGJpdHNQZXJQaXhlbDsKICAgICAgICAgICAgICAgIGJpdFBvcyArPSBiaXRzUGVyUGl4ZWw7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIG1pc3NpbmdCaXRzID0gKGJpdHNQZXJQaXhlbCAtIGJpdHNMZWZ0KTsKICAgICAgICAgICAgICAgIG4gPSAoYnVmZmVyID4+PiBiaXRQb3MpICYgYml0TWFzazsKICAgICAgICAgICAgICAgIGJ1ZmZlciA9IHNyY1tpKytdOwogICAgICAgICAgICAgICAgYml0c0xlZnQgPSAzMiAtIG1pc3NpbmdCaXRzOwogICAgICAgICAgICAgICAgbiB8PSAoYnVmZmVyICYgKCgxIDw8IG1pc3NpbmdCaXRzKSAtIDEpKSA8PCAoYml0c1BlclBpeGVsIC0gbWlzc2luZ0JpdHMpOwogICAgICAgICAgICAgICAgYml0UG9zID0gbWlzc2luZ0JpdHM7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGRlc3Rbb10gPSBsdXRBcnJbbl07CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGVsc2UgewogICAgICAgICAgICB2YXIgbm1heCA9IE1hdGguY2VpbCgobWF4VmFsdWUgLSBvZmZzZXQpIC8gc2NhbGUpOwogICAgICAgICAgICBmb3IgKG8gPSAwOyBvIDwgbnVtUGl4ZWxzOyBvKyspIHsKICAgICAgICAgICAgICBpZiAoYml0c0xlZnQgPT09IDApIHsKICAgICAgICAgICAgICAgIGJ1ZmZlciA9IHNyY1tpKytdOwogICAgICAgICAgICAgICAgYml0c0xlZnQgPSAzMjsKICAgICAgICAgICAgICAgIGJpdFBvcyA9IDA7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmIChiaXRzTGVmdCA+PSBiaXRzUGVyUGl4ZWwpIHsKICAgICAgICAgICAgICAgIC8vbm8gdW5zaWduZWQgbGVmdCBzaGlmdAogICAgICAgICAgICAgICAgbiA9ICgoYnVmZmVyID4+PiBiaXRQb3MpICYgYml0TWFzayk7CiAgICAgICAgICAgICAgICBiaXRzTGVmdCAtPSBiaXRzUGVyUGl4ZWw7CiAgICAgICAgICAgICAgICBiaXRQb3MgKz0gYml0c1BlclBpeGVsOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBtaXNzaW5nQml0cyA9IChiaXRzUGVyUGl4ZWwgLSBiaXRzTGVmdCk7CiAgICAgICAgICAgICAgICBuID0gKGJ1ZmZlciA+Pj4gYml0UG9zKSAmIGJpdE1hc2s7Ly8oKGJ1ZmZlciAmIGJpdE1hc2spIDw8IG1pc3NpbmdCaXRzKSAmIGJpdE1hc2s7CiAgICAgICAgICAgICAgICBidWZmZXIgPSBzcmNbaSsrXTsKICAgICAgICAgICAgICAgIGJpdHNMZWZ0ID0gMzIgLSBtaXNzaW5nQml0czsKICAgICAgICAgICAgICAgIG4gfD0gKGJ1ZmZlciAmICgoMSA8PCBtaXNzaW5nQml0cykgLSAxKSkgPDwgKGJpdHNQZXJQaXhlbCAtIG1pc3NpbmdCaXRzKTsKICAgICAgICAgICAgICAgIGJpdFBvcyA9IG1pc3NpbmdCaXRzOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAvL3BpeGVsIHZhbHVlcyBtYXkgZXhjZWVkIG1heCBkdWUgdG8gcXVhbnRpemF0aW9uCiAgICAgICAgICAgICAgZGVzdFtvXSA9IG4gPCBubWF4ID8gb2Zmc2V0ICsgbiAqIHNjYWxlIDogbWF4VmFsdWU7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBkZXN0OwogICAgICAgIH0sCgogICAgICAgIHVuc3R1ZmZMVVQyOiBmdW5jdGlvbihzcmMsIGJpdHNQZXJQaXhlbCwgbnVtUGl4ZWxzLCBvZmZzZXQsIHNjYWxlLCBtYXhWYWx1ZSkgewogICAgICAgICAgdmFyIGJpdE1hc2sgPSAoMSA8PCBiaXRzUGVyUGl4ZWwpIC0gMTsKICAgICAgICAgIHZhciBpID0gMCwgbyA9IDAsIG1pc3NpbmdCaXRzID0gMCwgYml0c0xlZnQgPSAwLCBuID0gMCwgYml0UG9zID0gMDsKICAgICAgICAgIHZhciBidWZmZXI7CiAgICAgICAgICB2YXIgZGVzdCA9IFtdOwogICAgICAgICAgdmFyIG5tYXggPSBNYXRoLmNlaWwoKG1heFZhbHVlIC0gb2Zmc2V0KSAvIHNjYWxlKTsKICAgICAgICAgIGZvciAobyA9IDA7IG8gPCBudW1QaXhlbHM7IG8rKykgewogICAgICAgICAgICBpZiAoYml0c0xlZnQgPT09IDApIHsKICAgICAgICAgICAgICBidWZmZXIgPSBzcmNbaSsrXTsKICAgICAgICAgICAgICBiaXRzTGVmdCA9IDMyOwogICAgICAgICAgICAgIGJpdFBvcyA9IDA7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGJpdHNMZWZ0ID49IGJpdHNQZXJQaXhlbCkgewogICAgICAgICAgICAgIC8vbm8gdW5zaWduZWQgbGVmdCBzaGlmdAogICAgICAgICAgICAgIG4gPSAoKGJ1ZmZlciA+Pj4gYml0UG9zKSAmIGJpdE1hc2spOwogICAgICAgICAgICAgIGJpdHNMZWZ0IC09IGJpdHNQZXJQaXhlbDsKICAgICAgICAgICAgICBiaXRQb3MgKz0gYml0c1BlclBpeGVsOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIG1pc3NpbmdCaXRzID0gKGJpdHNQZXJQaXhlbCAtIGJpdHNMZWZ0KTsKICAgICAgICAgICAgICBuID0gKGJ1ZmZlciA+Pj4gYml0UG9zKSAmIGJpdE1hc2s7Ly8oKGJ1ZmZlciAmIGJpdE1hc2spIDw8IG1pc3NpbmdCaXRzKSAmIGJpdE1hc2s7CiAgICAgICAgICAgICAgYnVmZmVyID0gc3JjW2krK107CiAgICAgICAgICAgICAgYml0c0xlZnQgPSAzMiAtIG1pc3NpbmdCaXRzOwogICAgICAgICAgICAgIG4gfD0gKGJ1ZmZlciAmICgoMSA8PCBtaXNzaW5nQml0cykgLSAxKSkgPDwgKGJpdHNQZXJQaXhlbCAtIG1pc3NpbmdCaXRzKTsKICAgICAgICAgICAgICBiaXRQb3MgPSBtaXNzaW5nQml0czsKICAgICAgICAgICAgfQogICAgICAgICAgICAvL2Rlc3QucHVzaChuKTsKICAgICAgICAgICAgZGVzdFtvXSA9IG4gPCBubWF4ID8gb2Zmc2V0ICsgbiAqIHNjYWxlIDogbWF4VmFsdWU7CiAgICAgICAgICB9CiAgICAgICAgICBkZXN0LnVuc2hpZnQob2Zmc2V0KTsKICAgICAgICAgIHJldHVybiBkZXN0OwogICAgICAgIH0sCgogICAgICAgIG9yaWdpbmFsVW5zdHVmZjogZnVuY3Rpb24oc3JjLCBkZXN0LCBiaXRzUGVyUGl4ZWwsIG51bVBpeGVscykgewogICAgICAgICAgdmFyIGJpdE1hc2sgPSAoMSA8PCBiaXRzUGVyUGl4ZWwpIC0gMTsKICAgICAgICAgIHZhciBpID0gMCwgbzsKICAgICAgICAgIHZhciBiaXRzTGVmdCA9IDA7CiAgICAgICAgICB2YXIgbiwgYnVmZmVyLCBtaXNzaW5nQml0czsKCiAgICAgICAgICAvLyBnZXQgcmlkIG9mIHRyYWlsaW5nIGJ5dGVzIHRoYXQgYXJlIGFscmVhZHkgcGFydCBvZiBuZXh0IGJsb2NrCiAgICAgICAgICB2YXIgbnVtSW52YWxpZFRhaWxCeXRlcyA9IHNyYy5sZW5ndGggKiA0IC0gTWF0aC5jZWlsKGJpdHNQZXJQaXhlbCAqIG51bVBpeGVscyAvIDgpOwogICAgICAgICAgc3JjW3NyYy5sZW5ndGggLSAxXSA8PD0gOCAqIG51bUludmFsaWRUYWlsQnl0ZXM7CgogICAgICAgICAgZm9yIChvID0gMDsgbyA8IG51bVBpeGVsczsgbysrKSB7CiAgICAgICAgICAgIGlmIChiaXRzTGVmdCA9PT0gMCkgewogICAgICAgICAgICAgIGJ1ZmZlciA9IHNyY1tpKytdOwogICAgICAgICAgICAgIGJpdHNMZWZ0ID0gMzI7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGJpdHNMZWZ0ID49IGJpdHNQZXJQaXhlbCkgewogICAgICAgICAgICAgIG4gPSAoYnVmZmVyID4+PiAoYml0c0xlZnQgLSBiaXRzUGVyUGl4ZWwpKSAmIGJpdE1hc2s7CiAgICAgICAgICAgICAgYml0c0xlZnQgLT0gYml0c1BlclBpeGVsOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgIG1pc3NpbmdCaXRzID0gKGJpdHNQZXJQaXhlbCAtIGJpdHNMZWZ0KTsKICAgICAgICAgICAgICBuID0gKChidWZmZXIgJiBiaXRNYXNrKSA8PCBtaXNzaW5nQml0cykgJiBiaXRNYXNrOwogICAgICAgICAgICAgIGJ1ZmZlciA9IHNyY1tpKytdOwogICAgICAgICAgICAgIGJpdHNMZWZ0ID0gMzIgLSBtaXNzaW5nQml0czsKICAgICAgICAgICAgICBuICs9IChidWZmZXIgPj4+IGJpdHNMZWZ0KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBkZXN0W29dID0gbjsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBkZXN0OwogICAgICAgIH0sCgogICAgICAgIG9yaWdpbmFsVW5zdHVmZjI6IGZ1bmN0aW9uKHNyYywgZGVzdCwgYml0c1BlclBpeGVsLCBudW1QaXhlbHMpIHsKICAgICAgICAgIHZhciBiaXRNYXNrID0gKDEgPDwgYml0c1BlclBpeGVsKSAtIDE7CiAgICAgICAgICB2YXIgaSA9IDAsIG87CiAgICAgICAgICB2YXIgYml0c0xlZnQgPSAwLCBiaXRQb3MgPSAwOwogICAgICAgICAgdmFyIG4sIGJ1ZmZlciwgbWlzc2luZ0JpdHM7CiAgICAgICAgICAvL21pY3JvLW9wdGltaXphdGlvbnMKICAgICAgICAgIGZvciAobyA9IDA7IG8gPCBudW1QaXhlbHM7IG8rKykgewogICAgICAgICAgICBpZiAoYml0c0xlZnQgPT09IDApIHsKICAgICAgICAgICAgICBidWZmZXIgPSBzcmNbaSsrXTsKICAgICAgICAgICAgICBiaXRzTGVmdCA9IDMyOwogICAgICAgICAgICAgIGJpdFBvcyA9IDA7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGJpdHNMZWZ0ID49IGJpdHNQZXJQaXhlbCkgewogICAgICAgICAgICAgIC8vbm8gdW5zaWduZWQgbGVmdCBzaGlmdAogICAgICAgICAgICAgIG4gPSAoKGJ1ZmZlciA+Pj4gYml0UG9zKSAmIGJpdE1hc2spOwogICAgICAgICAgICAgIGJpdHNMZWZ0IC09IGJpdHNQZXJQaXhlbDsKICAgICAgICAgICAgICBiaXRQb3MgKz0gYml0c1BlclBpeGVsOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIG1pc3NpbmdCaXRzID0gKGJpdHNQZXJQaXhlbCAtIGJpdHNMZWZ0KTsKICAgICAgICAgICAgICBuID0gKGJ1ZmZlciA+Pj4gYml0UG9zKSAmIGJpdE1hc2s7Ly8oKGJ1ZmZlciAmIGJpdE1hc2spIDw8IG1pc3NpbmdCaXRzKSAmIGJpdE1hc2s7CiAgICAgICAgICAgICAgYnVmZmVyID0gc3JjW2krK107CiAgICAgICAgICAgICAgYml0c0xlZnQgPSAzMiAtIG1pc3NpbmdCaXRzOwogICAgICAgICAgICAgIG4gfD0gKGJ1ZmZlciAmICgoMSA8PCBtaXNzaW5nQml0cykgLSAxKSkgPDwgKGJpdHNQZXJQaXhlbCAtIG1pc3NpbmdCaXRzKTsKICAgICAgICAgICAgICBiaXRQb3MgPSBtaXNzaW5nQml0czsKICAgICAgICAgICAgfQogICAgICAgICAgICBkZXN0W29dID0gbjsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBkZXN0OwogICAgICAgIH0KICAgICAgfTsKCiAgICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgogICAgICAqcHJpdmF0ZSBzdGF0aWMgY2xhc3MgdXNlZCBieSBMZXJjMkRlY29kZQogICAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCiAgICAgIHZhciBMZXJjMkhlbHBlcnMgPSB7CiAgICAgICAgSFVGRk1BTl9MVVRfQklUU19NQVg6IDEyLCAvL3VzZSAyXjEyIGx1dCwgdHJlYXQgaXQgbGlrZSBjb25zdGFudAogICAgICAgIGNvbXB1dGVDaGVja3N1bUZsZXRjaGVyMzI6IGZ1bmN0aW9uKGlucHV0KSB7CgogICAgICAgICAgdmFyIHN1bTEgPSAweGZmZmYsIHN1bTIgPSAweGZmZmY7CiAgICAgICAgICB2YXIgbGVuID0gaW5wdXQubGVuZ3RoOwogICAgICAgICAgdmFyIHdvcmRzID0gTWF0aC5mbG9vcihsZW4gLyAyKTsKICAgICAgICAgIHZhciBpID0gMDsKICAgICAgICAgIHdoaWxlICh3b3JkcykgewogICAgICAgICAgICB2YXIgdGxlbiA9ICh3b3JkcyA+PSAzNTkpID8gMzU5IDogd29yZHM7CiAgICAgICAgICAgIHdvcmRzIC09IHRsZW47CiAgICAgICAgICAgIGRvIHsKICAgICAgICAgICAgICBzdW0xICs9IChpbnB1dFtpKytdIDw8IDgpOwogICAgICAgICAgICAgIHN1bTIgKz0gc3VtMSArPSBpbnB1dFtpKytdOwogICAgICAgICAgICB9IHdoaWxlICgtLXRsZW4pOwoKICAgICAgICAgICAgc3VtMSA9IChzdW0xICYgMHhmZmZmKSArIChzdW0xID4+PiAxNik7CiAgICAgICAgICAgIHN1bTIgPSAoc3VtMiAmIDB4ZmZmZikgKyAoc3VtMiA+Pj4gMTYpOwogICAgICAgICAgfQoKICAgICAgICAgIC8vIGFkZCB0aGUgc3RyYWdnbGVyIGJ5dGUgaWYgaXQgZXhpc3RzCiAgICAgICAgICBpZiAobGVuICYgMSkgewogICAgICAgICAgICBzdW0yICs9IHN1bTEgKz0gKGlucHV0W2ldIDw8IDgpOwogICAgICAgICAgfQogICAgICAgICAgLy8gc2Vjb25kIHJlZHVjdGlvbiBzdGVwIHRvIHJlZHVjZSBzdW1zIHRvIDE2IGJpdHMKICAgICAgICAgIHN1bTEgPSAoc3VtMSAmIDB4ZmZmZikgKyAoc3VtMSA+Pj4gMTYpOwogICAgICAgICAgc3VtMiA9IChzdW0yICYgMHhmZmZmKSArIChzdW0yID4+PiAxNik7CgogICAgICAgICAgcmV0dXJuIChzdW0yIDw8IDE2IHwgc3VtMSkgPj4+IDA7CiAgICAgICAgfSwKCiAgICAgICAgcmVhZEhlYWRlckluZm86IGZ1bmN0aW9uKGlucHV0LCBkYXRhKSB7CiAgICAgICAgICB2YXIgcHRyID0gZGF0YS5wdHI7CiAgICAgICAgICB2YXIgZmlsZUlkVmlldyA9IG5ldyBVaW50OEFycmF5KGlucHV0LCBwdHIsIDYpOwogICAgICAgICAgdmFyIGhlYWRlckluZm8gPSB7fTsKICAgICAgICAgIGhlYWRlckluZm8uZmlsZUlkZW50aWZpZXJTdHJpbmcgPSBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsIGZpbGVJZFZpZXcpOwogICAgICAgICAgaWYgKGhlYWRlckluZm8uZmlsZUlkZW50aWZpZXJTdHJpbmcubGFzdEluZGV4T2YoIkxlcmMyIiwgMCkgIT09IDApIHsKICAgICAgICAgICAgdGhyb3cgIlVuZXhwZWN0ZWQgZmlsZSBpZGVudGlmaWVyIHN0cmluZyAoZXhwZWN0IExlcmMyICk6ICIgKyBoZWFkZXJJbmZvLmZpbGVJZGVudGlmaWVyU3RyaW5nOwogICAgICAgICAgfQogICAgICAgICAgcHRyICs9IDY7CiAgICAgICAgICB2YXIgdmlldyA9IG5ldyBEYXRhVmlldyhpbnB1dCwgcHRyLCA4KTsKICAgICAgICAgIHZhciBmaWxlVmVyc2lvbiA9IHZpZXcuZ2V0SW50MzIoMCwgdHJ1ZSk7CiAgICAgICAgICBoZWFkZXJJbmZvLmZpbGVWZXJzaW9uID0gZmlsZVZlcnNpb247CiAgICAgICAgICBwdHIgKz0gNDsKICAgICAgICAgIGlmIChmaWxlVmVyc2lvbiA+PSAzKSB7CiAgICAgICAgICAgIGhlYWRlckluZm8uY2hlY2tzdW0gPSB2aWV3LmdldFVpbnQzMig0LCB0cnVlKTsgLy9ucm93cwogICAgICAgICAgICBwdHIgKz0gNDsKICAgICAgICAgIH0KCiAgICAgICAgICAvL2tleXMgc3RhcnQgZnJvbSBoZXJlCiAgICAgICAgICB2aWV3ID0gbmV3IERhdGFWaWV3KGlucHV0LCBwdHIsIDEyKTsKICAgICAgICAgIGhlYWRlckluZm8uaGVpZ2h0ID0gdmlldy5nZXRVaW50MzIoMCwgdHJ1ZSk7IC8vbnJvd3MKICAgICAgICAgIGhlYWRlckluZm8ud2lkdGggPSB2aWV3LmdldFVpbnQzMig0LCB0cnVlKTsgLy9uY29scwogICAgICAgICAgcHRyICs9IDg7CiAgICAgICAgICBpZiAoZmlsZVZlcnNpb24gPj0gNCkgewogICAgICAgICAgICBoZWFkZXJJbmZvLm51bURpbXMgPSB2aWV3LmdldFVpbnQzMig4LCB0cnVlKTsKICAgICAgICAgICAgcHRyICs9IDQ7CiAgICAgICAgICB9CiAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgaGVhZGVySW5mby5udW1EaW1zID0gMTsKICAgICAgICAgIH0KCiAgICAgICAgICB2aWV3ID0gbmV3IERhdGFWaWV3KGlucHV0LCBwdHIsIDQwKTsKICAgICAgICAgIGhlYWRlckluZm8ubnVtVmFsaWRQaXhlbCA9IHZpZXcuZ2V0VWludDMyKDAsIHRydWUpOwogICAgICAgICAgaGVhZGVySW5mby5taWNyb0Jsb2NrU2l6ZSA9IHZpZXcuZ2V0SW50MzIoNCwgdHJ1ZSk7CiAgICAgICAgICBoZWFkZXJJbmZvLmJsb2JTaXplID0gdmlldy5nZXRJbnQzMig4LCB0cnVlKTsKICAgICAgICAgIGhlYWRlckluZm8uaW1hZ2VUeXBlID0gdmlldy5nZXRJbnQzMigxMiwgdHJ1ZSk7CgogICAgICAgICAgaGVhZGVySW5mby5tYXhaRXJyb3IgPSB2aWV3LmdldEZsb2F0NjQoMTYsIHRydWUpOwogICAgICAgICAgaGVhZGVySW5mby56TWluID0gdmlldy5nZXRGbG9hdDY0KDI0LCB0cnVlKTsKICAgICAgICAgIGhlYWRlckluZm8uek1heCA9IHZpZXcuZ2V0RmxvYXQ2NCgzMiwgdHJ1ZSk7CiAgICAgICAgICBwdHIgKz0gNDA7CiAgICAgICAgICBkYXRhLmhlYWRlckluZm8gPSBoZWFkZXJJbmZvOwogICAgICAgICAgZGF0YS5wdHIgPSBwdHI7CgogICAgICAgICAgdmFyIGNoZWNrc3VtLCBrZXlMZW5ndGg7CiAgICAgICAgICBpZiAoZmlsZVZlcnNpb24gPj0gMykgewogICAgICAgICAgICBrZXlMZW5ndGggPSBmaWxlVmVyc2lvbiA+PSA0ID8gNTIgOiA0ODsKICAgICAgICAgICAgY2hlY2tzdW0gPSB0aGlzLmNvbXB1dGVDaGVja3N1bUZsZXRjaGVyMzIobmV3IFVpbnQ4QXJyYXkoaW5wdXQsIHB0ciAtIGtleUxlbmd0aCwgaGVhZGVySW5mby5ibG9iU2l6ZSAtIDE0KSk7CiAgICAgICAgICAgIGlmIChjaGVja3N1bSAhPT0gaGVhZGVySW5mby5jaGVja3N1bSkgewogICAgICAgICAgICAgIHRocm93ICJDaGVja3N1bSBmYWlsZWQuIjsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfSwKCiAgICAgICAgY2hlY2tNaW5NYXhSYW5nZXM6IGZ1bmN0aW9uKGlucHV0LCBkYXRhKSB7CiAgICAgICAgICB2YXIgaGVhZGVySW5mbyA9IGRhdGEuaGVhZGVySW5mbzsKICAgICAgICAgIHZhciBPdXRQaXhlbFR5cGVBcnJheSA9IHRoaXMuZ2V0RGF0YVR5cGVBcnJheShoZWFkZXJJbmZvLmltYWdlVHlwZSk7CiAgICAgICAgICB2YXIgcmFuZ2VCeXRlcyA9IGhlYWRlckluZm8ubnVtRGltcyAqIHRoaXMuZ2V0RGF0YVR5cGVTaXplKGhlYWRlckluZm8uaW1hZ2VUeXBlKTsKICAgICAgICAgIHZhciBtaW5WYWx1ZXMgPSB0aGlzLnJlYWRTdWJBcnJheShpbnB1dCwgZGF0YS5wdHIsIE91dFBpeGVsVHlwZUFycmF5LCByYW5nZUJ5dGVzKTsKICAgICAgICAgIHZhciBtYXhWYWx1ZXMgPSB0aGlzLnJlYWRTdWJBcnJheShpbnB1dCwgZGF0YS5wdHIgKyByYW5nZUJ5dGVzLCBPdXRQaXhlbFR5cGVBcnJheSwgcmFuZ2VCeXRlcyk7CiAgICAgICAgICBkYXRhLnB0ciArPSAoMiAqIHJhbmdlQnl0ZXMpOwogICAgICAgICAgdmFyIGksIGVxdWFsID0gdHJ1ZTsKICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBoZWFkZXJJbmZvLm51bURpbXM7IGkrKykgewogICAgICAgICAgICBpZiAobWluVmFsdWVzW2ldICE9PSBtYXhWYWx1ZXNbaV0pIHsKICAgICAgICAgICAgICBlcXVhbCA9IGZhbHNlOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBoZWFkZXJJbmZvLm1pblZhbHVlcyA9IG1pblZhbHVlczsKICAgICAgICAgIGhlYWRlckluZm8ubWF4VmFsdWVzID0gbWF4VmFsdWVzOwogICAgICAgICAgcmV0dXJuIGVxdWFsOwogICAgICAgIH0sCgogICAgICAgIHJlYWRTdWJBcnJheTogZnVuY3Rpb24oaW5wdXQsIHB0ciwgT3V0UGl4ZWxUeXBlQXJyYXksIG51bUJ5dGVzKSB7CiAgICAgICAgICB2YXIgcmF3RGF0YTsKICAgICAgICAgIGlmIChPdXRQaXhlbFR5cGVBcnJheSA9PT0gVWludDhBcnJheSkgewogICAgICAgICAgICByYXdEYXRhID0gbmV3IFVpbnQ4QXJyYXkoaW5wdXQsIHB0ciwgbnVtQnl0ZXMpOwogICAgICAgICAgfQogICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIHZhciBhcnJheUJ1ZiA9IG5ldyBBcnJheUJ1ZmZlcihudW1CeXRlcyk7CiAgICAgICAgICAgIHZhciBzdG9yZTggPSBuZXcgVWludDhBcnJheShhcnJheUJ1Zik7CiAgICAgICAgICAgIHN0b3JlOC5zZXQobmV3IFVpbnQ4QXJyYXkoaW5wdXQsIHB0ciwgbnVtQnl0ZXMpKTsKICAgICAgICAgICAgcmF3RGF0YSA9IG5ldyBPdXRQaXhlbFR5cGVBcnJheShhcnJheUJ1Zik7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gcmF3RGF0YTsKICAgICAgICB9LAoKICAgICAgICByZWFkTWFzazogZnVuY3Rpb24oaW5wdXQsIGRhdGEpIHsKICAgICAgICAgIHZhciBwdHIgPSBkYXRhLnB0cjsKICAgICAgICAgIHZhciBoZWFkZXJJbmZvID0gZGF0YS5oZWFkZXJJbmZvOwogICAgICAgICAgdmFyIG51bVBpeGVscyA9IGhlYWRlckluZm8ud2lkdGggKiBoZWFkZXJJbmZvLmhlaWdodDsKICAgICAgICAgIHZhciBudW1WYWxpZFBpeGVsID0gaGVhZGVySW5mby5udW1WYWxpZFBpeGVsOwoKICAgICAgICAgIHZhciB2aWV3ID0gbmV3IERhdGFWaWV3KGlucHV0LCBwdHIsIDQpOwogICAgICAgICAgdmFyIG1hc2sgPSB7fTsKICAgICAgICAgIG1hc2subnVtQnl0ZXMgPSB2aWV3LmdldFVpbnQzMigwLCB0cnVlKTsKICAgICAgICAgIHB0ciArPSA0OwoKICAgICAgICAgIC8vIE1hc2sgRGF0YQogICAgICAgICAgaWYgKCgwID09PSBudW1WYWxpZFBpeGVsIHx8IG51bVBpeGVscyA9PT0gbnVtVmFsaWRQaXhlbCkgJiYgMCAhPT0gbWFzay5udW1CeXRlcykgewogICAgICAgICAgICB0aHJvdyAoImludmFsaWQgbWFzayIpOwogICAgICAgICAgfQogICAgICAgICAgdmFyIGJpdHNldCwgcmVzdWx0TWFzazsKICAgICAgICAgIGlmIChudW1WYWxpZFBpeGVsID09PSAwKSB7CiAgICAgICAgICAgIGJpdHNldCA9IG5ldyBVaW50OEFycmF5KE1hdGguY2VpbChudW1QaXhlbHMgLyA4KSk7CiAgICAgICAgICAgIG1hc2suYml0c2V0ID0gYml0c2V0OwogICAgICAgICAgICByZXN1bHRNYXNrID0gbmV3IFVpbnQ4QXJyYXkobnVtUGl4ZWxzKTsKICAgICAgICAgICAgZGF0YS5waXhlbHMucmVzdWx0TWFzayA9IHJlc3VsdE1hc2s7CiAgICAgICAgICAgIHB0ciArPSBtYXNrLm51bUJ5dGVzOwogICAgICAgICAgfS8vID8/Pz8/IGVsc2UgaWYgKGRhdGEubWFzay5udW1CeXRlcyA+IDAgJiYgZGF0YS5tYXNrLm51bUJ5dGVzPCBkYXRhLm51bVZhbGlkUGl4ZWwpIHsKICAgICAgICAgIGVsc2UgaWYgKG1hc2subnVtQnl0ZXMgPiAwKSB7CiAgICAgICAgICAgIGJpdHNldCA9IG5ldyBVaW50OEFycmF5KE1hdGguY2VpbChudW1QaXhlbHMgLyA4KSk7CiAgICAgICAgICAgIHZpZXcgPSBuZXcgRGF0YVZpZXcoaW5wdXQsIHB0ciwgbWFzay5udW1CeXRlcyk7CiAgICAgICAgICAgIHZhciBjbnQgPSB2aWV3LmdldEludDE2KDAsIHRydWUpOwogICAgICAgICAgICB2YXIgaXAgPSAyLCBvcCA9IDAsIHZhbCA9IDA7CiAgICAgICAgICAgIGRvIHsKICAgICAgICAgICAgICBpZiAoY250ID4gMCkgewogICAgICAgICAgICAgICAgd2hpbGUgKGNudC0tKSB7IGJpdHNldFtvcCsrXSA9IHZpZXcuZ2V0VWludDgoaXArKyk7IH0KICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdmFsID0gdmlldy5nZXRVaW50OChpcCsrKTsKICAgICAgICAgICAgICAgIGNudCA9IC1jbnQ7CiAgICAgICAgICAgICAgICB3aGlsZSAoY250LS0pIHsgYml0c2V0W29wKytdID0gdmFsOyB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGNudCA9IHZpZXcuZ2V0SW50MTYoaXAsIHRydWUpOwogICAgICAgICAgICAgIGlwICs9IDI7CiAgICAgICAgICAgIH0gd2hpbGUgKGlwIDwgbWFzay5udW1CeXRlcyk7CiAgICAgICAgICAgIGlmICgoY250ICE9PSAtMzI3NjgpIHx8IChvcCA8IGJpdHNldC5sZW5ndGgpKSB7CiAgICAgICAgICAgICAgdGhyb3cgIlVuZXhwZWN0ZWQgZW5kIG9mIG1hc2sgUkxFIGVuY29kaW5nIjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmVzdWx0TWFzayA9IG5ldyBVaW50OEFycmF5KG51bVBpeGVscyk7CiAgICAgICAgICAgIHZhciBtYiA9IDAsIGsgPSAwOwoKICAgICAgICAgICAgZm9yIChrID0gMDsgayA8IG51bVBpeGVsczsgaysrKSB7CiAgICAgICAgICAgICAgaWYgKGsgJiA3KSB7CiAgICAgICAgICAgICAgICBtYiA9IGJpdHNldFtrID4+IDNdOwogICAgICAgICAgICAgICAgbWIgPDw9IGsgJiA3OwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIG1iID0gYml0c2V0W2sgPj4gM107CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmIChtYiAmIDEyOCkgewogICAgICAgICAgICAgICAgcmVzdWx0TWFza1trXSA9IDE7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGRhdGEucGl4ZWxzLnJlc3VsdE1hc2sgPSByZXN1bHRNYXNrOwoKICAgICAgICAgICAgbWFzay5iaXRzZXQgPSBiaXRzZXQ7CiAgICAgICAgICAgIHB0ciArPSBtYXNrLm51bUJ5dGVzOwogICAgICAgICAgfQogICAgICAgICAgZGF0YS5wdHIgPSBwdHI7CiAgICAgICAgICBkYXRhLm1hc2sgPSBtYXNrOwogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfSwKCiAgICAgICAgcmVhZERhdGFPbmVTd2VlcDogZnVuY3Rpb24oaW5wdXQsIGRhdGEsIE91dFBpeGVsVHlwZUFycmF5KSB7CiAgICAgICAgICB2YXIgcHRyID0gZGF0YS5wdHI7CiAgICAgICAgICB2YXIgaGVhZGVySW5mbyA9IGRhdGEuaGVhZGVySW5mbzsKICAgICAgICAgIHZhciBudW1EaW1zID0gaGVhZGVySW5mby5udW1EaW1zOwogICAgICAgICAgdmFyIG51bVBpeGVscyA9IGhlYWRlckluZm8ud2lkdGggKiBoZWFkZXJJbmZvLmhlaWdodDsKICAgICAgICAgIHZhciBpbWFnZVR5cGUgPSBoZWFkZXJJbmZvLmltYWdlVHlwZTsKICAgICAgICAgIHZhciBudW1CeXRlcyA9IGhlYWRlckluZm8ubnVtVmFsaWRQaXhlbCAqIExlcmMySGVscGVycy5nZXREYXRhVHlwZVNpemUoaW1hZ2VUeXBlKSAqIG51bURpbXM7CiAgICAgICAgICAvL2RhdGEucGl4ZWxzLm51bUJ5dGVzID0gbnVtQnl0ZXM7CiAgICAgICAgICB2YXIgcmF3RGF0YTsKICAgICAgICAgIHZhciBtYXNrID0gZGF0YS5waXhlbHMucmVzdWx0TWFzazsKICAgICAgICAgIGlmIChPdXRQaXhlbFR5cGVBcnJheSA9PT0gVWludDhBcnJheSkgewogICAgICAgICAgICByYXdEYXRhID0gbmV3IFVpbnQ4QXJyYXkoaW5wdXQsIHB0ciwgbnVtQnl0ZXMpOwogICAgICAgICAgfQogICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIHZhciBhcnJheUJ1ZiA9IG5ldyBBcnJheUJ1ZmZlcihudW1CeXRlcyk7CiAgICAgICAgICAgIHZhciBzdG9yZTggPSBuZXcgVWludDhBcnJheShhcnJheUJ1Zik7CiAgICAgICAgICAgIHN0b3JlOC5zZXQobmV3IFVpbnQ4QXJyYXkoaW5wdXQsIHB0ciwgbnVtQnl0ZXMpKTsKICAgICAgICAgICAgcmF3RGF0YSA9IG5ldyBPdXRQaXhlbFR5cGVBcnJheShhcnJheUJ1Zik7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAocmF3RGF0YS5sZW5ndGggPT09IG51bVBpeGVscyAqIG51bURpbXMpIHsKICAgICAgICAgICAgZGF0YS5waXhlbHMucmVzdWx0UGl4ZWxzID0gcmF3RGF0YTsKICAgICAgICAgIH0KICAgICAgICAgIGVsc2UgIC8vbWFzawogICAgICAgICAgewogICAgICAgICAgICBkYXRhLnBpeGVscy5yZXN1bHRQaXhlbHMgPSBuZXcgT3V0UGl4ZWxUeXBlQXJyYXkobnVtUGl4ZWxzICogbnVtRGltcyk7CiAgICAgICAgICAgIHZhciB6ID0gMCwgayA9IDAsIGkgPSAwLCBuU3RhcnQgPSAwOwogICAgICAgICAgICBpZiAobnVtRGltcyA+IDEpIHsKICAgICAgICAgICAgICBmb3IgKGk9MDsgaSA8IG51bURpbXM7IGkrKykgewogICAgICAgICAgICAgICAgblN0YXJ0ID0gaSAqIG51bVBpeGVsczsKICAgICAgICAgICAgICAgIGZvciAoayA9IDA7IGsgPCBudW1QaXhlbHM7IGsrKykgewogICAgICAgICAgICAgICAgICBpZiAobWFza1trXSkgewogICAgICAgICAgICAgICAgICAgIGRhdGEucGl4ZWxzLnJlc3VsdFBpeGVsc1tuU3RhcnQgKyBrXSA9IHJhd0RhdGFbeisrXTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICBmb3IgKGsgPSAwOyBrIDwgbnVtUGl4ZWxzOyBrKyspIHsKICAgICAgICAgICAgICAgIGlmIChtYXNrW2tdKSB7CiAgICAgICAgICAgICAgICAgIGRhdGEucGl4ZWxzLnJlc3VsdFBpeGVsc1trXSA9IHJhd0RhdGFbeisrXTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIHB0ciArPSBudW1CeXRlczsKICAgICAgICAgIGRhdGEucHRyID0gcHRyOyAgICAgICAvL3JldHVybiBkYXRhOwogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfSwKCiAgICAgICAgcmVhZEh1ZmZtYW5UcmVlOiBmdW5jdGlvbihpbnB1dCwgZGF0YSkgewogICAgICAgICAgdmFyIEJJVFNfTUFYID0gdGhpcy5IVUZGTUFOX0xVVF9CSVRTX01BWDsgLy84IGlzIHNsb3cgZm9yIHRoZSBsYXJnZSB0ZXN0IGltYWdlCiAgICAgICAgICAvL3ZhciBzaXplX21heCA9IDEgPDwgQklUU19NQVg7CiAgICAgICAgICAvKiAqKioqKioqKioqKioqKioqKioqKioqKioKICAgICAgICAgICAqIHJlYWRpbmcgY29kZSB0YWJsZQogICAgICAgICAgICoqKioqKioqKioqKioqKioqKioqKioqKiovCiAgICAgICAgICB2YXIgdmlldyA9IG5ldyBEYXRhVmlldyhpbnB1dCwgZGF0YS5wdHIsIDE2KTsKICAgICAgICAgIGRhdGEucHRyICs9IDE2OwogICAgICAgICAgdmFyIHZlcnNpb24gPSB2aWV3LmdldEludDMyKDAsIHRydWUpOwogICAgICAgICAgaWYgKHZlcnNpb24gPCAyKSB7CiAgICAgICAgICAgIHRocm93ICJ1bnN1cHBvcnRlZCBIdWZmbWFuIHZlcnNpb24iOwogICAgICAgICAgfQogICAgICAgICAgdmFyIHNpemUgPSB2aWV3LmdldEludDMyKDQsIHRydWUpOwogICAgICAgICAgdmFyIGkwID0gdmlldy5nZXRJbnQzMig4LCB0cnVlKTsKICAgICAgICAgIHZhciBpMSA9IHZpZXcuZ2V0SW50MzIoMTIsIHRydWUpOwogICAgICAgICAgaWYgKGkwID49IGkxKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIH0KICAgICAgICAgIHZhciBibG9ja0RhdGFCdWZmZXIgPSBuZXcgVWludDMyQXJyYXkoaTEgLSBpMCk7CiAgICAgICAgICBMZXJjMkhlbHBlcnMuZGVjb2RlQml0cyhpbnB1dCwgZGF0YSwgYmxvY2tEYXRhQnVmZmVyKTsKICAgICAgICAgIHZhciBjb2RlVGFibGUgPSBbXTsgLy9zaXplCiAgICAgICAgICB2YXIgaSwgaiwgaywgbGVuOwoKICAgICAgICAgIGZvciAoaSA9IGkwOyBpIDwgaTE7IGkrKykgewogICAgICAgICAgICBqID0gaSAtIChpIDwgc2l6ZSA/IDAgOiBzaXplKTsvL3dyYXAgYXJvdW5kCiAgICAgICAgICAgIGNvZGVUYWJsZVtqXSA9IHsgZmlyc3Q6IGJsb2NrRGF0YUJ1ZmZlcltpIC0gaTBdLCBzZWNvbmQ6IG51bGwgfTsKICAgICAgICAgIH0KCiAgICAgICAgICB2YXIgZGF0YUJ5dGVzID0gaW5wdXQuYnl0ZUxlbmd0aCAtIGRhdGEucHRyOwogICAgICAgICAgdmFyIGRhdGFXb3JkcyA9IE1hdGguY2VpbChkYXRhQnl0ZXMgLyA0KTsKICAgICAgICAgIHZhciBhcnJheUJ1ZiA9IG5ldyBBcnJheUJ1ZmZlcihkYXRhV29yZHMgKiA0KTsKICAgICAgICAgIHZhciBzdG9yZTggPSBuZXcgVWludDhBcnJheShhcnJheUJ1Zik7CiAgICAgICAgICBzdG9yZTguc2V0KG5ldyBVaW50OEFycmF5KGlucHV0LCBkYXRhLnB0ciwgZGF0YUJ5dGVzKSk7CiAgICAgICAgICB2YXIgc3R1ZmZlZERhdGEgPSBuZXcgVWludDMyQXJyYXkoYXJyYXlCdWYpOyAvL211c3Qgc3RhcnQgZnJvbSB4KjQKICAgICAgICAgIHZhciBiaXRQb3MgPSAwLCB3b3JkLCBzcmNQdHIgPSAwOwogICAgICAgICAgd29yZCA9IHN0dWZmZWREYXRhWzBdOwogICAgICAgICAgZm9yIChpID0gaTA7IGkgPCBpMTsgaSsrKSB7CiAgICAgICAgICAgIGogPSBpIC0gKGkgPCBzaXplID8gMCA6IHNpemUpOy8vd3JhcCBhcm91bmQKICAgICAgICAgICAgbGVuID0gY29kZVRhYmxlW2pdLmZpcnN0OwogICAgICAgICAgICBpZiAobGVuID4gMCkgewogICAgICAgICAgICAgIGNvZGVUYWJsZVtqXS5zZWNvbmQgPSAod29yZCA8PCBiaXRQb3MpID4+PiAoMzIgLSBsZW4pOwoKICAgICAgICAgICAgICBpZiAoMzIgLSBiaXRQb3MgPj0gbGVuKSB7CiAgICAgICAgICAgICAgICBiaXRQb3MgKz0gbGVuOwogICAgICAgICAgICAgICAgaWYgKGJpdFBvcyA9PT0gMzIpIHsKICAgICAgICAgICAgICAgICAgYml0UG9zID0gMDsKICAgICAgICAgICAgICAgICAgc3JjUHRyKys7CiAgICAgICAgICAgICAgICAgIHdvcmQgPSBzdHVmZmVkRGF0YVtzcmNQdHJdOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIGJpdFBvcyArPSBsZW4gLSAzMjsKICAgICAgICAgICAgICAgIHNyY1B0cisrOwogICAgICAgICAgICAgICAgd29yZCA9IHN0dWZmZWREYXRhW3NyY1B0cl07CiAgICAgICAgICAgICAgICBjb2RlVGFibGVbal0uc2Vjb25kIHw9IHdvcmQgPj4+ICgzMiAtIGJpdFBvcyk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgLy9maW5pc2hlZCByZWFkaW5nIGNvZGUgdGFibGUKCiAgICAgICAgICAvKiAqKioqKioqKioqKioqKioqKioqKioqKioKICAgICAgICAgICAqIGJ1aWxkaW5nIGx1dAogICAgICAgICAgICoqKioqKioqKioqKioqKioqKioqKioqKiovCiAgICAgICAgICB2YXIgbnVtQml0c0xVVCA9IDAsIG51bUJpdHNMVVRRaWNrID0gMDsKICAgICAgICAgIHZhciB0cmVlID0gbmV3IFRyZWVOb2RlKCk7CiAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgY29kZVRhYmxlLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGlmIChjb2RlVGFibGVbaV0gIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgIG51bUJpdHNMVVQgPSBNYXRoLm1heChudW1CaXRzTFVULCBjb2RlVGFibGVbaV0uZmlyc3QpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBpZiAobnVtQml0c0xVVCA+PSBCSVRTX01BWCkgewogICAgICAgICAgICBudW1CaXRzTFVUUWljayA9IEJJVFNfTUFYOwogICAgICAgICAgfQogICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIG51bUJpdHNMVVRRaWNrID0gbnVtQml0c0xVVDsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChudW1CaXRzTFVUID49IDMwKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJXQVJuaW5nLCBsYXJnZSBOVU0gTFVUIEJJVFMgSVMgIiArIG51bUJpdHNMVVQpOwogICAgICAgICAgfQogICAgICAgICAgdmFyIGRlY29kZUx1dCA9IFtdLCBlbnRyeSwgY29kZSwgbnVtRW50cmllcywgamosIGN1cnJlbnRCaXQsIG5vZGU7CiAgICAgICAgICBmb3IgKGkgPSBpMDsgaSA8IGkxOyBpKyspIHsKICAgICAgICAgICAgaiA9IGkgLSAoaSA8IHNpemUgPyAwIDogc2l6ZSk7Ly93cmFwIGFyb3VuZAogICAgICAgICAgICBsZW4gPSBjb2RlVGFibGVbal0uZmlyc3Q7CiAgICAgICAgICAgIGlmIChsZW4gPiAwKSB7CiAgICAgICAgICAgICAgZW50cnkgPSBbbGVuLCBqXTsKICAgICAgICAgICAgICBpZiAobGVuIDw9IG51bUJpdHNMVVRRaWNrKSB7CiAgICAgICAgICAgICAgICBjb2RlID0gY29kZVRhYmxlW2pdLnNlY29uZCA8PCAobnVtQml0c0xVVFFpY2sgLSBsZW4pOwogICAgICAgICAgICAgICAgbnVtRW50cmllcyA9IDEgPDwgKG51bUJpdHNMVVRRaWNrIC0gbGVuKTsKICAgICAgICAgICAgICAgIGZvciAoayA9IDA7IGsgPCBudW1FbnRyaWVzOyBrKyspIHsKICAgICAgICAgICAgICAgICAgZGVjb2RlTHV0W2NvZGUgfCBrXSA9IGVudHJ5OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIC8vYnVpbGQgdHJlZQogICAgICAgICAgICAgICAgY29kZSA9IGNvZGVUYWJsZVtqXS5zZWNvbmQ7CiAgICAgICAgICAgICAgICBub2RlID0gdHJlZTsKICAgICAgICAgICAgICAgIGZvciAoamogPSBsZW4gLSAxOyBqaiA+PSAwOyBqai0tKSB7CiAgICAgICAgICAgICAgICAgIGN1cnJlbnRCaXQgPSBjb2RlID4+PiBqaiAmIDE7IC8vbm8gbGVmdCBzaGlmdCBhcyBsZW5ndGggY291bGQgYmUgMzAsMzEKICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRCaXQpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoIW5vZGUucmlnaHQpIHsKICAgICAgICAgICAgICAgICAgICAgIG5vZGUucmlnaHQgPSBuZXcgVHJlZU5vZGUoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgbm9kZSA9IG5vZGUucmlnaHQ7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKCFub2RlLmxlZnQpIHsKICAgICAgICAgICAgICAgICAgICAgIG5vZGUubGVmdCA9IG5ldyBUcmVlTm9kZSgpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBub2RlID0gbm9kZS5sZWZ0OwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIGlmIChqaiA9PT0gMCAmJiAhbm9kZS52YWwpIHsKICAgICAgICAgICAgICAgICAgICBub2RlLnZhbCA9IGVudHJ5WzFdOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICBkZWNvZGVMdXQ6IGRlY29kZUx1dCwKICAgICAgICAgICAgbnVtQml0c0xVVFFpY2s6IG51bUJpdHNMVVRRaWNrLAogICAgICAgICAgICBudW1CaXRzTFVUOiBudW1CaXRzTFVULAogICAgICAgICAgICB0cmVlOiB0cmVlLAogICAgICAgICAgICBzdHVmZmVkRGF0YTogc3R1ZmZlZERhdGEsCiAgICAgICAgICAgIHNyY1B0cjogc3JjUHRyLAogICAgICAgICAgICBiaXRQb3M6IGJpdFBvcwogICAgICAgICAgfTsKICAgICAgICB9LAoKICAgICAgICByZWFkSHVmZm1hbjogZnVuY3Rpb24oaW5wdXQsIGRhdGEsIE91dFBpeGVsVHlwZUFycmF5KSB7CiAgICAgICAgICB2YXIgaGVhZGVySW5mbyA9IGRhdGEuaGVhZGVySW5mbzsKICAgICAgICAgIHZhciBudW1EaW1zID0gaGVhZGVySW5mby5udW1EaW1zOwogICAgICAgICAgdmFyIGhlaWdodCA9IGRhdGEuaGVhZGVySW5mby5oZWlnaHQ7CiAgICAgICAgICB2YXIgd2lkdGggPSBkYXRhLmhlYWRlckluZm8ud2lkdGg7CiAgICAgICAgICB2YXIgbnVtUGl4ZWxzID0gd2lkdGggKiBoZWlnaHQ7CiAgICAgICAgICAvL3ZhciBzaXplX21heCA9IDEgPDwgQklUU19NQVg7CiAgICAgICAgICAvKiAqKioqKioqKioqKioqKioqKioqKioqKioKICAgICAgICAgICAqIHJlYWRpbmcgaHVmZm1hbiBzdHJ1Y3R1cmUgaW5mbwogICAgICAgICAgICoqKioqKioqKioqKioqKioqKioqKioqKiovCiAgICAgICAgICB2YXIgaHVmZm1hbkluZm8gPSB0aGlzLnJlYWRIdWZmbWFuVHJlZShpbnB1dCwgZGF0YSk7CiAgICAgICAgICB2YXIgZGVjb2RlTHV0ID0gaHVmZm1hbkluZm8uZGVjb2RlTHV0OwogICAgICAgICAgdmFyIHRyZWUgPSBodWZmbWFuSW5mby50cmVlOwogICAgICAgICAgLy9zdHVmZmVkRGF0YSBpbmNsdWRlcyBodWZmbWFuIGhlYWRlcnMKICAgICAgICAgIHZhciBzdHVmZmVkRGF0YSA9IGh1ZmZtYW5JbmZvLnN0dWZmZWREYXRhOwogICAgICAgICAgdmFyIHNyY1B0ciA9IGh1ZmZtYW5JbmZvLnNyY1B0cjsKICAgICAgICAgIHZhciBiaXRQb3MgPSBodWZmbWFuSW5mby5iaXRQb3M7CiAgICAgICAgICB2YXIgbnVtQml0c0xVVFFpY2sgPSBodWZmbWFuSW5mby5udW1CaXRzTFVUUWljazsKICAgICAgICAgIHZhciBudW1CaXRzTFVUID0gaHVmZm1hbkluZm8ubnVtQml0c0xVVDsKICAgICAgICAgIHZhciBvZmZzZXQgPSBkYXRhLmhlYWRlckluZm8uaW1hZ2VUeXBlID09PSAwID8gMTI4IDogMDsKICAgICAgICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqCiAgICAgICAgICAqICBkZWNvZGUKICAgICAgICAgICoqKioqKioqKioqKioqKioqKioqKioqKioqKi8KICAgICAgICAgIHZhciBub2RlLCB2YWwsIGRlbHRhLCBtYXNrID0gZGF0YS5waXhlbHMucmVzdWx0TWFzaywgdmFsVG1wLCB2YWxUbXBRdWljaywgY3VycmVudEJpdDsKICAgICAgICAgIHZhciBpLCBqLCBrLCBpaTsKICAgICAgICAgIHZhciBwcmV2VmFsID0gMDsKICAgICAgICAgIGlmIChiaXRQb3MgPiAwKSB7CiAgICAgICAgICAgIHNyY1B0cisrOwogICAgICAgICAgICBiaXRQb3MgPSAwOwogICAgICAgICAgfQogICAgICAgICAgdmFyIHdvcmQgPSBzdHVmZmVkRGF0YVtzcmNQdHJdOwogICAgICAgICAgdmFyIGRlbHRhRW5jb2RlID0gZGF0YS5lbmNvZGVNb2RlID09PSAxOwogICAgICAgICAgdmFyIHJlc3VsdFBpeGVsc0FsbERpbSA9IG5ldyBPdXRQaXhlbFR5cGVBcnJheShudW1QaXhlbHMgKiBudW1EaW1zKTsKICAgICAgICAgIHZhciByZXN1bHRQaXhlbHMgPSByZXN1bHRQaXhlbHNBbGxEaW07CiAgICAgICAgICB2YXIgaURpbTsKICAgICAgICAgIGZvciAoaURpbSA9IDA7IGlEaW0gPCBoZWFkZXJJbmZvLm51bURpbXM7IGlEaW0rKykgewogICAgICAgICAgICBpZiAobnVtRGltcyA+IDEpIHsKICAgICAgICAgICAgICAvL2dldCB0aGUgbWVtIGJsb2NrIG9mIGN1cnJlbnQgZGltZW5zaW9uCiAgICAgICAgICAgICAgcmVzdWx0UGl4ZWxzID0gbmV3IE91dFBpeGVsVHlwZUFycmF5KHJlc3VsdFBpeGVsc0FsbERpbS5idWZmZXIsIG51bVBpeGVscyAqIGlEaW0sIG51bVBpeGVscyk7CiAgICAgICAgICAgICAgcHJldlZhbCA9IDA7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGRhdGEuaGVhZGVySW5mby5udW1WYWxpZFBpeGVsID09PSB3aWR0aCAqIGhlaWdodCkgeyAvL2FsbCB2YWxpZAogICAgICAgICAgICAgIGZvciAoayA9IDAsIGkgPSAwOyBpIDwgaGVpZ2h0OyBpKyspIHsKICAgICAgICAgICAgICAgIGZvciAoaiA9IDA7IGogPCB3aWR0aDsgaisrLCBrKyspIHsKICAgICAgICAgICAgICAgICAgdmFsID0gMDsKICAgICAgICAgICAgICAgICAgdmFsVG1wID0gKHdvcmQgPDwgYml0UG9zKSA+Pj4gKDMyIC0gbnVtQml0c0xVVFFpY2spOwogICAgICAgICAgICAgICAgICB2YWxUbXBRdWljayA9IHZhbFRtcDsvLyA+Pj4gZGVsdGFCaXRzOwogICAgICAgICAgICAgICAgICBpZiAoMzIgLSBiaXRQb3MgPCBudW1CaXRzTFVUUWljaykgewogICAgICAgICAgICAgICAgICAgIHZhbFRtcCB8PSAoKHN0dWZmZWREYXRhW3NyY1B0ciArIDFdKSA+Pj4gKDY0IC0gYml0UG9zIC0gbnVtQml0c0xVVFFpY2spKTsKICAgICAgICAgICAgICAgICAgICB2YWxUbXBRdWljayA9IHZhbFRtcDsvLyA+Pj4gZGVsdGFCaXRzOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIGlmIChkZWNvZGVMdXRbdmFsVG1wUXVpY2tdKSAgICAvLyBpZiB0aGVyZSwgbW92ZSB0aGUgY29ycmVjdCBudW1iZXIgb2YgYml0cyBhbmQgZG9uZQogICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgdmFsID0gZGVjb2RlTHV0W3ZhbFRtcFF1aWNrXVsxXTsKICAgICAgICAgICAgICAgICAgICBiaXRQb3MgKz0gZGVjb2RlTHV0W3ZhbFRtcFF1aWNrXVswXTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICB2YWxUbXAgPSAod29yZCA8PCBiaXRQb3MpID4+PiAoMzIgLSBudW1CaXRzTFVUKTsKICAgICAgICAgICAgICAgICAgICB2YWxUbXBRdWljayA9IHZhbFRtcDsvLyA+Pj4gZGVsdGFCaXRzOwogICAgICAgICAgICAgICAgICAgIGlmICgzMiAtIGJpdFBvcyA8IG51bUJpdHNMVVQpIHsKICAgICAgICAgICAgICAgICAgICAgIHZhbFRtcCB8PSAoKHN0dWZmZWREYXRhW3NyY1B0ciArIDFdKSA+Pj4gKDY0IC0gYml0UG9zIC0gbnVtQml0c0xVVCkpOwogICAgICAgICAgICAgICAgICAgICAgdmFsVG1wUXVpY2sgPSB2YWxUbXA7Ly8gPj4+IGRlbHRhQml0czsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgbm9kZSA9IHRyZWU7CiAgICAgICAgICAgICAgICAgICAgZm9yIChpaSA9IDA7IGlpIDwgbnVtQml0c0xVVDsgaWkrKykgewogICAgICAgICAgICAgICAgICAgICAgY3VycmVudEJpdCA9IHZhbFRtcCA+Pj4gKG51bUJpdHNMVVQgLSBpaSAtIDEpICYgMTsKICAgICAgICAgICAgICAgICAgICAgIG5vZGUgPSBjdXJyZW50Qml0ID8gbm9kZS5yaWdodCA6IG5vZGUubGVmdDsKICAgICAgICAgICAgICAgICAgICAgIGlmICghKG5vZGUubGVmdCB8fCBub2RlLnJpZ2h0KSkgewogICAgICAgICAgICAgICAgICAgICAgICB2YWwgPSBub2RlLnZhbDsKICAgICAgICAgICAgICAgICAgICAgICAgYml0UG9zID0gYml0UG9zICsgaWkgKyAxOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIGlmIChiaXRQb3MgPj0gMzIpIHsKICAgICAgICAgICAgICAgICAgICBiaXRQb3MgLT0gMzI7CiAgICAgICAgICAgICAgICAgICAgc3JjUHRyKys7CiAgICAgICAgICAgICAgICAgICAgd29yZCA9IHN0dWZmZWREYXRhW3NyY1B0cl07CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIGRlbHRhID0gdmFsIC0gb2Zmc2V0OwogICAgICAgICAgICAgICAgICBpZiAoZGVsdGFFbmNvZGUpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoaiA+IDApIHsKICAgICAgICAgICAgICAgICAgICAgIGRlbHRhICs9IHByZXZWYWw7ICAgIC8vIHVzZSBvdmVyZmxvdwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChpID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgZGVsdGEgKz0gcmVzdWx0UGl4ZWxzW2sgLSB3aWR0aF07CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgZGVsdGEgKz0gcHJldlZhbDsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZGVsdGEgJj0gMHhGRjsgLy9vdmVyZmxvdwogICAgICAgICAgICAgICAgICAgIHJlc3VsdFBpeGVsc1trXSA9IGRlbHRhOy8vb3ZlcmZsb3cKICAgICAgICAgICAgICAgICAgICBwcmV2VmFsID0gZGVsdGE7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgcmVzdWx0UGl4ZWxzW2tdID0gZGVsdGE7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7IC8vbm90IGFsbCB2YWxpZCwgdXNlIG1hc2sKICAgICAgICAgICAgICBmb3IgKGsgPSAwLCBpID0gMDsgaSA8IGhlaWdodDsgaSsrKSB7CiAgICAgICAgICAgICAgICBmb3IgKGogPSAwOyBqIDwgd2lkdGg7IGorKywgaysrKSB7CiAgICAgICAgICAgICAgICAgIGlmIChtYXNrW2tdKSB7CiAgICAgICAgICAgICAgICAgICAgdmFsID0gMDsKICAgICAgICAgICAgICAgICAgICB2YWxUbXAgPSAod29yZCA8PCBiaXRQb3MpID4+PiAoMzIgLSBudW1CaXRzTFVUUWljayk7CiAgICAgICAgICAgICAgICAgICAgdmFsVG1wUXVpY2sgPSB2YWxUbXA7Ly8gPj4+IGRlbHRhQml0czsKICAgICAgICAgICAgICAgICAgICBpZiAoMzIgLSBiaXRQb3MgPCBudW1CaXRzTFVUUWljaykgewogICAgICAgICAgICAgICAgICAgICAgdmFsVG1wIHw9ICgoc3R1ZmZlZERhdGFbc3JjUHRyICsgMV0pID4+PiAoNjQgLSBiaXRQb3MgLSBudW1CaXRzTFVUUWljaykpOwogICAgICAgICAgICAgICAgICAgICAgdmFsVG1wUXVpY2sgPSB2YWxUbXA7Ly8gPj4+IGRlbHRhQml0czsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKGRlY29kZUx1dFt2YWxUbXBRdWlja10pICAgIC8vIGlmIHRoZXJlLCBtb3ZlIHRoZSBjb3JyZWN0IG51bWJlciBvZiBiaXRzIGFuZCBkb25lCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgdmFsID0gZGVjb2RlTHV0W3ZhbFRtcFF1aWNrXVsxXTsKICAgICAgICAgICAgICAgICAgICAgIGJpdFBvcyArPSBkZWNvZGVMdXRbdmFsVG1wUXVpY2tdWzBdOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgIHZhbFRtcCA9ICh3b3JkIDw8IGJpdFBvcykgPj4+ICgzMiAtIG51bUJpdHNMVVQpOwogICAgICAgICAgICAgICAgICAgICAgdmFsVG1wUXVpY2sgPSB2YWxUbXA7Ly8gPj4+IGRlbHRhQml0czsKICAgICAgICAgICAgICAgICAgICAgIGlmICgzMiAtIGJpdFBvcyA8IG51bUJpdHNMVVQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFsVG1wIHw9ICgoc3R1ZmZlZERhdGFbc3JjUHRyICsgMV0pID4+PiAoNjQgLSBiaXRQb3MgLSBudW1CaXRzTFVUKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhbFRtcFF1aWNrID0gdmFsVG1wOy8vID4+PiBkZWx0YUJpdHM7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICBub2RlID0gdHJlZTsKICAgICAgICAgICAgICAgICAgICAgIGZvciAoaWkgPSAwOyBpaSA8IG51bUJpdHNMVVQ7IGlpKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEJpdCA9IHZhbFRtcCA+Pj4gKG51bUJpdHNMVVQgLSBpaSAtIDEpICYgMTsKICAgICAgICAgICAgICAgICAgICAgICAgbm9kZSA9IGN1cnJlbnRCaXQgPyBub2RlLnJpZ2h0IDogbm9kZS5sZWZ0OwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShub2RlLmxlZnQgfHwgbm9kZS5yaWdodCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICB2YWwgPSBub2RlLnZhbDsKICAgICAgICAgICAgICAgICAgICAgICAgICBiaXRQb3MgPSBiaXRQb3MgKyBpaSArIDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGlmIChiaXRQb3MgPj0gMzIpIHsKICAgICAgICAgICAgICAgICAgICAgIGJpdFBvcyAtPSAzMjsKICAgICAgICAgICAgICAgICAgICAgIHNyY1B0cisrOwogICAgICAgICAgICAgICAgICAgICAgd29yZCA9IHN0dWZmZWREYXRhW3NyY1B0cl07CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBkZWx0YSA9IHZhbCAtIG9mZnNldDsKICAgICAgICAgICAgICAgICAgICBpZiAoZGVsdGFFbmNvZGUpIHsKICAgICAgICAgICAgICAgICAgICAgIGlmIChqID4gMCAmJiBtYXNrW2sgLSAxXSkgewogICAgICAgICAgICAgICAgICAgICAgICBkZWx0YSArPSBwcmV2VmFsOyAgICAvLyB1c2Ugb3ZlcmZsb3cKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGkgPiAwICYmIG1hc2tbayAtIHdpZHRoXSkgewogICAgICAgICAgICAgICAgICAgICAgICBkZWx0YSArPSByZXN1bHRQaXhlbHNbayAtIHdpZHRoXTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBkZWx0YSArPSBwcmV2VmFsOwogICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgIGRlbHRhICY9IDB4RkY7IC8vb3ZlcmZsb3cKICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdFBpeGVsc1trXSA9IGRlbHRhOy8vb3ZlcmZsb3cKICAgICAgICAgICAgICAgICAgICAgIHByZXZWYWwgPSBkZWx0YTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICByZXN1bHRQaXhlbHNba10gPSBkZWx0YTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZGF0YS5wdHIgPSBkYXRhLnB0ciArIChzcmNQdHIgKyAxKSAqIDQgKyAoYml0UG9zID4gMCA/IDQgOiAwKTsKICAgICAgICAgIH0KICAgICAgICAgIGRhdGEucGl4ZWxzLnJlc3VsdFBpeGVscyA9IHJlc3VsdFBpeGVsc0FsbERpbTsKICAgICAgICB9LAoKICAgICAgICBkZWNvZGVCaXRzOiBmdW5jdGlvbihpbnB1dCwgZGF0YSwgYmxvY2tEYXRhQnVmZmVyLCBvZmZzZXQsIGlEaW0pIHsKICAgICAgICAgIHsKICAgICAgICAgICAgLy9iaXRzdHVmZiBlbmNvZGluZyBpcyAzCiAgICAgICAgICAgIHZhciBoZWFkZXJJbmZvID0gZGF0YS5oZWFkZXJJbmZvOwogICAgICAgICAgICB2YXIgZmlsZVZlcnNpb24gPSBoZWFkZXJJbmZvLmZpbGVWZXJzaW9uOwogICAgICAgICAgICAvL3ZhciBibG9jayA9IHt9OwogICAgICAgICAgICB2YXIgYmxvY2tQdHIgPSAwOwogICAgICAgICAgICB2YXIgdmlldyA9IG5ldyBEYXRhVmlldyhpbnB1dCwgZGF0YS5wdHIsIDUpOy8vdG8gZG8KICAgICAgICAgICAgdmFyIGhlYWRlckJ5dGUgPSB2aWV3LmdldFVpbnQ4KDApOwogICAgICAgICAgICBibG9ja1B0cisrOwogICAgICAgICAgICB2YXIgYml0czY3ID0gaGVhZGVyQnl0ZSA+PiA2OwogICAgICAgICAgICB2YXIgbiA9IChiaXRzNjcgPT09IDApID8gNCA6IDMgLSBiaXRzNjc7CiAgICAgICAgICAgIHZhciBkb0x1dCA9IChoZWFkZXJCeXRlICYgMzIpID4gMCA/IHRydWUgOiBmYWxzZTsvLzV0aCBiaXQKICAgICAgICAgICAgdmFyIG51bUJpdHMgPSBoZWFkZXJCeXRlICYgMzE7CiAgICAgICAgICAgIHZhciBudW1FbGVtZW50cyA9IDA7CiAgICAgICAgICAgIGlmIChuID09PSAxKSB7CiAgICAgICAgICAgICAgbnVtRWxlbWVudHMgPSB2aWV3LmdldFVpbnQ4KGJsb2NrUHRyKTsgYmxvY2tQdHIrKzsKICAgICAgICAgICAgfSBlbHNlIGlmIChuID09PSAyKSB7CiAgICAgICAgICAgICAgbnVtRWxlbWVudHMgPSB2aWV3LmdldFVpbnQxNihibG9ja1B0ciwgdHJ1ZSk7IGJsb2NrUHRyICs9IDI7CiAgICAgICAgICAgIH0gZWxzZSBpZiAobiA9PT0gNCkgewogICAgICAgICAgICAgIG51bUVsZW1lbnRzID0gdmlldy5nZXRVaW50MzIoYmxvY2tQdHIsIHRydWUpOyBibG9ja1B0ciArPSA0OwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHRocm93ICJJbnZhbGlkIHZhbGlkIHBpeGVsIGNvdW50IHR5cGUiOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vZml4OiBodWZmbWFuIGNvZGVzIGFyZSBiaXQgc3R1ZmZlZCwgYnV0IG5vdCBib3VuZCBieSBkYXRhJ3MgbWF4IHZhbHVlLCBzbyBuZWVkIHRvIHVzZSBvcmlnaW5hbFVuc3R1ZmYKICAgICAgICAgICAgLy9vZmZzZXQgPSBvZmZzZXQgfHwgMDsKICAgICAgICAgICAgdmFyIHNjYWxlID0gMiAqIGhlYWRlckluZm8ubWF4WkVycm9yOwogICAgICAgICAgICB2YXIgc3R1ZmZlZERhdGEsIGFycmF5QnVmLCBzdG9yZTgsIGRhdGFCeXRlcywgZGF0YVdvcmRzOwogICAgICAgICAgICB2YXIgbHV0QXJyLCBsdXREYXRhLCBsdXRCeXRlcywgYml0c1BlclBpeGVsOwogICAgICAgICAgICB2YXIgek1heCA9IGhlYWRlckluZm8ubnVtRGltcyA+IDEgPyBoZWFkZXJJbmZvLm1heFZhbHVlc1tpRGltXSA6IGhlYWRlckluZm8uek1heDsKICAgICAgICAgICAgaWYgKGRvTHV0KSB7CiAgICAgICAgICAgICAgZGF0YS5jb3VudGVyLmx1dCsrOwogICAgICAgICAgICAgIGx1dEJ5dGVzID0gdmlldy5nZXRVaW50OChibG9ja1B0cik7CiAgICAgICAgICAgICAgYmxvY2tQdHIrKzsKICAgICAgICAgICAgICBkYXRhQnl0ZXMgPSBNYXRoLmNlaWwoKGx1dEJ5dGVzIC0gMSkgKiBudW1CaXRzIC8gOCk7CiAgICAgICAgICAgICAgZGF0YVdvcmRzID0gTWF0aC5jZWlsKGRhdGFCeXRlcyAvIDQpOwogICAgICAgICAgICAgIGFycmF5QnVmID0gbmV3IEFycmF5QnVmZmVyKGRhdGFXb3JkcyAqIDQpOwogICAgICAgICAgICAgIHN0b3JlOCA9IG5ldyBVaW50OEFycmF5KGFycmF5QnVmKTsKCiAgICAgICAgICAgICAgZGF0YS5wdHIgKz0gYmxvY2tQdHI7CiAgICAgICAgICAgICAgc3RvcmU4LnNldChuZXcgVWludDhBcnJheShpbnB1dCwgZGF0YS5wdHIsIGRhdGFCeXRlcykpOwoKICAgICAgICAgICAgICBsdXREYXRhID0gbmV3IFVpbnQzMkFycmF5KGFycmF5QnVmKTsKICAgICAgICAgICAgICBkYXRhLnB0ciArPSBkYXRhQnl0ZXM7CgogICAgICAgICAgICAgIGJpdHNQZXJQaXhlbCA9IDA7CiAgICAgICAgICAgICAgd2hpbGUgKChsdXRCeXRlcyAtIDEpID4+PiBiaXRzUGVyUGl4ZWwpIHsKICAgICAgICAgICAgICAgIGJpdHNQZXJQaXhlbCsrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBkYXRhQnl0ZXMgPSBNYXRoLmNlaWwobnVtRWxlbWVudHMgKiBiaXRzUGVyUGl4ZWwgLyA4KTsKICAgICAgICAgICAgICBkYXRhV29yZHMgPSBNYXRoLmNlaWwoZGF0YUJ5dGVzIC8gNCk7CiAgICAgICAgICAgICAgYXJyYXlCdWYgPSBuZXcgQXJyYXlCdWZmZXIoZGF0YVdvcmRzICogNCk7CiAgICAgICAgICAgICAgc3RvcmU4ID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXlCdWYpOwogICAgICAgICAgICAgIHN0b3JlOC5zZXQobmV3IFVpbnQ4QXJyYXkoaW5wdXQsIGRhdGEucHRyLCBkYXRhQnl0ZXMpKTsKICAgICAgICAgICAgICBzdHVmZmVkRGF0YSA9IG5ldyBVaW50MzJBcnJheShhcnJheUJ1Zik7CiAgICAgICAgICAgICAgZGF0YS5wdHIgKz0gZGF0YUJ5dGVzOwogICAgICAgICAgICAgIGlmIChmaWxlVmVyc2lvbiA+PSAzKSB7CiAgICAgICAgICAgICAgICBsdXRBcnIgPSBCaXRTdHVmZmVyLnVuc3R1ZmZMVVQyKGx1dERhdGEsIG51bUJpdHMsIGx1dEJ5dGVzIC0gMSwgb2Zmc2V0LCBzY2FsZSwgek1heCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgbHV0QXJyID0gQml0U3R1ZmZlci51bnN0dWZmTFVUKGx1dERhdGEsIG51bUJpdHMsIGx1dEJ5dGVzIC0gMSwgb2Zmc2V0LCBzY2FsZSwgek1heCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIC8vbHV0QXJyLnVuc2hpZnQoMCk7CiAgICAgICAgICAgICAgaWYgKGZpbGVWZXJzaW9uID49IDMpIHsKICAgICAgICAgICAgICAgIC8vQml0U3R1ZmZlci51bnN0dWZmMihibG9jaywgYmxvY2tEYXRhQnVmZmVyLCBoZWFkZXJJbmZvLnpNYXgpOwogICAgICAgICAgICAgICAgQml0U3R1ZmZlci51bnN0dWZmMihzdHVmZmVkRGF0YSwgYmxvY2tEYXRhQnVmZmVyLCBiaXRzUGVyUGl4ZWwsIG51bUVsZW1lbnRzLCBsdXRBcnIpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIEJpdFN0dWZmZXIudW5zdHVmZihzdHVmZmVkRGF0YSwgYmxvY2tEYXRhQnVmZmVyLCBiaXRzUGVyUGl4ZWwsIG51bUVsZW1lbnRzLCBsdXRBcnIpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAvL2NvbnNvbGUuZGVidWcoImJpdHN0dWZmZXIiKTsKICAgICAgICAgICAgICBkYXRhLmNvdW50ZXIuYml0c3R1ZmZlcisrOwogICAgICAgICAgICAgIGJpdHNQZXJQaXhlbCA9IG51bUJpdHM7CiAgICAgICAgICAgICAgZGF0YS5wdHIgKz0gYmxvY2tQdHI7CiAgICAgICAgICAgICAgaWYgKGJpdHNQZXJQaXhlbCA+IDApIHsKICAgICAgICAgICAgICAgIGRhdGFCeXRlcyA9IE1hdGguY2VpbChudW1FbGVtZW50cyAqIGJpdHNQZXJQaXhlbCAvIDgpOwogICAgICAgICAgICAgICAgZGF0YVdvcmRzID0gTWF0aC5jZWlsKGRhdGFCeXRlcyAvIDQpOwogICAgICAgICAgICAgICAgYXJyYXlCdWYgPSBuZXcgQXJyYXlCdWZmZXIoZGF0YVdvcmRzICogNCk7CiAgICAgICAgICAgICAgICBzdG9yZTggPSBuZXcgVWludDhBcnJheShhcnJheUJ1Zik7CiAgICAgICAgICAgICAgICBzdG9yZTguc2V0KG5ldyBVaW50OEFycmF5KGlucHV0LCBkYXRhLnB0ciwgZGF0YUJ5dGVzKSk7CiAgICAgICAgICAgICAgICBzdHVmZmVkRGF0YSA9IG5ldyBVaW50MzJBcnJheShhcnJheUJ1Zik7CiAgICAgICAgICAgICAgICBkYXRhLnB0ciArPSBkYXRhQnl0ZXM7CiAgICAgICAgICAgICAgICBpZiAoZmlsZVZlcnNpb24gPj0gMykgewogICAgICAgICAgICAgICAgICBpZiAob2Zmc2V0ID09IG51bGwpIHsKICAgICAgICAgICAgICAgICAgICBCaXRTdHVmZmVyLm9yaWdpbmFsVW5zdHVmZjIoc3R1ZmZlZERhdGEsIGJsb2NrRGF0YUJ1ZmZlciwgYml0c1BlclBpeGVsLCBudW1FbGVtZW50cyk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgQml0U3R1ZmZlci51bnN0dWZmMihzdHVmZmVkRGF0YSwgYmxvY2tEYXRhQnVmZmVyLCBiaXRzUGVyUGl4ZWwsIG51bUVsZW1lbnRzLCBmYWxzZSwgb2Zmc2V0LCBzY2FsZSwgek1heCk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICBpZiAob2Zmc2V0ID09IG51bGwpIHsKICAgICAgICAgICAgICAgICAgICBCaXRTdHVmZmVyLm9yaWdpbmFsVW5zdHVmZihzdHVmZmVkRGF0YSwgYmxvY2tEYXRhQnVmZmVyLCBiaXRzUGVyUGl4ZWwsIG51bUVsZW1lbnRzKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBCaXRTdHVmZmVyLnVuc3R1ZmYoc3R1ZmZlZERhdGEsIGJsb2NrRGF0YUJ1ZmZlciwgYml0c1BlclBpeGVsLCBudW1FbGVtZW50cywgZmFsc2UsIG9mZnNldCwgc2NhbGUsIHpNYXgpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgIH0sCgogICAgICAgIHJlYWRUaWxlczogZnVuY3Rpb24oaW5wdXQsIGRhdGEsIE91dFBpeGVsVHlwZUFycmF5KSB7CiAgICAgICAgICB2YXIgaGVhZGVySW5mbyA9IGRhdGEuaGVhZGVySW5mbzsKICAgICAgICAgIHZhciB3aWR0aCA9IGhlYWRlckluZm8ud2lkdGg7CiAgICAgICAgICB2YXIgaGVpZ2h0ID0gaGVhZGVySW5mby5oZWlnaHQ7CiAgICAgICAgICB2YXIgbWljcm9CbG9ja1NpemUgPSBoZWFkZXJJbmZvLm1pY3JvQmxvY2tTaXplOwogICAgICAgICAgdmFyIGltYWdlVHlwZSA9IGhlYWRlckluZm8uaW1hZ2VUeXBlOwogICAgICAgICAgdmFyIGRhdGFUeXBlU2l6ZSA9IExlcmMySGVscGVycy5nZXREYXRhVHlwZVNpemUoaW1hZ2VUeXBlKTsKICAgICAgICAgIHZhciBudW1CbG9ja3NYID0gTWF0aC5jZWlsKHdpZHRoIC8gbWljcm9CbG9ja1NpemUpOwogICAgICAgICAgdmFyIG51bUJsb2Nrc1kgPSBNYXRoLmNlaWwoaGVpZ2h0IC8gbWljcm9CbG9ja1NpemUpOwogICAgICAgICAgZGF0YS5waXhlbHMubnVtQmxvY2tzWSA9IG51bUJsb2Nrc1k7CiAgICAgICAgICBkYXRhLnBpeGVscy5udW1CbG9ja3NYID0gbnVtQmxvY2tzWDsKICAgICAgICAgIGRhdGEucGl4ZWxzLnB0ciA9IDA7CiAgICAgICAgICB2YXIgcm93ID0gMCwgY29sID0gMCwgYmxvY2tZID0gMCwgYmxvY2tYID0gMCwgdGhpc0Jsb2NrSGVpZ2h0ID0gMCwgdGhpc0Jsb2NrV2lkdGggPSAwLCBieXRlc0xlZnQgPSAwLCBoZWFkZXJCeXRlID0gMCwgYml0czY3ID0gMCwgdGVzdENvZGUgPSAwLCBvdXRQdHIgPSAwLCBvdXRTdHJpZGUgPSAwLCBudW1CeXRlcyA9IDAsIGJ5dGVzbGVmdCA9IDAsIHogPSAwLCBibG9ja1B0ciA9IDA7CiAgICAgICAgICB2YXIgdmlldywgYmxvY2ssIGFycmF5QnVmLCBzdG9yZTgsIHJhd0RhdGE7CiAgICAgICAgICB2YXIgYmxvY2tFbmNvZGluZzsKICAgICAgICAgIHZhciBibG9ja0RhdGFCdWZmZXIgPSBuZXcgT3V0UGl4ZWxUeXBlQXJyYXkobWljcm9CbG9ja1NpemUgKiBtaWNyb0Jsb2NrU2l6ZSk7CiAgICAgICAgICB2YXIgbGFzdEJsb2NrSGVpZ2h0ID0gKGhlaWdodCAlIG1pY3JvQmxvY2tTaXplKSB8fCBtaWNyb0Jsb2NrU2l6ZTsKICAgICAgICAgIHZhciBsYXN0QmxvY2tXaWR0aCA9ICh3aWR0aCAlIG1pY3JvQmxvY2tTaXplKSB8fCBtaWNyb0Jsb2NrU2l6ZTsKICAgICAgICAgIHZhciBvZmZzZXRUeXBlLCBvZmZzZXQ7CiAgICAgICAgICB2YXIgbnVtRGltcyA9IGhlYWRlckluZm8ubnVtRGltcywgaURpbTsKICAgICAgICAgIHZhciBtYXNrID0gZGF0YS5waXhlbHMucmVzdWx0TWFzazsKICAgICAgICAgIHZhciByZXN1bHRQaXhlbHMgPSBkYXRhLnBpeGVscy5yZXN1bHRQaXhlbHM7CiAgICAgICAgICBmb3IgKGJsb2NrWSA9IDA7IGJsb2NrWSA8IG51bUJsb2Nrc1k7IGJsb2NrWSsrKSB7CiAgICAgICAgICAgIHRoaXNCbG9ja0hlaWdodCA9IChibG9ja1kgIT09IG51bUJsb2Nrc1kgLSAxKSA/IG1pY3JvQmxvY2tTaXplIDogbGFzdEJsb2NrSGVpZ2h0OwogICAgICAgICAgICBmb3IgKGJsb2NrWCA9IDA7IGJsb2NrWCA8IG51bUJsb2Nrc1g7IGJsb2NrWCsrKSB7CiAgICAgICAgICAgICAgLy9jb25zb2xlLmRlYnVnKCJ5IiArIGJsb2NrWSArICIgeCIgKyBibG9ja1gpOwogICAgICAgICAgICAgIHRoaXNCbG9ja1dpZHRoID0gKGJsb2NrWCAhPT0gbnVtQmxvY2tzWCAtIDEpID8gbWljcm9CbG9ja1NpemUgOiBsYXN0QmxvY2tXaWR0aDsKCiAgICAgICAgICAgICAgb3V0UHRyID0gYmxvY2tZICogd2lkdGggKiBtaWNyb0Jsb2NrU2l6ZSArIGJsb2NrWCAqIG1pY3JvQmxvY2tTaXplOwogICAgICAgICAgICAgIG91dFN0cmlkZSA9IHdpZHRoIC0gdGhpc0Jsb2NrV2lkdGg7CgoKICAgICAgICAgICAgICBmb3IgKGlEaW0gPSAwOyBpRGltIDwgbnVtRGltczsgaURpbSsrKSB7CiAgICAgICAgICAgICAgICBpZiAobnVtRGltcyA+IDEpIHsKICAgICAgICAgICAgICAgICAgcmVzdWx0UGl4ZWxzID0gbmV3IE91dFBpeGVsVHlwZUFycmF5KGRhdGEucGl4ZWxzLnJlc3VsdFBpeGVscy5idWZmZXIsIHdpZHRoICogaGVpZ2h0ICogaURpbSAqIGRhdGFUeXBlU2l6ZSwgd2lkdGggKiBoZWlnaHQpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgYnl0ZXNMZWZ0ID0gaW5wdXQuYnl0ZUxlbmd0aCAtIGRhdGEucHRyOwogICAgICAgICAgICAgICAgdmlldyA9IG5ldyBEYXRhVmlldyhpbnB1dCwgZGF0YS5wdHIsIE1hdGgubWluKDEwLCBieXRlc0xlZnQpKTsKICAgICAgICAgICAgICAgIGJsb2NrID0ge307CiAgICAgICAgICAgICAgICBibG9ja1B0ciA9IDA7CiAgICAgICAgICAgICAgICBoZWFkZXJCeXRlID0gdmlldy5nZXRVaW50OCgwKTsKICAgICAgICAgICAgICAgIGJsb2NrUHRyKys7CiAgICAgICAgICAgICAgICBiaXRzNjcgPSAoaGVhZGVyQnl0ZSA+PiA2KSAmIDB4RkY7CiAgICAgICAgICAgICAgICB0ZXN0Q29kZSA9IChoZWFkZXJCeXRlID4+IDIpICYgMTU7ICAgIC8vIHVzZSBiaXRzIDIzNDUgZm9yIGludGVncml0eSBjaGVjawogICAgICAgICAgICAgICAgaWYgKHRlc3RDb2RlICE9PSAoKChibG9ja1ggKiBtaWNyb0Jsb2NrU2l6ZSkgPj4gMykgJiAxNSkpIHsKICAgICAgICAgICAgICAgICAgdGhyb3cgImludGVncml0eSBpc3N1ZSI7CiAgICAgICAgICAgICAgICAgIC8vcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGJsb2NrRW5jb2RpbmcgPSBoZWFkZXJCeXRlICYgMzsKICAgICAgICAgICAgICAgIGlmIChibG9ja0VuY29kaW5nID4gMykgewogICAgICAgICAgICAgICAgICBkYXRhLnB0ciArPSBibG9ja1B0cjsKICAgICAgICAgICAgICAgICAgdGhyb3cgIkludmFsaWQgYmxvY2sgZW5jb2RpbmcgKCIgKyBibG9ja0VuY29kaW5nICsgIikiOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSBpZiAoYmxvY2tFbmNvZGluZyA9PT0gMikgeyAvL2NvbnN0YW50IDAKICAgICAgICAgICAgICAgICAgZGF0YS5jb3VudGVyLmNvbnN0YW50Kys7CiAgICAgICAgICAgICAgICAgIGRhdGEucHRyICs9IGJsb2NrUHRyOwogICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKGJsb2NrRW5jb2RpbmcgPT09IDApIHsgIC8vdW5jb21wcmVzc2VkCiAgICAgICAgICAgICAgICAgIGRhdGEuY291bnRlci51bmNvbXByZXNzZWQrKzsKICAgICAgICAgICAgICAgICAgZGF0YS5wdHIgKz0gYmxvY2tQdHI7CiAgICAgICAgICAgICAgICAgIG51bUJ5dGVzID0gdGhpc0Jsb2NrSGVpZ2h0ICogdGhpc0Jsb2NrV2lkdGggKiBkYXRhVHlwZVNpemU7CiAgICAgICAgICAgICAgICAgIGJ5dGVzbGVmdCA9IGlucHV0LmJ5dGVMZW5ndGggLSBkYXRhLnB0cjsKICAgICAgICAgICAgICAgICAgbnVtQnl0ZXMgPSBudW1CeXRlcyA8IGJ5dGVzbGVmdCA/IG51bUJ5dGVzIDogYnl0ZXNsZWZ0OwogICAgICAgICAgICAgICAgICAvL2JpdCBhbGlnbm1lbnQKICAgICAgICAgICAgICAgICAgYXJyYXlCdWYgPSBuZXcgQXJyYXlCdWZmZXIoKG51bUJ5dGVzICUgZGF0YVR5cGVTaXplKSA9PT0gMCA/IG51bUJ5dGVzIDogKG51bUJ5dGVzICsgZGF0YVR5cGVTaXplIC0gbnVtQnl0ZXMgJSBkYXRhVHlwZVNpemUpKTsKICAgICAgICAgICAgICAgICAgc3RvcmU4ID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXlCdWYpOwogICAgICAgICAgICAgICAgICBzdG9yZTguc2V0KG5ldyBVaW50OEFycmF5KGlucHV0LCBkYXRhLnB0ciwgbnVtQnl0ZXMpKTsKICAgICAgICAgICAgICAgICAgcmF3RGF0YSA9IG5ldyBPdXRQaXhlbFR5cGVBcnJheShhcnJheUJ1Zik7CiAgICAgICAgICAgICAgICAgIHogPSAwOwogICAgICAgICAgICAgICAgICBpZiAobWFzaykgewogICAgICAgICAgICAgICAgICAgIGZvciAocm93ID0gMDsgcm93IDwgdGhpc0Jsb2NrSGVpZ2h0OyByb3crKykgewogICAgICAgICAgICAgICAgICAgICAgZm9yIChjb2wgPSAwOyBjb2wgPCB0aGlzQmxvY2tXaWR0aDsgY29sKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1hc2tbb3V0UHRyXSkgewogICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdFBpeGVsc1tvdXRQdHJdID0gcmF3RGF0YVt6KytdOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIG91dFB0cisrOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgb3V0UHRyICs9IG91dFN0cmlkZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgZWxzZSB7Ly9hbGwgdmFsaWQKICAgICAgICAgICAgICAgICAgICBmb3IgKHJvdyA9IDA7IHJvdyA8IHRoaXNCbG9ja0hlaWdodDsgcm93KyspIHsKICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29sID0gMDsgY29sIDwgdGhpc0Jsb2NrV2lkdGg7IGNvbCsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdFBpeGVsc1tvdXRQdHIrK10gPSByYXdEYXRhW3orK107CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICBvdXRQdHIgKz0gb3V0U3RyaWRlOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICBkYXRhLnB0ciArPSB6ICogZGF0YVR5cGVTaXplOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSB7IC8vMSBvciAzCiAgICAgICAgICAgICAgICAgIG9mZnNldFR5cGUgPSBMZXJjMkhlbHBlcnMuZ2V0RGF0YVR5cGVVc2VkKGltYWdlVHlwZSwgYml0czY3KTsKICAgICAgICAgICAgICAgICAgb2Zmc2V0ID0gTGVyYzJIZWxwZXJzLmdldE9uZVBpeGVsKGJsb2NrLCBibG9ja1B0ciwgb2Zmc2V0VHlwZSwgdmlldyk7CiAgICAgICAgICAgICAgICAgIGJsb2NrUHRyICs9IExlcmMySGVscGVycy5nZXREYXRhVHlwZVNpemUob2Zmc2V0VHlwZSk7CiAgICAgICAgICAgICAgICAgIGlmIChibG9ja0VuY29kaW5nID09PSAzKSAvL2NvbnN0YW50IG9mZnNldCB2YWx1ZQogICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgZGF0YS5wdHIgKz0gYmxvY2tQdHI7CiAgICAgICAgICAgICAgICAgICAgZGF0YS5jb3VudGVyLmNvbnN0YW50b2Zmc2V0Kys7CiAgICAgICAgICAgICAgICAgICAgLy95b3UgY2FuIGRlbGV0ZSB0aGUgZm9sbG93aW5nIHJlc3VsdE1hc2sgY2FzZSBpbiBmYXZvciBvZiBwZXJmb3JtYW5jZSBiZWNhdXNlIHZhbCBpcyBjb25zdGFudCBhbmQgdXNlcnMgdXNlIG5vZGF0YSBtYXNrLCBvdGhlcndpc2Ugbm9kYXRhdmFsdWUgcG9zdCBwcm9jZXNzaW5nIGhhbmRsZXMgaXQgdG9vLgogICAgICAgICAgICAgICAgICAgIC8vd2hpbGUgdGhlIGFib3ZlIHN0YXRlbWVudCBpcyB0cnVlLCB3ZSdyZSBub3QgZG9pbmcgaXQgYXMgd2Ugd2FudCB0byBrZWVwIGludmFsaWQgcGl4ZWwgdmFsdWUgYXQgMCByYXRoZXIgdGhhbiBhcmJpdHJhcnkgdmFsdWVzCiAgICAgICAgICAgICAgICAgICAgaWYgKG1hc2spIHsKICAgICAgICAgICAgICAgICAgICAgIGZvciAocm93ID0gMDsgcm93IDwgdGhpc0Jsb2NrSGVpZ2h0OyByb3crKykgewogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbCA9IDA7IGNvbCA8IHRoaXNCbG9ja1dpZHRoOyBjb2wrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtYXNrW291dFB0cl0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdFBpeGVsc1tvdXRQdHJdID0gb2Zmc2V0OwogICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRQdHIrKzsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBvdXRQdHIgKz0gb3V0U3RyaWRlOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgIGZvciAocm93ID0gMDsgcm93IDwgdGhpc0Jsb2NrSGVpZ2h0OyByb3crKykgewogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbCA9IDA7IGNvbCA8IHRoaXNCbG9ja1dpZHRoOyBjb2wrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdFBpeGVsc1tvdXRQdHIrK10gPSBvZmZzZXQ7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgb3V0UHRyICs9IG91dFN0cmlkZTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgZWxzZSB7IC8vYml0c3R1ZmYgZW5jb2RpbmcgaXMgMwogICAgICAgICAgICAgICAgICAgIGRhdGEucHRyICs9IGJsb2NrUHRyOwogICAgICAgICAgICAgICAgICAgIC8vaGVhdnkgbGlmdGluZwogICAgICAgICAgICAgICAgICAgIExlcmMySGVscGVycy5kZWNvZGVCaXRzKGlucHV0LCBkYXRhLCBibG9ja0RhdGFCdWZmZXIsIG9mZnNldCwgaURpbSk7CiAgICAgICAgICAgICAgICAgICAgYmxvY2tQdHIgPSAwOwogICAgICAgICAgICAgICAgICAgIGlmIChtYXNrKSB7CiAgICAgICAgICAgICAgICAgICAgICBmb3IgKHJvdyA9IDA7IHJvdyA8IHRoaXNCbG9ja0hlaWdodDsgcm93KyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb2wgPSAwOyBjb2wgPCB0aGlzQmxvY2tXaWR0aDsgY29sKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobWFza1tvdXRQdHJdKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRQaXhlbHNbb3V0UHRyXSA9IGJsb2NrRGF0YUJ1ZmZlcltibG9ja1B0cisrXTsKICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0UHRyKys7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgb3V0UHRyICs9IG91dFN0cmlkZTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICBmb3IgKHJvdyA9IDA7IHJvdyA8IHRoaXNCbG9ja0hlaWdodDsgcm93KyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb2wgPSAwOyBjb2wgPCB0aGlzQmxvY2tXaWR0aDsgY29sKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRQaXhlbHNbb3V0UHRyKytdID0gYmxvY2tEYXRhQnVmZmVyW2Jsb2NrUHRyKytdOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIG91dFB0ciArPSBvdXRTdHJpZGU7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwKCiAgICAgICAgLyoqKioqKioqKioqKioqKioqCiAgICAgICAgKiAgcHJpdmF0ZSBtZXRob2RzIChoZWxwZXIgbWV0aG9kcykKICAgICAgICAqKioqKioqKioqKioqKioqKi8KCiAgICAgICAgZm9ybWF0RmlsZUluZm86IGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICJmaWxlSWRlbnRpZmllclN0cmluZyI6IGRhdGEuaGVhZGVySW5mby5maWxlSWRlbnRpZmllclN0cmluZywKICAgICAgICAgICAgImZpbGVWZXJzaW9uIjogZGF0YS5oZWFkZXJJbmZvLmZpbGVWZXJzaW9uLAogICAgICAgICAgICAiaW1hZ2VUeXBlIjogZGF0YS5oZWFkZXJJbmZvLmltYWdlVHlwZSwKICAgICAgICAgICAgImhlaWdodCI6IGRhdGEuaGVhZGVySW5mby5oZWlnaHQsCiAgICAgICAgICAgICJ3aWR0aCI6IGRhdGEuaGVhZGVySW5mby53aWR0aCwKICAgICAgICAgICAgIm51bVZhbGlkUGl4ZWwiOiBkYXRhLmhlYWRlckluZm8ubnVtVmFsaWRQaXhlbCwKICAgICAgICAgICAgIm1pY3JvQmxvY2tTaXplIjogZGF0YS5oZWFkZXJJbmZvLm1pY3JvQmxvY2tTaXplLAogICAgICAgICAgICAiYmxvYlNpemUiOiBkYXRhLmhlYWRlckluZm8uYmxvYlNpemUsCiAgICAgICAgICAgICJtYXhaRXJyb3IiOiBkYXRhLmhlYWRlckluZm8ubWF4WkVycm9yLAogICAgICAgICAgICAicGl4ZWxUeXBlIjogTGVyYzJIZWxwZXJzLmdldFBpeGVsVHlwZShkYXRhLmhlYWRlckluZm8uaW1hZ2VUeXBlKSwKICAgICAgICAgICAgImVvZk9mZnNldCI6IGRhdGEuZW9mT2Zmc2V0LAogICAgICAgICAgICAibWFzayI6IGRhdGEubWFzayA/IHsKICAgICAgICAgICAgICAibnVtQnl0ZXMiOiBkYXRhLm1hc2subnVtQnl0ZXMKICAgICAgICAgICAgfSA6IG51bGwsCiAgICAgICAgICAgICJwaXhlbHMiOiB7CiAgICAgICAgICAgICAgIm51bUJsb2Nrc1giOiBkYXRhLnBpeGVscy5udW1CbG9ja3NYLAogICAgICAgICAgICAgICJudW1CbG9ja3NZIjogZGF0YS5waXhlbHMubnVtQmxvY2tzWSwKICAgICAgICAgICAgICAvLyJudW1CeXRlcyI6IGRhdGEucGl4ZWxzLm51bUJ5dGVzLAogICAgICAgICAgICAgICJtYXhWYWx1ZSI6IGRhdGEuaGVhZGVySW5mby56TWF4LAogICAgICAgICAgICAgICJtaW5WYWx1ZSI6IGRhdGEuaGVhZGVySW5mby56TWluLAogICAgICAgICAgICAgICJub0RhdGFWYWx1ZSI6IGRhdGEubm9EYXRhVmFsdWUKICAgICAgICAgICAgfQogICAgICAgICAgfTsKICAgICAgICB9LAoKICAgICAgICBjb25zdHJ1Y3RDb25zdGFudFN1cmZhY2U6IGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgICAgIHZhciB2YWwgPSBkYXRhLmhlYWRlckluZm8uek1heDsKICAgICAgICAgIHZhciBudW1EaW1zID0gIGRhdGEuaGVhZGVySW5mby5udW1EaW1zOwogICAgICAgICAgdmFyIG51bVBpeGVscyA9IGRhdGEuaGVhZGVySW5mby5oZWlnaHQgKiBkYXRhLmhlYWRlckluZm8ud2lkdGg7CiAgICAgICAgICB2YXIgbnVtUGl4ZWxBbGxEaW1zID0gbnVtUGl4ZWxzICogbnVtRGltczsKICAgICAgICAgIHZhciBpPTAsIGsgPSAwLCBuU3RhcnQ9MDsKICAgICAgICAgIHZhciBtYXNrID0gZGF0YS5waXhlbHMucmVzdWx0TWFzazsKICAgICAgICAgIGlmIChtYXNrKSB7CiAgICAgICAgICAgIGlmIChudW1EaW1zID4gMSkgewogICAgICAgICAgICAgIGZvciAoaT0wOyBpIDwgbnVtRGltczsgaSsrKSB7CiAgICAgICAgICAgICAgICBuU3RhcnQgPSBpICogbnVtUGl4ZWxzOwogICAgICAgICAgICAgICAgZm9yIChrID0gMDsgayA8IG51bVBpeGVsczsgaysrKSB7CiAgICAgICAgICAgICAgICAgIGlmIChtYXNrW2tdKSB7CiAgICAgICAgICAgICAgICAgICAgZGF0YS5waXhlbHMucmVzdWx0UGl4ZWxzW25TdGFydCArIGtdID0gdmFsOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgIGZvciAoayA9IDA7IGsgPCBudW1QaXhlbHM7IGsrKykgewogICAgICAgICAgICAgICAgaWYgKG1hc2tba10pIHsKICAgICAgICAgICAgICAgICAgZGF0YS5waXhlbHMucmVzdWx0UGl4ZWxzW2tdID0gdmFsOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIGlmIChkYXRhLnBpeGVscy5yZXN1bHRQaXhlbHMuZmlsbCkgewogICAgICAgICAgICAgIGRhdGEucGl4ZWxzLnJlc3VsdFBpeGVscy5maWxsKHZhbCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgZm9yIChrID0gMDsgayA8IG51bVBpeGVsQWxsRGltczsgaysrKSB7CiAgICAgICAgICAgICAgICBkYXRhLnBpeGVscy5yZXN1bHRQaXhlbHNba10gPSB2YWw7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfSwKCiAgICAgICAgZ2V0RGF0YVR5cGVBcnJheTogZnVuY3Rpb24odCkgewogICAgICAgICAgdmFyIHRwOwogICAgICAgICAgc3dpdGNoICh0KSB7CiAgICAgICAgICAgIGNhc2UgMDogLy9jaGFyCiAgICAgICAgICAgICAgdHAgPSBJbnQ4QXJyYXk7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgMTogLy9ieXRlCiAgICAgICAgICAgICAgdHAgPSBVaW50OEFycmF5OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDI6IC8vc2hvcnQKICAgICAgICAgICAgICB0cCA9IEludDE2QXJyYXk7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgMzogLy91c2hvcnQKICAgICAgICAgICAgICB0cCA9IFVpbnQxNkFycmF5OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgdHAgPSBJbnQzMkFycmF5OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgdHAgPSBVaW50MzJBcnJheTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgIHRwID0gRmxvYXQzMkFycmF5OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgdHAgPSBGbG9hdDY0QXJyYXk7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgdHAgPSBGbG9hdDMyQXJyYXk7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gdHA7CiAgICAgICAgfSwKCiAgICAgICAgZ2V0UGl4ZWxUeXBlOiBmdW5jdGlvbih0KSB7CiAgICAgICAgICB2YXIgdHA7CiAgICAgICAgICBzd2l0Y2ggKHQpIHsKICAgICAgICAgICAgY2FzZSAwOiAvL2NoYXIKICAgICAgICAgICAgICB0cCA9ICJTOCI7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgMTogLy9ieXRlCiAgICAgICAgICAgICAgdHAgPSAiVTgiOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDI6IC8vc2hvcnQKICAgICAgICAgICAgICB0cCA9ICJTMTYiOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDM6IC8vdXNob3J0CiAgICAgICAgICAgICAgdHAgPSAiVTE2IjsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIHRwID0gIlMzMiI7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICB0cCA9ICJVMzIiOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgdHAgPSAiRjMyIjsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgIHRwID0gIkY2NCI7IC8vbm90IHN1cHBvcnRlZAogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgIHRwID0gIkYzMiI7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gdHA7CiAgICAgICAgfSwKCiAgICAgICAgaXNWYWxpZFBpeGVsVmFsdWU6IGZ1bmN0aW9uKHQsIHZhbCkgewogICAgICAgICAgaWYgKHZhbCA9PSBudWxsKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIH0KICAgICAgICAgIHZhciBpc1ZhbGlkOwogICAgICAgICAgc3dpdGNoICh0KSB7CiAgICAgICAgICAgIGNhc2UgMDogLy9jaGFyCiAgICAgICAgICAgICAgaXNWYWxpZCA9IHZhbCA+PSAtMTI4ICYmIHZhbCA8PSAxMjc7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgMTogLy9ieXRlICAodW5zaWduZWQgY2hhcikKICAgICAgICAgICAgICBpc1ZhbGlkID0gdmFsID49IDAgJiYgdmFsIDw9IDI1NTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAyOiAvL3Nob3J0CiAgICAgICAgICAgICAgaXNWYWxpZCA9IHZhbCA+PSAtMzI3NjggJiYgdmFsIDw9IDMyNzY3OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDM6IC8vdXNob3J0CiAgICAgICAgICAgICAgaXNWYWxpZCA9IHZhbCA+PSAwICYmIHZhbCA8PSA2NTUzNjsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSA0OiAvL2ludCAzMgogICAgICAgICAgICAgIGlzVmFsaWQgPSB2YWwgPj0gLTIxNDc0ODM2NDggJiYgdmFsIDw9IDIxNDc0ODM2NDc7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgNTogLy91aW5pdCAzMgogICAgICAgICAgICAgIGlzVmFsaWQgPSB2YWwgPj0gMCAmJiB2YWwgPD0gNDI5NDk2NzI5NjsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgIGlzVmFsaWQgPSB2YWwgPj0gLTMuNDAyNzk5OTM4NzkwMTQ4NGUrMzggJiYgdmFsIDw9IDMuNDAyNzk5OTM4NzkwMTQ4NGUrMzg7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICBpc1ZhbGlkID0gdmFsID49IDVlLTMyNCAmJiB2YWwgPD0gMS43OTc2OTMxMzQ4NjIzMTU3ZSszMDg7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgaXNWYWxpZCA9IGZhbHNlOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGlzVmFsaWQ7CiAgICAgICAgfSwKCiAgICAgICAgZ2V0RGF0YVR5cGVTaXplOiBmdW5jdGlvbih0KSB7CiAgICAgICAgICB2YXIgcyA9IDA7CiAgICAgICAgICBzd2l0Y2ggKHQpIHsKICAgICAgICAgICAgY2FzZSAwOiAvL3VieXRlCiAgICAgICAgICAgIGNhc2UgMTogLy9ieXRlCiAgICAgICAgICAgICAgcyA9IDE7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgMjogLy9zaG9ydAogICAgICAgICAgICBjYXNlIDM6IC8vdXNob3J0CiAgICAgICAgICAgICAgcyA9IDI7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgcyA9IDQ7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICBzID0gODsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICBzID0gdDsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBzOwogICAgICAgIH0sCgogICAgICAgIGdldERhdGFUeXBlVXNlZDogZnVuY3Rpb24oZHQsIHRjKSB7CiAgICAgICAgICB2YXIgdCA9IGR0OwogICAgICAgICAgc3dpdGNoIChkdCkgewogICAgICAgICAgICBjYXNlIDI6IC8vc2hvcnQKICAgICAgICAgICAgY2FzZSA0OiAvL2xvbmcKICAgICAgICAgICAgICB0ID0gZHQgLSB0YzsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAzOiAvL3VzaG9ydAogICAgICAgICAgICBjYXNlIDU6IC8vdWxvbmcKICAgICAgICAgICAgICB0ID0gZHQgLSAyICogdGM7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgNjogLy9mbG9hdAogICAgICAgICAgICAgIGlmICgwID09PSB0YykgewogICAgICAgICAgICAgICAgdCA9IGR0OwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBlbHNlIGlmICgxID09PSB0YykgewogICAgICAgICAgICAgICAgdCA9IDI7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgdCA9IDE7Ly9ieXRlCiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDc6IC8vZG91YmxlCiAgICAgICAgICAgICAgaWYgKDAgPT09IHRjKSB7CiAgICAgICAgICAgICAgICB0ID0gZHQ7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgdCA9IGR0IC0gMiAqIHRjICsgMTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgdCA9IGR0OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHQ7CiAgICAgICAgfSwKCiAgICAgICAgZ2V0T25lUGl4ZWw6IGZ1bmN0aW9uKGJsb2NrLCBibG9ja1B0ciwgb2Zmc2V0VHlwZSwgdmlldykgewogICAgICAgICAgdmFyIHRlbXAgPSAwOwogICAgICAgICAgc3dpdGNoIChvZmZzZXRUeXBlKSB7CiAgICAgICAgICAgIGNhc2UgMDogLy9jaGFyCiAgICAgICAgICAgICAgdGVtcCA9IHZpZXcuZ2V0SW50OChibG9ja1B0cik7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgMTogLy9ieXRlCiAgICAgICAgICAgICAgdGVtcCA9IHZpZXcuZ2V0VWludDgoYmxvY2tQdHIpOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgdGVtcCA9IHZpZXcuZ2V0SW50MTYoYmxvY2tQdHIsIHRydWUpOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgdGVtcCA9IHZpZXcuZ2V0VWludDE2KGJsb2NrUHRyLCB0cnVlKTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIHRlbXAgPSB2aWV3LmdldEludDMyKGJsb2NrUHRyLCB0cnVlKTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIHRlbXAgPSB2aWV3LmdldFVJbnQzMihibG9ja1B0ciwgdHJ1ZSk7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICB0ZW1wID0gdmlldy5nZXRGbG9hdDMyKGJsb2NrUHRyLCB0cnVlKTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgIC8vdGVtcCA9IHZpZXcuZ2V0RmxvYXQ2NChibG9ja1B0ciwgdHJ1ZSk7CiAgICAgICAgICAgICAgLy9ibG9ja1B0ciArPSA4OwogICAgICAgICAgICAgIC8vbGVyYzIgZW5jb2RpbmcgZG9lc250IGhhbmRsZSBmbG9hdCA2NCwgZm9yY2UgdG8gZmxvYXQzMj8/PwogICAgICAgICAgICAgIHRlbXAgPSB2aWV3LmdldEZsb2F0NjQoYmxvY2tQdHIsIHRydWUpOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgIHRocm93ICgidGhlIGRlY29kZXIgZG9lcyBub3QgdW5kZXJzdGFuZCB0aGlzIHBpeGVsIHR5cGUiKTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiB0ZW1wOwogICAgICAgIH0KICAgICAgfTsKCiAgICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKICAgICAgKnByaXZhdGUgY2xhc3MgZm9yIGEgdHJlZSBub2RlLiBIdWZmbWFuIGNvZGUgaXMgaW4gTGVyYzJIZWxwZXJzCiAgICAgICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCiAgICAgIHZhciBUcmVlTm9kZSA9IGZ1bmN0aW9uKHZhbCwgbGVmdCwgcmlnaHQpIHsKICAgICAgICB0aGlzLnZhbCA9IHZhbDsKICAgICAgICB0aGlzLmxlZnQgPSBsZWZ0OwogICAgICAgIHRoaXMucmlnaHQgPSByaWdodDsKICAgICAgfTsKCiAgICAgIHZhciBMZXJjMkRlY29kZSA9IHsKICAgICAgICAvKgogICAgICAgICogKioqKioqKipyZW1vdmVkIG9wdGlvbnMgY29tcGFyZWQgdG8gTEVSQzEuIFdlIGNhbiBicmluZyBzb21lIG9mIHRoZW0gYmFjayBpZiBuZWVkZWQuCiAgICAgICAgICogcmVtb3ZlZCBwaXhlbCB0eXBlLiBMRVJDMiBpcyB0eXBlZCBhbmQgZG9lc24ndCByZXF1aXJlIHVzZXIgdG8gZ2l2ZSBwaXhlbCB0eXBlCiAgICAgICAgICogY2hhbmdlZCBlbmNvZGVkTWFza0RhdGEgdG8gbWFza0RhdGEuIExFUkMyICdzIGpzIHZlcnNpb24gbWFrZSBpdCBmYXN0ZXIgdG8gdXNlIG1hc2tEYXRhIGRpcmVjdGx5LgogICAgICAgICAqIHJlbW92ZWQgcmV0dXJuTWFzay4gbWFzayBpcyB1c2VkIGJ5IExFUkMyIGludGVybmFsbHkgYW5kIGlzIGNvc3QgZnJlZS4gSW4gY2FzZSBvZiB1c2VyIGlucHV0IG1hc2ssIGl0J3MgcmV0dXJuZWQgYXMgd2VsbCBhbmQgaGFzIG5lZ2xpYmxlIGNvc3QuCiAgICAgICAgICogcmVtb3ZlZCBub2RhdGF2YWx1ZS4gQmVjYXVzZSBMRVJDMiBwaXhlbHMgYXJlIHR5cGVkLCBub2RhdGF2YWx1ZSB3aWxsIHNhY3JpZnkgYSB1c2VmdWwgdmFsdWUgZm9yIG1hbnkgdHlwZXMgKDhiaXQsIDE2Yml0KSBldGMsCiAgICAgICAgICogICAgICAgdXNlciBoYXMgdG8gYmUga25vd2xlZGdhYmxlIGVub3VnaCBhYm91dCByYXN0ZXIgYW5kIHRoZWlyIGRhdGEgdG8gYXZvaWQgdXNhYmlsaXR5IGlzc3Vlcy4gc28gbm9kYXRhIHZhbHVlIGlzIHNpbXBseSByZW1vdmVkIG5vdy4KICAgICAgICAgKiAgICAgICBXZSBjYW4gYWRkIGl0IGJhY2sgbGF0ZXIgaWYgdGhlaXIncyBhIGNsZWFyIHJlcXVpcmVtZW50LgogICAgICAgICAqIHJlbW92ZWQgZW5jb2RlZE1hc2suIFRoaXMgb3B0aW9uIHdhcyBub3QgaW1wbGVtZW50ZWQgaW4gTGVyY0RlY29kZS4gSXQgY2FuIGJlIGRvbmUgYWZ0ZXIgZGVjb2RpbmcgKGxlc3MgZWZmaWNpZW50KQogICAgICAgICAqIHJlbW92ZWQgY29tcHV0ZVVzZWRCaXREZXB0aHMuCiAgICAgICAgICoKICAgICAgICAgKgogICAgICAgICAqIHJlc3BvbnNlIGNoYW5nZXMgY29tcGFyZWQgdG8gTEVSQzEKICAgICAgICAgKiAxLiBlbmNvZGVkTWFza0RhdGEgaXMgbm90IGF2YWlsYWJsZQogICAgICAgICAqIDIuIG5vRGF0YVZhbHVlIGlzIG9wdGlvbmFsIChyZXR1cm5zIG9ubHkgaWYgdXNlcidzIG5vRGF0YVZhbHVlIGlzIHdpdGggaW4gdGhlIHZhbGlkIGRhdGEgdHlwZSByYW5nZSkKICAgICAgICAgKiAzLiBtYXNrRGF0YSBpcyBhbHdheXMgYXZhaWxhYmxlCiAgICAgICAgKi8KICAgICAgICAvKioqKioqKioqKioqKioqKioKICAgICAgICAqICBwdWJsaWMgcHJvcGVydGllcwogICAgICAgICoqKioqKioqKioqKioqKioqKi8KICAgICAgICAvL0hVRkZNQU5fTFVUX0JJVFNfTUFYOiAxMiwgLy91c2UgMl4xMiBsdXQsIG5vdCBjb25maWd1cmFibGUKCiAgICAgICAgLyoqKioqKioqKioqKioqKioqCiAgICAgICAgKiAgcHVibGljIG1ldGhvZHMKICAgICAgICAqKioqKioqKioqKioqKioqKi8KCiAgICAgICAgLyoqCiAgICAgICAgICogRGVjb2RlIGEgTEVSQzIgYnl0ZSBzdHJlYW0gYW5kIHJldHVybiBhbiBvYmplY3QgY29udGFpbmluZyB0aGUgcGl4ZWwgZGF0YSBhbmQgb3B0aW9uYWwgbWV0YWRhdGEuCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0ge0FycmF5QnVmZmVyfSBpbnB1dCBUaGUgTEVSQyBpbnB1dCBieXRlIHN0cmVhbQogICAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9uc10gb3B0aW9ucyBEZWNvZGluZyBvcHRpb25zCiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLmlucHV0T2Zmc2V0XSBUaGUgbnVtYmVyIG9mIGJ5dGVzIHRvIHNraXAgaW4gdGhlIGlucHV0IGJ5dGUgc3RyZWFtLiBBIHZhbGlkIExFUkMgZmlsZSBpcyBleHBlY3RlZCBhdCB0aGF0IHBvc2l0aW9uCiAgICAgICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5yZXR1cm5GaWxlSW5mb10gSWYgdHJ1ZSwgdGhlIHJldHVybiB2YWx1ZSB3aWxsIGhhdmUgYSBmaWxlSW5mbyBwcm9wZXJ0eSB0aGF0IGNvbnRhaW5zIG1ldGFkYXRhIG9idGFpbmVkIGZyb20gdGhlIExFUkMgaGVhZGVycyBhbmQgdGhlIGRlY29kaW5nIHByb2Nlc3MKICAgICAgICAgKi8KICAgICAgICBkZWNvZGU6IGZ1bmN0aW9uKC8qYnl0ZSBhcnJheSovIGlucHV0LCAvKm9iamVjdCovIG9wdGlvbnMpIHsKICAgICAgICAgIC8vY3VycmVudGx5IHRoZXJlJ3MgYSBidWcgaW4gdGhlIHNwYXJzZSBhcnJheSwgc28gcGxlYXNlIGRvIG5vdCBzZXQgdG8gZmFsc2UKICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9OwogICAgICAgICAgdmFyIG5vRGF0YVZhbHVlID0gb3B0aW9ucy5ub0RhdGFWYWx1ZTsKCiAgICAgICAgICAvL2luaXRpYWxpemUKICAgICAgICAgIHZhciBpID0gMCwgZGF0YSA9IHt9OwogICAgICAgICAgZGF0YS5wdHIgPSBvcHRpb25zLmlucHV0T2Zmc2V0IHx8IDA7CiAgICAgICAgICBkYXRhLnBpeGVscyA9IHt9OwoKICAgICAgICAgIC8vIEZpbGUgaGVhZGVyCiAgICAgICAgICBpZiAoIUxlcmMySGVscGVycy5yZWFkSGVhZGVySW5mbyhpbnB1dCwgZGF0YSkpIDsKICAgICAgICAgIHZhciBoZWFkZXJJbmZvID0gZGF0YS5oZWFkZXJJbmZvOwogICAgICAgICAgdmFyIGZpbGVWZXJzaW9uID0gaGVhZGVySW5mby5maWxlVmVyc2lvbjsKICAgICAgICAgIHZhciBPdXRQaXhlbFR5cGVBcnJheSA9IExlcmMySGVscGVycy5nZXREYXRhVHlwZUFycmF5KGhlYWRlckluZm8uaW1hZ2VUeXBlKTsKCiAgICAgICAgICAvLyBNYXNrIEhlYWRlcgogICAgICAgICAgTGVyYzJIZWxwZXJzLnJlYWRNYXNrKGlucHV0LCBkYXRhKTsKICAgICAgICAgIGlmIChoZWFkZXJJbmZvLm51bVZhbGlkUGl4ZWwgIT09IGhlYWRlckluZm8ud2lkdGggKiBoZWFkZXJJbmZvLmhlaWdodCAmJiAhZGF0YS5waXhlbHMucmVzdWx0TWFzaykgewogICAgICAgICAgICBkYXRhLnBpeGVscy5yZXN1bHRNYXNrID0gb3B0aW9ucy5tYXNrRGF0YTsKICAgICAgICAgIH0KCiAgICAgICAgICB2YXIgbnVtUGl4ZWxzID0gaGVhZGVySW5mby53aWR0aCAqIGhlYWRlckluZm8uaGVpZ2h0OwogICAgICAgICAgZGF0YS5waXhlbHMucmVzdWx0UGl4ZWxzID0gbmV3IE91dFBpeGVsVHlwZUFycmF5KG51bVBpeGVscyAqIGhlYWRlckluZm8ubnVtRGltcyk7CgogICAgICAgICAgZGF0YS5jb3VudGVyID0gewogICAgICAgICAgICBvbmVzd2VlcDogMCwKICAgICAgICAgICAgdW5jb21wcmVzc2VkOiAwLAogICAgICAgICAgICBsdXQ6IDAsCiAgICAgICAgICAgIGJpdHN0dWZmZXI6IDAsCiAgICAgICAgICAgIGNvbnN0YW50OiAwLAogICAgICAgICAgICBjb25zdGFudG9mZnNldDogMAogICAgICAgICAgfTsKICAgICAgICAgIGlmIChoZWFkZXJJbmZvLm51bVZhbGlkUGl4ZWwgIT09IDApIHsKICAgICAgICAgICAgLy9ub3QgdGVzdGVkCiAgICAgICAgICAgIGlmIChoZWFkZXJJbmZvLnpNYXggPT09IGhlYWRlckluZm8uek1pbikgLy9jb25zdGFudCBzdXJmYWNlCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBMZXJjMkhlbHBlcnMuY29uc3RydWN0Q29uc3RhbnRTdXJmYWNlKGRhdGEpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgaWYgKGZpbGVWZXJzaW9uID49IDQgJiYgTGVyYzJIZWxwZXJzLmNoZWNrTWluTWF4UmFuZ2VzKGlucHV0LCBkYXRhKSkgewogICAgICAgICAgICAgIExlcmMySGVscGVycy5jb25zdHJ1Y3RDb25zdGFudFN1cmZhY2UoZGF0YSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgdmFyIHZpZXcgPSBuZXcgRGF0YVZpZXcoaW5wdXQsIGRhdGEucHRyLCAyKTsKICAgICAgICAgICAgICB2YXIgYlJlYWREYXRhT25lU3dlZXAgPSB2aWV3LmdldFVpbnQ4KDApOwogICAgICAgICAgICAgIGRhdGEucHRyKys7CiAgICAgICAgICAgICAgaWYgKGJSZWFkRGF0YU9uZVN3ZWVwKSB7CiAgICAgICAgICAgICAgICAvL2NvbnNvbGUuZGVidWcoIk9uZVN3ZWVwIik7CiAgICAgICAgICAgICAgICBMZXJjMkhlbHBlcnMucmVhZERhdGFPbmVTd2VlcChpbnB1dCwgZGF0YSwgT3V0UGl4ZWxUeXBlQXJyYXkpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIC8vbGVyYzIuMTogLy9iaXRzdHVmZmluZyArIGx1dAogICAgICAgICAgICAgICAgLy9sZXJjMi4yOiAvL2JpdHN0dWZmaW5nICsgbHV0ICsgaHVmZm1hbgogICAgICAgICAgICAgICAgLy9sZXJjMi4zOiBuZXcgYml0c3R1ZmZlcgogICAgICAgICAgICAgICAgaWYgKGZpbGVWZXJzaW9uID4gMSAmJiBoZWFkZXJJbmZvLmltYWdlVHlwZSA8PSAxICYmIE1hdGguYWJzKGhlYWRlckluZm8ubWF4WkVycm9yIC0gMC41KSA8IDAuMDAwMDEpIHsKICAgICAgICAgICAgICAgICAgLy90aGlzIGlzIDIueCBwbHVzIDggYml0ICh1bnNpZ25lZCBhbmQgc2lnbmVkKSBkYXRhLCBwb3NzaWJsaXR5IG9mIEh1ZmZtYW4KICAgICAgICAgICAgICAgICAgdmFyIGZsYWdIdWZmbWFuID0gdmlldy5nZXRVaW50OCgxKTsKICAgICAgICAgICAgICAgICAgZGF0YS5wdHIrKzsKICAgICAgICAgICAgICAgICAgZGF0YS5lbmNvZGVNb2RlID0gZmxhZ0h1ZmZtYW47CiAgICAgICAgICAgICAgICAgIGlmIChmbGFnSHVmZm1hbiA+IDIgfHwgKGZpbGVWZXJzaW9uIDwgNCAmJiBmbGFnSHVmZm1hbiA+IDEpKSB7CiAgICAgICAgICAgICAgICAgICAgdGhyb3cgIkludmFsaWQgSHVmZm1hbiBmbGFnICIgKyBmbGFnSHVmZm1hbjsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICBpZiAoZmxhZ0h1ZmZtYW4pIHsvLzEgLSBkZWx0YSBIdWZmbWFuLCAyIC0gSHVmZm1hbgogICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coIkh1ZmZtYW4iKTsKICAgICAgICAgICAgICAgICAgICBMZXJjMkhlbHBlcnMucmVhZEh1ZmZtYW4oaW5wdXQsIGRhdGEsIE91dFBpeGVsVHlwZUFycmF5KTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCJUaWxlcyIpOwogICAgICAgICAgICAgICAgICAgIExlcmMySGVscGVycy5yZWFkVGlsZXMoaW5wdXQsIGRhdGEsIE91dFBpeGVsVHlwZUFycmF5KTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSB7IC8vbGVyYzIueCBub24tOCBiaXQgZGF0YQogICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCJUaWxlcyIpOwogICAgICAgICAgICAgICAgICBMZXJjMkhlbHBlcnMucmVhZFRpbGVzKGlucHV0LCBkYXRhLCBPdXRQaXhlbFR5cGVBcnJheSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgZGF0YS5lb2ZPZmZzZXQgPSBkYXRhLnB0cjsKICAgICAgICAgIHZhciBkaWZmOwogICAgICAgICAgaWYgKG9wdGlvbnMuaW5wdXRPZmZzZXQpIHsKICAgICAgICAgICAgZGlmZiA9IGRhdGEuaGVhZGVySW5mby5ibG9iU2l6ZSArIG9wdGlvbnMuaW5wdXRPZmZzZXQgLSBkYXRhLnB0cjsKICAgICAgICAgICAgaWYgKE1hdGguYWJzKGRpZmYpID49IDEpIHsKICAgICAgICAgICAgICAvL2NvbnNvbGUuZGVidWcoImluY29ycmVjdCBlb2Y6IGRhdGFwdHIgIiArIGRhdGEucHRyICsgIiBvZmZzZXQgIiArIG9wdGlvbnMuaW5wdXRPZmZzZXQgKyAiIGJsb2JzaXplICIgKyBkYXRhLmhlYWRlckluZm8uYmxvYlNpemUgKyAiIGRpZmY6ICIgKyBkaWZmKTsKICAgICAgICAgICAgICBkYXRhLmVvZk9mZnNldCA9IG9wdGlvbnMuaW5wdXRPZmZzZXQgKyBkYXRhLmhlYWRlckluZm8uYmxvYlNpemU7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGVsc2UgewogICAgICAgICAgICBkaWZmID0gZGF0YS5oZWFkZXJJbmZvLmJsb2JTaXplIC0gZGF0YS5wdHI7CiAgICAgICAgICAgIGlmIChNYXRoLmFicyhkaWZmKSA+PSAxKSB7CiAgICAgICAgICAgICAgLy9jb25zb2xlLmRlYnVnKCJpbmNvcnJlY3QgZmlyc3QgYmFuZCBlb2Y6IGRhdGFwdHIgIiArIGRhdGEucHRyICsgIiBibG9ic2l6ZSAiICsgZGF0YS5oZWFkZXJJbmZvLmJsb2JTaXplICsgIiBkaWZmOiAiICsgZGlmZik7CiAgICAgICAgICAgICAgZGF0YS5lb2ZPZmZzZXQgPSBkYXRhLmhlYWRlckluZm8uYmxvYlNpemU7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICB2YXIgcmVzdWx0ID0gewogICAgICAgICAgICB3aWR0aDogaGVhZGVySW5mby53aWR0aCwKICAgICAgICAgICAgaGVpZ2h0OiBoZWFkZXJJbmZvLmhlaWdodCwKICAgICAgICAgICAgcGl4ZWxEYXRhOiBkYXRhLnBpeGVscy5yZXN1bHRQaXhlbHMsCiAgICAgICAgICAgIG1pblZhbHVlOiBoZWFkZXJJbmZvLnpNaW4sCiAgICAgICAgICAgIG1heFZhbHVlOiBoZWFkZXJJbmZvLnpNYXgsCiAgICAgICAgICAgIHZhbGlkUGl4ZWxDb3VudDogaGVhZGVySW5mby5udW1WYWxpZFBpeGVsLAogICAgICAgICAgICBkaW1Db3VudDogaGVhZGVySW5mby5udW1EaW1zLAogICAgICAgICAgICBkaW1TdGF0czogewogICAgICAgICAgICAgIG1pblZhbHVlczogaGVhZGVySW5mby5taW5WYWx1ZXMsCiAgICAgICAgICAgICAgbWF4VmFsdWVzOiBoZWFkZXJJbmZvLm1heFZhbHVlcwogICAgICAgICAgICB9LAogICAgICAgICAgICBtYXNrRGF0YTogZGF0YS5waXhlbHMucmVzdWx0TWFzawogICAgICAgICAgICAvL25vRGF0YVZhbHVlOiBub0RhdGFWYWx1ZQogICAgICAgICAgfTsKCiAgICAgICAgICAvL3dlIHNob3VsZCByZW1vdmUgdGhpcyBpZiB0aGVyZSdzIG5vIGV4aXN0aW5nIGNsaWVudAogICAgICAgICAgLy9vcHRpb25hbCBub0RhdGFWYWx1ZSBwcm9jZXNzaW5nLCBpdCdzIHVzZXIncyByZXNwb25zaWJsaXR5CiAgICAgICAgICBpZiAoZGF0YS5waXhlbHMucmVzdWx0TWFzayAmJiBMZXJjMkhlbHBlcnMuaXNWYWxpZFBpeGVsVmFsdWUoaGVhZGVySW5mby5pbWFnZVR5cGUsIG5vRGF0YVZhbHVlKSkgewogICAgICAgICAgICB2YXIgbWFzayA9IGRhdGEucGl4ZWxzLnJlc3VsdE1hc2s7CiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBudW1QaXhlbHM7IGkrKykgewogICAgICAgICAgICAgIGlmICghbWFza1tpXSkgewogICAgICAgICAgICAgICAgcmVzdWx0LnBpeGVsRGF0YVtpXSA9IG5vRGF0YVZhbHVlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICByZXN1bHQubm9EYXRhVmFsdWUgPSBub0RhdGFWYWx1ZTsKICAgICAgICAgIH0KICAgICAgICAgIGRhdGEubm9EYXRhVmFsdWUgPSBub0RhdGFWYWx1ZTsKICAgICAgICAgIGlmIChvcHRpb25zLnJldHVybkZpbGVJbmZvKSB7CiAgICAgICAgICAgIHJlc3VsdC5maWxlSW5mbyA9IExlcmMySGVscGVycy5mb3JtYXRGaWxlSW5mbyhkYXRhKTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgfSwKCiAgICAgICAgZ2V0QmFuZENvdW50OiBmdW5jdGlvbigvKmJ5dGUgYXJyYXkqLyBpbnB1dCkgewogICAgICAgICAgdmFyIGNvdW50ID0gMDsKICAgICAgICAgIHZhciBpID0gMDsKICAgICAgICAgIHZhciB0ZW1wID0ge307CiAgICAgICAgICB0ZW1wLnB0ciA9IDA7CiAgICAgICAgICB0ZW1wLnBpeGVscyA9IHt9OwogICAgICAgICAgd2hpbGUgKGkgPCBpbnB1dC5ieXRlTGVuZ3RoIC0gNTgpIHsKICAgICAgICAgICAgTGVyYzJIZWxwZXJzLnJlYWRIZWFkZXJJbmZvKGlucHV0LCB0ZW1wKTsKICAgICAgICAgICAgaSArPSB0ZW1wLmhlYWRlckluZm8uYmxvYlNpemU7CiAgICAgICAgICAgIGNvdW50Kys7CiAgICAgICAgICAgIHRlbXAucHRyID0gaTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBjb3VudDsKICAgICAgICB9CiAgICAgIH07CgogICAgICByZXR1cm4gTGVyYzJEZWNvZGU7CiAgICB9KSgpOwoKICAgIHZhciBpc1BsYXRmb3JtTGl0dGxlRW5kaWFuID0gKGZ1bmN0aW9uKCkgewogICAgICB2YXIgYSA9IG5ldyBBcnJheUJ1ZmZlcig0KTsKICAgICAgdmFyIGIgPSBuZXcgVWludDhBcnJheShhKTsKICAgICAgdmFyIGMgPSBuZXcgVWludDMyQXJyYXkoYSk7CiAgICAgIGNbMF0gPSAxOwogICAgICByZXR1cm4gYlswXSA9PT0gMTsKICAgIH0pKCk7CgogICAgdmFyIExlcmMgPSB7CiAgICAgIC8qKioqKioqKioqKip3cmFwcGVyKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8KICAgICAgLyoqCiAgICAgICAqIEEgd3JhcHBlciBmb3IgZGVjb2RpbmcgYm90aCBMRVJDMSBhbmQgTEVSQzIgYnl0ZSBzdHJlYW1zIGNhcGFibGUgb2YgaGFuZGxpbmcgbXVsdGliYW5kIHBpeGVsIGJsb2NrcyBmb3IgdmFyaW91cyBwaXhlbCB0eXBlcy4KICAgICAgICoKICAgICAgICogQGFsaWFzIG1vZHVsZTpMZXJjCiAgICAgICAqIEBwYXJhbSB7QXJyYXlCdWZmZXJ9IGlucHV0IFRoZSBMRVJDIGlucHV0IGJ5dGUgc3RyZWFtCiAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9uc10gVGhlIGRlY29kaW5nIG9wdGlvbnMgYmVsb3cgYXJlIG9wdGlvbmFsLgogICAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMuaW5wdXRPZmZzZXRdIFRoZSBudW1iZXIgb2YgYnl0ZXMgdG8gc2tpcCBpbiB0aGUgaW5wdXQgYnl0ZSBzdHJlYW0uIEEgdmFsaWQgTGVyYyBmaWxlIGlzIGV4cGVjdGVkIGF0IHRoYXQgcG9zaXRpb24uCiAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5waXhlbFR5cGVdIChMRVJDMSBvbmx5KSBEZWZhdWx0IHZhbHVlIGlzIEYzMi4gVmFsaWQgcGl4ZWwgdHlwZXMgZm9yIGlucHV0IGFyZSBVOC9TOC9TMTYvVTE2L1MzMi9VMzIvRjMyLgogICAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMubm9EYXRhVmFsdWVdIChMRVJDMSBvbmx5KS4gSXQgaXMgcmVjb21tZW5kZWQgdG8gdXNlIHRoZSByZXR1cm5lZCBtYXNrIGluc3RlYWQgb2Ygc2V0dGluZyB0aGlzIHZhbHVlLgogICAgICAgKiBAcmV0dXJucyB7e3dpZHRoLCBoZWlnaHQsIHBpeGVscywgcGl4ZWxUeXBlLCBtYXNrLCBzdGF0aXN0aWNzfX0KICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcn0gd2lkdGggV2lkdGggb2YgZGVjb2RlZCBpbWFnZS4KICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcn0gaGVpZ2h0IEhlaWdodCBvZiBkZWNvZGVkIGltYWdlLgogICAgICAgICAqIEBwcm9wZXJ0eSB7YXJyYXl9IHBpeGVscyBbYmFuZDEsIGJhbmQyLCDigKZdIEVhY2ggYmFuZCBpcyBhIHR5cGVkIGFycmF5IG9mIHdpZHRoKmhlaWdodC4KICAgICAgICAgKiBAcHJvcGVydHkge3N0cmluZ30gcGl4ZWxUeXBlIFRoZSB0eXBlIG9mIHBpeGVscyByZXByZXNlbnRlZCBpbiB0aGUgb3V0cHV0LgogICAgICAgICAqIEBwcm9wZXJ0eSB7bWFza30gbWFzayBUeXBlZCBhcnJheSB3aXRoIGEgc2l6ZSBvZiB3aWR0aCpoZWlnaHQsIG9yIG51bGwgaWYgYWxsIHBpeGVscyBhcmUgdmFsaWQuCiAgICAgICAgICogQHByb3BlcnR5IHthcnJheX0gc3RhdGlzdGljcyBbc3RhdGlzdGljc19iYW5kMSwgc3RhdGlzdGljc19iYW5kMiwg4oCmXSBFYWNoIGVsZW1lbnQgaXMgYSBzdGF0aXN0aWNzIG9iamVjdCByZXByZXNlbnRpbmcgbWluIGFuZCBtYXggdmFsdWVzCiAgICAgICoqLwogICAgICBkZWNvZGU6IGZ1bmN0aW9uKGVuY29kZWREYXRhLCBvcHRpb25zKSB7CiAgICAgICAgaWYgKCFpc1BsYXRmb3JtTGl0dGxlRW5kaWFuKSB7CiAgICAgICAgICB0aHJvdyAiQmlnIGVuZGlhbiBzeXN0ZW0gaXMgbm90IHN1cHBvcnRlZC4iOwogICAgICAgIH0KICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTsKICAgICAgICB2YXIgaW5wdXRPZmZzZXQgPSBvcHRpb25zLmlucHV0T2Zmc2V0IHx8IDA7CiAgICAgICAgdmFyIGZpbGVJZFZpZXcgPSBuZXcgVWludDhBcnJheShlbmNvZGVkRGF0YSwgaW5wdXRPZmZzZXQsIDEwKTsKICAgICAgICB2YXIgZmlsZUlkZW50aWZpZXJTdHJpbmcgPSBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsIGZpbGVJZFZpZXcpOwogICAgICAgIHZhciBsZXJjLCBtYWpvclZlcnNpb247CiAgICAgICAgaWYgKGZpbGVJZGVudGlmaWVyU3RyaW5nLnRyaW0oKSA9PT0gIkNudFpJbWFnZSIpIHsKICAgICAgICAgIGxlcmMgPSBMZXJjRGVjb2RlOwogICAgICAgICAgbWFqb3JWZXJzaW9uID0gMTsKICAgICAgICB9CiAgICAgICAgZWxzZSBpZiAoZmlsZUlkZW50aWZpZXJTdHJpbmcuc3Vic3RyaW5nKDAsIDUpID09PSAiTGVyYzIiKSB7CiAgICAgICAgICBsZXJjID0gTGVyYzJEZWNvZGU7CiAgICAgICAgICBtYWpvclZlcnNpb24gPSAyOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgIHRocm93ICJVbmV4cGVjdGVkIGZpbGUgaWRlbnRpZmllciBzdHJpbmc6ICIgKyBmaWxlSWRlbnRpZmllclN0cmluZzsKICAgICAgICB9CgogICAgICAgIHZhciBpUGxhbmUgPSAwLCBlb2YgPSBlbmNvZGVkRGF0YS5ieXRlTGVuZ3RoIC0gMTAsIGVuY29kZWRNYXNrRGF0YSwgYmFuZE1hc2tzID0gW10sIGJhbmRNYXNrLCBtYXNrRGF0YTsKICAgICAgICB2YXIgZGVjb2RlZFBpeGVsQmxvY2sgPSB7CiAgICAgICAgICB3aWR0aDogMCwKICAgICAgICAgIGhlaWdodDogMCwKICAgICAgICAgIHBpeGVsczogW10sCiAgICAgICAgICBwaXhlbFR5cGU6IG9wdGlvbnMucGl4ZWxUeXBlLAogICAgICAgICAgbWFzazogbnVsbCwKICAgICAgICAgIHN0YXRpc3RpY3M6IFtdCiAgICAgICAgfTsKCiAgICAgICAgd2hpbGUgKGlucHV0T2Zmc2V0IDwgZW9mKSB7CiAgICAgICAgICB2YXIgcmVzdWx0ID0gbGVyYy5kZWNvZGUoZW5jb2RlZERhdGEsIHsKICAgICAgICAgICAgaW5wdXRPZmZzZXQ6IGlucHV0T2Zmc2V0LC8vZm9yIGJvdGggbGVyYzEgYW5kIGxlcmMyCiAgICAgICAgICAgIGVuY29kZWRNYXNrRGF0YTogZW5jb2RlZE1hc2tEYXRhLC8vbGVyYzEgb25seQogICAgICAgICAgICBtYXNrRGF0YTogbWFza0RhdGEsLy9sZXJjMiBvbmx5CiAgICAgICAgICAgIHJldHVybk1hc2s6IGlQbGFuZSA9PT0gMCA/IHRydWUgOiBmYWxzZSwvL2xlcmMxIG9ubHkKICAgICAgICAgICAgcmV0dXJuRW5jb2RlZE1hc2s6IGlQbGFuZSA9PT0gMCA/IHRydWUgOiBmYWxzZSwvL2xlcmMxIG9ubHkKICAgICAgICAgICAgcmV0dXJuRmlsZUluZm86IHRydWUsLy9mb3IgYm90aCBsZXJjMSBhbmQgbGVyYzIKICAgICAgICAgICAgcGl4ZWxUeXBlOiBvcHRpb25zLnBpeGVsVHlwZSB8fCBudWxsLC8vbGVyYzEgb25seQogICAgICAgICAgICBub0RhdGFWYWx1ZTogb3B0aW9ucy5ub0RhdGFWYWx1ZSB8fCBudWxsLy9sZXJjMSBvbmx5CiAgICAgICAgICB9KTsKCiAgICAgICAgICBpbnB1dE9mZnNldCA9IHJlc3VsdC5maWxlSW5mby5lb2ZPZmZzZXQ7CiAgICAgICAgICBpZiAoaVBsYW5lID09PSAwKSB7CiAgICAgICAgICAgIGVuY29kZWRNYXNrRGF0YSA9IHJlc3VsdC5lbmNvZGVkTWFza0RhdGE7Ly9sZXJjMQogICAgICAgICAgICBtYXNrRGF0YSA9IHJlc3VsdC5tYXNrRGF0YTsvL2xlcmMyCiAgICAgICAgICAgIGRlY29kZWRQaXhlbEJsb2NrLndpZHRoID0gcmVzdWx0LndpZHRoOwogICAgICAgICAgICBkZWNvZGVkUGl4ZWxCbG9jay5oZWlnaHQgPSByZXN1bHQuaGVpZ2h0OwogICAgICAgICAgICBkZWNvZGVkUGl4ZWxCbG9jay5kaW1Db3VudCA9IHJlc3VsdC5kaW1Db3VudCB8fCAxOwogICAgICAgICAgICAvL2RlY29kZWRQaXhlbEJsb2NrLmRpbVN0YXRzID0gZGVjb2RlZFBpeGVsQmxvY2suZGltU3RhdHM7CiAgICAgICAgICAgIGRlY29kZWRQaXhlbEJsb2NrLnBpeGVsVHlwZSA9IHJlc3VsdC5waXhlbFR5cGUgfHwgcmVzdWx0LmZpbGVJbmZvLnBpeGVsVHlwZTsKICAgICAgICAgICAgZGVjb2RlZFBpeGVsQmxvY2subWFzayA9IHJlc3VsdC5tYXNrRGF0YTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChtYWpvclZlcnNpb24gPjEgJiYgcmVzdWx0LmZpbGVJbmZvLm1hc2sgJiYgcmVzdWx0LmZpbGVJbmZvLm1hc2subnVtQnl0ZXMgPiAwKSB7CiAgICAgICAgICAgIGJhbmRNYXNrcy5wdXNoKHJlc3VsdC5tYXNrRGF0YSk7CiAgICAgICAgICB9CgogICAgICAgICAgaVBsYW5lKys7CiAgICAgICAgICBkZWNvZGVkUGl4ZWxCbG9jay5waXhlbHMucHVzaChyZXN1bHQucGl4ZWxEYXRhKTsKICAgICAgICAgIGRlY29kZWRQaXhlbEJsb2NrLnN0YXRpc3RpY3MucHVzaCh7CiAgICAgICAgICAgIG1pblZhbHVlOiByZXN1bHQubWluVmFsdWUsCiAgICAgICAgICAgIG1heFZhbHVlOiByZXN1bHQubWF4VmFsdWUsCiAgICAgICAgICAgIG5vRGF0YVZhbHVlOiByZXN1bHQubm9EYXRhVmFsdWUsCiAgICAgICAgICAgIGRpbVN0YXRzOiByZXN1bHQuZGltU3RhdHMKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICB2YXIgaSwgaiwgbnVtUGl4ZWxzOwogICAgICAgIGlmIChtYWpvclZlcnNpb24gPiAxICYmIGJhbmRNYXNrcy5sZW5ndGggPiAxKSB7CiAgICAgICAgICBudW1QaXhlbHMgPSBkZWNvZGVkUGl4ZWxCbG9jay53aWR0aCAqIGRlY29kZWRQaXhlbEJsb2NrLmhlaWdodDsKICAgICAgICAgIGRlY29kZWRQaXhlbEJsb2NrLmJhbmRNYXNrcyA9IGJhbmRNYXNrczsKICAgICAgICAgIG1hc2tEYXRhID0gbmV3IFVpbnQ4QXJyYXkobnVtUGl4ZWxzKTsKICAgICAgICAgIG1hc2tEYXRhLnNldChiYW5kTWFza3NbMF0pOwogICAgICAgICAgZm9yIChpID0gMTsgaSA8IGJhbmRNYXNrcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBiYW5kTWFzayA9IGJhbmRNYXNrc1tpXTsKICAgICAgICAgICAgZm9yIChqID0gMDsgaiA8IG51bVBpeGVsczsgaisrKSB7CiAgICAgICAgICAgICAgbWFza0RhdGFbal0gPSBtYXNrRGF0YVtqXSAmIGJhbmRNYXNrW2pdOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBkZWNvZGVkUGl4ZWxCbG9jay5tYXNrRGF0YSA9IG1hc2tEYXRhOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGRlY29kZWRQaXhlbEJsb2NrOwogICAgICB9CiAgICB9OwoKICAgIGlmIChtb2R1bGUuZXhwb3J0cykgey8qIGpzaGludCBpZ25vcmU6bGluZSAqLwogICAgICAvL2NvbW1vbkpTIG1vZHVsZSAxLjAvMS4xLzEuMS4xIHN5c3RlbXMsIHN1Y2ggYXMgbm9kZUpTCiAgICAgIC8vaHR0cDovL3dpa2kuY29tbW9uanMub3JnL3dpa2kvTW9kdWxlcwogICAgICBtb2R1bGUuZXhwb3J0cyA9IExlcmM7LyoganNoaW50IGlnbm9yZTpsaW5lICovCiAgICB9CiAgICBlbHNlIHsKICAgICAgLy9hc3NpZ24gdG8gdGhpcywgbW9zdCBsaWtlbHkgd2luZG93CiAgICAgIHRoaXMuTGVyYyA9IExlcmM7CiAgICB9CgogIH0pKCk7CiAgfShMZXJjRGVjb2RlKSk7CgogIHZhciBMZXJjID0gTGVyY0RlY29kZS5leHBvcnRzOwoKICBjb25zdCBmaWVsZFRhZ05hbWVzID0gewogICAgLy8gVElGRiBCYXNlbGluZQogICAgMHgwMTNCOiAnQXJ0aXN0JywKICAgIDB4MDEwMjogJ0JpdHNQZXJTYW1wbGUnLAogICAgMHgwMTA5OiAnQ2VsbExlbmd0aCcsCiAgICAweDAxMDg6ICdDZWxsV2lkdGgnLAogICAgMHgwMTQwOiAnQ29sb3JNYXAnLAogICAgMHgwMTAzOiAnQ29tcHJlc3Npb24nLAogICAgMHg4Mjk4OiAnQ29weXJpZ2h0JywKICAgIDB4MDEzMjogJ0RhdGVUaW1lJywKICAgIDB4MDE1MjogJ0V4dHJhU2FtcGxlcycsCiAgICAweDAxMEE6ICdGaWxsT3JkZXInLAogICAgMHgwMTIxOiAnRnJlZUJ5dGVDb3VudHMnLAogICAgMHgwMTIwOiAnRnJlZU9mZnNldHMnLAogICAgMHgwMTIzOiAnR3JheVJlc3BvbnNlQ3VydmUnLAogICAgMHgwMTIyOiAnR3JheVJlc3BvbnNlVW5pdCcsCiAgICAweDAxM0M6ICdIb3N0Q29tcHV0ZXInLAogICAgMHgwMTBFOiAnSW1hZ2VEZXNjcmlwdGlvbicsCiAgICAweDAxMDE6ICdJbWFnZUxlbmd0aCcsCiAgICAweDAxMDA6ICdJbWFnZVdpZHRoJywKICAgIDB4MDEwRjogJ01ha2UnLAogICAgMHgwMTE5OiAnTWF4U2FtcGxlVmFsdWUnLAogICAgMHgwMTE4OiAnTWluU2FtcGxlVmFsdWUnLAogICAgMHgwMTEwOiAnTW9kZWwnLAogICAgMHgwMEZFOiAnTmV3U3ViZmlsZVR5cGUnLAogICAgMHgwMTEyOiAnT3JpZW50YXRpb24nLAogICAgMHgwMTA2OiAnUGhvdG9tZXRyaWNJbnRlcnByZXRhdGlvbicsCiAgICAweDAxMUM6ICdQbGFuYXJDb25maWd1cmF0aW9uJywKICAgIDB4MDEyODogJ1Jlc29sdXRpb25Vbml0JywKICAgIDB4MDExNjogJ1Jvd3NQZXJTdHJpcCcsCiAgICAweDAxMTU6ICdTYW1wbGVzUGVyUGl4ZWwnLAogICAgMHgwMTMxOiAnU29mdHdhcmUnLAogICAgMHgwMTE3OiAnU3RyaXBCeXRlQ291bnRzJywKICAgIDB4MDExMTogJ1N0cmlwT2Zmc2V0cycsCiAgICAweDAwRkY6ICdTdWJmaWxlVHlwZScsCiAgICAweDAxMDc6ICdUaHJlc2hob2xkaW5nJywKICAgIDB4MDExQTogJ1hSZXNvbHV0aW9uJywKICAgIDB4MDExQjogJ1lSZXNvbHV0aW9uJywKCiAgICAvLyBUSUZGIEV4dGVuZGVkCiAgICAweDAxNDY6ICdCYWRGYXhMaW5lcycsCiAgICAweDAxNDc6ICdDbGVhbkZheERhdGEnLAogICAgMHgwMTU3OiAnQ2xpcFBhdGgnLAogICAgMHgwMTQ4OiAnQ29uc2VjdXRpdmVCYWRGYXhMaW5lcycsCiAgICAweDAxQjE6ICdEZWNvZGUnLAogICAgMHgwMUIyOiAnRGVmYXVsdEltYWdlQ29sb3InLAogICAgMHgwMTBEOiAnRG9jdW1lbnROYW1lJywKICAgIDB4MDE1MDogJ0RvdFJhbmdlJywKICAgIDB4MDE0MTogJ0hhbGZ0b25lSGludHMnLAogICAgMHgwMTVBOiAnSW5kZXhlZCcsCiAgICAweDAxNUI6ICdKUEVHVGFibGVzJywKICAgIDB4MDExRDogJ1BhZ2VOYW1lJywKICAgIDB4MDEyOTogJ1BhZ2VOdW1iZXInLAogICAgMHgwMTNEOiAnUHJlZGljdG9yJywKICAgIDB4MDEzRjogJ1ByaW1hcnlDaHJvbWF0aWNpdGllcycsCiAgICAweDAyMTQ6ICdSZWZlcmVuY2VCbGFja1doaXRlJywKICAgIDB4MDE1MzogJ1NhbXBsZUZvcm1hdCcsCiAgICAweDAxNTQ6ICdTTWluU2FtcGxlVmFsdWUnLAogICAgMHgwMTU1OiAnU01heFNhbXBsZVZhbHVlJywKICAgIDB4MDIyRjogJ1N0cmlwUm93Q291bnRzJywKICAgIDB4MDE0QTogJ1N1YklGRHMnLAogICAgMHgwMTI0OiAnVDRPcHRpb25zJywKICAgIDB4MDEyNTogJ1Q2T3B0aW9ucycsCiAgICAweDAxNDU6ICdUaWxlQnl0ZUNvdW50cycsCiAgICAweDAxNDM6ICdUaWxlTGVuZ3RoJywKICAgIDB4MDE0NDogJ1RpbGVPZmZzZXRzJywKICAgIDB4MDE0MjogJ1RpbGVXaWR0aCcsCiAgICAweDAxMkQ6ICdUcmFuc2ZlckZ1bmN0aW9uJywKICAgIDB4MDEzRTogJ1doaXRlUG9pbnQnLAogICAgMHgwMTU4OiAnWENsaXBQYXRoVW5pdHMnLAogICAgMHgwMTFFOiAnWFBvc2l0aW9uJywKICAgIDB4MDIxMTogJ1lDYkNyQ29lZmZpY2llbnRzJywKICAgIDB4MDIxMzogJ1lDYkNyUG9zaXRpb25pbmcnLAogICAgMHgwMjEyOiAnWUNiQ3JTdWJTYW1wbGluZycsCiAgICAweDAxNTk6ICdZQ2xpcFBhdGhVbml0cycsCiAgICAweDAxMUY6ICdZUG9zaXRpb24nLAoKICAgIC8vIEVYSUYKICAgIDB4OTIwMjogJ0FwZXJ0dXJlVmFsdWUnLAogICAgMHhBMDAxOiAnQ29sb3JTcGFjZScsCiAgICAweDkwMDQ6ICdEYXRlVGltZURpZ2l0aXplZCcsCiAgICAweDkwMDM6ICdEYXRlVGltZU9yaWdpbmFsJywKICAgIDB4ODc2OTogJ0V4aWYgSUZEJywKICAgIDB4OTAwMDogJ0V4aWZWZXJzaW9uJywKICAgIDB4ODI5QTogJ0V4cG9zdXJlVGltZScsCiAgICAweEEzMDA6ICdGaWxlU291cmNlJywKICAgIDB4OTIwOTogJ0ZsYXNoJywKICAgIDB4QTAwMDogJ0ZsYXNocGl4VmVyc2lvbicsCiAgICAweDgyOUQ6ICdGTnVtYmVyJywKICAgIDB4QTQyMDogJ0ltYWdlVW5pcXVlSUQnLAogICAgMHg5MjA4OiAnTGlnaHRTb3VyY2UnLAogICAgMHg5MjdDOiAnTWFrZXJOb3RlJywKICAgIDB4OTIwMTogJ1NodXR0ZXJTcGVlZFZhbHVlJywKICAgIDB4OTI4NjogJ1VzZXJDb21tZW50JywKCiAgICAvLyBJUFRDCiAgICAweDgzQkI6ICdJUFRDJywKCiAgICAvLyBJQ0MKICAgIDB4ODc3MzogJ0lDQyBQcm9maWxlJywKCiAgICAvLyBYTVAKICAgIDB4MDJCQzogJ1hNUCcsCgogICAgLy8gR0RBTAogICAgMHhBNDgwOiAnR0RBTF9NRVRBREFUQScsCiAgICAweEE0ODE6ICdHREFMX05PREFUQScsCgogICAgLy8gUGhvdG9zaG9wCiAgICAweDg2NDk6ICdQaG90b3Nob3AnLAoKICAgIC8vIEdlb1RpZmYKICAgIDB4ODMwRTogJ01vZGVsUGl4ZWxTY2FsZScsCiAgICAweDg0ODI6ICdNb2RlbFRpZXBvaW50JywKICAgIDB4ODVEODogJ01vZGVsVHJhbnNmb3JtYXRpb24nLAogICAgMHg4N0FGOiAnR2VvS2V5RGlyZWN0b3J5JywKICAgIDB4ODdCMDogJ0dlb0RvdWJsZVBhcmFtcycsCiAgICAweDg3QjE6ICdHZW9Bc2NpaVBhcmFtcycsCgogICAgLy8gTEVSQwogICAgMHhDNUYyOiAnTGVyY1BhcmFtZXRlcnMnLAogIH07CgogIGNvbnN0IGZpZWxkVGFncyA9IHt9OwogIGZvciAoY29uc3Qga2V5IGluIGZpZWxkVGFnTmFtZXMpIHsKICAgIGlmIChmaWVsZFRhZ05hbWVzLmhhc093blByb3BlcnR5KGtleSkpIHsKICAgICAgZmllbGRUYWdzW2ZpZWxkVGFnTmFtZXNba2V5XV0gPSBwYXJzZUludChrZXksIDEwKTsKICAgIH0KICB9CgogIFsKICAgIGZpZWxkVGFncy5CaXRzUGVyU2FtcGxlLAogICAgZmllbGRUYWdzLkV4dHJhU2FtcGxlcywKICAgIGZpZWxkVGFncy5TYW1wbGVGb3JtYXQsCiAgICBmaWVsZFRhZ3MuU3RyaXBCeXRlQ291bnRzLAogICAgZmllbGRUYWdzLlN0cmlwT2Zmc2V0cywKICAgIGZpZWxkVGFncy5TdHJpcFJvd0NvdW50cywKICAgIGZpZWxkVGFncy5UaWxlQnl0ZUNvdW50cywKICAgIGZpZWxkVGFncy5UaWxlT2Zmc2V0cywKICAgIGZpZWxkVGFncy5TdWJJRkRzLAogIF07CgogIGNvbnN0IGZpZWxkVHlwZU5hbWVzID0gewogICAgMHgwMDAxOiAnQllURScsCiAgICAweDAwMDI6ICdBU0NJSScsCiAgICAweDAwMDM6ICdTSE9SVCcsCiAgICAweDAwMDQ6ICdMT05HJywKICAgIDB4MDAwNTogJ1JBVElPTkFMJywKICAgIDB4MDAwNjogJ1NCWVRFJywKICAgIDB4MDAwNzogJ1VOREVGSU5FRCcsCiAgICAweDAwMDg6ICdTU0hPUlQnLAogICAgMHgwMDA5OiAnU0xPTkcnLAogICAgMHgwMDBBOiAnU1JBVElPTkFMJywKICAgIDB4MDAwQjogJ0ZMT0FUJywKICAgIDB4MDAwQzogJ0RPVUJMRScsCiAgICAvLyBJRkQgb2Zmc2V0LCBzdWdnZXN0ZWQgYnkgaHR0cHM6Ly9vd2wucGh5LnF1ZWVuc3UuY2EvfnBoaWwvZXhpZnRvb2wvc3RhbmRhcmRzLmh0bWwKICAgIDB4MDAwRDogJ0lGRCcsCiAgICAvLyBpbnRyb2R1Y2VkIGJ5IEJpZ1RJRkYKICAgIDB4MDAxMDogJ0xPTkc4JywKICAgIDB4MDAxMTogJ1NMT05HOCcsCiAgICAweDAwMTI6ICdJRkQ4JywKICB9OwoKICBjb25zdCBmaWVsZFR5cGVzID0ge307CiAgZm9yIChjb25zdCBrZXkgaW4gZmllbGRUeXBlTmFtZXMpIHsKICAgIGlmIChmaWVsZFR5cGVOYW1lcy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7CiAgICAgIGZpZWxkVHlwZXNbZmllbGRUeXBlTmFtZXNba2V5XV0gPSBwYXJzZUludChrZXksIDEwKTsKICAgIH0KICB9CgogIGNvbnN0IExlcmNQYXJhbWV0ZXJzID0gewogICAgVmVyc2lvbjogMCwKICAgIEFkZENvbXByZXNzaW9uOiAxLAogIH07CgogIGNvbnN0IExlcmNBZGRDb21wcmVzc2lvbiA9IHsKICAgIE5vbmU6IDAsCiAgICBEZWZsYXRlOiAxLAogIH07CgoKICBjb25zdCBnZW9LZXlOYW1lcyA9IHsKICAgIDEwMjQ6ICdHVE1vZGVsVHlwZUdlb0tleScsCiAgICAxMDI1OiAnR1RSYXN0ZXJUeXBlR2VvS2V5JywKICAgIDEwMjY6ICdHVENpdGF0aW9uR2VvS2V5JywKICAgIDIwNDg6ICdHZW9ncmFwaGljVHlwZUdlb0tleScsCiAgICAyMDQ5OiAnR2VvZ0NpdGF0aW9uR2VvS2V5JywKICAgIDIwNTA6ICdHZW9nR2VvZGV0aWNEYXR1bUdlb0tleScsCiAgICAyMDUxOiAnR2VvZ1ByaW1lTWVyaWRpYW5HZW9LZXknLAogICAgMjA1MjogJ0dlb2dMaW5lYXJVbml0c0dlb0tleScsCiAgICAyMDUzOiAnR2VvZ0xpbmVhclVuaXRTaXplR2VvS2V5JywKICAgIDIwNTQ6ICdHZW9nQW5ndWxhclVuaXRzR2VvS2V5JywKICAgIDIwNTU6ICdHZW9nQW5ndWxhclVuaXRTaXplR2VvS2V5JywKICAgIDIwNTY6ICdHZW9nRWxsaXBzb2lkR2VvS2V5JywKICAgIDIwNTc6ICdHZW9nU2VtaU1ham9yQXhpc0dlb0tleScsCiAgICAyMDU4OiAnR2VvZ1NlbWlNaW5vckF4aXNHZW9LZXknLAogICAgMjA1OTogJ0dlb2dJbnZGbGF0dGVuaW5nR2VvS2V5JywKICAgIDIwNjA6ICdHZW9nQXppbXV0aFVuaXRzR2VvS2V5JywKICAgIDIwNjE6ICdHZW9nUHJpbWVNZXJpZGlhbkxvbmdHZW9LZXknLAogICAgMjA2MjogJ0dlb2dUT1dHUzg0R2VvS2V5JywKICAgIDMwNzI6ICdQcm9qZWN0ZWRDU1R5cGVHZW9LZXknLAogICAgMzA3MzogJ1BDU0NpdGF0aW9uR2VvS2V5JywKICAgIDMwNzQ6ICdQcm9qZWN0aW9uR2VvS2V5JywKICAgIDMwNzU6ICdQcm9qQ29vcmRUcmFuc0dlb0tleScsCiAgICAzMDc2OiAnUHJvakxpbmVhclVuaXRzR2VvS2V5JywKICAgIDMwNzc6ICdQcm9qTGluZWFyVW5pdFNpemVHZW9LZXknLAogICAgMzA3ODogJ1Byb2pTdGRQYXJhbGxlbDFHZW9LZXknLAogICAgMzA3OTogJ1Byb2pTdGRQYXJhbGxlbDJHZW9LZXknLAogICAgMzA4MDogJ1Byb2pOYXRPcmlnaW5Mb25nR2VvS2V5JywKICAgIDMwODE6ICdQcm9qTmF0T3JpZ2luTGF0R2VvS2V5JywKICAgIDMwODI6ICdQcm9qRmFsc2VFYXN0aW5nR2VvS2V5JywKICAgIDMwODM6ICdQcm9qRmFsc2VOb3J0aGluZ0dlb0tleScsCiAgICAzMDg0OiAnUHJvakZhbHNlT3JpZ2luTG9uZ0dlb0tleScsCiAgICAzMDg1OiAnUHJvakZhbHNlT3JpZ2luTGF0R2VvS2V5JywKICAgIDMwODY6ICdQcm9qRmFsc2VPcmlnaW5FYXN0aW5nR2VvS2V5JywKICAgIDMwODc6ICdQcm9qRmFsc2VPcmlnaW5Ob3J0aGluZ0dlb0tleScsCiAgICAzMDg4OiAnUHJvakNlbnRlckxvbmdHZW9LZXknLAogICAgMzA4OTogJ1Byb2pDZW50ZXJMYXRHZW9LZXknLAogICAgMzA5MDogJ1Byb2pDZW50ZXJFYXN0aW5nR2VvS2V5JywKICAgIDMwOTE6ICdQcm9qQ2VudGVyTm9ydGhpbmdHZW9LZXknLAogICAgMzA5MjogJ1Byb2pTY2FsZUF0TmF0T3JpZ2luR2VvS2V5JywKICAgIDMwOTM6ICdQcm9qU2NhbGVBdENlbnRlckdlb0tleScsCiAgICAzMDk0OiAnUHJvakF6aW11dGhBbmdsZUdlb0tleScsCiAgICAzMDk1OiAnUHJvalN0cmFpZ2h0VmVydFBvbGVMb25nR2VvS2V5JywKICAgIDMwOTY6ICdQcm9qUmVjdGlmaWVkR3JpZEFuZ2xlR2VvS2V5JywKICAgIDQwOTY6ICdWZXJ0aWNhbENTVHlwZUdlb0tleScsCiAgICA0MDk3OiAnVmVydGljYWxDaXRhdGlvbkdlb0tleScsCiAgICA0MDk4OiAnVmVydGljYWxEYXR1bUdlb0tleScsCiAgICA0MDk5OiAnVmVydGljYWxVbml0c0dlb0tleScsCiAgfTsKCiAgY29uc3QgZ2VvS2V5cyA9IHt9OwogIGZvciAoY29uc3Qga2V5IGluIGdlb0tleU5hbWVzKSB7CiAgICBpZiAoZ2VvS2V5TmFtZXMuaGFzT3duUHJvcGVydHkoa2V5KSkgewogICAgICBnZW9LZXlzW2dlb0tleU5hbWVzW2tleV1dID0gcGFyc2VJbnQoa2V5LCAxMCk7CiAgICB9CiAgfQoKICBjbGFzcyBMZXJjRGVjb2RlciBleHRlbmRzIEJhc2VEZWNvZGVyIHsKICAgIGNvbnN0cnVjdG9yKGZpbGVEaXJlY3RvcnkpIHsKICAgICAgc3VwZXIoKTsKCiAgICAgIHRoaXMucGxhbmFyQ29uZmlndXJhdGlvbiA9IHR5cGVvZiBmaWxlRGlyZWN0b3J5LlBsYW5hckNvbmZpZ3VyYXRpb24gIT09ICd1bmRlZmluZWQnID8gZmlsZURpcmVjdG9yeS5QbGFuYXJDb25maWd1cmF0aW9uIDogMTsKICAgICAgdGhpcy5zYW1wbGVzUGVyUGl4ZWwgPSB0eXBlb2YgZmlsZURpcmVjdG9yeS5TYW1wbGVzUGVyUGl4ZWwgIT09ICd1bmRlZmluZWQnID8gZmlsZURpcmVjdG9yeS5TYW1wbGVzUGVyUGl4ZWwgOiAxOwoKICAgICAgdGhpcy5hZGRDb21wcmVzc2lvbiA9IGZpbGVEaXJlY3RvcnkuTGVyY1BhcmFtZXRlcnNbTGVyY1BhcmFtZXRlcnMuQWRkQ29tcHJlc3Npb25dOwogICAgfQoKICAgIGludGVybGVhdmVQaXhlbHMoYmFuZEludGVybGVhdmVkRGF0YSkgewogICAgICBjb25zdCBwaXhlbEludGVybGVhdmVkRGF0YSA9IG5ldyBiYW5kSW50ZXJsZWF2ZWREYXRhLmNvbnN0cnVjdG9yKGJhbmRJbnRlcmxlYXZlZERhdGEubGVuZ3RoKTsKICAgICAgY29uc3QgbGVuZ3RoUGVyU2FtcGxlID0gYmFuZEludGVybGVhdmVkRGF0YS5sZW5ndGggLyB0aGlzLnNhbXBsZXNQZXJQaXhlbDsKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGhQZXJTYW1wbGU7IGkrKykgewogICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgdGhpcy5zYW1wbGVzUGVyUGl4ZWw7IGorKykgewogICAgICAgICAgcGl4ZWxJbnRlcmxlYXZlZERhdGFbaSAqIHRoaXMuc2FtcGxlc1BlclBpeGVsICsgal0gPSBiYW5kSW50ZXJsZWF2ZWREYXRhW2kgKyBqICogbGVuZ3RoUGVyU2FtcGxlXTsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIHBpeGVsSW50ZXJsZWF2ZWREYXRhOwogICAgfQoKICAgIGRlY29kZUJsb2NrKGJ1ZmZlcikgewogICAgICBzd2l0Y2ggKHRoaXMuYWRkQ29tcHJlc3Npb24pIHsKICAgICAgICBjYXNlIExlcmNBZGRDb21wcmVzc2lvbi5Ob25lOgogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSBMZXJjQWRkQ29tcHJlc3Npb24uRGVmbGF0ZToKICAgICAgICAgIGJ1ZmZlciA9IGluZmxhdGVfMShuZXcgVWludDhBcnJheShidWZmZXIpKS5idWZmZXI7CiAgICAgICAgICBicmVhazsKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbnN1cHBvcnRlZCBMRVJDIGFkZGl0aW9uYWwgY29tcHJlc3Npb24gbWV0aG9kIGlkZW50aWZpZXI6ICR7dGhpcy5hZGRDb21wcmVzc2lvbn1gKTsKICAgICAgfQoKICAgICAgY29uc3QgbGVyY1Jlc3VsdCA9IExlcmMuZGVjb2RlKGJ1ZmZlcik7CiAgICAgIGNvbnN0IGxlcmNEYXRhID0gbGVyY1Jlc3VsdC5waXhlbHNbMF07IC8vIGFsd2F5cyBiYW5kLWludGVybGVhdmVkCiAgICAgIGNvbnN0IGRlY29kZWREYXRhID0gdGhpcy5wbGFuYXJDb25maWd1cmF0aW9uID09PSAxID8gdGhpcy5pbnRlcmxlYXZlUGl4ZWxzKGxlcmNEYXRhKSA6IGxlcmNEYXRhOyAvLyB0cmFuc2Zvcm0gdG8gcGl4ZWwtaW50ZXJsZWF2ZWQgaWYgZXhwZWN0ZWQKICAgICAgcmV0dXJuIGRlY29kZWREYXRhLmJ1ZmZlcjsKICAgIH0KICB9CgogIGZ1bmN0aW9uIGdldERlY29kZXIoZmlsZURpcmVjdG9yeSkgewogICAgc3dpdGNoIChmaWxlRGlyZWN0b3J5LkNvbXByZXNzaW9uKSB7CiAgICAgIGNhc2UgdW5kZWZpbmVkOgogICAgICBjYXNlIDE6IC8vIG5vIGNvbXByZXNzaW9uCiAgICAgICAgcmV0dXJuIG5ldyBSYXdEZWNvZGVyKCk7CiAgICAgIGNhc2UgNTogLy8gTFpXCiAgICAgICAgcmV0dXJuIG5ldyBMWldEZWNvZGVyKGZpbGVEaXJlY3RvcnkpOwogICAgICBjYXNlIDY6IC8vIEpQRUcKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ29sZCBzdHlsZSBKUEVHIGNvbXByZXNzaW9uIGlzIG5vdCBzdXBwb3J0ZWQuJyk7CiAgICAgIGNhc2UgNzogLy8gSlBFRwogICAgICAgIHJldHVybiBuZXcgSnBlZ0RlY29kZXIoZmlsZURpcmVjdG9yeSk7CiAgICAgIGNhc2UgODogLy8gRGVmbGF0ZSBhcyByZWNvZ25pemVkIGJ5IEFkb2JlCiAgICAgIGNhc2UgMzI5NDY6IC8vIERlZmxhdGUgR0RBTCBkZWZhdWx0CiAgICAgICAgcmV0dXJuIG5ldyBEZWZsYXRlRGVjb2RlcigpOwogICAgICBjYXNlIDMyNzczOiAvLyBwYWNrYml0cwogICAgICAgIHJldHVybiBuZXcgUGFja2JpdHNEZWNvZGVyKCk7CiAgICAgIGNhc2UgMzQ4ODc6IC8vIExFUkMKICAgICAgICByZXR1cm4gbmV3IExlcmNEZWNvZGVyKGZpbGVEaXJlY3RvcnkpOwogICAgICBkZWZhdWx0OgogICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5rbm93biBjb21wcmVzc2lvbiBtZXRob2QgaWRlbnRpZmllcjogJHtmaWxlRGlyZWN0b3J5LkNvbXByZXNzaW9ufWApOwogICAgfQogIH0KCiAgYXN5bmMgZnVuY3Rpb24gZGVjb2RlKGZpbGVEaXJlY3RvcnksIGJ1ZmZlcikgewogICAgY29uc3QgZGVjb2RlciA9IGdldERlY29kZXIoZmlsZURpcmVjdG9yeSk7CiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkZWNvZGVyLmRlY29kZShmaWxlRGlyZWN0b3J5LCBidWZmZXIpOwogICAgc2VsZi5wb3N0TWVzc2FnZShyZXN1bHQsIFtyZXN1bHRdKTsKICB9CiAgaWYgKHR5cGVvZiBzZWxmICE9PSAidW5kZWZpbmVkIikgewogICAgc2VsZi5hZGRFdmVudExpc3RlbmVyKCJtZXNzYWdlIiwgKGV2ZW50KSA9PiB7CiAgICAgIGNvbnN0IFtuYW1lLCAuLi5hcmdzXSA9IGV2ZW50LmRhdGE7CiAgICAgIHN3aXRjaCAobmFtZSkgewogICAgICAgIGNhc2UgImRlY29kZSI6CiAgICAgICAgICBkZWNvZGUoYXJnc1swXSwgYXJnc1sxXSk7CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgfSk7CiAgfQoKfSkoKTsK\";\nvar blob = typeof window !== \"undefined\" && window.Blob && new Blob([atob(encodedJs)], { type: \"text/javascript;charset=utf-8\" });\nfunction WorkerWrapper() {\n  const objURL = blob && (window.URL || window.webkitURL).createObjectURL(blob);\n  try {\n    return objURL ? new Worker(objURL) : new Worker(\"data:application/javascript;base64,\" + encodedJs, { type: \"module\" });\n  } finally {\n    objURL && (window.URL || window.webkitURL).revokeObjectURL(objURL);\n  }\n}\nvar _a, _b;\nvar defaultPoolSize = (_b = (_a = globalThis == null ? void 0 : globalThis.navigator) == null ? void 0 : _a.hardwareConcurrency) != null ? _b : 4;\nvar Pool = class {\n  constructor(size = defaultPoolSize) {\n    __publicField(this, \"workers\");\n    __publicField(this, \"idleWorkers\");\n    __publicField(this, \"waitQueue\");\n    __publicField(this, \"decoder\");\n    this.workers = [];\n    this.idleWorkers = [];\n    this.waitQueue = [];\n    this.decoder = null;\n    for (let i = 0; i < size; ++i) {\n      const w = new WorkerWrapper();\n      this.workers.push(w);\n      this.idleWorkers.push(w);\n    }\n  }\n  decode(fileDirectory, buffer) {\n    return __async(this, null, function* () {\n      const currentWorker = yield this.waitForWorker();\n      return new Promise((resolve, reject) => {\n        currentWorker.onmessage = (event) => {\n          this.finishTask(currentWorker);\n          resolve(event.data);\n        };\n        currentWorker.onerror = (error) => {\n          this.finishTask(currentWorker);\n          reject(error);\n        };\n        currentWorker.postMessage([\"decode\", fileDirectory, buffer], [buffer]);\n      });\n    });\n  }\n  waitForWorker() {\n    return __async(this, null, function* () {\n      const idleWorker = this.idleWorkers.pop();\n      if (idleWorker) {\n        return idleWorker;\n      }\n      const waiter = {};\n      const promise = new Promise((resolve) => {\n        waiter.resolve = resolve;\n      });\n      this.waitQueue.push(waiter);\n      return promise;\n    });\n  }\n  finishTask(currentWorker) {\n    return __async(this, null, function* () {\n      const waiter = this.waitQueue.pop();\n      if (waiter) {\n        waiter.resolve(currentWorker);\n      } else {\n        this.idleWorkers.push(currentWorker);\n      }\n    });\n  }\n  destroy() {\n    for (let i = 0; i < this.workers.length; ++i) {\n      this.workers[i].terminate();\n    }\n  }\n};\nvar PARSER_OPTIONS = {\n  attributeNamePrefix: \"\",\n  attrNodeName: \"attr\",\n  parseNodeValue: true,\n  parseAttributeValue: true,\n  ignoreAttributes: false\n};\nvar parse = (str) => parser.parse(str, PARSER_OPTIONS);\nfunction fromString(str) {\n  const res = parse(str);\n  if (!res.OME) {\n    throw Error(\"Failed to parse OME-XML metadata.\");\n  }\n  return ensureArray(res.OME.Image).map((img) => {\n    const Channels = ensureArray(img.Pixels.Channel).map((c) => {\n      if (\"Color\" in c.attr) {\n        return __spreadProps(__spreadValues({}, c.attr), { Color: intToRgba(c.attr.Color) });\n      }\n      return __spreadValues({}, c.attr);\n    });\n    const { AquisitionDate = \"\", Description: Description2 = \"\" } = img;\n    const image = __spreadProps(__spreadValues({}, img.attr), {\n      AquisitionDate,\n      Description: Description2,\n      Pixels: __spreadProps(__spreadValues({}, img.Pixels.attr), {\n        Channels\n      })\n    });\n    return __spreadProps(__spreadValues({}, image), {\n      format() {\n        const { Pixels } = image;\n        const sizes = [\"X\", \"Y\", \"Z\"].map((name2) => {\n          const size = Pixels[`PhysicalSize${name2}`];\n          const unit2 = Pixels[`PhysicalSize${name2}Unit`];\n          return size && unit2 ? `${size} ${unit2}` : \"-\";\n        }).join(\" x \");\n        return {\n          \"Acquisition Date\": image.AquisitionDate,\n          \"Dimensions (XY)\": `${Pixels.SizeX} x ${Pixels.SizeY}`,\n          \"Pixels Type\": Pixels.Type,\n          \"Pixels Size (XYZ)\": sizes,\n          \"Z-sections/Timepoints\": `${Pixels.SizeZ} x ${Pixels.SizeT}`,\n          Channels: Pixels.SizeC\n        };\n      }\n    });\n  });\n}\nvar TiffPixelSource = class {\n  constructor(indexer, dtype, tileSize, shape, labels, meta, pool) {\n    __publicField(this, \"_indexer\");\n    this.dtype = dtype;\n    this.tileSize = tileSize;\n    this.shape = shape;\n    this.labels = labels;\n    this.meta = meta;\n    this.pool = pool;\n    this._indexer = indexer;\n  }\n  getRaster(_0) {\n    return __async(this, arguments, function* ({ selection, signal }) {\n      const image = yield this._indexer(selection);\n      return this._readRasters(image, { signal });\n    });\n  }\n  getTile(_0) {\n    return __async(this, arguments, function* ({ x, y, selection, signal }) {\n      const { height, width } = this._getTileExtent(x, y);\n      const x0 = x * this.tileSize;\n      const y0 = y * this.tileSize;\n      const window2 = [x0, y0, x0 + width, y0 + height];\n      const image = yield this._indexer(selection);\n      return this._readRasters(image, { window: window2, width, height, signal });\n    });\n  }\n  _readRasters(image, props) {\n    return __async(this, null, function* () {\n      var _a2;\n      const interleave = isInterleaved(this.shape);\n      const raster = yield image.readRasters(__spreadProps(__spreadValues({\n        interleave\n      }, props), {\n        pool: this.pool\n      }));\n      if ((_a2 = props == null ? void 0 : props.signal) == null ? void 0 : _a2.aborted) {\n        throw SIGNAL_ABORTED;\n      }\n      const data = interleave ? raster : raster[0];\n      return {\n        data,\n        width: raster.width,\n        height: raster.height\n      };\n    });\n  }\n  _getTileExtent(x, y) {\n    const { height: zoomLevelHeight, width: zoomLevelWidth } = getImageSize(this);\n    let height = this.tileSize;\n    let width = this.tileSize;\n    const maxXTileCoord = Math.floor(zoomLevelWidth / this.tileSize);\n    const maxYTileCoord = Math.floor(zoomLevelHeight / this.tileSize);\n    if (x === maxXTileCoord) {\n      width = zoomLevelWidth % this.tileSize;\n    }\n    if (y === maxYTileCoord) {\n      height = zoomLevelHeight % this.tileSize;\n    }\n    return { height, width };\n  }\n  onTileError(err) {\n    console.error(err);\n  }\n};\nfunction getOmeLegacyIndexer(tiff, rootMeta) {\n  const imgMeta = rootMeta[0];\n  const { SizeT, SizeC, SizeZ } = imgMeta.Pixels;\n  const ifdIndexer = getOmeIFDIndexer(imgMeta);\n  return (sel, pyramidLevel) => {\n    const index = ifdIndexer(sel);\n    const pyramidIndex = pyramidLevel * SizeZ * SizeT * SizeC;\n    return tiff.getImage(index + pyramidIndex);\n  };\n}\nfunction getOmeSubIFDIndexer(tiff, rootMeta) {\n  const imgMeta = rootMeta[0];\n  const ifdIndexer = getOmeIFDIndexer(imgMeta);\n  const ifdCache = new Map();\n  return (sel, pyramidLevel) => __async(this, null, function* () {\n    const index = ifdIndexer(sel);\n    const baseImage = yield tiff.getImage(index);\n    if (pyramidLevel === 0) {\n      return baseImage;\n    }\n    const { SubIFDs } = baseImage.fileDirectory;\n    if (!SubIFDs) {\n      throw Error(\"Indexing Error: OME-TIFF is missing SubIFDs.\");\n    }\n    const key = `${sel.t}-${sel.c}-${sel.z}-${pyramidLevel}`;\n    if (!ifdCache.has(key)) {\n      const subIfdOffset = SubIFDs[pyramidLevel - 1];\n      ifdCache.set(key, tiff.parseFileDirectoryAt(subIfdOffset));\n    }\n    const ifd = yield ifdCache.get(key);\n    return new baseImage.constructor(ifd.fileDirectory, ifd.geoKeyDirectory, tiff.dataView, tiff.littleEndian, tiff.cache, tiff.source);\n  });\n}\nfunction getOmeIFDIndexer(imgMeta) {\n  const { SizeC, SizeZ, SizeT, DimensionOrder } = imgMeta.Pixels;\n  switch (DimensionOrder) {\n    case \"XYZCT\": {\n      return ({ t, c, z }) => t * SizeZ * SizeC + c * SizeZ + z;\n    }\n    case \"XYZTC\": {\n      return ({ t, c, z }) => c * SizeZ * SizeT + t * SizeZ + z;\n    }\n    case \"XYCTZ\": {\n      return ({ t, c, z }) => z * SizeC * SizeT + t * SizeC + c;\n    }\n    case \"XYCZT\": {\n      return ({ t, c, z }) => t * SizeC * SizeZ + z * SizeC + c;\n    }\n    case \"XYTCZ\": {\n      return ({ t, c, z }) => z * SizeT * SizeC + c * SizeT + t;\n    }\n    case \"XYTZC\": {\n      return ({ t, c, z }) => c * SizeT * SizeZ + z * SizeT + t;\n    }\n    default: {\n      throw new Error(`Invalid OME-XML DimensionOrder, got ${DimensionOrder}.`);\n    }\n  }\n}\nvar DTYPE_LOOKUP$1 = {\n  uint8: \"Uint8\",\n  uint16: \"Uint16\",\n  uint32: \"Uint32\",\n  float: \"Float32\",\n  double: \"Float64\",\n  int8: \"Int8\",\n  int16: \"Int16\",\n  int32: \"Int32\"\n};\nfunction getOmePixelSourceMeta({ Pixels }) {\n  const labels = getLabels(Pixels.DimensionOrder);\n  const dims = getDims(labels);\n  const shape = Array(labels.length).fill(0);\n  shape[dims(\"t\")] = Pixels.SizeT;\n  shape[dims(\"c\")] = Pixels.SizeC;\n  shape[dims(\"z\")] = Pixels.SizeZ;\n  if (Pixels.Interleaved) {\n    labels.push(\"_c\");\n    shape.push(3);\n  }\n  const getShape = (level) => {\n    const s = [...shape];\n    s[dims(\"x\")] = Pixels.SizeX >> level;\n    s[dims(\"y\")] = Pixels.SizeY >> level;\n    return s;\n  };\n  if (!(Pixels.Type in DTYPE_LOOKUP$1)) {\n    throw Error(`Pixel type ${Pixels.Type} not supported.`);\n  }\n  const dtype = DTYPE_LOOKUP$1[Pixels.Type];\n  if (Pixels.PhysicalSizeX && Pixels.PhysicalSizeY) {\n    const physicalSizes = {\n      x: {\n        size: Pixels.PhysicalSizeX,\n        unit: Pixels.PhysicalSizeXUnit\n      },\n      y: {\n        size: Pixels.PhysicalSizeY,\n        unit: Pixels.PhysicalSizeYUnit\n      }\n    };\n    if (Pixels.PhysicalSizeZ) {\n      physicalSizes.z = {\n        size: Pixels.PhysicalSizeZ,\n        unit: Pixels.PhysicalSizeZUnit\n      };\n    }\n    return { labels, getShape, physicalSizes, dtype };\n  }\n  return { labels, getShape, dtype };\n}\nfunction guessTileSize$1(image) {\n  const tileWidth = image.getTileWidth();\n  const tileHeight = image.getTileHeight();\n  const size = Math.min(tileWidth, tileHeight);\n  return prevPowerOf2(size);\n}\nfunction load$2(tiff, pool) {\n  return __async(this, null, function* () {\n    const firstImage = yield tiff.getImage(0);\n    const {\n      ImageDescription,\n      SubIFDs,\n      PhotometricInterpretation: photometricInterpretation\n    } = firstImage.fileDirectory;\n    const omexml = fromString(ImageDescription);\n    let levels;\n    let pyramidIndexer;\n    if (SubIFDs) {\n      levels = SubIFDs.length + 1;\n      pyramidIndexer = getOmeSubIFDIndexer(tiff, omexml);\n    } else {\n      levels = omexml.length;\n      pyramidIndexer = getOmeLegacyIndexer(tiff, omexml);\n    }\n    const imgMeta = omexml[0];\n    const { labels, getShape, physicalSizes, dtype } = getOmePixelSourceMeta(imgMeta);\n    const tileSize = guessTileSize$1(firstImage);\n    const meta = { photometricInterpretation, physicalSizes };\n    const data = Array.from({ length: levels }).map((_, resolution) => {\n      const shape = getShape(resolution);\n      const indexer = (sel) => pyramidIndexer(sel, resolution);\n      const source = new TiffPixelSource(indexer, dtype, tileSize, shape, labels, meta, pool);\n      return source;\n    });\n    return {\n      data,\n      metadata: imgMeta\n    };\n  });\n}\nfunction loadOmeTiff(_0) {\n  return __async(this, arguments, function* (source, opts = {}) {\n    const { headers, offsets, pool = true } = opts;\n    let tiff;\n    if (typeof source === \"string\") {\n      tiff = yield fromUrl(source, __spreadProps(__spreadValues({}, headers), { cacheSize: Infinity }));\n    } else {\n      tiff = yield fromBlob(source);\n    }\n    if (offsets) {\n      tiff = createOffsetsProxy(tiff, offsets);\n    }\n    checkProxies(tiff);\n    return pool ? load$2(tiff, new Pool()) : load$2(tiff);\n  });\n}\nfunction loadMultiscales(store, path = \"\") {\n  return __async(this, null, function* () {\n    const grp = yield openGroup(store, path);\n    const rootAttrs = yield grp.attrs.asObject();\n    let paths = [\"0\"];\n    if (\"multiscales\" in rootAttrs) {\n      const { datasets } = rootAttrs.multiscales[0];\n      paths = datasets.map((d) => d.path);\n    }\n    const data = paths.map((path2) => grp.getItem(path2));\n    return {\n      data: yield Promise.all(data),\n      rootAttrs\n    };\n  });\n}\nfunction guessTileSize(arr) {\n  const interleaved = isInterleaved(arr.shape);\n  const [yChunk, xChunk] = arr.chunks.slice(interleaved ? -3 : -2);\n  const size = Math.min(yChunk, xChunk);\n  return prevPowerOf2(size);\n}\nfunction getIndexer(labels) {\n  const size = labels.length;\n  const dims = getDims(labels);\n  return (sel) => {\n    if (Array.isArray(sel)) {\n      return [...sel];\n    }\n    const selection = Array(size).fill(0);\n    for (const [key, value] of Object.entries(sel)) {\n      selection[dims(key)] = value;\n    }\n    return selection;\n  };\n}\nvar DTYPE_LOOKUP = {\n  u1: \"Uint8\",\n  u2: \"Uint16\",\n  u4: \"Uint32\",\n  f4: \"Float32\",\n  f8: \"Float64\",\n  i1: \"Int8\",\n  i2: \"Int16\",\n  i4: \"Int32\"\n};\nvar ZarrPixelSource = class {\n  constructor(data, labels, tileSize) {\n    __publicField(this, \"_data\");\n    __publicField(this, \"_indexer\");\n    __publicField(this, \"_readChunks\");\n    this.labels = labels;\n    this.tileSize = tileSize;\n    this._indexer = getIndexer(labels);\n    this._data = data;\n    const xChunkSize = data.chunks[this._xIndex];\n    const yChunkSize = data.chunks[this._xIndex - 1];\n    this._readChunks = tileSize === xChunkSize && tileSize === yChunkSize;\n  }\n  get shape() {\n    return this._data.shape;\n  }\n  get dtype() {\n    const suffix = this._data.dtype.slice(1);\n    if (!(suffix in DTYPE_LOOKUP)) {\n      throw Error(`Zarr dtype not supported, got ${suffix}.`);\n    }\n    return DTYPE_LOOKUP[suffix];\n  }\n  get _xIndex() {\n    const interleave = isInterleaved(this._data.shape);\n    return this._data.shape.length - (interleave ? 2 : 1);\n  }\n  _chunkIndex(selection, x, y) {\n    const sel = this._indexer(selection);\n    sel[this._xIndex] = x;\n    sel[this._xIndex - 1] = y;\n    return sel;\n  }\n  _getSlices(x, y) {\n    const { height, width } = getImageSize(this);\n    const [xStart, xStop] = [\n      x * this.tileSize,\n      Math.min((x + 1) * this.tileSize, width)\n    ];\n    const [yStart, yStop] = [\n      y * this.tileSize,\n      Math.min((y + 1) * this.tileSize, height)\n    ];\n    if (xStart === xStop || yStart === yStop) {\n      throw new BoundsCheckError(\"Tile slice is zero-sized.\");\n    }\n    return [slice(xStart, xStop), slice(yStart, yStop)];\n  }\n  getRaster(_0) {\n    return __async(this, arguments, function* ({ selection }) {\n      const sel = this._chunkIndex(selection, null, null);\n      const { data, shape } = yield this._data.getRaw(sel);\n      const [height, width] = shape;\n      return { data, width, height };\n    });\n  }\n  getTile(props) {\n    return __async(this, null, function* () {\n      const { x, y, selection, signal } = props;\n      let res;\n      if (this._readChunks) {\n        const sel = this._chunkIndex(selection, x, y);\n        res = yield this._data.getRawChunk(sel, { storeOptions: { signal } });\n      } else {\n        const [xSlice, ySlice] = this._getSlices(x, y);\n        const sel = this._chunkIndex(selection, xSlice, ySlice);\n        res = yield this._data.getRaw(sel);\n      }\n      const {\n        data,\n        shape: [height, width]\n      } = res;\n      return { data, width, height };\n    });\n  }\n  onTileError(err) {\n    if (!(err instanceof BoundsCheckError)) {\n      throw err;\n    }\n  }\n};\nfunction load(store) {\n  return __async(this, null, function* () {\n    const { data, rootAttrs } = yield loadMultiscales(store);\n    const labels = [\"t\", \"c\", \"z\", \"y\", \"x\"];\n    const tileSize = guessTileSize(data[0]);\n    const pyramid = data.map((arr) => new ZarrPixelSource(arr, labels, tileSize));\n    return {\n      data: pyramid,\n      metadata: rootAttrs\n    };\n  });\n}\nfunction loadOmeZarr(_0) {\n  return __async(this, arguments, function* (source, options = {}) {\n    const store = new HTTPStore(source, options);\n    if ((options == null ? void 0 : options.type) !== \"multiscales\") {\n      throw Error(\"Only multiscale OME-Zarr is supported.\");\n    }\n    return load(store);\n  });\n}\n\n// src/components/spatial/constants.js\nvar GLOBAL_LABELS = [\"z\", \"t\"];\nvar DEFAULT_RASTER_DOMAIN_TYPE = \"Min/Max\";\nvar DEFAULT_RASTER_LAYER_PROPS = {\n  visible: true,\n  colormap: null,\n  opacity: 1,\n  domainType: DEFAULT_RASTER_DOMAIN_TYPE,\n  transparentColor: [0, 0, 0],\n  renderingMode: RENDERING_MODES.ADDITIVE,\n  use3d: false\n};\nvar DEFAULT_MOLECULES_LAYER = {\n  opacity: 1,\n  radius: 20,\n  visible: true\n};\nvar DEFAULT_CELLS_LAYER = {\n  opacity: 1,\n  radius: 50,\n  visible: true,\n  stroked: false\n};\nvar DEFAULT_NEIGHBORHOODS_LAYER = {\n  visible: false\n};\n\n// src/app/state/coordination.js\nvar COORDINATION_TYPES = {\n  DATASET: \"dataset\",\n  EMBEDDING_TYPE: \"embeddingType\",\n  EMBEDDING_ZOOM: \"embeddingZoom\",\n  EMBEDDING_ROTATION: \"embeddingRotation\",\n  EMBEDDING_TARGET_X: \"embeddingTargetX\",\n  EMBEDDING_TARGET_Y: \"embeddingTargetY\",\n  EMBEDDING_TARGET_Z: \"embeddingTargetZ\",\n  EMBEDDING_CELL_SET_POLYGONS_VISIBLE: \"embeddingCellSetPolygonsVisible\",\n  EMBEDDING_CELL_SET_LABELS_VISIBLE: \"embeddingCellSetLabelsVisible\",\n  EMBEDDING_CELL_SET_LABEL_SIZE: \"embeddingCellSetLabelSize\",\n  EMBEDDING_CELL_RADIUS: \"embeddingCellRadius\",\n  EMBEDDING_CELL_OPACITY: \"embeddingCellOpacity\",\n  EMBEDDING_CELL_RADIUS_MODE: \"embeddingCellRadiusMode\",\n  EMBEDDING_CELL_OPACITY_MODE: \"embeddingCellOpacityMode\",\n  SPATIAL_ZOOM: \"spatialZoom\",\n  SPATIAL_ROTATION: \"spatialRotation\",\n  SPATIAL_TARGET_X: \"spatialTargetX\",\n  SPATIAL_TARGET_Y: \"spatialTargetY\",\n  SPATIAL_TARGET_Z: \"spatialTargetZ\",\n  SPATIAL_ROTATION_X: \"spatialRotationX\",\n  SPATIAL_ROTATION_Y: \"spatialRotationY\",\n  SPATIAL_ROTATION_Z: \"spatialRotationZ\",\n  SPATIAL_ROTATION_ORBIT: \"spatialRotationOrbit\",\n  SPATIAL_ORBIT_AXIS: \"spatialOrbitAxis\",\n  SPATIAL_AXIS_FIXED: \"spatialAxisFixed\",\n  HEATMAP_ZOOM_X: \"heatmapZoomX\",\n  HEATMAP_ZOOM_Y: \"heatmapZoomY\",\n  HEATMAP_TARGET_X: \"heatmapTargetX\",\n  HEATMAP_TARGET_Y: \"heatmapTargetY\",\n  CELL_FILTER: \"cellFilter\",\n  CELL_HIGHLIGHT: \"cellHighlight\",\n  CELL_SET_SELECTION: \"cellSetSelection\",\n  CELL_SET_HIGHLIGHT: \"cellSetHighlight\",\n  CELL_SET_COLOR: \"cellSetColor\",\n  GENE_FILTER: \"geneFilter\",\n  GENE_HIGHLIGHT: \"geneHighlight\",\n  GENE_SELECTION: \"geneSelection\",\n  GENE_EXPRESSION_COLORMAP: \"geneExpressionColormap\",\n  GENE_EXPRESSION_TRANSFORM: \"geneExpressionTransform\",\n  GENE_EXPRESSION_COLORMAP_RANGE: \"geneExpressionColormapRange\",\n  CELL_COLOR_ENCODING: \"cellColorEncoding\",\n  SPATIAL_RASTER_LAYERS: \"spatialRasterLayers\",\n  SPATIAL_CELLS_LAYER: \"spatialCellsLayer\",\n  SPATIAL_MOLECULES_LAYER: \"spatialMoleculesLayer\",\n  SPATIAL_NEIGHBORHOODS_LAYER: \"spatialNeighborhoodsLayer\",\n  GENOMIC_ZOOM_X: \"genomicZoomX\",\n  GENOMIC_ZOOM_Y: \"genomicZoomY\",\n  GENOMIC_TARGET_X: \"genomicTargetX\",\n  GENOMIC_TARGET_Y: \"genomicTargetY\",\n  ADDITIONAL_CELL_SETS: \"additionalCellSets\",\n  MOLECULE_HIGHLIGHT: \"moleculeHighlight\"\n};\nvar DEFAULT_COORDINATION_VALUES = {\n  [COORDINATION_TYPES.EMBEDDING_ZOOM]: null,\n  [COORDINATION_TYPES.EMBEDDING_ROTATION]: 0,\n  [COORDINATION_TYPES.EMBEDDING_TARGET_X]: null,\n  [COORDINATION_TYPES.EMBEDDING_TARGET_Y]: null,\n  [COORDINATION_TYPES.EMBEDDING_TARGET_Z]: 0,\n  [COORDINATION_TYPES.EMBEDDING_CELL_SET_POLYGONS_VISIBLE]: false,\n  [COORDINATION_TYPES.EMBEDDING_CELL_SET_LABELS_VISIBLE]: false,\n  [COORDINATION_TYPES.EMBEDDING_CELL_SET_LABEL_SIZE]: 14,\n  [COORDINATION_TYPES.EMBEDDING_CELL_RADIUS]: 1,\n  [COORDINATION_TYPES.EMBEDDING_CELL_RADIUS_MODE]: \"auto\",\n  [COORDINATION_TYPES.EMBEDDING_CELL_OPACITY]: 1,\n  [COORDINATION_TYPES.EMBEDDING_CELL_OPACITY_MODE]: \"auto\",\n  [COORDINATION_TYPES.SPATIAL_ZOOM]: null,\n  [COORDINATION_TYPES.SPATIAL_ROTATION]: 0,\n  [COORDINATION_TYPES.SPATIAL_TARGET_X]: null,\n  [COORDINATION_TYPES.SPATIAL_TARGET_Y]: null,\n  [COORDINATION_TYPES.SPATIAL_TARGET_Z]: null,\n  [COORDINATION_TYPES.SPATIAL_ROTATION_X]: null,\n  [COORDINATION_TYPES.SPATIAL_ROTATION_Y]: null,\n  [COORDINATION_TYPES.SPATIAL_ROTATION_Z]: null,\n  [COORDINATION_TYPES.SPATIAL_AXIS_FIXED]: false,\n  [COORDINATION_TYPES.SPATIAL_ROTATION_ORBIT]: 0,\n  [COORDINATION_TYPES.SPATIAL_ORBIT_AXIS]: \"Y\",\n  [COORDINATION_TYPES.SPATIAL_RASTER_LAYERS]: null,\n  [COORDINATION_TYPES.SPATIAL_CELLS_LAYER]: null,\n  [COORDINATION_TYPES.SPATIAL_MOLECULES_LAYER]: null,\n  [COORDINATION_TYPES.SPATIAL_NEIGHBORHOODS_LAYER]: null,\n  [COORDINATION_TYPES.HEATMAP_ZOOM_X]: 0,\n  [COORDINATION_TYPES.HEATMAP_ZOOM_Y]: 0,\n  [COORDINATION_TYPES.HEATMAP_TARGET_X]: 0,\n  [COORDINATION_TYPES.HEATMAP_TARGET_Y]: 0,\n  [COORDINATION_TYPES.GENE_EXPRESSION_COLORMAP]: \"plasma\",\n  [COORDINATION_TYPES.GENE_EXPRESSION_COLORMAP_RANGE]: [0, 1],\n  [COORDINATION_TYPES.GENE_EXPRESSION_TRANSFORM]: null,\n  [COORDINATION_TYPES.GENE_FILTER]: null,\n  [COORDINATION_TYPES.GENE_HIGHLIGHT]: null,\n  [COORDINATION_TYPES.GENE_SELECTION]: null,\n  [COORDINATION_TYPES.CELL_FILTER]: null,\n  [COORDINATION_TYPES.CELL_HIGHLIGHT]: null,\n  [COORDINATION_TYPES.CELL_SET_SELECTION]: null,\n  [COORDINATION_TYPES.CELL_SET_HIGHLIGHT]: null,\n  [COORDINATION_TYPES.CELL_SET_COLOR]: null,\n  [COORDINATION_TYPES.CELL_COLOR_ENCODING]: \"cellSetSelection\",\n  [COORDINATION_TYPES.GENOMIC_ZOOM_X]: 0,\n  [COORDINATION_TYPES.GENOMIC_ZOOM_Y]: 0,\n  [COORDINATION_TYPES.GENOMIC_TARGET_X]: 15499999995e-1,\n  [COORDINATION_TYPES.GENOMIC_TARGET_Y]: 15499999995e-1,\n  [COORDINATION_TYPES.ADDITIONAL_CELL_SETS]: null,\n  [COORDINATION_TYPES.MOLECULE_HIGHLIGHT]: null\n};\nvar AUTO_INDEPENDENT_COORDINATION_TYPES = [\n  COORDINATION_TYPES.HEATMAP_ZOOM_X,\n  COORDINATION_TYPES.HEATMAP_ZOOM_Y,\n  COORDINATION_TYPES.HEATMAP_TARGET_X,\n  COORDINATION_TYPES.HEATMAP_TARGET_Y,\n  COORDINATION_TYPES.EMBEDDING_ZOOM,\n  COORDINATION_TYPES.EMBEDDING_TARGET_X,\n  COORDINATION_TYPES.EMBEDDING_TARGET_Y,\n  COORDINATION_TYPES.EMBEDDING_TARGET_Z,\n  COORDINATION_TYPES.EMBEDDING_CELL_SET_POLYGONS_VISIBLE,\n  COORDINATION_TYPES.EMBEDDING_CELL_SET_LABELS_VISIBLE,\n  COORDINATION_TYPES.EMBEDDING_CELL_SET_LABEL_SIZE,\n  COORDINATION_TYPES.EMBEDDING_CELL_RADIUS,\n  COORDINATION_TYPES.EMBEDDING_CELL_OPACITY\n];\nvar COMPONENT_COORDINATION_TYPES = {\n  scatterplot: [\n    COORDINATION_TYPES.DATASET,\n    COORDINATION_TYPES.EMBEDDING_TYPE,\n    COORDINATION_TYPES.EMBEDDING_ZOOM,\n    COORDINATION_TYPES.EMBEDDING_ROTATION,\n    COORDINATION_TYPES.EMBEDDING_TARGET_X,\n    COORDINATION_TYPES.EMBEDDING_TARGET_Y,\n    COORDINATION_TYPES.EMBEDDING_TARGET_Z,\n    COORDINATION_TYPES.EMBEDDING_CELL_SET_POLYGONS_VISIBLE,\n    COORDINATION_TYPES.EMBEDDING_CELL_SET_LABELS_VISIBLE,\n    COORDINATION_TYPES.EMBEDDING_CELL_SET_LABEL_SIZE,\n    COORDINATION_TYPES.EMBEDDING_CELL_RADIUS,\n    COORDINATION_TYPES.EMBEDDING_CELL_RADIUS_MODE,\n    COORDINATION_TYPES.EMBEDDING_CELL_OPACITY,\n    COORDINATION_TYPES.EMBEDDING_CELL_OPACITY_MODE,\n    COORDINATION_TYPES.CELL_FILTER,\n    COORDINATION_TYPES.CELL_HIGHLIGHT,\n    COORDINATION_TYPES.CELL_SET_SELECTION,\n    COORDINATION_TYPES.CELL_SET_HIGHLIGHT,\n    COORDINATION_TYPES.CELL_SET_COLOR,\n    COORDINATION_TYPES.GENE_HIGHLIGHT,\n    COORDINATION_TYPES.GENE_SELECTION,\n    COORDINATION_TYPES.GENE_EXPRESSION_COLORMAP,\n    COORDINATION_TYPES.GENE_EXPRESSION_COLORMAP_RANGE,\n    COORDINATION_TYPES.CELL_COLOR_ENCODING,\n    COORDINATION_TYPES.ADDITIONAL_CELL_SETS\n  ],\n  spatial: [\n    COORDINATION_TYPES.DATASET,\n    COORDINATION_TYPES.SPATIAL_ZOOM,\n    COORDINATION_TYPES.SPATIAL_ROTATION,\n    COORDINATION_TYPES.SPATIAL_RASTER_LAYERS,\n    COORDINATION_TYPES.SPATIAL_CELLS_LAYER,\n    COORDINATION_TYPES.SPATIAL_MOLECULES_LAYER,\n    COORDINATION_TYPES.SPATIAL_NEIGHBORHOODS_LAYER,\n    COORDINATION_TYPES.SPATIAL_TARGET_X,\n    COORDINATION_TYPES.SPATIAL_TARGET_Y,\n    COORDINATION_TYPES.SPATIAL_TARGET_Z,\n    COORDINATION_TYPES.SPATIAL_ROTATION_X,\n    COORDINATION_TYPES.SPATIAL_ROTATION_Y,\n    COORDINATION_TYPES.SPATIAL_ROTATION_Z,\n    COORDINATION_TYPES.SPATIAL_ROTATION_ORBIT,\n    COORDINATION_TYPES.SPATIAL_ORBIT_AXIS,\n    COORDINATION_TYPES.SPATIAL_AXIS_FIXED,\n    COORDINATION_TYPES.CELL_FILTER,\n    COORDINATION_TYPES.CELL_HIGHLIGHT,\n    COORDINATION_TYPES.CELL_SET_SELECTION,\n    COORDINATION_TYPES.CELL_SET_HIGHLIGHT,\n    COORDINATION_TYPES.CELL_SET_COLOR,\n    COORDINATION_TYPES.GENE_HIGHLIGHT,\n    COORDINATION_TYPES.GENE_SELECTION,\n    COORDINATION_TYPES.GENE_EXPRESSION_COLORMAP,\n    COORDINATION_TYPES.GENE_EXPRESSION_COLORMAP_RANGE,\n    COORDINATION_TYPES.CELL_COLOR_ENCODING,\n    COORDINATION_TYPES.ADDITIONAL_CELL_SETS,\n    COORDINATION_TYPES.MOLECULE_HIGHLIGHT\n  ],\n  heatmap: [\n    COORDINATION_TYPES.DATASET,\n    COORDINATION_TYPES.HEATMAP_ZOOM_X,\n    COORDINATION_TYPES.HEATMAP_ZOOM_Y,\n    COORDINATION_TYPES.HEATMAP_TARGET_X,\n    COORDINATION_TYPES.HEATMAP_TARGET_Y,\n    COORDINATION_TYPES.CELL_FILTER,\n    COORDINATION_TYPES.CELL_HIGHLIGHT,\n    COORDINATION_TYPES.CELL_SET_SELECTION,\n    COORDINATION_TYPES.CELL_SET_HIGHLIGHT,\n    COORDINATION_TYPES.CELL_SET_COLOR,\n    COORDINATION_TYPES.GENE_FILTER,\n    COORDINATION_TYPES.GENE_HIGHLIGHT,\n    COORDINATION_TYPES.GENE_SELECTION,\n    COORDINATION_TYPES.GENE_EXPRESSION_COLORMAP,\n    COORDINATION_TYPES.GENE_EXPRESSION_COLORMAP_RANGE,\n    COORDINATION_TYPES.CELL_COLOR_ENCODING,\n    COORDINATION_TYPES.ADDITIONAL_CELL_SETS\n  ],\n  cellSets: [\n    COORDINATION_TYPES.DATASET,\n    COORDINATION_TYPES.CELL_SET_SELECTION,\n    COORDINATION_TYPES.CELL_SET_HIGHLIGHT,\n    COORDINATION_TYPES.CELL_SET_COLOR,\n    COORDINATION_TYPES.CELL_COLOR_ENCODING,\n    COORDINATION_TYPES.ADDITIONAL_CELL_SETS\n  ],\n  cellSetSizes: [\n    COORDINATION_TYPES.DATASET,\n    COORDINATION_TYPES.CELL_SET_SELECTION,\n    COORDINATION_TYPES.CELL_SET_HIGHLIGHT,\n    COORDINATION_TYPES.CELL_SET_COLOR,\n    COORDINATION_TYPES.ADDITIONAL_CELL_SETS\n  ],\n  cellSetExpression: [\n    COORDINATION_TYPES.DATASET,\n    COORDINATION_TYPES.GENE_SELECTION,\n    COORDINATION_TYPES.GENE_EXPRESSION_TRANSFORM,\n    COORDINATION_TYPES.CELL_SET_SELECTION,\n    COORDINATION_TYPES.CELL_SET_HIGHLIGHT,\n    COORDINATION_TYPES.CELL_SET_COLOR,\n    COORDINATION_TYPES.ADDITIONAL_CELL_SETS\n  ],\n  status: [\n    COORDINATION_TYPES.DATASET,\n    COORDINATION_TYPES.CELL_HIGHLIGHT,\n    COORDINATION_TYPES.GENE_HIGHLIGHT,\n    COORDINATION_TYPES.CELL_SET_HIGHLIGHT,\n    COORDINATION_TYPES.MOLECULE_HIGHLIGHT\n  ],\n  genes: [\n    COORDINATION_TYPES.DATASET,\n    COORDINATION_TYPES.GENE_FILTER,\n    COORDINATION_TYPES.GENE_HIGHLIGHT,\n    COORDINATION_TYPES.GENE_SELECTION,\n    COORDINATION_TYPES.CELL_COLOR_ENCODING\n  ],\n  expressionHistogram: [\n    COORDINATION_TYPES.DATASET,\n    COORDINATION_TYPES.GENE_SELECTION\n  ],\n  layerController: [\n    COORDINATION_TYPES.DATASET,\n    COORDINATION_TYPES.SPATIAL_RASTER_LAYERS,\n    COORDINATION_TYPES.SPATIAL_CELLS_LAYER,\n    COORDINATION_TYPES.SPATIAL_MOLECULES_LAYER,\n    COORDINATION_TYPES.SPATIAL_NEIGHBORHOODS_LAYER,\n    COORDINATION_TYPES.SPATIAL_ZOOM,\n    COORDINATION_TYPES.SPATIAL_TARGET_X,\n    COORDINATION_TYPES.SPATIAL_TARGET_Y,\n    COORDINATION_TYPES.SPATIAL_TARGET_Z,\n    COORDINATION_TYPES.SPATIAL_ROTATION_X,\n    COORDINATION_TYPES.SPATIAL_ROTATION_Y,\n    COORDINATION_TYPES.SPATIAL_ROTATION_Z,\n    COORDINATION_TYPES.SPATIAL_ROTATION_ORBIT,\n    COORDINATION_TYPES.SPATIAL_ORBIT_AXIS\n  ],\n  higlass: [\n    COORDINATION_TYPES.DATASET,\n    COORDINATION_TYPES.GENOMIC_ZOOM_X,\n    COORDINATION_TYPES.GENOMIC_ZOOM_Y,\n    COORDINATION_TYPES.GENOMIC_TARGET_X,\n    COORDINATION_TYPES.GENOMIC_TARGET_Y,\n    COORDINATION_TYPES.GENE_FILTER,\n    COORDINATION_TYPES.GENE_HIGHLIGHT,\n    COORDINATION_TYPES.GENE_SELECTION\n  ],\n  genomicProfiles: [\n    COORDINATION_TYPES.DATASET,\n    COORDINATION_TYPES.GENOMIC_ZOOM_X,\n    COORDINATION_TYPES.GENOMIC_ZOOM_Y,\n    COORDINATION_TYPES.GENOMIC_TARGET_X,\n    COORDINATION_TYPES.GENOMIC_TARGET_Y,\n    COORDINATION_TYPES.GENE_FILTER,\n    COORDINATION_TYPES.GENE_HIGHLIGHT,\n    COORDINATION_TYPES.GENE_SELECTION,\n    COORDINATION_TYPES.CELL_SET_SELECTION,\n    COORDINATION_TYPES.CELL_SET_HIGHLIGHT,\n    COORDINATION_TYPES.CELL_SET_COLOR,\n    COORDINATION_TYPES.ADDITIONAL_CELL_SETS\n  ],\n  description: [\n    COORDINATION_TYPES.DATASET,\n    COORDINATION_TYPES.SPATIAL_RASTER_LAYERS\n  ]\n};\n\n// src/components/data-hooks.js\nfunction warn(error, setWarning) {\n  setWarning(error.message);\n  console.warn(error.message);\n  if (error instanceof AbstractLoaderError) {\n    error.warnInConsole();\n  }\n}\nfunction initCoordinationSpace(values, setters, initialValues) {\n  if (!values || !setters) {\n    return;\n  }\n  Object.entries(values).forEach(([coordinationType, value]) => {\n    const setterName = `set${capitalize(coordinationType)}`;\n    const setterFunc = setters[setterName];\n    const initialValue = initialValues && initialValues[coordinationType];\n    const shouldInit = equal2(initialValue, DEFAULT_COORDINATION_VALUES[coordinationType]);\n    if (shouldInit && setterFunc) {\n      setterFunc(value);\n    }\n  });\n}\nfunction useDescription(loaders, dataset) {\n  const [description2, setDescription] = useState4();\n  useEffect2(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n    if (loaders[dataset].description) {\n      setDescription(loaders[dataset].description);\n    } else {\n      setDescription(null);\n    }\n  }, [loaders, dataset]);\n  return [description2];\n}\nfunction useCellsData(loaders, dataset, setItemIsReady, addUrl, isRequired, coordinationSetters, initialCoordinationValues) {\n  const [cells, setCells] = useState4({});\n  const [cellsCount, setCellsCount] = useState4(0);\n  const setWarning = useSetWarning();\n  useEffect2(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n    if (loaders[dataset].loaders.cells) {\n      loaders[dataset].loaders.cells.load().catch((e) => warn(e, setWarning)).then((payload) => {\n        if (!payload)\n          return;\n        const { data, url, coordinationValues } = payload;\n        setCells(data);\n        setCellsCount(Object.keys(data).length);\n        addUrl(url, \"Cells\");\n        const coordinationValuesOrDefault = __spreadValues({\n          spatialCellsLayer: DEFAULT_CELLS_LAYER\n        }, coordinationValues);\n        initCoordinationSpace(coordinationValuesOrDefault, coordinationSetters, initialCoordinationValues);\n        setItemIsReady(\"cells\");\n      });\n    } else {\n      setCells({});\n      setCellsCount(0);\n      if (isRequired) {\n        warn(new props(dataset, \"cells\", null, null), setWarning);\n      } else {\n        setItemIsReady(\"cells\");\n      }\n    }\n  }, [loaders, dataset]);\n  return [cells, cellsCount];\n}\nfunction useCellSetsData(loaders, dataset, setItemIsReady, addUrl, isRequired, coordinationSetters, initialCoordinationValues) {\n  const [cellSets, setCellSets] = useState4();\n  const setWarning = useSetWarning();\n  useEffect2(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n    if (loaders[dataset].loaders[\"cell-sets\"]) {\n      loaders[dataset].loaders[\"cell-sets\"].load().catch((e) => warn(e, setWarning)).then((payload) => {\n        if (!payload)\n          return;\n        const { data, url, coordinationValues } = payload;\n        setCellSets(data);\n        addUrl(url, \"Cell Sets\");\n        initCoordinationSpace(coordinationValues, coordinationSetters, initialCoordinationValues);\n        setItemIsReady(\"cell-sets\");\n      });\n    } else {\n      setCellSets(null);\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, \"cell-sets\", null, null), setWarning);\n      } else {\n        setItemIsReady(\"cell-sets\");\n      }\n    }\n  }, [loaders, dataset]);\n  return [cellSets];\n}\nfunction useExpressionMatrixData(loaders, dataset, setItemIsReady, addUrl, isRequired, coordinationSetters, initialCoordinationValues) {\n  const [expressionMatrix, setExpressionMatrix] = useState4();\n  const setWarning = useSetWarning();\n  useEffect2(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n    if (loaders[dataset].loaders[\"expression-matrix\"]) {\n      loaders[dataset].loaders[\"expression-matrix\"].load().catch((e) => warn(e, setWarning)).then((payload) => {\n        if (!payload)\n          return;\n        const { data, url, coordinationValues } = payload;\n        const [attrs, arr] = data;\n        setExpressionMatrix({\n          cols: attrs.cols,\n          rows: attrs.rows,\n          matrix: arr.data\n        });\n        addUrl(url, \"Expression Matrix\");\n        initCoordinationSpace(coordinationValues, coordinationSetters, initialCoordinationValues);\n        setItemIsReady(\"expression-matrix\");\n      });\n    } else {\n      setExpressionMatrix(null);\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, \"expression-matrix\", null, null), setWarning);\n      } else {\n        setItemIsReady(\"expression-matrix\");\n      }\n    }\n  }, [loaders, dataset]);\n  return [expressionMatrix];\n}\nfunction useGeneSelection(loaders, dataset, setItemIsReady, isRequired, selection, setItemIsNotReady) {\n  const [geneData, setGeneData] = useState4();\n  const setWarning = useSetWarning();\n  useEffect2(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n    if (!selection) {\n      setItemIsReady(\"expression-matrix\");\n      return;\n    }\n    const loader = loaders[dataset].loaders[\"expression-matrix\"];\n    if (loader) {\n      setItemIsNotReady(\"expression-matrix\");\n      const implementsGeneSelection = typeof loader.loadGeneSelection === \"function\";\n      if (implementsGeneSelection) {\n        loaders[dataset].loaders[\"expression-matrix\"].loadGeneSelection({ selection }).catch((e) => warn(e, setWarning)).then((payload) => {\n          if (!payload)\n            return;\n          const { data } = payload;\n          setGeneData(data);\n          setItemIsReady(\"expression-matrix\");\n        });\n      } else {\n        loader.load().catch((e) => warn(e, setWarning)).then((payload) => {\n          if (!payload)\n            return;\n          const { data } = payload;\n          const [attrs, { data: matrix }] = data;\n          const expressionDataForSelection = selection.map((sel) => {\n            const geneIndex = attrs.cols.indexOf(sel);\n            const numGenes = attrs.cols.length;\n            const numCells = attrs.rows.length;\n            const expressionData = new Uint8Array(numCells);\n            for (let cellIndex = 0; cellIndex < numCells; cellIndex += 1) {\n              expressionData[cellIndex] = matrix[cellIndex * numGenes + geneIndex];\n            }\n            return expressionData;\n          });\n          setGeneData(expressionDataForSelection);\n          setItemIsReady(\"expression-matrix\");\n        });\n      }\n    } else {\n      setGeneData(null);\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, \"expression-matrix\", null, null), setWarning);\n      } else {\n        setItemIsReady(\"expression-matrix\");\n      }\n    }\n  }, [loaders, dataset, selection]);\n  return [geneData];\n}\nfunction useExpressionAttrs(loaders, dataset, setItemIsReady, addUrl, isRequired) {\n  const [attrs, setAttrs] = useState4();\n  const setWarning = useSetWarning();\n  useEffect2(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n    const loader = loaders[dataset].loaders[\"expression-matrix\"];\n    if (loader) {\n      const implementsLoadAttrs = typeof loader.loadAttrs === \"function\";\n      if (implementsLoadAttrs) {\n        loader.loadAttrs().catch((e) => warn(e, setWarning)).then((payload) => {\n          if (!payload)\n            return;\n          const { data, url } = payload;\n          setAttrs(data);\n          addUrl(url, \"Expression Matrix\");\n          setItemIsReady(\"expression-matrix\");\n        });\n      } else {\n        loader.load().catch((e) => warn(e, setWarning)).then((payload) => {\n          if (!payload)\n            return;\n          const { data, url } = payload;\n          setAttrs(data[0]);\n          addUrl(url, \"Expression Matrix\");\n          setItemIsReady(\"expression-matrix\");\n        });\n      }\n    } else {\n      setAttrs(null);\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, \"expression-matrix\", null, null), setWarning);\n      } else {\n        setItemIsReady(\"expression-matrix\");\n      }\n    }\n  }, [loaders, dataset]);\n  return [attrs];\n}\nfunction useMoleculesData(loaders, dataset, setItemIsReady, addUrl, isRequired, coordinationSetters, initialCoordinationValues) {\n  const [molecules, setMolecules] = useState4();\n  const [moleculesCount, setMoleculesCount] = useState4(0);\n  const [locationsCount, setLocationsCount] = useState4(0);\n  const setWarning = useSetWarning();\n  useEffect2(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n    if (loaders[dataset].loaders.molecules) {\n      loaders[dataset].loaders.molecules.load().catch((e) => warn(e, setWarning)).then((payload) => {\n        if (!payload)\n          return;\n        const { data, url, coordinationValues } = payload;\n        setMolecules(data);\n        setMoleculesCount(Object.keys(data).length);\n        setLocationsCount(Object.values(data).map((l) => l.length).reduce((a, b) => a + b, 0));\n        addUrl(url, \"Molecules\");\n        const coordinationValuesOrDefault = __spreadValues({\n          spatialMoleculesLayer: DEFAULT_MOLECULES_LAYER\n        }, coordinationValues);\n        initCoordinationSpace(coordinationValuesOrDefault, coordinationSetters, initialCoordinationValues);\n        setItemIsReady(\"molecules\");\n      });\n    } else {\n      setMolecules({});\n      setMoleculesCount(0);\n      setLocationsCount(0);\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, \"molecules\", null, null), setWarning);\n      } else {\n        setItemIsReady(\"molecules\");\n      }\n    }\n  }, [loaders, dataset]);\n  return [molecules, moleculesCount, locationsCount];\n}\nfunction useNeighborhoodsData(loaders, dataset, setItemIsReady, addUrl, isRequired, coordinationSetters, initialCoordinationValues) {\n  const [neighborhoods, setNeighborhoods] = useState4();\n  const setWarning = useSetWarning();\n  useEffect2(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n    if (loaders[dataset].loaders.neighborhoods) {\n      loaders[dataset].loaders.neighborhoods.load().catch((e) => warn(e, setWarning)).then((payload) => {\n        if (!payload)\n          return;\n        const { data, url, coordinationValues } = payload;\n        setNeighborhoods(data);\n        addUrl(url, \"Neighborhoods\");\n        const coordinationValuesOrDefault = __spreadValues({\n          spatialNeighborhoodsLayer: DEFAULT_NEIGHBORHOODS_LAYER\n        }, coordinationValues);\n        initCoordinationSpace(coordinationValuesOrDefault, coordinationSetters, initialCoordinationValues);\n        setItemIsReady(\"neighborhoods\");\n      });\n    } else {\n      setNeighborhoods({});\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, \"neighborhoods\", null, null), setWarning);\n      } else {\n        setItemIsReady(\"neighborhoods\");\n      }\n    }\n  }, [loaders, dataset]);\n  return [neighborhoods];\n}\nfunction useRasterData(loaders, dataset, setItemIsReady, addUrl, isRequired, coordinationSetters, initialCoordinationValues) {\n  const [raster, setRaster] = useState4();\n  const [imageLayerLoaders, setImageLayerLoaders] = useState4([]);\n  const [imageLayerMeta, setImageLayerMeta] = useState4([]);\n  const setWarning = useSetWarning();\n  useEffect2(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n    if (loaders[dataset].loaders.raster) {\n      loaders[dataset].loaders.raster.load().catch((e) => warn(e, setWarning)).then((payload) => {\n        if (!payload)\n          return;\n        const { data, url: urls, coordinationValues } = payload;\n        setRaster(data);\n        urls.forEach(([url, name2]) => {\n          addUrl(url, name2);\n        });\n        const { loaders: nextImageLoaders, meta: nextImageMeta } = data;\n        setImageLayerLoaders(nextImageLoaders);\n        setImageLayerMeta(nextImageMeta);\n        initCoordinationSpace(coordinationValues, coordinationSetters, initialCoordinationValues);\n        setItemIsReady(\"raster\");\n      });\n    } else {\n      setImageLayerLoaders([]);\n      setImageLayerMeta([]);\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, \"raster\", null, null), setWarning);\n      } else {\n        setItemIsReady(\"raster\");\n      }\n    }\n  }, [loaders, dataset]);\n  return [raster, imageLayerLoaders, imageLayerMeta];\n}\nfunction useGenomicProfilesData(loaders, dataset, setItemIsReady, addUrl, isRequired, coordinationSetters, initialCoordinationValues) {\n  const [genomicProfilesAttrs, setGenomicProfilesAttrs] = useState4();\n  const setWarning = useSetWarning();\n  useEffect2(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n    if (loaders[dataset].loaders[\"genomic-profiles\"]) {\n      loaders[dataset].loaders[\"genomic-profiles\"].load().catch((e) => warn(e, setWarning)).then((payload) => {\n        if (!payload)\n          return;\n        const { data, url, coordinationValues } = payload;\n        setGenomicProfilesAttrs(data);\n        addUrl(url);\n        initCoordinationSpace(coordinationValues, coordinationSetters, initialCoordinationValues);\n        setItemIsReady(\"genomic-profiles\");\n      });\n    } else {\n      setGenomicProfilesAttrs(null);\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, \"genomic-profiles\", null, null), setWarning);\n      } else {\n        setItemIsReady(\"genomic-profiles\");\n      }\n    }\n  }, [loaders, dataset]);\n  return [genomicProfilesAttrs];\n}\n\n// src/components/sets/cell-set-utils.js\nimport uuidv4 from \"uuid/v4\";\nimport isNil from \"lodash/isNil\";\nimport isEqual2 from \"lodash/isEqual\";\nimport range3 from \"lodash/range\";\nimport { featureCollection as turfFeatureCollection, point as turfPoint } from \"@turf/helpers\";\nimport centroid from \"@turf/centroid\";\nimport concaveman from \"concaveman\";\n\n// src/components/sets/utils.js\nimport tinycolor from \"tinycolor2\";\nimport isEqual from \"lodash/isEqual\";\nfunction callbackOnKeyPress(event, key, callback) {\n  if (event.key === key) {\n    event.preventDefault();\n    callback();\n  }\n}\nfunction colorArrayToString(rgbArray) {\n  return tinycolor({ r: rgbArray[0], g: rgbArray[1], b: rgbArray[2] }).toHexString();\n}\nfunction colorStringToArray(colorString) {\n  const colorObj = tinycolor(colorString).toRgb();\n  return [colorObj.r, colorObj.g, colorObj.b];\n}\nfunction getLevelTooltipText(i) {\n  if (i === 0)\n    return \"Color by hierarchy\";\n  if (i <= 2) {\n    const subs = (j) => \"sub\".repeat(j);\n    return `Color by ${subs(i - 1)}cluster`;\n  }\n  return `Color by cluster level ${i}`;\n}\nfunction isEqualOrPrefix(targetPath, testPath) {\n  if (targetPath.length <= testPath.length) {\n    return isEqual(targetPath, testPath.slice(0, targetPath.length));\n  }\n  return false;\n}\nfunction tryRenamePath(targetPath, testPath, nextTargetPath) {\n  if (isEqualOrPrefix(targetPath, testPath)) {\n    return [...nextTargetPath, ...testPath.slice(nextTargetPath.length)];\n  }\n  return testPath;\n}\nvar PATH_SEP = \"___\";\nfunction pathToKey(path) {\n  return path.join(PATH_SEP);\n}\n\n// src/components/sets/cell-set-utils.js\nfunction generateKey() {\n  return uuidv4();\n}\nfunction nodeToSet(currNode) {\n  if (!currNode) {\n    return [];\n  }\n  if (!currNode.children) {\n    return currNode.set || [];\n  }\n  return currNode.children.flatMap((c) => nodeToSet(c));\n}\nfunction nodeToHeight(currNode, level = 0) {\n  if (!currNode.children) {\n    return level;\n  }\n  const newLevel = level + 1;\n  const childrenHeights = currNode.children.map((c) => nodeToHeight(c, newLevel));\n  return Math.max(...childrenHeights, newLevel);\n}\nfunction getNodeLength(currNode) {\n  var _a2;\n  if (!currNode) {\n    return 0;\n  }\n  if (!currNode.children) {\n    return ((_a2 = currNode.set) == null ? void 0 : _a2.length) || 0;\n  }\n  return currNode.children.reduce((acc, curr) => acc + getNodeLength(curr), 0);\n}\nfunction nodeFindNodeByNamePath(node, path, currLevelIndex) {\n  const currNodeName = path[currLevelIndex];\n  if (node.name === currNodeName) {\n    if (currLevelIndex === path.length - 1) {\n      return node;\n    }\n    if (node.children) {\n      const foundNodes = node.children.map((child) => nodeFindNodeByNamePath(child, path, currLevelIndex + 1)).filter(Boolean);\n      if (foundNodes.length === 1) {\n        return foundNodes[0];\n      }\n    }\n  }\n  return null;\n}\nfunction treeFindNodeByNamePath(currTree, targetNamePath) {\n  const foundNodes = currTree.tree.map((levelZeroNode) => nodeFindNodeByNamePath(levelZeroNode, targetNamePath, 0)).filter(Boolean);\n  if (foundNodes.length === 1) {\n    return foundNodes[0];\n  }\n  return null;\n}\nfunction nodeTransform(node, predicate, transform, transformedPaths, currPath) {\n  let newPath;\n  if (!currPath) {\n    newPath = [node.name];\n  } else {\n    newPath = [...currPath];\n  }\n  if (predicate(node, newPath)) {\n    transformedPaths.push(newPath);\n    return transform(node, newPath);\n  }\n  if (node.children) {\n    return __spreadProps(__spreadValues({}, node), {\n      children: node.children.map((child) => nodeTransform(child, predicate, transform, transformedPaths, newPath.concat([child.name])))\n    });\n  }\n  return node;\n}\nfunction nodeTransformAll(node, predicate, transform, transformedPaths, currPath) {\n  let newPath;\n  if (!currPath) {\n    newPath = [node.name];\n  } else {\n    newPath = [...currPath];\n  }\n  let newNode = node;\n  if (predicate(node, newPath)) {\n    transformedPaths.push(newPath);\n    newNode = transform(node, newPath);\n  }\n  if (node.children) {\n    return __spreadProps(__spreadValues({}, newNode), {\n      children: newNode.children.map((child) => nodeTransformAll(child, predicate, transform, transformedPaths, newPath.concat([child.name])))\n    });\n  }\n  return newNode;\n}\nfunction nodeAppendChild(currNode, newChild) {\n  return __spreadProps(__spreadValues({}, currNode), {\n    children: [...currNode.children, newChild]\n  });\n}\nfunction nodePrependChild(currNode, newChild) {\n  return __spreadProps(__spreadValues({}, currNode), {\n    children: [newChild, ...currNode.children]\n  });\n}\nfunction nodeInsertChild(currNode, newChild, insertIndex) {\n  const newChildren = Array.from(currNode.children);\n  newChildren.splice(insertIndex, 0, newChild);\n  return __spreadProps(__spreadValues({}, currNode), {\n    children: newChildren\n  });\n}\nfunction treeToUnion(currTree, checkedPaths) {\n  const nodes = checkedPaths.map((path) => treeFindNodeByNamePath(currTree, path));\n  const nodeSets = nodes.map((node) => nodeToSet(node).map(([cellId]) => cellId));\n  return nodeSets.reduce((a, h) => a.concat(h.filter((hEl) => !a.includes(hEl))), nodeSets[0] || []);\n}\nfunction treeToIntersection(currTree, checkedPaths) {\n  const nodes = checkedPaths.map((path) => treeFindNodeByNamePath(currTree, path));\n  const nodeSets = nodes.map((node) => nodeToSet(node).map(([cellId]) => cellId));\n  return nodeSets.reduce((a, h) => h.filter((hEl) => a.includes(hEl)), nodeSets[0] || []);\n}\nfunction treeToComplement(currTree, checkedPaths, items2) {\n  const primaryUnion = treeToUnion(currTree, checkedPaths);\n  return items2.filter((el) => !primaryUnion.includes(el));\n}\nfunction nodeToLevelDescendantNamePaths(node, level, prevPath, stopEarly = false) {\n  if (!node.children) {\n    if (!stopEarly) {\n      return null;\n    }\n    return [[...prevPath, node.name]];\n  }\n  if (level === 0) {\n    return [[...prevPath, node.name]];\n  }\n  return node.children.flatMap((c) => nodeToLevelDescendantNamePaths(c, level - 1, [...prevPath, node.name], stopEarly)).filter(Boolean);\n}\nfunction treeExport(currTree, datatype) {\n  return {\n    version: HIERARCHICAL_SCHEMAS[datatype].latestVersion,\n    datatype,\n    tree: currTree.tree\n  };\n}\nfunction treeExportLevelZeroNode(currTree, nodePath, datatype, cellSetColors, theme) {\n  const node = treeFindNodeByNamePath(currTree, nodePath);\n  const nodeWithColors = nodeTransformAll(node, () => true, (n, nPath) => {\n    var _a2, _b2;\n    const nodeColor = (_b2 = (_a2 = cellSetColors == null ? void 0 : cellSetColors.find((c) => isEqual2(c.path, nPath))) == null ? void 0 : _a2.color) != null ? _b2 : getDefaultColor(theme);\n    return __spreadProps(__spreadValues({}, n), {\n      color: nodeColor.slice(0, 3)\n    });\n  }, []);\n  const treeWithOneLevelZeroNode = __spreadProps(__spreadValues({}, currTree), {\n    tree: [nodeWithColors]\n  });\n  return {\n    treeToExport: treeExport(treeWithOneLevelZeroNode, datatype),\n    nodeName: node.name\n  };\n}\nfunction treeExportSet(currTree, nodePath) {\n  const node = treeFindNodeByNamePath(currTree, nodePath);\n  return { setToExport: nodeToSet(node), nodeName: node.name };\n}\nfunction treeInitialize(datatype) {\n  return {\n    version: HIERARCHICAL_SCHEMAS[datatype].latestVersion,\n    datatype,\n    tree: []\n  };\n}\nfunction nodeToRenderProps(node, path, cellSetColor) {\n  var _a2;\n  const level = path.length - 1;\n  return {\n    title: node.name,\n    nodeKey: pathToKey(path),\n    path,\n    size: getNodeLength(node),\n    color: (_a2 = cellSetColor == null ? void 0 : cellSetColor.find((d) => isEqual2(d.path, path))) == null ? void 0 : _a2.color,\n    level,\n    isLeaf: (!node.children || node.children.length === 0) && Boolean(node.set),\n    height: nodeToHeight(node)\n  };\n}\nfunction colorMixWithUncertainty(originalColor, p, mixingColor = [128, 128, 128]) {\n  return [\n    (originalColor[0] - mixingColor[0]) * p + mixingColor[0],\n    (originalColor[1] - mixingColor[1]) * p + mixingColor[1],\n    (originalColor[2] - mixingColor[2]) * p + mixingColor[2]\n  ];\n}\nfunction treeToCellColorsBySetNames(currTree, selectedNamePaths, cellSetColor, theme) {\n  let cellColorsArray = [];\n  selectedNamePaths.forEach((setNamePath) => {\n    var _a2;\n    const node = treeFindNodeByNamePath(currTree, setNamePath);\n    if (node) {\n      const nodeSet = nodeToSet(node);\n      const nodeColor = ((_a2 = cellSetColor == null ? void 0 : cellSetColor.find((d) => isEqual2(d.path, setNamePath))) == null ? void 0 : _a2.color) || getDefaultColor(theme);\n      cellColorsArray = [\n        ...cellColorsArray,\n        ...nodeSet.map(([cellId, prob]) => [\n          cellId,\n          isNil(prob) ? nodeColor : colorMixWithUncertainty(nodeColor, prob)\n        ])\n      ];\n    }\n  });\n  return new Map(cellColorsArray);\n}\nfunction treeToObjectsBySetNames(currTree, selectedNamePaths, setColor, theme) {\n  var _a2;\n  let cellsArray = [];\n  for (let i = 0; i < selectedNamePaths.length; i += 1) {\n    const setNamePath = selectedNamePaths[i];\n    const node = treeFindNodeByNamePath(currTree, setNamePath);\n    if (node) {\n      const nodeSet = nodeToSet(node);\n      const nodeColor = ((_a2 = setColor == null ? void 0 : setColor.find((d) => isEqual2(d.path, setNamePath))) == null ? void 0 : _a2.color) || getDefaultColor(theme);\n      cellsArray = cellsArray.concat(nodeSet.map(([cellId]) => ({\n        obsId: cellId,\n        name: node.name,\n        color: nodeColor\n      })));\n    }\n  }\n  return cellsArray;\n}\nfunction treeToCellPolygonsBySetNames(currTree, cells, mapping, selectedNamePaths, cellSetColor, theme) {\n  const cellSetPolygons = [];\n  selectedNamePaths.forEach((setNamePath) => {\n    var _a2;\n    const node = treeFindNodeByNamePath(currTree, setNamePath);\n    if (node) {\n      const nodeSet = nodeToSet(node);\n      const nodeColor = ((_a2 = cellSetColor == null ? void 0 : cellSetColor.find((d) => isEqual2(d.path, setNamePath))) == null ? void 0 : _a2.color) || getDefaultColor(theme);\n      const cellPositions = nodeSet.map(([cellId]) => {\n        var _a3, _b2;\n        return [\n          (_a3 = cells[cellId]) == null ? void 0 : _a3.mappings[mapping][0],\n          -((_b2 = cells[cellId]) == null ? void 0 : _b2.mappings[mapping][1])\n        ];\n      }).filter((cell) => cell.every((i) => typeof i === \"number\"));\n      if (cellPositions.length > 2) {\n        const points = turfFeatureCollection(cellPositions.map(turfPoint));\n        const concavity = Infinity;\n        const hullCoords = concaveman(cellPositions, concavity);\n        if (hullCoords) {\n          const centroidCoords = centroid(points).geometry.coordinates;\n          cellSetPolygons.push({\n            path: setNamePath,\n            name: setNamePath[setNamePath.length - 1],\n            hull: hullCoords,\n            color: nodeColor,\n            centroid: centroidCoords\n          });\n        }\n      }\n    }\n  });\n  return cellSetPolygons;\n}\nfunction treeToSetSizesBySetNames(currTree, selectedNamePaths, setColor, theme) {\n  const sizes = [];\n  selectedNamePaths.forEach((setNamePath) => {\n    var _a2;\n    const node = treeFindNodeByNamePath(currTree, setNamePath);\n    if (node) {\n      const nodeSet = nodeToSet(node);\n      const nodeColor = ((_a2 = setColor.find((d) => isEqual2(d.path, setNamePath))) == null ? void 0 : _a2.color) || getDefaultColor(theme);\n      sizes.push({\n        key: generateKey(),\n        name: node.name,\n        size: nodeSet.length,\n        color: nodeColor\n      });\n    }\n  });\n  return sizes;\n}\nfunction filterNode(node, prevPath, filterPath) {\n  if (isEqual2([...prevPath, node.name], filterPath)) {\n    return null;\n  }\n  if (!node.children) {\n    return node;\n  }\n  return __spreadProps(__spreadValues({}, node), {\n    children: node.children.map((c) => filterNode(c, [...prevPath, node.name], filterPath)).filter(Boolean)\n  });\n}\nfunction treeToExpectedCheckedLevel(currTree, checkedPaths) {\n  let result = null;\n  if (currTree) {\n    currTree.tree.forEach((lzn) => {\n      const levelZeroPath = [lzn.name];\n      const height = nodeToHeight(lzn);\n      range3(height).forEach((i) => {\n        const levelIndex = i + 1;\n        const levelNodePaths = nodeToLevelDescendantNamePaths(lzn, levelIndex, [], true);\n        if (isEqual2(levelNodePaths, checkedPaths)) {\n          result = { levelZeroPath, levelIndex };\n        }\n      });\n    });\n  }\n  return result;\n}\nfunction treesConflict(cellSets, testCellSets) {\n  const paths = [];\n  const testPaths = [];\n  let hasConflict = false;\n  function getPaths(node, prevPath) {\n    paths.push([...prevPath, node.name]);\n    if (node.children) {\n      node.children.forEach((c) => getPaths(c, [...prevPath, node.name]));\n    }\n  }\n  cellSets.tree.forEach((lzn) => getPaths(lzn, []));\n  function getTestPaths(node, prevPath) {\n    testPaths.push([...prevPath, node.name]);\n    if (node.children) {\n      node.children.forEach((c) => getPaths(c, [...prevPath, node.name]));\n    }\n  }\n  testCellSets.tree.forEach((lzn) => getTestPaths(lzn, []));\n  testPaths.forEach((testPath) => {\n    if (paths.find((p) => isEqual2(p, testPath))) {\n      hasConflict = true;\n    }\n  });\n  return hasConflict;\n}\nfunction initializeCellSetColor(cellSets, cellSetColor) {\n  const nextCellSetColor = [...cellSetColor || []];\n  const nodeCountPerTreePerLevel = cellSets.tree.map((tree) => Array.from({\n    length: nodeToHeight(tree) + 1\n  }).fill(0));\n  function processNode2(node, prevPath, hierarchyLevel, treeIndex) {\n    const index = nodeCountPerTreePerLevel[treeIndex][hierarchyLevel];\n    const nodePath = [...prevPath, node.name];\n    const nodeColor = nextCellSetColor.find((d) => isEqual2(d.path, nodePath));\n    if (!nodeColor) {\n      nextCellSetColor.push({\n        path: nodePath,\n        color: PALETTE[index % PALETTE.length]\n      });\n    }\n    nodeCountPerTreePerLevel[treeIndex][hierarchyLevel] += 1;\n    if (node.children) {\n      node.children.forEach((c) => processNode2(c, nodePath, hierarchyLevel + 1, treeIndex));\n    }\n  }\n  cellSets.tree.forEach((lzn, treeIndex) => processNode2(lzn, [], 0, treeIndex));\n  return nextCellSetColor;\n}\nfunction getCellSetPolygons(params) {\n  const {\n    cells,\n    mapping,\n    cellSets,\n    cellSetSelection,\n    cellSetColor,\n    theme\n  } = params;\n  if (cellSetSelection && cellSetSelection.length > 0 && cellSets && cells) {\n    return treeToCellPolygonsBySetNames(cellSets, cells, mapping, cellSetSelection, cellSetColor, theme);\n  }\n  return [];\n}\n\n// src/components/interpolate-colors.js\nvar schemeRdBu = [[103, 0, 31], [178, 24, 43], [214, 96, 77], [244, 165, 130], [253, 219, 199], [247, 247, 247], [209, 229, 240], [146, 197, 222], [67, 147, 195], [33, 102, 172], [5, 48, 97]];\nvar schemePlasma = [[13, 8, 135], [16, 7, 136], [19, 7, 137], [22, 7, 138], [25, 6, 140], [27, 6, 141], [29, 6, 142], [32, 6, 143], [34, 6, 144], [36, 6, 145], [38, 5, 145], [40, 5, 146], [42, 5, 147], [44, 5, 148], [46, 5, 149], [47, 5, 150], [49, 5, 151], [51, 5, 151], [53, 4, 152], [55, 4, 153], [56, 4, 154], [58, 4, 154], [60, 4, 155], [62, 4, 156], [63, 4, 156], [65, 4, 157], [67, 3, 158], [68, 3, 158], [70, 3, 159], [72, 3, 159], [73, 3, 160], [75, 3, 161], [76, 2, 161], [78, 2, 162], [80, 2, 162], [81, 2, 163], [83, 2, 163], [85, 2, 164], [86, 1, 164], [88, 1, 164], [89, 1, 165], [91, 1, 165], [92, 1, 166], [94, 1, 166], [96, 1, 166], [97, 0, 167], [99, 0, 167], [100, 0, 167], [102, 0, 167], [103, 0, 168], [105, 0, 168], [106, 0, 168], [108, 0, 168], [110, 0, 168], [111, 0, 168], [113, 0, 168], [114, 1, 168], [116, 1, 168], [117, 1, 168], [119, 1, 168], [120, 1, 168], [122, 2, 168], [123, 2, 168], [125, 3, 168], [126, 3, 168], [128, 4, 168], [129, 4, 167], [131, 5, 167], [132, 5, 167], [134, 6, 166], [135, 7, 166], [136, 8, 166], [138, 9, 165], [139, 10, 165], [141, 11, 165], [142, 12, 164], [143, 13, 164], [145, 14, 163], [146, 15, 163], [148, 16, 162], [149, 17, 161], [150, 19, 161], [152, 20, 160], [153, 21, 159], [154, 22, 159], [156, 23, 158], [157, 24, 157], [158, 25, 157], [160, 26, 156], [161, 27, 155], [162, 29, 154], [163, 30, 154], [165, 31, 153], [166, 32, 152], [167, 33, 151], [168, 34, 150], [170, 35, 149], [171, 36, 148], [172, 38, 148], [173, 39, 147], [174, 40, 146], [176, 41, 145], [177, 42, 144], [178, 43, 143], [179, 44, 142], [180, 46, 141], [181, 47, 140], [182, 48, 139], [183, 49, 138], [184, 50, 137], [186, 51, 136], [187, 52, 136], [188, 53, 135], [189, 55, 134], [190, 56, 133], [191, 57, 132], [192, 58, 131], [193, 59, 130], [194, 60, 129], [195, 61, 128], [196, 62, 127], [197, 64, 126], [198, 65, 125], [199, 66, 124], [200, 67, 123], [201, 68, 122], [202, 69, 122], [203, 70, 121], [204, 71, 120], [204, 73, 119], [205, 74, 118], [206, 75, 117], [207, 76, 116], [208, 77, 115], [209, 78, 114], [210, 79, 113], [211, 81, 113], [212, 82, 112], [213, 83, 111], [213, 84, 110], [214, 85, 109], [215, 86, 108], [216, 87, 107], [217, 88, 106], [218, 90, 106], [218, 91, 105], [219, 92, 104], [220, 93, 103], [221, 94, 102], [222, 95, 101], [222, 97, 100], [223, 98, 99], [224, 99, 99], [225, 100, 98], [226, 101, 97], [226, 102, 96], [227, 104, 95], [228, 105, 94], [229, 106, 93], [229, 107, 93], [230, 108, 92], [231, 110, 91], [231, 111, 90], [232, 112, 89], [233, 113, 88], [233, 114, 87], [234, 116, 87], [235, 117, 86], [235, 118, 85], [236, 119, 84], [237, 121, 83], [237, 122, 82], [238, 123, 81], [239, 124, 81], [239, 126, 80], [240, 127, 79], [240, 128, 78], [241, 129, 77], [241, 131, 76], [242, 132, 75], [243, 133, 75], [243, 135, 74], [244, 136, 73], [244, 137, 72], [245, 139, 71], [245, 140, 70], [246, 141, 69], [246, 143, 68], [247, 144, 68], [247, 145, 67], [247, 147, 66], [248, 148, 65], [248, 149, 64], [249, 151, 63], [249, 152, 62], [249, 154, 62], [250, 155, 61], [250, 156, 60], [250, 158, 59], [251, 159, 58], [251, 161, 57], [251, 162, 56], [252, 163, 56], [252, 165, 55], [252, 166, 54], [252, 168, 53], [252, 169, 52], [253, 171, 51], [253, 172, 51], [253, 174, 50], [253, 175, 49], [253, 177, 48], [253, 178, 47], [253, 180, 47], [253, 181, 46], [254, 183, 45], [254, 184, 44], [254, 186, 44], [254, 187, 43], [254, 189, 42], [254, 190, 42], [254, 192, 41], [253, 194, 41], [253, 195, 40], [253, 197, 39], [253, 198, 39], [253, 200, 39], [253, 202, 38], [253, 203, 38], [252, 205, 37], [252, 206, 37], [252, 208, 37], [252, 210, 37], [251, 211, 36], [251, 213, 36], [251, 215, 36], [250, 216, 36], [250, 218, 36], [249, 220, 36], [249, 221, 37], [248, 223, 37], [248, 225, 37], [247, 226, 37], [247, 228, 37], [246, 230, 38], [246, 232, 38], [245, 233, 38], [245, 235, 39], [244, 237, 39], [243, 238, 39], [243, 240, 39], [242, 242, 39], [241, 244, 38], [241, 245, 37], [240, 247, 36], [240, 249, 33]];\nfunction rgbSpline(spline) {\n  return (colors) => {\n    const n = colors.length;\n    let r = new Array(n);\n    let g = new Array(n);\n    let b = new Array(n);\n    let i;\n    let color;\n    for (i = 0; i < n; ++i) {\n      color = [colors[i][0], colors[i][1], colors[i][2]];\n      r[i] = color[0] || 0;\n      g[i] = color[1] || 0;\n      b[i] = color[2] || 0;\n    }\n    r = spline(r);\n    g = spline(g);\n    b = spline(b);\n    return (t) => [r(t), g(t), b(t)];\n  };\n}\nfunction basis(values) {\n  function innerBasis(t1, v0, v1, v2, v3) {\n    const t2 = t1 * t1;\n    const t3 = t2 * t1;\n    return ((1 - 3 * t1 + 3 * t2 - t3) * v0 + (4 - 6 * t2 + 3 * t3) * v1 + (1 + 3 * t1 + 3 * t2 - 3 * t3) * v2 + t3 * v3) / 6;\n  }\n  const n = values.length - 1;\n  return (t) => {\n    const i = t <= 0 ? t = 0 : t >= 1 ? (t = 1, n - 1) : Math.floor(t * n);\n    const v1 = values[i];\n    const v2 = values[i + 1];\n    const v0 = i > 0 ? values[i - 1] : 2 * v1 - v2;\n    const v3 = i < n - 1 ? values[i + 2] : 2 * v2 - v1;\n    return innerBasis((t - i / n) * n, v0, v1, v2, v3);\n  };\n}\nvar interpolateRgbBasis = rgbSpline(basis);\nfunction interpolateSequentialMulti(range10) {\n  const n = range10.length;\n  return (t) => range10[Math.max(0, Math.min(n - 1, Math.floor(t * n)))];\n}\nvar interpolateRdBu = interpolateRgbBasis(schemeRdBu);\nvar interpolatePlasma = interpolateSequentialMulti(schemePlasma);\nfunction getCellColors(params) {\n  const {\n    cellColorEncoding,\n    expressionData,\n    cellSets,\n    cellSetSelection,\n    cellSetColor,\n    expressionDataAttrs,\n    theme\n  } = params;\n  if (cellColorEncoding === \"geneSelection\" && expressionData && expressionDataAttrs) {\n    const geneExpColormap = interpolatePlasma;\n    const colors = new Map();\n    for (let i = 0; i < expressionData.length; i += 1) {\n      const value = expressionData[i];\n      const cellColor = geneExpColormap(value / 255);\n      colors.set(expressionDataAttrs.rows[i], cellColor);\n    }\n    return colors;\n  }\n  if (cellColorEncoding === \"cellSetSelection\" && cellSetSelection && cellSets) {\n    return treeToCellColorsBySetNames(cellSets, cellSetSelection, cellSetColor, theme);\n  }\n  return new Map();\n}\n\n// src/components/heatmap/Heatmap.js\nimport React6, {\n  useRef as useRef4,\n  useState as useState5,\n  useCallback as useCallback3,\n  useMemo as useMemo4,\n  useEffect as useEffect3,\n  useReducer,\n  forwardRef\n} from \"react\";\nimport uuidv42 from \"uuid/v4\";\nimport DeckGL2 from \"deck.gl\";\nimport { OrthographicView as OrthographicView2 } from \"@deck.gl/core\";\nimport range5 from \"lodash/range\";\nimport clamp2 from \"lodash/clamp\";\nimport isEqual3 from \"lodash/isEqual\";\nimport { max } from \"d3-array\";\n\n// src/layers/HeatmapCompositeTextLayer.js\nimport { COORDINATE_SYSTEM as COORDINATE_SYSTEM3, CompositeLayer as CompositeLayer2 } from \"@deck.gl/core\";\nimport { TextLayer as TextLayer2 } from \"@deck.gl/layers\";\n\n// src/layers/heatmap-constants.js\nimport GL2 from \"@luma.gl/constants\";\nvar TILE_SIZE = 2048;\nvar MIN_ROW_AGG = 1;\nvar MAX_ROW_AGG = 16;\nvar COLOR_BAR_SIZE = 20;\nvar AXIS_LABEL_TEXT_SIZE = 9;\nvar AXIS_TITLE_TEXT_SIZE = 15;\nvar AXIS_MIN_SIZE = 10;\nvar AXIS_MAX_SIZE = 90;\nvar AXIS_MARGIN = 3;\nvar THEME_TO_TEXT_COLOR = {\n  dark: [224, 224, 224],\n  light: [64, 64, 64]\n};\nvar AXIS_FONT_FAMILY = \"-apple-system, 'Helvetica Neue', Arial, sans-serif\";\nvar PIXELATED_TEXTURE_PARAMETERS = {\n  [GL2.TEXTURE_MIN_FILTER]: GL2.NEAREST,\n  [GL2.TEXTURE_MAG_FILTER]: GL2.NEAREST,\n  [GL2.TEXTURE_WRAP_S]: GL2.CLAMP_TO_EDGE,\n  [GL2.TEXTURE_WRAP_T]: GL2.CLAMP_TO_EDGE\n};\n\n// src/layers/HeatmapCompositeTextLayer.js\nvar HeatmapCompositeTextLayer = class extends CompositeLayer2 {\n  _renderAxisTopLayers() {\n    const {\n      axisTopLabelData,\n      matrixLeft,\n      width,\n      matrixWidth,\n      viewWidth,\n      theme,\n      targetX,\n      targetY,\n      axisTopTitle,\n      cellWidth,\n      axisOffsetTop,\n      scaleFactor\n    } = this.props;\n    const showAxisTopLabels = cellWidth >= AXIS_LABEL_TEXT_SIZE;\n    const axisLabelTop = targetY + (axisOffsetTop - AXIS_MARGIN) / 2 / scaleFactor;\n    return [\n      new TextLayer2({\n        id: \"axisTopLabels\",\n        coordinateSystem: COORDINATE_SYSTEM3.CARTESIAN,\n        data: axisTopLabelData,\n        getText: (d) => d[1],\n        getPosition: (d) => [matrixLeft + (d[0] + 0.5) / width * matrixWidth, axisLabelTop],\n        getTextAnchor: \"start\",\n        getColor: () => THEME_TO_TEXT_COLOR[theme],\n        getSize: showAxisTopLabels ? AXIS_LABEL_TEXT_SIZE : 0,\n        getAngle: 75,\n        fontFamily: AXIS_FONT_FAMILY,\n        updateTriggers: {\n          getPosition: [axisLabelTop, matrixLeft, matrixWidth, viewWidth],\n          getSize: [showAxisTopLabels],\n          getColor: [theme]\n        }\n      }),\n      new TextLayer2({\n        id: \"axisTopTitle\",\n        coordinateSystem: COORDINATE_SYSTEM3.CARTESIAN,\n        data: [{ title: axisTopTitle }],\n        getText: (d) => d.title,\n        getPosition: [targetX, targetY],\n        getTextAnchor: \"middle\",\n        getColor: () => THEME_TO_TEXT_COLOR[theme],\n        getSize: !showAxisTopLabels ? AXIS_TITLE_TEXT_SIZE : 0,\n        getAngle: 0,\n        fontFamily: AXIS_FONT_FAMILY,\n        updateTriggers: {\n          getSize: [showAxisTopLabels],\n          getColor: [theme]\n        }\n      })\n    ];\n  }\n  _renderAxisLeftLayers() {\n    const {\n      axisLeftLabelData,\n      matrixTop,\n      height,\n      matrixHeight,\n      viewHeight,\n      theme,\n      axisLeftTitle,\n      targetX,\n      targetY,\n      cellHeight,\n      axisOffsetLeft,\n      scaleFactor\n    } = this.props;\n    const showAxisLeftLabels = cellHeight >= AXIS_LABEL_TEXT_SIZE;\n    const axisLabelLeft = targetX + (axisOffsetLeft - AXIS_MARGIN) / 2 / scaleFactor;\n    return [\n      new TextLayer2({\n        id: \"axisLeftLabels\",\n        coordinateSystem: COORDINATE_SYSTEM3.CARTESIAN,\n        data: axisLeftLabelData,\n        getText: (d) => d[1],\n        getPosition: (d) => [axisLabelLeft, matrixTop + (d[0] + 0.5) / height * matrixHeight],\n        getTextAnchor: \"end\",\n        getColor: () => THEME_TO_TEXT_COLOR[theme],\n        getSize: showAxisLeftLabels ? AXIS_LABEL_TEXT_SIZE : 0,\n        getAngle: 0,\n        fontFamily: AXIS_FONT_FAMILY,\n        updateTriggers: {\n          getPosition: [axisLabelLeft, matrixTop, matrixHeight, viewHeight],\n          getSize: [showAxisLeftLabels],\n          getColor: [theme]\n        }\n      }),\n      new TextLayer2({\n        id: \"axisLeftTitle\",\n        coordinateSystem: COORDINATE_SYSTEM3.CARTESIAN,\n        data: [{ title: axisLeftTitle }],\n        getText: (d) => d.title,\n        getPosition: [targetX, targetY],\n        getTextAnchor: \"middle\",\n        getColor: () => THEME_TO_TEXT_COLOR[theme],\n        getSize: !showAxisLeftLabels ? AXIS_TITLE_TEXT_SIZE : 0,\n        getAngle: 90,\n        fontFamily: AXIS_FONT_FAMILY,\n        updateTriggers: {\n          getSize: [showAxisLeftLabels],\n          getColor: [theme]\n        }\n      })\n    ];\n  }\n  renderLayers() {\n    return [\n      this._renderAxisTopLayers(),\n      this._renderAxisLeftLayers()\n    ];\n  }\n};\nHeatmapCompositeTextLayer.layerName = \"HeatmapCompositeTextLayer\";\n\n// src/layers/PixelatedBitmapLayer.js\nimport { BitmapLayer as BitmapLayer2 } from \"@deck.gl/layers\";\nimport { CompositeLayer as CompositeLayer3 } from \"@deck.gl/core\";\nvar defaultProps2 = __spreadProps(__spreadValues({}, BitmapLayer2.defaultProps), {\n  image: { type: \"object\", value: null, async: true },\n  bounds: { type: \"array\", value: [1, 0, 0, 1], compare: true },\n  desaturate: {\n    type: \"number\",\n    min: 0,\n    max: 1,\n    value: 0\n  },\n  transparentColor: { type: \"color\", value: [0, 0, 0, 0] },\n  tintColor: { type: \"color\", value: [255, 255, 255] }\n});\nvar PixelatedBitmapLayer = class extends CompositeLayer3 {\n  renderLayers() {\n    const { image } = this.props;\n    return new BitmapLayer2(this.props, {\n      id: `${this.props.id}-wrapped`,\n      image,\n      textureParameters: PIXELATED_TEXTURE_PARAMETERS\n    });\n  }\n};\nPixelatedBitmapLayer.layerName = \"PixelatedBitmapLayer\";\nPixelatedBitmapLayer.defaultProps = defaultProps2;\n\n// src/layers/HeatmapBitmapLayer.js\nimport GL3 from \"@luma.gl/constants\";\nimport { _mergeShaders, project32 as project322, picking as picking2 } from \"@deck.gl/core\";\nimport { BitmapLayer as BitmapLayer3 } from \"@deck.gl/layers\";\nimport { Texture2D as Texture2D2 } from \"@luma.gl/core\";\n\n// src/layers/constants.js\nvar GLSL_COLORMAPS = [\n  \"plasma\",\n  \"viridis\",\n  \"jet\"\n];\nvar GLSL_COLORMAP_DEFAULT = \"plasma\";\nvar COLORMAP_SHADER_PLACEHOLDER = \"COLORMAP_FUNC\";\n\n// src/layers/heatmap-bitmap-layer-shaders.js\nvar vertexShader = \"\\n#define SHADER_NAME heatmap-bitmap-layer-vertex-shader\\n\\nattribute vec2 texCoords;\\nattribute vec3 positions;\\nattribute vec3 positions64Low;\\n\\nvarying vec2 vTexCoord;\\n\\nconst vec3 pickingColor = vec3(1.0, 0.0, 0.0);\\n\\nvoid main(void) {\\n  geometry.worldPosition = positions;\\n  geometry.uv = texCoords;\\n  geometry.pickingColor = pickingColor;\\n\\n  gl_Position = project_position_to_clipspace(positions, positions64Low, vec3(0.0), geometry.position);\\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\\n\\n  vTexCoord = texCoords;\\n\\n  vec4 color = vec4(0.0);\\n  DECKGL_FILTER_COLOR(color, geometry);\\n}\\n\";\nvar fragmentShader = \"\\n#define SHADER_NAME heatmap-bitmap-layer-fragment-shader\\n\\n#ifdef GL_ES\\nprecision mediump float;\\n#endif\\n\\nvec4 rdbu (float x_2865134303) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0.0196078431372549,0.0392156862745098,0.6745098039215687,1);\\n  const float e1 = 0.35;\\n  const vec4 v1 = vec4(0.41568627450980394,0.5372549019607843,0.9686274509803922,1);\\n  const float e2 = 0.5;\\n  const vec4 v2 = vec4(0.7450980392156863,0.7450980392156863,0.7450980392156863,1);\\n  const float e3 = 0.6;\\n  const vec4 v3 = vec4(0.8627450980392157,0.6666666666666666,0.5176470588235295,1);\\n  const float e4 = 0.7;\\n  const vec4 v4 = vec4(0.9019607843137255,0.5686274509803921,0.35294117647058826,1);\\n  const float e5 = 1.0;\\n  const vec4 v5 = vec4(0.6980392156862745,0.0392156862745098,0.10980392156862745,1);\\n  float a0 = smoothstep(e0,e1,x_2865134303);\\n  float a1 = smoothstep(e1,e2,x_2865134303);\\n  float a2 = smoothstep(e2,e3,x_2865134303);\\n  float a3 = smoothstep(e3,e4,x_2865134303);\\n  float a4 = smoothstep(e4,e5,x_2865134303);\\n  return max(mix(v0,v1,a0)*step(e0,x_2865134303)*step(x_2865134303,e1),\\n    max(mix(v1,v2,a1)*step(e1,x_2865134303)*step(x_2865134303,e2),\\n    max(mix(v2,v3,a2)*step(e2,x_2865134303)*step(x_2865134303,e3),\\n    max(mix(v3,v4,a3)*step(e3,x_2865134303)*step(x_2865134303,e4),mix(v4,v5,a4)*step(e4,x_2865134303)*step(x_2865134303,e5)\\n  ))));\\n}\\n\\nvec4 plasma (float x_4113959278) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0.050980392156862744,0.03137254901960784,0.5294117647058824,1);\\n  const float e1 = 0.13;\\n  const vec4 v1 = vec4(0.29411764705882354,0.011764705882352941,0.6313725490196078,1);\\n  const float e2 = 0.25;\\n  const vec4 v2 = vec4(0.49019607843137253,0.011764705882352941,0.6588235294117647,1);\\n  const float e3 = 0.38;\\n  const vec4 v3 = vec4(0.6588235294117647,0.13333333333333333,0.5882352941176471,1);\\n  const float e4 = 0.5;\\n  const vec4 v4 = vec4(0.796078431372549,0.27450980392156865,0.4745098039215686,1);\\n  const float e5 = 0.63;\\n  const vec4 v5 = vec4(0.8980392156862745,0.4196078431372549,0.36470588235294116,1);\\n  const float e6 = 0.75;\\n  const vec4 v6 = vec4(0.9725490196078431,0.5803921568627451,0.2549019607843137,1);\\n  const float e7 = 0.88;\\n  const vec4 v7 = vec4(0.9921568627450981,0.7647058823529411,0.1568627450980392,1);\\n  const float e8 = 1.0;\\n  const vec4 v8 = vec4(0.9411764705882353,0.9764705882352941,0.12941176470588237,1);\\n  float a0 = smoothstep(e0,e1,x_4113959278);\\n  float a1 = smoothstep(e1,e2,x_4113959278);\\n  float a2 = smoothstep(e2,e3,x_4113959278);\\n  float a3 = smoothstep(e3,e4,x_4113959278);\\n  float a4 = smoothstep(e4,e5,x_4113959278);\\n  float a5 = smoothstep(e5,e6,x_4113959278);\\n  float a6 = smoothstep(e6,e7,x_4113959278);\\n  float a7 = smoothstep(e7,e8,x_4113959278);\\n  return max(mix(v0,v1,a0)*step(e0,x_4113959278)*step(x_4113959278,e1),\\n    max(mix(v1,v2,a1)*step(e1,x_4113959278)*step(x_4113959278,e2),\\n    max(mix(v2,v3,a2)*step(e2,x_4113959278)*step(x_4113959278,e3),\\n    max(mix(v3,v4,a3)*step(e3,x_4113959278)*step(x_4113959278,e4),\\n    max(mix(v4,v5,a4)*step(e4,x_4113959278)*step(x_4113959278,e5),\\n    max(mix(v5,v6,a5)*step(e5,x_4113959278)*step(x_4113959278,e6),\\n    max(mix(v6,v7,a6)*step(e6,x_4113959278)*step(x_4113959278,e7),mix(v7,v8,a7)*step(e7,x_4113959278)*step(x_4113959278,e8)\\n  )))))));\\n}\\n\\nvec4 viridis (float x_1156145534) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0.26666666666666666,0.00392156862745098,0.32941176470588235,1);\\n  const float e1 = 0.13;\\n  const vec4 v1 = vec4(0.2784313725490196,0.17254901960784313,0.47843137254901963,1);\\n  const float e2 = 0.25;\\n  const vec4 v2 = vec4(0.23137254901960785,0.3176470588235294,0.5450980392156862,1);\\n  const float e3 = 0.38;\\n  const vec4 v3 = vec4(0.17254901960784313,0.44313725490196076,0.5568627450980392,1);\\n  const float e4 = 0.5;\\n  const vec4 v4 = vec4(0.12941176470588237,0.5647058823529412,0.5529411764705883,1);\\n  const float e5 = 0.63;\\n  const vec4 v5 = vec4(0.15294117647058825,0.6784313725490196,0.5058823529411764,1);\\n  const float e6 = 0.75;\\n  const vec4 v6 = vec4(0.3607843137254902,0.7843137254901961,0.38823529411764707,1);\\n  const float e7 = 0.88;\\n  const vec4 v7 = vec4(0.6666666666666666,0.8627450980392157,0.19607843137254902,1);\\n  const float e8 = 1.0;\\n  const vec4 v8 = vec4(0.9921568627450981,0.9058823529411765,0.1450980392156863,1);\\n  float a0 = smoothstep(e0,e1,x_1156145534);\\n  float a1 = smoothstep(e1,e2,x_1156145534);\\n  float a2 = smoothstep(e2,e3,x_1156145534);\\n  float a3 = smoothstep(e3,e4,x_1156145534);\\n  float a4 = smoothstep(e4,e5,x_1156145534);\\n  float a5 = smoothstep(e5,e6,x_1156145534);\\n  float a6 = smoothstep(e6,e7,x_1156145534);\\n  float a7 = smoothstep(e7,e8,x_1156145534);\\n  return max(mix(v0,v1,a0)*step(e0,x_1156145534)*step(x_1156145534,e1),\\n    max(mix(v1,v2,a1)*step(e1,x_1156145534)*step(x_1156145534,e2),\\n    max(mix(v2,v3,a2)*step(e2,x_1156145534)*step(x_1156145534,e3),\\n    max(mix(v3,v4,a3)*step(e3,x_1156145534)*step(x_1156145534,e4),\\n    max(mix(v4,v5,a4)*step(e4,x_1156145534)*step(x_1156145534,e5),\\n    max(mix(v5,v6,a5)*step(e5,x_1156145534)*step(x_1156145534,e6),\\n    max(mix(v6,v7,a6)*step(e6,x_1156145534)*step(x_1156145534,e7),mix(v7,v8,a7)*step(e7,x_1156145534)*step(x_1156145534,e8)\\n  )))))));\\n}\\n\\nvec4 greys (float x_2073311089) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0,0,0,1);\\n  const float e1 = 1.0;\\n  const vec4 v1 = vec4(1,1,1,1);\\n  float a0 = smoothstep(e0,e1,x_2073311089);\\n  return mix(v0,v1,a0)*step(e0,x_2073311089)*step(x_2073311089,e1);\\n}\\n\\nvec4 magma (float x_2664132035) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0,0,0.01568627450980392,1);\\n  const float e1 = 0.13;\\n  const vec4 v1 = vec4(0.10980392156862745,0.06274509803921569,0.26666666666666666,1);\\n  const float e2 = 0.25;\\n  const vec4 v2 = vec4(0.30980392156862746,0.07058823529411765,0.4823529411764706,1);\\n  const float e3 = 0.38;\\n  const vec4 v3 = vec4(0.5058823529411764,0.1450980392156863,0.5058823529411764,1);\\n  const float e4 = 0.5;\\n  const vec4 v4 = vec4(0.7098039215686275,0.21176470588235294,0.47843137254901963,1);\\n  const float e5 = 0.63;\\n  const vec4 v5 = vec4(0.8980392156862745,0.3137254901960784,0.39215686274509803,1);\\n  const float e6 = 0.75;\\n  const vec4 v6 = vec4(0.984313725490196,0.5294117647058824,0.3803921568627451,1);\\n  const float e7 = 0.88;\\n  const vec4 v7 = vec4(0.996078431372549,0.7607843137254902,0.5294117647058824,1);\\n  const float e8 = 1.0;\\n  const vec4 v8 = vec4(0.9882352941176471,0.9921568627450981,0.7490196078431373,1);\\n  float a0 = smoothstep(e0,e1,x_2664132035);\\n  float a1 = smoothstep(e1,e2,x_2664132035);\\n  float a2 = smoothstep(e2,e3,x_2664132035);\\n  float a3 = smoothstep(e3,e4,x_2664132035);\\n  float a4 = smoothstep(e4,e5,x_2664132035);\\n  float a5 = smoothstep(e5,e6,x_2664132035);\\n  float a6 = smoothstep(e6,e7,x_2664132035);\\n  float a7 = smoothstep(e7,e8,x_2664132035);\\n  return max(mix(v0,v1,a0)*step(e0,x_2664132035)*step(x_2664132035,e1),\\n    max(mix(v1,v2,a1)*step(e1,x_2664132035)*step(x_2664132035,e2),\\n    max(mix(v2,v3,a2)*step(e2,x_2664132035)*step(x_2664132035,e3),\\n    max(mix(v3,v4,a3)*step(e3,x_2664132035)*step(x_2664132035,e4),\\n    max(mix(v4,v5,a4)*step(e4,x_2664132035)*step(x_2664132035,e5),\\n    max(mix(v5,v6,a5)*step(e5,x_2664132035)*step(x_2664132035,e6),\\n    max(mix(v6,v7,a6)*step(e6,x_2664132035)*step(x_2664132035,e7),mix(v7,v8,a7)*step(e7,x_2664132035)*step(x_2664132035,e8)\\n  )))))));\\n}\\n\\nvec4 jet (float x_2485945205) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0,0,0.5137254901960784,1);\\n  const float e1 = 0.125;\\n  const vec4 v1 = vec4(0,0.23529411764705882,0.6666666666666666,1);\\n  const float e2 = 0.375;\\n  const vec4 v2 = vec4(0.0196078431372549,1,1,1);\\n  const float e3 = 0.625;\\n  const vec4 v3 = vec4(1,1,0,1);\\n  const float e4 = 0.875;\\n  const vec4 v4 = vec4(0.9803921568627451,0,0,1);\\n  const float e5 = 1.0;\\n  const vec4 v5 = vec4(0.5019607843137255,0,0,1);\\n  float a0 = smoothstep(e0,e1,x_2485945205);\\n  float a1 = smoothstep(e1,e2,x_2485945205);\\n  float a2 = smoothstep(e2,e3,x_2485945205);\\n  float a3 = smoothstep(e3,e4,x_2485945205);\\n  float a4 = smoothstep(e4,e5,x_2485945205);\\n  return max(mix(v0,v1,a0)*step(e0,x_2485945205)*step(x_2485945205,e1),\\n    max(mix(v1,v2,a1)*step(e1,x_2485945205)*step(x_2485945205,e2),\\n    max(mix(v2,v3,a2)*step(e2,x_2485945205)*step(x_2485945205,e3),\\n    max(mix(v3,v4,a3)*step(e3,x_2485945205)*step(x_2485945205,e4),mix(v4,v5,a4)*step(e4,x_2485945205)*step(x_2485945205,e5)\\n  ))));\\n}\\n\\nvec4 bone (float x_2693572714) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0,0,0,1);\\n  const float e1 = 0.376;\\n  const vec4 v1 = vec4(0.32941176470588235,0.32941176470588235,0.4549019607843137,1);\\n  const float e2 = 0.753;\\n  const vec4 v2 = vec4(0.6627450980392157,0.7843137254901961,0.7843137254901961,1);\\n  const float e3 = 1.0;\\n  const vec4 v3 = vec4(1,1,1,1);\\n  float a0 = smoothstep(e0,e1,x_2693572714);\\n  float a1 = smoothstep(e1,e2,x_2693572714);\\n  float a2 = smoothstep(e2,e3,x_2693572714);\\n  return max(mix(v0,v1,a0)*step(e0,x_2693572714)*step(x_2693572714,e1),\\n    max(mix(v1,v2,a1)*step(e1,x_2693572714)*step(x_2693572714,e2),mix(v2,v3,a2)*step(e2,x_2693572714)*step(x_2693572714,e3)\\n  ));\\n}\\n\\nvec4 copper (float x_2606013778) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0,0,0,1);\\n  const float e1 = 0.804;\\n  const vec4 v1 = vec4(1,0.6274509803921569,0.4,1);\\n  const float e2 = 1.0;\\n  const vec4 v2 = vec4(1,0.7803921568627451,0.4980392156862745,1);\\n  float a0 = smoothstep(e0,e1,x_2606013778);\\n  float a1 = smoothstep(e1,e2,x_2606013778);\\n  return max(mix(v0,v1,a0)*step(e0,x_2606013778)*step(x_2606013778,e1),mix(v1,v2,a1)*step(e1,x_2606013778)*step(x_2606013778,e2)\\n  );\\n}\\n\\nvec4 density (float x_4072297271) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0.21176470588235294,0.054901960784313725,0.1411764705882353,1);\\n  const float e1 = 0.13;\\n  const vec4 v1 = vec4(0.34901960784313724,0.09019607843137255,0.3137254901960784,1);\\n  const float e2 = 0.25;\\n  const vec4 v2 = vec4(0.43137254901960786,0.17647058823529413,0.5176470588235295,1);\\n  const float e3 = 0.38;\\n  const vec4 v3 = vec4(0.47058823529411764,0.30196078431372547,0.6980392156862745,1);\\n  const float e4 = 0.5;\\n  const vec4 v4 = vec4(0.47058823529411764,0.44313725490196076,0.8352941176470589,1);\\n  const float e5 = 0.63;\\n  const vec4 v5 = vec4(0.45098039215686275,0.592156862745098,0.8941176470588236,1);\\n  const float e6 = 0.75;\\n  const vec4 v6 = vec4(0.5254901960784314,0.7254901960784313,0.8901960784313725,1);\\n  const float e7 = 0.88;\\n  const vec4 v7 = vec4(0.6941176470588235,0.8392156862745098,0.8901960784313725,1);\\n  const float e8 = 1.0;\\n  const vec4 v8 = vec4(0.9019607843137255,0.9450980392156862,0.9450980392156862,1);\\n  float a0 = smoothstep(e0,e1,x_4072297271);\\n  float a1 = smoothstep(e1,e2,x_4072297271);\\n  float a2 = smoothstep(e2,e3,x_4072297271);\\n  float a3 = smoothstep(e3,e4,x_4072297271);\\n  float a4 = smoothstep(e4,e5,x_4072297271);\\n  float a5 = smoothstep(e5,e6,x_4072297271);\\n  float a6 = smoothstep(e6,e7,x_4072297271);\\n  float a7 = smoothstep(e7,e8,x_4072297271);\\n  return max(mix(v0,v1,a0)*step(e0,x_4072297271)*step(x_4072297271,e1),\\n    max(mix(v1,v2,a1)*step(e1,x_4072297271)*step(x_4072297271,e2),\\n    max(mix(v2,v3,a2)*step(e2,x_4072297271)*step(x_4072297271,e3),\\n    max(mix(v3,v4,a3)*step(e3,x_4072297271)*step(x_4072297271,e4),\\n    max(mix(v4,v5,a4)*step(e4,x_4072297271)*step(x_4072297271,e5),\\n    max(mix(v5,v6,a5)*step(e5,x_4072297271)*step(x_4072297271,e6),\\n    max(mix(v6,v7,a6)*step(e6,x_4072297271)*step(x_4072297271,e7),mix(v7,v8,a7)*step(e7,x_4072297271)*step(x_4072297271,e8)\\n  )))))));\\n}\\n\\nvec4 inferno (float x_524681000) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0,0,0.01568627450980392,1);\\n  const float e1 = 0.13;\\n  const vec4 v1 = vec4(0.12156862745098039,0.047058823529411764,0.2823529411764706,1);\\n  const float e2 = 0.25;\\n  const vec4 v2 = vec4(0.3333333333333333,0.058823529411764705,0.42745098039215684,1);\\n  const float e3 = 0.38;\\n  const vec4 v3 = vec4(0.5333333333333333,0.13333333333333333,0.41568627450980394,1);\\n  const float e4 = 0.5;\\n  const vec4 v4 = vec4(0.7294117647058823,0.21176470588235294,0.3333333333333333,1);\\n  const float e5 = 0.63;\\n  const vec4 v5 = vec4(0.8901960784313725,0.34901960784313724,0.2,1);\\n  const float e6 = 0.75;\\n  const vec4 v6 = vec4(0.9764705882352941,0.5490196078431373,0.0392156862745098,1);\\n  const float e7 = 0.88;\\n  const vec4 v7 = vec4(0.9764705882352941,0.788235294117647,0.19607843137254902,1);\\n  const float e8 = 1.0;\\n  const vec4 v8 = vec4(0.9882352941176471,1,0.6431372549019608,1);\\n  float a0 = smoothstep(e0,e1,x_524681000);\\n  float a1 = smoothstep(e1,e2,x_524681000);\\n  float a2 = smoothstep(e2,e3,x_524681000);\\n  float a3 = smoothstep(e3,e4,x_524681000);\\n  float a4 = smoothstep(e4,e5,x_524681000);\\n  float a5 = smoothstep(e5,e6,x_524681000);\\n  float a6 = smoothstep(e6,e7,x_524681000);\\n  float a7 = smoothstep(e7,e8,x_524681000);\\n  return max(mix(v0,v1,a0)*step(e0,x_524681000)*step(x_524681000,e1),\\n    max(mix(v1,v2,a1)*step(e1,x_524681000)*step(x_524681000,e2),\\n    max(mix(v2,v3,a2)*step(e2,x_524681000)*step(x_524681000,e3),\\n    max(mix(v3,v4,a3)*step(e3,x_524681000)*step(x_524681000,e4),\\n    max(mix(v4,v5,a4)*step(e4,x_524681000)*step(x_524681000,e5),\\n    max(mix(v5,v6,a5)*step(e5,x_524681000)*step(x_524681000,e6),\\n    max(mix(v6,v7,a6)*step(e6,x_524681000)*step(x_524681000,e7),mix(v7,v8,a7)*step(e7,x_524681000)*step(x_524681000,e8)\\n  )))))));\\n}\\n\\nvec4 cool (float x_3050536724) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0.49019607843137253,0,0.7019607843137254,1);\\n  const float e1 = 0.13;\\n  const vec4 v1 = vec4(0.4549019607843137,0,0.8549019607843137,1);\\n  const float e2 = 0.25;\\n  const vec4 v2 = vec4(0.3843137254901961,0.2901960784313726,0.9294117647058824,1);\\n  const float e3 = 0.38;\\n  const vec4 v3 = vec4(0.26666666666666666,0.5725490196078431,0.9058823529411765,1);\\n  const float e4 = 0.5;\\n  const vec4 v4 = vec4(0,0.8,0.7725490196078432,1);\\n  const float e5 = 0.63;\\n  const vec4 v5 = vec4(0,0.9686274509803922,0.5725490196078431,1);\\n  const float e6 = 0.75;\\n  const vec4 v6 = vec4(0,1,0.34509803921568627,1);\\n  const float e7 = 0.88;\\n  const vec4 v7 = vec4(0.1568627450980392,1,0.03137254901960784,1);\\n  const float e8 = 1.0;\\n  const vec4 v8 = vec4(0.5764705882352941,1,0,1);\\n  float a0 = smoothstep(e0,e1,x_3050536724);\\n  float a1 = smoothstep(e1,e2,x_3050536724);\\n  float a2 = smoothstep(e2,e3,x_3050536724);\\n  float a3 = smoothstep(e3,e4,x_3050536724);\\n  float a4 = smoothstep(e4,e5,x_3050536724);\\n  float a5 = smoothstep(e5,e6,x_3050536724);\\n  float a6 = smoothstep(e6,e7,x_3050536724);\\n  float a7 = smoothstep(e7,e8,x_3050536724);\\n  return max(mix(v0,v1,a0)*step(e0,x_3050536724)*step(x_3050536724,e1),\\n    max(mix(v1,v2,a1)*step(e1,x_3050536724)*step(x_3050536724,e2),\\n    max(mix(v2,v3,a2)*step(e2,x_3050536724)*step(x_3050536724,e3),\\n    max(mix(v3,v4,a3)*step(e3,x_3050536724)*step(x_3050536724,e4),\\n    max(mix(v4,v5,a4)*step(e4,x_3050536724)*step(x_3050536724,e5),\\n    max(mix(v5,v6,a5)*step(e5,x_3050536724)*step(x_3050536724,e6),\\n    max(mix(v6,v7,a6)*step(e6,x_3050536724)*step(x_3050536724,e7),mix(v7,v8,a7)*step(e7,x_3050536724)*step(x_3050536724,e8)\\n  )))))));\\n}\\n\\nvec4 hot (float x_4009354686) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0,0,0,1);\\n  const float e1 = 0.3;\\n  const vec4 v1 = vec4(0.9019607843137255,0,0,1);\\n  const float e2 = 0.6;\\n  const vec4 v2 = vec4(1,0.8235294117647058,0,1);\\n  const float e3 = 1.0;\\n  const vec4 v3 = vec4(1,1,1,1);\\n  float a0 = smoothstep(e0,e1,x_4009354686);\\n  float a1 = smoothstep(e1,e2,x_4009354686);\\n  float a2 = smoothstep(e2,e3,x_4009354686);\\n  return max(mix(v0,v1,a0)*step(e0,x_4009354686)*step(x_4009354686,e1),\\n    max(mix(v1,v2,a1)*step(e1,x_4009354686)*step(x_4009354686,e2),mix(v2,v3,a2)*step(e2,x_4009354686)*step(x_4009354686,e3)\\n  ));\\n}\\n\\nvec4 spring (float x_2270446359) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(1,0,1,1);\\n  const float e1 = 1.0;\\n  const vec4 v1 = vec4(1,1,0,1);\\n  float a0 = smoothstep(e0,e1,x_2270446359);\\n  return mix(v0,v1,a0)*step(e0,x_2270446359)*step(x_2270446359,e1);\\n}\\n\\nvec4 summer (float x_1101081466) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0,0.5019607843137255,0.4,1);\\n  const float e1 = 1.0;\\n  const vec4 v1 = vec4(1,1,0.4,1);\\n  float a0 = smoothstep(e0,e1,x_1101081466);\\n  return mix(v0,v1,a0)*step(e0,x_1101081466)*step(x_1101081466,e1);\\n}\\n\\nvec4 autumn (float x_3652770500) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(1,0,0,1);\\n  const float e1 = 1.0;\\n  const vec4 v1 = vec4(1,1,0,1);\\n  float a0 = smoothstep(e0,e1,x_3652770500);\\n  return mix(v0,v1,a0)*step(e0,x_3652770500)*step(x_3652770500,e1);\\n}\\n\\nvec4 winter (float x_1155565894) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0,0,1,1);\\n  const float e1 = 1.0;\\n  const vec4 v1 = vec4(0,1,0.5019607843137255,1);\\n  float a0 = smoothstep(e0,e1,x_1155565894);\\n  return mix(v0,v1,a0)*step(e0,x_1155565894)*step(x_1155565894,e1);\\n}\\n\\n// The texture (GL.LUMINANCE & Uint8Array).\\nuniform sampler2D uBitmapTexture;\\n\\n// What are the dimensions of the texture (width, height)?\\nuniform vec2 uTextureSize;\\n\\n// How many consecutive pixels should be aggregated together along each axis?\\nuniform vec2 uAggSize;\\n\\n// What are the values of the color scale sliders?\\nuniform vec2 uColorScaleRange;\\n\\n// The texture coordinate, varying (interpolated between values set by the vertex shader).\\nvarying vec2 vTexCoord;\\n\\nvoid main(void) {\\n  // Compute 1 pixel in texture coordinates\\n  vec2 onePixel = vec2(1.0, 1.0) / uTextureSize;\\n  \\n  vec2 viewCoord = vec2(floor(vTexCoord.x * uTextureSize.x), floor(vTexCoord.y * uTextureSize.y));\\n\\n  // Compute (x % aggSizeX, y % aggSizeY).\\n  // These values will be the number of values to the left / above the current position to consider.\\n  vec2 modAggSize = vec2(-1.0 * mod(viewCoord.x, uAggSize.x), -1.0 * mod(viewCoord.y, uAggSize.y));\\n\\n  // Take the sum of values along each axis.\\n  float intensitySum = 0.0;\\n  vec2 offsetPixels = vec2(0.0, 0.0);\\n\\n  for(int i = 0; i < 16; i++) {\\n    // Check to break outer loop early.\\n    // Uniforms cannot be used as conditions in GLSL for loops.\\n    if(float(i) >= uAggSize.y) {\\n      // Done in the y direction.\\n      break;\\n    }\\n\\n    offsetPixels = vec2(offsetPixels.x, (modAggSize.y + float(i)) * onePixel.y);\\n\\n    for(int j = 0; j < 16; j++) {\\n      // Check to break inner loop early.\\n      // Uniforms cannot be used as conditions in GLSL for loops.\\n      if(float(j) >= uAggSize.x) {\\n        // Done in the x direction.\\n        break;\\n      }\\n\\n      offsetPixels = vec2((modAggSize.x + float(j)) * onePixel.x, offsetPixels.y);\\n      intensitySum += texture2D(uBitmapTexture, vTexCoord + offsetPixels).r;\\n    }\\n  }\\n  \\n  // Compute the mean value.\\n  float intensityMean = intensitySum / (uAggSize.x * uAggSize.y);\\n  \\n  // Re-scale using the color scale slider values.\\n  float scaledIntensityMean = (intensityMean - uColorScaleRange[0]) / max(0.005, (uColorScaleRange[1] - uColorScaleRange[0]));\\n\\n  gl_FragColor = COLORMAP_FUNC(clamp(scaledIntensityMean, 0.0, 1.0));\\n\\n  geometry.uv = vTexCoord;\\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\\n}\\n\";\n\n// src/layers/HeatmapBitmapLayer.js\nvar defaultProps3 = {\n  image: { type: \"object\", value: null, async: true },\n  colormap: { type: \"string\", value: GLSL_COLORMAP_DEFAULT, compare: true },\n  bounds: { type: \"array\", value: [1, 0, 0, 1], compare: true },\n  aggSizeX: { type: \"number\", value: 8, compare: true },\n  aggSizeY: { type: \"number\", value: 8, compare: true },\n  colorScaleLo: { type: \"number\", value: 0, compare: true },\n  colorScaleHi: { type: \"number\", value: 1, compare: true }\n};\nvar HeatmapBitmapLayer = class extends BitmapLayer3 {\n  _getShaders(shaders) {\n    this.props.extensions.forEach((extension) => {\n      shaders = _mergeShaders(shaders, extension.getShaders.call(this, extension));\n    });\n    return shaders;\n  }\n  getShaders() {\n    const { colormap } = this.props;\n    const fragmentShaderWithColormap = GLSL_COLORMAPS.includes(colormap) ? fragmentShader.replace(COLORMAP_SHADER_PLACEHOLDER, colormap) : fragmentShader.replace(COLORMAP_SHADER_PLACEHOLDER, GLSL_COLORMAP_DEFAULT);\n    return this._getShaders({\n      vs: vertexShader,\n      fs: fragmentShaderWithColormap,\n      modules: [project322, picking2]\n    });\n  }\n  updateState(args) {\n    var _a2;\n    super.updateState(args);\n    this.loadTexture(this.props.image);\n    const { props, oldProps } = args;\n    if (props.colormap !== oldProps.colormap) {\n      const { gl } = this.context;\n      (_a2 = this.state.model) == null ? void 0 : _a2.delete();\n      this.state.model = this._getModel(gl);\n      this.getAttributeManager().invalidateAll();\n    }\n  }\n  draw(opts) {\n    const { uniforms } = opts;\n    const { bitmapTexture, model } = this.state;\n    const {\n      aggSizeX,\n      aggSizeY,\n      colorScaleLo,\n      colorScaleHi\n    } = this.props;\n    if (bitmapTexture && model) {\n      model.setUniforms(Object.assign({}, uniforms, {\n        uBitmapTexture: bitmapTexture,\n        uTextureSize: [TILE_SIZE, TILE_SIZE],\n        uAggSize: [aggSizeX, aggSizeY],\n        uColorScaleRange: [colorScaleLo, colorScaleHi]\n      })).draw();\n    }\n  }\n  loadTexture(image) {\n    const { gl } = this.context;\n    if (this.state.bitmapTexture) {\n      this.state.bitmapTexture.delete();\n    }\n    if (image instanceof Texture2D2) {\n      this.setState({\n        bitmapTexture: image\n      });\n    } else if (image) {\n      this.setState({\n        bitmapTexture: new Texture2D2(gl, {\n          data: image,\n          mipmaps: false,\n          parameters: PIXELATED_TEXTURE_PARAMETERS,\n          format: GL3.LUMINANCE,\n          dataFormat: GL3.LUMINANCE,\n          type: GL3.UNSIGNED_BYTE,\n          width: TILE_SIZE,\n          height: TILE_SIZE\n        })\n      });\n    }\n  }\n};\nHeatmapBitmapLayer.layerName = \"HeatmapBitmapLayer\";\nHeatmapBitmapLayer.defaultProps = defaultProps3;\n\n// src/components/heatmap/utils.js\nimport clamp from \"lodash/clamp\";\nimport range4 from \"lodash/range\";\nfunction layerFilter({ layer, viewport }) {\n  if (viewport.id === \"axisLeft\") {\n    return layer.id.startsWith(\"axisLeft\");\n  }\n  if (viewport.id === \"axisTop\") {\n    return layer.id.startsWith(\"axisTop\");\n  }\n  if (viewport.id === \"heatmap\") {\n    return layer.id.startsWith(\"heatmap\");\n  }\n  if (viewport.id === \"colorsLeft\") {\n    return layer.id.startsWith(\"colorsLeft\");\n  }\n  if (viewport.id === \"colorsTop\") {\n    return layer.id.startsWith(\"colorsTop\");\n  }\n  return false;\n}\nfunction getAxisSizes(transpose, geneLabelMaxLength, cellLabelMaxLength) {\n  const axisOffsetLeft = clamp((transpose ? geneLabelMaxLength : cellLabelMaxLength) * AXIS_LABEL_TEXT_SIZE, AXIS_MIN_SIZE, AXIS_MAX_SIZE);\n  const axisOffsetTop = clamp((transpose ? cellLabelMaxLength : geneLabelMaxLength) * AXIS_LABEL_TEXT_SIZE, AXIS_MIN_SIZE, AXIS_MAX_SIZE);\n  return [axisOffsetLeft, axisOffsetTop];\n}\nfunction mouseToHeatmapPosition(mouseX, mouseY, {\n  offsetLeft,\n  offsetTop,\n  targetX,\n  targetY,\n  scaleFactor,\n  matrixWidth,\n  matrixHeight,\n  numRows,\n  numCols\n}) {\n  const viewMouseX = mouseX - offsetLeft;\n  const viewMouseY = mouseY - offsetTop;\n  if (viewMouseX < 0 || viewMouseY < 0) {\n    return [null, null];\n  }\n  const bboxTargetX = targetX * scaleFactor + matrixWidth * scaleFactor / 2;\n  const bboxTargetY = targetY * scaleFactor + matrixHeight * scaleFactor / 2;\n  const bboxLeft = bboxTargetX - matrixWidth / 2;\n  const bboxTop = bboxTargetY - matrixHeight / 2;\n  const zoomedOffsetLeft = bboxLeft / (matrixWidth * scaleFactor);\n  const zoomedOffsetTop = bboxTop / (matrixHeight * scaleFactor);\n  const zoomedViewMouseX = viewMouseX / (matrixWidth * scaleFactor);\n  const zoomedViewMouseY = viewMouseY / (matrixHeight * scaleFactor);\n  const zoomedMouseX = zoomedOffsetLeft + zoomedViewMouseX;\n  const zoomedMouseY = zoomedOffsetTop + zoomedViewMouseY;\n  const rowI = Math.floor(zoomedMouseY * numRows);\n  const colI = Math.floor(zoomedMouseX * numCols);\n  return [colI, rowI];\n}\nfunction heatmapToMousePosition(colI, rowI, {\n  offsetLeft,\n  offsetTop,\n  targetX,\n  targetY,\n  scaleFactor,\n  matrixWidth,\n  matrixHeight,\n  numRows,\n  numCols\n}) {\n  let zoomedMouseY = null;\n  let zoomedMouseX = null;\n  if (rowI !== null) {\n    const minY = -matrixHeight * scaleFactor / 2;\n    const maxY = matrixHeight * scaleFactor / 2;\n    const totalHeight = maxY - minY;\n    const minInViewY = targetY * scaleFactor - matrixHeight / 2;\n    const maxInViewY = targetY * scaleFactor + matrixHeight / 2;\n    const inViewHeight = maxInViewY - minInViewY;\n    const normalizedRowY = (rowI + 0.5) / numRows;\n    const globalRowY = minY + normalizedRowY * totalHeight;\n    if (minInViewY <= globalRowY && globalRowY <= maxInViewY) {\n      zoomedMouseY = offsetTop + (globalRowY - minInViewY) / inViewHeight * matrixHeight;\n    }\n  }\n  if (colI !== null) {\n    const minX = -matrixWidth * scaleFactor / 2;\n    const maxX = matrixWidth * scaleFactor / 2;\n    const totalWidth = maxX - minX;\n    const minInViewX = targetX * scaleFactor - matrixWidth / 2;\n    const maxInViewX = targetX * scaleFactor + matrixWidth / 2;\n    const inViewWidth = maxInViewX - minInViewX;\n    const normalizedRowX = (colI + 0.5) / numCols;\n    const globalRowX = minX + normalizedRowX * totalWidth;\n    if (minInViewX <= globalRowX && globalRowX <= maxInViewX) {\n      zoomedMouseX = offsetLeft + (globalRowX - minInViewX) / inViewWidth * matrixWidth;\n    }\n  }\n  return [zoomedMouseX, zoomedMouseY];\n}\n\n// inline-worker:/home/runner/work/vitessce/vitessce/src/components/heatmap/heatmap.worker\nvar encodedJs2 = \"KCgpPT57dmFyIGNFPU9iamVjdC5jcmVhdGU7dmFyIFA9T2JqZWN0LmRlZmluZVByb3BlcnR5O3ZhciBmRT1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yO3ZhciBpRT1PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lczt2YXIgWEU9T2JqZWN0LmdldFByb3RvdHlwZU9mLHNFPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7dmFyIGFFPUU9PlAoRSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIGpfPXR5cGVvZiByZXF1aXJlIT0idW5kZWZpbmVkIj9yZXF1aXJlOkU9Pnt0aHJvdyBuZXcgRXJyb3IoJ0R5bmFtaWMgcmVxdWlyZSBvZiAiJytFKyciIGlzIG5vdCBzdXBwb3J0ZWQnKX07dmFyIEE9KEUsXyk9PigpPT4oX3x8RSgoXz17ZXhwb3J0czp7fX0pLmV4cG9ydHMsXyksXy5leHBvcnRzKTt2YXIgYkU9KEUsXyxSKT0+e2lmKF8mJnR5cGVvZiBfPT0ib2JqZWN0Inx8dHlwZW9mIF89PSJmdW5jdGlvbiIpZm9yKGxldCBUIG9mIGlFKF8pKSFzRS5jYWxsKEUsVCkmJlQhPT0iZGVmYXVsdCImJlAoRSxULHtnZXQ6KCk9Pl9bVF0sZW51bWVyYWJsZTohKFI9ZkUoXyxUKSl8fFIuZW51bWVyYWJsZX0pO3JldHVybiBFfSxzPUU9PmJFKGFFKFAoRSE9bnVsbD9jRShYRShFKSk6e30sImRlZmF1bHQiLEUmJkUuX19lc01vZHVsZSYmImRlZmF1bHQiaW4gRT97Z2V0OigpPT5FLmRlZmF1bHQsZW51bWVyYWJsZTohMH06e3ZhbHVlOkUsZW51bWVyYWJsZTohMH0pKSxFKTt2YXIgYj1BKChoXyxhKT0+e2Z1bmN0aW9uIGRFKEUsXyxSKXtyZXR1cm4gRT09PUUmJihSIT09dm9pZCAwJiYoRT1FPD1SP0U6UiksXyE9PXZvaWQgMCYmKEU9RT49Xz9FOl8pKSxFfWEuZXhwb3J0cz1kRX0pO3ZhciBvPUEoKFFfLGQpPT57ZnVuY3Rpb24gSEUoRSl7dmFyIF89dHlwZW9mIEU7cmV0dXJuIEUhPW51bGwmJihfPT0ib2JqZWN0Inx8Xz09ImZ1bmN0aW9uIil9ZC5leHBvcnRzPUhFfSk7dmFyIFc9QSgod18sSCk9Pnt2YXIgV0U9dHlwZW9mIGdsb2JhbD09Im9iamVjdCImJmdsb2JhbCYmZ2xvYmFsLk9iamVjdD09PU9iamVjdCYmZ2xvYmFsO0guZXhwb3J0cz1XRX0pO3ZhciB1PUEoKGtfLFYpPT57dmFyIFZFPVcoKSx1RT10eXBlb2Ygc2VsZj09Im9iamVjdCImJnNlbGYmJnNlbGYuT2JqZWN0PT09T2JqZWN0JiZzZWxmLFlFPVZFfHx1RXx8RnVuY3Rpb24oInJldHVybiB0aGlzIikoKTtWLmV4cG9ydHM9WUV9KTt2YXIgRz1BKCh2XyxZKT0+e3ZhciBsRT11KCksZ0U9bEUuU3ltYm9sO1kuZXhwb3J0cz1nRX0pO3ZhciBwPUEoKEpfLEspPT57dmFyIGw9RygpLGc9T2JqZWN0LnByb3RvdHlwZSxLRT1nLmhhc093blByb3BlcnR5LHBFPWcudG9TdHJpbmcsbj1sP2wudG9TdHJpbmdUYWc6dm9pZCAwO2Z1bmN0aW9uIG1FKEUpe3ZhciBfPUtFLmNhbGwoRSxuKSxSPUVbbl07dHJ5e0Vbbl09dm9pZCAwO3ZhciBUPSEwfWNhdGNoKHgpe312YXIgTj1wRS5jYWxsKEUpO3JldHVybiBUJiYoXz9FW25dPVI6ZGVsZXRlIEVbbl0pLE59Sy5leHBvcnRzPW1FfSk7dmFyIHk9QSgoJF8sbSk9Pnt2YXIgeUU9T2JqZWN0LnByb3RvdHlwZSxaRT15RS50b1N0cmluZztmdW5jdGlvbiBqRShFKXtyZXR1cm4gWkUuY2FsbChFKX1tLmV4cG9ydHM9akV9KTt2YXIgcj1BKCh6XyxxKT0+e3ZhciBaPUcoKSxxRT1wKCksaEU9eSgpLFFFPSJbb2JqZWN0IE51bGxdIix3RT0iW29iamVjdCBVbmRlZmluZWRdIixqPVo/Wi50b1N0cmluZ1RhZzp2b2lkIDA7ZnVuY3Rpb24ga0UoRSl7cmV0dXJuIEU9PW51bGw/RT09PXZvaWQgMD93RTpRRTpqJiZqIGluIE9iamVjdChFKT9xRShFKTpoRShFKX1xLmV4cG9ydHM9a0V9KTt2YXIgUT1BKChFMCxoKT0+e2Z1bmN0aW9uIHZFKEUpe3JldHVybiBFIT1udWxsJiZ0eXBlb2YgRT09Im9iamVjdCJ9aC5leHBvcnRzPXZFfSk7dmFyIGs9QSgoXzAsdyk9Pnt2YXIgSkU9cigpLCRFPVEoKSx6RT0iW29iamVjdCBTeW1ib2xdIjtmdW5jdGlvbiBFXyhFKXtyZXR1cm4gdHlwZW9mIEU9PSJzeW1ib2wifHwkRShFKSYmSkUoRSk9PXpFfXcuZXhwb3J0cz1FX30pO3ZhciBjPUEoKFIwLCQpPT57dmFyIHY9bygpLF9fPWsoKSxKPTAvMCxSXz0vXlxzK3xccyskL2csVF89L15bLStdMHhbMC05YS1mXSskL2ksQV89L14wYlswMV0rJC9pLHhfPS9eMG9bMC03XSskL2ksTl89cGFyc2VJbnQ7ZnVuY3Rpb24gSV8oRSl7aWYodHlwZW9mIEU9PSJudW1iZXIiKXJldHVybiBFO2lmKF9fKEUpKXJldHVybiBKO2lmKHYoRSkpe3ZhciBfPXR5cGVvZiBFLnZhbHVlT2Y9PSJmdW5jdGlvbiI/RS52YWx1ZU9mKCk6RTtFPXYoXyk/XysiIjpffWlmKHR5cGVvZiBFIT0ic3RyaW5nIilyZXR1cm4gRT09PTA/RTorRTtFPUUucmVwbGFjZShSXywiIik7dmFyIFI9QV8udGVzdChFKTtyZXR1cm4gUnx8eF8udGVzdChFKT9OXyhFLnNsaWNlKDIpLFI/Mjo4KTpUXy50ZXN0KEUpP0o6K0V9JC5leHBvcnRzPUlffSk7dmFyIEVFPUEoKFQwLHopPT57dmFyIFNfPWIoKSxmPWMoKTtmdW5jdGlvbiBPXyhFLF8sUil7cmV0dXJuIFI9PT12b2lkIDAmJihSPV8sXz12b2lkIDApLFIhPT12b2lkIDAmJihSPWYoUiksUj1SPT09Uj9SOjApLF8hPT12b2lkIDAmJihfPWYoXyksXz1fPT09Xz9fOjApLFNfKGYoRSksXyxSKX16LmV4cG9ydHM9T199KTt2YXIgUkU9QSgoQTAsX0UpPT57dmFyIE1fPU1hdGguY2VpbCxGXz1NYXRoLm1heDtmdW5jdGlvbiBDXyhFLF8sUixUKXtmb3IodmFyIE49LTEseD1GXyhNXygoXy1FKS8oUnx8MSkpLDApLE89QXJyYXkoeCk7eC0tOylPW1Q/eDorK05dPUUsRSs9UjtyZXR1cm4gT31fRS5leHBvcnRzPUNffSk7dmFyIEFFPUEoKHgwLFRFKT0+e2Z1bmN0aW9uIGVfKEUsXyl7cmV0dXJuIEU9PT1ffHxFIT09RSYmXyE9PV99VEUuZXhwb3J0cz1lX30pO3ZhciBORT1BKChOMCx4RSk9Pnt2YXIgTF89cigpLEJfPW8oKSxVXz0iW29iamVjdCBBc3luY0Z1bmN0aW9uXSIsRF89IltvYmplY3QgRnVuY3Rpb25dIix0Xz0iW29iamVjdCBHZW5lcmF0b3JGdW5jdGlvbl0iLG5fPSJbb2JqZWN0IFByb3h5XSI7ZnVuY3Rpb24gb18oRSl7aWYoIUJfKEUpKXJldHVybiExO3ZhciBfPUxfKEUpO3JldHVybiBfPT1EX3x8Xz09dF98fF89PVVffHxfPT1uX314RS5leHBvcnRzPW9ffSk7dmFyIFNFPUEoKEkwLElFKT0+e3ZhciBQXz05MDA3MTk5MjU0NzQwOTkxO2Z1bmN0aW9uIEdfKEUpe3JldHVybiB0eXBlb2YgRT09Im51bWJlciImJkU+LTEmJkUlMT09MCYmRTw9UF99SUUuZXhwb3J0cz1HX30pO3ZhciBNRT1BKChTMCxPRSk9Pnt2YXIgcl89TkUoKSxjXz1TRSgpO2Z1bmN0aW9uIGZfKEUpe3JldHVybiBFIT1udWxsJiZjXyhFLmxlbmd0aCkmJiFyXyhFKX1PRS5leHBvcnRzPWZffSk7dmFyIENFPUEoKE8wLEZFKT0+e3ZhciBpXz05MDA3MTk5MjU0NzQwOTkxLFhfPS9eKD86MHxbMS05XVxkKikkLztmdW5jdGlvbiBzXyhFLF8pe3ZhciBSPXR5cGVvZiBFO3JldHVybiBfPV89PW51bGw/aV86XywhIV8mJihSPT0ibnVtYmVyInx8UiE9InN5bWJvbCImJlhfLnRlc3QoRSkpJiZFPi0xJiZFJTE9PTAmJkU8X31GRS5leHBvcnRzPXNffSk7dmFyIExFPUEoKE0wLGVFKT0+e3ZhciBhXz1BRSgpLGJfPU1FKCksZF89Q0UoKSxIXz1vKCk7ZnVuY3Rpb24gV18oRSxfLFIpe2lmKCFIXyhSKSlyZXR1cm4hMTt2YXIgVD10eXBlb2YgXztyZXR1cm4oVD09Im51bWJlciI/Yl8oUikmJmRfKF8sUi5sZW5ndGgpOlQ9PSJzdHJpbmciJiZfIGluIFIpP2FfKFJbX10sRSk6ITF9ZUUuZXhwb3J0cz1XX30pO3ZhciBERT1BKChGMCxVRSk9Pnt2YXIgVl89YygpLEJFPTEvMCx1Xz0xNzk3NjkzMTM0ODYyMzE1N2UyOTI7ZnVuY3Rpb24gWV8oRSl7aWYoIUUpcmV0dXJuIEU9PT0wP0U6MDtpZihFPVZfKEUpLEU9PT1CRXx8RT09PS1CRSl7dmFyIF89RTwwPy0xOjE7cmV0dXJuIF8qdV99cmV0dXJuIEU9PT1FP0U6MH1VRS5leHBvcnRzPVlffSk7dmFyIG5FPUEoKEMwLHRFKT0+e3ZhciBsXz1SRSgpLGdfPUxFKCksaT1ERSgpO2Z1bmN0aW9uIEtfKEUpe3JldHVybiBmdW5jdGlvbihfLFIsVCl7cmV0dXJuIFQmJnR5cGVvZiBUIT0ibnVtYmVyIiYmZ18oXyxSLFQpJiYoUj1UPXZvaWQgMCksXz1pKF8pLFI9PT12b2lkIDA/KFI9XyxfPTApOlI9aShSKSxUPVQ9PT12b2lkIDA/XzxSPzE6LTE6aShUKSxsXyhfLFIsVCxFKX19dEUuZXhwb3J0cz1LX30pO3ZhciBQRT1BKChlMCxvRSk9Pnt2YXIgcF89bkUoKSxtXz1wXygpO29FLmV4cG9ydHM9bV99KTt2YXIgeV89cyhFRSgpKSxYPXMoUEUoKSk7dmFyIFM9e0RFUFRIX0JVRkZFUl9CSVQ6MjU2LFNURU5DSUxfQlVGRkVSX0JJVDoxMDI0LENPTE9SX0JVRkZFUl9CSVQ6MTYzODQsUE9JTlRTOjAsTElORVM6MSxMSU5FX0xPT1A6MixMSU5FX1NUUklQOjMsVFJJQU5HTEVTOjQsVFJJQU5HTEVfU1RSSVA6NSxUUklBTkdMRV9GQU46NixaRVJPOjAsT05FOjEsU1JDX0NPTE9SOjc2OCxPTkVfTUlOVVNfU1JDX0NPTE9SOjc2OSxTUkNfQUxQSEE6NzcwLE9ORV9NSU5VU19TUkNfQUxQSEE6NzcxLERTVF9BTFBIQTo3NzIsT05FX01JTlVTX0RTVF9BTFBIQTo3NzMsRFNUX0NPTE9SOjc3NCxPTkVfTUlOVVNfRFNUX0NPTE9SOjc3NSxTUkNfQUxQSEFfU0FUVVJBVEU6Nzc2LENPTlNUQU5UX0NPTE9SOjMyNzY5LE9ORV9NSU5VU19DT05TVEFOVF9DT0xPUjozMjc3MCxDT05TVEFOVF9BTFBIQTozMjc3MSxPTkVfTUlOVVNfQ09OU1RBTlRfQUxQSEE6MzI3NzIsRlVOQ19BREQ6MzI3NzQsRlVOQ19TVUJUUkFDVDozMjc3OCxGVU5DX1JFVkVSU0VfU1VCVFJBQ1Q6MzI3NzksQkxFTkRfRVFVQVRJT046MzI3NzcsQkxFTkRfRVFVQVRJT05fUkdCOjMyNzc3LEJMRU5EX0VRVUFUSU9OX0FMUEhBOjM0ODc3LEJMRU5EX0RTVF9SR0I6MzI5NjgsQkxFTkRfU1JDX1JHQjozMjk2OSxCTEVORF9EU1RfQUxQSEE6MzI5NzAsQkxFTkRfU1JDX0FMUEhBOjMyOTcxLEJMRU5EX0NPTE9SOjMyNzczLEFSUkFZX0JVRkZFUl9CSU5ESU5HOjM0OTY0LEVMRU1FTlRfQVJSQVlfQlVGRkVSX0JJTkRJTkc6MzQ5NjUsTElORV9XSURUSDoyODQ5LEFMSUFTRURfUE9JTlRfU0laRV9SQU5HRTozMzkwMSxBTElBU0VEX0xJTkVfV0lEVEhfUkFOR0U6MzM5MDIsQ1VMTF9GQUNFX01PREU6Mjg4NSxGUk9OVF9GQUNFOjI4ODYsREVQVEhfUkFOR0U6MjkyOCxERVBUSF9XUklURU1BU0s6MjkzMCxERVBUSF9DTEVBUl9WQUxVRToyOTMxLERFUFRIX0ZVTkM6MjkzMixTVEVOQ0lMX0NMRUFSX1ZBTFVFOjI5NjEsU1RFTkNJTF9GVU5DOjI5NjIsU1RFTkNJTF9GQUlMOjI5NjQsU1RFTkNJTF9QQVNTX0RFUFRIX0ZBSUw6Mjk2NSxTVEVOQ0lMX1BBU1NfREVQVEhfUEFTUzoyOTY2LFNURU5DSUxfUkVGOjI5NjcsU1RFTkNJTF9WQUxVRV9NQVNLOjI5NjMsU1RFTkNJTF9XUklURU1BU0s6Mjk2OCxTVEVOQ0lMX0JBQ0tfRlVOQzozNDgxNixTVEVOQ0lMX0JBQ0tfRkFJTDozNDgxNyxTVEVOQ0lMX0JBQ0tfUEFTU19ERVBUSF9GQUlMOjM0ODE4LFNURU5DSUxfQkFDS19QQVNTX0RFUFRIX1BBU1M6MzQ4MTksU1RFTkNJTF9CQUNLX1JFRjozNjAwMyxTVEVOQ0lMX0JBQ0tfVkFMVUVfTUFTSzozNjAwNCxTVEVOQ0lMX0JBQ0tfV1JJVEVNQVNLOjM2MDA1LFZJRVdQT1JUOjI5NzgsU0NJU1NPUl9CT1g6MzA4OCxDT0xPUl9DTEVBUl9WQUxVRTozMTA2LENPTE9SX1dSSVRFTUFTSzozMTA3LFVOUEFDS19BTElHTk1FTlQ6MzMxNyxQQUNLX0FMSUdOTUVOVDozMzMzLE1BWF9URVhUVVJFX1NJWkU6MzM3OSxNQVhfVklFV1BPUlRfRElNUzozMzg2LFNVQlBJWEVMX0JJVFM6MzQwOCxSRURfQklUUzozNDEwLEdSRUVOX0JJVFM6MzQxMSxCTFVFX0JJVFM6MzQxMixBTFBIQV9CSVRTOjM0MTMsREVQVEhfQklUUzozNDE0LFNURU5DSUxfQklUUzozNDE1LFBPTFlHT05fT0ZGU0VUX1VOSVRTOjEwNzUyLFBPTFlHT05fT0ZGU0VUX0ZBQ1RPUjozMjgyNCxURVhUVVJFX0JJTkRJTkdfMkQ6MzI4NzMsU0FNUExFX0JVRkZFUlM6MzI5MzYsU0FNUExFUzozMjkzNyxTQU1QTEVfQ09WRVJBR0VfVkFMVUU6MzI5MzgsU0FNUExFX0NPVkVSQUdFX0lOVkVSVDozMjkzOSxDT01QUkVTU0VEX1RFWFRVUkVfRk9STUFUUzozNDQ2NyxWRU5ET1I6NzkzNixSRU5ERVJFUjo3OTM3LFZFUlNJT046NzkzOCxJTVBMRU1FTlRBVElPTl9DT0xPUl9SRUFEX1RZUEU6MzU3MzgsSU1QTEVNRU5UQVRJT05fQ09MT1JfUkVBRF9GT1JNQVQ6MzU3MzksQlJPV1NFUl9ERUZBVUxUX1dFQkdMOjM3NDQ0LFNUQVRJQ19EUkFXOjM1MDQ0LFNUUkVBTV9EUkFXOjM1MDQwLERZTkFNSUNfRFJBVzozNTA0OCxBUlJBWV9CVUZGRVI6MzQ5NjIsRUxFTUVOVF9BUlJBWV9CVUZGRVI6MzQ5NjMsQlVGRkVSX1NJWkU6MzQ2NjAsQlVGRkVSX1VTQUdFOjM0NjYxLENVUlJFTlRfVkVSVEVYX0FUVFJJQjozNDM0MixWRVJURVhfQVRUUklCX0FSUkFZX0VOQUJMRUQ6MzQzMzgsVkVSVEVYX0FUVFJJQl9BUlJBWV9TSVpFOjM0MzM5LFZFUlRFWF9BVFRSSUJfQVJSQVlfU1RSSURFOjM0MzQwLFZFUlRFWF9BVFRSSUJfQVJSQVlfVFlQRTozNDM0MSxWRVJURVhfQVRUUklCX0FSUkFZX05PUk1BTElaRUQ6MzQ5MjIsVkVSVEVYX0FUVFJJQl9BUlJBWV9QT0lOVEVSOjM0MzczLFZFUlRFWF9BVFRSSUJfQVJSQVlfQlVGRkVSX0JJTkRJTkc6MzQ5NzUsQ1VMTF9GQUNFOjI4ODQsRlJPTlQ6MTAyOCxCQUNLOjEwMjksRlJPTlRfQU5EX0JBQ0s6MTAzMixCTEVORDozMDQyLERFUFRIX1RFU1Q6MjkyOSxESVRIRVI6MzAyNCxQT0xZR09OX09GRlNFVF9GSUxMOjMyODIzLFNBTVBMRV9BTFBIQV9UT19DT1ZFUkFHRTozMjkyNixTQU1QTEVfQ09WRVJBR0U6MzI5MjgsU0NJU1NPUl9URVNUOjMwODksU1RFTkNJTF9URVNUOjI5NjAsTk9fRVJST1I6MCxJTlZBTElEX0VOVU06MTI4MCxJTlZBTElEX1ZBTFVFOjEyODEsSU5WQUxJRF9PUEVSQVRJT046MTI4MixPVVRfT0ZfTUVNT1JZOjEyODUsQ09OVEVYVF9MT1NUX1dFQkdMOjM3NDQyLENXOjIzMDQsQ0NXOjIzMDUsRE9OVF9DQVJFOjQzNTIsRkFTVEVTVDo0MzUzLE5JQ0VTVDo0MzU0LEdFTkVSQVRFX01JUE1BUF9ISU5UOjMzMTcwLEJZVEU6NTEyMCxVTlNJR05FRF9CWVRFOjUxMjEsU0hPUlQ6NTEyMixVTlNJR05FRF9TSE9SVDo1MTIzLElOVDo1MTI0LFVOU0lHTkVEX0lOVDo1MTI1LEZMT0FUOjUxMjYsRE9VQkxFOjUxMzAsREVQVEhfQ09NUE9ORU5UOjY0MDIsQUxQSEE6NjQwNixSR0I6NjQwNyxSR0JBOjY0MDgsTFVNSU5BTkNFOjY0MDksTFVNSU5BTkNFX0FMUEhBOjY0MTAsVU5TSUdORURfU0hPUlRfNF80XzRfNDozMjgxOSxVTlNJR05FRF9TSE9SVF81XzVfNV8xOjMyODIwLFVOU0lHTkVEX1NIT1JUXzVfNl81OjMzNjM1LEZSQUdNRU5UX1NIQURFUjozNTYzMixWRVJURVhfU0hBREVSOjM1NjMzLENPTVBJTEVfU1RBVFVTOjM1NzEzLERFTEVURV9TVEFUVVM6MzU3MTIsTElOS19TVEFUVVM6MzU3MTQsVkFMSURBVEVfU1RBVFVTOjM1NzE1LEFUVEFDSEVEX1NIQURFUlM6MzU3MTcsQUNUSVZFX0FUVFJJQlVURVM6MzU3MjEsQUNUSVZFX1VOSUZPUk1TOjM1NzE4LE1BWF9WRVJURVhfQVRUUklCUzozNDkyMSxNQVhfVkVSVEVYX1VOSUZPUk1fVkVDVE9SUzozNjM0NyxNQVhfVkFSWUlOR19WRUNUT1JTOjM2MzQ4LE1BWF9DT01CSU5FRF9URVhUVVJFX0lNQUdFX1VOSVRTOjM1NjYxLE1BWF9WRVJURVhfVEVYVFVSRV9JTUFHRV9VTklUUzozNTY2MCxNQVhfVEVYVFVSRV9JTUFHRV9VTklUUzozNDkzMCxNQVhfRlJBR01FTlRfVU5JRk9STV9WRUNUT1JTOjM2MzQ5LFNIQURFUl9UWVBFOjM1NjYzLFNIQURJTkdfTEFOR1VBR0VfVkVSU0lPTjozNTcyNCxDVVJSRU5UX1BST0dSQU06MzU3MjUsTkVWRVI6NTEyLEFMV0FZUzo1MTksTEVTUzo1MTMsRVFVQUw6NTE0LExFUVVBTDo1MTUsR1JFQVRFUjo1MTYsR0VRVUFMOjUxOCxOT1RFUVVBTDo1MTcsS0VFUDo3NjgwLFJFUExBQ0U6NzY4MSxJTkNSOjc2ODIsREVDUjo3NjgzLElOVkVSVDo1Mzg2LElOQ1JfV1JBUDozNDA1NSxERUNSX1dSQVA6MzQwNTYsTkVBUkVTVDo5NzI4LExJTkVBUjo5NzI5LE5FQVJFU1RfTUlQTUFQX05FQVJFU1Q6OTk4NCxMSU5FQVJfTUlQTUFQX05FQVJFU1Q6OTk4NSxORUFSRVNUX01JUE1BUF9MSU5FQVI6OTk4NixMSU5FQVJfTUlQTUFQX0xJTkVBUjo5OTg3LFRFWFRVUkVfTUFHX0ZJTFRFUjoxMDI0MCxURVhUVVJFX01JTl9GSUxURVI6MTAyNDEsVEVYVFVSRV9XUkFQX1M6MTAyNDIsVEVYVFVSRV9XUkFQX1Q6MTAyNDMsVEVYVFVSRV8yRDozNTUzLFRFWFRVUkU6NTg5MCxURVhUVVJFX0NVQkVfTUFQOjM0MDY3LFRFWFRVUkVfQklORElOR19DVUJFX01BUDozNDA2OCxURVhUVVJFX0NVQkVfTUFQX1BPU0lUSVZFX1g6MzQwNjksVEVYVFVSRV9DVUJFX01BUF9ORUdBVElWRV9YOjM0MDcwLFRFWFRVUkVfQ1VCRV9NQVBfUE9TSVRJVkVfWTozNDA3MSxURVhUVVJFX0NVQkVfTUFQX05FR0FUSVZFX1k6MzQwNzIsVEVYVFVSRV9DVUJFX01BUF9QT1NJVElWRV9aOjM0MDczLFRFWFRVUkVfQ1VCRV9NQVBfTkVHQVRJVkVfWjozNDA3NCxNQVhfQ1VCRV9NQVBfVEVYVFVSRV9TSVpFOjM0MDc2LFRFWFRVUkUwOjMzOTg0LEFDVElWRV9URVhUVVJFOjM0MDE2LFJFUEVBVDoxMDQ5NyxDTEFNUF9UT19FREdFOjMzMDcxLE1JUlJPUkVEX1JFUEVBVDozMzY0OCxURVhUVVJFX1dJRFRIOjQwOTYsVEVYVFVSRV9IRUlHSFQ6NDA5NyxGTE9BVF9WRUMyOjM1NjY0LEZMT0FUX1ZFQzM6MzU2NjUsRkxPQVRfVkVDNDozNTY2NixJTlRfVkVDMjozNTY2NyxJTlRfVkVDMzozNTY2OCxJTlRfVkVDNDozNTY2OSxCT09MOjM1NjcwLEJPT0xfVkVDMjozNTY3MSxCT09MX1ZFQzM6MzU2NzIsQk9PTF9WRUM0OjM1NjczLEZMT0FUX01BVDI6MzU2NzQsRkxPQVRfTUFUMzozNTY3NSxGTE9BVF9NQVQ0OjM1Njc2LFNBTVBMRVJfMkQ6MzU2NzgsU0FNUExFUl9DVUJFOjM1NjgwLExPV19GTE9BVDozNjMzNixNRURJVU1fRkxPQVQ6MzYzMzcsSElHSF9GTE9BVDozNjMzOCxMT1dfSU5UOjM2MzM5LE1FRElVTV9JTlQ6MzYzNDAsSElHSF9JTlQ6MzYzNDEsRlJBTUVCVUZGRVI6MzYxNjAsUkVOREVSQlVGRkVSOjM2MTYxLFJHQkE0OjMyODU0LFJHQjVfQTE6MzI4NTUsUkdCNTY1OjM2MTk0LERFUFRIX0NPTVBPTkVOVDE2OjMzMTg5LFNURU5DSUxfSU5ERVg6NjQwMSxTVEVOQ0lMX0lOREVYODozNjE2OCxERVBUSF9TVEVOQ0lMOjM0MDQxLFJFTkRFUkJVRkZFUl9XSURUSDozNjE2MixSRU5ERVJCVUZGRVJfSEVJR0hUOjM2MTYzLFJFTkRFUkJVRkZFUl9JTlRFUk5BTF9GT1JNQVQ6MzYxNjQsUkVOREVSQlVGRkVSX1JFRF9TSVpFOjM2MTc2LFJFTkRFUkJVRkZFUl9HUkVFTl9TSVpFOjM2MTc3LFJFTkRFUkJVRkZFUl9CTFVFX1NJWkU6MzYxNzgsUkVOREVSQlVGRkVSX0FMUEhBX1NJWkU6MzYxNzksUkVOREVSQlVGRkVSX0RFUFRIX1NJWkU6MzYxODAsUkVOREVSQlVGRkVSX1NURU5DSUxfU0laRTozNjE4MSxGUkFNRUJVRkZFUl9BVFRBQ0hNRU5UX09CSkVDVF9UWVBFOjM2MDQ4LEZSQU1FQlVGRkVSX0FUVEFDSE1FTlRfT0JKRUNUX05BTUU6MzYwNDksRlJBTUVCVUZGRVJfQVRUQUNITUVOVF9URVhUVVJFX0xFVkVMOjM2MDUwLEZSQU1FQlVGRkVSX0FUVEFDSE1FTlRfVEVYVFVSRV9DVUJFX01BUF9GQUNFOjM2MDUxLENPTE9SX0FUVEFDSE1FTlQwOjM2MDY0LERFUFRIX0FUVEFDSE1FTlQ6MzYwOTYsU1RFTkNJTF9BVFRBQ0hNRU5UOjM2MTI4LERFUFRIX1NURU5DSUxfQVRUQUNITUVOVDozMzMwNixOT05FOjAsRlJBTUVCVUZGRVJfQ09NUExFVEU6MzYwNTMsRlJBTUVCVUZGRVJfSU5DT01QTEVURV9BVFRBQ0hNRU5UOjM2MDU0LEZSQU1FQlVGRkVSX0lOQ09NUExFVEVfTUlTU0lOR19BVFRBQ0hNRU5UOjM2MDU1LEZSQU1FQlVGRkVSX0lOQ09NUExFVEVfRElNRU5TSU9OUzozNjA1NyxGUkFNRUJVRkZFUl9VTlNVUFBPUlRFRDozNjA2MSxGUkFNRUJVRkZFUl9CSU5ESU5HOjM2MDA2LFJFTkRFUkJVRkZFUl9CSU5ESU5HOjM2MDA3LFJFQURfRlJBTUVCVUZGRVI6MzYwMDgsRFJBV19GUkFNRUJVRkZFUjozNjAwOSxNQVhfUkVOREVSQlVGRkVSX1NJWkU6MzQwMjQsSU5WQUxJRF9GUkFNRUJVRkZFUl9PUEVSQVRJT046MTI4NixVTlBBQ0tfRkxJUF9ZX1dFQkdMOjM3NDQwLFVOUEFDS19QUkVNVUxUSVBMWV9BTFBIQV9XRUJHTDozNzQ0MSxVTlBBQ0tfQ09MT1JTUEFDRV9DT05WRVJTSU9OX1dFQkdMOjM3NDQzLFJFQURfQlVGRkVSOjMwNzQsVU5QQUNLX1JPV19MRU5HVEg6MzMxNCxVTlBBQ0tfU0tJUF9ST1dTOjMzMTUsVU5QQUNLX1NLSVBfUElYRUxTOjMzMTYsUEFDS19ST1dfTEVOR1RIOjMzMzAsUEFDS19TS0lQX1JPV1M6MzMzMSxQQUNLX1NLSVBfUElYRUxTOjMzMzIsVEVYVFVSRV9CSU5ESU5HXzNEOjMyODc0LFVOUEFDS19TS0lQX0lNQUdFUzozMjg3NyxVTlBBQ0tfSU1BR0VfSEVJR0hUOjMyODc4LE1BWF8zRF9URVhUVVJFX1NJWkU6MzI4ODMsTUFYX0VMRU1FTlRTX1ZFUlRJQ0VTOjMzZTMsTUFYX0VMRU1FTlRTX0lORElDRVM6MzMwMDEsTUFYX1RFWFRVUkVfTE9EX0JJQVM6MzQwNDUsTUFYX0ZSQUdNRU5UX1VOSUZPUk1fQ09NUE9ORU5UUzozNTY1NyxNQVhfVkVSVEVYX1VOSUZPUk1fQ09NUE9ORU5UUzozNTY1OCxNQVhfQVJSQVlfVEVYVFVSRV9MQVlFUlM6MzUwNzEsTUlOX1BST0dSQU1fVEVYRUxfT0ZGU0VUOjM1MDc2LE1BWF9QUk9HUkFNX1RFWEVMX09GRlNFVDozNTA3NyxNQVhfVkFSWUlOR19DT01QT05FTlRTOjM1NjU5LEZSQUdNRU5UX1NIQURFUl9ERVJJVkFUSVZFX0hJTlQ6MzU3MjMsUkFTVEVSSVpFUl9ESVNDQVJEOjM1OTc3LFZFUlRFWF9BUlJBWV9CSU5ESU5HOjM0MjI5LE1BWF9WRVJURVhfT1VUUFVUX0NPTVBPTkVOVFM6MzcxNTQsTUFYX0ZSQUdNRU5UX0lOUFVUX0NPTVBPTkVOVFM6MzcxNTcsTUFYX1NFUlZFUl9XQUlUX1RJTUVPVVQ6MzcxMzcsTUFYX0VMRU1FTlRfSU5ERVg6MzYyMDMsUkVEOjY0MDMsUkdCODozMjg0OSxSR0JBODozMjg1NixSR0IxMF9BMjozMjg1NyxURVhUVVJFXzNEOjMyODc5LFRFWFRVUkVfV1JBUF9SOjMyODgyLFRFWFRVUkVfTUlOX0xPRDozMzA4MixURVhUVVJFX01BWF9MT0Q6MzMwODMsVEVYVFVSRV9CQVNFX0xFVkVMOjMzMDg0LFRFWFRVUkVfTUFYX0xFVkVMOjMzMDg1LFRFWFRVUkVfQ09NUEFSRV9NT0RFOjM0ODkyLFRFWFRVUkVfQ09NUEFSRV9GVU5DOjM0ODkzLFNSR0I6MzU5MDQsU1JHQjg6MzU5MDUsU1JHQjhfQUxQSEE4OjM1OTA3LENPTVBBUkVfUkVGX1RPX1RFWFRVUkU6MzQ4OTQsUkdCQTMyRjozNDgzNixSR0IzMkY6MzQ4MzcsUkdCQTE2RjozNDg0MixSR0IxNkY6MzQ4NDMsVEVYVFVSRV8yRF9BUlJBWTozNTg2NixURVhUVVJFX0JJTkRJTkdfMkRfQVJSQVk6MzU4NjksUjExRl9HMTFGX0IxMEY6MzU4OTgsUkdCOV9FNTozNTkwMSxSR0JBMzJVSTozNjIwOCxSR0IzMlVJOjM2MjA5LFJHQkExNlVJOjM2MjE0LFJHQjE2VUk6MzYyMTUsUkdCQThVSTozNjIyMCxSR0I4VUk6MzYyMjEsUkdCQTMySTozNjIyNixSR0IzMkk6MzYyMjcsUkdCQTE2STozNjIzMixSR0IxNkk6MzYyMzMsUkdCQThJOjM2MjM4LFJHQjhJOjM2MjM5LFJFRF9JTlRFR0VSOjM2MjQ0LFJHQl9JTlRFR0VSOjM2MjQ4LFJHQkFfSU5URUdFUjozNjI0OSxSODozMzMyMSxSRzg6MzMzMjMsUjE2RjozMzMyNSxSMzJGOjMzMzI2LFJHMTZGOjMzMzI3LFJHMzJGOjMzMzI4LFI4STozMzMyOSxSOFVJOjMzMzMwLFIxNkk6MzMzMzEsUjE2VUk6MzMzMzIsUjMySTozMzMzMyxSMzJVSTozMzMzNCxSRzhJOjMzMzM1LFJHOFVJOjMzMzM2LFJHMTZJOjMzMzM3LFJHMTZVSTozMzMzOCxSRzMySTozMzMzOSxSRzMyVUk6MzMzNDAsUjhfU05PUk06MzY3NTYsUkc4X1NOT1JNOjM2NzU3LFJHQjhfU05PUk06MzY3NTgsUkdCQThfU05PUk06MzY3NTksUkdCMTBfQTJVSTozNjk3NSxURVhUVVJFX0lNTVVUQUJMRV9GT1JNQVQ6MzcxNjcsVEVYVFVSRV9JTU1VVEFCTEVfTEVWRUxTOjMzNTAzLFVOU0lHTkVEX0lOVF8yXzEwXzEwXzEwX1JFVjozMzY0MCxVTlNJR05FRF9JTlRfMTBGXzExRl8xMUZfUkVWOjM1ODk5LFVOU0lHTkVEX0lOVF81XzlfOV85X1JFVjozNTkwMixGTE9BVF8zMl9VTlNJR05FRF9JTlRfMjRfOF9SRVY6MzYyNjksVU5TSUdORURfSU5UXzI0Xzg6MzQwNDIsSEFMRl9GTE9BVDo1MTMxLFJHOjMzMzE5LFJHX0lOVEVHRVI6MzMzMjAsSU5UXzJfMTBfMTBfMTBfUkVWOjM2MjU1LENVUlJFTlRfUVVFUlk6MzQ5MTcsUVVFUllfUkVTVUxUOjM0OTE4LFFVRVJZX1JFU1VMVF9BVkFJTEFCTEU6MzQ5MTksQU5ZX1NBTVBMRVNfUEFTU0VEOjM1ODg3LEFOWV9TQU1QTEVTX1BBU1NFRF9DT05TRVJWQVRJVkU6MzYyMDIsTUFYX0RSQVdfQlVGRkVSUzozNDg1MixEUkFXX0JVRkZFUjA6MzQ4NTMsRFJBV19CVUZGRVIxOjM0ODU0LERSQVdfQlVGRkVSMjozNDg1NSxEUkFXX0JVRkZFUjM6MzQ4NTYsRFJBV19CVUZGRVI0OjM0ODU3LERSQVdfQlVGRkVSNTozNDg1OCxEUkFXX0JVRkZFUjY6MzQ4NTksRFJBV19CVUZGRVI3OjM0ODYwLERSQVdfQlVGRkVSODozNDg2MSxEUkFXX0JVRkZFUjk6MzQ4NjIsRFJBV19CVUZGRVIxMDozNDg2MyxEUkFXX0JVRkZFUjExOjM0ODY0LERSQVdfQlVGRkVSMTI6MzQ4NjUsRFJBV19CVUZGRVIxMzozNDg2NixEUkFXX0JVRkZFUjE0OjM0ODY3LERSQVdfQlVGRkVSMTU6MzQ4NjgsTUFYX0NPTE9SX0FUVEFDSE1FTlRTOjM2MDYzLENPTE9SX0FUVEFDSE1FTlQxOjM2MDY1LENPTE9SX0FUVEFDSE1FTlQyOjM2MDY2LENPTE9SX0FUVEFDSE1FTlQzOjM2MDY3LENPTE9SX0FUVEFDSE1FTlQ0OjM2MDY4LENPTE9SX0FUVEFDSE1FTlQ1OjM2MDY5LENPTE9SX0FUVEFDSE1FTlQ2OjM2MDcwLENPTE9SX0FUVEFDSE1FTlQ3OjM2MDcxLENPTE9SX0FUVEFDSE1FTlQ4OjM2MDcyLENPTE9SX0FUVEFDSE1FTlQ5OjM2MDczLENPTE9SX0FUVEFDSE1FTlQxMDozNjA3NCxDT0xPUl9BVFRBQ0hNRU5UMTE6MzYwNzUsQ09MT1JfQVRUQUNITUVOVDEyOjM2MDc2LENPTE9SX0FUVEFDSE1FTlQxMzozNjA3NyxDT0xPUl9BVFRBQ0hNRU5UMTQ6MzYwNzgsQ09MT1JfQVRUQUNITUVOVDE1OjM2MDc5LFNBTVBMRVJfM0Q6MzU2NzksU0FNUExFUl8yRF9TSEFET1c6MzU2ODIsU0FNUExFUl8yRF9BUlJBWTozNjI4OSxTQU1QTEVSXzJEX0FSUkFZX1NIQURPVzozNjI5MixTQU1QTEVSX0NVQkVfU0hBRE9XOjM2MjkzLElOVF9TQU1QTEVSXzJEOjM2Mjk4LElOVF9TQU1QTEVSXzNEOjM2Mjk5LElOVF9TQU1QTEVSX0NVQkU6MzYzMDAsSU5UX1NBTVBMRVJfMkRfQVJSQVk6MzYzMDMsVU5TSUdORURfSU5UX1NBTVBMRVJfMkQ6MzYzMDYsVU5TSUdORURfSU5UX1NBTVBMRVJfM0Q6MzYzMDcsVU5TSUdORURfSU5UX1NBTVBMRVJfQ1VCRTozNjMwOCxVTlNJR05FRF9JTlRfU0FNUExFUl8yRF9BUlJBWTozNjMxMSxNQVhfU0FNUExFUzozNjE4MyxTQU1QTEVSX0JJTkRJTkc6MzUwOTcsUElYRUxfUEFDS19CVUZGRVI6MzUwNTEsUElYRUxfVU5QQUNLX0JVRkZFUjozNTA1MixQSVhFTF9QQUNLX0JVRkZFUl9CSU5ESU5HOjM1MDUzLFBJWEVMX1VOUEFDS19CVUZGRVJfQklORElORzozNTA1NSxDT1BZX1JFQURfQlVGRkVSOjM2NjYyLENPUFlfV1JJVEVfQlVGRkVSOjM2NjYzLENPUFlfUkVBRF9CVUZGRVJfQklORElORzozNjY2MixDT1BZX1dSSVRFX0JVRkZFUl9CSU5ESU5HOjM2NjYzLEZMT0FUX01BVDJ4MzozNTY4NSxGTE9BVF9NQVQyeDQ6MzU2ODYsRkxPQVRfTUFUM3gyOjM1Njg3LEZMT0FUX01BVDN4NDozNTY4OCxGTE9BVF9NQVQ0eDI6MzU2ODksRkxPQVRfTUFUNHgzOjM1NjkwLFVOU0lHTkVEX0lOVF9WRUMyOjM2Mjk0LFVOU0lHTkVEX0lOVF9WRUMzOjM2Mjk1LFVOU0lHTkVEX0lOVF9WRUM0OjM2Mjk2LFVOU0lHTkVEX05PUk1BTElaRUQ6MzU4NjMsU0lHTkVEX05PUk1BTElaRUQ6MzY3NjQsVkVSVEVYX0FUVFJJQl9BUlJBWV9JTlRFR0VSOjM1MDY5LFZFUlRFWF9BVFRSSUJfQVJSQVlfRElWSVNPUjozNTA3MCxUUkFOU0ZPUk1fRkVFREJBQ0tfQlVGRkVSX01PREU6MzU5NjcsTUFYX1RSQU5TRk9STV9GRUVEQkFDS19TRVBBUkFURV9DT01QT05FTlRTOjM1OTY4LFRSQU5TRk9STV9GRUVEQkFDS19WQVJZSU5HUzozNTk3MSxUUkFOU0ZPUk1fRkVFREJBQ0tfQlVGRkVSX1NUQVJUOjM1OTcyLFRSQU5TRk9STV9GRUVEQkFDS19CVUZGRVJfU0laRTozNTk3MyxUUkFOU0ZPUk1fRkVFREJBQ0tfUFJJTUlUSVZFU19XUklUVEVOOjM1OTc2LE1BWF9UUkFOU0ZPUk1fRkVFREJBQ0tfSU5URVJMRUFWRURfQ09NUE9ORU5UUzozNTk3OCxNQVhfVFJBTlNGT1JNX0ZFRURCQUNLX1NFUEFSQVRFX0FUVFJJQlM6MzU5NzksSU5URVJMRUFWRURfQVRUUklCUzozNTk4MCxTRVBBUkFURV9BVFRSSUJTOjM1OTgxLFRSQU5TRk9STV9GRUVEQkFDS19CVUZGRVI6MzU5ODIsVFJBTlNGT1JNX0ZFRURCQUNLX0JVRkZFUl9CSU5ESU5HOjM1OTgzLFRSQU5TRk9STV9GRUVEQkFDSzozNjM4NixUUkFOU0ZPUk1fRkVFREJBQ0tfUEFVU0VEOjM2Mzg3LFRSQU5TRk9STV9GRUVEQkFDS19BQ1RJVkU6MzYzODgsVFJBTlNGT1JNX0ZFRURCQUNLX0JJTkRJTkc6MzYzODksRlJBTUVCVUZGRVJfQVRUQUNITUVOVF9DT0xPUl9FTkNPRElORzozMzI5NixGUkFNRUJVRkZFUl9BVFRBQ0hNRU5UX0NPTVBPTkVOVF9UWVBFOjMzMjk3LEZSQU1FQlVGRkVSX0FUVEFDSE1FTlRfUkVEX1NJWkU6MzMyOTgsRlJBTUVCVUZGRVJfQVRUQUNITUVOVF9HUkVFTl9TSVpFOjMzMjk5LEZSQU1FQlVGRkVSX0FUVEFDSE1FTlRfQkxVRV9TSVpFOjMzMzAwLEZSQU1FQlVGRkVSX0FUVEFDSE1FTlRfQUxQSEFfU0laRTozMzMwMSxGUkFNRUJVRkZFUl9BVFRBQ0hNRU5UX0RFUFRIX1NJWkU6MzMzMDIsRlJBTUVCVUZGRVJfQVRUQUNITUVOVF9TVEVOQ0lMX1NJWkU6MzMzMDMsRlJBTUVCVUZGRVJfREVGQVVMVDozMzMwNCxERVBUSDI0X1NURU5DSUw4OjM1MDU2LERSQVdfRlJBTUVCVUZGRVJfQklORElORzozNjAwNixSRUFEX0ZSQU1FQlVGRkVSX0JJTkRJTkc6MzYwMTAsUkVOREVSQlVGRkVSX1NBTVBMRVM6MzYwMTEsRlJBTUVCVUZGRVJfQVRUQUNITUVOVF9URVhUVVJFX0xBWUVSOjM2MDUyLEZSQU1FQlVGRkVSX0lOQ09NUExFVEVfTVVMVElTQU1QTEU6MzYxODIsVU5JRk9STV9CVUZGRVI6MzUzNDUsVU5JRk9STV9CVUZGRVJfQklORElORzozNTM2OCxVTklGT1JNX0JVRkZFUl9TVEFSVDozNTM2OSxVTklGT1JNX0JVRkZFUl9TSVpFOjM1MzcwLE1BWF9WRVJURVhfVU5JRk9STV9CTE9DS1M6MzUzNzEsTUFYX0ZSQUdNRU5UX1VOSUZPUk1fQkxPQ0tTOjM1MzczLE1BWF9DT01CSU5FRF9VTklGT1JNX0JMT0NLUzozNTM3NCxNQVhfVU5JRk9STV9CVUZGRVJfQklORElOR1M6MzUzNzUsTUFYX1VOSUZPUk1fQkxPQ0tfU0laRTozNTM3NixNQVhfQ09NQklORURfVkVSVEVYX1VOSUZPUk1fQ09NUE9ORU5UUzozNTM3NyxNQVhfQ09NQklORURfRlJBR01FTlRfVU5JRk9STV9DT01QT05FTlRTOjM1Mzc5LFVOSUZPUk1fQlVGRkVSX09GRlNFVF9BTElHTk1FTlQ6MzUzODAsQUNUSVZFX1VOSUZPUk1fQkxPQ0tTOjM1MzgyLFVOSUZPUk1fVFlQRTozNTM4MyxVTklGT1JNX1NJWkU6MzUzODQsVU5JRk9STV9CTE9DS19JTkRFWDozNTM4NixVTklGT1JNX09GRlNFVDozNTM4NyxVTklGT1JNX0FSUkFZX1NUUklERTozNTM4OCxVTklGT1JNX01BVFJJWF9TVFJJREU6MzUzODksVU5JRk9STV9JU19ST1dfTUFKT1I6MzUzOTAsVU5JRk9STV9CTE9DS19CSU5ESU5HOjM1MzkxLFVOSUZPUk1fQkxPQ0tfREFUQV9TSVpFOjM1MzkyLFVOSUZPUk1fQkxPQ0tfQUNUSVZFX1VOSUZPUk1TOjM1Mzk0LFVOSUZPUk1fQkxPQ0tfQUNUSVZFX1VOSUZPUk1fSU5ESUNFUzozNTM5NSxVTklGT1JNX0JMT0NLX1JFRkVSRU5DRURfQllfVkVSVEVYX1NIQURFUjozNTM5NixVTklGT1JNX0JMT0NLX1JFRkVSRU5DRURfQllfRlJBR01FTlRfU0hBREVSOjM1Mzk4LE9CSkVDVF9UWVBFOjM3MTM4LFNZTkNfQ09ORElUSU9OOjM3MTM5LFNZTkNfU1RBVFVTOjM3MTQwLFNZTkNfRkxBR1M6MzcxNDEsU1lOQ19GRU5DRTozNzE0MixTWU5DX0dQVV9DT01NQU5EU19DT01QTEVURTozNzE0MyxVTlNJR05BTEVEOjM3MTQ0LFNJR05BTEVEOjM3MTQ1LEFMUkVBRFlfU0lHTkFMRUQ6MzcxNDYsVElNRU9VVF9FWFBJUkVEOjM3MTQ3LENPTkRJVElPTl9TQVRJU0ZJRUQ6MzcxNDgsV0FJVF9GQUlMRUQ6MzcxNDksU1lOQ19GTFVTSF9DT01NQU5EU19CSVQ6MSxDT0xPUjo2MTQ0LERFUFRIOjYxNDUsU1RFTkNJTDo2MTQ2LE1JTjozMjc3NSxNQVg6MzI3NzYsREVQVEhfQ09NUE9ORU5UMjQ6MzMxOTAsU1RSRUFNX1JFQUQ6MzUwNDEsU1RSRUFNX0NPUFk6MzUwNDIsU1RBVElDX1JFQUQ6MzUwNDUsU1RBVElDX0NPUFk6MzUwNDYsRFlOQU1JQ19SRUFEOjM1MDQ5LERZTkFNSUNfQ09QWTozNTA1MCxERVBUSF9DT01QT05FTlQzMkY6MzYwMTIsREVQVEgzMkZfU1RFTkNJTDg6MzYwMTMsSU5WQUxJRF9JTkRFWDo0Mjk0OTY3Mjk1LFRJTUVPVVRfSUdOT1JFRDotMSxNQVhfQ0xJRU5UX1dBSVRfVElNRU9VVF9XRUJHTDozNzQ0NyxWRVJURVhfQVRUUklCX0FSUkFZX0RJVklTT1JfQU5HTEU6MzUwNzAsVU5NQVNLRURfVkVORE9SX1dFQkdMOjM3NDQ1LFVOTUFTS0VEX1JFTkRFUkVSX1dFQkdMOjM3NDQ2LE1BWF9URVhUVVJFX01BWF9BTklTT1RST1BZX0VYVDozNDA0NyxURVhUVVJFX01BWF9BTklTT1RST1BZX0VYVDozNDA0NixDT01QUkVTU0VEX1JHQl9TM1RDX0RYVDFfRVhUOjMzNzc2LENPTVBSRVNTRURfUkdCQV9TM1RDX0RYVDFfRVhUOjMzNzc3LENPTVBSRVNTRURfUkdCQV9TM1RDX0RYVDNfRVhUOjMzNzc4LENPTVBSRVNTRURfUkdCQV9TM1RDX0RYVDVfRVhUOjMzNzc5LENPTVBSRVNTRURfUjExX0VBQzozNzQ4OCxDT01QUkVTU0VEX1NJR05FRF9SMTFfRUFDOjM3NDg5LENPTVBSRVNTRURfUkcxMV9FQUM6Mzc0OTAsQ09NUFJFU1NFRF9TSUdORURfUkcxMV9FQUM6Mzc0OTEsQ09NUFJFU1NFRF9SR0I4X0VUQzI6Mzc0OTIsQ09NUFJFU1NFRF9SR0JBOF9FVEMyX0VBQzozNzQ5MyxDT01QUkVTU0VEX1NSR0I4X0VUQzI6Mzc0OTQsQ09NUFJFU1NFRF9TUkdCOF9BTFBIQThfRVRDMl9FQUM6Mzc0OTUsQ09NUFJFU1NFRF9SR0I4X1BVTkNIVEhST1VHSF9BTFBIQTFfRVRDMjozNzQ5NixDT01QUkVTU0VEX1NSR0I4X1BVTkNIVEhST1VHSF9BTFBIQTFfRVRDMjozNzQ5NyxDT01QUkVTU0VEX1JHQl9QVlJUQ180QlBQVjFfSU1HOjM1ODQwLENPTVBSRVNTRURfUkdCQV9QVlJUQ180QlBQVjFfSU1HOjM1ODQyLENPTVBSRVNTRURfUkdCX1BWUlRDXzJCUFBWMV9JTUc6MzU4NDEsQ09NUFJFU1NFRF9SR0JBX1BWUlRDXzJCUFBWMV9JTUc6MzU4NDMsQ09NUFJFU1NFRF9SR0JfRVRDMV9XRUJHTDozNjE5NixDT01QUkVTU0VEX1JHQl9BVENfV0VCR0w6MzU5ODYsQ09NUFJFU1NFRF9SR0JBX0FUQ19FWFBMSUNJVF9BTFBIQV9XRUJHTDozNTk4NixDT01QUkVTU0VEX1JHQkFfQVRDX0lOVEVSUE9MQVRFRF9BTFBIQV9XRUJHTDozNDc5OCxVTlNJR05FRF9JTlRfMjRfOF9XRUJHTDozNDA0MixIQUxGX0ZMT0FUX09FUzozNjE5MyxSR0JBMzJGX0VYVDozNDgzNixSR0IzMkZfRVhUOjM0ODM3LEZSQU1FQlVGRkVSX0FUVEFDSE1FTlRfQ09NUE9ORU5UX1RZUEVfRVhUOjMzMjk3LFVOU0lHTkVEX05PUk1BTElaRURfRVhUOjM1ODYzLE1JTl9FWFQ6MzI3NzUsTUFYX0VYVDozMjc3NixTUkdCX0VYVDozNTkwNCxTUkdCX0FMUEhBX0VYVDozNTkwNixTUkdCOF9BTFBIQThfRVhUOjM1OTA3LEZSQU1FQlVGRkVSX0FUVEFDSE1FTlRfQ09MT1JfRU5DT0RJTkdfRVhUOjMzMjk2LEZSQUdNRU5UX1NIQURFUl9ERVJJVkFUSVZFX0hJTlRfT0VTOjM1NzIzLENPTE9SX0FUVEFDSE1FTlQwX1dFQkdMOjM2MDY0LENPTE9SX0FUVEFDSE1FTlQxX1dFQkdMOjM2MDY1LENPTE9SX0FUVEFDSE1FTlQyX1dFQkdMOjM2MDY2LENPTE9SX0FUVEFDSE1FTlQzX1dFQkdMOjM2MDY3LENPTE9SX0FUVEFDSE1FTlQ0X1dFQkdMOjM2MDY4LENPTE9SX0FUVEFDSE1FTlQ1X1dFQkdMOjM2MDY5LENPTE9SX0FUVEFDSE1FTlQ2X1dFQkdMOjM2MDcwLENPTE9SX0FUVEFDSE1FTlQ3X1dFQkdMOjM2MDcxLENPTE9SX0FUVEFDSE1FTlQ4X1dFQkdMOjM2MDcyLENPTE9SX0FUVEFDSE1FTlQ5X1dFQkdMOjM2MDczLENPTE9SX0FUVEFDSE1FTlQxMF9XRUJHTDozNjA3NCxDT0xPUl9BVFRBQ0hNRU5UMTFfV0VCR0w6MzYwNzUsQ09MT1JfQVRUQUNITUVOVDEyX1dFQkdMOjM2MDc2LENPTE9SX0FUVEFDSE1FTlQxM19XRUJHTDozNjA3NyxDT0xPUl9BVFRBQ0hNRU5UMTRfV0VCR0w6MzYwNzgsQ09MT1JfQVRUQUNITUVOVDE1X1dFQkdMOjM2MDc5LERSQVdfQlVGRkVSMF9XRUJHTDozNDg1MyxEUkFXX0JVRkZFUjFfV0VCR0w6MzQ4NTQsRFJBV19CVUZGRVIyX1dFQkdMOjM0ODU1LERSQVdfQlVGRkVSM19XRUJHTDozNDg1NixEUkFXX0JVRkZFUjRfV0VCR0w6MzQ4NTcsRFJBV19CVUZGRVI1X1dFQkdMOjM0ODU4LERSQVdfQlVGRkVSNl9XRUJHTDozNDg1OSxEUkFXX0JVRkZFUjdfV0VCR0w6MzQ4NjAsRFJBV19CVUZGRVI4X1dFQkdMOjM0ODYxLERSQVdfQlVGRkVSOV9XRUJHTDozNDg2MixEUkFXX0JVRkZFUjEwX1dFQkdMOjM0ODYzLERSQVdfQlVGRkVSMTFfV0VCR0w6MzQ4NjQsRFJBV19CVUZGRVIxMl9XRUJHTDozNDg2NSxEUkFXX0JVRkZFUjEzX1dFQkdMOjM0ODY2LERSQVdfQlVGRkVSMTRfV0VCR0w6MzQ4NjcsRFJBV19CVUZGRVIxNV9XRUJHTDozNDg2OCxNQVhfQ09MT1JfQVRUQUNITUVOVFNfV0VCR0w6MzYwNjMsTUFYX0RSQVdfQlVGRkVSU19XRUJHTDozNDg1MixWRVJURVhfQVJSQVlfQklORElOR19PRVM6MzQyMjksUVVFUllfQ09VTlRFUl9CSVRTX0VYVDozNDkxNixDVVJSRU5UX1FVRVJZX0VYVDozNDkxNyxRVUVSWV9SRVNVTFRfRVhUOjM0OTE4LFFVRVJZX1JFU1VMVF9BVkFJTEFCTEVfRVhUOjM0OTE5LFRJTUVfRUxBUFNFRF9FWFQ6MzUwMDcsVElNRVNUQU1QX0VYVDozNjM5MixHUFVfRElTSk9JTlRfRVhUOjM2Nzk1fTt2YXIgVTA9e1tTLlRFWFRVUkVfTUlOX0ZJTFRFUl06Uy5ORUFSRVNULFtTLlRFWFRVUkVfTUFHX0ZJTFRFUl06Uy5ORUFSRVNULFtTLlRFWFRVUkVfV1JBUF9TXTpTLkNMQU1QX1RPX0VER0UsW1MuVEVYVFVSRV9XUkFQX1RdOlMuQ0xBTVBfVE9fRURHRX07ZnVuY3Rpb24gR0UoRSx7dGlsZVNpemU6Xyx0aWxlSTpSLHRpbGVKOlQsbnVtQ2VsbHM6TixudW1HZW5lczp4LGNlbGxPcmRlcmluZzpPLGNlbGxzOkN9KXtsZXQgZT1uZXcgVWludDhBcnJheShfKl8pLEwsTSxJLEIsRixVPSgwLFguZGVmYXVsdCkoXyk7cmV0dXJuIFUuZm9yRWFjaChEPT57ST1UKl8rRCxJPE4mJihGPUMuaW5kZXhPZihPW0ldKSxGPj0tMSYmVS5mb3JFYWNoKHQ9PntCPVIqXyt0LE09RVtGKngrQl0sTD0oXy10LTEpKl8rRCxlW0xdPU19KSl9KSxlfWZ1bmN0aW9uIHJFKEUse3RpbGVTaXplOl8sdGlsZUk6Uix0aWxlSjpULG51bUNlbGxzOk4sbnVtR2VuZXM6eCxjZWxsT3JkZXJpbmc6TyxjZWxsczpDfSl7bGV0IGU9bmV3IFVpbnQ4QXJyYXkoXypfKSxMLE0sSSxCLEYsVT0oMCxYLmRlZmF1bHQpKF8pO3JldHVybiBVLmZvckVhY2goRD0+e0k9UipfK0QsSTxOJiYoRj1DLmluZGV4T2YoT1tJXSksRj49LTEmJlUuZm9yRWFjaCh0PT57Qj1UKl8rdCxCPHg/TT1FW0YqeCtCXTpNPTAsTD0oXy1ELTEpKl8rdCxlW0xdPU19KSl9KSxlfWZ1bmN0aW9uIFpfKHtjdXJyOkUsdGlsZUk6Xyx0aWxlSjpSLHRpbGVTaXplOlQsY2VsbE9yZGVyaW5nOk4scm93czp4LGNvbHM6TyxkYXRhOkMsdHJhbnNwb3NlOmV9KXtsZXQgTD1uZXcgVWludDhBcnJheShDKSxNPU8ubGVuZ3RoLEk9Ti5sZW5ndGg7cmV0dXJuW3t0aWxlOihlP0dFOnJFKShMLHt0aWxlU2l6ZTpULHRpbGVJOl8sdGlsZUo6UixudW1DZWxsczpJLG51bUdlbmVzOk0sY2VsbE9yZGVyaW5nOk4sY2VsbHM6eH0pLGJ1ZmZlcjpDLGN1cnI6RX0sW0NdXX1pZih0eXBlb2Ygc2VsZiE9InVuZGVmaW5lZCIpe2xldCBFPXtnZXRUaWxlOlpffTtzZWxmLmFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLF89Pnt0cnl7bGV0W1IsVF09Xy5kYXRhLFtOLHhdPUVbUl0oVCk7c2VsZi5wb3N0TWVzc2FnZShOLHgpfWNhdGNoKFIpe2NvbnNvbGUud2FybihSKX19KX19KSgpOwo=\";\nvar blob2 = typeof window !== \"undefined\" && window.Blob && new Blob([atob(encodedJs2)], { type: \"text/javascript;charset=utf-8\" });\nfunction heatmap_default() {\n  const objURL = blob2 && (window.URL || window.webkitURL).createObjectURL(blob2);\n  try {\n    return objURL ? new Worker(objURL) : new Worker(\"data:application/javascript;base64,\" + encodedJs2, { type: \"module\" });\n  } finally {\n    objURL && (window.URL || window.webkitURL).revokeObjectURL(objURL);\n  }\n}\n\n// src/Pool.js\nvar defaultPoolSize2 = typeof navigator !== \"undefined\" ? navigator.hardwareConcurrency || 4 : null;\nvar Pool2 = class {\n  constructor(Worker2) {\n    this.workers = [];\n    this.idleWorkers = [];\n    this.waitQueue = [];\n    this.decoder = null;\n    for (let i = 0; i < defaultPoolSize2; ++i) {\n      const w = new Worker2();\n      this.workers.push(w);\n      this.idleWorkers.push(w);\n    }\n  }\n  process() {\n    return __async(this, null, function* () {\n      throw new Error('Pool needs to implement \"process\" method');\n    });\n  }\n  waitForWorker() {\n    return __async(this, null, function* () {\n      const idleWorker = this.idleWorkers.pop();\n      if (idleWorker) {\n        return idleWorker;\n      }\n      const waiter = {};\n      const promise = new Promise((resolve) => {\n        waiter.resolve = resolve;\n      });\n      this.waitQueue.push(waiter);\n      return promise;\n    });\n  }\n  finishTask(currentWorker) {\n    return __async(this, null, function* () {\n      const waiter = this.waitQueue.pop();\n      if (waiter) {\n        waiter.resolve(currentWorker);\n      } else {\n        this.idleWorkers.push(currentWorker);\n      }\n    });\n  }\n  destroy() {\n    for (let i = 0; i < this.workers.length; ++i) {\n      this.workers[i].terminate();\n    }\n  }\n};\n\n// src/components/heatmap/HeatmapWorkerPool.js\nvar HeatmapPool = class extends Pool2 {\n  constructor() {\n    super(heatmap_default);\n  }\n  process(args) {\n    return __async(this, null, function* () {\n      const currentWorker = yield this.waitForWorker();\n      return new Promise((resolve, reject) => {\n        currentWorker.onmessage = (event) => {\n          this.finishTask(currentWorker);\n          resolve(event.data);\n        };\n        currentWorker.onerror = (error) => {\n          this.finishTask(currentWorker);\n          reject(error);\n        };\n        currentWorker.postMessage([\"getTile\", args], [args.data]);\n      });\n    });\n  }\n};\n\n// src/components/heatmap/Heatmap.js\nvar Heatmap = forwardRef((props, deckRef) => {\n  const {\n    uuid,\n    theme,\n    viewState: rawViewState,\n    setViewState,\n    width: viewWidth,\n    height: viewHeight,\n    expressionMatrix: expression,\n    cellColors,\n    colormap,\n    colormapRange,\n    clearPleaseWait,\n    setComponentHover,\n    setCellHighlight = createDefaultUpdateCellsHover(\"Heatmap\"),\n    setGeneHighlight = createDefaultUpdateGenesHover(\"Heatmap\"),\n    updateViewInfo = createDefaultUpdateViewInfo(\"Heatmap\"),\n    setIsRendering = () => {\n    },\n    transpose = false,\n    variablesTitle = \"Genes\",\n    observationsTitle = \"Cells\"\n  } = props;\n  const viewState = __spreadProps(__spreadValues({}, rawViewState), {\n    target: transpose ? [rawViewState.target[1], rawViewState.target[0]] : rawViewState.target,\n    minZoom: 0\n  });\n  const axisLeftTitle = transpose ? variablesTitle : observationsTitle;\n  const axisTopTitle = transpose ? observationsTitle : variablesTitle;\n  const workerPool = useMemo4(() => new HeatmapPool(), []);\n  useEffect3(() => {\n    if (clearPleaseWait && expression) {\n      clearPleaseWait(\"expression-matrix\");\n    }\n  }, [clearPleaseWait, expression]);\n  const tilesRef = useRef4();\n  const dataRef = useRef4();\n  const [axisLeftLabels, setAxisLeftLabels] = useState5([]);\n  const [axisTopLabels, setAxisTopLabels] = useState5([]);\n  const [tileIteration, incTileIteration] = useReducer((i) => i + 1, 0);\n  const [backlog, setBacklog] = useState5([]);\n  useEffect3(() => {\n    if (expression && expression.matrix) {\n      dataRef.current = copyUint8Array(expression.matrix);\n    }\n  }, [dataRef, expression]);\n  useEffect3(() => {\n    if (!expression) {\n      return;\n    }\n    const newCellOrdering = !cellColors || cellColors.size === 0 ? expression.rows : Array.from(cellColors.keys());\n    const oldCellOrdering = transpose ? axisTopLabels : axisLeftLabels;\n    if (!isEqual3(oldCellOrdering, newCellOrdering)) {\n      if (transpose) {\n        setAxisTopLabels(newCellOrdering);\n      } else {\n        setAxisLeftLabels(newCellOrdering);\n      }\n    }\n  }, [expression, cellColors, axisTopLabels, axisLeftLabels, transpose]);\n  useEffect3(() => {\n    if (!expression) {\n      return;\n    }\n    if (transpose) {\n      setAxisLeftLabels(expression.cols);\n    } else {\n      setAxisTopLabels(expression.cols);\n    }\n  }, [expression, transpose]);\n  const [cellLabelMaxLength, geneLabelMaxLength] = useMemo4(() => {\n    if (!expression) {\n      return [0, 0];\n    }\n    return [\n      max(expression.rows.map((cellId) => cellId.length)),\n      max(expression.cols.map((geneId) => geneId.length))\n    ];\n  }, [expression]);\n  const width = axisTopLabels.length;\n  const height = axisLeftLabels.length;\n  const [axisOffsetLeft, axisOffsetTop] = getAxisSizes(transpose, geneLabelMaxLength, cellLabelMaxLength);\n  const offsetTop = axisOffsetTop + COLOR_BAR_SIZE;\n  const offsetLeft = axisOffsetLeft + COLOR_BAR_SIZE;\n  const matrixWidth = viewWidth - offsetLeft;\n  const matrixHeight = viewHeight - offsetTop;\n  const matrixLeft = -matrixWidth / 2;\n  const matrixRight = matrixWidth / 2;\n  const matrixTop = -matrixHeight / 2;\n  const matrixBottom = matrixHeight / 2;\n  const xTiles = Math.ceil(width / TILE_SIZE);\n  const yTiles = Math.ceil(height / TILE_SIZE);\n  const widthRatio = 1 - (TILE_SIZE - width % TILE_SIZE) / (xTiles * TILE_SIZE);\n  const heightRatio = 1 - (TILE_SIZE - height % TILE_SIZE) / (yTiles * TILE_SIZE);\n  const tileWidth = matrixWidth / widthRatio / xTiles;\n  const tileHeight = matrixHeight / heightRatio / yTiles;\n  const scaleFactor = __pow(2, viewState.zoom);\n  const cellHeight = matrixHeight * scaleFactor / height;\n  const cellWidth = matrixWidth * scaleFactor / width;\n  const aggSizeX = clamp2(__pow(2, Math.ceil(Math.log2(1 / cellWidth))), MIN_ROW_AGG, MAX_ROW_AGG);\n  const aggSizeY = clamp2(__pow(2, Math.ceil(Math.log2(1 / cellHeight))), MIN_ROW_AGG, MAX_ROW_AGG);\n  const [targetX, targetY] = viewState.target;\n  useEffect3(() => {\n    updateViewInfo({\n      uuid,\n      project: (cellId, geneId) => {\n        const colI = transpose ? axisTopLabels.indexOf(cellId) : axisTopLabels.indexOf(geneId);\n        const rowI = transpose ? axisLeftLabels.indexOf(geneId) : axisLeftLabels.indexOf(cellId);\n        return heatmapToMousePosition(colI, rowI, {\n          offsetLeft,\n          offsetTop,\n          targetX: viewState.target[0],\n          targetY: viewState.target[1],\n          scaleFactor,\n          matrixWidth,\n          matrixHeight,\n          numRows: height,\n          numCols: width\n        });\n      }\n    });\n  }, [\n    uuid,\n    updateViewInfo,\n    transpose,\n    axisTopLabels,\n    axisLeftLabels,\n    offsetLeft,\n    offsetTop,\n    viewState,\n    scaleFactor,\n    matrixWidth,\n    matrixHeight,\n    height,\n    width\n  ]);\n  const onViewStateChange = useCallback3(({ viewState: nextViewState }) => {\n    const { zoom: nextZoom } = nextViewState;\n    const nextScaleFactor = __pow(2, nextZoom);\n    const minTargetX = nextZoom === 0 ? 0 : -(matrixRight - matrixRight / nextScaleFactor);\n    const maxTargetX = -1 * minTargetX;\n    const minTargetY = nextZoom === 0 ? 0 : -(matrixBottom - matrixBottom / nextScaleFactor);\n    const maxTargetY = -1 * minTargetY;\n    const nextTarget = [\n      clamp2(nextViewState.target[0], minTargetX, maxTargetX),\n      clamp2(nextViewState.target[1], minTargetY, maxTargetY)\n    ];\n    setViewState({\n      zoom: nextZoom,\n      target: transpose ? [nextTarget[1], nextTarget[0]] : nextTarget\n    });\n  }, [matrixRight, matrixBottom, transpose, setViewState]);\n  useEffect3(() => {\n    if (!expression) {\n      return;\n    }\n    if (axisTopLabels && axisLeftLabels && xTiles && yTiles) {\n      setBacklog((prev) => [...prev, uuidv42()]);\n    }\n  }, [dataRef, expression, axisTopLabels, axisLeftLabels, xTiles, yTiles]);\n  useEffect3(() => {\n    if (backlog.length < 1) {\n      return;\n    }\n    const curr = backlog[backlog.length - 1];\n    if (dataRef.current && dataRef.current.buffer.byteLength) {\n      const { rows, cols, matrix } = expression;\n      const promises = range5(yTiles).map((i) => range5(xTiles).map((j) => __async(void 0, null, function* () {\n        return workerPool.process({\n          curr,\n          tileI: i,\n          tileJ: j,\n          tileSize: TILE_SIZE,\n          cellOrdering: transpose ? axisTopLabels : axisLeftLabels,\n          rows,\n          cols,\n          transpose,\n          data: matrix.buffer.slice()\n        });\n      })));\n      const process2 = () => __async(void 0, null, function* () {\n        const tiles = yield Promise.all(promises.flat());\n        tilesRef.current = tiles.map((i) => i.tile);\n        incTileIteration();\n        dataRef.current = new Uint8Array(tiles[0].buffer);\n        const { curr: currWork } = tiles[0];\n        setBacklog((prev) => {\n          const currIndex = prev.indexOf(currWork);\n          return prev.slice(currIndex + 1, prev.length);\n        });\n      });\n      process2();\n    }\n  }, [axisLeftLabels, axisTopLabels, backlog, expression, transpose, xTiles, yTiles, workerPool]);\n  useEffect3(() => {\n    setIsRendering(backlog.length > 0);\n  }, [backlog, setIsRendering]);\n  const heatmapLayers = useMemo4(() => {\n    if (!tilesRef.current || backlog.length) {\n      return [];\n    }\n    function getLayer(i, j, tile) {\n      return new HeatmapBitmapLayer({\n        id: `heatmapLayer-${tileIteration}-${i}-${j}`,\n        image: tile,\n        bounds: [\n          matrixLeft + j * tileWidth,\n          matrixTop + i * tileHeight,\n          matrixLeft + (j + 1) * tileWidth,\n          matrixTop + (i + 1) * tileHeight\n        ],\n        aggSizeX,\n        aggSizeY,\n        colormap,\n        colorScaleLo: colormapRange[0],\n        colorScaleHi: colormapRange[1],\n        updateTriggers: {\n          image: [axisLeftLabels, axisTopLabels],\n          bounds: [tileHeight, tileWidth]\n        }\n      });\n    }\n    const layers2 = tilesRef.current.map((tile, index) => getLayer(Math.floor(index / xTiles), index % xTiles, tile));\n    return layers2;\n  }, [\n    backlog,\n    tileIteration,\n    matrixLeft,\n    tileWidth,\n    matrixTop,\n    tileHeight,\n    aggSizeX,\n    aggSizeY,\n    colormap,\n    colormapRange,\n    axisLeftLabels,\n    axisTopLabels,\n    xTiles\n  ]);\n  const axisTopLabelData = useMemo4(() => axisTopLabels.map((d, i) => [i, d]), [axisTopLabels]);\n  const axisLeftLabelData = useMemo4(() => axisLeftLabels.map((d, i) => [i, d]), [axisLeftLabels]);\n  const textLayers = [\n    new HeatmapCompositeTextLayer({\n      targetX,\n      targetY,\n      scaleFactor,\n      axisLeftLabelData,\n      matrixTop,\n      height,\n      matrixHeight,\n      cellHeight,\n      cellWidth,\n      axisTopLabelData,\n      matrixLeft,\n      width,\n      matrixWidth,\n      viewHeight,\n      viewWidth,\n      theme,\n      axisLeftTitle,\n      axisTopTitle,\n      axisOffsetLeft,\n      axisOffsetTop\n    })\n  ];\n  const cellColorsTiles = useMemo4(() => {\n    if (!cellColors) {\n      return null;\n    }\n    let cellId;\n    let offset;\n    let color;\n    let rowI;\n    const cellOrdering = transpose ? axisTopLabels : axisLeftLabels;\n    const colorBarTileWidthPx = transpose ? TILE_SIZE : 1;\n    const colorBarTileHeightPx = transpose ? 1 : TILE_SIZE;\n    const result = range5(transpose ? xTiles : yTiles).map((i) => {\n      const tileData = new Uint8ClampedArray(TILE_SIZE * 1 * 4);\n      range5(TILE_SIZE).forEach((tileY) => {\n        rowI = i * TILE_SIZE + tileY;\n        if (rowI < cellOrdering.length) {\n          cellId = cellOrdering[rowI];\n          color = cellColors.get(cellId);\n          offset = (transpose ? tileY : TILE_SIZE - tileY - 1) * 4;\n          if (color) {\n            const [rValue, gValue, bValue] = color;\n            tileData[offset + 0] = rValue;\n            tileData[offset + 1] = gValue;\n            tileData[offset + 2] = bValue;\n            tileData[offset + 3] = 255;\n          }\n        }\n      });\n      return new ImageData(tileData, colorBarTileWidthPx, colorBarTileHeightPx);\n    });\n    return result;\n  }, [cellColors, transpose, axisTopLabels, axisLeftLabels, xTiles, yTiles]);\n  const cellColorsLayers = useMemo4(() => cellColorsTiles ? cellColorsTiles.map((tile, i) => new PixelatedBitmapLayer({\n    id: `${transpose ? \"colorsTopLayer\" : \"colorsLeftLayer\"}-${i}-${uuidv42()}`,\n    image: tile,\n    bounds: transpose ? [\n      matrixLeft + i * tileWidth,\n      -matrixHeight / 2,\n      matrixLeft + (i + 1) * tileWidth,\n      matrixHeight / 2\n    ] : [\n      -matrixWidth / 2,\n      matrixTop + i * tileHeight,\n      matrixWidth / 2,\n      matrixTop + (i + 1) * tileHeight\n    ]\n  })) : [], [\n    cellColorsTiles,\n    matrixTop,\n    matrixLeft,\n    matrixHeight,\n    matrixWidth,\n    tileWidth,\n    tileHeight,\n    transpose\n  ]);\n  const layers = heatmapLayers.concat(textLayers).concat(cellColorsLayers);\n  function onHover(info, event) {\n    if (!expression) {\n      return;\n    }\n    const { x: mouseX, y: mouseY } = event.offsetCenter;\n    const [colI, rowI] = mouseToHeatmapPosition(mouseX, mouseY, {\n      offsetLeft,\n      offsetTop,\n      targetX,\n      targetY,\n      scaleFactor,\n      matrixWidth,\n      matrixHeight,\n      numRows: height,\n      numCols: width\n    });\n    if (colI === null) {\n      if (transpose) {\n        setCellHighlight(null);\n      } else {\n        setGeneHighlight(null);\n      }\n    }\n    if (rowI === null) {\n      if (transpose) {\n        setGeneHighlight(null);\n      } else {\n        setCellHighlight(null);\n      }\n    }\n    const obsI = expression.rows.indexOf(transpose ? axisTopLabels[colI] : axisLeftLabels[rowI]);\n    const varI = expression.cols.indexOf(transpose ? axisLeftLabels[rowI] : axisTopLabels[colI]);\n    const obsId = expression.rows[obsI];\n    const varId = expression.cols[varI];\n    if (setComponentHover) {\n      setComponentHover();\n    }\n    setCellHighlight(obsId || null);\n    setGeneHighlight(varId || null);\n  }\n  return /* @__PURE__ */ React6.createElement(DeckGL2, {\n    id: `deckgl-overlay-${uuid}`,\n    ref: deckRef,\n    views: [\n      new OrthographicView2({\n        id: \"heatmap\",\n        controller: true,\n        x: offsetLeft,\n        y: offsetTop,\n        width: matrixWidth,\n        height: matrixHeight\n      }),\n      new OrthographicView2({\n        id: \"axisLeft\",\n        controller: false,\n        x: transpose ? COLOR_BAR_SIZE : 0,\n        y: offsetTop,\n        width: axisOffsetLeft,\n        height: matrixHeight\n      }),\n      new OrthographicView2({\n        id: \"axisTop\",\n        controller: false,\n        x: offsetLeft,\n        y: transpose ? 0 : COLOR_BAR_SIZE,\n        width: matrixWidth,\n        height: axisOffsetTop\n      }),\n      new OrthographicView2({\n        id: \"colorsLeft\",\n        controller: false,\n        x: axisOffsetLeft,\n        y: offsetTop,\n        width: COLOR_BAR_SIZE - AXIS_MARGIN,\n        height: matrixHeight\n      }),\n      new OrthographicView2({\n        id: \"colorsTop\",\n        controller: false,\n        x: offsetLeft,\n        y: axisOffsetTop,\n        width: matrixWidth,\n        height: COLOR_BAR_SIZE - AXIS_MARGIN\n      })\n    ],\n    layers,\n    layerFilter,\n    getCursor: (interactionState) => interactionState.isDragging ? \"grabbing\" : \"default\",\n    glOptions: DEFAULT_GL_OPTIONS,\n    onViewStateChange,\n    viewState,\n    onHover\n  });\n});\nvar Heatmap_default = Heatmap;\n\n// src/components/heatmap/HeatmapTooltipSubscriber.js\nimport React10 from \"react\";\n\n// src/components/tooltip/Tooltip2D.js\nimport React8 from \"react\";\n\n// src/components/tooltip/Tooltip.js\nimport React7, { useEffect as useEffect4, useRef as useRef5, useState as useState6 } from \"react\";\nimport Paper2 from \"@material-ui/core/Paper\";\nimport Popper2 from \"@material-ui/core/Popper\";\n\n// src/components/tooltip/styles.js\nimport { makeStyles as makeStyles3 } from \"@material-ui/core/styles\";\nvar styles2 = makeStyles3(() => ({\n  tooltipAnchor: {\n    position: \"relative\",\n    width: \"0px\",\n    height: \"0px\",\n    pointerEvents: \"none\",\n    userSelect: \"none\"\n  },\n  tooltipContent: {\n    opacity: 0.9,\n    padding: \"5px\",\n    pointerEvents: \"none\",\n    \"& table > tbody > tr > th, & table > tbody > tr > td\": {\n      fontSize: \"80%\",\n      opacity: 0.8,\n      outline: 0,\n      padding: \"0 2px\"\n    },\n    \"& table\": {\n      borderCollapse: \"collapse\"\n    }\n  }\n}));\n\n// src/components/tooltip/Tooltip.js\nfunction Tooltip(props) {\n  const {\n    x,\n    y,\n    parentWidth,\n    parentHeight,\n    children\n  } = props;\n  const ref = useRef5();\n  const classes = styles2();\n  const [placementX, setPlacementX] = useState6(\"start\");\n  const [placementY, setPlacementY] = useState6(\"bottom\");\n  const getTooltipContainer = useVitessceContainer(ref);\n  useEffect4(() => {\n    if (ref && ref.current) {\n      const flipX = x > parentWidth / 2;\n      const flipY = y > parentHeight / 2;\n      setPlacementX(flipX ? \"end\" : \"start\");\n      setPlacementY(flipY ? \"top\" : \"bottom\");\n      ref.current.style.left = `${x + (flipX ? -20 : 5)}px`;\n      ref.current.style.top = `${y + (flipY ? -20 : 5)}px`;\n    }\n  }, [x, y, parentWidth, parentHeight]);\n  return /* @__PURE__ */ React7.createElement(\"div\", {\n    ref,\n    className: classes.tooltipAnchor\n  }, ref && ref.current ? /* @__PURE__ */ React7.createElement(Popper2, {\n    open: true,\n    anchorEl: ref.current,\n    container: getTooltipContainer,\n    transition: true,\n    placement: `${placementY}-${placementX}`\n  }, /* @__PURE__ */ React7.createElement(Paper2, {\n    elevation: 4,\n    className: classes.tooltipContent\n  }, children)) : null);\n}\n\n// src/components/tooltip/Tooltip2D.js\nfunction Tooltip2D(props) {\n  const {\n    parentUuid,\n    sourceUuid,\n    x,\n    y,\n    parentWidth,\n    parentHeight,\n    children\n  } = props;\n  if (x < 0 || x > parentWidth || y < 0 || y > parentHeight) {\n    return null;\n  }\n  const isTooltipVisible = parentUuid === sourceUuid;\n  const crosshairWidth = 1;\n  return /* @__PURE__ */ React8.createElement(React8.Fragment, null, isTooltipVisible ? /* @__PURE__ */ React8.createElement(Tooltip, {\n    x,\n    y,\n    parentWidth,\n    parentHeight\n  }, children) : /* @__PURE__ */ React8.createElement(React8.Fragment, null, x !== null ? /* @__PURE__ */ React8.createElement(\"div\", {\n    className: \"cell-emphasis-crosshair\",\n    style: {\n      left: `${x - crosshairWidth / 2}px`,\n      top: 0,\n      width: `${crosshairWidth}px`,\n      height: `${parentHeight}px`\n    }\n  }) : null, y !== null ? /* @__PURE__ */ React8.createElement(\"div\", {\n    className: \"cell-emphasis-crosshair\",\n    style: {\n      left: 0,\n      top: `${y - crosshairWidth / 2}px`,\n      width: `${parentWidth}px`,\n      height: `${crosshairWidth}px`\n    }\n  }) : null));\n}\n\n// src/components/tooltip/TooltipContent.js\nimport React9 from \"react\";\nfunction TooltipContent(props) {\n  const {\n    info\n  } = props;\n  return /* @__PURE__ */ React9.createElement(\"table\", null, /* @__PURE__ */ React9.createElement(\"tbody\", null, Object.entries(info).map(([key, value]) => /* @__PURE__ */ React9.createElement(\"tr\", {\n    key\n  }, /* @__PURE__ */ React9.createElement(\"th\", null, key), /* @__PURE__ */ React9.createElement(\"td\", null, value)))));\n}\n\n// src/components/heatmap/HeatmapTooltipSubscriber.js\nfunction HeatmapTooltipSubscriber(props) {\n  const {\n    parentUuid,\n    width,\n    height,\n    transpose,\n    getCellInfo,\n    getGeneInfo,\n    cellHighlight,\n    geneHighlight\n  } = props;\n  const sourceUuid = useComponentHover();\n  const viewInfo = useComponentViewInfo(parentUuid);\n  const [cellInfo, cellCoord] = cellHighlight && getCellInfo ? [\n    getCellInfo(cellHighlight),\n    viewInfo && viewInfo.project ? viewInfo.project(cellHighlight, null)[transpose ? 0 : 1] : null\n  ] : [null, null];\n  const [geneInfo, geneCoord] = geneHighlight && getGeneInfo ? [\n    getGeneInfo(geneHighlight),\n    viewInfo && viewInfo.project ? viewInfo.project(null, geneHighlight)[transpose ? 1 : 0] : null\n  ] : [null, null];\n  const x = transpose ? cellCoord : geneCoord;\n  const y = transpose ? geneCoord : cellCoord;\n  return cellInfo || geneInfo ? /* @__PURE__ */ React10.createElement(Tooltip2D, {\n    x,\n    y,\n    parentUuid,\n    parentWidth: width,\n    parentHeight: height,\n    sourceUuid\n  }, /* @__PURE__ */ React10.createElement(TooltipContent, {\n    info: __spreadValues(__spreadValues({}, geneInfo), cellInfo)\n  })) : null;\n}\n\n// src/components/heatmap/HeatmapOptions.js\nimport React13, { useCallback as useCallback4 } from \"react\";\nimport debounce2 from \"lodash/debounce\";\nimport Slider from \"@material-ui/core/Slider\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport TableRow from \"@material-ui/core/TableRow\";\n\n// src/components/shared-plot-options/styles.js\nimport { makeStyles as makeStyles4 } from \"@material-ui/core/styles\";\nvar useStyles2 = makeStyles4((theme) => ({\n  box: {\n    boxSizing: \"border-box\"\n  },\n  checkbox: {\n    padding: \"3px\",\n    color: theme.palette.primaryForeground,\n    \"&:checked\": {\n      color: theme.palette.primaryForeground\n    },\n    \"& input\": {\n      height: \"100%\"\n    }\n  },\n  slider: {\n    color: theme.palette.primaryForeground,\n    minWidth: \"60px\",\n    padding: \"10px 0 10px 0\"\n  },\n  sliderValueLabel: {\n    \"& span\": {\n      \"& span\": {\n        color: theme.palette.primaryBackground\n      }\n    }\n  },\n  tableContainer: {\n    overflow: \"hidden\",\n    overflowX: \"hidden !important\"\n  },\n  labelCell: {\n    padding: \"2px 8px 2px 16px\"\n  },\n  inputCell: {\n    padding: \"2px 16px 2px 8px\",\n    overflow: \"visible\"\n  },\n  select: {\n    \"& select\": {\n      fontSize: \".875rem\"\n    }\n  },\n  selectRoot: {\n    padding: 0,\n    height: \"auto\"\n  }\n}));\n\n// src/components/shared-plot-options/OptionsContainer.js\nimport React11 from \"react\";\nimport Box from \"@material-ui/core/Box\";\nimport Table from \"@material-ui/core/Table\";\nimport TableBody from \"@material-ui/core/TableBody\";\nimport TableContainer from \"@material-ui/core/TableContainer\";\nfunction OptionsContainer(props) {\n  const {\n    children\n  } = props;\n  const classes = useStyles2();\n  return /* @__PURE__ */ React11.createElement(Box, {\n    className: classes.box\n  }, /* @__PURE__ */ React11.createElement(TableContainer, {\n    className: classes.tableContainer\n  }, /* @__PURE__ */ React11.createElement(Table, {\n    className: classes.table,\n    size: \"small\"\n  }, /* @__PURE__ */ React11.createElement(TableBody, null, children))));\n}\n\n// src/components/shared-plot-options/OptionSelect.js\nimport React12 from \"react\";\nimport Select from \"@material-ui/core/Select\";\nfunction OptionSelect(props) {\n  const { classes: classesProp = {} } = props;\n  const classes = useStyles2();\n  return /* @__PURE__ */ React12.createElement(Select, __spreadProps(__spreadValues({\n    native: true,\n    disableUnderline: true\n  }, props), {\n    classes: __spreadValues({\n      root: classes.selectRoot\n    }, classesProp)\n  }));\n}\n\n// src/components/heatmap/HeatmapOptions.js\nfunction HeatmapOptions(props) {\n  const {\n    geneExpressionColormap,\n    setGeneExpressionColormap,\n    geneExpressionColormapRange,\n    setGeneExpressionColormapRange\n  } = props;\n  const classes = useStyles2();\n  function handleGeneExpressionColormapChange(event) {\n    setGeneExpressionColormap(event.target.value);\n  }\n  function handleColormapRangeChange(event, value) {\n    setGeneExpressionColormapRange(value);\n  }\n  const handleColormapRangeChangeDebounced = useCallback4(debounce2(handleColormapRangeChange, 5, { trailing: true }), [handleColormapRangeChange]);\n  return /* @__PURE__ */ React13.createElement(OptionsContainer, null, /* @__PURE__ */ React13.createElement(TableRow, null, /* @__PURE__ */ React13.createElement(TableCell, {\n    className: classes.labelCell,\n    htmlFor: \"gene-expression-colormap-select\"\n  }, \"Gene Expression Colormap\"), /* @__PURE__ */ React13.createElement(TableCell, {\n    className: classes.inputCell\n  }, /* @__PURE__ */ React13.createElement(OptionSelect, {\n    className: classes.select,\n    value: geneExpressionColormap,\n    onChange: handleGeneExpressionColormapChange,\n    inputProps: {\n      id: \"gene-expression-colormap-select\"\n    }\n  }, GLSL_COLORMAPS.map((cmap) => /* @__PURE__ */ React13.createElement(\"option\", {\n    key: cmap,\n    value: cmap\n  }, cmap))))), /* @__PURE__ */ React13.createElement(TableRow, null, /* @__PURE__ */ React13.createElement(TableCell, {\n    className: classes.labelCell\n  }, \"Gene Expression Colormap Range\"), /* @__PURE__ */ React13.createElement(TableCell, {\n    className: classes.inputCell\n  }, /* @__PURE__ */ React13.createElement(Slider, {\n    classes: { root: classes.slider, valueLabel: classes.sliderValueLabel },\n    value: geneExpressionColormapRange,\n    onChange: handleColormapRangeChangeDebounced,\n    \"aria-labelledby\": \"gene-expression-colormap-range-slider\",\n    valueLabelDisplay: \"auto\",\n    step: 5e-3,\n    min: 0,\n    max: 1\n  }))));\n}\n\n// src/components/heatmap/HeatmapSubscriber.js\nvar HEATMAP_DATA_TYPES = [\"cells\", \"cell-sets\", \"expression-matrix\"];\nfunction HeatmapSubscriber(props) {\n  const {\n    uuid,\n    coordinationScopes,\n    removeGridComponent,\n    theme,\n    transpose,\n    observationsLabelOverride: observationsLabel = \"cell\",\n    observationsPluralLabelOverride: observationsPluralLabel = `${observationsLabel}s`,\n    variablesLabelOverride: variablesLabel = \"gene\",\n    variablesPluralLabelOverride: variablesPluralLabel = `${variablesLabel}s`,\n    disableTooltip = false,\n    title: title16 = \"Heatmap\"\n  } = props;\n  const loaders = useLoaders();\n  const setComponentHover = useSetComponentHover();\n  const setComponentViewInfo = useSetComponentViewInfo(uuid);\n  const [{\n    dataset,\n    heatmapZoomX: zoomX,\n    heatmapTargetX: targetX,\n    heatmapTargetY: targetY,\n    geneSelection,\n    cellHighlight,\n    geneHighlight,\n    cellSetSelection,\n    cellSetColor,\n    additionalCellSets,\n    geneExpressionColormap,\n    geneExpressionColormapRange\n  }, {\n    setHeatmapZoomX: setZoomX,\n    setHeatmapZoomY: setZoomY,\n    setHeatmapTargetX: setTargetX,\n    setHeatmapTargetY: setTargetY,\n    setCellHighlight,\n    setGeneHighlight,\n    setCellSetSelection,\n    setCellSetColor,\n    setGeneExpressionColormapRange,\n    setGeneExpressionColormap\n  }] = useCoordination(COMPONENT_COORDINATION_TYPES.heatmap, coordinationScopes);\n  const observationsTitle = capitalize(observationsPluralLabel);\n  const variablesTitle = capitalize(variablesPluralLabel);\n  const [isRendering, setIsRendering] = useState7(false);\n  const [\n    isReady,\n    setItemIsReady,\n    setItemIsNotReady,\n    resetReadyItems\n  ] = useReady(HEATMAP_DATA_TYPES);\n  const [urls, addUrl, resetUrls] = useUrls();\n  const [width, height, deckRef] = useDeckCanvasSize();\n  useEffect5(() => {\n    resetUrls();\n    resetReadyItems();\n  }, [loaders, dataset]);\n  const [cells] = useCellsData(loaders, dataset, setItemIsReady, addUrl, true);\n  const [expressionMatrix] = useExpressionMatrixData(loaders, dataset, setItemIsReady, addUrl, true);\n  const [cellSets] = useCellSetsData(loaders, dataset, setItemIsReady, addUrl, false, { setCellSetSelection, setCellSetColor }, { cellSetSelection, cellSetColor });\n  const mergedCellSets = useMemo5(() => mergeCellSets(cellSets, additionalCellSets), [cellSets, additionalCellSets]);\n  const cellColors = useMemo5(() => getCellColors({\n    cellColorEncoding: \"cellSetSelection\",\n    geneSelection,\n    cellSets: mergedCellSets,\n    cellSetSelection,\n    cellSetColor,\n    expressionDataAttrs: expressionMatrix,\n    theme\n  }), [\n    mergedCellSets,\n    geneSelection,\n    theme,\n    cellSetColor,\n    cellSetSelection,\n    expressionMatrix\n  ]);\n  const getCellInfo = useCallback5((cellId) => {\n    if (cellId) {\n      const cellInfo = cells[cellId];\n      return __spreadValues({\n        [`${capitalize(observationsLabel)} ID`]: cellId\n      }, cellInfo ? cellInfo.factors : {});\n    }\n    return null;\n  }, [cells, observationsLabel]);\n  const getGeneInfo = useCallback5((geneId) => {\n    if (geneId) {\n      return { [`${capitalize(variablesLabel)} ID`]: geneId };\n    }\n    return null;\n  }, [variablesLabel]);\n  const cellsCount = expressionMatrix && expressionMatrix.rows ? expressionMatrix.rows.length : 0;\n  const genesCount = expressionMatrix && expressionMatrix.cols ? expressionMatrix.cols.length : 0;\n  const selectedCount = cellColors.size;\n  return /* @__PURE__ */ React14.createElement(TitleInfo, {\n    title: title16,\n    info: `${cellsCount} ${pluralize(observationsLabel, observationsPluralLabel, cellsCount)} \\xD7 ${genesCount} ${pluralize(variablesLabel, variablesPluralLabel, genesCount)},\n             with ${selectedCount} ${pluralize(observationsLabel, observationsPluralLabel, selectedCount)} selected`,\n    urls,\n    theme,\n    removeGridComponent,\n    isReady: isReady && !isRendering,\n    options: /* @__PURE__ */ React14.createElement(HeatmapOptions, {\n      geneExpressionColormap,\n      setGeneExpressionColormap,\n      geneExpressionColormapRange,\n      setGeneExpressionColormapRange\n    })\n  }, /* @__PURE__ */ React14.createElement(Heatmap_default, {\n    ref: deckRef,\n    transpose,\n    viewState: { zoom: zoomX, target: [targetX, targetY] },\n    setViewState: ({ zoom, target }) => {\n      setZoomX(zoom);\n      setZoomY(zoom);\n      setTargetX(target[0]);\n      setTargetY(target[1]);\n    },\n    colormapRange: geneExpressionColormapRange,\n    setColormapRange: setGeneExpressionColormapRange,\n    height,\n    width,\n    theme,\n    uuid,\n    expressionMatrix,\n    cellColors,\n    colormap: geneExpressionColormap,\n    setIsRendering,\n    setCellHighlight,\n    setGeneHighlight,\n    setComponentHover: () => {\n      setComponentHover(uuid);\n    },\n    updateViewInfo: setComponentViewInfo,\n    observationsTitle,\n    variablesTitle\n  }), !disableTooltip && /* @__PURE__ */ React14.createElement(HeatmapTooltipSubscriber, {\n    parentUuid: uuid,\n    width,\n    height,\n    transpose,\n    getCellInfo,\n    getGeneInfo,\n    cellHighlight,\n    geneHighlight\n  }));\n}\n\n// src/components/spatial/SpatialSubscriber.js\nimport React24, { useEffect as useEffect6, useMemo as useMemo6, useCallback as useCallback7 } from \"react\";\n\n// src/components/spatial/Spatial.js\nimport React20, { forwardRef as forwardRef2 } from \"react\";\nimport isEqual5 from \"lodash/isEqual\";\nimport { COORDINATE_SYSTEM as COORDINATE_SYSTEM5 } from \"@deck.gl/core\";\nimport { PolygonLayer as PolygonLayer2, ScatterplotLayer as ScatterplotLayer2 } from \"@deck.gl/layers\";\nimport { Matrix4 as Matrix44 } from \"math.gl\";\n\n// src/layers/selection-utils.js\nimport { COORDINATE_SYSTEM as COORDINATE_SYSTEM4 } from \"@deck.gl/core\";\nimport { DataFilterExtension } from \"@deck.gl/extensions\";\n\n// src/layers/SelectionLayer.js\nimport { CompositeLayer as CompositeLayer4 } from \"deck.gl\";\nimport { polygon as turfPolygon, point as turfPoint2 } from \"@turf/helpers\";\nimport booleanWithin from \"@turf/boolean-within\";\nimport booleanContains from \"@turf/boolean-contains\";\nimport booleanOverlap from \"@turf/boolean-overlap\";\nimport booleanPointInPolygon from \"@turf/boolean-point-in-polygon\";\nimport { ScatterplotLayer } from \"@deck.gl/layers\";\nimport { SELECTION_TYPE } from \"nebula.gl\";\nimport { EditableGeoJsonLayer } from \"@nebula.gl/layers\";\nimport { DrawRectangleMode, DrawPolygonByDraggingMode, ViewMode } from \"@nebula.gl/edit-modes\";\nvar EDIT_TYPE_ADD = \"addFeature\";\nvar EDIT_TYPE_CLEAR = \"clearFeatures\";\nvar ClickableDrawRectangleMode = class extends DrawRectangleMode {\n  handleClick(event, props) {\n    props.onEdit({ editType: EDIT_TYPE_CLEAR });\n  }\n};\nvar ClickableDrawPolygonByDraggingMode = class extends DrawPolygonByDraggingMode {\n  handleClick(event, props) {\n    props.onEdit({ editType: EDIT_TYPE_CLEAR });\n  }\n};\nvar MODE_MAP = {\n  [SELECTION_TYPE.RECTANGLE]: ClickableDrawRectangleMode,\n  [SELECTION_TYPE.POLYGON]: ClickableDrawPolygonByDraggingMode\n};\nvar defaultProps4 = {\n  selectionType: SELECTION_TYPE.RECTANGLE,\n  layerIds: [],\n  onSelect: () => {\n  }\n};\nvar EMPTY_DATA = {\n  type: \"FeatureCollection\",\n  features: []\n};\nvar LAYER_ID_GEOJSON = \"selection-geojson\";\nvar PASS_THROUGH_PROPS = [\n  \"lineWidthScale\",\n  \"lineWidthMinPixels\",\n  \"lineWidthMaxPixels\",\n  \"lineWidthUnits\",\n  \"lineJointRounded\",\n  \"lineMiterLimit\",\n  \"pointRadiusScale\",\n  \"pointRadiusMinPixels\",\n  \"pointRadiusMaxPixels\",\n  \"lineDashJustified\",\n  \"getLineColor\",\n  \"getFillColor\",\n  \"getRadius\",\n  \"getLineWidth\",\n  \"getLineDashArray\",\n  \"getTentativeLineDashArray\",\n  \"getTentativeLineColor\",\n  \"getTentativeFillColor\",\n  \"getTentativeLineWidth\",\n  \"editHandlePointRadiusScale\",\n  \"editHandlePointRadiusMinPixels\",\n  \"editHandlePointRadiusMaxPixels\",\n  \"getEditHandlePointColor\",\n  \"getEditHandlePointRadius\",\n  \"modeHandlers\"\n];\nvar SelectionLayer = class extends CompositeLayer4 {\n  _selectPolygonObjects(coordinates) {\n    const {\n      onSelect,\n      getCellCoords,\n      cellsQuadTree,\n      flipY\n    } = this.props;\n    const flippedCoordinates = flipY ? coordinates.map((poly) => poly.map((p) => [p[0], -p[1]])) : coordinates;\n    const selectedPolygon = turfPolygon(flippedCoordinates);\n    const pickingInfos = [];\n    cellsQuadTree.visit((node, x0, y0, x1, y1) => {\n      const nodePoints = [[[x0, y0], [x1, y0], [x1, y1], [x0, y1], [x0, y0]]];\n      const nodePolygon = turfPolygon(nodePoints);\n      const nodePolygonContainsSelectedPolygon = booleanContains(nodePolygon, selectedPolygon);\n      const nodePolygonWithinSelectedPolygon = booleanWithin(nodePolygon, selectedPolygon);\n      const nodePolygonOverlapsSelectedPolgyon = booleanOverlap(nodePolygon, selectedPolygon);\n      if (!nodePolygonContainsSelectedPolygon && !nodePolygonWithinSelectedPolygon && !nodePolygonOverlapsSelectedPolgyon) {\n        return true;\n      }\n      if (node.data && booleanPointInPolygon(turfPoint([].slice.call(getCellCoords(node.data[1]))), selectedPolygon,)\n      ) {\n        pickingInfos.push(node.data);\n      }\n      return false;\n    });\n    onSelect({ pickingInfos });\n  }\n  renderLayers() {\n    const { onSelect } = this.props;\n    const mode = MODE_MAP[this.props.selectionType] || ViewMode;\n    const inheritedProps = {};\n    PASS_THROUGH_PROPS.forEach((p) => {\n      if (this.props[p] !== void 0)\n        inheritedProps[p] = this.props[p];\n    });\n    const layers = [\n      new EditableGeoJsonLayer(this.getSubLayerProps(__spreadValues({\n        id: LAYER_ID_GEOJSON,\n        pickable: true,\n        mode,\n        modeConfig: {\n          dragToDraw: true\n        },\n        selectedFeatureIndexes: [],\n        data: EMPTY_DATA,\n        onEdit: ({ updatedData, editType }) => {\n          if (editType === EDIT_TYPE_ADD) {\n            const { coordinates } = updatedData.features[0].geometry;\n            this._selectPolygonObjects(coordinates);\n          } else if (editType === EDIT_TYPE_CLEAR) {\n            onSelect({ pickingInfos: [] });\n          }\n        },\n        _subLayerProps: {\n          guides: {\n            pointType: \"circle\",\n            _subLayerProps: {\n              \"points-circle\": {\n                type: ScatterplotLayer,\n                radiusScale: 1,\n                stroked: true,\n                getLineWidth: 1,\n                radiusMinPixels: 1,\n                radiusMaxPixels: 3,\n                getRadius: 2\n              }\n            }\n          }\n        }\n      }, inheritedProps)))\n    ];\n    return layers;\n  }\n};\nSelectionLayer.layerName = \"SelectionLayer\";\nSelectionLayer.defaultProps = defaultProps4;\n\n// src/layers/selection-utils.js\nfunction getBaseLayerId(layerId) {\n  return `base-${layerId}`;\n}\nfunction getSelectionLayers(tool, zoom, layerId, getCellCoords, updateCellsSelection, cellsQuadTree, flipY = false) {\n  if (!tool) {\n    return [];\n  }\n  const cellBaseLayerId = getBaseLayerId(layerId);\n  const editHandlePointRadius = 5 / (zoom + 16);\n  return [new SelectionLayer({\n    id: \"selection\",\n    flipY,\n    cellsQuadTree,\n    getCellCoords,\n    coordinateSystem: COORDINATE_SYSTEM4.CARTESIAN,\n    selectionType: tool,\n    onSelect: ({ pickingInfos }) => {\n      const cellIds = pickingInfos.map((cellObj) => cellObj[0]);\n      if (updateCellsSelection) {\n        updateCellsSelection(cellIds);\n      }\n    },\n    layerIds: [cellBaseLayerId],\n    getTentativeFillColor: () => [255, 255, 255, 95],\n    getTentativeLineColor: () => [143, 143, 143, 255],\n    getTentativeLineDashArray: () => [7, 4],\n    lineWidthMinPixels: 2,\n    lineWidthMaxPixels: 2,\n    getEditHandlePointColor: () => [255, 255, 255, 255],\n    getEditHandlePointRadius: () => editHandlePointRadius,\n    editHandlePointRadiusScale: 1,\n    editHandlePointRadiusMinPixels: editHandlePointRadius,\n    editHandlePointRadiusMaxPixels: 2 * editHandlePointRadius\n  })];\n}\n\n// src/components/spatial/utils.js\nimport shortNumber from \"short-number\";\nimport isEqual4 from \"lodash/isEqual\";\nimport { extent } from \"d3-array\";\nimport { Matrix4 as Matrix43 } from \"math.gl\";\nimport { divide, compare, unit } from \"mathjs\";\n\n// src/layers/BitmaskLayer.js\nimport GL4 from \"@luma.gl/constants\";\nimport { project32 as project323, picking as picking3 } from \"@deck.gl/core\";\nimport { Texture2D as Texture2D3, isWebGL2 as isWebGL22 } from \"@luma.gl/core\";\n\n// src/layers/bitmask-layer-shaders.js\nvar vs3 = \"\\n#define SHADER_NAME bitmask-layer-vertex-shader\\n\\nattribute vec2 texCoords;\\nattribute vec3 positions;\\nattribute vec3 positions64Low;\\nattribute vec3 instancePickingColors;\\n\\nvarying vec2 vTexCoord;\\n\\nvoid main(void) {\\n  geometry.worldPosition = positions;\\n  geometry.uv = texCoords;\\n  geometry.pickingColor = instancePickingColors;\\n  gl_Position = project_position_to_clipspace(positions, positions64Low, vec3(0.0), geometry.position);\\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\\n  vTexCoord = texCoords;\\n  vec4 color = vec4(0.0);\\n  DECKGL_FILTER_COLOR(color, geometry);\\n}\\n\";\nvar fs3 = \"\\n#define SHADER_NAME bitmask-layer-fragment-shader\\nprecision highp float;\\n\\nvec4 plasma (float x_1306414511) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0.050980392156862744,0.03137254901960784,0.5294117647058824,1);\\n  const float e1 = 0.13;\\n  const vec4 v1 = vec4(0.29411764705882354,0.011764705882352941,0.6313725490196078,1);\\n  const float e2 = 0.25;\\n  const vec4 v2 = vec4(0.49019607843137253,0.011764705882352941,0.6588235294117647,1);\\n  const float e3 = 0.38;\\n  const vec4 v3 = vec4(0.6588235294117647,0.13333333333333333,0.5882352941176471,1);\\n  const float e4 = 0.5;\\n  const vec4 v4 = vec4(0.796078431372549,0.27450980392156865,0.4745098039215686,1);\\n  const float e5 = 0.63;\\n  const vec4 v5 = vec4(0.8980392156862745,0.4196078431372549,0.36470588235294116,1);\\n  const float e6 = 0.75;\\n  const vec4 v6 = vec4(0.9725490196078431,0.5803921568627451,0.2549019607843137,1);\\n  const float e7 = 0.88;\\n  const vec4 v7 = vec4(0.9921568627450981,0.7647058823529411,0.1568627450980392,1);\\n  const float e8 = 1.0;\\n  const vec4 v8 = vec4(0.9411764705882353,0.9764705882352941,0.12941176470588237,1);\\n  float a0 = smoothstep(e0,e1,x_1306414511);\\n  float a1 = smoothstep(e1,e2,x_1306414511);\\n  float a2 = smoothstep(e2,e3,x_1306414511);\\n  float a3 = smoothstep(e3,e4,x_1306414511);\\n  float a4 = smoothstep(e4,e5,x_1306414511);\\n  float a5 = smoothstep(e5,e6,x_1306414511);\\n  float a6 = smoothstep(e6,e7,x_1306414511);\\n  float a7 = smoothstep(e7,e8,x_1306414511);\\n  return max(mix(v0,v1,a0)*step(e0,x_1306414511)*step(x_1306414511,e1),\\n    max(mix(v1,v2,a1)*step(e1,x_1306414511)*step(x_1306414511,e2),\\n    max(mix(v2,v3,a2)*step(e2,x_1306414511)*step(x_1306414511,e3),\\n    max(mix(v3,v4,a3)*step(e3,x_1306414511)*step(x_1306414511,e4),\\n    max(mix(v4,v5,a4)*step(e4,x_1306414511)*step(x_1306414511,e5),\\n    max(mix(v5,v6,a5)*step(e5,x_1306414511)*step(x_1306414511,e6),\\n    max(mix(v6,v7,a6)*step(e6,x_1306414511)*step(x_1306414511,e7),mix(v7,v8,a7)*step(e7,x_1306414511)*step(x_1306414511,e8)\\n  )))))));\\n}\\n\\nvec4 viridis (float x_1870111103) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0.26666666666666666,0.00392156862745098,0.32941176470588235,1);\\n  const float e1 = 0.13;\\n  const vec4 v1 = vec4(0.2784313725490196,0.17254901960784313,0.47843137254901963,1);\\n  const float e2 = 0.25;\\n  const vec4 v2 = vec4(0.23137254901960785,0.3176470588235294,0.5450980392156862,1);\\n  const float e3 = 0.38;\\n  const vec4 v3 = vec4(0.17254901960784313,0.44313725490196076,0.5568627450980392,1);\\n  const float e4 = 0.5;\\n  const vec4 v4 = vec4(0.12941176470588237,0.5647058823529412,0.5529411764705883,1);\\n  const float e5 = 0.63;\\n  const vec4 v5 = vec4(0.15294117647058825,0.6784313725490196,0.5058823529411764,1);\\n  const float e6 = 0.75;\\n  const vec4 v6 = vec4(0.3607843137254902,0.7843137254901961,0.38823529411764707,1);\\n  const float e7 = 0.88;\\n  const vec4 v7 = vec4(0.6666666666666666,0.8627450980392157,0.19607843137254902,1);\\n  const float e8 = 1.0;\\n  const vec4 v8 = vec4(0.9921568627450981,0.9058823529411765,0.1450980392156863,1);\\n  float a0 = smoothstep(e0,e1,x_1870111103);\\n  float a1 = smoothstep(e1,e2,x_1870111103);\\n  float a2 = smoothstep(e2,e3,x_1870111103);\\n  float a3 = smoothstep(e3,e4,x_1870111103);\\n  float a4 = smoothstep(e4,e5,x_1870111103);\\n  float a5 = smoothstep(e5,e6,x_1870111103);\\n  float a6 = smoothstep(e6,e7,x_1870111103);\\n  float a7 = smoothstep(e7,e8,x_1870111103);\\n  return max(mix(v0,v1,a0)*step(e0,x_1870111103)*step(x_1870111103,e1),\\n    max(mix(v1,v2,a1)*step(e1,x_1870111103)*step(x_1870111103,e2),\\n    max(mix(v2,v3,a2)*step(e2,x_1870111103)*step(x_1870111103,e3),\\n    max(mix(v3,v4,a3)*step(e3,x_1870111103)*step(x_1870111103,e4),\\n    max(mix(v4,v5,a4)*step(e4,x_1870111103)*step(x_1870111103,e5),\\n    max(mix(v5,v6,a5)*step(e5,x_1870111103)*step(x_1870111103,e6),\\n    max(mix(v6,v7,a6)*step(e6,x_1870111103)*step(x_1870111103,e7),mix(v7,v8,a7)*step(e7,x_1870111103)*step(x_1870111103,e8)\\n  )))))));\\n}\\n\\nvec4 greys (float x_1268378094) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0,0,0,1);\\n  const float e1 = 1.0;\\n  const vec4 v1 = vec4(1,1,1,1);\\n  float a0 = smoothstep(e0,e1,x_1268378094);\\n  return mix(v0,v1,a0)*step(e0,x_1268378094)*step(x_1268378094,e1);\\n}\\n\\nvec4 magma (float x_2443053725) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0,0,0.01568627450980392,1);\\n  const float e1 = 0.13;\\n  const vec4 v1 = vec4(0.10980392156862745,0.06274509803921569,0.26666666666666666,1);\\n  const float e2 = 0.25;\\n  const vec4 v2 = vec4(0.30980392156862746,0.07058823529411765,0.4823529411764706,1);\\n  const float e3 = 0.38;\\n  const vec4 v3 = vec4(0.5058823529411764,0.1450980392156863,0.5058823529411764,1);\\n  const float e4 = 0.5;\\n  const vec4 v4 = vec4(0.7098039215686275,0.21176470588235294,0.47843137254901963,1);\\n  const float e5 = 0.63;\\n  const vec4 v5 = vec4(0.8980392156862745,0.3137254901960784,0.39215686274509803,1);\\n  const float e6 = 0.75;\\n  const vec4 v6 = vec4(0.984313725490196,0.5294117647058824,0.3803921568627451,1);\\n  const float e7 = 0.88;\\n  const vec4 v7 = vec4(0.996078431372549,0.7607843137254902,0.5294117647058824,1);\\n  const float e8 = 1.0;\\n  const vec4 v8 = vec4(0.9882352941176471,0.9921568627450981,0.7490196078431373,1);\\n  float a0 = smoothstep(e0,e1,x_2443053725);\\n  float a1 = smoothstep(e1,e2,x_2443053725);\\n  float a2 = smoothstep(e2,e3,x_2443053725);\\n  float a3 = smoothstep(e3,e4,x_2443053725);\\n  float a4 = smoothstep(e4,e5,x_2443053725);\\n  float a5 = smoothstep(e5,e6,x_2443053725);\\n  float a6 = smoothstep(e6,e7,x_2443053725);\\n  float a7 = smoothstep(e7,e8,x_2443053725);\\n  return max(mix(v0,v1,a0)*step(e0,x_2443053725)*step(x_2443053725,e1),\\n    max(mix(v1,v2,a1)*step(e1,x_2443053725)*step(x_2443053725,e2),\\n    max(mix(v2,v3,a2)*step(e2,x_2443053725)*step(x_2443053725,e3),\\n    max(mix(v3,v4,a3)*step(e3,x_2443053725)*step(x_2443053725,e4),\\n    max(mix(v4,v5,a4)*step(e4,x_2443053725)*step(x_2443053725,e5),\\n    max(mix(v5,v6,a5)*step(e5,x_2443053725)*step(x_2443053725,e6),\\n    max(mix(v6,v7,a6)*step(e6,x_2443053725)*step(x_2443053725,e7),mix(v7,v8,a7)*step(e7,x_2443053725)*step(x_2443053725,e8)\\n  )))))));\\n}\\n\\nvec4 jet (float x_623120303) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0,0,0.5137254901960784,1);\\n  const float e1 = 0.125;\\n  const vec4 v1 = vec4(0,0.23529411764705882,0.6666666666666666,1);\\n  const float e2 = 0.375;\\n  const vec4 v2 = vec4(0.0196078431372549,1,1,1);\\n  const float e3 = 0.625;\\n  const vec4 v3 = vec4(1,1,0,1);\\n  const float e4 = 0.875;\\n  const vec4 v4 = vec4(0.9803921568627451,0,0,1);\\n  const float e5 = 1.0;\\n  const vec4 v5 = vec4(0.5019607843137255,0,0,1);\\n  float a0 = smoothstep(e0,e1,x_623120303);\\n  float a1 = smoothstep(e1,e2,x_623120303);\\n  float a2 = smoothstep(e2,e3,x_623120303);\\n  float a3 = smoothstep(e3,e4,x_623120303);\\n  float a4 = smoothstep(e4,e5,x_623120303);\\n  return max(mix(v0,v1,a0)*step(e0,x_623120303)*step(x_623120303,e1),\\n    max(mix(v1,v2,a1)*step(e1,x_623120303)*step(x_623120303,e2),\\n    max(mix(v2,v3,a2)*step(e2,x_623120303)*step(x_623120303,e3),\\n    max(mix(v3,v4,a3)*step(e3,x_623120303)*step(x_623120303,e4),mix(v4,v5,a4)*step(e4,x_623120303)*step(x_623120303,e5)\\n  ))));\\n}\\n\\nvec4 bone (float x_783795047) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0,0,0,1);\\n  const float e1 = 0.376;\\n  const vec4 v1 = vec4(0.32941176470588235,0.32941176470588235,0.4549019607843137,1);\\n  const float e2 = 0.753;\\n  const vec4 v2 = vec4(0.6627450980392157,0.7843137254901961,0.7843137254901961,1);\\n  const float e3 = 1.0;\\n  const vec4 v3 = vec4(1,1,1,1);\\n  float a0 = smoothstep(e0,e1,x_783795047);\\n  float a1 = smoothstep(e1,e2,x_783795047);\\n  float a2 = smoothstep(e2,e3,x_783795047);\\n  return max(mix(v0,v1,a0)*step(e0,x_783795047)*step(x_783795047,e1),\\n    max(mix(v1,v2,a1)*step(e1,x_783795047)*step(x_783795047,e2),mix(v2,v3,a2)*step(e2,x_783795047)*step(x_783795047,e3)\\n  ));\\n}\\n\\nvec4 copper (float x_3932431844) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0,0,0,1);\\n  const float e1 = 0.804;\\n  const vec4 v1 = vec4(1,0.6274509803921569,0.4,1);\\n  const float e2 = 1.0;\\n  const vec4 v2 = vec4(1,0.7803921568627451,0.4980392156862745,1);\\n  float a0 = smoothstep(e0,e1,x_3932431844);\\n  float a1 = smoothstep(e1,e2,x_3932431844);\\n  return max(mix(v0,v1,a0)*step(e0,x_3932431844)*step(x_3932431844,e1),mix(v1,v2,a1)*step(e1,x_3932431844)*step(x_3932431844,e2)\\n  );\\n}\\n\\nvec4 density (float x_2921433544) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0.21176470588235294,0.054901960784313725,0.1411764705882353,1);\\n  const float e1 = 0.13;\\n  const vec4 v1 = vec4(0.34901960784313724,0.09019607843137255,0.3137254901960784,1);\\n  const float e2 = 0.25;\\n  const vec4 v2 = vec4(0.43137254901960786,0.17647058823529413,0.5176470588235295,1);\\n  const float e3 = 0.38;\\n  const vec4 v3 = vec4(0.47058823529411764,0.30196078431372547,0.6980392156862745,1);\\n  const float e4 = 0.5;\\n  const vec4 v4 = vec4(0.47058823529411764,0.44313725490196076,0.8352941176470589,1);\\n  const float e5 = 0.63;\\n  const vec4 v5 = vec4(0.45098039215686275,0.592156862745098,0.8941176470588236,1);\\n  const float e6 = 0.75;\\n  const vec4 v6 = vec4(0.5254901960784314,0.7254901960784313,0.8901960784313725,1);\\n  const float e7 = 0.88;\\n  const vec4 v7 = vec4(0.6941176470588235,0.8392156862745098,0.8901960784313725,1);\\n  const float e8 = 1.0;\\n  const vec4 v8 = vec4(0.9019607843137255,0.9450980392156862,0.9450980392156862,1);\\n  float a0 = smoothstep(e0,e1,x_2921433544);\\n  float a1 = smoothstep(e1,e2,x_2921433544);\\n  float a2 = smoothstep(e2,e3,x_2921433544);\\n  float a3 = smoothstep(e3,e4,x_2921433544);\\n  float a4 = smoothstep(e4,e5,x_2921433544);\\n  float a5 = smoothstep(e5,e6,x_2921433544);\\n  float a6 = smoothstep(e6,e7,x_2921433544);\\n  float a7 = smoothstep(e7,e8,x_2921433544);\\n  return max(mix(v0,v1,a0)*step(e0,x_2921433544)*step(x_2921433544,e1),\\n    max(mix(v1,v2,a1)*step(e1,x_2921433544)*step(x_2921433544,e2),\\n    max(mix(v2,v3,a2)*step(e2,x_2921433544)*step(x_2921433544,e3),\\n    max(mix(v3,v4,a3)*step(e3,x_2921433544)*step(x_2921433544,e4),\\n    max(mix(v4,v5,a4)*step(e4,x_2921433544)*step(x_2921433544,e5),\\n    max(mix(v5,v6,a5)*step(e5,x_2921433544)*step(x_2921433544,e6),\\n    max(mix(v6,v7,a6)*step(e6,x_2921433544)*step(x_2921433544,e7),mix(v7,v8,a7)*step(e7,x_2921433544)*step(x_2921433544,e8)\\n  )))))));\\n}\\n\\nvec4 inferno (float x_1987546174) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0,0,0.01568627450980392,1);\\n  const float e1 = 0.13;\\n  const vec4 v1 = vec4(0.12156862745098039,0.047058823529411764,0.2823529411764706,1);\\n  const float e2 = 0.25;\\n  const vec4 v2 = vec4(0.3333333333333333,0.058823529411764705,0.42745098039215684,1);\\n  const float e3 = 0.38;\\n  const vec4 v3 = vec4(0.5333333333333333,0.13333333333333333,0.41568627450980394,1);\\n  const float e4 = 0.5;\\n  const vec4 v4 = vec4(0.7294117647058823,0.21176470588235294,0.3333333333333333,1);\\n  const float e5 = 0.63;\\n  const vec4 v5 = vec4(0.8901960784313725,0.34901960784313724,0.2,1);\\n  const float e6 = 0.75;\\n  const vec4 v6 = vec4(0.9764705882352941,0.5490196078431373,0.0392156862745098,1);\\n  const float e7 = 0.88;\\n  const vec4 v7 = vec4(0.9764705882352941,0.788235294117647,0.19607843137254902,1);\\n  const float e8 = 1.0;\\n  const vec4 v8 = vec4(0.9882352941176471,1,0.6431372549019608,1);\\n  float a0 = smoothstep(e0,e1,x_1987546174);\\n  float a1 = smoothstep(e1,e2,x_1987546174);\\n  float a2 = smoothstep(e2,e3,x_1987546174);\\n  float a3 = smoothstep(e3,e4,x_1987546174);\\n  float a4 = smoothstep(e4,e5,x_1987546174);\\n  float a5 = smoothstep(e5,e6,x_1987546174);\\n  float a6 = smoothstep(e6,e7,x_1987546174);\\n  float a7 = smoothstep(e7,e8,x_1987546174);\\n  return max(mix(v0,v1,a0)*step(e0,x_1987546174)*step(x_1987546174,e1),\\n    max(mix(v1,v2,a1)*step(e1,x_1987546174)*step(x_1987546174,e2),\\n    max(mix(v2,v3,a2)*step(e2,x_1987546174)*step(x_1987546174,e3),\\n    max(mix(v3,v4,a3)*step(e3,x_1987546174)*step(x_1987546174,e4),\\n    max(mix(v4,v5,a4)*step(e4,x_1987546174)*step(x_1987546174,e5),\\n    max(mix(v5,v6,a5)*step(e5,x_1987546174)*step(x_1987546174,e6),\\n    max(mix(v6,v7,a6)*step(e6,x_1987546174)*step(x_1987546174,e7),mix(v7,v8,a7)*step(e7,x_1987546174)*step(x_1987546174,e8)\\n  )))))));\\n}\\n\\nvec4 cool (float x_761030515) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0.49019607843137253,0,0.7019607843137254,1);\\n  const float e1 = 0.13;\\n  const vec4 v1 = vec4(0.4549019607843137,0,0.8549019607843137,1);\\n  const float e2 = 0.25;\\n  const vec4 v2 = vec4(0.3843137254901961,0.2901960784313726,0.9294117647058824,1);\\n  const float e3 = 0.38;\\n  const vec4 v3 = vec4(0.26666666666666666,0.5725490196078431,0.9058823529411765,1);\\n  const float e4 = 0.5;\\n  const vec4 v4 = vec4(0,0.8,0.7725490196078432,1);\\n  const float e5 = 0.63;\\n  const vec4 v5 = vec4(0,0.9686274509803922,0.5725490196078431,1);\\n  const float e6 = 0.75;\\n  const vec4 v6 = vec4(0,1,0.34509803921568627,1);\\n  const float e7 = 0.88;\\n  const vec4 v7 = vec4(0.1568627450980392,1,0.03137254901960784,1);\\n  const float e8 = 1.0;\\n  const vec4 v8 = vec4(0.5764705882352941,1,0,1);\\n  float a0 = smoothstep(e0,e1,x_761030515);\\n  float a1 = smoothstep(e1,e2,x_761030515);\\n  float a2 = smoothstep(e2,e3,x_761030515);\\n  float a3 = smoothstep(e3,e4,x_761030515);\\n  float a4 = smoothstep(e4,e5,x_761030515);\\n  float a5 = smoothstep(e5,e6,x_761030515);\\n  float a6 = smoothstep(e6,e7,x_761030515);\\n  float a7 = smoothstep(e7,e8,x_761030515);\\n  return max(mix(v0,v1,a0)*step(e0,x_761030515)*step(x_761030515,e1),\\n    max(mix(v1,v2,a1)*step(e1,x_761030515)*step(x_761030515,e2),\\n    max(mix(v2,v3,a2)*step(e2,x_761030515)*step(x_761030515,e3),\\n    max(mix(v3,v4,a3)*step(e3,x_761030515)*step(x_761030515,e4),\\n    max(mix(v4,v5,a4)*step(e4,x_761030515)*step(x_761030515,e5),\\n    max(mix(v5,v6,a5)*step(e5,x_761030515)*step(x_761030515,e6),\\n    max(mix(v6,v7,a6)*step(e6,x_761030515)*step(x_761030515,e7),mix(v7,v8,a7)*step(e7,x_761030515)*step(x_761030515,e8)\\n  )))))));\\n}\\n\\nvec4 hot (float x_180130041) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0,0,0,1);\\n  const float e1 = 0.3;\\n  const vec4 v1 = vec4(0.9019607843137255,0,0,1);\\n  const float e2 = 0.6;\\n  const vec4 v2 = vec4(1,0.8235294117647058,0,1);\\n  const float e3 = 1.0;\\n  const vec4 v3 = vec4(1,1,1,1);\\n  float a0 = smoothstep(e0,e1,x_180130041);\\n  float a1 = smoothstep(e1,e2,x_180130041);\\n  float a2 = smoothstep(e2,e3,x_180130041);\\n  return max(mix(v0,v1,a0)*step(e0,x_180130041)*step(x_180130041,e1),\\n    max(mix(v1,v2,a1)*step(e1,x_180130041)*step(x_180130041,e2),mix(v2,v3,a2)*step(e2,x_180130041)*step(x_180130041,e3)\\n  ));\\n}\\n\\nvec4 spring (float x_755571360) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(1,0,1,1);\\n  const float e1 = 1.0;\\n  const vec4 v1 = vec4(1,1,0,1);\\n  float a0 = smoothstep(e0,e1,x_755571360);\\n  return mix(v0,v1,a0)*step(e0,x_755571360)*step(x_755571360,e1);\\n}\\n\\nvec4 summer (float x_2651158874) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0,0.5019607843137255,0.4,1);\\n  const float e1 = 1.0;\\n  const vec4 v1 = vec4(1,1,0.4,1);\\n  float a0 = smoothstep(e0,e1,x_2651158874);\\n  return mix(v0,v1,a0)*step(e0,x_2651158874)*step(x_2651158874,e1);\\n}\\n\\nvec4 autumn (float x_626866098) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(1,0,0,1);\\n  const float e1 = 1.0;\\n  const vec4 v1 = vec4(1,1,0,1);\\n  float a0 = smoothstep(e0,e1,x_626866098);\\n  return mix(v0,v1,a0)*step(e0,x_626866098)*step(x_626866098,e1);\\n}\\n\\nvec4 winter (float x_2098958741) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0,0,1,1);\\n  const float e1 = 1.0;\\n  const vec4 v1 = vec4(0,1,0.5019607843137255,1);\\n  float a0 = smoothstep(e0,e1,x_2098958741);\\n  return mix(v0,v1,a0)*step(e0,x_2098958741)*step(x_2098958741,e1);\\n}\\n\\n// Data (mask) texture\\nuniform sampler2D channel0;\\nuniform sampler2D channel1;\\nuniform sampler2D channel2;\\nuniform sampler2D channel3;\\nuniform sampler2D channel4;\\nuniform sampler2D channel5;\\n\\n// Color texture\\nuniform sampler2D colorTex;\\nuniform float colorTexHeight;\\nuniform float colorTexWidth;\\nuniform float hovered;\\n// range\\nuniform bool channelsVisible[6];\\n\\n// Expression mapping\\nuniform vec2 uColorScaleRange;\\nuniform bool uIsExpressionMode;\\nuniform sampler2D expressionTex;\\n\\n// opacity\\nuniform float opacity;\\n\\nvarying vec2 vTexCoord;\\n\\nvec4 sampleAndGetColor(sampler2D dataTex, vec2 coord, bool isOn){\\n  float sampledData = texture(dataTex, coord).r;\\n  vec4 hoveredColor = float(sampledData == hovered && sampledData > 0. && hovered > 0.) * vec4(0., 0., 1., 1.);\\n  // Colors are laid out corresponding to ids in row-major order in the texture.  So if width of the texture is 10, and you want ID 25,\\n  // you need coordinate (1, 4) (i.e 2 rows down, and 5 columns over indexed from 0 for a total of 25 units covered in row major order).\\n  vec2 colorTexCoord = vec2(mod(sampledData, colorTexWidth) / colorTexWidth, floor(sampledData / colorTexWidth) / (colorTexHeight - 1.));\\n  float expressionValue = texture(expressionTex, colorTexCoord).r / 255.;\\n  float scaledExpressionValue = (expressionValue - uColorScaleRange[0]) / max(0.005, (uColorScaleRange[1] - uColorScaleRange[0]));\\n  vec4 sampledColor = float(uIsExpressionMode) * COLORMAP_FUNC(clamp(scaledExpressionValue, 0.0, 1.0)) +  (1. - float(uIsExpressionMode)) * vec4(texture(colorTex, colorTexCoord).rgb, 1.);\\n  // Only return a color if the data is non-zero.\\n  return max(0., min(sampledData, 1.)) * float(isOn) * (sampledColor + hoveredColor);\\n}\\n\\nvoid main() {\\n\\n  gl_FragColor = sampleAndGetColor(channel0, vTexCoord, channelsVisible[0]);\\n\\n  // If the sampled color and the currently stored color (gl_FragColor) are identical, don't blend and use the sampled color,\\n  // otherwise just use the currently stored color.  Repeat this for all channels.\\n  vec4 sampledColor = sampleAndGetColor(channel1, vTexCoord, channelsVisible[1]);\\n  gl_FragColor = (sampledColor == gl_FragColor || sampledColor == vec4(0.)) ? gl_FragColor : sampledColor;\\n  sampledColor = sampleAndGetColor(channel2, vTexCoord, channelsVisible[2]);\\n  gl_FragColor = (sampledColor == gl_FragColor || sampledColor == vec4(0.)) ? gl_FragColor : sampledColor;\\n  sampledColor = sampleAndGetColor(channel3, vTexCoord, channelsVisible[3]);\\n  gl_FragColor = (sampledColor == gl_FragColor || sampledColor == vec4(0.)) ? gl_FragColor : sampledColor;\\n  sampledColor = sampleAndGetColor(channel4, vTexCoord, channelsVisible[4]);\\n  gl_FragColor = (sampledColor == gl_FragColor || sampledColor == vec4(0.)) ? gl_FragColor : sampledColor;\\n  sampledColor = sampleAndGetColor(channel5, vTexCoord, channelsVisible[5]);\\n  gl_FragColor = (sampledColor == gl_FragColor || sampledColor == vec4(0.)) ? gl_FragColor : sampledColor;\\n  // Apply the opacity if there is pixel data, and if the pixel data is empty i.e no segmentation, use 0 opacity.\\n  gl_FragColor = vec4(gl_FragColor.rgb, (gl_FragColor.rgb == vec3(0., 0., 0.)) ? 0.0 : opacity);\\n\\n  geometry.uv = vTexCoord;\\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\\n}\\n\";\n\n// src/layers/BitmaskLayer.js\nfunction padWithDefault2(arr, defaultValue, padWidth) {\n  const newArr = [...arr];\n  for (let i = 0; i < padWidth; i += 1) {\n    newArr.push(defaultValue);\n  }\n  return newArr;\n}\nvar defaultProps5 = {\n  hoveredCell: { type: \"number\", value: null, compare: true },\n  cellColorData: { type: \"object\", value: null, compare: true },\n  colormap: { type: \"string\", value: GLSL_COLORMAP_DEFAULT, compare: true },\n  expressionData: { type: \"object\", value: null, compare: true }\n};\nvar BitmaskLayer = class extends XRLayer {\n  getShaders() {\n    const { colormap } = this.props;\n    return {\n      fs: fs3,\n      vs: vs3,\n      modules: [project323, picking3],\n      defines: {\n        [COLORMAP_SHADER_PLACEHOLDER]: GLSL_COLORMAPS.includes(colormap) ? colormap : GLSL_COLORMAP_DEFAULT\n      }\n    };\n  }\n  updateState({ props, oldProps, changeFlags }) {\n    super.updateState({ props, oldProps, changeFlags });\n    if (props.cellColorData !== oldProps.cellColorData) {\n      this.setColorTexture();\n    }\n    if (props.expressionData !== oldProps.expressionData) {\n      const { expressionData, cellTexHeight, cellTexWidth } = this.props;\n      const expressionTex = this.dataToTexture(expressionData, cellTexWidth, cellTexHeight);\n      this.setState({ expressionTex });\n    }\n    if (props.colormap !== oldProps.colormap) {\n      const { gl } = this.context;\n      if (this.state.model) {\n        this.state.model.delete();\n      }\n      this.setState({ model: this._getModel(gl) });\n      this.getAttributeManager().invalidateAll();\n    }\n  }\n  setColorTexture() {\n    const {\n      cellColorData: data,\n      cellTexHeight: height,\n      cellTexWidth: width\n    } = this.props;\n    const colorTex = new Texture2D3(this.context.gl, {\n      width,\n      height,\n      data,\n      mipmaps: false,\n      parameters: {\n        [GL4.TEXTURE_MIN_FILTER]: GL4.NEAREST,\n        [GL4.TEXTURE_MAG_FILTER]: GL4.NEAREST,\n        [GL4.TEXTURE_WRAP_S]: GL4.CLAMP_TO_EDGE,\n        [GL4.TEXTURE_WRAP_T]: GL4.CLAMP_TO_EDGE\n      },\n      format: GL4.RGB,\n      dataFormat: GL4.RGB,\n      type: GL4.UNSIGNED_BYTE\n    });\n    this.setState({ colorTex });\n  }\n  draw(opts) {\n    const { uniforms } = opts;\n    const {\n      channelsVisible,\n      hoveredCell,\n      colorScaleLo,\n      colorScaleHi,\n      isExpressionMode\n    } = this.props;\n    const {\n      textures,\n      model,\n      colorTex,\n      expressionTex\n    } = this.state;\n    if (textures && model && colorTex) {\n      model.setUniforms(Object.assign({}, uniforms, __spreadValues({\n        hovered: hoveredCell || 0,\n        colorTex,\n        expressionTex,\n        colorTexHeight: colorTex.height,\n        colorTexWidth: colorTex.width,\n        channelsVisible: padWithDefault2(channelsVisible, false, 6 - channelsVisible.length),\n        uColorScaleRange: [colorScaleLo, colorScaleHi],\n        uIsExpressionMode: isExpressionMode\n      }, textures))).draw();\n    }\n  }\n  dataToTexture(data, width, height) {\n    const isWebGL2On = isWebGL22(this.context.gl);\n    return new Texture2D3(this.context.gl, {\n      width,\n      height,\n      data: new Float32Array(data),\n      mipmaps: false,\n      parameters: {\n        [GL4.TEXTURE_MIN_FILTER]: GL4.NEAREST,\n        [GL4.TEXTURE_MAG_FILTER]: GL4.NEAREST,\n        [GL4.TEXTURE_WRAP_S]: GL4.CLAMP_TO_EDGE,\n        [GL4.TEXTURE_WRAP_T]: GL4.CLAMP_TO_EDGE\n      },\n      format: isWebGL2On ? GL4.R32F : GL4.LUMINANCE,\n      dataFormat: isWebGL2On ? GL4.RED : GL4.LUMINANCE,\n      type: GL4.FLOAT\n    });\n  }\n};\nBitmaskLayer.layerName = \"BitmaskLayer\";\nBitmaskLayer.defaultProps = defaultProps5;\n\n// src/components/layer-controller/utils.js\nimport { Matrix4 as Matrix42 } from \"math.gl\";\nfunction getSingleSelectionStats2D(_0) {\n  return __async(this, arguments, function* ({ loader, selection }) {\n    const data = Array.isArray(loader) ? loader[loader.length - 1] : loader;\n    const raster = yield data.getRaster({ selection });\n    const selectionStats = getChannelStats(raster.data);\n    const { domain, contrastLimits: slider } = selectionStats;\n    return { domain, slider };\n  });\n}\nfunction getSingleSelectionStats3D(_0) {\n  return __async(this, arguments, function* ({ loader, selection }) {\n    const lowResSource = loader[loader.length - 1];\n    const { shape, labels } = lowResSource;\n    const sizeZ = shape[labels.indexOf(\"z\")] >> loader.length - 1;\n    const raster0 = yield lowResSource.getRaster({\n      selection: __spreadProps(__spreadValues({}, selection), { z: 0 })\n    });\n    const rasterMid = yield lowResSource.getRaster({\n      selection: __spreadProps(__spreadValues({}, selection), { z: Math.floor(sizeZ / 2) })\n    });\n    const rasterTop = yield lowResSource.getRaster({\n      selection: __spreadProps(__spreadValues({}, selection), { z: Math.max(0, sizeZ - 1) })\n    });\n    const stats0 = getChannelStats(raster0.data);\n    const statsMid = getChannelStats(rasterMid.data);\n    const statsTop = getChannelStats(rasterTop.data);\n    return {\n      domain: [\n        Math.min(stats0.domain[0], statsMid.domain[0], statsTop.domain[0]),\n        Math.max(stats0.domain[1], statsMid.domain[1], statsTop.domain[1])\n      ],\n      slider: [\n        Math.min(stats0.contrastLimits[0], statsMid.contrastLimits[0], statsTop.contrastLimits[0]),\n        Math.max(stats0.contrastLimits[1], statsMid.contrastLimits[1], statsTop.contrastLimits[1])\n      ]\n    };\n  });\n}\nvar getSingleSelectionStats = (_0) => __async(void 0, [_0], function* ({ loader, selection, use3d }) {\n  const getStats = use3d ? getSingleSelectionStats3D : getSingleSelectionStats2D;\n  return getStats({ loader, selection });\n});\nvar getMultiSelectionStats = (_0) => __async(void 0, [_0], function* ({ loader, selections, use3d }) {\n  const stats = yield Promise.all(selections.map((selection) => getSingleSelectionStats({ loader, selection, use3d })));\n  const domains = stats.map((stat) => stat.domain);\n  const sliders = stats.map((stat) => stat.slider);\n  return { domains, sliders };\n});\nfunction getPhysicalSizeScalingMatrix2(loader) {\n  var _a2, _b2;\n  const { x, y, z } = (_b2 = (_a2 = loader == null ? void 0 : loader.meta) == null ? void 0 : _a2.physicalSizes) != null ? _b2 : {};\n  if ((x == null ? void 0 : x.size) && (y == null ? void 0 : y.size) && (z == null ? void 0 : z.size)) {\n    const min = Math.min(z.size, x.size, y.size);\n    const ratio = [x.size / min, y.size / min, z.size / min];\n    return new Matrix42().scale(ratio);\n  }\n  return new Matrix42().identity();\n}\nfunction getBoundingCube(loader) {\n  const source = Array.isArray(loader) ? loader[0] : loader;\n  const { shape, labels } = source;\n  const physicalSizeScalingMatrix = getPhysicalSizeScalingMatrix2(source);\n  const xSlice = [0, physicalSizeScalingMatrix[0] * shape[labels.indexOf(\"x\")]];\n  const ySlice = [0, physicalSizeScalingMatrix[5] * shape[labels.indexOf(\"y\")]];\n  const zSlice = [\n    0,\n    physicalSizeScalingMatrix[10] * shape[labels.indexOf(\"z\")]\n  ];\n  return [xSlice, ySlice, zSlice];\n}\nfunction abbreviateNumber(value) {\n  const maxLength = 5;\n  let maxNaiveDigits = maxLength;\n  if (!Number.isInteger(value)) {\n    --maxNaiveDigits;\n  }\n  if (value < 1) {\n    --maxNaiveDigits;\n  }\n  const naive = Intl.NumberFormat(\"en-US\", {\n    maximumSignificantDigits: maxNaiveDigits,\n    useGrouping: false\n  }).format(value);\n  if (naive.length <= maxLength)\n    return naive;\n  return value.toExponential(0);\n}\n\n// src/components/spatial/utils.js\nfunction square(x, y, r) {\n  return [[x, y + r], [x + r, y], [x, y - r], [x - r, y]];\n}\nfunction getDefaultGlobalSelection(source) {\n  const globalIndices = source.labels.filter((dim) => GLOBAL_LABELS.includes(dim));\n  const selection = {};\n  globalIndices.forEach((dim) => {\n    selection[dim] = Math.floor((source.shape[source.labels.indexOf(dim)] || 0) / 2);\n  });\n  return selection;\n}\nfunction buildDefaultSelection(source) {\n  const selection = [];\n  const globalSelection = getDefaultGlobalSelection(source);\n  const firstNonGlobalDimension = source.labels.filter((dim) => !GLOBAL_LABELS.includes(dim) && source.shape[source.labels.indexOf(dim)])[0];\n  for (let i = 0; i < Math.min(4, source.shape[source.labels.indexOf(firstNonGlobalDimension)]); i += 1) {\n    selection.push(__spreadValues({\n      [firstNonGlobalDimension]: i\n    }, globalSelection));\n  }\n  return selection;\n}\nfunction isInterleaved2(shape) {\n  const lastDimSize = shape[shape.length - 1];\n  return lastDimSize === 3 || lastDimSize === 4;\n}\nfunction initializeLayerChannels(loader, use3d) {\n  return __async(this, null, function* () {\n    const result = [];\n    const source = getSourceFromLoader(loader);\n    let defaultSelection = buildDefaultSelection(source);\n    defaultSelection = isInterleaved2(source.shape) ? [__spreadProps(__spreadValues({}, defaultSelection[0]), { c: 0 })] : defaultSelection;\n    const stats = yield getMultiSelectionStats({\n      loader: loader.data,\n      selections: defaultSelection,\n      use3d\n    });\n    const domains = isRgb(loader) ? [[0, 255], [0, 255], [0, 255]] : stats.domains;\n    const colors = isRgb(loader) ? [[255, 0, 0], [0, 255, 0], [0, 0, 255]] : null;\n    const sliders = isRgb(loader) ? [[0, 255], [0, 255], [0, 255]] : stats.sliders;\n    defaultSelection.forEach((selection, i) => {\n      const domain = domains[i];\n      const slider = sliders[i];\n      const channel = {\n        selection,\n        color: colors ? colors[i] : defaultSelection.length !== 1 ? VIEWER_PALETTE[i] : [255, 255, 255],\n        visible: true,\n        slider: slider || domain\n      };\n      result.push(channel);\n    });\n    return result;\n  });\n}\nfunction getMetaWithTransformMatrices(imageMeta, imageLoaders) {\n  const sources = imageLoaders.map((loader) => getSourceFromLoader(loader));\n  if (imageMeta.map((meta) => {\n    var _a2, _b2, _c, _d, _e, _f;\n    return ((_b2 = (_a2 = meta == null ? void 0 : meta.metadata) == null ? void 0 : _a2.transform) == null ? void 0 : _b2.matrix) || ((_d = (_c = meta == null ? void 0 : meta.metadata) == null ? void 0 : _c.transform) == null ? void 0 : _d.scale) || ((_f = (_e = meta == null ? void 0 : meta.metadata) == null ? void 0 : _e.transform) == null ? void 0 : _f.translate);\n  }).some(Boolean) || sources.every((source) => {\n    var _a2, _b2, _c, _d;\n    return !((_b2 = (_a2 = source.meta) == null ? void 0 : _a2.physicalSizes) == null ? void 0 : _b2.x) || !((_d = (_c = source.meta) == null ? void 0 : _c.physicalSizes) == null ? void 0 : _d.y);\n  })) {\n    return imageMeta;\n  }\n  const minPhysicalSize = sources.reduce((acc, source) => {\n    var _a2, _b2, _c, _d, _e, _f, _g, _h, _i;\n    const hasZPhyscialSize = (_c = (_b2 = (_a2 = source.meta) == null ? void 0 : _a2.physicalSizes) == null ? void 0 : _b2.z) == null ? void 0 : _c.size;\n    const sizes = [\n      unit(`${(_d = source.meta) == null ? void 0 : _d.physicalSizes.x.size} ${(_e = source.meta) == null ? void 0 : _e.physicalSizes.x.unit}`.replace(\"\\xB5\", \"u\")),\n      unit(`${(_f = source.meta) == null ? void 0 : _f.physicalSizes.y.size} ${(_g = source.meta) == null ? void 0 : _g.physicalSizes.y.unit}`.replace(\"\\xB5\", \"u\"))\n    ];\n    if (hasZPhyscialSize) {\n      sizes.push(unit(`${(_h = source.meta) == null ? void 0 : _h.physicalSizes.z.size} ${(_i = source.meta) == null ? void 0 : _i.physicalSizes.z.unit}`.replace(\"\\xB5\", \"u\")));\n    }\n    acc[0] = acc[0] === void 0 || compare(sizes[0], acc[0]) === -1 ? sizes[0] : acc[0];\n    acc[1] = acc[1] === void 0 || compare(sizes[1], acc[1]) === -1 ? sizes[1] : acc[1];\n    acc[2] = acc[2] === void 0 || compare(sizes[2], acc[2]) === -1 ? sizes[2] : acc[2];\n    return acc;\n  }, []);\n  const imageMetaWithTransform = imageMeta.map((meta, j) => {\n    var _a2, _b2, _c, _d, _e, _f, _g, _h, _i;\n    const source = sources[j];\n    const hasZPhyscialSize = (_c = (_b2 = (_a2 = source.meta) == null ? void 0 : _a2.physicalSizes) == null ? void 0 : _b2.z) == null ? void 0 : _c.size;\n    const sizes = [\n      unit(`${(_d = source.meta) == null ? void 0 : _d.physicalSizes.x.size} ${(_e = source.meta) == null ? void 0 : _e.physicalSizes.x.unit}`.replace(\"\\xB5\", \"u\")),\n      unit(`${(_f = source.meta) == null ? void 0 : _f.physicalSizes.y.size} ${(_g = source.meta) == null ? void 0 : _g.physicalSizes.y.unit}`.replace(\"\\xB5\", \"u\"))\n    ];\n    if (hasZPhyscialSize) {\n      sizes.push(unit(`${(_h = source.meta) == null ? void 0 : _h.physicalSizes.z.size} ${(_i = source.meta) == null ? void 0 : _i.physicalSizes.z.unit}`.replace(\"\\xB5\", \"u\")));\n    }\n    const scale = sizes.map((i, k) => divide(i, minPhysicalSize[k]));\n    if (!scale[2]) {\n      scale[2] = 1;\n    }\n    if (isEqual4(scale, [1, 1, 1])) {\n      return meta;\n    }\n    const matrix = new Matrix43().scale([...scale]);\n    const newMeta = __spreadValues({}, meta);\n    newMeta.metadata = __spreadProps(__spreadValues({}, newMeta.metadata), {\n      transform: { matrix: matrix.toArray() }\n    });\n    return newMeta;\n  });\n  return imageMetaWithTransform;\n}\nfunction initializeRasterLayersAndChannels(rasterLayers, rasterRenderLayers, usePhysicalSizeScaling) {\n  return __async(this, null, function* () {\n    const nextImageLoaders = [];\n    let nextImageMetaAndLayers = [];\n    const autoImageLayerDefPromises = [];\n    const loaders = yield Promise.all(rasterLayers.map((layer) => layer.loaderCreator()));\n    for (let i = 0; i < rasterLayers.length; i++) {\n      const layer = rasterLayers[i];\n      const loader = loaders[i];\n      nextImageLoaders[i] = loader;\n      nextImageMetaAndLayers[i] = layer;\n    }\n    if (usePhysicalSizeScaling) {\n      nextImageMetaAndLayers = getMetaWithTransformMatrices(nextImageMetaAndLayers, nextImageLoaders);\n    }\n    if (!rasterRenderLayers) {\n      const layerIndex = Math.floor(rasterLayers.length / 2);\n      const loader = nextImageLoaders[layerIndex];\n      const autoImageLayerDefPromise = initializeLayerChannels(loader).then((channels2) => {\n        var _a2, _b2, _c, _d, _e;\n        return Promise.resolve(__spreadProps(__spreadValues({\n          type: ((_b2 = (_a2 = nextImageMetaAndLayers[layerIndex]) == null ? void 0 : _a2.metadata) == null ? void 0 : _b2.isBitmask) ? \"bitmask\" : \"raster\",\n          index: layerIndex\n        }, DEFAULT_RASTER_LAYER_PROPS), {\n          channels: channels2.map((channel, j) => __spreadValues(__spreadValues({}, channel), nextImageMetaAndLayers[layerIndex].channels ? nextImageMetaAndLayers[layerIndex].channels[j] : [])),\n          modelMatrix: (_e = (_d = (_c = nextImageMetaAndLayers[layerIndex]) == null ? void 0 : _c.metadata) == null ? void 0 : _d.transform) == null ? void 0 : _e.matrix,\n          transparentColor: layerIndex > 0 ? [0, 0, 0] : null\n        }));\n      });\n      autoImageLayerDefPromises.push(autoImageLayerDefPromise);\n    } else {\n      const globalIndicesOfRenderLayers = rasterRenderLayers.map((imageName) => rasterLayers.findIndex((image) => image.name === imageName));\n      for (let i = 0; i < globalIndicesOfRenderLayers.length; i++) {\n        const layerIndex = globalIndicesOfRenderLayers[i];\n        const loader = nextImageLoaders[layerIndex];\n        const autoImageLayerDefPromise = initializeLayerChannels(loader).then((channels2) => {\n          var _a2, _b2, _c, _d, _e;\n          return Promise.resolve(__spreadProps(__spreadValues({\n            type: ((_b2 = (_a2 = nextImageMetaAndLayers[layerIndex]) == null ? void 0 : _a2.metadata) == null ? void 0 : _b2.isBitmask) ? \"bitmask\" : \"raster\",\n            index: layerIndex\n          }, DEFAULT_RASTER_LAYER_PROPS), {\n            channels: channels2.map((channel, j) => __spreadValues(__spreadValues({}, channel), nextImageMetaAndLayers[layerIndex].channels ? nextImageMetaAndLayers[layerIndex].channels[j] : [])),\n            domainType: \"Min/Max\",\n            modelMatrix: (_e = (_d = (_c = nextImageMetaAndLayers[layerIndex]) == null ? void 0 : _c.metadata) == null ? void 0 : _d.transform) == null ? void 0 : _e.matrix,\n            transparentColor: i > 0 ? [0, 0, 0] : null\n          }));\n        });\n        autoImageLayerDefPromises.push(autoImageLayerDefPromise);\n      }\n    }\n    const autoImageLayerDefs = yield Promise.all(autoImageLayerDefPromises);\n    return [autoImageLayerDefs, nextImageLoaders, nextImageMetaAndLayers];\n  });\n}\nfunction makeSpatialSubtitle({\n  observationsCount,\n  observationsLabel,\n  observationsPluralLabel,\n  subobservationsCount,\n  subobservationsLabel,\n  subobservationsPluralLabel,\n  locationsCount\n}) {\n  const parts = [];\n  if (subobservationsCount > 0) {\n    let part = `${subobservationsCount} ${pluralize(subobservationsLabel, subobservationsPluralLabel, subobservationsCount)}`;\n    if (locationsCount > 0) {\n      part += ` at ${shortNumber(locationsCount)} locations`;\n    }\n    parts.push(part);\n  }\n  if (observationsCount > 0) {\n    parts.push(`${observationsCount} ${pluralize(observationsLabel, observationsPluralLabel, observationsCount)}`);\n  }\n  return parts.join(\", \");\n}\nfunction getInitialSpatialTargets({\n  width,\n  height,\n  cells,\n  imageLayerLoaders,\n  useRaster,\n  use3d\n}) {\n  let initialTargetX = -Infinity;\n  let initialTargetY = -Infinity;\n  let initialTargetZ = -Infinity;\n  let initialZoom = -Infinity;\n  const zoomBackoff = use3d ? 1.5 : 0.1;\n  const cellValues = Object.values(cells);\n  if (imageLayerLoaders.length > 0 && useRaster) {\n    for (let i = 0; i < imageLayerLoaders.length; i += 1) {\n      const viewSize = { height, width };\n      const { target, zoom: newViewStateZoom } = getDefaultInitialViewState(imageLayerLoaders[i].data, viewSize, zoomBackoff, use3d);\n      if (target[0] > initialTargetX) {\n        initialTargetX = target[0];\n        initialZoom = newViewStateZoom;\n      }\n      if (target[1] > initialTargetY) {\n        initialTargetY = target[1];\n        initialZoom = newViewStateZoom;\n      }\n      if (target[2] > initialTargetZ) {\n        initialTargetZ = target[2];\n        initialZoom = newViewStateZoom;\n      } else {\n        initialTargetZ = null;\n      }\n    }\n  } else if (cellValues.length > 0 && cellValues[0].xy && !useRaster) {\n    const cellCoordinates = cellValues.map((c) => c.xy);\n    let xExtent = extent(cellCoordinates, (c) => c[0]);\n    let yExtent = extent(cellCoordinates, (c) => c[1]);\n    let xRange = xExtent[1] - xExtent[0];\n    let yRange = yExtent[1] - yExtent[0];\n    const getViewExtentFromPolygonExtents = (extents) => [\n      Math.min(...extents.map((i) => i[0])),\n      Math.max(...extents.map((i) => i[1]))\n    ];\n    if (xRange === 0) {\n      const polygonExtentsX = cellValues.map((cell) => extent(cell.poly, (i) => i[0]));\n      xExtent = getViewExtentFromPolygonExtents(polygonExtentsX);\n      xRange = xExtent[1] - xExtent[0];\n    }\n    if (yRange === 0) {\n      const polygonExtentsY = cellValues.map((cell) => extent(cell.poly, (i) => i[1]));\n      yExtent = getViewExtentFromPolygonExtents(polygonExtentsY);\n      yRange = yExtent[1] - yExtent[0];\n    }\n    initialTargetX = xExtent[0] + xRange / 2;\n    initialTargetY = yExtent[0] + yRange / 2;\n    initialTargetZ = null;\n    initialZoom = Math.log2(Math.min(width / xRange, height / yRange)) - zoomBackoff;\n  } else {\n    return {\n      initialTargetX: null,\n      initialTargetY: null,\n      initialTargetZ: null,\n      initialZoom: null\n    };\n  }\n  return {\n    initialTargetX,\n    initialTargetY,\n    initialZoom,\n    initialTargetZ\n  };\n}\nfunction getLayerLoaderTuple(data, use3d) {\n  const loader = Array.isArray(data) && data.length > 1 || !Array.isArray(data) ? data : data[0];\n  if (use3d) {\n    return [VolumeLayer, Array.isArray(loader) ? loader : [loader]];\n  }\n  const Layer2 = Array.isArray(data) && data.length > 1 ? MultiscaleImageLayer : ImageLayer;\n  return [Layer2, loader];\n}\nfunction renderSubBitmaskLayers(props) {\n  const {\n    bbox: {\n      left,\n      top,\n      right,\n      bottom\n    },\n    x,\n    y,\n    z\n  } = props.tile;\n  const {\n    data,\n    id,\n    loader\n  } = props;\n  if ([left, bottom, right, top].some((v) => v < 0) || !data) {\n    return null;\n  }\n  const base = loader[0];\n  const [height, width] = loader[0].shape.slice(-2);\n  const bounds = [\n    left,\n    data.height < base.tileSize ? height : bottom,\n    data.width < base.tileSize ? width : right,\n    top\n  ];\n  return new BitmaskLayer(props, {\n    channelData: data,\n    bounds,\n    id: `sub-layer-${bounds}-${id}`,\n    tileId: { x, y, z }\n  });\n}\n\n// src/components/shared-spatial-scatterplot/AbstractSpatialOrScatterplot.js\nimport React19, { PureComponent as PureComponent2 } from \"react\";\nimport DeckGL3, { OrthographicView as OrthographicView3, OrbitView as OrbitView2 } from \"deck.gl\";\n\n// src/components/shared-spatial-scatterplot/ToolMenu.js\nimport React18 from \"react\";\nimport { SELECTION_TYPE as SELECTION_TYPE2 } from \"nebula.gl\";\n\n// src/assets/tools/near_me.svg\nimport {\n  createElement\n} from \"react\";\nfunction SvgNearMe(props) {\n  return /* @__PURE__ */ createElement(\"svg\", __spreadValues({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\"\n  }, props), /* @__PURE__ */ createElement(\"path\", {\n    fill: \"none\",\n    d: \"M0 0h24v24H0V0z\"\n  }), /* @__PURE__ */ createElement(\"path\", {\n    d: \"M21 3L3 10.53v.98l6.84 2.65L12.48 21h.98L21 3z\"\n  }));\n}\nvar ReactComponent = SvgNearMe;\n\n// src/assets/tools/selection_rectangle.svg\nimport {\n  createElement as createElement2\n} from \"react\";\nfunction SvgSelectionRectangle(props) {\n  return /* @__PURE__ */ createElement2(\"svg\", __spreadValues({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\"\n  }, props), /* @__PURE__ */ createElement2(\"path\", {\n    d: \"       M19 19h2v2h-2v-2zm0-2h2v-2h-2v2z       M3 13h2v-2H3v2zm0 4h2v-2H3v2z       m0-8h2V7H3v2zm0-4h2V3H3v2z       m4 0h2V3H7v2zm8 16h2v-2h-2v2z       m-4 0h2v-2h-2v2z       m4 0h2v-2h-2v2z       m-8 0h2v-2H7v2z       m-4 0h2v-2H3v2z       M11 5h2v-2h-2v2z       M15 5h2v-2h-2v2z       M19 5h2v-2h-2v2z       M19 9h2v-2h-2v2z       M19 13h2v-2h-2v2z     \"\n  }));\n}\nvar ReactComponent2 = SvgSelectionRectangle;\n\n// src/assets/tools/selection_lasso.svg\nimport {\n  createElement as createElement3\n} from \"react\";\nfunction SvgSelectionLasso(props) {\n  return /* @__PURE__ */ createElement3(\"svg\", __spreadValues({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\"\n  }, props), /* @__PURE__ */ createElement3(\"g\", {\n    transform: \"translate(0,3)\"\n  }, /* @__PURE__ */ createElement3(\"path\", {\n    style: {\n      strokeWidth: 0.343565\n    },\n    d: \"M 23.942314,4.6958443 C 23.446206,1.8868581 19.727461,0 14.687364,0 13.437819,0 12.150138,0.11543779 10.859708,0.34287772 4.1629423,1.5250844 -0.58168816,5.2884937 0.05768601,8.911385 c 0.25355086,1.439193 1.35605049,2.63583 3.04638949,3.461072 -0.2569865,0.387198 -0.4074679,0.826617 -0.4074679,1.29524 0,1.337498 1.1863293,2.457176 2.7639791,2.728248 l -1.3615475,2.333149 c -0.1576963,0.271073 -0.066308,0.61876 0.2047647,0.776457 0.090014,0.05291 0.1886171,0.07799 0.2858459,0.07799 0.1951448,0 0.3851362,-0.100665 0.4912977,-0.281723 l 1.6803757,-2.88148 C 8.41868,16.20561 9.6895264,15.063601 9.6998333,13.683844 c 6.872e-4,-0.0055 0.00137,-0.01065 0.00137,-0.01615 0,-0.02336 -0.00344,-0.04569 -0.00481,-0.06837 1.1292977,-0.0213 2.2847067,-0.130211 3.4435507,-0.334975 6.69711,-1.181863 11.44174,-4.9456164 10.802366,-8.5685077 z M 3.83312,13.667353 c 0,-0.30749 0.1281497,-0.59849 0.3470005,-0.848261 0.1219655,0.04295 0.2456489,0.08383 0.3717372,0.123339 l 1.2234344,2.352045 C 4.6865351,15.149835 3.83312,14.46408 3.83312,13.667353 Z M 7.0141869,15.216144 6.0223152,13.309702 5.4008064,12.114097 c 0.121622,-0.03161 0.2477103,-0.05634 0.3772342,-0.07387 0.1367388,-0.0189 0.2772568,-0.02886 0.420867,-0.02886 0.5067581,0 0.980534,0.11956 1.3701366,0.317454 0.5696305,0.289968 0.9554538,0.750345 0.9904974,1.262944 0.00137,0.02542 0.0055,0.05016 0.0055,0.07593 0,0.698124 -0.6562089,1.310356 -1.5508518,1.548447 z m 5.9185921,-3.126441 c -1.217251,0.214728 -2.429691,0.323982 -3.6060571,0.324669 -0.5765018,-0.911821 -1.7614569,-1.53917 -3.1278143,-1.53917 -0.4717146,0 -0.921441,0.07593 -1.332001,0.211292 -0.3061162,0.100665 -0.5878394,0.237403 -0.8427645,0.39991 C 2.4598914,10.828133 1.4360682,9.8579062 1.2319907,8.7035283 0.72660678,5.8381974 5.2307418,2.5475333 11.067221,1.5175259 c 1.222061,-0.2161023 2.439998,-0.3246688 3.620143,-0.3246688 4.371863,0 7.694479,1.5250844 8.080645,3.7101568 0.505041,2.8653309 -3.998751,6.1566821 -9.83523,7.1866891 z\",\n    id: \"path10\"\n  })));\n}\nvar ReactComponent3 = SvgSelectionLasso;\n\n// src/components/shared-spatial-scatterplot/ToolMenu.js\nfunction IconButton3(props) {\n  const {\n    alt,\n    onClick,\n    isActive,\n    children\n  } = props;\n  const inactive = \"btn btn-outline-secondary mr-2 icon\";\n  const active = `${inactive} active`;\n  return /* @__PURE__ */ React18.createElement(\"button\", {\n    className: isActive ? active : inactive,\n    onClick,\n    type: \"button\",\n    title: alt\n  }, children);\n}\nfunction ToolMenu(props) {\n  const {\n    setActiveTool,\n    activeTool,\n    visibleTools = { pan: true, selectRectangle: true, selectLasso: true }\n  } = props;\n  return /* @__PURE__ */ React18.createElement(\"div\", {\n    className: \"tool\"\n  }, visibleTools.pan && /* @__PURE__ */ React18.createElement(IconButton3, {\n    alt: \"pointer tool\",\n    onClick: () => setActiveTool(null),\n    isActive: activeTool === null\n  }, /* @__PURE__ */ React18.createElement(ReactComponent, null)), visibleTools.selectRectangle ? /* @__PURE__ */ React18.createElement(IconButton3, {\n    alt: \"select rectangle\",\n    onClick: () => setActiveTool(SELECTION_TYPE2.RECTANGLE),\n    isActive: activeTool === SELECTION_TYPE2.RECTANGLE\n  }, /* @__PURE__ */ React18.createElement(ReactComponent2, null)) : null, visibleTools.selectLasso ? /* @__PURE__ */ React18.createElement(IconButton3, {\n    alt: \"select lasso\",\n    onClick: () => setActiveTool(SELECTION_TYPE2.POLYGON),\n    isActive: activeTool === SELECTION_TYPE2.POLYGON\n  }, /* @__PURE__ */ React18.createElement(ReactComponent3, null)) : null);\n}\n\n// src/components/shared-spatial-scatterplot/cursor.js\nvar getCursorWithTool = () => \"crosshair\";\nvar getCursor = (interactionState) => interactionState.isDragging ? \"grabbing\" : \"default\";\n\n// src/components/shared-spatial-scatterplot/AbstractSpatialOrScatterplot.js\nvar AbstractSpatialOrScatterplot = class extends PureComponent2 {\n  constructor(props) {\n    super(props);\n    this.state = {\n      gl: null,\n      tool: null\n    };\n    this.viewport = null;\n    this.onViewStateChange = this.onViewStateChange.bind(this);\n    this.onInitializeViewInfo = this.onInitializeViewInfo.bind(this);\n    this.onWebGLInitialized = this.onWebGLInitialized.bind(this);\n    this.onToolChange = this.onToolChange.bind(this);\n    this.onHover = this.onHover.bind(this);\n  }\n  onViewStateChange({ viewState: nextViewState }) {\n    const {\n      setViewState,\n      viewState,\n      layers,\n      spatialAxisFixed\n    } = this.props;\n    const use3d = layers == null ? void 0 : layers.some((l) => l.use3d);\n    setViewState(__spreadProps(__spreadValues({}, nextViewState), {\n      target: spatialAxisFixed && use3d ? viewState.target : nextViewState.target\n    }));\n  }\n  onInitializeViewInfo({ viewport }) {\n    this.viewport = viewport;\n  }\n  onWebGLInitialized(gl) {\n    this.setState({ gl });\n  }\n  onToolChange(tool) {\n    const { onToolChange: onToolChangeProp } = this.props;\n    this.setState({ tool });\n    if (onToolChangeProp) {\n      onToolChangeProp(tool);\n    }\n  }\n  getLayers() {\n    return [];\n  }\n  onHover(info) {\n    const {\n      coordinate,\n      sourceLayer: layer,\n      tile\n    } = info;\n    const {\n      setCellHighlight,\n      cellHighlight,\n      setComponentHover,\n      layers\n    } = this.props;\n    const hasBitmask = (layers || []).some((l) => l.type === \"bitmask\");\n    if (!setCellHighlight || !tile) {\n      return null;\n    }\n    if (!layer || !coordinate) {\n      if (cellHighlight && hasBitmask) {\n        setCellHighlight(null);\n      }\n      return null;\n    }\n    const { content, bbox, z } = tile;\n    if (!content) {\n      if (cellHighlight && hasBitmask) {\n        setCellHighlight(null);\n      }\n      return null;\n    }\n    const { data, width, height } = content;\n    const {\n      left,\n      right,\n      top,\n      bottom\n    } = bbox;\n    const bounds = [\n      left,\n      data.height < layer.tileSize ? height : bottom,\n      data.width < layer.tileSize ? width : right,\n      top\n    ];\n    if (!data) {\n      if (cellHighlight && hasBitmask) {\n        setCellHighlight(null);\n      }\n      return null;\n    }\n    if (layer.id.includes(\"bitmask\")) {\n      const layerZoomScale = Math.max(1, __pow(2, Math.round(-z)));\n      const dataCoords = [\n        Math.floor((coordinate[0] - bounds[0]) / layerZoomScale),\n        Math.floor((coordinate[1] - bounds[3]) / layerZoomScale)\n      ];\n      const coords = dataCoords[1] * width + dataCoords[0];\n      const hoverData = data.map((d) => d[coords]);\n      const cellId = hoverData.find((i) => i > 0);\n      if (cellId !== Number(cellHighlight)) {\n        if (setComponentHover) {\n          setComponentHover();\n        }\n        setCellHighlight(cellId ? String(cellId) : null);\n      }\n    }\n  }\n  viewInfoDidUpdate(getCellCoords) {\n    const { updateViewInfo, cells, uuid } = this.props;\n    const { viewport } = this;\n    if (updateViewInfo && viewport) {\n      updateViewInfo({\n        uuid,\n        project: (cellId) => {\n          const cell = cells[cellId];\n          try {\n            const [positionX, positionY] = getCellCoords(cell);\n            return viewport.project([positionX, positionY]);\n          } catch (e) {\n            return [null, null];\n          }\n        }\n      });\n    }\n  }\n  componentDidUpdate() {\n  }\n  render() {\n    const {\n      deckRef,\n      viewState,\n      uuid,\n      layers: layerProps\n    } = this.props;\n    const { gl, tool } = this.state;\n    const layers = this.getLayers();\n    const use3d = (layerProps || []).some((l) => l.use3d);\n    const showCellSelectionTools = this.cellsLayer !== null || this.cellsEntries.length && this.cellsEntries[0][1].xy;\n    const showPanTool = this.cellsLayer !== null || layerProps.findIndex((l) => l.type === \"bitmask\" || l.type === \"raster\") >= 0;\n    const useDevicePixels = this.cellsEntries.length < 1e5 && !use3d;\n    return /* @__PURE__ */ React19.createElement(React19.Fragment, null, /* @__PURE__ */ React19.createElement(ToolMenu, {\n      activeTool: tool,\n      setActiveTool: this.onToolChange,\n      visibleTools: {\n        pan: showPanTool,\n        selectRectangle: showCellSelectionTools,\n        selectLasso: showCellSelectionTools\n      }\n    }), /* @__PURE__ */ React19.createElement(DeckGL3, {\n      id: `deckgl-overlay-${uuid}`,\n      ref: deckRef,\n      views: [\n        use3d ? new OrbitView2({ id: \"orbit\", controller: true, orbitAxis: \"Y\" }) : new OrthographicView3({\n          id: \"ortho\"\n        })\n      ],\n      layers: gl && viewState.target.slice(0, 2).every((i) => typeof i === \"number\") ? layers : [],\n      glOptions: DEFAULT_GL_OPTIONS,\n      onWebGLInitialized: this.onWebGLInitialized,\n      onViewStateChange: this.onViewStateChange,\n      viewState,\n      useDevicePixels,\n      controller: tool ? { dragPan: false } : true,\n      getCursor: tool ? getCursorWithTool : getCursor,\n      onHover: this.onHover\n    }, this.onInitializeViewInfo));\n  }\n};\n\n// src/components/shared-spatial-scatterplot/quadtree.js\nimport { quadtree } from \"d3-quadtree\";\nfunction createCellsQuadTree(cellsEntries, getCellCoords) {\n  if (!cellsEntries || !cellsEntries.length || !getCellCoords(cellsEntries[0][1])) {\n    return null;\n  }\n  const tree = quadtree().x((d) => getCellCoords(d[1])[0]).y((d) => getCellCoords(d[1])[1]).addAll(cellsEntries);\n  return tree;\n}\n\n// src/layer-extensions/ScaledExpressionExtension/ScaledExpressionExtension.js\nimport GL5 from \"@luma.gl/constants\";\nimport { LayerExtension } from \"@deck.gl/core\";\n\n// src/layer-extensions/ScaledExpressionExtension/shader-module.js\nvar vs4 = \"\\nvec4 plasma (float x_1648624884) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0.050980392156862744,0.03137254901960784,0.5294117647058824,1);\\n  const float e1 = 0.13;\\n  const vec4 v1 = vec4(0.29411764705882354,0.011764705882352941,0.6313725490196078,1);\\n  const float e2 = 0.25;\\n  const vec4 v2 = vec4(0.49019607843137253,0.011764705882352941,0.6588235294117647,1);\\n  const float e3 = 0.38;\\n  const vec4 v3 = vec4(0.6588235294117647,0.13333333333333333,0.5882352941176471,1);\\n  const float e4 = 0.5;\\n  const vec4 v4 = vec4(0.796078431372549,0.27450980392156865,0.4745098039215686,1);\\n  const float e5 = 0.63;\\n  const vec4 v5 = vec4(0.8980392156862745,0.4196078431372549,0.36470588235294116,1);\\n  const float e6 = 0.75;\\n  const vec4 v6 = vec4(0.9725490196078431,0.5803921568627451,0.2549019607843137,1);\\n  const float e7 = 0.88;\\n  const vec4 v7 = vec4(0.9921568627450981,0.7647058823529411,0.1568627450980392,1);\\n  const float e8 = 1.0;\\n  const vec4 v8 = vec4(0.9411764705882353,0.9764705882352941,0.12941176470588237,1);\\n  float a0 = smoothstep(e0,e1,x_1648624884);\\n  float a1 = smoothstep(e1,e2,x_1648624884);\\n  float a2 = smoothstep(e2,e3,x_1648624884);\\n  float a3 = smoothstep(e3,e4,x_1648624884);\\n  float a4 = smoothstep(e4,e5,x_1648624884);\\n  float a5 = smoothstep(e5,e6,x_1648624884);\\n  float a6 = smoothstep(e6,e7,x_1648624884);\\n  float a7 = smoothstep(e7,e8,x_1648624884);\\n  return max(mix(v0,v1,a0)*step(e0,x_1648624884)*step(x_1648624884,e1),\\n    max(mix(v1,v2,a1)*step(e1,x_1648624884)*step(x_1648624884,e2),\\n    max(mix(v2,v3,a2)*step(e2,x_1648624884)*step(x_1648624884,e3),\\n    max(mix(v3,v4,a3)*step(e3,x_1648624884)*step(x_1648624884,e4),\\n    max(mix(v4,v5,a4)*step(e4,x_1648624884)*step(x_1648624884,e5),\\n    max(mix(v5,v6,a5)*step(e5,x_1648624884)*step(x_1648624884,e6),\\n    max(mix(v6,v7,a6)*step(e6,x_1648624884)*step(x_1648624884,e7),mix(v7,v8,a7)*step(e7,x_1648624884)*step(x_1648624884,e8)\\n  )))))));\\n}\\n\\nvec4 viridis (float x_686877309) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0.26666666666666666,0.00392156862745098,0.32941176470588235,1);\\n  const float e1 = 0.13;\\n  const vec4 v1 = vec4(0.2784313725490196,0.17254901960784313,0.47843137254901963,1);\\n  const float e2 = 0.25;\\n  const vec4 v2 = vec4(0.23137254901960785,0.3176470588235294,0.5450980392156862,1);\\n  const float e3 = 0.38;\\n  const vec4 v3 = vec4(0.17254901960784313,0.44313725490196076,0.5568627450980392,1);\\n  const float e4 = 0.5;\\n  const vec4 v4 = vec4(0.12941176470588237,0.5647058823529412,0.5529411764705883,1);\\n  const float e5 = 0.63;\\n  const vec4 v5 = vec4(0.15294117647058825,0.6784313725490196,0.5058823529411764,1);\\n  const float e6 = 0.75;\\n  const vec4 v6 = vec4(0.3607843137254902,0.7843137254901961,0.38823529411764707,1);\\n  const float e7 = 0.88;\\n  const vec4 v7 = vec4(0.6666666666666666,0.8627450980392157,0.19607843137254902,1);\\n  const float e8 = 1.0;\\n  const vec4 v8 = vec4(0.9921568627450981,0.9058823529411765,0.1450980392156863,1);\\n  float a0 = smoothstep(e0,e1,x_686877309);\\n  float a1 = smoothstep(e1,e2,x_686877309);\\n  float a2 = smoothstep(e2,e3,x_686877309);\\n  float a3 = smoothstep(e3,e4,x_686877309);\\n  float a4 = smoothstep(e4,e5,x_686877309);\\n  float a5 = smoothstep(e5,e6,x_686877309);\\n  float a6 = smoothstep(e6,e7,x_686877309);\\n  float a7 = smoothstep(e7,e8,x_686877309);\\n  return max(mix(v0,v1,a0)*step(e0,x_686877309)*step(x_686877309,e1),\\n    max(mix(v1,v2,a1)*step(e1,x_686877309)*step(x_686877309,e2),\\n    max(mix(v2,v3,a2)*step(e2,x_686877309)*step(x_686877309,e3),\\n    max(mix(v3,v4,a3)*step(e3,x_686877309)*step(x_686877309,e4),\\n    max(mix(v4,v5,a4)*step(e4,x_686877309)*step(x_686877309,e5),\\n    max(mix(v5,v6,a5)*step(e5,x_686877309)*step(x_686877309,e6),\\n    max(mix(v6,v7,a6)*step(e6,x_686877309)*step(x_686877309,e7),mix(v7,v8,a7)*step(e7,x_686877309)*step(x_686877309,e8)\\n  )))))));\\n}\\n\\nvec4 greys (float x_3692066534) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0,0,0,1);\\n  const float e1 = 1.0;\\n  const vec4 v1 = vec4(1,1,1,1);\\n  float a0 = smoothstep(e0,e1,x_3692066534);\\n  return mix(v0,v1,a0)*step(e0,x_3692066534)*step(x_3692066534,e1);\\n}\\n\\nvec4 magma (float x_652973032) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0,0,0.01568627450980392,1);\\n  const float e1 = 0.13;\\n  const vec4 v1 = vec4(0.10980392156862745,0.06274509803921569,0.26666666666666666,1);\\n  const float e2 = 0.25;\\n  const vec4 v2 = vec4(0.30980392156862746,0.07058823529411765,0.4823529411764706,1);\\n  const float e3 = 0.38;\\n  const vec4 v3 = vec4(0.5058823529411764,0.1450980392156863,0.5058823529411764,1);\\n  const float e4 = 0.5;\\n  const vec4 v4 = vec4(0.7098039215686275,0.21176470588235294,0.47843137254901963,1);\\n  const float e5 = 0.63;\\n  const vec4 v5 = vec4(0.8980392156862745,0.3137254901960784,0.39215686274509803,1);\\n  const float e6 = 0.75;\\n  const vec4 v6 = vec4(0.984313725490196,0.5294117647058824,0.3803921568627451,1);\\n  const float e7 = 0.88;\\n  const vec4 v7 = vec4(0.996078431372549,0.7607843137254902,0.5294117647058824,1);\\n  const float e8 = 1.0;\\n  const vec4 v8 = vec4(0.9882352941176471,0.9921568627450981,0.7490196078431373,1);\\n  float a0 = smoothstep(e0,e1,x_652973032);\\n  float a1 = smoothstep(e1,e2,x_652973032);\\n  float a2 = smoothstep(e2,e3,x_652973032);\\n  float a3 = smoothstep(e3,e4,x_652973032);\\n  float a4 = smoothstep(e4,e5,x_652973032);\\n  float a5 = smoothstep(e5,e6,x_652973032);\\n  float a6 = smoothstep(e6,e7,x_652973032);\\n  float a7 = smoothstep(e7,e8,x_652973032);\\n  return max(mix(v0,v1,a0)*step(e0,x_652973032)*step(x_652973032,e1),\\n    max(mix(v1,v2,a1)*step(e1,x_652973032)*step(x_652973032,e2),\\n    max(mix(v2,v3,a2)*step(e2,x_652973032)*step(x_652973032,e3),\\n    max(mix(v3,v4,a3)*step(e3,x_652973032)*step(x_652973032,e4),\\n    max(mix(v4,v5,a4)*step(e4,x_652973032)*step(x_652973032,e5),\\n    max(mix(v5,v6,a5)*step(e5,x_652973032)*step(x_652973032,e6),\\n    max(mix(v6,v7,a6)*step(e6,x_652973032)*step(x_652973032,e7),mix(v7,v8,a7)*step(e7,x_652973032)*step(x_652973032,e8)\\n  )))))));\\n}\\n\\nvec4 jet (float x_799389509) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0,0,0.5137254901960784,1);\\n  const float e1 = 0.125;\\n  const vec4 v1 = vec4(0,0.23529411764705882,0.6666666666666666,1);\\n  const float e2 = 0.375;\\n  const vec4 v2 = vec4(0.0196078431372549,1,1,1);\\n  const float e3 = 0.625;\\n  const vec4 v3 = vec4(1,1,0,1);\\n  const float e4 = 0.875;\\n  const vec4 v4 = vec4(0.9803921568627451,0,0,1);\\n  const float e5 = 1.0;\\n  const vec4 v5 = vec4(0.5019607843137255,0,0,1);\\n  float a0 = smoothstep(e0,e1,x_799389509);\\n  float a1 = smoothstep(e1,e2,x_799389509);\\n  float a2 = smoothstep(e2,e3,x_799389509);\\n  float a3 = smoothstep(e3,e4,x_799389509);\\n  float a4 = smoothstep(e4,e5,x_799389509);\\n  return max(mix(v0,v1,a0)*step(e0,x_799389509)*step(x_799389509,e1),\\n    max(mix(v1,v2,a1)*step(e1,x_799389509)*step(x_799389509,e2),\\n    max(mix(v2,v3,a2)*step(e2,x_799389509)*step(x_799389509,e3),\\n    max(mix(v3,v4,a3)*step(e3,x_799389509)*step(x_799389509,e4),mix(v4,v5,a4)*step(e4,x_799389509)*step(x_799389509,e5)\\n  ))));\\n}\\n\\nvec4 bone (float x_1404936397) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0,0,0,1);\\n  const float e1 = 0.376;\\n  const vec4 v1 = vec4(0.32941176470588235,0.32941176470588235,0.4549019607843137,1);\\n  const float e2 = 0.753;\\n  const vec4 v2 = vec4(0.6627450980392157,0.7843137254901961,0.7843137254901961,1);\\n  const float e3 = 1.0;\\n  const vec4 v3 = vec4(1,1,1,1);\\n  float a0 = smoothstep(e0,e1,x_1404936397);\\n  float a1 = smoothstep(e1,e2,x_1404936397);\\n  float a2 = smoothstep(e2,e3,x_1404936397);\\n  return max(mix(v0,v1,a0)*step(e0,x_1404936397)*step(x_1404936397,e1),\\n    max(mix(v1,v2,a1)*step(e1,x_1404936397)*step(x_1404936397,e2),mix(v2,v3,a2)*step(e2,x_1404936397)*step(x_1404936397,e3)\\n  ));\\n}\\n\\nvec4 copper (float x_41650866) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0,0,0,1);\\n  const float e1 = 0.804;\\n  const vec4 v1 = vec4(1,0.6274509803921569,0.4,1);\\n  const float e2 = 1.0;\\n  const vec4 v2 = vec4(1,0.7803921568627451,0.4980392156862745,1);\\n  float a0 = smoothstep(e0,e1,x_41650866);\\n  float a1 = smoothstep(e1,e2,x_41650866);\\n  return max(mix(v0,v1,a0)*step(e0,x_41650866)*step(x_41650866,e1),mix(v1,v2,a1)*step(e1,x_41650866)*step(x_41650866,e2)\\n  );\\n}\\n\\nvec4 density (float x_681601952) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0.21176470588235294,0.054901960784313725,0.1411764705882353,1);\\n  const float e1 = 0.13;\\n  const vec4 v1 = vec4(0.34901960784313724,0.09019607843137255,0.3137254901960784,1);\\n  const float e2 = 0.25;\\n  const vec4 v2 = vec4(0.43137254901960786,0.17647058823529413,0.5176470588235295,1);\\n  const float e3 = 0.38;\\n  const vec4 v3 = vec4(0.47058823529411764,0.30196078431372547,0.6980392156862745,1);\\n  const float e4 = 0.5;\\n  const vec4 v4 = vec4(0.47058823529411764,0.44313725490196076,0.8352941176470589,1);\\n  const float e5 = 0.63;\\n  const vec4 v5 = vec4(0.45098039215686275,0.592156862745098,0.8941176470588236,1);\\n  const float e6 = 0.75;\\n  const vec4 v6 = vec4(0.5254901960784314,0.7254901960784313,0.8901960784313725,1);\\n  const float e7 = 0.88;\\n  const vec4 v7 = vec4(0.6941176470588235,0.8392156862745098,0.8901960784313725,1);\\n  const float e8 = 1.0;\\n  const vec4 v8 = vec4(0.9019607843137255,0.9450980392156862,0.9450980392156862,1);\\n  float a0 = smoothstep(e0,e1,x_681601952);\\n  float a1 = smoothstep(e1,e2,x_681601952);\\n  float a2 = smoothstep(e2,e3,x_681601952);\\n  float a3 = smoothstep(e3,e4,x_681601952);\\n  float a4 = smoothstep(e4,e5,x_681601952);\\n  float a5 = smoothstep(e5,e6,x_681601952);\\n  float a6 = smoothstep(e6,e7,x_681601952);\\n  float a7 = smoothstep(e7,e8,x_681601952);\\n  return max(mix(v0,v1,a0)*step(e0,x_681601952)*step(x_681601952,e1),\\n    max(mix(v1,v2,a1)*step(e1,x_681601952)*step(x_681601952,e2),\\n    max(mix(v2,v3,a2)*step(e2,x_681601952)*step(x_681601952,e3),\\n    max(mix(v3,v4,a3)*step(e3,x_681601952)*step(x_681601952,e4),\\n    max(mix(v4,v5,a4)*step(e4,x_681601952)*step(x_681601952,e5),\\n    max(mix(v5,v6,a5)*step(e5,x_681601952)*step(x_681601952,e6),\\n    max(mix(v6,v7,a6)*step(e6,x_681601952)*step(x_681601952,e7),mix(v7,v8,a7)*step(e7,x_681601952)*step(x_681601952,e8)\\n  )))))));\\n}\\n\\nvec4 inferno (float x_902288871) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0,0,0.01568627450980392,1);\\n  const float e1 = 0.13;\\n  const vec4 v1 = vec4(0.12156862745098039,0.047058823529411764,0.2823529411764706,1);\\n  const float e2 = 0.25;\\n  const vec4 v2 = vec4(0.3333333333333333,0.058823529411764705,0.42745098039215684,1);\\n  const float e3 = 0.38;\\n  const vec4 v3 = vec4(0.5333333333333333,0.13333333333333333,0.41568627450980394,1);\\n  const float e4 = 0.5;\\n  const vec4 v4 = vec4(0.7294117647058823,0.21176470588235294,0.3333333333333333,1);\\n  const float e5 = 0.63;\\n  const vec4 v5 = vec4(0.8901960784313725,0.34901960784313724,0.2,1);\\n  const float e6 = 0.75;\\n  const vec4 v6 = vec4(0.9764705882352941,0.5490196078431373,0.0392156862745098,1);\\n  const float e7 = 0.88;\\n  const vec4 v7 = vec4(0.9764705882352941,0.788235294117647,0.19607843137254902,1);\\n  const float e8 = 1.0;\\n  const vec4 v8 = vec4(0.9882352941176471,1,0.6431372549019608,1);\\n  float a0 = smoothstep(e0,e1,x_902288871);\\n  float a1 = smoothstep(e1,e2,x_902288871);\\n  float a2 = smoothstep(e2,e3,x_902288871);\\n  float a3 = smoothstep(e3,e4,x_902288871);\\n  float a4 = smoothstep(e4,e5,x_902288871);\\n  float a5 = smoothstep(e5,e6,x_902288871);\\n  float a6 = smoothstep(e6,e7,x_902288871);\\n  float a7 = smoothstep(e7,e8,x_902288871);\\n  return max(mix(v0,v1,a0)*step(e0,x_902288871)*step(x_902288871,e1),\\n    max(mix(v1,v2,a1)*step(e1,x_902288871)*step(x_902288871,e2),\\n    max(mix(v2,v3,a2)*step(e2,x_902288871)*step(x_902288871,e3),\\n    max(mix(v3,v4,a3)*step(e3,x_902288871)*step(x_902288871,e4),\\n    max(mix(v4,v5,a4)*step(e4,x_902288871)*step(x_902288871,e5),\\n    max(mix(v5,v6,a5)*step(e5,x_902288871)*step(x_902288871,e6),\\n    max(mix(v6,v7,a6)*step(e6,x_902288871)*step(x_902288871,e7),mix(v7,v8,a7)*step(e7,x_902288871)*step(x_902288871,e8)\\n  )))))));\\n}\\n\\nvec4 cool (float x_2444426143) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0.49019607843137253,0,0.7019607843137254,1);\\n  const float e1 = 0.13;\\n  const vec4 v1 = vec4(0.4549019607843137,0,0.8549019607843137,1);\\n  const float e2 = 0.25;\\n  const vec4 v2 = vec4(0.3843137254901961,0.2901960784313726,0.9294117647058824,1);\\n  const float e3 = 0.38;\\n  const vec4 v3 = vec4(0.26666666666666666,0.5725490196078431,0.9058823529411765,1);\\n  const float e4 = 0.5;\\n  const vec4 v4 = vec4(0,0.8,0.7725490196078432,1);\\n  const float e5 = 0.63;\\n  const vec4 v5 = vec4(0,0.9686274509803922,0.5725490196078431,1);\\n  const float e6 = 0.75;\\n  const vec4 v6 = vec4(0,1,0.34509803921568627,1);\\n  const float e7 = 0.88;\\n  const vec4 v7 = vec4(0.1568627450980392,1,0.03137254901960784,1);\\n  const float e8 = 1.0;\\n  const vec4 v8 = vec4(0.5764705882352941,1,0,1);\\n  float a0 = smoothstep(e0,e1,x_2444426143);\\n  float a1 = smoothstep(e1,e2,x_2444426143);\\n  float a2 = smoothstep(e2,e3,x_2444426143);\\n  float a3 = smoothstep(e3,e4,x_2444426143);\\n  float a4 = smoothstep(e4,e5,x_2444426143);\\n  float a5 = smoothstep(e5,e6,x_2444426143);\\n  float a6 = smoothstep(e6,e7,x_2444426143);\\n  float a7 = smoothstep(e7,e8,x_2444426143);\\n  return max(mix(v0,v1,a0)*step(e0,x_2444426143)*step(x_2444426143,e1),\\n    max(mix(v1,v2,a1)*step(e1,x_2444426143)*step(x_2444426143,e2),\\n    max(mix(v2,v3,a2)*step(e2,x_2444426143)*step(x_2444426143,e3),\\n    max(mix(v3,v4,a3)*step(e3,x_2444426143)*step(x_2444426143,e4),\\n    max(mix(v4,v5,a4)*step(e4,x_2444426143)*step(x_2444426143,e5),\\n    max(mix(v5,v6,a5)*step(e5,x_2444426143)*step(x_2444426143,e6),\\n    max(mix(v6,v7,a6)*step(e6,x_2444426143)*step(x_2444426143,e7),mix(v7,v8,a7)*step(e7,x_2444426143)*step(x_2444426143,e8)\\n  )))))));\\n}\\n\\nvec4 hot (float x_1123650753) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0,0,0,1);\\n  const float e1 = 0.3;\\n  const vec4 v1 = vec4(0.9019607843137255,0,0,1);\\n  const float e2 = 0.6;\\n  const vec4 v2 = vec4(1,0.8235294117647058,0,1);\\n  const float e3 = 1.0;\\n  const vec4 v3 = vec4(1,1,1,1);\\n  float a0 = smoothstep(e0,e1,x_1123650753);\\n  float a1 = smoothstep(e1,e2,x_1123650753);\\n  float a2 = smoothstep(e2,e3,x_1123650753);\\n  return max(mix(v0,v1,a0)*step(e0,x_1123650753)*step(x_1123650753,e1),\\n    max(mix(v1,v2,a1)*step(e1,x_1123650753)*step(x_1123650753,e2),mix(v2,v3,a2)*step(e2,x_1123650753)*step(x_1123650753,e3)\\n  ));\\n}\\n\\nvec4 spring (float x_3460271019) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(1,0,1,1);\\n  const float e1 = 1.0;\\n  const vec4 v1 = vec4(1,1,0,1);\\n  float a0 = smoothstep(e0,e1,x_3460271019);\\n  return mix(v0,v1,a0)*step(e0,x_3460271019)*step(x_3460271019,e1);\\n}\\n\\nvec4 summer (float x_1787574999) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0,0.5019607843137255,0.4,1);\\n  const float e1 = 1.0;\\n  const vec4 v1 = vec4(1,1,0.4,1);\\n  float a0 = smoothstep(e0,e1,x_1787574999);\\n  return mix(v0,v1,a0)*step(e0,x_1787574999)*step(x_1787574999,e1);\\n}\\n\\nvec4 autumn (float x_204634793) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(1,0,0,1);\\n  const float e1 = 1.0;\\n  const vec4 v1 = vec4(1,1,0,1);\\n  float a0 = smoothstep(e0,e1,x_204634793);\\n  return mix(v0,v1,a0)*step(e0,x_204634793)*step(x_204634793,e1);\\n}\\n\\nvec4 winter (float x_4071283602) {\\n  const float e0 = 0.0;\\n  const vec4 v0 = vec4(0,0,1,1);\\n  const float e1 = 1.0;\\n  const vec4 v1 = vec4(0,1,0.5019607843137255,1);\\n  float a0 = smoothstep(e0,e1,x_4071283602);\\n  return mix(v0,v1,a0)*step(e0,x_4071283602)*step(x_4071283602,e1);\\n}\\n\\n// Custom attributes for Vitessce:\\nattribute float expressionValue;\\n\\n// Custom uniforms for Vitessce:\\nuniform vec2 uColorScaleRange;\\nuniform bool uIsExpressionMode;\\n\\n\";\nvar inject = {\n  \"vs:DECKGL_FILTER_COLOR\": \"\\n    if(uIsExpressionMode) {\\n      float normalizedExpressionValue = expressionValue / 255.0;\\n      float scaledExpressionValue = (normalizedExpressionValue - uColorScaleRange[0]) / max(0.005, (uColorScaleRange[1] - uColorScaleRange[0]));\\n      color.rgb = COLORMAP_FUNC(clamp(scaledExpressionValue, 0.0, 1.0)).rgb;\\n    }\\n  \"\n};\nvar shader_module_default = {\n  name: \"scaled-expression\",\n  vs: vs4,\n  inject\n};\n\n// src/layer-extensions/ScaledExpressionExtension/ScaledExpressionExtension.js\nvar defaultProps6 = {\n  colormap: { type: \"string\", value: GLSL_COLORMAP_DEFAULT, compare: true },\n  colorScaleLo: { type: \"number\", value: 0, compare: true },\n  colorScaleHi: { type: \"number\", value: 1, compare: true },\n  isExpressionMode: false,\n  getExpressionValue: { type: \"accessor\", value: 0 },\n  getSelectionState: { type: \"accessor\", value: 0 }\n};\nvar ScaledExpressionExtension = class extends LayerExtension {\n  getShaders() {\n    const { colormap } = this.props;\n    return {\n      modules: [shader_module_default],\n      defines: {\n        [COLORMAP_SHADER_PLACEHOLDER]: GLSL_COLORMAPS.includes(colormap) ? colormap : GLSL_COLORMAP_DEFAULT\n      }\n    };\n  }\n  updateState({ props, oldProps }) {\n    var _a2, _b2, _c, _d;\n    if (props.colormap !== oldProps.colormap) {\n      const { gl } = this.context;\n      if (this.state.model) {\n        (_a2 = this.state.model) == null ? void 0 : _a2.delete();\n        this.state.model = this._getModel(gl);\n      } else {\n        if (this.state.models) {\n          (_b2 = this.state.models) == null ? void 0 : _b2.forEach((model) => model == null ? void 0 : model.delete());\n        }\n        if (this.state.topModel) {\n          (_c = this.state.topModel) == null ? void 0 : _c.delete();\n        }\n        if (this.state.sideModel) {\n          (_d = this.state.sideModel) == null ? void 0 : _d.delete();\n        }\n        if (this._getModels) {\n          this.setState(this._getModels(this.context.gl));\n        }\n      }\n      const attributeManager = this.getAttributeManager();\n      if (attributeManager) {\n        this.getAttributeManager().invalidateAll();\n      }\n    }\n  }\n  initializeState() {\n    const layer = this.getCurrentLayer();\n    if (layer.isComposite) {\n      return;\n    }\n    const attributeManager = this.getAttributeManager();\n    if (attributeManager) {\n      attributeManager.add({\n        expressionValue: {\n          type: GL5.FLOAT,\n          size: 1,\n          transition: true,\n          accessor: \"getExpressionValue\",\n          defaultValue: 1,\n          divisor: Object.values(attributeManager.attributes)[0].settings.divisor\n        }\n      });\n    }\n  }\n  draw() {\n    const {\n      colorScaleLo,\n      colorScaleHi,\n      isExpressionMode\n    } = this.props;\n    const {\n      topModel,\n      sideModel,\n      models,\n      model\n    } = this.state;\n    const uniforms = {\n      uColorScaleRange: [colorScaleLo, colorScaleHi],\n      uIsExpressionMode: isExpressionMode\n    };\n    model == null ? void 0 : model.setUniforms(uniforms);\n    models == null ? void 0 : models.forEach((m) => m.setUniforms(uniforms));\n    topModel == null ? void 0 : topModel.setUniforms(uniforms);\n    sideModel == null ? void 0 : sideModel.setUniforms(uniforms);\n  }\n};\nScaledExpressionExtension.extensionName = \"ScaledExpressionExtension\";\nScaledExpressionExtension.defaultProps = defaultProps6;\n\n// src/layer-extensions/ScaledExpressionExtension/index.js\nvar ScaledExpressionExtension_default = ScaledExpressionExtension;\n\n// src/layer-extensions/SelectionExtension/SelectionExtension.js\nimport GL6 from \"@luma.gl/constants\";\nimport { LayerExtension as LayerExtension2 } from \"@deck.gl/core\";\n\n// src/layer-extensions/SelectionExtension/shader-module.js\nvar vs5 = \"\\nattribute float isSelected;\\n\";\nvar inject2 = {\n  \"vs:DECKGL_FILTER_GL_POSITION\": \"\\n    position.z += (1. - isSelected) * .00005; // Add a small z offset for unselected points in the positive direction i.e into the screen.\\n  \",\n  \"fs:#main-start\": \" // Gets rid of bad border effects (active after deck.gl 8.5): https://github.com/visgl/deck.gl/pull/6081\\n    float distToCenterNew = length(unitPosition) * outerRadiusPixels;\\n    float inCircleNew = step(distToCenterNew, outerRadiusPixels);\\n    if (inCircleNew == 0.0) {\\n      discard;\\n    }\\n  \"\n};\nvar shader_module_default2 = {\n  name: \"selection\",\n  vs: vs5,\n  inject: inject2\n};\n\n// src/layer-extensions/SelectionExtension/SelectionExtension.js\nvar SelectionExtension = class extends LayerExtension2 {\n  getShaders() {\n    return {\n      modules: [shader_module_default2]\n    };\n  }\n  initializeState(context, extension) {\n    const attributeManager = this.getAttributeManager();\n    if (attributeManager) {\n      attributeManager.add({\n        isSelected: {\n          type: GL6.FLOAT,\n          size: 1,\n          transition: true,\n          accessor: \"getCellIsSelected\",\n          defaultValue: 1,\n          divisor: Number(extension.opts.instanced)\n        }\n      });\n    }\n  }\n};\nSelectionExtension.extensionName = \"SelectionExtension\";\n\n// src/layer-extensions/SelectionExtension/index.js\nvar SelectionExtension_default = SelectionExtension;\n\n// src/components/spatial/Spatial.js\nvar CELLS_LAYER_ID = \"cells-layer\";\nvar MOLECULES_LAYER_ID = \"molecules-layer\";\nvar NEIGHBORHOODS_LAYER_ID = \"neighborhoods-layer\";\nvar defaultGetCellCoords = (cell) => cell.xy;\nvar makeDefaultGetCellPolygon = (radius) => (cellEntry) => {\n  var _a2;\n  const cell = cellEntry[1];\n  return ((_a2 = cell.poly) == null ? void 0 : _a2.length) ? cell.poly : square(cell.xy[0], cell.xy[1], radius);\n};\nvar makeDefaultGetCellColors = (cellColors, theme) => (cellEntry) => {\n  const [r, g, b, a] = cellColors && cellColors.get(cellEntry[0]) || getDefaultColor(theme);\n  return [r, g, b, 255 * (a || 1)];\n};\nvar makeDefaultGetCellIsSelected = (cellSelection) => {\n  if (cellSelection) {\n    const cellSelectionSet = new Set(cellSelection);\n    return (cellEntry) => cellSelectionSet.has(cellEntry[0]) ? 1 : 0;\n  }\n  return () => 0;\n};\nvar Spatial = class extends AbstractSpatialOrScatterplot {\n  constructor(props) {\n    super(props);\n    this.cellsEntries = [];\n    this.moleculesEntries = [];\n    this.cellsQuadTree = null;\n    this.cellsLayer = null;\n    this.moleculesLayer = null;\n    this.neighborhoodsLayer = null;\n    this.imageLayers = [];\n    this.layerLoaderSelections = {};\n    this.randomColorData = {\n      data: new Uint8Array(2048 * 2048 * 3).map((_, j) => j < 4 ? 0 : Math.round(255 * Math.random())),\n      height: 2048,\n      width: 2048\n    };\n    this.color = __spreadValues({}, this.randomColorData);\n    this.expression = {\n      data: new Uint8Array(2048 * 2048),\n      height: 2048,\n      width: 2048\n    };\n    this.onUpdateCellsData();\n    this.onUpdateCellsLayer();\n    this.onUpdateMoleculesData();\n    this.onUpdateMoleculesLayer();\n    this.onUpdateNeighborhoodsData();\n    this.onUpdateNeighborhoodsLayer();\n    this.onUpdateImages();\n  }\n  createCellsLayer(layerDef) {\n    const {\n      radius,\n      stroked,\n      visible,\n      opacity\n    } = layerDef;\n    const { cellsEntries } = this;\n    const {\n      theme,\n      cellFilter,\n      cellSelection,\n      setCellHighlight,\n      setComponentHover,\n      getCellIsSelected = makeDefaultGetCellIsSelected(cellsEntries.length === cellSelection.length ? null : cellSelection),\n      cellColors,\n      getCellColor = makeDefaultGetCellColors(cellColors, theme),\n      getCellPolygon = makeDefaultGetCellPolygon(radius),\n      onCellClick,\n      lineWidthScale = 10,\n      lineWidthMaxPixels = 2,\n      geneExpressionColormapRange,\n      cellColorEncoding,\n      getExpressionValue,\n      geneExpressionColormap\n    } = this.props;\n    const filteredCellsEntries = cellFilter ? cellsEntries.filter((cellEntry) => cellFilter.includes(cellEntry[0])) : cellsEntries;\n    const flipYTooltip = true;\n    return new PolygonLayer2(__spreadValues({\n      id: CELLS_LAYER_ID,\n      backgroundColor: [0, 0, 0],\n      isSelected: getCellIsSelected,\n      getPolygon: getCellPolygon,\n      updateTriggers: {\n        getLineWidth: [stroked],\n        isSelected: cellSelection,\n        getExpressionValue,\n        getFillColor: [opacity, cellColorEncoding, cellSelection, cellColors],\n        getLineColor: [cellColorEncoding, cellSelection, cellColors]\n      },\n      getFillColor: (cellEntry) => {\n        const color = getCellColor(cellEntry);\n        color[3] = opacity * 255;\n        return color;\n      },\n      getLineColor: (cellEntry) => {\n        const color = getCellColor(cellEntry);\n        color[3] = 255;\n        return color;\n      },\n      onClick: (info) => {\n        if (onCellClick) {\n          onCellClick(info);\n        }\n      },\n      visible,\n      getLineWidth: stroked ? 1 : 0,\n      lineWidthScale,\n      lineWidthMaxPixels,\n      getExpressionValue,\n      extensions: [new ScaledExpressionExtension_default()],\n      colorScaleLo: geneExpressionColormapRange[0],\n      colorScaleHi: geneExpressionColormapRange[1],\n      isExpressionMode: cellColorEncoding === \"geneSelection\",\n      colormap: geneExpressionColormap\n    }, cellLayerDefaultProps(filteredCellsEntries, void 0, setCellHighlight, setComponentHover, flipYTooltip)));\n  }\n  createMoleculesLayer(layerDef) {\n    const {\n      setMoleculeHighlight,\n      getMoleculeColor = (d) => PALETTE[d[2] % PALETTE.length],\n      getMoleculePosition = (d) => [d[0], d[1], 0]\n    } = this.props;\n    const { moleculesEntries } = this;\n    return new ScatterplotLayer2({\n      id: MOLECULES_LAYER_ID,\n      coordinateSystem: COORDINATE_SYSTEM5.CARTESIAN,\n      data: moleculesEntries,\n      pickable: true,\n      autoHighlight: true,\n      radiusMaxPixels: 3,\n      opacity: layerDef.opacity,\n      visible: layerDef.visible,\n      getRadius: layerDef.radius,\n      getPosition: getMoleculePosition,\n      getLineColor: getMoleculeColor,\n      getFillColor: getMoleculeColor,\n      onHover: (info) => {\n        if (setMoleculeHighlight) {\n          if (info.object) {\n            setMoleculeHighlight(info.object[3]);\n          } else {\n            setMoleculeHighlight(null);\n          }\n        }\n      }\n    });\n  }\n  createNeighborhoodsLayer(layerDef) {\n    const {\n      getNeighborhoodPolygon = (neighborhoodsEntry) => {\n        const neighborhood = neighborhoodsEntry[1];\n        return neighborhood.poly;\n      }\n    } = this.props;\n    const { neighborhoodsEntries } = this;\n    return new PolygonLayer2({\n      id: NEIGHBORHOODS_LAYER_ID,\n      getPolygon: getNeighborhoodPolygon,\n      coordinateSystem: COORDINATE_SYSTEM5.CARTESIAN,\n      data: neighborhoodsEntries,\n      pickable: true,\n      autoHighlight: true,\n      stroked: true,\n      filled: false,\n      getElevation: 0,\n      getLineWidth: 10,\n      visible: layerDef.visible\n    });\n  }\n  createSelectionLayers() {\n    const {\n      viewState,\n      getCellCoords = defaultGetCellCoords,\n      setCellSelection: setCellSelection2\n    } = this.props;\n    const { tool } = this.state;\n    const { cellsQuadTree } = this;\n    return getSelectionLayers(tool, viewState.zoom, CELLS_LAYER_ID, getCellCoords, setCellSelection2, cellsQuadTree);\n  }\n  createScaleBarLayer() {\n    const {\n      viewState,\n      width,\n      height,\n      imageLayerLoaders = {},\n      layers\n    } = this.props;\n    const use3d = (layers || []).some((i) => i.use3d);\n    const loaders = Object.values(imageLayerLoaders);\n    if (!viewState || !width || !height || loaders.length < 1)\n      return null;\n    const loader = loaders[0];\n    if (!loader)\n      return null;\n    const source = getSourceFromLoader(loader);\n    if (!source.meta)\n      return null;\n    const { physicalSizes } = source.meta;\n    if (physicalSizes && !use3d) {\n      const { x } = physicalSizes;\n      const { unit: unit2, size } = x;\n      if (unit2 && size) {\n        return new ScaleBarLayer({\n          id: \"scalebar-layer\",\n          unit: unit2,\n          size,\n          viewState: __spreadProps(__spreadValues({}, viewState), { width, height })\n        });\n      }\n      return null;\n    }\n    return null;\n  }\n  createImageLayer(rawLayerDef, loader, i) {\n    const layerDef = __spreadProps(__spreadValues({}, rawLayerDef), {\n      channels: rawLayerDef.channels.filter((channel) => channel.selection && channel.color && channel.slider)\n    });\n    let selections;\n    const nextLoaderSelection = layerDef.channels.map((c) => c.selection);\n    const prevLoaderSelection = this.layerLoaderSelections[layerDef.index];\n    if (isEqual5(prevLoaderSelection, nextLoaderSelection)) {\n      selections = prevLoaderSelection;\n    } else {\n      selections = nextLoaderSelection;\n      this.layerLoaderSelections[layerDef.index] = nextLoaderSelection;\n    }\n    const layerProps = {\n      colormap: layerDef.colormap,\n      opacity: layerDef.opacity,\n      transparentColor: layerDef.transparentColor,\n      colors: layerDef.channels.map((c) => c.color),\n      sliders: layerDef.channels.map((c) => c.slider),\n      resolution: layerDef.resolution,\n      renderingMode: layerDef.renderingMode,\n      xSlice: layerDef.xSlice,\n      ySlice: layerDef.ySlice,\n      zSlice: layerDef.zSlice,\n      callback: layerDef.callback,\n      visibilities: layerDef.channels.map((c) => !layerDef.visible && typeof layerDef.visible === \"boolean\" ? false : c.visible)\n    };\n    if (!loader || !layerProps)\n      return null;\n    const {\n      metadata: { transform },\n      data\n    } = loader;\n    let modelMatrix;\n    if (transform) {\n      const { scale, translate } = transform;\n      modelMatrix = new Matrix44().translate([translate.x, translate.y, 0]).scale(scale);\n    } else if (layerDef.modelMatrix) {\n      modelMatrix = new Matrix44(layerDef.modelMatrix);\n    }\n    if (rawLayerDef.type === \"bitmask\") {\n      const {\n        geneExpressionColormap,\n        geneExpressionColormapRange = [0, 1],\n        cellColorEncoding\n      } = this.props;\n      return new MultiscaleImageLayer({\n        id: `bitmask-layer-${layerDef.index}-${i}`,\n        channelsVisible: layerProps.visibilities,\n        opacity: layerProps.opacity,\n        modelMatrix,\n        hoveredCell: Number(this.props.cellHighlight),\n        renderSubLayers: renderSubBitmaskLayers,\n        loader: data,\n        selections,\n        cellColorData: this.color.data,\n        cellTexHeight: this.color.height,\n        cellTexWidth: this.color.width,\n        excludeBackground: true,\n        onViewportLoad: layerProps.callback,\n        colorScaleLo: geneExpressionColormapRange[0],\n        colorScaleHi: geneExpressionColormapRange[1],\n        isExpressionMode: cellColorEncoding === \"geneSelection\",\n        colormap: geneExpressionColormap,\n        expressionData: this.expression.data\n      });\n    }\n    const [Layer2, layerLoader] = getLayerLoaderTuple(data, layerDef.use3d);\n    return new Layer2({\n      loader: layerLoader,\n      id: `${layerDef.use3d ? \"volume\" : \"image\"}-layer-${layerDef.index}-${i}`,\n      colors: layerProps.colors,\n      contrastLimits: layerProps.sliders,\n      selections,\n      channelsVisible: layerProps.visibilities,\n      opacity: layerProps.opacity,\n      colormap: layerProps.colormap,\n      modelMatrix,\n      transparentColor: layerProps.transparentColor,\n      resolution: layerProps.resolution,\n      renderingMode: layerProps.renderingMode,\n      pickable: false,\n      xSlice: layerProps.xSlice,\n      ySlice: layerProps.ySlice,\n      zSlice: layerProps.zSlice,\n      onViewportLoad: layerProps.callback\n    });\n  }\n  createImageLayers() {\n    const {\n      layers,\n      imageLayerLoaders = {},\n      rasterLayersCallbacks = []\n    } = this.props;\n    const use3d = (layers || []).some((i) => i.use3d);\n    const use3dIndex = (layers || []).findIndex((i) => i.use3d);\n    return (layers || []).filter((layer) => layer.type === \"raster\" || layer.type === \"bitmask\").filter((layer) => use3d ? layer.use3d === use3d : true).map((layer, i) => this.createImageLayer(__spreadProps(__spreadValues({}, layer), { callback: rasterLayersCallbacks[use3d ? use3dIndex : i] }), imageLayerLoaders[layer.index], i));\n  }\n  getLayers() {\n    const {\n      imageLayers,\n      cellsLayer,\n      neighborhoodsLayer,\n      moleculesLayer\n    } = this;\n    return [\n      ...imageLayers,\n      cellsLayer,\n      neighborhoodsLayer,\n      moleculesLayer,\n      this.createScaleBarLayer(),\n      ...this.createSelectionLayers()\n    ];\n  }\n  onUpdateCellsData() {\n    const { cells = {}, getCellCoords = defaultGetCellCoords } = this.props;\n    const cellsEntries = Object.entries(cells);\n    this.cellsEntries = cellsEntries;\n    this.cellsQuadTree = createCellsQuadTree(cellsEntries, getCellCoords);\n  }\n  onUpdateCellsLayer() {\n    const { layers } = this.props;\n    const layerDef = (layers || []).find((layer) => layer.type === \"cells\");\n    if (layerDef) {\n      this.cellsLayer = this.createCellsLayer(layerDef);\n    } else {\n      this.cellsLayer = null;\n    }\n  }\n  onUpdateCellColors() {\n    const color = this.randomColorData;\n    const { size } = this.props.cellColors;\n    if (typeof size === \"number\") {\n      const cellIds = this.props.cellColors.keys();\n      color.data = new Uint8Array(color.height * color.width * 3).fill(getDefaultColor(this.props.theme)[0]);\n      color.data[0] = 0;\n      color.data[1] = 0;\n      color.data[2] = 0;\n      for (const id of cellIds) {\n        if (id > 0) {\n          const cellColor = this.props.cellColors.get(id);\n          if (cellColor) {\n            color.data.set(cellColor.slice(0, 3), Number(id) * 3);\n          }\n        }\n      }\n    }\n    this.color = color;\n  }\n  onUpdateExpressionData() {\n    var _a2;\n    const { expressionData } = this.props;\n    if ((_a2 = expressionData[0]) == null ? void 0 : _a2.length) {\n      this.expression.data = new Uint8Array(this.expression.height * this.expression.width);\n      this.expression.data.set(expressionData[0]);\n    }\n  }\n  onUpdateMoleculesData() {\n    const { molecules = {} } = this.props;\n    const moleculesEntries = Object.entries(molecules).flatMap(([molecule, coords], index) => coords.map(([x, y]) => [x, y, index, molecule]));\n    this.moleculesEntries = moleculesEntries;\n  }\n  onUpdateMoleculesLayer() {\n    const { layers } = this.props;\n    const layerDef = (layers || []).find((layer) => layer.type === \"molecules\");\n    if (layerDef) {\n      this.moleculesLayer = this.createMoleculesLayer(layerDef);\n    } else {\n      this.moleculesLayer = null;\n    }\n  }\n  onUpdateNeighborhoodsData() {\n    const { neighborhoods = {} } = this.props;\n    const neighborhoodsEntries = Object.entries(neighborhoods);\n    this.neighborhoodsEntries = neighborhoodsEntries;\n  }\n  onUpdateNeighborhoodsLayer() {\n    const { layers } = this.props;\n    const layerDef = (layers || []).find((layer) => layer.type === \"neighborhoods\");\n    if (layerDef) {\n      this.neighborhoodsLayer = this.createNeighborhoodsLayer(layerDef);\n    } else {\n      this.neighborhoodsLayer = null;\n    }\n  }\n  onUpdateImages() {\n    this.imageLayers = this.createImageLayers();\n  }\n  viewInfoDidUpdate() {\n    const { getCellCoords = defaultGetCellCoords } = this.props;\n    super.viewInfoDidUpdate(getCellCoords);\n  }\n  componentDidUpdate(prevProps) {\n    this.viewInfoDidUpdate();\n    const shallowDiff = (propName) => prevProps[propName] !== this.props[propName];\n    if ([\"cells\"].some(shallowDiff)) {\n      this.onUpdateCellsData();\n      this.forceUpdate();\n    }\n    if ([\n      \"layers\",\n      \"cells\",\n      \"cellFilter\",\n      \"cellSelection\",\n      \"cellColors\",\n      \"geneExpressionColormapRange\",\n      \"cellColorEncoding\",\n      \"geneExpressionColormap\"\n    ].some(shallowDiff)) {\n      this.onUpdateCellsLayer();\n      this.forceUpdate();\n    }\n    if ([\"cellColors\"].some(shallowDiff)) {\n      this.onUpdateCellColors();\n      this.forceUpdate();\n    }\n    if ([\"expressionData\"].some(shallowDiff)) {\n      this.onUpdateExpressionData();\n      this.forceUpdate();\n    }\n    if ([\"molecules\"].some(shallowDiff)) {\n      this.onUpdateMoleculesData();\n      this.forceUpdate();\n    }\n    if ([\"layers\", \"molecules\"].some(shallowDiff)) {\n      this.onUpdateMoleculesLayer();\n      this.forceUpdate();\n    }\n    if ([\"neighborhoods\"].some(shallowDiff)) {\n      this.onUpdateNeighborhoodsData();\n      this.forceUpdate();\n    }\n    if ([\"layers\", \"neighborhoods\"].some(shallowDiff)) {\n      this.onUpdateNeighborhoodsLayer();\n      this.forceUpdate();\n    }\n    if ([\n      \"layers\",\n      \"imageLayerLoaders\",\n      \"cellColors\",\n      \"cellHighlight\",\n      \"geneExpressionColormapRange\",\n      \"expressionData\",\n      \"rasterLayersCallbacks\",\n      \"geneExpressionColormap\"\n    ].some(shallowDiff)) {\n      this.onUpdateImages();\n      this.forceUpdate();\n    }\n  }\n};\nvar SpatialWrapper = forwardRef2((props, deckRef) => /* @__PURE__ */ React20.createElement(Spatial, __spreadProps(__spreadValues({}, props), {\n  deckRef\n})));\nvar Spatial_default = SpatialWrapper;\n\n// src/components/spatial/SpatialOptions.js\nimport React22, { useCallback as useCallback6 } from \"react\";\nimport debounce3 from \"lodash/debounce\";\nimport Checkbox from \"@material-ui/core/Checkbox\";\nimport TableCell3 from \"@material-ui/core/TableCell\";\nimport TableRow3 from \"@material-ui/core/TableRow\";\nimport Slider2 from \"@material-ui/core/Slider\";\nimport { makeStyles as makeStyles5, createStyles } from \"@material-ui/core/styles\";\n\n// src/components/shared-plot-options/CellColorEncodingOption.js\nimport React21 from \"react\";\nimport TableCell2 from \"@material-ui/core/TableCell\";\nimport TableRow2 from \"@material-ui/core/TableRow\";\nfunction CellColorEncodingOption(props) {\n  const {\n    observationsLabel,\n    cellColorEncoding,\n    setCellColorEncoding\n  } = props;\n  const classes = useStyles2();\n  const observationsLabelNice = capitalize(observationsLabel);\n  function handleColorEncodingChange(event) {\n    setCellColorEncoding(event.target.value);\n  }\n  return /* @__PURE__ */ React21.createElement(TableRow2, null, /* @__PURE__ */ React21.createElement(TableCell2, {\n    className: classes.labelCell,\n    htmlFor: \"cell-color-encoding-select\"\n  }, observationsLabelNice, \" Color Encoding\"), /* @__PURE__ */ React21.createElement(TableCell2, {\n    className: classes.inputCell\n  }, /* @__PURE__ */ React21.createElement(OptionSelect, {\n    className: classes.select,\n    value: cellColorEncoding,\n    onChange: handleColorEncodingChange,\n    inputProps: {\n      id: \"cell-color-encoding-select\"\n    }\n  }, /* @__PURE__ */ React21.createElement(\"option\", {\n    value: \"cellSetSelection\"\n  }, \"Cell Sets\"), /* @__PURE__ */ React21.createElement(\"option\", {\n    value: \"geneSelection\"\n  }, \"Gene Expression\"))));\n}\n\n// src/components/spatial/SpatialOptions.js\nvar useToggleStyles = makeStyles5(() => createStyles({\n  cameraLabel: {\n    padding: \"0px 0px 0px 16px\"\n  },\n  box: {\n    padding: \"0px\"\n  },\n  button: {\n    padding: \"0px 0px 0px 8px\"\n  }\n}));\nvar ToggleFixedAxisButton = ({\n  setSpatialAxisFixed,\n  spatialAxisFixed,\n  use3d\n}) => {\n  const classes = useToggleStyles();\n  return /* @__PURE__ */ React22.createElement(TableRow3, null, /* @__PURE__ */ React22.createElement(TableCell3, {\n    className: classes.cameraLabel\n  }, \"Fix Camera Axis\"), /* @__PURE__ */ React22.createElement(TableCell3, {\n    className: classes.box\n  }, /* @__PURE__ */ React22.createElement(Checkbox, {\n    onClick: () => setSpatialAxisFixed(!spatialAxisFixed),\n    disabled: !use3d,\n    checked: Boolean(spatialAxisFixed)\n  })));\n};\nfunction SpatialOptions(props) {\n  const {\n    observationsLabel,\n    cellColorEncoding,\n    setCellColorEncoding,\n    setSpatialAxisFixed,\n    spatialAxisFixed,\n    use3d,\n    geneExpressionColormap,\n    setGeneExpressionColormap,\n    geneExpressionColormapRange,\n    setGeneExpressionColormapRange,\n    canShowExpressionOptions,\n    canShowColorEncodingOption,\n    canShow3DOptions\n  } = props;\n  function handleGeneExpressionColormapChange(event) {\n    setGeneExpressionColormap(event.target.value);\n  }\n  function handleColormapRangeChange(event, value) {\n    setGeneExpressionColormapRange(value);\n  }\n  const handleColormapRangeChangeDebounced = useCallback6(debounce3(handleColormapRangeChange, 5, { trailing: true }), [handleColormapRangeChange]);\n  const classes = useStyles2();\n  return /* @__PURE__ */ React22.createElement(OptionsContainer, null, canShowColorEncodingOption ? /* @__PURE__ */ React22.createElement(CellColorEncodingOption, {\n    observationsLabel,\n    cellColorEncoding,\n    setCellColorEncoding\n  }) : null, canShow3DOptions ? /* @__PURE__ */ React22.createElement(ToggleFixedAxisButton, {\n    setSpatialAxisFixed,\n    spatialAxisFixed,\n    use3d\n  }) : null, canShowExpressionOptions ? /* @__PURE__ */ React22.createElement(React22.Fragment, null, /* @__PURE__ */ React22.createElement(TableRow3, null, /* @__PURE__ */ React22.createElement(TableCell3, {\n    className: classes.labelCell,\n    htmlFor: \"gene-expression-colormap-select\"\n  }, \"Gene Expression Colormap\"), /* @__PURE__ */ React22.createElement(TableCell3, {\n    className: classes.inputCell\n  }, /* @__PURE__ */ React22.createElement(OptionSelect, {\n    className: classes.select,\n    value: geneExpressionColormap,\n    onChange: handleGeneExpressionColormapChange,\n    inputProps: {\n      id: \"gene-expression-colormap-select\"\n    }\n  }, GLSL_COLORMAPS.map((cmap) => /* @__PURE__ */ React22.createElement(\"option\", {\n    key: cmap,\n    value: cmap\n  }, cmap))))), /* @__PURE__ */ React22.createElement(TableRow3, null, /* @__PURE__ */ React22.createElement(TableCell3, {\n    className: classes.labelCell\n  }, \"Gene Expression Colormap Range\"), /* @__PURE__ */ React22.createElement(TableCell3, {\n    className: classes.inputCell\n  }, /* @__PURE__ */ React22.createElement(Slider2, {\n    classes: { root: classes.slider, valueLabel: classes.sliderValueLabel },\n    value: geneExpressionColormapRange,\n    onChange: handleColormapRangeChangeDebounced,\n    \"aria-labelledby\": \"gene-expression-colormap-range-slider\",\n    valueLabelDisplay: \"auto\",\n    step: 5e-3,\n    min: 0,\n    max: 1\n  })))) : null);\n}\n\n// src/components/spatial/SpatialTooltipSubscriber.js\nimport React23 from \"react\";\nfunction SpatialTooltipSubscriber(props) {\n  const {\n    parentUuid,\n    cellHighlight,\n    width,\n    height,\n    getCellInfo\n  } = props;\n  const sourceUuid = useComponentHover();\n  const viewInfo = useComponentViewInfo(parentUuid);\n  const [cellInfo, x, y] = cellHighlight && getCellInfo ? [\n    getCellInfo(cellHighlight),\n    ...viewInfo && viewInfo.project ? viewInfo.project(cellHighlight) : [null, null]\n  ] : [null, null, null];\n  return cellInfo ? /* @__PURE__ */ React23.createElement(Tooltip2D, {\n    x,\n    y,\n    parentUuid,\n    sourceUuid,\n    parentWidth: width,\n    parentHeight: height\n  }, /* @__PURE__ */ React23.createElement(TooltipContent, {\n    info: cellInfo\n  })) : null;\n}\n\n// src/components/spatial/SpatialSubscriber.js\nvar SPATIAL_DATA_TYPES = [\n  \"cells\",\n  \"molecules\",\n  \"raster\",\n  \"cell-sets\",\n  \"expression-matrix\"\n];\nfunction SpatialSubscriber(props) {\n  const {\n    uuid,\n    coordinationScopes,\n    removeGridComponent,\n    observationsLabelOverride: observationsLabel = \"cell\",\n    observationsPluralLabelOverride: observationsPluralLabel = `${observationsLabel}s`,\n    subobservationsLabelOverride: subobservationsLabel = \"molecule\",\n    subobservationsPluralLabelOverride: subobservationsPluralLabel = `${subobservationsLabel}s`,\n    theme,\n    disableTooltip = false,\n    title: title16 = \"Spatial\",\n    disable3d,\n    globalDisable3d\n  } = props;\n  const loaders = useLoaders();\n  const setComponentHover = useSetComponentHover();\n  const setComponentViewInfo = useSetComponentViewInfo(uuid);\n  const [{\n    dataset,\n    spatialZoom: zoom,\n    spatialTargetX: targetX,\n    spatialTargetY: targetY,\n    spatialTargetZ: targetZ,\n    spatialRotationX: rotationX,\n    spatialRotationY: rotationY,\n    spatialRotationZ: rotationZ,\n    spatialRotationOrbit: rotationOrbit,\n    spatialOrbitAxis: orbitAxis,\n    spatialRasterLayers: rasterLayers,\n    spatialCellsLayer: cellsLayer,\n    spatialMoleculesLayer: moleculesLayer,\n    spatialNeighborhoodsLayer: neighborhoodsLayer,\n    cellFilter,\n    cellHighlight,\n    geneSelection,\n    cellSetSelection,\n    cellSetColor,\n    cellColorEncoding,\n    additionalCellSets,\n    spatialAxisFixed,\n    geneExpressionColormap,\n    geneExpressionColormapRange\n  }, {\n    setSpatialZoom: setZoom,\n    setSpatialTargetX: setTargetX,\n    setSpatialTargetY: setTargetY,\n    setSpatialTargetZ: setTargetZ,\n    setSpatialRotationX: setRotationX,\n    setSpatialRotationOrbit: setRotationOrbit,\n    setSpatialOrbitAxis: setOrbitAxis,\n    setSpatialRasterLayers: setRasterLayers,\n    setSpatialCellsLayer: setCellsLayer,\n    setSpatialMoleculesLayer: setMoleculesLayer,\n    setSpatialNeighborhoodsLayer: setNeighborhoodsLayer,\n    setCellFilter,\n    setCellSetSelection,\n    setCellHighlight,\n    setCellSetColor,\n    setCellColorEncoding,\n    setAdditionalCellSets,\n    setMoleculeHighlight,\n    setSpatialAxisFixed,\n    setGeneExpressionColormap,\n    setGeneExpressionColormapRange\n  }] = useCoordination(COMPONENT_COORDINATION_TYPES.spatial, coordinationScopes);\n  const [\n    {\n      rasterLayersCallbacks\n    }\n  ] = useAuxiliaryCoordination(COMPONENT_COORDINATION_TYPES.layerController, coordinationScopes);\n  const use3d = rasterLayers == null ? void 0 : rasterLayers.some((l) => l.use3d);\n  const [urls, addUrl, resetUrls] = useUrls();\n  const [\n    isReady,\n    setItemIsReady,\n    setItemIsNotReady,\n    resetReadyItems\n  ] = useReady(SPATIAL_DATA_TYPES);\n  const [width, height, deckRef] = useDeckCanvasSize();\n  useEffect6(() => {\n    resetUrls();\n    resetReadyItems();\n  }, [loaders, dataset]);\n  const [cells, cellsCount] = useCellsData(loaders, dataset, setItemIsReady, addUrl, false, { setSpatialCellsLayer: setCellsLayer }, { spatialCellsLayer: cellsLayer });\n  const [molecules, moleculesCount, locationsCount] = useMoleculesData(loaders, dataset, setItemIsReady, addUrl, false, { setSpatialMoleculesLayer: setMoleculesLayer }, { spatialMoleculesLayer: moleculesLayer });\n  const [neighborhoods] = useNeighborhoodsData(loaders, dataset, setItemIsReady, addUrl, false, { setSpatialNeighborhoodsLayer: setNeighborhoodsLayer }, { spatialNeighborhoodsLayer: neighborhoodsLayer });\n  const [cellSets] = useCellSetsData(loaders, dataset, setItemIsReady, addUrl, false, { setCellSetSelection, setCellSetColor }, { cellSetSelection, cellSetColor });\n  const [expressionData] = useGeneSelection(loaders, dataset, setItemIsReady, false, geneSelection, setItemIsNotReady);\n  const [attrs] = useExpressionAttrs(loaders, dataset, setItemIsReady, addUrl, false);\n  const [raster, imageLayerLoaders, imageLayerMeta] = useRasterData(loaders, dataset, setItemIsReady, addUrl, false, { setSpatialRasterLayers: setRasterLayers }, { spatialRasterLayers: rasterLayers });\n  const layers = useMemo6(() => {\n    const canPassInCellsLayer = !imageLayerMeta.some((l) => {\n      var _a2;\n      return (_a2 = l == null ? void 0 : l.metadata) == null ? void 0 : _a2.isBitmask;\n    });\n    return [\n      ...moleculesLayer ? [__spreadProps(__spreadValues({}, moleculesLayer), { type: \"molecules\" })] : [],\n      ...cellsLayer && canPassInCellsLayer ? [__spreadProps(__spreadValues({}, cellsLayer), { type: \"cells\" })] : [],\n      ...neighborhoodsLayer ? [__spreadProps(__spreadValues({}, neighborhoodsLayer), { type: \"neighborhoods\" })] : [],\n      ...rasterLayers ? rasterLayers.map((l) => __spreadProps(__spreadValues({}, l), { type: l.type && [\"raster\", \"bitmask\"].includes(l.type) ? l.type : \"raster\" })) : []\n    ];\n  }, [cellsLayer, moleculesLayer, neighborhoodsLayer, rasterLayers, imageLayerMeta]);\n  useEffect6(() => {\n    if (typeof targetX !== \"number\" || typeof targetY !== \"number\") {\n      const {\n        initialTargetX,\n        initialTargetY,\n        initialTargetZ,\n        initialZoom\n      } = getInitialSpatialTargets({\n        width,\n        height,\n        cells,\n        imageLayerLoaders,\n        useRaster: Boolean(loaders[dataset].loaders.raster),\n        use3d\n      });\n      setTargetX(initialTargetX);\n      setTargetY(initialTargetY);\n      setTargetZ(initialTargetZ);\n      setZoom(initialZoom);\n    }\n  }, [imageLayerLoaders, cells, targetX, targetY, setTargetX, setTargetY, setZoom, use3d]);\n  const mergedCellSets = useMemo6(() => mergeCellSets(cellSets, additionalCellSets), [cellSets, additionalCellSets]);\n  const setCellSelectionProp = useCallback7((v) => {\n    setCellSelection(v, additionalCellSets, cellSetColor, setCellSetSelection, setAdditionalCellSets, setCellSetColor, setCellColorEncoding);\n  }, [\n    additionalCellSets,\n    cellSetColor,\n    setCellColorEncoding,\n    setAdditionalCellSets,\n    setCellSetColor,\n    setCellSetSelection\n  ]);\n  const cellColors = useMemo6(() => getCellColors({\n    cellColorEncoding,\n    expressionData: expressionData && expressionData[0],\n    geneSelection,\n    cellSets: mergedCellSets,\n    cellSetSelection,\n    cellSetColor,\n    expressionDataAttrs: attrs,\n    theme\n  }), [\n    cellColorEncoding,\n    geneSelection,\n    mergedCellSets,\n    theme,\n    cellSetColor,\n    cellSetSelection,\n    expressionData,\n    attrs\n  ]);\n  const shiftedExpressionDataForBitmask = useMemo6(() => {\n    const hasBitmask = imageLayerMeta.some((l) => {\n      var _a2;\n      return (_a2 = l == null ? void 0 : l.metadata) == null ? void 0 : _a2.isBitmask;\n    });\n    if ((attrs == null ? void 0 : attrs.rows) && expressionData && hasBitmask) {\n      const maxId = attrs.rows.reduce((max2, curr) => Math.max(max2, Number(curr)));\n      const result = new Uint8Array(maxId + 1);\n      for (let i = 0; i < attrs.rows.length; i++) {\n        const id = attrs.rows[i];\n        result.set(expressionData[0].slice(i, i + 1), Number(id));\n      }\n      return [result];\n    }\n    return [new Uint8Array()];\n  }, [attrs, expressionData, imageLayerMeta]);\n  const cellSelection = useMemo6(() => Array.from(cellColors.keys()), [cellColors]);\n  const getCellInfo = (cellId) => {\n    const cell = cells[cellId];\n    if (cell) {\n      return __spreadValues({\n        [`${capitalize(observationsLabel)} ID`]: cellId\n      }, cell.factors);\n    }\n    return null;\n  };\n  const setViewState = ({\n    zoom: newZoom,\n    target,\n    rotationX: newRotationX,\n    rotationOrbit: newRotationOrbit,\n    orbitAxis: newOrbitAxis\n  }) => {\n    setZoom(newZoom);\n    setTargetX(target[0]);\n    setTargetY(target[1]);\n    setTargetZ(target[2] || null);\n    setRotationX(newRotationX);\n    setRotationOrbit(newRotationOrbit);\n    setOrbitAxis(newOrbitAxis || null);\n  };\n  const subtitle = makeSpatialSubtitle({\n    observationsCount: cellsCount,\n    observationsLabel,\n    observationsPluralLabel,\n    subobservationsCount: moleculesCount,\n    subobservationsLabel,\n    subobservationsPluralLabel,\n    locationsCount\n  });\n  const getExpressionValue = useExpressionValueGetter({ attrs, expressionData });\n  const hasExpressionData = loaders[dataset].loaders[\"expression-matrix\"];\n  const hasCellsData = loaders[dataset].loaders.cells || imageLayerMeta.some((l) => {\n    var _a2;\n    return (_a2 = l == null ? void 0 : l.metadata) == null ? void 0 : _a2.isBitmask;\n  });\n  const canLoad3DLayers = imageLayerLoaders.some((loader) => Boolean(Array.from({\n    length: loader.data.length\n  }).filter((_, res) => canLoadResolution(loader.data, res)).length));\n  const canShow3DOptions = canLoad3DLayers && !((disable3d == null ? void 0 : disable3d.length) === imageLayerLoaders.length) && !globalDisable3d;\n  return /* @__PURE__ */ React24.createElement(TitleInfo, {\n    title: title16,\n    info: subtitle,\n    isSpatial: true,\n    urls,\n    theme,\n    removeGridComponent,\n    isReady,\n    options: canShow3DOptions || hasExpressionData ? /* @__PURE__ */ React24.createElement(SpatialOptions, {\n      observationsLabel,\n      cellColorEncoding,\n      setCellColorEncoding,\n      setSpatialAxisFixed,\n      spatialAxisFixed,\n      use3d,\n      geneExpressionColormap,\n      setGeneExpressionColormap,\n      geneExpressionColormapRange,\n      setGeneExpressionColormapRange,\n      canShowExpressionOptions: hasExpressionData,\n      canShowColorEncodingOption: hasCellsData && hasExpressionData,\n      canShow3DOptions\n    }) : null\n  }, /* @__PURE__ */ React24.createElement(Spatial_default, {\n    ref: deckRef,\n    uuid,\n    width,\n    height,\n    viewState: {\n      zoom,\n      target: [targetX, targetY, targetZ],\n      rotationX,\n      rotationY,\n      rotationZ,\n      rotationOrbit,\n      orbitAxis\n    },\n    setViewState,\n    layers,\n    cells,\n    cellFilter,\n    cellSelection,\n    cellHighlight,\n    cellColors,\n    molecules,\n    neighborhoods,\n    imageLayerLoaders,\n    setCellFilter,\n    setCellSelection: setCellSelectionProp,\n    setCellHighlight,\n    setMoleculeHighlight,\n    setComponentHover: () => {\n      setComponentHover(uuid);\n    },\n    updateViewInfo: setComponentViewInfo,\n    rasterLayersCallbacks,\n    spatialAxisFixed,\n    geneExpressionColormap,\n    geneExpressionColormapRange,\n    expressionData: shiftedExpressionDataForBitmask,\n    cellColorEncoding,\n    getExpressionValue,\n    theme\n  }), !disableTooltip && /* @__PURE__ */ React24.createElement(SpatialTooltipSubscriber, {\n    parentUuid: uuid,\n    cellHighlight,\n    width,\n    height,\n    getCellInfo\n  }));\n}\n\n// src/components/scatterplot/ScatterplotSubscriber.js\nimport React28, {\n  useState as useState8,\n  useEffect as useEffect7,\n  useCallback as useCallback9,\n  useMemo as useMemo7\n} from \"react\";\nimport { extent as extent2 } from \"d3-array\";\nimport isEqual6 from \"lodash/isEqual\";\n\n// src/components/scatterplot/Scatterplot.js\nimport React25, { forwardRef as forwardRef3 } from \"react\";\nimport { PolygonLayer as PolygonLayer3, TextLayer as TextLayer3, ScatterplotLayer as ScatterplotLayer3 } from \"@deck.gl/layers\";\nimport { forceSimulation } from \"d3-force\";\n\n// src/components/shared-spatial-scatterplot/force-collide-rects.js\nimport { quadtree as quadtree2 } from \"d3-quadtree\";\nfunction constant(v) {\n  return () => v;\n}\nfunction jiggle(v) {\n  return v + (Math.random() - 0.5) * 1e-6;\n}\nfunction forceCollideRects() {\n  let nodes;\n  let masses;\n  let strength = 1;\n  let iterations = 1;\n  let sizes;\n  let size = constant([0, 0]);\n  function xCenter(d) {\n    return d.x + d.vx + sizes[d.index][0] / 2;\n  }\n  function yCenter(d) {\n    return d.y + d.vy + sizes[d.index][1] / 2;\n  }\n  function prepare(quad) {\n    if (quad.data) {\n      quad.size = sizes[quad.data.index];\n    } else {\n      quad.size = [0, 0];\n      for (let i = 0; i < 4; i++) {\n        if (quad[i] && quad[i].size) {\n          quad.size[0] = Math.max(quad.size[0], quad[i].size[0]);\n          quad.size[1] = Math.max(quad.size[1], quad[i].size[1]);\n        }\n      }\n    }\n  }\n  function force() {\n    let node;\n    let nodeSize;\n    let nodeMass;\n    let xi;\n    let yi;\n    const tree = quadtree2(nodes, xCenter, yCenter).visitAfter(prepare);\n    function apply(quad, x0, y0, x1, y1) {\n      const { data } = quad;\n      const xSize = (nodeSize[0] + quad.size[0]) / 2;\n      const ySize = (nodeSize[1] + quad.size[1]) / 2;\n      if (data && data.index > node.index) {\n        let x = jiggle(xi - xCenter(data));\n        let y = jiggle(yi - yCenter(data));\n        const xd = Math.abs(x) - xSize;\n        const yd = Math.abs(y) - ySize;\n        if (xd < 0 && yd < 0) {\n          const l = Math.sqrt(x * x + y * y);\n          const m = masses[data.index] / (nodeMass + masses[data.index]);\n          if (Math.abs(xd) < Math.abs(yd)) {\n            node.vx -= (x *= xd / l * strength) * m;\n            data.vx += x * (1 - m);\n          } else {\n            node.vy -= (y *= yd / l * strength) * m;\n            data.vy += y * (1 - m);\n          }\n        }\n        return x0 > xi + xSize || x1 < xi - xSize || y0 > yi + ySize || y1 < yi - ySize;\n      }\n      return false;\n    }\n    function iterate() {\n      for (let j = 0; j < nodes.length; j++) {\n        node = nodes[j];\n        nodeSize = sizes[j];\n        nodeMass = masses[j];\n        xi = xCenter(node);\n        yi = yCenter(node);\n        tree.visit(apply);\n      }\n    }\n    for (let i = 0; i < iterations; i++) {\n      iterate();\n    }\n  }\n  force.initialize = (v) => {\n    nodes = v;\n    sizes = nodes.map(size);\n    masses = sizes.map((d) => d[0] + d[1]);\n  };\n  force.iterations = (...v) => {\n    if (v.length) {\n      iterations = +v[0];\n      return force;\n    }\n    return iterations;\n  };\n  force.strength = (...v) => {\n    if (v.length) {\n      strength = +v[0];\n      return force;\n    }\n    return strength;\n  };\n  force.size = (...v) => {\n    if (v.length) {\n      size = typeof v[0] === \"function\" ? v[0] : constant(v[0]);\n      return force;\n    }\n    return size;\n  };\n  return force;\n}\n\n// src/components/scatterplot/Scatterplot.js\nvar CELLS_LAYER_ID2 = \"scatterplot\";\nvar LABEL_FONT_FAMILY = \"-apple-system, 'Helvetica Neue', Arial, sans-serif\";\nvar NUM_FORCE_SIMULATION_TICKS = 100;\nvar LABEL_UPDATE_ZOOM_DELTA = 0.25;\nvar makeDefaultGetCellPosition = (mapping) => (cellEntry) => {\n  const { mappings } = cellEntry[1];\n  if (!(mapping in mappings)) {\n    const available = Object.keys(mappings).map((s) => `\"${s}\"`).join(\", \");\n    throw new Error(`Expected to find \"${mapping}\", but available mappings are: ${available}`);\n  }\n  const mappedCell = mappings[mapping];\n  return [mappedCell[0], -mappedCell[1], 0];\n};\nvar makeDefaultGetCellCoords = (mapping) => (cell) => cell.mappings[mapping];\nvar makeDefaultGetCellColors2 = (cellColors, theme) => (cellEntry) => {\n  const [r, g, b, a] = cellColors && cellColors.get(cellEntry[0]) || getDefaultColor(theme);\n  return [r, g, b, 255 * (a || 1)];\n};\nvar Scatterplot = class extends AbstractSpatialOrScatterplot {\n  constructor(props) {\n    super(props);\n    this.cellsEntries = [];\n    this.cellsQuadTree = null;\n    this.cellsLayer = null;\n    this.cellSetsForceSimulation = forceCollideRects();\n    this.cellSetsLabelPrevZoom = null;\n    this.cellSetsLayers = [];\n    this.onUpdateCellsData();\n    this.onUpdateCellsLayer();\n    this.onUpdateCellSetsLayers();\n  }\n  createCellsLayer() {\n    const { cellsEntries } = this;\n    const {\n      theme,\n      mapping,\n      getCellPosition = makeDefaultGetCellPosition(mapping),\n      cellRadius = 1,\n      cellOpacity = 1,\n      cellFilter,\n      cellSelection,\n      setCellHighlight,\n      setComponentHover,\n      getCellIsSelected,\n      cellColors,\n      getCellColor = makeDefaultGetCellColors2(cellColors, theme),\n      getExpressionValue,\n      onCellClick,\n      geneExpressionColormap,\n      geneExpressionColormapRange = [0, 1],\n      cellColorEncoding\n    } = this.props;\n    const filteredCellsEntries = cellFilter ? cellsEntries.filter((cellEntry) => cellFilter.includes(cellEntry[0])) : cellsEntries;\n    return new ScatterplotLayer3(__spreadProps(__spreadValues({\n      id: CELLS_LAYER_ID2,\n      backgroundColor: theme === \"dark\" ? [0, 0, 0] : [241, 241, 241],\n      getCellIsSelected,\n      opacity: cellOpacity,\n      radiusScale: cellRadius,\n      radiusMinPixels: 1,\n      radiusMaxPixels: 30,\n      radiusUnits: \"pixels\",\n      getPosition: getCellPosition,\n      getFillColor: getCellColor,\n      getLineColor: getCellColor,\n      getRadius: 1,\n      getExpressionValue,\n      getLineWidth: 0,\n      extensions: [\n        new ScaledExpressionExtension_default(),\n        new SelectionExtension_default({ instanced: true })\n      ],\n      colorScaleLo: geneExpressionColormapRange[0],\n      colorScaleHi: geneExpressionColormapRange[1],\n      isExpressionMode: cellColorEncoding === \"geneSelection\",\n      colormap: geneExpressionColormap,\n      onClick: (info) => {\n        if (onCellClick) {\n          onCellClick(info);\n        }\n      },\n      updateTriggers: {\n        getExpressionValue,\n        getFillColor: [cellColorEncoding, cellSelection, cellColors],\n        getLineColor: [cellColorEncoding, cellSelection, cellColors],\n        getCellIsSelected\n      }\n    }, cellLayerDefaultProps(filteredCellsEntries, void 0, setCellHighlight, setComponentHover)), {\n      stroked: 0\n    }));\n  }\n  createCellSetsLayers() {\n    const {\n      theme,\n      cellSetPolygons,\n      viewState,\n      cellSetPolygonsVisible,\n      cellSetLabelsVisible,\n      cellSetLabelSize\n    } = this.props;\n    const result = [];\n    if (cellSetPolygonsVisible) {\n      result.push(new PolygonLayer3({\n        id: \"cell-sets-polygon-layer\",\n        data: cellSetPolygons,\n        stroked: true,\n        filled: false,\n        wireframe: true,\n        lineWidthMaxPixels: 1,\n        getPolygon: (d) => d.hull,\n        getLineColor: (d) => d.color,\n        getLineWidth: 1\n      }));\n    }\n    if (cellSetLabelsVisible) {\n      const { zoom } = viewState;\n      const nodes = cellSetPolygons.map((p) => ({\n        x: p.centroid[0],\n        y: p.centroid[1],\n        label: p.name\n      }));\n      const collisionForce = this.cellSetsForceSimulation.size((d) => [\n        cellSetLabelSize * 1 / __pow(2, zoom) * 4 * d.label.length,\n        cellSetLabelSize * 1 / __pow(2, zoom) * 1.5\n      ]);\n      forceSimulation().nodes(nodes).force(\"collision\", collisionForce).tick(NUM_FORCE_SIMULATION_TICKS);\n      result.push(new TextLayer3({\n        id: \"cell-sets-text-layer\",\n        data: nodes,\n        getPosition: (d) => [d.x, d.y],\n        getText: (d) => d.label,\n        getColor: theme === \"dark\" ? [255, 255, 255] : [0, 0, 0],\n        getSize: cellSetLabelSize,\n        getAngle: 0,\n        getTextAnchor: \"middle\",\n        getAlignmentBaseline: \"center\",\n        fontFamily: LABEL_FONT_FAMILY,\n        fontWeight: \"normal\"\n      }));\n    }\n    return result;\n  }\n  createSelectionLayers() {\n    const {\n      viewState,\n      mapping,\n      getCellCoords = makeDefaultGetCellCoords(mapping),\n      setCellSelection: setCellSelection2\n    } = this.props;\n    const { tool } = this.state;\n    const { cellsQuadTree } = this;\n    const flipYTooltip = true;\n    return getSelectionLayers(tool, viewState.zoom, CELLS_LAYER_ID2, getCellCoords, setCellSelection2, cellsQuadTree, flipYTooltip);\n  }\n  getLayers() {\n    const {\n      cellsLayer,\n      cellSetsLayers\n    } = this;\n    return [\n      cellsLayer,\n      ...cellSetsLayers,\n      ...this.createSelectionLayers()\n    ];\n  }\n  onUpdateCellsData() {\n    const {\n      cells = {},\n      mapping,\n      getCellCoords = makeDefaultGetCellCoords(mapping)\n    } = this.props;\n    const cellsEntries = Object.entries(cells);\n    this.cellsEntries = cellsEntries;\n    this.cellsQuadTree = createCellsQuadTree(cellsEntries, getCellCoords);\n  }\n  onUpdateCellsLayer() {\n    this.cellsLayer = this.createCellsLayer();\n  }\n  onUpdateCellSetsLayers(onlyViewStateChange) {\n    if (onlyViewStateChange) {\n      const { viewState, cellSetLabelsVisible } = this.props;\n      const { zoom } = viewState;\n      const { cellSetsLabelPrevZoom } = this;\n      if (cellSetLabelsVisible && (cellSetsLabelPrevZoom === null || Math.abs(cellSetsLabelPrevZoom - zoom) > LABEL_UPDATE_ZOOM_DELTA)) {\n        this.cellSetsLayers = this.createCellSetsLayers();\n        this.cellSetsLabelPrevZoom = zoom;\n      }\n    } else {\n      this.cellSetsLayers = this.createCellSetsLayers();\n    }\n  }\n  viewInfoDidUpdate() {\n    const {\n      mapping,\n      getCellPosition = makeDefaultGetCellPosition(mapping)\n    } = this.props;\n    super.viewInfoDidUpdate((cell) => getCellPosition([null, cell]));\n  }\n  componentDidUpdate(prevProps) {\n    this.viewInfoDidUpdate();\n    const shallowDiff = (propName) => prevProps[propName] !== this.props[propName];\n    if ([\"cells\"].some(shallowDiff)) {\n      this.onUpdateCellsData();\n      this.forceUpdate();\n    }\n    if ([\n      \"cells\",\n      \"cellFilter\",\n      \"cellSelection\",\n      \"cellColors\",\n      \"cellRadius\",\n      \"cellOpacity\",\n      \"cellRadiusMode\",\n      \"geneExpressionColormap\",\n      \"geneExpressionColormapRange\",\n      \"geneSelection\",\n      \"cellColorEncoding\"\n    ].some(shallowDiff)) {\n      this.onUpdateCellsLayer();\n      this.forceUpdate();\n    }\n    if ([\n      \"cellSetPolygons\",\n      \"cellSetPolygonsVisible\",\n      \"cellSetLabelsVisible\",\n      \"cellSetLabelSize\"\n    ].some(shallowDiff)) {\n      this.onUpdateCellSetsLayers(false);\n      this.forceUpdate();\n    }\n    if (shallowDiff(\"viewState\")) {\n      this.onUpdateCellSetsLayers(true);\n      this.forceUpdate();\n    }\n  }\n};\nvar ScatterplotWrapper = forwardRef3((props, deckRef) => /* @__PURE__ */ React25.createElement(Scatterplot, __spreadProps(__spreadValues({}, props), {\n  deckRef\n})));\nvar Scatterplot_default = ScatterplotWrapper;\n\n// src/components/scatterplot/ScatterplotTooltipSubscriber.js\nimport React26 from \"react\";\nfunction ScatterplotTooltipSubscriber(props) {\n  const {\n    parentUuid,\n    cellHighlight,\n    width,\n    height,\n    getCellInfo\n  } = props;\n  const sourceUuid = useComponentHover();\n  const viewInfo = useComponentViewInfo(parentUuid);\n  const [cellInfo, x, y] = cellHighlight && getCellInfo ? [\n    getCellInfo(cellHighlight),\n    ...viewInfo && viewInfo.project ? viewInfo.project(cellHighlight) : [null, null]\n  ] : [null, null, null];\n  return cellInfo ? /* @__PURE__ */ React26.createElement(Tooltip2D, {\n    x,\n    y,\n    parentUuid,\n    sourceUuid,\n    parentWidth: width,\n    parentHeight: height\n  }, /* @__PURE__ */ React26.createElement(TooltipContent, {\n    info: cellInfo\n  })) : null;\n}\n\n// src/components/scatterplot/ScatterplotOptions.js\nimport React27, { useCallback as useCallback8 } from \"react\";\nimport debounce4 from \"lodash/debounce\";\nimport Checkbox2 from \"@material-ui/core/Checkbox\";\nimport Slider3 from \"@material-ui/core/Slider\";\nimport TableCell4 from \"@material-ui/core/TableCell\";\nimport TableRow4 from \"@material-ui/core/TableRow\";\nfunction ScatterplotOptions(props) {\n  const {\n    observationsLabel,\n    cellRadius,\n    setCellRadius,\n    cellRadiusMode,\n    setCellRadiusMode,\n    cellOpacity,\n    setCellOpacity,\n    cellOpacityMode,\n    setCellOpacityMode,\n    cellSetLabelsVisible,\n    setCellSetLabelsVisible,\n    cellSetLabelSize,\n    setCellSetLabelSize,\n    cellSetPolygonsVisible,\n    setCellSetPolygonsVisible,\n    cellColorEncoding,\n    setCellColorEncoding,\n    geneExpressionColormap,\n    setGeneExpressionColormap,\n    geneExpressionColormapRange,\n    setGeneExpressionColormapRange\n  } = props;\n  const observationsLabelNice = capitalize(observationsLabel);\n  const classes = useStyles2();\n  function handleCellRadiusModeChange(event) {\n    setCellRadiusMode(event.target.value);\n  }\n  function handleCellOpacityModeChange(event) {\n    setCellOpacityMode(event.target.value);\n  }\n  function handleRadiusChange(event, value) {\n    setCellRadius(value);\n  }\n  function handleOpacityChange(event, value) {\n    setCellOpacity(value);\n  }\n  function handleLabelVisibilityChange(event) {\n    setCellSetLabelsVisible(event.target.checked);\n  }\n  function handleLabelSizeChange(event, value) {\n    setCellSetLabelSize(value);\n  }\n  function handlePolygonVisibilityChange(event) {\n    setCellSetPolygonsVisible(event.target.checked);\n  }\n  function handleGeneExpressionColormapChange(event) {\n    setGeneExpressionColormap(event.target.value);\n  }\n  function handleColormapRangeChange(event, value) {\n    setGeneExpressionColormapRange(value);\n  }\n  const handleColormapRangeChangeDebounced = useCallback8(debounce4(handleColormapRangeChange, 5, { trailing: true }), [handleColormapRangeChange]);\n  return /* @__PURE__ */ React27.createElement(OptionsContainer, null, /* @__PURE__ */ React27.createElement(CellColorEncodingOption, {\n    observationsLabel,\n    cellColorEncoding,\n    setCellColorEncoding\n  }), /* @__PURE__ */ React27.createElement(TableRow4, null, /* @__PURE__ */ React27.createElement(TableCell4, {\n    className: classes.labelCell\n  }, observationsLabelNice, \" Set Labels Visible\"), /* @__PURE__ */ React27.createElement(TableCell4, {\n    className: classes.inputCell\n  }, /* @__PURE__ */ React27.createElement(Checkbox2, {\n    className: classes.checkbox,\n    checked: cellSetLabelsVisible,\n    onChange: handleLabelVisibilityChange,\n    name: \"scatterplot-option-cell-set-labels\",\n    color: \"default\"\n  }))), /* @__PURE__ */ React27.createElement(TableRow4, null, /* @__PURE__ */ React27.createElement(TableCell4, {\n    className: classes.labelCell\n  }, observationsLabelNice, \" Set Label Size\"), /* @__PURE__ */ React27.createElement(TableCell4, {\n    className: classes.inputCell\n  }, /* @__PURE__ */ React27.createElement(Slider3, {\n    disabled: !cellSetLabelsVisible,\n    classes: { root: classes.slider, valueLabel: classes.sliderValueLabel },\n    value: cellSetLabelSize,\n    onChange: handleLabelSizeChange,\n    \"aria-labelledby\": \"cell-set-label-size-slider\",\n    valueLabelDisplay: \"auto\",\n    step: 1,\n    min: 8,\n    max: 36\n  }))), /* @__PURE__ */ React27.createElement(TableRow4, null, /* @__PURE__ */ React27.createElement(TableCell4, {\n    className: classes.labelCell\n  }, observationsLabelNice, \" Set Polygons Visible\"), /* @__PURE__ */ React27.createElement(TableCell4, {\n    className: classes.inputCell\n  }, /* @__PURE__ */ React27.createElement(Checkbox2, {\n    className: classes.checkbox,\n    checked: cellSetPolygonsVisible,\n    onChange: handlePolygonVisibilityChange,\n    name: \"scatterplot-option-cell-set-polygons\",\n    color: \"default\"\n  }))), /* @__PURE__ */ React27.createElement(TableRow4, null, /* @__PURE__ */ React27.createElement(TableCell4, {\n    className: classes.labelCell,\n    htmlFor: \"cell-radius-mode-select\"\n  }, observationsLabelNice, \" Radius Mode\"), /* @__PURE__ */ React27.createElement(TableCell4, {\n    className: classes.inputCell\n  }, /* @__PURE__ */ React27.createElement(OptionSelect, {\n    className: classes.select,\n    value: cellRadiusMode,\n    onChange: handleCellRadiusModeChange,\n    inputProps: {\n      id: \"cell-radius-mode-select\"\n    }\n  }, /* @__PURE__ */ React27.createElement(\"option\", {\n    value: \"auto\"\n  }, \"Auto\"), /* @__PURE__ */ React27.createElement(\"option\", {\n    value: \"manual\"\n  }, \"Manual\")))), /* @__PURE__ */ React27.createElement(TableRow4, null, /* @__PURE__ */ React27.createElement(TableCell4, {\n    className: classes.labelCell\n  }, observationsLabelNice, \" Radius\"), /* @__PURE__ */ React27.createElement(TableCell4, {\n    className: classes.inputCell\n  }, /* @__PURE__ */ React27.createElement(Slider3, {\n    disabled: cellRadiusMode !== \"manual\",\n    classes: { root: classes.slider, valueLabel: classes.sliderValueLabel },\n    value: cellRadius,\n    onChange: handleRadiusChange,\n    \"aria-labelledby\": \"cell-radius-slider\",\n    valueLabelDisplay: \"auto\",\n    step: 0.01,\n    min: 0.01,\n    max: 10\n  }))), /* @__PURE__ */ React27.createElement(TableRow4, null, /* @__PURE__ */ React27.createElement(TableCell4, {\n    className: classes.labelCell,\n    htmlFor: \"cell-opacity-mode-select\"\n  }, observationsLabelNice, \" Opacity Mode\"), /* @__PURE__ */ React27.createElement(TableCell4, {\n    className: classes.inputCell\n  }, /* @__PURE__ */ React27.createElement(OptionSelect, {\n    className: classes.select,\n    value: cellOpacityMode,\n    onChange: handleCellOpacityModeChange,\n    inputProps: {\n      id: \"cell-opacity-mode-select\"\n    }\n  }, /* @__PURE__ */ React27.createElement(\"option\", {\n    value: \"auto\"\n  }, \"Auto\"), /* @__PURE__ */ React27.createElement(\"option\", {\n    value: \"manual\"\n  }, \"Manual\")))), /* @__PURE__ */ React27.createElement(TableRow4, null, /* @__PURE__ */ React27.createElement(TableCell4, {\n    className: classes.labelCell\n  }, observationsLabelNice, \" Opacity\"), /* @__PURE__ */ React27.createElement(TableCell4, {\n    className: classes.inputCell\n  }, /* @__PURE__ */ React27.createElement(Slider3, {\n    disabled: cellOpacityMode !== \"manual\",\n    classes: { root: classes.slider, valueLabel: classes.sliderValueLabel },\n    value: cellOpacity,\n    onChange: handleOpacityChange,\n    \"aria-labelledby\": \"cell-opacity-slider\",\n    valueLabelDisplay: \"auto\",\n    step: 0.05,\n    min: 0,\n    max: 1\n  }))), /* @__PURE__ */ React27.createElement(TableRow4, null, /* @__PURE__ */ React27.createElement(TableCell4, {\n    className: classes.labelCell,\n    htmlFor: \"gene-expression-colormap-select\"\n  }, \"Gene Expression Colormap\"), /* @__PURE__ */ React27.createElement(TableCell4, {\n    className: classes.inputCell\n  }, /* @__PURE__ */ React27.createElement(OptionSelect, {\n    className: classes.select,\n    value: geneExpressionColormap,\n    onChange: handleGeneExpressionColormapChange,\n    inputProps: {\n      id: \"gene-expression-colormap-select\"\n    }\n  }, GLSL_COLORMAPS.map((cmap) => /* @__PURE__ */ React27.createElement(\"option\", {\n    key: cmap,\n    value: cmap\n  }, cmap))))), /* @__PURE__ */ React27.createElement(TableRow4, null, /* @__PURE__ */ React27.createElement(TableCell4, {\n    className: classes.labelCell\n  }, \"Gene Expression Colormap Range\"), /* @__PURE__ */ React27.createElement(TableCell4, {\n    className: classes.inputCell\n  }, /* @__PURE__ */ React27.createElement(Slider3, {\n    classes: { root: classes.slider, valueLabel: classes.sliderValueLabel },\n    value: geneExpressionColormapRange,\n    onChange: handleColormapRangeChangeDebounced,\n    \"aria-labelledby\": \"gene-expression-colormap-range-slider\",\n    valueLabelDisplay: \"auto\",\n    step: 5e-3,\n    min: 0,\n    max: 1\n  }))));\n}\n\n// src/components/shared-spatial-scatterplot/dynamic-opacity.js\nimport { OrthographicView as OrthographicView4 } from \"deck.gl\";\nimport clamp3 from \"lodash/clamp\";\nfunction getPointSizeDevicePixels(devicePixelRatio, zoom, xRange, yRange, width, height) {\n  const pointSize = 1e-3;\n  const pointScreenSizeMax = 10;\n  const pointScreenSizeMin = 1 / devicePixelRatio;\n  const scaleFactor = __pow(2, zoom);\n  const xAxisRange = 2 / (xRange * scaleFactor / width);\n  const yAxisRange = 2 / (yRange * scaleFactor / height);\n  const diagonalScreenSize = Math.sqrt(__pow(width, 2) + __pow(height, 2));\n  const diagonalAxisRange = Math.sqrt(__pow(xAxisRange, 2) + __pow(yAxisRange, 2));\n  const diagonalFraction = pointSize / diagonalAxisRange;\n  const deviceSize = diagonalFraction * diagonalScreenSize;\n  const pointSizeDevicePixels = clamp3(deviceSize, pointScreenSizeMin, pointScreenSizeMax);\n  return pointSizeDevicePixels;\n}\nfunction getPointOpacity(zoom, xRange, yRange, width, height, numCells, avgFillDensity) {\n  const N = numCells;\n  const [minX, minY, maxX, maxY] = new OrthographicView4({ zoom }).makeViewport({\n    height,\n    width,\n    viewState: { zoom, target: [0, 0, 0] }\n  }).getBounds();\n  const X = maxY - minY;\n  const Y = maxX - minX;\n  const X0 = xRange;\n  const Y0 = yRange;\n  const W = width;\n  const H = height;\n  let rho = avgFillDensity;\n  if (!rho) {\n    rho = Math.min(1, 1 / __pow(10, Math.log10(N) - 3));\n  }\n  const alpha = rho * W * H / N * (Y0 / Y) * (X0 / X);\n  const pointOpacity = clamp3(alpha, 1.01 / 255, 1);\n  return pointOpacity;\n}\n\n// src/components/scatterplot/ScatterplotSubscriber.js\nvar SCATTERPLOT_DATA_TYPES = [\"cells\", \"expression-matrix\", \"cell-sets\"];\nfunction ScatterplotSubscriber(props) {\n  const {\n    uuid,\n    coordinationScopes,\n    removeGridComponent,\n    theme,\n    disableTooltip = false,\n    observationsLabelOverride: observationsLabel = \"cell\",\n    observationsPluralLabelOverride: observationsPluralLabel = `${observationsLabel}s`,\n    title: titleOverride,\n    averageFillDensity\n  } = props;\n  const loaders = useLoaders();\n  const setComponentHover = useSetComponentHover();\n  const setComponentViewInfo = useSetComponentViewInfo(uuid);\n  const [{\n    dataset,\n    embeddingZoom: zoom,\n    embeddingTargetX: targetX,\n    embeddingTargetY: targetY,\n    embeddingTargetZ: targetZ,\n    embeddingType: mapping,\n    cellFilter,\n    cellHighlight,\n    geneSelection,\n    cellSetSelection,\n    cellSetColor,\n    cellColorEncoding,\n    additionalCellSets,\n    embeddingCellSetPolygonsVisible: cellSetPolygonsVisible,\n    embeddingCellSetLabelsVisible: cellSetLabelsVisible,\n    embeddingCellSetLabelSize: cellSetLabelSize,\n    embeddingCellRadius: cellRadiusFixed,\n    embeddingCellRadiusMode: cellRadiusMode,\n    embeddingCellOpacity: cellOpacityFixed,\n    embeddingCellOpacityMode: cellOpacityMode,\n    geneExpressionColormap,\n    geneExpressionColormapRange\n  }, {\n    setEmbeddingZoom: setZoom,\n    setEmbeddingTargetX: setTargetX,\n    setEmbeddingTargetY: setTargetY,\n    setEmbeddingTargetZ: setTargetZ,\n    setCellFilter,\n    setCellSetSelection,\n    setCellHighlight,\n    setCellSetColor,\n    setCellColorEncoding,\n    setAdditionalCellSets,\n    setEmbeddingCellSetPolygonsVisible: setCellSetPolygonsVisible,\n    setEmbeddingCellSetLabelsVisible: setCellSetLabelsVisible,\n    setEmbeddingCellSetLabelSize: setCellSetLabelSize,\n    setEmbeddingCellRadius: setCellRadiusFixed,\n    setEmbeddingCellRadiusMode: setCellRadiusMode,\n    setEmbeddingCellOpacity: setCellOpacityFixed,\n    setEmbeddingCellOpacityMode: setCellOpacityMode,\n    setGeneExpressionColormap,\n    setGeneExpressionColormapRange\n  }] = useCoordination(COMPONENT_COORDINATION_TYPES.scatterplot, coordinationScopes);\n  const [urls, addUrl, resetUrls] = useUrls();\n  const [width, height, deckRef] = useDeckCanvasSize();\n  const [\n    isReady,\n    setItemIsReady,\n    setItemIsNotReady,\n    resetReadyItems\n  ] = useReady(SCATTERPLOT_DATA_TYPES);\n  const title16 = titleOverride || `Scatterplot (${mapping})`;\n  useEffect7(() => {\n    resetUrls();\n    resetReadyItems();\n  }, [loaders, dataset]);\n  const [cells, cellsCount] = useCellsData(loaders, dataset, setItemIsReady, addUrl, true);\n  const [cellSets] = useCellSetsData(loaders, dataset, setItemIsReady, addUrl, false, { setCellSetSelection, setCellSetColor }, { cellSetSelection, cellSetColor });\n  const [expressionData] = useGeneSelection(loaders, dataset, setItemIsReady, false, geneSelection, setItemIsNotReady);\n  const [attrs] = useExpressionAttrs(loaders, dataset, setItemIsReady, addUrl, false);\n  const [dynamicCellRadius, setDynamicCellRadius] = useState8(cellRadiusFixed);\n  const [dynamicCellOpacity, setDynamicCellOpacity] = useState8(cellOpacityFixed);\n  const mergedCellSets = useMemo7(() => mergeCellSets(cellSets, additionalCellSets), [cellSets, additionalCellSets]);\n  const setCellSelectionProp = useCallback9((v) => {\n    setCellSelection(v, additionalCellSets, cellSetColor, setCellSetSelection, setAdditionalCellSets, setCellSetColor, setCellColorEncoding);\n  }, [\n    additionalCellSets,\n    cellSetColor,\n    setCellColorEncoding,\n    setAdditionalCellSets,\n    setCellSetColor,\n    setCellSetSelection\n  ]);\n  const cellColors = useMemo7(() => getCellColors({\n    cellColorEncoding,\n    expressionData: expressionData && expressionData[0],\n    geneSelection,\n    cellSets: mergedCellSets,\n    cellSetSelection,\n    cellSetColor,\n    expressionDataAttrs: attrs,\n    theme\n  }), [\n    cellColorEncoding,\n    geneSelection,\n    mergedCellSets,\n    theme,\n    cellSetSelection,\n    cellSetColor,\n    expressionData,\n    attrs\n  ]);\n  const [cellSetPolygonCache, setCellSetPolygonCache] = useState8([]);\n  const cacheHas = (cache, key) => cache.findIndex((el) => isEqual6(el[0], key)) !== -1;\n  const cacheGet = (cache, key) => {\n    var _a2;\n    return (_a2 = cache.find((el) => isEqual6(el[0], key))) == null ? void 0 : _a2[1];\n  };\n  const cellSetPolygons = useMemo7(() => {\n    var _a2;\n    if ((cellSetLabelsVisible || cellSetPolygonsVisible) && !cacheHas(cellSetPolygonCache, cellSetSelection) && ((_a2 = mergedCellSets == null ? void 0 : mergedCellSets.tree) == null ? void 0 : _a2.length) && Object.values(cells).length && (cellSetColor == null ? void 0 : cellSetColor.length)) {\n      const newCellSetPolygons = getCellSetPolygons({\n        cells,\n        mapping,\n        cellSets: mergedCellSets,\n        cellSetSelection,\n        cellSetColor,\n        theme\n      });\n      setCellSetPolygonCache((cache) => [...cache, [cellSetSelection, newCellSetPolygons]]);\n      return newCellSetPolygons;\n    }\n    return cacheGet(cellSetPolygonCache, cellSetSelection) || [];\n  }, [\n    cellSetPolygonsVisible,\n    cellSetPolygonCache,\n    cellSetLabelsVisible,\n    theme,\n    cells,\n    mapping,\n    mergedCellSets,\n    cellSetSelection,\n    cellSetColor\n  ]);\n  const cellSelection = useMemo7(() => Array.from(cellColors.keys()), [cellColors]);\n  const [xRange, yRange, xExtent, yExtent, numCells] = useMemo7(() => {\n    const cellValues = cells && Object.values(cells);\n    if (cellValues == null ? void 0 : cellValues.length) {\n      const cellCoordinates = Object.values(cells).map((c) => c.mappings[mapping]);\n      const xE = extent2(cellCoordinates, (c) => c[0]);\n      const yE = extent2(cellCoordinates, (c) => c[1]);\n      const xR = xE[1] - xE[0];\n      const yR = yE[1] - yE[0];\n      return [xR, yR, xE, yE, cellValues.length];\n    }\n    return [null, null, null, null, null];\n  }, [cells, mapping]);\n  useEffect7(() => {\n    if (xRange && yRange) {\n      const pointSizeDevicePixels = getPointSizeDevicePixels(window.devicePixelRatio, zoom, xRange, yRange, width, height);\n      setDynamicCellRadius(pointSizeDevicePixels);\n      const nextCellOpacityScale = getPointOpacity(zoom, xRange, yRange, width, height, numCells, averageFillDensity);\n      setDynamicCellOpacity(nextCellOpacityScale);\n      if (typeof targetX !== \"number\" || typeof targetY !== \"number\") {\n        const newTargetX = xExtent[0] + xRange / 2;\n        const newTargetY = yExtent[0] + yRange / 2;\n        const newZoom = Math.log2(Math.min(width / xRange, height / yRange));\n        setTargetX(newTargetX);\n        setTargetY(-newTargetY);\n        setZoom(newZoom);\n      }\n    }\n  }, [\n    xRange,\n    yRange,\n    xExtent,\n    yExtent,\n    numCells,\n    cells,\n    mapping,\n    width,\n    height,\n    zoom,\n    averageFillDensity\n  ]);\n  const getCellInfo = useCallback9((cellId) => {\n    const cellInfo = cells[cellId];\n    return __spreadValues({\n      [`${capitalize(observationsLabel)} ID`]: cellId\n    }, cellInfo ? cellInfo.factors : {});\n  }, [cells, observationsLabel]);\n  const cellSelectionSet = useMemo7(() => new Set(cellSelection), [cellSelection]);\n  const getCellIsSelected = useCallback9((cellEntry) => (cellSelectionSet || new Set([])).has(cellEntry[0]) ? 1 : 0, [cellSelectionSet]);\n  const cellRadius = cellRadiusMode === \"manual\" ? cellRadiusFixed : dynamicCellRadius;\n  const cellOpacity = cellOpacityMode === \"manual\" ? cellOpacityFixed : dynamicCellOpacity;\n  const getExpressionValue = useExpressionValueGetter({ attrs, expressionData });\n  return /* @__PURE__ */ React28.createElement(TitleInfo, {\n    title: title16,\n    info: `${cellsCount} ${pluralize(observationsLabel, observationsPluralLabel, cellsCount)}`,\n    removeGridComponent,\n    urls,\n    theme,\n    isReady,\n    options: /* @__PURE__ */ React28.createElement(ScatterplotOptions, {\n      observationsLabel,\n      cellRadius: cellRadiusFixed,\n      setCellRadius: setCellRadiusFixed,\n      cellRadiusMode,\n      setCellRadiusMode,\n      cellOpacity: cellOpacityFixed,\n      setCellOpacity: setCellOpacityFixed,\n      cellOpacityMode,\n      setCellOpacityMode,\n      cellSetLabelsVisible,\n      setCellSetLabelsVisible,\n      cellSetLabelSize,\n      setCellSetLabelSize,\n      cellSetPolygonsVisible,\n      setCellSetPolygonsVisible,\n      cellColorEncoding,\n      setCellColorEncoding,\n      geneExpressionColormap,\n      setGeneExpressionColormap,\n      geneExpressionColormapRange,\n      setGeneExpressionColormapRange\n    })\n  }, /* @__PURE__ */ React28.createElement(Scatterplot_default, {\n    ref: deckRef,\n    uuid,\n    theme,\n    viewState: { zoom, target: [targetX, targetY, targetZ] },\n    setViewState: ({ zoom: newZoom, target }) => {\n      setZoom(newZoom);\n      setTargetX(target[0]);\n      setTargetY(target[1]);\n      setTargetZ(target[2] || 0);\n    },\n    cells,\n    mapping,\n    cellFilter,\n    cellSelection,\n    cellHighlight,\n    cellColors,\n    cellSetPolygons,\n    cellSetLabelSize,\n    cellSetLabelsVisible,\n    cellSetPolygonsVisible,\n    setCellFilter,\n    setCellSelection: setCellSelectionProp,\n    setCellHighlight,\n    cellRadius,\n    cellOpacity,\n    cellColorEncoding,\n    geneExpressionColormap,\n    geneExpressionColormapRange,\n    setComponentHover: () => {\n      setComponentHover(uuid);\n    },\n    updateViewInfo: setComponentViewInfo,\n    getExpressionValue,\n    getCellIsSelected\n  }), !disableTooltip && /* @__PURE__ */ React28.createElement(ScatterplotTooltipSubscriber, {\n    parentUuid: uuid,\n    cellHighlight,\n    width,\n    height,\n    getCellInfo\n  }));\n}\n\n// src/app/VitessceGrid.js\nimport React30, {\n  useEffect as useEffect9\n} from \"react\";\n\n// src/app/vitessce-grid-layout/VitessceGridLayout.js\nimport React29 from \"react\";\nimport { Responsive, WidthProvider } from \"react-grid-layout\";\nimport isEqual7 from \"lodash/isEqual\";\n\n// src/app/vitessce-grid-layout/layout-utils.js\nvar COMPONENT_ID_PREFIX = \"i\";\nfunction sum(a) {\n  return a.reduce((x, y) => x + y, 0);\n}\nfunction makeGridLayout(colXs, colLayout) {\n  const colWs = [];\n  for (let i = 0; i < colXs.length; i++) {\n    colWs.push(colXs[i + 1] - colXs[i]);\n  }\n  return Object.entries(colLayout).map(([id, spec]) => ({\n    i: id,\n    y: spec.y,\n    h: spec.h || 1,\n    x: colXs[spec.x],\n    w: sum(colWs.slice(spec.x, spec.x + (spec.w || 1)))\n  }));\n}\nfunction getMaxRows(layouts) {\n  return Math.max(...Object.values(layouts).map((layout) => Math.max(...layout.map((xywh) => xywh.y + xywh.h))));\n}\nfunction resolveLayout(layout) {\n  const cols = {};\n  const layouts = {};\n  const breakpoints = {};\n  const components = {};\n  const positions = {};\n  (\"components\" in layout ? layout.components : layout).forEach((def, i) => {\n    const id = `${COMPONENT_ID_PREFIX}${i}`;\n    components[id] = {\n      component: def.component,\n      props: def.props || {},\n      coordinationScopes: def.coordinationScopes || {}\n    };\n    positions[id] = {\n      id,\n      x: def.x,\n      y: def.y,\n      w: def.w,\n      h: def.h\n    };\n  });\n  if (\"components\" in layout) {\n    Object.entries(layout.columns).forEach(([width, columnXs]) => {\n      cols[width] = columnXs[columnXs.length - 1];\n      layouts[width] = makeGridLayout(columnXs, positions);\n      breakpoints[width] = width;\n    });\n  } else {\n    const id = \"ID\";\n    const columnCount = 12;\n    cols[id] = columnCount;\n    layouts[id] = makeGridLayout(range(columnCount + 1), positions);\n    breakpoints[id] = 1e3;\n  }\n  return {\n    cols,\n    layouts,\n    breakpoints,\n    components\n  };\n}\n\n// src/app/vitessce-grid-layout/VitessceGridLayout.js\nvar ResponsiveGridLayout = WidthProvider(Responsive);\nvar ResponsiveHeightGridLayout = class extends ResponsiveGridLayout {\n  componentDidUpdate(prevProps) {\n    if (this.props.height !== prevProps.height) {\n      this.onWindowResize();\n    }\n  }\n};\nfunction VitessceGridLayout(props) {\n  const {\n    layout,\n    getComponent: getComponent2,\n    padding: padding2,\n    margin: margin2,\n    draggableHandle,\n    reactGridLayoutProps,\n    rowHeight,\n    theme,\n    height,\n    onRemoveComponent,\n    onLayoutChange: onLayoutChangeProp\n  } = props;\n  const {\n    cols: gridCols,\n    layouts: gridLayouts,\n    breakpoints: gridBreakpoints,\n    components: gridComponents\n  } = resolveLayout(layout);\n  const maxRows = getMaxRows(gridLayouts);\n  const style = /* @__PURE__ */ React29.createElement(\"style\", null, `\n        ${draggableHandle} {\n          cursor: grab;\n        }\n        ${draggableHandle}:active {\n          cursor: grabbing;\n        }\n     `);\n  const onLayoutChange = (newLayout) => {\n    if (newLayout.length === Object.entries(gridComponents).length) {\n      const newComponentProps = [];\n      newLayout.forEach((nextC) => {\n        const id = nextC.i;\n        const prevC = gridComponents[id];\n        if (prevC) {\n          const i = parseInt(id.substring(id.indexOf(COMPONENT_ID_PREFIX) + 1), 10);\n          const nextProps = {\n            x: nextC.x,\n            y: nextC.y,\n            w: nextC.w,\n            h: nextC.h\n          };\n          const prevProps = {\n            x: prevC.x,\n            y: prevC.y,\n            w: prevC.w,\n            h: prevC.h\n          };\n          if (!isEqual7(nextProps, prevProps)) {\n            newComponentProps.push([i, nextProps]);\n          }\n        }\n      });\n      if (newComponentProps.length > 0) {\n        onLayoutChangeProp(newComponentProps);\n      }\n    }\n  };\n  const layoutChildren = Object.entries(gridComponents).map(([k, v], i) => {\n    const Component = getComponent2(v.component);\n    const removeGridComponent = () => {\n      onRemoveComponent(i);\n    };\n    return /* @__PURE__ */ React29.createElement(\"div\", {\n      key: k\n    }, /* @__PURE__ */ React29.createElement(Component, __spreadProps(__spreadValues({}, v.props), {\n      uuid: i,\n      coordinationScopes: v.coordinationScopes,\n      theme,\n      removeGridComponent\n    })));\n  });\n  return gridLayouts && gridComponents && gridBreakpoints && gridCols && /* @__PURE__ */ React29.createElement(React29.Fragment, null, style, /* @__PURE__ */ React29.createElement(ResponsiveHeightGridLayout, __spreadValues({\n    className: \"layout\",\n    cols: gridCols,\n    layouts: gridLayouts,\n    breakpoints: gridBreakpoints,\n    height,\n    rowHeight: rowHeight || (window.innerHeight - 2 * padding2 - (maxRows - 1) * margin2) / maxRows,\n    containerPadding: [padding2, padding2],\n    margin: [margin2, margin2],\n    draggableHandle,\n    onLayoutChange\n  }, reactGridLayoutProps), layoutChildren));\n}\nVitessceGridLayout.defaultProps = {\n  padding: 10,\n  margin: 10\n};\n\n// src/app/vitessce-grid-utils.js\nimport {\n  useState as useState9,\n  useEffect as useEffect8,\n  useRef as useRef6\n} from \"react\";\n\n// src/loaders/JsonLoader.js\nimport Ajv from \"ajv\";\n\n// src/loaders/AbstractLoader.js\nimport uuidv43 from \"uuid/v4\";\nvar AbstractLoader = class {\n  constructor({\n    type: type16,\n    url,\n    requestInit,\n    options\n  }) {\n    this.type = type16;\n    this.url = url;\n    this.requestInit = requestInit;\n    this.options = options;\n    this.subscriptions = {};\n  }\n  load() {\n    throw new Error(\"The load() method has not been implemented.\");\n  }\n  subscribe(subscriber) {\n    const token = uuidv43();\n    this.subscriptions[token] = subscriber;\n    return token;\n  }\n  unsubscribe(token) {\n    delete this.subscriptions[token];\n  }\n  publish(data) {\n    Object.values(this.subscriptions).forEach((subscriber) => {\n      subscriber(data);\n    });\n  }\n};\n\n// src/loaders/AbstractTwoStepLoader.js\nvar AbstractTwoStepLoader = class extends AbstractLoader {\n  constructor(dataSource, params) {\n    super(params);\n    this.dataSource = dataSource;\n  }\n};\n\n// src/loaders/LoaderResult.js\nvar LoaderResult = class {\n  constructor(data, url, coordinationValues = null) {\n    this.data = data;\n    this.url = url;\n    this.coordinationValues = coordinationValues;\n  }\n};\n\n// src/schemas/cells.schema.json\nvar $schema3 = \"http://json-schema.org/draft-07/schema#\";\nvar $id3 = \"https://github.com/vitessce/vitessce/#cells\";\nvar title3 = \"Vitessce cell data\";\nvar type3 = \"object\";\nvar definitions3 = {\n  coord: {\n    type: \"array\",\n    minItems: 2,\n    maxItems: 2,\n    items: { type: \"number\" }\n  },\n  positiveFloatValues: {\n    type: \"object\",\n    patternProperties: {\n      \".\": {\n        type: \"number\",\n        minimum: 0\n      }\n    }\n  },\n  stringValues: {\n    type: \"object\",\n    patternProperties: {\n      \".\": {\n        type: \"string\"\n      }\n    }\n  }\n};\nvar patternProperties = {\n  \".\": {\n    additionalProperties: false,\n    required: [],\n    properties: {\n      mappings: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { $ref: \"#/definitions/coord\" }\n        }\n      },\n      xy: { $ref: \"#/definitions/coord\" },\n      genes: { $ref: \"#/definitions/positiveFloatValues\" },\n      factors: { $ref: \"#/definitions/stringValues\" },\n      poly: {\n        type: \"array\",\n        items: { $ref: \"#/definitions/coord\" }\n      }\n    }\n  }\n};\nvar cells_schema_default = {\n  $schema: $schema3,\n  $id: $id3,\n  title: title3,\n  type: type3,\n  definitions: definitions3,\n  patternProperties\n};\n\n// src/schemas/molecules.schema.json\nvar $schema4 = \"http://json-schema.org/draft-07/schema#\";\nvar $id4 = \"https://github.com/vitessce/vitessce/#molecules\";\nvar title4 = \"Vitessce molecule data\";\nvar type4 = \"object\";\nvar definitions4 = {\n  coord: {\n    type: \"array\",\n    maxItems: 2,\n    minItems: 2,\n    items: { type: \"number\" }\n  }\n};\nvar patternProperties2 = {\n  \".\": {\n    type: \"array\",\n    items: { $ref: \"#/definitions/coord\" }\n  }\n};\nvar molecules_schema_default = {\n  $schema: $schema4,\n  $id: $id4,\n  title: title4,\n  type: type4,\n  definitions: definitions4,\n  patternProperties: patternProperties2\n};\n\n// src/schemas/neighborhoods.schema.json\nvar $schema5 = \"http://json-schema.org/draft-07/schema#\";\nvar $id5 = \"https://github.com/vitessce/vitessce/#neighborhoods\";\nvar title5 = \"Vitessce neighborhood data\";\nvar type5 = \"object\";\nvar definitions5 = {\n  coord: {\n    type: \"array\",\n    maxItems: 2,\n    minItems: 2,\n    items: { type: \"number\" }\n  }\n};\nvar patternProperties3 = {\n  \".\": {\n    additionalProperties: false,\n    required: [\"poly\"],\n    properties: {\n      poly: {\n        type: \"array\",\n        maxItems: 3,\n        minItems: 3,\n        items: { $ref: \"#/definitions/coord\" }\n      }\n    }\n  }\n};\nvar neighborhoods_schema_default = {\n  $schema: $schema5,\n  $id: $id5,\n  title: title5,\n  type: type5,\n  definitions: definitions5,\n  patternProperties: patternProperties3\n};\n\n// src/schemas/raster.schema.json\nvar $schema6 = \"http://json-schema.org/draft-07/schema#\";\nvar $id6 = \"https://github.com/vitessce/vitessce/#raster\";\nvar title6 = \"Vitessce image data\";\nvar type6 = \"object\";\nvar definitions6 = {\n  transform: {\n    type: \"object\",\n    additionalProperties: false,\n    oneOf: [{ required: [\"scale\", \"translate\"] }, { required: [\"matrix\"] }],\n    properties: {\n      scale: { type: \"number\" },\n      translate: {\n        type: \"object\",\n        additionalProperties: false,\n        required: [\"y\", \"x\"],\n        properties: {\n          y: { type: \"number\" },\n          x: { type: \"number\" }\n        }\n      },\n      matrix: {\n        type: \"array\",\n        items: { type: \"number\" },\n        minItems: 16,\n        maxItems: 16\n      }\n    }\n  },\n  dimensions: {\n    type: \"array\",\n    items: {\n      type: \"object\",\n      additionalProperties: false,\n      required: [\"field\", \"type\", \"values\"],\n      properties: {\n        field: { type: \"string\" },\n        type: {\n          type: \"string\",\n          enum: [\"quantitative\", \"nominal\", \"ordinal\", \"temporal\"]\n        },\n        values: {\n          type: [\"array\", \"null\"],\n          items: { type: \"string\" }\n        }\n      }\n    }\n  },\n  metadata: {\n    type: \"object\",\n    additionalProperties: false,\n    anyOf: [{ required: [\"dimensions\", \"isPyramid\"] }, { required: [\"transform\"] }, { required: [\"omeTiffOffsetsUrl\"] }, { required: [\"isBitmask\"] }],\n    properties: {\n      dimensions: { $ref: \"#/definitions/dimensions\" },\n      isPyramid: { type: \"boolean\" },\n      transform: { $ref: \"#/definitions/transform\" },\n      isBitmask: { type: \"boolean\" },\n      omeTiffOffsetsUrl: { type: \"string\", format: \"uri\" }\n    }\n  },\n  requestInit: {\n    type: \"object\",\n    additionalProperties: false,\n    required: [],\n    properties: {\n      method: {\n        type: \"string\"\n      },\n      headers: {\n        type: \"object\"\n      },\n      body: {\n        type: \"string\"\n      },\n      mode: {\n        type: \"string\"\n      },\n      credentials: {\n        type: \"string\"\n      },\n      cache: {\n        type: \"string\"\n      },\n      redirect: {\n        type: \"string\"\n      },\n      referrer: {\n        type: \"string\"\n      },\n      integrity: {\n        type: \"string\"\n      }\n    }\n  },\n  image: {\n    type: \"object\",\n    additionalProperties: false,\n    required: [\"name\", \"url\", \"type\"],\n    properties: {\n      name: { type: \"string\" },\n      url: { type: \"string\", format: \"uri\" },\n      type: { type: \"string\" },\n      metadata: { $ref: \"#/definitions/metadata\" },\n      requestInit: { $ref: \"#/definitions/requestInit\" }\n    }\n  }\n};\nvar additionalProperties = false;\nvar required = [\"schemaVersion\", \"images\"];\nvar properties = {\n  schemaVersion: { type: \"string\" },\n  usePhysicalSizeScaling: { type: \"boolean\", description: \"Default is false: passing true in will infer scaling from the reported physcial size\" },\n  renderLayers: { type: \"array\", items: { type: \"string\" } },\n  images: {\n    type: \"array\",\n    items: { $ref: \"#/definitions/image\" }\n  }\n};\nvar raster_schema_default = {\n  $schema: $schema6,\n  $id: $id6,\n  title: title6,\n  type: type6,\n  definitions: definitions6,\n  additionalProperties,\n  required,\n  properties\n};\n\n// src/loaders/JsonLoader.js\nvar typeToSchema = {\n  cells: cells_schema_default,\n  molecules: molecules_schema_default,\n  neighborhoods: neighborhoods_schema_default,\n  raster: raster_schema_default,\n  \"cell-sets\": cell_sets_schema_default\n};\nvar JsonLoader = class extends AbstractTwoStepLoader {\n  constructor(dataSource, params) {\n    super(dataSource, params);\n    const { type: type16 } = params;\n    this.schema = typeToSchema[type16];\n  }\n  load() {\n    const {\n      url,\n      type: type16,\n      fileType\n    } = this;\n    if (this.data) {\n      return this.data;\n    }\n    this.data = this.dataSource.data.then((data) => {\n      if (data instanceof AbstractLoaderError) {\n        return Promise.reject(data);\n      }\n      const [valid, reason] = this.validate(data);\n      if (valid) {\n        return Promise.resolve(new LoaderResult(data, url));\n      }\n      return Promise.reject(new LoaderValidationError(type16, fileType, url, reason));\n    });\n    return this.data;\n  }\n  validate(data) {\n    const { schema, type: type16 } = this;\n    if (!schema) {\n      throw Error(`No schema for ${type16}`);\n    }\n    const validate = new Ajv().compile(schema);\n    const valid = validate(data);\n    let failureReason;\n    if (!valid) {\n      failureReason = validate.errors;\n    }\n    return [valid, failureReason];\n  }\n};\n\n// src/loaders/MatrixZarrLoader.js\nimport { openArray } from \"zarr\";\nvar MatrixZarrLoader = class extends AbstractTwoStepLoader {\n  loadAttrs() {\n    if (this.attrs) {\n      return this.attrs;\n    }\n    this.attrs = this.dataSource.getJson(\".zattrs\");\n    return this.attrs;\n  }\n  loadArr() {\n    const { store } = this.dataSource;\n    if (this.arr) {\n      return this.arr;\n    }\n    this.arr = openArray({ store, path: \"/\", mode: \"r\" }).then((z) => new Promise((resolve) => {\n      z.getRaw([null, null]).then(resolve);\n    }));\n    return this.arr;\n  }\n  load() {\n    return Promise.all([this.loadAttrs(), this.loadArr()]).then((data) => Promise.resolve(new LoaderResult(data, null)));\n  }\n};\n\n// src/schemas/genes.schema.json\nvar $schema7 = \"http://json-schema.org/draft-07/schema#\";\nvar $id7 = \"https://github.com/vitessce/vitessce/#genes\";\nvar title7 = \"Vitessce gene data\";\nvar type7 = \"object\";\nvar definitions7 = {\n  positiveFloatValues: {\n    type: \"object\",\n    patternProperties: {\n      \".\": {\n        type: \"number\",\n        minimum: 0\n      }\n    }\n  }\n};\nvar patternProperties4 = {\n  \".\": {\n    additionalProperties: false,\n    required: [\"max\", \"cells\"],\n    properties: {\n      max: { type: \"number\" },\n      cells: { $ref: \"#/definitions/positiveFloatValues\" }\n    }\n  }\n};\nvar genes_schema_default = {\n  $schema: $schema7,\n  $id: $id7,\n  title: title7,\n  type: type7,\n  definitions: definitions7,\n  patternProperties: patternProperties4\n};\n\n// src/loaders/GenesJsonAsMatrixZarrLoader.js\nvar GenesJsonAsMatrixZarrLoader = class extends JsonLoader {\n  constructor(dataSource, params) {\n    super(dataSource, params);\n    this.schema = genes_schema_default;\n  }\n  load() {\n    var __super = (key) => super[key];\n    return __async(this, null, function* () {\n      const payload = yield __super(\"load\").call(this).catch((reason) => Promise.resolve(reason));\n      if (payload instanceof AbstractLoaderError) {\n        return Promise.reject(payload);\n      }\n      const { data, url } = payload;\n      const cols = Object.keys(data);\n      const rows = cols.length > 0 ? Object.keys(data[cols[0]].cells) : [];\n      const attrs = { rows, cols };\n      const normalizedFlatMatrix = rows.flatMap((cellId) => cols.map((geneId) => data[geneId].cells[cellId] / data[geneId].max * 255));\n      const arr = { data: Uint8Array.from(normalizedFlatMatrix) };\n      return Promise.resolve(new LoaderResult([attrs, arr], url));\n    });\n  }\n};\n\n// src/loaders/ClustersJsonAsMatrixZarrLoader.js\nimport { extent as extent3 } from \"d3-array\";\nimport range6 from \"lodash/range\";\n\n// src/schemas/clusters.schema.json\nvar $schema8 = \"http://json-schema.org/draft-07/schema#\";\nvar $id8 = \"https://github.com/vitessce/vitessce/#clusters\";\nvar title8 = \"Vitessce cluster data\";\nvar type8 = \"object\";\nvar definitions8 = {\n  stringArray: {\n    type: \"array\",\n    items: { type: \"string\" }\n  },\n  matrix: {\n    type: \"array\",\n    items: {\n      type: \"array\",\n      items: {\n        type: \"number\",\n        minimum: 0,\n        maximum: 1\n      }\n    }\n  }\n};\nvar additionalProperties2 = false;\nvar required2 = [\"rows\", \"cols\", \"matrix\"];\nvar properties2 = {\n  rows: { $ref: \"#/definitions/stringArray\" },\n  cols: { $ref: \"#/definitions/stringArray\" },\n  matrix: { $ref: \"#/definitions/matrix\" }\n};\nvar clusters_schema_default = {\n  $schema: $schema8,\n  $id: $id8,\n  title: title8,\n  type: type8,\n  definitions: definitions8,\n  additionalProperties: additionalProperties2,\n  required: required2,\n  properties: properties2\n};\n\n// src/loaders/ClustersJsonAsMatrixZarrLoader.js\nvar ClustersJsonAsMatrixZarrLoader = class extends JsonLoader {\n  constructor(dataSource, params) {\n    super(dataSource, params);\n    this.schema = clusters_schema_default;\n  }\n  load() {\n    var __super = (key) => super[key];\n    return __async(this, null, function* () {\n      const payload = yield __super(\"load\").call(this).catch((reason) => Promise.resolve(reason));\n      if (payload instanceof AbstractLoaderError) {\n        return Promise.reject(payload);\n      }\n      const { data, url } = payload;\n      const { rows, cols, matrix } = data;\n      const attrs = {\n        rows: cols,\n        cols: rows\n      };\n      const shape = [attrs.rows.length, attrs.cols.length];\n      const normalizedMatrix = matrix.map((col) => {\n        const [min, max2] = extent3(col);\n        const normalize2 = (d) => Math.floor((d - min) / (max2 - min) * 255);\n        return col.map(normalize2);\n      });\n      const tNormalizedMatrix = range6(shape[0]).map((i) => range6(shape[1]).map((j) => normalizedMatrix[j][i]));\n      const normalizedFlatMatrix = tNormalizedMatrix.flat();\n      const arr = { data: Uint8Array.from(normalizedFlatMatrix) };\n      return Promise.resolve(new LoaderResult([attrs, arr], url));\n    });\n  }\n};\n\n// src/loaders/RasterJsonLoader.js\nimport { openArray as openArray2 } from \"zarr\";\nfunction initLoader(imageData) {\n  return __async(this, null, function* () {\n    const {\n      type: type16,\n      url,\n      metadata,\n      requestInit\n    } = imageData;\n    switch (type16) {\n      case \"zarr\": {\n        const {\n          dimensions,\n          isPyramid,\n          transform\n        } = metadata || {};\n        const labels = dimensions.map((d) => d.field);\n        let source;\n        if (isPyramid) {\n          const metadataUrl = `${url}${url.slice(-1) === \"/\" ? \"\" : \"/\"}.zmetadata`;\n          const response = yield fetch(metadataUrl);\n          const { metadata: zarrMetadata } = yield response.json();\n          const paths = Object.keys(zarrMetadata).filter((metaKey) => metaKey.includes(\".zarray\")).map((arrMetaKeys) => arrMetaKeys.slice(0, -7));\n          const data = yield Promise.all(paths.map((path) => openArray2({ store: url, path })));\n          const [yChunk, xChunk] = data[0].chunks.slice(-2);\n          const size = Math.min(yChunk, xChunk);\n          const tileSize = __pow(2, Math.floor(Math.log2(size)));\n          source = data.map((d) => new ZarrPixelSource(d, labels, tileSize));\n        } else {\n          const data = yield openArray2({ store: url });\n          source = new ZarrPixelSource(data, labels);\n        }\n        return { data: source, metadata: { dimensions, transform }, channels: (dimensions.find((d) => d.field === \"channel\") || dimensions[0]).values };\n      }\n      case \"ome-tiff\": {\n        let loader;\n        if (metadata && \"omeTiffOffsetsUrl\" in metadata) {\n          const { omeTiffOffsetsUrl } = metadata;\n          const res = yield fetch(omeTiffOffsetsUrl, requestInit || {});\n          if (res.ok) {\n            const offsets = yield res.json();\n            loader = yield loadOmeTiff(url, {\n              offsets,\n              headers: requestInit == null ? void 0 : requestInit.headers\n            });\n          } else {\n            throw new Error(\"Offsets not found but provided.\");\n          }\n        } else {\n          loader = yield loadOmeTiff(url, { headers: requestInit == null ? void 0 : requestInit.headers });\n        }\n        const { Pixels: { Channels } } = loader.metadata;\n        const channels2 = Array.isArray(Channels) ? Channels.map((channel, i) => channel.Name || `Channel ${i}`) : [Channels.Name || `Channel ${0}`];\n        return __spreadProps(__spreadValues({}, loader), { channels: channels2 });\n      }\n      default: {\n        throw Error(`Image type (${type16}) is not supported`);\n      }\n    }\n  });\n}\nvar RasterLoader = class extends JsonLoader {\n  constructor(dataSource, params) {\n    const { url, options } = params;\n    if (!url && options) {\n      dataSource.url = URL.createObjectURL(new Blob([JSON.stringify(options)]));\n    }\n    super(dataSource, params);\n    this.schema = raster_schema_default;\n  }\n  load() {\n    var __super = (key) => super[key];\n    return __async(this, null, function* () {\n      const payload = yield __super(\"load\").call(this).catch((reason) => Promise.resolve(reason));\n      if (payload instanceof AbstractLoaderError) {\n        return Promise.reject(payload);\n      }\n      const { data: raster } = payload;\n      const { images, renderLayers, usePhysicalSizeScaling = false } = raster;\n      const urls = images.filter((image) => !image.url.includes(\"zarr\")).map((image) => [image.url, image.name]);\n      const imagesWithLoaderCreators = images.map((image) => __spreadProps(__spreadValues({}, image), {\n        loaderCreator: () => __async(this, null, function* () {\n          return initLoader(image);\n        })\n      }));\n      if (!this.autoImageCache) {\n        this.autoImageCache = initializeRasterLayersAndChannels(imagesWithLoaderCreators, renderLayers, usePhysicalSizeScaling);\n      }\n      return this.autoImageCache.then((autoImages) => {\n        const [autoImageLayers, imageLayerLoaders, imageLayerMeta] = autoImages;\n        const coordinationValues = {\n          spatialRasterLayers: autoImageLayers\n        };\n        return new LoaderResult({ loaders: imageLayerLoaders, meta: imageLayerMeta }, urls, coordinationValues);\n      });\n    });\n  }\n};\n\n// src/loaders/OmeZarrLoader.js\nfunction hexToRgb(hex) {\n  const result = /^#?([A-F\\d]{2})([A-F\\d]{2})([A-F\\d]{2})$/i.exec(hex);\n  return [\n    parseInt(result[1].toLowerCase(), 16),\n    parseInt(result[2].toLowerCase(), 16),\n    parseInt(result[3].toLowerCase(), 16)\n  ];\n}\nvar OmeZarrLoader = class extends AbstractTwoStepLoader {\n  load() {\n    return __async(this, null, function* () {\n      var _a2, _b2;\n      const payload = yield this.dataSource.getJson(\".zattrs\").catch((reason) => Promise.resolve(reason));\n      if (payload instanceof AbstractLoaderError) {\n        return Promise.reject(payload);\n      }\n      const loader = yield loadOmeZarr(this.url, { fetchOptions: this.requestInit, type: \"multiscales\" });\n      const { metadata } = loader;\n      const { omero } = metadata;\n      if (!omero) {\n        console.error(\"Path for image not valid\");\n        return Promise.reject(payload);\n      }\n      const { rdefs, channels: channels2 } = omero;\n      const t = (_a2 = rdefs.defaultT) != null ? _a2 : 0;\n      const z = (_b2 = rdefs.defaultZ) != null ? _b2 : 0;\n      const imagesWithLoaderCreators = [\n        {\n          name: omero.name,\n          channels: channels2.map((channel, i) => ({\n            selection: { z, t, c: i },\n            slider: [channel.window.start, channel.window.end],\n            color: hexToRgb(channel.color)\n          })),\n          loaderCreator: () => __async(this, null, function* () {\n            return __spreadProps(__spreadValues({}, loader), { channels: channels2.map((c) => c.label) });\n          })\n        }\n      ];\n      const [\n        autoImageLayers,\n        imageLayerLoaders,\n        imageLayerMeta\n      ] = yield initializeRasterLayersAndChannels(imagesWithLoaderCreators, void 0);\n      const coordinationValues = {\n        spatialRasterLayers: autoImageLayers\n      };\n      return Promise.resolve(new LoaderResult({ loaders: imageLayerLoaders, meta: imageLayerMeta }, [], coordinationValues));\n    });\n  }\n};\n\n// src/components/sets/io.js\nimport Ajv2 from \"ajv\";\nimport isNil2 from \"lodash/isNil\";\nimport { dsvFormat } from \"d3-dsv\";\nimport { parse as json2csv } from \"json2csv\";\nfunction tryUpgradeTreeToLatestSchema(currTree, datatype) {\n  const validate = new Ajv2().compile(HIERARCHICAL_SCHEMAS[datatype].schema);\n  const valid = validate(currTree);\n  if (!valid) {\n    const failureReason = JSON.stringify(validate.errors, null, 2);\n    throw new Error(`Tree validation failed: ${failureReason}`);\n  } else if (currTree.datatype !== datatype) {\n    throw new Error(`The data type does not match the expected data type of '${datatype}'.`);\n  }\n  if (currTree.version === \"0.1.2\") {\n    return __spreadProps(__spreadValues({}, currTree), {\n      version: HIERARCHICAL_SCHEMAS[datatype].latestVersion,\n      tree: currTree.tree.map((levelZeroNode) => nodeTransform(levelZeroNode, (n) => !n.children && Array.isArray(n.set), (n) => __spreadProps(__spreadValues({}, n), { set: n.set.map((itemId) => [itemId, null]) }), []))\n    });\n  }\n  return currTree;\n}\nfunction handleImportJSON(result, datatype, theme) {\n  let importData = JSON.parse(result);\n  importData = tryUpgradeTreeToLatestSchema(importData, datatype);\n  return importData;\n}\nfunction handleImportTabular(result, datatype, theme) {\n  const dsvParser = dsvFormat(SEPARATOR_TABULAR);\n  const importData = dsvParser.parse(result, (row) => ({\n    groupName: row.groupName,\n    setName: row.setName,\n    setColor: row.setColor ? colorStringToArray(row.setColor) : getDefaultColor(theme),\n    obsId: row.obsId,\n    predictionScore: isNil2(row.predictionScore) || row.predictionScore === NA_VALUE_TABULAR ? null : +row.predictionScore\n  }));\n  const validate = new Ajv2().compile(TABULAR_SCHEMAS[datatype].schema);\n  const valid = validate(importData);\n  if (!valid) {\n    const failureReason = JSON.stringify(validate.errors, null, 2);\n    throw new Error(`Import validation failed: ${failureReason}`);\n  } else {\n    const treeToImport = {\n      version: HIERARCHICAL_SCHEMAS[datatype].latestVersion,\n      datatype,\n      tree: []\n    };\n    const uniqueGroupNames = Array.from(new Set(importData.map((d) => d.groupName)));\n    uniqueGroupNames.forEach((groupName) => {\n      const levelZeroNode = {\n        name: groupName,\n        children: []\n      };\n      const groupRows = importData.filter((d) => d.groupName === groupName);\n      const uniqueSetNames = Array.from(new Set(groupRows.map((d) => d.setName)));\n      uniqueSetNames.forEach((setName) => {\n        const setRows = groupRows.filter((d) => d.setName === setName);\n        const { setColor } = setRows[0];\n        const levelOneNode = {\n          name: setName,\n          color: setColor,\n          set: setRows.map((d) => [d.obsId, d.predictionScore])\n        };\n        levelZeroNode.children.push(levelOneNode);\n      });\n      treeToImport.tree.push(levelZeroNode);\n    });\n    return treeToImport;\n  }\n}\nfunction handleExportJSON(result) {\n  const jsonString = JSON.stringify(result);\n  const dataString = `data:${MIME_TYPE_JSON};charset=utf-8,${encodeURIComponent(jsonString)}`;\n  return dataString;\n}\nfunction handleExportTabular(result) {\n  const exportData = [];\n  result.tree.forEach((levelZeroNode) => {\n    levelZeroNode.children.forEach((levelOneNode) => {\n      if (levelOneNode.set) {\n        levelOneNode.set.forEach(([obsId, prob]) => {\n          exportData.push({\n            groupName: levelZeroNode.name,\n            setName: levelOneNode.name,\n            setColor: colorArrayToString(levelOneNode.color),\n            obsId,\n            predictionScore: isNil2(prob) ? NA_VALUE_TABULAR : prob\n          });\n        });\n      }\n    });\n  });\n  const csvString = json2csv(exportData, {\n    fields: [\"groupName\", \"setName\", \"setColor\", \"obsId\", \"predictionScore\"],\n    delimiter: SEPARATOR_TABULAR\n  });\n  const dataString = `data:${MIME_TYPE_TABULAR};charset=utf-8,${encodeURIComponent(csvString)}`;\n  return dataString;\n}\nfunction downloadForUser(dataString, fileName) {\n  const downloadAnchorNode = document.createElement(\"a\");\n  downloadAnchorNode.setAttribute(\"href\", dataString);\n  downloadAnchorNode.setAttribute(\"download\", fileName);\n  document.body.appendChild(downloadAnchorNode);\n  downloadAnchorNode.click();\n  downloadAnchorNode.remove();\n}\n\n// src/loaders/CellSetsJsonLoader.js\nvar CellSetsJsonLoader = class extends JsonLoader {\n  constructor(dataSource, params) {\n    super(dataSource, params);\n    this.schema = cell_sets_schema_default;\n  }\n  load() {\n    var __super = (key) => super[key];\n    return __async(this, null, function* () {\n      const payload = yield __super(\"load\").call(this).catch((reason) => Promise.resolve(reason));\n      if (payload instanceof AbstractLoaderError) {\n        return Promise.reject(payload);\n      }\n      const { data: rawData, url } = payload;\n      const upgradedData = tryUpgradeTreeToLatestSchema(rawData, \"cell\");\n      const coordinationValues = {\n        cellSetSelection: [],\n        cellSetColor: []\n      };\n      if (upgradedData && upgradedData.tree.length >= 1) {\n        const { tree } = upgradedData;\n        const newAutoSetSelectionParentName = tree[0].name;\n        const newAutoSetSelections = tree[0].children.map((node) => [newAutoSetSelectionParentName, node.name]);\n        const newAutoSetColors = initializeCellSetColor(upgradedData, []);\n        coordinationValues.cellSetSelection = newAutoSetSelections;\n        coordinationValues.cellSetColor = newAutoSetColors;\n      }\n      return Promise.resolve(new LoaderResult(upgradedData, url, coordinationValues));\n    });\n  }\n};\n\n// src/loaders/anndata-loaders/CellSetsZarrLoader.js\nimport { InternMap } from \"internmap\";\nfunction dataToCellSetsTree(data, options) {\n  const [cellNames, cellSets] = data;\n  const cellSetsTree = treeInitialize(SETS_DATATYPE_CELL);\n  cellSets.forEach((cellSetIds, j) => {\n    const name2 = options[j].groupName;\n    let levelZeroNode = {\n      name: name2,\n      children: []\n    };\n    if (cellSetIds.length > 0 && Array.isArray(cellSetIds[0])) {\n      const levelSets = new InternMap([], JSON.stringify);\n      cellNames.forEach((id, i) => {\n        const classes = cellSetIds.map((col) => col[i]);\n        if (levelSets.has(classes)) {\n          levelSets.get(classes).push([id, null]);\n        } else {\n          levelSets.set(classes, [[id, null]]);\n        }\n      });\n      const levels = Array.from(levelSets.keys());\n      const getNextLevelNames = (levelSuffixes) => {\n        const nextLevelNames = Array.from(new Set(levelSuffixes.map((l) => l[0])));\n        return nextLevelNames.sort((a, b) => a.localeCompare(b));\n      };\n      const getNode = (parentLevelPrefixes, currLevelName, childLevelSuffixes) => {\n        const isLeaf = childLevelSuffixes.length === 0;\n        const resultNode = {\n          name: currLevelName\n        };\n        if (isLeaf) {\n          resultNode.set = levelSets.get([...parentLevelPrefixes, currLevelName]);\n        } else {\n          const shouldBeLeaf = childLevelSuffixes.length === 1 && currLevelName === childLevelSuffixes[0][childLevelSuffixes[0].length - 1];\n          if (shouldBeLeaf) {\n            resultNode.set = levelSets.get([...parentLevelPrefixes, currLevelName, ...childLevelSuffixes[0]]);\n          } else {\n            const nextLevelNames = getNextLevelNames(childLevelSuffixes);\n            resultNode.children = nextLevelNames.map((nextLevelName) => getNode([...parentLevelPrefixes, currLevelName], nextLevelName, childLevelSuffixes.filter((l) => l[0] === nextLevelName).map((l) => l.slice(1)).filter((v) => v.length > 0)));\n          }\n        }\n        return resultNode;\n      };\n      const levelOneNodes = getNextLevelNames(levels).map((levelOneName) => getNode([], levelOneName, levels.filter((l) => l[0] === levelOneName).map((l) => l.slice(1))));\n      levelZeroNode.children = levelOneNodes;\n    } else {\n      const uniqueCellSetIds = Array.from(new Set(cellSetIds)).sort();\n      const clusters = {};\n      uniqueCellSetIds.forEach((id) => clusters[id] = { name: id, set: [] });\n      cellSetIds.forEach((id, i) => clusters[id].set.push([cellNames[i], null]));\n      Object.values(clusters).forEach((cluster) => levelZeroNode = nodeAppendChild(levelZeroNode, cluster));\n    }\n    cellSetsTree.tree.push(levelZeroNode);\n  });\n  return cellSetsTree;\n}\nvar CellSetsZarrLoader = class extends AbstractTwoStepLoader {\n  loadCellSetIds() {\n    const { options } = this;\n    const cellSetZarrLocation = options.map(({ setName }) => setName);\n    return this.dataSource.loadObsVariables(cellSetZarrLocation);\n  }\n  load() {\n    return __async(this, null, function* () {\n      if (!this.cellSetsTree) {\n        const { options } = this;\n        this.cellSetsTree = Promise.all([\n          this.dataSource.loadObsIndex(),\n          this.loadCellSetIds()\n        ]).then((data) => dataToCellSetsTree(data, options));\n      }\n      const cellSetsTree = yield this.cellSetsTree;\n      const coordinationValues = {};\n      const { tree } = cellSetsTree;\n      const newAutoSetSelectionParentName = tree[0].name;\n      const newAutoSetSelections = tree[0].children.map((node) => [\n        newAutoSetSelectionParentName,\n        node.name\n      ]);\n      const newAutoSetColors = initializeCellSetColor(cellSetsTree, []);\n      coordinationValues.cellSetSelection = newAutoSetSelections;\n      coordinationValues.cellSetColor = newAutoSetColors;\n      return Promise.resolve(new LoaderResult(cellSetsTree, null, coordinationValues));\n    });\n  }\n};\n\n// src/loaders/anndata-loaders/CellsZarrLoader.js\nvar CellsZarrLoader = class extends AbstractTwoStepLoader {\n  loadXy() {\n    const { xy } = this.options || {};\n    if (this.xy) {\n      return this.xy;\n    }\n    if (!this.xy && xy) {\n      this.xy = this.dataSource.loadNumeric(xy);\n      return this.xy;\n    }\n    this.xy = Promise.resolve(null);\n    return this.xy;\n  }\n  loadPoly() {\n    const { poly } = this.options || {};\n    if (this.poly) {\n      return this.poly;\n    }\n    if (!this.poly && poly) {\n      this.poly = this.dataSource.loadNumeric(poly);\n      return this.poly;\n    }\n    this.poly = Promise.resolve(null);\n    return this.poly;\n  }\n  loadMappings() {\n    const { mappings } = this.options || {};\n    if (this.mappings) {\n      return this.mappings;\n    }\n    if (!this.mappings && mappings) {\n      this.mappings = Promise.all(Object.keys(mappings).map((coordinationName) => __async(this, null, function* () {\n        const { key } = mappings[coordinationName];\n        return { coordinationName, arr: yield this.dataSource.loadNumeric(key) };\n      })));\n      return this.mappings;\n    }\n    this.mappings = Promise.resolve(null);\n    return this.mappings;\n  }\n  loadFactors() {\n    const { factors } = this.options || {};\n    if (factors) {\n      return this.dataSource.loadObsVariables(factors);\n    }\n    return Promise.resolve(null);\n  }\n  load() {\n    return __async(this, null, function* () {\n      if (!this.cells) {\n        this.cells = Promise.all([\n          this.loadMappings(),\n          this.loadXy(),\n          this.loadPoly(),\n          this.dataSource.loadObsIndex(),\n          this.loadFactors()\n        ]).then(([mappings, xy, poly, cellNames, factors]) => {\n          const cells = {};\n          cellNames.forEach((name2, i) => {\n            cells[name2] = {};\n            if (mappings) {\n              mappings.forEach(({ coordinationName, arr }) => {\n                if (!cells[name2].mappings) {\n                  cells[name2].mappings = {};\n                }\n                const { dims } = this.options.mappings[coordinationName];\n                cells[name2].mappings[coordinationName] = dims.map((dim) => arr.data[i][dim]);\n              });\n            }\n            if (xy) {\n              cells[name2].xy = xy.data[i];\n            }\n            if (poly) {\n              cells[name2].poly = poly.data[i];\n            }\n            if (factors) {\n              const factorsObj = {};\n              factors.forEach((factor, j) => factorsObj[this.options.factors[j].split(\"/\").slice(-1)] = factor[i]);\n              cells[name2].factors = factorsObj;\n            }\n          });\n          return cells;\n        });\n      }\n      return Promise.resolve(new LoaderResult(yield this.cells, null));\n    });\n  }\n};\n\n// src/loaders/anndata-loaders/MatrixZarrLoader.js\nimport { openArray as openArray3, slice as slice2 } from \"zarr\";\nimport { extent as extent4 } from \"d3-array\";\nvar normalize = (arr) => {\n  const [min, max2] = extent4(arr);\n  const ratio = 255 / (max2 - min);\n  const data = new Uint8Array(arr.map((i) => Math.floor((i - min) * ratio)));\n  return { data };\n};\nvar concatenateColumnVectors = (arr) => {\n  const numCols = arr.length;\n  const numRows = arr[0].length;\n  const { BYTES_PER_ELEMENT } = arr[0];\n  const view = new DataView(new ArrayBuffer(numCols * numRows * BYTES_PER_ELEMENT));\n  const TypedArray = arr[0].constructor;\n  const dtype = TypedArray.name.replace(\"Array\", \"\");\n  for (let i = 0; i < numCols; i += 1) {\n    for (let j = 0; j < numRows; j += 1) {\n      view[`set${dtype}`](BYTES_PER_ELEMENT * (j * numCols + i), arr[i][j], true);\n    }\n  }\n  return new TypedArray(view.buffer);\n};\nvar MatrixZarrLoader2 = class extends AbstractTwoStepLoader {\n  loadFilteredGeneNames() {\n    return __async(this, null, function* () {\n      if (this.filteredGeneNames) {\n        return this.filteredGeneNames;\n      }\n      const { geneFilter: geneFilterZarr } = this.options;\n      const getFilterFn = () => __async(this, null, function* () {\n        if (!geneFilterZarr)\n          return (data) => data;\n        const geneFilter = yield this.dataSource.getFlatArrDecompressed(geneFilterZarr);\n        return (data) => data.filter((_, j) => geneFilter[j]);\n      });\n      this.filteredGeneNames = Promise.all([this.dataSource.loadVarIndex(), getFilterFn()]).then(([data, filter]) => filter(data));\n      return this.filteredGeneNames;\n    });\n  }\n  _getFilteredGenes(filterZarr) {\n    return __async(this, null, function* () {\n      const filter = yield this.dataSource.getFlatArrDecompressed(filterZarr);\n      const geneNames = yield this.loadFilteredGeneNames();\n      const genes = geneNames.filter((_, i) => filter[i]);\n      return genes;\n    });\n  }\n  _getGeneIndices(selection) {\n    return __async(this, null, function* () {\n      const geneNames = yield this.loadFilteredGeneNames();\n      return selection.map((gene) => geneNames.indexOf(gene));\n    });\n  }\n  _getNumCells() {\n    return __async(this, null, function* () {\n      const cells = yield this.dataSource.loadObsIndex();\n      return cells.length;\n    });\n  }\n  _getNumGenes() {\n    return __async(this, null, function* () {\n      const genes = yield this.loadFilteredGeneNames();\n      return genes.length;\n    });\n  }\n  _openSparseArrays() {\n    return __async(this, null, function* () {\n      const { options: { matrix } } = this;\n      const { store } = this.dataSource;\n      if (this.sparseArrays) {\n        return this.sparseArrays;\n      }\n      this.sparseArrays = Promise.all([\"indptr\", \"indices\", \"data\"].map((name2) => openArray3({ store, path: `${matrix}/${name2}`, mode: \"r\" })));\n      return this.sparseArrays;\n    });\n  }\n  _loadCSCGeneSelection(selection) {\n    return __async(this, null, function* () {\n      const indices = yield this._getGeneIndices(selection);\n      const [indptrArr, indexArr, cellXGeneArr] = yield this._openSparseArrays();\n      const numCells = yield this._getNumCells();\n      const { data: cols } = yield indptrArr.getRaw(null);\n      return Promise.all(indices.map((index) => __async(this, null, function* () {\n        const startRowIndex = cols[index];\n        const endRowIndex = cols[index + 1];\n        const isColumnAllZeros = startRowIndex === endRowIndex;\n        const geneData = new Float32Array(numCells).fill(0);\n        if (isColumnAllZeros) {\n          return geneData;\n        }\n        const { data: rowIndices } = yield indexArr.get([\n          slice2(startRowIndex, endRowIndex)\n        ]);\n        const { data: cellXGeneData } = yield cellXGeneArr.get([\n          slice2(startRowIndex, endRowIndex)\n        ]);\n        for (let rowIndex = 0; rowIndex < rowIndices.length; rowIndex += 1) {\n          geneData[rowIndices[rowIndex]] = cellXGeneData[rowIndex];\n        }\n        return geneData;\n      })));\n    });\n  }\n  _loadCSRGeneSelection(selection) {\n    return __async(this, null, function* () {\n      const indices = yield this._getGeneIndices(selection);\n      const numGenes = yield this._getNumGenes();\n      const numCells = yield this._getNumCells();\n      const cellXGene = yield this._loadCSRSparseCellXGene();\n      return indices.map((index) => {\n        const geneData = new Float32Array(numCells).fill(0);\n        for (let i = 0; i < numCells; i += 1) {\n          geneData[i] = cellXGene[i * numGenes + index];\n        }\n        return geneData;\n      });\n    });\n  }\n  _loadCSRSparseCellXGene() {\n    return __async(this, null, function* () {\n      if (this._sparseMatrix) {\n        return this._sparseMatrix;\n      }\n      this._sparseMatrix = this._openSparseArrays().then((sparseArrays) => __async(this, null, function* () {\n        const { options: { matrix } } = this;\n        const { shape } = yield this.dataSource.getJson(`${matrix}/.zattrs`);\n        const [rows, cols, cellXGene] = yield Promise.all(sparseArrays.map((arr) => __async(this, null, function* () {\n          const { data } = yield arr.getRaw(null);\n          return data;\n        })));\n        const cellXGeneMatrix = new Float32Array(shape[0] * shape[1]).fill(0);\n        let row = 0;\n        rows.forEach((_, index) => {\n          const rowStart = rows[index];\n          const rowEnd = rows[index + 1];\n          for (let i = rowStart; i < rowEnd; i += 1) {\n            const val = cellXGene[i];\n            const col = cols[i];\n            cellXGeneMatrix[row * shape[1] + col] = val;\n          }\n          row += 1;\n        });\n        return cellXGeneMatrix;\n      }));\n      return this._sparseMatrix;\n    });\n  }\n  _loadCSCSparseCellXGene() {\n    return __async(this, null, function* () {\n      if (this._sparseMatrix) {\n        return this._sparseMatrix;\n      }\n      this._sparseMatrix = this._openSparseArrays().then((sparseArrays) => __async(this, null, function* () {\n        const { options: { matrix } } = this;\n        const { shape } = yield this.dataSource.getJson(`${matrix}/.zattrs`);\n        const [cols, rows, cellXGene] = yield Promise.all(sparseArrays.map((arr) => __async(this, null, function* () {\n          const { data } = yield arr.getRaw(null);\n          return data;\n        })));\n        const cellXGeneMatrix = new Float32Array(shape[0] * shape[1]).fill(0);\n        let col = 0;\n        cols.forEach((_, index) => {\n          const colStart = cols[index];\n          const colEnd = cols[index + 1];\n          for (let i = colStart; i < colEnd; i += 1) {\n            const val = cellXGene[i];\n            const row = rows[i];\n            cellXGeneMatrix[row * shape[1] + col] = val;\n          }\n          col += 1;\n        });\n        return cellXGeneMatrix;\n      }));\n      return this._sparseMatrix;\n    });\n  }\n  loadCellXGene() {\n    return __async(this, null, function* () {\n      const { store } = this.dataSource;\n      if (this.cellXGene) {\n        return this.cellXGene;\n      }\n      const { options: { matrix, matrixGeneFilter } } = this;\n      if (!this._matrixZattrs) {\n        this._matrixZattrs = yield this.dataSource.getJson(`${matrix}/.zattrs`);\n      }\n      const encodingType = this._matrixZattrs[\"encoding-type\"];\n      if (!matrixGeneFilter) {\n        if (encodingType === \"csr_matrix\") {\n          this.cellXGene = this._loadCSRSparseCellXGene().then((data) => normalize(data));\n        } else if (encodingType === \"csc_matrix\") {\n          this.cellXGene = this._loadCSCSparseCellXGene().then((data) => normalize(data));\n        } else {\n          if (!this.arr) {\n            this.arr = openArray3({ store, path: matrix, mode: \"r\" });\n          }\n          this.cellXGene = this.arr.then((z) => z.getRaw(null).then(({ data }) => normalize(data)));\n        }\n      } else if (encodingType === \"csr_matrix\") {\n        this.cellXGene = this._loadCSRSparseCellXGene().then((cellXGene) => __async(this, null, function* () {\n          const filteredGenes = yield this._getFilteredGenes(matrixGeneFilter);\n          const numGenesFiltered = filteredGenes.length;\n          const geneNames = yield this.loadFilteredGeneNames();\n          const numGenes = geneNames.length;\n          const numCells = yield this._getNumCells();\n          const cellXGeneMatrixFiltered = new Float32Array(numCells * numGenesFiltered).fill(0);\n          for (let i = 0; i < numGenesFiltered; i += 1) {\n            const index = geneNames.indexOf(filteredGenes[i]);\n            for (let j = 0; j < numCells; j += 1) {\n              cellXGeneMatrixFiltered[j * numGenesFiltered + i] = cellXGene[j * numGenes + index];\n            }\n          }\n          return normalize(cellXGeneMatrixFiltered);\n        }));\n      } else {\n        const genes = yield this._getFilteredGenes(matrixGeneFilter);\n        this.cellXGene = this.loadGeneSelection({ selection: genes, shouldNormalize: false }).then(({ data }) => normalize(concatenateColumnVectors(data)));\n      }\n      return this.cellXGene;\n    });\n  }\n  loadGeneSelection(_0) {\n    return __async(this, arguments, function* ({ selection, shouldNormalize = true }) {\n      const { options: { matrix } } = this;\n      const { store } = this.dataSource;\n      if (!this._matrixZattrs) {\n        this._matrixZattrs = yield this.dataSource.getJson(`${matrix}/.zattrs`);\n      }\n      const encodingType = this._matrixZattrs[\"encoding-type\"];\n      let genes;\n      if (encodingType === \"csc_matrix\") {\n        genes = yield this._loadCSCGeneSelection(selection);\n      } else if (encodingType === \"csr_matrix\") {\n        genes = yield this._loadCSRGeneSelection(selection);\n      } else {\n        if (!this.arr) {\n          this.arr = openArray3({ store, path: matrix, mode: \"r\" });\n        }\n        const indices = yield this._getGeneIndices(selection);\n        genes = yield Promise.all(indices.map((index) => this.arr.then((z) => z.get([null, index])).then(({ data }) => data)));\n      }\n      return { data: genes.map((i) => shouldNormalize ? normalize(i).data : i), url: null };\n    });\n  }\n  loadAttrs() {\n    return Promise.all([this.dataSource.loadObsIndex(), this.loadFilteredGeneNames()]).then((d) => {\n      const [cellNames, geneNames] = d;\n      const attrs = { rows: cellNames, cols: geneNames };\n      return {\n        data: attrs,\n        url: null\n      };\n    });\n  }\n  load() {\n    return Promise.all([this.loadAttrs(), this.loadCellXGene()]).then((d) => __async(this, null, function* () {\n      const [{ data: attrs }, cellXGene] = d;\n      const {\n        options: { matrixGeneFilter: matrixGeneFilterZarr }\n      } = this;\n      if (matrixGeneFilterZarr) {\n        const matrixGeneFilter = yield this.dataSource.getFlatArrDecompressed(matrixGeneFilterZarr);\n        attrs.cols = attrs.cols.filter((_, i) => matrixGeneFilter[i]);\n      }\n      return Promise.resolve(new LoaderResult([attrs, cellXGene], null));\n    }));\n  }\n};\n\n// src/loaders/anndata-loaders/index.js\nvar anndata_loaders_default = { CellSetsZarrLoader, CellsZarrLoader, MatrixZarrLoader: MatrixZarrLoader2 };\n\n// src/loaders/GenomicProfilesZarrLoader.js\nvar GenomicProfilesZarrLoader = class extends AbstractTwoStepLoader {\n  loadAttrs() {\n    if (this.attrs) {\n      return this.attrs;\n    }\n    this.attrs = this.dataSource.getJson(\".zattrs\");\n    return this.attrs;\n  }\n  load() {\n    const { url } = this;\n    return this.loadAttrs().then((attrs) => Promise.resolve(new LoaderResult(attrs, url)));\n  }\n};\n\n// src/loaders/data-sources/AnnDataSource.js\nimport { openArray as openArray4 } from \"zarr\";\nimport range7 from \"lodash/range\";\n\n// src/loaders/data-sources/ZarrDataSource.js\nimport { HTTPStore as HTTPStore2, KeyError as KeyError2 } from \"zarr\";\nvar ZarrDataSource = class {\n  constructor({ url, requestInit }) {\n    const supportedMethods = [\"GET\"];\n    this.store = new HTTPStore2(url, {\n      supportedMethods,\n      fetchOptions: requestInit\n    });\n  }\n  getJson(key) {\n    return __async(this, null, function* () {\n      try {\n        const buf = yield this.store.getItem(key);\n        const text = new TextDecoder(\"utf-8\").decode(buf);\n        return JSON.parse(text);\n      } catch (err) {\n        if (err instanceof KeyError2) {\n          return {};\n        }\n        throw err;\n      }\n    });\n  }\n};\n\n// src/loaders/data-sources/AnnDataSource.js\nvar readFloat32FromUint8 = (bytes) => {\n  if (bytes.length !== 4) {\n    throw new Error(\"readFloat32 only takes in length 4 byte buffers\");\n  }\n  return new Int32Array(bytes.buffer)[0];\n};\nvar HEADER_LENGTH = 4;\nfunction parseVlenUtf8(buffer) {\n  const decoder = new TextDecoder();\n  let data = 0;\n  const dataEnd = data + buffer.length;\n  const length = readFloat32FromUint8(buffer.slice(data, HEADER_LENGTH));\n  if (buffer.length < HEADER_LENGTH) {\n    throw new Error(\"corrupt buffer, missing or truncated header\");\n  }\n  data += HEADER_LENGTH;\n  const output = new Array(length);\n  for (let i = 0; i < length; i += 1) {\n    if (data + 4 > dataEnd) {\n      throw new Error(\"corrupt buffer, data seem truncated\");\n    }\n    const l = readFloat32FromUint8(buffer.slice(data, data + 4));\n    data += 4;\n    if (data + l > dataEnd) {\n      throw new Error(\"corrupt buffer, data seem truncated\");\n    }\n    output[i] = decoder.decode(buffer.slice(data, data + l));\n    data += l;\n  }\n  return output;\n}\nvar AnnDataSource = class extends ZarrDataSource {\n  constructor(...args) {\n    super(...args);\n    this.obsPromises = new Map();\n  }\n  loadObsVariables(obsPaths) {\n    const obsPromises = obsPaths.map((obsPath) => {\n      const getObsCol = (obsCol) => {\n        if (!this.obsPromises.has(obsCol)) {\n          const obsPromise = this._loadObsVariable(obsCol).catch((err) => {\n            this.obsPromises.delete(obsCol);\n            throw err;\n          });\n          this.obsPromises.set(obsCol, obsPromise);\n        }\n        return this.obsPromises.get(obsCol);\n      };\n      if (Array.isArray(obsPath)) {\n        return Promise.resolve(Promise.all(obsPath.map(getObsCol)));\n      }\n      return getObsCol(obsPath);\n    });\n    return Promise.all(obsPromises);\n  }\n  _loadObsVariable(obs) {\n    return __async(this, null, function* () {\n      const { store } = this;\n      const { categories } = yield this.getJson(`${obs}/.zattrs`);\n      let categoriesValues;\n      if (categories) {\n        const { dtype } = yield this.getJson(`/obs/${categories}/.zarray`);\n        if (dtype === \"|O\") {\n          categoriesValues = yield this.getFlatArrDecompressed(`/obs/${categories}`);\n        }\n      }\n      const obsArr = yield openArray4({ store, path: obs, mode: \"r\" });\n      const obsValues = yield obsArr.get();\n      const { data } = obsValues;\n      const mappedObsValues = Array.from(data).map((i) => !categoriesValues ? String(i) : categoriesValues[i]);\n      return mappedObsValues;\n    });\n  }\n  loadNumeric(path) {\n    const { store } = this;\n    return openArray4({\n      store,\n      path,\n      mode: \"r\"\n    }).then((arr) => arr.get());\n  }\n  getFlatArrDecompressed(path) {\n    const { store } = this;\n    return openArray4({\n      store,\n      path,\n      mode: \"r\"\n    }).then((z) => __async(this, null, function* () {\n      let data;\n      const parseAndMergeTextBytes = (dbytes) => {\n        const text = parseVlenUtf8(dbytes);\n        if (!data) {\n          data = text;\n        } else {\n          data = data.concat(text);\n        }\n      };\n      const mergeBytes = (dbytes) => {\n        if (!data) {\n          data = dbytes;\n        } else {\n          const tmp = new Uint8Array(dbytes.buffer.byteLength + data.buffer.byteLength);\n          tmp.set(new Uint8Array(data.buffer), 0);\n          tmp.set(dbytes, data.buffer.byteLength);\n          data = tmp;\n        }\n      };\n      const numRequests = Math.ceil(z.meta.shape[0] / z.meta.chunks[0]);\n      const requests = range7(numRequests).map((item) => __async(this, null, function* () {\n        return store.getItem(`${z.keyPrefix}${String(item)}`).then((buf) => z.compressor.then((compressor) => compressor.decode(buf)));\n      }));\n      const dbytesArr = yield Promise.all(requests);\n      dbytesArr.forEach((dbytes) => {\n        if (Array.isArray(z.meta.filters) && z.meta.filters[0].id === \"vlen-utf8\") {\n          parseAndMergeTextBytes(dbytes);\n        } else {\n          mergeBytes(dbytes);\n        }\n      });\n      const {\n        meta: {\n          shape: [length]\n        }\n      } = z;\n      return data.slice(0, length);\n    }));\n  }\n  loadObsIndex() {\n    if (this.obsIndex) {\n      return this.obsIndex;\n    }\n    this.obsIndex = this.getJson(\"obs/.zattrs\").then(({ _index }) => this.getFlatArrDecompressed(`/obs/${_index}`));\n    return this.obsIndex;\n  }\n  loadVarIndex() {\n    if (this.varIndex) {\n      return this.varIndex;\n    }\n    this.varIndex = this.getJson(\"var/.zattrs\").then(({ _index }) => this.getFlatArrDecompressed(`/var/${_index}`));\n    return this.varIndex;\n  }\n};\n\n// src/loaders/errors/DataSourceFetchError.js\nvar DataSourceFetchError = class extends AbstractLoaderError {\n  constructor(source, url, headers) {\n    super(`${source} Error HTTP Status fetching from ${url}`);\n    this.source = source;\n    this.url = url;\n    this.headers = headers;\n  }\n  warnInConsole() {\n    const { source, url, headers } = this;\n    console.warn(`${source} failed to fetch from ${url} with headers ${headers}`);\n  }\n};\n\n// src/loaders/data-sources/JsonSource.js\nvar JsonSource = class {\n  constructor({ url, requestInit }) {\n    this.url = url;\n    this.requestInit = requestInit;\n  }\n  get data() {\n    if (this._data)\n      return this._data;\n    this._data = fetch(this.url, this.requestInit).then((response) => {\n      if (!response.ok) {\n        return Promise.reject(new DataSourceFetchError(\"JsonSource\", this.url, response.headers));\n      }\n      return response.json();\n    }).catch(() => Promise.reject(new DataSourceFetchError(\"JsonSource\", this.url, {})));\n    return this._data;\n  }\n};\n\n// src/loaders/types.js\nvar ANNDATA = \"anndata\";\nvar fileTypeToLoaderAndSource = {\n  \"expression-matrix.zarr\": [ZarrDataSource, MatrixZarrLoader],\n  \"clusters.json\": [JsonSource, ClustersJsonAsMatrixZarrLoader],\n  \"genes.json\": [JsonSource, GenesJsonAsMatrixZarrLoader],\n  \"cells.json\": [JsonSource, JsonLoader],\n  \"molecules.json\": [JsonSource, JsonLoader],\n  \"neighborhoods.json\": [JsonSource, JsonLoader],\n  \"raster.json\": [JsonSource, RasterLoader],\n  \"raster.ome-zarr\": [ZarrDataSource, OmeZarrLoader],\n  \"cell-sets.json\": [JsonSource, CellSetsJsonLoader],\n  [`${ANNDATA}-cell-sets.zarr`]: [AnnDataSource, anndata_loaders_default.CellSetsZarrLoader],\n  [`${ANNDATA}-cells.zarr`]: [AnnDataSource, anndata_loaders_default.CellsZarrLoader],\n  [`${ANNDATA}-expression-matrix.zarr`]: [AnnDataSource, anndata_loaders_default.MatrixZarrLoader],\n  \"genomic-profiles.zarr\": [ZarrDataSource, GenomicProfilesZarrLoader]\n};\nfunction getSourceAndLoaderFromFileType(type16) {\n  return fileTypeToLoaderAndSource[type16] || [JsonSource, JsonLoader];\n}\n\n// src/app/vitessce-grid-utils.js\nfunction getNumRows(layout) {\n  let max2 = 0;\n  let bottomY;\n  for (let i = 0, len = layout.length; i < len; i++) {\n    bottomY = layout[i].y + layout[i].h;\n    if (bottomY > max2)\n      max2 = bottomY;\n  }\n  return max2;\n}\nfunction getRowHeight(containerHeight, numRows, margin2, padding2) {\n  const effectiveContainerHeight = containerHeight - 2 * padding2 - (numRows - 1) * margin2;\n  return effectiveContainerHeight / numRows;\n}\nfunction useRowHeight(config, initialRowHeight, height, margin2, padding2) {\n  const [containerHeight, setContainerHeight] = useState9(height);\n  const [rowHeight, setRowHeight] = useState9(initialRowHeight);\n  const containerRef = useRef6();\n  useEffect8(() => {\n    const numRows = getNumRows(config.layout);\n    const newRowHeight = getRowHeight(containerHeight, numRows, margin2, padding2);\n    setRowHeight(newRowHeight);\n  }, [containerHeight, config, margin2, padding2]);\n  useEffect8(() => {\n    if (height !== null && height !== void 0) {\n      setContainerHeight(height);\n    }\n  }, [height]);\n  useEffect8(() => {\n    if (height !== null && height !== void 0) {\n      return () => {\n      };\n    }\n    function onWindowResize() {\n      if (!containerRef.current)\n        return;\n      const containerRect = containerRef.current.getBoundingClientRect();\n      setContainerHeight(containerRect.height);\n    }\n    window.addEventListener(\"resize\", onWindowResize);\n    onWindowResize();\n    return () => {\n      window.removeEventListener(\"resize\", onWindowResize);\n    };\n  }, [containerRef, height]);\n  return [rowHeight, containerRef];\n}\nfunction createLoaders(datasets, configDescription) {\n  const result = {};\n  const dataSources = {};\n  datasets.forEach((dataset) => {\n    const datasetLoaders = {\n      name: dataset.name,\n      description: dataset.description || configDescription,\n      loaders: {}\n    };\n    dataset.files.forEach((file) => {\n      const [DataSourceClass, LoaderClass] = getSourceAndLoaderFromFileType(file.fileType);\n      const { url, options, requestInit } = file;\n      const fileId = url || JSON.stringify(options);\n      if (!(fileId in dataSources)) {\n        dataSources[fileId] = new DataSourceClass({ url, requestInit });\n      }\n      const loader = new LoaderClass(dataSources[fileId], file);\n      datasetLoaders.loaders[file.type] = loader;\n    });\n    result[dataset.uid] = datasetLoaders;\n  });\n  return result;\n}\n\n// src/app/VitessceGrid.js\nvar padding = 10;\nvar margin = 5;\nfunction VitessceGrid(props) {\n  const {\n    rowHeight: initialRowHeight,\n    config,\n    getComponent: getComponent2,\n    theme,\n    height\n  } = props;\n  const [rowHeight, containerRef] = useRowHeight(config, initialRowHeight, height, margin, padding);\n  const onResize = useEmitGridResize();\n  useEffect9(() => {\n    onResize();\n  }, [rowHeight, onResize]);\n  const viewConfigStoreApi = useViewConfigStoreApi();\n  const setViewConfig = useSetViewConfig(viewConfigStoreApi);\n  const setLoaders = useSetLoaders();\n  const removeComponent = useRemoveComponent();\n  const changeLayout = useChangeLayout();\n  const layout = useLayout();\n  useEffect9(() => {\n    if (config) {\n      setViewConfig(config);\n      const loaders = createLoaders(config.datasets, config.description);\n      setLoaders(loaders);\n    } else {\n      setLoaders({});\n    }\n  }, [config, setViewConfig, setLoaders]);\n  return /* @__PURE__ */ React30.createElement(\"div\", {\n    ref: containerRef,\n    className: `vitessce-container vitessce-theme-${theme}`\n  }, layout && /* @__PURE__ */ React30.createElement(VitessceGridLayout, {\n    layout,\n    height,\n    rowHeight,\n    theme,\n    getComponent: getComponent2,\n    draggableHandle: \".title\",\n    margin,\n    padding,\n    onRemoveComponent: removeComponent,\n    onLayoutChange: changeLayout,\n    reactGridLayoutProps: {\n      onResize,\n      onResizeStop: onResize\n    }\n  }));\n}\n\n// src/app/app.js\nimport React75, { useEffect as useEffect26, useRef as useRef11, useState as useState21 } from \"react\";\n\n// src/app/api.js\nvar urlPrefix = \"https://s3.amazonaws.com/vitessce-data/0.0.31/master_release\";\nfunction makeLayerNameToConfig(datasetPrefix) {\n  return (name2) => ({\n    name: name2,\n    type: name2.toUpperCase(),\n    fileType: `${name2}.json`,\n    url: `${urlPrefix}/${datasetPrefix}/${datasetPrefix}.${name2}.json`\n  });\n}\nvar linnarssonLayerNames = [\n  \"cells\",\n  \"cell-sets\",\n  \"raster\",\n  \"molecules\",\n  \"neighborhoods\"\n];\nvar linnarssonDescription = \"Spatial organization of the somatosensory cortex revealed by cyclic smFISH\";\nvar linnarssonBase = {\n  description: linnarssonDescription,\n  layers: [\n    ...linnarssonLayerNames.map(makeLayerNameToConfig(\"linnarsson\")),\n    __spreadProps(__spreadValues({}, makeLayerNameToConfig(\"linnarsson\")(\"clusters\")), {\n      type: \"EXPRESSION-MATRIX\"\n    })\n  ]\n};\nvar linnarssonBaseNoClusters = {\n  description: linnarssonDescription,\n  layers: linnarssonLayerNames.filter((name2) => name2 !== \"clusters\").map(makeLayerNameToConfig(\"linnarsson\"))\n};\nvar driesDescription = \"Giotto, a pipeline for integrative analysis and visualization of single-cell spatial transcriptomic data\";\nvar driesBase = {\n  description: driesDescription,\n  layers: [\n    \"cells\",\n    \"cell-sets\"\n  ].map(makeLayerNameToConfig(\"dries\"))\n};\nvar wangDescription = \"Multiplexed imaging of high-density libraries of RNAs with MERFISH and expansion microscopy\";\nvar wangBase = {\n  description: wangDescription,\n  layers: [\n    ...[\"cells\", \"molecules\"].map(makeLayerNameToConfig(\"wang\")),\n    __spreadProps(__spreadValues({}, makeLayerNameToConfig(\"wang\")(\"genes\")), {\n      name: \"expression-matrix\",\n      type: \"EXPRESSION-MATRIX\"\n    })\n  ]\n};\nvar vanderbiltDescription = \"High Bit Depth (uint16) Multiplex Immunofluorescence Imaging\";\nvar vanderbiltBase = {\n  description: vanderbiltDescription,\n  layers: [\n    \"raster\"\n  ].map(makeLayerNameToConfig(\"spraggins\"))\n};\nvar configs = {\n  \"just-scatter\": {\n    version: \"0.1.0\",\n    public: false,\n    layers: [\n      {\n        name: \"cells\",\n        type: \"CELLS\",\n        fileType: \"cells.json\",\n        url: `${urlPrefix}/linnarsson/linnarsson.cells.json`,\n        requestInit: {\n          method: \"GET\",\n          headers: { \"x-foo\": \"FAKE\" },\n          mode: \"cors\",\n          credentials: \"omit\",\n          cache: \"no-store\",\n          redirect: \"error\",\n          referrer: \"FAKE\",\n          integrity: \"FAKE\"\n        }\n      }\n    ],\n    name: \"Linnarsson, just scatterplot\",\n    staticLayout: [\n      {\n        component: \"scatterplot\",\n        props: {\n          mapping: \"t-SNE\",\n          view: {\n            zoom: 0.75,\n            target: [0, 0, 0]\n          }\n        },\n        x: 0,\n        y: 0,\n        w: 12,\n        h: 2\n      }\n    ]\n  },\n  \"just-scatter-expression\": {\n    version: \"0.1.0\",\n    public: false,\n    layers: [\n      {\n        name: \"cells\",\n        type: \"CELLS\",\n        url: \"https://s3.amazonaws.com/vitessce-data/0.0.20/master_release/linnarsson/linnarsson.cells.json\"\n      },\n      {\n        name: \"genes\",\n        type: \"GENES\",\n        url: \"https://s3.amazonaws.com/vitessce-data/0.0.20/master_release/linnarsson/linnarsson.genes.json\"\n      }\n    ],\n    name: \"Linnarsson, just scatterplot and expression\",\n    staticLayout: [\n      {\n        component: \"scatterplot\",\n        props: {\n          mapping: \"t-SNE\",\n          view: {\n            zoom: 0.75,\n            target: [0, 0, 0]\n          }\n        },\n        x: 0,\n        y: 0,\n        w: 8,\n        h: 2\n      },\n      {\n        component: \"genes\",\n        x: 8,\n        y: 2,\n        w: 4,\n        h: 2\n      }\n    ]\n  },\n  \"linnarsson-2018\": {\n    name: \"Linnarsson\",\n    version: \"1.0.0\",\n    description: linnarssonDescription,\n    public: true,\n    datasets: [\n      {\n        uid: \"linnarsson-2018\",\n        name: \"Linnarsson 2018\",\n        description: `Linnarsson: ${linnarssonDescription}`,\n        files: linnarssonBase.layers.map((file) => ({\n          type: file.type.toLowerCase(),\n          fileType: file.fileType,\n          url: file.url\n        }))\n      }\n    ],\n    initStrategy: \"auto\",\n    coordinationSpace: {\n      embeddingZoom: {\n        PCA: 0,\n        TSNE: 0.75\n      },\n      embeddingType: {\n        PCA: \"PCA\",\n        TSNE: \"t-SNE\"\n      },\n      spatialZoom: {\n        A: -5.5\n      },\n      spatialTargetX: {\n        A: 16e3\n      },\n      spatialTargetY: {\n        A: 2e4\n      }\n    },\n    layout: [\n      {\n        component: \"description\",\n        x: 0,\n        y: 0,\n        w: 2,\n        h: 1\n      },\n      {\n        component: \"layerController\",\n        x: 0,\n        y: 1,\n        w: 2,\n        h: 4\n      },\n      {\n        component: \"status\",\n        x: 0,\n        y: 5,\n        w: 2,\n        h: 1\n      },\n      {\n        component: \"spatial\",\n        coordinationScopes: {\n          spatialZoom: \"A\",\n          spatialTargetX: \"A\",\n          spatialTargetY: \"A\"\n        },\n        x: 2,\n        y: 0,\n        w: 4,\n        h: 4\n      },\n      {\n        component: \"genes\",\n        x: 9,\n        y: 0,\n        w: 3,\n        h: 2\n      },\n      {\n        component: \"cellSets\",\n        x: 9,\n        y: 3,\n        w: 3,\n        h: 2\n      },\n      {\n        component: \"heatmap\",\n        props: {\n          transpose: true\n        },\n        x: 2,\n        y: 4,\n        w: 5,\n        h: 2\n      },\n      {\n        component: \"cellSetExpression\",\n        x: 7,\n        y: 4,\n        w: 3,\n        h: 2\n      },\n      {\n        component: \"expressionHistogram\",\n        x: 10,\n        y: 4,\n        w: 2,\n        h: 2\n      },\n      {\n        component: \"scatterplot\",\n        coordinationScopes: {\n          embeddingType: \"PCA\",\n          embeddingZoom: \"PCA\"\n        },\n        x: 6,\n        y: 0,\n        w: 3,\n        h: 2\n      },\n      {\n        component: \"scatterplot\",\n        coordinationScopes: {\n          embeddingType: \"TSNE\",\n          embeddingZoom: \"TSNE\"\n        },\n        x: 6,\n        y: 2,\n        w: 3,\n        h: 2\n      }\n    ]\n  },\n  \"linnarsson-2018-two-spatial\": __spreadProps(__spreadValues({}, linnarssonBase), {\n    version: \"0.1.0\",\n    name: \"Linnarsson (two spatial)\",\n    staticLayout: [\n      {\n        component: \"spatial\",\n        props: {\n          view: {\n            zoom: -8,\n            target: [18e3, 18e3, 0]\n          }\n        },\n        x: 0,\n        y: 0,\n        w: 5,\n        h: 2\n      },\n      {\n        component: \"scatterplot\",\n        props: { mapping: \"t-SNE\" },\n        x: 0,\n        y: 2,\n        w: 5,\n        h: 2\n      },\n      {\n        component: \"spatial\",\n        props: {\n          view: {\n            zoom: -6,\n            target: [18e3, 18e3, 0]\n          }\n        },\n        x: 5,\n        y: 0,\n        w: 5,\n        h: 2\n      },\n      {\n        component: \"scatterplot\",\n        props: { mapping: \"PCA\" },\n        x: 5,\n        y: 2,\n        w: 5,\n        h: 2\n      },\n      {\n        component: \"genes\",\n        x: 10,\n        y: 2,\n        w: 2,\n        h: 2\n      },\n      {\n        component: \"heatmap\",\n        x: 0,\n        y: 4,\n        w: 12\n      }\n    ]\n  }),\n  \"linnarsson-2018-just-spatial\": __spreadProps(__spreadValues({}, linnarssonBaseNoClusters), {\n    version: \"0.1.0\",\n    name: \"Linnarsson (just spatial)\",\n    staticLayout: [\n      {\n        component: \"spatial\",\n        props: {\n          view: {\n            zoom: -6.5,\n            target: [18e3, 18e3, 0]\n          }\n        },\n        x: 0,\n        y: 0,\n        w: 10,\n        h: 2\n      },\n      {\n        component: \"genes\",\n        x: 10,\n        y: 1,\n        w: 2,\n        h: 1\n      }\n    ]\n  }),\n  \"linnarsson-2018-static\": __spreadProps(__spreadValues({}, linnarssonBase), {\n    version: \"0.1.0\",\n    name: \"Linnarsson (static layout)\",\n    staticLayout: [\n      {\n        component: \"description\",\n        props: {\n          description: `Linnarsson (static layout): ${linnarssonDescription}`\n        },\n        x: 0,\n        y: 0,\n        w: 3,\n        h: 1\n      },\n      {\n        component: \"scatterplot\",\n        props: { mapping: \"t-SNE\" },\n        x: 0,\n        y: 2,\n        w: 3,\n        h: 2\n      },\n      {\n        component: \"spatial\",\n        props: {\n          view: {\n            zoom: -6.5,\n            target: [18e3, 18e3, 0]\n          }\n        },\n        x: 3,\n        y: 0,\n        w: 6,\n        h: 4\n      },\n      {\n        component: \"genes\",\n        x: 9,\n        y: 2,\n        w: 3,\n        h: 2\n      },\n      {\n        component: \"heatmap\",\n        x: 0,\n        y: 4,\n        w: 12,\n        h: 1\n      }\n    ]\n  }),\n  \"linnarsson-2018-dozen\": __spreadProps(__spreadValues({}, linnarssonBase), {\n    version: \"0.1.0\",\n    name: \"Linnarsson (static layout, redundant components for performance testing)\",\n    staticLayout: [\n      {\n        component: \"spatial\",\n        props: {\n          view: {\n            zoom: -6.5,\n            target: [18e3, 18e3, 0]\n          }\n        },\n        x: 0,\n        y: 0,\n        w: 4,\n        h: 1\n      },\n      {\n        component: \"spatial\",\n        props: {\n          view: {\n            zoom: -6.5,\n            target: [18e3, 18e3, 0]\n          }\n        },\n        x: 0,\n        y: 1,\n        w: 4,\n        h: 1\n      },\n      {\n        component: \"spatial\",\n        props: {\n          view: {\n            zoom: -6.5,\n            target: [18e3, 18e3, 0]\n          }\n        },\n        x: 4,\n        y: 0,\n        w: 4,\n        h: 1\n      },\n      {\n        component: \"spatial\",\n        props: {\n          view: {\n            zoom: -6.5,\n            target: [18e3, 18e3, 0]\n          }\n        },\n        x: 4,\n        y: 1,\n        w: 4,\n        h: 1\n      },\n      {\n        component: \"scatterplot\",\n        props: { mapping: \"t-SNE\" },\n        x: 0,\n        y: 2,\n        w: 4,\n        h: 1\n      },\n      {\n        component: \"scatterplot\",\n        props: { mapping: \"t-SNE\" },\n        x: 0,\n        y: 3,\n        w: 4,\n        h: 1\n      },\n      {\n        component: \"scatterplot\",\n        props: { mapping: \"t-SNE\" },\n        x: 0,\n        y: 4,\n        w: 4,\n        h: 1\n      },\n      {\n        component: \"scatterplot\",\n        props: { mapping: \"t-SNE\" },\n        x: 0,\n        y: 5,\n        w: 4,\n        h: 1\n      },\n      {\n        component: \"scatterplot\",\n        props: { mapping: \"PCA\" },\n        x: 4,\n        y: 2,\n        w: 4,\n        h: 1\n      },\n      {\n        component: \"scatterplot\",\n        props: { mapping: \"PCA\" },\n        x: 4,\n        y: 3,\n        w: 4,\n        h: 1\n      },\n      {\n        component: \"scatterplot\",\n        props: { mapping: \"PCA\" },\n        x: 4,\n        y: 4,\n        w: 4,\n        h: 1\n      },\n      {\n        component: \"scatterplot\",\n        props: { mapping: \"PCA\" },\n        x: 4,\n        y: 5,\n        w: 4,\n        h: 1\n      },\n      {\n        component: \"genes\",\n        x: 8,\n        y: 2,\n        w: 4,\n        h: 2\n      },\n      {\n        component: \"heatmap\",\n        x: 8,\n        y: 4,\n        w: 4,\n        h: 2\n      }\n    ]\n  }),\n  \"dries-2019\": {\n    name: \"Dries\",\n    version: \"1.0.0\",\n    description: driesDescription,\n    public: true,\n    datasets: [\n      {\n        uid: \"dries-2019\",\n        name: \"Dries 2019\",\n        files: driesBase.layers.map((file) => ({\n          type: file.type.toLowerCase(),\n          fileType: file.fileType,\n          url: file.url\n        }))\n      }\n    ],\n    initStrategy: \"auto\",\n    coordinationSpace: {\n      embeddingType: {\n        TSNE: \"t-SNE\",\n        UMAP: \"UMAP\"\n      },\n      embeddingCellSetPolygonsVisible: {\n        A: false\n      },\n      embeddingCellSetLabelsVisible: {\n        A: true\n      },\n      embeddingCellSetLabelSize: {\n        A: 16\n      },\n      embeddingCellRadius: {\n        A: 1\n      },\n      embeddingZoom: {\n        TSNE: 3,\n        UMAP: 3\n      },\n      spatialZoom: {\n        A: -4.4\n      },\n      spatialTargetX: {\n        A: 3800\n      },\n      spatialTargetY: {\n        A: -900\n      }\n    },\n    layout: [\n      {\n        component: \"description\",\n        x: 9,\n        y: 0,\n        w: 3,\n        h: 2\n      },\n      {\n        component: \"status\",\n        x: 9,\n        y: 2,\n        w: 3,\n        h: 2\n      },\n      {\n        component: \"cellSets\",\n        x: 9,\n        y: 4,\n        w: 3,\n        h: 4\n      },\n      {\n        component: \"cellSetSizes\",\n        x: 5,\n        y: 4,\n        w: 4,\n        h: 4\n      },\n      {\n        component: \"scatterplot\",\n        coordinationScopes: {\n          embeddingType: \"TSNE\",\n          embeddingZoom: \"TSNE\",\n          embeddingCellSetLabelsVisible: \"A\",\n          embeddingCellSetLabelSize: \"A\",\n          embeddingCellSetPolygonsVisible: \"A\",\n          embeddingCellRadius: \"A\"\n        },\n        x: 0,\n        y: 2,\n        w: 5,\n        h: 4\n      },\n      {\n        component: \"spatial\",\n        props: {\n          cellRadius: 50\n        },\n        coordinationScopes: {\n          spatialZoom: \"A\",\n          spatialTargetX: \"A\",\n          spatialTargetY: \"A\"\n        },\n        x: 5,\n        y: 0,\n        w: 4,\n        h: 4\n      },\n      {\n        component: \"scatterplot\",\n        coordinationScopes: {\n          embeddingType: \"UMAP\",\n          embeddingZoom: \"UMAP\",\n          embeddingCellSetLabelsVisible: \"A\",\n          embeddingCellSetLabelSize: \"A\",\n          embeddingCellSetPolygonsVisible: \"A\",\n          embeddingCellRadius: \"A\"\n        },\n        x: 0,\n        y: 0,\n        w: 5,\n        h: 4\n      }\n    ]\n  },\n  \"wang-2019\": {\n    name: \"Wang\",\n    version: \"1.0.0\",\n    description: wangDescription,\n    public: true,\n    datasets: [\n      {\n        uid: \"wang-2019\",\n        name: \"Wang 2019\",\n        files: wangBase.layers.map((file) => ({\n          type: file.type.toLowerCase(),\n          fileType: file.fileType,\n          url: file.url\n        }))\n      }\n    ],\n    initStrategy: \"auto\",\n    coordinationSpace: {\n      spatialZoom: {\n        A: -1\n      },\n      spatialLayers: {\n        A: [\n          {\n            type: \"molecules\",\n            radius: 2,\n            opacity: 1,\n            visible: true\n          },\n          {\n            type: \"cells\",\n            opacity: 1,\n            radius: 50,\n            visible: true,\n            stroked: false\n          }\n        ]\n      }\n    },\n    layout: [\n      {\n        component: \"spatial\",\n        coordinationScopes: {\n          spatialZoom: \"A\",\n          spatialLayers: \"A\"\n        },\n        props: {},\n        x: 0,\n        y: 0,\n        w: 10,\n        h: 2\n      },\n      {\n        component: \"genes\",\n        x: 10,\n        y: 0,\n        w: 2,\n        h: 4\n      },\n      {\n        component: \"expressionHistogram\",\n        x: 0,\n        y: 2,\n        w: 10,\n        h: 2\n      }\n    ]\n  },\n  vanderbilt: __spreadProps(__spreadValues({}, vanderbiltBase), {\n    version: \"0.1.0\",\n    name: \"Spraggins\",\n    public: true,\n    staticLayout: [\n      {\n        component: \"spatial\",\n        props: {\n          view: {\n            zoom: -6.5,\n            target: [2e4, 2e4, 0]\n          }\n        },\n        x: 0,\n        y: 0,\n        w: 9,\n        h: 2\n      },\n      {\n        component: \"layerController\",\n        x: 9,\n        y: 0,\n        w: 3,\n        h: 2\n      }\n    ]\n  }),\n  \"just-higlass\": {\n    public: false,\n    initStrategy: \"auto\",\n    version: \"1.0.0\",\n    datasets: [\n      {\n        uid: \"higlass-dataset\",\n        name: \"HiGlass Dataset\",\n        files: []\n      }\n    ],\n    name: \"HiGlass demo\",\n    coordinationSpace: {\n      genomicZoomX: {\n        A: 0\n      },\n      genomicZoomY: {\n        A: 0\n      },\n      genomicTargetX: {\n        A: 15499999995e-1\n      },\n      genomicTargetY: {\n        A: 15499999995e-1\n      }\n    },\n    layout: [\n      {\n        component: \"higlass\",\n        coordinationScopes: {\n          genomicZoomX: \"A\",\n          genomicZoomY: \"A\",\n          genomicTargetX: \"A\",\n          genomicTargetY: \"A\"\n        },\n        props: {\n          hgViewConfig: {\n            uid: \"aa\",\n            autocompleteSource: \"/api/v1/suggest/?d=OHJakQICQD6gTD7skx4EWA&\",\n            genomePositionSearchBox: {\n              autocompleteServer: \"//higlass.io/api/v1\",\n              autocompleteId: \"OHJakQICQD6gTD7skx4EWA\",\n              chromInfoServer: \"//higlass.io/api/v1\",\n              chromInfoId: \"hg19\",\n              visible: true\n            },\n            chromInfoPath: \"//s3.amazonaws.com/pkerp/data/hg19/chromSizes.tsv\",\n            tracks: {\n              top: [\n                {\n                  type: \"horizontal-gene-annotations\",\n                  height: 60,\n                  tilesetUid: \"OHJakQICQD6gTD7skx4EWA\",\n                  server: \"//higlass.io/api/v1\",\n                  uid: \"OHJakQICQD6gTD7skx4EWA\",\n                  options: {\n                    name: \"Gene Annotations (hg19)\",\n                    fontSize: 10,\n                    labelPosition: \"hidden\",\n                    labelLeftMargin: 0,\n                    labelRightMargin: 0,\n                    labelTopMargin: 0,\n                    labelBottomMargin: 0,\n                    minHeight: 24,\n                    geneAnnotationHeight: 16,\n                    geneLabelPosition: \"outside\",\n                    geneStrandSpacing: 4,\n                    showMousePosition: true,\n                    mousePositionColor: \"#ff00ff\",\n                    plusStrandColor: \"#fdff54\",\n                    minusStrandColor: \"#68bf30\",\n                    labelColor: \"black\",\n                    trackBorderWidth: 0,\n                    trackBorderColor: \"black\"\n                  }\n                },\n                {\n                  chromInfoPath: \"//s3.amazonaws.com/pkerp/data/hg19/chromSizes.tsv\",\n                  type: \"horizontal-chromosome-labels\",\n                  height: 30,\n                  uid: \"X4e_1DKiQHmyghDa6lLMVA\",\n                  options: {\n                    color: \"#808080\",\n                    stroke: \"black\",\n                    fontSize: 12,\n                    fontIsLeftAligned: false,\n                    showMousePosition: true,\n                    mousePositionColor: \"#ff00ff\"\n                  }\n                }\n              ],\n              left: [\n                {\n                  type: \"vertical-gene-annotations\",\n                  width: 60,\n                  tilesetUid: \"OHJakQICQD6gTD7skx4EWA\",\n                  server: \"//higlass.io/api/v1\",\n                  options: {\n                    labelPosition: \"bottomRight\",\n                    name: \"Gene Annotations (hg19)\",\n                    fontSize: 10,\n                    labelLeftMargin: 0,\n                    labelRightMargin: 0,\n                    labelTopMargin: 0,\n                    labelBottomMargin: 0,\n                    minWidth: 24,\n                    geneAnnotationHeight: 16,\n                    geneLabelPosition: \"outside\",\n                    geneStrandSpacing: 4,\n                    showMousePosition: true,\n                    mousePositionColor: \"#ff00ff\",\n                    plusStrandColor: \"#fdff54\",\n                    minusStrandColor: \"#68bf30\",\n                    labelColor: \"black\",\n                    trackBorderWidth: 0,\n                    trackBorderColor: \"black\"\n                  },\n                  uid: \"dqBTMH78Rn6DeSyDBoAEXw\"\n                },\n                {\n                  chromInfoPath: \"//s3.amazonaws.com/pkerp/data/hg19/chromSizes.tsv\",\n                  type: \"vertical-chromosome-labels\",\n                  width: 30,\n                  uid: \"RHdQK4IRQ7yJeDmKWb7Pcg\",\n                  options: {\n                    color: \"#777777\",\n                    stroke: \"black\",\n                    fontSize: 12,\n                    fontIsLeftAligned: false,\n                    minWidth: 35,\n                    showMousePosition: true,\n                    mousePositionColor: \"#ff00ff\"\n                  }\n                }\n              ],\n              center: [\n                {\n                  uid: \"c1\",\n                  type: \"combined\",\n                  height: 600,\n                  contents: [\n                    {\n                      server: \"//higlass.io/api/v1\",\n                      tilesetUid: \"CQMd6V_cRw6iCI_-Unl3PQ\",\n                      type: \"heatmap\",\n                      options: {\n                        maxZoom: null,\n                        labelPosition: \"bottomRight\",\n                        name: \"Rao et al. (2014) GM12878 MboI (allreps) 1kb\",\n                        backgroundColor: \"black\",\n                        labelLeftMargin: 0,\n                        labelRightMargin: 0,\n                        labelTopMargin: 0,\n                        labelBottomMargin: 0,\n                        labelShowResolution: true,\n                        labelShowAssembly: true,\n                        labelColor: \"#ffffff\",\n                        labelTextOpacity: 0.5,\n                        labelBackgroundColor: \"black\",\n                        labelBackgroundOpacity: 0.01,\n                        colorRange: [\n                          \"#000000\",\n                          \"#222e54\",\n                          \"#448db2\",\n                          \"#68bf30\",\n                          \"#fdff54\",\n                          \"#FFFFFF\"\n                        ],\n                        colorbarBackgroundColor: \"black\",\n                        colorbarBackgroundOpacity: 0.01,\n                        colorbarPosition: \"topRight\",\n                        trackBorderWidth: 0,\n                        trackBorderColor: \"black\",\n                        heatmapValueScaling: \"log\",\n                        showMousePosition: true,\n                        mousePositionColor: \"#ff00ff\",\n                        showTooltip: false,\n                        extent: \"full\",\n                        zeroValueColor: null,\n                        scaleStartPercent: \"0.00000\",\n                        scaleEndPercent: \"1.00000\"\n                      },\n                      height: 500,\n                      uid: \"GjuZed1ySGW1IzZZqFB9BA\",\n                      transforms: [\n                        {\n                          name: \"ICE\",\n                          value: \"weight\"\n                        }\n                      ]\n                    }\n                  ],\n                  options: {}\n                }\n              ],\n              right: [],\n              bottom: [],\n              whole: [],\n              gallery: []\n            },\n            layout: {\n              w: 12,\n              h: 12,\n              x: 0,\n              y: 0,\n              moved: false,\n              static: false\n            }\n          }\n        },\n        x: 0,\n        y: 0,\n        w: 8,\n        h: 2\n      },\n      {\n        component: \"higlass\",\n        coordinationScopes: {\n          genomicZoomX: \"A\",\n          genomicZoomY: \"A\",\n          genomicTargetX: \"A\",\n          genomicTargetY: \"A\"\n        },\n        props: {\n          hgViewConfig: {\n            uid: \"aa\",\n            autocompleteSource: \"/api/v1/suggest/?d=OHJakQICQD6gTD7skx4EWA&\",\n            genomePositionSearchBox: {\n              autocompleteServer: \"//higlass.io/api/v1\",\n              autocompleteId: \"OHJakQICQD6gTD7skx4EWA\",\n              chromInfoServer: \"//higlass.io/api/v1\",\n              chromInfoId: \"hg19\",\n              visible: true\n            },\n            chromInfoPath: \"//s3.amazonaws.com/pkerp/data/hg19/chromSizes.tsv\",\n            tracks: {\n              top: [\n                {\n                  type: \"horizontal-gene-annotations\",\n                  height: 60,\n                  tilesetUid: \"OHJakQICQD6gTD7skx4EWA\",\n                  server: \"//higlass.io/api/v1\",\n                  uid: \"OHJakQICQD6gTD7skx4EWA\",\n                  options: {\n                    name: \"Gene Annotations (hg19)\",\n                    fontSize: 10,\n                    labelPosition: \"hidden\",\n                    labelLeftMargin: 0,\n                    labelRightMargin: 0,\n                    labelTopMargin: 0,\n                    labelBottomMargin: 0,\n                    minHeight: 24,\n                    geneAnnotationHeight: 16,\n                    geneLabelPosition: \"outside\",\n                    geneStrandSpacing: 4,\n                    showMousePosition: true,\n                    mousePositionColor: \"#ff00ff\",\n                    plusStrandColor: \"#fdff54\",\n                    minusStrandColor: \"#68bf30\",\n                    labelColor: \"black\",\n                    trackBorderWidth: 0,\n                    trackBorderColor: \"black\"\n                  }\n                },\n                {\n                  chromInfoPath: \"//s3.amazonaws.com/pkerp/data/hg19/chromSizes.tsv\",\n                  type: \"horizontal-chromosome-labels\",\n                  height: 30,\n                  uid: \"X4e_1DKiQHmyghDa6lLMVA\",\n                  options: {\n                    color: \"#808080\",\n                    stroke: \"black\",\n                    fontSize: 12,\n                    fontIsLeftAligned: false,\n                    showMousePosition: true,\n                    mousePositionColor: \"#ff00ff\"\n                  }\n                }\n              ],\n              left: [\n                {\n                  type: \"vertical-gene-annotations\",\n                  width: 60,\n                  tilesetUid: \"OHJakQICQD6gTD7skx4EWA\",\n                  server: \"//higlass.io/api/v1\",\n                  options: {\n                    labelPosition: \"bottomRight\",\n                    name: \"Gene Annotations (hg19)\",\n                    fontSize: 10,\n                    labelLeftMargin: 0,\n                    labelRightMargin: 0,\n                    labelTopMargin: 0,\n                    labelBottomMargin: 0,\n                    minWidth: 24,\n                    geneAnnotationHeight: 16,\n                    geneLabelPosition: \"outside\",\n                    geneStrandSpacing: 4,\n                    showMousePosition: true,\n                    mousePositionColor: \"#ff00ff\",\n                    plusStrandColor: \"#fdff54\",\n                    minusStrandColor: \"#68bf30\",\n                    labelColor: \"black\",\n                    trackBorderWidth: 0,\n                    trackBorderColor: \"black\"\n                  },\n                  uid: \"dqBTMH78Rn6DeSyDBoAEXw\"\n                },\n                {\n                  chromInfoPath: \"//s3.amazonaws.com/pkerp/data/hg19/chromSizes.tsv\",\n                  type: \"vertical-chromosome-labels\",\n                  width: 30,\n                  uid: \"RHdQK4IRQ7yJeDmKWb7Pcg\",\n                  options: {\n                    color: \"#777777\",\n                    stroke: \"black\",\n                    fontSize: 12,\n                    fontIsLeftAligned: false,\n                    minWidth: 35,\n                    showMousePosition: true,\n                    mousePositionColor: \"#ff00ff\"\n                  }\n                }\n              ],\n              center: [\n                {\n                  uid: \"c1\",\n                  type: \"combined\",\n                  height: 600,\n                  contents: [\n                    {\n                      server: \"//higlass.io/api/v1\",\n                      tilesetUid: \"CQMd6V_cRw6iCI_-Unl3PQ\",\n                      type: \"heatmap\",\n                      options: {\n                        maxZoom: null,\n                        labelPosition: \"bottomRight\",\n                        name: \"Rao et al. (2014) GM12878 MboI (allreps) 1kb\",\n                        backgroundColor: \"black\",\n                        labelLeftMargin: 0,\n                        labelRightMargin: 0,\n                        labelTopMargin: 0,\n                        labelBottomMargin: 0,\n                        labelShowResolution: true,\n                        labelShowAssembly: true,\n                        labelColor: \"#ffffff\",\n                        labelTextOpacity: 0.5,\n                        labelBackgroundColor: \"black\",\n                        labelBackgroundOpacity: 0.01,\n                        colorRange: [\n                          \"#000000\",\n                          \"#222e54\",\n                          \"#448db2\",\n                          \"#68bf30\",\n                          \"#fdff54\",\n                          \"#FFFFFF\"\n                        ],\n                        colorbarBackgroundColor: \"black\",\n                        colorbarBackgroundOpacity: 0.01,\n                        colorbarPosition: \"topRight\",\n                        trackBorderWidth: 0,\n                        trackBorderColor: \"black\",\n                        heatmapValueScaling: \"log\",\n                        showMousePosition: true,\n                        mousePositionColor: \"#ff00ff\",\n                        showTooltip: false,\n                        extent: \"full\",\n                        zeroValueColor: null,\n                        scaleStartPercent: \"0.00000\",\n                        scaleEndPercent: \"1.00000\"\n                      },\n                      height: 500,\n                      uid: \"GjuZed1ySGW1IzZZqFB9BA\",\n                      transforms: [\n                        {\n                          name: \"ICE\",\n                          value: \"weight\"\n                        }\n                      ]\n                    }\n                  ],\n                  options: {}\n                }\n              ],\n              right: [],\n              bottom: [],\n              whole: [],\n              gallery: []\n            },\n            layout: {\n              w: 12,\n              h: 12,\n              x: 0,\n              y: 0,\n              moved: false,\n              static: false\n            }\n          }\n        },\n        x: 8,\n        y: 0,\n        w: 4,\n        h: 2\n      }\n    ]\n  },\n  \"sc-atac-seq-10x-genomics-pbmc\": {\n    version: \"1.0.0\",\n    name: \"HiGlass serverless demo with 10x Genomics scATAC-seq 5k PBMC dataset\",\n    datasets: [\n      {\n        uid: \"10x-genomics-pbmc\",\n        name: \"10x Genomics PBMC\",\n        files: [\n          {\n            type: \"genomic-profiles\",\n            fileType: \"genomic-profiles.zarr\",\n            url: \"http://higlass-serverless.s3.amazonaws.com/multivec/pbmc_10x_peaks_by_cluster.zarr\"\n          }\n        ]\n      }\n    ],\n    layout: [\n      {\n        component: \"genomicProfiles\",\n        props: {\n          profileTrackUidKey: \"file\"\n        },\n        x: 0,\n        y: 0,\n        w: 8,\n        h: 2\n      },\n      {\n        component: \"description\",\n        props: {\n          description: \"10x Genomics scATAC-seq of 5k PBMCs. Note: the Zarr HiGlass Plugin Datafetcher is not yet optimized. Please be patient while the HiGlass tracks load.\"\n        },\n        x: 8,\n        y: 0,\n        w: 4,\n        h: 2\n      }\n    ],\n    initStrategy: \"auto\"\n  },\n  \"portal-ui-featured\": {\n    coordinationSpace: {\n      dataset: {\n        A: \"A\"\n      },\n      spatialZoom: {\n        A: 0.6219962674826599\n      },\n      spatialRotation: {\n        A: 0\n      },\n      spatialTargetX: {\n        A: 550.9755273834661\n      },\n      spatialTargetY: {\n        A: 418.2987491735642\n      },\n      spatialTargetZ: {\n        A: 6252776074688882e-28\n      },\n      heatmapZoomX: {\n        A: 0\n      },\n      heatmapZoomY: {\n        A: 0\n      },\n      heatmapTargetX: {\n        A: 0\n      },\n      heatmapTargetY: {\n        A: 0\n      },\n      cellFilter: {\n        A: null\n      },\n      cellHighlight: {\n        A: \"761\"\n      },\n      cellSetSelection: {\n        A: [\n          [\n            \"K-Means [Mean] Expression\",\n            \"Cluster 1\"\n          ],\n          [\n            \"K-Means [Mean] Expression\",\n            \"Cluster 2\"\n          ],\n          [\n            \"K-Means [Mean] Expression\",\n            \"Cluster 3\"\n          ],\n          [\n            \"K-Means [Mean] Expression\",\n            \"Cluster 4\"\n          ],\n          [\n            \"K-Means [Mean] Expression\",\n            \"Cluster 5\"\n          ],\n          [\n            \"K-Means [Mean] Expression\",\n            \"Cluster 6\"\n          ]\n        ]\n      },\n      cellSetHighlight: {\n        A: null\n      },\n      cellSetColor: {\n        A: [\n          {\n            path: [\n              \"K-Means [Mean] Expression\"\n            ],\n            color: [\n              68,\n              119,\n              170,\n              255\n            ]\n          },\n          {\n            path: [\n              \"K-Means [Mean] Expression\",\n              \"Cluster 1\"\n            ],\n            color: [\n              68,\n              119,\n              170,\n              255\n            ]\n          },\n          {\n            path: [\n              \"K-Means [Mean] Expression\",\n              \"Cluster 2\"\n            ],\n            color: [\n              136,\n              204,\n              238,\n              255\n            ]\n          },\n          {\n            path: [\n              \"K-Means [Mean] Expression\",\n              \"Cluster 3\"\n            ],\n            color: [\n              68,\n              170,\n              153,\n              255\n            ]\n          },\n          {\n            path: [\n              \"K-Means [Mean] Expression\",\n              \"Cluster 4\"\n            ],\n            color: [\n              17,\n              119,\n              51,\n              255\n            ]\n          },\n          {\n            path: [\n              \"K-Means [Mean] Expression\",\n              \"Cluster 5\"\n            ],\n            color: [\n              153,\n              153,\n              51,\n              255\n            ]\n          },\n          {\n            path: [\n              \"K-Means [Mean] Expression\",\n              \"Cluster 6\"\n            ],\n            color: [\n              221,\n              204,\n              119,\n              255\n            ]\n          },\n          {\n            path: [\n              \"K-Means [Covariance] Expression\"\n            ],\n            color: [\n              68,\n              119,\n              170,\n              255\n            ]\n          },\n          {\n            path: [\n              \"K-Means [Covariance] Expression\",\n              \"Cluster 1\"\n            ],\n            color: [\n              68,\n              119,\n              170,\n              255\n            ]\n          },\n          {\n            path: [\n              \"K-Means [Covariance] Expression\",\n              \"Cluster 2\"\n            ],\n            color: [\n              136,\n              204,\n              238,\n              255\n            ]\n          },\n          {\n            path: [\n              \"K-Means [Covariance] Expression\",\n              \"Cluster 3\"\n            ],\n            color: [\n              68,\n              170,\n              153,\n              255\n            ]\n          },\n          {\n            path: [\n              \"K-Means [Covariance] Expression\",\n              \"Cluster 4\"\n            ],\n            color: [\n              17,\n              119,\n              51,\n              255\n            ]\n          },\n          {\n            path: [\n              \"K-Means [Covariance] Expression\",\n              \"Cluster 5\"\n            ],\n            color: [\n              153,\n              153,\n              51,\n              255\n            ]\n          },\n          {\n            path: [\n              \"K-Means [Covariance] Expression\",\n              \"Cluster 6\"\n            ],\n            color: [\n              221,\n              204,\n              119,\n              255\n            ]\n          },\n          {\n            path: [\n              \"K-Means [Total] Expression\"\n            ],\n            color: [\n              68,\n              119,\n              170,\n              255\n            ]\n          },\n          {\n            path: [\n              \"K-Means [Total] Expression\",\n              \"Cluster 1\"\n            ],\n            color: [\n              68,\n              119,\n              170,\n              255\n            ]\n          },\n          {\n            path: [\n              \"K-Means [Total] Expression\",\n              \"Cluster 2\"\n            ],\n            color: [\n              136,\n              204,\n              238,\n              255\n            ]\n          },\n          {\n            path: [\n              \"K-Means [Total] Expression\",\n              \"Cluster 3\"\n            ],\n            color: [\n              68,\n              170,\n              153,\n              255\n            ]\n          },\n          {\n            path: [\n              \"K-Means [Total] Expression\",\n              \"Cluster 4\"\n            ],\n            color: [\n              17,\n              119,\n              51,\n              255\n            ]\n          },\n          {\n            path: [\n              \"K-Means [Total] Expression\",\n              \"Cluster 5\"\n            ],\n            color: [\n              153,\n              153,\n              51,\n              255\n            ]\n          },\n          {\n            path: [\n              \"K-Means [Total] Expression\",\n              \"Cluster 6\"\n            ],\n            color: [\n              221,\n              204,\n              119,\n              255\n            ]\n          },\n          {\n            path: [\n              \"K-Means [Mean-All-SubRegions] Expression\"\n            ],\n            color: [\n              68,\n              119,\n              170,\n              255\n            ]\n          },\n          {\n            path: [\n              \"K-Means [Mean-All-SubRegions] Expression\",\n              \"Cluster 1\"\n            ],\n            color: [\n              68,\n              119,\n              170,\n              255\n            ]\n          },\n          {\n            path: [\n              \"K-Means [Mean-All-SubRegions] Expression\",\n              \"Cluster 2\"\n            ],\n            color: [\n              136,\n              204,\n              238,\n              255\n            ]\n          },\n          {\n            path: [\n              \"K-Means [Mean-All-SubRegions] Expression\",\n              \"Cluster 3\"\n            ],\n            color: [\n              68,\n              170,\n              153,\n              255\n            ]\n          },\n          {\n            path: [\n              \"K-Means [Mean-All-SubRegions] Expression\",\n              \"Cluster 4\"\n            ],\n            color: [\n              17,\n              119,\n              51,\n              255\n            ]\n          },\n          {\n            path: [\n              \"K-Means [Mean-All-SubRegions] Expression\",\n              \"Cluster 5\"\n            ],\n            color: [\n              153,\n              153,\n              51,\n              255\n            ]\n          },\n          {\n            path: [\n              \"K-Means [Mean-All-SubRegions] Expression\",\n              \"Cluster 6\"\n            ],\n            color: [\n              221,\n              204,\n              119,\n              255\n            ]\n          },\n          {\n            path: [\n              \"K-Means [Shape-Vectors]\"\n            ],\n            color: [\n              68,\n              119,\n              170,\n              255\n            ]\n          },\n          {\n            path: [\n              \"K-Means [Shape-Vectors]\",\n              \"Cluster 1\"\n            ],\n            color: [\n              68,\n              119,\n              170,\n              255\n            ]\n          },\n          {\n            path: [\n              \"K-Means [Shape-Vectors]\",\n              \"Cluster 2\"\n            ],\n            color: [\n              136,\n              204,\n              238,\n              255\n            ]\n          },\n          {\n            path: [\n              \"K-Means [Shape-Vectors]\",\n              \"Cluster 3\"\n            ],\n            color: [\n              68,\n              170,\n              153,\n              255\n            ]\n          }\n        ]\n      },\n      geneFilter: {\n        A: null\n      },\n      geneHighlight: {\n        A: null\n      },\n      geneSelection: {\n        A: null\n      },\n      geneExpressionColormap: {\n        A: \"plasma\"\n      },\n      geneExpressionColormapRange: {\n        A: [\n          0.065,\n          0.435\n        ]\n      },\n      cellColorEncoding: {\n        A: \"cellSetSelection\"\n      },\n      spatialRasterLayers: {\n        A: [\n          {\n            type: \"t\",\n            index: 0,\n            colormap: null,\n            opacity: 1,\n            domainType: \"Min/Max\",\n            transparentColor: null,\n            channels: [\n              {\n                selection: {\n                  z: 5,\n                  t: 0,\n                  c: 10\n                },\n                color: [\n                  0,\n                  0,\n                  255\n                ],\n                visible: true,\n                slider: [\n                  1,\n                  14906\n                ]\n              },\n              {\n                selection: {\n                  z: 5,\n                  t: 0,\n                  c: 15\n                },\n                color: [\n                  0,\n                  255,\n                  0\n                ],\n                visible: true,\n                slider: [\n                  2313,\n                  31611\n                ]\n              },\n              {\n                selection: {\n                  z: 5,\n                  t: 0,\n                  c: 45\n                },\n                color: [\n                  255,\n                  0,\n                  255\n                ],\n                visible: true,\n                slider: [\n                  2570,\n                  21074\n                ]\n              },\n              {\n                selection: {\n                  z: 5,\n                  t: 0,\n                  c: 20\n                },\n                color: [\n                  255,\n                  255,\n                  0\n                ],\n                visible: true,\n                slider: [\n                  2827,\n                  11565\n                ]\n              },\n              {\n                selection: {\n                  z: 5,\n                  t: 0,\n                  c: 31\n                },\n                slider: [\n                  5658,\n                  17479\n                ],\n                visible: true,\n                color: [\n                  255,\n                  128,\n                  0\n                ]\n              },\n              {\n                selection: {\n                  z: 5,\n                  t: 0,\n                  c: 39\n                },\n                slider: [\n                  1767,\n                  11735\n                ],\n                visible: true,\n                color: [\n                  255,\n                  255,\n                  255\n                ]\n              }\n            ]\n          }\n        ]\n      },\n      spatialCellsLayer: {\n        A: {\n          opacity: 0,\n          radius: 50,\n          visible: true,\n          stroked: true\n        }\n      },\n      spatialMoleculesLayer: {\n        A: null\n      },\n      spatialNeighborhoodsLayer: {\n        A: null\n      },\n      additionalCellSets: {\n        A: null\n      },\n      moleculeHighlight: {\n        A: null\n      }\n    },\n    datasets: [\n      {\n        files: [\n          {\n            fileType: \"cells.json\",\n            type: \"cells\",\n            url: \"https://assets.hubmapconsortium.org/ca3016d836d8ee50bef1b93f339c9679/output_json/R002_X002_Y007.cells.json?token=\"\n          },\n          {\n            fileType: \"cell-sets.json\",\n            type: \"cell-sets\",\n            url: \"https://assets.hubmapconsortium.org/ca3016d836d8ee50bef1b93f339c9679/output_json/R002_X002_Y007.cell-sets.json?token=\"\n          },\n          {\n            fileType: \"clusters.json\",\n            type: \"expression-matrix\",\n            url: \"https://assets.hubmapconsortium.org/ca3016d836d8ee50bef1b93f339c9679/output_json/R002_X002_Y007.clusters.json?token=\"\n          },\n          {\n            fileType: \"raster.json\",\n            options: {\n              images: [\n                {\n                  metadata: {\n                    omeTiffOffsetsUrl: \"https://assets.hubmapconsortium.org/ca3016d836d8ee50bef1b93f339c9679/output_offsets/R002_X002_Y007.offsets.json?token=\"\n                  },\n                  name: \"R002_X002_Y007\",\n                  type: \"ome-tiff\",\n                  url: \"https://assets.hubmapconsortium.org/ca3016d836d8ee50bef1b93f339c9679/output/extract/expressions/ome-tiff/R002_X002_Y007.ome.tiff?token=\"\n                }\n              ],\n              schemaVersion: \"0.0.2\"\n            },\n            type: \"raster\"\n          }\n        ],\n        name: \"SPRM\",\n        uid: \"A\"\n      }\n    ],\n    description: \"\",\n    initStrategy: \"auto\",\n    layout: [\n      {\n        component: \"spatial\",\n        coordinationScopes: {\n          dataset: \"A\",\n          spatialZoom: \"A\",\n          spatialRotation: \"A\",\n          spatialTargetX: \"A\",\n          spatialTargetY: \"A\",\n          spatialTargetZ: \"A\",\n          cellFilter: \"A\",\n          cellHighlight: \"A\",\n          cellSetSelection: \"A\",\n          cellSetHighlight: \"A\",\n          cellSetColor: \"A\",\n          geneHighlight: \"A\",\n          geneSelection: \"A\",\n          geneExpressionColormap: \"A\",\n          geneExpressionColormapRange: \"A\",\n          cellColorEncoding: \"A\",\n          spatialRasterLayers: \"A\",\n          spatialCellsLayer: \"A\",\n          spatialMoleculesLayer: \"A\",\n          spatialNeighborhoodsLayer: \"A\",\n          additionalCellSets: \"A\",\n          moleculeHighlight: \"A\"\n        },\n        h: 8,\n        w: 7,\n        x: 3,\n        y: 0\n      },\n      {\n        component: \"description\",\n        coordinationScopes: {\n          dataset: \"A\",\n          spatialRasterLayers: \"A\"\n        },\n        h: 2,\n        w: 2,\n        x: 10,\n        y: 10\n      },\n      {\n        component: \"layerController\",\n        coordinationScopes: {\n          dataset: \"A\",\n          spatialRasterLayers: \"A\",\n          spatialCellsLayer: \"A\",\n          spatialMoleculesLayer: \"A\",\n          spatialNeighborhoodsLayer: \"A\"\n        },\n        h: 8,\n        w: 3,\n        x: 0,\n        y: 0\n      },\n      {\n        component: \"cellSets\",\n        coordinationScopes: {\n          dataset: \"A\",\n          cellSetSelection: \"A\",\n          cellSetHighlight: \"A\",\n          cellSetColor: \"A\",\n          cellColorEncoding: \"A\",\n          additionalCellSets: \"A\"\n        },\n        h: 5,\n        w: 2,\n        x: 10,\n        y: 5\n      },\n      {\n        component: \"genes\",\n        coordinationScopes: {\n          dataset: \"A\",\n          geneFilter: \"A\",\n          geneHighlight: \"A\",\n          geneSelection: \"A\",\n          cellColorEncoding: \"A\"\n        },\n        h: 5,\n        props: {\n          variablesLabelOverride: \"antigen\"\n        },\n        w: 2,\n        x: 10,\n        y: 0\n      },\n      {\n        component: \"heatmap\",\n        coordinationScopes: {\n          dataset: \"A\",\n          heatmapZoomX: \"A\",\n          heatmapZoomY: \"A\",\n          heatmapTargetX: \"A\",\n          heatmapTargetY: \"A\",\n          cellFilter: \"A\",\n          cellHighlight: \"A\",\n          cellSetSelection: \"A\",\n          cellSetHighlight: \"A\",\n          cellSetColor: \"A\",\n          geneFilter: \"A\",\n          geneHighlight: \"A\",\n          geneSelection: \"A\",\n          geneExpressionColormap: \"A\",\n          geneExpressionColormapRange: \"A\",\n          cellColorEncoding: \"A\",\n          additionalCellSets: \"A\"\n        },\n        h: 4,\n        props: {\n          transpose: true,\n          variablesLabelOverride: \"antigen\"\n        },\n        w: 10,\n        x: 0,\n        y: 8\n      }\n    ],\n    name: \"R002_X002_Y007\",\n    version: \"1.0.1\"\n  }\n};\nfunction listConfigs(showAll) {\n  return Object.entries(configs).filter((entry) => showAll || entry[1].public).map(([id, config]) => ({\n    id,\n    name: config.name,\n    description: config.description\n  }));\n}\nfunction getConfig(id) {\n  return configs[id];\n}\n\n// src/app/Welcome.js\nimport React31 from \"react\";\n\n// src/version.json\nvar note = \"This file is regenerated by push-demo.sh.\";\nvar branch = \"release_1.1.17\";\nvar date = \"2021-11-17\";\nvar hash = \"db07d05\";\nvar version_default = {\n  note,\n  branch,\n  date,\n  hash\n};\n\n// src/app/Welcome.js\nfunction DatasetList(props) {\n  const { configs: configs2, theme } = props;\n  const aClassName = \"list-group-item list-group-item-action flex-column align-items-start bg-secondary\";\n  const links = configs2.map(({ id, name: name2, description: description2 }) => /* @__PURE__ */ React31.createElement(\"div\", {\n    className: aClassName,\n    key: id\n  }, /* @__PURE__ */ React31.createElement(\"a\", {\n    href: `?dataset=${id}&theme=${theme}`,\n    key: id\n  }, /* @__PURE__ */ React31.createElement(\"h5\", null, name2), /* @__PURE__ */ React31.createElement(\"p\", null, description2)), /* @__PURE__ */ React31.createElement(\"a\", {\n    href: `?dataset=${id}&theme=${theme}&small`,\n    style: { fontSize: \"75%\" }\n  }, name2, \" as component\")));\n  return /* @__PURE__ */ React31.createElement(\"div\", {\n    className: \"list-group\"\n  }, links);\n}\nfunction Form(props) {\n  const { configs: configs2, theme } = props;\n  return /* @__PURE__ */ React31.createElement(\"form\", {\n    method: \"GET\"\n  }, /* @__PURE__ */ React31.createElement(\"h1\", null, \"Vitessce\"), /* @__PURE__ */ React31.createElement(\"div\", null, \"Select a dataset:\"), /* @__PURE__ */ React31.createElement(DatasetList, {\n    configs: configs2,\n    theme\n  }), /* @__PURE__ */ React31.createElement(\"br\", null), /* @__PURE__ */ React31.createElement(\"div\", null, \"Or specify URL of configuration:\"), /* @__PURE__ */ React31.createElement(\"div\", {\n    className: \"input-group mb-3\"\n  }, /* @__PURE__ */ React31.createElement(\"input\", {\n    type: \"text\",\n    name: \"url\",\n    className: \"form-control\"\n  }), /* @__PURE__ */ React31.createElement(\"input\", {\n    type: \"hidden\",\n    name: \"theme\",\n    value: theme\n  }), /* @__PURE__ */ React31.createElement(\"div\", {\n    className: \"input-group-append\"\n  }, /* @__PURE__ */ React31.createElement(\"button\", {\n    className: \"btn btn-outline-secondary\",\n    type: \"submit\"\n  }, \"Load\"))));\n}\nfunction Info() {\n  return /* @__PURE__ */ React31.createElement(React31.Fragment, null, /* @__PURE__ */ React31.createElement(\"p\", {\n    className: \"info-paragraph\"\n  }, \"Vitessce is a visual integration tool for exploration of spatial single cell experiments. Its modular design is optimized for scalable, linked visualizations that support the spatial and non-spatial representation of tissue-, cell- and molecule-level data. Vitessce integrates the \", /* @__PURE__ */ React31.createElement(\"a\", {\n    href: \"https://github.com/hms-dbmi/viv\"\n  }, \"Viv library\"), \" to visualize highly multiplexed, high-resolution, high-bit depth image data directly from OME-TIFF files and Bio-Formats-compatible Zarr stores.\"), /* @__PURE__ */ React31.createElement(\"h5\", {\n    className: \"info-section-text\"\n  }, \"Contributors\"), /* @__PURE__ */ React31.createElement(\"ul\", null, /* @__PURE__ */ React31.createElement(\"li\", null, /* @__PURE__ */ React31.createElement(\"a\", {\n    href: \"https://github.com/keller-mark\"\n  }, \"Mark Keller\")), /* @__PURE__ */ React31.createElement(\"li\", null, /* @__PURE__ */ React31.createElement(\"a\", {\n    href: \"https://github.com/mccalluc\"\n  }, \"Chuck McCallum\")), /* @__PURE__ */ React31.createElement(\"li\", null, /* @__PURE__ */ React31.createElement(\"a\", {\n    href: \"https://github.com/ilan-gold\"\n  }, \"Ilan Gold\")), /* @__PURE__ */ React31.createElement(\"li\", null, /* @__PURE__ */ React31.createElement(\"a\", {\n    href: \"https://github.com/manzt\"\n  }, \"Trevor Manz\")), /* @__PURE__ */ React31.createElement(\"li\", null, /* @__PURE__ */ React31.createElement(\"a\", {\n    href: \"https://github.com/thomaslchan\"\n  }, \"Tos Chan\")), /* @__PURE__ */ React31.createElement(\"li\", null, /* @__PURE__ */ React31.createElement(\"a\", {\n    href: \"https://github.com/jkmarx\"\n  }, \"Jennifer Marx\")), /* @__PURE__ */ React31.createElement(\"li\", null, /* @__PURE__ */ React31.createElement(\"a\", {\n    href: \"https://github.com/pkharchenko\"\n  }, \"Peter Kharchenko\")), /* @__PURE__ */ React31.createElement(\"li\", null, /* @__PURE__ */ React31.createElement(\"a\", {\n    href: \"https://github.com/ngehlenborg\"\n  }, \"Nils Gehlenborg\"))), /* @__PURE__ */ React31.createElement(\"h5\", {\n    className: \"info-section-text\"\n  }, \"Source Code\"), /* @__PURE__ */ React31.createElement(\"ul\", null, /* @__PURE__ */ React31.createElement(\"li\", null, /* @__PURE__ */ React31.createElement(\"a\", {\n    href: \"https://github.com/vitessce/vitessce\"\n  }, \"GitHub\")), /* @__PURE__ */ React31.createElement(\"li\", null, /* @__PURE__ */ React31.createElement(\"a\", {\n    href: \"https://www.npmjs.com/package/vitessce\"\n  }, \"NPM\"))), /* @__PURE__ */ React31.createElement(\"h5\", {\n    className: \"info-section-text\"\n  }, \"Funding\"), /* @__PURE__ */ React31.createElement(\"ul\", null, /* @__PURE__ */ React31.createElement(\"li\", null, \"NIH/OD Human BioMolecular Atlas Program (HuBMAP) (OT2OD026677, PI: Nils Gehlenborg).\"), /* @__PURE__ */ React31.createElement(\"li\", null, \"NIH/NLM Biomedical Informatics and Data Science Research Training Program (T15LM007092, PI: Nils Gehlenborg)\"), /* @__PURE__ */ React31.createElement(\"li\", null, \"Harvard Stem Cell Institute (CF-0014-17-03, PI: Nils Gehlenborg)\")), /* @__PURE__ */ React31.createElement(\"p\", {\n    className: \"info-section-text\"\n  }, \"This deployment: branch=\", version_default.branch, \" | hash=\", version_default.hash, \" | date=\", version_default.date));\n}\nfunction Welcome(props) {\n  const { configs: configs2, theme, showBetaHeader } = props;\n  return /* @__PURE__ */ React31.createElement(\"div\", {\n    className: `vitessce-container vitessce-theme-${theme} welcome-container`\n  }, showBetaHeader && /* @__PURE__ */ React31.createElement(\"div\", {\n    className: \"welcome-beta-header\"\n  }, /* @__PURE__ */ React31.createElement(\"p\", null, \"Visit \", /* @__PURE__ */ React31.createElement(\"a\", {\n    href: \"http://beta.vitessce.io\"\n  }, \"beta.vitessce.io\"), \" to view the next version of the Vitessce home page and documentation!\")), /* @__PURE__ */ React31.createElement(\"div\", {\n    className: \"react-grid-layout container-fluid\",\n    style: { height: \"max(100vh, 100%)\" }\n  }, /* @__PURE__ */ React31.createElement(\"div\", {\n    className: \"row\"\n  }, /* @__PURE__ */ React31.createElement(\"div\", {\n    className: \"welcome-col-left\"\n  }, /* @__PURE__ */ React31.createElement(\"div\", {\n    className: \"card card-body bg-primary\"\n  }, /* @__PURE__ */ React31.createElement(Form, {\n    configs: configs2,\n    theme\n  }))), /* @__PURE__ */ React31.createElement(\"div\", {\n    className: \"welcome-col-right\"\n  }, /* @__PURE__ */ React31.createElement(\"div\", {\n    className: \"card card-body bg-primary\"\n  }, /* @__PURE__ */ React31.createElement(Info, null))))));\n}\n\n// src/app/Warning.js\nimport React32 from \"react\";\nfunction Warning(props) {\n  const {\n    title: title16,\n    preformatted,\n    unformatted,\n    theme\n  } = props;\n  return /* @__PURE__ */ React32.createElement(\"div\", {\n    className: `vitessce-container vitessce-theme-${theme}`\n  }, /* @__PURE__ */ React32.createElement(\"div\", {\n    className: \"warning-layout container-fluid\"\n  }, /* @__PURE__ */ React32.createElement(\"div\", {\n    className: \"row\"\n  }, /* @__PURE__ */ React32.createElement(\"div\", {\n    className: \"col-12\"\n  }, /* @__PURE__ */ React32.createElement(\"div\", {\n    className: PRIMARY_CARD\n  }, /* @__PURE__ */ React32.createElement(\"h1\", null, title16), /* @__PURE__ */ React32.createElement(\"pre\", null, preformatted), /* @__PURE__ */ React32.createElement(\"div\", null, unformatted))))));\n}\n\n// src/app/Vitessce.js\nimport React74, { useEffect as useEffect25, useMemo as useMemo17 } from \"react\";\nimport {\n  ThemeProvider,\n  StylesProvider,\n  createGenerateClassName\n} from \"@material-ui/core/styles\";\nimport isEqual14 from \"lodash/isEqual\";\n\n// src/app/CallbackPublisher.js\nimport { useEffect as useEffect10 } from \"react\";\n\n// src/app/view-config-versions.js\nimport Ajv3 from \"ajv\";\n\n// src/schemas/config-0.1.0.schema.json\nvar $schema9 = \"http://json-schema.org/draft-07/schema#\";\nvar $id9 = \"https://github.com/vitessce/vitessce/#dataset\";\nvar title9 = \"Vitessce data set\";\nvar type9 = \"object\";\nvar definitions9 = {\n  components: {\n    type: \"array\",\n    items: {\n      type: \"object\",\n      additionalProperties: false,\n      required: [\"component\", \"x\", \"y\"],\n      properties: {\n        component: { type: \"string\" },\n        props: { type: \"object\" },\n        x: { type: \"integer\" },\n        y: { type: \"integer\" },\n        w: { type: \"integer\" },\n        h: { type: \"integer\" }\n      }\n    }\n  },\n  requestInit: {\n    type: \"object\",\n    additionalProperties: false,\n    required: [],\n    properties: {\n      method: {\n        type: \"string\"\n      },\n      headers: {\n        type: \"object\"\n      },\n      body: {\n        type: \"string\"\n      },\n      mode: {\n        type: \"string\"\n      },\n      credentials: {\n        type: \"string\"\n      },\n      cache: {\n        type: \"string\"\n      },\n      redirect: {\n        type: \"string\"\n      },\n      referrer: {\n        type: \"string\"\n      },\n      integrity: {\n        type: \"string\"\n      }\n    }\n  }\n};\nvar additionalProperties3 = false;\nvar required3 = [\"version\", \"name\", \"layers\"];\nvar properties3 = {\n  name: { type: \"string\" },\n  public: { type: \"boolean\" },\n  description: { type: \"string\" },\n  layers: {\n    type: \"array\",\n    items: {\n      type: \"object\",\n      additionalProperties: false,\n      required: [\"name\", \"type\", \"fileType\", \"url\"],\n      properties: {\n        name: { type: \"string\" },\n        type: { type: \"string\" },\n        fileType: { type: \"string\" },\n        url: { type: \"string\" },\n        requestInit: { $ref: \"#/definitions/requestInit\" }\n      }\n    }\n  },\n  staticLayout: { $ref: \"#/definitions/components\" },\n  version: {\n    type: \"string\",\n    enum: [\"0.1.0\"]\n  }\n};\nvar config_0_1_0_schema_default = {\n  $schema: $schema9,\n  $id: $id9,\n  title: title9,\n  type: type9,\n  definitions: definitions9,\n  additionalProperties: additionalProperties3,\n  required: required3,\n  properties: properties3\n};\n\n// src/schemas/config-1.0.0.schema.json\nvar $schema10 = \"http://json-schema.org/draft-07/schema#\";\nvar $id10 = \"https://github.com/vitessce/vitessce/#dataset\";\nvar title10 = \"Vitessce data set\";\nvar type10 = \"object\";\nvar definitions10 = {\n  components: {\n    description: \"The layout array defines the views, or components, rendered in the grid.\",\n    type: \"array\",\n    items: {\n      type: \"object\",\n      additionalProperties: false,\n      required: [\"component\", \"x\", \"y\"],\n      properties: {\n        component: {\n          type: \"string\",\n          description: \"Specify a component using a name defined in the component registry.\"\n        },\n        props: {\n          type: \"object\",\n          description: \"Extra prop values for the component.\"\n        },\n        x: { type: \"integer\" },\n        y: { type: \"integer\" },\n        w: { type: \"integer\" },\n        h: { type: \"integer\" },\n        coordinationScopes: {\n          type: \"object\",\n          description: \"Component-level coordination scope mappings define which coordination object values a particular component can read and write, for each coordination type.\",\n          additionalProperties: false,\n          required: [],\n          properties: {\n            dataset: { type: \"string\" },\n            embeddingType: { type: \"string\" },\n            embeddingZoom: { type: \"string\" },\n            embeddingRotation: { type: \"string\" },\n            embeddingTargetX: { type: \"string\" },\n            embeddingTargetY: { type: \"string\" },\n            embeddingTargetZ: { type: \"string\" },\n            embeddingCellSetPolygonsVisible: { type: \"string\" },\n            embeddingCellSetLabelsVisible: { type: \"string\" },\n            embeddingCellSetLabelSize: { type: \"string\" },\n            embeddingCellRadius: { type: \"string\" },\n            spatialZoom: { type: \"string\" },\n            spatialRotation: { type: \"string\" },\n            spatialTargetX: { type: \"string\" },\n            spatialTargetY: { type: \"string\" },\n            spatialTargetZ: { type: \"string\" },\n            heatmapZoomX: { type: \"string\" },\n            heatmapZoomY: { type: \"string\" },\n            heatmapTargetX: { type: \"string\" },\n            heatmapTargetY: { type: \"string\" },\n            cellFilter: { type: \"string\" },\n            cellHighlight: { type: \"string\" },\n            cellSetSelection: { type: \"string\" },\n            cellSetHighlight: { type: \"string\" },\n            cellSetColor: { type: \"string\" },\n            geneFilter: { type: \"string\" },\n            geneHighlight: { type: \"string\" },\n            geneSelection: { type: \"string\" },\n            geneExpressionTransform: { type: \"string\" },\n            geneExpressionColormap: { type: \"string\" },\n            geneExpressionColormapRange: { type: \"string\" },\n            cellColorEncoding: { type: \"string\" },\n            spatialLayers: { type: \"string\" },\n            genomicZoomX: { type: \"string\" },\n            genomicZoomY: { type: \"string\" },\n            genomicTargetX: { type: \"string\" },\n            genomicTargetY: { type: \"string\" },\n            additionalCellSets: { type: \"string\" },\n            moleculeHighlight: { type: \"string\" }\n          }\n        }\n      }\n    }\n  },\n  annDataCellSets: {\n    type: \"array\",\n    description: \"Array of cell set configuration, following closely the conventions of the tabular schema\",\n    items: {\n      type: \"object\",\n      additionalProperties: false,\n      required: [\"groupName\", \"setName\"],\n      properties: {\n        groupName: {\n          type: \"string\",\n          description: \"The display name for the set, like 'Cell Type' or 'Louvain.'\"\n        },\n        setName: {\n          type: \"string\",\n          description: \"The location in the AnnData store for the set, like 'obs/louvain' or 'obs/celltype.'\"\n        }\n      }\n    }\n  },\n  annDataCells: {\n    type: \"object\",\n    description: \"The properties of this object are the configuration for how to layout scatterplots and spatial information\",\n    minProperties: 1,\n    additionalProperties: false,\n    required: [],\n    properties: {\n      xy: {\n        type: \"string\",\n        description: \"The location in the AnnData store of cell centroids, like 'obsm/X_centroids.'\"\n      },\n      poly: {\n        type: \"string\",\n        description: \"The location in the AnnData store of cell polygon outlines, like 'obsm/X_polygons.'\"\n      },\n      factors: {\n        type: \"array\",\n        description: \"List of locations in the AnnData store of cell sets, like 'obs/louvain'\",\n        items: {\n          type: \"string\"\n        }\n      },\n      mappings: {\n        patternProperties: {\n          \".\": {\n            type: \"object\",\n            description: \"An object containing key-values for mappings like { UMAP: { key: 'obsm/X_umap', dims: [0, 1] } }.\",\n            additionalProperties: false,\n            required: [\"key\"],\n            properties: {\n              key: {\n                type: \"string\",\n                description: \"Where to look in the AnnData store for this mapping, like 'obsm/X_umap.'\"\n              },\n              dims: {\n                type: \"array\",\n                description: \"Which indices of the obsm object to take for a scatterplot, allowing for, for example, different PCs from obsm/X_pca\",\n                minItems: 2,\n                maxItems: 2,\n                items: { type: \"number\" }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  annDataExpressionMatrix: {\n    type: \"object\",\n    description: \"The properties of this object are the configuration for how to fetch the cell x genes matrix\",\n    additionalProperties: false,\n    required: [\"matrix\"],\n    properties: {\n      matrix: {\n        type: \"string\",\n        description: \"The location in the AnnData store of the cell x gene matrix, like 'obsm/hvg_subset.' or 'X'\"\n      },\n      geneFilter: {\n        type: \"string\",\n        description: \"The location in the AnnData store of a filter for the genes if using a subset of the data, like 'var.highly_variable.' if the matrix comes from 'obsm/hvg_subset.'\"\n      },\n      matrixGeneFilter: {\n        type: \"string\",\n        description: \"The location in the AnnData store of a filter for the matrix data (used in heatmap and histogram), like 'var.highly_variable.''\"\n      }\n    }\n  },\n  requestInit: {\n    type: \"object\",\n    description: \"The properties of this object correspond to the parameters of the JavaScript fetch() function.\",\n    additionalProperties: false,\n    required: [],\n    properties: {\n      method: {\n        type: \"string\"\n      },\n      headers: {\n        type: \"object\"\n      },\n      body: {\n        type: \"string\"\n      },\n      mode: {\n        type: \"string\"\n      },\n      credentials: {\n        type: \"string\"\n      },\n      cache: {\n        type: \"string\"\n      },\n      redirect: {\n        type: \"string\"\n      },\n      referrer: {\n        type: \"string\"\n      },\n      integrity: {\n        type: \"string\"\n      }\n    }\n  },\n  rasterLayer: {\n    description: \"The properties of this object are the rendering settings for the raster layer.\",\n    additionalProperties: false,\n    required: [\"channels\", \"colormap\", \"index\", \"opacity\", \"type\"],\n    properties: {\n      channels: {\n        type: \"array\",\n        items: {\n          type: \"object\",\n          additionalProperties: false,\n          required: [\"selection\"],\n          properties: {\n            color: {\n              type: \"array\",\n              items: { type: \"number\" },\n              description: \"The color to use when rendering this channel under the null colormap.\"\n            },\n            selection: {\n              type: \"object\",\n              description: \"Determines the channel selection, e.g. some Z and time slice.\"\n            },\n            slider: {\n              type: \"array\",\n              items: { type: \"number\" },\n              description: \"Determines the range for color mapping.\"\n            },\n            visible: {\n              type: \"boolean\",\n              description: \"Determines whether this channel of the layer will be rendered in the spatial component.\"\n            }\n          }\n        }\n      },\n      colormap: {\n        oneOf: [\n          {\n            type: \"string\",\n            description: \"The name of the colormap to use for this layer.\"\n          },\n          {\n            type: \"null\",\n            description: \"Use the solid color definitions.\"\n          }\n        ]\n      },\n      transparentColor: {\n        oneOf: [\n          {\n            type: \"array\",\n            minItems: 3,\n            maxItems: 3,\n            items: {\n              type: \"number\",\n              description: \"One of R G or B (0 - 255).\"\n            },\n            description: \"Determines the color to be set to opacity 0\"\n          },\n          {\n            type: \"null\",\n            description: \"No selection.\"\n          }\n        ]\n      },\n      index: {\n        type: \"number\",\n        description: \"The index of the layer among the array of layers available in the image file.\"\n      },\n      modelMatrix: {\n        oneOf: [\n          {\n            type: \"array\",\n            minItems: 16,\n            maxItems: 16,\n            description: \"transformation matrix for this layer\"\n          },\n          {\n            type: \"null\",\n            description: \"Use no transformation.\"\n          }\n        ]\n      },\n      opacity: {\n        type: \"number\"\n      },\n      domainType: {\n        type: \"string\",\n        enum: [\"Full\", \"Min/Max\"],\n        description: \"Determines the extent of the channel slider input element in the layer controller.\"\n      },\n      type: {\n        type: \"string\",\n        enum: [\"raster\"]\n      }\n    }\n  },\n  moleculesLayer: {\n    description: \"The properties of this object are the rendering settings for the molecules layer.\",\n    additionalProperties: false,\n    required: [\"visible\", \"radius\", \"opacity\", \"type\"],\n    properties: {\n      visible: {\n        type: \"boolean\"\n      },\n      radius: {\n        type: \"number\"\n      },\n      opacity: {\n        type: \"number\"\n      },\n      type: {\n        type: \"string\",\n        enum: [\"molecules\"]\n      }\n    }\n  },\n  cellsLayer: {\n    description: \"The properties of this object are the rendering settings for the cells layer.\",\n    additionalProperties: false,\n    required: [\"visible\", \"stroked\", \"radius\", \"opacity\", \"type\"],\n    properties: {\n      visible: {\n        type: \"boolean\"\n      },\n      stroked: {\n        type: \"boolean\"\n      },\n      radius: {\n        type: \"number\"\n      },\n      opacity: {\n        type: \"number\"\n      },\n      type: {\n        type: \"string\",\n        enum: [\"cells\"]\n      }\n    }\n  },\n  neighborhoodsLayer: {\n    description: \"The properties of this object are the rendering settings for the neighborhoods layer.\",\n    additionalProperties: false,\n    required: [\"visible\", \"type\"],\n    properties: {\n      visible: {\n        type: \"boolean\"\n      },\n      type: {\n        type: \"string\",\n        enum: [\"neighborhoods\"]\n      }\n    }\n  },\n  spatialLayers: {\n    type: \"array\",\n    description: \"Array of Spatial Layers\",\n    items: {\n      oneOf: [\n        {\n          $ref: \"#/definitions/rasterLayer\"\n        },\n        {\n          $ref: \"#/definitions/cellsLayer\"\n        },\n        {\n          $ref: \"#/definitions/moleculesLayer\"\n        },\n        {\n          $ref: \"#/definitions/neighborhoodsLayer\"\n        }\n      ]\n    }\n  }\n};\nvar additionalProperties4 = false;\nvar required4 = [\"version\", \"name\", \"datasets\", \"layout\", \"initStrategy\"];\nvar properties4 = {\n  name: { type: \"string\" },\n  public: { type: \"boolean\" },\n  description: { type: \"string\" },\n  datasets: {\n    type: \"array\",\n    description: \"The datasets array defines groups of files, where the files within each dataset reference the same entities (cells, genes, cell sets, etc).\",\n    items: {\n      type: \"object\",\n      additionalProperties: false,\n      required: [\"uid\", \"files\"],\n      properties: {\n        uid: { type: \"string\" },\n        name: { type: \"string\" },\n        description: { type: \"string\" },\n        files: {\n          type: \"array\",\n          items: {\n            type: \"object\",\n            additionalProperties: false,\n            required: [\"type\", \"fileType\"],\n            properties: {\n              name: { type: \"string\" },\n              type: { type: \"string\" },\n              fileType: { type: \"string\" },\n              url: { type: \"string\" },\n              options: { oneOf: [{ $ref: \"#/definitions/annDataCellSets\" }, { $ref: \"https://github.com/vitessce/vitessce/#raster\" }, { $ref: \"#/definitions/annDataCells\" }, { $ref: \"#/definitions/annDataExpressionMatrix\" }] },\n              requestInit: { $ref: \"#/definitions/requestInit\" }\n            }\n          }\n        }\n      }\n    }\n  },\n  coordinationSpace: {\n    type: \"object\",\n    description: \"The coordination space stores the values for each scope of each coordination object.\",\n    additionalProperties: false,\n    required: [],\n    properties: {\n      dataset: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"string\" }\n        }\n      },\n      embeddingZoom: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, value will be automatically set.\"\n              },\n              { type: \"number\" }\n            ]\n          }\n        }\n      },\n      embeddingRotation: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"number\" }\n        }\n      },\n      embeddingTargetX: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, value will be automatically set.\"\n              },\n              { type: \"number\" }\n            ]\n          }\n        }\n      },\n      embeddingTargetY: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, value will be automatically set.\"\n              },\n              { type: \"number\" }\n            ]\n          }\n        }\n      },\n      embeddingTargetZ: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"number\" }\n        }\n      },\n      embeddingType: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"string\" }\n        }\n      },\n      embeddingCellSetPolygonsVisible: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"boolean\" }\n        }\n      },\n      embeddingCellSetLabelsVisible: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"boolean\" }\n        }\n      },\n      embeddingCellSetLabelSize: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"number\" }\n        }\n      },\n      embeddingCellRadius: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"number\" }\n        }\n      },\n      spatialZoom: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, value will be automatically set.\"\n              },\n              { type: \"number\" }\n            ]\n          }\n        }\n      },\n      spatialRotation: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"number\" }\n        }\n      },\n      spatialTargetX: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, value will be automatically set.\"\n              },\n              { type: \"number\" }\n            ]\n          }\n        }\n      },\n      spatialTargetY: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, value will be automatically set.\"\n              },\n              { type: \"number\" }\n            ]\n          }\n        }\n      },\n      spatialTargetZ: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"number\" }\n        }\n      },\n      spatialLayers: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided and auto layer initialization is enabled, layers will be automatically initialized.\"\n              },\n              { $ref: \"#/definitions/spatialLayers\" }\n            ]\n          }\n        }\n      },\n      heatmapZoomX: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"number\" }\n        }\n      },\n      heatmapZoomY: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"number\" }\n        }\n      },\n      heatmapTargetX: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"number\" }\n        }\n      },\n      heatmapTargetY: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"number\" }\n        }\n      },\n      cellFilter: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, no cells will be filtered out initially.\"\n              },\n              { type: \"array\", items: { type: \"string\" } }\n            ]\n          }\n        }\n      },\n      cellHighlight: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, no cell will be highlighted initially.\"\n              },\n              { type: \"string\" }\n            ]\n          }\n        }\n      },\n      cellSetSelection: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided and auto cell set initialization is enabled, cell set selections will be automatically initialized.\"\n              },\n              { type: \"array\" }\n            ]\n          }\n        }\n      },\n      cellSetHighlight: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, no cell sets will be highlighted initially.\"\n              },\n              { type: \"string\" }\n            ]\n          }\n        }\n      },\n      cellSetColor: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, cell set colors will be automatically initialized.\"\n              },\n              {\n                type: \"array\",\n                items: {\n                  type: \"object\",\n                  additionalProperties: false,\n                  required: [\"path\", \"color\"],\n                  properties: {\n                    path: {\n                      type: \"array\",\n                      items: { type: \"string\" }\n                    },\n                    color: {\n                      type: \"array\",\n                      items: { type: \"number\" }\n                    }\n                  }\n                }\n              }\n            ]\n          }\n        }\n      },\n      cellColorEncoding: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"string\" }\n        }\n      },\n      geneFilter: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, no genes will be filtered out initially.\"\n              },\n              { type: \"array\", items: { type: \"string\" } }\n            ]\n          }\n        }\n      },\n      geneHighlight: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, no genes will be highlighted initially.\"\n              },\n              { type: \"string\" }\n            ]\n          }\n        }\n      },\n      geneSelection: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\"\n              },\n              { type: \"array\", items: { type: \"string\" } }\n            ]\n          }\n        }\n      },\n      geneExpressionTransform: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\"\n              },\n              { type: \"string\", pattern: \"log1p\" }\n            ]\n          }\n        }\n      },\n      geneExpressionColormap: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"string\" }\n        }\n      },\n      geneExpressionColormapRange: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"array\", items: { type: \"number\" } }\n        }\n      },\n      genomicZoomX: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"number\" }\n        }\n      },\n      genomicZoomY: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"number\" }\n        }\n      },\n      genomicTargetX: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"number\" }\n        }\n      },\n      genomicTargetY: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"number\" }\n        }\n      },\n      additionalCellSets: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, no cell will be highlighted initially.\"\n              },\n              {\n                $ref: \"https://github.com/vitessce/vitessce/#cell-sets\"\n              }\n            ]\n          }\n        }\n      },\n      moleculeHighlight: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, no molecule will be highlighted initially.\"\n              },\n              { type: \"string\" }\n            ]\n          }\n        }\n      }\n    }\n  },\n  layout: { $ref: \"#/definitions/components\" },\n  initStrategy: {\n    type: \"string\",\n    enum: [\"none\", \"auto\"],\n    description: \"The initialization strategy determines how missing coordination objects and coordination scope mappings are initially filled in.\"\n  },\n  version: {\n    type: \"string\",\n    enum: [\"1.0.0\"],\n    description: \"The schema version for the view config.\"\n  }\n};\nvar config_1_0_0_schema_default = {\n  $schema: $schema10,\n  $id: $id10,\n  title: title10,\n  type: type10,\n  definitions: definitions10,\n  additionalProperties: additionalProperties4,\n  required: required4,\n  properties: properties4\n};\n\n// src/schemas/config-1.0.1.schema.json\nvar $schema11 = \"http://json-schema.org/draft-07/schema#\";\nvar $id11 = \"https://github.com/vitessce/vitessce/#dataset\";\nvar title11 = \"Vitessce data set\";\nvar type11 = \"object\";\nvar definitions11 = {\n  components: {\n    description: \"The layout array defines the views, or components, rendered in the grid.\",\n    type: \"array\",\n    items: {\n      type: \"object\",\n      additionalProperties: false,\n      required: [\"component\", \"x\", \"y\"],\n      properties: {\n        component: {\n          type: \"string\",\n          description: \"Specify a component using a name defined in the component registry.\"\n        },\n        props: {\n          type: \"object\",\n          description: \"Extra prop values for the component.\"\n        },\n        x: { type: \"integer\" },\n        y: { type: \"integer\" },\n        w: { type: \"integer\" },\n        h: { type: \"integer\" },\n        coordinationScopes: {\n          type: \"object\",\n          description: \"Component-level coordination scope mappings define which coordination object values a particular component can read and write, for each coordination type.\",\n          additionalProperties: false,\n          required: [],\n          properties: {\n            dataset: { type: \"string\" },\n            embeddingType: { type: \"string\" },\n            embeddingZoom: { type: \"string\" },\n            embeddingRotation: { type: \"string\" },\n            embeddingTargetX: { type: \"string\" },\n            embeddingTargetY: { type: \"string\" },\n            embeddingTargetZ: { type: \"string\" },\n            embeddingCellSetPolygonsVisible: { type: \"string\" },\n            embeddingCellSetLabelsVisible: { type: \"string\" },\n            embeddingCellSetLabelSize: { type: \"string\" },\n            embeddingCellRadius: { type: \"string\" },\n            spatialZoom: { type: \"string\" },\n            spatialRotation: { type: \"string\" },\n            spatialTargetX: { type: \"string\" },\n            spatialTargetY: { type: \"string\" },\n            spatialTargetZ: { type: \"string\" },\n            spatialRotationX: { type: \"string\" },\n            spatialRotationY: { type: \"string\" },\n            spatialRotationZ: { type: \"string\" },\n            spatialRotationOrbit: { type: \"string\" },\n            spatialOrbitAxis: { type: \"string\" },\n            spatialAxisFixed: { type: \"string\" },\n            heatmapZoomX: { type: \"string\" },\n            heatmapZoomY: { type: \"string\" },\n            heatmapTargetX: { type: \"string\" },\n            heatmapTargetY: { type: \"string\" },\n            cellFilter: { type: \"string\" },\n            cellHighlight: { type: \"string\" },\n            cellSetSelection: { type: \"string\" },\n            cellSetHighlight: { type: \"string\" },\n            cellSetColor: { type: \"string\" },\n            geneFilter: { type: \"string\" },\n            geneHighlight: { type: \"string\" },\n            geneSelection: { type: \"string\" },\n            geneExpressionTransform: { type: \"string\" },\n            geneExpressionColormap: { type: \"string\" },\n            geneExpressionColormapRange: { type: \"string\" },\n            cellColorEncoding: { type: \"string\" },\n            spatialRasterLayers: { type: \"string\" },\n            spatialCellsLayer: { type: \"string\" },\n            spatialMoleculesLayer: { type: \"string\" },\n            spatialNeighborhoodsLayer: { type: \"string\" },\n            genomicZoomX: { type: \"string\" },\n            genomicZoomY: { type: \"string\" },\n            genomicTargetX: { type: \"string\" },\n            genomicTargetY: { type: \"string\" },\n            additionalCellSets: { type: \"string\" },\n            moleculeHighlight: { type: \"string\" }\n          }\n        }\n      }\n    }\n  },\n  annDataCellSets: {\n    type: \"array\",\n    description: \"Array of cell set configuration, following closely the conventions of the tabular schema\",\n    items: {\n      type: \"object\",\n      additionalProperties: false,\n      required: [\"groupName\", \"setName\"],\n      properties: {\n        groupName: {\n          type: \"string\",\n          description: \"The display name for the set, like 'Cell Type' or 'Louvain.'\"\n        },\n        setName: {\n          type: \"string\",\n          description: \"The location in the AnnData store for the set, like 'obs/louvain' or 'obs/celltype.'\"\n        }\n      }\n    }\n  },\n  annDataCells: {\n    type: \"object\",\n    description: \"The properties of this object are the configuration for how to layout scatterplots and spatial information\",\n    minProperties: 1,\n    additionalProperties: false,\n    required: [],\n    properties: {\n      xy: {\n        type: \"string\",\n        description: \"The location in the AnnData store of cell centroids, like 'obsm/X_centroids.'\"\n      },\n      poly: {\n        type: \"string\",\n        description: \"The location in the AnnData store of cell polygon outlines, like 'obsm/X_polygons.'\"\n      },\n      factors: {\n        type: \"array\",\n        description: \"List of locations in the AnnData store of cell sets, like 'obs/louvain'\",\n        items: {\n          type: \"string\"\n        }\n      },\n      mappings: {\n        patternProperties: {\n          \".\": {\n            type: \"object\",\n            description: \"An object containing key-values for mappings like { UMAP: { key: 'obsm/X_umap', dims: [0, 1] } }.\",\n            additionalProperties: false,\n            required: [\"key\"],\n            properties: {\n              key: {\n                type: \"string\",\n                description: \"Where to look in the AnnData store for this mapping, like 'obsm/X_umap.'\"\n              },\n              dims: {\n                type: \"array\",\n                description: \"Which indices of the obsm object to take for a scatterplot, allowing for, for example, different PCs from obsm/X_pca\",\n                minItems: 2,\n                maxItems: 2,\n                items: { type: \"number\" }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  annDataExpressionMatrix: {\n    type: \"object\",\n    description: \"The properties of this object are the configuration for how to fetch the cell x genes matrix\",\n    additionalProperties: false,\n    required: [\"matrix\"],\n    properties: {\n      matrix: {\n        type: \"string\",\n        description: \"The location in the AnnData store of the cell x gene matrix, like 'obsm/hvg_subset.' or 'X'\"\n      },\n      geneFilter: {\n        type: \"string\",\n        description: \"The location in the AnnData store of a filter for the genes if using a subset of the data, like 'var.highly_variable.' if the matrix comes from 'obsm/hvg_subset.'\"\n      },\n      matrixGeneFilter: {\n        type: \"string\",\n        description: \"The location in the AnnData store of a filter for the matrix data (used in heatmap and histogram), like 'var.highly_variable.''\"\n      }\n    }\n  },\n  requestInit: {\n    type: \"object\",\n    description: \"The properties of this object correspond to the parameters of the JavaScript fetch() function.\",\n    additionalProperties: false,\n    required: [],\n    properties: {\n      method: {\n        type: \"string\"\n      },\n      headers: {\n        type: \"object\"\n      },\n      body: {\n        type: \"string\"\n      },\n      mode: {\n        type: \"string\"\n      },\n      credentials: {\n        type: \"string\"\n      },\n      cache: {\n        type: \"string\"\n      },\n      redirect: {\n        type: \"string\"\n      },\n      referrer: {\n        type: \"string\"\n      },\n      integrity: {\n        type: \"string\"\n      }\n    }\n  },\n  rasterLayer: {\n    description: \"The properties of this object are the rendering settings for the raster layer.\",\n    additionalProperties: false,\n    required: [\"channels\", \"colormap\", \"index\", \"opacity\"],\n    properties: {\n      channels: {\n        type: \"array\",\n        items: {\n          type: \"object\",\n          additionalProperties: false,\n          required: [\"selection\"],\n          properties: {\n            color: {\n              type: \"array\",\n              items: { type: \"number\" },\n              description: \"The color to use when rendering this channel under the null colormap.\"\n            },\n            selection: {\n              type: \"object\",\n              description: \"Determines the channel selection, e.g. some Z and time slice.\"\n            },\n            slider: {\n              type: \"array\",\n              items: { type: \"number\" },\n              description: \"Determines the range for color mapping.\"\n            },\n            visible: {\n              type: \"boolean\",\n              description: \"Determines whether this channel of the layer will be rendered in the spatial component.\"\n            }\n          }\n        }\n      },\n      colormap: {\n        oneOf: [\n          {\n            type: \"string\",\n            description: \"The name of the colormap to use for this layer.\"\n          },\n          {\n            type: \"null\",\n            description: \"Use the solid color definitions.\"\n          }\n        ]\n      },\n      transparentColor: {\n        oneOf: [\n          {\n            type: \"array\",\n            minItems: 3,\n            maxItems: 3,\n            items: {\n              type: \"number\",\n              description: \"One of R G or B (0 - 255).\"\n            },\n            description: \"Determines the color to be set to opacity 0\"\n          },\n          {\n            type: \"null\",\n            description: \"No selection.\"\n          }\n        ]\n      },\n      index: {\n        type: \"number\",\n        description: \"The index of the layer among the array of layers available in the image file.\"\n      },\n      opacity: {\n        type: \"number\"\n      },\n      modelMatrix: {\n        oneOf: [\n          {\n            type: \"array\",\n            minItems: 16,\n            maxItems: 16,\n            description: \"transformation matrix for this layer\"\n          },\n          {\n            type: \"null\",\n            description: \"Use no transformation.\"\n          }\n        ]\n      },\n      domainType: {\n        type: \"string\",\n        enum: [\"Full\", \"Min/Max\"],\n        description: \"Determines the extent of the channel slider input element in the layer controller.\"\n      },\n      resolution: {\n        type: \"number\",\n        description: \"Resolution of 3D volumetric rendering\"\n      },\n      xSlice: {\n        oneOf: [\n          {\n            type: \"array\",\n            minItems: 2,\n            maxItems: 2,\n            description: \"Slice bounds\"\n          },\n          {\n            type: \"null\",\n            description: \"No slicing\"\n          }\n        ]\n      },\n      renderingMode: {\n        type: \"string\",\n        description: \"Rendering mode of 3D volumetric rendering\"\n      },\n      ySlice: {\n        oneOf: [\n          {\n            type: \"array\",\n            minItems: 2,\n            maxItems: 2,\n            description: \"Slice bounds\"\n          },\n          {\n            type: \"null\",\n            description: \"No slicing\"\n          }\n        ]\n      },\n      zSlice: {\n        oneOf: [\n          {\n            type: \"array\",\n            minItems: 2,\n            maxItems: 2,\n            description: \"Slice bounds\"\n          },\n          {\n            type: \"null\",\n            description: \"No slicing\"\n          }\n        ]\n      },\n      type: {\n        type: \"string\"\n      },\n      use3d: {\n        type: \"boolean\"\n      },\n      visible: {\n        type: \"boolean\",\n        description: \"Determines whether this entire layer will be rendered in the spatial component.\"\n      }\n    }\n  },\n  moleculesLayer: {\n    type: \"object\",\n    description: \"The properties of this object are the rendering settings for the molecules layer.\",\n    additionalProperties: false,\n    required: [\"visible\", \"radius\", \"opacity\"],\n    properties: {\n      visible: {\n        type: \"boolean\"\n      },\n      radius: {\n        type: \"number\"\n      },\n      opacity: {\n        type: \"number\"\n      }\n    }\n  },\n  cellsLayer: {\n    type: \"object\",\n    description: \"The properties of this object are the rendering settings for the cells layer.\",\n    additionalProperties: false,\n    required: [\"visible\", \"stroked\", \"radius\", \"opacity\"],\n    properties: {\n      visible: {\n        type: \"boolean\"\n      },\n      stroked: {\n        type: \"boolean\"\n      },\n      radius: {\n        type: \"number\"\n      },\n      opacity: {\n        type: \"number\"\n      }\n    }\n  },\n  neighborhoodsLayer: {\n    type: \"object\",\n    description: \"The properties of this object are the rendering settings for the neighborhoods layer.\",\n    additionalProperties: false,\n    required: [\"visible\"],\n    properties: {\n      visible: {\n        type: \"boolean\"\n      }\n    }\n  },\n  spatialRasterLayers: {\n    type: \"array\",\n    description: \"Array of Spatial Layers\",\n    items: {\n      $ref: \"#/definitions/rasterLayer\"\n    }\n  }\n};\nvar additionalProperties5 = false;\nvar required5 = [\"version\", \"name\", \"datasets\", \"layout\", \"initStrategy\"];\nvar properties5 = {\n  name: { type: \"string\" },\n  public: { type: \"boolean\" },\n  description: { type: \"string\" },\n  datasets: {\n    type: \"array\",\n    description: \"The datasets array defines groups of files, where the files within each dataset reference the same entities (cells, genes, cell sets, etc).\",\n    items: {\n      type: \"object\",\n      additionalProperties: false,\n      required: [\"uid\", \"files\"],\n      properties: {\n        uid: { type: \"string\" },\n        name: { type: \"string\" },\n        description: { type: \"string\" },\n        files: {\n          type: \"array\",\n          items: {\n            type: \"object\",\n            additionalProperties: false,\n            required: [\"type\", \"fileType\"],\n            properties: {\n              name: { type: \"string\" },\n              type: { type: \"string\" },\n              fileType: { type: \"string\" },\n              url: { type: \"string\" },\n              options: { oneOf: [{ $ref: \"#/definitions/annDataCellSets\" }, { $ref: \"https://github.com/vitessce/vitessce/#raster\" }, { $ref: \"#/definitions/annDataCells\" }, { $ref: \"#/definitions/annDataExpressionMatrix\" }] },\n              requestInit: { $ref: \"#/definitions/requestInit\" }\n            }\n          }\n        }\n      }\n    }\n  },\n  coordinationSpace: {\n    type: \"object\",\n    description: \"The coordination space stores the values for each scope of each coordination object.\",\n    additionalProperties: false,\n    required: [],\n    properties: {\n      dataset: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"string\" }\n        }\n      },\n      embeddingZoom: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, value will be automatically set.\"\n              },\n              { type: \"number\" }\n            ]\n          }\n        }\n      },\n      embeddingRotation: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"number\" }\n        }\n      },\n      embeddingTargetX: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, value will be automatically set.\"\n              },\n              { type: \"number\" }\n            ]\n          }\n        }\n      },\n      embeddingTargetY: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, value will be automatically set.\"\n              },\n              { type: \"number\" }\n            ]\n          }\n        }\n      },\n      embeddingTargetZ: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"number\" }\n        }\n      },\n      embeddingType: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"string\" }\n        }\n      },\n      embeddingCellSetPolygonsVisible: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"boolean\" }\n        }\n      },\n      embeddingCellSetLabelsVisible: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"boolean\" }\n        }\n      },\n      embeddingCellSetLabelSize: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"number\" }\n        }\n      },\n      embeddingCellRadius: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"number\" }\n        }\n      },\n      spatialZoom: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, value will be automatically set.\"\n              },\n              { type: \"number\" }\n            ]\n          }\n        }\n      },\n      spatialRotation: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"number\" }\n        }\n      },\n      spatialTargetX: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, value will be automatically set.\"\n              },\n              { type: \"number\" }\n            ]\n          }\n        }\n      },\n      spatialTargetY: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, value will be automatically set.\"\n              },\n              { type: \"number\" }\n            ]\n          }\n        }\n      },\n      spatialTargetZ: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, value will be automatically set.\"\n              },\n              { type: \"number\" }\n            ]\n          }\n        }\n      },\n      spatialRotationX: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, value will be automatically set. Only useful for 3D viewing.\"\n              },\n              { type: \"number\" }\n            ]\n          }\n        }\n      },\n      spatialRotationY: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, value will be automatically set. Only useful for 3D viewing.\"\n              },\n              { type: \"number\" }\n            ]\n          }\n        }\n      },\n      spatialRotationZ: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, value will be automatically set. Only useful for 3D viewing.\"\n              },\n              { type: \"number\" }\n            ]\n          }\n        }\n      },\n      spatialRotationOrbit: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, value will be automatically set. Only useful for 3D viewing.\"\n              },\n              { type: \"number\" }\n            ]\n          }\n        }\n      },\n      spatialOrbitAxis: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, value will be automatically set. Only useful for 3D viewing.\"\n              },\n              { type: \"string\" }\n            ]\n          }\n        }\n      },\n      spatialAxisFixed: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"Whether or not to have a fixed axis for the camera. Only useful for 3D viewing.\"\n              },\n              { type: \"boolean\" }\n            ]\n          }\n        }\n      },\n      spatialRasterLayers: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided and auto layer initialization is enabled, layers will be automatically initialized.\"\n              },\n              { $ref: \"#/definitions/spatialRasterLayers\" }\n            ]\n          }\n        }\n      },\n      spatialCellsLayer: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided and auto layer initialization is enabled, layers will be automatically initialized.\"\n              },\n              { $ref: \"#/definitions/cellsLayer\" }\n            ]\n          }\n        }\n      },\n      spatialNeighborhoodsLayer: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided and auto layer initialization is enabled, layers will be automatically initialized.\"\n              },\n              { $ref: \"#/definitions/neighborhoodsLayer\" }\n            ]\n          }\n        }\n      },\n      spatialMoleculesLayer: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided and auto layer initialization is enabled, layers will be automatically initialized.\"\n              },\n              { $ref: \"#/definitions/moleculesLayer\" }\n            ]\n          }\n        }\n      },\n      heatmapZoomX: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"number\" }\n        }\n      },\n      heatmapZoomY: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"number\" }\n        }\n      },\n      heatmapTargetX: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"number\" }\n        }\n      },\n      heatmapTargetY: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"number\" }\n        }\n      },\n      cellFilter: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, no cells will be filtered out initially.\"\n              },\n              { type: \"array\", items: { type: \"string\" } }\n            ]\n          }\n        }\n      },\n      cellHighlight: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, no cell will be highlighted initially.\"\n              },\n              { type: \"string\" }\n            ]\n          }\n        }\n      },\n      cellSetSelection: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided and auto cell set initialization is enabled, cell set selections will be automatically initialized.\"\n              },\n              { type: \"array\" }\n            ]\n          }\n        }\n      },\n      cellSetHighlight: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, no cell sets will be highlighted initially.\"\n              },\n              { type: \"string\" }\n            ]\n          }\n        }\n      },\n      cellSetColor: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, cell set colors will be automatically initialized.\"\n              },\n              {\n                type: \"array\",\n                items: {\n                  type: \"object\",\n                  additionalProperties: false,\n                  required: [\"path\", \"color\"],\n                  properties: {\n                    path: {\n                      type: \"array\",\n                      items: { type: \"string\" }\n                    },\n                    color: {\n                      type: \"array\",\n                      items: { type: \"number\" }\n                    }\n                  }\n                }\n              }\n            ]\n          }\n        }\n      },\n      cellColorEncoding: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"string\" }\n        }\n      },\n      geneFilter: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, no genes will be filtered out initially.\"\n              },\n              { type: \"array\", items: { type: \"string\" } }\n            ]\n          }\n        }\n      },\n      geneHighlight: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, no genes will be highlighted initially.\"\n              },\n              { type: \"string\" }\n            ]\n          }\n        }\n      },\n      geneSelection: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\"\n              },\n              { type: \"array\", items: { type: \"string\" } }\n            ]\n          }\n        }\n      },\n      geneExpressionTransform: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\"\n              },\n              { type: \"string\", pattern: \"log1p\" }\n            ]\n          }\n        }\n      },\n      geneExpressionColormap: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"string\" }\n        }\n      },\n      geneExpressionColormapRange: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"array\", items: { type: \"number\" } }\n        }\n      },\n      genomicZoomX: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"number\" }\n        }\n      },\n      genomicZoomY: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"number\" }\n        }\n      },\n      genomicTargetX: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"number\" }\n        }\n      },\n      genomicTargetY: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"number\" }\n        }\n      },\n      additionalCellSets: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, no cell will be highlighted initially.\"\n              },\n              {\n                $ref: \"https://github.com/vitessce/vitessce/#cell-sets\"\n              }\n            ]\n          }\n        }\n      },\n      moleculeHighlight: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, no molecule will be highlighted initially.\"\n              },\n              { type: \"string\" }\n            ]\n          }\n        }\n      }\n    }\n  },\n  layout: { $ref: \"#/definitions/components\" },\n  initStrategy: {\n    type: \"string\",\n    enum: [\"none\", \"auto\"],\n    description: \"The initialization strategy determines how missing coordination objects and coordination scope mappings are initially filled in.\"\n  },\n  version: {\n    type: \"string\",\n    enum: [\"1.0.1\"],\n    description: \"The schema version for the view config.\"\n  }\n};\nvar config_1_0_1_schema_default = {\n  $schema: $schema11,\n  $id: $id11,\n  title: title11,\n  type: type11,\n  definitions: definitions11,\n  additionalProperties: additionalProperties5,\n  required: required5,\n  properties: properties5\n};\n\n// src/schemas/config-1.0.2.schema.json\nvar $schema12 = \"http://json-schema.org/draft-07/schema#\";\nvar $id12 = \"https://github.com/vitessce/vitessce/#dataset\";\nvar title12 = \"Vitessce data set\";\nvar type12 = \"object\";\nvar definitions12 = {\n  components: {\n    description: \"The layout array defines the views, or components, rendered in the grid.\",\n    type: \"array\",\n    items: {\n      type: \"object\",\n      additionalProperties: false,\n      required: [\"component\", \"x\", \"y\"],\n      properties: {\n        component: {\n          type: \"string\",\n          description: \"Specify a component using a name defined in the component registry.\"\n        },\n        props: {\n          type: \"object\",\n          description: \"Extra prop values for the component.\"\n        },\n        x: { type: \"integer\" },\n        y: { type: \"integer\" },\n        w: { type: \"integer\" },\n        h: { type: \"integer\" },\n        coordinationScopes: {\n          type: \"object\",\n          description: \"Component-level coordination scope mappings define which coordination object values a particular component can read and write, for each coordination type.\",\n          additionalProperties: false,\n          required: [],\n          properties: {\n            dataset: { type: \"string\" },\n            embeddingType: { type: \"string\" },\n            embeddingZoom: { type: \"string\" },\n            embeddingRotation: { type: \"string\" },\n            embeddingTargetX: { type: \"string\" },\n            embeddingTargetY: { type: \"string\" },\n            embeddingTargetZ: { type: \"string\" },\n            embeddingCellSetPolygonsVisible: { type: \"string\" },\n            embeddingCellSetLabelsVisible: { type: \"string\" },\n            embeddingCellSetLabelSize: { type: \"string\" },\n            embeddingCellRadius: { type: \"string\" },\n            spatialZoom: { type: \"string\" },\n            spatialRotation: { type: \"string\" },\n            spatialTargetX: { type: \"string\" },\n            spatialTargetY: { type: \"string\" },\n            spatialTargetZ: { type: \"string\" },\n            spatialRotationX: { type: \"string\" },\n            spatialRotationY: { type: \"string\" },\n            spatialRotationZ: { type: \"string\" },\n            spatialRotationOrbit: { type: \"string\" },\n            spatialOrbitAxis: { type: \"string\" },\n            spatialAxisFixed: { type: \"string\" },\n            heatmapZoomX: { type: \"string\" },\n            heatmapZoomY: { type: \"string\" },\n            heatmapTargetX: { type: \"string\" },\n            heatmapTargetY: { type: \"string\" },\n            cellFilter: { type: \"string\" },\n            cellHighlight: { type: \"string\" },\n            cellSetSelection: { type: \"string\" },\n            cellSetHighlight: { type: \"string\" },\n            cellSetColor: { type: \"string\" },\n            geneFilter: { type: \"string\" },\n            geneHighlight: { type: \"string\" },\n            geneSelection: { type: \"string\" },\n            geneExpressionTransform: { type: \"string\" },\n            geneExpressionColormap: { type: \"string\" },\n            geneExpressionColormapRange: { type: \"string\" },\n            cellColorEncoding: { type: \"string\" },\n            spatialRasterLayers: { type: \"string\" },\n            spatialCellsLayer: { type: \"string\" },\n            spatialMoleculesLayer: { type: \"string\" },\n            spatialNeighborhoodsLayer: { type: \"string\" },\n            genomicZoomX: { type: \"string\" },\n            genomicZoomY: { type: \"string\" },\n            genomicTargetX: { type: \"string\" },\n            genomicTargetY: { type: \"string\" },\n            additionalCellSets: { type: \"string\" },\n            moleculeHighlight: { type: \"string\" }\n          }\n        }\n      }\n    }\n  },\n  annDataCellSets: {\n    type: \"array\",\n    description: \"Array of cell set configuration, following closely the conventions of the tabular schema\",\n    items: {\n      type: \"object\",\n      additionalProperties: false,\n      required: [\"groupName\", \"setName\"],\n      properties: {\n        groupName: {\n          type: \"string\",\n          description: \"The display name for the set, like 'Cell Type' or 'Louvain.'\"\n        },\n        setName: {\n          type: \"string\",\n          description: \"The location in the AnnData store for the set, like 'obs/louvain' or 'obs/celltype.'\"\n        }\n      }\n    }\n  },\n  annDataCells: {\n    type: \"object\",\n    description: \"The properties of this object are the configuration for how to layout scatterplots and spatial information\",\n    minProperties: 1,\n    additionalProperties: false,\n    required: [],\n    properties: {\n      xy: {\n        type: \"string\",\n        description: \"The location in the AnnData store of cell centroids, like 'obsm/X_centroids.'\"\n      },\n      poly: {\n        type: \"string\",\n        description: \"The location in the AnnData store of cell polygon outlines, like 'obsm/X_polygons.'\"\n      },\n      factors: {\n        type: \"array\",\n        description: \"List of locations in the AnnData store of cell sets, like 'obs/louvain'\",\n        items: {\n          type: \"string\"\n        }\n      },\n      mappings: {\n        patternProperties: {\n          \".\": {\n            type: \"object\",\n            description: \"An object containing key-values for mappings like { UMAP: { key: 'obsm/X_umap', dims: [0, 1] } }.\",\n            additionalProperties: false,\n            required: [\"key\"],\n            properties: {\n              key: {\n                type: \"string\",\n                description: \"Where to look in the AnnData store for this mapping, like 'obsm/X_umap.'\"\n              },\n              dims: {\n                type: \"array\",\n                description: \"Which indices of the obsm object to take for a scatterplot, allowing for, for example, different PCs from obsm/X_pca\",\n                minItems: 2,\n                maxItems: 2,\n                items: { type: \"number\" }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  annDataExpressionMatrix: {\n    type: \"object\",\n    description: \"The properties of this object are the configuration for how to fetch the cell x genes matrix\",\n    additionalProperties: false,\n    required: [\"matrix\"],\n    properties: {\n      matrix: {\n        type: \"string\",\n        description: \"The location in the AnnData store of the cell x gene matrix, like 'obsm/hvg_subset.' or 'X'\"\n      },\n      geneFilter: {\n        type: \"string\",\n        description: \"The location in the AnnData store of a filter for the genes if using a subset of the data, like 'var.highly_variable.' if the matrix comes from 'obsm/hvg_subset.'\"\n      },\n      matrixGeneFilter: {\n        type: \"string\",\n        description: \"The location in the AnnData store of a filter for the matrix data (used in heatmap and histogram), like 'var.highly_variable.''\"\n      }\n    }\n  },\n  requestInit: {\n    type: \"object\",\n    description: \"The properties of this object correspond to the parameters of the JavaScript fetch() function.\",\n    additionalProperties: false,\n    required: [],\n    properties: {\n      method: {\n        type: \"string\"\n      },\n      headers: {\n        type: \"object\"\n      },\n      body: {\n        type: \"string\"\n      },\n      mode: {\n        type: \"string\"\n      },\n      credentials: {\n        type: \"string\"\n      },\n      cache: {\n        type: \"string\"\n      },\n      redirect: {\n        type: \"string\"\n      },\n      referrer: {\n        type: \"string\"\n      },\n      integrity: {\n        type: \"string\"\n      }\n    }\n  },\n  rasterLayer: {\n    description: \"The properties of this object are the rendering settings for the raster layer.\",\n    additionalProperties: false,\n    required: [\"channels\", \"colormap\", \"index\", \"opacity\"],\n    properties: {\n      channels: {\n        type: \"array\",\n        items: {\n          type: \"object\",\n          additionalProperties: false,\n          required: [\"selection\"],\n          properties: {\n            color: {\n              type: \"array\",\n              items: { type: \"number\" },\n              description: \"The color to use when rendering this channel under the null colormap.\"\n            },\n            selection: {\n              type: \"object\",\n              description: \"Determines the channel selection, e.g. some Z and time slice.\"\n            },\n            slider: {\n              type: \"array\",\n              items: { type: \"number\" },\n              description: \"Determines the range for color mapping.\"\n            },\n            visible: {\n              type: \"boolean\",\n              description: \"Determines whether this channel of the layer will be rendered in the spatial component.\"\n            }\n          }\n        }\n      },\n      colormap: {\n        oneOf: [\n          {\n            type: \"string\",\n            description: \"The name of the colormap to use for this layer.\"\n          },\n          {\n            type: \"null\",\n            description: \"Use the solid color definitions.\"\n          }\n        ]\n      },\n      transparentColor: {\n        oneOf: [\n          {\n            type: \"array\",\n            minItems: 3,\n            maxItems: 3,\n            items: {\n              type: \"number\",\n              description: \"One of R G or B (0 - 255).\"\n            },\n            description: \"Determines the color to be set to opacity 0\"\n          },\n          {\n            type: \"null\",\n            description: \"No selection.\"\n          }\n        ]\n      },\n      index: {\n        type: \"number\",\n        description: \"The index of the layer among the array of layers available in the image file.\"\n      },\n      opacity: {\n        type: \"number\"\n      },\n      modelMatrix: {\n        oneOf: [\n          {\n            type: \"array\",\n            minItems: 16,\n            maxItems: 16,\n            description: \"transformation matrix for this layer\"\n          },\n          {\n            type: \"null\",\n            description: \"Use no transformation.\"\n          }\n        ]\n      },\n      domainType: {\n        type: \"string\",\n        enum: [\"Full\", \"Min/Max\"],\n        description: \"Determines the extent of the channel slider input element in the layer controller.\"\n      },\n      resolution: {\n        type: \"number\",\n        description: \"Resolution of 3D volumetric rendering\"\n      },\n      xSlice: {\n        oneOf: [\n          {\n            type: \"array\",\n            minItems: 2,\n            maxItems: 2,\n            description: \"Slice bounds\"\n          },\n          {\n            type: \"null\",\n            description: \"No slicing\"\n          }\n        ]\n      },\n      renderingMode: {\n        type: \"string\",\n        description: \"Rendering mode of 3D volumetric rendering\"\n      },\n      ySlice: {\n        oneOf: [\n          {\n            type: \"array\",\n            minItems: 2,\n            maxItems: 2,\n            description: \"Slice bounds\"\n          },\n          {\n            type: \"null\",\n            description: \"No slicing\"\n          }\n        ]\n      },\n      zSlice: {\n        oneOf: [\n          {\n            type: \"array\",\n            minItems: 2,\n            maxItems: 2,\n            description: \"Slice bounds\"\n          },\n          {\n            type: \"null\",\n            description: \"No slicing\"\n          }\n        ]\n      },\n      type: {\n        type: \"string\",\n        enum: [\"raster\", \"bitmask\"]\n      },\n      use3d: {\n        type: \"boolean\"\n      },\n      visible: {\n        type: \"boolean\",\n        description: \"Determines whether this entire layer will be rendered in the spatial component.\"\n      }\n    }\n  },\n  moleculesLayer: {\n    type: \"object\",\n    description: \"The properties of this object are the rendering settings for the molecules layer.\",\n    additionalProperties: false,\n    required: [\"visible\", \"radius\", \"opacity\"],\n    properties: {\n      visible: {\n        type: \"boolean\"\n      },\n      radius: {\n        type: \"number\"\n      },\n      opacity: {\n        type: \"number\"\n      }\n    }\n  },\n  cellsLayer: {\n    type: \"object\",\n    description: \"The properties of this object are the rendering settings for the cells layer.\",\n    additionalProperties: false,\n    required: [\"visible\", \"stroked\", \"radius\", \"opacity\"],\n    properties: {\n      visible: {\n        type: \"boolean\"\n      },\n      stroked: {\n        type: \"boolean\"\n      },\n      radius: {\n        type: \"number\"\n      },\n      opacity: {\n        type: \"number\"\n      }\n    }\n  },\n  neighborhoodsLayer: {\n    type: \"object\",\n    description: \"The properties of this object are the rendering settings for the neighborhoods layer.\",\n    additionalProperties: false,\n    required: [\"visible\"],\n    properties: {\n      visible: {\n        type: \"boolean\"\n      }\n    }\n  },\n  spatialRasterLayers: {\n    type: \"array\",\n    description: \"Array of Spatial Layers\",\n    items: {\n      $ref: \"#/definitions/rasterLayer\"\n    }\n  }\n};\nvar additionalProperties6 = false;\nvar required6 = [\"version\", \"name\", \"datasets\", \"layout\", \"initStrategy\"];\nvar properties6 = {\n  name: { type: \"string\" },\n  public: { type: \"boolean\" },\n  description: { type: \"string\" },\n  datasets: {\n    type: \"array\",\n    description: \"The datasets array defines groups of files, where the files within each dataset reference the same entities (cells, genes, cell sets, etc).\",\n    items: {\n      type: \"object\",\n      additionalProperties: false,\n      required: [\"uid\", \"files\"],\n      properties: {\n        uid: { type: \"string\" },\n        name: { type: \"string\" },\n        description: { type: \"string\" },\n        files: {\n          type: \"array\",\n          items: {\n            type: \"object\",\n            additionalProperties: false,\n            required: [\"type\", \"fileType\"],\n            properties: {\n              name: { type: \"string\" },\n              type: { type: \"string\" },\n              fileType: { type: \"string\" },\n              url: { type: \"string\" },\n              options: { oneOf: [{ $ref: \"#/definitions/annDataCellSets\" }, { $ref: \"https://github.com/vitessce/vitessce/#raster\" }, { $ref: \"#/definitions/annDataCells\" }, { $ref: \"#/definitions/annDataExpressionMatrix\" }] },\n              requestInit: { $ref: \"#/definitions/requestInit\" }\n            }\n          }\n        }\n      }\n    }\n  },\n  coordinationSpace: {\n    type: \"object\",\n    description: \"The coordination space stores the values for each scope of each coordination object.\",\n    additionalProperties: false,\n    required: [],\n    properties: {\n      dataset: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"string\" }\n        }\n      },\n      embeddingZoom: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, value will be automatically set.\"\n              },\n              { type: \"number\" }\n            ]\n          }\n        }\n      },\n      embeddingRotation: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"number\" }\n        }\n      },\n      embeddingTargetX: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, value will be automatically set.\"\n              },\n              { type: \"number\" }\n            ]\n          }\n        }\n      },\n      embeddingTargetY: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, value will be automatically set.\"\n              },\n              { type: \"number\" }\n            ]\n          }\n        }\n      },\n      embeddingTargetZ: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"number\" }\n        }\n      },\n      embeddingType: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"string\" }\n        }\n      },\n      embeddingCellSetPolygonsVisible: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"boolean\" }\n        }\n      },\n      embeddingCellSetLabelsVisible: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"boolean\" }\n        }\n      },\n      embeddingCellSetLabelSize: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"number\" }\n        }\n      },\n      embeddingCellRadius: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"number\" }\n        }\n      },\n      spatialZoom: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, value will be automatically set.\"\n              },\n              { type: \"number\" }\n            ]\n          }\n        }\n      },\n      spatialRotation: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"number\" }\n        }\n      },\n      spatialTargetX: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, value will be automatically set.\"\n              },\n              { type: \"number\" }\n            ]\n          }\n        }\n      },\n      spatialTargetY: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, value will be automatically set.\"\n              },\n              { type: \"number\" }\n            ]\n          }\n        }\n      },\n      spatialTargetZ: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, value will be automatically set.\"\n              },\n              { type: \"number\" }\n            ]\n          }\n        }\n      },\n      spatialRotationX: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, value will be automatically set. Only useful for 3D viewing.\"\n              },\n              { type: \"number\" }\n            ]\n          }\n        }\n      },\n      spatialRotationY: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, value will be automatically set. Only useful for 3D viewing.\"\n              },\n              { type: \"number\" }\n            ]\n          }\n        }\n      },\n      spatialRotationZ: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, value will be automatically set. Only useful for 3D viewing.\"\n              },\n              { type: \"number\" }\n            ]\n          }\n        }\n      },\n      spatialRotationOrbit: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, value will be automatically set. Only useful for 3D viewing.\"\n              },\n              { type: \"number\" }\n            ]\n          }\n        }\n      },\n      spatialOrbitAxis: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, value will be automatically set. Only useful for 3D viewing.\"\n              },\n              { type: \"string\" }\n            ]\n          }\n        }\n      },\n      spatialAxisFixed: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"Whether or not to have a fixed axis for the camera. Only useful for 3D viewing.\"\n              },\n              { type: \"boolean\" }\n            ]\n          }\n        }\n      },\n      spatialRasterLayers: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided and auto layer initialization is enabled, layers will be automatically initialized.\"\n              },\n              { $ref: \"#/definitions/spatialRasterLayers\" }\n            ]\n          }\n        }\n      },\n      spatialCellsLayer: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided and auto layer initialization is enabled, layers will be automatically initialized.\"\n              },\n              { $ref: \"#/definitions/cellsLayer\" }\n            ]\n          }\n        }\n      },\n      spatialNeighborhoodsLayer: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided and auto layer initialization is enabled, layers will be automatically initialized.\"\n              },\n              { $ref: \"#/definitions/neighborhoodsLayer\" }\n            ]\n          }\n        }\n      },\n      spatialMoleculesLayer: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided and auto layer initialization is enabled, layers will be automatically initialized.\"\n              },\n              { $ref: \"#/definitions/moleculesLayer\" }\n            ]\n          }\n        }\n      },\n      heatmapZoomX: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"number\" }\n        }\n      },\n      heatmapZoomY: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"number\" }\n        }\n      },\n      heatmapTargetX: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"number\" }\n        }\n      },\n      heatmapTargetY: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"number\" }\n        }\n      },\n      cellFilter: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, no cells will be filtered out initially.\"\n              },\n              { type: \"array\", items: { type: \"string\" } }\n            ]\n          }\n        }\n      },\n      cellHighlight: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, no cell will be highlighted initially.\"\n              },\n              { type: \"string\" }\n            ]\n          }\n        }\n      },\n      cellSetSelection: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided and auto cell set initialization is enabled, cell set selections will be automatically initialized.\"\n              },\n              { type: \"array\" }\n            ]\n          }\n        }\n      },\n      cellSetHighlight: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, no cell sets will be highlighted initially.\"\n              },\n              { type: \"string\" }\n            ]\n          }\n        }\n      },\n      cellSetColor: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, cell set colors will be automatically initialized.\"\n              },\n              {\n                type: \"array\",\n                items: {\n                  type: \"object\",\n                  additionalProperties: false,\n                  required: [\"path\", \"color\"],\n                  properties: {\n                    path: {\n                      type: \"array\",\n                      items: { type: \"string\" }\n                    },\n                    color: {\n                      type: \"array\",\n                      items: { type: \"number\" }\n                    }\n                  }\n                }\n              }\n            ]\n          }\n        }\n      },\n      cellColorEncoding: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"string\" }\n        }\n      },\n      geneFilter: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, no genes will be filtered out initially.\"\n              },\n              { type: \"array\", items: { type: \"string\" } }\n            ]\n          }\n        }\n      },\n      geneHighlight: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, no genes will be highlighted initially.\"\n              },\n              { type: \"string\" }\n            ]\n          }\n        }\n      },\n      geneSelection: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\"\n              },\n              { type: \"array\", items: { type: \"string\" } }\n            ]\n          }\n        }\n      },\n      geneExpressionTransform: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\"\n              },\n              { type: \"string\", pattern: \"log1p\" }\n            ]\n          }\n        }\n      },\n      geneExpressionColormap: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"string\" }\n        }\n      },\n      geneExpressionColormapRange: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"array\", items: { type: \"number\" } }\n        }\n      },\n      genomicZoomX: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"number\" }\n        }\n      },\n      genomicZoomY: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"number\" }\n        }\n      },\n      genomicTargetX: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"number\" }\n        }\n      },\n      genomicTargetY: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"number\" }\n        }\n      },\n      additionalCellSets: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, no cell will be highlighted initially.\"\n              },\n              {\n                $ref: \"https://github.com/vitessce/vitessce/#cell-sets\"\n              }\n            ]\n          }\n        }\n      },\n      moleculeHighlight: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, no molecule will be highlighted initially.\"\n              },\n              { type: \"string\" }\n            ]\n          }\n        }\n      }\n    }\n  },\n  layout: { $ref: \"#/definitions/components\" },\n  initStrategy: {\n    type: \"string\",\n    enum: [\"none\", \"auto\"],\n    description: \"The initialization strategy determines how missing coordination objects and coordination scope mappings are initially filled in.\"\n  },\n  version: {\n    type: \"string\",\n    enum: [\"1.0.2\"],\n    description: \"The schema version for the view config.\"\n  }\n};\nvar config_1_0_2_schema_default = {\n  $schema: $schema12,\n  $id: $id12,\n  title: title12,\n  type: type12,\n  definitions: definitions12,\n  additionalProperties: additionalProperties6,\n  required: required6,\n  properties: properties6\n};\n\n// src/schemas/config-1.0.3.schema.json\nvar $schema13 = \"http://json-schema.org/draft-07/schema#\";\nvar $id13 = \"https://github.com/vitessce/vitessce/#dataset\";\nvar title13 = \"Vitessce data set\";\nvar type13 = \"object\";\nvar definitions13 = {\n  components: {\n    description: \"The layout array defines the views, or components, rendered in the grid.\",\n    type: \"array\",\n    items: {\n      type: \"object\",\n      additionalProperties: false,\n      required: [\"component\", \"x\", \"y\"],\n      properties: {\n        component: {\n          type: \"string\",\n          description: \"Specify a component using a name defined in the component registry.\"\n        },\n        props: {\n          type: \"object\",\n          description: \"Extra prop values for the component.\"\n        },\n        x: { type: \"integer\" },\n        y: { type: \"integer\" },\n        w: { type: \"integer\" },\n        h: { type: \"integer\" },\n        coordinationScopes: {\n          type: \"object\",\n          description: \"Component-level coordination scope mappings define which coordination object values a particular component can read and write, for each coordination type.\",\n          additionalProperties: false,\n          required: [],\n          properties: {\n            dataset: { type: \"string\" },\n            embeddingType: { type: \"string\" },\n            embeddingZoom: { type: \"string\" },\n            embeddingRotation: { type: \"string\" },\n            embeddingTargetX: { type: \"string\" },\n            embeddingTargetY: { type: \"string\" },\n            embeddingTargetZ: { type: \"string\" },\n            embeddingCellSetPolygonsVisible: { type: \"string\" },\n            embeddingCellSetLabelsVisible: { type: \"string\" },\n            embeddingCellSetLabelSize: { type: \"string\" },\n            embeddingCellRadius: { type: \"string\" },\n            spatialZoom: { type: \"string\" },\n            spatialRotation: { type: \"string\" },\n            spatialTargetX: { type: \"string\" },\n            spatialTargetY: { type: \"string\" },\n            spatialTargetZ: { type: \"string\" },\n            spatialRotationX: { type: \"string\" },\n            spatialRotationY: { type: \"string\" },\n            spatialRotationZ: { type: \"string\" },\n            spatialRotationOrbit: { type: \"string\" },\n            spatialOrbitAxis: { type: \"string\" },\n            spatialAxisFixed: { type: \"string\" },\n            heatmapZoomX: { type: \"string\" },\n            heatmapZoomY: { type: \"string\" },\n            heatmapTargetX: { type: \"string\" },\n            heatmapTargetY: { type: \"string\" },\n            cellFilter: { type: \"string\" },\n            cellHighlight: { type: \"string\" },\n            cellSetSelection: { type: \"string\" },\n            cellSetHighlight: { type: \"string\" },\n            cellSetColor: { type: \"string\" },\n            geneFilter: { type: \"string\" },\n            geneHighlight: { type: \"string\" },\n            geneSelection: { type: \"string\" },\n            geneExpressionTransform: { type: \"string\" },\n            geneExpressionColormap: { type: \"string\" },\n            geneExpressionColormapRange: { type: \"string\" },\n            cellColorEncoding: { type: \"string\" },\n            spatialRasterLayers: { type: \"string\" },\n            spatialCellsLayer: { type: \"string\" },\n            spatialMoleculesLayer: { type: \"string\" },\n            spatialNeighborhoodsLayer: { type: \"string\" },\n            genomicZoomX: { type: \"string\" },\n            genomicZoomY: { type: \"string\" },\n            genomicTargetX: { type: \"string\" },\n            genomicTargetY: { type: \"string\" },\n            additionalCellSets: { type: \"string\" },\n            moleculeHighlight: { type: \"string\" }\n          }\n        }\n      }\n    }\n  },\n  annDataCellSets: {\n    type: \"array\",\n    description: \"Array of cell set configuration, following closely the conventions of the tabular schema\",\n    items: {\n      type: \"object\",\n      additionalProperties: false,\n      required: [\"groupName\", \"setName\"],\n      properties: {\n        groupName: {\n          type: \"string\",\n          description: \"The display name for the set, like 'Cell Type' or 'Louvain.'\"\n        },\n        setName: {\n          type: \"string\",\n          description: \"The location in the AnnData store for the set, like 'obs/louvain' or 'obs/celltype.'\"\n        }\n      }\n    }\n  },\n  annDataCells: {\n    type: \"object\",\n    description: \"The properties of this object are the configuration for how to layout scatterplots and spatial information\",\n    minProperties: 1,\n    additionalProperties: false,\n    required: [],\n    properties: {\n      xy: {\n        type: \"string\",\n        description: \"The location in the AnnData store of cell centroids, like 'obsm/X_centroids.'\"\n      },\n      poly: {\n        type: \"string\",\n        description: \"The location in the AnnData store of cell polygon outlines, like 'obsm/X_polygons.'\"\n      },\n      factors: {\n        type: \"array\",\n        description: \"List of locations in the AnnData store of cell sets, like 'obs/louvain'\",\n        items: {\n          type: \"string\"\n        }\n      },\n      mappings: {\n        patternProperties: {\n          \".\": {\n            type: \"object\",\n            description: \"An object containing key-values for mappings like { UMAP: { key: 'obsm/X_umap', dims: [0, 1] } }.\",\n            additionalProperties: false,\n            required: [\"key\"],\n            properties: {\n              key: {\n                type: \"string\",\n                description: \"Where to look in the AnnData store for this mapping, like 'obsm/X_umap.'\"\n              },\n              dims: {\n                type: \"array\",\n                description: \"Which indices of the obsm object to take for a scatterplot, allowing for, for example, different PCs from obsm/X_pca\",\n                minItems: 2,\n                maxItems: 2,\n                items: { type: \"number\" }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  annDataExpressionMatrix: {\n    type: \"object\",\n    description: \"The properties of this object are the configuration for how to fetch the cell x genes matrix\",\n    additionalProperties: false,\n    required: [\"matrix\"],\n    properties: {\n      matrix: {\n        type: \"string\",\n        description: \"The location in the AnnData store of the cell x gene matrix, like 'obsm/hvg_subset.' or 'X'\"\n      },\n      geneFilter: {\n        type: \"string\",\n        description: \"The location in the AnnData store of a filter for the genes if using a subset of the data, like 'var.highly_variable.' if the matrix comes from 'obsm/hvg_subset.'\"\n      },\n      matrixGeneFilter: {\n        type: \"string\",\n        description: \"The location in the AnnData store of a filter for the matrix data (used in heatmap and histogram), like 'var.highly_variable.''\"\n      }\n    }\n  },\n  requestInit: {\n    type: \"object\",\n    description: \"The properties of this object correspond to the parameters of the JavaScript fetch() function.\",\n    additionalProperties: false,\n    required: [],\n    properties: {\n      method: {\n        type: \"string\"\n      },\n      headers: {\n        type: \"object\"\n      },\n      body: {\n        type: \"string\"\n      },\n      mode: {\n        type: \"string\"\n      },\n      credentials: {\n        type: \"string\"\n      },\n      cache: {\n        type: \"string\"\n      },\n      redirect: {\n        type: \"string\"\n      },\n      referrer: {\n        type: \"string\"\n      },\n      integrity: {\n        type: \"string\"\n      }\n    }\n  },\n  rasterLayer: {\n    description: \"The properties of this object are the rendering settings for the raster layer.\",\n    additionalProperties: false,\n    required: [\"channels\", \"colormap\", \"index\", \"opacity\"],\n    properties: {\n      channels: {\n        type: \"array\",\n        items: {\n          type: \"object\",\n          additionalProperties: false,\n          required: [\"selection\"],\n          properties: {\n            color: {\n              type: \"array\",\n              items: { type: \"number\" },\n              description: \"The color to use when rendering this channel under the null colormap.\"\n            },\n            selection: {\n              type: \"object\",\n              description: \"Determines the channel selection, e.g. some Z and time slice.\"\n            },\n            slider: {\n              type: \"array\",\n              items: { type: \"number\" },\n              description: \"Determines the range for color mapping.\"\n            },\n            visible: {\n              type: \"boolean\",\n              description: \"Determines whether this channel of the layer will be rendered in the spatial component.\"\n            }\n          }\n        }\n      },\n      colormap: {\n        oneOf: [\n          {\n            type: \"string\",\n            description: \"The name of the colormap to use for this layer.\"\n          },\n          {\n            type: \"null\",\n            description: \"Use the solid color definitions.\"\n          }\n        ]\n      },\n      transparentColor: {\n        oneOf: [\n          {\n            type: \"array\",\n            minItems: 3,\n            maxItems: 3,\n            items: {\n              type: \"number\",\n              description: \"One of R G or B (0 - 255).\"\n            },\n            description: \"Determines the color to be set to opacity 0\"\n          },\n          {\n            type: \"null\",\n            description: \"No selection.\"\n          }\n        ]\n      },\n      index: {\n        type: \"number\",\n        description: \"The index of the layer among the array of layers available in the image file.\"\n      },\n      opacity: {\n        type: \"number\"\n      },\n      modelMatrix: {\n        oneOf: [\n          {\n            type: \"array\",\n            minItems: 16,\n            maxItems: 16,\n            description: \"transformation matrix for this layer\"\n          },\n          {\n            type: \"null\",\n            description: \"Use no transformation.\"\n          }\n        ]\n      },\n      domainType: {\n        type: \"string\",\n        enum: [\"Full\", \"Min/Max\"],\n        description: \"Determines the extent of the channel slider input element in the layer controller.\"\n      },\n      resolution: {\n        type: \"number\",\n        description: \"Resolution of 3D volumetric rendering\"\n      },\n      xSlice: {\n        oneOf: [\n          {\n            type: \"array\",\n            minItems: 2,\n            maxItems: 2,\n            description: \"Slice bounds\"\n          },\n          {\n            type: \"null\",\n            description: \"No slicing\"\n          }\n        ]\n      },\n      renderingMode: {\n        type: \"string\",\n        description: \"Rendering mode of 3D volumetric rendering\"\n      },\n      ySlice: {\n        oneOf: [\n          {\n            type: \"array\",\n            minItems: 2,\n            maxItems: 2,\n            description: \"Slice bounds\"\n          },\n          {\n            type: \"null\",\n            description: \"No slicing\"\n          }\n        ]\n      },\n      zSlice: {\n        oneOf: [\n          {\n            type: \"array\",\n            minItems: 2,\n            maxItems: 2,\n            description: \"Slice bounds\"\n          },\n          {\n            type: \"null\",\n            description: \"No slicing\"\n          }\n        ]\n      },\n      type: {\n        type: \"string\",\n        enum: [\"raster\", \"bitmask\"]\n      },\n      use3d: {\n        type: \"boolean\"\n      },\n      visible: {\n        type: \"boolean\",\n        description: \"Determines whether this entire layer will be rendered in the spatial component.\"\n      }\n    }\n  },\n  moleculesLayer: {\n    type: \"object\",\n    description: \"The properties of this object are the rendering settings for the molecules layer.\",\n    additionalProperties: false,\n    required: [\"visible\", \"radius\", \"opacity\"],\n    properties: {\n      visible: {\n        type: \"boolean\"\n      },\n      radius: {\n        type: \"number\"\n      },\n      opacity: {\n        type: \"number\"\n      }\n    }\n  },\n  cellsLayer: {\n    type: \"object\",\n    description: \"The properties of this object are the rendering settings for the cells layer.\",\n    additionalProperties: false,\n    required: [\"visible\", \"stroked\", \"radius\", \"opacity\"],\n    properties: {\n      visible: {\n        type: \"boolean\"\n      },\n      stroked: {\n        type: \"boolean\"\n      },\n      radius: {\n        type: \"number\"\n      },\n      opacity: {\n        type: \"number\"\n      }\n    }\n  },\n  neighborhoodsLayer: {\n    type: \"object\",\n    description: \"The properties of this object are the rendering settings for the neighborhoods layer.\",\n    additionalProperties: false,\n    required: [\"visible\"],\n    properties: {\n      visible: {\n        type: \"boolean\"\n      }\n    }\n  },\n  spatialRasterLayers: {\n    type: \"array\",\n    description: \"Array of Spatial Layers\",\n    items: {\n      $ref: \"#/definitions/rasterLayer\"\n    }\n  }\n};\nvar additionalProperties7 = false;\nvar required7 = [\"version\", \"name\", \"datasets\", \"layout\", \"initStrategy\"];\nvar properties7 = {\n  name: { type: \"string\" },\n  public: { type: \"boolean\" },\n  description: { type: \"string\" },\n  datasets: {\n    type: \"array\",\n    description: \"The datasets array defines groups of files, where the files within each dataset reference the same entities (cells, genes, cell sets, etc).\",\n    items: {\n      type: \"object\",\n      additionalProperties: false,\n      required: [\"uid\", \"files\"],\n      properties: {\n        uid: { type: \"string\" },\n        name: { type: \"string\" },\n        description: { type: \"string\" },\n        files: {\n          type: \"array\",\n          items: {\n            type: \"object\",\n            additionalProperties: false,\n            required: [\"type\", \"fileType\"],\n            properties: {\n              name: { type: \"string\" },\n              type: { type: \"string\" },\n              fileType: { type: \"string\" },\n              url: { type: \"string\" },\n              options: { oneOf: [{ $ref: \"#/definitions/annDataCellSets\" }, { $ref: \"https://github.com/vitessce/vitessce/#raster\" }, { $ref: \"#/definitions/annDataCells\" }, { $ref: \"#/definitions/annDataExpressionMatrix\" }] },\n              requestInit: { $ref: \"#/definitions/requestInit\" }\n            }\n          }\n        }\n      }\n    }\n  },\n  coordinationSpace: {\n    type: \"object\",\n    description: \"The coordination space stores the values for each scope of each coordination object.\",\n    additionalProperties: false,\n    required: [],\n    properties: {\n      dataset: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"string\" }\n        }\n      },\n      embeddingZoom: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, value will be automatically set.\"\n              },\n              { type: \"number\" }\n            ]\n          }\n        }\n      },\n      embeddingRotation: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"number\" }\n        }\n      },\n      embeddingTargetX: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, value will be automatically set.\"\n              },\n              { type: \"number\" }\n            ]\n          }\n        }\n      },\n      embeddingTargetY: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, value will be automatically set.\"\n              },\n              { type: \"number\" }\n            ]\n          }\n        }\n      },\n      embeddingTargetZ: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"number\" }\n        }\n      },\n      embeddingType: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"string\" }\n        }\n      },\n      embeddingCellSetPolygonsVisible: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"boolean\" }\n        }\n      },\n      embeddingCellSetLabelsVisible: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"boolean\" }\n        }\n      },\n      embeddingCellSetLabelSize: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"number\" }\n        }\n      },\n      embeddingCellRadius: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"number\" }\n        }\n      },\n      spatialZoom: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, value will be automatically set.\"\n              },\n              { type: \"number\" }\n            ]\n          }\n        }\n      },\n      spatialRotation: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"number\" }\n        }\n      },\n      spatialTargetX: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, value will be automatically set.\"\n              },\n              { type: \"number\" }\n            ]\n          }\n        }\n      },\n      spatialTargetY: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, value will be automatically set.\"\n              },\n              { type: \"number\" }\n            ]\n          }\n        }\n      },\n      spatialTargetZ: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, value will be automatically set.\"\n              },\n              { type: \"number\" }\n            ]\n          }\n        }\n      },\n      spatialRotationX: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, value will be automatically set. Only useful for 3D viewing.\"\n              },\n              { type: \"number\" }\n            ]\n          }\n        }\n      },\n      spatialRotationY: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, value will be automatically set. Only useful for 3D viewing.\"\n              },\n              { type: \"number\" }\n            ]\n          }\n        }\n      },\n      spatialRotationZ: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, value will be automatically set. Only useful for 3D viewing.\"\n              },\n              { type: \"number\" }\n            ]\n          }\n        }\n      },\n      spatialRotationOrbit: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, value will be automatically set. Only useful for 3D viewing.\"\n              },\n              { type: \"number\" }\n            ]\n          }\n        }\n      },\n      spatialOrbitAxis: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, value will be automatically set. Only useful for 3D viewing.\"\n              },\n              { type: \"string\" }\n            ]\n          }\n        }\n      },\n      spatialAxisFixed: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"Whether or not to have a fixed axis for the camera. Only useful for 3D viewing.\"\n              },\n              { type: \"boolean\" }\n            ]\n          }\n        }\n      },\n      spatialRasterLayers: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided and auto layer initialization is enabled, layers will be automatically initialized.\"\n              },\n              { $ref: \"#/definitions/spatialRasterLayers\" }\n            ]\n          }\n        }\n      },\n      spatialCellsLayer: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided and auto layer initialization is enabled, layers will be automatically initialized.\"\n              },\n              { $ref: \"#/definitions/cellsLayer\" }\n            ]\n          }\n        }\n      },\n      spatialNeighborhoodsLayer: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided and auto layer initialization is enabled, layers will be automatically initialized.\"\n              },\n              { $ref: \"#/definitions/neighborhoodsLayer\" }\n            ]\n          }\n        }\n      },\n      spatialMoleculesLayer: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided and auto layer initialization is enabled, layers will be automatically initialized.\"\n              },\n              { $ref: \"#/definitions/moleculesLayer\" }\n            ]\n          }\n        }\n      },\n      heatmapZoomX: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"number\" }\n        }\n      },\n      heatmapZoomY: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"number\" }\n        }\n      },\n      heatmapTargetX: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"number\" }\n        }\n      },\n      heatmapTargetY: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"number\" }\n        }\n      },\n      cellFilter: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, no cells will be filtered out initially.\"\n              },\n              { type: \"array\", items: { type: \"string\" } }\n            ]\n          }\n        }\n      },\n      cellHighlight: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, no cell will be highlighted initially.\"\n              },\n              { type: \"string\" }\n            ]\n          }\n        }\n      },\n      cellSetSelection: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided and auto cell set initialization is enabled, cell set selections will be automatically initialized.\"\n              },\n              { type: \"array\" }\n            ]\n          }\n        }\n      },\n      cellSetHighlight: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, no cell sets will be highlighted initially.\"\n              },\n              { type: \"string\" }\n            ]\n          }\n        }\n      },\n      cellSetColor: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, cell set colors will be automatically initialized.\"\n              },\n              {\n                type: \"array\",\n                items: {\n                  type: \"object\",\n                  additionalProperties: false,\n                  required: [\"path\", \"color\"],\n                  properties: {\n                    path: {\n                      type: \"array\",\n                      items: { type: \"string\" }\n                    },\n                    color: {\n                      type: \"array\",\n                      items: { type: \"number\" }\n                    }\n                  }\n                }\n              }\n            ]\n          }\n        }\n      },\n      cellColorEncoding: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"string\" }\n        }\n      },\n      geneFilter: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, no genes will be filtered out initially.\"\n              },\n              { type: \"array\", items: { type: \"string\" } }\n            ]\n          }\n        }\n      },\n      geneHighlight: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, no genes will be highlighted initially.\"\n              },\n              { type: \"string\" }\n            ]\n          }\n        }\n      },\n      geneSelection: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\"\n              },\n              { type: \"array\", items: { type: \"string\" } }\n            ]\n          }\n        }\n      },\n      geneExpressionTransform: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\"\n              },\n              { type: \"string\", pattern: \"log1p\" }\n            ]\n          }\n        }\n      },\n      geneExpressionColormap: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"string\" }\n        }\n      },\n      geneExpressionColormapRange: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"array\", items: { type: \"number\" } }\n        }\n      },\n      genomicZoomX: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"number\" }\n        }\n      },\n      genomicZoomY: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"number\" }\n        }\n      },\n      genomicTargetX: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"number\" }\n        }\n      },\n      genomicTargetY: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"number\" }\n        }\n      },\n      additionalCellSets: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, no cell will be highlighted initially.\"\n              },\n              {\n                $ref: \"https://github.com/vitessce/vitessce/#cell-sets\"\n              }\n            ]\n          }\n        }\n      },\n      moleculeHighlight: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, no molecule will be highlighted initially.\"\n              },\n              { type: \"string\" }\n            ]\n          }\n        }\n      }\n    }\n  },\n  layout: { $ref: \"#/definitions/components\" },\n  initStrategy: {\n    type: \"string\",\n    enum: [\"none\", \"auto\"],\n    description: \"The initialization strategy determines how missing coordination objects and coordination scope mappings are initially filled in.\"\n  },\n  version: {\n    type: \"string\",\n    enum: [\"1.0.3\"],\n    description: \"The schema version for the view config.\"\n  }\n};\nvar config_1_0_3_schema_default = {\n  $schema: $schema13,\n  $id: $id13,\n  title: title13,\n  type: type13,\n  definitions: definitions13,\n  additionalProperties: additionalProperties7,\n  required: required7,\n  properties: properties7\n};\n\n// src/schemas/config-1.0.4.schema.json\nvar $schema14 = \"http://json-schema.org/draft-07/schema#\";\nvar $id14 = \"https://github.com/vitessce/vitessce/#dataset\";\nvar title14 = \"Vitessce data set\";\nvar type14 = \"object\";\nvar definitions14 = {\n  components: {\n    description: \"The layout array defines the views, or components, rendered in the grid.\",\n    type: \"array\",\n    items: {\n      type: \"object\",\n      additionalProperties: false,\n      required: [\"component\", \"x\", \"y\"],\n      properties: {\n        component: {\n          type: \"string\",\n          description: \"Specify a component using a name defined in the component registry.\"\n        },\n        props: {\n          type: \"object\",\n          description: \"Extra prop values for the component.\"\n        },\n        x: { type: \"integer\" },\n        y: { type: \"integer\" },\n        w: { type: \"integer\" },\n        h: { type: \"integer\" },\n        coordinationScopes: {\n          type: \"object\",\n          description: \"Component-level coordination scope mappings define which coordination object values a particular component can read and write, for each coordination type.\",\n          additionalProperties: false,\n          required: [],\n          properties: {\n            dataset: { type: \"string\" },\n            embeddingType: { type: \"string\" },\n            embeddingZoom: { type: \"string\" },\n            embeddingRotation: { type: \"string\" },\n            embeddingTargetX: { type: \"string\" },\n            embeddingTargetY: { type: \"string\" },\n            embeddingTargetZ: { type: \"string\" },\n            embeddingCellSetPolygonsVisible: { type: \"string\" },\n            embeddingCellSetLabelsVisible: { type: \"string\" },\n            embeddingCellSetLabelSize: { type: \"string\" },\n            embeddingCellRadius: { type: \"string\" },\n            embeddingCellOpacity: { type: \"string\" },\n            embeddingCellRadiusMode: { type: \"string\" },\n            embeddingCellOpacityMode: { type: \"string\" },\n            spatialZoom: { type: \"string\" },\n            spatialRotation: { type: \"string\" },\n            spatialTargetX: { type: \"string\" },\n            spatialTargetY: { type: \"string\" },\n            spatialTargetZ: { type: \"string\" },\n            spatialRotationX: { type: \"string\" },\n            spatialRotationY: { type: \"string\" },\n            spatialRotationZ: { type: \"string\" },\n            spatialRotationOrbit: { type: \"string\" },\n            spatialOrbitAxis: { type: \"string\" },\n            spatialAxisFixed: { type: \"string\" },\n            heatmapZoomX: { type: \"string\" },\n            heatmapZoomY: { type: \"string\" },\n            heatmapTargetX: { type: \"string\" },\n            heatmapTargetY: { type: \"string\" },\n            cellFilter: { type: \"string\" },\n            cellHighlight: { type: \"string\" },\n            cellSetSelection: { type: \"string\" },\n            cellSetHighlight: { type: \"string\" },\n            cellSetColor: { type: \"string\" },\n            geneFilter: { type: \"string\" },\n            geneHighlight: { type: \"string\" },\n            geneSelection: { type: \"string\" },\n            geneExpressionTransform: { type: \"string\" },\n            geneExpressionColormap: { type: \"string\" },\n            geneExpressionColormapRange: { type: \"string\" },\n            cellColorEncoding: { type: \"string\" },\n            spatialRasterLayers: { type: \"string\" },\n            spatialCellsLayer: { type: \"string\" },\n            spatialMoleculesLayer: { type: \"string\" },\n            spatialNeighborhoodsLayer: { type: \"string\" },\n            genomicZoomX: { type: \"string\" },\n            genomicZoomY: { type: \"string\" },\n            genomicTargetX: { type: \"string\" },\n            genomicTargetY: { type: \"string\" },\n            additionalCellSets: { type: \"string\" },\n            moleculeHighlight: { type: \"string\" }\n          }\n        }\n      }\n    }\n  },\n  annDataCellSets: {\n    type: \"array\",\n    description: \"Array of cell set configuration, following closely the conventions of the tabular schema\",\n    items: {\n      type: \"object\",\n      additionalProperties: false,\n      required: [\"groupName\", \"setName\"],\n      properties: {\n        groupName: {\n          type: \"string\",\n          description: \"The display name for the set, like 'Cell Type' or 'Louvain.'\"\n        },\n        setName: {\n          type: \"string\",\n          description: \"The location in the AnnData store for the set, like 'obs/louvain' or 'obs/celltype.'\"\n        }\n      }\n    }\n  },\n  annDataCells: {\n    type: \"object\",\n    description: \"The properties of this object are the configuration for how to layout scatterplots and spatial information\",\n    minProperties: 1,\n    additionalProperties: false,\n    required: [],\n    properties: {\n      xy: {\n        type: \"string\",\n        description: \"The location in the AnnData store of cell centroids, like 'obsm/X_centroids.'\"\n      },\n      poly: {\n        type: \"string\",\n        description: \"The location in the AnnData store of cell polygon outlines, like 'obsm/X_polygons.'\"\n      },\n      factors: {\n        type: \"array\",\n        description: \"List of locations in the AnnData store of cell sets, like 'obs/louvain'\",\n        items: {\n          type: \"string\"\n        }\n      },\n      mappings: {\n        patternProperties: {\n          \".\": {\n            type: \"object\",\n            description: \"An object containing key-values for mappings like { UMAP: { key: 'obsm/X_umap', dims: [0, 1] } }.\",\n            additionalProperties: false,\n            required: [\"key\"],\n            properties: {\n              key: {\n                type: \"string\",\n                description: \"Where to look in the AnnData store for this mapping, like 'obsm/X_umap.'\"\n              },\n              dims: {\n                type: \"array\",\n                description: \"Which indices of the obsm object to take for a scatterplot, allowing for, for example, different PCs from obsm/X_pca\",\n                minItems: 2,\n                maxItems: 2,\n                items: { type: \"number\" }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  annDataExpressionMatrix: {\n    type: \"object\",\n    description: \"The properties of this object are the configuration for how to fetch the cell x genes matrix\",\n    additionalProperties: false,\n    required: [\"matrix\"],\n    properties: {\n      matrix: {\n        type: \"string\",\n        description: \"The location in the AnnData store of the cell x gene matrix, like 'obsm/hvg_subset.' or 'X'\"\n      },\n      geneFilter: {\n        type: \"string\",\n        description: \"The location in the AnnData store of a filter for the genes if using a subset of the data, like 'var.highly_variable.' if the matrix comes from 'obsm/hvg_subset.'\"\n      },\n      matrixGeneFilter: {\n        type: \"string\",\n        description: \"The location in the AnnData store of a filter for the matrix data (used in heatmap and histogram), like 'var.highly_variable.''\"\n      }\n    }\n  },\n  requestInit: {\n    type: \"object\",\n    description: \"The properties of this object correspond to the parameters of the JavaScript fetch() function.\",\n    additionalProperties: false,\n    required: [],\n    properties: {\n      method: {\n        type: \"string\"\n      },\n      headers: {\n        type: \"object\"\n      },\n      body: {\n        type: \"string\"\n      },\n      mode: {\n        type: \"string\"\n      },\n      credentials: {\n        type: \"string\"\n      },\n      cache: {\n        type: \"string\"\n      },\n      redirect: {\n        type: \"string\"\n      },\n      referrer: {\n        type: \"string\"\n      },\n      integrity: {\n        type: \"string\"\n      }\n    }\n  },\n  rasterLayer: {\n    description: \"The properties of this object are the rendering settings for the raster layer.\",\n    additionalProperties: false,\n    required: [\"channels\", \"colormap\", \"index\", \"opacity\"],\n    properties: {\n      channels: {\n        type: \"array\",\n        items: {\n          type: \"object\",\n          additionalProperties: false,\n          required: [\"selection\"],\n          properties: {\n            color: {\n              type: \"array\",\n              items: { type: \"number\" },\n              description: \"The color to use when rendering this channel under the null colormap.\"\n            },\n            selection: {\n              type: \"object\",\n              description: \"Determines the channel selection, e.g. some Z and time slice.\"\n            },\n            slider: {\n              type: \"array\",\n              items: { type: \"number\" },\n              description: \"Determines the range for color mapping.\"\n            },\n            visible: {\n              type: \"boolean\",\n              description: \"Determines whether this channel of the layer will be rendered in the spatial component.\"\n            }\n          }\n        }\n      },\n      colormap: {\n        oneOf: [\n          {\n            type: \"string\",\n            description: \"The name of the colormap to use for this layer.\"\n          },\n          {\n            type: \"null\",\n            description: \"Use the solid color definitions.\"\n          }\n        ]\n      },\n      transparentColor: {\n        oneOf: [\n          {\n            type: \"array\",\n            minItems: 3,\n            maxItems: 3,\n            items: {\n              type: \"number\",\n              description: \"One of R G or B (0 - 255).\"\n            },\n            description: \"Determines the color to be set to opacity 0\"\n          },\n          {\n            type: \"null\",\n            description: \"No selection.\"\n          }\n        ]\n      },\n      index: {\n        type: \"number\",\n        description: \"The index of the layer among the array of layers available in the image file.\"\n      },\n      opacity: {\n        type: \"number\"\n      },\n      modelMatrix: {\n        oneOf: [\n          {\n            type: \"array\",\n            minItems: 16,\n            maxItems: 16,\n            description: \"transformation matrix for this layer\"\n          },\n          {\n            type: \"null\",\n            description: \"Use no transformation.\"\n          }\n        ]\n      },\n      domainType: {\n        type: \"string\",\n        enum: [\"Full\", \"Min/Max\"],\n        description: \"Determines the extent of the channel slider input element in the layer controller.\"\n      },\n      resolution: {\n        type: \"number\",\n        description: \"Resolution of 3D volumetric rendering\"\n      },\n      xSlice: {\n        oneOf: [\n          {\n            type: \"array\",\n            minItems: 2,\n            maxItems: 2,\n            description: \"Slice bounds\"\n          },\n          {\n            type: \"null\",\n            description: \"No slicing\"\n          }\n        ]\n      },\n      renderingMode: {\n        type: \"string\",\n        description: \"Rendering mode of 3D volumetric rendering\"\n      },\n      ySlice: {\n        oneOf: [\n          {\n            type: \"array\",\n            minItems: 2,\n            maxItems: 2,\n            description: \"Slice bounds\"\n          },\n          {\n            type: \"null\",\n            description: \"No slicing\"\n          }\n        ]\n      },\n      zSlice: {\n        oneOf: [\n          {\n            type: \"array\",\n            minItems: 2,\n            maxItems: 2,\n            description: \"Slice bounds\"\n          },\n          {\n            type: \"null\",\n            description: \"No slicing\"\n          }\n        ]\n      },\n      type: {\n        type: \"string\",\n        enum: [\"raster\", \"bitmask\"]\n      },\n      use3d: {\n        type: \"boolean\"\n      },\n      visible: {\n        type: \"boolean\",\n        description: \"Determines whether this entire layer will be rendered in the spatial component.\"\n      }\n    }\n  },\n  moleculesLayer: {\n    type: \"object\",\n    description: \"The properties of this object are the rendering settings for the molecules layer.\",\n    additionalProperties: false,\n    required: [\"visible\", \"radius\", \"opacity\"],\n    properties: {\n      visible: {\n        type: \"boolean\"\n      },\n      radius: {\n        type: \"number\"\n      },\n      opacity: {\n        type: \"number\"\n      }\n    }\n  },\n  cellsLayer: {\n    type: \"object\",\n    description: \"The properties of this object are the rendering settings for the cells layer.\",\n    additionalProperties: false,\n    required: [\"visible\", \"stroked\", \"radius\", \"opacity\"],\n    properties: {\n      visible: {\n        type: \"boolean\"\n      },\n      stroked: {\n        type: \"boolean\"\n      },\n      radius: {\n        type: \"number\"\n      },\n      opacity: {\n        type: \"number\"\n      }\n    }\n  },\n  neighborhoodsLayer: {\n    type: \"object\",\n    description: \"The properties of this object are the rendering settings for the neighborhoods layer.\",\n    additionalProperties: false,\n    required: [\"visible\"],\n    properties: {\n      visible: {\n        type: \"boolean\"\n      }\n    }\n  },\n  spatialRasterLayers: {\n    type: \"array\",\n    description: \"Array of Spatial Layers\",\n    items: {\n      $ref: \"#/definitions/rasterLayer\"\n    }\n  }\n};\nvar additionalProperties8 = false;\nvar required8 = [\"version\", \"name\", \"datasets\", \"layout\", \"initStrategy\"];\nvar properties8 = {\n  name: { type: \"string\" },\n  public: { type: \"boolean\" },\n  description: { type: \"string\" },\n  datasets: {\n    type: \"array\",\n    description: \"The datasets array defines groups of files, where the files within each dataset reference the same entities (cells, genes, cell sets, etc).\",\n    items: {\n      type: \"object\",\n      additionalProperties: false,\n      required: [\"uid\", \"files\"],\n      properties: {\n        uid: { type: \"string\" },\n        name: { type: \"string\" },\n        description: { type: \"string\" },\n        files: {\n          type: \"array\",\n          items: {\n            type: \"object\",\n            additionalProperties: false,\n            required: [\"type\", \"fileType\"],\n            properties: {\n              name: { type: \"string\" },\n              type: { type: \"string\" },\n              fileType: { type: \"string\" },\n              url: { type: \"string\" },\n              options: { oneOf: [{ $ref: \"#/definitions/annDataCellSets\" }, { $ref: \"https://github.com/vitessce/vitessce/#raster\" }, { $ref: \"#/definitions/annDataCells\" }, { $ref: \"#/definitions/annDataExpressionMatrix\" }] },\n              requestInit: { $ref: \"#/definitions/requestInit\" }\n            }\n          }\n        }\n      }\n    }\n  },\n  coordinationSpace: {\n    type: \"object\",\n    description: \"The coordination space stores the values for each scope of each coordination object.\",\n    additionalProperties: false,\n    required: [],\n    properties: {\n      dataset: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"string\" }\n        }\n      },\n      embeddingZoom: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, value will be automatically set.\"\n              },\n              { type: \"number\" }\n            ]\n          }\n        }\n      },\n      embeddingRotation: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"number\" }\n        }\n      },\n      embeddingTargetX: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, value will be automatically set.\"\n              },\n              { type: \"number\" }\n            ]\n          }\n        }\n      },\n      embeddingTargetY: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, value will be automatically set.\"\n              },\n              { type: \"number\" }\n            ]\n          }\n        }\n      },\n      embeddingTargetZ: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"number\" }\n        }\n      },\n      embeddingType: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"string\" }\n        }\n      },\n      embeddingCellSetPolygonsVisible: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"boolean\" }\n        }\n      },\n      embeddingCellSetLabelsVisible: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"boolean\" }\n        }\n      },\n      embeddingCellSetLabelSize: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"number\" }\n        }\n      },\n      embeddingCellRadius: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"number\",\n            description: \"The cell radius value, used when embeddingCellRadiusMode is absolute or relative.\"\n          }\n        }\n      },\n      embeddingCellOpacity: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"number\",\n            description: \"The cell opacity value, used when embeddingCellOpacityMode is static.\"\n          }\n        }\n      },\n      embeddingCellRadiusMode: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"string\",\n            enum: [\"manual\", \"auto\"],\n            description: \"Should data points representing cells be assigned a static (manual) or dynamic (auto, based on zoom level and data extent) radius?\"\n          }\n        }\n      },\n      embeddingCellOpacityMode: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"string\",\n            enum: [\"manual\", \"auto\"],\n            description: \"Should data points representing cells be assigned a static (manual) or dynamic (auto, based on zoom level and data extent) opacity?\"\n          }\n        }\n      },\n      spatialZoom: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, value will be automatically set.\"\n              },\n              { type: \"number\" }\n            ]\n          }\n        }\n      },\n      spatialRotation: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"number\" }\n        }\n      },\n      spatialTargetX: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, value will be automatically set.\"\n              },\n              { type: \"number\" }\n            ]\n          }\n        }\n      },\n      spatialTargetY: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, value will be automatically set.\"\n              },\n              { type: \"number\" }\n            ]\n          }\n        }\n      },\n      spatialTargetZ: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, value will be automatically set.\"\n              },\n              { type: \"number\" }\n            ]\n          }\n        }\n      },\n      spatialRotationX: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, value will be automatically set. Only useful for 3D viewing.\"\n              },\n              { type: \"number\" }\n            ]\n          }\n        }\n      },\n      spatialRotationY: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, value will be automatically set. Only useful for 3D viewing.\"\n              },\n              { type: \"number\" }\n            ]\n          }\n        }\n      },\n      spatialRotationZ: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, value will be automatically set. Only useful for 3D viewing.\"\n              },\n              { type: \"number\" }\n            ]\n          }\n        }\n      },\n      spatialRotationOrbit: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, value will be automatically set. Only useful for 3D viewing.\"\n              },\n              { type: \"number\" }\n            ]\n          }\n        }\n      },\n      spatialOrbitAxis: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, value will be automatically set. Only useful for 3D viewing.\"\n              },\n              { type: \"string\" }\n            ]\n          }\n        }\n      },\n      spatialAxisFixed: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"Whether or not to have a fixed axis for the camera. Only useful for 3D viewing.\"\n              },\n              { type: \"boolean\" }\n            ]\n          }\n        }\n      },\n      spatialRasterLayers: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided and auto layer initialization is enabled, layers will be automatically initialized.\"\n              },\n              { $ref: \"#/definitions/spatialRasterLayers\" }\n            ]\n          }\n        }\n      },\n      spatialCellsLayer: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided and auto layer initialization is enabled, layers will be automatically initialized.\"\n              },\n              { $ref: \"#/definitions/cellsLayer\" }\n            ]\n          }\n        }\n      },\n      spatialNeighborhoodsLayer: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided and auto layer initialization is enabled, layers will be automatically initialized.\"\n              },\n              { $ref: \"#/definitions/neighborhoodsLayer\" }\n            ]\n          }\n        }\n      },\n      spatialMoleculesLayer: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided and auto layer initialization is enabled, layers will be automatically initialized.\"\n              },\n              { $ref: \"#/definitions/moleculesLayer\" }\n            ]\n          }\n        }\n      },\n      heatmapZoomX: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"number\" }\n        }\n      },\n      heatmapZoomY: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"number\" }\n        }\n      },\n      heatmapTargetX: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"number\" }\n        }\n      },\n      heatmapTargetY: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"number\" }\n        }\n      },\n      cellFilter: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, no cells will be filtered out initially.\"\n              },\n              { type: \"array\", items: { type: \"string\" } }\n            ]\n          }\n        }\n      },\n      cellHighlight: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, no cell will be highlighted initially.\"\n              },\n              { type: \"string\" }\n            ]\n          }\n        }\n      },\n      cellSetSelection: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided and auto cell set initialization is enabled, cell set selections will be automatically initialized.\"\n              },\n              { type: \"array\" }\n            ]\n          }\n        }\n      },\n      cellSetHighlight: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, no cell sets will be highlighted initially.\"\n              },\n              { type: \"string\" }\n            ]\n          }\n        }\n      },\n      cellSetColor: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, cell set colors will be automatically initialized.\"\n              },\n              {\n                type: \"array\",\n                items: {\n                  type: \"object\",\n                  additionalProperties: false,\n                  required: [\"path\", \"color\"],\n                  properties: {\n                    path: {\n                      type: \"array\",\n                      items: { type: \"string\" }\n                    },\n                    color: {\n                      type: \"array\",\n                      items: { type: \"number\" }\n                    }\n                  }\n                }\n              }\n            ]\n          }\n        }\n      },\n      cellColorEncoding: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"string\",\n            enum: [\"geneSelection\", \"cellSetSelection\"],\n            description: \"How should data points representing cells be colored?\"\n          }\n        }\n      },\n      geneFilter: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, no genes will be filtered out initially.\"\n              },\n              { type: \"array\", items: { type: \"string\" } }\n            ]\n          }\n        }\n      },\n      geneHighlight: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, no genes will be highlighted initially.\"\n              },\n              { type: \"string\" }\n            ]\n          }\n        }\n      },\n      geneSelection: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\"\n              },\n              { type: \"array\", items: { type: \"string\" } }\n            ]\n          }\n        }\n      },\n      geneExpressionTransform: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\"\n              },\n              { type: \"string\", pattern: \"log1p\" }\n            ]\n          }\n        }\n      },\n      geneExpressionColormap: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"string\" }\n        }\n      },\n      geneExpressionColormapRange: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"array\", items: { type: \"number\" } }\n        }\n      },\n      genomicZoomX: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"number\" }\n        }\n      },\n      genomicZoomY: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"number\" }\n        }\n      },\n      genomicTargetX: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"number\" }\n        }\n      },\n      genomicTargetY: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"number\" }\n        }\n      },\n      additionalCellSets: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, no cell will be highlighted initially.\"\n              },\n              {\n                $ref: \"https://github.com/vitessce/vitessce/#cell-sets\"\n              }\n            ]\n          }\n        }\n      },\n      moleculeHighlight: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, no molecule will be highlighted initially.\"\n              },\n              { type: \"string\" }\n            ]\n          }\n        }\n      }\n    }\n  },\n  layout: { $ref: \"#/definitions/components\" },\n  initStrategy: {\n    type: \"string\",\n    enum: [\"none\", \"auto\"],\n    description: \"The initialization strategy determines how missing coordination objects and coordination scope mappings are initially filled in.\"\n  },\n  version: {\n    type: \"string\",\n    enum: [\"1.0.4\"],\n    description: \"The schema version for the view config.\"\n  }\n};\nvar config_1_0_4_schema_default = {\n  $schema: $schema14,\n  $id: $id14,\n  title: title14,\n  type: type14,\n  definitions: definitions14,\n  additionalProperties: additionalProperties8,\n  required: required8,\n  properties: properties8\n};\n\n// src/schemas/config-1.0.5.schema.json\nvar $schema15 = \"http://json-schema.org/draft-07/schema#\";\nvar $id15 = \"https://github.com/vitessce/vitessce/#dataset\";\nvar title15 = \"Vitessce data set\";\nvar type15 = \"object\";\nvar definitions15 = {\n  components: {\n    description: \"The layout array defines the views, or components, rendered in the grid.\",\n    type: \"array\",\n    items: {\n      type: \"object\",\n      additionalProperties: false,\n      required: [\"component\", \"x\", \"y\"],\n      properties: {\n        component: {\n          type: \"string\",\n          description: \"Specify a component using a name defined in the component registry.\"\n        },\n        props: {\n          type: \"object\",\n          description: \"Extra prop values for the component.\"\n        },\n        x: { type: \"integer\" },\n        y: { type: \"integer\" },\n        w: { type: \"integer\" },\n        h: { type: \"integer\" },\n        coordinationScopes: {\n          type: \"object\",\n          description: \"Component-level coordination scope mappings define which coordination object values a particular component can read and write, for each coordination type.\",\n          additionalProperties: false,\n          required: [],\n          properties: {\n            dataset: { type: \"string\" },\n            embeddingType: { type: \"string\" },\n            embeddingZoom: { type: \"string\" },\n            embeddingRotation: { type: \"string\" },\n            embeddingTargetX: { type: \"string\" },\n            embeddingTargetY: { type: \"string\" },\n            embeddingTargetZ: { type: \"string\" },\n            embeddingCellSetPolygonsVisible: { type: \"string\" },\n            embeddingCellSetLabelsVisible: { type: \"string\" },\n            embeddingCellSetLabelSize: { type: \"string\" },\n            embeddingCellRadius: { type: \"string\" },\n            embeddingCellOpacity: { type: \"string\" },\n            embeddingCellRadiusMode: { type: \"string\" },\n            embeddingCellOpacityMode: { type: \"string\" },\n            spatialZoom: { type: \"string\" },\n            spatialRotation: { type: \"string\" },\n            spatialTargetX: { type: \"string\" },\n            spatialTargetY: { type: \"string\" },\n            spatialTargetZ: { type: \"string\" },\n            spatialRotationX: { type: \"string\" },\n            spatialRotationY: { type: \"string\" },\n            spatialRotationZ: { type: \"string\" },\n            spatialRotationOrbit: { type: \"string\" },\n            spatialOrbitAxis: { type: \"string\" },\n            spatialAxisFixed: { type: \"string\" },\n            heatmapZoomX: { type: \"string\" },\n            heatmapZoomY: { type: \"string\" },\n            heatmapTargetX: { type: \"string\" },\n            heatmapTargetY: { type: \"string\" },\n            cellFilter: { type: \"string\" },\n            cellHighlight: { type: \"string\" },\n            cellSetSelection: { type: \"string\" },\n            cellSetHighlight: { type: \"string\" },\n            cellSetColor: { type: \"string\" },\n            geneFilter: { type: \"string\" },\n            geneHighlight: { type: \"string\" },\n            geneSelection: { type: \"string\" },\n            geneExpressionTransform: { type: \"string\" },\n            geneExpressionColormap: { type: \"string\" },\n            geneExpressionColormapRange: { type: \"string\" },\n            cellColorEncoding: { type: \"string\" },\n            spatialRasterLayers: { type: \"string\" },\n            spatialCellsLayer: { type: \"string\" },\n            spatialMoleculesLayer: { type: \"string\" },\n            spatialNeighborhoodsLayer: { type: \"string\" },\n            genomicZoomX: { type: \"string\" },\n            genomicZoomY: { type: \"string\" },\n            genomicTargetX: { type: \"string\" },\n            genomicTargetY: { type: \"string\" },\n            additionalCellSets: { type: \"string\" },\n            moleculeHighlight: { type: \"string\" }\n          }\n        }\n      }\n    }\n  },\n  annDataCellSets: {\n    type: \"array\",\n    description: \"Array of cell set configuration, following closely the conventions of the tabular schema\",\n    items: {\n      type: \"object\",\n      additionalProperties: false,\n      required: [\"groupName\", \"setName\"],\n      properties: {\n        groupName: {\n          type: \"string\",\n          description: \"The display name for the set, like 'Cell Type' or 'Louvain.'\"\n        },\n        setName: {\n          oneOf: [\n            {\n              type: \"string\",\n              description: \"The location in the AnnData store for the set, like 'obs/louvain' or 'obs/celltype.'\"\n            },\n            {\n              type: \"array\",\n              items: { type: \"string\" },\n              description: \"An array of locations in the AnnData store for a hierarchy of set names, from coarse to fine levels.\"\n            }\n          ]\n        }\n      }\n    }\n  },\n  annDataCells: {\n    type: \"object\",\n    description: \"The properties of this object are the configuration for how to layout scatterplots and spatial information\",\n    minProperties: 1,\n    additionalProperties: false,\n    required: [],\n    properties: {\n      xy: {\n        type: \"string\",\n        description: \"The location in the AnnData store of cell centroids, like 'obsm/X_centroids.'\"\n      },\n      poly: {\n        type: \"string\",\n        description: \"The location in the AnnData store of cell polygon outlines, like 'obsm/X_polygons.'\"\n      },\n      factors: {\n        type: \"array\",\n        description: \"List of locations in the AnnData store of cell sets, like 'obs/louvain'\",\n        items: {\n          type: \"string\"\n        }\n      },\n      mappings: {\n        patternProperties: {\n          \".\": {\n            type: \"object\",\n            description: \"An object containing key-values for mappings like { UMAP: { key: 'obsm/X_umap', dims: [0, 1] } }.\",\n            additionalProperties: false,\n            required: [\"key\"],\n            properties: {\n              key: {\n                type: \"string\",\n                description: \"Where to look in the AnnData store for this mapping, like 'obsm/X_umap.'\"\n              },\n              dims: {\n                type: \"array\",\n                description: \"Which indices of the obsm object to take for a scatterplot, allowing for, for example, different PCs from obsm/X_pca\",\n                minItems: 2,\n                maxItems: 2,\n                items: { type: \"number\" }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  annDataExpressionMatrix: {\n    type: \"object\",\n    description: \"The properties of this object are the configuration for how to fetch the cell x genes matrix\",\n    additionalProperties: false,\n    required: [\"matrix\"],\n    properties: {\n      matrix: {\n        type: \"string\",\n        description: \"The location in the AnnData store of the cell x gene matrix, like 'obsm/hvg_subset.' or 'X'\"\n      },\n      geneFilter: {\n        type: \"string\",\n        description: \"The location in the AnnData store of a filter for the genes if using a subset of the data, like 'var.highly_variable.' if the matrix comes from 'obsm/hvg_subset.'\"\n      },\n      matrixGeneFilter: {\n        type: \"string\",\n        description: \"The location in the AnnData store of a filter for the matrix data (used in heatmap and histogram), like 'var.highly_variable.''\"\n      }\n    }\n  },\n  requestInit: {\n    type: \"object\",\n    description: \"The properties of this object correspond to the parameters of the JavaScript fetch() function.\",\n    additionalProperties: false,\n    required: [],\n    properties: {\n      method: {\n        type: \"string\"\n      },\n      headers: {\n        type: \"object\"\n      },\n      body: {\n        type: \"string\"\n      },\n      mode: {\n        type: \"string\"\n      },\n      credentials: {\n        type: \"string\"\n      },\n      cache: {\n        type: \"string\"\n      },\n      redirect: {\n        type: \"string\"\n      },\n      referrer: {\n        type: \"string\"\n      },\n      integrity: {\n        type: \"string\"\n      }\n    }\n  },\n  rasterLayer: {\n    description: \"The properties of this object are the rendering settings for the raster layer.\",\n    additionalProperties: false,\n    required: [\"channels\", \"colormap\", \"index\", \"opacity\"],\n    properties: {\n      channels: {\n        type: \"array\",\n        items: {\n          type: \"object\",\n          additionalProperties: false,\n          required: [\"selection\"],\n          properties: {\n            color: {\n              type: \"array\",\n              items: { type: \"number\" },\n              description: \"The color to use when rendering this channel under the null colormap.\"\n            },\n            selection: {\n              type: \"object\",\n              description: \"Determines the channel selection, e.g. some Z and time slice.\"\n            },\n            slider: {\n              type: \"array\",\n              items: { type: \"number\" },\n              description: \"Determines the range for color mapping.\"\n            },\n            visible: {\n              type: \"boolean\",\n              description: \"Determines whether this channel of the layer will be rendered in the spatial component.\"\n            }\n          }\n        }\n      },\n      colormap: {\n        oneOf: [\n          {\n            type: \"string\",\n            description: \"The name of the colormap to use for this layer.\"\n          },\n          {\n            type: \"null\",\n            description: \"Use the solid color definitions.\"\n          }\n        ]\n      },\n      transparentColor: {\n        oneOf: [\n          {\n            type: \"array\",\n            minItems: 3,\n            maxItems: 3,\n            items: {\n              type: \"number\",\n              description: \"One of R G or B (0 - 255).\"\n            },\n            description: \"Determines the color to be set to opacity 0\"\n          },\n          {\n            type: \"null\",\n            description: \"No selection.\"\n          }\n        ]\n      },\n      index: {\n        type: \"number\",\n        description: \"The index of the layer among the array of layers available in the image file.\"\n      },\n      opacity: {\n        type: \"number\"\n      },\n      modelMatrix: {\n        oneOf: [\n          {\n            type: \"array\",\n            minItems: 16,\n            maxItems: 16,\n            description: \"transformation matrix for this layer\"\n          },\n          {\n            type: \"null\",\n            description: \"Use no transformation.\"\n          }\n        ]\n      },\n      domainType: {\n        type: \"string\",\n        enum: [\"Full\", \"Min/Max\"],\n        description: \"Determines the extent of the channel slider input element in the layer controller.\"\n      },\n      resolution: {\n        type: \"number\",\n        description: \"Resolution of 3D volumetric rendering\"\n      },\n      xSlice: {\n        oneOf: [\n          {\n            type: \"array\",\n            minItems: 2,\n            maxItems: 2,\n            description: \"Slice bounds\"\n          },\n          {\n            type: \"null\",\n            description: \"No slicing\"\n          }\n        ]\n      },\n      renderingMode: {\n        type: \"string\",\n        description: \"Rendering mode of 3D volumetric rendering\"\n      },\n      ySlice: {\n        oneOf: [\n          {\n            type: \"array\",\n            minItems: 2,\n            maxItems: 2,\n            description: \"Slice bounds\"\n          },\n          {\n            type: \"null\",\n            description: \"No slicing\"\n          }\n        ]\n      },\n      zSlice: {\n        oneOf: [\n          {\n            type: \"array\",\n            minItems: 2,\n            maxItems: 2,\n            description: \"Slice bounds\"\n          },\n          {\n            type: \"null\",\n            description: \"No slicing\"\n          }\n        ]\n      },\n      type: {\n        type: \"string\",\n        enum: [\"raster\", \"bitmask\"]\n      },\n      use3d: {\n        type: \"boolean\"\n      },\n      visible: {\n        type: \"boolean\",\n        description: \"Determines whether this entire layer will be rendered in the spatial component.\"\n      }\n    }\n  },\n  moleculesLayer: {\n    type: \"object\",\n    description: \"The properties of this object are the rendering settings for the molecules layer.\",\n    additionalProperties: false,\n    required: [\"visible\", \"radius\", \"opacity\"],\n    properties: {\n      visible: {\n        type: \"boolean\"\n      },\n      radius: {\n        type: \"number\"\n      },\n      opacity: {\n        type: \"number\"\n      }\n    }\n  },\n  cellsLayer: {\n    type: \"object\",\n    description: \"The properties of this object are the rendering settings for the cells layer.\",\n    additionalProperties: false,\n    required: [\"visible\", \"stroked\", \"radius\", \"opacity\"],\n    properties: {\n      visible: {\n        type: \"boolean\"\n      },\n      stroked: {\n        type: \"boolean\"\n      },\n      radius: {\n        type: \"number\"\n      },\n      opacity: {\n        type: \"number\"\n      }\n    }\n  },\n  neighborhoodsLayer: {\n    type: \"object\",\n    description: \"The properties of this object are the rendering settings for the neighborhoods layer.\",\n    additionalProperties: false,\n    required: [\"visible\"],\n    properties: {\n      visible: {\n        type: \"boolean\"\n      }\n    }\n  },\n  spatialRasterLayers: {\n    type: \"array\",\n    description: \"Array of Spatial Layers\",\n    items: {\n      $ref: \"#/definitions/rasterLayer\"\n    }\n  }\n};\nvar additionalProperties9 = false;\nvar required9 = [\"version\", \"name\", \"datasets\", \"layout\", \"initStrategy\"];\nvar properties9 = {\n  name: { type: \"string\" },\n  public: { type: \"boolean\" },\n  description: { type: \"string\" },\n  datasets: {\n    type: \"array\",\n    description: \"The datasets array defines groups of files, where the files within each dataset reference the same entities (cells, genes, cell sets, etc).\",\n    items: {\n      type: \"object\",\n      additionalProperties: false,\n      required: [\"uid\", \"files\"],\n      properties: {\n        uid: { type: \"string\" },\n        name: { type: \"string\" },\n        description: { type: \"string\" },\n        files: {\n          type: \"array\",\n          items: {\n            type: \"object\",\n            additionalProperties: false,\n            required: [\"type\", \"fileType\"],\n            properties: {\n              name: { type: \"string\" },\n              type: { type: \"string\" },\n              fileType: { type: \"string\" },\n              url: { type: \"string\" },\n              options: { oneOf: [{ $ref: \"#/definitions/annDataCellSets\" }, { $ref: \"https://github.com/vitessce/vitessce/#raster\" }, { $ref: \"#/definitions/annDataCells\" }, { $ref: \"#/definitions/annDataExpressionMatrix\" }] },\n              requestInit: { $ref: \"#/definitions/requestInit\" }\n            }\n          }\n        }\n      }\n    }\n  },\n  coordinationSpace: {\n    type: \"object\",\n    description: \"The coordination space stores the values for each scope of each coordination object.\",\n    additionalProperties: false,\n    required: [],\n    properties: {\n      dataset: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"string\" }\n        }\n      },\n      embeddingZoom: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, value will be automatically set.\"\n              },\n              { type: \"number\" }\n            ]\n          }\n        }\n      },\n      embeddingRotation: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"number\" }\n        }\n      },\n      embeddingTargetX: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, value will be automatically set.\"\n              },\n              { type: \"number\" }\n            ]\n          }\n        }\n      },\n      embeddingTargetY: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, value will be automatically set.\"\n              },\n              { type: \"number\" }\n            ]\n          }\n        }\n      },\n      embeddingTargetZ: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"number\" }\n        }\n      },\n      embeddingType: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"string\" }\n        }\n      },\n      embeddingCellSetPolygonsVisible: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"boolean\" }\n        }\n      },\n      embeddingCellSetLabelsVisible: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"boolean\" }\n        }\n      },\n      embeddingCellSetLabelSize: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"number\" }\n        }\n      },\n      embeddingCellRadius: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"number\",\n            description: \"The cell radius value, used when embeddingCellRadiusMode is absolute or relative.\"\n          }\n        }\n      },\n      embeddingCellOpacity: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"number\",\n            description: \"The cell opacity value, used when embeddingCellOpacityMode is static.\"\n          }\n        }\n      },\n      embeddingCellRadiusMode: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"string\",\n            enum: [\"manual\", \"auto\"],\n            description: \"Should data points representing cells be assigned a static (manual) or dynamic (auto, based on zoom level and data extent) radius?\"\n          }\n        }\n      },\n      embeddingCellOpacityMode: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"string\",\n            enum: [\"manual\", \"auto\"],\n            description: \"Should data points representing cells be assigned a static (manual) or dynamic (auto, based on zoom level and data extent) opacity?\"\n          }\n        }\n      },\n      spatialZoom: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, value will be automatically set.\"\n              },\n              { type: \"number\" }\n            ]\n          }\n        }\n      },\n      spatialRotation: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"number\" }\n        }\n      },\n      spatialTargetX: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, value will be automatically set.\"\n              },\n              { type: \"number\" }\n            ]\n          }\n        }\n      },\n      spatialTargetY: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, value will be automatically set.\"\n              },\n              { type: \"number\" }\n            ]\n          }\n        }\n      },\n      spatialTargetZ: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, value will be automatically set.\"\n              },\n              { type: \"number\" }\n            ]\n          }\n        }\n      },\n      spatialRotationX: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, value will be automatically set. Only useful for 3D viewing.\"\n              },\n              { type: \"number\" }\n            ]\n          }\n        }\n      },\n      spatialRotationY: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, value will be automatically set. Only useful for 3D viewing.\"\n              },\n              { type: \"number\" }\n            ]\n          }\n        }\n      },\n      spatialRotationZ: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, value will be automatically set. Only useful for 3D viewing.\"\n              },\n              { type: \"number\" }\n            ]\n          }\n        }\n      },\n      spatialRotationOrbit: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, value will be automatically set. Only useful for 3D viewing.\"\n              },\n              { type: \"number\" }\n            ]\n          }\n        }\n      },\n      spatialOrbitAxis: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, value will be automatically set. Only useful for 3D viewing.\"\n              },\n              { type: \"string\" }\n            ]\n          }\n        }\n      },\n      spatialAxisFixed: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"Whether or not to have a fixed axis for the camera. Only useful for 3D viewing.\"\n              },\n              { type: \"boolean\" }\n            ]\n          }\n        }\n      },\n      spatialRasterLayers: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided and auto layer initialization is enabled, layers will be automatically initialized.\"\n              },\n              { $ref: \"#/definitions/spatialRasterLayers\" }\n            ]\n          }\n        }\n      },\n      spatialCellsLayer: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided and auto layer initialization is enabled, layers will be automatically initialized.\"\n              },\n              { $ref: \"#/definitions/cellsLayer\" }\n            ]\n          }\n        }\n      },\n      spatialNeighborhoodsLayer: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided and auto layer initialization is enabled, layers will be automatically initialized.\"\n              },\n              { $ref: \"#/definitions/neighborhoodsLayer\" }\n            ]\n          }\n        }\n      },\n      spatialMoleculesLayer: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided and auto layer initialization is enabled, layers will be automatically initialized.\"\n              },\n              { $ref: \"#/definitions/moleculesLayer\" }\n            ]\n          }\n        }\n      },\n      heatmapZoomX: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"number\" }\n        }\n      },\n      heatmapZoomY: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"number\" }\n        }\n      },\n      heatmapTargetX: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"number\" }\n        }\n      },\n      heatmapTargetY: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"number\" }\n        }\n      },\n      cellFilter: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, no cells will be filtered out initially.\"\n              },\n              { type: \"array\", items: { type: \"string\" } }\n            ]\n          }\n        }\n      },\n      cellHighlight: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, no cell will be highlighted initially.\"\n              },\n              { type: \"string\" }\n            ]\n          }\n        }\n      },\n      cellSetSelection: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided and auto cell set initialization is enabled, cell set selections will be automatically initialized.\"\n              },\n              { type: \"array\" }\n            ]\n          }\n        }\n      },\n      cellSetHighlight: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, no cell sets will be highlighted initially.\"\n              },\n              { type: \"string\" }\n            ]\n          }\n        }\n      },\n      cellSetColor: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, cell set colors will be automatically initialized.\"\n              },\n              {\n                type: \"array\",\n                items: {\n                  type: \"object\",\n                  additionalProperties: false,\n                  required: [\"path\", \"color\"],\n                  properties: {\n                    path: {\n                      type: \"array\",\n                      items: { type: \"string\" }\n                    },\n                    color: {\n                      type: \"array\",\n                      items: { type: \"number\" }\n                    }\n                  }\n                }\n              }\n            ]\n          }\n        }\n      },\n      cellColorEncoding: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            type: \"string\",\n            enum: [\"geneSelection\", \"cellSetSelection\"],\n            description: \"How should data points representing cells be colored?\"\n          }\n        }\n      },\n      geneFilter: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, no genes will be filtered out initially.\"\n              },\n              { type: \"array\", items: { type: \"string\" } }\n            ]\n          }\n        }\n      },\n      geneHighlight: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, no genes will be highlighted initially.\"\n              },\n              { type: \"string\" }\n            ]\n          }\n        }\n      },\n      geneSelection: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\"\n              },\n              { type: \"array\", items: { type: \"string\" } }\n            ]\n          }\n        }\n      },\n      geneExpressionTransform: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\"\n              },\n              { type: \"string\", pattern: \"log1p\" }\n            ]\n          }\n        }\n      },\n      geneExpressionColormap: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"string\" }\n        }\n      },\n      geneExpressionColormapRange: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"array\", items: { type: \"number\" } }\n        }\n      },\n      genomicZoomX: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"number\" }\n        }\n      },\n      genomicZoomY: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"number\" }\n        }\n      },\n      genomicTargetX: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"number\" }\n        }\n      },\n      genomicTargetY: {\n        type: \"object\",\n        patternProperties: {\n          \".\": { type: \"number\" }\n        }\n      },\n      additionalCellSets: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, no cell will be highlighted initially.\"\n              },\n              {\n                $ref: \"https://github.com/vitessce/vitessce/#cell-sets\"\n              }\n            ]\n          }\n        }\n      },\n      moleculeHighlight: {\n        type: \"object\",\n        patternProperties: {\n          \".\": {\n            oneOf: [\n              {\n                type: \"null\",\n                description: \"If null is provided, no molecule will be highlighted initially.\"\n              },\n              { type: \"string\" }\n            ]\n          }\n        }\n      }\n    }\n  },\n  layout: { $ref: \"#/definitions/components\" },\n  initStrategy: {\n    type: \"string\",\n    enum: [\"none\", \"auto\"],\n    description: \"The initialization strategy determines how missing coordination objects and coordination scope mappings are initially filled in.\"\n  },\n  version: {\n    type: \"string\",\n    enum: [\"1.0.5\"],\n    description: \"The schema version for the view config.\"\n  }\n};\nvar config_1_0_5_schema_default = {\n  $schema: $schema15,\n  $id: $id15,\n  title: title15,\n  type: type15,\n  definitions: definitions15,\n  additionalProperties: additionalProperties9,\n  required: required9,\n  properties: properties9\n};\n\n// src/app/view-config-upgraders.js\nimport uuidv44 from \"uuid/v4\";\nimport cloneDeep from \"lodash/cloneDeep\";\nfunction upgradeReplaceViewProp(prefix, view, coordinationSpace) {\n  const prevZScopes = Object.keys(coordinationSpace[`${prefix}Zoom`]);\n  const prevTXScopes = Object.keys(coordinationSpace[`${prefix}TargetX`]);\n  const prevTYScopes = Object.keys(coordinationSpace[`${prefix}TargetY`]);\n  const nextZScope = getNextScope(prevZScopes);\n  const nextTXScope = getNextScope(prevTXScopes);\n  const nextTYScope = getNextScope(prevTYScopes);\n  const { zoom, target: [targetX, targetY] } = view;\n  coordinationSpace[`${prefix}Zoom`][nextZScope] = zoom;\n  coordinationSpace[`${prefix}TargetX`][nextTXScope] = targetX;\n  coordinationSpace[`${prefix}TargetY`][nextTYScope] = targetY;\n  return {\n    [`${prefix}Zoom`]: nextZScope,\n    [`${prefix}TargetX`]: nextTXScope,\n    [`${prefix}TargetY`]: nextTYScope\n  };\n}\nfunction upgradeFrom0_1_0(config, datasetUid = null) {\n  const coordinationSpace = {\n    embeddingType: {},\n    embeddingZoom: {},\n    embeddingTargetX: {},\n    embeddingTargetY: {},\n    spatialZoom: {},\n    spatialTargetX: {},\n    spatialTargetY: {}\n  };\n  const layout = [];\n  config.staticLayout.forEach((componentDef) => {\n    var _a2;\n    let newComponentDef = __spreadProps(__spreadValues({}, componentDef), {\n      coordinationScopes: {}\n    });\n    if (componentDef.component === \"scatterplot\") {\n      if (componentDef.props.mapping) {\n        coordinationSpace.embeddingType[componentDef.props.mapping] = componentDef.props.mapping;\n        newComponentDef = __spreadProps(__spreadValues({}, newComponentDef), {\n          coordinationScopes: __spreadProps(__spreadValues({}, newComponentDef.coordinationScopes), {\n            embeddingType: componentDef.props.mapping\n          })\n        });\n      }\n      if (componentDef.props.view) {\n        const newScopeValues = upgradeReplaceViewProp(\"embedding\", componentDef.props.view, coordinationSpace);\n        newComponentDef = __spreadProps(__spreadValues({}, newComponentDef), {\n          coordinationScopes: __spreadValues(__spreadValues({}, newComponentDef.coordinationScopes), newScopeValues)\n        });\n      }\n    }\n    if (componentDef.component === \"spatial\") {\n      if ((_a2 = componentDef == null ? void 0 : componentDef.props) == null ? void 0 : _a2.view) {\n        const newScopeValues = upgradeReplaceViewProp(\"spatial\", componentDef.props.view, coordinationSpace);\n        newComponentDef = __spreadProps(__spreadValues({}, newComponentDef), {\n          coordinationScopes: __spreadValues(__spreadValues({}, newComponentDef.coordinationScopes), newScopeValues)\n        });\n      }\n    }\n    layout.push(newComponentDef);\n  });\n  const newDatasetUid = datasetUid || uuidv44();\n  return {\n    version: \"1.0.1\",\n    name: config.name,\n    description: config.description,\n    public: config.public,\n    datasets: [\n      {\n        uid: newDatasetUid,\n        name: newDatasetUid,\n        files: config.layers.map((layer) => ({\n          type: layer.type.toLowerCase(),\n          fileType: layer.fileType,\n          url: layer.url\n        }))\n      }\n    ],\n    initStrategy: \"auto\",\n    coordinationSpace,\n    layout\n  };\n}\nfunction upgradeFrom1_0_0(config) {\n  const coordinationSpace = __spreadValues({}, config.coordinationSpace);\n  function replaceLayerType(layerType) {\n    const isRaster = layerType === \"raster\";\n    coordinationSpace[`spatial${capitalize(layerType)}Layer${isRaster ? \"s\" : \"\"}`] = {};\n    Object.entries(coordinationSpace.spatialLayers).forEach(([scope, layers]) => {\n      if (Array.isArray(layers) && layers.find((layer) => layer.type === layerType)) {\n        const typedLayers = layers.filter((layer) => layer.type === layerType).map((layer) => {\n          const newLayer = __spreadValues({}, layer);\n          delete newLayer.type;\n          return newLayer;\n        });\n        coordinationSpace[`spatial${capitalize(layerType)}Layer${isRaster ? \"s\" : \"\"}`][scope] = isRaster ? typedLayers : typedLayers[0];\n      } else {\n        coordinationSpace[`spatial${capitalize(layerType)}Layer${isRaster ? \"s\" : \"\"}`][scope] = null;\n      }\n    });\n  }\n  if (coordinationSpace.spatialLayers) {\n    replaceLayerType(\"raster\");\n    replaceLayerType(\"cells\");\n    replaceLayerType(\"molecules\");\n    replaceLayerType(\"neighborhoods\");\n    delete coordinationSpace.spatialLayers;\n  }\n  const layout = config.layout.map((component) => {\n    const newComponent = __spreadValues({}, component);\n    function replaceCoordinationScope(layerType) {\n      const isRaster = layerType === \"raster\";\n      if (COMPONENT_COORDINATION_TYPES[newComponent.component].includes(`spatial${capitalize(layerType)}Layer${isRaster ? \"s\" : \"\"}`)) {\n        newComponent.coordinationScopes[`spatial${capitalize(layerType)}Layer${isRaster ? \"s\" : \"\"}`] = newComponent.coordinationScopes.spatialLayers;\n      }\n    }\n    if (newComponent.coordinationScopes && newComponent.coordinationScopes.spatialLayers) {\n      replaceCoordinationScope(\"raster\");\n      replaceCoordinationScope(\"cells\");\n      replaceCoordinationScope(\"molecules\");\n      replaceCoordinationScope(\"neighborhoods\");\n      delete newComponent.coordinationScopes.spatialLayers;\n    }\n    return newComponent;\n  });\n  return __spreadProps(__spreadValues({}, config), {\n    coordinationSpace,\n    layout,\n    version: \"1.0.1\"\n  });\n}\nfunction upgradeFrom1_0_1(config) {\n  var _a2;\n  const layout = config.layout.map((component) => {\n    const newComponent = __spreadValues({}, component);\n    if (newComponent.component === \"layerController\") {\n      newComponent.props = __spreadProps(__spreadValues({}, newComponent.props), {\n        globalDisable3d: true\n      });\n    }\n    return newComponent;\n  });\n  const newConfig = cloneDeep(config);\n  Object.keys(((_a2 = newConfig == null ? void 0 : newConfig.coordinationSpace) == null ? void 0 : _a2.spatialRasterLayers) || {}).forEach((key) => {\n    if (newConfig.coordinationSpace.spatialRasterLayers[key]) {\n      newConfig.coordinationSpace.spatialRasterLayers[key].forEach((layer, index) => {\n        newConfig.coordinationSpace.spatialRasterLayers[key][index].type = [\"bitmask\", \"raster\"].includes(layer.type) ? layer.type : \"raster\";\n      });\n    }\n  });\n  return __spreadProps(__spreadValues({}, newConfig), {\n    layout,\n    version: \"1.0.2\"\n  });\n}\nfunction upgradeFrom1_0_2(config) {\n  const layout = config.layout.map((component) => {\n    const newComponent = __spreadValues({}, component);\n    if (newComponent.component === \"layerController\") {\n      newComponent.props = __spreadProps(__spreadValues({}, newComponent.props), {\n        disableChannelsIfRgbDetected: true\n      });\n    }\n    return newComponent;\n  });\n  const newConfig = cloneDeep(config);\n  return __spreadProps(__spreadValues({}, newConfig), {\n    layout,\n    version: \"1.0.3\"\n  });\n}\nfunction upgradeFrom1_0_3(config) {\n  const newConfig = cloneDeep(config);\n  return __spreadProps(__spreadValues({}, newConfig), {\n    version: \"1.0.4\"\n  });\n}\nfunction upgradeFrom1_0_4(config) {\n  const newConfig = cloneDeep(config);\n  return __spreadProps(__spreadValues({}, newConfig), {\n    version: \"1.0.5\"\n  });\n}\n\n// src/app/view-config-versions.js\nvar LATEST_VERSION = \"1.0.5\";\nvar SCHEMA_HANDLERS = {\n  \"0.1.0\": [new Ajv3().compile(config_0_1_0_schema_default), upgradeFrom0_1_0],\n  \"1.0.0\": [new Ajv3().addSchema(cell_sets_schema_default).addSchema(raster_schema_default).compile(config_1_0_0_schema_default), upgradeFrom1_0_0],\n  \"1.0.1\": [new Ajv3().addSchema(cell_sets_schema_default).addSchema(raster_schema_default).compile(config_1_0_1_schema_default), upgradeFrom1_0_1],\n  \"1.0.2\": [new Ajv3().addSchema(cell_sets_schema_default).addSchema(raster_schema_default).compile(config_1_0_2_schema_default), upgradeFrom1_0_2],\n  \"1.0.3\": [new Ajv3().addSchema(cell_sets_schema_default).addSchema(raster_schema_default).compile(config_1_0_3_schema_default), upgradeFrom1_0_3],\n  \"1.0.4\": [new Ajv3().addSchema(cell_sets_schema_default).addSchema(raster_schema_default).compile(config_1_0_4_schema_default), upgradeFrom1_0_4],\n  \"1.0.5\": [new Ajv3().addSchema(cell_sets_schema_default).addSchema(raster_schema_default).compile(config_1_0_5_schema_default), null]\n};\n\n// src/app/CallbackPublisher.js\nfunction validateViewConfig(viewConfig) {\n  try {\n    const validate = SCHEMA_HANDLERS[LATEST_VERSION][0];\n    const valid = validate(viewConfig);\n    if (!valid) {\n      const failureReason = JSON.stringify(validate.errors, null, 2);\n      throw new Error(`Config validation failed: ${failureReason}`);\n    }\n  } catch (e) {\n    console.error(e);\n  }\n}\nfunction CallbackPublisher(props) {\n  const {\n    onWarn,\n    onConfigChange,\n    onLoaderChange,\n    validateOnConfigChange\n  } = props;\n  const warning = useWarning();\n  const loaders = useLoaders();\n  const viewConfigStoreApi = useViewConfigStoreApi();\n  useEffect10(() => viewConfigStoreApi.subscribe((viewConfig) => {\n    if (validateOnConfigChange && viewConfig) {\n      validateViewConfig(viewConfig);\n    }\n    if (onConfigChange && viewConfig) {\n      onConfigChange(viewConfig);\n    }\n  }, (state) => state.viewConfig), [onConfigChange, validateOnConfigChange, viewConfigStoreApi]);\n  useEffect10(() => {\n    if (onWarn && warning) {\n      onWarn(warning);\n    }\n  }, [warning, onWarn]);\n  useEffect10(() => {\n    if (onLoaderChange && loaders) {\n      onLoaderChange(loaders);\n    }\n  }, [loaders, onLoaderChange]);\n  return null;\n}\n\n// src/components/description/DescriptionSubscriber.js\nimport React34, { useEffect as useEffect11, useMemo as useMemo8 } from \"react\";\n\n// src/components/description/Description.js\nimport React33 from \"react\";\nfunction Description(props) {\n  const { description: description2, metadata } = props;\n  return /* @__PURE__ */ React33.createElement(\"div\", {\n    className: \"description\"\n  }, /* @__PURE__ */ React33.createElement(\"p\", null, description2), metadata && Array.from(metadata.entries()).map(([layerIndex, { name: layerName, metadata: metadataRecord }]) => metadataRecord && Object.entries(metadataRecord).length > 0 ? /* @__PURE__ */ React33.createElement(\"details\", {\n    key: layerIndex\n  }, /* @__PURE__ */ React33.createElement(\"summary\", null, layerName), /* @__PURE__ */ React33.createElement(\"div\", {\n    className: \"metadata-container\"\n  }, /* @__PURE__ */ React33.createElement(\"table\", null, /* @__PURE__ */ React33.createElement(\"tbody\", null, Object.entries(metadataRecord).map(([key, value]) => /* @__PURE__ */ React33.createElement(\"tr\", {\n    key\n  }, /* @__PURE__ */ React33.createElement(\"th\", {\n    title: key\n  }, key), /* @__PURE__ */ React33.createElement(\"td\", {\n    title: value\n  }, value))))))) : null));\n}\n\n// src/components/description/DescriptionSubscriber.js\nvar DESCRIPTION_DATA_TYPES = [\"raster\"];\nfunction DescriptionSubscriber(props) {\n  const {\n    coordinationScopes,\n    description: descriptionOverride,\n    removeGridComponent,\n    theme,\n    title: title16 = \"Data Set\"\n  } = props;\n  const loaders = useLoaders();\n  const [{\n    dataset,\n    spatialRasterLayers: rasterLayers\n  }] = useCoordination(COMPONENT_COORDINATION_TYPES.description, coordinationScopes);\n  const [\n    isReady,\n    setItemIsReady,\n    setItemIsNotReady,\n    resetReadyItems\n  ] = useReady(DESCRIPTION_DATA_TYPES);\n  useEffect11(() => {\n    resetReadyItems();\n  }, [loaders, dataset]);\n  const [description2] = useDescription(loaders, dataset);\n  const [raster, imageLayerLoaders, imageLayerMeta] = useRasterData(loaders, dataset, setItemIsReady, () => {\n  }, false);\n  const metadata = useMemo8(() => {\n    const result = new Map();\n    if (rasterLayers && rasterLayers.length > 0 && raster && imageLayerMeta && imageLayerLoaders) {\n      rasterLayers.forEach((layer) => {\n        if (imageLayerMeta[layer.index]) {\n          const { format } = imageLayerLoaders[layer.index].metadata;\n          result.set(`${layer.index}`, {\n            name: raster.meta[layer.index].name,\n            metadata: format && format()\n          });\n        }\n      });\n    }\n    return result;\n  }, [raster, rasterLayers, imageLayerMeta, imageLayerLoaders]);\n  return /* @__PURE__ */ React34.createElement(TitleInfo, {\n    title: title16,\n    removeGridComponent,\n    isScroll: true,\n    theme,\n    isReady\n  }, /* @__PURE__ */ React34.createElement(Description, {\n    description: descriptionOverride || description2,\n    metadata\n  }));\n}\n\n// src/components/status/StatusSubscriber.js\nimport React36 from \"react\";\n\n// src/components/status/Status.js\nimport React35 from \"react\";\nfunction Status(props) {\n  const warnClass = \"alert alert-warning my-0 details\";\n  const { info, warn: warn2 } = props;\n  const messages = [];\n  if (info) {\n    messages.push(/* @__PURE__ */ React35.createElement(\"p\", {\n      className: \"details\",\n      key: \"info\"\n    }, info));\n  }\n  if (warn2) {\n    messages.push(/* @__PURE__ */ React35.createElement(\"p\", {\n      className: warnClass,\n      key: \"warn\"\n    }, warn2));\n  }\n  return messages;\n}\n\n// src/components/status/StatusSubscriber.js\nfunction StatusSubscriber(props) {\n  const {\n    coordinationScopes,\n    removeGridComponent,\n    theme,\n    title: title16 = \"Status\"\n  } = props;\n  const [{\n    cellHighlight,\n    geneHighlight,\n    moleculeHighlight\n  }] = useCoordination(COMPONENT_COORDINATION_TYPES.status, coordinationScopes);\n  const warn2 = useWarning();\n  const infos = [\n    ...cellHighlight ? [`Hovered cell ${cellHighlight}`] : [],\n    ...geneHighlight ? [`Hovered gene ${geneHighlight}`] : [],\n    ...moleculeHighlight ? [`Hovered gene ${moleculeHighlight}`] : []\n  ];\n  const info = infos.join(\"; \");\n  return /* @__PURE__ */ React36.createElement(TitleInfo, {\n    title: title16,\n    theme,\n    removeGridComponent,\n    isScroll: true,\n    isReady: true\n  }, /* @__PURE__ */ React36.createElement(Status, {\n    warn: warn2,\n    info\n  }));\n}\n\n// src/components/genes/GenesSubscriber.js\nimport React39, { useEffect as useEffect14 } from \"react\";\n\n// src/components/genes/Genes.js\nimport React38, { useEffect as useEffect13, useState as useState11 } from \"react\";\n\n// src/components/selectable-table/SelectableTable.js\nimport React37, { useEffect as useEffect12, useCallback as useCallback10, useState as useState10 } from \"react\";\nimport { Table as Table2, AutoSizer } from \"react-virtualized\";\nimport uuidv45 from \"uuid/v4\";\nimport union from \"lodash/union\";\nimport difference from \"lodash/difference\";\nimport isEqual8 from \"lodash/isEqual\";\nfunction SelectableTable(props) {\n  const {\n    hasColorEncoding,\n    columns,\n    data,\n    onChange,\n    idKey = \"id\",\n    valueKey = \"value\",\n    allowMultiple = false,\n    allowUncheck = false,\n    showTableHead = true,\n    showTableInputs = false,\n    testHeight = void 0,\n    testWidth = void 0\n  } = props;\n  const [selectedRows, setSelectedRows] = useState10(null);\n  const onSelectRow = useCallback10((value, checked) => {\n    if (checked || allowUncheck) {\n      if (!allowMultiple) {\n        setSelectedRows(checked ? [value] : []);\n      } else {\n        setSelectedRows(checked ? union(selectedRows || [], [value]) : difference(selectedRows || [], [value]));\n      }\n    }\n  }, [allowMultiple, allowUncheck, selectedRows]);\n  const handleInputChange = useCallback10((event) => {\n    const { target } = event;\n    const { checked } = target;\n    const { value } = target;\n    onSelectRow(value, checked);\n  }, [onSelectRow]);\n  const getDataFromIds = useCallback10((ids) => ids.map((id) => ({\n    [idKey]: id,\n    data: data.find((item) => item[idKey] === id)\n  })), [data, idKey]);\n  const isSelected = useCallback10((id) => Array.isArray(selectedRows) && selectedRows.includes(id), [selectedRows]);\n  useEffect12(() => {\n    const initialSelectedRows = data.map((d) => {\n      if (d[valueKey]) {\n        return d[idKey];\n      }\n      return null;\n    }).filter(Boolean);\n    if (!isEqual8(initialSelectedRows, selectedRows)) {\n      if (initialSelectedRows.length > 0) {\n        setSelectedRows(initialSelectedRows);\n      } else {\n        setSelectedRows(null);\n      }\n    }\n  }, [data, idKey, valueKey]);\n  useEffect12(() => {\n    if (!onChange || !selectedRows) {\n      return;\n    }\n    const selectedRowData = getDataFromIds(selectedRows);\n    if (allowMultiple) {\n      onChange(selectedRowData);\n    } else if (selectedRows.length === 1) {\n      onChange(selectedRowData[0]);\n    } else if (selectedRows.length === 0) {\n      onChange(null);\n    }\n  }, [selectedRows]);\n  const inputUuid = uuidv45();\n  const hiddenInputsClass = showTableInputs ? \"\" : \"hidden-input-column\";\n  const rowRenderer = ({ index, style }) => /* @__PURE__ */ React37.createElement(\"div\", {\n    key: data[index][idKey],\n    className: `table-item table-row ${isSelected(data[index][idKey]) ? \"row-checked \" : \"\"}`,\n    style,\n    role: \"button\",\n    onClick: () => onSelectRow(data[index][idKey], !isSelected(data[index][idKey]) || !hasColorEncoding)\n  }, /* @__PURE__ */ React37.createElement(\"div\", {\n    className: `input-container ${hiddenInputsClass} table-cell`\n  }, /* @__PURE__ */ React37.createElement(\"label\", {\n    htmlFor: `${inputUuid}_${data[index][idKey]}`\n  }, /* @__PURE__ */ React37.createElement(\"input\", {\n    id: `${inputUuid}_${data[index][idKey]}`,\n    type: \"checkbox\",\n    className: allowMultiple ? \"checkbox\" : \"radio\",\n    name: inputUuid,\n    value: data[index][idKey],\n    onChange: handleInputChange,\n    checked: isSelected(data[index][idKey])\n  }))), columns.map((column) => /* @__PURE__ */ React37.createElement(\"div\", {\n    className: \"table-cell\",\n    key: column\n  }, data[index][column])));\n  const headerRowRenderer = ({ style }) => /* @__PURE__ */ React37.createElement(\"div\", {\n    className: `${hiddenInputsClass} table-row`,\n    style\n  }, columns.map((column) => /* @__PURE__ */ React37.createElement(\"div\", {\n    key: column\n  }, column)));\n  return /* @__PURE__ */ React37.createElement(\"div\", {\n    className: \"selectable-table\"\n  }, /* @__PURE__ */ React37.createElement(AutoSizer, null, ({ width, height }) => /* @__PURE__ */ React37.createElement(Table2, {\n    height: testHeight || height,\n    gridStyle: { outline: \"none\" },\n    rowCount: data.length,\n    rowHeight: 24,\n    headerHeight: showTableHead ? 24 : void 0,\n    rowRenderer,\n    width: testWidth || width,\n    headerRowRenderer: showTableHead ? headerRowRenderer : void 0,\n    rowGetter: ({ index }) => data[index]\n  })));\n}\n\n// src/components/genes/Genes.js\nfunction Genes(props) {\n  const {\n    hasColorEncoding,\n    geneList = [],\n    geneSelection = [],\n    geneFilter = null,\n    setGeneSelection\n  } = props;\n  const [searchTerm, setSearchTerm] = useState11(\"\");\n  const [searchResults, setSearchResults] = useState11(geneList);\n  useEffect13(() => {\n    const results = geneList.filter((gene) => gene.toLowerCase().includes(searchTerm.toLowerCase()));\n    setSearchResults(results);\n  }, [searchTerm, geneList]);\n  function onChange(selection) {\n    if (setGeneSelection && selection && selection.name) {\n      setGeneSelection([selection.name]);\n    }\n  }\n  const data = searchResults.filter((gene) => geneFilter ? geneFilter.includes(gene) : true).sort((a, b) => a.localeCompare(b)).map((gene) => ({ name: gene, value: geneSelection ? geneSelection.includes(gene) : false }));\n  const handleChange = (event) => {\n    setSearchTerm(event.target.value);\n  };\n  return /* @__PURE__ */ React38.createElement(React38.Fragment, null, /* @__PURE__ */ React38.createElement(\"input\", {\n    className: \"search-bar\",\n    type: \"text\",\n    placeholder: \"Search\",\n    value: searchTerm,\n    onChange: handleChange\n  }), /* @__PURE__ */ React38.createElement(SelectableTable, {\n    columns: [\"name\"],\n    data,\n    hasColorEncoding,\n    idKey: \"name\",\n    valueKey: \"value\",\n    onChange,\n    allowUncheck: false,\n    showTableHead: false\n  }));\n}\n\n// src/components/genes/GenesSubscriber.js\nvar GENES_DATA_TYPES = [\"expression-matrix\"];\nfunction GenesSubscriber(props) {\n  const {\n    coordinationScopes,\n    removeGridComponent,\n    variablesLabelOverride: variablesLabel = \"gene\",\n    variablesPluralLabelOverride: variablesPluralLabel = `${variablesLabel}s`,\n    theme,\n    title: title16 = \"Expression Levels\"\n  } = props;\n  const loaders = useLoaders();\n  const [{\n    dataset,\n    geneSelection,\n    geneFilter,\n    cellColorEncoding\n  }, {\n    setGeneSelection,\n    setGeneFilter,\n    setGeneHighlight,\n    setCellColorEncoding\n  }] = useCoordination(COMPONENT_COORDINATION_TYPES.genes, coordinationScopes);\n  const [urls, addUrl, resetUrls] = useUrls();\n  const [\n    isReady,\n    setItemIsReady,\n    setItemIsNotReady,\n    resetReadyItems\n  ] = useReady(GENES_DATA_TYPES);\n  useEffect14(() => {\n    resetUrls();\n    resetReadyItems();\n  }, [loaders, dataset]);\n  const [attrs] = useExpressionAttrs(loaders, dataset, setItemIsReady, addUrl, true);\n  const geneList = attrs ? attrs.cols : [];\n  const numGenes = geneList.length;\n  function setGeneSelectionAndColorEncoding(newSelection) {\n    setGeneSelection(newSelection);\n    setCellColorEncoding(\"geneSelection\");\n  }\n  return /* @__PURE__ */ React39.createElement(TitleInfo, {\n    title: title16,\n    info: `${numGenes} ${pluralize(variablesLabel, variablesPluralLabel, numGenes)}`,\n    theme,\n    isScroll: true,\n    removeGridComponent,\n    isReady,\n    urls\n  }, /* @__PURE__ */ React39.createElement(Genes, {\n    hasColorEncoding: cellColorEncoding === \"geneSelection\",\n    geneList,\n    geneSelection,\n    geneFilter,\n    setGeneSelection: setGeneSelectionAndColorEncoding,\n    setGeneFilter,\n    setGeneHighlight\n  }));\n}\n\n// src/components/sets/CellSetsManagerSubscriber.js\nimport React51, {\n  useEffect as useEffect16,\n  useState as useState15,\n  useMemo as useMemo10\n} from \"react\";\nimport isEqual11 from \"lodash/isEqual\";\n\n// package.json\nvar name = \"vitessce\";\nvar version = \"1.1.17\";\nvar description = \"Vitessce app and React component library\";\nvar author = \"C McCallum\";\nvar homepage = \"http://vitessce.io/\";\nvar license = \"MIT\";\nvar repository = \"https://github.com/vitessce/vitessce/\";\nvar keywords = [\n  \"react-component\"\n];\nvar files = [\n  \"dist\",\n  \"src\"\n];\nvar main = \"dist/umd/production/index.min.js\";\nvar module = \"dist/esm/index.js\";\nvar peerDependencies = {\n  react: \"^16.8.6\",\n  \"react-dom\": \"^16.8.6\"\n};\nvar dependencies = {\n  \"@hms-dbmi/viv\": \"^0.11.0\",\n  \"@loaders.gl/3d-tiles\": \"^3.0.0\",\n  \"@loaders.gl/core\": \"^3.0.0\",\n  \"@loaders.gl/images\": \"^3.0.0\",\n  \"@loaders.gl/loader-utils\": \"^3.0.0\",\n  \"@luma.gl/core\": \"~8.5.7\",\n  \"@material-ui/core\": \"^4.8.3\",\n  \"@material-ui/icons\": \"^4.9.1\",\n  \"@turf/area\": \"^6.5.0\",\n  \"@turf/boolean-contains\": \"^6.0.1\",\n  \"@turf/boolean-overlap\": \"^6.0.1\",\n  \"@turf/boolean-point-in-polygon\": \"^6.0.1\",\n  \"@turf/boolean-within\": \"^6.0.1\",\n  \"@turf/centroid\": \"^6.0.2\",\n  \"@turf/helpers\": \"^6.1.4\",\n  ajv: \"^6.10.0\",\n  bowser: \"^2.11.0\",\n  classnames: \"^2.2.6\",\n  clsx: \"^1.1.1\",\n  concaveman: \"^1.2.0\",\n  \"d3-array\": \"^2.4.0\",\n  \"d3-dsv\": \"^1.1.1\",\n  \"d3-force\": \"^2.1.1\",\n  \"d3-quadtree\": \"^1.0.7\",\n  \"d3-scale-chromatic\": \"^1.3.3\",\n  \"deck.gl\": \"~8.5.8\",\n  \"dynamic-import-polyfill\": \"^0.1.1\",\n  \"fast-deep-equal\": \"^3.1.3\",\n  glslify: \"^7.0.0\",\n  higlass: \"1.11.4\",\n  \"higlass-register\": \"^0.3.0\",\n  \"higlass-zarr-datafetchers\": \"^0.2.1\",\n  internmap: \"^2.0.3\",\n  json2csv: \"^4.5.2\",\n  lodash: \"^4.17.15\",\n  \"lz-string\": \"^1.4.4\",\n  \"math.gl\": \"^3.1.3\",\n  mathjs: \"^9.2.0\",\n  \"nebula.gl\": \"^0.23.8\",\n  \"prop-types\": \"^15.7.2\",\n  \"rc-tooltip\": \"^4.0.3\",\n  \"rc-tree\": \"2.1.0\",\n  \"react-color\": \"^2.18.0\",\n  \"react-grid-layout\": \"^1.1.1\",\n  \"react-vega\": \"^7.3.0\",\n  \"react-virtualized\": \"^9.22.2\",\n  \"short-number\": \"^1.0.6\",\n  store: \"^2.0.12\",\n  tinycolor2: \"^1.4.1\",\n  tinyqueue: \"^2.0.3\",\n  uuid: \"^3.3.2\",\n  vega: \"^5.13.0\",\n  \"vega-lite\": \"^4.13.0\",\n  \"vega-tooltip\": \"^0.23.0\",\n  \"whatwg-fetch\": \"^3.0.0\",\n  \"window-pixi\": \"5.3.3\",\n  zarr: \"^0.4.0\",\n  zustand: \"^3.5.10\"\n};\nvar devDependencies = {\n  \"@babel/core\": \"7.9.0\",\n  \"@babel/plugin-proposal-class-properties\": \"^7.14.5\",\n  \"@svgr/webpack\": \"5.3.1\",\n  \"@typescript-eslint/eslint-plugin\": \"^2.10.0\",\n  \"@typescript-eslint/parser\": \"^2.10.0\",\n  \"babel-eslint\": \"10.0.3\",\n  \"babel-loader\": \"8.1.0\",\n  \"babel-plugin-glsl\": \"^1.0.0\",\n  \"babel-plugin-named-asset-import\": \"^0.3.6\",\n  \"babel-preset-react-app\": \"^9.1.2\",\n  camelcase: \"^5.3.1\",\n  \"case-sensitive-paths-webpack-plugin\": \"2.3.0\",\n  concurrently: \"^5.3.0\",\n  \"css-loader\": \"3.4.2\",\n  cypress: \"^3.6.1\",\n  \"cypress-fail-on-console-error\": \"^2.0.6\",\n  dotenv: \"8.2.0\",\n  \"dotenv-expand\": \"5.1.0\",\n  enzyme: \"^3.9.0\",\n  \"enzyme-adapter-react-16\": \"^1.11.2\",\n  esbuild: \"^0.12.28\",\n  \"esbuild-plugin-babel\": \"^0.2.3\",\n  \"esbuild-plugin-sass\": \"^0.6.0\",\n  eslint: \"^6.6.0\",\n  \"eslint-config-airbnb\": \"^17.1.0\",\n  \"eslint-config-react-app\": \"^5.2.0\",\n  \"eslint-loader\": \"3.0.3\",\n  \"eslint-plugin-cypress\": \"^2.2.1\",\n  \"eslint-plugin-flowtype\": \"4.6.0\",\n  \"eslint-plugin-import\": \"2.20.0\",\n  \"eslint-plugin-jsx-a11y\": \"6.2.3\",\n  \"eslint-plugin-react\": \"7.18.0\",\n  \"eslint-plugin-react-hooks\": \"^1.6.1\",\n  \"eslint-plugin-vitessce-rules\": \"file:eslint\",\n  expect: \"^24.5.0\",\n  \"file-loader\": \"4.3.0\",\n  \"fs-extra\": \"^8.1.0\",\n  \"glsl-colormap\": \"^1.0.1\",\n  \"html-webpack-plugin\": \"4.0.0-beta.11\",\n  \"http-server\": \"^0.12.3\",\n  \"identity-obj-proxy\": \"3.0.0\",\n  \"js-yaml\": \"^3.13.1\",\n  karma: \"4.4.1\",\n  \"karma-chrome-launcher\": \"3.1.0\",\n  \"karma-mocha\": \"1.3.0\",\n  \"karma-mocha-reporter\": \"2.2.5\",\n  \"karma-sourcemap-loader\": \"0.3.7\",\n  \"karma-webpack\": \"4.0.2\",\n  \"mini-css-extract-plugin\": \"0.9.0\",\n  mocha: \"7.1.0\",\n  \"node-sass\": \"^6.0.0\",\n  \"object.fromentries\": \"^2.0.2\",\n  \"optimize-css-assets-webpack-plugin\": \"5.0.3\",\n  \"pnp-webpack-plugin\": \"1.6.0\",\n  \"postcss-flexbugs-fixes\": \"4.1.0\",\n  \"postcss-loader\": \"3.0.0\",\n  \"postcss-normalize\": \"8.0.1\",\n  \"postcss-preset-env\": \"6.7.0\",\n  \"postcss-safe-parser\": \"4.0.1\",\n  react: \"^16.8.6\",\n  \"react-app-polyfill\": \"^1.0.6\",\n  \"react-dev-utils\": \"^10.2.0\",\n  \"react-dom\": \"^16.8.6\",\n  resolve: \"1.15.0\",\n  \"resolve-url-loader\": \"3.1.1\",\n  \"sass-loader\": \"^10.0.1\",\n  semver: \"6.3.0\",\n  \"style-loader\": \"0.23.1\",\n  \"terser-webpack-plugin\": \"2.3.4\",\n  \"url-loader\": \"2.3.0\",\n  \"wait-on\": \"^3.2.0\",\n  webpack: \"4.41.5\",\n  \"webpack-dev-server\": \"3.10.2\",\n  \"webpack-node-externals\": \"^2.5.2\",\n  \"workbox-webpack-plugin\": \"4.3.1\",\n  \"worker-loader\": \"^2.0.0\"\n};\nvar resolutions = {\n  \"@turf/difference\": \"6.0.1\"\n};\nvar scripts = {\n  \"build-demo:prod\": \"node scripts/build-demo.js production\",\n  \"build-lib:prod\": \"NODE_ENV=production node scripts/build-esm.mjs && node scripts/build-lib.js production\",\n  \"build-demo:dev\": \"node scripts/build-demo.js development\",\n  \"build-lib:dev\": \"NODE_ENV=development node scripts/build-esm.mjs && node scripts/build-lib.js development\",\n  \"build:prod\": \"npm run build-demo:prod && npm run build-lib:prod\",\n  \"build:dev\": \"npm run build-demo:dev && npm run build-lib:dev\",\n  prepublishOnly: \"npm run build-lib:prod\",\n  clean: \"rm -r dist-demo dist\",\n  start: \"node scripts/start-demo.js\",\n  \"start:fixtures\": 'http-server src/loaders/fixtures/ --cors=\"*\" -s',\n  \"start:fixtures-concurrently\": 'concurrently --kill-others \"npm run start:fixtures\"',\n  test: 'npm run start:fixtures-concurrently -- --success first \"karma start scripts/karma.config.js --single-run\"',\n  \"test:watch\": 'npm run start:fixtures-concurrently -- \"karma start scripts/karma.config.js --auto-watch\"',\n  \"cypress:open\": 'npm run start:fixtures-concurrently -- \"cypress open\"',\n  \"cypress:run\": 'npm run start:fixtures-concurrently -- --success first --kill-others \"cypress run\"',\n  \"lint-fix\": \"eslint -c .eslintrc.yml --ext .js --fix src/\"\n};\nvar browserslist = {\n  production: [\n    \">0.2%\",\n    \"not dead\",\n    \"not op_mini all\"\n  ],\n  development: [\n    \"last 1 chrome version\",\n    \"last 1 firefox version\",\n    \"last 1 safari version\"\n  ]\n};\nvar babel = {\n  presets: [\n    \"react-app\"\n  ],\n  plugins: [\n    \"glsl\"\n  ]\n};\nvar package_default = {\n  name,\n  version,\n  description,\n  author,\n  homepage,\n  license,\n  repository,\n  keywords,\n  files,\n  main,\n  module,\n  peerDependencies,\n  dependencies,\n  devDependencies,\n  resolutions,\n  scripts,\n  browserslist,\n  babel\n};\n\n// src/components/sets/SetsManager.js\nimport React50, { useState as useState14, useMemo as useMemo9 } from \"react\";\nimport isEqual10 from \"lodash/isEqual\";\n\n// src/components/sets/Tree.js\nimport React40 from \"react\";\nimport RcTree from \"rc-tree\";\nimport classNames from \"classnames\";\nvar Tree = React40.forwardRef((props, ref) => {\n  const {\n    prefixCls,\n    className,\n    showIcon,\n    blockNode,\n    children,\n    checkable\n  } = props;\n  return /* @__PURE__ */ React40.createElement(RcTree, __spreadProps(__spreadValues({\n    itemHeight: 32,\n    ref\n  }, props), {\n    className: classNames(className, {\n      [`${prefixCls}-icon-hide`]: !showIcon,\n      [`${prefixCls}-block-node`]: blockNode\n    }),\n    checkable: checkable ? /* @__PURE__ */ React40.createElement(\"span\", {\n      className: `${prefixCls}-checkbox-inner`\n    }) : checkable\n  }), children);\n});\nTree.defaultProps = {\n  virtual: false,\n  checkable: false,\n  showIcon: false,\n  blockNode: true,\n  prefixCls: \"rc-tree\"\n};\nvar Tree_default = Tree;\n\n// src/components/sets/TreeNode.js\nimport React45, { useState as useState13 } from \"react\";\nimport clsx from \"clsx\";\nimport { TreeNode as RcTreeNode } from \"rc-tree\";\nimport { getDataAndAria } from \"rc-tree/es/util\";\nimport classNames2 from \"classnames\";\nimport range8 from \"lodash/range\";\nimport isEqual9 from \"lodash/isEqual\";\n\n// src/components/sets/PopoverMenu.js\nimport React43, { useState as useState12, useEffect as useEffect15 } from \"react\";\nimport { TwitterPicker } from \"react-color\";\n\n// src/components/sets/Popover.js\nimport React42 from \"react\";\n\n// src/components/sets/HelpTooltip.js\nimport React41, { useRef as useRef7 } from \"react\";\nimport RcTooltip from \"rc-tooltip\";\nfunction HelpTooltip(props) {\n  const { title: title16, content, overlayClassName } = props;\n  const spanRef = useRef7();\n  const getTooltipContainer = useVitessceContainer(spanRef);\n  const overlay = title16 || content;\n  return /* @__PURE__ */ React41.createElement(React41.Fragment, null, /* @__PURE__ */ React41.createElement(\"span\", {\n    ref: spanRef\n  }), /* @__PURE__ */ React41.createElement(RcTooltip, __spreadValues({\n    getTooltipContainer,\n    overlayClassName,\n    overlay\n  }, props)));\n}\nHelpTooltip.defaultProps = {\n  overlayClassName: \"help-tooltip\",\n  placement: \"top\",\n  trigger: \"hover\",\n  mouseEnterDelay: 0.2,\n  mouseLeaveDelay: 0\n};\n\n// src/components/sets/Popover.js\nfunction Popover(props) {\n  return /* @__PURE__ */ React42.createElement(HelpTooltip, __spreadValues({}, props));\n}\nPopover.defaultProps = {\n  overlayClassName: \"popover\",\n  placement: \"top\",\n  trigger: \"click\",\n  mouseEnterDelay: 0,\n  mouseLeaveDelay: 0\n};\n\n// src/components/sets/PopoverMenu.js\nfunction PopoverMenuListButton(props) {\n  const {\n    title: title16,\n    subtitle,\n    onClick,\n    handler,\n    handlerKey,\n    confirm,\n    visible\n  } = props;\n  const [isConfirming, setIsConfirming] = useState12(false);\n  useEffect15(() => {\n    setIsConfirming(false);\n  }, [visible]);\n  function handleOrRequireConfirm() {\n    if (!confirm || isConfirming) {\n      onClick();\n      handler();\n    } else {\n      setIsConfirming(true);\n    }\n  }\n  const titleWithConfirm = `${isConfirming ? \"Confirm \" : \"\"}${title16}`;\n  return /* @__PURE__ */ React43.createElement(\"button\", {\n    title: titleWithConfirm,\n    type: \"button\",\n    onClick: handleOrRequireConfirm,\n    onKeyPress: (e) => callbackOnKeyPress(e, handlerKey, handleOrRequireConfirm)\n  }, titleWithConfirm, subtitle && /* @__PURE__ */ React43.createElement(React43.Fragment, null, /* @__PURE__ */ React43.createElement(\"br\", null), /* @__PURE__ */ React43.createElement(\"span\", {\n    className: \"small\"\n  }, subtitle)));\n}\nfunction PopoverMenuList(props) {\n  const {\n    menuConfig,\n    onClick,\n    color = null,\n    palette = null,\n    setColor = null,\n    visible\n  } = props;\n  function handleColorChange({ rgb }) {\n    if (rgb && setColor) {\n      setColor([rgb.r, rgb.g, rgb.b]);\n    }\n  }\n  const defaultPalette = palette ? palette.map(colorArrayToString) : PALETTE.concat([[255, 255, 255], [128, 128, 128], [0, 0, 0]]).map(colorArrayToString);\n  return /* @__PURE__ */ React43.createElement(\"div\", null, color && setColor && defaultPalette && /* @__PURE__ */ React43.createElement(TwitterPicker, {\n    className: \"popover-menu-color\",\n    disableAlpha: true,\n    width: 108,\n    triangle: \"hide\",\n    colors: defaultPalette,\n    color: colorArrayToString(color),\n    onChangeComplete: handleColorChange\n  }), /* @__PURE__ */ React43.createElement(\"ul\", {\n    className: \"popover-menu-list\"\n  }, menuConfig.map((item) => /* @__PURE__ */ React43.createElement(\"li\", {\n    key: item.title + item.subtitle\n  }, /* @__PURE__ */ React43.createElement(PopoverMenuListButton, __spreadProps(__spreadValues({}, item), {\n    onClick,\n    visible\n  }))))));\n}\nfunction PopoverMenu(props) {\n  const {\n    menuConfig,\n    placement,\n    children,\n    color = null,\n    setColor = null,\n    palette = null\n  } = props;\n  const [visible, setVisible] = useState12(false);\n  return /* @__PURE__ */ React43.createElement(Popover, {\n    content: /* @__PURE__ */ React43.createElement(PopoverMenuList, {\n      menuConfig,\n      onClick: () => setVisible(false),\n      color,\n      setColor,\n      palette,\n      visible\n    }),\n    placement,\n    visible,\n    onVisibleChange: setVisible\n  }, children);\n}\n\n// src/assets/menu.svg\nimport {\n  createElement as createElement4\n} from \"react\";\nfunction SvgMenu(props) {\n  return /* @__PURE__ */ createElement4(\"svg\", __spreadValues({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\"\n  }, props), /* @__PURE__ */ createElement4(\"path\", {\n    d: \"M12 18c1.657 0 3 1.343 3 3s-1.343 3-3 3-3-1.343-3-3 1.343-3 3-3zm0-9c1.657 0 3 1.343 3 3s-1.343 3-3 3-3-1.343-3-3 1.343-3 3-3zm0-9c1.657 0 3 1.343 3 3s-1.343 3-3 3-3-1.343-3-3 1.343-3 3-3z\"\n  }));\n}\nvar ReactComponent4 = SvgMenu;\n\n// src/components/sets/TreeNode.js\nfunction makeNodeViewMenuConfig(props) {\n  const {\n    path,\n    level,\n    height,\n    onCheckNode,\n    onNodeRemove,\n    onNodeSetIsEditing,\n    onExportLevelZeroNodeJSON,\n    onExportLevelZeroNodeTabular,\n    onExportSetJSON,\n    checkable,\n    editable,\n    exportable,\n    checked\n  } = props;\n  return [\n    ...editable ? [\n      {\n        title: \"Rename\",\n        handler: () => {\n          onNodeSetIsEditing(path, true);\n        },\n        handlerKey: \"r\"\n      },\n      {\n        title: \"Delete\",\n        confirm: true,\n        handler: () => {\n          onNodeRemove(path);\n        },\n        handlerKey: \"d\"\n      }\n    ] : [],\n    ...level === 0 && exportable ? [\n      {\n        title: \"Export hierarchy\",\n        subtitle: \"(to JSON file)\",\n        handler: () => {\n          onExportLevelZeroNodeJSON(path);\n        },\n        handlerKey: \"j\"\n      },\n      ...height <= 1 ? [\n        {\n          title: \"Export hierarchy\",\n          subtitle: \"(to CSV file)\",\n          handler: () => {\n            onExportLevelZeroNodeTabular(path);\n          },\n          handlerKey: \"t\"\n        }\n      ] : []\n    ] : [],\n    ...level > 0 ? [\n      ...checkable ? [\n        {\n          title: checked ? \"Uncheck\" : \"Check\",\n          handler: () => {\n            onCheckNode(path, !checked);\n          },\n          handlerKey: \"s\"\n        }\n      ] : [],\n      ...exportable ? [\n        {\n          title: \"Export set\",\n          subtitle: \"(to JSON file)\",\n          handler: () => {\n            onExportSetJSON(path);\n          },\n          handlerKey: \"e\"\n        }\n      ] : []\n    ] : []\n  ];\n}\nfunction NamedSetNodeStatic(props) {\n  const {\n    title: title16,\n    path,\n    nodeKey,\n    level,\n    height,\n    color,\n    checkbox,\n    isChecking,\n    isLeaf,\n    onNodeSetColor,\n    onNodeView,\n    expanded,\n    onCheckLevel,\n    checkedLevelPath,\n    checkedLevelIndex,\n    disableTooltip,\n    size,\n    datatype,\n    editable,\n    theme\n  } = props;\n  const shouldCheckNextLevel = level === 0 && !expanded;\n  const nextLevelToCheck = checkedLevelIndex && isEqual9(path, checkedLevelPath) && checkedLevelIndex < height ? checkedLevelIndex + 1 : 1;\n  const numberFormatter = new Intl.NumberFormat(\"en-US\");\n  const niceSize = numberFormatter.format(size);\n  let tooltipText;\n  if (shouldCheckNextLevel) {\n    tooltipText = getLevelTooltipText(nextLevelToCheck);\n  } else if (isLeaf || !expanded) {\n    tooltipText = `Color individual set (${niceSize} ${datatype}${size === 1 ? \"\" : \"s\"})`;\n  } else {\n    tooltipText = \"Color by expanded descendants\";\n  }\n  const onClick = level === 0 && !expanded ? () => onCheckLevel(nodeKey, nextLevelToCheck) : () => onNodeView(path);\n  const tooltipProps = disableTooltip ? { visible: false } : {};\n  const popoverMenuConfig = makeNodeViewMenuConfig(props);\n  return /* @__PURE__ */ React45.createElement(\"span\", null, /* @__PURE__ */ React45.createElement(HelpTooltip, __spreadValues({\n    title: tooltipText\n  }, tooltipProps), /* @__PURE__ */ React45.createElement(\"button\", {\n    type: \"button\",\n    onClick,\n    onKeyPress: (e) => callbackOnKeyPress(e, \"v\", () => onNodeView(path)),\n    className: \"title-button\"\n  }, title16)), popoverMenuConfig.length > 0 ? /* @__PURE__ */ React45.createElement(PopoverMenu, {\n    menuConfig: makeNodeViewMenuConfig(props),\n    color: level > 0 && editable ? color || getDefaultColor(theme) : null,\n    setColor: (c) => onNodeSetColor(path, c)\n  }, /* @__PURE__ */ React45.createElement(ReactComponent4, {\n    className: \"node-menu-icon\"\n  })) : null, level > 0 && isChecking ? checkbox : null, level > 0 && /* @__PURE__ */ React45.createElement(\"span\", {\n    className: \"node-size-label\"\n  }, niceSize));\n}\nfunction NamedSetNodeEditing(props) {\n  const {\n    title: title16,\n    path,\n    onNodeSetName,\n    onNodeCheckNewName\n  } = props;\n  const [currentTitle, setCurrentTitle] = useState13(title16);\n  const hasConflicts = onNodeCheckNewName(path, currentTitle);\n  function trySetName() {\n    if (!hasConflicts) {\n      onNodeSetName(path, currentTitle, true);\n    }\n  }\n  return /* @__PURE__ */ React45.createElement(\"span\", {\n    className: \"title-button-with-input\"\n  }, /* @__PURE__ */ React45.createElement(\"input\", {\n    autoFocus: true,\n    className: \"title-input\",\n    type: \"text\",\n    value: currentTitle,\n    onChange: (e) => {\n      setCurrentTitle(e.target.value);\n    },\n    onKeyPress: (e) => callbackOnKeyPress(e, \"Enter\", trySetName),\n    onFocus: (e) => e.target.select()\n  }), !hasConflicts && /* @__PURE__ */ React45.createElement(\"button\", {\n    type: \"button\",\n    className: \"title-save-button\",\n    onClick: trySetName\n  }, \"Save\"));\n}\nfunction NamedSetNode(props) {\n  const {\n    isEditing,\n    isCurrentSet\n  } = props;\n  return isEditing || isCurrentSet ? /* @__PURE__ */ React45.createElement(NamedSetNodeEditing, __spreadValues({}, props)) : /* @__PURE__ */ React45.createElement(NamedSetNodeStatic, __spreadValues({}, props));\n}\nfunction LevelsButtons(props) {\n  const {\n    nodeKey,\n    path,\n    height,\n    onCheckLevel,\n    checkedLevelPath,\n    checkedLevelIndex,\n    hasColorEncoding\n  } = props;\n  function onCheck(event) {\n    if (event.target.checked) {\n      const newLevel = parseInt(event.target.value, 10);\n      onCheckLevel(nodeKey, newLevel);\n    }\n  }\n  return /* @__PURE__ */ React45.createElement(\"div\", {\n    className: \"level-buttons-container\"\n  }, range8(1, height + 1).map((i) => {\n    const isChecked = isEqual9(path, checkedLevelPath) && i === checkedLevelIndex;\n    return /* @__PURE__ */ React45.createElement(\"div\", {\n      className: \"level-buttons\",\n      key: i\n    }, /* @__PURE__ */ React45.createElement(HelpTooltip, {\n      title: getLevelTooltipText(i)\n    }, /* @__PURE__ */ React45.createElement(\"input\", {\n      className: clsx(\"level-radio-button\", { checked: isChecked && !hasColorEncoding }),\n      type: \"checkbox\",\n      value: i,\n      checked: isChecked && hasColorEncoding,\n      onChange: onCheck\n    })));\n  }));\n}\nfunction SwitcherIcon(props) {\n  const {\n    isLeaf,\n    isOpen,\n    color\n  } = props;\n  const hexColor = color ? colorArrayToString(color) : void 0;\n  if (isLeaf) {\n    return /* @__PURE__ */ React45.createElement(\"i\", {\n      className: \"anticon anticon-circle rc-tree-switcher-icon\"\n    }, /* @__PURE__ */ React45.createElement(\"svg\", {\n      viewBox: \"0 0 1024 1024\",\n      focusable: \"false\",\n      \"data-icon\": \"caret-down\",\n      width: \"1em\",\n      height: \"1em\",\n      \"aria-hidden\": \"true\"\n    }, /* @__PURE__ */ React45.createElement(\"rect\", {\n      fill: hexColor,\n      x: 600 / 2,\n      y: 600 / 2,\n      width: 1024 - 600,\n      height: 1024 - 600\n    })));\n  }\n  return /* @__PURE__ */ React45.createElement(\"i\", {\n    className: \"anticon anticon-caret-down rc-tree-switcher-icon\"\n  }, /* @__PURE__ */ React45.createElement(\"svg\", {\n    viewBox: \"0 0 1024 1024\",\n    focusable: \"false\",\n    \"data-icon\": \"caret-down\",\n    width: \"1em\",\n    height: \"1em\",\n    \"aria-hidden\": \"true\"\n  }, /* @__PURE__ */ React45.createElement(\"path\", {\n    fill: isOpen ? \"#444\" : hexColor,\n    d: \"M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z\"\n  })));\n}\nvar TreeNode = class extends RcTreeNode {\n  constructor() {\n    super(...arguments);\n    __publicField(this, \"renderSelector\", () => {\n      const {\n        title: title16,\n        isCurrentSet,\n        isSelected,\n        isEditing,\n        onDragStart: onDragStartProp\n      } = this.props;\n      const {\n        rcTree: {\n          prefixCls: prefixClass,\n          draggable\n        }\n      } = this.context;\n      const onDragStart = (e) => {\n        onDragStartProp();\n        this.onDragStart(e);\n      };\n      const wrapClass = `${prefixClass}-node-content-wrapper`;\n      const isDraggable = !isCurrentSet && !isEditing && draggable;\n      return /* @__PURE__ */ React45.createElement(\"span\", {\n        ref: this.setSelectHandle,\n        title: title16,\n        className: classNames2(wrapClass, `${wrapClass}-${this.getNodeState() || \"normal\"}`, isSelected && `${prefixClass}-node-selected`, isDraggable && \"draggable\"),\n        draggable: isDraggable,\n        \"aria-grabbed\": isDraggable,\n        onDragStart: isDraggable ? onDragStart : void 0\n      }, /* @__PURE__ */ React45.createElement(NamedSetNode, __spreadProps(__spreadValues({}, this.props), {\n        prefixClass,\n        checkbox: this.renderCheckbox()\n      })), this.renderLevels());\n    });\n    __publicField(this, \"renderLevels\", () => {\n      const { level, expanded } = this.props;\n      if (level !== 0 || expanded) {\n        return null;\n      }\n      return /* @__PURE__ */ React45.createElement(LevelsButtons, __spreadValues({}, this.props));\n    });\n    __publicField(this, \"renderSwitcher\", () => {\n      const { expanded, isLeaf, color } = this.props;\n      const {\n        rcTree: {\n          prefixCls: prefixClass,\n          onNodeExpand\n        }\n      } = this.context;\n      const onNodeExpandWrapper = (e) => {\n        if (!isLeaf) {\n          onNodeExpand(e, this);\n        }\n      };\n      const switcherClass = classNames2(`${prefixClass}-switcher`, { [`${prefixClass}-switcher_${expanded ? \"open\" : \"close\"}`]: !isLeaf });\n      return /* @__PURE__ */ React45.createElement(\"span\", {\n        className: switcherClass,\n        onClick: onNodeExpandWrapper,\n        onKeyPress: (e) => callbackOnKeyPress(e, \"d\", onNodeExpandWrapper),\n        role: \"button\",\n        tabIndex: \"0\"\n      }, /* @__PURE__ */ React45.createElement(SwitcherIcon, {\n        isLeaf,\n        isOpen: expanded,\n        color\n      }));\n    });\n  }\n  render() {\n    const _a2 = this.props, {\n      style,\n      loading,\n      level,\n      dragOver,\n      dragOverGapTop,\n      dragOverGapBottom,\n      isLeaf,\n      expanded,\n      selected,\n      checked,\n      halfChecked,\n      onDragEnd: onDragEndProp,\n      expandable\n    } = _a2, otherProps = __objRest(_a2, [\n      \"style\",\n      \"loading\",\n      \"level\",\n      \"dragOver\",\n      \"dragOverGapTop\",\n      \"dragOverGapBottom\",\n      \"isLeaf\",\n      \"expanded\",\n      \"selected\",\n      \"checked\",\n      \"halfChecked\",\n      \"onDragEnd\",\n      \"expandable\"\n    ]);\n    const {\n      rcTree: {\n        prefixCls: prefixClass,\n        filterTreeNode,\n        draggable\n      }\n    } = this.context;\n    const disabled = this.isDisabled();\n    const dataAndAriaAttributeProps = getDataAndAria(otherProps);\n    const onDragEnd = (e) => {\n      onDragEndProp();\n      this.onDragEnd(e);\n    };\n    return /* @__PURE__ */ React45.createElement(\"li\", __spreadValues({\n      className: classNames2(\"rc-tree-treenode\", `level-${level}-treenode`, {\n        [`${prefixClass}-treenode-disabled`]: disabled,\n        [`${prefixClass}-treenode-switcher-${expanded ? \"open\" : \"close\"}`]: !isLeaf,\n        [`${prefixClass}-treenode-checkbox-checked`]: checked,\n        [`${prefixClass}-treenode-checkbox-indeterminate`]: halfChecked,\n        [`${prefixClass}-treenode-selected`]: selected,\n        [`${prefixClass}-treenode-loading`]: loading,\n        \"drag-over\": !disabled && dragOver,\n        \"drag-over-gap-top\": !disabled && dragOverGapTop,\n        \"drag-over-gap-bottom\": !disabled && dragOverGapBottom,\n        \"filter-node\": filterTreeNode && filterTreeNode(this)\n      }),\n      style,\n      role: \"treeitem\",\n      onDragEnter: draggable ? this.onDragEnter : void 0,\n      onDragOver: draggable ? this.onDragOver : void 0,\n      onDragLeave: draggable ? this.onDragLeave : void 0,\n      onDrop: draggable ? this.onDrop.bind(this) : void 0,\n      onDragEnd: draggable ? onDragEnd : void 0\n    }, dataAndAriaAttributeProps), expandable ? this.renderSwitcher() : null, this.renderSelector(), this.renderChildren());\n  }\n};\n\n// src/components/sets/SetsManagerButtons.js\nimport React49, { useCallback as useCallback11 } from \"react\";\n\n// src/assets/sets/union.svg\nimport {\n  createElement as createElement5\n} from \"react\";\nfunction SvgUnion(props) {\n  return /* @__PURE__ */ createElement5(\"svg\", __spreadValues({\n    viewBox: \"0 0 16.433999 10.234\",\n    height: 12,\n    width: 18\n  }, props), /* @__PURE__ */ createElement5(\"g\", {\n    transform: \"translate(0.117,-2.883)\"\n  }, /* @__PURE__ */ createElement5(\"path\", {\n    d: \"m 11.467471,11.811278 c 0.198237,-0.322177 0.508,-1.011333 0.653661,-1.454255 0.659343,-2.0049141 0.44323,-4.2620847 -0.577734,-6.0340822 l -0.168844,-0.2930481 0.105744,0.017887 c 0.759902,0.1285441 1.368762,0.3699553 1.856675,0.7361658 1.988296,1.4923476 2.192477,4.3353549 0.434717,6.0529895 -0.641216,0.626581 -1.299647,0.94683 -2.294136,1.115833 l -0.108488,0.01844 z M 4.3162122,11.919169 C 1.9278944,11.487872 0.46692382,9.0323123 1.234873,6.7401372 1.5621727,5.763213 2.2610593,4.9489746 3.1840041,4.4693005 3.5978035,4.2542401 3.9427842,4.145371 4.5197023,4.0477802 L 4.6254464,4.0298927 4.4571836,4.3223069 C 3.4332707,6.1017061 3.2180432,8.3476022 3.878868,10.357023 c 0.1458466,0.443487 0.4554716,1.132155 0.6542959,1.455285 0.054471,0.08853 0.087814,0.159599 0.074096,0.157937 -0.013718,-0.0017 -0.1446898,-0.02465 -0.2910477,-0.05108 z M 5.0000001,3 C 2.2,3 0,5.2 0,8 c 0,2.8 2.2,5 5.0000001,5 0.6,0 1.1,-0.1 1.6,-0.3 C 5.3000001,11.6 4.5,9.7999998 4.5,8 4.5,6.2 5.3000001,4.5 6.6000001,3.3 c -0.5,-0.2 -1,-0.3 -1.6,-0.3 z M 4.65,4.02 C 3.92,5.17 3.51,6.54 3.51,8 c 0,1.4599998 0.42,2.83 1.14,3.98 C 2.61,11.8 1.01,10.08 1.01,8 1.01,5.92 2.61,4.2 4.65,4.02 Z M 8,4 C 6.8,4.9 6,6.4 6,8 6,9.6 6.8,11.1 8,12 9.2,11.1 10,9.7 10,8 10,6.3 9.2,4.9 8,4 Z m 3,-1 c 2.8,0 5,2.2 5,5 0,2.8 -2.2,5 -5,5 C 10.4,13 9.9,12.9 9.4,12.7 10.7,11.6 11.5,9.8 11.5,8 11.5,6.2 10.7,4.5 9.4,3.3 9.9,3.1 10.4,3 11,3 Z m 0.35,1.02 c 0.73,1.15 1.14,2.52 1.14,3.98 0,1.46 -0.42,2.83 -1.14,3.98 2.04,-0.18 3.64,-1.9 3.64,-3.98 0,-2.08 -1.6,-3.8 -3.64,-3.98 z\",\n    style: {\n      strokeWidth: 0.234,\n      strokeMiterlimit: 4,\n      strokeDasharray: \"none\",\n      strokeOpacity: 1\n    }\n  })));\n}\nvar ReactComponent5 = SvgUnion;\n\n// src/assets/sets/intersection.svg\nimport {\n  createElement as createElement6\n} from \"react\";\nfunction SvgIntersection(props) {\n  return /* @__PURE__ */ createElement6(\"svg\", __spreadValues({\n    width: 18,\n    height: 12,\n    viewBox: \"0 0 16 10\"\n  }, props), /* @__PURE__ */ createElement6(\"g\", {\n    transform: \"translate(0,-3)\"\n  }, /* @__PURE__ */ createElement6(\"path\", {\n    d: \"M 5.0000001,3 C 2.2,3 0,5.2 0,8 c 0,2.8 2.2,5 5.0000001,5 0.6,0 1.1,-0.1 1.6,-0.3 C 5.3000001,11.6 4.5,9.7999998 4.5,8 4.5,6.2 5.3000001,4.5 6.6000001,3.3 c -0.5,-0.2 -1,-0.3 -1.6,-0.3 z M 4.65,4.02 C 3.92,5.17 3.51,6.54 3.51,8 c 0,1.4599998 0.42,2.83 1.14,3.98 C 2.61,11.8 1.01,10.08 1.01,8 1.01,5.92 2.61,4.2 4.65,4.02 Z M 8,4 C 6.8,4.9 6,6.4 6,8 6,9.6 6.8,11.1 8,12 9.2,11.1 10,9.7 10,8 10,6.3 9.2,4.9 8,4 Z m 3,-1 c 2.8,0 5,2.2 5,5 0,2.8 -2.2,5 -5,5 C 10.4,13 9.9,12.9 9.4,12.7 10.7,11.6 11.5,9.8 11.5,8 11.5,6.2 10.7,4.5 9.4,3.3 9.9,3.1 10.4,3 11,3 Z m 0.35,1.02 c 0.73,1.15 1.14,2.52 1.14,3.98 0,1.46 -0.42,2.83 -1.14,3.98 2.04,-0.18 3.64,-1.9 3.64,-3.98 0,-2.08 -1.6,-3.8 -3.64,-3.98 z\",\n    style: {\n      strokeWidth: 0.234,\n      strokeMiterlimit: 4,\n      strokeDasharray: \"none\",\n      strokeOpacity: 1\n    }\n  })));\n}\nvar ReactComponent6 = SvgIntersection;\n\n// src/assets/sets/complement.svg\nimport {\n  createElement as createElement7\n} from \"react\";\nfunction SvgComplement(props) {\n  return /* @__PURE__ */ createElement7(\"svg\", __spreadValues({\n    id: \"svg14\",\n    viewBox: \"0 0 25.3804963846 16\",\n    height: 16,\n    width: 25.3804963846\n  }, props), /* @__PURE__ */ createElement7(\"defs\", null, /* @__PURE__ */ createElement7(\"mask\", {\n    id: \"union-mask\",\n    x: 0,\n    y: 0,\n    width: 25.3804963846,\n    height: 16\n  }, /* @__PURE__ */ createElement7(\"rect\", {\n    x: \"5%\",\n    width: \"90%\",\n    height: \"100%\",\n    fill: \"white\"\n  }), /* @__PURE__ */ createElement7(\"g\", {\n    transform: \"translate(4.69,0)\"\n  }, /* @__PURE__ */ createElement7(\"path\", {\n    d: \"m 11.467471,11.811278 c 0.198237,-0.322177 0.508,-1.011333 0.653661,-1.454255 0.659343,-2.0049141 0.44323,-4.2620847 -0.577734,-6.0340822 l -0.168844,-0.2930481 0.105744,0.017887 c 0.759902,0.1285441 1.368762,0.3699553 1.856675,0.7361658 1.988296,1.4923476 2.192477,4.3353549 0.434717,6.0529895 -0.641216,0.626581 -1.299647,0.94683 -2.294136,1.115833 l -0.108488,0.01844 z M 4.3162122,11.919169 C 1.9278944,11.487872 0.46692382,9.0323123 1.234873,6.7401372 1.5621727,5.763213 2.2610593,4.9489746 3.1840041,4.4693005 3.5978035,4.2542401 3.9427842,4.145371 4.5197023,4.0477802 L 4.6254464,4.0298927 4.4571836,4.3223069 C 3.4332707,6.1017061 3.2180432,8.3476022 3.878868,10.357023 c 0.1458466,0.443487 0.4554716,1.132155 0.6542959,1.455285 0.054471,0.08853 0.087814,0.159599 0.074096,0.157937 -0.013718,-0.0017 -0.1446898,-0.02465 -0.2910477,-0.05108 z M 5.0000001,3 C 2.2,3 0,5.2 0,8 c 0,2.8 2.2,5 5.0000001,5 0.6,0 1.1,-0.1 1.6,-0.3 C 5.3000001,11.6 4.5,9.7999998 4.5,8 4.5,6.2 5.3000001,4.5 6.6000001,3.3 c -0.5,-0.2 -1,-0.3 -1.6,-0.3 z M 4.65,4.02 C 3.92,5.17 3.51,6.54 3.51,8 c 0,1.4599998 0.42,2.83 1.14,3.98 C 2.61,11.8 1.01,10.08 1.01,8 1.01,5.92 2.61,4.2 4.65,4.02 Z M 8,4 C 6.8,4.9 6,6.4 6,8 6,9.6 6.8,11.1 8,12 9.2,11.1 10,9.7 10,8 10,6.3 9.2,4.9 8,4 Z m 3,-1 c 2.8,0 5,2.2 5,5 0,2.8 -2.2,5 -5,5 C 10.4,13 9.9,12.9 9.4,12.7 10.7,11.6 11.5,9.8 11.5,8 11.5,6.2 10.7,4.5 9.4,3.3 9.9,3.1 10.4,3 11,3 Z m 0.35,1.02 c 0.73,1.15 1.14,2.52 1.14,3.98 0,1.46 -0.42,2.83 -1.14,3.98 2.04,-0.18 3.64,-1.9 3.64,-3.98 0,-2.08 -1.6,-3.8 -3.64,-3.98 z\",\n    style: {\n      strokeWidth: 0.234,\n      strokeMiterlimit: 4,\n      strokeDasharray: \"none\",\n      strokeOpacity: 1\n    },\n    fill: \"black\"\n  })))), /* @__PURE__ */ createElement7(\"g\", null, /* @__PURE__ */ createElement7(\"rect\", {\n    x: 0,\n    y: 0,\n    width: 25.3804963846,\n    height: 16,\n    mask: \"url(#union-mask)\"\n  })));\n}\nvar ReactComponent7 = SvgComplement;\n\n// src/components/sets/SetsManagerButtons.js\nfunction PlusButton(props) {\n  const {\n    datatype,\n    onError,\n    onImportTree,\n    onCreateLevelZeroNode,\n    importable,\n    editable\n  } = props;\n  const onImport = useCallback11((importHandler, mimeType) => () => {\n    const uploadInputNode = document.createElement(\"input\");\n    uploadInputNode.setAttribute(\"type\", \"file\");\n    uploadInputNode.setAttribute(\"accept\", mimeType);\n    document.body.appendChild(uploadInputNode);\n    uploadInputNode.click();\n    uploadInputNode.addEventListener(\"change\", (event) => {\n      if (!(window.File && window.FileReader && window.FileList && window.Blob)) {\n        onError(\"Local file reading APIs are not fully supported in this browser.\");\n        return;\n      }\n      const { files: files2 } = event.target;\n      if (!files2 || files2.length !== 1) {\n        onError(\"Incorrect number of files selected.\");\n        return;\n      }\n      const reader = new FileReader();\n      reader.addEventListener(\"load\", () => {\n        const { result } = reader;\n        try {\n          const treeToImport = importHandler(result, datatype);\n          onError(false);\n          onImportTree(treeToImport);\n        } catch (e) {\n          onError(e.message);\n        }\n      }, false);\n      reader.readAsText(files2[0]);\n    });\n    uploadInputNode.remove();\n  }, [datatype, onError, onImportTree]);\n  const menuConfig = [\n    ...editable ? [\n      {\n        title: \"Create hierarchy\",\n        handler: onCreateLevelZeroNode,\n        handlerKey: \"n\"\n      }\n    ] : [],\n    ...importable ? [\n      {\n        title: \"Import hierarchy\",\n        subtitle: \"(from CSV file)\",\n        handler: onImport(handleImportTabular, MIME_TYPE_TABULAR),\n        handlerKey: \"c\"\n      },\n      {\n        title: \"Import hierarchy\",\n        subtitle: \"(from JSON file)\",\n        handler: onImport(handleImportJSON, MIME_TYPE_JSON),\n        handlerKey: \"j\"\n      }\n    ] : []\n  ];\n  return menuConfig.length > 0 ? /* @__PURE__ */ React49.createElement(PopoverMenu, {\n    menuConfig\n  }, /* @__PURE__ */ React49.createElement(\"button\", {\n    className: \"plus-button\",\n    type: \"submit\"\n  }, \"+\")) : null;\n}\nfunction SetOperationButtons(props) {\n  const {\n    onUnion,\n    onIntersection,\n    onComplement,\n    operatable,\n    hasCheckedSetsToUnion,\n    hasCheckedSetsToIntersect,\n    hasCheckedSetsToComplement\n  } = props;\n  return /* @__PURE__ */ React49.createElement(React49.Fragment, null, operatable && /* @__PURE__ */ React49.createElement(React49.Fragment, null, /* @__PURE__ */ React49.createElement(\"button\", {\n    onClick: onUnion,\n    title: \"New set from union of checked sets\",\n    type: \"submit\",\n    disabled: !hasCheckedSetsToUnion\n  }, /* @__PURE__ */ React49.createElement(ReactComponent5, null)), /* @__PURE__ */ React49.createElement(\"button\", {\n    onClick: onIntersection,\n    title: \"New set from intersection of checked sets\",\n    type: \"submit\",\n    disabled: !hasCheckedSetsToIntersect\n  }, /* @__PURE__ */ React49.createElement(ReactComponent6, null)), /* @__PURE__ */ React49.createElement(\"button\", {\n    onClick: onComplement,\n    title: \"New set from complement of checked sets\",\n    type: \"submit\",\n    disabled: !hasCheckedSetsToComplement\n  }, /* @__PURE__ */ React49.createElement(ReactComponent7, null))));\n}\n\n// src/components/sets/SetsManager.js\nfunction processNode(node, prevPath, setColor, theme) {\n  var _a2;\n  const nodePath = [...prevPath, node.name];\n  return __spreadProps(__spreadValues(__spreadValues({}, node), node.children ? {\n    children: node.children.map((c) => processNode(c, nodePath, setColor))\n  } : {}), {\n    color: ((_a2 = setColor == null ? void 0 : setColor.find((d) => isEqual10(d.path, nodePath))) == null ? void 0 : _a2.color) || getDefaultColor(theme)\n  });\n}\nfunction processSets(sets, setColor, theme) {\n  return __spreadProps(__spreadValues({}, sets), {\n    tree: sets ? sets.tree.map((lzn) => processNode(lzn, [], setColor, theme)) : []\n  });\n}\nfunction getAllKeys(node, path = []) {\n  if (!node) {\n    return null;\n  }\n  const newPath = [...path, node.name];\n  if (node.children) {\n    return [pathToKey(newPath), ...node.children.flatMap((v) => getAllKeys(v, newPath))];\n  }\n  return pathToKey(newPath);\n}\nfunction SetsManager(props) {\n  const {\n    theme,\n    sets,\n    additionalSets,\n    setColor,\n    levelSelection: checkedLevel,\n    setSelection,\n    setExpansion,\n    hasColorEncoding,\n    datatype,\n    draggable = true,\n    checkable = true,\n    editable = true,\n    expandable = true,\n    operatable = true,\n    exportable = true,\n    importable = true,\n    onError,\n    onCheckNode,\n    onExpandNode,\n    onDropNode,\n    onCheckLevel,\n    onNodeSetColor,\n    onNodeSetName,\n    onNodeCheckNewName,\n    onNodeRemove,\n    onNodeView,\n    onImportTree,\n    onCreateLevelZeroNode,\n    onExportLevelZeroNodeJSON,\n    onExportLevelZeroNodeTabular,\n    onExportSetJSON,\n    onUnion,\n    onIntersection,\n    onComplement,\n    hasCheckedSetsToUnion,\n    hasCheckedSetsToIntersect,\n    hasCheckedSetsToComplement\n  } = props;\n  const isChecking = true;\n  const autoExpandParent = true;\n  const [isDragging, setIsDragging] = useState14(false);\n  const [isEditingNodeName, setIsEditingNodeName] = useState14(null);\n  const processedSets = useMemo9(() => processSets(sets, setColor, theme), [sets, setColor, theme]);\n  const processedAdditionalSets = useMemo9(() => processSets(additionalSets, setColor, theme), [additionalSets, setColor, theme]);\n  const additionalSetKeys = processedAdditionalSets ? processedAdditionalSets.tree.flatMap((v) => getAllKeys(v, [])) : [];\n  const allSetSelectionKeys = (setSelection || []).map(pathToKey);\n  const allSetExpansionKeys = (setExpansion || []).map(pathToKey);\n  const setSelectionKeys = allSetSelectionKeys.filter((k) => !additionalSetKeys.includes(k));\n  const setExpansionKeys = allSetExpansionKeys.filter((k) => !additionalSetKeys.includes(k));\n  const additionalSetSelectionKeys = allSetSelectionKeys.filter((k) => additionalSetKeys.includes(k));\n  const additionalSetExpansionKeys = allSetExpansionKeys.filter((k) => additionalSetKeys.includes(k));\n  function renderTreeNodes(nodes, readOnly, currPath) {\n    if (!nodes) {\n      return null;\n    }\n    return nodes.map((node) => {\n      const newPath = [...currPath, node.name];\n      return /* @__PURE__ */ React50.createElement(TreeNode, __spreadProps(__spreadValues({\n        theme,\n        key: pathToKey(newPath)\n      }, nodeToRenderProps(node, newPath, setColor)), {\n        isEditing: isEqual10(isEditingNodeName, newPath),\n        datatype,\n        draggable: draggable && !readOnly,\n        editable: editable && !readOnly,\n        checkable,\n        expandable,\n        exportable,\n        hasColorEncoding,\n        isChecking,\n        checkedLevelPath: checkedLevel ? checkedLevel.levelZeroPath : null,\n        checkedLevelIndex: checkedLevel ? checkedLevel.levelIndex : null,\n        onCheckNode,\n        onCheckLevel,\n        onNodeView,\n        onNodeSetColor,\n        onNodeSetName: (targetPath, name2) => {\n          onNodeSetName(targetPath, name2);\n          setIsEditingNodeName(null);\n        },\n        onNodeCheckNewName,\n        onNodeSetIsEditing: setIsEditingNodeName,\n        onNodeRemove,\n        onExportLevelZeroNodeJSON,\n        onExportLevelZeroNodeTabular,\n        onExportSetJSON,\n        disableTooltip: isDragging,\n        onDragStart: () => setIsDragging(true),\n        onDragEnd: () => setIsDragging(false)\n      }), renderTreeNodes(node.children, readOnly, newPath, theme));\n    });\n  }\n  return /* @__PURE__ */ React50.createElement(\"div\", {\n    className: \"sets-manager\"\n  }, /* @__PURE__ */ React50.createElement(\"div\", {\n    className: \"sets-manager-tree\"\n  }, /* @__PURE__ */ React50.createElement(Tree_default, {\n    draggable: false,\n    checkable,\n    checkedKeys: setSelectionKeys,\n    expandedKeys: setExpansionKeys,\n    autoExpandParent,\n    onCheck: (checkedKeys, info) => onCheckNode(info.node.props.nodeKey, info.checked),\n    onExpand: (expandedKeys, info) => onExpandNode(expandedKeys, info.node.props.nodeKey, info.expanded)\n  }, renderTreeNodes(processedSets.tree, true, [], theme)), /* @__PURE__ */ React50.createElement(Tree_default, {\n    draggable: true,\n    checkable,\n    checkedKeys: additionalSetSelectionKeys,\n    expandedKeys: additionalSetExpansionKeys,\n    autoExpandParent,\n    onCheck: (checkedKeys, info) => onCheckNode(info.node.props.nodeKey, info.checked),\n    onExpand: (expandedKeys, info) => onExpandNode(expandedKeys, info.node.props.nodeKey, info.expanded),\n    onDrop: (info) => {\n      const { eventKey: dropKey } = info.node.props;\n      const { eventKey: dragKey } = info.dragNode.props;\n      const { dropToGap, dropPosition } = info;\n      onDropNode(dropKey, dragKey, dropPosition, dropToGap);\n    }\n  }, renderTreeNodes(processedAdditionalSets.tree, false, [], theme)), /* @__PURE__ */ React50.createElement(PlusButton, {\n    datatype,\n    onError,\n    onImportTree,\n    onCreateLevelZeroNode,\n    importable,\n    editable\n  })), isChecking ? /* @__PURE__ */ React50.createElement(\"div\", {\n    className: \"set-operation-buttons\"\n  }, /* @__PURE__ */ React50.createElement(SetOperationButtons, {\n    onUnion,\n    onIntersection,\n    onComplement,\n    operatable,\n    hasCheckedSetsToUnion,\n    hasCheckedSetsToIntersect,\n    hasCheckedSetsToComplement\n  })) : null);\n}\n\n// src/components/sets/CellSetsManagerSubscriber.js\nvar CELL_SETS_DATA_TYPES = [\"cells\", \"cell-sets\"];\nfunction CellSetsManagerSubscriber(props) {\n  const {\n    coordinationScopes,\n    removeGridComponent,\n    theme,\n    title: title16 = \"Cell Sets\"\n  } = props;\n  const loaders = useLoaders();\n  const setWarning = useSetWarning();\n  const [{\n    dataset,\n    cellSetSelection,\n    cellSetColor,\n    additionalCellSets,\n    cellColorEncoding\n  }, {\n    setCellSetSelection,\n    setCellColorEncoding,\n    setCellSetColor,\n    setAdditionalCellSets\n  }] = useCoordination(COMPONENT_COORDINATION_TYPES.cellSets, coordinationScopes);\n  const [urls, addUrl, resetUrls] = useUrls();\n  const [\n    isReady,\n    setItemIsReady,\n    setItemIsNotReady,\n    resetReadyItems\n  ] = useReady(CELL_SETS_DATA_TYPES);\n  const [cellSetExpansion, setCellSetExpansion] = useState15([]);\n  useEffect16(() => {\n    resetUrls();\n    resetReadyItems();\n    setCellSetExpansion([]);\n  }, [loaders, dataset]);\n  const [cells] = useCellsData(loaders, dataset, setItemIsReady, addUrl, true);\n  const [cellSets] = useCellSetsData(loaders, dataset, setItemIsReady, addUrl, true, { setCellSetSelection, setCellSetColor }, { cellSetSelection, cellSetColor });\n  useEffect16(() => {\n    if (additionalCellSets) {\n      let upgradedCellSets;\n      try {\n        upgradedCellSets = tryUpgradeTreeToLatestSchema(additionalCellSets, SETS_DATATYPE_CELL);\n      } catch (e) {\n        setWarning(e.message);\n        return;\n      }\n      setAdditionalCellSets(upgradedCellSets);\n    }\n  }, [additionalCellSets, setAdditionalCellSets, setWarning]);\n  const allCellIds = useMemo10(() => cells ? Object.keys(cells) : [], [cells]);\n  function setCellSetColorEncoding() {\n    setCellColorEncoding(\"cellSetSelection\");\n  }\n  const mergedCellSets = useMemo10(() => mergeCellSets(cellSets, additionalCellSets), [cellSets, additionalCellSets]);\n  const checkedLevel = useMemo10(() => {\n    if (cellSetSelection && cellSetSelection.length > 0 && mergedCellSets && mergedCellSets.tree.length > 0) {\n      return treeToExpectedCheckedLevel(mergedCellSets, cellSetSelection);\n    }\n    return null;\n  }, [cellSetSelection, mergedCellSets]);\n  function onCheckLevel(levelZeroName, levelIndex) {\n    const lzn = mergedCellSets.tree.find((n) => n.name === levelZeroName);\n    if (lzn) {\n      const newCellSetSelection = nodeToLevelDescendantNamePaths(lzn, levelIndex, [], true);\n      setCellSetSelection(newCellSetSelection);\n      setCellSetColorEncoding();\n    }\n  }\n  function onCheckNode(targetKey, checked) {\n    const targetPath = Array.isArray(targetKey) ? targetKey : targetKey.split(PATH_SEP);\n    if (!targetKey) {\n      return;\n    }\n    if (checked) {\n      setCellSetSelection([...cellSetSelection, targetPath]);\n    } else {\n      setCellSetSelection(cellSetSelection.filter((d) => !isEqual11(d, targetPath)));\n    }\n    setCellSetColorEncoding();\n  }\n  function onExpandNode(expandedKeys, targetKey, expanded) {\n    if (expanded) {\n      setCellSetExpansion((prev) => [...prev, targetKey.split(PATH_SEP)]);\n    } else {\n      setCellSetExpansion((prev) => prev.filter((d) => !isEqual11(d, targetKey.split(PATH_SEP))));\n    }\n  }\n  function onDropNode(dropKey, dragKey, dropPosition, dropToGap) {\n    const dropPath = dropKey.split(PATH_SEP);\n    const dropNode = treeFindNodeByNamePath(additionalCellSets, dropPath);\n    if (!dropNode.children && !dropToGap) {\n      return;\n    }\n    const dropNodeLevel = dropPath.length - 1;\n    const dropNodeIsLevelZero = dropNodeLevel === 0;\n    const dragPath = dragKey.split(PATH_SEP);\n    const dragNode = treeFindNodeByNamePath(additionalCellSets, dragPath);\n    if (dropNodeIsLevelZero && dropToGap && !dragNode.children) {\n      return;\n    }\n    let dropParentNode;\n    let dropParentPath;\n    let dropNodeCurrIndex;\n    if (!dropNodeIsLevelZero) {\n      dropParentPath = dropPath.slice(0, -1);\n      dropParentNode = treeFindNodeByNamePath(additionalCellSets, dropParentPath);\n      dropNodeCurrIndex = dropParentNode.children.findIndex((c) => c.name === dropNode.name);\n    } else {\n      dropNodeCurrIndex = additionalCellSets.tree.findIndex((lzn) => lzn.name === dropNode.name);\n    }\n    let hasSiblingNameConflict;\n    const dragNodeName = dragNode.name;\n    if (!dropNodeIsLevelZero && dropToGap) {\n      hasSiblingNameConflict = dropParentNode.children.find((c) => c !== dragNode && c.name === dragNodeName);\n    } else if (!dropToGap) {\n      hasSiblingNameConflict = dropNode.children.find((c) => c !== dragNode && c.name === dragNodeName);\n    } else {\n      hasSiblingNameConflict = additionalCellSets.tree.find((lzn) => lzn !== dragNode && lzn.name === dragNodeName);\n    }\n    if (hasSiblingNameConflict) {\n      return;\n    }\n    const nextAdditionalCellSets = __spreadProps(__spreadValues({}, additionalCellSets), {\n      tree: additionalCellSets.tree.map((lzn) => filterNode(lzn, [], dragPath)).filter(Boolean)\n    });\n    if (!dropNodeIsLevelZero) {\n      dropNodeCurrIndex = dropParentNode.children.findIndex((c) => c.name === dropNode.name);\n    } else {\n      dropNodeCurrIndex = nextAdditionalCellSets.tree.findIndex((lzn) => lzn.name === dropNode.name);\n    }\n    let newDragPath = [];\n    if (!dropToGap || !dropNodeIsLevelZero) {\n      let addChildFunction;\n      let checkPathFunction;\n      const newPath = [];\n      if (!dropToGap) {\n        addChildFunction = (n) => nodeAppendChild(n, dragNode);\n        checkPathFunction = (path) => isEqual11(path, dropPath);\n      } else if (!dropNodeIsLevelZero) {\n        checkPathFunction = (path) => isEqual11(path, dropParentPath);\n        if (dropPosition === -1) {\n          addChildFunction = (n) => nodePrependChild(n, dragNode);\n        } else {\n          const insertIndex = dropNodeCurrIndex + (dropPosition > dropNodeCurrIndex ? 1 : 0);\n          addChildFunction = (n) => nodeInsertChild(n, dragNode, insertIndex);\n        }\n      }\n      nextAdditionalCellSets.tree = nextAdditionalCellSets.tree.map((node) => nodeTransform(node, (n, path) => checkPathFunction(path), (n) => {\n        const newNode = addChildFunction(n);\n        return newNode;\n      }, newPath));\n      setAdditionalCellSets(nextAdditionalCellSets);\n      newDragPath = [...newPath[0], dragNode.name];\n      setCellSetSelection([newDragPath]);\n    } else if (dropPosition === -1) {\n      nextAdditionalCellSets.tree.unshift(dragNode);\n      setAdditionalCellSets(nextAdditionalCellSets);\n      newDragPath = [dragNode.name];\n      setCellSetSelection([newDragPath]);\n    } else {\n      const insertIndex = dropNodeCurrIndex + (dropPosition > dropNodeCurrIndex ? 1 : 0);\n      const newLevelZero = Array.from(nextAdditionalCellSets.tree);\n      newLevelZero.splice(insertIndex, 0, dragNode);\n      nextAdditionalCellSets.tree = newLevelZero;\n      setAdditionalCellSets(nextAdditionalCellSets);\n      newDragPath = [dragNode.name];\n      setCellSetSelection([newDragPath]);\n    }\n    const oldColors = cellSetColor.filter((i) => isEqualOrPrefix(dragPath, i.path));\n    const newColors = oldColors.map((i) => __spreadProps(__spreadValues({}, i), {\n      path: !isEqual11(i.path, dragPath) ? newDragPath.concat(i.path.slice(dragPath.length)) : newDragPath\n    }));\n    const newCellSetColor = cellSetColor.filter((i) => !isEqualOrPrefix(dragPath, i.path));\n    newCellSetColor.push(...newColors);\n    setCellSetColor(newCellSetColor);\n  }\n  function onNodeSetColor(targetPath, color) {\n    const prevNodeColor = cellSetColor == null ? void 0 : cellSetColor.find((d) => isEqual11(d.path, targetPath));\n    if (!prevNodeColor) {\n      setCellSetColor([\n        ...cellSetColor || [],\n        {\n          path: targetPath,\n          color\n        }\n      ]);\n    } else {\n      setCellSetColor([\n        ...cellSetColor.filter((d) => !isEqual11(d.path, targetPath)),\n        {\n          path: targetPath,\n          color\n        }\n      ]);\n    }\n  }\n  function onNodeSetName(targetPath, name2) {\n    const nextNamePath = [...targetPath];\n    nextNamePath.pop();\n    nextNamePath.push(name2);\n    function renameNode(node, prevPath) {\n      if (isEqual11([...prevPath, node.name], targetPath)) {\n        return __spreadProps(__spreadValues({}, node), {\n          name: name2\n        });\n      }\n      if (!node.children) {\n        return node;\n      }\n      return __spreadProps(__spreadValues({}, node), {\n        children: node.children.map((c) => renameNode(c, [...prevPath, node.name]))\n      });\n    }\n    const nextAdditionalCellSets = __spreadProps(__spreadValues({}, additionalCellSets), {\n      tree: additionalCellSets.tree.map((lzn) => renameNode(lzn, []))\n    });\n    const nextCellSetColor = cellSetColor.map((d) => ({\n      path: tryRenamePath(targetPath, d.path, nextNamePath),\n      color: d.color\n    }));\n    const nextCellSetSelection = cellSetSelection.map((d) => tryRenamePath(targetPath, d, nextNamePath));\n    const nextCellSetExpansion = cellSetExpansion.map((d) => tryRenamePath(targetPath, d, nextNamePath));\n    setAdditionalCellSets(nextAdditionalCellSets);\n    setCellSetColor(nextCellSetColor);\n    setCellSetSelection(nextCellSetSelection);\n    setCellSetExpansion(nextCellSetExpansion);\n  }\n  function onNodeCheckNewName(targetPath, name2) {\n    const nextNamePath = [...targetPath];\n    nextNamePath.pop();\n    nextNamePath.push(name2);\n    const hasConflicts = !isEqual11(targetPath, nextNamePath) && treeFindNodeByNamePath(additionalCellSets, nextNamePath);\n    return hasConflicts;\n  }\n  function onNodeRemove(targetPath) {\n    const nextAdditionalCellSets = __spreadProps(__spreadValues({}, additionalCellSets), {\n      tree: additionalCellSets.tree.map((lzn) => filterNode(lzn, [], targetPath)).filter(Boolean)\n    });\n    const nextCellSetColor = cellSetColor.filter((d) => !isEqualOrPrefix(targetPath, d.path));\n    const nextCellSetSelection = cellSetSelection.filter((d) => !isEqualOrPrefix(targetPath, d));\n    const nextCellSetExpansion = cellSetExpansion.filter((d) => !isEqualOrPrefix(targetPath, d));\n    setAdditionalCellSets(nextAdditionalCellSets);\n    setCellSetColor(nextCellSetColor);\n    setCellSetSelection(nextCellSetSelection);\n    setCellSetExpansion(nextCellSetExpansion);\n  }\n  function onNodeView(targetPath) {\n    const setsToView = [];\n    function viewNode(node, nodePath) {\n      if (cellSetExpansion.find((expandedPath) => isEqual11(nodePath, expandedPath))) {\n        if (node.children) {\n          node.children.forEach((c) => {\n            viewNode(c, [...nodePath, c.name]);\n          });\n        } else {\n          setsToView.push(nodePath);\n        }\n      } else {\n        setsToView.push(nodePath);\n      }\n    }\n    const targetNode = treeFindNodeByNamePath(mergedCellSets, targetPath);\n    viewNode(targetNode, targetPath);\n    setCellSetSelection(setsToView);\n    setCellSetColorEncoding();\n  }\n  function onCreateLevelZeroNode() {\n    const nextName = getNextNumberedNodeName(additionalCellSets == null ? void 0 : additionalCellSets.tree, \"My hierarchy \");\n    setAdditionalCellSets(__spreadProps(__spreadValues({}, additionalCellSets || treeInitialize(SETS_DATATYPE_CELL)), {\n      tree: [\n        ...additionalCellSets ? additionalCellSets.tree : [],\n        {\n          name: nextName,\n          children: []\n        }\n      ]\n    }));\n  }\n  function onUnion() {\n    const newSet = treeToUnion(mergedCellSets, cellSetSelection);\n    setCellSelection(newSet, additionalCellSets, cellSetColor, setCellSetSelection, setAdditionalCellSets, setCellSetColor, setCellColorEncoding, \"Union \");\n  }\n  function onIntersection() {\n    const newSet = treeToIntersection(mergedCellSets, cellSetSelection);\n    setCellSelection(newSet, additionalCellSets, cellSetColor, setCellSetSelection, setAdditionalCellSets, setCellSetColor, setCellColorEncoding, \"Intersection \");\n  }\n  function onComplement() {\n    const newSet = treeToComplement(mergedCellSets, cellSetSelection, allCellIds);\n    setCellSelection(newSet, additionalCellSets, cellSetColor, setCellSetSelection, setAdditionalCellSets, setCellSetColor, setCellColorEncoding, \"Complement \");\n  }\n  function onImportTree(treeToImport) {\n    const hasConflict = treesConflict(mergedCellSets, treeToImport);\n    if (!hasConflict) {\n      setAdditionalCellSets(__spreadProps(__spreadValues({}, additionalCellSets || treeInitialize(SETS_DATATYPE_CELL)), {\n        tree: [\n          ...additionalCellSets ? additionalCellSets.tree : [],\n          ...treeToImport.tree\n        ]\n      }));\n      const importAutoSetColors = initializeCellSetColor(treeToImport, cellSetColor);\n      setCellSetColor([\n        ...cellSetColor,\n        ...importAutoSetColors\n      ]);\n    }\n  }\n  function onExportLevelZeroNodeJSON(nodePath) {\n    const {\n      treeToExport,\n      nodeName\n    } = treeExportLevelZeroNode(mergedCellSets, nodePath, SETS_DATATYPE_CELL, cellSetColor, theme);\n    downloadForUser(handleExportJSON(treeToExport), `${nodeName}_${package_default.name}-${SETS_DATATYPE_CELL}-hierarchy.${FILE_EXTENSION_JSON}`);\n  }\n  function onExportLevelZeroNodeTabular(nodePath) {\n    const {\n      treeToExport,\n      nodeName\n    } = treeExportLevelZeroNode(mergedCellSets, nodePath, SETS_DATATYPE_CELL, cellSetColor, theme);\n    downloadForUser(handleExportTabular(treeToExport), `${nodeName}_${package_default.name}-${SETS_DATATYPE_CELL}-hierarchy.${FILE_EXTENSION_TABULAR}`);\n  }\n  function onExportSetJSON(nodePath) {\n    const { setToExport, nodeName } = treeExportSet(mergedCellSets, nodePath);\n    downloadForUser(handleExportJSON(setToExport), `${nodeName}_${package_default.name}-${SETS_DATATYPE_CELL}-set.${FILE_EXTENSION_JSON}`, FILE_EXTENSION_JSON);\n  }\n  return /* @__PURE__ */ React51.createElement(TitleInfo, {\n    title: title16,\n    isScroll: true,\n    removeGridComponent,\n    urls,\n    theme,\n    isReady\n  }, /* @__PURE__ */ React51.createElement(SetsManager, {\n    setColor: cellSetColor,\n    sets: cellSets,\n    additionalSets: additionalCellSets,\n    levelSelection: checkedLevel,\n    setSelection: cellSetSelection,\n    setExpansion: cellSetExpansion,\n    hasColorEncoding: cellColorEncoding === \"cellSetSelection\",\n    draggable: true,\n    datatype: SETS_DATATYPE_CELL,\n    onError: setWarning,\n    onCheckNode,\n    onExpandNode,\n    onDropNode,\n    onCheckLevel,\n    onNodeSetColor,\n    onNodeSetName,\n    onNodeCheckNewName,\n    onNodeRemove,\n    onNodeView,\n    onImportTree,\n    onCreateLevelZeroNode,\n    onExportLevelZeroNodeJSON,\n    onExportLevelZeroNodeTabular,\n    onExportSetJSON,\n    onUnion,\n    onIntersection,\n    onComplement,\n    hasCheckedSetsToUnion: (cellSetSelection == null ? void 0 : cellSetSelection.length) > 1,\n    hasCheckedSetsToIntersect: (cellSetSelection == null ? void 0 : cellSetSelection.length) > 1,\n    hasCheckedSetsToComplement: (cellSetSelection == null ? void 0 : cellSetSelection.length) > 0,\n    theme\n  }));\n}\n\n// src/components/layer-controller/LayerControllerSubscriber.js\nimport React62, {\n  useEffect as useEffect19,\n  useCallback as useCallback13,\n  useRef as useRef9,\n  forwardRef as forwardRef4\n} from \"react\";\nimport Grid8 from \"@material-ui/core/Grid\";\n\n// src/components/layer-controller/RasterChannelController.js\nimport React55, { useCallback as useCallback12, useState as useState17, useEffect as useEffect17 } from \"react\";\nimport Grid2 from \"@material-ui/core/Grid\";\nimport Slider5 from \"@material-ui/core/Slider\";\nimport debounce5 from \"lodash/debounce\";\nimport isEqual12 from \"lodash/isEqual\";\n\n// src/components/layer-controller/ChannelOptions.js\nimport React53, { useState as useState16 } from \"react\";\nimport { makeStyles as makeStyles7 } from \"@material-ui/core/styles\";\nimport MoreVertIcon from \"@material-ui/icons/MoreVert\";\nimport MenuItem2 from \"@material-ui/core/MenuItem\";\n\n// src/components/layer-controller/ColorPalette.js\nimport React52 from \"react\";\nimport IconButton4 from \"@material-ui/core/IconButton\";\nimport LensIcon from \"@material-ui/icons/Lens\";\nimport { makeStyles as makeStyles6 } from \"@material-ui/core/styles\";\nvar useStyles3 = makeStyles6((theme) => ({\n  container: {\n    width: \"70px\",\n    height: \"40px\",\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n    flexWrap: \"wrap\"\n  },\n  button: {\n    padding: \"3px\",\n    width: \"16px\"\n  },\n  icon: {\n    width: \"17px\",\n    height: \"17px\",\n    stroke: theme.palette.action.selected,\n    \"stroke-width\": \"1px\"\n  }\n}));\nvar ColorPalette = ({ handleChange }) => {\n  const classes = useStyles3();\n  return /* @__PURE__ */ React52.createElement(\"div\", {\n    className: classes.container,\n    \"aria-label\": \"color-swatch\"\n  }, VIEWER_PALETTE.map((color) => /* @__PURE__ */ React52.createElement(IconButton4, {\n    className: classes.button,\n    key: color,\n    onClick: () => handleChange(color)\n  }, /* @__PURE__ */ React52.createElement(LensIcon, {\n    fontSize: \"small\",\n    style: { color: `rgb(${color})` },\n    className: classes.icon\n  }))));\n};\nvar ColorPalette_default = ColorPalette;\n\n// src/components/layer-controller/ChannelOptions.js\nvar useStyles4 = makeStyles7(() => ({\n  menuButton: {\n    backgroundColor: \"transparent\"\n  },\n  colors: {\n    \"&:hover\": {\n      backgroundColor: \"transparent\"\n    },\n    paddingLeft: \"2px\",\n    paddingRight: \"2px\"\n  }\n}));\nfunction ChannelOptions({ handlePropertyChange, handleChannelRemove, handleIQRUpdate }) {\n  const [open, setOpen] = useState16(false);\n  const classes = useStyles4();\n  const handleColorSelect = (color) => {\n    handlePropertyChange(\"color\", color);\n  };\n  const handleRemove = () => {\n    setOpen(false);\n    handleChannelRemove();\n  };\n  return /* @__PURE__ */ React53.createElement(PopperMenu, {\n    open,\n    setOpen,\n    buttonIcon: /* @__PURE__ */ React53.createElement(MoreVertIcon, {\n      fontSize: \"small\"\n    }),\n    buttonClassName: classes.menuButton\n  }, /* @__PURE__ */ React53.createElement(MenuItem2, {\n    dense: true,\n    disableGutters: true,\n    onClick: handleRemove\n  }, /* @__PURE__ */ React53.createElement(MuiSpan, null, \"Remove\")), /* @__PURE__ */ React53.createElement(MenuItem2, {\n    dense: true,\n    disableGutters: true,\n    onClick: handleIQRUpdate\n  }, /* @__PURE__ */ React53.createElement(MuiSpan, null, \"Use IQR\")), /* @__PURE__ */ React53.createElement(MenuItem2, {\n    dense: true,\n    disableGutters: true,\n    className: classes.colors\n  }, /* @__PURE__ */ React53.createElement(ColorPalette_default, {\n    handleChange: handleColorSelect\n  })));\n}\nvar ChannelOptions_default = ChannelOptions;\n\n// src/components/layer-controller/constants.js\nfunction getDomains() {\n  const domains = {};\n  const needMin = [\"Int8\", \"Int16\", \"Int32\"];\n  Object.keys(DTYPE_VALUES).forEach((dtype) => {\n    const { max: max2 } = DTYPE_VALUES[dtype];\n    const min = needMin.includes(dtype) ? -(max2 + 1) : 0;\n    domains[dtype] = [min, max2];\n  });\n  return domains;\n}\nvar DOMAINS = getDomains();\n\n// src/components/layer-controller/shared-channel-controls.js\nimport React54 from \"react\";\nimport Checkbox3 from \"@material-ui/core/Checkbox\";\nimport Select2 from \"@material-ui/core/Select\";\n\n// src/components/layer-controller/styles.js\nimport { makeStyles as makeStyles8, withStyles } from \"@material-ui/core/styles\";\nimport ExpansionPanelSummary from \"@material-ui/core/ExpansionPanelSummary\";\nimport ExpansionPanelDetails from \"@material-ui/core/ExpansionPanelDetails\";\nimport InputLabel from \"@material-ui/core/InputLabel\";\nimport Slider4 from \"@material-ui/core/Slider\";\nimport Grid from \"@material-ui/core/Grid\";\nvar useSelectStyles = makeStyles8(() => ({\n  selectRoot: {\n    padding: 0,\n    height: \"auto\",\n    margin: \"4px 0\"\n  }\n}));\nvar useOptionStyles = withStyles((theme) => ({\n  paper: {\n    backgroundColor: theme.palette.background.paper\n  },\n  span: {\n    width: \"70px\",\n    textAlign: \"center\",\n    paddingLeft: \"2px\",\n    paddingRight: \"2px\"\n  },\n  colors: {\n    \"&:hover\": {\n      backgroundColor: \"transparent\"\n    },\n    paddingLeft: \"2px\",\n    paddingRight: \"2px\"\n  },\n  popper: {\n    zIndex: 4\n  }\n}));\nvar sharedControllerStyles = {\n  width: \"100%\",\n  flexDirection: \"column\"\n};\nvar useControllerSectionStyles = makeStyles8(() => ({\n  root: __spreadProps(__spreadValues({}, sharedControllerStyles), {\n    padding: \"0px 8px\"\n  })\n}));\nvar StyledExpansionPanelDetails = withStyles(() => ({\n  root: __spreadProps(__spreadValues({}, sharedControllerStyles), {\n    padding: \"8px 8px 24px 8px\"\n  })\n}))(ExpansionPanelDetails);\nvar StyledExpansionPanelSummary = withStyles((theme) => ({\n  root: {\n    padding: \"0px 8px\"\n  },\n  content: {\n    margin: \"4px 0px\",\n    minWidth: \"0px\"\n  },\n  expanded: {\n    marginBottom: theme.spacing(-3),\n    top: theme.spacing(-1)\n  },\n  expandIcon: {\n    \"&$expanded\": {\n      top: theme.spacing(-1.3)\n    }\n  }\n}))(ExpansionPanelSummary);\nvar StyledInputLabel = withStyles(() => ({\n  root: {\n    fontSize: \"14px\"\n  }\n}))(InputLabel);\nvar OverflowEllipsisGrid = withStyles(() => ({\n  item: {\n    width: \"100%\",\n    overflow: \"hidden\",\n    whiteSpace: \"nowrap\",\n    textOverflow: \"ellipsis\"\n  }\n}))(Grid);\nvar StyledSelectionSlider = withStyles(() => ({\n  root: {\n    marginTop: \"7px\"\n  },\n  markActive: {\n    backgroundColor: \"rgba(128, 128, 128, 0.7)\"\n  }\n}))(Slider4);\n\n// src/components/layer-controller/shared-channel-controls.js\nfunction ChannelSelectionDropdown({\n  handleChange,\n  disabled,\n  channelOptions,\n  selectionIndex\n}) {\n  const classes = useSelectStyles();\n  return /* @__PURE__ */ React54.createElement(Select2, {\n    classes: { root: classes.selectRoot },\n    native: true,\n    value: selectionIndex,\n    onChange: (e) => handleChange(Number(e.target.value))\n  }, channelOptions.map((opt, i) => /* @__PURE__ */ React54.createElement(\"option\", {\n    disabled,\n    key: opt,\n    value: i\n  }, opt)));\n}\nfunction ChannelVisibilityCheckbox({\n  color,\n  checked,\n  toggle,\n  disabled\n}) {\n  return /* @__PURE__ */ React54.createElement(Checkbox3, {\n    onChange: toggle,\n    checked,\n    disabled,\n    style: { color, \"&$checked\": { color } }\n  });\n}\n\n// src/components/layer-controller/RasterChannelController.js\nvar toRgbUIString = (on, arr, theme) => {\n  const color = on || theme === \"light\" && arr.every((i) => i === 255) ? [220, 220, 220] : arr;\n  return `rgb(${color})`;\n};\nfunction abbreviateNumber2(value) {\n  const maxLength = 5;\n  let maxNaiveDigits = maxLength;\n  if (!Number.isInteger(value)) {\n    --maxNaiveDigits;\n  }\n  if (value < 1) {\n    --maxNaiveDigits;\n  }\n  const naive = Intl.NumberFormat(\"en-US\", {\n    maximumSignificantDigits: maxNaiveDigits,\n    useGrouping: false\n  }).format(value);\n  if (naive.length <= maxLength)\n    return naive;\n  return value.toExponential(0);\n}\nfunction ChannelSlider({\n  color,\n  slider = [0, 0],\n  handleChange,\n  domain = [0, 0],\n  dtype,\n  disabled\n}) {\n  const [min, max2] = domain;\n  const handleChangeDebounced = useCallback12(debounce5(handleChange, 3, { trailing: true }), [handleChange]);\n  const step = max2 - min < 500 && dtype === \"Float32\" ? (max2 - min) / 500 : 1;\n  return /* @__PURE__ */ React55.createElement(Slider5, {\n    value: slider,\n    valueLabelFormat: abbreviateNumber2,\n    onChange: (e, v) => handleChangeDebounced(v),\n    valueLabelDisplay: \"auto\",\n    getAriaLabel: () => `${color}-${slider}`,\n    min,\n    max: max2,\n    step,\n    orientation: \"horizontal\",\n    style: { color, marginTop: \"7px\" },\n    disabled\n  });\n}\nfunction RasterChannelController({\n  visibility = false,\n  slider,\n  color,\n  channels: channels2,\n  channelId,\n  domainType: newDomainType,\n  dimName,\n  theme,\n  loader,\n  colormapOn,\n  channelOptions,\n  handlePropertyChange,\n  handleChannelRemove,\n  handleIQRUpdate,\n  selectionIndex,\n  isLoading,\n  use3d: newUse3d\n}) {\n  const { dtype } = getSourceFromLoader(loader);\n  const [domain, setDomain] = useState17(null);\n  const [domainType, setDomainType] = useState17(null);\n  const [use3d, setUse3d] = useState17(null);\n  const [selection, setSelection] = useState17([\n    __spreadValues({}, channels2[channelId].selection)\n  ]);\n  const rgbColor = toRgbUIString(colormapOn, color, theme);\n  useEffect17(() => {\n    let mounted = true;\n    if (dtype && loader && channels2) {\n      const selections = [__spreadValues({}, channels2[channelId].selection)];\n      let domains;\n      const hasDomainChanged = newDomainType !== domainType;\n      const has3dChanged = use3d !== newUse3d;\n      const hasSelectionChanged = !isEqual12(selections, selection);\n      if (hasDomainChanged || hasSelectionChanged || has3dChanged) {\n        if (newDomainType === \"Full\") {\n          domains = [DOMAINS[dtype]];\n          const [newDomain] = domains;\n          if (mounted) {\n            setDomain(newDomain);\n            setDomainType(newDomainType);\n            if (hasSelectionChanged) {\n              setSelection(selections);\n            }\n            if (has3dChanged) {\n              setUse3d(newUse3d);\n            }\n          }\n        } else {\n          getMultiSelectionStats({\n            loader: loader.data,\n            selections,\n            use3d: newUse3d\n          }).then((stats) => {\n            domains = stats.domains;\n            const [newDomain] = domains;\n            if (mounted) {\n              setDomain(newDomain);\n              setDomainType(newDomainType);\n              if (hasSelectionChanged) {\n                setSelection(selections);\n              }\n              if (has3dChanged) {\n                setUse3d(newUse3d);\n              }\n            }\n          });\n        }\n      }\n    }\n    return () => {\n      mounted = false;\n    };\n  }, [\n    domainType,\n    channels2,\n    channelId,\n    loader,\n    dtype,\n    newDomainType,\n    selection,\n    newUse3d,\n    use3d\n  ]);\n  const createSelection = (index) => ({ [dimName]: index });\n  return /* @__PURE__ */ React55.createElement(Grid2, {\n    container: true,\n    direction: \"column\",\n    m: 1,\n    justify: \"center\"\n  }, /* @__PURE__ */ React55.createElement(Grid2, {\n    container: true,\n    direction: \"row\",\n    justify: \"space-between\"\n  }, /* @__PURE__ */ React55.createElement(Grid2, {\n    item: true,\n    xs: 10\n  }, /* @__PURE__ */ React55.createElement(ChannelSelectionDropdown, {\n    handleChange: (v) => handlePropertyChange(\"selection\", createSelection(v)),\n    selectionIndex,\n    channelOptions,\n    disabled: isLoading\n  })), /* @__PURE__ */ React55.createElement(Grid2, {\n    item: true,\n    xs: 1,\n    style: { marginTop: \"4px\" }\n  }, /* @__PURE__ */ React55.createElement(ChannelOptions_default, {\n    handlePropertyChange,\n    handleChannelRemove,\n    handleIQRUpdate,\n    disabled: isLoading\n  }))), /* @__PURE__ */ React55.createElement(Grid2, {\n    container: true,\n    direction: \"row\",\n    justify: \"space-between\"\n  }, /* @__PURE__ */ React55.createElement(Grid2, {\n    item: true,\n    xs: 2\n  }, /* @__PURE__ */ React55.createElement(ChannelVisibilityCheckbox, {\n    color: rgbColor,\n    checked: visibility,\n    toggle: () => handlePropertyChange(\"visible\", !visibility),\n    disabled: isLoading\n  })), /* @__PURE__ */ React55.createElement(Grid2, {\n    item: true,\n    xs: 9\n  }, /* @__PURE__ */ React55.createElement(ChannelSlider, {\n    color: rgbColor,\n    slider,\n    domain: domain || DOMAINS[dtype],\n    dtype,\n    handleChange: (v) => handlePropertyChange(\"slider\", v),\n    disabled: isLoading\n  }))));\n}\nvar RasterChannelController_default = RasterChannelController;\n\n// src/components/layer-controller/BitmaskChannelController.js\nimport React56 from \"react\";\nimport RemoveCircleIcon from \"@material-ui/icons/RemoveCircle\";\nimport IconButton5 from \"@material-ui/core/IconButton\";\nimport Grid3 from \"@material-ui/core/Grid\";\nfunction BitmaskChannelController({\n  visibility = false,\n  dimName,\n  channelOptions,\n  handlePropertyChange,\n  handleChannelRemove,\n  selectionIndex,\n  disableOptions = false\n}) {\n  const createSelection = (index) => ({ [dimName]: index });\n  return /* @__PURE__ */ React56.createElement(Grid3, {\n    container: true,\n    direction: \"row\",\n    justify: \"space-between\"\n  }, /* @__PURE__ */ React56.createElement(Grid3, {\n    item: true,\n    xs: 2\n  }, /* @__PURE__ */ React56.createElement(ChannelVisibilityCheckbox, {\n    color: [220, 220, 220],\n    checked: visibility,\n    toggle: () => handlePropertyChange(\"visible\", !visibility)\n  })), /* @__PURE__ */ React56.createElement(Grid3, {\n    item: true,\n    xs: 9\n  }, /* @__PURE__ */ React56.createElement(ChannelSelectionDropdown, {\n    handleChange: (v) => handlePropertyChange(\"selection\", createSelection(v)),\n    selectionIndex,\n    disableOptions,\n    channelOptions\n  })), /* @__PURE__ */ React56.createElement(Grid3, {\n    item: true,\n    xs: 1\n  }, /* @__PURE__ */ React56.createElement(IconButton5, {\n    onClick: handleChannelRemove,\n    style: { padding: \"6px 6px 6px 0px\" }\n  }, /* @__PURE__ */ React56.createElement(RemoveCircleIcon, null))));\n}\nvar BitmaskChannelController_default = BitmaskChannelController;\n\n// src/components/layer-controller/VectorLayerController.js\nimport React57 from \"react\";\nimport Grid4 from \"@material-ui/core/Grid\";\nimport Checkbox4 from \"@material-ui/core/Checkbox\";\nimport Paper3 from \"@material-ui/core/Paper\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Slider6 from \"@material-ui/core/Slider\";\nfunction VectorLayerController(props) {\n  const {\n    label,\n    layer,\n    layerType,\n    handleLayerChange\n  } = props;\n  const slider = layer.opacity;\n  const isOn = layer.visible;\n  function handleSliderChange(v) {\n    if (layerType === \"cells\") {\n      const stroked = v < 0.7;\n      handleLayerChange(__spreadProps(__spreadValues({}, layer), { opacity: v, stroked }));\n    } else {\n      handleLayerChange(__spreadProps(__spreadValues({}, layer), { opacity: v }));\n    }\n  }\n  function handleCheckBoxChange(v) {\n    handleLayerChange(__spreadProps(__spreadValues({}, layer), { visible: v }));\n  }\n  const classes = useControllerSectionStyles();\n  return /* @__PURE__ */ React57.createElement(Grid4, {\n    item: true,\n    style: { marginTop: \"10px\" }\n  }, /* @__PURE__ */ React57.createElement(Paper3, {\n    className: classes.root\n  }, /* @__PURE__ */ React57.createElement(Typography, {\n    style: {\n      padding: \"15px 8px 0px 8px\",\n      marginBottom: \"-5px\"\n    }\n  }, label), /* @__PURE__ */ React57.createElement(Grid4, {\n    container: true,\n    direction: \"row\",\n    justify: \"space-between\"\n  }, /* @__PURE__ */ React57.createElement(Grid4, {\n    item: true,\n    xs: 2\n  }, /* @__PURE__ */ React57.createElement(Checkbox4, {\n    color: \"primary\",\n    checked: isOn,\n    onChange: (e, v) => handleCheckBoxChange(v)\n  })), /* @__PURE__ */ React57.createElement(Grid4, {\n    item: true,\n    xs: 9,\n    style: { paddingRight: \"8px\" }\n  }, /* @__PURE__ */ React57.createElement(Slider6, {\n    value: slider,\n    min: 0,\n    max: 1,\n    step: 1e-3,\n    onChange: (e, v) => handleSliderChange(v),\n    style: { marginTop: \"7px\" },\n    orientation: \"horizontal\"\n  })))));\n}\n\n// src/components/layer-controller/LayerController.js\nimport React60, { useState as useState18, useRef as useRef8, useEffect as useEffect18 } from \"react\";\nimport Grid7 from \"@material-ui/core/Grid\";\nimport Button2 from \"@material-ui/core/Button\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport Slider9 from \"@material-ui/core/Slider\";\nimport Tabs from \"@material-ui/core/Tabs\";\nimport Tab from \"@material-ui/core/Tab\";\nimport ExpansionPanel from \"@material-ui/core/ExpansionPanel\";\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\nimport VisibilityIcon from \"@material-ui/icons/Visibility\";\nimport VisibilityOffIcon from \"@material-ui/icons/VisibilityOff\";\n\n// src/components/layer-controller/LayerOptions.js\nimport React58 from \"react\";\nimport range9 from \"lodash/range\";\nimport { Matrix4 as Matrix45 } from \"math.gl\";\nimport Grid5 from \"@material-ui/core/Grid\";\nimport Slider7 from \"@material-ui/core/Slider\";\nimport InputLabel2 from \"@material-ui/core/InputLabel\";\nimport Select3 from \"@material-ui/core/Select\";\nimport Checkbox5 from \"@material-ui/core/Checkbox\";\nvar DOMAIN_OPTIONS = [\"Full\", \"Min/Max\"];\nfunction VolumeDropdown({\n  loader: loaderWithMeta,\n  handleMultiPropertyChange,\n  resolution: currResolution,\n  disable3d,\n  setRasterLayerCallback,\n  setAreAllChannelsLoading,\n  setViewState,\n  spatialHeight,\n  spatialWidth,\n  channels: channels2,\n  use3d,\n  modelMatrix\n}) {\n  const classes = useSelectStyles();\n  const selections = channels2.map((i) => i.selection);\n  const { data: loader } = loaderWithMeta;\n  const handleChange = (val) => __async(this, null, function* () {\n    const shouldUse3D = typeof val === \"number\";\n    setAreAllChannelsLoading(true);\n    setRasterLayerCallback(() => {\n      setAreAllChannelsLoading(false);\n      setRasterLayerCallback(null);\n    });\n    if (shouldUse3D) {\n      const [xSlice, ySlice, zSlice] = getBoundingCube(loader);\n      const propertiesChanged = {\n        resolution: val,\n        xSlice,\n        ySlice,\n        zSlice,\n        use3d: shouldUse3D\n      };\n      if (!use3d) {\n        const { sliders } = yield getMultiSelectionStats({\n          loader,\n          selections,\n          use3d: shouldUse3D\n        });\n        propertiesChanged.channels = [...channels2];\n        propertiesChanged.channels.forEach((ch, i) => {\n          ch.slider = sliders[i];\n        });\n      }\n      handleMultiPropertyChange(propertiesChanged);\n      const defaultViewState = getDefaultInitialViewState(loader, { height: spatialHeight, width: spatialWidth }, 1.5, true, new Matrix45(modelMatrix));\n      setViewState(__spreadProps(__spreadValues({}, defaultViewState), {\n        rotationX: 0,\n        rotationOrbit: 0\n      }));\n    } else {\n      const { sliders } = yield getMultiSelectionStats({\n        loader,\n        selections,\n        use3d: shouldUse3D\n      });\n      const newChannels = [...channels2];\n      newChannels.forEach((ch, i) => {\n        ch.slider = sliders[i];\n      });\n      handleMultiPropertyChange({\n        resolution: val,\n        use3d: shouldUse3D,\n        spatialAxisFixed: false,\n        channels: newChannels\n      });\n      const defaultViewState = getDefaultInitialViewState(loader, { height: spatialHeight, width: spatialWidth }, 0.5, false, new Matrix45(modelMatrix));\n      setViewState(__spreadProps(__spreadValues({}, defaultViewState), {\n        rotationX: null,\n        rotationOrbit: null,\n        orbitAxis: null\n      }));\n    }\n  });\n  const { labels, shape } = Array.isArray(loader) ? loader[0] : loader;\n  const hasZStack = shape[labels.indexOf(\"z\")] > 1;\n  return /* @__PURE__ */ React58.createElement(React58.Fragment, null, /* @__PURE__ */ React58.createElement(Select3, {\n    native: true,\n    value: currResolution,\n    onChange: (e) => handleChange(e.target.value === \"2D\" ? e.target.value : Number(e.target.value)),\n    classes: { root: classes.selectRoot }\n  }, /* @__PURE__ */ React58.createElement(\"option\", {\n    key: \"2D\",\n    value: \"2D\"\n  }, \"2D Visualization\"), Array.from({ length: loader.length }).fill(0).map((_, resolution) => {\n    if (loader) {\n      if (canLoadResolution(loader, resolution)) {\n        const {\n          height,\n          width,\n          depthDownsampled,\n          totalBytes\n        } = getStatsForResolution(loader, resolution);\n        return /* @__PURE__ */ React58.createElement(\"option\", {\n          key: `(${height}, ${width}, ${depthDownsampled})`,\n          value: resolution,\n          disabled: disable3d || !hasZStack\n        }, `3D: ${resolution}x Downsampled, ~${formatBytes(totalBytes)} per channel, (${height}, ${width}, ${depthDownsampled})`);\n      }\n    }\n    return null;\n  })));\n}\nfunction ColormapSelect({ value, inputId, handleChange }) {\n  const classes = useSelectStyles();\n  return /* @__PURE__ */ React58.createElement(Select3, {\n    native: true,\n    onChange: (e) => handleChange(e.target.value === \"\" ? null : e.target.value),\n    value,\n    inputProps: { name: \"colormap\", id: inputId },\n    style: { width: \"100%\" },\n    classes: { root: classes.selectRoot }\n  }, /* @__PURE__ */ React58.createElement(\"option\", {\n    \"aria-label\": \"None\",\n    value: \"\"\n  }, \"None\"), COLORMAP_OPTIONS.map((name2) => /* @__PURE__ */ React58.createElement(\"option\", {\n    key: name2,\n    value: name2\n  }, name2)));\n}\nfunction TransparentColorCheckbox({ value, handleChange }) {\n  return /* @__PURE__ */ React58.createElement(Checkbox5, {\n    style: { float: \"left\", padding: 0 },\n    color: \"default\",\n    onChange: () => {\n      if (value) {\n        handleChange(null);\n      } else {\n        handleChange([0, 0, 0]);\n      }\n    },\n    checked: Boolean(value)\n  });\n}\nfunction OpacitySlider({ value, handleChange }) {\n  return /* @__PURE__ */ React58.createElement(Slider7, {\n    value,\n    onChange: (e, v) => handleChange(v),\n    valueLabelDisplay: \"auto\",\n    getAriaLabel: () => \"opacity slider\",\n    min: 0,\n    max: 1,\n    step: 0.01,\n    orientation: \"horizontal\",\n    style: { marginTop: \"7px\" }\n  });\n}\nfunction SliderDomainSelector({ value, inputId, handleChange }) {\n  const classes = useSelectStyles();\n  return /* @__PURE__ */ React58.createElement(Select3, {\n    native: true,\n    onChange: (e) => handleChange(e.target.value),\n    value,\n    inputProps: { name: \"domain-selector\", id: inputId },\n    style: { width: \"100%\" },\n    classes: { root: classes.selectRoot }\n  }, DOMAIN_OPTIONS.map((name2) => /* @__PURE__ */ React58.createElement(\"option\", {\n    key: name2,\n    value: name2\n  }, name2)));\n}\nfunction GlobalSelectionSlider({\n  field,\n  value,\n  handleChange,\n  possibleValues\n}) {\n  return /* @__PURE__ */ React58.createElement(StyledSelectionSlider, {\n    value,\n    onChange: (event, newValue) => {\n      handleChange({ selection: { [field]: newValue }, event });\n    },\n    onChangeCommitted: (event, newValue) => {\n      handleChange({ selection: { [field]: newValue }, event });\n    },\n    valueLabelDisplay: \"auto\",\n    getAriaLabel: () => `${field} slider`,\n    marks: possibleValues.map((val) => ({ value: val })),\n    min: Number(possibleValues[0]),\n    max: Number(possibleValues.slice(-1)),\n    orientation: \"horizontal\",\n    step: null\n  });\n}\nfunction LayerOption({ name: name2, inputId, children }) {\n  return /* @__PURE__ */ React58.createElement(Grid5, {\n    container: true,\n    direction: \"row\",\n    alignItems: \"center\",\n    justify: \"center\"\n  }, /* @__PURE__ */ React58.createElement(Grid5, {\n    item: true,\n    xs: 6\n  }, /* @__PURE__ */ React58.createElement(InputLabel2, {\n    htmlFor: inputId\n  }, name2, \":\")), /* @__PURE__ */ React58.createElement(Grid5, {\n    item: true,\n    xs: 6\n  }, children));\n}\nfunction LayerOptions({\n  colormap,\n  opacity,\n  handleColormapChange,\n  handleOpacityChange,\n  handleTransparentColorChange,\n  globalControlLabels,\n  globalLabelValues,\n  handleGlobalChannelsSelectionChange,\n  handleSliderChange,\n  handleDomainChange,\n  transparentColor,\n  channels: channels2,\n  domainType,\n  disableChannelsIfRgbDetected,\n  shouldShowTransparentColor,\n  shouldShowDomain,\n  shouldShowColormap,\n  use3d,\n  loader,\n  handleMultiPropertyChange,\n  resolution,\n  disable3d,\n  setRasterLayerCallback,\n  setAreAllChannelsLoading,\n  setViewState,\n  spatialHeight,\n  spatialWidth,\n  modelMatrix\n}) {\n  const { labels, shape } = Array.isArray(loader.data) ? loader.data[0] : loader.data;\n  const hasDimensionsAndChannels = labels.length > 0 && channels2.length > 0;\n  const hasZStack = shape[labels.indexOf(\"z\")] > 1;\n  const hasViewableResolutions = Boolean(Array.from({\n    length: loader.data.length\n  }).filter((_, res) => canLoadResolution(loader.data, res)).length);\n  return /* @__PURE__ */ React58.createElement(Grid5, {\n    container: true,\n    direction: \"column\",\n    style: { width: \"100%\" }\n  }, hasZStack && !disable3d && hasViewableResolutions && /* @__PURE__ */ React58.createElement(VolumeDropdown, {\n    loader,\n    handleSliderChange,\n    handleDomainChange,\n    channels: channels2,\n    handleMultiPropertyChange,\n    resolution,\n    disable3d,\n    setRasterLayerCallback,\n    setAreAllChannelsLoading,\n    setViewState,\n    spatialHeight,\n    spatialWidth,\n    use3d,\n    modelMatrix\n  }), hasDimensionsAndChannels && !use3d && globalControlLabels.map((field) => shape[labels.indexOf(field)] > 1 && /* @__PURE__ */ React58.createElement(LayerOption, {\n    name: field,\n    inputId: `${field}-slider`,\n    key: field\n  }, /* @__PURE__ */ React58.createElement(GlobalSelectionSlider, {\n    field,\n    value: globalLabelValues[field],\n    handleChange: handleGlobalChannelsSelectionChange,\n    possibleValues: range9(shape[labels.indexOf(field)])\n  }))), !disableChannelsIfRgbDetected ? /* @__PURE__ */ React58.createElement(React58.Fragment, null, shouldShowColormap && /* @__PURE__ */ React58.createElement(Grid5, {\n    item: true\n  }, /* @__PURE__ */ React58.createElement(LayerOption, {\n    name: \"Colormap\",\n    inputId: \"colormap-select\"\n  }, /* @__PURE__ */ React58.createElement(ColormapSelect, {\n    value: colormap || \"\",\n    inputId: \"colormap-select\",\n    handleChange: handleColormapChange\n  }))), shouldShowDomain && /* @__PURE__ */ React58.createElement(Grid5, {\n    item: true\n  }, /* @__PURE__ */ React58.createElement(LayerOption, {\n    name: \"Domain\",\n    inputId: \"domain-selector\"\n  }, /* @__PURE__ */ React58.createElement(SliderDomainSelector, {\n    value: domainType || DEFAULT_RASTER_DOMAIN_TYPE,\n    handleChange: (value) => {\n      handleDomainChange(value);\n    }\n  })))) : null, !use3d && /* @__PURE__ */ React58.createElement(Grid5, {\n    item: true\n  }, /* @__PURE__ */ React58.createElement(LayerOption, {\n    name: \"Opacity\",\n    inputId: \"opacity-slider\"\n  }, /* @__PURE__ */ React58.createElement(OpacitySlider, {\n    value: opacity,\n    handleChange: handleOpacityChange\n  }))), shouldShowTransparentColor && !use3d && /* @__PURE__ */ React58.createElement(Grid5, {\n    item: true\n  }, /* @__PURE__ */ React58.createElement(LayerOption, {\n    name: \"Zero Transparent\",\n    inputId: \"transparent-color-selector\"\n  }, /* @__PURE__ */ React58.createElement(TransparentColorCheckbox, {\n    value: transparentColor,\n    handleChange: handleTransparentColorChange\n  }))));\n}\nvar LayerOptions_default = LayerOptions;\n\n// src/components/layer-controller/VolumeOptions.js\nimport React59 from \"react\";\nimport { Matrix4 as Matrix46 } from \"math.gl\";\nimport Grid6 from \"@material-ui/core/Grid\";\nimport Typography2 from \"@material-ui/core/Typography\";\nimport Button from \"@material-ui/core/Button\";\nimport { makeStyles as makeStyles9, createStyles as createStyles2 } from \"@material-ui/core/styles\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport Select4 from \"@material-ui/core/Select\";\nimport InputLabel3 from \"@material-ui/core/InputLabel\";\nimport Slider8 from \"@material-ui/core/Slider\";\nvar useSlicerStyles = makeStyles9((theme) => createStyles2({\n  enabled: {},\n  disabled: {\n    color: theme.palette.text.disabled,\n    \"& .MuiSlider-thumb\": {\n      color: \"rgb(100, 100, 100, 1.0)\"\n    },\n    \"&  .MuiSlider-track\": {\n      color: \"rgb(100, 100, 100, 1.0)\"\n    }\n  }\n}));\nvar Slicer = ({\n  xSlice,\n  ySlice,\n  zSlice,\n  handleSlicerSetting,\n  loader,\n  use3d\n}) => {\n  const [xSliceInit, ySliceInit, zSliceInit] = getBoundingCube(loader.data);\n  const sliceValuesAndSetSliceFunctions = [\n    [\n      xSlice,\n      (xSliceNew) => handleSlicerSetting(\"x\", xSliceNew),\n      \"x\",\n      xSliceInit\n    ],\n    [\n      ySlice,\n      (ySliceNew) => handleSlicerSetting(\"y\", ySliceNew),\n      \"y\",\n      ySliceInit\n    ],\n    [\n      zSlice,\n      (zSliceNew) => handleSlicerSetting(\"z\", zSliceNew),\n      \"z\",\n      zSliceInit\n    ]\n  ];\n  const classes = useSlicerStyles();\n  const Slicers = sliceValuesAndSetSliceFunctions.map(([val, setVal, label, [min, max2]]) => /* @__PURE__ */ React59.createElement(Grid6, {\n    container: true,\n    direction: \"row\",\n    justify: \"flex-start\",\n    alignItems: \"center\",\n    key: label\n  }, /* @__PURE__ */ React59.createElement(Grid6, {\n    item: true,\n    xs: 1\n  }, /* @__PURE__ */ React59.createElement(Typography2, {\n    className: !use3d ? classes.disabled : classes.enabled,\n    style: { marginBottom: 0 }\n  }, label, \":\")), /* @__PURE__ */ React59.createElement(Grid6, {\n    item: true,\n    xs: 11\n  }, /* @__PURE__ */ React59.createElement(Slider8, {\n    disabled: !use3d,\n    className: !use3d ? classes.disabled : classes.enabled,\n    value: val,\n    onChange: (e, v) => setVal(v),\n    valueLabelDisplay: \"auto\",\n    valueLabelFormat: (v) => abbreviateNumber(v),\n    getAriaLabel: () => `${label} slider`,\n    min,\n    max: max2,\n    step: 5e-3,\n    orientation: \"horizontal\"\n  }))));\n  return /* @__PURE__ */ React59.createElement(React59.Fragment, null, /* @__PURE__ */ React59.createElement(Typography2, {\n    className: !use3d ? classes.disabled : classes.enabled,\n    style: { marginTop: 16, marginBottom: 0 }\n  }, \"Clipping Planes:\", \" \"), \" \", Slicers);\n};\nvar renderingOptions = Object.values(RENDERING_MODES);\nfunction RenderingModeSelect({\n  handleRenderingModeChange,\n  renderingMode,\n  use3d\n}) {\n  const classes = useSelectStyles();\n  const options = !use3d ? [...renderingOptions, \"\"] : renderingOptions;\n  return /* @__PURE__ */ React59.createElement(FormControl, {\n    fullWidth: true\n  }, /* @__PURE__ */ React59.createElement(InputLabel3, {\n    htmlFor: \"rendering-mode-select\"\n  }, \"Rendering Mode\"), /* @__PURE__ */ React59.createElement(Select4, {\n    native: true,\n    onChange: (e) => handleRenderingModeChange(e.target.value),\n    value: use3d ? renderingMode : \"\",\n    inputProps: {\n      name: \"rendering-mode\",\n      id: \"rendering-mode-select\"\n    },\n    disabled: !use3d,\n    classes: { root: classes.selectRoot }\n  }, options.map((name2) => /* @__PURE__ */ React59.createElement(\"option\", {\n    key: name2,\n    value: name2\n  }, name2))));\n}\nvar ReCenterButton = ({\n  setViewState,\n  use3d,\n  spatialHeight,\n  spatialWidth,\n  loader,\n  modelMatrix\n}) => /* @__PURE__ */ React59.createElement(Grid6, {\n  item: true,\n  xs: \"auto\",\n  key: \"recenter\"\n}, /* @__PURE__ */ React59.createElement(Button, {\n  onClick: () => {\n    const defaultViewState = getDefaultInitialViewState(loader.data, { height: spatialHeight, width: spatialWidth }, 1.5, use3d, new Matrix46(modelMatrix));\n    setViewState(__spreadProps(__spreadValues({}, defaultViewState), {\n      rotationX: 0,\n      rotationOrbit: 0\n    }));\n  },\n  disabled: !use3d,\n  style: {\n    padding: 0,\n    marginBottom: 6\n  }\n}, \"Re-Center\"));\nvar VolumeOptions = ({\n  handleSlicerSetting,\n  handleRenderingModeChange,\n  renderingMode,\n  xSlice,\n  ySlice,\n  zSlice,\n  use3d,\n  loader,\n  setViewState,\n  spatialHeight,\n  spatialWidth,\n  modelMatrix\n}) => /* @__PURE__ */ React59.createElement(React59.Fragment, null, /* @__PURE__ */ React59.createElement(RenderingModeSelect, {\n  handleRenderingModeChange,\n  renderingMode,\n  use3d\n}), /* @__PURE__ */ React59.createElement(Slicer, {\n  xSlice,\n  ySlice,\n  zSlice,\n  handleSlicerSetting,\n  use3d,\n  loader\n}), /* @__PURE__ */ React59.createElement(ReCenterButton, {\n  setViewState,\n  use3d,\n  spatialHeight,\n  spatialWidth,\n  loader,\n  modelMatrix\n}));\nvar VolumeOptions_default = VolumeOptions;\n\n// src/components/layer-controller/LayerController.js\nfunction TabPanel(props) {\n  const _a2 = props, {\n    children,\n    value,\n    index\n  } = _a2, other = __objRest(_a2, [\n    \"children\",\n    \"value\",\n    \"index\"\n  ]);\n  return /* @__PURE__ */ React60.createElement(\"div\", __spreadValues({\n    role: \"tabpanel\",\n    hidden: value !== index,\n    id: `simple-tabpanel-${index}`,\n    \"aria-labelledby\": `simple-tab-${index}`\n  }, other), value === index && children);\n}\nfunction getDomainsAndSliders(loader, selections, domainType, use3d) {\n  return __async(this, null, function* () {\n    let domains;\n    const stats = yield getMultiSelectionStats({\n      loader: loader.data,\n      selections,\n      use3d\n    });\n    const { sliders } = stats;\n    if (domainType === \"Min/Max\") {\n      domains = stats.domains;\n    }\n    if (domainType === \"Full\") {\n      const source = getSourceFromLoader(loader);\n      domains = selections.map(() => DOMAINS[source.dtype]);\n    }\n    return { domains, sliders };\n  });\n}\nvar buttonStyles = {\n  borderStyle: \"dashed\",\n  marginTop: \"10px\",\n  fontWeight: 400\n};\nfunction LayerController(props) {\n  var _a2;\n  const {\n    layer,\n    name: name2,\n    loader,\n    theme,\n    handleLayerRemove,\n    handleLayerChange,\n    shouldShowTransparentColor,\n    shouldShowDomain,\n    shouldShowColormap,\n    ChannelController,\n    setViewState,\n    disable3d,\n    setRasterLayerCallback,\n    setAreLayerChannelsLoading,\n    areLayerChannelsLoading,\n    disabled,\n    spatialHeight,\n    spatialWidth,\n    disableChannelsIfRgbDetected,\n    shouldShowRemoveLayerButton\n  } = props;\n  const {\n    colormap,\n    opacity,\n    channels: channels2,\n    transparentColor,\n    renderingMode,\n    xSlice,\n    ySlice,\n    zSlice,\n    resolution,\n    use3d,\n    modelMatrix\n  } = layer;\n  const channelRef = useRef8(channels2);\n  useEffect18(() => {\n    channelRef.current = channels2;\n    return void 0;\n  }, [channels2]);\n  const firstSelection = ((_a2 = channels2[0]) == null ? void 0 : _a2.selection) || {};\n  const { data, channels: channelOptions } = loader;\n  const [tab, setTab] = useState18(0);\n  const handleTabChange = (event, newTab) => {\n    setTab(newTab);\n  };\n  const { labels, shape } = Array.isArray(data) ? data[data.length - 1] : data;\n  const [domainType, setDomainType] = useState18(layer.domainType);\n  const [isExpanded, setIsExpanded] = useState18(true);\n  const [globalLabelValues, setGlobalLabelValues] = useState18(GLOBAL_LABELS.filter((field) => typeof firstSelection[field] === \"number\").reduce((o, key) => __spreadProps(__spreadValues({}, o), { [key]: firstSelection[key] }), {}));\n  function setVisible(v) {\n    handleLayerChange(__spreadProps(__spreadValues({}, layer), { visible: v }));\n  }\n  function setColormap(v) {\n    handleLayerChange(__spreadProps(__spreadValues({}, layer), { colormap: v }));\n  }\n  function setOpacity(v) {\n    handleLayerChange(__spreadProps(__spreadValues({}, layer), { opacity: v }));\n  }\n  function setChannels(v) {\n    handleLayerChange(__spreadProps(__spreadValues({}, layer), { channels: v }));\n  }\n  function setTransparentColor(v) {\n    handleLayerChange(__spreadProps(__spreadValues({}, layer), { transparentColor: v }));\n  }\n  function setRenderingMode(v) {\n    handleLayerChange(__spreadProps(__spreadValues({}, layer), { renderingMode: v }));\n  }\n  function handleMultiPropertyChange(obj) {\n    handleLayerChange(__spreadValues(__spreadValues({}, layer), obj));\n  }\n  function handleSlicerSetting(slice3, val) {\n    handleLayerChange(__spreadProps(__spreadValues({}, layer), { [`${slice3}Slice`]: val }));\n  }\n  function setChannelsAndDomainType(newChannels, newDomainType) {\n    handleLayerChange(__spreadProps(__spreadValues({}, layer), {\n      channels: newChannels,\n      domainType: newDomainType\n    }));\n  }\n  function setChannel(v, i) {\n    const newChannels = [...channelRef.current];\n    newChannels[i] = v;\n    handleLayerChange(__spreadProps(__spreadValues({}, layer), { channels: newChannels }));\n  }\n  function addChannel(v) {\n    const newChannels = [...channelRef.current, v];\n    handleLayerChange(__spreadProps(__spreadValues({}, layer), { channels: newChannels }));\n  }\n  function removeChannel(i) {\n    const newChannels = [...channelRef.current];\n    newChannels.splice(i, 1);\n    handleLayerChange(__spreadProps(__spreadValues({}, layer), { channels: newChannels }));\n  }\n  const setAreAllChannelsLoading = (val) => {\n    const newAreLayerChannelsLoading = channelRef.current.map(() => val);\n    setAreLayerChannelsLoading(newAreLayerChannelsLoading);\n  };\n  const handleChannelAdd = () => __async(this, null, function* () {\n    const selection = {};\n    labels.forEach((label) => {\n      selection[label] = GLOBAL_LABELS.includes(label) ? globalLabelValues[label] || 0 : 0;\n    });\n    const { domains, sliders } = yield getDomainsAndSliders(loader, [selection], domainType, use3d);\n    const domain = domains[0];\n    const slider = domain;\n    const color = [255, 255, 255];\n    const visible2 = true;\n    const newChannelId = channels2.length;\n    const newAreLayerChannelsLoading = [...areLayerChannelsLoading];\n    newAreLayerChannelsLoading[newChannelId] = true;\n    setAreLayerChannelsLoading(newAreLayerChannelsLoading);\n    const channel = {\n      selection,\n      slider,\n      visible: visible2,\n      color\n    };\n    setRasterLayerCallback(() => {\n      setChannel(__spreadProps(__spreadValues({}, channel), { slider: sliders[0] }), newChannelId);\n      const areLayerChannelsLoadingCallback = [...newAreLayerChannelsLoading];\n      areLayerChannelsLoadingCallback[newChannelId] = false;\n      setAreLayerChannelsLoading(areLayerChannelsLoadingCallback);\n      setRasterLayerCallback(null);\n    });\n    addChannel(channel);\n  });\n  const handleDomainChange = (value) => __async(this, null, function* () {\n    setDomainType(value);\n    const selections = channels2.map((channel) => channel.selection);\n    let sliders = channels2.map((channel) => channel.slider);\n    const { domains } = yield getDomainsAndSliders(loader, selections, value, use3d);\n    sliders = sliders.map((slider, i) => {\n      const [left, right] = slider;\n      return [Math.max(left, domains[i][0]), Math.min(right, domains[i][1])];\n    });\n    const newChannels = channels2.map((c, i) => __spreadProps(__spreadValues({}, c), { slider: sliders[i] }));\n    setChannelsAndDomainType(newChannels, value);\n  });\n  const handleGlobalChannelsSelectionChange = (_0) => __async(this, [_0], function* ({ selection, event }) {\n    const selections = channels2.map((channel) => __spreadValues(__spreadValues({}, channel.selection), selection));\n    const canUpdateChannels = event.type === \"mouseup\" || event.type === \"keydown\";\n    if (canUpdateChannels) {\n      setAreAllChannelsLoading(true);\n      getDomainsAndSliders(loader, selections, domainType, use3d).then(({ sliders }) => {\n        const newChannelsWithSelection = channels2.map((c) => __spreadProps(__spreadValues({}, c), {\n          selection: __spreadValues(__spreadValues({}, c.selection), selection)\n        }));\n        setRasterLayerCallback(() => {\n          setRasterLayerCallback(null);\n          setAreAllChannelsLoading(false);\n          const newChannelsWithSliders = [...newChannelsWithSelection].map((c, i) => __spreadProps(__spreadValues({}, c), {\n            slider: sliders[i]\n          }));\n          setChannels(newChannelsWithSliders);\n        });\n        setChannels(newChannelsWithSelection);\n      });\n    }\n    setGlobalLabelValues((prev) => __spreadValues(__spreadValues({}, prev), selection));\n  });\n  let channelControllers = [];\n  if (labels.length > 0) {\n    const channelLabel = labels.find((c) => c === \"channel\" || c === \"c\") || labels[0];\n    channelControllers = channels2.map((c, channelId) => {\n      const setIsLoading = (val) => {\n        const newAreLayerChannelsLoading = [...areLayerChannelsLoading];\n        newAreLayerChannelsLoading[channelId] = val;\n        setAreLayerChannelsLoading(newAreLayerChannelsLoading);\n      };\n      const handleChannelPropertyChange = (property, value) => {\n        const update = { [property]: value };\n        if (property === \"selection\") {\n          setIsLoading(true);\n          update.selection = __spreadValues(__spreadValues({}, globalLabelValues), update.selection);\n          setChannel(__spreadValues(__spreadValues({}, c), update), channelId);\n          setRasterLayerCallback(() => __async(this, null, function* () {\n            const selections = [\n              __spreadValues(__spreadValues({}, channels2[channelId][property]), value)\n            ];\n            const { sliders } = yield getDomainsAndSliders(loader, selections, domainType, use3d);\n            [update.slider] = sliders;\n            setChannel(__spreadValues(__spreadValues({}, c), update), channelId);\n            setRasterLayerCallback(null);\n            setIsLoading(false);\n          }));\n        } else {\n          setChannel(__spreadValues(__spreadValues({}, c), update), channelId);\n        }\n      };\n      const handleChannelRemove = () => {\n        removeChannel(channelId);\n      };\n      const handleIQRUpdate = () => __async(this, null, function* () {\n        const { data: loaderData } = loader;\n        const source = Array.isArray(loaderData) ? loaderData[loaderData.length - 1] : loaderData;\n        const raster = yield source.getRaster({\n          selection: channels2[channelId].selection\n        });\n        const stats = getChannelStats(raster.data);\n        const { q1, q3 } = stats;\n        setChannel(__spreadProps(__spreadValues({}, c), { slider: [q1, q3] }), channelId);\n      });\n      return /* @__PURE__ */ React60.createElement(ChannelController, {\n        key: `channel-controller-${channelId}`,\n        dimName: channelLabel,\n        visibility: c.visible,\n        selectionIndex: c.selection[channelLabel],\n        slider: c.slider,\n        color: c.color,\n        channels: channels2,\n        channelId,\n        domainType,\n        loader,\n        globalLabelValues,\n        theme,\n        channelOptions,\n        colormapOn: Boolean(colormap),\n        handlePropertyChange: handleChannelPropertyChange,\n        handleChannelRemove,\n        handleIQRUpdate,\n        setRasterLayerCallback,\n        isLoading: areLayerChannelsLoading[channelId],\n        use3d\n      });\n    });\n  }\n  const controllerSectionClasses = useControllerSectionStyles();\n  const { visible } = layer;\n  const visibleSetting = typeof visible === \"boolean\" ? visible : true;\n  const Visibility = visibleSetting ? VisibilityIcon : VisibilityOffIcon;\n  const hasViewableResolutions = Boolean(Array.from({\n    length: loader.data.length\n  }).filter((_, res) => canLoadResolution(loader.data, res)).length);\n  const useVolumeTabs = !disable3d && shape[labels.indexOf(\"z\")] > 1 && hasViewableResolutions;\n  const FullController = /* @__PURE__ */ React60.createElement(React60.Fragment, null, /* @__PURE__ */ React60.createElement(LayerOptions_default, {\n    channels: channels2,\n    opacity,\n    colormap,\n    transparentColor,\n    domainType,\n    globalControlLabels: labels.filter((label) => GLOBAL_LABELS.includes(label)),\n    globalLabelValues,\n    handleOpacityChange: setOpacity,\n    handleColormapChange: setColormap,\n    handleGlobalChannelsSelectionChange,\n    handleTransparentColorChange: setTransparentColor,\n    disableChannelsIfRgbDetected: isRgb(loader) && disableChannelsIfRgbDetected,\n    handleDomainChange,\n    shouldShowTransparentColor,\n    shouldShowDomain,\n    shouldShowColormap,\n    use3d,\n    loader,\n    handleMultiPropertyChange,\n    resolution,\n    disable3d,\n    setRasterLayerCallback,\n    setAreAllChannelsLoading,\n    setViewState,\n    spatialHeight,\n    spatialWidth,\n    modelMatrix\n  }), isRgb(loader) && disableChannelsIfRgbDetected ? null : channelControllers, isRgb(loader) && disableChannelsIfRgbDetected ? null : /* @__PURE__ */ React60.createElement(Button2, {\n    disabled: channels2.length === MAX_CHANNELS,\n    onClick: handleChannelAdd,\n    fullWidth: true,\n    variant: \"outlined\",\n    style: buttonStyles,\n    startIcon: /* @__PURE__ */ React60.createElement(AddIcon, null),\n    size: \"small\"\n  }, \"Add Channel\"));\n  return /* @__PURE__ */ React60.createElement(ExpansionPanel, {\n    className: controllerSectionClasses.root,\n    onChange: (e, expanded) => {\n      var _a3, _b2, _c;\n      return !disabled && setIsExpanded(expanded && ((_c = (_b2 = (_a3 = e == null ? void 0 : e.target) == null ? void 0 : _a3.attributes) == null ? void 0 : _b2.role) == null ? void 0 : _c.value) === \"presentation\");\n    },\n    TransitionProps: { enter: false },\n    expanded: !disabled && isExpanded\n  }, /* @__PURE__ */ React60.createElement(StyledExpansionPanelSummary, {\n    expandIcon: /* @__PURE__ */ React60.createElement(ExpandMoreIcon, null),\n    \"aria-controls\": `layer-${name2}-controls`\n  }, /* @__PURE__ */ React60.createElement(Grid7, {\n    container: true,\n    direction: \"column\",\n    m: 1,\n    justify: \"center\"\n  }, /* @__PURE__ */ React60.createElement(OverflowEllipsisGrid, {\n    item: true\n  }, /* @__PURE__ */ React60.createElement(Button2, {\n    onClick: (e) => {\n      if (!disabled) {\n        e.stopPropagation();\n        const nextVisible = typeof visible === \"boolean\" ? !visible : false;\n        setVisible(nextVisible);\n      }\n    },\n    style: {\n      marginRight: 8,\n      marginBottom: 2,\n      padding: 0,\n      minWidth: 0\n    }\n  }, /* @__PURE__ */ React60.createElement(Visibility, null)), name2), !disabled && !isExpanded && !use3d && /* @__PURE__ */ React60.createElement(Grid7, {\n    container: true,\n    direction: \"row\",\n    alignItems: \"center\",\n    justify: \"center\"\n  }, /* @__PURE__ */ React60.createElement(Grid7, {\n    item: true,\n    xs: 6\n  }, /* @__PURE__ */ React60.createElement(StyledInputLabel, {\n    htmlFor: `layer-${name2}-opacity-closed`\n  }, \"Opacity:\")), /* @__PURE__ */ React60.createElement(Grid7, {\n    item: true,\n    xs: 6\n  }, /* @__PURE__ */ React60.createElement(Slider9, {\n    id: `layer-${name2}-opacity-closed`,\n    value: opacity,\n    onChange: (e, v) => setOpacity(v),\n    valueLabelDisplay: \"auto\",\n    getAriaLabel: () => \"opacity slider\",\n    min: 0,\n    max: 1,\n    step: 0.01,\n    orientation: \"horizontal\"\n  }))))), /* @__PURE__ */ React60.createElement(StyledExpansionPanelDetails, null, useVolumeTabs ? /* @__PURE__ */ React60.createElement(React60.Fragment, null, /* @__PURE__ */ React60.createElement(Tabs, {\n    value: tab,\n    onChange: handleTabChange,\n    \"aria-label\": \"simple tabs example\",\n    style: { height: \"24px\", minHeight: \"24px\" }\n  }, /* @__PURE__ */ React60.createElement(Tab, {\n    label: \"Channels\",\n    style: {\n      fontSize: \".75rem\",\n      bottom: 12,\n      width: \"50%\",\n      minWidth: \"50%\"\n    },\n    disableRipple: true\n  }), /* @__PURE__ */ React60.createElement(Tab, {\n    label: \"Volume\",\n    style: {\n      fontSize: \".75rem\",\n      bottom: 12,\n      width: \"50%\",\n      minWidth: \"50%\"\n    }\n  })), /* @__PURE__ */ React60.createElement(TabPanel, {\n    value: tab,\n    index: 0\n  }, FullController), /* @__PURE__ */ React60.createElement(TabPanel, {\n    value: tab,\n    index: 1,\n    style: { marginTop: 4 }\n  }, /* @__PURE__ */ React60.createElement(VolumeOptions_default, {\n    loader,\n    handleSlicerSetting,\n    handleRenderingModeChange: setRenderingMode,\n    renderingMode,\n    xSlice,\n    ySlice,\n    zSlice,\n    use3d,\n    setViewState,\n    spatialHeight,\n    spatialWidth,\n    modelMatrix\n  }))) : FullController, shouldShowRemoveLayerButton ? /* @__PURE__ */ React60.createElement(Button2, {\n    onClick: handleLayerRemove,\n    fullWidth: true,\n    variant: \"outlined\",\n    style: buttonStyles,\n    size: \"small\"\n  }, \"Remove Image Layer\") : null));\n}\n\n// src/components/layer-controller/ImageAddButton.js\nimport React61, { useState as useState19 } from \"react\";\nimport { makeStyles as makeStyles10 } from \"@material-ui/core/styles\";\nimport AddIcon2 from \"@material-ui/icons/Add\";\nimport MenuItem3 from \"@material-ui/core/MenuItem\";\nvar useStyles5 = makeStyles10(() => ({\n  addButton: {\n    marginTop: \"10px\",\n    marginBottom: \"10px\",\n    fontWeight: 400\n  }\n}));\nfunction ImageAddIcon() {\n  return /* @__PURE__ */ React61.createElement(React61.Fragment, null, /* @__PURE__ */ React61.createElement(AddIcon2, null), \"Add Image Layer\");\n}\nfunction ImageAddButton({ imageOptions, handleImageAdd }) {\n  const [open, setOpen] = useState19(false);\n  const classes = useStyles5();\n  const handleAdd = (imgData) => {\n    setOpen((prev) => !prev);\n    handleImageAdd(imgData);\n  };\n  if (!imageOptions)\n    return null;\n  return /* @__PURE__ */ React61.createElement(PopperMenu, {\n    open,\n    setOpen,\n    buttonIcon: /* @__PURE__ */ React61.createElement(ImageAddIcon, null),\n    buttonClassName: classes.addButton\n  }, imageOptions.map((imgData, i) => /* @__PURE__ */ React61.createElement(MenuItem3, {\n    dense: true,\n    key: imgData.name,\n    onClick: () => handleAdd(i)\n  }, /* @__PURE__ */ React61.createElement(\"span\", null, imgData.name))));\n}\nvar ImageAddButton_default = ImageAddButton;\n\n// src/components/layer-controller/LayerControllerSubscriber.js\nvar LAYER_CONTROLLER_DATA_TYPES = [\"raster\"];\nvar LayerControllerMemoized = React62.memo(forwardRef4((props, ref) => {\n  const {\n    title: title16,\n    removeGridComponent,\n    theme,\n    isReady,\n    moleculesLayer,\n    dataset,\n    setMoleculesLayer,\n    cellsLayer,\n    canShowCellVecmask,\n    setCellsLayer,\n    rasterLayers,\n    imageLayerLoaders,\n    imageLayerMeta,\n    rasterLayersCallbacks,\n    setRasterLayersCallbacks,\n    areLoadingRasterChannnels,\n    setAreLoadingRasterChannnels,\n    handleRasterLayerChange,\n    handleRasterLayerRemove,\n    disable3d,\n    globalDisable3d,\n    disableChannelsIfRgbDetected,\n    layerIs3DIndex,\n    setZoom,\n    setTargetX,\n    setTargetY,\n    setTargetZ,\n    setRotationX,\n    setRotationOrbit,\n    componentHeight,\n    componentWidth,\n    spatialLayout,\n    handleImageAdd,\n    enableLayerButtonsWithOneLayer\n  } = props;\n  const shouldShowImageLayerButton = Boolean(enableLayerButtonsWithOneLayer || (imageLayerLoaders == null ? void 0 : imageLayerLoaders.length) > 1);\n  return /* @__PURE__ */ React62.createElement(TitleInfo, {\n    title: title16,\n    isScroll: true,\n    removeGridComponent,\n    theme,\n    isReady\n  }, /* @__PURE__ */ React62.createElement(\"div\", {\n    className: \"layer-controller-container\",\n    ref\n  }, moleculesLayer && /* @__PURE__ */ React62.createElement(VectorLayerController, {\n    key: `${dataset}-molecules`,\n    label: \"Molecules\",\n    layerType: \"molecules\",\n    layer: moleculesLayer,\n    handleLayerChange: setMoleculesLayer\n  }), cellsLayer && canShowCellVecmask && /* @__PURE__ */ React62.createElement(VectorLayerController, {\n    key: `${dataset}-cells`,\n    label: \"Cell Segmentations\",\n    layerType: \"cells\",\n    layer: cellsLayer,\n    handleLayerChange: setCellsLayer\n  }), rasterLayers && rasterLayers.map((layer, i) => {\n    var _a2;\n    const { index } = layer;\n    const loader = imageLayerLoaders[index];\n    const layerMeta = imageLayerMeta[index];\n    const isRaster = !((_a2 = layerMeta == null ? void 0 : layerMeta.metadata) == null ? void 0 : _a2.isBitmask);\n    const ChannelController = isRaster ? RasterChannelController_default : BitmaskChannelController_default;\n    const setRasterLayerCallback = (cb) => {\n      const newRasterLayersCallbacks = [\n        ...rasterLayersCallbacks || []\n      ];\n      newRasterLayersCallbacks[i] = cb;\n      setRasterLayersCallbacks(newRasterLayersCallbacks);\n    };\n    const areLayerChannelsLoading = (areLoadingRasterChannnels || [])[i] || [];\n    const setAreLayerChannelsLoading = (v) => {\n      const newAreLoadingRasterChannnels = [\n        ...areLoadingRasterChannnels || []\n      ];\n      newAreLoadingRasterChannnels[i] = v;\n      setAreLoadingRasterChannnels(newAreLoadingRasterChannnels);\n    };\n    return loader && layerMeta ? /* @__PURE__ */ React62.createElement(Grid8, {\n      key: `${dataset}-raster-${index}-${i}`,\n      item: true,\n      style: { marginTop: \"10px\" }\n    }, /* @__PURE__ */ React62.createElement(LayerController, {\n      name: layerMeta.name,\n      layer,\n      loader,\n      theme,\n      handleLayerChange: (v) => handleRasterLayerChange(v, i),\n      handleLayerRemove: () => handleRasterLayerRemove(i),\n      ChannelController,\n      shouldShowTransparentColor: isRaster,\n      shouldShowDomain: isRaster,\n      shouldShowColormap: isRaster,\n      disable3d: globalDisable3d || (disable3d || []).indexOf(layerMeta.name) >= 0 || typeof layerIs3DIndex === \"number\" && layerIs3DIndex !== -1 && layerIs3DIndex !== i,\n      disabled: typeof layerIs3DIndex === \"number\" && layerIs3DIndex !== -1 && layerIs3DIndex !== i,\n      disableChannelsIfRgbDetected,\n      rasterLayersCallbacks,\n      setRasterLayerCallback,\n      setViewState: ({\n        zoom: newZoom,\n        target,\n        rotationX: newRotationX,\n        rotationOrbit: newRotationOrbit\n      }) => {\n        setZoom(newZoom);\n        setTargetX(target[0]);\n        setTargetY(target[1]);\n        setTargetZ(target[2]);\n        setRotationX(newRotationX);\n        setRotationOrbit(newRotationOrbit);\n      },\n      setAreLayerChannelsLoading,\n      areLayerChannelsLoading,\n      spatialHeight: componentHeight * (spatialLayout ? spatialLayout.h : 1) / 12,\n      spatialWidth: componentWidth * (spatialLayout ? spatialLayout.w : 1) / 12,\n      shouldShowRemoveLayerButton: shouldShowImageLayerButton\n    })) : null;\n  }), shouldShowImageLayerButton ? /* @__PURE__ */ React62.createElement(Grid8, {\n    item: true\n  }, /* @__PURE__ */ React62.createElement(ImageAddButton_default, {\n    imageOptions: imageLayerMeta,\n    handleImageAdd\n  })) : null));\n}));\nfunction LayerControllerSubscriber(props) {\n  const {\n    coordinationScopes,\n    removeGridComponent,\n    theme,\n    title: title16 = \"Spatial Layers\",\n    disable3d,\n    globalDisable3d,\n    disableChannelsIfRgbDetected,\n    enableLayerButtonsWithOneLayer\n  } = props;\n  const loaders = useLoaders();\n  const [\n    {\n      dataset,\n      spatialRasterLayers: rasterLayers,\n      spatialCellsLayer: cellsLayer,\n      spatialMoleculesLayer: moleculesLayer\n    },\n    {\n      setSpatialRasterLayers: setRasterLayers,\n      setSpatialCellsLayer: setCellsLayer,\n      setSpatialMoleculesLayer: setMoleculesLayer,\n      setSpatialTargetX: setTargetX,\n      setSpatialTargetY: setTargetY,\n      setSpatialTargetZ: setTargetZ,\n      setSpatialRotationX: setRotationX,\n      setSpatialRotationOrbit: setRotationOrbit,\n      setSpatialZoom: setZoom\n    }\n  ] = useCoordination(COMPONENT_COORDINATION_TYPES.layerController, coordinationScopes);\n  const [\n    {\n      rasterLayersCallbacks,\n      areLoadingRasterChannnels\n    },\n    {\n      setRasterLayersCallbacks,\n      setAreLoadingRasterChannnels\n    }\n  ] = useAuxiliaryCoordination(COMPONENT_COORDINATION_TYPES.layerController, coordinationScopes);\n  const [spatialLayout] = useComponentLayout(\"spatial\", [\"spatialRasterLayers\"], coordinationScopes);\n  const layerControllerRef = useRef9();\n  const [componentWidth, componentHeight] = useClosestVitessceContainerSize(layerControllerRef);\n  const { height: windowHeight, width: windowWidth } = useWindowDimensions();\n  const [\n    isReady,\n    setItemIsReady,\n    setItemIsNotReady,\n    resetReadyItems\n  ] = useReady(LAYER_CONTROLLER_DATA_TYPES);\n  useEffect19(() => {\n    resetReadyItems();\n  }, [loaders, dataset]);\n  const [raster, imageLayerLoaders, imageLayerMeta] = useRasterData(loaders, dataset, setItemIsReady, () => {\n  }, false, { setSpatialRasterLayers: setRasterLayers }, { spatialRasterLayers: rasterLayers });\n  useCellsData(loaders, dataset, setItemIsReady, () => {\n  }, false, { setSpatialCellsLayer: setCellsLayer }, { spatialCellsLayer: cellsLayer });\n  useMoleculesData(loaders, dataset, setItemIsReady, () => {\n  }, false, { setSpatialMoleculesLayer: setMoleculesLayer }, { spatialMoleculesLayer: moleculesLayer });\n  const handleImageAdd = useCallback13((index) => __async(this, null, function* () {\n    var _a2, _b2, _c, _d, _e;\n    const loader = imageLayerLoaders[index];\n    const newChannels = yield initializeLayerChannels(loader, (rasterLayers[index] || {}).use3d);\n    const newLayer = __spreadProps(__spreadValues({\n      index,\n      modelMatrix: (_c = (_b2 = (_a2 = imageLayerMeta[index]) == null ? void 0 : _a2.metadata) == null ? void 0 : _b2.transform) == null ? void 0 : _c.matrix\n    }, DEFAULT_RASTER_LAYER_PROPS), {\n      channels: newChannels,\n      type: ((_e = (_d = imageLayerMeta[index]) == null ? void 0 : _d.metadata) == null ? void 0 : _e.isBitmask) ? \"bitmask\" : \"raster\"\n    });\n    const newLayers = [...rasterLayers, newLayer];\n    setRasterLayers(newLayers);\n  }), [imageLayerLoaders, imageLayerMeta, rasterLayers, setRasterLayers]);\n  const handleRasterLayerChange = useCallback13((newLayer, i) => {\n    const newLayers = [...rasterLayers];\n    newLayers[i] = newLayer;\n    setRasterLayers(newLayers);\n  }, [rasterLayers, setRasterLayers]);\n  const handleRasterLayerRemove = useCallback13((i) => {\n    const newLayers = [...rasterLayers];\n    newLayers.splice(i, 1);\n    setRasterLayers(newLayers);\n  }, [rasterLayers, setRasterLayers]);\n  const hasNoBitmask = (imageLayerMeta.length ? imageLayerMeta : [{ metadata: { isBitmask: true } }]).every((l) => {\n    var _a2;\n    return !((_a2 = l == null ? void 0 : l.metadata) == null ? void 0 : _a2.isBitmask);\n  });\n  const canShowCellVecmask = hasNoBitmask;\n  const layerIs3DIndex = (rasterLayers == null ? void 0 : rasterLayers.findIndex) && rasterLayers.findIndex((layer) => layer.use3d);\n  return /* @__PURE__ */ React62.createElement(LayerControllerMemoized, {\n    ref: layerControllerRef,\n    title: title16,\n    removeGridComponent,\n    theme,\n    isReady,\n    moleculesLayer,\n    dataset,\n    setMoleculesLayer,\n    cellsLayer,\n    canShowCellVecmask,\n    setCellsLayer,\n    rasterLayers,\n    imageLayerLoaders,\n    imageLayerMeta,\n    rasterLayersCallbacks,\n    setRasterLayersCallbacks,\n    areLoadingRasterChannnels,\n    setAreLoadingRasterChannnels,\n    handleRasterLayerChange,\n    handleRasterLayerRemove,\n    disable3d,\n    globalDisable3d,\n    layerIs3DIndex,\n    disableChannelsIfRgbDetected,\n    enableLayerButtonsWithOneLayer,\n    setZoom,\n    setTargetX,\n    setTargetY,\n    setTargetZ,\n    setRotationX,\n    setRotationOrbit,\n    componentHeight: componentHeight || windowHeight,\n    componentWidth: componentWidth || windowWidth,\n    spatialLayout,\n    handleImageAdd\n  });\n}\nvar LayerControllerSubscriber_default = LayerControllerSubscriber;\n\n// src/components/higlass/HiGlassSubscriber.js\nimport React64 from \"react\";\n\n// src/components/higlass/HiGlassLazy.js\nimport React63, {\n  useMemo as useMemo11,\n  useEffect as useEffect20,\n  useRef as useRef10,\n  Suspense,\n  useState as useState20\n} from \"react\";\nimport ReactDOM from \"react-dom\";\nimport dynamicImportPolyfill from \"dynamic-import-polyfill\";\nimport register from \"higlass-register\";\nimport { ZarrMultivecDataFetcher } from \"higlass-zarr-datafetchers\";\nvar PIXI_BUNDLE_VERSION = package_default.dependencies[\"window-pixi\"];\nvar HIGLASS_BUNDLE_VERSION = package_default.dependencies.higlass;\nvar BUNDLE_FILE_EXT = true ? \"js\" : \"min.js\";\nvar PIXI_BUNDLE_URL = `https://unpkg.com/window-pixi@${PIXI_BUNDLE_VERSION}/dist/pixi.${BUNDLE_FILE_EXT}`;\nvar HIGLASS_BUNDLE_URL = `https://unpkg.com/higlass@${HIGLASS_BUNDLE_VERSION}/dist/hglib.${BUNDLE_FILE_EXT}`;\ndynamicImportPolyfill.initialize();\nregister({ dataFetcher: ZarrMultivecDataFetcher, config: ZarrMultivecDataFetcher.config }, { pluginType: \"dataFetcher\" });\nvar HiGlassComponent = React63.lazy(() => {\n  if (!window.React) {\n    window.React = React63;\n  }\n  if (!window.ReactDOM) {\n    window.ReactDOM = ReactDOM;\n  }\n  return new Promise((resolve) => {\n    const handleImportError = (e) => {\n      console.warn(e);\n      resolve(asEsModule(createWarningComponent({\n        title: \"Could not load HiGlass\",\n        message: \"The HiGlass scripts could not be dynamically imported.\"\n      })));\n    };\n    __import__(PIXI_BUNDLE_URL).then(() => {\n      __import__(HIGLASS_BUNDLE_URL).then(() => {\n        resolve(asEsModule(window.hglib.HiGlassComponent));\n      }).catch(handleImportError);\n    }).catch(handleImportError);\n  });\n});\nvar HG_SIZE = 800;\nfunction HiGlassLazy(props) {\n  const {\n    coordinationScopes,\n    theme,\n    hgViewConfig: hgViewConfigProp,\n    hgOptions: hgOptionsProp,\n    genomeSize,\n    height\n  } = props;\n  const [{\n    genomicZoomX,\n    genomicZoomY,\n    genomicTargetX,\n    genomicTargetY\n  }, {\n    setGenomicZoomX,\n    setGenomicZoomY,\n    setGenomicTargetX,\n    setGenomicTargetY\n  }] = useCoordination(COMPONENT_COORDINATION_TYPES.higlass, coordinationScopes);\n  const [width, computedHeight, containerRef] = useGridItemSize();\n  const [hgInstance, setHgInstance] = useState20();\n  const isActiveRef = useRef10();\n  const hgOptions = useMemo11(() => __spreadProps(__spreadValues({}, hgOptionsProp), {\n    theme\n  }), [hgOptionsProp, theme]);\n  const hgViewConfig = useMemo11(() => {\n    const centerX = genomicTargetX;\n    const genomesPerUnitX = genomeSize / __pow(2, genomicZoomX);\n    const unitX = width / HG_SIZE;\n    const initialXDomain = [\n      centerX - genomesPerUnitX * unitX / 2,\n      centerX + genomesPerUnitX * unitX / 2\n    ];\n    const centerY = genomicTargetY;\n    const genomesPerUnitY = genomeSize / __pow(2, genomicZoomY);\n    const unitY = height / HG_SIZE;\n    const initialYDomain = [\n      centerY - genomesPerUnitY * unitY / 2,\n      centerY + genomesPerUnitY * unitY / 2\n    ];\n    return {\n      editable: false,\n      zoomFixed: false,\n      trackSourceServers: [\n        \"//higlass.io/api/v1\"\n      ],\n      exportViewUrl: \"//higlass.io/api/v1/viewconfs\",\n      views: [\n        __spreadProps(__spreadValues({\n          uid: \"main\"\n        }, hgViewConfigProp), {\n          initialXDomain,\n          initialYDomain\n        })\n      ],\n      zoomLocks: {\n        locksByViewUid: {},\n        locksDict: {}\n      },\n      locationLocks: {\n        locksByViewUid: {},\n        locksDict: {}\n      },\n      valueScaleLocks: {\n        locksByViewUid: {},\n        locksDict: {}\n      }\n    };\n  }, [\n    genomicTargetX,\n    genomeSize,\n    genomicZoomX,\n    width,\n    genomicTargetY,\n    genomicZoomY,\n    height,\n    hgViewConfigProp\n  ]);\n  useEffect20(() => {\n    const handleMouseEnter = () => {\n      isActiveRef.current = true;\n    };\n    const handleMouseLeave = () => {\n      isActiveRef.current = false;\n    };\n    const container = containerRef.current;\n    container.addEventListener(\"mouseenter\", handleMouseEnter);\n    container.addEventListener(\"mouseleave\", handleMouseLeave);\n    return () => {\n      container.removeEventListener(\"mouseenter\", handleMouseEnter);\n      container.removeEventListener(\"mouseenter\", handleMouseLeave);\n    };\n  }, [containerRef]);\n  useEffect20(() => {\n    if (!hgInstance) {\n      return () => {\n      };\n    }\n    hgInstance.api.on(\"viewConfig\", (viewConfigString) => {\n      if (!isActiveRef.current) {\n        return;\n      }\n      const viewConfig = JSON.parse(viewConfigString);\n      const xDomain = viewConfig.views[0].initialXDomain;\n      const yDomain = viewConfig.views[0].initialYDomain;\n      const nextGenomicZoomX = Math.log2(genomeSize / ((xDomain[1] - xDomain[0]) * (HG_SIZE / width)));\n      const nextGenomicZoomY = Math.log2(genomeSize / ((yDomain[1] - yDomain[0]) * (HG_SIZE / height)));\n      const nextGenomicTargetX = xDomain[0] + (xDomain[1] - xDomain[0]) / 2;\n      const nextGenomicTargetY = yDomain[0] + (yDomain[1] - yDomain[0]) / 2;\n      setGenomicZoomX(nextGenomicZoomX);\n      setGenomicZoomY(nextGenomicZoomY);\n      setGenomicTargetX(nextGenomicTargetX);\n      setGenomicTargetY(nextGenomicTargetY);\n    });\n    return () => hgInstance.api.off(\"viewConfig\");\n  }, [\n    hgInstance,\n    genomeSize,\n    width,\n    height,\n    setGenomicZoomX,\n    setGenomicZoomY,\n    setGenomicTargetX,\n    setGenomicTargetY\n  ]);\n  return /* @__PURE__ */ React63.createElement(\"div\", {\n    className: \"higlass-wrapper-parent\"\n  }, /* @__PURE__ */ React63.createElement(\"div\", {\n    className: \"higlass-wrapper\",\n    ref: containerRef,\n    style: { height: `${height}px` }\n  }, /* @__PURE__ */ React63.createElement(Suspense, {\n    fallback: /* @__PURE__ */ React63.createElement(\"div\", null, \"Loading...\")\n  }, /* @__PURE__ */ React63.createElement(HiGlassComponent, {\n    ref: setHgInstance,\n    zoomFixed: false,\n    viewConfig: hgViewConfig,\n    options: hgOptions\n  }))));\n}\nHiGlassLazy.defaultProps = {\n  hgOptions: {\n    bounded: true,\n    pixelPreciseMarginPadding: true,\n    containerPaddingX: 0,\n    containerPaddingY: 0,\n    sizeMode: \"default\"\n  },\n  genomeSize: 31e8\n};\n\n// src/components/higlass/HiGlassSubscriber.js\nvar HIGLASS_DATA_TYPES = [];\nfunction HiGlassSubscriber(props) {\n  const {\n    coordinationScopes,\n    theme,\n    hgViewConfig,\n    removeGridComponent\n  } = props;\n  const [width, height, containerRef] = useGridItemSize();\n  const [\n    isReady,\n    setItemIsReady,\n    setItemIsNotReady,\n    resetReadyItems\n  ] = useReady(HIGLASS_DATA_TYPES);\n  const [urls, addUrl, resetUrls] = useUrls();\n  return /* @__PURE__ */ React64.createElement(\"div\", {\n    className: \"higlass-title-wrapper\"\n  }, /* @__PURE__ */ React64.createElement(TitleInfo, {\n    title: \"HiGlass\",\n    removeGridComponent,\n    theme,\n    isReady,\n    urls\n  }, /* @__PURE__ */ React64.createElement(\"div\", {\n    className: \"higlass-lazy-wrapper\",\n    ref: containerRef\n  }, /* @__PURE__ */ React64.createElement(HiGlassLazy, {\n    coordinationScopes,\n    theme,\n    hgViewConfig,\n    height\n  }))));\n}\n\n// src/components/sets/CellSetSizesPlotSubscriber.js\nimport React67, { useMemo as useMemo13, useEffect as useEffect21 } from \"react\";\n\n// src/components/sets/CellSetSizesPlot.js\nimport React66 from \"react\";\nimport clamp4 from \"lodash/clamp\";\n\n// src/components/vega/VegaPlot.js\nimport React65, { Suspense as Suspense2, useMemo as useMemo12 } from \"react\";\nimport { Handler } from \"vega-tooltip\";\n\n// src/components/vega/ReactVega.js\nimport { Vega } from \"react-vega\";\n\n// src/components/vega/VegaPlot.js\nvar DATASET_NAME = \"table\";\nfunction isVega(spec) {\n  return spec.$schema === \"https://vega.github.io/schema/vega/v5.json\";\n}\nfunction VegaPlot(props) {\n  const {\n    spec: partialSpec,\n    data,\n    signalListeners\n  } = props;\n  const spec = __spreadProps(__spreadValues({}, partialSpec), {\n    data: isVega(partialSpec) ? [\n      { name: DATASET_NAME },\n      ...partialSpec.data\n    ] : { name: DATASET_NAME }\n  });\n  const vegaComponent = useMemo12(() => /* @__PURE__ */ React65.createElement(Vega, {\n    spec,\n    data: {\n      [DATASET_NAME]: data\n    },\n    signalListeners,\n    tooltip: new Handler().call,\n    renderer: \"canvas\",\n    scaleFactor: 3\n  }), [spec, data, signalListeners]);\n  return spec && data && data.length > 0 ? /* @__PURE__ */ React65.createElement(Suspense2, {\n    fallback: /* @__PURE__ */ React65.createElement(\"div\", null, \"Loading...\")\n  }, vegaComponent) : null;\n}\n\n// src/components/vega/utils.js\nvar VEGA_THEMES = {\n  dark: {\n    background: null,\n    title: { color: \"#fff\" },\n    style: {\n      \"guide-label\": {\n        fill: \"#fff\"\n      },\n      \"guide-title\": {\n        fill: \"#fff\"\n      }\n    },\n    axis: {\n      domainColor: \"#fff\",\n      gridColor: \"#888\",\n      tickColor: \"#fff\"\n    }\n  },\n  light: {\n    background: null\n  }\n};\n\n// src/components/sets/CellSetSizesPlot.js\nfunction CellSetSizesPlot(props) {\n  const {\n    data: rawData,\n    theme,\n    width,\n    height,\n    marginRight = 90,\n    marginBottom = 120,\n    keyLength = 36\n  } = props;\n  const data = rawData.map((d) => __spreadProps(__spreadValues({}, d), {\n    keyName: d.key + d.name,\n    colorString: colorArrayToString(d.color)\n  }));\n  const colors = {\n    domain: data.map((d) => d.key),\n    range: data.map((d) => d.colorString)\n  };\n  const keys = data.map((d) => d.keyName);\n  const spec = {\n    mark: { type: \"bar\" },\n    encoding: {\n      x: {\n        field: \"keyName\",\n        type: \"nominal\",\n        axis: { labelExpr: `substring(datum.label, ${keyLength})` },\n        title: \"Cell Set\",\n        sort: keys\n      },\n      y: {\n        field: \"size\",\n        type: \"quantitative\",\n        title: \"Cell Set Size\"\n      },\n      color: {\n        field: \"key\",\n        type: \"nominal\",\n        scale: colors,\n        legend: null\n      },\n      tooltip: {\n        field: \"size\",\n        type: \"quantitative\"\n      }\n    },\n    width: clamp4(width - marginRight, 10, Infinity),\n    height: clamp4(height - marginBottom, 10, Infinity),\n    config: VEGA_THEMES[theme]\n  };\n  return /* @__PURE__ */ React66.createElement(VegaPlot, {\n    data,\n    spec\n  });\n}\n\n// src/components/sets/CellSetSizesPlotSubscriber.js\nvar CELL_SET_SIZES_DATA_TYPES = [\"cell-sets\"];\nfunction CellSetSizesPlotSubscriber(props) {\n  const {\n    coordinationScopes,\n    removeGridComponent,\n    theme,\n    title: title16 = \"Cell Set Sizes\"\n  } = props;\n  const loaders = useLoaders();\n  const [{\n    dataset,\n    cellSetSelection,\n    cellSetColor,\n    additionalCellSets\n  }, {\n    setCellSetSelection,\n    setCellSetColor\n  }] = useCoordination(COMPONENT_COORDINATION_TYPES.cellSetSizes, coordinationScopes);\n  const [width, height, containerRef] = useGridItemSize();\n  const [urls, addUrl, resetUrls] = useUrls();\n  const [\n    isReady,\n    setItemIsReady,\n    setItemIsNotReady,\n    resetReadyItems\n  ] = useReady(CELL_SET_SIZES_DATA_TYPES);\n  useEffect21(() => {\n    resetUrls();\n    resetReadyItems();\n  }, [loaders, dataset]);\n  const [cellSets] = useCellSetsData(loaders, dataset, setItemIsReady, addUrl, true, { setCellSetSelection, setCellSetColor }, { cellSetSelection, cellSetColor });\n  const mergedCellSets = useMemo13(() => mergeCellSets(cellSets, additionalCellSets), [cellSets, additionalCellSets]);\n  const data = useMemo13(() => mergedCellSets && cellSetSelection && cellSetColor ? treeToSetSizesBySetNames(mergedCellSets, cellSetSelection, cellSetColor, theme) : [], [mergedCellSets, cellSetSelection, cellSetColor, theme]);\n  return /* @__PURE__ */ React67.createElement(TitleInfo, {\n    title: title16,\n    removeGridComponent,\n    urls,\n    theme,\n    isReady\n  }, /* @__PURE__ */ React67.createElement(\"div\", {\n    ref: containerRef,\n    className: \"vega-container\"\n  }, /* @__PURE__ */ React67.createElement(CellSetSizesPlot, {\n    data,\n    theme,\n    width,\n    height\n  })));\n}\n\n// src/components/higlass/GenomicProfilesSubscriber.js\nimport React68, {\n  useMemo as useMemo14,\n  useEffect as useEffect22\n} from \"react\";\nimport isEqual13 from \"lodash/isEqual\";\nimport { sum as sum2 } from \"d3-array\";\nvar GENOMIC_PROFILES_DATA_TYPES = [\"genomic-profiles\"];\nvar REFERENCE_TILESETS = {\n  hg38: {\n    chromosomes: \"NyITQvZsS_mOFNlz5C2LJg\",\n    genes: \"P0PLbQMwTYGy-5uPIQid7A\"\n  },\n  hg19: {\n    chromosomes: \"N12wVGG9SPiTkk03yUayUw\",\n    genes: \"OHJakQICQD6gTD7skx4EWA\"\n  },\n  mm9: {\n    chromosomes: \"WAVhNHYxQVueq6KulwgWiQ\",\n    genes: \"GUm5aBiLRCyz2PsBea7Yzg\"\n  },\n  mm10: {\n    chromosomes: \"EtrWT0VtScixmsmwFSd7zg\",\n    genes: \"QDutvmyiSrec5nX4pA5WGQ\"\n  }\n};\nfunction GenomicProfilesSubscriber(props) {\n  const {\n    coordinationScopes,\n    theme,\n    removeGridComponent,\n    profileTrackUidKey = \"path\",\n    profileTrackNameKey = null,\n    higlassServer = \"https://higlass.io/api/v1\",\n    assembly = \"hg38\",\n    title: title16 = \"Genomic Profiles\"\n  } = props;\n  const [width, height, containerRef] = useGridItemSize();\n  const loaders = useLoaders();\n  const [{\n    dataset,\n    cellSetColor,\n    cellSetSelection\n  }] = useCoordination(COMPONENT_COORDINATION_TYPES.genomicProfiles, coordinationScopes);\n  const [\n    isReady,\n    setItemIsReady,\n    setItemIsNotReady,\n    resetReadyItems\n  ] = useReady(GENOMIC_PROFILES_DATA_TYPES);\n  const [urls, addUrl, resetUrls] = useUrls();\n  const [genomicProfilesAttrs] = useGenomicProfilesData(loaders, dataset, setItemIsReady, addUrl, true);\n  const hgViewConfig = useMemo14(() => {\n    if (!genomicProfilesAttrs || urls.length !== 1) {\n      return null;\n    }\n    const { url } = urls[0];\n    const foregroundColor = theme === \"dark\" ? \"#C0C0C0\" : \"#000000\";\n    const backgroundColor = theme === \"dark\" ? \"#000000\" : \"#f1f1f1\";\n    const dimColor = theme === \"dark\" ? \"dimgray\" : \"silver\";\n    const referenceTracks = [\n      {\n        type: \"horizontal-chromosome-labels\",\n        server: higlassServer,\n        tilesetUid: REFERENCE_TILESETS[assembly].chromosomes,\n        uid: \"chromosome-labels\",\n        options: {\n          color: foregroundColor,\n          fontSize: 12,\n          fontIsLeftAligned: false,\n          showMousePosition: true,\n          mousePositionColor: foregroundColor\n        },\n        height: 30\n      },\n      {\n        type: \"horizontal-gene-annotations\",\n        server: higlassServer,\n        tilesetUid: REFERENCE_TILESETS[assembly].genes,\n        uid: \"gene-annotations\",\n        options: {\n          name: \"Gene Annotations (hg38)\",\n          fontSize: 10,\n          labelPosition: \"hidden\",\n          labelLeftMargin: 0,\n          labelRightMargin: 0,\n          labelTopMargin: 0,\n          labelBottomMargin: 0,\n          minHeight: 24,\n          geneAnnotationHeight: 16,\n          geneLabelPosition: \"outside\",\n          geneStrandSpacing: 4,\n          showMousePosition: true,\n          mousePositionColor: foregroundColor,\n          plusStrandColor: foregroundColor,\n          minusStrandColor: foregroundColor,\n          labelColor: \"black\",\n          labelBackgroundColor: backgroundColor,\n          trackBorderWidth: 0,\n          trackBorderColor: \"black\"\n        },\n        height: 70\n      }\n    ];\n    const referenceTracksHeightSum = sum2(referenceTracks.map((t) => t.height));\n    const profileTracksHeightSum = height - referenceTracksHeightSum - 10;\n    const profileTrackHeight = profileTracksHeightSum / genomicProfilesAttrs.row_infos.length;\n    const profileTracks = genomicProfilesAttrs.row_infos.map((rowInfo, i) => {\n      var _a2;\n      const trackUid = rowInfo[profileTrackUidKey];\n      const isPath = Array.isArray(trackUid);\n      const trackName = profileTrackNameKey ? rowInfo[profileTrackNameKey] : isPath ? trackUid[trackUid.length - 1] : trackUid;\n      const setInSelection = isPath ? cellSetSelection == null ? void 0 : cellSetSelection.find((s) => isEqual13(s, trackUid)) : false;\n      const setColor = isPath ? (_a2 = cellSetColor == null ? void 0 : cellSetColor.find((s) => isEqual13(s.path, trackUid))) == null ? void 0 : _a2.color : null;\n      const trackUidString = isPath ? trackUid.join(\"__\") : trackUid;\n      const track = {\n        type: \"horizontal-bar\",\n        uid: `bar-track-${trackUidString}`,\n        data: {\n          type: \"zarr-multivec\",\n          url,\n          row: i\n        },\n        options: {\n          name: trackName,\n          showMousePosition: true,\n          mousePositionColor: foregroundColor,\n          labelColor: theme === \"dark\" ? \"white\" : \"black\",\n          labelBackgroundColor: theme === \"dark\" ? \"black\" : \"white\",\n          labelShowAssembly: false\n        },\n        height: profileTrackHeight\n      };\n      if (setColor && setInSelection) {\n        const c = setColor;\n        track.options.barFillColor = `rgb(${c[0]},${c[1]},${c[2]})`;\n      } else {\n        track.options.barFillColor = dimColor;\n      }\n      return track;\n    });\n    const hgView = {\n      tracks: {\n        top: [\n          ...referenceTracks,\n          ...profileTracks\n        ],\n        left: [],\n        center: [],\n        right: [],\n        bottom: [],\n        whole: [],\n        gallery: []\n      },\n      layout: {\n        w: 12,\n        h: 12,\n        x: 0,\n        y: 0,\n        static: false\n      }\n    };\n    return hgView;\n  }, [\n    genomicProfilesAttrs,\n    urls,\n    theme,\n    height,\n    profileTrackUidKey,\n    profileTrackNameKey,\n    cellSetSelection,\n    cellSetColor,\n    higlassServer,\n    assembly\n  ]);\n  useEffect22(() => {\n    resetUrls();\n    resetReadyItems();\n  }, [loaders, dataset]);\n  return /* @__PURE__ */ React68.createElement(\"div\", {\n    className: \"higlass-title-wrapper\"\n  }, /* @__PURE__ */ React68.createElement(TitleInfo, {\n    title: title16,\n    removeGridComponent,\n    theme,\n    isReady,\n    urls\n  }, /* @__PURE__ */ React68.createElement(\"div\", {\n    className: \"higlass-lazy-wrapper\",\n    ref: containerRef\n  }, hgViewConfig ? /* @__PURE__ */ React68.createElement(HiGlassLazy, {\n    coordinationScopes,\n    theme,\n    hgViewConfig,\n    height\n  }) : null)));\n}\n\n// src/components/genes/ExpressionHistogramSubscriber.js\nimport React70, { useMemo as useMemo15, useEffect as useEffect23 } from \"react\";\nimport { sum as sum3 } from \"d3-array\";\n\n// src/components/genes/ExpressionHistogram.js\nimport React69 from \"react\";\nimport clamp5 from \"lodash/clamp\";\nfunction ExpressionHistogram(props) {\n  const {\n    geneSelection,\n    data,\n    theme,\n    width,\n    height,\n    marginRight = 90,\n    marginBottom = 50\n  } = props;\n  const xTitle = geneSelection && geneSelection.length >= 1 ? \"Normalized Expression Value\" : \"Total Normalized Transcript Count\";\n  const spec = {\n    mark: { type: \"bar\" },\n    encoding: {\n      x: {\n        field: \"value\",\n        type: \"quantitative\",\n        bin: { maxbins: 50 },\n        title: xTitle\n      },\n      y: {\n        type: \"quantitative\",\n        aggregate: \"count\",\n        title: \"Number of Cells\"\n      },\n      color: { value: \"gray\" }\n    },\n    width: clamp5(width - marginRight, 10, Infinity),\n    height: clamp5(height - marginBottom, 10, Infinity),\n    config: VEGA_THEMES[theme]\n  };\n  return /* @__PURE__ */ React69.createElement(VegaPlot, {\n    data,\n    spec\n  });\n}\n\n// src/components/genes/ExpressionHistogramSubscriber.js\nvar EXPRESSION_HISTOGRAM_DATA_TYPES = [\"expression-matrix\"];\nfunction ExpressionHistogramSubscriber(props) {\n  const {\n    coordinationScopes,\n    removeGridComponent,\n    theme\n  } = props;\n  const loaders = useLoaders();\n  const [{\n    dataset,\n    geneSelection\n  }] = useCoordination(COMPONENT_COORDINATION_TYPES.expressionHistogram, coordinationScopes);\n  const [width, height, containerRef] = useGridItemSize();\n  const [urls, addUrl, resetUrls] = useUrls();\n  const [\n    isReady,\n    setItemIsReady,\n    setItemIsNotReady,\n    resetReadyItems\n  ] = useReady(EXPRESSION_HISTOGRAM_DATA_TYPES);\n  useEffect23(() => {\n    resetUrls();\n    resetReadyItems();\n  }, [loaders, dataset]);\n  const [expressionMatrix] = useExpressionMatrixData(loaders, dataset, setItemIsReady, addUrl, true);\n  const [expressionData] = useGeneSelection(loaders, dataset, setItemIsReady, false, geneSelection, setItemIsNotReady);\n  const firstGeneSelected = geneSelection && geneSelection.length >= 1 ? geneSelection[0] : null;\n  const data = useMemo15(() => {\n    if (firstGeneSelected && expressionMatrix && expressionData) {\n      return Array.from(expressionData[0]).map((_, index) => {\n        const value = expressionData[0][index];\n        const normValue = value * 100 / 255;\n        return { value: normValue, gene: firstGeneSelected };\n      });\n    }\n    if (expressionMatrix) {\n      const numGenes = expressionMatrix.cols.length;\n      return expressionMatrix.rows.map((cellId, cellIndex) => {\n        const values = expressionMatrix.matrix.subarray(cellIndex * numGenes, (cellIndex + 1) * numGenes);\n        const sumValue = sum3(values) * 100 / 255;\n        return { value: sumValue, gene: null };\n      });\n    }\n    return null;\n  }, [expressionMatrix, firstGeneSelected, expressionData]);\n  return /* @__PURE__ */ React70.createElement(TitleInfo, {\n    title: `Expression Histogram${firstGeneSelected ? ` (${firstGeneSelected})` : \"\"}`,\n    removeGridComponent,\n    urls,\n    theme,\n    isReady\n  }, /* @__PURE__ */ React70.createElement(\"div\", {\n    ref: containerRef,\n    className: \"vega-container\"\n  }, /* @__PURE__ */ React70.createElement(ExpressionHistogram, {\n    geneSelection,\n    data,\n    theme,\n    width,\n    height\n  })));\n}\n\n// src/components/sets/CellSetExpressionPlotSubscriber.js\nimport React73, { useEffect as useEffect24, useReducer as useReducer2 } from \"react\";\n\n// src/components/sets/hooks.js\nimport { useMemo as useMemo16 } from \"react\";\nfunction useExpressionByCellSet(expressionData, expressionDataAttrs, cellSets, additionalCellSets, geneSelection, cellSetSelection, cellSetColor, useGeneExpressionTransform, theme) {\n  const mergedCellSets = useMemo16(() => mergeCellSets(cellSets, additionalCellSets), [cellSets, additionalCellSets]);\n  const [expressionArr, expressionMax] = useMemo16(() => {\n    if (mergedCellSets && cellSetSelection && geneSelection && geneSelection.length >= 1 && expressionData) {\n      const cellObjects = treeToObjectsBySetNames(mergedCellSets, cellSetSelection, cellSetColor, theme);\n      const firstGeneSelected = geneSelection[0];\n      let exprMax = -Infinity;\n      const cellIndices = {};\n      for (let i = 0; i < expressionDataAttrs.rows.length; i += 1) {\n        cellIndices[expressionDataAttrs.rows[i]] = i;\n      }\n      const exprValues = cellObjects.map((cell) => {\n        const cellIndex = cellIndices[cell.obsId];\n        const value = expressionData[0][cellIndex];\n        const normValue = value * 100 / 255;\n        const transformedValue = useGeneExpressionTransform ? Math.log(1 + normValue) : normValue;\n        exprMax = Math.max(transformedValue, exprMax);\n        return { value: transformedValue, gene: firstGeneSelected, set: cell.name };\n      });\n      return [exprValues, exprMax];\n    }\n    return [null, null];\n  }, [\n    expressionData,\n    expressionDataAttrs,\n    geneSelection,\n    theme,\n    mergedCellSets,\n    cellSetSelection,\n    cellSetColor,\n    useGeneExpressionTransform\n  ]);\n  const setArr = useMemo16(() => mergedCellSets && cellSetSelection && cellSetColor ? treeToSetSizesBySetNames(mergedCellSets, cellSetSelection, cellSetColor, theme) : [], [mergedCellSets, cellSetSelection, cellSetColor, theme]);\n  return [expressionArr, setArr, expressionMax];\n}\n\n// src/components/sets/CellSetExpressionPlotOptions.js\nimport React71 from \"react\";\nimport Checkbox6 from \"@material-ui/core/Checkbox\";\nimport TableCell5 from \"@material-ui/core/TableCell\";\nimport TableRow5 from \"@material-ui/core/TableRow\";\nfunction CellSetExpressionPlotOptions(props) {\n  const { toggleGeneExpressionTransform, useGeneExpressionTransform } = props;\n  const classes = useStyles2();\n  function handleGeneExpressionTransformChange() {\n    toggleGeneExpressionTransform();\n  }\n  return /* @__PURE__ */ React71.createElement(OptionsContainer, null, /* @__PURE__ */ React71.createElement(TableRow5, null, /* @__PURE__ */ React71.createElement(TableCell5, {\n    className: classes.labelCell\n  }, \"Log Transform\"), /* @__PURE__ */ React71.createElement(TableCell5, {\n    className: classes.inputCell\n  }, /* @__PURE__ */ React71.createElement(Checkbox6, {\n    className: classes.checkbox,\n    checked: Boolean(useGeneExpressionTransform),\n    onChange: handleGeneExpressionTransformChange,\n    name: \"scatterplot-option-cell-set-labels\",\n    color: \"default\"\n  }))));\n}\n\n// src/components/sets/CellSetExpressionPlot.js\nimport React72 from \"react\";\nimport clamp6 from \"lodash/clamp\";\nfunction CellSetExpressionPlot(props) {\n  const {\n    domainMax = 100,\n    colors,\n    data,\n    theme,\n    width,\n    height,\n    marginRight = 90,\n    marginBottom,\n    useGeneExpressionTransform\n  } = props;\n  const maxCharactersForLabel = data.reduce((acc, val) => {\n    acc = acc === void 0 || val.set.length > acc ? val.set.length : acc;\n    return acc;\n  }, 0);\n  const autoMarginBottom = marginBottom || 30 + Math.sqrt(maxCharactersForLabel / 2) * 30;\n  const colorScale = {\n    domain: colors.map((d) => d.name),\n    range: colors.map((d) => colorArrayToString(d.color))\n  };\n  const plotWidth = clamp6(width - marginRight, 10, Infinity);\n  const plotHeight = clamp6(height - autoMarginBottom, 10, Infinity);\n  const numBands = colors.length;\n  const bandWidth = plotWidth / numBands;\n  const rectColor = theme === \"dark\" ? \"white\" : \"black\";\n  const spec = {\n    $schema: \"https://vega.github.io/schema/vega/v5.json\",\n    description: \"A violin plot showing distributions of expression levels for selected cell sets.\",\n    width: plotWidth,\n    height: plotHeight,\n    config: __spreadProps(__spreadValues({}, VEGA_THEMES[theme]), {\n      axisBand: {\n        bandPosition: 1,\n        tickExtra: true,\n        tickOffset: 0\n      }\n    }),\n    signals: [\n      { name: \"bandWidth\", value: bandWidth },\n      { name: \"width\", value: plotWidth },\n      { name: \"height\", value: plotHeight },\n      { name: \"trim\", value: true }\n    ],\n    data: [\n      {\n        name: \"density\",\n        source: DATASET_NAME,\n        transform: [\n          {\n            type: \"kde\",\n            field: \"value\",\n            groupby: [\"set\"],\n            bandwidth: 0,\n            extent: [0, domainMax]\n          }\n        ]\n      },\n      {\n        name: \"stats\",\n        source: DATASET_NAME,\n        transform: [\n          {\n            type: \"aggregate\",\n            groupby: [\"set\"],\n            fields: [\"value\", \"value\", \"value\"],\n            ops: [\"q1\", \"median\", \"q3\"],\n            as: [\"q1\", \"median\", \"q3\"]\n          }\n        ]\n      }\n    ],\n    scales: [\n      {\n        name: \"layout\",\n        type: \"band\",\n        range: \"width\",\n        domain: { data: DATASET_NAME, field: \"set\" }\n      },\n      {\n        name: \"yscale\",\n        type: \"linear\",\n        range: \"height\",\n        domain: [0, domainMax]\n      },\n      {\n        name: \"wscale\",\n        type: \"linear\",\n        range: [0, { signal: \"bandWidth\" }],\n        domain: { data: \"density\", field: \"density\" }\n      },\n      {\n        name: \"wscaleReversed\",\n        type: \"linear\",\n        reverse: true,\n        range: [0, { signal: \"bandWidth\" }],\n        domain: { data: \"density\", field: \"density\" }\n      },\n      __spreadValues({\n        name: \"color\",\n        type: \"ordinal\"\n      }, colorScale)\n    ],\n    axes: [\n      {\n        orient: \"left\",\n        scale: \"yscale\",\n        zindex: 1,\n        title: useGeneExpressionTransform ? [\"Log-Transformed\", \"Normalized Expression Values\"] : \"Normalized Expression Values\"\n      },\n      {\n        orient: \"bottom\",\n        scale: \"layout\",\n        tickCount: 5,\n        zindex: 1,\n        title: \"Cell Set\",\n        labelAngle: -45,\n        labelAlign: \"right\"\n      }\n    ],\n    marks: [\n      {\n        type: \"group\",\n        from: {\n          facet: {\n            data: \"density\",\n            name: \"violin\",\n            groupby: \"set\"\n          }\n        },\n        encode: {\n          enter: {\n            xc: { scale: \"layout\", field: \"set\", band: 0.5 },\n            width: { signal: \"bandWidth\" },\n            height: { signal: \"height\" }\n          }\n        },\n        data: [\n          {\n            name: \"summary\",\n            source: \"stats\",\n            transform: [\n              {\n                type: \"filter\",\n                expr: \"datum.set === parent.set\"\n              }\n            ]\n          }\n        ],\n        marks: [\n          {\n            type: \"area\",\n            orient: \"vertical\",\n            from: { data: \"violin\" },\n            encode: {\n              enter: {\n                fill: { scale: \"color\", field: { parent: \"set\" } }\n              },\n              update: {\n                width: { scale: \"wscale\", field: \"density\" },\n                xc: { signal: \"bandWidth / 2\" },\n                y2: { scale: \"yscale\", field: \"value\" },\n                y: { scale: \"yscale\", value: 0 }\n              }\n            }\n          },\n          {\n            type: \"area\",\n            orient: \"vertical\",\n            from: { data: \"violin\" },\n            encode: {\n              enter: {\n                fill: { scale: \"color\", field: { parent: \"set\" } }\n              },\n              update: {\n                width: { scale: \"wscaleReversed\", field: \"density\" },\n                xc: { signal: \"bandWidth\" },\n                y2: { scale: \"yscale\", field: \"value\" },\n                y: { scale: \"yscale\", value: 0 }\n              }\n            }\n          },\n          {\n            type: \"rect\",\n            from: { data: \"summary\" },\n            encode: {\n              enter: {\n                fill: { value: rectColor },\n                width: { value: 2 }\n              },\n              update: {\n                y: { scale: \"yscale\", field: \"q1\" },\n                y2: { scale: \"yscale\", field: \"q3\" },\n                xc: { signal: \"bandWidth / 2\" }\n              }\n            }\n          },\n          {\n            type: \"rect\",\n            from: { data: \"summary\" },\n            encode: {\n              enter: {\n                fill: { value: rectColor },\n                height: { value: 2 },\n                width: { value: 8 }\n              },\n              update: {\n                y: { scale: \"yscale\", field: \"median\" },\n                xc: { signal: \"bandWidth / 2\" }\n              }\n            }\n          }\n        ]\n      }\n    ]\n  };\n  return /* @__PURE__ */ React72.createElement(VegaPlot, {\n    data,\n    spec\n  });\n}\n\n// src/components/sets/CellSetExpressionPlotSubscriber.js\nvar CELL_SET_EXPRESSION_DATA_TYPES = [\"cell-sets\", \"expression-matrix\"];\nfunction CellSetExpressionPlotSubscriber(props) {\n  const {\n    coordinationScopes,\n    removeGridComponent,\n    theme\n  } = props;\n  const loaders = useLoaders();\n  const [{\n    dataset,\n    geneSelection,\n    geneExpressionTransform,\n    cellSetSelection,\n    cellSetColor,\n    additionalCellSets\n  }, {\n    setGeneExpressionTransform\n  }] = useCoordination(COMPONENT_COORDINATION_TYPES.cellSetExpression, coordinationScopes);\n  const [width, height, containerRef] = useGridItemSize();\n  const [urls, addUrl, resetUrls] = useUrls();\n  const [\n    isReady,\n    setItemIsReady,\n    setItemIsNotReady,\n    resetReadyItems\n  ] = useReady(CELL_SET_EXPRESSION_DATA_TYPES);\n  const [useGeneExpressionTransform, toggleGeneExpressionTransform] = useReducer2((v) => {\n    const newValue = !v;\n    setGeneExpressionTransform(newValue ? \"log1p\" : null);\n    return newValue;\n  }, geneExpressionTransform);\n  useEffect24(() => {\n    resetUrls();\n    resetReadyItems();\n  }, [loaders, dataset]);\n  const [expressionData] = useGeneSelection(loaders, dataset, setItemIsReady, false, geneSelection, setItemIsNotReady);\n  const [attrs] = useExpressionAttrs(loaders, dataset, setItemIsReady, addUrl, false);\n  const [cellSets] = useCellSetsData(loaders, dataset, setItemIsReady, addUrl, true);\n  const [expressionArr, setArr, expressionMax] = useExpressionByCellSet(expressionData, attrs, cellSets, additionalCellSets, geneSelection, cellSetSelection, cellSetColor, useGeneExpressionTransform, theme);\n  const firstGeneSelected = geneSelection && geneSelection.length >= 1 ? geneSelection[0] : null;\n  return /* @__PURE__ */ React73.createElement(TitleInfo, {\n    title: `Expression by Cell Set${firstGeneSelected ? ` (${firstGeneSelected})` : \"\"}`,\n    removeGridComponent,\n    urls,\n    theme,\n    isReady,\n    options: /* @__PURE__ */ React73.createElement(CellSetExpressionPlotOptions, {\n      useGeneExpressionTransform,\n      toggleGeneExpressionTransform\n    })\n  }, /* @__PURE__ */ React73.createElement(\"div\", {\n    ref: containerRef,\n    className: \"vega-container\"\n  }, expressionArr ? /* @__PURE__ */ React73.createElement(CellSetExpressionPlot, {\n    domainMax: expressionMax,\n    colors: setArr,\n    data: expressionArr,\n    theme,\n    width,\n    height,\n    useGeneExpressionTransform\n  }) : /* @__PURE__ */ React73.createElement(\"span\", null, \"Select a gene.\")));\n}\n\n// src/app/component-registry.js\nvar registry = {\n  description: DescriptionSubscriber,\n  status: StatusSubscriber,\n  genes: GenesSubscriber,\n  cellSets: CellSetsManagerSubscriber,\n  scatterplot: ScatterplotSubscriber,\n  spatial: SpatialSubscriber,\n  heatmap: HeatmapSubscriber,\n  layerController: LayerControllerSubscriber_default,\n  cellSetSizes: CellSetSizesPlotSubscriber,\n  expressionHistogram: ExpressionHistogramSubscriber,\n  genomicProfiles: GenomicProfilesSubscriber,\n  cellSetExpression: CellSetExpressionPlotSubscriber,\n  higlass: HiGlassSubscriber\n};\nfunction getComponent(name2) {\n  const component = registry[name2];\n  if (component === void 0) {\n    throw new Error(`Could not find definition for \"${name2}\" in registry.`);\n  }\n  return registry[name2];\n}\n\n// src/app/view-config-utils.js\nfunction getExistingScopesForCoordinationType(config, coordinationType) {\n  var _a2;\n  const spaceScopes = Object.keys(((_a2 = config == null ? void 0 : config.coordinationSpace) == null ? void 0 : _a2[coordinationType]) || {});\n  const componentScopes = config.layout.map((c) => {\n    var _a3;\n    return (_a3 = c.coordinationScopes) == null ? void 0 : _a3[coordinationType];\n  });\n  return Array.from(new Set([...spaceScopes, ...componentScopes]));\n}\nfunction coordinateComponentsTogether(config, coordinationType, scopeValue) {\n  var _a2;\n  const scopeName = getNextScope(getExistingScopesForCoordinationType(config, coordinationType));\n  const newConfig = __spreadProps(__spreadValues({}, config), {\n    coordinationSpace: __spreadProps(__spreadValues({}, config.coordinationSpace), {\n      [coordinationType]: __spreadProps(__spreadValues({}, (_a2 = config == null ? void 0 : config.coordinationSpace) == null ? void 0 : _a2[coordinationType]), {\n        [scopeName]: scopeValue\n      })\n    }),\n    layout: config.layout.map((component) => {\n      var _a3;\n      return __spreadProps(__spreadValues({}, component), {\n        coordinationScopes: __spreadValues(__spreadValues({}, component.coordinationScopes), COMPONENT_COORDINATION_TYPES[component.component].includes(coordinationType) && !((_a3 = component.coordinationScopes) == null ? void 0 : _a3[coordinationType]) ? {\n          [coordinationType]: scopeName\n        } : {})\n      });\n    })\n  });\n  return newConfig;\n}\nfunction coordinateComponentsIndependent(config, coordinationType, scopeValue) {\n  const newConfig = __spreadProps(__spreadValues({}, config), {\n    layout: [...config.layout]\n  });\n  const newScopes = {};\n  newConfig.layout.forEach((component, i) => {\n    var _a2;\n    if (COMPONENT_COORDINATION_TYPES[component.component].includes(coordinationType) && !((_a2 = component.coordinationScopes) == null ? void 0 : _a2[coordinationType])) {\n      const scopeName = getNextScope([\n        ...getExistingScopesForCoordinationType(config, coordinationType),\n        ...Object.keys(newScopes)\n      ]);\n      newScopes[scopeName] = scopeValue;\n      newConfig.layout[i] = __spreadProps(__spreadValues({}, component), {\n        coordinationScopes: __spreadProps(__spreadValues({}, component.coordinationScopes), {\n          [coordinationType]: scopeName\n        })\n      });\n    }\n  });\n  newConfig.coordinationSpace = __spreadProps(__spreadValues({}, newConfig.coordinationSpace), {\n    [coordinationType]: __spreadValues(__spreadValues({}, newConfig.coordinationSpace[coordinationType]), newScopes)\n  });\n  return newConfig;\n}\nfunction initializeAuto(config) {\n  let newConfig = config;\n  const { layout, datasets } = newConfig;\n  Object.values(COORDINATION_TYPES).forEach((coordinationType) => {\n    const requiresCoordination = !layout.every((c) => {\n      var _a2;\n      return !COMPONENT_COORDINATION_TYPES[c.component].includes(coordinationType) || ((_a2 = c.coordinationScopes) == null ? void 0 : _a2[coordinationType]);\n    });\n    if (requiresCoordination) {\n      let defaultValue = DEFAULT_COORDINATION_VALUES[coordinationType];\n      if (coordinationType === \"dataset\" && datasets.length >= 1) {\n        defaultValue = datasets[0].uid;\n      }\n      if (AUTO_INDEPENDENT_COORDINATION_TYPES.includes(coordinationType)) {\n        newConfig = coordinateComponentsIndependent(newConfig, coordinationType, defaultValue);\n      } else {\n        newConfig = coordinateComponentsTogether(newConfig, coordinationType, defaultValue);\n      }\n    }\n  });\n  return newConfig;\n}\nfunction initialize(config) {\n  if (config.initStrategy === \"auto\") {\n    return initializeAuto(config);\n  }\n  return config;\n}\nfunction upgradeAndValidate(oldConfig) {\n  let nextConfig = oldConfig;\n  let fromVersion;\n  let upgradeFunction;\n  let validateFunction;\n  do {\n    fromVersion = nextConfig.version;\n    if (!Object.keys(SCHEMA_HANDLERS).includes(fromVersion)) {\n      return [{\n        title: \"Config validation failed\",\n        preformatted: \"Unknown config version.\"\n      }, false];\n    }\n    [validateFunction, upgradeFunction] = SCHEMA_HANDLERS[fromVersion];\n    const validLegacy = validateFunction(nextConfig);\n    if (!validLegacy) {\n      const failureReason = JSON.stringify(validateFunction.errors, null, 2);\n      return [{\n        title: \"Config validation failed\",\n        preformatted: failureReason\n      }, false];\n    }\n    if (upgradeFunction) {\n      nextConfig = upgradeFunction(nextConfig);\n    }\n  } while (upgradeFunction);\n  console.groupCollapsed(`\\u{1F684} Vitessce (${package_default.version}) view configuration`);\n  console.info(`data:,${JSON.stringify(nextConfig)}`);\n  console.info(JSON.stringify(nextConfig, null, 2));\n  console.groupEnd();\n  return [nextConfig, true];\n}\n\n// src/app/Vitessce.js\nvar generateClassName = createGenerateClassName({\n  disableGlobal: true\n});\nfunction Vitessce(props) {\n  const {\n    config,\n    rowHeight,\n    height,\n    theme,\n    onWarn,\n    onConfigChange,\n    onLoaderChange,\n    validateOnConfigChange = false\n  } = props;\n  const [configOrWarning, success] = useMemo17(() => {\n    if (!config) {\n      return [{\n        title: \"No such dataset\",\n        unformatted: \"The dataset configuration could not be found.\"\n      }, false];\n    }\n    if (!config.version) {\n      return [{\n        title: \"Missing version\",\n        unformatted: \"The dataset configuration is missing a version, preventing validation.\"\n      }, false];\n    }\n    const [upgradedConfig, upgradeSuccess] = upgradeAndValidate(config);\n    if (upgradeSuccess) {\n      const initializedConfig = initialize(upgradedConfig);\n      return [initializedConfig, true];\n    }\n    return [upgradedConfig, false];\n  }, [config]);\n  useEffect25(() => {\n    if (success && !isEqual14(configOrWarning, config) && onConfigChange) {\n      onConfigChange(configOrWarning);\n    }\n  }, [success, config, configOrWarning, onConfigChange]);\n  return success ? /* @__PURE__ */ React74.createElement(StylesProvider, {\n    generateClassName\n  }, /* @__PURE__ */ React74.createElement(ThemeProvider, {\n    theme: muiTheme[theme]\n  }, /* @__PURE__ */ React74.createElement(ViewConfigProvider, {\n    createStore: createViewConfigStore\n  }, /* @__PURE__ */ React74.createElement(AuxiliaryProvider, {\n    createStore: createAuxiliaryStore\n  }, /* @__PURE__ */ React74.createElement(VitessceGrid, {\n    config: configOrWarning,\n    getComponent,\n    rowHeight,\n    height,\n    theme\n  }), /* @__PURE__ */ React74.createElement(CallbackPublisher, {\n    onWarn,\n    onConfigChange,\n    onLoaderChange,\n    validateOnConfigChange\n  }))))) : /* @__PURE__ */ React74.createElement(Warning, __spreadValues({\n    theme\n  }, configOrWarning));\n}\n\n// src/app/app.js\nfunction AwaitResponse(props) {\n  const {\n    response,\n    theme\n  } = props;\n  const [isLoading, setIsLoading] = useState21(true);\n  const responseRef = useRef11();\n  useEffect26(() => {\n    response.then((c) => {\n      responseRef.current = c;\n      setIsLoading(false);\n    });\n  }, [response]);\n  return !isLoading ? React75.createElement(responseRef.current) : /* @__PURE__ */ React75.createElement(Warning, {\n    title: \"Loading...\",\n    theme\n  });\n}\nfunction preformattedDetails(response) {\n  return `\n    ok: ${response.ok}\n    status: ${response.status}\n    statusText: ${response.statusText}\n    redirected: ${response.redirected}\n    type: ${response.type}\n    url: ${response.url}`;\n}\nfunction checkResponse(response, theme, debug) {\n  if (!response.ok) {\n    return Promise.resolve(() => /* @__PURE__ */ React75.createElement(Warning, {\n      title: \"Fetch response not OK\",\n      preformatted: preformattedDetails(response),\n      theme\n    }));\n  }\n  return response.text().then((text) => {\n    try {\n      const config = JSON.parse(text);\n      return Promise.resolve(() => /* @__PURE__ */ React75.createElement(Vitessce, {\n        config,\n        theme,\n        onConfigChange: debug ? console.log : void 0,\n        validateOnConfigChange: debug\n      }));\n    } catch (e) {\n      return Promise.resolve(() => /* @__PURE__ */ React75.createElement(Warning, {\n        title: \"Error parsing JSON\",\n        preformatted: preformattedDetails(response),\n        unformatted: `${e.message}: ${text}`,\n        theme\n      }));\n    }\n  });\n}\nfunction validateTheme(theme) {\n  return [\"light\", \"dark\"].includes(theme) ? theme : \"dark\";\n}\nfunction createApp(params) {\n  const { rowHeight = null, showBetaHeader = false } = params;\n  const urlParams = new URLSearchParams(window.location.search);\n  const datasetId = urlParams.get(\"dataset\");\n  const debug = urlParams.get(\"debug\") === \"true\";\n  const datasetUrl = urlParams.get(\"url\");\n  const showAll = urlParams.get(\"show\") === \"all\";\n  const theme = validateTheme(urlParams.get(\"theme\"));\n  if (datasetId) {\n    const config = getConfig(datasetId);\n    return /* @__PURE__ */ React75.createElement(Vitessce, {\n      config,\n      rowHeight,\n      theme,\n      onConfigChange: debug ? console.log : void 0,\n      validateOnConfigChange: debug\n    });\n  }\n  if (datasetUrl) {\n    const responsePromise = fetch(datasetUrl).then((response) => checkResponse(response, theme, debug)).catch((error) => Promise.resolve(() => /* @__PURE__ */ React75.createElement(Warning, {\n      title: \"Error fetching\",\n      unformatted: error.message,\n      theme\n    })));\n    return /* @__PURE__ */ React75.createElement(AwaitResponse, {\n      response: responsePromise,\n      theme\n    });\n  }\n  const configs2 = listConfigs(showAll);\n  return /* @__PURE__ */ React75.createElement(Welcome, {\n    configs: configs2,\n    theme,\n    showBetaHeader\n  });\n}\n\n// src/app/export-utils.js\nimport Bowser from \"bowser\";\nimport { compressToEncodedURIComponent, decompressFromEncodedURIComponent } from \"lz-string\";\nvar CURRENT_VERSION = \"0.0.1\";\nvar VITESSCE_CONF_QUERY_STRING = \"vitessce_conf\";\nvar VERSION_QUERY_STRING = \"vitessce_conf_version\";\nvar LENGTH_QUERY_STRING = \"vitessce_conf_length\";\nfunction sniffBrowser() {\n  const { browser } = Bowser.parse(window.navigator.userAgent);\n  return browser.name;\n}\nvar MAX_BROWSER_URL_LENGTHS = {\n  Chrome: 32779,\n  \"Internet Explorer\": 2047,\n  Edge: 2047,\n  Safari: 65e3,\n  Firefox: 65e3\n};\nvar CompressedConfLengthError = class {\n  constructor(message) {\n    this.message = message;\n  }\n};\nfunction encodeConfInUrl({\n  conf,\n  onOverMaximumUrlLength = () => {\n  }\n}) {\n  const compressedConf = compressToEncodedURIComponent(JSON.stringify(conf));\n  const newParams = `${LENGTH_QUERY_STRING}=${compressedConf.length}&${VERSION_QUERY_STRING}=${CURRENT_VERSION}&${VITESSCE_CONF_QUERY_STRING}=${compressedConf}`;\n  const browser = sniffBrowser();\n  const maxLength = MAX_BROWSER_URL_LENGTHS[browser];\n  if (newParams.length > maxLength) {\n    const willWorkOn = Object.entries(MAX_BROWSER_URL_LENGTHS).filter((entry) => entry[1] > newParams.length).map((entry) => entry[0]);\n    const message = `Configuration is ${compressedConf.length} characters; max URL for ${browser} is ${maxLength}: it will work on ${willWorkOn.join(\", \") || \"no browser\"}.`;\n    console.error(message);\n    onOverMaximumUrlLength({ message, willWorkOn });\n  }\n  return newParams;\n}\nfunction decodeURLParamsToConf(queryString) {\n  const params = new URLSearchParams(queryString.replace(\"#\", \"&\"));\n  const compressedConfString = params.get(VITESSCE_CONF_QUERY_STRING);\n  const expectedConfLength = Number(params.get(LENGTH_QUERY_STRING));\n  if (expectedConfLength !== compressedConfString.length) {\n    throw new CompressedConfLengthError(`Compressed conf length (${compressedConfString.length}) != expected (${expectedConfLength}). URL truncated?`);\n  }\n  const version2 = params.get(VERSION_QUERY_STRING);\n  if (version2 === CURRENT_VERSION) {\n    const conf = JSON.parse(decompressFromEncodedURIComponent(compressedConfString));\n    return conf;\n  }\n  throw new Error(\"Unrecognized URL Param Version\");\n}\n\n// src/api/VitessceConfig.js\nvar VitessceConfigDatasetFile = class {\n  constructor(url, dataType, fileType) {\n    this.file = {\n      url,\n      type: dataType,\n      fileType\n    };\n  }\n  toJSON() {\n    return this.file;\n  }\n};\nvar VitessceConfigDataset = class {\n  constructor(uid, name2, description2) {\n    this.dataset = {\n      uid,\n      name: name2,\n      description: description2,\n      files: []\n    };\n  }\n  addFile(url, dataType, fileType) {\n    this.dataset.files.push(new VitessceConfigDatasetFile(url, dataType, fileType));\n    return this;\n  }\n  toJSON() {\n    return __spreadProps(__spreadValues({}, this.dataset), {\n      files: this.dataset.files.map((f) => f.toJSON())\n    });\n  }\n};\nvar VitessceConfigView = class {\n  constructor(component, coordinationScopes, x, y, w, h) {\n    this.view = {\n      component,\n      coordinationScopes,\n      x,\n      y,\n      w,\n      h\n    };\n  }\n  useCoordination(...args) {\n    const cScopes = args;\n    cScopes.forEach((cScope) => {\n      this.view.coordinationScopes[cScope.cType] = cScope.cScope;\n    });\n    return this;\n  }\n  setXYWH(x, y, w, h) {\n    this.view.x = x;\n    this.view.y = y;\n    this.view.w = w;\n    this.view.h = h;\n  }\n  toJSON() {\n    return this.view;\n  }\n};\nvar VitessceConfigViewHConcat = class {\n  constructor(views) {\n    this.views = views;\n  }\n};\nvar VitessceConfigViewVConcat = class {\n  constructor(views) {\n    this.views = views;\n  }\n};\nfunction hconcat(...views) {\n  const vcvhc = new VitessceConfigViewHConcat(views);\n  return vcvhc;\n}\nfunction vconcat(...views) {\n  const vcvvc = new VitessceConfigViewVConcat(views);\n  return vcvvc;\n}\nvar VitessceConfigCoordinationScope = class {\n  constructor(cType, cScope) {\n    this.cType = cType;\n    this.cScope = cScope;\n    this.cValue = null;\n  }\n  setValue(cValue) {\n    this.cValue = cValue;\n    return this;\n  }\n};\nvar VitessceConfig = class {\n  constructor(name2 = void 0, description2 = void 0) {\n    this.config = {\n      version: \"1.0.0\",\n      name: name2,\n      description: description2,\n      datasets: [],\n      coordinationSpace: {},\n      layout: [],\n      initStrategy: \"auto\"\n    };\n  }\n  addDataset(name2 = void 0, description2 = void 0, options = void 0) {\n    const { uid } = options || {};\n    const prevDatasetUids = this.config.datasets.map((d) => d.dataset.uid);\n    const nextUid = uid || getNextScope(prevDatasetUids);\n    const newDataset = new VitessceConfigDataset(nextUid, name2, description2);\n    this.config.datasets.push(newDataset);\n    const [newScope] = this.addCoordination(COORDINATION_TYPES.DATASET);\n    newScope.setValue(nextUid);\n    return newDataset;\n  }\n  addView(dataset, component, options) {\n    const {\n      x = 0,\n      y = 0,\n      w = 1,\n      h = 1,\n      mapping = null\n    } = options || {};\n    const datasetMatches = this.config.coordinationSpace[COORDINATION_TYPES.DATASET] ? Object.entries(this.config.coordinationSpace[COORDINATION_TYPES.DATASET]).filter(([scopeName, datasetScope2]) => datasetScope2.cValue === dataset.dataset.uid).map(([scopeName]) => scopeName) : [];\n    let datasetScope;\n    if (datasetMatches.length === 1) {\n      [datasetScope] = datasetMatches;\n    } else {\n      throw new Error(\"No coordination scope matching the dataset parameter could be found in the coordination space.\");\n    }\n    const coordinationScopes = {\n      [COORDINATION_TYPES.DATASET]: datasetScope\n    };\n    const newView = new VitessceConfigView(component, coordinationScopes, x, y, w, h);\n    if (mapping) {\n      const [etScope] = this.addCoordination(COORDINATION_TYPES.EMBEDDING_TYPE);\n      etScope.setValue(mapping);\n      newView.useCoordination(etScope);\n    }\n    this.config.layout.push(newView);\n    return newView;\n  }\n  addCoordination(...args) {\n    const cTypes = args;\n    const result = [];\n    cTypes.forEach((cType) => {\n      const prevScopes = this.config.coordinationSpace[cType] ? Object.keys(this.config.coordinationSpace[cType]) : [];\n      const scope = new VitessceConfigCoordinationScope(cType, getNextScope(prevScopes));\n      if (!this.config.coordinationSpace[scope.cType]) {\n        this.config.coordinationSpace[scope.cType] = {};\n      }\n      this.config.coordinationSpace[scope.cType][scope.cScope] = scope;\n      result.push(scope);\n    });\n    return result;\n  }\n  linkViews(views, cTypes, cValues = null) {\n    const cScopes = this.addCoordination(...cTypes);\n    views.forEach((view) => {\n      cScopes.forEach((cScope) => {\n        view.useCoordination(cScope);\n      });\n    });\n    if (Array.isArray(cValues) && cValues.length === cTypes.length) {\n      cScopes.forEach((cScope, i) => {\n        cScope.setValue(cValues[i]);\n      });\n    }\n    return this;\n  }\n  layout(viewConcat) {\n    function layoutAux(obj, xMin, xMax, yMin, yMax) {\n      const w = xMax - xMin;\n      const h = yMax - yMin;\n      if (obj instanceof VitessceConfigView) {\n        obj.setXYWH(xMin, yMin, w, h);\n      } else if (obj instanceof VitessceConfigViewHConcat) {\n        const { views } = obj;\n        const numViews = views.length;\n        views.forEach((view, i) => {\n          layoutAux(view, xMin + w / numViews * i, xMin + w / numViews * (i + 1), yMin, yMax);\n        });\n      } else if (obj instanceof VitessceConfigViewVConcat) {\n        const { views } = obj;\n        const numViews = views.length;\n        views.forEach((view, i) => {\n          layoutAux(view, xMin, xMax, yMin + h / numViews * i, yMin + h / numViews * (i + 1));\n        });\n      }\n    }\n    layoutAux(viewConcat, 0, 12, 0, 12);\n    return this;\n  }\n  toJSON() {\n    return __spreadProps(__spreadValues({}, this.config), {\n      datasets: this.config.datasets.map((d) => d.toJSON()),\n      coordinationSpace: fromEntries(Object.entries(this.config.coordinationSpace).map(([cType, cScopes]) => [\n        cType,\n        fromEntries(Object.entries(cScopes).map(([cScopeName, cScope]) => [\n          cScopeName,\n          cScope.cValue\n        ]))\n      ])),\n      layout: this.config.layout.map((c) => c.toJSON())\n    });\n  }\n  static fromJSON(config) {\n    const { name: name2, description: description2 } = config;\n    const vc = new VitessceConfig(name2, description2);\n    config.datasets.forEach((d) => {\n      const newDataset = vc.addDataset(d.name, d.description, { uid: d.uid });\n      d.files.forEach((f) => {\n        newDataset.addFile(f.url, f.type, f.fileType);\n      });\n    });\n    Object.keys(config.coordinationSpace).forEach((cType) => {\n      if (cType !== COORDINATION_TYPES.DATASET) {\n        const cObj = config.coordinationSpace[cType];\n        vc.config.coordinationSpace[cType] = {};\n        Object.entries(cObj).forEach(([cScopeName, cScopeValue]) => {\n          const scope = new VitessceConfigCoordinationScope(cType, cScopeName);\n          scope.setValue(cScopeValue);\n          vc.config.coordinationSpace[cType][cScopeName] = scope;\n        });\n      }\n    });\n    config.layout.forEach((c) => {\n      const newView = new VitessceConfigView(c.component, c.coordinationScopes, c.x, c.y, c.w, c.h);\n      vc.config.layout.push(newView);\n    });\n    return vc;\n  }\n};\nexport {\n  Heatmap_default as Heatmap,\n  Scatterplot_default as Scatterplot,\n  Spatial_default as Spatial,\n  Vitessce,\n  VitessceConfig,\n  VitessceGrid,\n  createApp,\n  decodeURLParamsToConf,\n  encodeConfInUrl,\n  hconcat,\n  vconcat\n};\n//# sourceMappingURL=index.js.map\n"]},"metadata":{},"sourceType":"module"}