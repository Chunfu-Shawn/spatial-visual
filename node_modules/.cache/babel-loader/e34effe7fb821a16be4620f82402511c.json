{"ast":null,"code":"import { applyPatch } from 'fast-json-patch';\nimport stringify from 'json-stringify-pretty-compact';\nimport * as vegaImport from 'vega';\nimport { writeConfig, mergeConfig, isString, isBoolean } from 'vega';\nimport { expressionInterpreter } from 'vega-interpreter';\nimport * as vegaLiteImport from 'vega-lite';\nimport schemaParser from 'vega-schema-url-parser';\nimport * as themes from 'vega-themes';\nimport { Handler } from 'vega-tooltip';\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\nvar Op = Object.prototype;\nvar hasOwn = Op.hasOwnProperty;\nvar undefined$1; // More compressible than void 0.\n\nvar $Symbol = typeof Symbol === \"function\" ? Symbol : {};\nvar iteratorSymbol = $Symbol.iterator || \"@@iterator\";\nvar asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\nvar toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\nfunction wrap(innerFn, outerFn, self, tryLocsList) {\n  // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n  var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n  var generator = Object.create(protoGenerator.prototype);\n  var context = new Context(tryLocsList || []); // The ._invoke method unifies the implementations of the .next,\n  // .throw, and .return methods.\n\n  generator._invoke = makeInvokeMethod(innerFn, self, context);\n  return generator;\n} // Try/catch helper to minimize deoptimizations. Returns a completion\n// record like context.tryEntries[i].completion. This interface could\n// have been (and was previously) designed to take a closure to be\n// invoked without arguments, but in all the cases we care about we\n// already have an existing method we want to call, so there's no need\n// to create a new function object. We can even get away with assuming\n// the method takes exactly one argument, since that happens to be true\n// in every case, so we don't have to touch the arguments object. The\n// only additional allocation required is the completion record, which\n// has a stable shape and so hopefully should be cheap to allocate.\n\n\nfunction tryCatch(fn, obj, arg) {\n  try {\n    return {\n      type: \"normal\",\n      arg: fn.call(obj, arg)\n    };\n  } catch (err) {\n    return {\n      type: \"throw\",\n      arg: err\n    };\n  }\n}\n\nvar GenStateSuspendedStart = \"suspendedStart\";\nvar GenStateSuspendedYield = \"suspendedYield\";\nvar GenStateExecuting = \"executing\";\nvar GenStateCompleted = \"completed\"; // Returning this object from the innerFn has the same effect as\n// breaking out of the dispatch switch statement.\n\nvar ContinueSentinel = {}; // Dummy constructor functions that we use as the .constructor and\n// .constructor.prototype properties for functions that return Generator\n// objects. For full spec compliance, you may wish to configure your\n// minifier not to mangle the names of these two functions.\n\nfunction Generator() {}\n\nfunction GeneratorFunction() {}\n\nfunction GeneratorFunctionPrototype() {} // This is a polyfill for %IteratorPrototype% for environments that\n// don't natively support it.\n\n\nvar IteratorPrototype = {};\n\nIteratorPrototype[iteratorSymbol] = function () {\n  return this;\n};\n\nvar getProto = Object.getPrototypeOf;\nvar NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n\nif (NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n  // This environment has a native %IteratorPrototype%; use it instead\n  // of the polyfill.\n  IteratorPrototype = NativeIteratorPrototype;\n}\n\nvar Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype);\nGeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\nGeneratorFunctionPrototype.constructor = GeneratorFunction;\nGeneratorFunctionPrototype[toStringTagSymbol] = GeneratorFunction.displayName = \"GeneratorFunction\"; // Helper for defining the .next, .throw, and .return methods of the\n// Iterator interface in terms of a single ._invoke method.\n\nfunction defineIteratorMethods(prototype) {\n  [\"next\", \"throw\", \"return\"].forEach(function (method) {\n    prototype[method] = function (arg) {\n      return this._invoke(method, arg);\n    };\n  });\n}\n\nfunction isGeneratorFunction(genFun) {\n  var ctor = typeof genFun === \"function\" && genFun.constructor;\n  return ctor ? ctor === GeneratorFunction || // For the native GeneratorFunction constructor, the best we can\n  // do is to check its .name property.\n  (ctor.displayName || ctor.name) === \"GeneratorFunction\" : false;\n}\n\nfunction mark(genFun) {\n  if (Object.setPrototypeOf) {\n    Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n  } else {\n    genFun.__proto__ = GeneratorFunctionPrototype;\n\n    if (!(toStringTagSymbol in genFun)) {\n      genFun[toStringTagSymbol] = \"GeneratorFunction\";\n    }\n  }\n\n  genFun.prototype = Object.create(Gp);\n  return genFun;\n} // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n// `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n// meant to be awaited.\n\n\nfunction awrap(arg) {\n  return {\n    __await: arg\n  };\n}\n\nfunction AsyncIterator(generator, PromiseImpl) {\n  function invoke(method, arg, resolve, reject) {\n    var record = tryCatch(generator[method], generator, arg);\n\n    if (record.type === \"throw\") {\n      reject(record.arg);\n    } else {\n      var result = record.arg;\n      var value = result.value;\n\n      if (value && typeof value === \"object\" && hasOwn.call(value, \"__await\")) {\n        return PromiseImpl.resolve(value.__await).then(function (value) {\n          invoke(\"next\", value, resolve, reject);\n        }, function (err) {\n          invoke(\"throw\", err, resolve, reject);\n        });\n      }\n\n      return PromiseImpl.resolve(value).then(function (unwrapped) {\n        // When a yielded Promise is resolved, its final value becomes\n        // the .value of the Promise<{value,done}> result for the\n        // current iteration.\n        result.value = unwrapped;\n        resolve(result);\n      }, function (error) {\n        // If a rejected Promise was yielded, throw the rejection back\n        // into the async generator function so it can be handled there.\n        return invoke(\"throw\", error, resolve, reject);\n      });\n    }\n  }\n\n  var previousPromise;\n\n  function enqueue(method, arg) {\n    function callInvokeWithMethodAndArg() {\n      return new PromiseImpl(function (resolve, reject) {\n        invoke(method, arg, resolve, reject);\n      });\n    }\n\n    return previousPromise = // If enqueue has been called before, then we want to wait until\n    // all previous Promises have been resolved before calling invoke,\n    // so that results are always delivered in the correct order. If\n    // enqueue has not been called before, then it is important to\n    // call invoke immediately, without waiting on a callback to fire,\n    // so that the async generator function has the opportunity to do\n    // any necessary setup in a predictable way. This predictability\n    // is why the Promise constructor synchronously invokes its\n    // executor callback, and why async functions synchronously\n    // execute code before the first await. Since we implement simple\n    // async functions in terms of async generators, it is especially\n    // important to get this right, even though it requires care.\n    previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, // Avoid propagating failures to Promises returned by later\n    // invocations of the iterator.\n    callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();\n  } // Define the unified helper method that is used to implement .next,\n  // .throw, and .return (see defineIteratorMethods).\n\n\n  this._invoke = enqueue;\n}\n\ndefineIteratorMethods(AsyncIterator.prototype);\n\nAsyncIterator.prototype[asyncIteratorSymbol] = function () {\n  return this;\n}; // Note that simple async functions are implemented on top of\n// AsyncIterator objects; they just return a Promise for the value of\n// the final result produced by the iterator.\n\n\nfunction async(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n  if (PromiseImpl === void 0) PromiseImpl = Promise;\n  var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl);\n  return isGeneratorFunction(outerFn) ? iter // If outerFn is a generator, return the full iterator.\n  : iter.next().then(function (result) {\n    return result.done ? result.value : iter.next();\n  });\n}\n\nfunction makeInvokeMethod(innerFn, self, context) {\n  var state = GenStateSuspendedStart;\n  return function invoke(method, arg) {\n    if (state === GenStateExecuting) {\n      throw new Error(\"Generator is already running\");\n    }\n\n    if (state === GenStateCompleted) {\n      if (method === \"throw\") {\n        throw arg;\n      } // Be forgiving, per 25.3.3.3.3 of the spec:\n      // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n\n\n      return doneResult();\n    }\n\n    context.method = method;\n    context.arg = arg;\n\n    while (true) {\n      var delegate = context.delegate;\n\n      if (delegate) {\n        var delegateResult = maybeInvokeDelegate(delegate, context);\n\n        if (delegateResult) {\n          if (delegateResult === ContinueSentinel) continue;\n          return delegateResult;\n        }\n      }\n\n      if (context.method === \"next\") {\n        // Setting context._sent for legacy support of Babel's\n        // function.sent implementation.\n        context.sent = context._sent = context.arg;\n      } else if (context.method === \"throw\") {\n        if (state === GenStateSuspendedStart) {\n          state = GenStateCompleted;\n          throw context.arg;\n        }\n\n        context.dispatchException(context.arg);\n      } else if (context.method === \"return\") {\n        context.abrupt(\"return\", context.arg);\n      }\n\n      state = GenStateExecuting;\n      var record = tryCatch(innerFn, self, context);\n\n      if (record.type === \"normal\") {\n        // If an exception is thrown from innerFn, we leave state ===\n        // GenStateExecuting and loop back for another invocation.\n        state = context.done ? GenStateCompleted : GenStateSuspendedYield;\n\n        if (record.arg === ContinueSentinel) {\n          continue;\n        }\n\n        return {\n          value: record.arg,\n          done: context.done\n        };\n      } else if (record.type === \"throw\") {\n        state = GenStateCompleted; // Dispatch the exception by looping back around to the\n        // context.dispatchException(context.arg) call above.\n\n        context.method = \"throw\";\n        context.arg = record.arg;\n      }\n    }\n  };\n} // Call delegate.iterator[context.method](context.arg) and handle the\n// result, either by returning a { value, done } result from the\n// delegate iterator, or by modifying context.method and context.arg,\n// setting context.delegate to null, and returning the ContinueSentinel.\n\n\nfunction maybeInvokeDelegate(delegate, context) {\n  var method = delegate.iterator[context.method];\n\n  if (method === undefined$1) {\n    // A .throw or .return when the delegate iterator has no .throw\n    // method always terminates the yield* loop.\n    context.delegate = null;\n\n    if (context.method === \"throw\") {\n      // Note: [\"return\"] must be used for ES3 parsing compatibility.\n      if (delegate.iterator[\"return\"]) {\n        // If the delegate iterator has a return method, give it a\n        // chance to clean up.\n        context.method = \"return\";\n        context.arg = undefined$1;\n        maybeInvokeDelegate(delegate, context);\n\n        if (context.method === \"throw\") {\n          // If maybeInvokeDelegate(context) changed context.method from\n          // \"return\" to \"throw\", let that override the TypeError below.\n          return ContinueSentinel;\n        }\n      }\n\n      context.method = \"throw\";\n      context.arg = new TypeError(\"The iterator does not provide a 'throw' method\");\n    }\n\n    return ContinueSentinel;\n  }\n\n  var record = tryCatch(method, delegate.iterator, context.arg);\n\n  if (record.type === \"throw\") {\n    context.method = \"throw\";\n    context.arg = record.arg;\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  var info = record.arg;\n\n  if (!info) {\n    context.method = \"throw\";\n    context.arg = new TypeError(\"iterator result is not an object\");\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  if (info.done) {\n    // Assign the result of the finished delegate to the temporary\n    // variable specified by delegate.resultName (see delegateYield).\n    context[delegate.resultName] = info.value; // Resume execution at the desired location (see delegateYield).\n\n    context.next = delegate.nextLoc; // If context.method was \"throw\" but the delegate handled the\n    // exception, let the outer generator proceed normally. If\n    // context.method was \"next\", forget context.arg since it has been\n    // \"consumed\" by the delegate iterator. If context.method was\n    // \"return\", allow the original .return call to continue in the\n    // outer generator.\n\n    if (context.method !== \"return\") {\n      context.method = \"next\";\n      context.arg = undefined$1;\n    }\n  } else {\n    // Re-yield the result returned by the delegate method.\n    return info;\n  } // The delegate iterator is finished, so forget it and continue with\n  // the outer generator.\n\n\n  context.delegate = null;\n  return ContinueSentinel;\n} // Define Generator.prototype.{next,throw,return} in terms of the\n// unified ._invoke helper method.\n\n\ndefineIteratorMethods(Gp);\nGp[toStringTagSymbol] = \"Generator\"; // A Generator should always return itself as the iterator object when the\n// @@iterator function is called on it. Some browsers' implementations of the\n// iterator prototype chain incorrectly implement this, causing the Generator\n// object to not be returned from this call. This ensures that doesn't happen.\n// See https://github.com/facebook/regenerator/issues/274 for more details.\n\nGp[iteratorSymbol] = function () {\n  return this;\n};\n\nGp.toString = function () {\n  return \"[object Generator]\";\n};\n\nfunction pushTryEntry(locs) {\n  var entry = {\n    tryLoc: locs[0]\n  };\n\n  if (1 in locs) {\n    entry.catchLoc = locs[1];\n  }\n\n  if (2 in locs) {\n    entry.finallyLoc = locs[2];\n    entry.afterLoc = locs[3];\n  }\n\n  this.tryEntries.push(entry);\n}\n\nfunction resetTryEntry(entry) {\n  var record = entry.completion || {};\n  record.type = \"normal\";\n  delete record.arg;\n  entry.completion = record;\n}\n\nfunction Context(tryLocsList) {\n  // The root entry object (effectively a try statement without a catch\n  // or a finally block) gives us a place to store values thrown from\n  // locations where there is no enclosing try statement.\n  this.tryEntries = [{\n    tryLoc: \"root\"\n  }];\n  tryLocsList.forEach(pushTryEntry, this);\n  this.reset(true);\n}\n\nfunction keys(object) {\n  var keys = [];\n\n  for (var key in object) {\n    keys.push(key);\n  }\n\n  keys.reverse(); // Rather than returning an object with a next method, we keep\n  // things simple and return the next function itself.\n\n  return function next() {\n    while (keys.length) {\n      var key = keys.pop();\n\n      if (key in object) {\n        next.value = key;\n        next.done = false;\n        return next;\n      }\n    } // To avoid creating an additional object, we just hang the .value\n    // and .done properties off the next function object itself. This\n    // also ensures that the minifier will not anonymize the function.\n\n\n    next.done = true;\n    return next;\n  };\n}\n\nfunction values(iterable) {\n  if (iterable) {\n    var iteratorMethod = iterable[iteratorSymbol];\n\n    if (iteratorMethod) {\n      return iteratorMethod.call(iterable);\n    }\n\n    if (typeof iterable.next === \"function\") {\n      return iterable;\n    }\n\n    if (!isNaN(iterable.length)) {\n      var i = -1,\n          next = function next() {\n        while (++i < iterable.length) {\n          if (hasOwn.call(iterable, i)) {\n            next.value = iterable[i];\n            next.done = false;\n            return next;\n          }\n        }\n\n        next.value = undefined$1;\n        next.done = true;\n        return next;\n      };\n\n      return next.next = next;\n    }\n  } // Return an iterator with no values.\n\n\n  return {\n    next: doneResult\n  };\n}\n\nfunction doneResult() {\n  return {\n    value: undefined$1,\n    done: true\n  };\n}\n\nContext.prototype = {\n  constructor: Context,\n  reset: function reset(skipTempReset) {\n    this.prev = 0;\n    this.next = 0; // Resetting context._sent for legacy support of Babel's\n    // function.sent implementation.\n\n    this.sent = this._sent = undefined$1;\n    this.done = false;\n    this.delegate = null;\n    this.method = \"next\";\n    this.arg = undefined$1;\n    this.tryEntries.forEach(resetTryEntry);\n\n    if (!skipTempReset) {\n      for (var name in this) {\n        // Not sure about the optimal order of these conditions:\n        if (name.charAt(0) === \"t\" && hasOwn.call(this, name) && !isNaN(+name.slice(1))) {\n          this[name] = undefined$1;\n        }\n      }\n    }\n  },\n  stop: function stop() {\n    this.done = true;\n    var rootEntry = this.tryEntries[0];\n    var rootRecord = rootEntry.completion;\n\n    if (rootRecord.type === \"throw\") {\n      throw rootRecord.arg;\n    }\n\n    return this.rval;\n  },\n  dispatchException: function dispatchException(exception) {\n    if (this.done) {\n      throw exception;\n    }\n\n    var context = this;\n\n    function handle(loc, caught) {\n      record.type = \"throw\";\n      record.arg = exception;\n      context.next = loc;\n\n      if (caught) {\n        // If the dispatched exception was caught by a catch block,\n        // then let that catch block handle the exception normally.\n        context.method = \"next\";\n        context.arg = undefined$1;\n      }\n\n      return !!caught;\n    }\n\n    for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n      var entry = this.tryEntries[i];\n      var record = entry.completion;\n\n      if (entry.tryLoc === \"root\") {\n        // Exception thrown outside of any try block that could handle\n        // it, so set the completion value of the entire function to\n        // throw the exception.\n        return handle(\"end\");\n      }\n\n      if (entry.tryLoc <= this.prev) {\n        var hasCatch = hasOwn.call(entry, \"catchLoc\");\n        var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n        if (hasCatch && hasFinally) {\n          if (this.prev < entry.catchLoc) {\n            return handle(entry.catchLoc, true);\n          } else if (this.prev < entry.finallyLoc) {\n            return handle(entry.finallyLoc);\n          }\n        } else if (hasCatch) {\n          if (this.prev < entry.catchLoc) {\n            return handle(entry.catchLoc, true);\n          }\n        } else if (hasFinally) {\n          if (this.prev < entry.finallyLoc) {\n            return handle(entry.finallyLoc);\n          }\n        } else {\n          throw new Error(\"try statement without catch or finally\");\n        }\n      }\n    }\n  },\n  abrupt: function abrupt(type, arg) {\n    for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n      var entry = this.tryEntries[i];\n\n      if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) {\n        var finallyEntry = entry;\n        break;\n      }\n    }\n\n    if (finallyEntry && (type === \"break\" || type === \"continue\") && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc) {\n      // Ignore the finally entry if control is not jumping to a\n      // location outside the try/catch block.\n      finallyEntry = null;\n    }\n\n    var record = finallyEntry ? finallyEntry.completion : {};\n    record.type = type;\n    record.arg = arg;\n\n    if (finallyEntry) {\n      this.method = \"next\";\n      this.next = finallyEntry.finallyLoc;\n      return ContinueSentinel;\n    }\n\n    return this.complete(record);\n  },\n  complete: function complete(record, afterLoc) {\n    if (record.type === \"throw\") {\n      throw record.arg;\n    }\n\n    if (record.type === \"break\" || record.type === \"continue\") {\n      this.next = record.arg;\n    } else if (record.type === \"return\") {\n      this.rval = this.arg = record.arg;\n      this.method = \"return\";\n      this.next = \"end\";\n    } else if (record.type === \"normal\" && afterLoc) {\n      this.next = afterLoc;\n    }\n\n    return ContinueSentinel;\n  },\n  finish: function finish(finallyLoc) {\n    for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n      var entry = this.tryEntries[i];\n\n      if (entry.finallyLoc === finallyLoc) {\n        this.complete(entry.completion, entry.afterLoc);\n        resetTryEntry(entry);\n        return ContinueSentinel;\n      }\n    }\n  },\n  \"catch\": function _catch(tryLoc) {\n    for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n      var entry = this.tryEntries[i];\n\n      if (entry.tryLoc === tryLoc) {\n        var record = entry.completion;\n\n        if (record.type === \"throw\") {\n          var thrown = record.arg;\n          resetTryEntry(entry);\n        }\n\n        return thrown;\n      }\n    } // The context.catch method must only be called with a location\n    // argument that corresponds to a known catch block.\n\n\n    throw new Error(\"illegal catch attempt\");\n  },\n  delegateYield: function delegateYield(iterable, resultName, nextLoc) {\n    this.delegate = {\n      iterator: values(iterable),\n      resultName: resultName,\n      nextLoc: nextLoc\n    };\n\n    if (this.method === \"next\") {\n      // Deliberately forget the last sent value so that we don't\n      // accidentally pass it on to the delegate.\n      this.arg = undefined$1;\n    }\n\n    return ContinueSentinel;\n  }\n}; // Export a default namespace that plays well with Rollup\n\nvar _regeneratorRuntime = {\n  wrap,\n  isGeneratorFunction,\n  AsyncIterator,\n  mark,\n  awrap,\n  async,\n  keys,\n  values\n};\nvar yallist = Yallist$1;\nYallist$1.Node = Node;\nYallist$1.create = Yallist$1;\n\nfunction Yallist$1(list) {\n  var self = this;\n\n  if (!(self instanceof Yallist$1)) {\n    self = new Yallist$1();\n  }\n\n  self.tail = null;\n  self.head = null;\n  self.length = 0;\n\n  if (list && typeof list.forEach === 'function') {\n    list.forEach(function (item) {\n      self.push(item);\n    });\n  } else if (arguments.length > 0) {\n    for (var i = 0, l = arguments.length; i < l; i++) {\n      self.push(arguments[i]);\n    }\n  }\n\n  return self;\n}\n\nYallist$1.prototype.removeNode = function (node) {\n  if (node.list !== this) {\n    throw new Error('removing node which does not belong to this list');\n  }\n\n  var next = node.next;\n  var prev = node.prev;\n\n  if (next) {\n    next.prev = prev;\n  }\n\n  if (prev) {\n    prev.next = next;\n  }\n\n  if (node === this.head) {\n    this.head = next;\n  }\n\n  if (node === this.tail) {\n    this.tail = prev;\n  }\n\n  node.list.length--;\n  node.next = null;\n  node.prev = null;\n  node.list = null;\n  return next;\n};\n\nYallist$1.prototype.unshiftNode = function (node) {\n  if (node === this.head) {\n    return;\n  }\n\n  if (node.list) {\n    node.list.removeNode(node);\n  }\n\n  var head = this.head;\n  node.list = this;\n  node.next = head;\n\n  if (head) {\n    head.prev = node;\n  }\n\n  this.head = node;\n\n  if (!this.tail) {\n    this.tail = node;\n  }\n\n  this.length++;\n};\n\nYallist$1.prototype.pushNode = function (node) {\n  if (node === this.tail) {\n    return;\n  }\n\n  if (node.list) {\n    node.list.removeNode(node);\n  }\n\n  var tail = this.tail;\n  node.list = this;\n  node.prev = tail;\n\n  if (tail) {\n    tail.next = node;\n  }\n\n  this.tail = node;\n\n  if (!this.head) {\n    this.head = node;\n  }\n\n  this.length++;\n};\n\nYallist$1.prototype.push = function () {\n  for (var i = 0, l = arguments.length; i < l; i++) {\n    push(this, arguments[i]);\n  }\n\n  return this.length;\n};\n\nYallist$1.prototype.unshift = function () {\n  for (var i = 0, l = arguments.length; i < l; i++) {\n    unshift(this, arguments[i]);\n  }\n\n  return this.length;\n};\n\nYallist$1.prototype.pop = function () {\n  if (!this.tail) {\n    return undefined;\n  }\n\n  var res = this.tail.value;\n  this.tail = this.tail.prev;\n\n  if (this.tail) {\n    this.tail.next = null;\n  } else {\n    this.head = null;\n  }\n\n  this.length--;\n  return res;\n};\n\nYallist$1.prototype.shift = function () {\n  if (!this.head) {\n    return undefined;\n  }\n\n  var res = this.head.value;\n  this.head = this.head.next;\n\n  if (this.head) {\n    this.head.prev = null;\n  } else {\n    this.tail = null;\n  }\n\n  this.length--;\n  return res;\n};\n\nYallist$1.prototype.forEach = function (fn, thisp) {\n  thisp = thisp || this;\n\n  for (var walker = this.head, i = 0; walker !== null; i++) {\n    fn.call(thisp, walker.value, i, this);\n    walker = walker.next;\n  }\n};\n\nYallist$1.prototype.forEachReverse = function (fn, thisp) {\n  thisp = thisp || this;\n\n  for (var walker = this.tail, i = this.length - 1; walker !== null; i--) {\n    fn.call(thisp, walker.value, i, this);\n    walker = walker.prev;\n  }\n};\n\nYallist$1.prototype.get = function (n) {\n  for (var i = 0, walker = this.head; walker !== null && i < n; i++) {\n    // abort out of the list early if we hit a cycle\n    walker = walker.next;\n  }\n\n  if (i === n && walker !== null) {\n    return walker.value;\n  }\n};\n\nYallist$1.prototype.getReverse = function (n) {\n  for (var i = 0, walker = this.tail; walker !== null && i < n; i++) {\n    // abort out of the list early if we hit a cycle\n    walker = walker.prev;\n  }\n\n  if (i === n && walker !== null) {\n    return walker.value;\n  }\n};\n\nYallist$1.prototype.map = function (fn, thisp) {\n  thisp = thisp || this;\n  var res = new Yallist$1();\n\n  for (var walker = this.head; walker !== null;) {\n    res.push(fn.call(thisp, walker.value, this));\n    walker = walker.next;\n  }\n\n  return res;\n};\n\nYallist$1.prototype.mapReverse = function (fn, thisp) {\n  thisp = thisp || this;\n  var res = new Yallist$1();\n\n  for (var walker = this.tail; walker !== null;) {\n    res.push(fn.call(thisp, walker.value, this));\n    walker = walker.prev;\n  }\n\n  return res;\n};\n\nYallist$1.prototype.reduce = function (fn, initial) {\n  var acc;\n  var walker = this.head;\n\n  if (arguments.length > 1) {\n    acc = initial;\n  } else if (this.head) {\n    walker = this.head.next;\n    acc = this.head.value;\n  } else {\n    throw new TypeError('Reduce of empty list with no initial value');\n  }\n\n  for (var i = 0; walker !== null; i++) {\n    acc = fn(acc, walker.value, i);\n    walker = walker.next;\n  }\n\n  return acc;\n};\n\nYallist$1.prototype.reduceReverse = function (fn, initial) {\n  var acc;\n  var walker = this.tail;\n\n  if (arguments.length > 1) {\n    acc = initial;\n  } else if (this.tail) {\n    walker = this.tail.prev;\n    acc = this.tail.value;\n  } else {\n    throw new TypeError('Reduce of empty list with no initial value');\n  }\n\n  for (var i = this.length - 1; walker !== null; i--) {\n    acc = fn(acc, walker.value, i);\n    walker = walker.prev;\n  }\n\n  return acc;\n};\n\nYallist$1.prototype.toArray = function () {\n  var arr = new Array(this.length);\n\n  for (var i = 0, walker = this.head; walker !== null; i++) {\n    arr[i] = walker.value;\n    walker = walker.next;\n  }\n\n  return arr;\n};\n\nYallist$1.prototype.toArrayReverse = function () {\n  var arr = new Array(this.length);\n\n  for (var i = 0, walker = this.tail; walker !== null; i++) {\n    arr[i] = walker.value;\n    walker = walker.prev;\n  }\n\n  return arr;\n};\n\nYallist$1.prototype.slice = function (from, to) {\n  to = to || this.length;\n\n  if (to < 0) {\n    to += this.length;\n  }\n\n  from = from || 0;\n\n  if (from < 0) {\n    from += this.length;\n  }\n\n  var ret = new Yallist$1();\n\n  if (to < from || to < 0) {\n    return ret;\n  }\n\n  if (from < 0) {\n    from = 0;\n  }\n\n  if (to > this.length) {\n    to = this.length;\n  }\n\n  for (var i = 0, walker = this.head; walker !== null && i < from; i++) {\n    walker = walker.next;\n  }\n\n  for (; walker !== null && i < to; i++, walker = walker.next) {\n    ret.push(walker.value);\n  }\n\n  return ret;\n};\n\nYallist$1.prototype.sliceReverse = function (from, to) {\n  to = to || this.length;\n\n  if (to < 0) {\n    to += this.length;\n  }\n\n  from = from || 0;\n\n  if (from < 0) {\n    from += this.length;\n  }\n\n  var ret = new Yallist$1();\n\n  if (to < from || to < 0) {\n    return ret;\n  }\n\n  if (from < 0) {\n    from = 0;\n  }\n\n  if (to > this.length) {\n    to = this.length;\n  }\n\n  for (var i = this.length, walker = this.tail; walker !== null && i > to; i--) {\n    walker = walker.prev;\n  }\n\n  for (; walker !== null && i > from; i--, walker = walker.prev) {\n    ret.push(walker.value);\n  }\n\n  return ret;\n};\n\nYallist$1.prototype.splice = function (start, deleteCount) {\n  if (start > this.length) {\n    start = this.length - 1;\n  }\n\n  if (start < 0) {\n    start = this.length + start;\n  }\n\n  for (var i = 0, walker = this.head; walker !== null && i < start; i++) {\n    walker = walker.next;\n  }\n\n  var ret = [];\n\n  for (var i = 0; walker && i < deleteCount; i++) {\n    ret.push(walker.value);\n    walker = this.removeNode(walker);\n  }\n\n  if (walker === null) {\n    walker = this.tail;\n  }\n\n  if (walker !== this.head && walker !== this.tail) {\n    walker = walker.prev;\n  }\n\n  for (var i = 0; i < (arguments.length <= 2 ? 0 : arguments.length - 2); i++) {\n    walker = insert(this, walker, i + 2 < 2 || arguments.length <= i + 2 ? undefined : arguments[i + 2]);\n  }\n\n  return ret;\n};\n\nYallist$1.prototype.reverse = function () {\n  var head = this.head;\n  var tail = this.tail;\n\n  for (var walker = head; walker !== null; walker = walker.prev) {\n    var p = walker.prev;\n    walker.prev = walker.next;\n    walker.next = p;\n  }\n\n  this.head = tail;\n  this.tail = head;\n  return this;\n};\n\nfunction insert(self, node, value) {\n  var inserted = node === self.head ? new Node(value, null, node, self) : new Node(value, node, node.next, self);\n\n  if (inserted.next === null) {\n    self.tail = inserted;\n  }\n\n  if (inserted.prev === null) {\n    self.head = inserted;\n  }\n\n  self.length++;\n  return inserted;\n}\n\nfunction push(self, item) {\n  self.tail = new Node(item, self.tail, null, self);\n\n  if (!self.head) {\n    self.head = self.tail;\n  }\n\n  self.length++;\n}\n\nfunction unshift(self, item) {\n  self.head = new Node(item, null, self.head, self);\n\n  if (!self.tail) {\n    self.tail = self.head;\n  }\n\n  self.length++;\n}\n\nfunction Node(value, prev, next, list) {\n  if (!(this instanceof Node)) {\n    return new Node(value, prev, next, list);\n  }\n\n  this.list = list;\n  this.value = value;\n\n  if (prev) {\n    prev.next = this;\n    this.prev = prev;\n  } else {\n    this.prev = null;\n  }\n\n  if (next) {\n    next.prev = this;\n    this.next = next;\n  } else {\n    this.next = null;\n  }\n}\n\ntry {\n  // add if support for Symbol.iterator is present\n  Yallist$1.prototype[Symbol.iterator] = /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    var walker;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            walker = this.head;\n\n          case 1:\n            if (!walker) {\n              _context.next = 7;\n              break;\n            }\n\n            _context.next = 4;\n            return walker.value;\n\n          case 4:\n            walker = walker.next;\n            _context.next = 1;\n            break;\n\n          case 7:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, this);\n  });\n} catch (er) {}\n\nvar Yallist = yallist;\nvar MAX = Symbol('max');\nvar LENGTH = Symbol('length');\nvar LENGTH_CALCULATOR = Symbol('lengthCalculator');\nvar ALLOW_STALE = Symbol('allowStale');\nvar MAX_AGE = Symbol('maxAge');\nvar DISPOSE = Symbol('dispose');\nvar NO_DISPOSE_ON_SET = Symbol('noDisposeOnSet');\nvar LRU_LIST = Symbol('lruList');\nvar CACHE = Symbol('cache');\nvar UPDATE_AGE_ON_GET = Symbol('updateAgeOnGet');\n\nvar naiveLength = () => 1; // lruList is a yallist where the head is the youngest\n// item, and the tail is the oldest.  the list contains the Hit\n// objects as the entries.\n// Each Hit object has a reference to its Yallist.Node.  This\n// never changes.\n//\n// cache is a Map (or PseudoMap) that matches the keys to\n// the Yallist.Node object.\n\n\nclass LRUCache {\n  constructor(options) {\n    if (typeof options === 'number') options = {\n      max: options\n    };\n    if (!options) options = {};\n    if (options.max && (typeof options.max !== 'number' || options.max < 0)) throw new TypeError('max must be a non-negative number'); // Kind of weird to have a default max of Infinity, but oh well.\n\n    this[MAX] = options.max || Infinity;\n    var lc = options.length || naiveLength;\n    this[LENGTH_CALCULATOR] = typeof lc !== 'function' ? naiveLength : lc;\n    this[ALLOW_STALE] = options.stale || false;\n    if (options.maxAge && typeof options.maxAge !== 'number') throw new TypeError('maxAge must be a number');\n    this[MAX_AGE] = options.maxAge || 0;\n    this[DISPOSE] = options.dispose;\n    this[NO_DISPOSE_ON_SET] = options.noDisposeOnSet || false;\n    this[UPDATE_AGE_ON_GET] = options.updateAgeOnGet || false;\n    this.reset();\n  } // resize the cache when the max changes.\n\n\n  set max(mL) {\n    if (typeof mL !== 'number' || mL < 0) throw new TypeError('max must be a non-negative number');\n    this[MAX] = mL || Infinity;\n    trim(this);\n  }\n\n  get max() {\n    return this[MAX];\n  }\n\n  set allowStale(allowStale) {\n    this[ALLOW_STALE] = !!allowStale;\n  }\n\n  get allowStale() {\n    return this[ALLOW_STALE];\n  }\n\n  set maxAge(mA) {\n    if (typeof mA !== 'number') throw new TypeError('maxAge must be a non-negative number');\n    this[MAX_AGE] = mA;\n    trim(this);\n  }\n\n  get maxAge() {\n    return this[MAX_AGE];\n  } // resize the cache when the lengthCalculator changes.\n\n\n  set lengthCalculator(lC) {\n    if (typeof lC !== 'function') lC = naiveLength;\n\n    if (lC !== this[LENGTH_CALCULATOR]) {\n      this[LENGTH_CALCULATOR] = lC;\n      this[LENGTH] = 0;\n      this[LRU_LIST].forEach(hit => {\n        hit.length = this[LENGTH_CALCULATOR](hit.value, hit.key);\n        this[LENGTH] += hit.length;\n      });\n    }\n\n    trim(this);\n  }\n\n  get lengthCalculator() {\n    return this[LENGTH_CALCULATOR];\n  }\n\n  get length() {\n    return this[LENGTH];\n  }\n\n  get itemCount() {\n    return this[LRU_LIST].length;\n  }\n\n  rforEach(fn, thisp) {\n    thisp = thisp || this;\n\n    for (var walker = this[LRU_LIST].tail; walker !== null;) {\n      var prev = walker.prev;\n      forEachStep(this, fn, walker, thisp);\n      walker = prev;\n    }\n  }\n\n  forEach(fn, thisp) {\n    thisp = thisp || this;\n\n    for (var walker = this[LRU_LIST].head; walker !== null;) {\n      var next = walker.next;\n      forEachStep(this, fn, walker, thisp);\n      walker = next;\n    }\n  }\n\n  keys() {\n    return this[LRU_LIST].toArray().map(k => k.key);\n  }\n\n  values() {\n    return this[LRU_LIST].toArray().map(k => k.value);\n  }\n\n  reset() {\n    if (this[DISPOSE] && this[LRU_LIST] && this[LRU_LIST].length) {\n      this[LRU_LIST].forEach(hit => this[DISPOSE](hit.key, hit.value));\n    }\n\n    this[CACHE] = new Map(); // hash of items by key\n\n    this[LRU_LIST] = new Yallist(); // list of items in order of use recency\n\n    this[LENGTH] = 0; // length of items in the list\n  }\n\n  dump() {\n    return this[LRU_LIST].map(hit => isStale(this, hit) ? false : {\n      k: hit.key,\n      v: hit.value,\n      e: hit.now + (hit.maxAge || 0)\n    }).toArray().filter(h => h);\n  }\n\n  dumpLru() {\n    return this[LRU_LIST];\n  }\n\n  set(key, value, maxAge) {\n    maxAge = maxAge || this[MAX_AGE];\n    if (maxAge && typeof maxAge !== 'number') throw new TypeError('maxAge must be a number');\n    var now = maxAge ? Date.now() : 0;\n    var len = this[LENGTH_CALCULATOR](value, key);\n\n    if (this[CACHE].has(key)) {\n      if (len > this[MAX]) {\n        del(this, this[CACHE].get(key));\n        return false;\n      }\n\n      var node = this[CACHE].get(key);\n      var item = node.value; // dispose of the old one before overwriting\n      // split out into 2 ifs for better coverage tracking\n\n      if (this[DISPOSE]) {\n        if (!this[NO_DISPOSE_ON_SET]) this[DISPOSE](key, item.value);\n      }\n\n      item.now = now;\n      item.maxAge = maxAge;\n      item.value = value;\n      this[LENGTH] += len - item.length;\n      item.length = len;\n      this.get(key);\n      trim(this);\n      return true;\n    }\n\n    var hit = new Entry(key, value, len, now, maxAge); // oversized objects fall out of cache automatically.\n\n    if (hit.length > this[MAX]) {\n      if (this[DISPOSE]) this[DISPOSE](key, value);\n      return false;\n    }\n\n    this[LENGTH] += hit.length;\n    this[LRU_LIST].unshift(hit);\n    this[CACHE].set(key, this[LRU_LIST].head);\n    trim(this);\n    return true;\n  }\n\n  has(key) {\n    if (!this[CACHE].has(key)) return false;\n    var hit = this[CACHE].get(key).value;\n    return !isStale(this, hit);\n  }\n\n  get(key) {\n    return get(this, key, true);\n  }\n\n  peek(key) {\n    return get(this, key, false);\n  }\n\n  pop() {\n    var node = this[LRU_LIST].tail;\n    if (!node) return null;\n    del(this, node);\n    return node.value;\n  }\n\n  del(key) {\n    del(this, this[CACHE].get(key));\n  }\n\n  load(arr) {\n    // reset the cache\n    this.reset();\n    var now = Date.now(); // A previous serialized cache has the most recent items first\n\n    for (var l = arr.length - 1; l >= 0; l--) {\n      var hit = arr[l];\n      var expiresAt = hit.e || 0;\n      if (expiresAt === 0) // the item was created without expiration in a non aged cache\n        this.set(hit.k, hit.v);else {\n        var maxAge = expiresAt - now; // dont add already expired items\n\n        if (maxAge > 0) {\n          this.set(hit.k, hit.v, maxAge);\n        }\n      }\n    }\n  }\n\n  prune() {\n    this[CACHE].forEach((value, key) => get(this, key, false));\n  }\n\n}\n\nvar get = (self, key, doUse) => {\n  var node = self[CACHE].get(key);\n\n  if (node) {\n    var hit = node.value;\n\n    if (isStale(self, hit)) {\n      del(self, node);\n      if (!self[ALLOW_STALE]) return undefined;\n    } else {\n      if (doUse) {\n        if (self[UPDATE_AGE_ON_GET]) node.value.now = Date.now();\n        self[LRU_LIST].unshiftNode(node);\n      }\n    }\n\n    return hit.value;\n  }\n};\n\nvar isStale = (self, hit) => {\n  if (!hit || !hit.maxAge && !self[MAX_AGE]) return false;\n  var diff = Date.now() - hit.now;\n  return hit.maxAge ? diff > hit.maxAge : self[MAX_AGE] && diff > self[MAX_AGE];\n};\n\nvar trim = self => {\n  if (self[LENGTH] > self[MAX]) {\n    for (var walker = self[LRU_LIST].tail; self[LENGTH] > self[MAX] && walker !== null;) {\n      // We know that we're about to delete this one, and also\n      // what the next least recently used key will be, so just\n      // go ahead and set it now.\n      var prev = walker.prev;\n      del(self, walker);\n      walker = prev;\n    }\n  }\n};\n\nvar del = (self, node) => {\n  if (node) {\n    var hit = node.value;\n    if (self[DISPOSE]) self[DISPOSE](hit.key, hit.value);\n    self[LENGTH] -= hit.length;\n    self[CACHE].delete(hit.key);\n    self[LRU_LIST].removeNode(node);\n  }\n};\n\nclass Entry {\n  constructor(key, value, length, now, maxAge) {\n    this.key = key;\n    this.value = value;\n    this.length = length;\n    this.now = now;\n    this.maxAge = maxAge || 0;\n  }\n\n}\n\nvar forEachStep = (self, fn, node, thisp) => {\n  var hit = node.value;\n\n  if (isStale(self, hit)) {\n    del(self, node);\n    if (!self[ALLOW_STALE]) hit = undefined;\n  }\n\n  if (hit) fn.call(thisp, hit.value, hit.key, self);\n};\n\nvar lruCache = LRUCache; // obj with keys in a consistent order.\n\nvar opts = ['includePrerelease', 'loose', 'rtl'];\n\nvar parseOptions$3 = options => !options ? {} : typeof options !== 'object' ? {\n  loose: true\n} : opts.filter(k => options[k]).reduce((options, k) => {\n  options[k] = true;\n  return options;\n}, {});\n\nvar parseOptions_1 = parseOptions$3;\nvar re$3 = {\n  exports: {}\n}; // Not necessarily the package version of this code.\n\nvar SEMVER_SPEC_VERSION = '2.0.0';\nvar MAX_LENGTH$1 = 256;\nvar MAX_SAFE_INTEGER$1 = Number.MAX_SAFE_INTEGER ||\n/* istanbul ignore next */\n9007199254740991; // Max safe segment length for coercion.\n\nvar MAX_SAFE_COMPONENT_LENGTH = 16;\nvar constants = {\n  SEMVER_SPEC_VERSION,\n  MAX_LENGTH: MAX_LENGTH$1,\n  MAX_SAFE_INTEGER: MAX_SAFE_INTEGER$1,\n  MAX_SAFE_COMPONENT_LENGTH\n};\nvar debug$3 = typeof process === 'object' && process.env && process.env.NODE_DEBUG && /\\bsemver\\b/i.test(process.env.NODE_DEBUG) ? function () {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  return console.error('SEMVER', ...args);\n} : () => {};\nvar debug_1 = debug$3;\n\n(function (module, exports) {\n  var MAX_SAFE_COMPONENT_LENGTH = constants.MAX_SAFE_COMPONENT_LENGTH;\n  var debug = debug_1;\n  exports = module.exports = {}; // The actual regexps go on exports.re\n\n  var re = exports.re = [];\n  var src = exports.src = [];\n  var t = exports.t = {};\n  var R = 0;\n\n  var createToken = (name, value, isGlobal) => {\n    var index = R++;\n    debug(index, value);\n    t[name] = index;\n    src[index] = value;\n    re[index] = new RegExp(value, isGlobal ? 'g' : undefined);\n  }; // The following Regular Expressions can be used for tokenizing,\n  // validating, and parsing SemVer version strings.\n  // ## Numeric Identifier\n  // A single `0`, or a non-zero digit followed by zero or more digits.\n\n\n  createToken('NUMERICIDENTIFIER', '0|[1-9]\\\\d*');\n  createToken('NUMERICIDENTIFIERLOOSE', '[0-9]+'); // ## Non-numeric Identifier\n  // Zero or more digits, followed by a letter or hyphen, and then zero or\n  // more letters, digits, or hyphens.\n\n  createToken('NONNUMERICIDENTIFIER', '\\\\d*[a-zA-Z-][a-zA-Z0-9-]*'); // ## Main Version\n  // Three dot-separated numeric identifiers.\n\n  createToken('MAINVERSION', \"(\".concat(src[t.NUMERICIDENTIFIER], \")\\\\.\") + \"(\".concat(src[t.NUMERICIDENTIFIER], \")\\\\.\") + \"(\".concat(src[t.NUMERICIDENTIFIER], \")\"));\n  createToken('MAINVERSIONLOOSE', \"(\".concat(src[t.NUMERICIDENTIFIERLOOSE], \")\\\\.\") + \"(\".concat(src[t.NUMERICIDENTIFIERLOOSE], \")\\\\.\") + \"(\".concat(src[t.NUMERICIDENTIFIERLOOSE], \")\")); // ## Pre-release Version Identifier\n  // A numeric identifier, or a non-numeric identifier.\n\n  createToken('PRERELEASEIDENTIFIER', \"(?:\".concat(src[t.NUMERICIDENTIFIER], \"|\").concat(src[t.NONNUMERICIDENTIFIER], \")\"));\n  createToken('PRERELEASEIDENTIFIERLOOSE', \"(?:\".concat(src[t.NUMERICIDENTIFIERLOOSE], \"|\").concat(src[t.NONNUMERICIDENTIFIER], \")\")); // ## Pre-release Version\n  // Hyphen, followed by one or more dot-separated pre-release version\n  // identifiers.\n\n  createToken('PRERELEASE', \"(?:-(\".concat(src[t.PRERELEASEIDENTIFIER], \"(?:\\\\.\").concat(src[t.PRERELEASEIDENTIFIER], \")*))\"));\n  createToken('PRERELEASELOOSE', \"(?:-?(\".concat(src[t.PRERELEASEIDENTIFIERLOOSE], \"(?:\\\\.\").concat(src[t.PRERELEASEIDENTIFIERLOOSE], \")*))\")); // ## Build Metadata Identifier\n  // Any combination of digits, letters, or hyphens.\n\n  createToken('BUILDIDENTIFIER', '[0-9A-Za-z-]+'); // ## Build Metadata\n  // Plus sign, followed by one or more period-separated build metadata\n  // identifiers.\n\n  createToken('BUILD', \"(?:\\\\+(\".concat(src[t.BUILDIDENTIFIER], \"(?:\\\\.\").concat(src[t.BUILDIDENTIFIER], \")*))\")); // ## Full Version String\n  // A main version, followed optionally by a pre-release version and\n  // build metadata.\n  // Note that the only major, minor, patch, and pre-release sections of\n  // the version string are capturing groups.  The build metadata is not a\n  // capturing group, because it should not ever be used in version\n  // comparison.\n\n  createToken('FULLPLAIN', \"v?\".concat(src[t.MAINVERSION]).concat(src[t.PRERELEASE], \"?\").concat(src[t.BUILD], \"?\"));\n  createToken('FULL', \"^\".concat(src[t.FULLPLAIN], \"$\")); // like full, but allows v1.2.3 and =1.2.3, which people do sometimes.\n  // also, 1.0.0alpha1 (prerelease without the hyphen) which is pretty\n  // common in the npm registry.\n\n  createToken('LOOSEPLAIN', \"[v=\\\\s]*\".concat(src[t.MAINVERSIONLOOSE]).concat(src[t.PRERELEASELOOSE], \"?\").concat(src[t.BUILD], \"?\"));\n  createToken('LOOSE', \"^\".concat(src[t.LOOSEPLAIN], \"$\"));\n  createToken('GTLT', '((?:<|>)?=?)'); // Something like \"2.*\" or \"1.2.x\".\n  // Note that \"x.x\" is a valid xRange identifer, meaning \"any version\"\n  // Only the first item is strictly required.\n\n  createToken('XRANGEIDENTIFIERLOOSE', \"\".concat(src[t.NUMERICIDENTIFIERLOOSE], \"|x|X|\\\\*\"));\n  createToken('XRANGEIDENTIFIER', \"\".concat(src[t.NUMERICIDENTIFIER], \"|x|X|\\\\*\"));\n  createToken('XRANGEPLAIN', \"[v=\\\\s]*(\".concat(src[t.XRANGEIDENTIFIER], \")\") + \"(?:\\\\.(\".concat(src[t.XRANGEIDENTIFIER], \")\") + \"(?:\\\\.(\".concat(src[t.XRANGEIDENTIFIER], \")\") + \"(?:\".concat(src[t.PRERELEASE], \")?\").concat(src[t.BUILD], \"?\") + \")?)?\");\n  createToken('XRANGEPLAINLOOSE', \"[v=\\\\s]*(\".concat(src[t.XRANGEIDENTIFIERLOOSE], \")\") + \"(?:\\\\.(\".concat(src[t.XRANGEIDENTIFIERLOOSE], \")\") + \"(?:\\\\.(\".concat(src[t.XRANGEIDENTIFIERLOOSE], \")\") + \"(?:\".concat(src[t.PRERELEASELOOSE], \")?\").concat(src[t.BUILD], \"?\") + \")?)?\");\n  createToken('XRANGE', \"^\".concat(src[t.GTLT], \"\\\\s*\").concat(src[t.XRANGEPLAIN], \"$\"));\n  createToken('XRANGELOOSE', \"^\".concat(src[t.GTLT], \"\\\\s*\").concat(src[t.XRANGEPLAINLOOSE], \"$\")); // Coercion.\n  // Extract anything that could conceivably be a part of a valid semver\n\n  createToken('COERCE', \"\".concat('(^|[^\\\\d])' + '(\\\\d{1,').concat(MAX_SAFE_COMPONENT_LENGTH, \"})\") + \"(?:\\\\.(\\\\d{1,\".concat(MAX_SAFE_COMPONENT_LENGTH, \"}))?\") + \"(?:\\\\.(\\\\d{1,\".concat(MAX_SAFE_COMPONENT_LENGTH, \"}))?\") + \"(?:$|[^\\\\d])\");\n  createToken('COERCERTL', src[t.COERCE], true); // Tilde ranges.\n  // Meaning is \"reasonably at or greater than\"\n\n  createToken('LONETILDE', '(?:~>?)');\n  createToken('TILDETRIM', \"(\\\\s*)\".concat(src[t.LONETILDE], \"\\\\s+\"), true);\n  exports.tildeTrimReplace = '$1~';\n  createToken('TILDE', \"^\".concat(src[t.LONETILDE]).concat(src[t.XRANGEPLAIN], \"$\"));\n  createToken('TILDELOOSE', \"^\".concat(src[t.LONETILDE]).concat(src[t.XRANGEPLAINLOOSE], \"$\")); // Caret ranges.\n  // Meaning is \"at least and backwards compatible with\"\n\n  createToken('LONECARET', '(?:\\\\^)');\n  createToken('CARETTRIM', \"(\\\\s*)\".concat(src[t.LONECARET], \"\\\\s+\"), true);\n  exports.caretTrimReplace = '$1^';\n  createToken('CARET', \"^\".concat(src[t.LONECARET]).concat(src[t.XRANGEPLAIN], \"$\"));\n  createToken('CARETLOOSE', \"^\".concat(src[t.LONECARET]).concat(src[t.XRANGEPLAINLOOSE], \"$\")); // A simple gt/lt/eq thing, or just \"\" to indicate \"any version\"\n\n  createToken('COMPARATORLOOSE', \"^\".concat(src[t.GTLT], \"\\\\s*(\").concat(src[t.LOOSEPLAIN], \")$|^$\"));\n  createToken('COMPARATOR', \"^\".concat(src[t.GTLT], \"\\\\s*(\").concat(src[t.FULLPLAIN], \")$|^$\")); // An expression to strip any whitespace between the gtlt and the thing\n  // it modifies, so that `> 1.2.3` ==> `>1.2.3`\n\n  createToken('COMPARATORTRIM', \"(\\\\s*)\".concat(src[t.GTLT], \"\\\\s*(\").concat(src[t.LOOSEPLAIN], \"|\").concat(src[t.XRANGEPLAIN], \")\"), true);\n  exports.comparatorTrimReplace = '$1$2$3'; // Something like `1.2.3 - 1.2.4`\n  // Note that these all use the loose form, because they'll be\n  // checked against either the strict or loose comparator form\n  // later.\n\n  createToken('HYPHENRANGE', \"^\\\\s*(\".concat(src[t.XRANGEPLAIN], \")\") + \"\\\\s+-\\\\s+\" + \"(\".concat(src[t.XRANGEPLAIN], \")\") + \"\\\\s*$\");\n  createToken('HYPHENRANGELOOSE', \"^\\\\s*(\".concat(src[t.XRANGEPLAINLOOSE], \")\") + \"\\\\s+-\\\\s+\" + \"(\".concat(src[t.XRANGEPLAINLOOSE], \")\") + \"\\\\s*$\"); // Star ranges basically just allow anything at all.\n\n  createToken('STAR', '(<|>)?=?\\\\s*\\\\*'); // >=0.0.0 is like a star\n\n  createToken('GTE0', '^\\\\s*>=\\\\s*0\\.0\\.0\\\\s*$');\n  createToken('GTE0PRE', '^\\\\s*>=\\\\s*0\\.0\\.0-0\\\\s*$');\n})(re$3, re$3.exports);\n\nvar numeric = /^[0-9]+$/;\n\nvar compareIdentifiers$1 = (a, b) => {\n  var anum = numeric.test(a);\n  var bnum = numeric.test(b);\n\n  if (anum && bnum) {\n    a = +a;\n    b = +b;\n  }\n\n  return a === b ? 0 : anum && !bnum ? -1 : bnum && !anum ? 1 : a < b ? -1 : 1;\n};\n\nvar rcompareIdentifiers = (a, b) => compareIdentifiers$1(b, a);\n\nvar identifiers = {\n  compareIdentifiers: compareIdentifiers$1,\n  rcompareIdentifiers\n};\nvar debug$2 = debug_1;\nvar MAX_LENGTH = constants.MAX_LENGTH,\n    MAX_SAFE_INTEGER = constants.MAX_SAFE_INTEGER;\nvar re$2 = re$3.exports.re,\n    t$2 = re$3.exports.t;\nvar parseOptions$2 = parseOptions_1;\nvar compareIdentifiers = identifiers.compareIdentifiers;\n\nclass SemVer$3 {\n  constructor(version, options) {\n    options = parseOptions$2(options);\n\n    if (version instanceof SemVer$3) {\n      if (version.loose === !!options.loose && version.includePrerelease === !!options.includePrerelease) {\n        return version;\n      } else {\n        version = version.version;\n      }\n    } else if (typeof version !== 'string') {\n      throw new TypeError(\"Invalid Version: \".concat(version));\n    }\n\n    if (version.length > MAX_LENGTH) {\n      throw new TypeError(\"version is longer than \".concat(MAX_LENGTH, \" characters\"));\n    }\n\n    debug$2('SemVer', version, options);\n    this.options = options;\n    this.loose = !!options.loose; // this isn't actually relevant for versions, but keep it so that we\n    // don't run into trouble passing this.options around.\n\n    this.includePrerelease = !!options.includePrerelease;\n    var m = version.trim().match(options.loose ? re$2[t$2.LOOSE] : re$2[t$2.FULL]);\n\n    if (!m) {\n      throw new TypeError(\"Invalid Version: \".concat(version));\n    }\n\n    this.raw = version; // these are actually numbers\n\n    this.major = +m[1];\n    this.minor = +m[2];\n    this.patch = +m[3];\n\n    if (this.major > MAX_SAFE_INTEGER || this.major < 0) {\n      throw new TypeError('Invalid major version');\n    }\n\n    if (this.minor > MAX_SAFE_INTEGER || this.minor < 0) {\n      throw new TypeError('Invalid minor version');\n    }\n\n    if (this.patch > MAX_SAFE_INTEGER || this.patch < 0) {\n      throw new TypeError('Invalid patch version');\n    } // numberify any prerelease numeric ids\n\n\n    if (!m[4]) {\n      this.prerelease = [];\n    } else {\n      this.prerelease = m[4].split('.').map(id => {\n        if (/^[0-9]+$/.test(id)) {\n          var num = +id;\n\n          if (num >= 0 && num < MAX_SAFE_INTEGER) {\n            return num;\n          }\n        }\n\n        return id;\n      });\n    }\n\n    this.build = m[5] ? m[5].split('.') : [];\n    this.format();\n  }\n\n  format() {\n    this.version = \"\".concat(this.major, \".\").concat(this.minor, \".\").concat(this.patch);\n\n    if (this.prerelease.length) {\n      this.version += \"-\".concat(this.prerelease.join('.'));\n    }\n\n    return this.version;\n  }\n\n  toString() {\n    return this.version;\n  }\n\n  compare(other) {\n    debug$2('SemVer.compare', this.version, this.options, other);\n\n    if (!(other instanceof SemVer$3)) {\n      if (typeof other === 'string' && other === this.version) {\n        return 0;\n      }\n\n      other = new SemVer$3(other, this.options);\n    }\n\n    if (other.version === this.version) {\n      return 0;\n    }\n\n    return this.compareMain(other) || this.comparePre(other);\n  }\n\n  compareMain(other) {\n    if (!(other instanceof SemVer$3)) {\n      other = new SemVer$3(other, this.options);\n    }\n\n    return compareIdentifiers(this.major, other.major) || compareIdentifiers(this.minor, other.minor) || compareIdentifiers(this.patch, other.patch);\n  }\n\n  comparePre(other) {\n    if (!(other instanceof SemVer$3)) {\n      other = new SemVer$3(other, this.options);\n    } // NOT having a prerelease is > having one\n\n\n    if (this.prerelease.length && !other.prerelease.length) {\n      return -1;\n    } else if (!this.prerelease.length && other.prerelease.length) {\n      return 1;\n    } else if (!this.prerelease.length && !other.prerelease.length) {\n      return 0;\n    }\n\n    var i = 0;\n\n    do {\n      var a = this.prerelease[i];\n      var b = other.prerelease[i];\n      debug$2('prerelease compare', i, a, b);\n\n      if (a === undefined && b === undefined) {\n        return 0;\n      } else if (b === undefined) {\n        return 1;\n      } else if (a === undefined) {\n        return -1;\n      } else if (a === b) {\n        continue;\n      } else {\n        return compareIdentifiers(a, b);\n      }\n    } while (++i);\n  }\n\n  compareBuild(other) {\n    if (!(other instanceof SemVer$3)) {\n      other = new SemVer$3(other, this.options);\n    }\n\n    var i = 0;\n\n    do {\n      var a = this.build[i];\n      var b = other.build[i];\n      debug$2('prerelease compare', i, a, b);\n\n      if (a === undefined && b === undefined) {\n        return 0;\n      } else if (b === undefined) {\n        return 1;\n      } else if (a === undefined) {\n        return -1;\n      } else if (a === b) {\n        continue;\n      } else {\n        return compareIdentifiers(a, b);\n      }\n    } while (++i);\n  } // preminor will bump the version up to the next minor release, and immediately\n  // down to pre-release. premajor and prepatch work the same way.\n\n\n  inc(release, identifier) {\n    switch (release) {\n      case 'premajor':\n        this.prerelease.length = 0;\n        this.patch = 0;\n        this.minor = 0;\n        this.major++;\n        this.inc('pre', identifier);\n        break;\n\n      case 'preminor':\n        this.prerelease.length = 0;\n        this.patch = 0;\n        this.minor++;\n        this.inc('pre', identifier);\n        break;\n\n      case 'prepatch':\n        // If this is already a prerelease, it will bump to the next version\n        // drop any prereleases that might already exist, since they are not\n        // relevant at this point.\n        this.prerelease.length = 0;\n        this.inc('patch', identifier);\n        this.inc('pre', identifier);\n        break;\n      // If the input is a non-prerelease version, this acts the same as\n      // prepatch.\n\n      case 'prerelease':\n        if (this.prerelease.length === 0) {\n          this.inc('patch', identifier);\n        }\n\n        this.inc('pre', identifier);\n        break;\n\n      case 'major':\n        // If this is a pre-major version, bump up to the same major version.\n        // Otherwise increment major.\n        // 1.0.0-5 bumps to 1.0.0\n        // 1.1.0 bumps to 2.0.0\n        if (this.minor !== 0 || this.patch !== 0 || this.prerelease.length === 0) {\n          this.major++;\n        }\n\n        this.minor = 0;\n        this.patch = 0;\n        this.prerelease = [];\n        break;\n\n      case 'minor':\n        // If this is a pre-minor version, bump up to the same minor version.\n        // Otherwise increment minor.\n        // 1.2.0-5 bumps to 1.2.0\n        // 1.2.1 bumps to 1.3.0\n        if (this.patch !== 0 || this.prerelease.length === 0) {\n          this.minor++;\n        }\n\n        this.patch = 0;\n        this.prerelease = [];\n        break;\n\n      case 'patch':\n        // If this is not a pre-release version, it will increment the patch.\n        // If it is a pre-release it will bump up to the same patch version.\n        // 1.2.0-5 patches to 1.2.0\n        // 1.2.0 patches to 1.2.1\n        if (this.prerelease.length === 0) {\n          this.patch++;\n        }\n\n        this.prerelease = [];\n        break;\n      // This probably shouldn't be used publicly.\n      // 1.0.0 'pre' would become 1.0.0-0 which is the wrong direction.\n\n      case 'pre':\n        if (this.prerelease.length === 0) {\n          this.prerelease = [0];\n        } else {\n          var i = this.prerelease.length;\n\n          while (--i >= 0) {\n            if (typeof this.prerelease[i] === 'number') {\n              this.prerelease[i]++;\n              i = -2;\n            }\n          }\n\n          if (i === -1) {\n            // didn't increment anything\n            this.prerelease.push(0);\n          }\n        }\n\n        if (identifier) {\n          // 1.2.0-beta.1 bumps to 1.2.0-beta.2,\n          // 1.2.0-beta.fooblz or 1.2.0-beta bumps to 1.2.0-beta.0\n          if (this.prerelease[0] === identifier) {\n            if (isNaN(this.prerelease[1])) {\n              this.prerelease = [identifier, 0];\n            }\n          } else {\n            this.prerelease = [identifier, 0];\n          }\n        }\n\n        break;\n\n      default:\n        throw new Error(\"invalid increment argument: \".concat(release));\n    }\n\n    this.format();\n    this.raw = this.version;\n    return this;\n  }\n\n}\n\nvar semver = SemVer$3;\nvar SemVer$2 = semver;\n\nvar compare$6 = (a, b, loose) => new SemVer$2(a, loose).compare(new SemVer$2(b, loose));\n\nvar compare_1 = compare$6;\nvar compare$5 = compare_1;\n\nvar eq$1 = (a, b, loose) => compare$5(a, b, loose) === 0;\n\nvar eq_1 = eq$1;\nvar compare$4 = compare_1;\n\nvar neq$1 = (a, b, loose) => compare$4(a, b, loose) !== 0;\n\nvar neq_1 = neq$1;\nvar compare$3 = compare_1;\n\nvar gt$1 = (a, b, loose) => compare$3(a, b, loose) > 0;\n\nvar gt_1 = gt$1;\nvar compare$2 = compare_1;\n\nvar gte$1 = (a, b, loose) => compare$2(a, b, loose) >= 0;\n\nvar gte_1 = gte$1;\nvar compare$1 = compare_1;\n\nvar lt$1 = (a, b, loose) => compare$1(a, b, loose) < 0;\n\nvar lt_1 = lt$1;\nvar compare = compare_1;\n\nvar lte$1 = (a, b, loose) => compare(a, b, loose) <= 0;\n\nvar lte_1 = lte$1;\nvar eq = eq_1;\nvar neq = neq_1;\nvar gt = gt_1;\nvar gte = gte_1;\nvar lt = lt_1;\nvar lte = lte_1;\n\nvar cmp$1 = (a, op, b, loose) => {\n  switch (op) {\n    case '===':\n      if (typeof a === 'object') a = a.version;\n      if (typeof b === 'object') b = b.version;\n      return a === b;\n\n    case '!==':\n      if (typeof a === 'object') a = a.version;\n      if (typeof b === 'object') b = b.version;\n      return a !== b;\n\n    case '':\n    case '=':\n    case '==':\n      return eq(a, b, loose);\n\n    case '!=':\n      return neq(a, b, loose);\n\n    case '>':\n      return gt(a, b, loose);\n\n    case '>=':\n      return gte(a, b, loose);\n\n    case '<':\n      return lt(a, b, loose);\n\n    case '<=':\n      return lte(a, b, loose);\n\n    default:\n      throw new TypeError(\"Invalid operator: \".concat(op));\n  }\n};\n\nvar cmp_1 = cmp$1;\nvar ANY = Symbol('SemVer ANY'); // hoisted class for cyclic dependency\n\nclass Comparator$1 {\n  static get ANY() {\n    return ANY;\n  }\n\n  constructor(comp, options) {\n    options = parseOptions$1(options);\n\n    if (comp instanceof Comparator$1) {\n      if (comp.loose === !!options.loose) {\n        return comp;\n      } else {\n        comp = comp.value;\n      }\n    }\n\n    debug$1('comparator', comp, options);\n    this.options = options;\n    this.loose = !!options.loose;\n    this.parse(comp);\n\n    if (this.semver === ANY) {\n      this.value = '';\n    } else {\n      this.value = this.operator + this.semver.version;\n    }\n\n    debug$1('comp', this);\n  }\n\n  parse(comp) {\n    var r = this.options.loose ? re$1[t$1.COMPARATORLOOSE] : re$1[t$1.COMPARATOR];\n    var m = comp.match(r);\n\n    if (!m) {\n      throw new TypeError(\"Invalid comparator: \".concat(comp));\n    }\n\n    this.operator = m[1] !== undefined ? m[1] : '';\n\n    if (this.operator === '=') {\n      this.operator = '';\n    } // if it literally is just '>' or '' then allow anything.\n\n\n    if (!m[2]) {\n      this.semver = ANY;\n    } else {\n      this.semver = new SemVer$1(m[2], this.options.loose);\n    }\n  }\n\n  toString() {\n    return this.value;\n  }\n\n  test(version) {\n    debug$1('Comparator.test', version, this.options.loose);\n\n    if (this.semver === ANY || version === ANY) {\n      return true;\n    }\n\n    if (typeof version === 'string') {\n      try {\n        version = new SemVer$1(version, this.options);\n      } catch (er) {\n        return false;\n      }\n    }\n\n    return cmp(version, this.operator, this.semver, this.options);\n  }\n\n  intersects(comp, options) {\n    if (!(comp instanceof Comparator$1)) {\n      throw new TypeError('a Comparator is required');\n    }\n\n    if (!options || typeof options !== 'object') {\n      options = {\n        loose: !!options,\n        includePrerelease: false\n      };\n    }\n\n    if (this.operator === '') {\n      if (this.value === '') {\n        return true;\n      }\n\n      return new Range$2(comp.value, options).test(this.value);\n    } else if (comp.operator === '') {\n      if (comp.value === '') {\n        return true;\n      }\n\n      return new Range$2(this.value, options).test(comp.semver);\n    }\n\n    var sameDirectionIncreasing = (this.operator === '>=' || this.operator === '>') && (comp.operator === '>=' || comp.operator === '>');\n    var sameDirectionDecreasing = (this.operator === '<=' || this.operator === '<') && (comp.operator === '<=' || comp.operator === '<');\n    var sameSemVer = this.semver.version === comp.semver.version;\n    var differentDirectionsInclusive = (this.operator === '>=' || this.operator === '<=') && (comp.operator === '>=' || comp.operator === '<=');\n    var oppositeDirectionsLessThan = cmp(this.semver, '<', comp.semver, options) && (this.operator === '>=' || this.operator === '>') && (comp.operator === '<=' || comp.operator === '<');\n    var oppositeDirectionsGreaterThan = cmp(this.semver, '>', comp.semver, options) && (this.operator === '<=' || this.operator === '<') && (comp.operator === '>=' || comp.operator === '>');\n    return sameDirectionIncreasing || sameDirectionDecreasing || sameSemVer && differentDirectionsInclusive || oppositeDirectionsLessThan || oppositeDirectionsGreaterThan;\n  }\n\n}\n\nvar comparator = Comparator$1;\nvar parseOptions$1 = parseOptions_1;\nvar re$1 = re$3.exports.re,\n    t$1 = re$3.exports.t;\nvar cmp = cmp_1;\nvar debug$1 = debug_1;\nvar SemVer$1 = semver;\nvar Range$2 = range;\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) {\n  var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"];\n\n  if (!it) {\n    if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = it.call(o);\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it.return != null) it.return();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nclass Range$1 {\n  constructor(range, options) {\n    options = parseOptions(options);\n\n    if (range instanceof Range$1) {\n      if (range.loose === !!options.loose && range.includePrerelease === !!options.includePrerelease) {\n        return range;\n      } else {\n        return new Range$1(range.raw, options);\n      }\n    }\n\n    if (range instanceof Comparator) {\n      // just put it in the set and return\n      this.raw = range.value;\n      this.set = [[range]];\n      this.format();\n      return this;\n    }\n\n    this.options = options;\n    this.loose = !!options.loose;\n    this.includePrerelease = !!options.includePrerelease; // First, split based on boolean or ||\n\n    this.raw = range;\n    this.set = range.split(/\\s*\\|\\|\\s*/) // map the range to a 2d array of comparators\n    .map(range => this.parseRange(range.trim())) // throw out any comparator lists that are empty\n    // this generally means that it was not a valid range, which is allowed\n    // in loose mode, but will still throw if the WHOLE range is invalid.\n    .filter(c => c.length);\n\n    if (!this.set.length) {\n      throw new TypeError(\"Invalid SemVer Range: \".concat(range));\n    } // if we have any that are not the null set, throw out null sets.\n\n\n    if (this.set.length > 1) {\n      // keep the first one, in case they're all null sets\n      var first = this.set[0];\n      this.set = this.set.filter(c => !isNullSet(c[0]));\n      if (this.set.length === 0) this.set = [first];else if (this.set.length > 1) {\n        // if we have any that are *, then the range is just *\n        var _iterator = _createForOfIteratorHelper(this.set),\n            _step;\n\n        try {\n          for (_iterator.s(); !(_step = _iterator.n()).done;) {\n            var c = _step.value;\n\n            if (c.length === 1 && isAny(c[0])) {\n              this.set = [c];\n              break;\n            }\n          }\n        } catch (err) {\n          _iterator.e(err);\n        } finally {\n          _iterator.f();\n        }\n      }\n    }\n\n    this.format();\n  }\n\n  format() {\n    this.range = this.set.map(comps => {\n      return comps.join(' ').trim();\n    }).join('||').trim();\n    return this.range;\n  }\n\n  toString() {\n    return this.range;\n  }\n\n  parseRange(range) {\n    range = range.trim(); // memoize range parsing for performance.\n    // this is a very hot path, and fully deterministic.\n\n    var memoOpts = Object.keys(this.options).join(',');\n    var memoKey = \"parseRange:\".concat(memoOpts, \":\").concat(range);\n    var cached = cache.get(memoKey);\n    if (cached) return cached;\n    var loose = this.options.loose; // `1.2.3 - 1.2.4` => `>=1.2.3 <=1.2.4`\n\n    var hr = loose ? re[t.HYPHENRANGELOOSE] : re[t.HYPHENRANGE];\n    range = range.replace(hr, hyphenReplace(this.options.includePrerelease));\n    debug('hyphen replace', range); // `> 1.2.3 < 1.2.5` => `>1.2.3 <1.2.5`\n\n    range = range.replace(re[t.COMPARATORTRIM], comparatorTrimReplace);\n    debug('comparator trim', range, re[t.COMPARATORTRIM]); // `~ 1.2.3` => `~1.2.3`\n\n    range = range.replace(re[t.TILDETRIM], tildeTrimReplace); // `^ 1.2.3` => `^1.2.3`\n\n    range = range.replace(re[t.CARETTRIM], caretTrimReplace); // normalize spaces\n\n    range = range.split(/\\s+/).join(' '); // At this point, the range is completely trimmed and\n    // ready to be split into comparators.\n\n    var compRe = loose ? re[t.COMPARATORLOOSE] : re[t.COMPARATOR];\n    var rangeList = range.split(' ').map(comp => parseComparator(comp, this.options)).join(' ').split(/\\s+/) // >=0.0.0 is equivalent to *\n    .map(comp => replaceGTE0(comp, this.options)) // in loose mode, throw out any that are not valid comparators\n    .filter(this.options.loose ? comp => !!comp.match(compRe) : () => true).map(comp => new Comparator(comp, this.options)); // if any comparators are the null set, then replace with JUST null set\n    // if more than one comparator, remove any * comparators\n    // also, don't include the same comparator more than once\n\n    rangeList.length;\n    var rangeMap = new Map();\n\n    var _iterator2 = _createForOfIteratorHelper(rangeList),\n        _step2;\n\n    try {\n      for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n        var comp = _step2.value;\n        if (isNullSet(comp)) return [comp];\n        rangeMap.set(comp.value, comp);\n      }\n    } catch (err) {\n      _iterator2.e(err);\n    } finally {\n      _iterator2.f();\n    }\n\n    if (rangeMap.size > 1 && rangeMap.has('')) rangeMap.delete('');\n    var result = [...rangeMap.values()];\n    cache.set(memoKey, result);\n    return result;\n  }\n\n  intersects(range, options) {\n    if (!(range instanceof Range$1)) {\n      throw new TypeError('a Range is required');\n    }\n\n    return this.set.some(thisComparators => {\n      return isSatisfiable(thisComparators, options) && range.set.some(rangeComparators => {\n        return isSatisfiable(rangeComparators, options) && thisComparators.every(thisComparator => {\n          return rangeComparators.every(rangeComparator => {\n            return thisComparator.intersects(rangeComparator, options);\n          });\n        });\n      });\n    });\n  } // if ANY of the sets match ALL of its comparators, then pass\n\n\n  test(version) {\n    if (!version) {\n      return false;\n    }\n\n    if (typeof version === 'string') {\n      try {\n        version = new SemVer(version, this.options);\n      } catch (er) {\n        return false;\n      }\n    }\n\n    for (var i = 0; i < this.set.length; i++) {\n      if (testSet(this.set[i], version, this.options)) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n}\n\nvar range = Range$1;\nvar LRU = lruCache;\nvar cache = new LRU({\n  max: 1000\n});\nvar parseOptions = parseOptions_1;\nvar Comparator = comparator;\nvar debug = debug_1;\nvar SemVer = semver;\nvar re = re$3.exports.re,\n    t = re$3.exports.t,\n    comparatorTrimReplace = re$3.exports.comparatorTrimReplace,\n    tildeTrimReplace = re$3.exports.tildeTrimReplace,\n    caretTrimReplace = re$3.exports.caretTrimReplace;\n\nvar isNullSet = c => c.value === '<0.0.0-0';\n\nvar isAny = c => c.value === ''; // take a set of comparators and determine whether there\n// exists a version which can satisfy it\n\n\nvar isSatisfiable = (comparators, options) => {\n  var result = true;\n  var remainingComparators = comparators.slice();\n  var testComparator = remainingComparators.pop();\n\n  while (result && remainingComparators.length) {\n    result = remainingComparators.every(otherComparator => {\n      return testComparator.intersects(otherComparator, options);\n    });\n    testComparator = remainingComparators.pop();\n  }\n\n  return result;\n}; // comprised of xranges, tildes, stars, and gtlt's at this point.\n// already replaced the hyphen ranges\n// turn into a set of JUST comparators.\n\n\nvar parseComparator = (comp, options) => {\n  debug('comp', comp, options);\n  comp = replaceCarets(comp, options);\n  debug('caret', comp);\n  comp = replaceTildes(comp, options);\n  debug('tildes', comp);\n  comp = replaceXRanges(comp, options);\n  debug('xrange', comp);\n  comp = replaceStars(comp, options);\n  debug('stars', comp);\n  return comp;\n};\n\nvar isX = id => !id || id.toLowerCase() === 'x' || id === '*'; // ~, ~> --> * (any, kinda silly)\n// ~2, ~2.x, ~2.x.x, ~>2, ~>2.x ~>2.x.x --> >=2.0.0 <3.0.0-0\n// ~2.0, ~2.0.x, ~>2.0, ~>2.0.x --> >=2.0.0 <2.1.0-0\n// ~1.2, ~1.2.x, ~>1.2, ~>1.2.x --> >=1.2.0 <1.3.0-0\n// ~1.2.3, ~>1.2.3 --> >=1.2.3 <1.3.0-0\n// ~1.2.0, ~>1.2.0 --> >=1.2.0 <1.3.0-0\n\n\nvar replaceTildes = (comp, options) => comp.trim().split(/\\s+/).map(comp => {\n  return replaceTilde(comp, options);\n}).join(' ');\n\nvar replaceTilde = (comp, options) => {\n  var r = options.loose ? re[t.TILDELOOSE] : re[t.TILDE];\n  return comp.replace(r, (_, M, m, p, pr) => {\n    debug('tilde', comp, _, M, m, p, pr);\n    var ret;\n\n    if (isX(M)) {\n      ret = '';\n    } else if (isX(m)) {\n      ret = \">=\".concat(M, \".0.0 <\").concat(+M + 1, \".0.0-0\");\n    } else if (isX(p)) {\n      // ~1.2 == >=1.2.0 <1.3.0-0\n      ret = \">=\".concat(M, \".\").concat(m, \".0 <\").concat(M, \".\").concat(+m + 1, \".0-0\");\n    } else if (pr) {\n      debug('replaceTilde pr', pr);\n      ret = \">=\".concat(M, \".\").concat(m, \".\").concat(p, \"-\").concat(pr, \" <\").concat(M, \".\").concat(+m + 1, \".0-0\");\n    } else {\n      // ~1.2.3 == >=1.2.3 <1.3.0-0\n      ret = \">=\".concat(M, \".\").concat(m, \".\").concat(p, \" <\").concat(M, \".\").concat(+m + 1, \".0-0\");\n    }\n\n    debug('tilde return', ret);\n    return ret;\n  });\n}; // ^ --> * (any, kinda silly)\n// ^2, ^2.x, ^2.x.x --> >=2.0.0 <3.0.0-0\n// ^2.0, ^2.0.x --> >=2.0.0 <3.0.0-0\n// ^1.2, ^1.2.x --> >=1.2.0 <2.0.0-0\n// ^1.2.3 --> >=1.2.3 <2.0.0-0\n// ^1.2.0 --> >=1.2.0 <2.0.0-0\n\n\nvar replaceCarets = (comp, options) => comp.trim().split(/\\s+/).map(comp => {\n  return replaceCaret(comp, options);\n}).join(' ');\n\nvar replaceCaret = (comp, options) => {\n  debug('caret', comp, options);\n  var r = options.loose ? re[t.CARETLOOSE] : re[t.CARET];\n  var z = options.includePrerelease ? '-0' : '';\n  return comp.replace(r, (_, M, m, p, pr) => {\n    debug('caret', comp, _, M, m, p, pr);\n    var ret;\n\n    if (isX(M)) {\n      ret = '';\n    } else if (isX(m)) {\n      ret = \">=\".concat(M, \".0.0\").concat(z, \" <\").concat(+M + 1, \".0.0-0\");\n    } else if (isX(p)) {\n      if (M === '0') {\n        ret = \">=\".concat(M, \".\").concat(m, \".0\").concat(z, \" <\").concat(M, \".\").concat(+m + 1, \".0-0\");\n      } else {\n        ret = \">=\".concat(M, \".\").concat(m, \".0\").concat(z, \" <\").concat(+M + 1, \".0.0-0\");\n      }\n    } else if (pr) {\n      debug('replaceCaret pr', pr);\n\n      if (M === '0') {\n        if (m === '0') {\n          ret = \">=\".concat(M, \".\").concat(m, \".\").concat(p, \"-\").concat(pr, \" <\").concat(M, \".\").concat(m, \".\").concat(+p + 1, \"-0\");\n        } else {\n          ret = \">=\".concat(M, \".\").concat(m, \".\").concat(p, \"-\").concat(pr, \" <\").concat(M, \".\").concat(+m + 1, \".0-0\");\n        }\n      } else {\n        ret = \">=\".concat(M, \".\").concat(m, \".\").concat(p, \"-\").concat(pr, \" <\").concat(+M + 1, \".0.0-0\");\n      }\n    } else {\n      debug('no pr');\n\n      if (M === '0') {\n        if (m === '0') {\n          ret = \">=\".concat(M, \".\").concat(m, \".\").concat(p).concat(z, \" <\").concat(M, \".\").concat(m, \".\").concat(+p + 1, \"-0\");\n        } else {\n          ret = \">=\".concat(M, \".\").concat(m, \".\").concat(p).concat(z, \" <\").concat(M, \".\").concat(+m + 1, \".0-0\");\n        }\n      } else {\n        ret = \">=\".concat(M, \".\").concat(m, \".\").concat(p, \" <\").concat(+M + 1, \".0.0-0\");\n      }\n    }\n\n    debug('caret return', ret);\n    return ret;\n  });\n};\n\nvar replaceXRanges = (comp, options) => {\n  debug('replaceXRanges', comp, options);\n  return comp.split(/\\s+/).map(comp => {\n    return replaceXRange(comp, options);\n  }).join(' ');\n};\n\nvar replaceXRange = (comp, options) => {\n  comp = comp.trim();\n  var r = options.loose ? re[t.XRANGELOOSE] : re[t.XRANGE];\n  return comp.replace(r, (ret, gtlt, M, m, p, pr) => {\n    debug('xRange', comp, ret, gtlt, M, m, p, pr);\n    var xM = isX(M);\n    var xm = xM || isX(m);\n    var xp = xm || isX(p);\n    var anyX = xp;\n\n    if (gtlt === '=' && anyX) {\n      gtlt = '';\n    } // if we're including prereleases in the match, then we need\n    // to fix this to -0, the lowest possible prerelease value\n\n\n    pr = options.includePrerelease ? '-0' : '';\n\n    if (xM) {\n      if (gtlt === '>' || gtlt === '<') {\n        // nothing is allowed\n        ret = '<0.0.0-0';\n      } else {\n        // nothing is forbidden\n        ret = '*';\n      }\n    } else if (gtlt && anyX) {\n      // we know patch is an x, because we have any x at all.\n      // replace X with 0\n      if (xm) {\n        m = 0;\n      }\n\n      p = 0;\n\n      if (gtlt === '>') {\n        // >1 => >=2.0.0\n        // >1.2 => >=1.3.0\n        gtlt = '>=';\n\n        if (xm) {\n          M = +M + 1;\n          m = 0;\n          p = 0;\n        } else {\n          m = +m + 1;\n          p = 0;\n        }\n      } else if (gtlt === '<=') {\n        // <=0.7.x is actually <0.8.0, since any 0.7.x should\n        // pass.  Similarly, <=7.x is actually <8.0.0, etc.\n        gtlt = '<';\n\n        if (xm) {\n          M = +M + 1;\n        } else {\n          m = +m + 1;\n        }\n      }\n\n      if (gtlt === '<') pr = '-0';\n      ret = \"\".concat(gtlt + M, \".\").concat(m, \".\").concat(p).concat(pr);\n    } else if (xm) {\n      ret = \">=\".concat(M, \".0.0\").concat(pr, \" <\").concat(+M + 1, \".0.0-0\");\n    } else if (xp) {\n      ret = \">=\".concat(M, \".\").concat(m, \".0\").concat(pr, \" <\").concat(M, \".\").concat(+m + 1, \".0-0\");\n    }\n\n    debug('xRange return', ret);\n    return ret;\n  });\n}; // Because * is AND-ed with everything else in the comparator,\n// and '' means \"any version\", just remove the *s entirely.\n\n\nvar replaceStars = (comp, options) => {\n  debug('replaceStars', comp, options); // Looseness is ignored here.  star is always as loose as it gets!\n\n  return comp.trim().replace(re[t.STAR], '');\n};\n\nvar replaceGTE0 = (comp, options) => {\n  debug('replaceGTE0', comp, options);\n  return comp.trim().replace(re[options.includePrerelease ? t.GTE0PRE : t.GTE0], '');\n}; // This function is passed to string.replace(re[t.HYPHENRANGE])\n// M, m, patch, prerelease, build\n// 1.2 - 3.4.5 => >=1.2.0 <=3.4.5\n// 1.2.3 - 3.4 => >=1.2.0 <3.5.0-0 Any 3.4.x will do\n// 1.2 - 3.4 => >=1.2.0 <3.5.0-0\n\n\nvar hyphenReplace = incPr => ($0, from, fM, fm, fp, fpr, fb, to, tM, tm, tp, tpr, tb) => {\n  if (isX(fM)) {\n    from = '';\n  } else if (isX(fm)) {\n    from = \">=\".concat(fM, \".0.0\").concat(incPr ? '-0' : '');\n  } else if (isX(fp)) {\n    from = \">=\".concat(fM, \".\").concat(fm, \".0\").concat(incPr ? '-0' : '');\n  } else if (fpr) {\n    from = \">=\".concat(from);\n  } else {\n    from = \">=\".concat(from).concat(incPr ? '-0' : '');\n  }\n\n  if (isX(tM)) {\n    to = '';\n  } else if (isX(tm)) {\n    to = \"<\".concat(+tM + 1, \".0.0-0\");\n  } else if (isX(tp)) {\n    to = \"<\".concat(tM, \".\").concat(+tm + 1, \".0-0\");\n  } else if (tpr) {\n    to = \"<=\".concat(tM, \".\").concat(tm, \".\").concat(tp, \"-\").concat(tpr);\n  } else if (incPr) {\n    to = \"<\".concat(tM, \".\").concat(tm, \".\").concat(+tp + 1, \"-0\");\n  } else {\n    to = \"<=\".concat(to);\n  }\n\n  return \"\".concat(from, \" \").concat(to).trim();\n};\n\nvar testSet = (set, version, options) => {\n  for (var i = 0; i < set.length; i++) {\n    if (!set[i].test(version)) {\n      return false;\n    }\n  }\n\n  if (version.prerelease.length && !options.includePrerelease) {\n    // Find the set of versions that are allowed to have prereleases\n    // For example, ^1.2.3-pr.1 desugars to >=1.2.3-pr.1 <2.0.0\n    // That should allow `1.2.3-pr.2` to pass.\n    // However, `1.2.4-alpha.notready` should NOT be allowed,\n    // even though it's within the range set by the comparators.\n    for (var _i = 0; _i < set.length; _i++) {\n      debug(set[_i].semver);\n\n      if (set[_i].semver === Comparator.ANY) {\n        continue;\n      }\n\n      if (set[_i].semver.prerelease.length > 0) {\n        var allowed = set[_i].semver;\n\n        if (allowed.major === version.major && allowed.minor === version.minor && allowed.patch === version.patch) {\n          return true;\n        }\n      }\n    } // Version has a -pre, but it's not one of the ones we like.\n\n\n    return false;\n  }\n\n  return true;\n};\n\nvar Range = range;\n\nvar satisfies = (version, range, options) => {\n  try {\n    range = new Range(range, options);\n  } catch (er) {\n    return false;\n  }\n\n  return range.test(version);\n};\n\nvar satisfies_1 = satisfies;\n/**\n * Open editor url in a new window, and pass a message.\n */\n\nfunction post(window, url, data) {\n  // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n  var editor = window.open(url);\n  var wait = 10000;\n  var step = 250;\n\n  var _URL = new URL(url),\n      origin = _URL.origin; // eslint-disable-next-line no-bitwise\n\n\n  var count = ~~(wait / step);\n\n  function listen(evt) {\n    if (evt.source === editor) {\n      count = 0;\n      window.removeEventListener('message', listen, false);\n    }\n  }\n\n  window.addEventListener('message', listen, false); // send message\n  // periodically resend until ack received or timeout\n\n  function send() {\n    if (count <= 0) {\n      return;\n    }\n\n    editor.postMessage(data, origin);\n    setTimeout(send, step);\n    count -= 1;\n  }\n\n  setTimeout(send, step);\n} // generated with build-style.sh\n\n\nvar embedStyle = \".vega-embed {\\n  position: relative;\\n  display: inline-block;\\n  box-sizing: border-box;\\n}\\n.vega-embed.has-actions {\\n  padding-right: 38px;\\n}\\n.vega-embed details:not([open]) > :not(summary) {\\n  display: none !important;\\n}\\n.vega-embed summary {\\n  list-style: none;\\n  position: absolute;\\n  top: 0;\\n  right: 0;\\n  padding: 6px;\\n  z-index: 1000;\\n  background: white;\\n  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);\\n  color: #1b1e23;\\n  border: 1px solid #aaa;\\n  border-radius: 999px;\\n  opacity: 0.2;\\n  transition: opacity 0.4s ease-in;\\n  outline: none;\\n  cursor: pointer;\\n  line-height: 0px;\\n}\\n.vega-embed summary::-webkit-details-marker {\\n  display: none;\\n}\\n.vega-embed summary:active {\\n  box-shadow: #aaa 0px 0px 0px 1px inset;\\n}\\n.vega-embed summary svg {\\n  width: 14px;\\n  height: 14px;\\n}\\n.vega-embed details[open] summary {\\n  opacity: 0.7;\\n}\\n.vega-embed:hover summary, .vega-embed:focus summary {\\n  opacity: 1 !important;\\n  transition: opacity 0.2s ease;\\n}\\n.vega-embed .vega-actions {\\n  position: absolute;\\n  z-index: 1001;\\n  top: 35px;\\n  right: -9px;\\n  display: flex;\\n  flex-direction: column;\\n  padding-bottom: 8px;\\n  padding-top: 8px;\\n  border-radius: 4px;\\n  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);\\n  border: 1px solid #d9d9d9;\\n  background: white;\\n  animation-duration: 0.15s;\\n  animation-name: scale-in;\\n  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);\\n  text-align: left;\\n}\\n.vega-embed .vega-actions a {\\n  padding: 8px 16px;\\n  font-family: sans-serif;\\n  font-size: 14px;\\n  font-weight: 600;\\n  white-space: nowrap;\\n  color: #434a56;\\n  text-decoration: none;\\n}\\n.vega-embed .vega-actions a:hover {\\n  background-color: #f7f7f9;\\n  color: black;\\n}\\n.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {\\n  content: \\\"\\\";\\n  display: inline-block;\\n  position: absolute;\\n}\\n.vega-embed .vega-actions::before {\\n  left: auto;\\n  right: 14px;\\n  top: -16px;\\n  border: 8px solid #0000;\\n  border-bottom-color: #d9d9d9;\\n}\\n.vega-embed .vega-actions::after {\\n  left: auto;\\n  right: 15px;\\n  top: -14px;\\n  border: 7px solid #0000;\\n  border-bottom-color: #fff;\\n}\\n.vega-embed .chart-wrapper.fit-x {\\n  width: 100%;\\n}\\n.vega-embed .chart-wrapper.fit-y {\\n  height: 100%;\\n}\\n\\n.vega-embed-wrapper {\\n  max-width: 100%;\\n  overflow: auto;\\n  padding-right: 14px;\\n}\\n\\n@keyframes scale-in {\\n  from {\\n    opacity: 0;\\n    transform: scale(0.6);\\n  }\\n  to {\\n    opacity: 1;\\n    transform: scale(1);\\n  }\\n}\\n\";\n\nif (!String.prototype.startsWith) {\n  // eslint-disable-next-line no-extend-native,func-names\n  String.prototype.startsWith = function (search, pos) {\n    return this.substr(!pos || pos < 0 ? 0 : +pos, search.length) === search;\n  };\n}\n\nfunction mergeDeep(dest) {\n  for (var _len = arguments.length, src = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    src[_key - 1] = arguments[_key];\n  }\n\n  for (var _i = 0, _src = src; _i < _src.length; _i++) {\n    var s = _src[_i];\n    deepMerge_(dest, s);\n  }\n\n  return dest;\n}\n\nfunction deepMerge_(dest, src) {\n  for (var _i2 = 0, _Object$keys = Object.keys(src); _i2 < _Object$keys.length; _i2++) {\n    var property = _Object$keys[_i2];\n    writeConfig(dest, property, src[property], true);\n  }\n}\n\nvar name = \"vega-embed\";\nvar version$1 = \"6.20.5\";\nvar description = \"Publish Vega visualizations as embedded web components.\";\nvar keywords = [\"vega\", \"data\", \"visualization\", \"component\", \"embed\"];\nvar repository = {\n  type: \"git\",\n  url: \"http://github.com/vega/vega-embed.git\"\n};\nvar author = {\n  name: \"UW Interactive Data Lab\",\n  url: \"http://idl.cs.washington.edu\"\n};\nvar contributors = [{\n  name: \"Dominik Moritz\",\n  url: \"https://www.domoritz.de\"\n}];\nvar bugs = {\n  url: \"https://github.com/vega/vega-embed/issues\"\n};\nvar homepage = \"https://github.com/vega/vega-embed#readme\";\nvar license = \"BSD-3-Clause\";\nvar main = \"build/vega-embed.js\";\nvar module = \"build/vega-embed.module.js\";\nvar unpkg = \"build/vega-embed.min.js\";\nvar jsdelivr = \"build/vega-embed.min.js\";\nvar types = \"build/vega-embed.module.d.ts\";\nvar files = [\"src\", \"build\", \"build-es5\", \"patches\"];\nvar devDependencies = {\n  \"@auto-it/conventional-commits\": \"^10.32.3\",\n  \"@auto-it/first-time-contributor\": \"^10.32.3\",\n  \"@babel/plugin-transform-runtime\": \"^7.16.4\",\n  \"@rollup/plugin-commonjs\": \"21.0.1\",\n  \"@rollup/plugin-json\": \"^4.1.0\",\n  \"@rollup/plugin-node-resolve\": \"^13.0.6\",\n  \"@types/semver\": \"^7.3.9\",\n  auto: \"^10.32.3\",\n  \"browser-sync\": \"^2.27.7\",\n  concurrently: \"^6.4.0\",\n  \"del-cli\": \"^4.0.1\",\n  \"jest-canvas-mock\": \"^2.3.1\",\n  \"patch-package\": \"^6.4.7\",\n  \"postinstall-postinstall\": \"^2.1.0\",\n  rollup: \"2.60.1\",\n  \"rollup-plugin-bundle-size\": \"^1.0.3\",\n  \"rollup-plugin-terser\": \"^7.0.2\",\n  \"rollup-plugin-ts\": \"^2.0.4\",\n  sass: \"^1.43.5\",\n  typescript: \"^4.5.2\",\n  vega: \"^5.21.0\",\n  \"vega-lite\": \"^5.0.0\",\n  \"vega-lite-dev-config\": \"^0.20.0\"\n};\nvar peerDependencies = {\n  vega: \"^5.21.0\",\n  \"vega-lite\": \"*\"\n};\nvar dependencies = {\n  \"fast-json-patch\": \"^3.1.0\",\n  \"json-stringify-pretty-compact\": \"^3.0.0\",\n  semver: \"^7.3.5\",\n  tslib: \"^2.3.1\",\n  \"vega-interpreter\": \"^1.0.4\",\n  \"vega-schema-url-parser\": \"^2.2.0\",\n  \"vega-themes\": \"^2.10.0\",\n  \"vega-tooltip\": \"^0.27.0\"\n};\nvar bundledDependencies = [\"yallist\"];\nvar scripts = {\n  prebuild: \"yarn clean && yarn build:style\",\n  build: \"rollup -c\",\n  \"build:style\": \"./build-style.sh\",\n  clean: \"del-cli build build-es5 src/style.ts\",\n  prepublishOnly: \"yarn clean && yarn build\",\n  preversion: \"yarn lint && yarn test\",\n  serve: \"browser-sync start --directory -s -f build *.html\",\n  start: \"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'\",\n  pretest: \"yarn build:style\",\n  test: \"beemo jest --stdio stream\",\n  \"test:inspect\": \"node --inspect-brk ./node_modules/.bin/jest --runInBand\",\n  prepare: \"beemo create-config && npx patch-package\",\n  prettierbase: \"beemo prettier '*.{css,scss,html}'\",\n  eslintbase: \"beemo eslint .\",\n  format: \"yarn eslintbase --fix && yarn prettierbase --write\",\n  lint: \"yarn eslintbase && yarn prettierbase --check\",\n  release: \"yarn build && auto shipit\"\n};\nvar pkg = {\n  name: name,\n  version: version$1,\n  description: description,\n  keywords: keywords,\n  repository: repository,\n  author: author,\n  contributors: contributors,\n  bugs: bugs,\n  homepage: homepage,\n  license: license,\n  main: main,\n  module: module,\n  unpkg: unpkg,\n  jsdelivr: jsdelivr,\n  types: types,\n  files: files,\n  devDependencies: devDependencies,\n  peerDependencies: peerDependencies,\n  dependencies: dependencies,\n  bundledDependencies: bundledDependencies,\n  scripts: scripts\n};\n\nvar _w$vl;\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    }\n\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nvar version = pkg.version;\nvar vega = vegaImport;\nvar _vegaLite = vegaLiteImport; // For backwards compatibility with Vega-Lite before v4.\n\nvar w = typeof window !== 'undefined' ? window : undefined;\n\nif (_vegaLite === undefined && w !== null && w !== void 0 && (_w$vl = w.vl) !== null && _w$vl !== void 0 && _w$vl.compile) {\n  _vegaLite = w.vl;\n}\n\nvar DEFAULT_ACTIONS = {\n  export: {\n    svg: true,\n    png: true\n  },\n  source: true,\n  compiled: true,\n  editor: true\n};\nvar I18N = {\n  CLICK_TO_VIEW_ACTIONS: 'Click to view actions',\n  COMPILED_ACTION: 'View Compiled Vega',\n  EDITOR_ACTION: 'Open in Vega Editor',\n  PNG_ACTION: 'Save as PNG',\n  SOURCE_ACTION: 'View Source',\n  SVG_ACTION: 'Save as SVG'\n};\nvar NAMES = {\n  vega: 'Vega',\n  'vega-lite': 'Vega-Lite'\n};\nvar VERSION = {\n  vega: vega.version,\n  'vega-lite': _vegaLite ? _vegaLite.version : 'not available'\n};\nvar PREPROCESSOR = {\n  vega: vgSpec => vgSpec,\n  'vega-lite': (vlSpec, config) => _vegaLite.compile(vlSpec, {\n    config: config\n  }).spec\n};\nvar SVG_CIRCLES = \"\\n<svg viewBox=\\\"0 0 16 16\\\" fill=\\\"currentColor\\\" stroke=\\\"none\\\" stroke-width=\\\"1\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\">\\n  <circle r=\\\"2\\\" cy=\\\"8\\\" cx=\\\"2\\\"></circle>\\n  <circle r=\\\"2\\\" cy=\\\"8\\\" cx=\\\"8\\\"></circle>\\n  <circle r=\\\"2\\\" cy=\\\"8\\\" cx=\\\"14\\\"></circle>\\n</svg>\";\nvar CHART_WRAPPER_CLASS = 'chart-wrapper';\n\nfunction isTooltipHandler(h) {\n  return typeof h === 'function';\n}\n\nfunction viewSource(source, sourceHeader, sourceFooter, mode) {\n  var header = \"<html><head>\".concat(sourceHeader, \"</head><body><pre><code class=\\\"json\\\">\");\n  var footer = \"</code></pre>\".concat(sourceFooter, \"</body></html>\"); // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n\n  var win = window.open('');\n  win.document.write(header + source + footer);\n  win.document.title = \"\".concat(NAMES[mode], \" JSON Source\");\n}\n/**\n * Try to guess the type of spec.\n *\n * @param spec Vega or Vega-Lite spec.\n */\n\n\nfunction guessMode(spec, providedMode) {\n  // Decide mode\n  if (spec.$schema) {\n    var parsed = schemaParser(spec.$schema);\n\n    if (providedMode && providedMode !== parsed.library) {\n      var _NAMES$providedMode;\n\n      console.warn(\"The given visualization spec is written in \".concat(NAMES[parsed.library], \", but mode argument sets \").concat((_NAMES$providedMode = NAMES[providedMode]) !== null && _NAMES$providedMode !== void 0 ? _NAMES$providedMode : providedMode, \".\"));\n    }\n\n    var mode = parsed.library;\n\n    if (!satisfies_1(VERSION[mode], \"^\".concat(parsed.version.slice(1)))) {\n      console.warn(\"The input spec uses \".concat(NAMES[mode], \" \").concat(parsed.version, \", but the current version of \").concat(NAMES[mode], \" is v\").concat(VERSION[mode], \".\"));\n    }\n\n    return mode;\n  } // try to guess from the provided spec\n\n\n  if ('mark' in spec || 'encoding' in spec || 'layer' in spec || 'hconcat' in spec || 'vconcat' in spec || 'facet' in spec || 'repeat' in spec) {\n    return 'vega-lite';\n  }\n\n  if ('marks' in spec || 'signals' in spec || 'scales' in spec || 'axes' in spec) {\n    return 'vega';\n  }\n\n  return providedMode !== null && providedMode !== void 0 ? providedMode : 'vega';\n}\n\nfunction isLoader(o) {\n  return !!(o && 'load' in o);\n}\n\nfunction createLoader(opts) {\n  return isLoader(opts) ? opts : vega.loader(opts);\n}\n\nfunction embedOptionsFromUsermeta(parsedSpec) {\n  var _ref;\n\n  return (_ref = parsedSpec.usermeta && parsedSpec.usermeta.embedOptions) !== null && _ref !== void 0 ? _ref : {};\n}\n/**\n * Embed a Vega visualization component in a web page. This function returns a promise.\n *\n * @param el        DOM element in which to place component (DOM node or CSS selector).\n * @param spec      String : A URL string from which to load the Vega specification.\n *                  Object : The Vega/Vega-Lite specification as a parsed JSON object.\n * @param opts       A JavaScript object containing options for embedding.\n */\n\n\nfunction embed(_x, _x2) {\n  return _embed2.apply(this, arguments);\n}\n\nfunction _embed2() {\n  _embed2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(el, spec) {\n    var _parsedOpts$config, _usermetaOpts$config;\n\n    var opts,\n        parsedSpec,\n        loader,\n        usermetaLoader,\n        _opts$loader,\n        usermetaOpts,\n        parsedOpts,\n        mergedOpts,\n        _args = arguments;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            opts = _args.length > 2 && _args[2] !== undefined ? _args[2] : {};\n\n            if (!isString(spec)) {\n              _context.next = 10;\n              break;\n            }\n\n            loader = createLoader(opts.loader);\n            _context.t0 = JSON;\n            _context.next = 6;\n            return loader.load(spec);\n\n          case 6:\n            _context.t1 = _context.sent;\n            parsedSpec = _context.t0.parse.call(_context.t0, _context.t1);\n            _context.next = 11;\n            break;\n\n          case 10:\n            parsedSpec = spec;\n\n          case 11:\n            usermetaLoader = embedOptionsFromUsermeta(parsedSpec).loader; // either create the loader for the first time or create a new loader if the spec has new loader options\n\n            if (!loader || usermetaLoader) {\n              loader = createLoader((_opts$loader = opts.loader) !== null && _opts$loader !== void 0 ? _opts$loader : usermetaLoader);\n            }\n\n            _context.next = 15;\n            return loadOpts(embedOptionsFromUsermeta(parsedSpec), loader);\n\n          case 15:\n            usermetaOpts = _context.sent;\n            _context.next = 18;\n            return loadOpts(opts, loader);\n\n          case 18:\n            parsedOpts = _context.sent;\n            mergedOpts = _objectSpread(_objectSpread({}, mergeDeep(parsedOpts, usermetaOpts)), {}, {\n              config: mergeConfig((_parsedOpts$config = parsedOpts.config) !== null && _parsedOpts$config !== void 0 ? _parsedOpts$config : {}, (_usermetaOpts$config = usermetaOpts.config) !== null && _usermetaOpts$config !== void 0 ? _usermetaOpts$config : {})\n            });\n            _context.next = 22;\n            return _embed(el, parsedSpec, mergedOpts, loader);\n\n          case 22:\n            return _context.abrupt(\"return\", _context.sent);\n\n          case 23:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _embed2.apply(this, arguments);\n}\n\nfunction loadOpts(_x3, _x4) {\n  return _loadOpts.apply(this, arguments);\n}\n\nfunction _loadOpts() {\n  _loadOpts = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(opt, loader) {\n    var _opt$config;\n\n    var config, patch;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            if (!isString(opt.config)) {\n              _context2.next = 8;\n              break;\n            }\n\n            _context2.t1 = JSON;\n            _context2.next = 4;\n            return loader.load(opt.config);\n\n          case 4:\n            _context2.t2 = _context2.sent;\n            _context2.t0 = _context2.t1.parse.call(_context2.t1, _context2.t2);\n            _context2.next = 9;\n            break;\n\n          case 8:\n            _context2.t0 = (_opt$config = opt.config) !== null && _opt$config !== void 0 ? _opt$config : {};\n\n          case 9:\n            config = _context2.t0;\n\n            if (!isString(opt.patch)) {\n              _context2.next = 18;\n              break;\n            }\n\n            _context2.t4 = JSON;\n            _context2.next = 14;\n            return loader.load(opt.patch);\n\n          case 14:\n            _context2.t5 = _context2.sent;\n            _context2.t3 = _context2.t4.parse.call(_context2.t4, _context2.t5);\n            _context2.next = 19;\n            break;\n\n          case 18:\n            _context2.t3 = opt.patch;\n\n          case 19:\n            patch = _context2.t3;\n            return _context2.abrupt(\"return\", _objectSpread(_objectSpread(_objectSpread({}, opt), patch ? {\n              patch\n            } : {}), config ? {\n              config\n            } : {}));\n\n          case 21:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _loadOpts.apply(this, arguments);\n}\n\nfunction getRoot(el) {\n  var _document$head;\n\n  var possibleRoot = el.getRootNode ? el.getRootNode() : document;\n  return possibleRoot instanceof ShadowRoot ? {\n    root: possibleRoot,\n    rootContainer: possibleRoot\n  } : {\n    root: document,\n    rootContainer: (_document$head = document.head) !== null && _document$head !== void 0 ? _document$head : document.body\n  };\n}\n\nfunction _embed(_x5, _x6) {\n  return _embed3.apply(this, arguments);\n}\n\nfunction _embed3() {\n  _embed3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(el, spec) {\n    var _opts$config, _opts$actions, _opts$renderer, _opts$logLevel, _opts$downloadFileNam, _ref2, _vega$expressionInter;\n\n    var opts,\n        loader,\n        config,\n        actions,\n        i18n,\n        renderer,\n        logLevel,\n        downloadFileName,\n        element,\n        ID,\n        _getRoot,\n        root,\n        rootContainer,\n        style,\n        mode,\n        vgSpec,\n        parsed,\n        container,\n        chartWrapper,\n        patch,\n        ast,\n        runtime,\n        view,\n        handler,\n        hover,\n        _ref3,\n        hoverSet,\n        updateSet,\n        documentClickHandler,\n        wrapper,\n        details,\n        summary,\n        ctrl,\n        _loop,\n        _i,\n        _arr,\n        viewSourceLink,\n        compileLink,\n        _opts$editorUrl,\n        editorUrl,\n        editorLink,\n        finalize,\n        _args4 = arguments;\n\n    return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            finalize = function _finalize() {\n              if (documentClickHandler) {\n                document.removeEventListener('click', documentClickHandler);\n              }\n\n              view.finalize();\n            };\n\n            opts = _args4.length > 2 && _args4[2] !== undefined ? _args4[2] : {};\n            loader = _args4.length > 3 ? _args4[3] : undefined;\n            config = opts.theme ? mergeConfig(themes[opts.theme], (_opts$config = opts.config) !== null && _opts$config !== void 0 ? _opts$config : {}) : opts.config;\n            actions = isBoolean(opts.actions) ? opts.actions : mergeDeep({}, DEFAULT_ACTIONS, (_opts$actions = opts.actions) !== null && _opts$actions !== void 0 ? _opts$actions : {});\n            i18n = _objectSpread(_objectSpread({}, I18N), opts.i18n);\n            renderer = (_opts$renderer = opts.renderer) !== null && _opts$renderer !== void 0 ? _opts$renderer : 'canvas';\n            logLevel = (_opts$logLevel = opts.logLevel) !== null && _opts$logLevel !== void 0 ? _opts$logLevel : vega.Warn;\n            downloadFileName = (_opts$downloadFileNam = opts.downloadFileName) !== null && _opts$downloadFileNam !== void 0 ? _opts$downloadFileNam : 'visualization';\n            element = typeof el === 'string' ? document.querySelector(el) : el;\n\n            if (element) {\n              _context4.next = 12;\n              break;\n            }\n\n            throw new Error(\"\".concat(el, \" does not exist\"));\n\n          case 12:\n            if (opts.defaultStyle !== false) {\n              // Add a default stylesheet to the head of the document.\n              ID = 'vega-embed-style';\n              _getRoot = getRoot(element), root = _getRoot.root, rootContainer = _getRoot.rootContainer;\n\n              if (!root.getElementById(ID)) {\n                style = document.createElement('style');\n                style.id = ID;\n                style.innerText = opts.defaultStyle === undefined || opts.defaultStyle === true ? embedStyle.toString() : opts.defaultStyle;\n                rootContainer.appendChild(style);\n              }\n            }\n\n            mode = guessMode(spec, opts.mode);\n            vgSpec = PREPROCESSOR[mode](spec, config);\n\n            if (mode === 'vega-lite') {\n              if (vgSpec.$schema) {\n                parsed = schemaParser(vgSpec.$schema);\n\n                if (!satisfies_1(VERSION.vega, \"^\".concat(parsed.version.slice(1)))) {\n                  console.warn(\"The compiled spec uses Vega \".concat(parsed.version, \", but current version is v\").concat(VERSION.vega, \".\"));\n                }\n              }\n            }\n\n            element.classList.add('vega-embed');\n\n            if (actions) {\n              element.classList.add('has-actions');\n            }\n\n            element.innerHTML = ''; // clear container\n\n            container = element;\n\n            if (actions) {\n              chartWrapper = document.createElement('div');\n              chartWrapper.classList.add(CHART_WRAPPER_CLASS);\n              element.appendChild(chartWrapper);\n              container = chartWrapper;\n            }\n\n            patch = opts.patch;\n\n            if (patch) {\n              vgSpec = patch instanceof Function ? patch(vgSpec) : applyPatch(vgSpec, patch, true, false).newDocument;\n            } // Set locale. Note that this is a global setting.\n\n\n            if (opts.formatLocale) {\n              vega.formatLocale(opts.formatLocale);\n            }\n\n            if (opts.timeFormatLocale) {\n              vega.timeFormatLocale(opts.timeFormatLocale);\n            }\n\n            ast = opts.ast; // Do not apply the config to Vega when we have already applied it to Vega-Lite.\n            // This call may throw an Error if parsing fails.\n\n            runtime = vega.parse(vgSpec, mode === 'vega-lite' ? {} : config, {\n              ast\n            });\n            view = new (opts.viewClass || vega.View)(runtime, _objectSpread({\n              loader,\n              logLevel,\n              renderer\n            }, ast ? {\n              expr: (_ref2 = (_vega$expressionInter = vega.expressionInterpreter) !== null && _vega$expressionInter !== void 0 ? _vega$expressionInter : opts.expr) !== null && _ref2 !== void 0 ? _ref2 : expressionInterpreter\n            } : {}));\n            view.addSignalListener('autosize', (_, autosize) => {\n              var type = autosize.type;\n\n              if (type == 'fit-x') {\n                container.classList.add('fit-x');\n                container.classList.remove('fit-y');\n              } else if (type == 'fit-y') {\n                container.classList.remove('fit-x');\n                container.classList.add('fit-y');\n              } else if (type == 'fit') {\n                container.classList.add('fit-x', 'fit-y');\n              } else {\n                container.classList.remove('fit-x', 'fit-y');\n              }\n            });\n\n            if (opts.tooltip !== false) {\n              handler = isTooltipHandler(opts.tooltip) ? opts.tooltip : // user provided boolean true or tooltip options\n              new Handler(opts.tooltip === true ? {} : opts.tooltip).call;\n              view.tooltip(handler);\n            }\n\n            hover = opts.hover;\n\n            if (hover === undefined) {\n              hover = mode === 'vega';\n            }\n\n            if (hover) {\n              _ref3 = typeof hover === 'boolean' ? {} : hover, hoverSet = _ref3.hoverSet, updateSet = _ref3.updateSet;\n              view.hover(hoverSet, updateSet);\n            }\n\n            if (opts) {\n              if (opts.width != null) {\n                view.width(opts.width);\n              }\n\n              if (opts.height != null) {\n                view.height(opts.height);\n              }\n\n              if (opts.padding != null) {\n                view.padding(opts.padding);\n              }\n            }\n\n            _context4.next = 36;\n            return view.initialize(container, opts.bind).runAsync();\n\n          case 36:\n            if (actions !== false) {\n              wrapper = element;\n\n              if (opts.defaultStyle !== false) {\n                details = document.createElement('details');\n                details.title = i18n.CLICK_TO_VIEW_ACTIONS;\n                element.append(details);\n                wrapper = details;\n                summary = document.createElement('summary');\n                summary.innerHTML = SVG_CIRCLES;\n                details.append(summary);\n\n                documentClickHandler = ev => {\n                  if (!details.contains(ev.target)) {\n                    details.removeAttribute('open');\n                  }\n                };\n\n                document.addEventListener('click', documentClickHandler);\n              }\n\n              ctrl = document.createElement('div');\n              wrapper.append(ctrl);\n              ctrl.classList.add('vega-actions'); // add 'Export' action\n\n              if (actions === true || actions.export !== false) {\n                _loop = function _loop() {\n                  var ext = _arr[_i];\n\n                  if (actions === true || actions.export === true || actions.export[ext]) {\n                    var i18nExportAction = i18n[\"\".concat(ext.toUpperCase(), \"_ACTION\")];\n                    var exportLink = document.createElement('a');\n                    exportLink.text = i18nExportAction;\n                    exportLink.href = '#';\n                    exportLink.target = '_blank';\n                    exportLink.download = \"\".concat(downloadFileName, \".\").concat(ext); // add link on mousedown so that it's correct when the click happens\n\n                    exportLink.addEventListener('mousedown', /*#__PURE__*/function () {\n                      var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(e) {\n                        var url;\n                        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n                          while (1) {\n                            switch (_context3.prev = _context3.next) {\n                              case 0:\n                                e.preventDefault();\n                                _context3.next = 3;\n                                return view.toImageURL(ext, opts.scaleFactor);\n\n                              case 3:\n                                url = _context3.sent;\n                                this.href = url;\n\n                              case 5:\n                              case \"end\":\n                                return _context3.stop();\n                            }\n                          }\n                        }, _callee3, this);\n                      }));\n\n                      return function (_x7) {\n                        return _ref4.apply(this, arguments);\n                      };\n                    }());\n                    ctrl.append(exportLink);\n                  }\n                };\n\n                for (_i = 0, _arr = ['svg', 'png']; _i < _arr.length; _i++) {\n                  _loop();\n                }\n              } // add 'View Source' action\n\n\n              if (actions === true || actions.source !== false) {\n                viewSourceLink = document.createElement('a');\n                viewSourceLink.text = i18n.SOURCE_ACTION;\n                viewSourceLink.href = '#';\n                viewSourceLink.addEventListener('click', function (e) {\n                  var _opts$sourceHeader, _opts$sourceFooter;\n\n                  viewSource(stringify(spec), (_opts$sourceHeader = opts.sourceHeader) !== null && _opts$sourceHeader !== void 0 ? _opts$sourceHeader : '', (_opts$sourceFooter = opts.sourceFooter) !== null && _opts$sourceFooter !== void 0 ? _opts$sourceFooter : '', mode);\n                  e.preventDefault();\n                });\n                ctrl.append(viewSourceLink);\n              } // add 'View Compiled' action\n\n\n              if (mode === 'vega-lite' && (actions === true || actions.compiled !== false)) {\n                compileLink = document.createElement('a');\n                compileLink.text = i18n.COMPILED_ACTION;\n                compileLink.href = '#';\n                compileLink.addEventListener('click', function (e) {\n                  var _opts$sourceHeader2, _opts$sourceFooter2;\n\n                  viewSource(stringify(vgSpec), (_opts$sourceHeader2 = opts.sourceHeader) !== null && _opts$sourceHeader2 !== void 0 ? _opts$sourceHeader2 : '', (_opts$sourceFooter2 = opts.sourceFooter) !== null && _opts$sourceFooter2 !== void 0 ? _opts$sourceFooter2 : '', 'vega');\n                  e.preventDefault();\n                });\n                ctrl.append(compileLink);\n              } // add 'Open in Vega Editor' action\n\n\n              if (actions === true || actions.editor !== false) {\n                editorUrl = (_opts$editorUrl = opts.editorUrl) !== null && _opts$editorUrl !== void 0 ? _opts$editorUrl : 'https://vega.github.io/editor/';\n                editorLink = document.createElement('a');\n                editorLink.text = i18n.EDITOR_ACTION;\n                editorLink.href = '#';\n                editorLink.addEventListener('click', function (e) {\n                  post(window, editorUrl, {\n                    config: config,\n                    mode,\n                    renderer,\n                    spec: stringify(spec)\n                  });\n                  e.preventDefault();\n                });\n                ctrl.append(editorLink);\n              }\n            }\n\n            return _context4.abrupt(\"return\", {\n              view,\n              spec,\n              vgSpec,\n              finalize\n            });\n\n          case 38:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4);\n  }));\n  return _embed3.apply(this, arguments);\n}\n\nexport { DEFAULT_ACTIONS, embed as default, guessMode, vega, _vegaLite as vegaLite, version };","map":{"version":3,"sources":["../node_modules/@babel/runtime/helpers/esm/defineProperty.js","../node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","../node_modules/@babel/runtime/regenerator/index.js","../node_modules/yallist/yallist.js","../node_modules/lru-cache/index.js","../node_modules/semver/internal/parse-options.js","../node_modules/semver/internal/constants.js","../node_modules/semver/internal/debug.js","../node_modules/semver/internal/re.js","../node_modules/semver/internal/identifiers.js","../node_modules/semver/classes/semver.js","../node_modules/semver/functions/compare.js","../node_modules/semver/functions/eq.js","../node_modules/semver/functions/neq.js","../node_modules/semver/functions/gt.js","../node_modules/semver/functions/gte.js","../node_modules/semver/functions/lt.js","../node_modules/semver/functions/lte.js","../node_modules/semver/functions/cmp.js","../node_modules/semver/classes/comparator.js","../node_modules/semver/classes/range.js","../node_modules/semver/functions/satisfies.js","../src/post.ts","../src/style.ts","../src/util.ts","../src/embed.ts"],"names":["key","Object","value","enumerable","configurable","writable","obj","info","gen","reject","resolve","Promise","self","args","fn","asyncGeneratorStep","_next","Op","hasOwn","$Symbol","iteratorSymbol","asyncIteratorSymbol","toStringTagSymbol","protoGenerator","outerFn","generator","context","tryLocsList","makeInvokeMethod","type","arg","err","GenStateSuspendedStart","GenStateSuspendedYield","GenStateExecuting","GenStateCompleted","ContinueSentinel","IteratorPrototype","getProto","NativeIteratorPrototype","values","Gp","GeneratorFunctionPrototype","Generator","GeneratorFunction","prototype","ctor","genFun","__await","record","tryCatch","result","invoke","previousPromise","callInvokeWithMethodAndArg","defineIteratorMethods","AsyncIterator","PromiseImpl","iter","wrap","state","method","doneResult","delegate","delegateResult","maybeInvokeDelegate","done","entry","tryLoc","locs","keys","next","iteratorMethod","iterable","isNaN","i","Context","constructor","reset","name","stop","rootEntry","rootRecord","dispatchException","handle","hasCatch","hasFinally","abrupt","finallyEntry","complete","finish","resetTryEntry","thrown","delegateYield","iterator","resultName","nextLoc","yallist","Yallist","list","arguments","l","node","prev","head","tail","push","unshift","res","thisp","walker","acc","arr","to","from","ret","start","insert","p","inserted","Symbol","MAX","LENGTH","LENGTH_CALCULATOR","ALLOW_STALE","MAX_AGE","DISPOSE","NO_DISPOSE_ON_SET","LRU_LIST","CACHE","UPDATE_AGE_ON_GET","naiveLength","max","options","Infinity","lc","mL","trim","allowStale","maxAge","lengthCalculator","lC","hit","length","itemCount","rforEach","forEachStep","forEach","k","dump","isStale","v","e","h","dumpLru","set","now","Date","len","del","item","has","get","peek","pop","load","expiresAt","prune","diff","lruCache","LRUCache","opts","parseOptions","loose","parseOptions_1","SEMVER_SPEC_VERSION","MAX_LENGTH","MAX_SAFE_INTEGER","Number","MAX_SAFE_COMPONENT_LENGTH","constants","debug","process","console","debug_1","require$$0","exports","module","re","src","t","R","createToken","index","isGlobal","numeric","compareIdentifiers","anum","bnum","a","b","rcompareIdentifiers","identifiers","require$$1","require$$2","require$$4","version","m","id","num","format","toString","compare","other","compareMain","comparePre","compareBuild","inc","semver","SemVer","compare_1","eq","eq_1","neq","neq_1","gt","gt_1","gte","gte_1","lt","lt_1","lte","lte_1","cmp","cmp_1","ANY","comp","parse","r","test","intersects","includePrerelease","sameDirectionIncreasing","sameDirectionDecreasing","sameSemVer","differentDirectionsInclusive","oppositeDirectionsLessThan","oppositeDirectionsGreaterThan","comparator","Comparator","Range","range","c","first","isNullSet","isAny","comps","parseRange","memoOpts","memoKey","cached","cache","hr","hyphenReplace","compRe","rangeList","parseComparator","replaceGTE0","rangeMap","thisComparators","isSatisfiable","rangeComparators","thisComparator","rangeComparator","testSet","LRU","comparatorTrimReplace","tildeTrimReplace","caretTrimReplace","require$$5","remainingComparators","comparators","testComparator","otherComparator","replaceCarets","replaceTildes","replaceXRanges","replaceStars","isX","replaceTilde","replaceCaret","z","M","replaceXRange","xM","xm","xp","anyX","gtlt","pr","incPr","allowed","satisfies","satisfies_1"],"mappings":"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","sourcesContent":["export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\"use strict\";\n\nvar Op = Object.prototype;\nvar hasOwn = Op.hasOwnProperty;\nvar undefined; // More compressible than void 0.\nvar $Symbol = typeof Symbol === \"function\" ? Symbol : {};\nvar iteratorSymbol = $Symbol.iterator || \"@@iterator\";\nvar asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\nvar toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\nfunction wrap(innerFn, outerFn, self, tryLocsList) {\n  // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n  var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n  var generator = Object.create(protoGenerator.prototype);\n  var context = new Context(tryLocsList || []);\n\n  // The ._invoke method unifies the implementations of the .next,\n  // .throw, and .return methods.\n  generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n  return generator;\n}\n\n// Try/catch helper to minimize deoptimizations. Returns a completion\n// record like context.tryEntries[i].completion. This interface could\n// have been (and was previously) designed to take a closure to be\n// invoked without arguments, but in all the cases we care about we\n// already have an existing method we want to call, so there's no need\n// to create a new function object. We can even get away with assuming\n// the method takes exactly one argument, since that happens to be true\n// in every case, so we don't have to touch the arguments object. The\n// only additional allocation required is the completion record, which\n// has a stable shape and so hopefully should be cheap to allocate.\nfunction tryCatch(fn, obj, arg) {\n  try {\n    return { type: \"normal\", arg: fn.call(obj, arg) };\n  } catch (err) {\n    return { type: \"throw\", arg: err };\n  }\n}\n\nvar GenStateSuspendedStart = \"suspendedStart\";\nvar GenStateSuspendedYield = \"suspendedYield\";\nvar GenStateExecuting = \"executing\";\nvar GenStateCompleted = \"completed\";\n\n// Returning this object from the innerFn has the same effect as\n// breaking out of the dispatch switch statement.\nvar ContinueSentinel = {};\n\n// Dummy constructor functions that we use as the .constructor and\n// .constructor.prototype properties for functions that return Generator\n// objects. For full spec compliance, you may wish to configure your\n// minifier not to mangle the names of these two functions.\nfunction Generator() {}\nfunction GeneratorFunction() {}\nfunction GeneratorFunctionPrototype() {}\n\n// This is a polyfill for %IteratorPrototype% for environments that\n// don't natively support it.\nvar IteratorPrototype = {};\nIteratorPrototype[iteratorSymbol] = function () {\n  return this;\n};\n\nvar getProto = Object.getPrototypeOf;\nvar NativeIteratorPrototype = getProto && getProto(getProto(values([])));\nif (NativeIteratorPrototype &&\n  NativeIteratorPrototype !== Op &&\n  hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n  // This environment has a native %IteratorPrototype%; use it instead\n  // of the polyfill.\n  IteratorPrototype = NativeIteratorPrototype;\n}\n\nvar Gp = GeneratorFunctionPrototype.prototype =\n  Generator.prototype = Object.create(IteratorPrototype);\nGeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\nGeneratorFunctionPrototype.constructor = GeneratorFunction;\nGeneratorFunctionPrototype[toStringTagSymbol] =\n  GeneratorFunction.displayName = \"GeneratorFunction\";\n\n// Helper for defining the .next, .throw, and .return methods of the\n// Iterator interface in terms of a single ._invoke method.\nfunction defineIteratorMethods(prototype) {\n  [\"next\", \"throw\", \"return\"].forEach(function(method) {\n    prototype[method] = function(arg) {\n      return this._invoke(method, arg);\n    };\n  });\n}\n\nfunction isGeneratorFunction (genFun) {\n  var ctor = typeof genFun === \"function\" && genFun.constructor;\n  return ctor\n    ? ctor === GeneratorFunction ||\n    // For the native GeneratorFunction constructor, the best we can\n    // do is to check its .name property.\n    (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n    : false;\n};\n\nfunction mark (genFun) {\n  if (Object.setPrototypeOf) {\n    Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n  } else {\n    genFun.__proto__ = GeneratorFunctionPrototype;\n    if (!(toStringTagSymbol in genFun)) {\n      genFun[toStringTagSymbol] = \"GeneratorFunction\";\n    }\n  }\n  genFun.prototype = Object.create(Gp);\n  return genFun;\n};\n\n// Within the body of any async function, `await x` is transformed to\n// `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n// `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n// meant to be awaited.\nfunction awrap (arg) {\n  return { __await: arg };\n};\n\nfunction AsyncIterator(generator, PromiseImpl) {\n  function invoke(method, arg, resolve, reject) {\n    var record = tryCatch(generator[method], generator, arg);\n    if (record.type === \"throw\") {\n      reject(record.arg);\n    } else {\n      var result = record.arg;\n      var value = result.value;\n      if (value &&\n        typeof value === \"object\" &&\n        hasOwn.call(value, \"__await\")) {\n        return PromiseImpl.resolve(value.__await).then(function(value) {\n          invoke(\"next\", value, resolve, reject);\n        }, function(err) {\n          invoke(\"throw\", err, resolve, reject);\n        });\n      }\n\n      return PromiseImpl.resolve(value).then(function(unwrapped) {\n        // When a yielded Promise is resolved, its final value becomes\n        // the .value of the Promise<{value,done}> result for the\n        // current iteration.\n        result.value = unwrapped;\n        resolve(result);\n      }, function(error) {\n        // If a rejected Promise was yielded, throw the rejection back\n        // into the async generator function so it can be handled there.\n        return invoke(\"throw\", error, resolve, reject);\n      });\n    }\n  }\n\n  var previousPromise;\n\n  function enqueue(method, arg) {\n    function callInvokeWithMethodAndArg() {\n      return new PromiseImpl(function(resolve, reject) {\n        invoke(method, arg, resolve, reject);\n      });\n    }\n\n    return previousPromise =\n      // If enqueue has been called before, then we want to wait until\n      // all previous Promises have been resolved before calling invoke,\n      // so that results are always delivered in the correct order. If\n      // enqueue has not been called before, then it is important to\n      // call invoke immediately, without waiting on a callback to fire,\n      // so that the async generator function has the opportunity to do\n      // any necessary setup in a predictable way. This predictability\n      // is why the Promise constructor synchronously invokes its\n      // executor callback, and why async functions synchronously\n      // execute code before the first await. Since we implement simple\n      // async functions in terms of async generators, it is especially\n      // important to get this right, even though it requires care.\n      previousPromise ? previousPromise.then(\n        callInvokeWithMethodAndArg,\n        // Avoid propagating failures to Promises returned by later\n        // invocations of the iterator.\n        callInvokeWithMethodAndArg\n      ) : callInvokeWithMethodAndArg();\n  }\n\n  // Define the unified helper method that is used to implement .next,\n  // .throw, and .return (see defineIteratorMethods).\n  this._invoke = enqueue;\n}\n\ndefineIteratorMethods(AsyncIterator.prototype);\nAsyncIterator.prototype[asyncIteratorSymbol] = function () {\n  return this;\n};\n\n// Note that simple async functions are implemented on top of\n// AsyncIterator objects; they just return a Promise for the value of\n// the final result produced by the iterator.\n function async (innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n  if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n  var iter = new AsyncIterator(\n    wrap(innerFn, outerFn, self, tryLocsList),\n    PromiseImpl\n  );\n\n  return isGeneratorFunction(outerFn)\n    ? iter // If outerFn is a generator, return the full iterator.\n    : iter.next().then(function(result) {\n      return result.done ? result.value : iter.next();\n    });\n};\n\nfunction makeInvokeMethod(innerFn, self, context) {\n  var state = GenStateSuspendedStart;\n\n  return function invoke(method, arg) {\n    if (state === GenStateExecuting) {\n      throw new Error(\"Generator is already running\");\n    }\n\n    if (state === GenStateCompleted) {\n      if (method === \"throw\") {\n        throw arg;\n      }\n\n      // Be forgiving, per 25.3.3.3.3 of the spec:\n      // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n      return doneResult();\n    }\n\n    context.method = method;\n    context.arg = arg;\n\n    while (true) {\n      var delegate = context.delegate;\n      if (delegate) {\n        var delegateResult = maybeInvokeDelegate(delegate, context);\n        if (delegateResult) {\n          if (delegateResult === ContinueSentinel) continue;\n          return delegateResult;\n        }\n      }\n\n      if (context.method === \"next\") {\n        // Setting context._sent for legacy support of Babel's\n        // function.sent implementation.\n        context.sent = context._sent = context.arg;\n\n      } else if (context.method === \"throw\") {\n        if (state === GenStateSuspendedStart) {\n          state = GenStateCompleted;\n          throw context.arg;\n        }\n\n        context.dispatchException(context.arg);\n\n      } else if (context.method === \"return\") {\n        context.abrupt(\"return\", context.arg);\n      }\n\n      state = GenStateExecuting;\n\n      var record = tryCatch(innerFn, self, context);\n      if (record.type === \"normal\") {\n        // If an exception is thrown from innerFn, we leave state ===\n        // GenStateExecuting and loop back for another invocation.\n        state = context.done\n          ? GenStateCompleted\n          : GenStateSuspendedYield;\n\n        if (record.arg === ContinueSentinel) {\n          continue;\n        }\n\n        return {\n          value: record.arg,\n          done: context.done\n        };\n\n      } else if (record.type === \"throw\") {\n        state = GenStateCompleted;\n        // Dispatch the exception by looping back around to the\n        // context.dispatchException(context.arg) call above.\n        context.method = \"throw\";\n        context.arg = record.arg;\n      }\n    }\n  };\n}\n\n// Call delegate.iterator[context.method](context.arg) and handle the\n// result, either by returning a { value, done } result from the\n// delegate iterator, or by modifying context.method and context.arg,\n// setting context.delegate to null, and returning the ContinueSentinel.\nfunction maybeInvokeDelegate(delegate, context) {\n  var method = delegate.iterator[context.method];\n  if (method === undefined) {\n    // A .throw or .return when the delegate iterator has no .throw\n    // method always terminates the yield* loop.\n    context.delegate = null;\n\n    if (context.method === \"throw\") {\n      // Note: [\"return\"] must be used for ES3 parsing compatibility.\n      if (delegate.iterator[\"return\"]) {\n        // If the delegate iterator has a return method, give it a\n        // chance to clean up.\n        context.method = \"return\";\n        context.arg = undefined;\n        maybeInvokeDelegate(delegate, context);\n\n        if (context.method === \"throw\") {\n          // If maybeInvokeDelegate(context) changed context.method from\n          // \"return\" to \"throw\", let that override the TypeError below.\n          return ContinueSentinel;\n        }\n      }\n\n      context.method = \"throw\";\n      context.arg = new TypeError(\n        \"The iterator does not provide a 'throw' method\");\n    }\n\n    return ContinueSentinel;\n  }\n\n  var record = tryCatch(method, delegate.iterator, context.arg);\n\n  if (record.type === \"throw\") {\n    context.method = \"throw\";\n    context.arg = record.arg;\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  var info = record.arg;\n\n  if (! info) {\n    context.method = \"throw\";\n    context.arg = new TypeError(\"iterator result is not an object\");\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  if (info.done) {\n    // Assign the result of the finished delegate to the temporary\n    // variable specified by delegate.resultName (see delegateYield).\n    context[delegate.resultName] = info.value;\n\n    // Resume execution at the desired location (see delegateYield).\n    context.next = delegate.nextLoc;\n\n    // If context.method was \"throw\" but the delegate handled the\n    // exception, let the outer generator proceed normally. If\n    // context.method was \"next\", forget context.arg since it has been\n    // \"consumed\" by the delegate iterator. If context.method was\n    // \"return\", allow the original .return call to continue in the\n    // outer generator.\n    if (context.method !== \"return\") {\n      context.method = \"next\";\n      context.arg = undefined;\n    }\n\n  } else {\n    // Re-yield the result returned by the delegate method.\n    return info;\n  }\n\n  // The delegate iterator is finished, so forget it and continue with\n  // the outer generator.\n  context.delegate = null;\n  return ContinueSentinel;\n}\n\n// Define Generator.prototype.{next,throw,return} in terms of the\n// unified ._invoke helper method.\ndefineIteratorMethods(Gp);\n\nGp[toStringTagSymbol] = \"Generator\";\n\n// A Generator should always return itself as the iterator object when the\n// @@iterator function is called on it. Some browsers' implementations of the\n// iterator prototype chain incorrectly implement this, causing the Generator\n// object to not be returned from this call. This ensures that doesn't happen.\n// See https://github.com/facebook/regenerator/issues/274 for more details.\nGp[iteratorSymbol] = function() {\n  return this;\n};\n\nGp.toString = function() {\n  return \"[object Generator]\";\n};\n\nfunction pushTryEntry(locs) {\n  var entry = { tryLoc: locs[0] };\n\n  if (1 in locs) {\n    entry.catchLoc = locs[1];\n  }\n\n  if (2 in locs) {\n    entry.finallyLoc = locs[2];\n    entry.afterLoc = locs[3];\n  }\n\n  this.tryEntries.push(entry);\n}\n\nfunction resetTryEntry(entry) {\n  var record = entry.completion || {};\n  record.type = \"normal\";\n  delete record.arg;\n  entry.completion = record;\n}\n\nfunction Context(tryLocsList) {\n  // The root entry object (effectively a try statement without a catch\n  // or a finally block) gives us a place to store values thrown from\n  // locations where there is no enclosing try statement.\n  this.tryEntries = [{ tryLoc: \"root\" }];\n  tryLocsList.forEach(pushTryEntry, this);\n  this.reset(true);\n}\n\nfunction keys (object) {\n  var keys = [];\n  for (var key in object) {\n    keys.push(key);\n  }\n  keys.reverse();\n\n  // Rather than returning an object with a next method, we keep\n  // things simple and return the next function itself.\n  return function next() {\n    while (keys.length) {\n      var key = keys.pop();\n      if (key in object) {\n        next.value = key;\n        next.done = false;\n        return next;\n      }\n    }\n\n    // To avoid creating an additional object, we just hang the .value\n    // and .done properties off the next function object itself. This\n    // also ensures that the minifier will not anonymize the function.\n    next.done = true;\n    return next;\n  };\n};\n\nfunction values(iterable) {\n  if (iterable) {\n    var iteratorMethod = iterable[iteratorSymbol];\n    if (iteratorMethod) {\n      return iteratorMethod.call(iterable);\n    }\n\n    if (typeof iterable.next === \"function\") {\n      return iterable;\n    }\n\n    if (!isNaN(iterable.length)) {\n      var i = -1, next = function next() {\n        while (++i < iterable.length) {\n          if (hasOwn.call(iterable, i)) {\n            next.value = iterable[i];\n            next.done = false;\n            return next;\n          }\n        }\n\n        next.value = undefined;\n        next.done = true;\n\n        return next;\n      };\n\n      return next.next = next;\n    }\n  }\n\n  // Return an iterator with no values.\n  return { next: doneResult };\n}\n\nfunction doneResult() {\n  return { value: undefined, done: true };\n}\n\nContext.prototype = {\n  constructor: Context,\n\n  reset: function(skipTempReset) {\n    this.prev = 0;\n    this.next = 0;\n    // Resetting context._sent for legacy support of Babel's\n    // function.sent implementation.\n    this.sent = this._sent = undefined;\n    this.done = false;\n    this.delegate = null;\n\n    this.method = \"next\";\n    this.arg = undefined;\n\n    this.tryEntries.forEach(resetTryEntry);\n\n    if (!skipTempReset) {\n      for (var name in this) {\n        // Not sure about the optimal order of these conditions:\n        if (name.charAt(0) === \"t\" &&\n          hasOwn.call(this, name) &&\n          !isNaN(+name.slice(1))) {\n          this[name] = undefined;\n        }\n      }\n    }\n  },\n\n  stop: function() {\n    this.done = true;\n\n    var rootEntry = this.tryEntries[0];\n    var rootRecord = rootEntry.completion;\n    if (rootRecord.type === \"throw\") {\n      throw rootRecord.arg;\n    }\n\n    return this.rval;\n  },\n\n  dispatchException: function(exception) {\n    if (this.done) {\n      throw exception;\n    }\n\n    var context = this;\n    function handle(loc, caught) {\n      record.type = \"throw\";\n      record.arg = exception;\n      context.next = loc;\n\n      if (caught) {\n        // If the dispatched exception was caught by a catch block,\n        // then let that catch block handle the exception normally.\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n      return !! caught;\n    }\n\n    for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n      var entry = this.tryEntries[i];\n      var record = entry.completion;\n\n      if (entry.tryLoc === \"root\") {\n        // Exception thrown outside of any try block that could handle\n        // it, so set the completion value of the entire function to\n        // throw the exception.\n        return handle(\"end\");\n      }\n\n      if (entry.tryLoc <= this.prev) {\n        var hasCatch = hasOwn.call(entry, \"catchLoc\");\n        var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n        if (hasCatch && hasFinally) {\n          if (this.prev < entry.catchLoc) {\n            return handle(entry.catchLoc, true);\n          } else if (this.prev < entry.finallyLoc) {\n            return handle(entry.finallyLoc);\n          }\n\n        } else if (hasCatch) {\n          if (this.prev < entry.catchLoc) {\n            return handle(entry.catchLoc, true);\n          }\n\n        } else if (hasFinally) {\n          if (this.prev < entry.finallyLoc) {\n            return handle(entry.finallyLoc);\n          }\n\n        } else {\n          throw new Error(\"try statement without catch or finally\");\n        }\n      }\n    }\n  },\n\n  abrupt: function(type, arg) {\n    for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n      var entry = this.tryEntries[i];\n      if (entry.tryLoc <= this.prev &&\n        hasOwn.call(entry, \"finallyLoc\") &&\n        this.prev < entry.finallyLoc) {\n        var finallyEntry = entry;\n        break;\n      }\n    }\n\n    if (finallyEntry &&\n      (type === \"break\" ||\n        type === \"continue\") &&\n      finallyEntry.tryLoc <= arg &&\n      arg <= finallyEntry.finallyLoc) {\n      // Ignore the finally entry if control is not jumping to a\n      // location outside the try/catch block.\n      finallyEntry = null;\n    }\n\n    var record = finallyEntry ? finallyEntry.completion : {};\n    record.type = type;\n    record.arg = arg;\n\n    if (finallyEntry) {\n      this.method = \"next\";\n      this.next = finallyEntry.finallyLoc;\n      return ContinueSentinel;\n    }\n\n    return this.complete(record);\n  },\n\n  complete: function(record, afterLoc) {\n    if (record.type === \"throw\") {\n      throw record.arg;\n    }\n\n    if (record.type === \"break\" ||\n      record.type === \"continue\") {\n      this.next = record.arg;\n    } else if (record.type === \"return\") {\n      this.rval = this.arg = record.arg;\n      this.method = \"return\";\n      this.next = \"end\";\n    } else if (record.type === \"normal\" && afterLoc) {\n      this.next = afterLoc;\n    }\n\n    return ContinueSentinel;\n  },\n\n  finish: function(finallyLoc) {\n    for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n      var entry = this.tryEntries[i];\n      if (entry.finallyLoc === finallyLoc) {\n        this.complete(entry.completion, entry.afterLoc);\n        resetTryEntry(entry);\n        return ContinueSentinel;\n      }\n    }\n  },\n\n  \"catch\": function(tryLoc) {\n    for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n      var entry = this.tryEntries[i];\n      if (entry.tryLoc === tryLoc) {\n        var record = entry.completion;\n        if (record.type === \"throw\") {\n          var thrown = record.arg;\n          resetTryEntry(entry);\n        }\n        return thrown;\n      }\n    }\n\n    // The context.catch method must only be called with a location\n    // argument that corresponds to a known catch block.\n    throw new Error(\"illegal catch attempt\");\n  },\n\n  delegateYield: function(iterable, resultName, nextLoc) {\n    this.delegate = {\n      iterator: values(iterable),\n      resultName: resultName,\n      nextLoc: nextLoc\n    };\n\n    if (this.method === \"next\") {\n      // Deliberately forget the last sent value so that we don't\n      // accidentally pass it on to the delegate.\n      this.arg = undefined;\n    }\n\n    return ContinueSentinel;\n  }\n};\n\n// Export a default namespace that plays well with Rollup\nexport default {\n  wrap,\n  isGeneratorFunction,\n  AsyncIterator,\n  mark,\n  awrap,\n  async,\n  keys,\n  values\n};\n","'use strict'\nmodule.exports = Yallist\n\nYallist.Node = Node\nYallist.create = Yallist\n\nfunction Yallist (list) {\n  var self = this\n  if (!(self instanceof Yallist)) {\n    self = new Yallist()\n  }\n\n  self.tail = null\n  self.head = null\n  self.length = 0\n\n  if (list && typeof list.forEach === 'function') {\n    list.forEach(function (item) {\n      self.push(item)\n    })\n  } else if (arguments.length > 0) {\n    for (var i = 0, l = arguments.length; i < l; i++) {\n      self.push(arguments[i])\n    }\n  }\n\n  return self\n}\n\nYallist.prototype.removeNode = function (node) {\n  if (node.list !== this) {\n    throw new Error('removing node which does not belong to this list')\n  }\n\n  var next = node.next\n  var prev = node.prev\n\n  if (next) {\n    next.prev = prev\n  }\n\n  if (prev) {\n    prev.next = next\n  }\n\n  if (node === this.head) {\n    this.head = next\n  }\n  if (node === this.tail) {\n    this.tail = prev\n  }\n\n  node.list.length--\n  node.next = null\n  node.prev = null\n  node.list = null\n\n  return next\n}\n\nYallist.prototype.unshiftNode = function (node) {\n  if (node === this.head) {\n    return\n  }\n\n  if (node.list) {\n    node.list.removeNode(node)\n  }\n\n  var head = this.head\n  node.list = this\n  node.next = head\n  if (head) {\n    head.prev = node\n  }\n\n  this.head = node\n  if (!this.tail) {\n    this.tail = node\n  }\n  this.length++\n}\n\nYallist.prototype.pushNode = function (node) {\n  if (node === this.tail) {\n    return\n  }\n\n  if (node.list) {\n    node.list.removeNode(node)\n  }\n\n  var tail = this.tail\n  node.list = this\n  node.prev = tail\n  if (tail) {\n    tail.next = node\n  }\n\n  this.tail = node\n  if (!this.head) {\n    this.head = node\n  }\n  this.length++\n}\n\nYallist.prototype.push = function () {\n  for (var i = 0, l = arguments.length; i < l; i++) {\n    push(this, arguments[i])\n  }\n  return this.length\n}\n\nYallist.prototype.unshift = function () {\n  for (var i = 0, l = arguments.length; i < l; i++) {\n    unshift(this, arguments[i])\n  }\n  return this.length\n}\n\nYallist.prototype.pop = function () {\n  if (!this.tail) {\n    return undefined\n  }\n\n  var res = this.tail.value\n  this.tail = this.tail.prev\n  if (this.tail) {\n    this.tail.next = null\n  } else {\n    this.head = null\n  }\n  this.length--\n  return res\n}\n\nYallist.prototype.shift = function () {\n  if (!this.head) {\n    return undefined\n  }\n\n  var res = this.head.value\n  this.head = this.head.next\n  if (this.head) {\n    this.head.prev = null\n  } else {\n    this.tail = null\n  }\n  this.length--\n  return res\n}\n\nYallist.prototype.forEach = function (fn, thisp) {\n  thisp = thisp || this\n  for (var walker = this.head, i = 0; walker !== null; i++) {\n    fn.call(thisp, walker.value, i, this)\n    walker = walker.next\n  }\n}\n\nYallist.prototype.forEachReverse = function (fn, thisp) {\n  thisp = thisp || this\n  for (var walker = this.tail, i = this.length - 1; walker !== null; i--) {\n    fn.call(thisp, walker.value, i, this)\n    walker = walker.prev\n  }\n}\n\nYallist.prototype.get = function (n) {\n  for (var i = 0, walker = this.head; walker !== null && i < n; i++) {\n    // abort out of the list early if we hit a cycle\n    walker = walker.next\n  }\n  if (i === n && walker !== null) {\n    return walker.value\n  }\n}\n\nYallist.prototype.getReverse = function (n) {\n  for (var i = 0, walker = this.tail; walker !== null && i < n; i++) {\n    // abort out of the list early if we hit a cycle\n    walker = walker.prev\n  }\n  if (i === n && walker !== null) {\n    return walker.value\n  }\n}\n\nYallist.prototype.map = function (fn, thisp) {\n  thisp = thisp || this\n  var res = new Yallist()\n  for (var walker = this.head; walker !== null;) {\n    res.push(fn.call(thisp, walker.value, this))\n    walker = walker.next\n  }\n  return res\n}\n\nYallist.prototype.mapReverse = function (fn, thisp) {\n  thisp = thisp || this\n  var res = new Yallist()\n  for (var walker = this.tail; walker !== null;) {\n    res.push(fn.call(thisp, walker.value, this))\n    walker = walker.prev\n  }\n  return res\n}\n\nYallist.prototype.reduce = function (fn, initial) {\n  var acc\n  var walker = this.head\n  if (arguments.length > 1) {\n    acc = initial\n  } else if (this.head) {\n    walker = this.head.next\n    acc = this.head.value\n  } else {\n    throw new TypeError('Reduce of empty list with no initial value')\n  }\n\n  for (var i = 0; walker !== null; i++) {\n    acc = fn(acc, walker.value, i)\n    walker = walker.next\n  }\n\n  return acc\n}\n\nYallist.prototype.reduceReverse = function (fn, initial) {\n  var acc\n  var walker = this.tail\n  if (arguments.length > 1) {\n    acc = initial\n  } else if (this.tail) {\n    walker = this.tail.prev\n    acc = this.tail.value\n  } else {\n    throw new TypeError('Reduce of empty list with no initial value')\n  }\n\n  for (var i = this.length - 1; walker !== null; i--) {\n    acc = fn(acc, walker.value, i)\n    walker = walker.prev\n  }\n\n  return acc\n}\n\nYallist.prototype.toArray = function () {\n  var arr = new Array(this.length)\n  for (var i = 0, walker = this.head; walker !== null; i++) {\n    arr[i] = walker.value\n    walker = walker.next\n  }\n  return arr\n}\n\nYallist.prototype.toArrayReverse = function () {\n  var arr = new Array(this.length)\n  for (var i = 0, walker = this.tail; walker !== null; i++) {\n    arr[i] = walker.value\n    walker = walker.prev\n  }\n  return arr\n}\n\nYallist.prototype.slice = function (from, to) {\n  to = to || this.length\n  if (to < 0) {\n    to += this.length\n  }\n  from = from || 0\n  if (from < 0) {\n    from += this.length\n  }\n  var ret = new Yallist()\n  if (to < from || to < 0) {\n    return ret\n  }\n  if (from < 0) {\n    from = 0\n  }\n  if (to > this.length) {\n    to = this.length\n  }\n  for (var i = 0, walker = this.head; walker !== null && i < from; i++) {\n    walker = walker.next\n  }\n  for (; walker !== null && i < to; i++, walker = walker.next) {\n    ret.push(walker.value)\n  }\n  return ret\n}\n\nYallist.prototype.sliceReverse = function (from, to) {\n  to = to || this.length\n  if (to < 0) {\n    to += this.length\n  }\n  from = from || 0\n  if (from < 0) {\n    from += this.length\n  }\n  var ret = new Yallist()\n  if (to < from || to < 0) {\n    return ret\n  }\n  if (from < 0) {\n    from = 0\n  }\n  if (to > this.length) {\n    to = this.length\n  }\n  for (var i = this.length, walker = this.tail; walker !== null && i > to; i--) {\n    walker = walker.prev\n  }\n  for (; walker !== null && i > from; i--, walker = walker.prev) {\n    ret.push(walker.value)\n  }\n  return ret\n}\n\nYallist.prototype.splice = function (start, deleteCount, ...nodes) {\n  if (start > this.length) {\n    start = this.length - 1\n  }\n  if (start < 0) {\n    start = this.length + start;\n  }\n\n  for (var i = 0, walker = this.head; walker !== null && i < start; i++) {\n    walker = walker.next\n  }\n\n  var ret = []\n  for (var i = 0; walker && i < deleteCount; i++) {\n    ret.push(walker.value)\n    walker = this.removeNode(walker)\n  }\n  if (walker === null) {\n    walker = this.tail\n  }\n\n  if (walker !== this.head && walker !== this.tail) {\n    walker = walker.prev\n  }\n\n  for (var i = 0; i < nodes.length; i++) {\n    walker = insert(this, walker, nodes[i])\n  }\n  return ret;\n}\n\nYallist.prototype.reverse = function () {\n  var head = this.head\n  var tail = this.tail\n  for (var walker = head; walker !== null; walker = walker.prev) {\n    var p = walker.prev\n    walker.prev = walker.next\n    walker.next = p\n  }\n  this.head = tail\n  this.tail = head\n  return this\n}\n\nfunction insert (self, node, value) {\n  var inserted = node === self.head ?\n    new Node(value, null, node, self) :\n    new Node(value, node, node.next, self)\n\n  if (inserted.next === null) {\n    self.tail = inserted\n  }\n  if (inserted.prev === null) {\n    self.head = inserted\n  }\n\n  self.length++\n\n  return inserted\n}\n\nfunction push (self, item) {\n  self.tail = new Node(item, self.tail, null, self)\n  if (!self.head) {\n    self.head = self.tail\n  }\n  self.length++\n}\n\nfunction unshift (self, item) {\n  self.head = new Node(item, null, self.head, self)\n  if (!self.tail) {\n    self.tail = self.head\n  }\n  self.length++\n}\n\nfunction Node (value, prev, next, list) {\n  if (!(this instanceof Node)) {\n    return new Node(value, prev, next, list)\n  }\n\n  this.list = list\n  this.value = value\n\n  if (prev) {\n    prev.next = this\n    this.prev = prev\n  } else {\n    this.prev = null\n  }\n\n  if (next) {\n    next.prev = this\n    this.next = next\n  } else {\n    this.next = null\n  }\n}\n\ntry {\n  // add if support for Symbol.iterator is present\n  Yallist.prototype[Symbol.iterator] = function* () {\n    for (let walker = this.head; walker; walker = walker.next) {\n      yield walker.value\n    }\n  }\n} catch (er) {}\n","'use strict'\n\n// A linked list to keep track of recently-used-ness\nconst Yallist = require('yallist')\n\nconst MAX = Symbol('max')\nconst LENGTH = Symbol('length')\nconst LENGTH_CALCULATOR = Symbol('lengthCalculator')\nconst ALLOW_STALE = Symbol('allowStale')\nconst MAX_AGE = Symbol('maxAge')\nconst DISPOSE = Symbol('dispose')\nconst NO_DISPOSE_ON_SET = Symbol('noDisposeOnSet')\nconst LRU_LIST = Symbol('lruList')\nconst CACHE = Symbol('cache')\nconst UPDATE_AGE_ON_GET = Symbol('updateAgeOnGet')\n\nconst naiveLength = () => 1\n\n// lruList is a yallist where the head is the youngest\n// item, and the tail is the oldest.  the list contains the Hit\n// objects as the entries.\n// Each Hit object has a reference to its Yallist.Node.  This\n// never changes.\n//\n// cache is a Map (or PseudoMap) that matches the keys to\n// the Yallist.Node object.\nclass LRUCache {\n  constructor (options) {\n    if (typeof options === 'number')\n      options = { max: options }\n\n    if (!options)\n      options = {}\n\n    if (options.max && (typeof options.max !== 'number' || options.max < 0))\n      throw new TypeError('max must be a non-negative number')\n    // Kind of weird to have a default max of Infinity, but oh well.\n    const max = this[MAX] = options.max || Infinity\n\n    const lc = options.length || naiveLength\n    this[LENGTH_CALCULATOR] = (typeof lc !== 'function') ? naiveLength : lc\n    this[ALLOW_STALE] = options.stale || false\n    if (options.maxAge && typeof options.maxAge !== 'number')\n      throw new TypeError('maxAge must be a number')\n    this[MAX_AGE] = options.maxAge || 0\n    this[DISPOSE] = options.dispose\n    this[NO_DISPOSE_ON_SET] = options.noDisposeOnSet || false\n    this[UPDATE_AGE_ON_GET] = options.updateAgeOnGet || false\n    this.reset()\n  }\n\n  // resize the cache when the max changes.\n  set max (mL) {\n    if (typeof mL !== 'number' || mL < 0)\n      throw new TypeError('max must be a non-negative number')\n\n    this[MAX] = mL || Infinity\n    trim(this)\n  }\n  get max () {\n    return this[MAX]\n  }\n\n  set allowStale (allowStale) {\n    this[ALLOW_STALE] = !!allowStale\n  }\n  get allowStale () {\n    return this[ALLOW_STALE]\n  }\n\n  set maxAge (mA) {\n    if (typeof mA !== 'number')\n      throw new TypeError('maxAge must be a non-negative number')\n\n    this[MAX_AGE] = mA\n    trim(this)\n  }\n  get maxAge () {\n    return this[MAX_AGE]\n  }\n\n  // resize the cache when the lengthCalculator changes.\n  set lengthCalculator (lC) {\n    if (typeof lC !== 'function')\n      lC = naiveLength\n\n    if (lC !== this[LENGTH_CALCULATOR]) {\n      this[LENGTH_CALCULATOR] = lC\n      this[LENGTH] = 0\n      this[LRU_LIST].forEach(hit => {\n        hit.length = this[LENGTH_CALCULATOR](hit.value, hit.key)\n        this[LENGTH] += hit.length\n      })\n    }\n    trim(this)\n  }\n  get lengthCalculator () { return this[LENGTH_CALCULATOR] }\n\n  get length () { return this[LENGTH] }\n  get itemCount () { return this[LRU_LIST].length }\n\n  rforEach (fn, thisp) {\n    thisp = thisp || this\n    for (let walker = this[LRU_LIST].tail; walker !== null;) {\n      const prev = walker.prev\n      forEachStep(this, fn, walker, thisp)\n      walker = prev\n    }\n  }\n\n  forEach (fn, thisp) {\n    thisp = thisp || this\n    for (let walker = this[LRU_LIST].head; walker !== null;) {\n      const next = walker.next\n      forEachStep(this, fn, walker, thisp)\n      walker = next\n    }\n  }\n\n  keys () {\n    return this[LRU_LIST].toArray().map(k => k.key)\n  }\n\n  values () {\n    return this[LRU_LIST].toArray().map(k => k.value)\n  }\n\n  reset () {\n    if (this[DISPOSE] &&\n        this[LRU_LIST] &&\n        this[LRU_LIST].length) {\n      this[LRU_LIST].forEach(hit => this[DISPOSE](hit.key, hit.value))\n    }\n\n    this[CACHE] = new Map() // hash of items by key\n    this[LRU_LIST] = new Yallist() // list of items in order of use recency\n    this[LENGTH] = 0 // length of items in the list\n  }\n\n  dump () {\n    return this[LRU_LIST].map(hit =>\n      isStale(this, hit) ? false : {\n        k: hit.key,\n        v: hit.value,\n        e: hit.now + (hit.maxAge || 0)\n      }).toArray().filter(h => h)\n  }\n\n  dumpLru () {\n    return this[LRU_LIST]\n  }\n\n  set (key, value, maxAge) {\n    maxAge = maxAge || this[MAX_AGE]\n\n    if (maxAge && typeof maxAge !== 'number')\n      throw new TypeError('maxAge must be a number')\n\n    const now = maxAge ? Date.now() : 0\n    const len = this[LENGTH_CALCULATOR](value, key)\n\n    if (this[CACHE].has(key)) {\n      if (len > this[MAX]) {\n        del(this, this[CACHE].get(key))\n        return false\n      }\n\n      const node = this[CACHE].get(key)\n      const item = node.value\n\n      // dispose of the old one before overwriting\n      // split out into 2 ifs for better coverage tracking\n      if (this[DISPOSE]) {\n        if (!this[NO_DISPOSE_ON_SET])\n          this[DISPOSE](key, item.value)\n      }\n\n      item.now = now\n      item.maxAge = maxAge\n      item.value = value\n      this[LENGTH] += len - item.length\n      item.length = len\n      this.get(key)\n      trim(this)\n      return true\n    }\n\n    const hit = new Entry(key, value, len, now, maxAge)\n\n    // oversized objects fall out of cache automatically.\n    if (hit.length > this[MAX]) {\n      if (this[DISPOSE])\n        this[DISPOSE](key, value)\n\n      return false\n    }\n\n    this[LENGTH] += hit.length\n    this[LRU_LIST].unshift(hit)\n    this[CACHE].set(key, this[LRU_LIST].head)\n    trim(this)\n    return true\n  }\n\n  has (key) {\n    if (!this[CACHE].has(key)) return false\n    const hit = this[CACHE].get(key).value\n    return !isStale(this, hit)\n  }\n\n  get (key) {\n    return get(this, key, true)\n  }\n\n  peek (key) {\n    return get(this, key, false)\n  }\n\n  pop () {\n    const node = this[LRU_LIST].tail\n    if (!node)\n      return null\n\n    del(this, node)\n    return node.value\n  }\n\n  del (key) {\n    del(this, this[CACHE].get(key))\n  }\n\n  load (arr) {\n    // reset the cache\n    this.reset()\n\n    const now = Date.now()\n    // A previous serialized cache has the most recent items first\n    for (let l = arr.length - 1; l >= 0; l--) {\n      const hit = arr[l]\n      const expiresAt = hit.e || 0\n      if (expiresAt === 0)\n        // the item was created without expiration in a non aged cache\n        this.set(hit.k, hit.v)\n      else {\n        const maxAge = expiresAt - now\n        // dont add already expired items\n        if (maxAge > 0) {\n          this.set(hit.k, hit.v, maxAge)\n        }\n      }\n    }\n  }\n\n  prune () {\n    this[CACHE].forEach((value, key) => get(this, key, false))\n  }\n}\n\nconst get = (self, key, doUse) => {\n  const node = self[CACHE].get(key)\n  if (node) {\n    const hit = node.value\n    if (isStale(self, hit)) {\n      del(self, node)\n      if (!self[ALLOW_STALE])\n        return undefined\n    } else {\n      if (doUse) {\n        if (self[UPDATE_AGE_ON_GET])\n          node.value.now = Date.now()\n        self[LRU_LIST].unshiftNode(node)\n      }\n    }\n    return hit.value\n  }\n}\n\nconst isStale = (self, hit) => {\n  if (!hit || (!hit.maxAge && !self[MAX_AGE]))\n    return false\n\n  const diff = Date.now() - hit.now\n  return hit.maxAge ? diff > hit.maxAge\n    : self[MAX_AGE] && (diff > self[MAX_AGE])\n}\n\nconst trim = self => {\n  if (self[LENGTH] > self[MAX]) {\n    for (let walker = self[LRU_LIST].tail;\n      self[LENGTH] > self[MAX] && walker !== null;) {\n      // We know that we're about to delete this one, and also\n      // what the next least recently used key will be, so just\n      // go ahead and set it now.\n      const prev = walker.prev\n      del(self, walker)\n      walker = prev\n    }\n  }\n}\n\nconst del = (self, node) => {\n  if (node) {\n    const hit = node.value\n    if (self[DISPOSE])\n      self[DISPOSE](hit.key, hit.value)\n\n    self[LENGTH] -= hit.length\n    self[CACHE].delete(hit.key)\n    self[LRU_LIST].removeNode(node)\n  }\n}\n\nclass Entry {\n  constructor (key, value, length, now, maxAge) {\n    this.key = key\n    this.value = value\n    this.length = length\n    this.now = now\n    this.maxAge = maxAge || 0\n  }\n}\n\nconst forEachStep = (self, fn, node, thisp) => {\n  let hit = node.value\n  if (isStale(self, hit)) {\n    del(self, node)\n    if (!self[ALLOW_STALE])\n      hit = undefined\n  }\n  if (hit)\n    fn.call(thisp, hit.value, hit.key, self)\n}\n\nmodule.exports = LRUCache\n","// parse out just the options we care about so we always get a consistent\n// obj with keys in a consistent order.\nconst opts = ['includePrerelease', 'loose', 'rtl']\nconst parseOptions = options =>\n  !options ? {}\n  : typeof options !== 'object' ? { loose: true }\n  : opts.filter(k => options[k]).reduce((options, k) => {\n    options[k] = true\n    return options\n  }, {})\nmodule.exports = parseOptions\n","// Note: this is the semver.org version of the spec that it implements\n// Not necessarily the package version of this code.\nconst SEMVER_SPEC_VERSION = '2.0.0'\n\nconst MAX_LENGTH = 256\nconst MAX_SAFE_INTEGER = Number.MAX_SAFE_INTEGER ||\n  /* istanbul ignore next */ 9007199254740991\n\n// Max safe segment length for coercion.\nconst MAX_SAFE_COMPONENT_LENGTH = 16\n\nmodule.exports = {\n  SEMVER_SPEC_VERSION,\n  MAX_LENGTH,\n  MAX_SAFE_INTEGER,\n  MAX_SAFE_COMPONENT_LENGTH\n}\n","const debug = (\n  typeof process === 'object' &&\n  process.env &&\n  process.env.NODE_DEBUG &&\n  /\\bsemver\\b/i.test(process.env.NODE_DEBUG)\n) ? (...args) => console.error('SEMVER', ...args)\n  : () => {}\n\nmodule.exports = debug\n","const { MAX_SAFE_COMPONENT_LENGTH } = require('./constants')\nconst debug = require('./debug')\nexports = module.exports = {}\n\n// The actual regexps go on exports.re\nconst re = exports.re = []\nconst src = exports.src = []\nconst t = exports.t = {}\nlet R = 0\n\nconst createToken = (name, value, isGlobal) => {\n  const index = R++\n  debug(index, value)\n  t[name] = index\n  src[index] = value\n  re[index] = new RegExp(value, isGlobal ? 'g' : undefined)\n}\n\n// The following Regular Expressions can be used for tokenizing,\n// validating, and parsing SemVer version strings.\n\n// ## Numeric Identifier\n// A single `0`, or a non-zero digit followed by zero or more digits.\n\ncreateToken('NUMERICIDENTIFIER', '0|[1-9]\\\\d*')\ncreateToken('NUMERICIDENTIFIERLOOSE', '[0-9]+')\n\n// ## Non-numeric Identifier\n// Zero or more digits, followed by a letter or hyphen, and then zero or\n// more letters, digits, or hyphens.\n\ncreateToken('NONNUMERICIDENTIFIER', '\\\\d*[a-zA-Z-][a-zA-Z0-9-]*')\n\n// ## Main Version\n// Three dot-separated numeric identifiers.\n\ncreateToken('MAINVERSION', `(${src[t.NUMERICIDENTIFIER]})\\\\.` +\n                   `(${src[t.NUMERICIDENTIFIER]})\\\\.` +\n                   `(${src[t.NUMERICIDENTIFIER]})`)\n\ncreateToken('MAINVERSIONLOOSE', `(${src[t.NUMERICIDENTIFIERLOOSE]})\\\\.` +\n                        `(${src[t.NUMERICIDENTIFIERLOOSE]})\\\\.` +\n                        `(${src[t.NUMERICIDENTIFIERLOOSE]})`)\n\n// ## Pre-release Version Identifier\n// A numeric identifier, or a non-numeric identifier.\n\ncreateToken('PRERELEASEIDENTIFIER', `(?:${src[t.NUMERICIDENTIFIER]\n}|${src[t.NONNUMERICIDENTIFIER]})`)\n\ncreateToken('PRERELEASEIDENTIFIERLOOSE', `(?:${src[t.NUMERICIDENTIFIERLOOSE]\n}|${src[t.NONNUMERICIDENTIFIER]})`)\n\n// ## Pre-release Version\n// Hyphen, followed by one or more dot-separated pre-release version\n// identifiers.\n\ncreateToken('PRERELEASE', `(?:-(${src[t.PRERELEASEIDENTIFIER]\n}(?:\\\\.${src[t.PRERELEASEIDENTIFIER]})*))`)\n\ncreateToken('PRERELEASELOOSE', `(?:-?(${src[t.PRERELEASEIDENTIFIERLOOSE]\n}(?:\\\\.${src[t.PRERELEASEIDENTIFIERLOOSE]})*))`)\n\n// ## Build Metadata Identifier\n// Any combination of digits, letters, or hyphens.\n\ncreateToken('BUILDIDENTIFIER', '[0-9A-Za-z-]+')\n\n// ## Build Metadata\n// Plus sign, followed by one or more period-separated build metadata\n// identifiers.\n\ncreateToken('BUILD', `(?:\\\\+(${src[t.BUILDIDENTIFIER]\n}(?:\\\\.${src[t.BUILDIDENTIFIER]})*))`)\n\n// ## Full Version String\n// A main version, followed optionally by a pre-release version and\n// build metadata.\n\n// Note that the only major, minor, patch, and pre-release sections of\n// the version string are capturing groups.  The build metadata is not a\n// capturing group, because it should not ever be used in version\n// comparison.\n\ncreateToken('FULLPLAIN', `v?${src[t.MAINVERSION]\n}${src[t.PRERELEASE]}?${\n  src[t.BUILD]}?`)\n\ncreateToken('FULL', `^${src[t.FULLPLAIN]}$`)\n\n// like full, but allows v1.2.3 and =1.2.3, which people do sometimes.\n// also, 1.0.0alpha1 (prerelease without the hyphen) which is pretty\n// common in the npm registry.\ncreateToken('LOOSEPLAIN', `[v=\\\\s]*${src[t.MAINVERSIONLOOSE]\n}${src[t.PRERELEASELOOSE]}?${\n  src[t.BUILD]}?`)\n\ncreateToken('LOOSE', `^${src[t.LOOSEPLAIN]}$`)\n\ncreateToken('GTLT', '((?:<|>)?=?)')\n\n// Something like \"2.*\" or \"1.2.x\".\n// Note that \"x.x\" is a valid xRange identifer, meaning \"any version\"\n// Only the first item is strictly required.\ncreateToken('XRANGEIDENTIFIERLOOSE', `${src[t.NUMERICIDENTIFIERLOOSE]}|x|X|\\\\*`)\ncreateToken('XRANGEIDENTIFIER', `${src[t.NUMERICIDENTIFIER]}|x|X|\\\\*`)\n\ncreateToken('XRANGEPLAIN', `[v=\\\\s]*(${src[t.XRANGEIDENTIFIER]})` +\n                   `(?:\\\\.(${src[t.XRANGEIDENTIFIER]})` +\n                   `(?:\\\\.(${src[t.XRANGEIDENTIFIER]})` +\n                   `(?:${src[t.PRERELEASE]})?${\n                     src[t.BUILD]}?` +\n                   `)?)?`)\n\ncreateToken('XRANGEPLAINLOOSE', `[v=\\\\s]*(${src[t.XRANGEIDENTIFIERLOOSE]})` +\n                        `(?:\\\\.(${src[t.XRANGEIDENTIFIERLOOSE]})` +\n                        `(?:\\\\.(${src[t.XRANGEIDENTIFIERLOOSE]})` +\n                        `(?:${src[t.PRERELEASELOOSE]})?${\n                          src[t.BUILD]}?` +\n                        `)?)?`)\n\ncreateToken('XRANGE', `^${src[t.GTLT]}\\\\s*${src[t.XRANGEPLAIN]}$`)\ncreateToken('XRANGELOOSE', `^${src[t.GTLT]}\\\\s*${src[t.XRANGEPLAINLOOSE]}$`)\n\n// Coercion.\n// Extract anything that could conceivably be a part of a valid semver\ncreateToken('COERCE', `${'(^|[^\\\\d])' +\n              '(\\\\d{1,'}${MAX_SAFE_COMPONENT_LENGTH}})` +\n              `(?:\\\\.(\\\\d{1,${MAX_SAFE_COMPONENT_LENGTH}}))?` +\n              `(?:\\\\.(\\\\d{1,${MAX_SAFE_COMPONENT_LENGTH}}))?` +\n              `(?:$|[^\\\\d])`)\ncreateToken('COERCERTL', src[t.COERCE], true)\n\n// Tilde ranges.\n// Meaning is \"reasonably at or greater than\"\ncreateToken('LONETILDE', '(?:~>?)')\n\ncreateToken('TILDETRIM', `(\\\\s*)${src[t.LONETILDE]}\\\\s+`, true)\nexports.tildeTrimReplace = '$1~'\n\ncreateToken('TILDE', `^${src[t.LONETILDE]}${src[t.XRANGEPLAIN]}$`)\ncreateToken('TILDELOOSE', `^${src[t.LONETILDE]}${src[t.XRANGEPLAINLOOSE]}$`)\n\n// Caret ranges.\n// Meaning is \"at least and backwards compatible with\"\ncreateToken('LONECARET', '(?:\\\\^)')\n\ncreateToken('CARETTRIM', `(\\\\s*)${src[t.LONECARET]}\\\\s+`, true)\nexports.caretTrimReplace = '$1^'\n\ncreateToken('CARET', `^${src[t.LONECARET]}${src[t.XRANGEPLAIN]}$`)\ncreateToken('CARETLOOSE', `^${src[t.LONECARET]}${src[t.XRANGEPLAINLOOSE]}$`)\n\n// A simple gt/lt/eq thing, or just \"\" to indicate \"any version\"\ncreateToken('COMPARATORLOOSE', `^${src[t.GTLT]}\\\\s*(${src[t.LOOSEPLAIN]})$|^$`)\ncreateToken('COMPARATOR', `^${src[t.GTLT]}\\\\s*(${src[t.FULLPLAIN]})$|^$`)\n\n// An expression to strip any whitespace between the gtlt and the thing\n// it modifies, so that `> 1.2.3` ==> `>1.2.3`\ncreateToken('COMPARATORTRIM', `(\\\\s*)${src[t.GTLT]\n}\\\\s*(${src[t.LOOSEPLAIN]}|${src[t.XRANGEPLAIN]})`, true)\nexports.comparatorTrimReplace = '$1$2$3'\n\n// Something like `1.2.3 - 1.2.4`\n// Note that these all use the loose form, because they'll be\n// checked against either the strict or loose comparator form\n// later.\ncreateToken('HYPHENRANGE', `^\\\\s*(${src[t.XRANGEPLAIN]})` +\n                   `\\\\s+-\\\\s+` +\n                   `(${src[t.XRANGEPLAIN]})` +\n                   `\\\\s*$`)\n\ncreateToken('HYPHENRANGELOOSE', `^\\\\s*(${src[t.XRANGEPLAINLOOSE]})` +\n                        `\\\\s+-\\\\s+` +\n                        `(${src[t.XRANGEPLAINLOOSE]})` +\n                        `\\\\s*$`)\n\n// Star ranges basically just allow anything at all.\ncreateToken('STAR', '(<|>)?=?\\\\s*\\\\*')\n// >=0.0.0 is like a star\ncreateToken('GTE0', '^\\\\s*>=\\\\s*0\\.0\\.0\\\\s*$')\ncreateToken('GTE0PRE', '^\\\\s*>=\\\\s*0\\.0\\.0-0\\\\s*$')\n","const numeric = /^[0-9]+$/\nconst compareIdentifiers = (a, b) => {\n  const anum = numeric.test(a)\n  const bnum = numeric.test(b)\n\n  if (anum && bnum) {\n    a = +a\n    b = +b\n  }\n\n  return a === b ? 0\n    : (anum && !bnum) ? -1\n    : (bnum && !anum) ? 1\n    : a < b ? -1\n    : 1\n}\n\nconst rcompareIdentifiers = (a, b) => compareIdentifiers(b, a)\n\nmodule.exports = {\n  compareIdentifiers,\n  rcompareIdentifiers\n}\n","const debug = require('../internal/debug')\nconst { MAX_LENGTH, MAX_SAFE_INTEGER } = require('../internal/constants')\nconst { re, t } = require('../internal/re')\n\nconst parseOptions = require('../internal/parse-options')\nconst { compareIdentifiers } = require('../internal/identifiers')\nclass SemVer {\n  constructor (version, options) {\n    options = parseOptions(options)\n\n    if (version instanceof SemVer) {\n      if (version.loose === !!options.loose &&\n          version.includePrerelease === !!options.includePrerelease) {\n        return version\n      } else {\n        version = version.version\n      }\n    } else if (typeof version !== 'string') {\n      throw new TypeError(`Invalid Version: ${version}`)\n    }\n\n    if (version.length > MAX_LENGTH) {\n      throw new TypeError(\n        `version is longer than ${MAX_LENGTH} characters`\n      )\n    }\n\n    debug('SemVer', version, options)\n    this.options = options\n    this.loose = !!options.loose\n    // this isn't actually relevant for versions, but keep it so that we\n    // don't run into trouble passing this.options around.\n    this.includePrerelease = !!options.includePrerelease\n\n    const m = version.trim().match(options.loose ? re[t.LOOSE] : re[t.FULL])\n\n    if (!m) {\n      throw new TypeError(`Invalid Version: ${version}`)\n    }\n\n    this.raw = version\n\n    // these are actually numbers\n    this.major = +m[1]\n    this.minor = +m[2]\n    this.patch = +m[3]\n\n    if (this.major > MAX_SAFE_INTEGER || this.major < 0) {\n      throw new TypeError('Invalid major version')\n    }\n\n    if (this.minor > MAX_SAFE_INTEGER || this.minor < 0) {\n      throw new TypeError('Invalid minor version')\n    }\n\n    if (this.patch > MAX_SAFE_INTEGER || this.patch < 0) {\n      throw new TypeError('Invalid patch version')\n    }\n\n    // numberify any prerelease numeric ids\n    if (!m[4]) {\n      this.prerelease = []\n    } else {\n      this.prerelease = m[4].split('.').map((id) => {\n        if (/^[0-9]+$/.test(id)) {\n          const num = +id\n          if (num >= 0 && num < MAX_SAFE_INTEGER) {\n            return num\n          }\n        }\n        return id\n      })\n    }\n\n    this.build = m[5] ? m[5].split('.') : []\n    this.format()\n  }\n\n  format () {\n    this.version = `${this.major}.${this.minor}.${this.patch}`\n    if (this.prerelease.length) {\n      this.version += `-${this.prerelease.join('.')}`\n    }\n    return this.version\n  }\n\n  toString () {\n    return this.version\n  }\n\n  compare (other) {\n    debug('SemVer.compare', this.version, this.options, other)\n    if (!(other instanceof SemVer)) {\n      if (typeof other === 'string' && other === this.version) {\n        return 0\n      }\n      other = new SemVer(other, this.options)\n    }\n\n    if (other.version === this.version) {\n      return 0\n    }\n\n    return this.compareMain(other) || this.comparePre(other)\n  }\n\n  compareMain (other) {\n    if (!(other instanceof SemVer)) {\n      other = new SemVer(other, this.options)\n    }\n\n    return (\n      compareIdentifiers(this.major, other.major) ||\n      compareIdentifiers(this.minor, other.minor) ||\n      compareIdentifiers(this.patch, other.patch)\n    )\n  }\n\n  comparePre (other) {\n    if (!(other instanceof SemVer)) {\n      other = new SemVer(other, this.options)\n    }\n\n    // NOT having a prerelease is > having one\n    if (this.prerelease.length && !other.prerelease.length) {\n      return -1\n    } else if (!this.prerelease.length && other.prerelease.length) {\n      return 1\n    } else if (!this.prerelease.length && !other.prerelease.length) {\n      return 0\n    }\n\n    let i = 0\n    do {\n      const a = this.prerelease[i]\n      const b = other.prerelease[i]\n      debug('prerelease compare', i, a, b)\n      if (a === undefined && b === undefined) {\n        return 0\n      } else if (b === undefined) {\n        return 1\n      } else if (a === undefined) {\n        return -1\n      } else if (a === b) {\n        continue\n      } else {\n        return compareIdentifiers(a, b)\n      }\n    } while (++i)\n  }\n\n  compareBuild (other) {\n    if (!(other instanceof SemVer)) {\n      other = new SemVer(other, this.options)\n    }\n\n    let i = 0\n    do {\n      const a = this.build[i]\n      const b = other.build[i]\n      debug('prerelease compare', i, a, b)\n      if (a === undefined && b === undefined) {\n        return 0\n      } else if (b === undefined) {\n        return 1\n      } else if (a === undefined) {\n        return -1\n      } else if (a === b) {\n        continue\n      } else {\n        return compareIdentifiers(a, b)\n      }\n    } while (++i)\n  }\n\n  // preminor will bump the version up to the next minor release, and immediately\n  // down to pre-release. premajor and prepatch work the same way.\n  inc (release, identifier) {\n    switch (release) {\n      case 'premajor':\n        this.prerelease.length = 0\n        this.patch = 0\n        this.minor = 0\n        this.major++\n        this.inc('pre', identifier)\n        break\n      case 'preminor':\n        this.prerelease.length = 0\n        this.patch = 0\n        this.minor++\n        this.inc('pre', identifier)\n        break\n      case 'prepatch':\n        // If this is already a prerelease, it will bump to the next version\n        // drop any prereleases that might already exist, since they are not\n        // relevant at this point.\n        this.prerelease.length = 0\n        this.inc('patch', identifier)\n        this.inc('pre', identifier)\n        break\n      // If the input is a non-prerelease version, this acts the same as\n      // prepatch.\n      case 'prerelease':\n        if (this.prerelease.length === 0) {\n          this.inc('patch', identifier)\n        }\n        this.inc('pre', identifier)\n        break\n\n      case 'major':\n        // If this is a pre-major version, bump up to the same major version.\n        // Otherwise increment major.\n        // 1.0.0-5 bumps to 1.0.0\n        // 1.1.0 bumps to 2.0.0\n        if (\n          this.minor !== 0 ||\n          this.patch !== 0 ||\n          this.prerelease.length === 0\n        ) {\n          this.major++\n        }\n        this.minor = 0\n        this.patch = 0\n        this.prerelease = []\n        break\n      case 'minor':\n        // If this is a pre-minor version, bump up to the same minor version.\n        // Otherwise increment minor.\n        // 1.2.0-5 bumps to 1.2.0\n        // 1.2.1 bumps to 1.3.0\n        if (this.patch !== 0 || this.prerelease.length === 0) {\n          this.minor++\n        }\n        this.patch = 0\n        this.prerelease = []\n        break\n      case 'patch':\n        // If this is not a pre-release version, it will increment the patch.\n        // If it is a pre-release it will bump up to the same patch version.\n        // 1.2.0-5 patches to 1.2.0\n        // 1.2.0 patches to 1.2.1\n        if (this.prerelease.length === 0) {\n          this.patch++\n        }\n        this.prerelease = []\n        break\n      // This probably shouldn't be used publicly.\n      // 1.0.0 'pre' would become 1.0.0-0 which is the wrong direction.\n      case 'pre':\n        if (this.prerelease.length === 0) {\n          this.prerelease = [0]\n        } else {\n          let i = this.prerelease.length\n          while (--i >= 0) {\n            if (typeof this.prerelease[i] === 'number') {\n              this.prerelease[i]++\n              i = -2\n            }\n          }\n          if (i === -1) {\n            // didn't increment anything\n            this.prerelease.push(0)\n          }\n        }\n        if (identifier) {\n          // 1.2.0-beta.1 bumps to 1.2.0-beta.2,\n          // 1.2.0-beta.fooblz or 1.2.0-beta bumps to 1.2.0-beta.0\n          if (this.prerelease[0] === identifier) {\n            if (isNaN(this.prerelease[1])) {\n              this.prerelease = [identifier, 0]\n            }\n          } else {\n            this.prerelease = [identifier, 0]\n          }\n        }\n        break\n\n      default:\n        throw new Error(`invalid increment argument: ${release}`)\n    }\n    this.format()\n    this.raw = this.version\n    return this\n  }\n}\n\nmodule.exports = SemVer\n","const SemVer = require('../classes/semver')\nconst compare = (a, b, loose) =>\n  new SemVer(a, loose).compare(new SemVer(b, loose))\n\nmodule.exports = compare\n","const compare = require('./compare')\nconst eq = (a, b, loose) => compare(a, b, loose) === 0\nmodule.exports = eq\n","const compare = require('./compare')\nconst neq = (a, b, loose) => compare(a, b, loose) !== 0\nmodule.exports = neq\n","const compare = require('./compare')\nconst gt = (a, b, loose) => compare(a, b, loose) > 0\nmodule.exports = gt\n","const compare = require('./compare')\nconst gte = (a, b, loose) => compare(a, b, loose) >= 0\nmodule.exports = gte\n","const compare = require('./compare')\nconst lt = (a, b, loose) => compare(a, b, loose) < 0\nmodule.exports = lt\n","const compare = require('./compare')\nconst lte = (a, b, loose) => compare(a, b, loose) <= 0\nmodule.exports = lte\n","const eq = require('./eq')\nconst neq = require('./neq')\nconst gt = require('./gt')\nconst gte = require('./gte')\nconst lt = require('./lt')\nconst lte = require('./lte')\n\nconst cmp = (a, op, b, loose) => {\n  switch (op) {\n    case '===':\n      if (typeof a === 'object')\n        a = a.version\n      if (typeof b === 'object')\n        b = b.version\n      return a === b\n\n    case '!==':\n      if (typeof a === 'object')\n        a = a.version\n      if (typeof b === 'object')\n        b = b.version\n      return a !== b\n\n    case '':\n    case '=':\n    case '==':\n      return eq(a, b, loose)\n\n    case '!=':\n      return neq(a, b, loose)\n\n    case '>':\n      return gt(a, b, loose)\n\n    case '>=':\n      return gte(a, b, loose)\n\n    case '<':\n      return lt(a, b, loose)\n\n    case '<=':\n      return lte(a, b, loose)\n\n    default:\n      throw new TypeError(`Invalid operator: ${op}`)\n  }\n}\nmodule.exports = cmp\n","const ANY = Symbol('SemVer ANY')\n// hoisted class for cyclic dependency\nclass Comparator {\n  static get ANY () {\n    return ANY\n  }\n  constructor (comp, options) {\n    options = parseOptions(options)\n\n    if (comp instanceof Comparator) {\n      if (comp.loose === !!options.loose) {\n        return comp\n      } else {\n        comp = comp.value\n      }\n    }\n\n    debug('comparator', comp, options)\n    this.options = options\n    this.loose = !!options.loose\n    this.parse(comp)\n\n    if (this.semver === ANY) {\n      this.value = ''\n    } else {\n      this.value = this.operator + this.semver.version\n    }\n\n    debug('comp', this)\n  }\n\n  parse (comp) {\n    const r = this.options.loose ? re[t.COMPARATORLOOSE] : re[t.COMPARATOR]\n    const m = comp.match(r)\n\n    if (!m) {\n      throw new TypeError(`Invalid comparator: ${comp}`)\n    }\n\n    this.operator = m[1] !== undefined ? m[1] : ''\n    if (this.operator === '=') {\n      this.operator = ''\n    }\n\n    // if it literally is just '>' or '' then allow anything.\n    if (!m[2]) {\n      this.semver = ANY\n    } else {\n      this.semver = new SemVer(m[2], this.options.loose)\n    }\n  }\n\n  toString () {\n    return this.value\n  }\n\n  test (version) {\n    debug('Comparator.test', version, this.options.loose)\n\n    if (this.semver === ANY || version === ANY) {\n      return true\n    }\n\n    if (typeof version === 'string') {\n      try {\n        version = new SemVer(version, this.options)\n      } catch (er) {\n        return false\n      }\n    }\n\n    return cmp(version, this.operator, this.semver, this.options)\n  }\n\n  intersects (comp, options) {\n    if (!(comp instanceof Comparator)) {\n      throw new TypeError('a Comparator is required')\n    }\n\n    if (!options || typeof options !== 'object') {\n      options = {\n        loose: !!options,\n        includePrerelease: false\n      }\n    }\n\n    if (this.operator === '') {\n      if (this.value === '') {\n        return true\n      }\n      return new Range(comp.value, options).test(this.value)\n    } else if (comp.operator === '') {\n      if (comp.value === '') {\n        return true\n      }\n      return new Range(this.value, options).test(comp.semver)\n    }\n\n    const sameDirectionIncreasing =\n      (this.operator === '>=' || this.operator === '>') &&\n      (comp.operator === '>=' || comp.operator === '>')\n    const sameDirectionDecreasing =\n      (this.operator === '<=' || this.operator === '<') &&\n      (comp.operator === '<=' || comp.operator === '<')\n    const sameSemVer = this.semver.version === comp.semver.version\n    const differentDirectionsInclusive =\n      (this.operator === '>=' || this.operator === '<=') &&\n      (comp.operator === '>=' || comp.operator === '<=')\n    const oppositeDirectionsLessThan =\n      cmp(this.semver, '<', comp.semver, options) &&\n      (this.operator === '>=' || this.operator === '>') &&\n        (comp.operator === '<=' || comp.operator === '<')\n    const oppositeDirectionsGreaterThan =\n      cmp(this.semver, '>', comp.semver, options) &&\n      (this.operator === '<=' || this.operator === '<') &&\n        (comp.operator === '>=' || comp.operator === '>')\n\n    return (\n      sameDirectionIncreasing ||\n      sameDirectionDecreasing ||\n      (sameSemVer && differentDirectionsInclusive) ||\n      oppositeDirectionsLessThan ||\n      oppositeDirectionsGreaterThan\n    )\n  }\n}\n\nmodule.exports = Comparator\n\nconst parseOptions = require('../internal/parse-options')\nconst {re, t} = require('../internal/re')\nconst cmp = require('../functions/cmp')\nconst debug = require('../internal/debug')\nconst SemVer = require('./semver')\nconst Range = require('./range')\n","// hoisted class for cyclic dependency\nclass Range {\n  constructor (range, options) {\n    options = parseOptions(options)\n\n    if (range instanceof Range) {\n      if (\n        range.loose === !!options.loose &&\n        range.includePrerelease === !!options.includePrerelease\n      ) {\n        return range\n      } else {\n        return new Range(range.raw, options)\n      }\n    }\n\n    if (range instanceof Comparator) {\n      // just put it in the set and return\n      this.raw = range.value\n      this.set = [[range]]\n      this.format()\n      return this\n    }\n\n    this.options = options\n    this.loose = !!options.loose\n    this.includePrerelease = !!options.includePrerelease\n\n    // First, split based on boolean or ||\n    this.raw = range\n    this.set = range\n      .split(/\\s*\\|\\|\\s*/)\n      // map the range to a 2d array of comparators\n      .map(range => this.parseRange(range.trim()))\n      // throw out any comparator lists that are empty\n      // this generally means that it was not a valid range, which is allowed\n      // in loose mode, but will still throw if the WHOLE range is invalid.\n      .filter(c => c.length)\n\n    if (!this.set.length) {\n      throw new TypeError(`Invalid SemVer Range: ${range}`)\n    }\n\n    // if we have any that are not the null set, throw out null sets.\n    if (this.set.length > 1) {\n      // keep the first one, in case they're all null sets\n      const first = this.set[0]\n      this.set = this.set.filter(c => !isNullSet(c[0]))\n      if (this.set.length === 0)\n        this.set = [first]\n      else if (this.set.length > 1) {\n        // if we have any that are *, then the range is just *\n        for (const c of this.set) {\n          if (c.length === 1 && isAny(c[0])) {\n            this.set = [c]\n            break\n          }\n        }\n      }\n    }\n\n    this.format()\n  }\n\n  format () {\n    this.range = this.set\n      .map((comps) => {\n        return comps.join(' ').trim()\n      })\n      .join('||')\n      .trim()\n    return this.range\n  }\n\n  toString () {\n    return this.range\n  }\n\n  parseRange (range) {\n    range = range.trim()\n\n    // memoize range parsing for performance.\n    // this is a very hot path, and fully deterministic.\n    const memoOpts = Object.keys(this.options).join(',')\n    const memoKey = `parseRange:${memoOpts}:${range}`\n    const cached = cache.get(memoKey)\n    if (cached)\n      return cached\n\n    const loose = this.options.loose\n    // `1.2.3 - 1.2.4` => `>=1.2.3 <=1.2.4`\n    const hr = loose ? re[t.HYPHENRANGELOOSE] : re[t.HYPHENRANGE]\n    range = range.replace(hr, hyphenReplace(this.options.includePrerelease))\n    debug('hyphen replace', range)\n    // `> 1.2.3 < 1.2.5` => `>1.2.3 <1.2.5`\n    range = range.replace(re[t.COMPARATORTRIM], comparatorTrimReplace)\n    debug('comparator trim', range, re[t.COMPARATORTRIM])\n\n    // `~ 1.2.3` => `~1.2.3`\n    range = range.replace(re[t.TILDETRIM], tildeTrimReplace)\n\n    // `^ 1.2.3` => `^1.2.3`\n    range = range.replace(re[t.CARETTRIM], caretTrimReplace)\n\n    // normalize spaces\n    range = range.split(/\\s+/).join(' ')\n\n    // At this point, the range is completely trimmed and\n    // ready to be split into comparators.\n\n    const compRe = loose ? re[t.COMPARATORLOOSE] : re[t.COMPARATOR]\n    const rangeList = range\n      .split(' ')\n      .map(comp => parseComparator(comp, this.options))\n      .join(' ')\n      .split(/\\s+/)\n      // >=0.0.0 is equivalent to *\n      .map(comp => replaceGTE0(comp, this.options))\n      // in loose mode, throw out any that are not valid comparators\n      .filter(this.options.loose ? comp => !!comp.match(compRe) : () => true)\n      .map(comp => new Comparator(comp, this.options))\n\n    // if any comparators are the null set, then replace with JUST null set\n    // if more than one comparator, remove any * comparators\n    // also, don't include the same comparator more than once\n    const l = rangeList.length\n    const rangeMap = new Map()\n    for (const comp of rangeList) {\n      if (isNullSet(comp))\n        return [comp]\n      rangeMap.set(comp.value, comp)\n    }\n    if (rangeMap.size > 1 && rangeMap.has(''))\n      rangeMap.delete('')\n\n    const result = [...rangeMap.values()]\n    cache.set(memoKey, result)\n    return result\n  }\n\n  intersects (range, options) {\n    if (!(range instanceof Range)) {\n      throw new TypeError('a Range is required')\n    }\n\n    return this.set.some((thisComparators) => {\n      return (\n        isSatisfiable(thisComparators, options) &&\n        range.set.some((rangeComparators) => {\n          return (\n            isSatisfiable(rangeComparators, options) &&\n            thisComparators.every((thisComparator) => {\n              return rangeComparators.every((rangeComparator) => {\n                return thisComparator.intersects(rangeComparator, options)\n              })\n            })\n          )\n        })\n      )\n    })\n  }\n\n  // if ANY of the sets match ALL of its comparators, then pass\n  test (version) {\n    if (!version) {\n      return false\n    }\n\n    if (typeof version === 'string') {\n      try {\n        version = new SemVer(version, this.options)\n      } catch (er) {\n        return false\n      }\n    }\n\n    for (let i = 0; i < this.set.length; i++) {\n      if (testSet(this.set[i], version, this.options)) {\n        return true\n      }\n    }\n    return false\n  }\n}\nmodule.exports = Range\n\nconst LRU = require('lru-cache')\nconst cache = new LRU({ max: 1000 })\n\nconst parseOptions = require('../internal/parse-options')\nconst Comparator = require('./comparator')\nconst debug = require('../internal/debug')\nconst SemVer = require('./semver')\nconst {\n  re,\n  t,\n  comparatorTrimReplace,\n  tildeTrimReplace,\n  caretTrimReplace\n} = require('../internal/re')\n\nconst isNullSet = c => c.value === '<0.0.0-0'\nconst isAny = c => c.value === ''\n\n// take a set of comparators and determine whether there\n// exists a version which can satisfy it\nconst isSatisfiable = (comparators, options) => {\n  let result = true\n  const remainingComparators = comparators.slice()\n  let testComparator = remainingComparators.pop()\n\n  while (result && remainingComparators.length) {\n    result = remainingComparators.every((otherComparator) => {\n      return testComparator.intersects(otherComparator, options)\n    })\n\n    testComparator = remainingComparators.pop()\n  }\n\n  return result\n}\n\n// comprised of xranges, tildes, stars, and gtlt's at this point.\n// already replaced the hyphen ranges\n// turn into a set of JUST comparators.\nconst parseComparator = (comp, options) => {\n  debug('comp', comp, options)\n  comp = replaceCarets(comp, options)\n  debug('caret', comp)\n  comp = replaceTildes(comp, options)\n  debug('tildes', comp)\n  comp = replaceXRanges(comp, options)\n  debug('xrange', comp)\n  comp = replaceStars(comp, options)\n  debug('stars', comp)\n  return comp\n}\n\nconst isX = id => !id || id.toLowerCase() === 'x' || id === '*'\n\n// ~, ~> --> * (any, kinda silly)\n// ~2, ~2.x, ~2.x.x, ~>2, ~>2.x ~>2.x.x --> >=2.0.0 <3.0.0-0\n// ~2.0, ~2.0.x, ~>2.0, ~>2.0.x --> >=2.0.0 <2.1.0-0\n// ~1.2, ~1.2.x, ~>1.2, ~>1.2.x --> >=1.2.0 <1.3.0-0\n// ~1.2.3, ~>1.2.3 --> >=1.2.3 <1.3.0-0\n// ~1.2.0, ~>1.2.0 --> >=1.2.0 <1.3.0-0\nconst replaceTildes = (comp, options) =>\n  comp.trim().split(/\\s+/).map((comp) => {\n    return replaceTilde(comp, options)\n  }).join(' ')\n\nconst replaceTilde = (comp, options) => {\n  const r = options.loose ? re[t.TILDELOOSE] : re[t.TILDE]\n  return comp.replace(r, (_, M, m, p, pr) => {\n    debug('tilde', comp, _, M, m, p, pr)\n    let ret\n\n    if (isX(M)) {\n      ret = ''\n    } else if (isX(m)) {\n      ret = `>=${M}.0.0 <${+M + 1}.0.0-0`\n    } else if (isX(p)) {\n      // ~1.2 == >=1.2.0 <1.3.0-0\n      ret = `>=${M}.${m}.0 <${M}.${+m + 1}.0-0`\n    } else if (pr) {\n      debug('replaceTilde pr', pr)\n      ret = `>=${M}.${m}.${p}-${pr\n      } <${M}.${+m + 1}.0-0`\n    } else {\n      // ~1.2.3 == >=1.2.3 <1.3.0-0\n      ret = `>=${M}.${m}.${p\n      } <${M}.${+m + 1}.0-0`\n    }\n\n    debug('tilde return', ret)\n    return ret\n  })\n}\n\n// ^ --> * (any, kinda silly)\n// ^2, ^2.x, ^2.x.x --> >=2.0.0 <3.0.0-0\n// ^2.0, ^2.0.x --> >=2.0.0 <3.0.0-0\n// ^1.2, ^1.2.x --> >=1.2.0 <2.0.0-0\n// ^1.2.3 --> >=1.2.3 <2.0.0-0\n// ^1.2.0 --> >=1.2.0 <2.0.0-0\nconst replaceCarets = (comp, options) =>\n  comp.trim().split(/\\s+/).map((comp) => {\n    return replaceCaret(comp, options)\n  }).join(' ')\n\nconst replaceCaret = (comp, options) => {\n  debug('caret', comp, options)\n  const r = options.loose ? re[t.CARETLOOSE] : re[t.CARET]\n  const z = options.includePrerelease ? '-0' : ''\n  return comp.replace(r, (_, M, m, p, pr) => {\n    debug('caret', comp, _, M, m, p, pr)\n    let ret\n\n    if (isX(M)) {\n      ret = ''\n    } else if (isX(m)) {\n      ret = `>=${M}.0.0${z} <${+M + 1}.0.0-0`\n    } else if (isX(p)) {\n      if (M === '0') {\n        ret = `>=${M}.${m}.0${z} <${M}.${+m + 1}.0-0`\n      } else {\n        ret = `>=${M}.${m}.0${z} <${+M + 1}.0.0-0`\n      }\n    } else if (pr) {\n      debug('replaceCaret pr', pr)\n      if (M === '0') {\n        if (m === '0') {\n          ret = `>=${M}.${m}.${p}-${pr\n          } <${M}.${m}.${+p + 1}-0`\n        } else {\n          ret = `>=${M}.${m}.${p}-${pr\n          } <${M}.${+m + 1}.0-0`\n        }\n      } else {\n        ret = `>=${M}.${m}.${p}-${pr\n        } <${+M + 1}.0.0-0`\n      }\n    } else {\n      debug('no pr')\n      if (M === '0') {\n        if (m === '0') {\n          ret = `>=${M}.${m}.${p\n          }${z} <${M}.${m}.${+p + 1}-0`\n        } else {\n          ret = `>=${M}.${m}.${p\n          }${z} <${M}.${+m + 1}.0-0`\n        }\n      } else {\n        ret = `>=${M}.${m}.${p\n        } <${+M + 1}.0.0-0`\n      }\n    }\n\n    debug('caret return', ret)\n    return ret\n  })\n}\n\nconst replaceXRanges = (comp, options) => {\n  debug('replaceXRanges', comp, options)\n  return comp.split(/\\s+/).map((comp) => {\n    return replaceXRange(comp, options)\n  }).join(' ')\n}\n\nconst replaceXRange = (comp, options) => {\n  comp = comp.trim()\n  const r = options.loose ? re[t.XRANGELOOSE] : re[t.XRANGE]\n  return comp.replace(r, (ret, gtlt, M, m, p, pr) => {\n    debug('xRange', comp, ret, gtlt, M, m, p, pr)\n    const xM = isX(M)\n    const xm = xM || isX(m)\n    const xp = xm || isX(p)\n    const anyX = xp\n\n    if (gtlt === '=' && anyX) {\n      gtlt = ''\n    }\n\n    // if we're including prereleases in the match, then we need\n    // to fix this to -0, the lowest possible prerelease value\n    pr = options.includePrerelease ? '-0' : ''\n\n    if (xM) {\n      if (gtlt === '>' || gtlt === '<') {\n        // nothing is allowed\n        ret = '<0.0.0-0'\n      } else {\n        // nothing is forbidden\n        ret = '*'\n      }\n    } else if (gtlt && anyX) {\n      // we know patch is an x, because we have any x at all.\n      // replace X with 0\n      if (xm) {\n        m = 0\n      }\n      p = 0\n\n      if (gtlt === '>') {\n        // >1 => >=2.0.0\n        // >1.2 => >=1.3.0\n        gtlt = '>='\n        if (xm) {\n          M = +M + 1\n          m = 0\n          p = 0\n        } else {\n          m = +m + 1\n          p = 0\n        }\n      } else if (gtlt === '<=') {\n        // <=0.7.x is actually <0.8.0, since any 0.7.x should\n        // pass.  Similarly, <=7.x is actually <8.0.0, etc.\n        gtlt = '<'\n        if (xm) {\n          M = +M + 1\n        } else {\n          m = +m + 1\n        }\n      }\n\n      if (gtlt === '<')\n        pr = '-0'\n\n      ret = `${gtlt + M}.${m}.${p}${pr}`\n    } else if (xm) {\n      ret = `>=${M}.0.0${pr} <${+M + 1}.0.0-0`\n    } else if (xp) {\n      ret = `>=${M}.${m}.0${pr\n      } <${M}.${+m + 1}.0-0`\n    }\n\n    debug('xRange return', ret)\n\n    return ret\n  })\n}\n\n// Because * is AND-ed with everything else in the comparator,\n// and '' means \"any version\", just remove the *s entirely.\nconst replaceStars = (comp, options) => {\n  debug('replaceStars', comp, options)\n  // Looseness is ignored here.  star is always as loose as it gets!\n  return comp.trim().replace(re[t.STAR], '')\n}\n\nconst replaceGTE0 = (comp, options) => {\n  debug('replaceGTE0', comp, options)\n  return comp.trim()\n    .replace(re[options.includePrerelease ? t.GTE0PRE : t.GTE0], '')\n}\n\n// This function is passed to string.replace(re[t.HYPHENRANGE])\n// M, m, patch, prerelease, build\n// 1.2 - 3.4.5 => >=1.2.0 <=3.4.5\n// 1.2.3 - 3.4 => >=1.2.0 <3.5.0-0 Any 3.4.x will do\n// 1.2 - 3.4 => >=1.2.0 <3.5.0-0\nconst hyphenReplace = incPr => ($0,\n  from, fM, fm, fp, fpr, fb,\n  to, tM, tm, tp, tpr, tb) => {\n  if (isX(fM)) {\n    from = ''\n  } else if (isX(fm)) {\n    from = `>=${fM}.0.0${incPr ? '-0' : ''}`\n  } else if (isX(fp)) {\n    from = `>=${fM}.${fm}.0${incPr ? '-0' : ''}`\n  } else if (fpr) {\n    from = `>=${from}`\n  } else {\n    from = `>=${from}${incPr ? '-0' : ''}`\n  }\n\n  if (isX(tM)) {\n    to = ''\n  } else if (isX(tm)) {\n    to = `<${+tM + 1}.0.0-0`\n  } else if (isX(tp)) {\n    to = `<${tM}.${+tm + 1}.0-0`\n  } else if (tpr) {\n    to = `<=${tM}.${tm}.${tp}-${tpr}`\n  } else if (incPr) {\n    to = `<${tM}.${tm}.${+tp + 1}-0`\n  } else {\n    to = `<=${to}`\n  }\n\n  return (`${from} ${to}`).trim()\n}\n\nconst testSet = (set, version, options) => {\n  for (let i = 0; i < set.length; i++) {\n    if (!set[i].test(version)) {\n      return false\n    }\n  }\n\n  if (version.prerelease.length && !options.includePrerelease) {\n    // Find the set of versions that are allowed to have prereleases\n    // For example, ^1.2.3-pr.1 desugars to >=1.2.3-pr.1 <2.0.0\n    // That should allow `1.2.3-pr.2` to pass.\n    // However, `1.2.4-alpha.notready` should NOT be allowed,\n    // even though it's within the range set by the comparators.\n    for (let i = 0; i < set.length; i++) {\n      debug(set[i].semver)\n      if (set[i].semver === Comparator.ANY) {\n        continue\n      }\n\n      if (set[i].semver.prerelease.length > 0) {\n        const allowed = set[i].semver\n        if (allowed.major === version.major &&\n            allowed.minor === version.minor &&\n            allowed.patch === version.patch) {\n          return true\n        }\n      }\n    }\n\n    // Version has a -pre, but it's not one of the ones we like.\n    return false\n  }\n\n  return true\n}\n","const Range = require('../classes/range')\nconst satisfies = (version, range, options) => {\n  try {\n    range = new Range(range, options)\n  } catch (er) {\n    return false\n  }\n  return range.test(version)\n}\nmodule.exports = satisfies\n","import {MessageData} from './types';\n\n/**\n * Open editor url in a new window, and pass a message.\n */\nexport default function (window: Window, url: string, data: MessageData) {\n  // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n  const editor = window.open(url)!;\n  const wait = 10_000;\n  const step = 250;\n  const {origin} = new URL(url);\n  // eslint-disable-next-line no-bitwise\n  let count = ~~(wait / step);\n\n  function listen(evt: MessageEvent) {\n    if (evt.source === editor) {\n      count = 0;\n      window.removeEventListener('message', listen, false);\n    }\n  }\n  window.addEventListener('message', listen, false);\n\n  // send message\n  // periodically resend until ack received or timeout\n  function send() {\n    if (count <= 0) {\n      return;\n    }\n    editor.postMessage(data, origin);\n    setTimeout(send, step);\n    count -= 1;\n  }\n  setTimeout(send, step);\n}\n","// generated with build-style.sh\nexport default `.vega-embed {\n  position: relative;\n  display: inline-block;\n  box-sizing: border-box;\n}\n.vega-embed.has-actions {\n  padding-right: 38px;\n}\n.vega-embed details:not([open]) > :not(summary) {\n  display: none !important;\n}\n.vega-embed summary {\n  list-style: none;\n  position: absolute;\n  top: 0;\n  right: 0;\n  padding: 6px;\n  z-index: 1000;\n  background: white;\n  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);\n  color: #1b1e23;\n  border: 1px solid #aaa;\n  border-radius: 999px;\n  opacity: 0.2;\n  transition: opacity 0.4s ease-in;\n  outline: none;\n  cursor: pointer;\n  line-height: 0px;\n}\n.vega-embed summary::-webkit-details-marker {\n  display: none;\n}\n.vega-embed summary:active {\n  box-shadow: #aaa 0px 0px 0px 1px inset;\n}\n.vega-embed summary svg {\n  width: 14px;\n  height: 14px;\n}\n.vega-embed details[open] summary {\n  opacity: 0.7;\n}\n.vega-embed:hover summary, .vega-embed:focus summary {\n  opacity: 1 !important;\n  transition: opacity 0.2s ease;\n}\n.vega-embed .vega-actions {\n  position: absolute;\n  z-index: 1001;\n  top: 35px;\n  right: -9px;\n  display: flex;\n  flex-direction: column;\n  padding-bottom: 8px;\n  padding-top: 8px;\n  border-radius: 4px;\n  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);\n  border: 1px solid #d9d9d9;\n  background: white;\n  animation-duration: 0.15s;\n  animation-name: scale-in;\n  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);\n  text-align: left;\n}\n.vega-embed .vega-actions a {\n  padding: 8px 16px;\n  font-family: sans-serif;\n  font-size: 14px;\n  font-weight: 600;\n  white-space: nowrap;\n  color: #434a56;\n  text-decoration: none;\n}\n.vega-embed .vega-actions a:hover {\n  background-color: #f7f7f9;\n  color: black;\n}\n.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {\n  content: \"\";\n  display: inline-block;\n  position: absolute;\n}\n.vega-embed .vega-actions::before {\n  left: auto;\n  right: 14px;\n  top: -16px;\n  border: 8px solid #0000;\n  border-bottom-color: #d9d9d9;\n}\n.vega-embed .vega-actions::after {\n  left: auto;\n  right: 15px;\n  top: -14px;\n  border: 7px solid #0000;\n  border-bottom-color: #fff;\n}\n.vega-embed .chart-wrapper.fit-x {\n  width: 100%;\n}\n.vega-embed .chart-wrapper.fit-y {\n  height: 100%;\n}\n\n.vega-embed-wrapper {\n  max-width: 100%;\n  overflow: auto;\n  padding-right: 14px;\n}\n\n@keyframes scale-in {\n  from {\n    opacity: 0;\n    transform: scale(0.6);\n  }\n  to {\n    opacity: 1;\n    transform: scale(1);\n  }\n}\n`;\n","import {writeConfig} from 'vega';\n\n// polyfill for IE\nif (!String.prototype.startsWith) {\n  // eslint-disable-next-line no-extend-native,func-names\n  String.prototype.startsWith = function (search, pos) {\n    return this.substr(!pos || pos < 0 ? 0 : +pos, search.length) === search;\n  };\n}\n\nexport function isURL(s: string): boolean {\n  return s.startsWith('http://') || s.startsWith('https://') || s.startsWith('//');\n}\n\nexport type DeepPartial<T> = {[P in keyof T]?: P extends unknown ? unknown : DeepPartial<T[P]>};\n\nexport function mergeDeep<T>(dest: T, ...src: readonly DeepPartial<T>[]): T {\n  for (const s of src) {\n    deepMerge_(dest, s);\n  }\n  return dest;\n}\n\nfunction deepMerge_(dest: any, src: any) {\n  for (const property of Object.keys(src)) {\n    writeConfig(dest, property, src[property], true);\n  }\n}\n","import {applyPatch, Operation} from 'fast-json-patch';\nimport stringify from 'json-stringify-pretty-compact';\n// need this import because of https://github.com/npm/node-semver/issues/381\nimport satisfies from 'semver/functions/satisfies';\nimport * as vegaImport from 'vega';\nimport {\n  AutoSize,\n  Config as VgConfig,\n  EncodeEntryName,\n  isBoolean,\n  isString,\n  Loader,\n  LoaderOptions,\n  mergeConfig,\n  Renderers,\n  Spec as VgSpec,\n  TooltipHandler,\n  View,\n} from 'vega';\nimport {expressionInterpreter} from 'vega-interpreter';\nimport * as vegaLiteImport from 'vega-lite';\nimport {Config as VlConfig, TopLevelSpec as VlSpec} from 'vega-lite';\nimport schemaParser from 'vega-schema-url-parser';\nimport * as themes from 'vega-themes';\nimport {Handler, Options as TooltipOptions} from 'vega-tooltip';\nimport post from './post';\nimport embedStyle from './style';\nimport {Config, Mode} from './types';\nimport {mergeDeep} from './util';\nimport pkg from '../package.json';\n\nexport const version = pkg.version;\n\nexport * from './types';\n\nexport const vega = vegaImport;\nexport let vegaLite = vegaLiteImport;\n\n// For backwards compatibility with Vega-Lite before v4.\nconst w = (typeof window !== 'undefined' ? window : undefined) as any;\nif (vegaLite === undefined && w?.vl?.compile) {\n  vegaLite = w.vl;\n}\n\nexport interface Actions {\n  export?: boolean | {svg?: boolean; png?: boolean};\n  source?: boolean;\n  compiled?: boolean;\n  editor?: boolean;\n}\n\nexport const DEFAULT_ACTIONS = {export: {svg: true, png: true}, source: true, compiled: true, editor: true};\n\nexport interface Hover {\n  hoverSet?: EncodeEntryName;\n  updateSet?: EncodeEntryName;\n}\n\nexport type PatchFunc = (spec: VgSpec) => VgSpec;\n\nconst I18N = {\n  CLICK_TO_VIEW_ACTIONS: 'Click to view actions',\n  COMPILED_ACTION: 'View Compiled Vega',\n  EDITOR_ACTION: 'Open in Vega Editor',\n  PNG_ACTION: 'Save as PNG',\n  SOURCE_ACTION: 'View Source',\n  SVG_ACTION: 'Save as SVG',\n};\n\nexport interface EmbedOptions<S = string, R = Renderers> {\n  bind?: HTMLElement | string;\n  actions?: boolean | Actions;\n  mode?: Mode;\n  theme?: 'excel' | 'ggplot2' | 'quartz' | 'vox' | 'dark';\n  defaultStyle?: boolean | string;\n  logLevel?: number;\n  loader?: Loader | LoaderOptions;\n  renderer?: R;\n  tooltip?: TooltipHandler | TooltipOptions | boolean;\n  patch?: S | PatchFunc | Operation[];\n  width?: number;\n  height?: number;\n  padding?: number | {left?: number; right?: number; top?: number; bottom?: number};\n  scaleFactor?: number;\n  config?: S | Config;\n  sourceHeader?: string;\n  sourceFooter?: string;\n  editorUrl?: string;\n  hover?: boolean | Hover;\n  i18n?: Partial<typeof I18N>;\n  downloadFileName?: string;\n  formatLocale?: Record<string, unknown>;\n  timeFormatLocale?: Record<string, unknown>;\n  ast?: boolean;\n  expr?: typeof expressionInterpreter;\n  viewClass?: typeof View;\n}\n\nconst NAMES: {[key in Mode]: string} = {\n  vega: 'Vega',\n  'vega-lite': 'Vega-Lite',\n};\n\nconst VERSION = {\n  vega: vega.version,\n  'vega-lite': vegaLite ? vegaLite.version : 'not available',\n};\n\nconst PREPROCESSOR: {[mode in Mode]: (spec: any, config?: Config) => VgSpec} = {\n  vega: (vgSpec: VgSpec) => vgSpec,\n  'vega-lite': (vlSpec, config) => vegaLite.compile(vlSpec as VlSpec, {config: config as VlConfig}).spec,\n};\n\nconst SVG_CIRCLES = `\n<svg viewBox=\"0 0 16 16\" fill=\"currentColor\" stroke=\"none\" stroke-width=\"1\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n  <circle r=\"2\" cy=\"8\" cx=\"2\"></circle>\n  <circle r=\"2\" cy=\"8\" cx=\"8\"></circle>\n  <circle r=\"2\" cy=\"8\" cx=\"14\"></circle>\n</svg>`;\n\nconst CHART_WRAPPER_CLASS = 'chart-wrapper';\n\nexport type VisualizationSpec = VlSpec | VgSpec;\n\nexport interface Result {\n  /** The Vega view. */\n  view: View;\n\n  /** The input specification. */\n  spec: VisualizationSpec;\n\n  /** The compiled and patched Vega specification. */\n  vgSpec: VgSpec;\n\n  /** Removes references to unwanted behaviors and memory leaks. Calls Vega's `view.finalize`.  */\n  finalize: () => void;\n}\n\nfunction isTooltipHandler(h?: boolean | TooltipOptions | TooltipHandler): h is TooltipHandler {\n  return typeof h === 'function';\n}\n\nfunction viewSource(source: string, sourceHeader: string, sourceFooter: string, mode: Mode) {\n  const header = `<html><head>${sourceHeader}</head><body><pre><code class=\"json\">`;\n  const footer = `</code></pre>${sourceFooter}</body></html>`;\n  // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n  const win = window.open('')!;\n  win.document.write(header + source + footer);\n  win.document.title = `${NAMES[mode]} JSON Source`;\n}\n\n/**\n * Try to guess the type of spec.\n *\n * @param spec Vega or Vega-Lite spec.\n */\nexport function guessMode(spec: VisualizationSpec, providedMode?: Mode): Mode {\n  // Decide mode\n  if (spec.$schema) {\n    const parsed = schemaParser(spec.$schema);\n    if (providedMode && providedMode !== parsed.library) {\n      console.warn(\n        `The given visualization spec is written in ${NAMES[parsed.library]}, but mode argument sets ${\n          NAMES[providedMode] ?? providedMode\n        }.`\n      );\n    }\n\n    const mode = parsed.library as Mode;\n\n    if (!satisfies(VERSION[mode], `^${parsed.version.slice(1)}`)) {\n      console.warn(\n        `The input spec uses ${NAMES[mode]} ${parsed.version}, but the current version of ${NAMES[mode]} is v${VERSION[mode]}.`\n      );\n    }\n\n    return mode;\n  }\n\n  // try to guess from the provided spec\n  if (\n    'mark' in spec ||\n    'encoding' in spec ||\n    'layer' in spec ||\n    'hconcat' in spec ||\n    'vconcat' in spec ||\n    'facet' in spec ||\n    'repeat' in spec\n  ) {\n    return 'vega-lite';\n  }\n\n  if ('marks' in spec || 'signals' in spec || 'scales' in spec || 'axes' in spec) {\n    return 'vega';\n  }\n\n  return providedMode ?? 'vega';\n}\n\nfunction isLoader(o?: LoaderOptions | Loader): o is Loader {\n  return !!(o && 'load' in o);\n}\n\nfunction createLoader(opts?: Loader | LoaderOptions) {\n  return isLoader(opts) ? opts : vega.loader(opts);\n}\n\nfunction embedOptionsFromUsermeta(parsedSpec: VisualizationSpec) {\n  return (parsedSpec.usermeta && (parsedSpec.usermeta as any).embedOptions) ?? {};\n}\n\n/**\n * Embed a Vega visualization component in a web page. This function returns a promise.\n *\n * @param el        DOM element in which to place component (DOM node or CSS selector).\n * @param spec      String : A URL string from which to load the Vega specification.\n *                  Object : The Vega/Vega-Lite specification as a parsed JSON object.\n * @param opts       A JavaScript object containing options for embedding.\n */\nexport default async function embed(\n  el: HTMLElement | string,\n  spec: VisualizationSpec | string,\n  opts: EmbedOptions = {}\n): Promise<Result> {\n  let parsedSpec: VisualizationSpec;\n  let loader: Loader | undefined;\n\n  if (isString(spec)) {\n    loader = createLoader(opts.loader);\n    parsedSpec = JSON.parse(await loader.load(spec));\n  } else {\n    parsedSpec = spec;\n  }\n\n  const usermetaLoader = embedOptionsFromUsermeta(parsedSpec).loader;\n\n  // either create the loader for the first time or create a new loader if the spec has new loader options\n  if (!loader || usermetaLoader) {\n    loader = createLoader(opts.loader ?? usermetaLoader);\n  }\n\n  const usermetaOpts = await loadOpts(embedOptionsFromUsermeta(parsedSpec), loader);\n  const parsedOpts = await loadOpts(opts, loader);\n\n  const mergedOpts = {\n    ...mergeDeep(parsedOpts, usermetaOpts),\n    config: mergeConfig(parsedOpts.config ?? {}, usermetaOpts.config ?? {}),\n  };\n\n  return await _embed(el, parsedSpec, mergedOpts, loader);\n}\n\nasync function loadOpts(opt: EmbedOptions, loader: Loader): Promise<EmbedOptions<never>> {\n  const config: Config = isString(opt.config) ? JSON.parse(await loader.load(opt.config)) : opt.config ?? {};\n  const patch: PatchFunc | Operation[] = isString(opt.patch) ? JSON.parse(await loader.load(opt.patch)) : opt.patch;\n  return {\n    ...(opt as any),\n    ...(patch ? {patch} : {}),\n    ...(config ? {config} : {}),\n  };\n}\n\nfunction getRoot(el: Element) {\n  const possibleRoot = el.getRootNode ? el.getRootNode() : document;\n  return possibleRoot instanceof ShadowRoot\n    ? {root: possibleRoot, rootContainer: possibleRoot}\n    : {root: document, rootContainer: document.head ?? document.body};\n}\n\nasync function _embed(\n  el: HTMLElement | string,\n  spec: VisualizationSpec,\n  opts: EmbedOptions<never> = {},\n  loader: Loader\n): Promise<Result> {\n  const config = opts.theme ? mergeConfig(themes[opts.theme], opts.config ?? {}) : opts.config;\n\n  const actions = isBoolean(opts.actions) ? opts.actions : mergeDeep<Actions>({}, DEFAULT_ACTIONS, opts.actions ?? {});\n  const i18n = {...I18N, ...opts.i18n};\n\n  const renderer = opts.renderer ?? 'canvas';\n  const logLevel = opts.logLevel ?? vega.Warn;\n  const downloadFileName = opts.downloadFileName ?? 'visualization';\n\n  const element = typeof el === 'string' ? document.querySelector(el) : el;\n  if (!element) {\n    throw new Error(`${el} does not exist`);\n  }\n\n  if (opts.defaultStyle !== false) {\n    // Add a default stylesheet to the head of the document.\n    const ID = 'vega-embed-style';\n    const {root, rootContainer} = getRoot(element);\n    if (!root.getElementById(ID)) {\n      const style = document.createElement('style');\n      style.id = ID;\n      style.innerText =\n        opts.defaultStyle === undefined || opts.defaultStyle === true\n          ? (embedStyle ?? '').toString()\n          : opts.defaultStyle;\n      rootContainer.appendChild(style);\n    }\n  }\n\n  const mode = guessMode(spec, opts.mode);\n\n  let vgSpec: VgSpec = PREPROCESSOR[mode](spec, config);\n\n  if (mode === 'vega-lite') {\n    if (vgSpec.$schema) {\n      const parsed = schemaParser(vgSpec.$schema);\n\n      if (!satisfies(VERSION.vega, `^${parsed.version.slice(1)}`)) {\n        console.warn(`The compiled spec uses Vega ${parsed.version}, but current version is v${VERSION.vega}.`);\n      }\n    }\n  }\n\n  element.classList.add('vega-embed');\n  if (actions) {\n    element.classList.add('has-actions');\n  }\n  element.innerHTML = ''; // clear container\n\n  let container = element;\n  if (actions) {\n    const chartWrapper = document.createElement('div');\n    chartWrapper.classList.add(CHART_WRAPPER_CLASS);\n    element.appendChild(chartWrapper);\n    container = chartWrapper;\n  }\n\n  const patch = opts.patch;\n  if (patch) {\n    vgSpec = patch instanceof Function ? patch(vgSpec) : applyPatch(vgSpec, patch, true, false).newDocument;\n  }\n\n  // Set locale. Note that this is a global setting.\n  if (opts.formatLocale) {\n    vega.formatLocale(opts.formatLocale);\n  }\n\n  if (opts.timeFormatLocale) {\n    vega.timeFormatLocale(opts.timeFormatLocale);\n  }\n\n  const {ast} = opts;\n\n  // Do not apply the config to Vega when we have already applied it to Vega-Lite.\n  // This call may throw an Error if parsing fails.\n  const runtime = vega.parse(vgSpec, mode === 'vega-lite' ? {} : (config as VgConfig), {ast});\n\n  const view = new (opts.viewClass || vega.View)(runtime, {\n    loader,\n    logLevel,\n    renderer,\n    ...(ast ? {expr: (vega as any).expressionInterpreter ?? opts.expr ?? expressionInterpreter} : {}),\n  });\n\n  view.addSignalListener('autosize', (_, autosize: Exclude<AutoSize, string>) => {\n    const {type} = autosize;\n    if (type == 'fit-x') {\n      container.classList.add('fit-x');\n      container.classList.remove('fit-y');\n    } else if (type == 'fit-y') {\n      container.classList.remove('fit-x');\n      container.classList.add('fit-y');\n    } else if (type == 'fit') {\n      container.classList.add('fit-x', 'fit-y');\n    } else {\n      container.classList.remove('fit-x', 'fit-y');\n    }\n  });\n\n  if (opts.tooltip !== false) {\n    const handler = isTooltipHandler(opts.tooltip)\n      ? opts.tooltip\n      : // user provided boolean true or tooltip options\n        new Handler(opts.tooltip === true ? {} : opts.tooltip).call;\n\n    view.tooltip(handler);\n  }\n\n  let {hover} = opts;\n\n  if (hover === undefined) {\n    hover = mode === 'vega';\n  }\n\n  if (hover) {\n    const {hoverSet, updateSet} = (typeof hover === 'boolean' ? {} : hover) as Hover;\n\n    view.hover(hoverSet, updateSet);\n  }\n\n  if (opts) {\n    if (opts.width != null) {\n      view.width(opts.width);\n    }\n    if (opts.height != null) {\n      view.height(opts.height);\n    }\n    if (opts.padding != null) {\n      view.padding(opts.padding);\n    }\n  }\n\n  await view.initialize(container, opts.bind).runAsync();\n\n  let documentClickHandler: ((this: Document, ev: MouseEvent) => void) | undefined;\n\n  if (actions !== false) {\n    let wrapper = element;\n\n    if (opts.defaultStyle !== false) {\n      const details = document.createElement('details');\n      details.title = i18n.CLICK_TO_VIEW_ACTIONS;\n      element.append(details);\n\n      wrapper = details;\n      const summary = document.createElement('summary');\n      summary.innerHTML = SVG_CIRCLES;\n\n      details.append(summary);\n\n      documentClickHandler = (ev: MouseEvent) => {\n        if (!details.contains(ev.target as any)) {\n          details.removeAttribute('open');\n        }\n      };\n      document.addEventListener('click', documentClickHandler);\n    }\n\n    const ctrl = document.createElement('div');\n    wrapper.append(ctrl);\n    ctrl.classList.add('vega-actions');\n\n    // add 'Export' action\n    if (actions === true || actions.export !== false) {\n      for (const ext of ['svg', 'png'] as const) {\n        if (actions === true || actions.export === true || (actions.export as {svg?: boolean; png?: boolean})[ext]) {\n          const i18nExportAction = (i18n as {[key: string]: string})[`${ext.toUpperCase()}_ACTION`];\n          const exportLink = document.createElement('a');\n\n          exportLink.text = i18nExportAction;\n          exportLink.href = '#';\n          exportLink.target = '_blank';\n          exportLink.download = `${downloadFileName}.${ext}`;\n          // add link on mousedown so that it's correct when the click happens\n          exportLink.addEventListener('mousedown', async function (this, e) {\n            e.preventDefault();\n            const url = await view.toImageURL(ext, opts.scaleFactor);\n            this.href = url;\n          });\n\n          ctrl.append(exportLink);\n        }\n      }\n    }\n\n    // add 'View Source' action\n    if (actions === true || actions.source !== false) {\n      const viewSourceLink = document.createElement('a');\n\n      viewSourceLink.text = i18n.SOURCE_ACTION;\n      viewSourceLink.href = '#';\n      viewSourceLink.addEventListener('click', function (this, e) {\n        viewSource(stringify(spec), opts.sourceHeader ?? '', opts.sourceFooter ?? '', mode);\n        e.preventDefault();\n      });\n\n      ctrl.append(viewSourceLink);\n    }\n\n    // add 'View Compiled' action\n    if (mode === 'vega-lite' && (actions === true || actions.compiled !== false)) {\n      const compileLink = document.createElement('a');\n\n      compileLink.text = i18n.COMPILED_ACTION;\n      compileLink.href = '#';\n      compileLink.addEventListener('click', function (this, e) {\n        viewSource(stringify(vgSpec), opts.sourceHeader ?? '', opts.sourceFooter ?? '', 'vega');\n        e.preventDefault();\n      });\n\n      ctrl.append(compileLink);\n    }\n\n    // add 'Open in Vega Editor' action\n    if (actions === true || actions.editor !== false) {\n      const editorUrl = opts.editorUrl ?? 'https://vega.github.io/editor/';\n      const editorLink = document.createElement('a');\n\n      editorLink.text = i18n.EDITOR_ACTION;\n      editorLink.href = '#';\n      editorLink.addEventListener('click', function (this, e) {\n        post(window, editorUrl, {\n          config: config as Config,\n          mode,\n          renderer,\n          spec: stringify(spec),\n        });\n        e.preventDefault();\n      });\n\n      ctrl.append(editorLink);\n    }\n  }\n\n  function finalize() {\n    if (documentClickHandler) {\n      document.removeEventListener('click', documentClickHandler);\n    }\n    view.finalize();\n  }\n\n  return {view, spec, vgSpec, finalize};\n}\n"]},"metadata":{},"sourceType":"module"}