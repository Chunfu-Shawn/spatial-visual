{"version":3,"sources":["../webpack/bootstrap","../external \"react\"","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","app/state/hooks.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js","utils.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js","components/utils.js","../external \"@luma.gl/constants\"","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/typeof.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits.js","../external \"lodash/isEqual\"","../external \"@material-ui/core/styles\"","components/sets/constants.js","components/hooks.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","../external \"@deck.gl/core\"","loaders/errors/LoaderValidationError.js","loaders/errors/LoaderNotFoundError.js","loaders/errors/index.js","../external \"@hms-dbmi/viv\"","../external \"@material-ui/core/Grid\"","app/state/coordination.js","components/data-hooks.js","components/classNames.js","components/spatial/constants.js","../external \"zustand\"","layers/constants.js","../external \"lodash/debounce\"","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","loaders/errors/AbstractLoaderError.js","components/LoadingIndicator.js","components/TitleInfo.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","../external \"@material-ui/core/IconButton\"","../external \"@material-ui/core/colors\"","../external \"@material-ui/core/Slider\"","../external \"lodash/range\"","components/shared-mui/components.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","../external \"d3-array\"","../external \"@material-ui/core/Paper\"","../external \"@material-ui/core/MenuItem\"","../external \"zustand/context\"","../external \"zustand/shallow\"","components/layer-controller/styles.js","../external \"mathjs\"","../external \"@material-ui/core/Popper\"","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/superPropBase.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/get.js","components/shared-mui/styles.js","../external \"math.gl\"","../external \"@material-ui/icons/ArrowDropDown\"","../external \"@material-ui/icons/ArrowDropUp\"","components/layer-controller/utils.js","../external \"@material-ui/core/Select\"","../external \"@luma.gl/core\"","../external \"@material-ui/core/Checkbox\"","layers/bitmask-layer-shaders.js","layers/BitmaskLayer.js","components/spatial/utils.js","../external \"@material-ui/icons/CloudDownload\"","../external \"@material-ui/core/Link\"","../external \"@material-ui/icons/Settings\"","../external \"@material-ui/icons/Close\"","../external \"@material-ui/core/CircularProgress\"","../external \"@material-ui/core/MenuList\"","../external \"@material-ui/core/ClickAwayListener\"","../external \"@material-ui/core/Fade\"","../external \"fast-deep-equal\"","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js","../external \"@material-ui/core/InputLabel\"","../external \"@material-ui/core/Button\"","components/layer-controller/constants.js","../external \"@material-ui/core/Typography\"","components/layer-controller/VectorLayerController.js","../external \"@material-ui/icons/Add\"","../external \"short-number\"","../external \"regenerator-runtime\"","components/layer-controller/LayerOptions.js","components/layer-controller/VolumeOptions.js","components/layer-controller/LayerController.js","../external \"@material-ui/core/Tab\"","components/layer-controller/ColorPalette.js","components/layer-controller/ChannelOptions.js","components/layer-controller/shared-channel-controls.js","components/layer-controller/RasterChannelController.js","components/layer-controller/BitmaskChannelController.js","components/layer-controller/ImageAddButton.js","components/layer-controller/LayerControllerSubscriber.js","../external \"@material-ui/icons/MoreVert\"","../external \"@material-ui/icons/Lens\"","../external \"@material-ui/core/ExpansionPanelSummary\"","../external \"@material-ui/core/ExpansionPanelDetails\"","../external \"@material-ui/icons/RemoveCircle\"","../external \"@material-ui/core/Tabs\"","../external \"@material-ui/core/ExpansionPanel\"","../external \"@material-ui/icons/ExpandMore\"","../external \"@material-ui/icons/Visibility\"","../external \"@material-ui/icons/VisibilityOff\"","../external \"@material-ui/core/FormControl\"","components/layer-controller/index.js"],"names":["createContext","ViewConfigProviderLocal","Provider","useViewConfigStoreLocal","useStore","useViewConfigStoreApiLocal","useStoreApi","ViewConfigProvider","useViewConfigStore","useViewConfigStoreApi","AuxiliaryProviderLocal","useAuxiliaryStoreLocal","AuxiliaryProvider","useAuxiliaryStore","createViewConfigStore","create","set","viewConfig","loaders","setViewConfig","setLoaders","setCoordinationValue","parameter","scope","value","state","coordinationSpace","removeComponent","i","newLayout","layout","slice","splice","changeLayout","newComponentProps","forEach","newProps","useComponentLayout","component","scopes","coordinationScopes","filter","l","every","createAuxiliaryStore","auxiliaryStore","useHoverStore","componentHover","setComponentHover","useWarnStore","warning","setWarning","useViewInfoStore","viewInfo","setComponentViewInfo","uuid","useGridSizeStore","resizeCount","incrementResizeCount","useCoordination","parameters","values","fromEntries","map","undefined","shallow","setters","useMemo","setterName","capitalize","setterFunc","AUXILIARY_COORDINATION_TYPES_MAP","spatialRasterLayers","mapCoordinationScopes","newCoordinationScopes","Object","keys","key","newCoordinationTypes","coordinationType","mapParameters","Boolean","flat","useAuxiliaryCoordination","mappedCoordinationScopes","mappedParameters","useLoaders","useLayout","useRemoveComponent","useChangeLayout","useSetLoaders","useSetViewConfig","viewConfigStoreApi","setViewConfigRef","useRef","getState","current","useComponentHover","useSetComponentHover","useWarning","useSetWarning","useComponentViewInfo","useCallback","useSetComponentViewInfo","setViewInfoRef","useGridResize","useEmitGridResize","iterable","reduce","obj","val","assign","range","length","Array","pluralize","singular","plural","count","word","charAt","toUpperCase","getNextScope","prevScopes","chars","nextCharIndices","next","r","charIndex","unshift","increment","push","join","nextScope","includes","getSourceFromLoader","loader","level","data","source","isArray","isRgb","shape","dtype","labels","channelSize","indexOf","makeCellStatusMessage","cellInfoFactors","entries","factor","cellLayerDefaultProps","cells","updateStatus","setCellHighlight","coordinateSystem","COORDINATE_SYSTEM","CARTESIAN","pickable","autoHighlight","stroked","filled","getElevation","onHover","info","object","cellId","cellInfo","factors","DEFAULT_DARK_COLOR","DEFAULT_LIGHT_COLOR","getDefaultColor","theme","PALETTE","VIEWER_PALETTE","COLORMAP_OPTIONS","DEFAULT_GL_OPTIONS","webgl2","createDefaultUpdateStatus","componentName","message","console","warn","createDefaultUpdateCellsSelection","cellsSelection","createDefaultUpdateCellsHover","hoverInfo","createDefaultUpdateGenesHover","geneId","createDefaultUpdateViewInfo","createDefaultClearPleaseWait","copyUint8Array","arr","newBuffer","ArrayBuffer","buffer","byteLength","newArr","Uint8Array","getNextNumberedNodeName","nodes","prefix","find","n","name","setCellSelection","cellSelection","additionalCellSets","cellSetColor","setCellSetSelection","setAdditionalCellSets","setCellSetColor","setCellColorEncoding","CELL_SELECTIONS_LEVEL_ZERO_NAME","selectionsLevelZeroNode","tree","nextAdditionalCellSets","version","HIERARCHICAL_SCHEMAS","SETS_DATATYPE_CELL","latestVersion","datatype","nextName","children","colorIndex","d","nextPath","path","color","mergeCellSets","cellSets","createWarningComponent","props","title","PRIMARY_CARD","asEsModule","__esModule","default","formatBytes","bytes","decimals","k","dm","sizes","Math","floor","log","parseFloat","pow","toFixed","getStatsForResolution","resolution","height","width","depth","depthDownsampled","max","totalBytes","canLoadResolution","maxHeapSize","window","performance","memory","jsHeapSizeLimit","maxSize","FILE_EXTENSION_JSON","MIME_TYPE_JSON","FILE_EXTENSION_TABULAR","MIME_TYPE_TABULAR","SEPARATOR_TABULAR","NA_VALUE_TABULAR","cell","schema","cellSetsSchema","TABULAR_SCHEMAS","cellSetsTabularSchema","getWindowDimensions","innerWidth","innerHeight","useVitessceContainer","ref","closest","VITESSCE_CONTAINER","useWindowDimensions","useState","windowDimensions","setWindowDimensions","useEffect","handleResize","onResizeDebounced","debounce","trailing","addEventListener","removeEventListener","useGridItemSize","containerRef","setHeight","setWidth","onWindowResize","container","containerRect","getBoundingClientRect","useDeckCanvasSize","deckRef","canvas","deck","canvasRect","useReady","supportedItems","items","waiting","setWaiting","setItemIsReady","readyItem","waitingItems","nextWaitingItems","item","JSON","stringify","setItemIsNotReady","notReadyItem","resetReadyItems","isReady","useUrls","urls","setUrls","addUrl","url","prev","resetUrls","useClosestVitessceContainerSize","componentHeight","clientHeight","componentWidth","clientWidth","useExpressionValueGetter","attrs","expressionData","cellIdMap","result","rows","getExpressionValue","entry","cellIndex","LoaderValidationError","datasetType","datasetFileType","datasetUrl","reason","AbstractLoaderError","LoaderNotFoundError","COORDINATION_TYPES","DATASET","EMBEDDING_TYPE","EMBEDDING_ZOOM","EMBEDDING_ROTATION","EMBEDDING_TARGET_X","EMBEDDING_TARGET_Y","EMBEDDING_TARGET_Z","EMBEDDING_CELL_SET_POLYGONS_VISIBLE","EMBEDDING_CELL_SET_LABELS_VISIBLE","EMBEDDING_CELL_SET_LABEL_SIZE","EMBEDDING_CELL_RADIUS","EMBEDDING_CELL_OPACITY","EMBEDDING_CELL_RADIUS_MODE","EMBEDDING_CELL_OPACITY_MODE","SPATIAL_ZOOM","SPATIAL_ROTATION","SPATIAL_TARGET_X","SPATIAL_TARGET_Y","SPATIAL_TARGET_Z","SPATIAL_ROTATION_X","SPATIAL_ROTATION_Y","SPATIAL_ROTATION_Z","SPATIAL_ROTATION_ORBIT","SPATIAL_ORBIT_AXIS","SPATIAL_AXIS_FIXED","HEATMAP_ZOOM_X","HEATMAP_ZOOM_Y","HEATMAP_TARGET_X","HEATMAP_TARGET_Y","CELL_FILTER","CELL_HIGHLIGHT","CELL_SET_SELECTION","CELL_SET_HIGHLIGHT","CELL_SET_COLOR","GENE_FILTER","GENE_HIGHLIGHT","GENE_SELECTION","GENE_EXPRESSION_COLORMAP","GENE_EXPRESSION_TRANSFORM","GENE_EXPRESSION_COLORMAP_RANGE","CELL_COLOR_ENCODING","SPATIAL_RASTER_LAYERS","SPATIAL_CELLS_LAYER","SPATIAL_MOLECULES_LAYER","SPATIAL_NEIGHBORHOODS_LAYER","GENOMIC_ZOOM_X","GENOMIC_ZOOM_Y","GENOMIC_TARGET_X","GENOMIC_TARGET_Y","ADDITIONAL_CELL_SETS","MOLECULE_HIGHLIGHT","DEFAULT_COORDINATION_VALUES","AUTO_INDEPENDENT_COORDINATION_TYPES","COMPONENT_COORDINATION_TYPES","scatterplot","spatial","heatmap","cellSetSizes","cellSetExpression","status","genes","expressionHistogram","layerController","higlass","genomicProfiles","description","error","warnInConsole","initCoordinationSpace","initialValues","initialValue","shouldInit","equal","useDescription","dataset","setDescription","useCellsData","isRequired","coordinationSetters","initialCoordinationValues","setCells","cellsCount","setCellsCount","load","catch","e","then","payload","coordinationValues","coordinationValuesOrDefault","spatialCellsLayer","DEFAULT_CELLS_LAYER","useCellSetsData","setCellSets","useExpressionMatrixData","expressionMatrix","setExpressionMatrix","cols","matrix","useGeneSelection","selection","geneData","setGeneData","implementsGeneSelection","loadGeneSelection","expressionDataForSelection","sel","geneIndex","numGenes","numCells","useExpressionAttrs","setAttrs","implementsLoadAttrs","loadAttrs","useMoleculesData","molecules","setMolecules","moleculesCount","setMoleculesCount","locationsCount","setLocationsCount","a","b","spatialMoleculesLayer","DEFAULT_MOLECULES_LAYER","useNeighborhoodsData","neighborhoods","setNeighborhoods","spatialNeighborhoodsLayer","DEFAULT_NEIGHBORHOODS_LAYER","useRasterData","raster","setRaster","imageLayerLoaders","setImageLayerLoaders","imageLayerMeta","setImageLayerMeta","nextImageLoaders","nextImageMeta","meta","useGenomicProfilesData","genomicProfilesAttrs","setGenomicProfilesAttrs","TOOLTIP_ANCESTOR","CARD","SECONDARY_CARD","BLACK_CARD","TITLE_CARD","SCROLL_CARD","GLOBAL_LABELS","DEFAULT_RASTER_DOMAIN_TYPE","DEFAULT_RASTER_LAYER_PROPS","visible","colormap","opacity","domainType","transparentColor","renderingMode","RENDERING_MODES","ADDITIVE","use3d","radius","DEFAULT_LAYER_TYPE_ORDERING","GLSL_COLORMAPS","GLSL_COLORMAP_DEFAULT","COLORMAP_SHADER_PLACEHOLDER","Error","LoadingIndicator","useStyles","makeStyles","iconButton","border","marginLeft","background","palette","primaryForeground","paddingLeft","paddingRight","borderRadius","backgroundColor","primaryBackgroundLight","marginRight","verticalAlign","overflow","downloadLink","SettingsIconWithArrow","open","PlotOptions","options","setOpen","classes","CloudDownloadIconWithArrow","DownloadOptions","ClosePaneButton","removeGridComponent","TitleInfo","isScroll","isSpatial","childClassName","MuiSpan","styles","span","PopperMenu","buttonIcon","buttonClassName","anchorRef","handleClick","handleClose","id","getTooltipContainer","TransitionProps","paper","useSelectStyles","selectRoot","padding","margin","useOptionStyles","withStyles","textAlign","colors","popper","zIndex","sharedControllerStyles","flexDirection","useControllerSectionStyles","root","StyledExpansionPanelDetails","ExpansionPanelDetails","StyledExpansionPanelSummary","content","minWidth","expanded","marginBottom","spacing","top","expandIcon","ExpansionPanelSummary","StyledInputLabel","fontSize","InputLabel","OverflowEllipsisGrid","whiteSpace","textOverflow","Grid","StyledSelectionSlider","marginTop","markActive","Slider","maxHeight","position","left","muiTheme","dark","createMuiTheme","type","primary","grey","secondary","primaryBackground","primaryBackgroundHighlight","primaryBackgroundInput","primaryBackgroundDim","primaryForegroundDim","primaryForegroundActive","secondaryBackground","secondaryBackgroundDim","secondaryForeground","MuiButtonBase","disableRipple","light","getSingleSelectionStats2D","getRaster","selectionStats","getChannelStats","domain","slider","contrastLimits","getSingleSelectionStats3D","lowResSource","sizeZ","z","raster0","rasterMid","rasterTop","stats0","statsMid","statsTop","min","getSingleSelectionStats","getStats","getMultiSelectionStats","selections","Promise","all","stats","domains","stat","sliders","getPhysicalSizeScalingMatrix","physicalSizes","x","y","size","ratio","Matrix4","scale","identity","getBoundingCube","physicalSizeScalingMatrix","xSlice","ySlice","zSlice","abbreviateNumber","maxLength","maxNaiveDigits","Number","isInteger","naive","Intl","NumberFormat","maximumSignificantDigits","useGrouping","format","toExponential","vs","fs","padWithDefault","defaultValue","padWidth","defaultProps","hoveredCell","compare","cellColorData","BitmaskLayer","modules","project32","picking","defines","oldProps","changeFlags","setColorTexture","cellTexHeight","cellTexWidth","expressionTex","dataToTexture","setState","gl","context","model","delete","_getModel","getAttributeManager","invalidateAll","colorTex","Texture2D","mipmaps","GL","TEXTURE_MIN_FILTER","NEAREST","TEXTURE_MAG_FILTER","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","RGB","dataFormat","UNSIGNED_BYTE","opts","uniforms","channelsVisible","colorScaleLo","colorScaleHi","isExpressionMode","textures","setUniforms","hovered","colorTexHeight","colorTexWidth","uColorScaleRange","uIsExpressionMode","draw","isWebGL2On","isWebGL2","Float32Array","R32F","LUMINANCE","RED","FLOAT","XRLayer","layerName","square","sortLayers","layers","sort","getDefaultGlobalSelection","globalIndices","dim","buildDefaultSelection","globalSelection","firstNonGlobalDimension","isInterleaved","lastDimSize","initializeLayerChannels","defaultSelection","c","channel","getMetaWithTransformMatrices","imageMeta","imageLoaders","sources","metadata","transform","translate","some","minPhysicalSize","acc","hasZPhyscialSize","unit","replace","imageMetaWithTransform","j","divide","isEqual","newMeta","toArray","initializeRasterLayersAndChannels","rasterLayers","rasterRenderLayers","usePhysicalSizeScaling","nextImageMetaAndLayers","autoImageLayerDefPromises","layer","loaderCreator","layerIndex","autoImageLayerDefPromise","channels","resolve","isBitmask","index","modelMatrix","globalIndicesOfRenderLayers","imageName","findIndex","image","autoImageLayerDefs","makeSpatialSubtitle","observationsCount","observationsLabel","observationsPluralLabel","subobservationsCount","subobservationsLabel","subobservationsPluralLabel","parts","part","shortNumber","getInitialSpatialTargets","useRaster","initialTargetX","Infinity","initialTargetY","initialTargetZ","initialZoom","zoomBackoff","cellValues","viewSize","getDefaultInitialViewState","target","newViewStateZoom","zoom","xy","cellCoordinates","xExtent","extent","yExtent","xRange","yRange","getViewExtentFromPolygonExtents","extents","polygonExtentsX","poly","polygonExtentsY","log2","getLayerLoaderTuple","VolumeLayer","Layer","MultiscaleImageLayer","ImageLayer","renderSubBitmaskLayers","tile","bbox","right","bottom","v","base","bounds","tileSize","channelData","tileId","getDomains","needMin","DTYPE_VALUES","DOMAINS","VectorLayerController","label","layerType","handleLayerChange","isOn","handleSliderChange","handleCheckBoxChange","DOMAIN_OPTIONS","VolumeDropdown","loaderWithMeta","handleMultiPropertyChange","currResolution","disable3d","setRasterLayerCallback","setAreAllChannelsLoading","setViewState","spatialHeight","spatialWidth","handleChange","shouldUse3D","propertiesChanged","ch","defaultViewState","rotationX","rotationOrbit","newChannels","spatialAxisFixed","orbitAxis","hasZStack","from","fill","_","ColormapSelect","inputId","TransparentColorCheckbox","float","OpacitySlider","SliderDomainSelector","GlobalSelectionSlider","field","possibleValues","event","newValue","LayerOption","LayerOptions","handleColormapChange","handleOpacityChange","handleTransparentColorChange","globalControlLabels","globalLabelValues","handleGlobalChannelsSelectionChange","handleDomainChange","disableChannelsIfRgbDetected","shouldShowTransparentColor","shouldShowDomain","shouldShowColormap","hasDimensionsAndChannels","hasViewableResolutions","res","useSlicerStyles","createStyles","enabled","disabled","text","Slicer","handleSlicerSetting","xSliceInit","ySliceInit","zSliceInit","sliceValuesAndSetSliceFunctions","xSliceNew","ySliceNew","zSliceNew","Slicers","setVal","renderingOptions","RenderingModeSelect","handleRenderingModeChange","ReCenterButton","VolumeOptions","TabPanel","other","getDomainsAndSliders","buttonStyles","borderStyle","fontWeight","LayerController","handleLayerRemove","ChannelController","setAreLayerChannelsLoading","areLayerChannelsLoading","shouldShowRemoveLayerButton","channelRef","firstSelection","channelOptions","tab","setTab","handleTabChange","newTab","setDomainType","isExpanded","setIsExpanded","o","setGlobalLabelValues","setVisible","setColormap","setOpacity","setChannels","setTransparentColor","setRenderingMode","setChannelsAndDomainType","newDomainType","setChannel","addChannel","removeChannel","newAreLayerChannelsLoading","handleChannelAdd","newChannelId","areLayerChannelsLoadingCallback","canUpdateChannels","newChannelsWithSelection","newChannelsWithSliders","channelControllers","channelLabel","channelId","setIsLoading","handleChannelPropertyChange","property","update","handleChannelRemove","handleIQRUpdate","loaderData","q1","q3","controllerSectionClasses","visibleSetting","Visibility","VisibilityIcon","VisibilityOffIcon","useVolumeTabs","FullController","MAX_CHANNELS","attributes","role","enter","stopPropagation","nextVisible","minHeight","display","justifyContent","alignItems","flexWrap","button","icon","stroke","action","selected","ColorPalette","menuButton","ChannelOptions","handlePropertyChange","handleColorSelect","handleRemove","ChannelSelectionDropdown","selectionIndex","opt","ChannelVisibilityCheckbox","checked","toggle","toRgbUIString","on","ChannelSlider","handleChangeDebounced","step","RasterChannelController","visibility","dimName","colormapOn","isLoading","newUse3d","setDomain","setUse3d","setSelection","rgbColor","mounted","hasDomainChanged","has3dChanged","hasSelectionChanged","newDomain","createSelection","BitmaskChannelController","disableOptions","addButton","ImageAddIcon","ImageAddButton","imageOptions","handleImageAdd","handleAdd","imgData","LAYER_CONTROLLER_DATA_TYPES","LayerControllerMemoized","React","memo","forwardRef","moleculesLayer","setMoleculesLayer","cellsLayer","canShowCellVecmask","setCellsLayer","rasterLayersCallbacks","setRasterLayersCallbacks","areLoadingRasterChannnels","setAreLoadingRasterChannnels","handleRasterLayerChange","handleRasterLayerRemove","globalDisable3d","layerIs3DIndex","setZoom","setTargetX","setTargetY","setTargetZ","setRotationX","setRotationOrbit","spatialLayout","enableLayerButtonsWithOneLayer","shouldShowImageLayerButton","layerMeta","isRaster","cb","newRasterLayersCallbacks","newAreLoadingRasterChannnels","newZoom","newRotationX","newRotationOrbit","h","w","LayerControllerSubscriber","setRasterLayers","setSpatialRasterLayers","setSpatialCellsLayer","setSpatialMoleculesLayer","setSpatialTargetX","setSpatialTargetY","setSpatialTargetZ","setSpatialRotationX","setSpatialRotationOrbit","setSpatialZoom","layerControllerRef","windowHeight","windowWidth","newLayer","newLayers","hasNoBitmask"],"mappings":";;QAAA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;;QAGA;QACA;;;;;;;AClFA,kC;;;;;;;;;ACAe;AACf;AACA,C;;ACFe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA,6CAA6C,+BAA+B;AAC5E;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA,C;;;;;ACzBe;AACf;AACA,C;;ACFA;AAA8C;AACY;AACY;AACtB;AACjC;AACf,SAAS,eAAc,SAAS,qBAAoB,YAAY,qDAA0B,YAAY,gBAAe;AACrH,C;;;;;;;ACNA;AAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;;AAEA;AACA,C;;;;;;;ACbA;AAAA;AAA8C;;AAE9C;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;;AAEe;AACf,iBAAiB,sBAAsB;AACvC;;AAEA;AACA;AACA,QAAQ,uEAAc;AACtB,OAAO;AACP,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA,C;;;;;;;;;;;;AClCkD;AACnC;AACf,iCAAiC,2CAAgB;AACjD,C;;ACHe;AACf;AACA,C;;;;;ACFe;AACf;AACA,C;;ACFA;AAAoD;AA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","file":"layer-controller.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"./\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 200);\n","module.exports = require(\"react\");","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithHoles from \"./arrayWithHoles\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nimport nonIterableRest from \"./nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import defineProperty from \"./defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}","import arrayLikeToArray from \"./arrayLikeToArray\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithoutHoles from \"./arrayWithoutHoles\";\nimport iterableToArray from \"./iterableToArray\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nimport nonIterableSpread from \"./nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import { useRef, useCallback, useMemo } from 'react';\nimport create from 'zustand';\nimport createContext from 'zustand/context';\nimport shallow from 'zustand/shallow';\nimport { fromEntries, capitalize } from '../../utils';\n\n// Reference: https://github.com/pmndrs/zustand#react-context\n// Reference: https://github.com/pmndrs/zustand/blob/e47ea03/tests/context.test.tsx#L60\nconst {\n  Provider: ViewConfigProviderLocal,\n  useStore: useViewConfigStoreLocal,\n  useStoreApi: useViewConfigStoreApiLocal,\n} = createContext();\n\nexport const ViewConfigProvider = ViewConfigProviderLocal;\nexport const useViewConfigStore = useViewConfigStoreLocal;\nexport const useViewConfigStoreApi = useViewConfigStoreApiLocal;\n\nconst {\n  Provider: AuxiliaryProviderLocal,\n  useStore: useAuxiliaryStoreLocal,\n} = createContext();\n\nexport const AuxiliaryProvider = AuxiliaryProviderLocal;\nexport const useAuxiliaryStore = useAuxiliaryStoreLocal;\n\n\n/**\n * The useViewConfigStore hook is initialized via the zustand\n * create() function, which sets up both the state variables\n * and the reducer-type functions.\n * Reference: https://github.com/react-spring/zustand\n * @returns {function} The useStore hook.\n */\nexport const createViewConfigStore = () => create(set => ({\n  // State:\n  // The viewConfig is an object which must conform to the schema\n  // found in src/schemas/config.schema.json.\n  viewConfig: null,\n  // The loaders object is a mapping from dataset ID to\n  // data type to loader object instance.\n  loaders: null,\n  // Reducer functions which update the state\n  // (although technically also part of state):\n  setViewConfig: viewConfig => set({ viewConfig }),\n  setLoaders: loaders => set({ loaders }),\n  setCoordinationValue: ({ parameter, scope, value }) => set(state => ({\n    viewConfig: {\n      ...state.viewConfig,\n      coordinationSpace: {\n        ...state.viewConfig.coordinationSpace,\n        [parameter]: {\n          ...state.viewConfig.coordinationSpace[parameter],\n          [scope]: value,\n        },\n      },\n    },\n  })),\n  removeComponent: i => set((state) => {\n    const newLayout = state.viewConfig.layout.slice();\n    newLayout.splice(i, 1);\n    return {\n      viewConfig: {\n        ...state.viewConfig,\n        layout: newLayout,\n      },\n    };\n  }),\n  changeLayout: newComponentProps => set((state) => {\n    const newLayout = state.viewConfig.layout.slice();\n    newComponentProps.forEach(([i, newProps]) => {\n      newLayout[i] = {\n        ...newLayout[i],\n        ...newProps,\n      };\n    });\n    return {\n      viewConfig: {\n        ...state.viewConfig,\n        layout: newLayout,\n      },\n    };\n  }),\n}));\n\n/**\n * Hook for getting components' layout from the view config based on\n * matching all coordination scopes.\n * @returns {Object} The components' layout.\n */\nexport const useComponentLayout = (component, scopes, coordinationScopes) => useViewConfigStore(\n  state => state.viewConfig.layout.filter(l => l.component === component).filter(\n    l => scopes.every(scope => l.coordinationScopes[scope]\n          === coordinationScopes[scope]),\n  ),\n);\n\n/**\n * The useAuxiliaryStore hook is initialized via the zustand\n * create() function, which sets up both the state variables\n * and the reducer-type functions.\n * Reference: https://github.com/react-spring/zustand\n * It is meant to be used for non-viewconfig-based coordination between components.\n * For example, as currently happens, the layer controller can coordinate\n * on-load callbacks with spatial view based on whether or not they are\n * coordinated via `spatialRasterLayers` - the callbacks are not part of the view config\n * though so they live here.\n * @returns {function} The useStore hook.\n */\nexport const createAuxiliaryStore = () => create(set => ({\n  auxiliaryStore: null,\n  setCoordinationValue: ({ parameter, scope, value }) => set(state => ({\n    auxiliaryStore: {\n      ...state.auxiliaryStore,\n      [parameter]: {\n        [scope]: value,\n      },\n    },\n  })),\n}));\n\n/**\n * The hover store can be used to store global state\n * related to which component is currently hovered,\n * which is required for tooltip / crossover elements.\n * @returns {function} The useStore hook.\n */\nconst useHoverStore = create(set => ({\n  // Components may need to know if they are the \"hover source\"\n  // for tooltip interactions. This value should be a unique\n  // component ID, such as its index in the view config layout.\n  componentHover: null,\n  setComponentHover: componentHover => set({ componentHover }),\n}));\n\n/**\n * The warning store can be used to store global state\n * related to app warning messages.\n * @returns {function} The useStore hook.\n */\nconst useWarnStore = create(set => ({\n  // Want a global state to collect warning messages\n  // that occur anywhere in the app.\n  warning: null,\n  setWarning: warning => set({ warning }),\n}));\n\n/**\n * The view info store can be used to store component-level\n * viewInfo objects,\n * which are required for tooltip / crossover elements.\n * @returns {function} The useStore hook.\n */\nconst useViewInfoStore = create(set => ({\n  // The viewInfo object is a mapping from\n  // component IDs to component view info objects.\n  // Each view info object must have a project() function.\n  viewInfo: {},\n  setComponentViewInfo: (uuid, viewInfo) => set(state => ({\n    viewInfo: {\n      ...state.viewInfo,\n      [uuid]: viewInfo,\n    },\n  })),\n}));\n\n/**\n * The grid size store can be used to store a\n * counter which updates on each window or react-grid-layout\n * resize event.\n * @returns {function} The useStore hook.\n */\nconst useGridSizeStore = create(set => ({\n  resizeCount: {},\n  incrementResizeCount: () => set(state => ({\n    resizeCount: state.resizeCount + 1,\n  })),\n}));\n\n/**\n * The useCoordination hook returns both the\n * values and setter functions for the coordination objects\n * in a particular coordination scope mapping.\n * This hook is intended to be used within the ___Subscriber\n * components to allow them to \"hook into\" only those coordination\n * objects and setter functions of relevance.\n * @param {string[]} parameters Array of coordination types.\n * @param {object} coordinationScopes Mapping of coordination types\n * to scope names.\n * @returns {array} Returns a tuple [values, setters]\n * where values is an object containing all coordination values,\n * and setters is an object containing all coordination setter\n * functions for the values in `values`, named with a \"set\"\n * prefix.\n */\nexport function useCoordination(parameters, coordinationScopes) {\n  const setCoordinationValue = useViewConfigStore(state => state.setCoordinationValue);\n\n  const values = useViewConfigStore((state) => {\n    const { coordinationSpace } = state.viewConfig;\n    return fromEntries(parameters.map((parameter) => {\n      if (coordinationSpace && coordinationSpace[parameter]) {\n        const value = coordinationSpace[parameter][coordinationScopes[parameter]];\n        return [parameter, value];\n      }\n      return [parameter, undefined];\n    }));\n  }, shallow);\n\n  const setters = useMemo(() => fromEntries(parameters.map((parameter) => {\n    const setterName = `set${capitalize(parameter)}`;\n    const setterFunc = value => setCoordinationValue({\n      parameter,\n      scope: coordinationScopes[parameter],\n      value,\n    });\n    return [setterName, setterFunc];\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  })), [parameters, coordinationScopes]);\n\n  return [values, setters];\n}\n\nconst AUXILIARY_COORDINATION_TYPES_MAP = {\n  spatialRasterLayers: ['rasterLayersCallbacks', 'areLoadingRasterChannnels'],\n};\n\n/**\n * The maps the coordination types of incoming scopes to new types\n * for the auxiliary store.\n * @param {object} coordinationScopes Mapping of coordination types\n * to scope names.\n * @returns {object} Mapping of coordination types\n * to new scope names for the auxiliary store.\n */\nconst mapCoordinationScopes = (coordinationScopes) => {\n  const newCoordinationScopes = {};\n  Object.keys(coordinationScopes).forEach((key) => {\n    const newCoordinationTypes = AUXILIARY_COORDINATION_TYPES_MAP[key] || [];\n    newCoordinationTypes.forEach((coordinationType) => {\n      newCoordinationScopes[coordinationType || key] = coordinationScopes[key];\n    });\n  });\n  return newCoordinationScopes;\n};\n\nconst mapParameters = parameters => parameters\n  .map(parameter => AUXILIARY_COORDINATION_TYPES_MAP[parameter]).filter(Boolean).flat();\n\n/**\n * The useAuxiliaryCoordination hook returns both the\n * values and setter functions for the auxiliary coordination objects\n * in a particular coordination scope mapping.\n * This hook is intended to be used within the ___Subscriber\n * components to allow them to \"hook into\" only those auxiliary coordination\n * objects and setter functions of relevance, for example \"on load\" callbacks.\n * @param {string[]} parameters Array of coordination types.\n * @param {object} coordinationScopes Mapping of coordination types\n * to scope names.\n * @returns {array} Returns a tuple [values, setters]\n * where values is an object containing all coordination values,\n * and setters is an object containing all coordination setter\n * functions for the values in `values`, named with a \"set\"\n * prefix.\n */\nexport function useAuxiliaryCoordination(parameters, coordinationScopes) {\n  const setCoordinationValue = useAuxiliaryStore(state => state.setCoordinationValue);\n  const mappedCoordinationScopes = mapCoordinationScopes(coordinationScopes);\n  const mappedParameters = mapParameters(parameters);\n  const values = useAuxiliaryStore((state) => {\n    const { auxiliaryStore } = state;\n    return fromEntries(mappedParameters.map((parameter) => {\n      if (auxiliaryStore && auxiliaryStore[parameter]) {\n        const value = auxiliaryStore[parameter][mappedCoordinationScopes[parameter]];\n        return [parameter, value];\n      }\n      return [parameter, undefined];\n    }));\n  }, shallow);\n  const setters = useMemo(() => fromEntries(mappedParameters.map((parameter) => {\n    const setterName = `set${capitalize(parameter)}`;\n    const setterFunc = value => setCoordinationValue({\n      parameter,\n      scope: mappedCoordinationScopes[parameter],\n      value,\n    });\n    return [setterName, setterFunc];\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  })), [parameters, coordinationScopes]);\n\n  return [values, setters];\n}\n\n/**\n * Obtain the loaders object from\n * the global app state.\n * @returns {object} The loaders object\n * in the `useViewConfigStore` store.\n */\nexport function useLoaders() {\n  return useViewConfigStore(state => state.loaders);\n}\n\n/**\n * Obtain the view config layout array from\n * the global app state.\n * @returns {object[]} The layout array\n * in the `useViewConfigStore` store.\n */\nexport function useLayout() {\n  return useViewConfigStore(state => state.viewConfig?.layout);\n}\n\n/**\n * Obtain the component removal function from\n * the global app state.\n * @returns {function} The remove component function\n * in the `useViewInfoStore` store.\n */\nexport function useRemoveComponent() {\n  return useViewConfigStore(state => state.removeComponent);\n}\n\n/**\n * Obtain the component prop setter function from\n * the global app state.\n * @returns {function} The set component props function\n * in the `useViewInfoStore` store.\n */\nexport function useChangeLayout() {\n  return useViewConfigStore(state => state.changeLayout);\n}\n\n/**\n * Obtain the loaders setter function from\n * the global app state.\n * @returns {function} The loaders setter function\n * in the `useViewConfigStore` store.\n */\nexport function useSetLoaders() {\n  return useViewConfigStore(state => state.setLoaders);\n}\n\n/**\n * Obtain the view config setter function from\n * the global app state.\n * @returns {function} The view config setter function\n * in the `useViewConfigStore` store.\n */\nexport function useSetViewConfig(viewConfigStoreApi) {\n  const setViewConfigRef = useRef(viewConfigStoreApi.getState().setViewConfig);\n  const setViewConfig = setViewConfigRef.current;\n  return setViewConfig;\n}\n\n/**\n * Obtain the component hover value from\n * the global app state.\n * @returns {number} The hovered component ID\n * in the `useHoverStore` store.\n */\nexport function useComponentHover() {\n  return useHoverStore(state => state.componentHover);\n}\n\n/**\n * Obtain the component hover setter function from\n * the global app state.\n * @returns {function} The component hover setter function\n * in the `useHoverStore` store.\n */\nexport function useSetComponentHover() {\n  return useHoverStore(state => state.setComponentHover);\n}\n\n/**\n * Obtain the warning message from\n * the global app state.\n * @returns {string} The warning message\n * in the `useWarnStore` store.\n */\nexport function useWarning() {\n  return useWarnStore(state => state.warning);\n}\n\n/**\n * Obtain the warning setter function from\n * the global app state.\n * @returns {function} The warning setter function\n * in the `useWarnStore` store.\n */\nexport function useSetWarning() {\n  return useWarnStore(state => state.setWarning);\n}\n\n/**\n * Obtain the component view info value from\n * the global app state.\n * @returns {object} The view info object for the component\n * in the `useViewInfoStore` store.\n */\nexport function useComponentViewInfo(uuid) {\n  return useViewInfoStore(useCallback(state => state.viewInfo[uuid], [uuid]));\n}\n\n/**\n * Obtain the component view info setter function from\n * the global app state.\n * @returns {function} The component view info setter function\n * in the `useViewInfoStore` store.\n */\nexport function useSetComponentViewInfo(uuid) {\n  const setViewInfoRef = useRef(useViewInfoStore.getState().setComponentViewInfo);\n  const setComponentViewInfo = viewInfo => setViewInfoRef.current(uuid, viewInfo);\n  return setComponentViewInfo;\n}\n\n/**\n * Obtain the grid resize count value\n * from the global app state.\n * @returns {number} The grid resize increment value.\n */\nexport function useGridResize() {\n  return useGridSizeStore(state => state.resizeCount);\n}\n\n/**\n * Obtain the grid resize count increment function\n * from the global app state.\n * @returns {function} The grid resize count increment\n * function.\n */\nexport function useEmitGridResize() {\n  return useGridSizeStore(state => state.incrementResizeCount);\n}\n","module.exports = require(\"regenerator-runtime\");\n","/* eslint-disable no-plusplus */\n\n// Adapted from https://github.com/feross/fromentries/blob/29b52a850bb3a47c390937631c2638edf3443942/index.js\nexport function fromEntries(iterable) {\n  return [...iterable]\n    .reduce((obj, { 0: key, 1: val }) => Object.assign(obj, { [key]: val }), {});\n}\n\nexport function range(length) {\n  return [...Array(length).keys()];\n}\n\n/**\n * Select between a singular and plural version of a word,\n * based on an item count.\n * @param {string} singular The singular version of the word.\n * @param {string} plural The plural version of the word.\n * @param {number} count The number of items.\n * @returns {string} Singular if count is one, else plural.\n */\nexport function pluralize(singular, plural, count) {\n  return (count === 1 ? singular : plural);\n}\n\n/**\n * Capitalize a the first letter of a string.\n * @param {string} word A string to capitalize.\n * @returns {string} The word parameter with the first letter capitalized.\n */\nexport function capitalize(word) {\n  return word.charAt(0).toUpperCase() + word.slice(1);\n}\n\n/**\n * Generate a new scope name which does not\n * conflict / overlap with a previous scope name.\n * Really these just need to be unique within the coordination object.\n * So in theory they could be String(Math.random()) or uuidv4() or something.\n * However it may be good to make them more human-readable and memorable\n * since eventually we will want to expose a UI to update the coordination.\n * @param {string[]} prevScopes Previous scope names.\n * @returns {string} The new scope name.\n */\nexport function getNextScope(prevScopes) {\n  // Keep an ordered list of valid characters.\n  const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';\n  // Store the value of the next character for each position\n  // in the new string.\n  // For example, [0] -> \"A\", [1] -> \"B\", [0, 1] -> \"AB\"\n  const nextCharIndices = [0];\n\n  // Generate a new scope name,\n  // potentially conflicting with an existing name.\n  // Reference: https://stackoverflow.com/a/12504061\n  function next() {\n    const r = [];\n    nextCharIndices.forEach((charIndex) => {\n      r.unshift(chars[charIndex]);\n    });\n    let increment = true;\n    for (let i = 0; i < nextCharIndices.length; i++) {\n      const val = ++nextCharIndices[i];\n      if (val >= chars.length) {\n        nextCharIndices[i] = 0;\n      } else {\n        increment = false;\n        break;\n      }\n    }\n    if (increment) {\n      nextCharIndices.push(0);\n    }\n    return r.join('');\n  }\n\n  let nextScope;\n  do {\n    nextScope = next();\n  } while (prevScopes.includes(nextScope));\n  return nextScope;\n}\n\n/**\n * Get a representative PixelSource from a loader object returned from\n * the Vitessce imaging loaders\n * @param {object} loader { data: (PixelSource[]|PixelSource), metadata, channels } object\n * @param {number=} level Level of the multiscale loader from which to get a PixelSource\n * @returns {object} PixelSource object\n */\nexport function getSourceFromLoader(loader, level) {\n  const { data } = loader;\n  const source = Array.isArray(data) ? data[(level || data.length - 1)] : data;\n  return source;\n}\n\n/*\n * Helper method to determine whether pixel data is interleaved and rgb or not.\n * @param {object} loader\n */\nexport function isRgb(loader) {\n  const source = getSourceFromLoader(loader);\n  const { shape, dtype, labels } = source;\n  const channelSize = shape[labels.indexOf('c')];\n  return (channelSize === 3) && dtype === 'Uint8';\n}\n","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","import React from 'react';\nimport { COORDINATE_SYSTEM } from '@deck.gl/core'; // eslint-disable-line import/no-extraneous-dependencies\nimport {\n  SETS_DATATYPE_CELL,\n  HIERARCHICAL_SCHEMAS,\n} from './sets/constants';\nimport { PRIMARY_CARD } from './classNames';\n\nexport function makeCellStatusMessage(cellInfoFactors) {\n  return Object.entries(cellInfoFactors).map(\n    ([factor, value]) => `${factor}: ${value}`,\n  ).join('; ');\n}\n\nexport function cellLayerDefaultProps(cells, updateStatus, setCellHighlight, setComponentHover) {\n  return {\n    coordinateSystem: COORDINATE_SYSTEM.CARTESIAN,\n    data: cells,\n    pickable: true,\n    autoHighlight: true,\n    stroked: true,\n    filled: true,\n    getElevation: 0,\n    onHover: (info) => {\n      // Notify the parent component that its child component is\n      // the \"hover source\".\n      if (setComponentHover) {\n        setComponentHover();\n      }\n      if (info.object) {\n        const [cellId, cellInfo] = info.object;\n        const { factors = {} } = cellInfo;\n        if (updateStatus) {\n          updateStatus(makeCellStatusMessage(factors));\n        }\n        if (setCellHighlight) {\n          setCellHighlight(cellId);\n        }\n      } else if (setCellHighlight) {\n        // Clear the currently-hovered cell info by passing null.\n        setCellHighlight('');\n      }\n    },\n  };\n}\n\nexport const DEFAULT_DARK_COLOR = [50, 50, 50];\nexport const DEFAULT_LIGHT_COLOR = [200, 200, 200];\n\nexport function getDefaultColor(theme) {\n  return theme === 'dark' ? DEFAULT_DARK_COLOR : DEFAULT_LIGHT_COLOR;\n}\n\n// From https://personal.sron.nl/~pault/#sec:qualitative\nexport const PALETTE = [\n  [68, 119, 170],\n  [136, 204, 238],\n  [68, 170, 153],\n  [17, 119, 51],\n  [153, 153, 51],\n  [221, 204, 119],\n  [204, 102, 119],\n  [136, 34, 85],\n  [170, 68, 153],\n];\n\nexport const VIEWER_PALETTE = [\n  [0, 0, 255],\n  [0, 255, 0],\n  [255, 0, 255],\n  [255, 255, 0],\n  [0, 255, 255],\n  [255, 255, 255],\n  [255, 128, 0],\n  [255, 0, 0],\n];\n\nexport const COLORMAP_OPTIONS = [\n  'viridis',\n  'greys',\n  'magma',\n  'jet',\n  'hot',\n  'bone',\n  'copper',\n  'summer',\n  'density',\n  'inferno',\n];\n\nexport const DEFAULT_GL_OPTIONS = { webgl2: true };\n\nexport function createDefaultUpdateStatus(componentName) {\n  return message => console.warn(`${componentName} updateStatus: ${message}`);\n}\n\nexport function createDefaultUpdateCellsSelection(componentName) {\n  return cellsSelection => console.warn(`${componentName} updateCellsSelection: ${cellsSelection}`);\n}\n\nexport function createDefaultUpdateCellsHover(componentName) {\n  return hoverInfo => console.warn(`${componentName} updateCellsHover: ${hoverInfo.cellId}`);\n}\n\nexport function createDefaultUpdateGenesHover(componentName) {\n  return hoverInfo => console.warn(`${componentName} updateGenesHover: ${hoverInfo.geneId}`);\n}\n\nexport function createDefaultUpdateViewInfo(componentName) {\n  return viewInfo => console.warn(`${componentName} updateViewInfo: ${viewInfo}`);\n}\n\nexport function createDefaultClearPleaseWait() {\n  return () => {};\n}\n\n\n/**\n * Copy a typed array into a new array buffer.\n * @param {Uint8Array} arr The typed array to be copied.\n * @returns {Uint8Array} The copied array.\n */\nexport function copyUint8Array(arr) {\n  const newBuffer = new ArrayBuffer(arr.buffer.byteLength);\n  const newArr = new Uint8Array(newBuffer);\n  newArr.set(arr);\n  return newArr;\n}\n\nexport function getNextNumberedNodeName(nodes, prefix) {\n  let i = 1;\n  if (nodes) {\n    // eslint-disable-next-line no-loop-func\n    while (nodes.find(n => n.name === `${prefix}${i}`)) {\n      // eslint-disable-next-line no-plusplus\n      i++;\n    }\n  }\n  return `${prefix}${i}`;\n}\n\n/**\n * Create a new selected cell set based on a cell selection.\n * @param {string[]} cellSelection An array of cell IDs.\n * @param {object[]} additionalCellSets The previous array of user-defined cell sets.\n * @param {function} setCellSetSelection The setter function for cell set selections.\n * @param {function} setAdditionalCellSets The setter function for user-defined cell sets.\n */\nexport function setCellSelection(cellSelection, additionalCellSets, cellSetColor, setCellSetSelection, setAdditionalCellSets, setCellSetColor, setCellColorEncoding, prefix = 'Selection ') {\n  const CELL_SELECTIONS_LEVEL_ZERO_NAME = 'My Selections';\n\n  const selectionsLevelZeroNode = additionalCellSets?.tree.find(\n    n => n.name === CELL_SELECTIONS_LEVEL_ZERO_NAME,\n  );\n  const nextAdditionalCellSets = {\n    version: HIERARCHICAL_SCHEMAS[SETS_DATATYPE_CELL].latestVersion,\n    datatype: SETS_DATATYPE_CELL,\n    tree: [...(additionalCellSets ? additionalCellSets.tree : [])],\n  };\n\n  const nextName = getNextNumberedNodeName(selectionsLevelZeroNode?.children, prefix);\n  let colorIndex = 0;\n  if (selectionsLevelZeroNode) {\n    colorIndex = selectionsLevelZeroNode.children.length;\n    selectionsLevelZeroNode.children.push({\n      name: nextName,\n      set: cellSelection.map(d => [d, null]),\n    });\n  } else {\n    nextAdditionalCellSets.tree.push({\n      name: CELL_SELECTIONS_LEVEL_ZERO_NAME,\n      children: [\n        {\n          name: nextName,\n          set: cellSelection.map(d => [d, null]),\n        },\n      ],\n    });\n  }\n  setAdditionalCellSets(nextAdditionalCellSets);\n  const nextPath = ['My Selections', nextName];\n  setCellSetColor([\n    ...(cellSetColor || []),\n    {\n      path: nextPath,\n      color: PALETTE[colorIndex % PALETTE.length],\n    },\n  ]);\n  setCellSetSelection([nextPath]);\n  setCellColorEncoding('cellSetSelection');\n}\n\nexport function mergeCellSets(cellSets, additionalCellSets) {\n  return {\n    version: HIERARCHICAL_SCHEMAS[SETS_DATATYPE_CELL].latestVersion,\n    datatype: SETS_DATATYPE_CELL,\n    tree: [\n      ...(cellSets ? cellSets.tree : []),\n      ...(additionalCellSets ? additionalCellSets.tree : []),\n    ],\n  };\n}\n\nexport function createWarningComponent(props) {\n  return () => {\n    const {\n      title,\n      message,\n    } = props;\n    return (\n      <div className={PRIMARY_CARD}>\n        <h1>{title}</h1>\n        <div>{message}</div>\n      </div>\n    );\n  };\n}\n\nexport function asEsModule(component) {\n  return {\n    __esModule: true,\n    default: component,\n  };\n}\n\n\nexport function formatBytes(bytes, decimals = 2) {\n  if (bytes === 0) return '0 Bytes';\n\n  const k = 1024;\n  const dm = decimals < 0 ? 0 : decimals;\n  const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n\n  const i = Math.floor(Math.log(bytes) / Math.log(k));\n\n  // eslint-disable-next-line no-restricted-properties\n  return `${parseFloat((bytes / Math.pow(k, i)).toFixed(dm))} ${sizes[i]}`;\n}\n\nexport const getStatsForResolution = (loader, resolution) => {\n  const { shape, labels } = loader[resolution];\n  const height = shape[labels.indexOf('y')];\n  const width = shape[labels.indexOf('x')];\n  const depth = shape[labels.indexOf('z')];\n  // eslint-disable-next-line no-bitwise\n  const depthDownsampled = Math.max(1, depth >> resolution);\n  // Check memory allocation limits for Float32Array (used in XR3DLayer for rendering)\n  const totalBytes = 4 * height * width * depthDownsampled;\n  return {\n    height, width, depthDownsampled, totalBytes,\n  };\n};\n\nexport const canLoadResolution = (loader, resolution) => {\n  const {\n    totalBytes, height, width, depthDownsampled,\n  } = getStatsForResolution(\n    loader,\n    resolution,\n  );\n  const maxHeapSize = window.performance?.memory\n    && window.performance?.memory?.jsHeapSizeLimit / 2;\n  const maxSize = maxHeapSize || (2 ** 31) - 1;\n  // 2048 is a normal texture size limit although some browsers go larger.\n  return (\n    totalBytes < maxSize\n    && height <= 2048\n    && depthDownsampled <= 2048\n    && width <= 2048\n    && depthDownsampled > 1\n  );\n};\n","module.exports = require(\"@luma.gl/constants\");","export default function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}","import _typeof from \"../../helpers/esm/typeof\";\nimport assertThisInitialized from \"./assertThisInitialized\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}","import getPrototypeOf from \"./getPrototypeOf\";\nimport isNativeReflectConstruct from \"./isNativeReflectConstruct\";\nimport possibleConstructorReturn from \"./possibleConstructorReturn\";\nexport default function _createSuper(Derived) {\n  return function () {\n    var Super = getPrototypeOf(Derived),\n        result;\n\n    if (isNativeReflectConstruct()) {\n      var NewTarget = getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return possibleConstructorReturn(this, result);\n  };\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","module.exports = require(\"lodash/isEqual\");","module.exports = require(\"@material-ui/core/styles\");","import cellSetsSchema from '../../schemas/cell-sets.schema.json';\nimport cellSetsTabularSchema from '../../schemas/cell-sets-tabular.schema.json';\n\nexport const FILE_EXTENSION_JSON = 'json';\nexport const MIME_TYPE_JSON = 'application/json';\n\nexport const FILE_EXTENSION_TABULAR = 'csv';\nexport const MIME_TYPE_TABULAR = 'text/csv';\nexport const SEPARATOR_TABULAR = ',';\n// The NA value below corresponds to the allowed string enum\n// value \"NA\" in the cell-sets-tabular JSON schema.\nexport const NA_VALUE_TABULAR = 'NA';\n\nexport const SETS_DATATYPE_CELL = 'cell';\nexport const HIERARCHICAL_SCHEMAS = {\n  cell: {\n    latestVersion: '0.1.3',\n    schema: cellSetsSchema,\n  },\n};\n\nexport const TABULAR_SCHEMAS = {\n  cell: {\n    schema: cellSetsTabularSchema,\n  },\n};\n","import {\n  useRef, useState, useEffect, useCallback, useMemo,\n} from 'react';\nimport debounce from 'lodash/debounce';\nimport { useGridResize, useEmitGridResize } from '../app/state/hooks';\nimport { VITESSCE_CONTAINER } from './classNames';\n\nfunction getWindowDimensions() {\n  const { innerWidth: width, innerHeight: height } = window;\n  return {\n    width,\n    height,\n  };\n}\n\nexport function useVitessceContainer(ref) {\n  return useCallback(() => {\n    if (ref.current) {\n      return ref.current.closest(`.${VITESSCE_CONTAINER}`);\n    }\n    return null;\n  }, [ref]);\n}\n\n/**\n * Custom hook, gets the full window dimensions.\n * @returns {array} `[width, height]` where width and height\n * are numbers.\n */\nexport function useWindowDimensions() {\n  const [windowDimensions, setWindowDimensions] = useState(\n    getWindowDimensions(),\n  );\n\n  useEffect(() => {\n    function handleResize() {\n      setWindowDimensions(getWindowDimensions());\n    }\n    const onResizeDebounced = debounce(handleResize, 100, { trailing: true });\n\n    window.addEventListener('resize', onResizeDebounced);\n    return () => window.removeEventListener('resize', onResizeDebounced);\n  }, []);\n\n  return windowDimensions;\n}\n\n/**\n * Custom hook, subscribes to GRID_RESIZE and window resize events.\n * @returns {array} `[width, height, containerRef]` where width and height\n * are numbers and containerRef is a React ref.\n */\nexport function useGridItemSize() {\n  const containerRef = useRef();\n\n  const [height, setHeight] = useState();\n  const [width, setWidth] = useState();\n\n  const resizeCount = useGridResize();\n  const incrementResizeCount = useEmitGridResize();\n\n  // On window resize events, increment the grid resize count.\n  useEffect(() => {\n    function onWindowResize() {\n      incrementResizeCount();\n    }\n    const onResizeDebounced = debounce(onWindowResize, 100, { trailing: true });\n    window.addEventListener('resize', onResizeDebounced);\n    onWindowResize();\n    return () => {\n      window.removeEventListener('resize', onResizeDebounced);\n    };\n  }, [incrementResizeCount]);\n\n  // On new grid resize counts, re-compute the component\n  // width/height.\n  useEffect(() => {\n    if (!containerRef.current) return;\n    const container = containerRef.current;\n    const containerRect = container.getBoundingClientRect();\n    setHeight(containerRect.height);\n    setWidth(containerRect.width);\n  }, [resizeCount]);\n\n  return [width, height, containerRef];\n}\n\n/**\n * Custom hook, subscribes to GRID_RESIZE and window resize events.\n * @returns {array} `[width, height, deckRef]` where width and height\n * are numbers and deckRef is a React ref to be used with\n * a <DeckGL/> element (or a forwardRef to one).\n */\nexport function useDeckCanvasSize() {\n  const deckRef = useRef();\n\n  const [height, setHeight] = useState();\n  const [width, setWidth] = useState();\n\n  const resizeCount = useGridResize();\n  const incrementResizeCount = useEmitGridResize();\n\n  // On window resize events, increment the grid resize count.\n  useEffect(() => {\n    function onWindowResize() {\n      incrementResizeCount();\n    }\n    const onResizeDebounced = debounce(onWindowResize, 100, { trailing: true });\n    window.addEventListener('resize', onResizeDebounced);\n    onWindowResize();\n    return () => {\n      window.removeEventListener('resize', onResizeDebounced);\n    };\n  }, [incrementResizeCount]);\n\n  // On new grid resize counts, re-compute the DeckGL canvas\n  // width/height.\n  useEffect(() => {\n    if (!deckRef.current) return;\n    const { canvas } = deckRef.current.deck;\n    const canvasRect = canvas.getBoundingClientRect();\n    setHeight(canvasRect.height);\n    setWidth(canvasRect.width);\n  }, [resizeCount]);\n\n  return [width, height, deckRef];\n}\n\n/**\n * This hook handles a boolean isReady value,\n * which only returns true once every item in the\n * input list has been marked as \"ready\".\n * @param {string[]} items The items to wait on.\n * Should be defined as a constant\n * (outside a function component / render function),\n * otherwise strange bugs may occur.\n * @returns {array} An array\n * [isReady, setItemIsReady, setItemIsNotReady, resetReadyItems]\n * where isReady is the boolean value,\n * setItemIsReady marks one item as ready,\n * setItemIsNotReady marks one item as not ready,\n * and resetReadyItem marks all items as waiting.\n */\nexport function useReady(supportedItems) {\n  const items = supportedItems;\n  const [waiting, setWaiting] = useState(items);\n\n  const setItemIsReady = useCallback((readyItem) => {\n    setWaiting((waitingItems) => {\n      const nextWaitingItems = waitingItems.filter(item => item !== readyItem);\n      // eslint-disable-next-line no-console\n      console.log(`cleared ${readyItem}; waiting on ${nextWaitingItems.length}: ${JSON.stringify(nextWaitingItems)}`);\n      return nextWaitingItems;\n    });\n  }, [setWaiting]);\n\n  const setItemIsNotReady = useCallback((notReadyItem) => {\n    setWaiting((waitingItems) => {\n      const nextWaitingItems = [...waitingItems, notReadyItem];\n      // eslint-disable-next-line no-console\n      console.log(`waiting on ${nextWaitingItems.length}: ${JSON.stringify(nextWaitingItems)}`);\n      return nextWaitingItems;\n    });\n  }, [setWaiting]);\n\n  const resetReadyItems = useCallback(() => {\n    setWaiting(items);\n    // eslint-disable-next-line no-console\n    console.log(`waiting on ${items.length}: ${JSON.stringify(items)}`);\n  }, [setWaiting, items]);\n\n  const isReady = waiting.length === 0;\n\n  return [isReady, setItemIsReady, setItemIsNotReady, resetReadyItems];\n}\n\n/**\n * This hook manages a list of URLs,\n * with adding and resetting helpers.\n * @returns {array} An array\n * [urls, addUrl, resetUrls]\n * where urls is the array of URL objects,\n * addUrl is a function for adding a URL to the array,\n * resetUrls is a function that clears the array.\n */\nexport function useUrls() {\n  const [urls, setUrls] = useState([]);\n\n  const addUrl = useCallback((url, name) => {\n    if (url) {\n      setUrls(prev => ([...prev, { url, name }]));\n    }\n  }, [setUrls]);\n\n  const resetUrls = useCallback(() => {\n    setUrls([]);\n  }, [setUrls]);\n\n  return [urls, addUrl, resetUrls];\n}\n\n/**\n * Custom hook, subscribes to the width and height of the closest .vitessce-container\n * element and updates upon window resize events.\n * @param {Ref} ref A React ref object within the `.vitessce-container`.\n * @returns {array} `[width, height]` where width and height\n * are numbers.\n */\nexport function useClosestVitessceContainerSize(ref) {\n  const [height, setHeight] = useState();\n  const [width, setWidth] = useState();\n\n  useEffect(() => {\n    function onWindowResize() {\n      if (ref.current) {\n        const {\n          clientHeight: componentHeight, clientWidth: componentWidth,\n        } = ref.current.closest('.vitessce-container');\n        setWidth(componentWidth);\n        setHeight(componentHeight);\n      }\n    }\n    const onResizeDebounced = debounce(onWindowResize, 100, { trailing: true });\n    window.addEventListener('resize', onResizeDebounced);\n    onWindowResize();\n    return () => {\n      window.removeEventListener('resize', onResizeDebounced);\n    };\n  }, [ref]);\n\n  return [width, height];\n}\n\nexport function useExpressionValueGetter({ attrs, expressionData }) {\n  // Get a mapping from cell ID to row index in the gene expression matrix.\n  const cellIdMap = useMemo(() => {\n    const result = {};\n    if (attrs && attrs.rows) {\n      // eslint-disable-next-line no-plusplus\n      for (let i = 0; i < attrs.rows.length; i++) {\n        result[attrs.rows[i]] = i;\n      }\n    }\n    return result;\n  }, [attrs]);\n\n  // Set up a getter function for gene expression values, to be used\n  // by the DeckGL layer to obtain values for instanced attributes.\n  const getExpressionValue = useCallback((entry) => {\n    const cellId = entry[0];\n    if (cellIdMap && expressionData && expressionData[0]) {\n      const cellIndex = cellIdMap[cellId];\n      const val = expressionData[0][cellIndex];\n      return val;\n    }\n    return 0;\n  }, [cellIdMap, expressionData]);\n  return getExpressionValue;\n}\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","module.exports = require(\"@deck.gl/core\");","import AbstractLoaderError from './AbstractLoaderError';\n\nexport default class LoaderValidationError extends AbstractLoaderError {\n  constructor(datasetType, datasetFileType, datasetUrl, reason) {\n    super(`Error while validating ${datasetType}.`);\n    this.name = 'LoaderValidationError';\n\n    this.datasetType = datasetType;\n    this.datasetFileType = datasetFileType;\n    this.datasetUrl = datasetUrl;\n    this.reason = reason;\n  }\n\n  warnInConsole() {\n    const {\n      datasetType, datasetUrl, reason,\n    } = this;\n    console.warn(\n      `${datasetType} from ${datasetUrl}: validation failed`,\n      JSON.stringify(reason, null, 2),\n    );\n  }\n}\n","import AbstractLoaderError from './AbstractLoaderError';\n\nexport default class LoaderNotFoundError extends AbstractLoaderError {\n  constructor(datasetType, datasetFileType, datasetUrl) {\n    super(`Error finding loader for ${datasetType}.`);\n    this.name = 'LoaderNotFoundError';\n\n    this.datasetType = datasetType;\n    this.datasetFileType = datasetFileType;\n    this.datasetUrl = datasetUrl;\n  }\n\n  warnInConsole() {\n    const {\n      datasetType, datasetFileType, datasetUrl,\n    } = this;\n    if (datasetFileType && datasetUrl) {\n      console.warn(\n        `${datasetType} from ${datasetUrl}: unable to find loader for fileType ${datasetFileType}`,\n      );\n    } else {\n      console.warn(\n        `${datasetType}: unable to find loader`,\n      );\n    }\n  }\n}\n","export { default as AbstractLoaderError } from './AbstractLoaderError';\nexport { default as LoaderValidationError } from './LoaderValidationError';\nexport { default as LoaderNotFoundError } from './LoaderNotFoundError';\n","module.exports = require(\"@hms-dbmi/viv\");","module.exports = require(\"@material-ui/core/Grid\");","/**\n * Constants representing names of coordination types,\n * to help prevent typos.\n */\nexport const COORDINATION_TYPES = {\n  DATASET: 'dataset',\n  EMBEDDING_TYPE: 'embeddingType',\n  EMBEDDING_ZOOM: 'embeddingZoom',\n  EMBEDDING_ROTATION: 'embeddingRotation',\n  EMBEDDING_TARGET_X: 'embeddingTargetX',\n  EMBEDDING_TARGET_Y: 'embeddingTargetY',\n  EMBEDDING_TARGET_Z: 'embeddingTargetZ',\n  EMBEDDING_CELL_SET_POLYGONS_VISIBLE: 'embeddingCellSetPolygonsVisible',\n  EMBEDDING_CELL_SET_LABELS_VISIBLE: 'embeddingCellSetLabelsVisible',\n  EMBEDDING_CELL_SET_LABEL_SIZE: 'embeddingCellSetLabelSize',\n  EMBEDDING_CELL_RADIUS: 'embeddingCellRadius',\n  EMBEDDING_CELL_OPACITY: 'embeddingCellOpacity',\n  EMBEDDING_CELL_RADIUS_MODE: 'embeddingCellRadiusMode',\n  EMBEDDING_CELL_OPACITY_MODE: 'embeddingCellOpacityMode',\n  SPATIAL_ZOOM: 'spatialZoom',\n  SPATIAL_ROTATION: 'spatialRotation',\n  SPATIAL_TARGET_X: 'spatialTargetX',\n  SPATIAL_TARGET_Y: 'spatialTargetY',\n  SPATIAL_TARGET_Z: 'spatialTargetZ',\n  SPATIAL_ROTATION_X: 'spatialRotationX',\n  SPATIAL_ROTATION_Y: 'spatialRotationY',\n  SPATIAL_ROTATION_Z: 'spatialRotationZ',\n  SPATIAL_ROTATION_ORBIT: 'spatialRotationOrbit',\n  SPATIAL_ORBIT_AXIS: 'spatialOrbitAxis',\n  SPATIAL_AXIS_FIXED: 'spatialAxisFixed',\n  HEATMAP_ZOOM_X: 'heatmapZoomX',\n  HEATMAP_ZOOM_Y: 'heatmapZoomY',\n  HEATMAP_TARGET_X: 'heatmapTargetX',\n  HEATMAP_TARGET_Y: 'heatmapTargetY',\n  CELL_FILTER: 'cellFilter',\n  CELL_HIGHLIGHT: 'cellHighlight',\n  CELL_SET_SELECTION: 'cellSetSelection',\n  CELL_SET_HIGHLIGHT: 'cellSetHighlight',\n  CELL_SET_COLOR: 'cellSetColor',\n  GENE_FILTER: 'geneFilter',\n  GENE_HIGHLIGHT: 'geneHighlight',\n  GENE_SELECTION: 'geneSelection',\n  GENE_EXPRESSION_COLORMAP: 'geneExpressionColormap',\n  GENE_EXPRESSION_TRANSFORM: 'geneExpressionTransform',\n  GENE_EXPRESSION_COLORMAP_RANGE: 'geneExpressionColormapRange',\n  CELL_COLOR_ENCODING: 'cellColorEncoding',\n  SPATIAL_RASTER_LAYERS: 'spatialRasterLayers',\n  SPATIAL_CELLS_LAYER: 'spatialCellsLayer',\n  SPATIAL_MOLECULES_LAYER: 'spatialMoleculesLayer',\n  SPATIAL_NEIGHBORHOODS_LAYER: 'spatialNeighborhoodsLayer',\n  GENOMIC_ZOOM_X: 'genomicZoomX',\n  GENOMIC_ZOOM_Y: 'genomicZoomY',\n  GENOMIC_TARGET_X: 'genomicTargetX',\n  GENOMIC_TARGET_Y: 'genomicTargetY',\n  ADDITIONAL_CELL_SETS: 'additionalCellSets',\n  MOLECULE_HIGHLIGHT: 'moleculeHighlight',\n};\n\n/**\n * Coordination types may have default values,\n * which can be defined here, and used by the\n * auto initialization strategy.\n */\nexport const DEFAULT_COORDINATION_VALUES = {\n  [COORDINATION_TYPES.EMBEDDING_ZOOM]: null,\n  [COORDINATION_TYPES.EMBEDDING_ROTATION]: 0,\n  [COORDINATION_TYPES.EMBEDDING_TARGET_X]: null,\n  [COORDINATION_TYPES.EMBEDDING_TARGET_Y]: null,\n  [COORDINATION_TYPES.EMBEDDING_TARGET_Z]: 0,\n  [COORDINATION_TYPES.EMBEDDING_CELL_SET_POLYGONS_VISIBLE]: false,\n  [COORDINATION_TYPES.EMBEDDING_CELL_SET_LABELS_VISIBLE]: false,\n  [COORDINATION_TYPES.EMBEDDING_CELL_SET_LABEL_SIZE]: 14,\n  [COORDINATION_TYPES.EMBEDDING_CELL_RADIUS]: 1,\n  [COORDINATION_TYPES.EMBEDDING_CELL_RADIUS_MODE]: 'auto',\n  [COORDINATION_TYPES.EMBEDDING_CELL_OPACITY]: 1,\n  [COORDINATION_TYPES.EMBEDDING_CELL_OPACITY_MODE]: 'auto',\n  [COORDINATION_TYPES.SPATIAL_ZOOM]: null,\n  [COORDINATION_TYPES.SPATIAL_ROTATION]: 0,\n  [COORDINATION_TYPES.SPATIAL_TARGET_X]: null,\n  [COORDINATION_TYPES.SPATIAL_TARGET_Y]: null,\n  [COORDINATION_TYPES.SPATIAL_TARGET_Z]: null,\n  [COORDINATION_TYPES.SPATIAL_ROTATION_X]: null,\n  [COORDINATION_TYPES.SPATIAL_ROTATION_Y]: null,\n  [COORDINATION_TYPES.SPATIAL_ROTATION_Z]: null,\n  [COORDINATION_TYPES.SPATIAL_AXIS_FIXED]: false,\n  [COORDINATION_TYPES.SPATIAL_ROTATION_ORBIT]: 0,\n  [COORDINATION_TYPES.SPATIAL_ORBIT_AXIS]: 'Y',\n  [COORDINATION_TYPES.SPATIAL_RASTER_LAYERS]: null,\n  [COORDINATION_TYPES.SPATIAL_CELLS_LAYER]: null,\n  [COORDINATION_TYPES.SPATIAL_MOLECULES_LAYER]: null,\n  [COORDINATION_TYPES.SPATIAL_NEIGHBORHOODS_LAYER]: null,\n  [COORDINATION_TYPES.HEATMAP_ZOOM_X]: 0,\n  [COORDINATION_TYPES.HEATMAP_ZOOM_Y]: 0,\n  [COORDINATION_TYPES.HEATMAP_TARGET_X]: 0,\n  [COORDINATION_TYPES.HEATMAP_TARGET_Y]: 0,\n  [COORDINATION_TYPES.GENE_EXPRESSION_COLORMAP]: 'plasma',\n  [COORDINATION_TYPES.GENE_EXPRESSION_COLORMAP_RANGE]: [0.0, 1.0],\n  [COORDINATION_TYPES.GENE_EXPRESSION_TRANSFORM]: null,\n  [COORDINATION_TYPES.GENE_FILTER]: null,\n  [COORDINATION_TYPES.GENE_HIGHLIGHT]: null,\n  [COORDINATION_TYPES.GENE_SELECTION]: null,\n  [COORDINATION_TYPES.CELL_FILTER]: null,\n  [COORDINATION_TYPES.CELL_HIGHLIGHT]: null,\n  [COORDINATION_TYPES.CELL_SET_SELECTION]: null,\n  [COORDINATION_TYPES.CELL_SET_HIGHLIGHT]: null,\n  [COORDINATION_TYPES.CELL_SET_COLOR]: null,\n  [COORDINATION_TYPES.CELL_COLOR_ENCODING]: 'cellSetSelection',\n  [COORDINATION_TYPES.GENOMIC_ZOOM_X]: 0,\n  [COORDINATION_TYPES.GENOMIC_ZOOM_Y]: 0,\n  [COORDINATION_TYPES.GENOMIC_TARGET_X]: 1549999999.5,\n  [COORDINATION_TYPES.GENOMIC_TARGET_Y]: 1549999999.5,\n  [COORDINATION_TYPES.ADDITIONAL_CELL_SETS]: null,\n  [COORDINATION_TYPES.MOLECULE_HIGHLIGHT]: null,\n};\n\n// The following coordination types should be\n// initialized to independent scopes when\n// initialized automatically.\n// These make the resulting view config\n// (after auto-initialization) behave\n// like \"legacy\" Vitessce (pre-coordination model).\nexport const AUTO_INDEPENDENT_COORDINATION_TYPES = [\n  COORDINATION_TYPES.HEATMAP_ZOOM_X,\n  COORDINATION_TYPES.HEATMAP_ZOOM_Y,\n  COORDINATION_TYPES.HEATMAP_TARGET_X,\n  COORDINATION_TYPES.HEATMAP_TARGET_Y,\n  COORDINATION_TYPES.EMBEDDING_ZOOM,\n  COORDINATION_TYPES.EMBEDDING_TARGET_X,\n  COORDINATION_TYPES.EMBEDDING_TARGET_Y,\n  COORDINATION_TYPES.EMBEDDING_TARGET_Z,\n  COORDINATION_TYPES.EMBEDDING_CELL_SET_POLYGONS_VISIBLE,\n  COORDINATION_TYPES.EMBEDDING_CELL_SET_LABELS_VISIBLE,\n  COORDINATION_TYPES.EMBEDDING_CELL_SET_LABEL_SIZE,\n  COORDINATION_TYPES.EMBEDDING_CELL_RADIUS,\n  COORDINATION_TYPES.EMBEDDING_CELL_OPACITY,\n];\n\n/**\n   * Mapping from component type to\n   * supported coordination object types.\n   * This mapping can be used to determine\n   * which pieces of state that a component will\n   * need to get/set.\n   * Keys here are the component registry keys.\n   */\nexport const COMPONENT_COORDINATION_TYPES = {\n  scatterplot: [\n    COORDINATION_TYPES.DATASET,\n    COORDINATION_TYPES.EMBEDDING_TYPE,\n    COORDINATION_TYPES.EMBEDDING_ZOOM,\n    COORDINATION_TYPES.EMBEDDING_ROTATION,\n    COORDINATION_TYPES.EMBEDDING_TARGET_X,\n    COORDINATION_TYPES.EMBEDDING_TARGET_Y,\n    COORDINATION_TYPES.EMBEDDING_TARGET_Z,\n    COORDINATION_TYPES.EMBEDDING_CELL_SET_POLYGONS_VISIBLE,\n    COORDINATION_TYPES.EMBEDDING_CELL_SET_LABELS_VISIBLE,\n    COORDINATION_TYPES.EMBEDDING_CELL_SET_LABEL_SIZE,\n    COORDINATION_TYPES.EMBEDDING_CELL_RADIUS,\n    COORDINATION_TYPES.EMBEDDING_CELL_RADIUS_MODE,\n    COORDINATION_TYPES.EMBEDDING_CELL_OPACITY,\n    COORDINATION_TYPES.EMBEDDING_CELL_OPACITY_MODE,\n    COORDINATION_TYPES.CELL_FILTER,\n    COORDINATION_TYPES.CELL_HIGHLIGHT,\n    COORDINATION_TYPES.CELL_SET_SELECTION,\n    COORDINATION_TYPES.CELL_SET_HIGHLIGHT,\n    COORDINATION_TYPES.CELL_SET_COLOR,\n    COORDINATION_TYPES.GENE_HIGHLIGHT,\n    COORDINATION_TYPES.GENE_SELECTION,\n    COORDINATION_TYPES.GENE_EXPRESSION_COLORMAP,\n    COORDINATION_TYPES.GENE_EXPRESSION_COLORMAP_RANGE,\n    COORDINATION_TYPES.CELL_COLOR_ENCODING,\n    COORDINATION_TYPES.ADDITIONAL_CELL_SETS,\n  ],\n  spatial: [\n    COORDINATION_TYPES.DATASET,\n    COORDINATION_TYPES.SPATIAL_ZOOM,\n    COORDINATION_TYPES.SPATIAL_ROTATION,\n    COORDINATION_TYPES.SPATIAL_RASTER_LAYERS,\n    COORDINATION_TYPES.SPATIAL_CELLS_LAYER,\n    COORDINATION_TYPES.SPATIAL_MOLECULES_LAYER,\n    COORDINATION_TYPES.SPATIAL_NEIGHBORHOODS_LAYER,\n    COORDINATION_TYPES.SPATIAL_TARGET_X,\n    COORDINATION_TYPES.SPATIAL_TARGET_Y,\n    COORDINATION_TYPES.SPATIAL_TARGET_Z,\n    COORDINATION_TYPES.SPATIAL_ROTATION_X,\n    COORDINATION_TYPES.SPATIAL_ROTATION_Y,\n    COORDINATION_TYPES.SPATIAL_ROTATION_Z,\n    COORDINATION_TYPES.SPATIAL_ROTATION_ORBIT,\n    COORDINATION_TYPES.SPATIAL_ORBIT_AXIS,\n    COORDINATION_TYPES.SPATIAL_AXIS_FIXED,\n    COORDINATION_TYPES.CELL_FILTER,\n    COORDINATION_TYPES.CELL_HIGHLIGHT,\n    COORDINATION_TYPES.CELL_SET_SELECTION,\n    COORDINATION_TYPES.CELL_SET_HIGHLIGHT,\n    COORDINATION_TYPES.CELL_SET_COLOR,\n    COORDINATION_TYPES.GENE_HIGHLIGHT,\n    COORDINATION_TYPES.GENE_SELECTION,\n    COORDINATION_TYPES.GENE_EXPRESSION_COLORMAP,\n    COORDINATION_TYPES.GENE_EXPRESSION_COLORMAP_RANGE,\n    COORDINATION_TYPES.CELL_COLOR_ENCODING,\n    COORDINATION_TYPES.ADDITIONAL_CELL_SETS,\n    COORDINATION_TYPES.MOLECULE_HIGHLIGHT,\n  ],\n  heatmap: [\n    COORDINATION_TYPES.DATASET,\n    COORDINATION_TYPES.HEATMAP_ZOOM_X,\n    COORDINATION_TYPES.HEATMAP_ZOOM_Y,\n    COORDINATION_TYPES.HEATMAP_TARGET_X,\n    COORDINATION_TYPES.HEATMAP_TARGET_Y,\n    COORDINATION_TYPES.CELL_FILTER,\n    COORDINATION_TYPES.CELL_HIGHLIGHT,\n    COORDINATION_TYPES.CELL_SET_SELECTION,\n    COORDINATION_TYPES.CELL_SET_HIGHLIGHT,\n    COORDINATION_TYPES.CELL_SET_COLOR,\n    COORDINATION_TYPES.GENE_FILTER,\n    COORDINATION_TYPES.GENE_HIGHLIGHT,\n    COORDINATION_TYPES.GENE_SELECTION,\n    COORDINATION_TYPES.GENE_EXPRESSION_COLORMAP,\n    COORDINATION_TYPES.GENE_EXPRESSION_COLORMAP_RANGE,\n    COORDINATION_TYPES.CELL_COLOR_ENCODING,\n    COORDINATION_TYPES.ADDITIONAL_CELL_SETS,\n  ],\n  cellSets: [\n    COORDINATION_TYPES.DATASET,\n    COORDINATION_TYPES.CELL_SET_SELECTION,\n    COORDINATION_TYPES.CELL_SET_HIGHLIGHT,\n    COORDINATION_TYPES.CELL_SET_COLOR,\n    COORDINATION_TYPES.CELL_COLOR_ENCODING,\n    COORDINATION_TYPES.ADDITIONAL_CELL_SETS,\n  ],\n  cellSetSizes: [\n    COORDINATION_TYPES.DATASET,\n    COORDINATION_TYPES.CELL_SET_SELECTION,\n    COORDINATION_TYPES.CELL_SET_HIGHLIGHT,\n    COORDINATION_TYPES.CELL_SET_COLOR,\n    COORDINATION_TYPES.ADDITIONAL_CELL_SETS,\n  ],\n  cellSetExpression: [\n    COORDINATION_TYPES.DATASET,\n    COORDINATION_TYPES.GENE_SELECTION,\n    COORDINATION_TYPES.GENE_EXPRESSION_TRANSFORM,\n    COORDINATION_TYPES.CELL_SET_SELECTION,\n    COORDINATION_TYPES.CELL_SET_HIGHLIGHT,\n    COORDINATION_TYPES.CELL_SET_COLOR,\n    COORDINATION_TYPES.ADDITIONAL_CELL_SETS,\n  ],\n  status: [\n    COORDINATION_TYPES.DATASET,\n    COORDINATION_TYPES.CELL_HIGHLIGHT,\n    COORDINATION_TYPES.GENE_HIGHLIGHT,\n    COORDINATION_TYPES.CELL_SET_HIGHLIGHT,\n    COORDINATION_TYPES.MOLECULE_HIGHLIGHT,\n  ],\n  genes: [\n    COORDINATION_TYPES.DATASET,\n    COORDINATION_TYPES.GENE_FILTER,\n    COORDINATION_TYPES.GENE_HIGHLIGHT,\n    COORDINATION_TYPES.GENE_SELECTION,\n    COORDINATION_TYPES.CELL_COLOR_ENCODING,\n  ],\n  expressionHistogram: [\n    COORDINATION_TYPES.DATASET,\n    COORDINATION_TYPES.GENE_SELECTION,\n  ],\n  layerController: [\n    COORDINATION_TYPES.DATASET,\n    COORDINATION_TYPES.SPATIAL_RASTER_LAYERS,\n    COORDINATION_TYPES.SPATIAL_CELLS_LAYER,\n    COORDINATION_TYPES.SPATIAL_MOLECULES_LAYER,\n    COORDINATION_TYPES.SPATIAL_NEIGHBORHOODS_LAYER,\n    COORDINATION_TYPES.SPATIAL_ZOOM,\n    COORDINATION_TYPES.SPATIAL_TARGET_X,\n    COORDINATION_TYPES.SPATIAL_TARGET_Y,\n    COORDINATION_TYPES.SPATIAL_TARGET_Z,\n    COORDINATION_TYPES.SPATIAL_ROTATION_X,\n    COORDINATION_TYPES.SPATIAL_ROTATION_Y,\n    COORDINATION_TYPES.SPATIAL_ROTATION_Z,\n    COORDINATION_TYPES.SPATIAL_ROTATION_ORBIT,\n    COORDINATION_TYPES.SPATIAL_ORBIT_AXIS,\n  ],\n  higlass: [\n    COORDINATION_TYPES.DATASET,\n    COORDINATION_TYPES.GENOMIC_ZOOM_X,\n    COORDINATION_TYPES.GENOMIC_ZOOM_Y,\n    COORDINATION_TYPES.GENOMIC_TARGET_X,\n    COORDINATION_TYPES.GENOMIC_TARGET_Y,\n    COORDINATION_TYPES.GENE_FILTER,\n    COORDINATION_TYPES.GENE_HIGHLIGHT,\n    COORDINATION_TYPES.GENE_SELECTION,\n  ],\n  genomicProfiles: [\n    COORDINATION_TYPES.DATASET,\n    COORDINATION_TYPES.GENOMIC_ZOOM_X,\n    COORDINATION_TYPES.GENOMIC_ZOOM_Y,\n    COORDINATION_TYPES.GENOMIC_TARGET_X,\n    COORDINATION_TYPES.GENOMIC_TARGET_Y,\n    COORDINATION_TYPES.GENE_FILTER,\n    COORDINATION_TYPES.GENE_HIGHLIGHT,\n    COORDINATION_TYPES.GENE_SELECTION,\n    COORDINATION_TYPES.CELL_SET_SELECTION,\n    COORDINATION_TYPES.CELL_SET_HIGHLIGHT,\n    COORDINATION_TYPES.CELL_SET_COLOR,\n    COORDINATION_TYPES.ADDITIONAL_CELL_SETS,\n  ],\n  description: [\n    COORDINATION_TYPES.DATASET,\n    COORDINATION_TYPES.SPATIAL_RASTER_LAYERS,\n  ],\n};\n","import { useState, useEffect } from 'react';\nimport equal from 'fast-deep-equal';\nimport { capitalize } from '../utils';\nimport { useSetWarning } from '../app/state/hooks';\nimport {\n  AbstractLoaderError,\n  LoaderNotFoundError,\n} from '../loaders/errors/index';\nimport {\n  DEFAULT_MOLECULES_LAYER,\n  DEFAULT_CELLS_LAYER,\n  DEFAULT_NEIGHBORHOODS_LAYER,\n} from './spatial/constants';\nimport { DEFAULT_COORDINATION_VALUES } from '../app/state/coordination';\n\n/**\n * Warn via publishing to the console\n * and to the global warning store.\n * @param {AbstractLoaderError} error An error instance.\n */\nfunction warn(error, setWarning) {\n  setWarning(error.message);\n  console.warn(error.message);\n  if (error instanceof AbstractLoaderError) {\n    error.warnInConsole();\n  }\n}\n\n/**\n * Initialize values in the coordination space.\n * @param {object} values Object where\n * keys are coordination type names,\n * values are initial coordination values.\n * @param {object} setters Object where\n * keys are coordination type names with the prefix 'set',\n * values are coordination setter functions.\n * @param {object} initialValues Object where\n * keys are coordination type names and keys are values.\n */\nfunction initCoordinationSpace(values, setters, initialValues) {\n  if (!values || !setters) {\n    return;\n  }\n  Object.entries(values).forEach(([coordinationType, value]) => {\n    const setterName = `set${capitalize(coordinationType)}`;\n    const setterFunc = setters[setterName];\n    const initialValue = initialValues && initialValues[coordinationType];\n    const shouldInit = equal(initialValue, DEFAULT_COORDINATION_VALUES[coordinationType]);\n    if (shouldInit && setterFunc) {\n      setterFunc(value);\n    }\n  });\n}\n\n/**\n * Get the dataset description string.\n * @param {object} loaders The object mapping\n * datasets and data types to loader instances.\n * @param {string} dataset The key for a dataset,\n * used to identify which loader to use.\n * @returns {array} [description] where\n * description is a string.\n */\nexport function useDescription(loaders, dataset) {\n  const [description, setDescription] = useState();\n\n  useEffect(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n\n    if (loaders[dataset].description) {\n      setDescription(loaders[dataset].description);\n    } else {\n      setDescription(null);\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  return [description];\n}\n\n/**\n * Get data from a cells data type loader,\n * updating \"ready\" and URL state appropriately.\n * Throw warnings if the data is marked as required.\n * Subscribe to loader updates.\n * @param {object} loaders The object mapping\n * datasets and data types to loader instances.\n * @param {string} dataset The key for a dataset,\n * used to identify which loader to use.\n * @param {function} setItemIsReady A function to call\n * when done loading.\n * @param {function} addUrl A function to call to update\n * the URL list.\n * @param {boolean} isRequired Should a warning be thrown if\n * loading is unsuccessful?\n * @param {object} coordinationSetters Object where\n * keys are coordination type names with the prefix 'set',\n * values are coordination setter functions.\n * @param {object} initialCoordinationValues Object where\n * keys are coordination type names with the prefix 'initialize',\n * values are initialization preferences as boolean values.\n * @returns {array} [cells, cellsCount] where\n * cells is an object and cellsCount is the\n * number of items in the cells object.\n */\nexport function useCellsData(\n  loaders, dataset, setItemIsReady, addUrl, isRequired,\n  coordinationSetters, initialCoordinationValues,\n) {\n  const [cells, setCells] = useState({});\n  const [cellsCount, setCellsCount] = useState(0);\n\n  const setWarning = useSetWarning();\n\n  useEffect(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n\n    if (loaders[dataset].loaders.cells) {\n      loaders[dataset].loaders.cells.load().catch(e => warn(e, setWarning)).then((payload) => {\n        if (!payload) return;\n        const { data, url, coordinationValues } = payload;\n        setCells(data);\n        setCellsCount(Object.keys(data).length);\n        addUrl(url, 'Cells');\n        // This dataset has cells, so set up the\n        // spatial cells layer coordination value\n        // using the cell layer singleton.\n        const coordinationValuesOrDefault = {\n          spatialCellsLayer: DEFAULT_CELLS_LAYER,\n          ...coordinationValues,\n        };\n        initCoordinationSpace(\n          coordinationValuesOrDefault,\n          coordinationSetters, initialCoordinationValues,\n        );\n        setItemIsReady('cells');\n      });\n    } else {\n      setCells({});\n      setCellsCount(0);\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, 'cells', null, null), setWarning);\n      } else {\n        setItemIsReady('cells');\n      }\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  return [cells, cellsCount];\n}\n\n/**\n * Get data from a cell sets data type loader,\n * updating \"ready\" and URL state appropriately.\n * Throw warnings if the data is marked as required.\n * Subscribe to loader updates.\n * @param {object} loaders The object mapping\n * datasets and data types to loader instances.\n * @param {string} dataset The key for a dataset,\n * used to identify which loader to use.\n * @param {function} setItemIsReady A function to call\n * when done loading.\n * @param {function} addUrl A function to call to update\n * the URL list.\n * @param {boolean} isRequired Should a warning be thrown if\n * loading is unsuccessful?\n * @param {object} coordinationSetters Object where\n * keys are coordination type names with the prefix 'set',\n * values are coordination setter functions.\n * @param {object} initialCoordinationValues Object where\n * keys are coordination type names and values are the current values.\n * @returns {array} [cellSets] where\n * cellSets is a sets tree object.\n */\nexport function useCellSetsData(\n  loaders, dataset, setItemIsReady, addUrl, isRequired,\n  coordinationSetters, initialCoordinationValues,\n) {\n  const [cellSets, setCellSets] = useState();\n\n  const setWarning = useSetWarning();\n\n  useEffect(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n\n    if (loaders[dataset].loaders['cell-sets']) {\n      // Load the data initially.\n      loaders[dataset].loaders['cell-sets'].load().catch(e => warn(e, setWarning)).then((payload) => {\n        if (!payload) return;\n        const { data, url, coordinationValues } = payload;\n        setCellSets(data);\n        addUrl(url, 'Cell Sets');\n        initCoordinationSpace(\n          coordinationValues,\n          coordinationSetters,\n          initialCoordinationValues,\n        );\n        setItemIsReady('cell-sets');\n      });\n    } else {\n      setCellSets(null);\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, 'cell-sets', null, null), setWarning);\n      } else {\n        setItemIsReady('cell-sets');\n      }\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  return [cellSets];\n}\n\n/**\n * Get (potentially filtered) data from an expression matrix data type loader,\n * updating \"ready\" and URL state appropriately.\n * Throw warnings if the data is marked as required.\n * Subscribe to loader updates.  Should not be used in conjunction (called in the same component)\n * with useExpressionAttrs as this returns a potentially filtered set of attributes\n * specifically for the returned expression data.\n * @param {object} loaders The object mapping\n * datasets and data types to loader instances.\n * @param {string} dataset The key for a dataset,\n * used to identify which loader to use.\n * @param {function} setItemIsReady A function to call\n * when done loading.\n * @param {function} addUrl A function to call to update\n * the URL list.\n * @param {boolean} isRequired Should a warning be thrown if\n * loading is unsuccessful?\n * @param {object} coordinationSetters Object where\n * keys are coordination type names with the prefix 'set',\n * values are coordination setter functions.\n * @param {object} initialCoordinationValues Object where\n * keys are coordination type names with the prefix 'initialize',\n * values are initialization preferences as boolean values.\n * @returns {array} [expressionMatrix] where\n * expressionMatrix is an object with\n * shape { cols, rows, matrix }.\n */\nexport function useExpressionMatrixData(\n  loaders, dataset, setItemIsReady, addUrl, isRequired,\n  coordinationSetters, initialCoordinationValues,\n) {\n  const [expressionMatrix, setExpressionMatrix] = useState();\n\n  const setWarning = useSetWarning();\n\n  useEffect(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n\n    if (loaders[dataset].loaders['expression-matrix']) {\n      loaders[dataset].loaders['expression-matrix'].load().catch(e => warn(e, setWarning)).then((payload) => {\n        if (!payload) return;\n        const { data, url, coordinationValues } = payload;\n        const [attrs, arr] = data;\n        setExpressionMatrix({\n          cols: attrs.cols,\n          rows: attrs.rows,\n          matrix: arr.data,\n        });\n        addUrl(url, 'Expression Matrix');\n        initCoordinationSpace(\n          coordinationValues,\n          coordinationSetters,\n          initialCoordinationValues,\n        );\n        setItemIsReady('expression-matrix');\n      });\n    } else {\n      setExpressionMatrix(null);\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, 'expression-matrix', null, null), setWarning);\n      } else {\n        setItemIsReady('expression-matrix');\n      }\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  return [expressionMatrix];\n}\n\n/**\n * Get data from the expression matrix data type loader for a given gene selection.\n * Throw warnings if the data is marked as required.\n * Subscribe to loader updates.\n * @param {object} loaders The object mapping\n * datasets and data types to loader instances.\n * @param {string} dataset The key for a dataset,\n * used to identify which loader to use.\n * @param {function} setItemIsReady A function to call\n * when done loading.\n * @param {boolean} isRequired Should a warning be thrown if\n * loading is unsuccessful?\n * @param {boolean} selection A list of gene names to get expression data for.\n * @returns {array} [geneData] where geneData is an array [Uint8Array, ..., Uint8Array]\n * for however many genes are in the selection.\n */\nexport function useGeneSelection(\n  loaders,\n  dataset,\n  setItemIsReady,\n  isRequired,\n  selection,\n  setItemIsNotReady,\n) {\n  const [geneData, setGeneData] = useState();\n\n  const setWarning = useSetWarning();\n\n  useEffect(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n    if (!selection) {\n      setItemIsReady('expression-matrix');\n      return;\n    }\n    const loader = loaders[dataset].loaders['expression-matrix'];\n    if (loader) {\n      setItemIsNotReady('expression-matrix');\n      const implementsGeneSelection = typeof loader.loadGeneSelection === 'function';\n      if (implementsGeneSelection) {\n        loaders[dataset].loaders['expression-matrix']\n          .loadGeneSelection({ selection })\n          .catch(e => warn(e, setWarning))\n          .then((payload) => {\n            if (!payload) return;\n            const { data } = payload;\n            setGeneData(data);\n            setItemIsReady('expression-matrix');\n          });\n      } else {\n        loader.load().catch(e => warn(e, setWarning)).then((payload) => {\n          if (!payload) return;\n          const { data } = payload;\n          const [attrs, { data: matrix }] = data;\n          const expressionDataForSelection = selection.map((sel) => {\n            const geneIndex = attrs.cols.indexOf(sel);\n            const numGenes = attrs.cols.length;\n            const numCells = attrs.rows.length;\n            const expressionData = new Uint8Array(numCells);\n            for (let cellIndex = 0; cellIndex < numCells; cellIndex += 1) {\n              expressionData[cellIndex] = matrix[cellIndex * numGenes + geneIndex];\n            }\n            return expressionData;\n          });\n          setGeneData(expressionDataForSelection);\n          setItemIsReady('expression-matrix');\n        });\n      }\n    } else {\n      setGeneData(null);\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, 'expression-matrix', null, null), setWarning);\n      } else {\n        setItemIsReady('expression-matrix');\n      }\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset, selection]);\n\n  return [geneData];\n}\n\n/**\n * Get the attributes for the expression matrix data type loader,\n * i.e names of cells and genes.\n * Throw warnings if the data is marked as required.\n * Subscribe to loader updates.  Should not be used in conjunction (called in the same component)\n * with useExpressionMatrixData.\n * @param {object} loaders The object mapping\n * datasets and data types to loader instances.\n * @param {string} dataset The key for a dataset,\n * used to identify which loader to use.\n * @param {function} setItemIsReady A function to call\n * when done loading.\n * @param {function} addUrl A function to call to update\n * the URL list.\n * @param {boolean} isRequired Should a warning be thrown if\n * loading is unsuccessful?\n * @returns {object} [attrs] { rows, cols } object containing cell and gene names.\n */\nexport function useExpressionAttrs(loaders, dataset, setItemIsReady, addUrl, isRequired) {\n  const [attrs, setAttrs] = useState();\n\n  const setWarning = useSetWarning();\n\n  useEffect(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n    const loader = loaders[dataset].loaders['expression-matrix'];\n    if (loader) {\n      const implementsLoadAttrs = typeof loader.loadAttrs === 'function';\n      if (implementsLoadAttrs) {\n        loader.loadAttrs().catch(e => warn(e, setWarning)).then((payload) => {\n          if (!payload) return;\n          const { data, url } = payload;\n          setAttrs(data);\n          addUrl(url, 'Expression Matrix');\n          setItemIsReady('expression-matrix');\n        });\n      } else {\n        loader.load().catch(e => warn(e, setWarning)).then((payload) => {\n          if (!payload) return;\n          const { data, url } = payload;\n          setAttrs(data[0]);\n          addUrl(url, 'Expression Matrix');\n          setItemIsReady('expression-matrix');\n        });\n      }\n    } else {\n      setAttrs(null);\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, 'expression-matrix', null, null), setWarning);\n      } else {\n        setItemIsReady('expression-matrix');\n      }\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  return [attrs];\n}\n\n/**\n * Get data from a molecules data type loader,\n * updating \"ready\" and URL state appropriately.\n * Throw warnings if the data is marked as required.\n * Subscribe to loader updates.\n * @param {object} loaders The object mapping\n * datasets and data types to loader instances.\n * @param {string} dataset The key for a dataset,\n * used to identify which loader to use.\n * @param {function} setItemIsReady A function to call\n * when done loading.\n * @param {function} addUrl A function to call to update\n * the URL list.\n * @param {boolean} isRequired Should a warning be thrown if\n * loading is unsuccessful?\n * @param {object} coordinationSetters Object where\n * keys are coordination type names with the prefix 'set',\n * values are coordination setter functions.\n * @param {object} initialCoordinationValues Object where\n * keys are coordination type names with the prefix 'initialize',\n * values are initialization preferences as boolean values.\n * @returns {array} [molecules, moleculesCount, locationsCount] where\n * molecules is an object,\n * moleculesCount is the number of unique molecule types, and\n * locationsCount is the number of molecules.\n */\nexport function useMoleculesData(\n  loaders, dataset, setItemIsReady, addUrl, isRequired,\n  coordinationSetters, initialCoordinationValues,\n) {\n  const [molecules, setMolecules] = useState();\n  const [moleculesCount, setMoleculesCount] = useState(0);\n  const [locationsCount, setLocationsCount] = useState(0);\n\n  const setWarning = useSetWarning();\n\n  useEffect(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n\n    if (loaders[dataset].loaders.molecules) {\n      loaders[dataset].loaders.molecules.load().catch(e => warn(e, setWarning)).then((payload) => {\n        if (!payload) return;\n        const { data, url, coordinationValues } = payload;\n        setMolecules(data);\n        setMoleculesCount(Object.keys(data).length);\n        setLocationsCount(Object.values(data)\n          .map(l => l.length)\n          .reduce((a, b) => a + b, 0));\n        addUrl(url, 'Molecules');\n        const coordinationValuesOrDefault = {\n          spatialMoleculesLayer: DEFAULT_MOLECULES_LAYER,\n          ...coordinationValues,\n        };\n        initCoordinationSpace(\n          coordinationValuesOrDefault,\n          coordinationSetters,\n          initialCoordinationValues,\n        );\n        setItemIsReady('molecules');\n      });\n    } else {\n      setMolecules({});\n      setMoleculesCount(0);\n      setLocationsCount(0);\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, 'molecules', null, null), setWarning);\n      } else {\n        setItemIsReady('molecules');\n      }\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  return [molecules, moleculesCount, locationsCount];\n}\n\n/**\n * Get data from a neighborhoods data type loader,\n * updating \"ready\" and URL state appropriately.\n * Throw warnings if the data is marked as required.\n * Subscribe to loader updates.\n * @param {object} loaders The object mapping\n * datasets and data types to loader instances.\n * @param {string} dataset The key for a dataset,\n * used to identify which loader to use.\n * @param {function} setItemIsReady A function to call\n * when done loading.\n * @param {function} addUrl A function to call to update\n * the URL list.\n * @param {boolean} isRequired Should a warning be thrown if\n * loading is unsuccessful?\n * @param {object} coordinationSetters Object where\n * keys are coordination type names with the prefix 'set',\n * values are coordination setter functions.\n * @param {object} initialCoordinationValues Object where\n * keys are coordination type names with the prefix 'initialize',\n * values are initialization preferences as boolean values.\n * @returns {array} [neighborhoods] where\n * neighborhoods is an object.\n */\nexport function useNeighborhoodsData(\n  loaders, dataset, setItemIsReady, addUrl, isRequired,\n  coordinationSetters, initialCoordinationValues,\n) {\n  const [neighborhoods, setNeighborhoods] = useState();\n\n  const setWarning = useSetWarning();\n\n  useEffect(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n\n    if (loaders[dataset].loaders.neighborhoods) {\n      loaders[dataset].loaders.neighborhoods.load().catch(e => warn(e, setWarning))\n        .then((payload) => {\n          if (!payload) return;\n          const { data, url, coordinationValues } = payload;\n          setNeighborhoods(data);\n          addUrl(url, 'Neighborhoods');\n          const coordinationValuesOrDefault = {\n            spatialNeighborhoodsLayer: DEFAULT_NEIGHBORHOODS_LAYER,\n            ...coordinationValues,\n          };\n          initCoordinationSpace(\n            coordinationValuesOrDefault,\n            coordinationSetters,\n            initialCoordinationValues,\n          );\n          setItemIsReady('neighborhoods');\n        });\n    } else {\n      setNeighborhoods({});\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, 'neighborhoods', null, null), setWarning);\n      } else {\n        setItemIsReady('neighborhoods');\n      }\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  return [neighborhoods];\n}\n\n/**\n * Get data from a raster data type loader,\n * updating \"ready\" and URL state appropriately.\n * Throw warnings if the data is marked as required.\n * Subscribe to loader updates.\n * @param {object} loaders The object mapping\n * datasets and data types to loader instances.\n * @param {string} dataset The key for a dataset,\n * used to identify which loader to use.\n * @param {function} setItemIsReady A function to call\n * when done loading.\n * @param {function} addUrl A function to call to update\n * the URL list.\n * @param {boolean} isRequired Should a warning be thrown if\n * loading is unsuccessful?\n * @param {object} coordinationSetters Object where\n * keys are coordination type names with the prefix 'set',\n * values are coordination setter functions.\n * @param {object} initialCoordinationValues Object where\n * keys are coordination type names with the prefix 'initialize',\n * values are initialization preferences as boolean values.\n * @returns {array} [raster, imageLayerLoaders, imageLayerMeta] where\n * raster is an object,\n * imageLayerLoaders is an object, and\n * imageLayerMeta is an object.\n */\nexport function useRasterData(\n  loaders, dataset, setItemIsReady, addUrl, isRequired,\n  coordinationSetters, initialCoordinationValues,\n) {\n  const [raster, setRaster] = useState();\n  // Since we want the image layer / channel definitions to come from the\n  // coordination space stored as JSON in the view config,\n  // we need to set up a separate state variable here to store the\n  // non-JSON objects, such as layer loader instances.\n  const [imageLayerLoaders, setImageLayerLoaders] = useState([]);\n  const [imageLayerMeta, setImageLayerMeta] = useState([]);\n\n  const setWarning = useSetWarning();\n\n  useEffect(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n\n    if (loaders[dataset].loaders.raster) {\n      loaders[dataset].loaders.raster.load().catch(e => warn(e, setWarning)).then((payload) => {\n        if (!payload) return;\n        const { data, url: urls, coordinationValues } = payload;\n        setRaster(data);\n        urls.forEach(([url, name]) => {\n          addUrl(url, name);\n        });\n        const { loaders: nextImageLoaders, meta: nextImageMeta } = data;\n        setImageLayerLoaders(nextImageLoaders);\n        setImageLayerMeta(nextImageMeta);\n        initCoordinationSpace(\n          coordinationValues,\n          coordinationSetters,\n          initialCoordinationValues,\n        );\n        setItemIsReady('raster');\n      });\n    } else {\n      // There was no raster loader for this dataset,\n      // and raster should be optional.\n      setImageLayerLoaders([]);\n      setImageLayerMeta([]);\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, 'raster', null, null), setWarning);\n      } else {\n        setItemIsReady('raster');\n      }\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n  return [raster, imageLayerLoaders, imageLayerMeta];\n}\n\n/**\n * Get data from a genomic-profiles data type loader,\n * updating \"ready\" and URL state appropriately.\n * Throw warnings if the data is marked as required.\n * Subscribe to loader updates.\n * @param {object} loaders The object mapping\n * datasets and data types to loader instances.\n * @param {string} dataset The key for a dataset,\n * used to identify which loader to use.\n * @param {function} setItemIsReady A function to call\n * when done loading.\n * @param {function} addUrl A function to call to update\n * the URL list.\n * @param {boolean} isRequired Should a warning be thrown if\n * loading is unsuccessful?\n * @param {object} coordinationSetters Object where\n * keys are coordination type names with the prefix 'set',\n * values are coordination setter functions.\n * @param {object} initialCoordinationValues Object where\n * keys are coordination type names with the prefix 'initialize',\n * values are initialization preferences as boolean values.\n * @returns {array} [neighborhoods] where\n * neighborhoods is an object.\n */\nexport function useGenomicProfilesData(\n  loaders, dataset, setItemIsReady, addUrl, isRequired,\n  coordinationSetters, initialCoordinationValues,\n) {\n  const [genomicProfilesAttrs, setGenomicProfilesAttrs] = useState();\n\n  const setWarning = useSetWarning();\n\n  useEffect(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n\n    if (loaders[dataset].loaders['genomic-profiles']) {\n      loaders[dataset].loaders['genomic-profiles'].load().catch(e => warn(e, setWarning))\n        .then((payload) => {\n          if (!payload) return;\n          const { data, url, coordinationValues } = payload;\n          setGenomicProfilesAttrs(data);\n          addUrl(url);\n          initCoordinationSpace(\n            coordinationValues,\n            coordinationSetters,\n            initialCoordinationValues,\n          );\n          setItemIsReady('genomic-profiles');\n        });\n    } else {\n      setGenomicProfilesAttrs(null);\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, 'genomic-profiles', null, null), setWarning);\n      } else {\n        setItemIsReady('genomic-profiles');\n      }\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  return [genomicProfilesAttrs];\n}\n","export const TOOLTIP_ANCESTOR = 'tooltip-ancestor';\nconst CARD = `card card-body my-2 ${TOOLTIP_ANCESTOR}`;\nexport const PRIMARY_CARD = `${CARD} bg-primary`;\nexport const SECONDARY_CARD = `${CARD} bg-secondary`;\nexport const BLACK_CARD = `${CARD} bg-black`;\nexport const TITLE_CARD = 'title';\nexport const SCROLL_CARD = `${PRIMARY_CARD} scroll`;\nexport const VITESSCE_CONTAINER = 'vitessce-container';\n","import { RENDERING_MODES } from '@hms-dbmi/viv';\n\nexport const GLOBAL_LABELS = ['z', 't'];\n\nexport const DEFAULT_RASTER_DOMAIN_TYPE = 'Min/Max';\n\nexport const DEFAULT_RASTER_LAYER_PROPS = {\n  visible: true,\n  colormap: null,\n  opacity: 1,\n  domainType: DEFAULT_RASTER_DOMAIN_TYPE,\n  transparentColor: [0, 0, 0],\n  renderingMode: RENDERING_MODES.ADDITIVE,\n  use3d: false,\n};\n\nexport const DEFAULT_MOLECULES_LAYER = {\n  opacity: 1, radius: 20, visible: true,\n};\nexport const DEFAULT_CELLS_LAYER = {\n  opacity: 1, radius: 50, visible: true, stroked: false,\n};\nexport const DEFAULT_NEIGHBORHOODS_LAYER = {\n  visible: false,\n};\n\nexport const DEFAULT_LAYER_TYPE_ORDERING = [\n  'molecules',\n  'cells',\n  'neighborhoods',\n  'raster',\n];\n","module.exports = require(\"zustand\");","// List of the GLSL colormaps available,\n// to validate against before string replacing.\nexport const GLSL_COLORMAPS = [\n  'plasma',\n  'viridis',\n  'jet',\n];\nexport const GLSL_COLORMAP_DEFAULT = 'plasma';\nexport const COLORMAP_SHADER_PLACEHOLDER = 'COLORMAP_FUNC';\n","module.exports = require(\"lodash/debounce\");","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","/**\n * A loader error ancestor class containing a default constructor\n * and a stub for the required warnInConsole() method.\n */\nexport default class AbstractLoaderError {\n  constructor(message) {\n    this.message = message;\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  warnInConsole() {\n    throw new Error('The warnInConsole() method has not been implemented.');\n  }\n}\n","import React from 'react';\nimport CircularProgress from '@material-ui/core/CircularProgress';\n\nexport default function LoadingIndicator() {\n  return (\n    <div className=\"loading-indicator-backdrop\">\n      <div className=\"loading-indicator-container\">\n        <CircularProgress />\n      </div>\n    </div>\n  );\n}\n","import React, { useState } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport CloudDownloadIcon from '@material-ui/icons/CloudDownload';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport IconButton from '@material-ui/core/IconButton';\nimport Link from '@material-ui/core/Link';\nimport ArrowDropDownIcon from '@material-ui/icons/ArrowDropDown';\nimport ArrowDropUpIcon from '@material-ui/icons/ArrowDropUp';\nimport SettingsIcon from '@material-ui/icons/Settings';\nimport CloseIcon from '@material-ui/icons/Close';\n\nimport { SCROLL_CARD, BLACK_CARD, SECONDARY_CARD } from './classNames';\nimport LoadingIndicator from './LoadingIndicator';\nimport { PopperMenu } from './shared-mui/components';\n\nconst useStyles = makeStyles(theme => ({\n  iconButton: {\n    border: 'none',\n    marginLeft: 0,\n    background: 'none',\n    color: theme.palette.primaryForeground,\n    paddingLeft: '0.25em',\n    paddingRight: '0.25em',\n    borderRadius: '2px',\n    '&:hover': {\n      backgroundColor: theme.palette.primaryBackgroundLight,\n    },\n    '&:first-child': {\n      marginLeft: '0.25em',\n    },\n    '&:last-child': {\n      marginRight: '0.25em',\n    },\n    '& svg': {\n      width: '0.7em',\n      height: '0.7em',\n      verticalAlign: 'middle',\n      overflow: 'visible',\n    },\n  },\n  downloadLink: {\n    color: theme.palette.primaryForeground,\n  },\n}));\n\nfunction SettingsIconWithArrow({ open }) {\n  return (\n    <>\n      <SettingsIcon />\n      {open ? <ArrowDropUpIcon /> : <ArrowDropDownIcon />}\n    </>\n  );\n}\n\nfunction PlotOptions(props) {\n  const { options } = props;\n  const [open, setOpen] = useState(false);\n  const classes = useStyles();\n  return (\n    <PopperMenu\n      open={open}\n      setOpen={setOpen}\n      buttonIcon={<SettingsIconWithArrow open={open} />}\n      buttonClassName={classes.iconButton}\n      placement=\"bottom-end\"\n    >\n      {options}\n    </PopperMenu>\n  );\n}\n\nfunction CloudDownloadIconWithArrow({ open }) {\n  return (\n    <>\n      <CloudDownloadIcon />\n      {open ? <ArrowDropUpIcon /> : <ArrowDropDownIcon />}\n    </>\n  );\n}\n\nfunction DownloadOptions(props) {\n  const { urls } = props;\n  const [open, setOpen] = useState(false);\n  const classes = useStyles();\n  return (\n    <PopperMenu\n      open={open}\n      setOpen={setOpen}\n      buttonIcon={<CloudDownloadIconWithArrow open={open} />}\n      buttonClassName={classes.iconButton}\n      placement=\"bottom-end\"\n    >\n      {urls.map(({ url, name }) => (\n        <MenuItem dense key={url}>\n          <Link underline=\"none\" href={url} target=\"_blank\" rel=\"noopener\" className={classes.downloadLink}>\n            Download {name}\n          </Link>\n        </MenuItem>\n      ))}\n    </PopperMenu>\n  );\n}\n\nfunction ClosePaneButton(props) {\n  const { removeGridComponent } = props;\n  const classes = useStyles();\n  return (\n    <IconButton\n      onClick={removeGridComponent}\n      size=\"small\"\n      className={classes.iconButton}\n      title=\"close\"\n    >\n      <CloseIcon />\n    </IconButton>\n  );\n}\n\nexport default function TitleInfo(props) {\n  const {\n    title, info, children, isScroll, isSpatial, removeGridComponent, urls,\n    isReady, options,\n  } = props;\n  // eslint-disable-next-line no-nested-ternary\n  const childClassName = isScroll ? SCROLL_CARD : (isSpatial ? BLACK_CARD : SECONDARY_CARD);\n  return (\n    // d-flex without wrapping div is not always full height; I don't understand the root cause.\n    <>\n      <div className=\"title\">\n        <div className=\"title-left\">\n          {title}\n        </div>\n        <div className=\"title-info\" title={info}>\n          {info}\n        </div>\n        <div className=\"title-buttons\">\n          { options && (\n            <PlotOptions\n              options={options}\n            />\n          ) }\n          {urls && urls.length > 0 && (\n            <DownloadOptions\n              urls={urls}\n            />\n          )}\n          <ClosePaneButton\n            removeGridComponent={removeGridComponent}\n          />\n        </div>\n      </div>\n      <div className={childClassName}>\n        { !isReady && <LoadingIndicator /> }\n        {children}\n      </div>\n    </>\n    // \"pl-2\" only matters when the window is very narrow.\n  );\n}\n","import arrayLikeToArray from \"./arrayLikeToArray\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(n);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","module.exports = require(\"@material-ui/core/IconButton\");","module.exports = require(\"@material-ui/core/colors\");","module.exports = require(\"@material-ui/core/Slider\");","module.exports = require(\"lodash/range\");","import React, { useRef } from 'react';\nimport Paper from '@material-ui/core/Paper';\nimport Popper from '@material-ui/core/Popper';\nimport IconButton from '@material-ui/core/IconButton';\nimport MenuList from '@material-ui/core/MenuList';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport Fade from '@material-ui/core/Fade';\nimport { useVitessceContainer } from '../hooks';\nimport { styles } from './styles';\n\nexport function MuiSpan(props) {\n  const { children } = props;\n  const classes = styles();\n  return <span className={classes.span}>{children}</span>;\n}\n\nexport function PopperMenu(props) {\n  const {\n    buttonIcon,\n    open,\n    setOpen,\n    children,\n    buttonClassName,\n  } = props;\n  const classes = styles();\n\n  const anchorRef = useRef();\n\n  const handleClick = () => {\n    setOpen(prev => !prev);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  const id = open ? 'v-popover-menu' : undefined;\n\n  const getTooltipContainer = useVitessceContainer(anchorRef);\n\n  return (\n    <div ref={anchorRef} className={classes.container}>\n      <IconButton\n        aria-describedby={id}\n        onClick={handleClick}\n        size=\"small\"\n        className={buttonClassName}\n      >\n        {buttonIcon}\n      </IconButton>\n      <Popper\n        id={id}\n        open={open}\n        anchorEl={anchorRef && anchorRef.current}\n        container={getTooltipContainer}\n        onClose={handleClose}\n        placement=\"bottom-end\"\n        transition\n      >\n        {({ TransitionProps }) => (\n          <ClickAwayListener onClickAway={handleClose}>\n            <Fade {...TransitionProps} timeout={100}>\n              <Paper elevation={4} className={classes.paper}>\n                <MenuList>{children}</MenuList>\n              </Paper>\n            </Fade>\n          </ClickAwayListener>\n        )}\n      </Popper>\n    </div>\n  );\n}\n","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","module.exports = require(\"d3-array\");","module.exports = require(\"@material-ui/core/Paper\");","module.exports = require(\"@material-ui/core/MenuItem\");","module.exports = require(\"zustand/context\");","module.exports = require(\"zustand/shallow\");","import { makeStyles, withStyles } from '@material-ui/core/styles';\nimport ExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary';\nimport ExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport Slider from '@material-ui/core/Slider';\nimport Grid from '@material-ui/core/Grid';\n\nexport const useSelectStyles = makeStyles(() => ({\n  selectRoot: {\n    padding: 0,\n    height: 'auto',\n    margin: '4px 0',\n  },\n}));\n\nexport const useOptionStyles = withStyles(theme => ({\n  paper: {\n    backgroundColor: theme.palette.background.paper,\n  },\n  span: {\n    width: '70px',\n    textAlign: 'center',\n    paddingLeft: '2px',\n    paddingRight: '2px',\n  },\n  colors: {\n    '&:hover': {\n      backgroundColor: 'transparent',\n    },\n    paddingLeft: '2px',\n    paddingRight: '2px',\n  },\n  popper: {\n    zIndex: 4,\n  },\n}));\n\nconst sharedControllerStyles = {\n  width: '100%',\n  flexDirection: 'column',\n};\n\nexport const useControllerSectionStyles = makeStyles(() => ({\n  root: {\n    ...sharedControllerStyles,\n    padding: '0px 8px',\n  },\n}));\n\nexport const StyledExpansionPanelDetails = withStyles(() => ({\n  root: {\n    ...sharedControllerStyles,\n    padding: '8px 8px 24px 8px',\n  },\n}))(ExpansionPanelDetails);\n\nexport const StyledExpansionPanelSummary = withStyles(theme => ({\n  root: {\n    padding: '0px 8px',\n  },\n  content: {\n    margin: '4px 0px',\n    minWidth: '0px',\n  },\n  expanded: {\n    marginBottom: theme.spacing(-3),\n    top: theme.spacing(-1),\n  },\n  expandIcon: {\n    '&$expanded': {\n      top: theme.spacing(-1.3),\n    },\n  },\n}))(ExpansionPanelSummary);\n\nexport const StyledInputLabel = withStyles(() => ({\n  root: {\n    fontSize: '14px',\n  },\n}))(InputLabel);\n\nexport const OverflowEllipsisGrid = withStyles(() => ({\n  item: {\n    width: '100%',\n    overflow: 'hidden',\n    whiteSpace: 'nowrap',\n    textOverflow: 'ellipsis',\n  },\n}))(Grid);\n\nexport const StyledSelectionSlider = withStyles(() => ({\n  root: {\n    marginTop: '7px',\n  },\n  markActive: {\n    backgroundColor: 'rgba(128, 128, 128, 0.7)',\n  },\n}))(Slider);\n","module.exports = require(\"mathjs\");","module.exports = require(\"@material-ui/core/Popper\");","import getPrototypeOf from \"./getPrototypeOf\";\nexport default function _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}","import superPropBase from \"./superPropBase\";\nexport default function _get(target, property, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    _get = Reflect.get;\n  } else {\n    _get = function _get(target, property, receiver) {\n      var base = superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}","import { makeStyles, createMuiTheme } from '@material-ui/core/styles';\nimport { grey } from '@material-ui/core/colors';\n\nexport const styles = makeStyles(() => ({\n  paper: {\n    maxHeight: 200,\n    overflow: 'auto',\n  },\n  container: {\n    position: 'relative',\n    left: 0,\n    top: 0,\n  },\n  span: {\n    width: '70px',\n    textAlign: 'center',\n    paddingLeft: '2px',\n    paddingRight: '2px',\n  },\n}));\n\nexport const muiTheme = {\n  dark: createMuiTheme({\n    palette: {\n      type: 'dark',\n      primary: grey,\n      secondary: grey,\n      primaryBackground: '#222222',\n      primaryBackgroundHighlight: '#000000',\n      primaryBackgroundInput: '#D3D3D3',\n      primaryBackgroundDim: '#333333',\n      primaryBackgroundLight: '#757575',\n      primaryForeground: '#D3D3D3',\n      primaryForegroundDim: '#000000',\n      primaryForegroundActive: '#9bb7d6',\n      secondaryBackground: '#000000',\n      secondaryBackgroundDim: '#444444',\n      secondaryForeground: '#D3D3D3',\n    },\n    props: {\n      MuiButtonBase: {\n        disableRipple: true,\n      },\n    },\n  }),\n  light: createMuiTheme({\n    palette: {\n      type: 'light',\n      primary: grey,\n      secondary: grey,\n      primaryBackground: '#F1F1F1',\n      primaryBackgroundHighlight: '#FFFFFF',\n      primaryBackgroundInput: '#FFFFFF',\n      primaryBackgroundDim: '#8A8A8A',\n      primaryBackgroundLight: '#e0e0e0',\n      primaryForeground: '#333333',\n      primaryForegroundDim: '#808080',\n      primaryForegroundActive: '#0074D9',\n      secondaryBackground: '#F1F1F1',\n      secondaryBackgroundDim: '#C0C0C0',\n      secondaryForeground: '#222222',\n    },\n    props: {\n      MuiButtonBase: {\n        disableRipple: true,\n      },\n    },\n  }),\n};\n","module.exports = require(\"math.gl\");","module.exports = require(\"@material-ui/icons/ArrowDropDown\");","module.exports = require(\"@material-ui/icons/ArrowDropUp\");","import { getChannelStats } from '@hms-dbmi/viv';\nimport { Matrix4 } from 'math.gl';\n\nasync function getSingleSelectionStats2D({ loader, selection }) {\n  const data = Array.isArray(loader) ? loader[loader.length - 1] : loader;\n  const raster = await data.getRaster({ selection });\n  const selectionStats = getChannelStats(raster.data);\n  const { domain, contrastLimits: slider } = selectionStats;\n  return { domain, slider };\n}\n\nasync function getSingleSelectionStats3D({ loader, selection }) {\n  const lowResSource = loader[loader.length - 1];\n  const { shape, labels } = lowResSource;\n  // eslint-disable-next-line no-bitwise\n  const sizeZ = shape[labels.indexOf('z')] >> (loader.length - 1);\n  const raster0 = await lowResSource.getRaster({\n    selection: { ...selection, z: 0 },\n  });\n  const rasterMid = await lowResSource.getRaster({\n    selection: { ...selection, z: Math.floor(sizeZ / 2) },\n  });\n  const rasterTop = await lowResSource.getRaster({\n    selection: { ...selection, z: Math.max(0, sizeZ - 1) },\n  });\n  const stats0 = getChannelStats(raster0.data);\n  const statsMid = getChannelStats(rasterMid.data);\n  const statsTop = getChannelStats(rasterTop.data);\n  return {\n    domain: [\n      Math.min(stats0.domain[0], statsMid.domain[0], statsTop.domain[0]),\n      Math.max(stats0.domain[1], statsMid.domain[1], statsTop.domain[1]),\n    ],\n    slider: [\n      Math.min(\n        stats0.contrastLimits[0],\n        statsMid.contrastLimits[0],\n        statsTop.contrastLimits[0],\n      ),\n      Math.max(\n        stats0.contrastLimits[1],\n        statsMid.contrastLimits[1],\n        statsTop.contrastLimits[1],\n      ),\n    ],\n  };\n}\n\n/**\n * Get bounding cube for a given loader i.e [[0, width], [0, height], [0, depth]]\n * @param {Object} loader PixelSource|PixelSource[]\n * @param {[]} selection Selection for stats.\n * @param {boolean} use3d Whether or not to get 3d stats.\n * @returns {Object} { domains, sliders }\n */\nexport const getSingleSelectionStats = async ({ loader, selection, use3d }) => {\n  const getStats = use3d\n    ? getSingleSelectionStats3D\n    : getSingleSelectionStats2D;\n  return getStats({ loader, selection });\n};\n\nexport const getMultiSelectionStats = async ({ loader, selections, use3d }) => {\n  const stats = await Promise.all(\n    selections.map(selection => getSingleSelectionStats({ loader, selection, use3d })),\n  );\n  const domains = stats.map(stat => stat.domain);\n  const sliders = stats.map(stat => stat.slider);\n  return { domains, sliders };\n};\n\n/**\n * Get physical size scaling Matrix4\n * @param {Object} loader PixelSource\n * @returns {Object} matrix\n */\nexport function getPhysicalSizeScalingMatrix(loader) {\n  const { x, y, z } = loader?.meta?.physicalSizes ?? {};\n  if (x?.size && y?.size && z?.size) {\n    const min = Math.min(z.size, x.size, y.size);\n    const ratio = [x.size / min, y.size / min, z.size / min];\n    return new Matrix4().scale(ratio);\n  }\n  return new Matrix4().identity();\n}\n\n/**\n * Get bounding cube for a given loader\n * @param {Object} loader PixelSource|PixelSource[]\n * @returns {Array} [0, width], [0, height], [0, depth]]\n */\nexport function getBoundingCube(loader) {\n  const source = Array.isArray(loader) ? loader[0] : loader;\n  const { shape, labels } = source;\n  const physicalSizeScalingMatrix = getPhysicalSizeScalingMatrix(source);\n  const xSlice = [0, physicalSizeScalingMatrix[0] * shape[labels.indexOf('x')]];\n  const ySlice = [0, physicalSizeScalingMatrix[5] * shape[labels.indexOf('y')]];\n  const zSlice = [\n    0,\n    physicalSizeScalingMatrix[10] * shape[labels.indexOf('z')],\n  ];\n  return [xSlice, ySlice, zSlice];\n}\n\nexport function abbreviateNumber(value) {\n  // Return an abbreviated representation of value, in 5 characters or less.\n\n  const maxLength = 5;\n  let maxNaiveDigits = maxLength;\n\n  /* eslint-disable no-plusplus */\n  if (!Number.isInteger(value)) {\n    --maxNaiveDigits;\n  } // Wasted on \".\"\n  if (value < 1) {\n    --maxNaiveDigits;\n  } // Wasted on \"0.\"\n  /* eslint-disable no-plusplus */\n\n  const naive = Intl.NumberFormat('en-US', {\n    maximumSignificantDigits: maxNaiveDigits,\n    useGrouping: false,\n  }).format(value);\n  if (naive.length <= maxLength) return naive;\n\n  // \"e+9\" consumes 3 characters, so if we even had two significant digits,\n  // it would take take us to six characters, including the decimal point.\n  return value.toExponential(0);\n}\n","module.exports = require(\"@material-ui/core/Select\");","module.exports = require(\"@luma.gl/core\");","module.exports = require(\"@material-ui/core/Checkbox\");","import glsl from 'glslify';\n\nexport const vs = glsl`\n#define SHADER_NAME bitmask-layer-vertex-shader\n\nattribute vec2 texCoords;\nattribute vec3 positions;\nattribute vec3 positions64Low;\nattribute vec3 instancePickingColors;\n\nvarying vec2 vTexCoord;\n\nvoid main(void) {\n  geometry.worldPosition = positions;\n  geometry.uv = texCoords;\n  geometry.pickingColor = instancePickingColors;\n  gl_Position = project_position_to_clipspace(positions, positions64Low, vec3(0.0), geometry.position);\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  vTexCoord = texCoords;\n  vec4 color = vec4(0.0);\n  DECKGL_FILTER_COLOR(color, geometry);\n}\n`;\n\nexport const fs = glsl`\n#define SHADER_NAME bitmask-layer-fragment-shader\nprecision highp float;\n\n#pragma glslify: plasma = require(\"glsl-colormap/plasma\")\n#pragma glslify: viridis = require(\"glsl-colormap/viridis\")\n#pragma glslify: greys = require(\"glsl-colormap/greys\")\n#pragma glslify: magma = require(\"glsl-colormap/magma\")\n#pragma glslify: jet = require(\"glsl-colormap/jet\")\n#pragma glslify: bone = require(\"glsl-colormap/bone\")\n#pragma glslify: copper = require(\"glsl-colormap/copper\")\n#pragma glslify: density = require(\"glsl-colormap/density\")\n#pragma glslify: inferno = require(\"glsl-colormap/inferno\")\n#pragma glslify: cool = require(\"glsl-colormap/cool\")\n#pragma glslify: hot = require(\"glsl-colormap/hot\")\n#pragma glslify: spring = require(\"glsl-colormap/spring\")\n#pragma glslify: summer = require(\"glsl-colormap/summer\")\n#pragma glslify: autumn = require(\"glsl-colormap/autumn\")\n#pragma glslify: winter = require(\"glsl-colormap/winter\")\n\n// Data (mask) texture\nuniform sampler2D channel0;\nuniform sampler2D channel1;\nuniform sampler2D channel2;\nuniform sampler2D channel3;\nuniform sampler2D channel4;\nuniform sampler2D channel5;\n\n// Color texture\nuniform sampler2D colorTex;\nuniform float colorTexHeight;\nuniform float colorTexWidth;\nuniform float hovered;\n// range\nuniform bool channelsVisible[6];\n\n// Expression mapping\nuniform vec2 uColorScaleRange;\nuniform bool uIsExpressionMode;\nuniform sampler2D expressionTex;\n\n// opacity\nuniform float opacity;\n\nvarying vec2 vTexCoord;\n\nvec4 sampleAndGetColor(sampler2D dataTex, vec2 coord, bool isOn){\n  float sampledData = texture(dataTex, coord).r;\n  vec4 hoveredColor = float(sampledData == hovered && sampledData > 0. && hovered > 0.) * vec4(0., 0., 1., 1.);\n  // Colors are laid out corresponding to ids in row-major order in the texture.  So if width of the texture is 10, and you want ID 25,\n  // you need coordinate (1, 4) (i.e 2 rows down, and 5 columns over indexed from 0 for a total of 25 units covered in row major order).\n  vec2 colorTexCoord = vec2(mod(sampledData, colorTexWidth) / colorTexWidth, floor(sampledData / colorTexWidth) / (colorTexHeight - 1.));\n  float expressionValue = texture(expressionTex, colorTexCoord).r / 255.;\n  float scaledExpressionValue = (expressionValue - uColorScaleRange[0]) / max(0.005, (uColorScaleRange[1] - uColorScaleRange[0]));\n  vec4 sampledColor = float(uIsExpressionMode) * COLORMAP_FUNC(clamp(scaledExpressionValue, 0.0, 1.0)) +  (1. - float(uIsExpressionMode)) * vec4(texture(colorTex, colorTexCoord).rgb, 1.);\n  // Only return a color if the data is non-zero.\n  return max(0., min(sampledData, 1.)) * float(isOn) * (sampledColor + hoveredColor);\n}\n\nvoid main() {\n\n  gl_FragColor = sampleAndGetColor(channel0, vTexCoord, channelsVisible[0]);\n\n  // If the sampled color and the currently stored color (gl_FragColor) are identical, don't blend and use the sampled color,\n  // otherwise just use the currently stored color.  Repeat this for all channels.\n  vec4 sampledColor = sampleAndGetColor(channel1, vTexCoord, channelsVisible[1]);\n  gl_FragColor = (sampledColor == gl_FragColor || sampledColor == vec4(0.)) ? gl_FragColor : sampledColor;\n  sampledColor = sampleAndGetColor(channel2, vTexCoord, channelsVisible[2]);\n  gl_FragColor = (sampledColor == gl_FragColor || sampledColor == vec4(0.)) ? gl_FragColor : sampledColor;\n  sampledColor = sampleAndGetColor(channel3, vTexCoord, channelsVisible[3]);\n  gl_FragColor = (sampledColor == gl_FragColor || sampledColor == vec4(0.)) ? gl_FragColor : sampledColor;\n  sampledColor = sampleAndGetColor(channel4, vTexCoord, channelsVisible[4]);\n  gl_FragColor = (sampledColor == gl_FragColor || sampledColor == vec4(0.)) ? gl_FragColor : sampledColor;\n  sampledColor = sampleAndGetColor(channel5, vTexCoord, channelsVisible[5]);\n  gl_FragColor = (sampledColor == gl_FragColor || sampledColor == vec4(0.)) ? gl_FragColor : sampledColor;\n  // Apply the opacity if there is pixel data, and if the pixel data is empty i.e no segmentation, use 0 opacity.\n  gl_FragColor = vec4(gl_FragColor.rgb, (gl_FragColor.rgb == vec3(0., 0., 0.)) ? 0.0 : opacity);\n\n  geometry.uv = vTexCoord;\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n`;\n","import GL from '@luma.gl/constants'; // eslint-disable-line import/no-extraneous-dependencies\nimport { project32, picking } from '@deck.gl/core'; // eslint-disable-line import/no-extraneous-dependencies\nimport { Texture2D, isWebGL2 } from '@luma.gl/core';\nimport { XRLayer } from '@hms-dbmi/viv';\nimport { fs, vs } from './bitmask-layer-shaders';\nimport {\n  GLSL_COLORMAPS,\n  GLSL_COLORMAP_DEFAULT,\n  COLORMAP_SHADER_PLACEHOLDER,\n} from './constants';\n\nfunction padWithDefault(arr, defaultValue, padWidth) {\n  const newArr = [...arr];\n  for (let i = 0; i < padWidth; i += 1) {\n    newArr.push(defaultValue);\n  }\n  return newArr;\n}\n\nconst defaultProps = {\n  hoveredCell: { type: 'number', value: null, compare: true },\n  cellColorData: { type: 'object', value: null, compare: true },\n  colormap: { type: 'string', value: GLSL_COLORMAP_DEFAULT, compare: true },\n  expressionData: { type: 'object', value: null, compare: true },\n};\n\n/**\n * A BitmapLayer that performs aggregation in the fragment shader,\n * and renders its texture from a Uint8Array rather than an ImageData.\n */\nexport default class BitmaskLayer extends XRLayer {\n  // eslint-disable-next-line class-methods-use-this\n  getShaders() {\n    const { colormap } = this.props;\n    return {\n      fs,\n      vs,\n      modules: [project32, picking],\n      defines: {\n        [COLORMAP_SHADER_PLACEHOLDER]: GLSL_COLORMAPS.includes(colormap)\n          ? colormap\n          : GLSL_COLORMAP_DEFAULT,\n      },\n    };\n  }\n\n  updateState({ props, oldProps, changeFlags }) {\n    super.updateState({ props, oldProps, changeFlags });\n    if (props.cellColorData !== oldProps.cellColorData) {\n      this.setColorTexture();\n    }\n    if (props.expressionData !== oldProps.expressionData) {\n      const { expressionData, cellTexHeight, cellTexWidth } = this.props;\n      const expressionTex = this.dataToTexture(\n        expressionData,\n        cellTexWidth,\n        cellTexHeight,\n      );\n      this.setState({ expressionTex });\n    }\n    if (props.colormap !== oldProps.colormap) {\n      const { gl } = this.context;\n      if (this.state.model) {\n        this.state.model.delete();\n      }\n      // eslint-disable-next-line no-underscore-dangle\n      this.setState({ model: this._getModel(gl) });\n\n      this.getAttributeManager().invalidateAll();\n    }\n  }\n\n  setColorTexture() {\n    const {\n      cellColorData: data,\n      cellTexHeight: height,\n      cellTexWidth: width,\n    } = this.props;\n    const colorTex = new Texture2D(this.context.gl, {\n      width,\n      height,\n      // Only use Float32 so we don't have to write two shaders\n      data,\n      // we don't want or need mimaps\n      mipmaps: false,\n      parameters: {\n        // NEAREST for integer data\n        [GL.TEXTURE_MIN_FILTER]: GL.NEAREST,\n        [GL.TEXTURE_MAG_FILTER]: GL.NEAREST,\n        // CLAMP_TO_EDGE to remove tile artifacts\n        [GL.TEXTURE_WRAP_S]: GL.CLAMP_TO_EDGE,\n        [GL.TEXTURE_WRAP_T]: GL.CLAMP_TO_EDGE,\n      },\n      format: GL.RGB,\n      dataFormat: GL.RGB,\n      type: GL.UNSIGNED_BYTE,\n    });\n    this.setState({ colorTex });\n  }\n\n  draw(opts) {\n    const { uniforms } = opts;\n    const {\n      channelsVisible,\n      hoveredCell,\n      colorScaleLo,\n      colorScaleHi,\n      isExpressionMode,\n    } = this.props;\n    const {\n      textures, model, colorTex, expressionTex,\n    } = this.state;\n    // Render the image\n    if (textures && model && colorTex) {\n      model\n        .setUniforms(\n          Object.assign({}, uniforms, {\n            hovered: hoveredCell || 0,\n            colorTex,\n            expressionTex,\n            colorTexHeight: colorTex.height,\n            colorTexWidth: colorTex.width,\n            channelsVisible: padWithDefault(\n              channelsVisible,\n              false,\n              // There are six texture entries on the shaders\n              6 - channelsVisible.length,\n            ),\n            uColorScaleRange: [colorScaleLo, colorScaleHi],\n            uIsExpressionMode: isExpressionMode,\n            ...textures,\n          }),\n        )\n        .draw();\n    }\n  }\n\n  /**\n   * This function creates textures from the data\n   */\n  dataToTexture(data, width, height) {\n    const isWebGL2On = isWebGL2(this.context.gl);\n    return new Texture2D(this.context.gl, {\n      width,\n      height,\n      // Only use Float32 so we don't have to write two shaders\n      data: new Float32Array(data),\n      // we don't want or need mimaps\n      mipmaps: false,\n      parameters: {\n        // NEAREST for integer data\n        [GL.TEXTURE_MIN_FILTER]: GL.NEAREST,\n        [GL.TEXTURE_MAG_FILTER]: GL.NEAREST,\n        // CLAMP_TO_EDGE to remove tile artifacts\n        [GL.TEXTURE_WRAP_S]: GL.CLAMP_TO_EDGE,\n        [GL.TEXTURE_WRAP_T]: GL.CLAMP_TO_EDGE,\n      },\n      format: isWebGL2On ? GL.R32F : GL.LUMINANCE,\n      dataFormat: isWebGL2On ? GL.RED : GL.LUMINANCE,\n      type: GL.FLOAT,\n    });\n  }\n}\nBitmaskLayer.layerName = 'BitmaskLayer';\nBitmaskLayer.defaultProps = defaultProps;\n","/* eslint-disable no-plusplus */\nimport shortNumber from 'short-number';\nimport isEqual from 'lodash/isEqual';\nimport {\n  getDefaultInitialViewState,\n  MultiscaleImageLayer,\n  ImageLayer,\n  VolumeLayer,\n} from '@hms-dbmi/viv';\nimport { extent } from 'd3-array';\nimport { Matrix4 } from 'math.gl';\nimport { divide, compare, unit } from 'mathjs';\nimport { pluralize, getSourceFromLoader, isRgb } from '../../utils';\nimport { VIEWER_PALETTE } from '../utils';\nimport {\n  GLOBAL_LABELS,\n  DEFAULT_RASTER_LAYER_PROPS,\n  DEFAULT_LAYER_TYPE_ORDERING,\n} from './constants';\nimport BitmaskLayer from '../../layers/BitmaskLayer';\nimport { getMultiSelectionStats } from '../layer-controller/utils';\n\nexport function square(x, y, r) {\n  return [[x, y + r], [x + r, y], [x, y - r], [x - r, y]];\n}\n\n/**\n * Sort spatial layer definition array,\n * to keep the ordering in the layer controller\n * consistent.\n * Intended to be used with auto-initialized layer\n * definition arrays only, as a pre-defined layer array\n * should not be re-ordered.\n * @param {object[]} layers Array of layer definition objects.\n * Object must have a .type property.\n */\nexport function sortLayers(layers) {\n  return layers.sort((a, b) => (\n    DEFAULT_LAYER_TYPE_ORDERING.indexOf(a.type) - DEFAULT_LAYER_TYPE_ORDERING.indexOf(b.type)\n  ));\n}\n\n/**\n * Return the midpoint of the global dimensions.\n * @param {object} source PixelSource object from Viv\n * @returns {object} The selection.\n */\nfunction getDefaultGlobalSelection(source) {\n  const globalIndices = source.labels\n    .filter(dim => GLOBAL_LABELS.includes(dim));\n  const selection = {};\n  globalIndices.forEach((dim) => {\n    selection[dim] = Math.floor(\n      (source.shape[source.labels.indexOf(dim)] || 0) / 2,\n    );\n  });\n  return selection;\n}\n\n/**\n * Create a default selection using the midpoint of the available global dimensions,\n * and then the first four available selections from the first selectable channel.\n * @param {object} source PixelSource object from Viv\n * @returns {object} The selection.\n */\nfunction buildDefaultSelection(source) {\n  const selection = [];\n  const globalSelection = getDefaultGlobalSelection(source);\n  // First non-global dimension with some sort of selectable values\n  const firstNonGlobalDimension = source.labels.filter(\n    dim => !GLOBAL_LABELS.includes(dim)\n      && source.shape[source.labels.indexOf(dim)],\n  )[0];\n  for (let i = 0; i < Math.min(4, source.shape[\n    source.labels.indexOf(firstNonGlobalDimension)\n  ]); i += 1) {\n    selection.push(\n      {\n        [firstNonGlobalDimension]: i,\n        ...globalSelection,\n      },\n    );\n  }\n  return selection;\n}\n\n/**\n * @param {Array.<number>} shape loader shape\n */\nexport function isInterleaved(shape) {\n  const lastDimSize = shape[shape.length - 1];\n  return lastDimSize === 3 || lastDimSize === 4;\n}\n\n/**\n * Initialize the channel selections for an individual layer.\n * @param {object} loader A viv loader instance with channel names appended by Vitessce loaders\n * of the form { data: (PixelSource[]|PixelSource), metadata: Object, channels }\n * @returns {object[]} An array of selected channels with default\n * domain/slider settings.\n */\nexport async function initializeLayerChannels(loader, use3d) {\n  const result = [];\n  const source = getSourceFromLoader(loader);\n  // Add channel automatically as the first avaialable value for each dimension.\n  let defaultSelection = buildDefaultSelection(source);\n  defaultSelection = isInterleaved(source.shape)\n    ? [{ ...defaultSelection[0], c: 0 }] : defaultSelection;\n  const stats = await getMultiSelectionStats({\n    loader: loader.data, selections: defaultSelection, use3d,\n  });\n\n  const domains = isRgb(loader)\n    ? [[0, 255], [0, 255], [0, 255]]\n    : stats.domains;\n  const colors = isRgb(loader)\n    ? [[255, 0, 0], [0, 255, 0], [0, 0, 255]]\n    : null;\n  const sliders = isRgb(loader)\n    ? [[0, 255], [0, 255], [0, 255]]\n    : stats.sliders;\n\n  defaultSelection.forEach((selection, i) => {\n    const domain = domains[i];\n    const slider = sliders[i];\n    const channel = {\n      selection,\n      // eslint-disable-next-line no-nested-ternary\n      color: colors ? colors[i]\n        : defaultSelection.length !== 1\n          ? VIEWER_PALETTE[i] : [255, 255, 255],\n      visible: true,\n      slider: slider || domain,\n    };\n    result.push(channel);\n  });\n  return result;\n}\n\nfunction getMetaWithTransformMatrices(imageMeta, imageLoaders) {\n  // Do not fill in transformation matrices if any of the layers specify one.\n  const sources = imageLoaders.map(loader => getSourceFromLoader(loader));\n  if (\n    imageMeta.map(meta => meta?.metadata?.transform?.matrix\n      || meta?.metadata?.transform?.scale\n      || meta?.metadata?.transform?.translate).some(Boolean)\n    || sources.every(\n      source => !source.meta?.physicalSizes?.x || !source.meta?.physicalSizes?.y,\n    )\n  ) {\n    return imageMeta;\n  }\n  // Get the minimum physical among all the current images.\n  const minPhysicalSize = sources.reduce((acc, source) => {\n    const hasZPhyscialSize = source.meta?.physicalSizes?.z?.size;\n    const sizes = [\n      unit(`${source.meta?.physicalSizes.x.size} ${source.meta?.physicalSizes.x.unit}`.replace('µ', 'u')),\n      unit(`${source.meta?.physicalSizes.y.size} ${source.meta?.physicalSizes.y.unit}`.replace('µ', 'u')),\n    ];\n    if (hasZPhyscialSize) {\n      sizes.push(unit(`${source.meta?.physicalSizes.z.size} ${source.meta?.physicalSizes.z.unit}`.replace('µ', 'u')));\n    }\n    acc[0] = (acc[0] === undefined || compare(sizes[0], acc[0]) === -1) ? sizes[0] : acc[0];\n    acc[1] = (acc[1] === undefined || compare(sizes[1], acc[1]) === -1) ? sizes[1] : acc[1];\n    acc[2] = (acc[2] === undefined || compare(sizes[2], acc[2]) === -1) ? sizes[2] : acc[2];\n    return acc;\n  }, []);\n  const imageMetaWithTransform = imageMeta.map((meta, j) => {\n    const source = sources[j];\n    const hasZPhyscialSize = source.meta?.physicalSizes?.z?.size;\n    const sizes = [\n      unit(`${source.meta?.physicalSizes.x.size} ${source.meta?.physicalSizes.x.unit}`.replace('µ', 'u')),\n      unit(`${source.meta?.physicalSizes.y.size} ${source.meta?.physicalSizes.y.unit}`.replace('µ', 'u')),\n    ];\n    if (hasZPhyscialSize) {\n      sizes.push(unit(`${source.meta?.physicalSizes.z.size} ${source.meta?.physicalSizes.z.unit}`.replace('µ', 'u')));\n    }\n    // Find the ratio of the sizes to get the scaling factor.\n    const scale = sizes.map((i, k) => divide(i, minPhysicalSize[k]));\n    // Add in z dimension needed for Matrix4 scale API.\n    if (!scale[2]) {\n      scale[2] = 1;\n    }\n    // no need to store/use identity scaling\n    if (isEqual(scale, [1, 1, 1])) {\n      return meta;\n    }\n    // Make sure to scale the z direction by one.\n    const matrix = new Matrix4().scale([...scale]);\n    const newMeta = { ...meta };\n    newMeta.metadata = {\n      ...newMeta.metadata,\n      // We don't want to store matrix objects in the view config.\n      transform: { matrix: matrix.toArray() },\n    };\n    return newMeta;\n  });\n  return imageMetaWithTransform;\n}\n\n/**\n * Given a set of image layer loader creator functions,\n * create loader objects for an initial layer or set of layers,\n * which will be selected based on default values predefined in\n * the image data file or otherwise by a heuristic\n * (the midpoint of the layers array).\n * @param {object[]} rasterLayers A list of layer metadata objects with\n * shape { name, type, url, createLoader }.\n * @param {(string[]|null)} rasterRenderLayers A list of default raster layers. Optional.\n */\nexport async function initializeRasterLayersAndChannels(\n  rasterLayers,\n  rasterRenderLayers,\n  usePhysicalSizeScaling,\n) {\n  const nextImageLoaders = [];\n  let nextImageMetaAndLayers = [];\n  const autoImageLayerDefPromises = [];\n\n  // Start all loader creators immediately.\n  // Reference: https://eslint.org/docs/rules/no-await-in-loop\n  const loaders = await Promise.all(rasterLayers.map(layer => layer.loaderCreator()));\n\n  for (let i = 0; i < rasterLayers.length; i++) {\n    const layer = rasterLayers[i];\n    const loader = loaders[i];\n    nextImageLoaders[i] = loader;\n    nextImageMetaAndLayers[i] = layer;\n  }\n  if (usePhysicalSizeScaling) {\n    nextImageMetaAndLayers = getMetaWithTransformMatrices(nextImageMetaAndLayers, nextImageLoaders);\n  }\n  // No layers were pre-defined so set up the default image layers.\n  if (!rasterRenderLayers) {\n    // Midpoint of images list as default image to show.\n    const layerIndex = Math.floor(rasterLayers.length / 2);\n    const loader = nextImageLoaders[layerIndex];\n    const autoImageLayerDefPromise = initializeLayerChannels(loader)\n      .then(channels => Promise.resolve({\n        type: nextImageMetaAndLayers[layerIndex]?.metadata?.isBitmask ? 'bitmask' : 'raster',\n        index: layerIndex,\n        ...DEFAULT_RASTER_LAYER_PROPS,\n        channels: channels.map((channel, j) => ({\n          ...channel,\n          ...(nextImageMetaAndLayers[layerIndex].channels\n            ? nextImageMetaAndLayers[layerIndex].channels[j] : []),\n        })),\n        modelMatrix: nextImageMetaAndLayers[layerIndex]?.metadata?.transform?.matrix,\n        transparentColor: layerIndex > 0 ? [0, 0, 0] : null,\n      }));\n    autoImageLayerDefPromises.push(autoImageLayerDefPromise);\n  } else {\n    // The renderLayers parameter is a list of layer names to show by default.\n    const globalIndicesOfRenderLayers = rasterRenderLayers\n      .map(imageName => rasterLayers.findIndex(image => image.name === imageName));\n    for (let i = 0; i < globalIndicesOfRenderLayers.length; i++) {\n      const layerIndex = globalIndicesOfRenderLayers[i];\n      const loader = nextImageLoaders[layerIndex];\n      const autoImageLayerDefPromise = initializeLayerChannels(loader)\n        // eslint-disable-next-line no-loop-func\n        .then(channels => Promise.resolve({\n          type: nextImageMetaAndLayers[layerIndex]?.metadata?.isBitmask ? 'bitmask' : 'raster',\n          index: layerIndex,\n          ...DEFAULT_RASTER_LAYER_PROPS,\n          channels: channels.map((channel, j) => ({\n            ...channel,\n            ...(nextImageMetaAndLayers[layerIndex].channels\n              ? nextImageMetaAndLayers[layerIndex].channels[j] : []),\n          })),\n          domainType: 'Min/Max',\n          modelMatrix: nextImageMetaAndLayers[layerIndex]?.metadata?.transform?.matrix,\n          transparentColor: i > 0 ? [0, 0, 0] : null,\n        }));\n      autoImageLayerDefPromises.push(autoImageLayerDefPromise);\n    }\n  }\n\n  const autoImageLayerDefs = await Promise.all(autoImageLayerDefPromises);\n  return [autoImageLayerDefs, nextImageLoaders, nextImageMetaAndLayers];\n}\n\n/**\n * Make a subtitle for the spatial component.\n * @param {object} params\n * @param {number} params.observationsCount\n * @param {string} params.observationsLabel\n * @param {string} params.observationsPluralLabel\n * @param {number} params.subobservationsCount\n * @param {string} params.subobservationsLabel\n * @param {string} params.subobservationsPluralLabel\n * @param {number} params.locationsCount\n * @returns {string} The subtitle string,\n * with info about items with zero counts omitted.\n */\nexport function makeSpatialSubtitle({\n  observationsCount, observationsLabel, observationsPluralLabel,\n  subobservationsCount, subobservationsLabel, subobservationsPluralLabel,\n  locationsCount,\n}) {\n  const parts = [];\n  if (subobservationsCount > 0) {\n    let part = `${subobservationsCount} ${pluralize(subobservationsLabel, subobservationsPluralLabel, subobservationsCount)}`;\n    if (locationsCount > 0) {\n      part += ` at ${shortNumber(locationsCount)} locations`;\n    }\n    parts.push(part);\n  }\n  if (observationsCount > 0) {\n    parts.push(`${observationsCount} ${pluralize(observationsLabel, observationsPluralLabel, observationsCount)}`);\n  }\n  return parts.join(', ');\n}\n\nexport function getInitialSpatialTargets({\n  width,\n  height,\n  cells,\n  imageLayerLoaders,\n  useRaster,\n  use3d,\n}) {\n  let initialTargetX = -Infinity;\n  let initialTargetY = -Infinity;\n  let initialTargetZ = -Infinity;\n  let initialZoom = -Infinity;\n  // Some backoff from completely filling the screen.\n  const zoomBackoff = use3d ? 1.5 : 0.1;\n  const cellValues = Object.values(cells);\n  if (imageLayerLoaders.length > 0 && useRaster) {\n    for (let i = 0; i < imageLayerLoaders.length; i += 1) {\n      const viewSize = { height, width };\n      const { target, zoom: newViewStateZoom } = getDefaultInitialViewState(\n        imageLayerLoaders[i].data,\n        viewSize,\n        zoomBackoff,\n        use3d,\n      );\n      if (target[0] > initialTargetX) {\n        // eslint-disable-next-line prefer-destructuring\n        initialTargetX = target[0];\n        initialZoom = newViewStateZoom;\n      }\n      if (target[1] > initialTargetY) {\n        // eslint-disable-next-line prefer-destructuring\n        initialTargetY = target[1];\n        initialZoom = newViewStateZoom;\n      }\n      if (target[2] > initialTargetZ) {\n        // eslint-disable-next-line prefer-destructuring\n        initialTargetZ = target[2];\n        initialZoom = newViewStateZoom;\n      } else {\n        initialTargetZ = null;\n      }\n    }\n  } else if (cellValues.length > 0\n    // Only use cellValues in quadtree calculation if there is\n    // centroid data in the cells (i.e not just ids).\n    && cellValues[0].xy\n    && !useRaster) {\n    const cellCoordinates = cellValues.map(c => c.xy);\n    let xExtent = extent(cellCoordinates, c => c[0]);\n    let yExtent = extent(cellCoordinates, c => c[1]);\n    let xRange = xExtent[1] - xExtent[0];\n    let yRange = yExtent[1] - yExtent[0];\n    const getViewExtentFromPolygonExtents = extents => [\n      Math.min(...extents.map(i => i[0])),\n      Math.max(...extents.map(i => i[1])),\n    ];\n    if (xRange === 0) {\n      // The fall back is the cells' polygon coordinates, if the original range\n      // is 0 i.e the centroids are all on the same axis.\n      const polygonExtentsX = cellValues.map(cell => extent(cell.poly, i => i[0]));\n      xExtent = getViewExtentFromPolygonExtents(polygonExtentsX);\n      xRange = xExtent[1] - xExtent[0];\n    }\n    if (yRange === 0) {\n      // The fall back is the first cells' polygon coordinates, if the original range\n      // is 0 i.e the centroids are all on the same axis.\n      const polygonExtentsY = cellValues.map(cell => extent(cell.poly, i => i[1]));\n      yExtent = getViewExtentFromPolygonExtents(polygonExtentsY);\n      yRange = yExtent[1] - yExtent[0];\n    }\n    initialTargetX = xExtent[0] + xRange / 2;\n    initialTargetY = yExtent[0] + yRange / 2;\n    initialTargetZ = null;\n    initialZoom = Math.log2(Math.min(width / xRange, height / yRange)) - zoomBackoff;\n  } else {\n    return {\n      initialTargetX: null, initialTargetY: null, initialTargetZ: null, initialZoom: null,\n    };\n  }\n  return {\n    initialTargetX, initialTargetY, initialZoom, initialTargetZ,\n  };\n}\n\n/**\n * Make a subtitle for the spatial component.\n * @param {object} data PixelSource | PixelSource[]\n * @returns {Array} [Layer, PixelSource | PixelSource[]] tuple.\n */\nexport function getLayerLoaderTuple(data, use3d) {\n  const loader = ((Array.isArray(data) && data.length > 1) || !Array.isArray(data))\n    ? data : data[0];\n  if (use3d) {\n    return [VolumeLayer, Array.isArray(loader) ? loader : [loader]];\n  }\n  const Layer = (Array.isArray(data) && data.length > 1) ? MultiscaleImageLayer : ImageLayer;\n  return [Layer, loader];\n}\n\n\nexport function renderSubBitmaskLayers(props) {\n  const {\n    bbox: {\n      left, top, right, bottom,\n    },\n    x,\n    y,\n    z,\n  } = props.tile;\n  const {\n    data, id, loader,\n  } = props;\n  // Only render in positive coorinate system\n  if ([left, bottom, right, top].some(v => v < 0) || !data) {\n    return null;\n  }\n  const base = loader[0];\n  const [height, width] = loader[0].shape.slice(-2);\n  // Tiles are exactly fitted to have height and width such that their bounds\n  // match that of the actual image (not some padded version).\n  // Thus the right/bottom given by deck.gl are incorrect since\n  // they assume tiles are of uniform sizes, which is not the case for us.\n  const bounds = [\n    left,\n    data.height < base.tileSize ? height : bottom,\n    data.width < base.tileSize ? width : right,\n    top,\n  ];\n  return new BitmaskLayer(props, {\n    channelData: data,\n    // Uncomment to help debugging - shades the tile being hovered over.\n    // autoHighlight: true,\n    // highlightColor: [80, 80, 80, 50],\n    // Shared props with BitmapLayer:\n    bounds,\n    id: `sub-layer-${bounds}-${id}`,\n    tileId: { x, y, z },\n  });\n}\n","module.exports = require(\"@material-ui/icons/CloudDownload\");","module.exports = require(\"@material-ui/core/Link\");","module.exports = require(\"@material-ui/icons/Settings\");","module.exports = require(\"@material-ui/icons/Close\");","module.exports = require(\"@material-ui/core/CircularProgress\");","module.exports = require(\"@material-ui/core/MenuList\");","module.exports = require(\"@material-ui/core/ClickAwayListener\");","module.exports = require(\"@material-ui/core/Fade\");","module.exports = require(\"fast-deep-equal\");","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}","import objectWithoutPropertiesLoose from \"./objectWithoutPropertiesLoose\";\nexport default function _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}","module.exports = require(\"@material-ui/core/InputLabel\");","module.exports = require(\"@material-ui/core/Button\");","import { DTYPE_VALUES } from '@hms-dbmi/viv';\n\nfunction getDomains() {\n  const domains = {};\n  const needMin = ['Int8', 'Int16', 'Int32'];\n  Object.keys(DTYPE_VALUES).forEach((dtype) => {\n    const { max } = DTYPE_VALUES[dtype];\n    const min = needMin.includes(dtype) ? -(max + 1) : 0;\n    domains[dtype] = [min, max];\n  });\n  return domains;\n}\n\nexport const DOMAINS = getDomains();\n","module.exports = require(\"@material-ui/core/Typography\");","import React from 'react';\n\nimport Grid from '@material-ui/core/Grid';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport Slider from '@material-ui/core/Slider';\nimport { useControllerSectionStyles } from './styles';\n\nexport default function VectorLayerController(props) {\n  const {\n    label,\n    layer,\n    layerType,\n    handleLayerChange,\n  } = props;\n\n  const slider = layer.opacity;\n  const isOn = layer.visible;\n\n  function handleSliderChange(v) {\n    if (layerType === 'cells') {\n      const stroked = v < 0.7;\n      handleLayerChange({ ...layer, opacity: v, stroked });\n    } else {\n      handleLayerChange({ ...layer, opacity: v });\n    }\n  }\n\n  function handleCheckBoxChange(v) {\n    handleLayerChange({ ...layer, visible: v });\n  }\n\n  const classes = useControllerSectionStyles();\n  return (\n    <Grid item style={{ marginTop: '10px' }}>\n      <Paper className={classes.root}>\n        <Typography\n          style={{\n            padding: '15px 8px 0px 8px',\n            marginBottom: '-5px',\n          }}\n        >\n          {label}\n        </Typography>\n        <Grid container direction=\"row\" justify=\"space-between\">\n          <Grid item xs={2}>\n            <Checkbox color=\"primary\" checked={isOn} onChange={(e, v) => handleCheckBoxChange(v)} />\n          </Grid>\n          <Grid item xs={9} style={{ paddingRight: '8px' }}>\n            <Slider\n              value={slider}\n              min={0}\n              max={1}\n              step={0.001}\n              onChange={(e, v) => handleSliderChange(v)}\n              style={{ marginTop: '7px' }}\n              orientation=\"horizontal\"\n            />\n          </Grid>\n        </Grid>\n      </Paper>\n    </Grid>\n  );\n}\n","module.exports = require(\"@material-ui/icons/Add\");","module.exports = require(\"short-number\");","module.exports = require(\"regenerator-runtime\");","import React from 'react';\nimport range from 'lodash/range';\nimport { Matrix4 } from 'math.gl';\nimport Grid from '@material-ui/core/Grid';\nimport Slider from '@material-ui/core/Slider';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport Select from '@material-ui/core/Select';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport { getDefaultInitialViewState } from '@hms-dbmi/viv';\n\nimport {\n  getBoundingCube, getMultiSelectionStats,\n} from './utils';\nimport {\n  COLORMAP_OPTIONS,\n  canLoadResolution,\n  formatBytes,\n  getStatsForResolution,\n} from '../utils';\nimport { DEFAULT_RASTER_DOMAIN_TYPE } from '../spatial/constants';\nimport { StyledSelectionSlider, useSelectStyles } from './styles';\n\nconst DOMAIN_OPTIONS = ['Full', 'Min/Max'];\n\n/**\n * Wrapper for the dropdown that selects a colormap (None, viridis, magma, etc.).\n * @prop {Object} loader Loader object with metadata.\n * @prop {function} handleMultiPropertyChange Function to propgate multiple layer changes at once.\n * This prevents updates from overridding each other.\n * @prop {number} resolution Current 3D resolution.\n * @prop {boolean} disable3d Whether or not to enable 3D selection\n * @prop {function} setRasterLayerCallback Setter for callbacks that fire after raster/volume loads.\n * @prop {function} setAreAllChannelsLoading Setter for whether or not a given channel is loading.\n * @prop {Object} setViewState Setter for the current view state.\n * @prop {number} spatialHeight Height of the spatial component.\n * @prop {number} spatialWidth Width of the spatial component.\n * @prop {object} channels Channels object.\n * @prop {boolean} use3d Whether or not 3D is enabled for this layer.\n */\nfunction VolumeDropdown({\n  loader: loaderWithMeta,\n  handleMultiPropertyChange,\n  resolution: currResolution,\n  disable3d,\n  setRasterLayerCallback,\n  setAreAllChannelsLoading,\n  setViewState,\n  spatialHeight,\n  spatialWidth,\n  channels,\n  use3d,\n  modelMatrix,\n}) {\n  const classes = useSelectStyles();\n  const selections = channels.map(i => i.selection);\n  const { data: loader } = loaderWithMeta;\n  const handleChange = async (val) => {\n    // val is the resolution - null indicates 2D\n    const shouldUse3D = typeof val === 'number';\n    setAreAllChannelsLoading(true);\n    setRasterLayerCallback(() => {\n      setAreAllChannelsLoading(false);\n      setRasterLayerCallback(null);\n    });\n    if (shouldUse3D) {\n      const [xSlice, ySlice, zSlice] = getBoundingCube(loader);\n      const propertiesChanged = {\n        resolution: val,\n        xSlice,\n        ySlice,\n        zSlice,\n        use3d: shouldUse3D,\n      };\n      // Only make the fetch if needed i.e if the 3d was just being turned on.\n      if (!use3d) {\n        const { sliders } = await getMultiSelectionStats({\n          loader,\n          selections,\n          use3d: shouldUse3D,\n        });\n        propertiesChanged.channels = [...channels];\n        propertiesChanged.channels.forEach((ch, i) => {\n          // eslint-disable-next-line no-param-reassign\n          ch.slider = sliders[i];\n        });\n      }\n      // Update all properties at once to avoid overriding calls.\n      handleMultiPropertyChange(propertiesChanged);\n      const defaultViewState = getDefaultInitialViewState(loader,\n        { height: spatialHeight, width: spatialWidth }, 1.5, true, new Matrix4(modelMatrix));\n      setViewState({\n        ...defaultViewState,\n        rotationX: 0,\n        rotationOrbit: 0,\n      });\n    } else {\n      const { sliders } = await getMultiSelectionStats({\n        loader, selections, use3d: shouldUse3D,\n      });\n      const newChannels = [...channels];\n      newChannels.forEach((ch, i) => {\n        // eslint-disable-next-line no-param-reassign\n        ch.slider = sliders[i];\n      });\n      // Update all properties at once to avoid overriding calls.\n      handleMultiPropertyChange({\n        resolution: val,\n        use3d: shouldUse3D,\n        spatialAxisFixed: false,\n        channels: newChannels,\n      });\n      const defaultViewState = getDefaultInitialViewState(loader,\n        { height: spatialHeight, width: spatialWidth }, 0.5, false, new Matrix4(modelMatrix));\n      setViewState({\n        ...defaultViewState,\n        rotationX: null,\n        rotationOrbit: null,\n        orbitAxis: null,\n      });\n    }\n  };\n  const { labels, shape } = Array.isArray(loader) ? loader[0] : loader;\n  const hasZStack = shape[labels.indexOf('z')] > 1;\n  return (\n    <>\n      <Select\n        native\n        value={currResolution}\n        onChange={e => handleChange(\n          e.target.value === '2D' ? e.target.value : Number(e.target.value),\n        )\n        }\n        classes={{ root: classes.selectRoot }}\n      >\n        {\n          <option key=\"2D\" value=\"2D\">\n            2D Visualization\n          </option>\n        }\n        {Array.from({ length: loader.length })\n          .fill(0)\n          // eslint-disable-next-line no-unused-vars\n          .map((_, resolution) => {\n            if (loader) {\n              if (canLoadResolution(loader, resolution)) {\n                const {\n                  height,\n                  width,\n                  depthDownsampled,\n                  totalBytes,\n                } = getStatsForResolution(loader, resolution);\n                return (\n                  <option\n                    key={`(${height}, ${width}, ${depthDownsampled})`}\n                    value={resolution}\n                    disabled={\n                      disable3d\n                      || !hasZStack\n                    }\n                  >\n                    {`3D: ${resolution}x Downsampled, ~${formatBytes(\n                      totalBytes,\n                    )} per channel, (${height}, ${width}, ${depthDownsampled})`}\n                  </option>\n                );\n              }\n            }\n            return null;\n          })}\n      </Select>\n    </>\n  );\n}\n\n\n/**\n * Wrapper for the dropdown that selects a colormap (None, viridis, magma, etc.).\n * @prop {string} value Currently selected value for the colormap.\n * @prop {string} inputId Css id.\n * @prop {function} handleChange Callback for every change in colormap.\n */\nfunction ColormapSelect({ value, inputId, handleChange }) {\n  const classes = useSelectStyles();\n  return (\n    <Select\n      native\n      onChange={e => handleChange(e.target.value === '' ? null : e.target.value)}\n      value={value}\n      inputProps={{ name: 'colormap', id: inputId }}\n      style={{ width: '100%' }}\n      classes={{ root: classes.selectRoot }}\n    >\n      <option aria-label=\"None\" value=\"\">None</option>\n      {COLORMAP_OPTIONS.map(name => (\n        <option key={name} value={name}>\n          {name}\n        </option>\n      ))}\n    </Select>\n  );\n}\n\nfunction TransparentColorCheckbox({ value, handleChange }) {\n  return (\n    <Checkbox\n      style={{ float: 'left', padding: 0 }}\n      color=\"default\"\n      onChange={() => {\n        if (value) {\n          handleChange(null);\n        } else {\n          handleChange([0, 0, 0]);\n        }\n      }}\n      checked={Boolean(value)}\n    />\n  );\n}\n\n/**\n * Wrapper for the slider that updates opacity.\n * @prop {string} value Currently selected value between 0 and 1.\n * @prop {function} handleChange Callback for every change in opacity.\n */\nfunction OpacitySlider({ value, handleChange }) {\n  return (\n    <Slider\n      value={value}\n      onChange={(e, v) => handleChange(v)}\n      valueLabelDisplay=\"auto\"\n      getAriaLabel={() => 'opacity slider'}\n      min={0}\n      max={1}\n      step={0.01}\n      orientation=\"horizontal\"\n      style={{ marginTop: '7px' }}\n    />\n  );\n}\n\n/**\n * Wrapper for the dropdown that chooses the domain type.\n * @prop {string} value Currently selected value (i.e 'Max/Min').\n * @prop {string} inputId Css id.\n * @prop {function} handleChange Callback for every change in domain.\n */\nfunction SliderDomainSelector({ value, inputId, handleChange }) {\n  const classes = useSelectStyles();\n  return (\n    <Select\n      native\n      onChange={e => handleChange(e.target.value)}\n      value={value}\n      inputProps={{ name: 'domain-selector', id: inputId }}\n      style={{ width: '100%' }}\n      classes={{ root: classes.selectRoot }}\n    >\n      {DOMAIN_OPTIONS.map(name => (\n        <option key={name} value={name}>\n          {name}\n        </option>\n      ))}\n    </Select>\n  );\n}\n\n/**\n * Wrapper for the slider that chooses global selections (z, t etc.).\n * @prop {string} field The dimension this selects for (z, t etc.).\n * @prop {number} value Currently selected index (1, 4, etc.).\n * @prop {function} handleChange Callback for every change in selection.\n * @prop {function} possibleValues All available values for the field.\n */\nfunction GlobalSelectionSlider({\n  field,\n  value,\n  handleChange,\n  possibleValues,\n}) {\n  return (\n    <StyledSelectionSlider\n      value={value}\n      // See https://github.com/hms-dbmi/viv/issues/176 for why\n      // we have the two handlers.\n      onChange={\n        (event, newValue) => {\n          handleChange({ selection: { [field]: newValue }, event });\n        }\n      }\n      onChangeCommitted={\n        (event, newValue) => {\n          handleChange({ selection: { [field]: newValue }, event });\n        }\n      }\n      valueLabelDisplay=\"auto\"\n      getAriaLabel={() => `${field} slider`}\n      marks={possibleValues.map(val => ({ value: val }))}\n      min={Number(possibleValues[0])}\n      max={Number(possibleValues.slice(-1))}\n      orientation=\"horizontal\"\n      step={null}\n    />\n  );\n}\n\n/**\n * Wrapper for each of the options to show its name and then its UI component.\n * @prop {string} name Display name for option.\n * @prop {number} opacity Current opacity value.\n * @prop {string} inputId An id for css.\n * @prop {object} children Components to be rendered next to the name (slider, dropdown etc.).\n */\nfunction LayerOption({ name, inputId, children }) {\n  return (\n    <Grid container direction=\"row\" alignItems=\"center\" justify=\"center\">\n      <Grid item xs={6}>\n        <InputLabel htmlFor={inputId}>{name}:</InputLabel>\n      </Grid>\n      <Grid item xs={6}>\n        {children}\n      </Grid>\n    </Grid>\n  );\n}\n\n/**\n * Gloabl options for all channels (opacity, colormap, etc.).\n * @prop {string} colormap What colormap is currently selected (None, viridis etc.).\n * @prop {number} opacity Current opacity value.\n * @prop {function} handleColormapChange Callback for when colormap changes.\n * @prop {function} handleOpacityChange Callback for when opacity changes.\n * @prop {object} globalControlLabels All available options for global control (z and t).\n * @prop {function} handleGlobalChannelsSelectionChange Callback for global selection changes.\n * @prop {function} handleDomainChange Callback for domain type changes (full or min/max).\n * @prop {array} channels Current channel object for inferring the current global selection.\n * @prop {array} dimensions Currently available dimensions (channel, z, t etc.).\n * @prop {string} domainType One of Max/Min or Full (soon presets as well).\n * @prop {boolean} disableChannelsIfRgbDetected Whether or not we need colormap controllers if RGB.\n */\nfunction LayerOptions({\n  colormap,\n  opacity,\n  handleColormapChange,\n  handleOpacityChange,\n  handleTransparentColorChange,\n  globalControlLabels,\n  globalLabelValues,\n  handleGlobalChannelsSelectionChange,\n  handleSliderChange,\n  handleDomainChange,\n  transparentColor,\n  channels,\n  domainType,\n  disableChannelsIfRgbDetected,\n  shouldShowTransparentColor,\n  shouldShowDomain,\n  shouldShowColormap,\n  use3d,\n  loader,\n  handleMultiPropertyChange,\n  resolution,\n  disable3d,\n  setRasterLayerCallback,\n  setAreAllChannelsLoading,\n  setViewState,\n  spatialHeight,\n  spatialWidth,\n  modelMatrix,\n}) {\n  const { labels, shape } = Array.isArray(loader.data) ? loader.data[0] : loader.data;\n  const hasDimensionsAndChannels = labels.length > 0 && channels.length > 0;\n  const hasZStack = shape[labels.indexOf('z')] > 1;\n  // Only show volume button if we can actually view resolutions.\n  const hasViewableResolutions = Boolean(Array.from({\n    length: loader.data.length,\n  }).filter((_, res) => canLoadResolution(loader.data, res)).length);\n  return (\n    <Grid container direction=\"column\" style={{ width: '100%' }}>\n      {hasZStack\n        && !disable3d\n        && hasViewableResolutions\n        && (\n        <VolumeDropdown\n          loader={loader}\n          handleSliderChange={handleSliderChange}\n          handleDomainChange={handleDomainChange}\n          channels={channels}\n          handleMultiPropertyChange={handleMultiPropertyChange}\n          resolution={resolution}\n          disable3d={disable3d}\n          setRasterLayerCallback={setRasterLayerCallback}\n          setAreAllChannelsLoading={setAreAllChannelsLoading}\n          setViewState={setViewState}\n          spatialHeight={spatialHeight}\n          spatialWidth={spatialWidth}\n          use3d={use3d}\n          modelMatrix={modelMatrix}\n        />\n        )\n      }\n      {hasDimensionsAndChannels\n        && !use3d\n        && globalControlLabels.map(\n          field => shape[labels.indexOf(field)] > 1 && (\n          <LayerOption name={field} inputId={`${field}-slider`} key={field}>\n            <GlobalSelectionSlider\n              field={field}\n              value={globalLabelValues[field]}\n              handleChange={handleGlobalChannelsSelectionChange}\n              possibleValues={range(shape[labels.indexOf(field)])}\n            />\n          </LayerOption>\n          ),\n        )}\n      {!disableChannelsIfRgbDetected ? (\n        <>\n          {shouldShowColormap && (\n            <Grid item>\n              <LayerOption name=\"Colormap\" inputId=\"colormap-select\">\n                <ColormapSelect\n                  value={colormap || ''}\n                  inputId=\"colormap-select\"\n                  handleChange={handleColormapChange}\n                />\n              </LayerOption>\n            </Grid>\n          )}\n          {shouldShowDomain && (\n            <Grid item>\n              <LayerOption name=\"Domain\" inputId=\"domain-selector\">\n                <SliderDomainSelector\n                  value={domainType || DEFAULT_RASTER_DOMAIN_TYPE}\n                  handleChange={(value) => {\n                    handleDomainChange(value);\n                  }}\n                />\n              </LayerOption>\n            </Grid>\n          )}\n        </>\n      ) : null}\n      {!use3d && (\n        <Grid item>\n          <LayerOption name=\"Opacity\" inputId=\"opacity-slider\">\n            <OpacitySlider value={opacity} handleChange={handleOpacityChange} />\n          </LayerOption>\n        </Grid>\n      )}\n      {shouldShowTransparentColor && !use3d && (\n        <Grid item>\n          <LayerOption\n            name=\"Zero Transparent\"\n            inputId=\"transparent-color-selector\"\n          >\n            <TransparentColorCheckbox\n              value={transparentColor}\n              handleChange={handleTransparentColorChange}\n            />\n          </LayerOption>\n        </Grid>\n      )}\n    </Grid>\n  );\n}\n\nexport default LayerOptions;\n","import React from 'react';\nimport { Matrix4 } from 'math.gl';\nimport Grid from '@material-ui/core/Grid';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport { makeStyles, createStyles } from '@material-ui/core/styles';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport Slider from '@material-ui/core/Slider';\nimport { RENDERING_MODES, getDefaultInitialViewState } from '@hms-dbmi/viv';\nimport { abbreviateNumber, getBoundingCube } from './utils';\nimport { useSelectStyles } from './styles';\n\nconst useSlicerStyles = makeStyles(theme => createStyles({\n  enabled: {},\n  disabled: {\n    color: theme.palette.text.disabled,\n    // Because of the .5 opacity of the disabled color in the theme, and the fact\n    // that there are multiple overlaid parts to the slider,\n    // this needs to be set manually for the desired effect.\n    '& .MuiSlider-thumb': {\n      color: 'rgb(100, 100, 100, 1.0)',\n    },\n    '&  .MuiSlider-track': {\n      color: 'rgb(100, 100, 100, 1.0)',\n    },\n  },\n}));\n\nconst Slicer = ({\n  xSlice,\n  ySlice,\n  zSlice,\n  handleSlicerSetting,\n  loader,\n  use3d,\n}) => {\n  const [xSliceInit, ySliceInit, zSliceInit] = getBoundingCube(loader.data);\n  const sliceValuesAndSetSliceFunctions = [\n    [\n      xSlice,\n      xSliceNew => handleSlicerSetting('x', xSliceNew),\n      'x',\n      xSliceInit,\n    ],\n    [\n      ySlice,\n      ySliceNew => handleSlicerSetting('y', ySliceNew),\n      'y',\n      ySliceInit,\n    ],\n    [\n      zSlice,\n      zSliceNew => handleSlicerSetting('z', zSliceNew),\n      'z',\n      zSliceInit,\n    ],\n  ];\n  const classes = useSlicerStyles();\n  const Slicers = sliceValuesAndSetSliceFunctions.map(\n    ([val, setVal, label, [min, max]]) => (\n      <Grid\n        container\n        direction=\"row\"\n        justify=\"flex-start\"\n        alignItems=\"center\"\n        key={label}\n      >\n        <Grid item xs={1}>\n          <Typography\n            className={!use3d ? classes.disabled : classes.enabled}\n            style={{ marginBottom: 0 }}\n          >\n            {label}:\n          </Typography>\n        </Grid>\n        <Grid item xs={11}>\n          <Slider\n            disabled={!use3d}\n            className={!use3d ? classes.disabled : classes.enabled}\n            value={val}\n            onChange={(e, v) => setVal(v)}\n            valueLabelDisplay=\"auto\"\n            valueLabelFormat={v => abbreviateNumber(v)}\n            getAriaLabel={() => `${label} slider`}\n            min={min}\n            max={max}\n            step={0.005}\n            orientation=\"horizontal\"\n          />\n        </Grid>\n      </Grid>\n    ),\n  );\n  return (\n    <>\n      <Typography\n        className={!use3d ? classes.disabled : classes.enabled}\n        style={{ marginTop: 16, marginBottom: 0 }}\n      >\n        Clipping Planes:{' '}\n      </Typography>{' '}\n      {Slicers}\n    </>\n  );\n};\n\nconst renderingOptions = Object.values(RENDERING_MODES);\n\nfunction RenderingModeSelect({\n  handleRenderingModeChange,\n  renderingMode,\n  use3d,\n}) {\n  const classes = useSelectStyles();\n  // Empty option allows for displaying the title of the dropdown fully in the UI.\n  const options = !use3d ? [...renderingOptions, ''] : renderingOptions;\n  return (\n    <FormControl fullWidth>\n      <InputLabel htmlFor=\"rendering-mode-select\">Rendering Mode</InputLabel>\n      <Select\n        native\n        onChange={e => handleRenderingModeChange(e.target.value)}\n        value={use3d ? renderingMode : ''}\n        inputProps={{\n          name: 'rendering-mode',\n          id: 'rendering-mode-select',\n        }}\n        disabled={!use3d}\n        classes={{ root: classes.selectRoot }}\n      >\n        {options.map(name => (\n          <option key={name} value={name}>\n            {name}\n          </option>\n        ))}\n      </Select>\n    </FormControl>\n  );\n}\n\nconst ReCenterButton = ({\n  setViewState,\n  use3d,\n  spatialHeight,\n  spatialWidth,\n  loader,\n  modelMatrix,\n}) => (\n  <Grid item xs=\"auto\" key=\"recenter\">\n    <Button\n      onClick={() => {\n        const defaultViewState = getDefaultInitialViewState(\n          loader.data,\n          { height: spatialHeight, width: spatialWidth },\n          1.5,\n          use3d,\n          new Matrix4(modelMatrix),\n        );\n        setViewState({\n          ...defaultViewState,\n          rotationX: 0,\n          rotationOrbit: 0,\n        });\n      }\n        }\n      disabled={!use3d}\n      style={{\n        padding: 0,\n        marginBottom: 6,\n      }}\n    >\n        Re-Center\n    </Button>\n  </Grid>\n);\n\nconst VolumeOptions = ({\n  handleSlicerSetting,\n  handleRenderingModeChange,\n  renderingMode,\n  xSlice,\n  ySlice,\n  zSlice,\n  use3d,\n  loader,\n  setViewState,\n  spatialHeight,\n  spatialWidth,\n  modelMatrix,\n}) => (\n  <>\n    <RenderingModeSelect\n      handleRenderingModeChange={handleRenderingModeChange}\n      renderingMode={renderingMode}\n      use3d={use3d}\n    />\n    <Slicer\n      xSlice={xSlice}\n      ySlice={ySlice}\n      zSlice={zSlice}\n      handleSlicerSetting={handleSlicerSetting}\n      use3d={use3d}\n      loader={loader}\n    />\n    <ReCenterButton\n      setViewState={setViewState}\n      use3d={use3d}\n      spatialHeight={spatialHeight}\n      spatialWidth={spatialWidth}\n      loader={loader}\n      modelMatrix={modelMatrix}\n    />\n  </>\n);\n\nexport default VolumeOptions;\n","import React, { useState, useRef, useEffect } from 'react';\nimport { MAX_CHANNELS, getChannelStats } from '@hms-dbmi/viv';\n\nimport Grid from '@material-ui/core/Grid';\nimport Button from '@material-ui/core/Button';\nimport AddIcon from '@material-ui/icons/Add';\nimport Slider from '@material-ui/core/Slider';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\n\nimport ExpansionPanel from '@material-ui/core/ExpansionPanel';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport VisibilityIcon from '@material-ui/icons/Visibility';\nimport VisibilityOffIcon from '@material-ui/icons/VisibilityOff';\n\nimport LayerOptions from './LayerOptions';\nimport VolumeOptions from './VolumeOptions';\nimport {\n  useControllerSectionStyles,\n  StyledExpansionPanelDetails,\n  StyledExpansionPanelSummary,\n  StyledInputLabel,\n  OverflowEllipsisGrid,\n} from './styles';\nimport { getMultiSelectionStats } from './utils';\n\nimport { GLOBAL_LABELS } from '../spatial/constants';\nimport { getSourceFromLoader, isRgb } from '../../utils';\nimport { canLoadResolution } from '../utils';\nimport { DOMAINS } from './constants';\n\nfunction TabPanel(props) {\n  const {\n    children, value, index, ...other\n  } = props;\n\n  return (\n    <div\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`simple-tabpanel-${index}`}\n      aria-labelledby={`simple-tab-${index}`}\n      {...other}\n    >\n      {value === index && children}\n    </div>\n  );\n}\n\n// Set the domain of the sliders based on either a full range or min/max.\nasync function getDomainsAndSliders(loader, selections, domainType, use3d) {\n  let domains;\n  const stats = await getMultiSelectionStats({\n    loader: loader.data,\n    selections,\n    use3d,\n  });\n  const { sliders } = stats;\n  if (domainType === 'Min/Max') {\n    // eslint-disable-next-line prefer-destructuring\n    domains = stats.domains;\n  }\n  if (domainType === 'Full') {\n    const source = getSourceFromLoader(loader);\n    domains = selections.map(() => DOMAINS[source.dtype]);\n  }\n  return { domains, sliders };\n}\n\nconst buttonStyles = {\n  borderStyle: 'dashed',\n  marginTop: '10px',\n  fontWeight: 400,\n};\n\n/**\n * Controller for the various imaging options (color, opactiy, sliders etc.)\n * @prop {object} imageData Image config object, one of the `images` in the raster schema.\n * @prop {object} layerId Randomly generated id for the image layer that this controller handles.\n * @prop {function} handleLayerRemove Callback for handling the removal of a layer.\n * @prop {object} loader Loader object for the current imaging layer.\n * @prop {function} handleLayerChange Callback for handling the changing of layer properties.\n */\nexport default function LayerController(props) {\n  const {\n    layer,\n    name,\n    loader,\n    theme,\n    handleLayerRemove,\n    handleLayerChange,\n    shouldShowTransparentColor,\n    shouldShowDomain,\n    shouldShowColormap,\n    ChannelController,\n    setViewState,\n    disable3d,\n    setRasterLayerCallback,\n    setAreLayerChannelsLoading,\n    areLayerChannelsLoading,\n    disabled,\n    spatialHeight,\n    spatialWidth,\n    disableChannelsIfRgbDetected,\n    shouldShowRemoveLayerButton,\n  } = props;\n\n  const {\n    colormap,\n    opacity,\n    channels,\n    transparentColor,\n    renderingMode,\n    xSlice,\n    ySlice,\n    zSlice,\n    resolution,\n    use3d,\n    modelMatrix,\n  } = layer;\n  // Channels are used in a lot of callbacks and change handlers\n  // so ensuring they have an up to date copy of the data ensures consistency.\n  // See: https://github.com/vitessce/vitessce/issues/1036\n  const channelRef = useRef(channels);\n  useEffect(() => {\n    channelRef.current = channels;\n    return undefined;\n  }, [channels]);\n\n  const firstSelection = channels[0]?.selection || {};\n\n  const { data, channels: channelOptions } = loader;\n  const [tab, setTab] = useState(0);\n\n  const handleTabChange = (event, newTab) => {\n    setTab(newTab);\n  };\n  const { labels, shape } = Array.isArray(data) ? data[data.length - 1] : data;\n  const [domainType, setDomainType] = useState(layer.domainType);\n  const [isExpanded, setIsExpanded] = useState(true);\n  const [globalLabelValues, setGlobalLabelValues] = useState(\n    GLOBAL_LABELS.filter(\n      field => typeof firstSelection[field] === 'number',\n    ).reduce((o, key) => ({ ...o, [key]: firstSelection[key] }), {}),\n  );\n\n  function setVisible(v) {\n    handleLayerChange({ ...layer, visible: v });\n  }\n\n  function setColormap(v) {\n    handleLayerChange({ ...layer, colormap: v });\n  }\n\n  function setOpacity(v) {\n    handleLayerChange({ ...layer, opacity: v });\n  }\n\n  function setChannels(v) {\n    handleLayerChange({ ...layer, channels: v });\n  }\n  function setTransparentColor(v) {\n    handleLayerChange({ ...layer, transparentColor: v });\n  }\n  function setRenderingMode(v) {\n    handleLayerChange({ ...layer, renderingMode: v });\n  }\n\n  function handleMultiPropertyChange(obj) {\n    handleLayerChange({ ...layer, ...obj });\n  }\n\n  function handleSlicerSetting(slice, val) {\n    handleLayerChange({ ...layer, [`${slice}Slice`]: val });\n  }\n\n  function setChannelsAndDomainType(newChannels, newDomainType) {\n    handleLayerChange({\n      ...layer,\n      channels: newChannels,\n      domainType: newDomainType,\n    });\n  }\n\n  function setChannel(v, i) {\n    const newChannels = [...channelRef.current];\n    newChannels[i] = v;\n    handleLayerChange({ ...layer, channels: newChannels });\n  }\n\n  function addChannel(v) {\n    const newChannels = [...channelRef.current, v];\n    handleLayerChange({ ...layer, channels: newChannels });\n  }\n\n  function removeChannel(i) {\n    const newChannels = [...channelRef.current];\n    newChannels.splice(i, 1);\n    handleLayerChange({ ...layer, channels: newChannels });\n  }\n\n  const setAreAllChannelsLoading = (val) => {\n    const newAreLayerChannelsLoading = channelRef.current.map(() => val);\n    setAreLayerChannelsLoading(newAreLayerChannelsLoading);\n  };\n\n  // Handles adding a channel, creating a default selection\n  // for the current global settings and domain type.\n  const handleChannelAdd = async () => {\n    const selection = {};\n    labels.forEach((label) => {\n      // Set new image to default selection for non-global selections (0)\n      // and use current global selection otherwise.\n      selection[label] = GLOBAL_LABELS.includes(label)\n        ? globalLabelValues[label] || 0\n        : 0;\n    });\n    const { domains, sliders } = await getDomainsAndSliders(\n      loader,\n      [selection],\n      domainType,\n      use3d,\n    );\n    const domain = domains[0];\n    const slider = domain;\n    const color = [255, 255, 255];\n    const visible = true;\n    const newChannelId = channels.length;\n    const newAreLayerChannelsLoading = [...areLayerChannelsLoading];\n    newAreLayerChannelsLoading[newChannelId] = true;\n    setAreLayerChannelsLoading(newAreLayerChannelsLoading);\n    const channel = {\n      selection,\n      slider,\n      visible,\n      color,\n    };\n    setRasterLayerCallback(() => {\n      setChannel({ ...channel, slider: sliders[0] }, newChannelId);\n      const areLayerChannelsLoadingCallback = [...newAreLayerChannelsLoading];\n      areLayerChannelsLoadingCallback[newChannelId] = false;\n      setAreLayerChannelsLoading(areLayerChannelsLoadingCallback);\n      setRasterLayerCallback(null);\n    });\n    addChannel(channel);\n  };\n\n  const handleDomainChange = async (value) => {\n    setDomainType(value);\n    const selections = channels.map(channel => channel.selection);\n    let sliders = channels.map(channel => channel.slider);\n    const { domains } = await getDomainsAndSliders(\n      loader,\n      selections,\n      value,\n      use3d,\n    );\n\n    // If it's the right-most slider, we take the minimum of that and the new value.\n    // Otherwise, we use the maximum of the left-hand side and the new value.\n    sliders = sliders.map((slider, i) => {\n      const [left, right] = slider;\n      return [Math.max(left, domains[i][0]), Math.min(right, domains[i][1])];\n    });\n\n    const newChannels = channels.map((c, i) => ({ ...c, slider: sliders[i] }));\n    setChannelsAndDomainType(newChannels, value);\n  };\n\n  // This call updates all channel selections with new global selection from the UI.\n  const handleGlobalChannelsSelectionChange = async ({ selection, event }) => {\n    const selections = channels.map(channel => ({\n      ...channel.selection,\n      ...selection,\n    }));\n    const canUpdateChannels = event.type === 'mouseup' || event.type === 'keydown';\n    // Only update domains on a mouseup event for the same reason as above.\n    if (canUpdateChannels) {\n      setAreAllChannelsLoading(true);\n      getDomainsAndSliders(loader, selections, domainType, use3d).then(\n        ({ sliders }) => {\n          const newChannelsWithSelection = channels.map(c => ({\n            ...c,\n            selection: { ...c.selection, ...selection },\n          }));\n          // Set the callback before changing the selection\n          // so the callback is used when the layer (re)loads its data.\n          setRasterLayerCallback(() => {\n            setRasterLayerCallback(null);\n            setAreAllChannelsLoading(false);\n            const newChannelsWithSliders = [...newChannelsWithSelection].map(\n              (c, i) => ({\n                ...c,\n                slider: sliders[i],\n              }),\n            );\n            setChannels(newChannelsWithSliders);\n          });\n          setChannels(newChannelsWithSelection);\n        },\n      );\n    }\n    setGlobalLabelValues(prev => ({ ...prev, ...selection }));\n  };\n\n  let channelControllers = [];\n  if (labels.length > 0) {\n    const channelLabel = labels.find(c => c === 'channel' || c === 'c') || labels[0];\n    // Create the channel controllers for each channel.\n    channelControllers = channels.map(\n      // c is an object like { color, selection, slider, visible }.\n      (c, channelId) => {\n        // Update the auxiliary store with the current loading state of a channel.\n        const setIsLoading = (val) => {\n          const newAreLayerChannelsLoading = [...areLayerChannelsLoading];\n          newAreLayerChannelsLoading[channelId] = val;\n          setAreLayerChannelsLoading(newAreLayerChannelsLoading);\n        };\n        // Change one property of a channel (for now - soon\n        // nested structures allowing for multiple z/t selecitons at once, for example).\n        const handleChannelPropertyChange = (property, value) => {\n          // property is something like \"selection\" or \"slider.\"\n          // value is the actual change, like { channel: \"DAPI\" }.\n          const update = { [property]: value };\n          if (property === 'selection') {\n            // Channel is loading until the layer callback is called\n            // by the layer, which fetches the raster data.\n            setIsLoading(true);\n            update.selection = {\n              ...globalLabelValues,\n              ...update.selection,\n            };\n            setChannel({ ...c, ...update }, channelId);\n            // Call back for raster layer handles update of UI\n            // like sliders and the loading state of the channel.\n            setRasterLayerCallback(async () => {\n              const selections = [\n                { ...channels[channelId][property], ...value },\n              ];\n              const { sliders } = await getDomainsAndSliders(\n                loader,\n                selections,\n                domainType,\n                use3d,\n              );\n              [update.slider] = sliders;\n              setChannel({ ...c, ...update }, channelId);\n              setRasterLayerCallback(null);\n              setIsLoading(false);\n            });\n          } else {\n            setChannel({ ...c, ...update }, channelId);\n          }\n        };\n        const handleChannelRemove = () => {\n          removeChannel(channelId);\n        };\n        const handleIQRUpdate = async () => {\n          const { data: loaderData } = loader;\n          const source = Array.isArray(loaderData)\n            ? loaderData[loaderData.length - 1]\n            : loaderData;\n          const raster = await source.getRaster({\n            selection: channels[channelId].selection,\n          });\n          const stats = getChannelStats(raster.data);\n          const { q1, q3 } = stats;\n          setChannel({ ...c, slider: [q1, q3] }, channelId);\n        };\n        return (\n          <ChannelController\n            // eslint-disable-next-line react/no-array-index-key\n            key={`channel-controller-${channelId}`}\n            dimName={channelLabel}\n            visibility={c.visible}\n            selectionIndex={c.selection[channelLabel]}\n            slider={c.slider}\n            color={c.color}\n            channels={channels}\n            channelId={channelId}\n            domainType={domainType}\n            loader={loader}\n            globalLabelValues={globalLabelValues}\n            theme={theme}\n            channelOptions={channelOptions}\n            colormapOn={Boolean(colormap)}\n            handlePropertyChange={handleChannelPropertyChange}\n            handleChannelRemove={handleChannelRemove}\n            handleIQRUpdate={handleIQRUpdate}\n            setRasterLayerCallback={setRasterLayerCallback}\n            isLoading={areLayerChannelsLoading[channelId]}\n            use3d={use3d}\n          />\n        );\n      },\n    );\n  }\n\n  const controllerSectionClasses = useControllerSectionStyles();\n\n  const { visible } = layer;\n  const visibleSetting = typeof visible === 'boolean' ? visible : true;\n  const Visibility = visibleSetting ? VisibilityIcon : VisibilityOffIcon;\n  // Only show Volume tabs if 3D is available.\n  const hasViewableResolutions = Boolean(\n    Array.from({\n      length: loader.data.length,\n    }).filter((_, res) => canLoadResolution(loader.data, res)).length,\n  );\n  const useVolumeTabs = !disable3d && shape[labels.indexOf('z')] > 1 && hasViewableResolutions;\n  const FullController = (\n    <>\n      <LayerOptions\n        channels={channels}\n        opacity={opacity}\n        colormap={colormap}\n        transparentColor={transparentColor}\n        domainType={domainType}\n        // Only allow for global dimension controllers that\n        // exist in the `dimensions` part of the loader.\n        globalControlLabels={labels.filter(label => GLOBAL_LABELS.includes(label))}\n        globalLabelValues={globalLabelValues}\n        handleOpacityChange={setOpacity}\n        handleColormapChange={setColormap}\n        handleGlobalChannelsSelectionChange={\n          handleGlobalChannelsSelectionChange\n        }\n        handleTransparentColorChange={setTransparentColor}\n        disableChannelsIfRgbDetected={\n          isRgb(loader) && disableChannelsIfRgbDetected\n        }\n        handleDomainChange={handleDomainChange}\n        shouldShowTransparentColor={shouldShowTransparentColor}\n        shouldShowDomain={shouldShowDomain}\n        shouldShowColormap={shouldShowColormap}\n        use3d={use3d}\n        loader={loader}\n        handleMultiPropertyChange={handleMultiPropertyChange}\n        resolution={resolution}\n        disable3d={disable3d}\n        setRasterLayerCallback={setRasterLayerCallback}\n        setAreAllChannelsLoading={setAreAllChannelsLoading}\n        setViewState={setViewState}\n        spatialHeight={spatialHeight}\n        spatialWidth={spatialWidth}\n        modelMatrix={modelMatrix}\n      />\n      {isRgb(loader) && disableChannelsIfRgbDetected\n        ? null\n        : channelControllers}\n      {isRgb(loader) && disableChannelsIfRgbDetected ? null : (\n        <Button\n          disabled={channels.length === MAX_CHANNELS}\n          onClick={handleChannelAdd}\n          fullWidth\n          variant=\"outlined\"\n          style={buttonStyles}\n          startIcon={<AddIcon />}\n          size=\"small\"\n        >\n          Add Channel\n        </Button>\n      )}\n    </>\n  );\n  return (\n    <ExpansionPanel\n      className={controllerSectionClasses.root}\n      onChange={(e, expanded) => !disabled\n        && setIsExpanded(\n          expanded && e?.target?.attributes?.role?.value === 'presentation',\n        )\n      }\n      TransitionProps={{ enter: false }}\n      expanded={!disabled && isExpanded}\n    >\n      <StyledExpansionPanelSummary\n        expandIcon={<ExpandMoreIcon />}\n        aria-controls={`layer-${name}-controls`}\n      >\n        <Grid container direction=\"column\" m={1} justify=\"center\">\n          <OverflowEllipsisGrid item>\n            <Button\n              onClick={(e) => {\n                if (!disabled) {\n                  // Needed to prevent affecting the expansion panel from changing\n                  e.stopPropagation();\n                  const nextVisible = typeof visible === 'boolean' ? !visible : false;\n                  setVisible(nextVisible);\n                }\n              }}\n              style={{\n                marginRight: 8,\n                marginBottom: 2,\n                padding: 0,\n                minWidth: 0,\n              }}\n            >\n              <Visibility />\n            </Button>\n            {name}\n          </OverflowEllipsisGrid>\n          {!disabled && !isExpanded && !use3d && (\n            <Grid\n              container\n              direction=\"row\"\n              alignItems=\"center\"\n              justify=\"center\"\n            >\n              <Grid item xs={6}>\n                <StyledInputLabel htmlFor={`layer-${name}-opacity-closed`}>\n                  Opacity:\n                </StyledInputLabel>\n              </Grid>\n              <Grid item xs={6}>\n                <Slider\n                  id={`layer-${name}-opacity-closed`}\n                  value={opacity}\n                  onChange={(e, v) => setOpacity(v)}\n                  valueLabelDisplay=\"auto\"\n                  getAriaLabel={() => 'opacity slider'}\n                  min={0}\n                  max={1}\n                  step={0.01}\n                  orientation=\"horizontal\"\n                />\n              </Grid>\n            </Grid>\n          )}\n        </Grid>\n      </StyledExpansionPanelSummary>\n      <StyledExpansionPanelDetails>\n        {useVolumeTabs ? (\n          <>\n            <Tabs\n              value={tab}\n              onChange={handleTabChange}\n              aria-label=\"simple tabs example\"\n              style={{ height: '24px', minHeight: '24px' }}\n            >\n              <Tab\n                label=\"Channels\"\n                style={{\n                  fontSize: '.75rem',\n                  bottom: 12,\n                  width: '50%',\n                  minWidth: '50%',\n                }}\n                disableRipple\n              />\n              <Tab\n                label=\"Volume\"\n                style={{\n                  fontSize: '.75rem',\n                  bottom: 12,\n                  width: '50%',\n                  minWidth: '50%',\n                }}\n              />\n            </Tabs>\n            <TabPanel value={tab} index={0}>\n              {FullController}\n            </TabPanel>\n            <TabPanel value={tab} index={1} style={{ marginTop: 4 }}>\n              <VolumeOptions\n                loader={loader}\n                handleSlicerSetting={handleSlicerSetting}\n                handleRenderingModeChange={setRenderingMode}\n                renderingMode={renderingMode}\n                xSlice={xSlice}\n                ySlice={ySlice}\n                zSlice={zSlice}\n                use3d={use3d}\n                setViewState={setViewState}\n                spatialHeight={spatialHeight}\n                spatialWidth={spatialWidth}\n                modelMatrix={modelMatrix}\n              />\n            </TabPanel>\n          </>\n        ) : (\n          FullController\n        )}\n        {shouldShowRemoveLayerButton ? (\n          <Button\n            onClick={handleLayerRemove}\n            fullWidth\n            variant=\"outlined\"\n            style={buttonStyles}\n            size=\"small\"\n          >\n            Remove Image Layer\n          </Button>\n        ) : null}\n      </StyledExpansionPanelDetails>\n    </ExpansionPanel>\n  );\n}\n","module.exports = require(\"@material-ui/core/Tab\");","import React from 'react';\nimport IconButton from '@material-ui/core/IconButton';\nimport LensIcon from '@material-ui/icons/Lens';\nimport { makeStyles } from '@material-ui/core/styles';\n\n\nimport { VIEWER_PALETTE } from '../utils';\n\nconst useStyles = makeStyles(theme => ({\n  container: {\n    width: '70px',\n    height: '40px',\n    display: 'flex',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    flexWrap: 'wrap',\n  },\n  button: {\n    padding: '3px',\n    width: '16px',\n  },\n  icon: {\n    width: '17px',\n    height: '17px',\n    stroke: theme.palette.action.selected,\n    'stroke-width': '1px',\n  },\n}));\n\nconst ColorPalette = ({ handleChange }) => {\n  const classes = useStyles();\n  return (\n    <div className={classes.container} aria-label=\"color-swatch\">\n      {VIEWER_PALETTE.map(color => (\n        <IconButton\n          className={classes.button}\n          key={color}\n          onClick={() => handleChange(color)}\n        >\n          <LensIcon\n            fontSize=\"small\"\n            style={{ color: `rgb(${color})` }}\n            className={classes.icon}\n          />\n        </IconButton>\n      ))}\n    </div>\n  );\n};\n\nexport default ColorPalette;\n","import React, { useState } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport { PopperMenu, MuiSpan } from '../shared-mui/components';\n\nimport ColorPalette from './ColorPalette';\n\nconst useStyles = makeStyles(() => ({\n  menuButton: {\n    backgroundColor: 'transparent',\n  },\n  colors: {\n    '&:hover': {\n      backgroundColor: 'transparent',\n    },\n    paddingLeft: '2px',\n    paddingRight: '2px',\n  },\n}));\n\n/**\n * Dropdown for options for a channel on the three dots button.\n * @prop {function} handlePropertyChange Callback for changing property (color, IQR of sliders).\n * @prop {function} handleChannelRemove Callback for channel removal.\n * @prop {function} handleIQRUpdate Callback for IQR slider update.\n */\nfunction ChannelOptions({ handlePropertyChange, handleChannelRemove, handleIQRUpdate }) {\n  const [open, setOpen] = useState(false);\n\n  const classes = useStyles();\n\n  const handleColorSelect = (color) => {\n    handlePropertyChange('color', color);\n  };\n\n  const handleRemove = () => {\n    setOpen(false);\n    handleChannelRemove();\n  };\n\n  return (\n    <PopperMenu\n      open={open}\n      setOpen={setOpen}\n      buttonIcon={<MoreVertIcon fontSize=\"small\" />}\n      buttonClassName={classes.menuButton}\n    >\n      <MenuItem dense disableGutters onClick={handleRemove}>\n        <MuiSpan>Remove</MuiSpan>\n      </MenuItem>\n      <MenuItem dense disableGutters onClick={handleIQRUpdate}>\n        <MuiSpan>Use IQR</MuiSpan>\n      </MenuItem>\n      <MenuItem dense disableGutters className={classes.colors}>\n        <ColorPalette handleChange={handleColorSelect} />\n      </MenuItem>\n    </PopperMenu>\n  );\n}\n\nexport default ChannelOptions;\n","import React from 'react';\n\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Select from '@material-ui/core/Select';\nimport { useSelectStyles } from './styles';\n\n/**\n * Dropdown for selecting a channel.\n * @prop {function} handleChange Callback for each new selection.\n * @prop {array} channelOptions List of available selections, like ['DAPI', 'FITC', ...].\n * @prop {boolean} disabled Whether or not the component is disabled.\n * @prop {number} selectionIndex Current numeric index of a selection.\n */\nexport function ChannelSelectionDropdown({\n  handleChange,\n  disabled,\n  channelOptions,\n  selectionIndex,\n}) {\n  const classes = useSelectStyles();\n  return (\n    <Select\n      classes={{ root: classes.selectRoot }}\n      native\n      value={selectionIndex}\n      onChange={e => handleChange(Number(e.target.value))}\n    >\n      {channelOptions.map((opt, i) => (\n        <option disabled={disabled} key={opt} value={i}>\n          {opt}\n        </option>\n      ))}\n    </Select>\n  );\n}\n\n/**\n * Checkbox for toggling on/off of a channel.\n * @prop {string} color Current color for this channel.\n * @prop {boolean} checked Whether or not this channel is \"on\".\n * @prop {boolean} disabled Whether or not the component is disabled.\n * @prop {function} toggle Callback for toggling on/off.\n */\nexport function ChannelVisibilityCheckbox({\n  color, checked, toggle, disabled,\n}) {\n  return (\n    <Checkbox\n      onChange={toggle}\n      checked={checked}\n      disabled={disabled}\n      style={{ color, '&$checked': { color } }}\n    />\n  );\n}\n","import React, { useCallback, useState, useEffect } from 'react';\n\nimport Grid from '@material-ui/core/Grid';\nimport Slider from '@material-ui/core/Slider';\nimport debounce from 'lodash/debounce';\nimport isEqual from 'lodash/isEqual';\n\nimport ChannelOptions from './ChannelOptions';\nimport { DOMAINS } from './constants';\nimport { getSourceFromLoader } from '../../utils';\nimport { getMultiSelectionStats } from './utils';\nimport {\n  ChannelSelectionDropdown,\n  ChannelVisibilityCheckbox,\n} from './shared-channel-controls';\n\n// Returns an rgb string for display, and changes the color (arr)\n// to use a grey for light theme + white color or if the colormap is on.\nexport const toRgbUIString = (on, arr, theme) => {\n  const color = on || (theme === 'light' && arr.every(i => i === 255))\n    ? [220, 220, 220]\n    : arr;\n  return `rgb(${color})`;\n};\n\nfunction abbreviateNumber(value) {\n  // Return an abbreviated representation of value, in 5 characters or less.\n\n  const maxLength = 5;\n  let maxNaiveDigits = maxLength;\n\n  /* eslint-disable no-plusplus */\n  if (!Number.isInteger(value)) {\n    --maxNaiveDigits;\n  } // Wasted on \".\"\n  if (value < 1) {\n    --maxNaiveDigits;\n  } // Wasted on \"0.\"\n  /* eslint-disable no-plusplus */\n\n  const naive = Intl.NumberFormat('en-US', {\n    maximumSignificantDigits: maxNaiveDigits,\n    useGrouping: false,\n  }).format(value);\n  if (naive.length <= maxLength) return naive;\n\n  // \"e+9\" consumes 3 characters, so if we even had two significant digits,\n  // it would take take us to six characters, including the decimal point.\n  return value.toExponential(0);\n}\n\n/**\n * Slider for controlling current colormap.\n * @prop {string} color Current color for this channel.\n * @prop {arry} slider Current value of the slider.\n * @prop {function} handleChange Callback for each slider change.\n * @prop {array} domain Current max/min allowable slider values.\n */\nfunction ChannelSlider({\n  color,\n  slider = [0, 0],\n  handleChange,\n  domain = [0, 0],\n  dtype,\n  disabled,\n}) {\n  const [min, max] = domain;\n  const handleChangeDebounced = useCallback(\n    debounce(handleChange, 3, { trailing: true }),\n    [handleChange],\n  );\n  const step = max - min < 500 && dtype === 'Float32' ? (max - min) / 500 : 1;\n  return (\n    <Slider\n      value={slider}\n      valueLabelFormat={abbreviateNumber}\n      onChange={(e, v) => handleChangeDebounced(v)}\n      valueLabelDisplay=\"auto\"\n      getAriaLabel={() => `${color}-${slider}`}\n      min={min}\n      max={max}\n      step={step}\n      orientation=\"horizontal\"\n      style={{ color, marginTop: '7px' }}\n      disabled={disabled}\n    />\n  );\n}\n\n/**\n * Controller for the handling the colormapping sliders.\n * @prop {boolean} visibility Whether or not this channel is \"on\"\n * @prop {array} slider Current slider range.\n * @prop {array} color Current color for this channel.\n * @prop {array} domain Current max/min for this channel.\n * @prop {string} dimName Name of the dimensions this slider controls (usually \"channel\").\n * @prop {boolean} colormapOn Whether or not the colormap (viridis, magma etc.) is on.\n * @prop {object} channelOptions All available options for this dimension (i.e channel names).\n * @prop {function} handlePropertyChange Callback for when a property (color, slider etc.) changes.\n * @prop {function} handleChannelRemove When a channel is removed, this is called.\n * @prop {function} handleIQRUpdate When the IQR button is clicked, this is called.\n * @prop {number} selectionIndex The current numeric index of the selection.\n */\nfunction RasterChannelController({\n  visibility = false,\n  slider,\n  color,\n  channels,\n  channelId,\n  domainType: newDomainType,\n  dimName,\n  theme,\n  loader,\n  colormapOn,\n  channelOptions,\n  handlePropertyChange,\n  handleChannelRemove,\n  handleIQRUpdate,\n  selectionIndex,\n  isLoading,\n  use3d: newUse3d,\n}) {\n  const { dtype } = getSourceFromLoader(loader);\n  const [domain, setDomain] = useState(null);\n  const [domainType, setDomainType] = useState(null);\n  const [use3d, setUse3d] = useState(null);\n  const [selection, setSelection] = useState([\n    { ...channels[channelId].selection },\n  ]);\n  const rgbColor = toRgbUIString(colormapOn, color, theme);\n\n  useEffect(() => {\n    // Use mounted to prevent state updates/re-renders after the component has been unmounted.\n    // All state updates should happen within the mounted check.\n    let mounted = true;\n    if (dtype && loader && channels) {\n      const selections = [{ ...channels[channelId].selection }];\n      let domains;\n      const hasDomainChanged = newDomainType !== domainType;\n      const has3dChanged = use3d !== newUse3d;\n      const hasSelectionChanged = !isEqual(selections, selection);\n      if (hasDomainChanged || hasSelectionChanged || has3dChanged) {\n        if (newDomainType === 'Full') {\n          domains = [DOMAINS[dtype]];\n          const [newDomain] = domains;\n          if (mounted) {\n            setDomain(newDomain);\n            setDomainType(newDomainType);\n            if (hasSelectionChanged) {\n              setSelection(selections);\n            }\n            if (has3dChanged) {\n              setUse3d(newUse3d);\n            }\n          }\n        } else {\n          getMultiSelectionStats({\n            loader: loader.data,\n            selections,\n            use3d: newUse3d,\n          }).then((stats) => {\n            // eslint-disable-next-line prefer-destructuring\n            domains = stats.domains;\n            const [newDomain] = domains;\n            if (mounted) {\n              setDomain(newDomain);\n              setDomainType(newDomainType);\n              if (hasSelectionChanged) {\n                setSelection(selections);\n              }\n              if (has3dChanged) {\n                setUse3d(newUse3d);\n              }\n            }\n          });\n        }\n      }\n    }\n    return () => {\n      mounted = false;\n    };\n  }, [\n    domainType,\n    channels,\n    channelId,\n    loader,\n    dtype,\n    newDomainType,\n    selection,\n    newUse3d,\n    use3d,\n  ]);\n  /* A valid selection is defined by an object where the keys are\n   *  the name of a dimension of the data, and the values are the\n   *  index of the image along that particular dimension.\n   *\n   *  Since we currently only support making a selection along one\n   *  addtional dimension (i.e. the dropdown just has channels or mz)\n   *  we have a helper function to create the selection.\n   *\n   *  e.g { channel: 2 } // channel dimension, third channel\n   */\n  const createSelection = index => ({ [dimName]: index });\n  return (\n    <Grid container direction=\"column\" m={1} justify=\"center\">\n      <Grid container direction=\"row\" justify=\"space-between\">\n        <Grid item xs={10}>\n          <ChannelSelectionDropdown\n            handleChange={v => handlePropertyChange('selection', createSelection(v))\n            }\n            selectionIndex={selectionIndex}\n            channelOptions={channelOptions}\n            disabled={isLoading}\n          />\n        </Grid>\n        <Grid item xs={1} style={{ marginTop: '4px' }}>\n          <ChannelOptions\n            handlePropertyChange={handlePropertyChange}\n            handleChannelRemove={handleChannelRemove}\n            handleIQRUpdate={handleIQRUpdate}\n            disabled={isLoading}\n          />\n        </Grid>\n      </Grid>\n      <Grid container direction=\"row\" justify=\"space-between\">\n        <Grid item xs={2}>\n          <ChannelVisibilityCheckbox\n            color={rgbColor}\n            checked={visibility}\n            toggle={() => handlePropertyChange('visible', !visibility)}\n            disabled={isLoading}\n          />\n        </Grid>\n        <Grid item xs={9}>\n          <ChannelSlider\n            color={rgbColor}\n            slider={slider}\n            domain={domain || DOMAINS[dtype]}\n            dtype={dtype}\n            handleChange={v => handlePropertyChange('slider', v)}\n            disabled={isLoading}\n          />\n        </Grid>\n      </Grid>\n    </Grid>\n  );\n}\n\nexport default RasterChannelController;\n","import React from 'react';\n\nimport RemoveCircleIcon from '@material-ui/icons/RemoveCircle';\nimport IconButton from '@material-ui/core/IconButton';\n\nimport Grid from '@material-ui/core/Grid';\n\nimport { ChannelSelectionDropdown, ChannelVisibilityCheckbox } from './shared-channel-controls';\n\n/**\n * Controller for the handling the bitmask channels.\n * @prop {boolean} visibility Whether or not this channel is \"on\"\n * @prop {string} dimName Name of the dimensions this slider controls (usually \"channel\").\n * @prop {object} channelOptions All available options for this dimension (i.e channel names).\n * @prop {function} handlePropertyChange Callback for when a property (color, slider etc.) changes.\n * @prop {function} handleChannelRemove When a channel is removed, this is called.\n * @prop {number} selectionIndex The current numeric index of the selection.\n * @prop {boolean} disableOptions Whether or not channel options are be disabled (default: false).\n */\nfunction BitmaskChannelController({\n  visibility = false,\n  dimName,\n  channelOptions,\n  handlePropertyChange,\n  handleChannelRemove,\n  selectionIndex,\n  disableOptions = false,\n}) {\n  /* A valid selection is defined by an object where the keys are\n  *  the name of a dimension of the data, and the values are the\n  *  index of the image along that particular dimension.\n  *\n  *  Since we currently only support making a selection along one\n  *  addtional dimension (i.e. the dropdown just has channels or mz)\n  *  we have a helper function to create the selection.\n  *\n  *  e.g { channel: 2 } // channel dimension, third channel\n  */\n  const createSelection = index => ({ [dimName]: index });\n  return (\n    <Grid container direction=\"row\" justify=\"space-between\">\n      <Grid item xs={2}>\n        <ChannelVisibilityCheckbox\n          color={[220, 220, 220]}\n          checked={visibility}\n          toggle={() => handlePropertyChange('visible', !visibility)}\n        />\n      </Grid>\n      <Grid item xs={9}>\n        <ChannelSelectionDropdown\n          handleChange={v => handlePropertyChange('selection', createSelection(v))}\n          selectionIndex={selectionIndex}\n          disableOptions={disableOptions}\n          channelOptions={channelOptions}\n        />\n      </Grid>\n      <Grid item xs={1}>\n        <IconButton onClick={handleChannelRemove} style={{ padding: '6px 6px 6px 0px' }}>\n          <RemoveCircleIcon />\n        </IconButton>\n      </Grid>\n    </Grid>\n  );\n}\n\nexport default BitmaskChannelController;\n","import React, { useState } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport AddIcon from '@material-ui/icons/Add';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport { PopperMenu } from '../shared-mui/components';\n\nconst useStyles = makeStyles(() => ({\n  addButton: {\n    marginTop: '10px',\n    marginBottom: '10px',\n    fontWeight: 400,\n  },\n}));\n\nfunction ImageAddIcon() {\n  return (\n    <>\n      <AddIcon />\n      Add Image Layer\n    </>\n  );\n}\n\nfunction ImageAddButton({ imageOptions, handleImageAdd }) {\n  const [open, setOpen] = useState(false);\n  const classes = useStyles();\n\n  const handleAdd = (imgData) => {\n    setOpen(prev => !prev);\n    handleImageAdd(imgData);\n  };\n\n  if (!imageOptions) return null;\n  return (\n    <PopperMenu\n      open={open}\n      setOpen={setOpen}\n      buttonIcon={<ImageAddIcon />}\n      buttonClassName={classes.addButton}\n    >\n      {imageOptions.map((imgData, i) => (\n        <MenuItem dense key={imgData.name} onClick={() => handleAdd(i)}>\n          <span>{imgData.name}</span>\n        </MenuItem>\n      ))}\n    </PopperMenu>\n  );\n}\n\nexport default ImageAddButton;\n","/* eslint-disable dot-notation */\nimport React, {\n  useEffect, useCallback, useRef, forwardRef,\n} from 'react';\nimport Grid from '@material-ui/core/Grid';\nimport TitleInfo from '../TitleInfo';\nimport RasterChannelController from './RasterChannelController';\nimport BitmaskChannelController from './BitmaskChannelController';\nimport VectorLayerController from './VectorLayerController';\nimport LayerController from './LayerController';\nimport ImageAddButton from './ImageAddButton';\nimport { useReady, useClosestVitessceContainerSize, useWindowDimensions } from '../hooks';\nimport { useCellsData, useMoleculesData, useRasterData } from '../data-hooks';\nimport {\n  useCoordination,\n  useLoaders,\n  useAuxiliaryCoordination,\n  useComponentLayout,\n} from '../../app/state/hooks';\nimport { COMPONENT_COORDINATION_TYPES } from '../../app/state/coordination';\nimport { initializeLayerChannels } from '../spatial/utils';\nimport { DEFAULT_RASTER_LAYER_PROPS } from '../spatial/constants';\n\nconst LAYER_CONTROLLER_DATA_TYPES = ['raster'];\n\n// LayerController is memoized to prevent updates from prop changes that\n// are caused by view state updates i.e zooming and panning within\n// the actual Spatial component.  Re-rendering this component is very\n// expensive so we have to be careful with props in this file in general.\nconst LayerControllerMemoized = React.memo(\n  forwardRef((props, ref) => {\n    const {\n      title,\n      removeGridComponent,\n      theme,\n      isReady,\n      moleculesLayer,\n      dataset,\n      setMoleculesLayer,\n      cellsLayer,\n      canShowCellVecmask,\n      setCellsLayer,\n      rasterLayers,\n      imageLayerLoaders,\n      imageLayerMeta,\n      rasterLayersCallbacks,\n      setRasterLayersCallbacks,\n      areLoadingRasterChannnels,\n      setAreLoadingRasterChannnels,\n      handleRasterLayerChange,\n      handleRasterLayerRemove,\n      disable3d,\n      globalDisable3d,\n      disableChannelsIfRgbDetected,\n      layerIs3DIndex,\n      setZoom,\n      setTargetX,\n      setTargetY,\n      setTargetZ,\n      setRotationX,\n      setRotationOrbit,\n      componentHeight,\n      componentWidth,\n      spatialLayout,\n      handleImageAdd,\n      enableLayerButtonsWithOneLayer,\n    } = props;\n    const shouldShowImageLayerButton = Boolean(\n      enableLayerButtonsWithOneLayer || imageLayerLoaders?.length > 1,\n    );\n    return (\n      <TitleInfo\n        title={title}\n        isScroll\n        removeGridComponent={removeGridComponent}\n        theme={theme}\n        isReady={isReady}\n      >\n        <div className=\"layer-controller-container\" ref={ref}>\n          {moleculesLayer && (\n            <VectorLayerController\n              key={`${dataset}-molecules`}\n              label=\"Molecules\"\n              layerType=\"molecules\"\n              layer={moleculesLayer}\n              handleLayerChange={setMoleculesLayer}\n            />\n          )}\n          {cellsLayer && canShowCellVecmask && (\n            <VectorLayerController\n              key={`${dataset}-cells`}\n              label=\"Cell Segmentations\"\n              layerType=\"cells\"\n              layer={cellsLayer}\n              handleLayerChange={setCellsLayer}\n            />\n          )}\n          {rasterLayers\n            && rasterLayers.map((layer, i) => {\n              const { index } = layer;\n              const loader = imageLayerLoaders[index];\n              const layerMeta = imageLayerMeta[index];\n              // Could also be bitmask at the moment.\n              const isRaster = !layerMeta?.metadata?.isBitmask;\n              const ChannelController = isRaster\n                ? RasterChannelController\n                : BitmaskChannelController;\n              // Set up the call back mechanism so that each layer manages\n              // callbacks/loading state for itself and its channels.\n              const setRasterLayerCallback = (cb) => {\n                const newRasterLayersCallbacks = [\n                  ...(rasterLayersCallbacks || []),\n                ];\n                newRasterLayersCallbacks[i] = cb;\n                setRasterLayersCallbacks(newRasterLayersCallbacks);\n              };\n              const areLayerChannelsLoading = (areLoadingRasterChannnels || [])[i] || [];\n              const setAreLayerChannelsLoading = (v) => {\n                const newAreLoadingRasterChannnels = [\n                  ...(areLoadingRasterChannnels || []),\n                ];\n                newAreLoadingRasterChannnels[i] = v;\n                setAreLoadingRasterChannnels(newAreLoadingRasterChannnels);\n              };\n              return loader && layerMeta ? (\n                <Grid\n                  // eslint-disable-next-line react/no-array-index-key\n                  key={`${dataset}-raster-${index}-${i}`}\n                  item\n                  style={{ marginTop: '10px' }}\n                >\n                  <LayerController\n                    name={layerMeta.name}\n                    layer={layer}\n                    loader={loader}\n                    theme={theme}\n                    handleLayerChange={v => handleRasterLayerChange(v, i)}\n                    handleLayerRemove={() => handleRasterLayerRemove(i)}\n                    ChannelController={ChannelController}\n                    shouldShowTransparentColor={isRaster}\n                    shouldShowDomain={isRaster}\n                    shouldShowColormap={isRaster}\n                    // Disable 3D if given explicit instructions to do so\n                    // or if another layer is using 3D mode.\n                    disable3d={\n                      globalDisable3d\n                      || (disable3d || []).indexOf(layerMeta.name) >= 0\n                      || (typeof layerIs3DIndex === 'number'\n                        && layerIs3DIndex !== -1\n                        && layerIs3DIndex !== i)\n                    }\n                    disabled={\n                      typeof layerIs3DIndex === 'number'\n                      && layerIs3DIndex !== -1\n                      && layerIs3DIndex !== i\n                    }\n                    disableChannelsIfRgbDetected={disableChannelsIfRgbDetected}\n                    rasterLayersCallbacks={rasterLayersCallbacks}\n                    setRasterLayerCallback={setRasterLayerCallback}\n                    setViewState={({\n                      zoom: newZoom,\n                      target,\n                      rotationX: newRotationX,\n                      rotationOrbit: newRotationOrbit,\n                    }) => {\n                      setZoom(newZoom);\n                      setTargetX(target[0]);\n                      setTargetY(target[1]);\n                      setTargetZ(target[2]);\n                      setRotationX(newRotationX);\n                      setRotationOrbit(newRotationOrbit);\n                    }}\n                    setAreLayerChannelsLoading={setAreLayerChannelsLoading}\n                    areLayerChannelsLoading={areLayerChannelsLoading}\n                    spatialHeight={(componentHeight * (spatialLayout ? spatialLayout.h : 1)) / 12}\n                    spatialWidth={(componentWidth * (spatialLayout ? spatialLayout.w : 1)) / 12}\n                    shouldShowRemoveLayerButton={shouldShowImageLayerButton}\n                  />\n                </Grid>\n              ) : null;\n            })}\n          {shouldShowImageLayerButton\n            ? (\n              <Grid item>\n                <ImageAddButton\n                  imageOptions={imageLayerMeta}\n                  handleImageAdd={handleImageAdd}\n                />\n              </Grid>\n            ) : null}\n        </div>\n      </TitleInfo>\n    );\n  }),\n);\n\n/**\n * A subscriber component for the spatial layer controller.\n * @param {object} props\n * @param {string} props.theme The current theme name.\n * @param {object} props.coordinationScopes The mapping from coordination types to coordination\n * scopes.\n * @param {function} props.removeGridComponent The callback function to pass to TitleInfo,\n * to call when the component has been removed from the grid.\n * @param {string} props.title The component title.\n * @param {Object} props.disable3d Which layers should have 3D disabled (from `raster.json` names).\n * @param {boolean} props.globalDisable3d Disable 3D for all layers. Overrides the `disable3d` prop.\n * @param {boolean} props.disableChannelsIfRgbDetected Disable channel controls if an\n * RGB image is detected i.e 3 channel 8 bit.\n * @param {boolean} props.enableLayerButtonsWithOneLayer If there is only one layer,\n * show the the layer add/remove buttons.\n */\nfunction LayerControllerSubscriber(props) {\n  const {\n    coordinationScopes,\n    removeGridComponent,\n    theme,\n    title = 'Spatial Layers',\n    disable3d,\n    globalDisable3d,\n    disableChannelsIfRgbDetected,\n    enableLayerButtonsWithOneLayer,\n  } = props;\n\n  const loaders = useLoaders();\n\n  // Get \"props\" from the coordination space.\n  const [\n    {\n      dataset,\n      spatialRasterLayers: rasterLayers,\n      spatialCellsLayer: cellsLayer,\n      spatialMoleculesLayer: moleculesLayer,\n    },\n    {\n      setSpatialRasterLayers: setRasterLayers,\n      setSpatialCellsLayer: setCellsLayer,\n      setSpatialMoleculesLayer: setMoleculesLayer,\n      setSpatialTargetX: setTargetX,\n      setSpatialTargetY: setTargetY,\n      setSpatialTargetZ: setTargetZ,\n      setSpatialRotationX: setRotationX,\n      setSpatialRotationOrbit: setRotationOrbit,\n      setSpatialZoom: setZoom,\n    },\n  ] = useCoordination(\n    COMPONENT_COORDINATION_TYPES.layerController,\n    coordinationScopes,\n  );\n\n  const [\n    {\n      rasterLayersCallbacks,\n      areLoadingRasterChannnels,\n    },\n    {\n      setRasterLayersCallbacks,\n      setAreLoadingRasterChannnels,\n    },\n  ] = useAuxiliaryCoordination(\n    COMPONENT_COORDINATION_TYPES.layerController,\n    coordinationScopes,\n  );\n  // Spatial layout + window size is needed for the \"re-center\" button to work properly.\n  // Dimensions of the Spatial component can be inferred and used for resetting view state to\n  // a nice, centered view.\n  const [spatialLayout] = useComponentLayout('spatial', ['spatialRasterLayers'], coordinationScopes);\n  const layerControllerRef = useRef();\n  const [componentWidth, componentHeight] = useClosestVitessceContainerSize(layerControllerRef);\n  const { height: windowHeight, width: windowWidth } = useWindowDimensions();\n\n  const [\n    isReady,\n    setItemIsReady,\n    setItemIsNotReady, // eslint-disable-line no-unused-vars\n    resetReadyItems,\n  ] = useReady(\n    LAYER_CONTROLLER_DATA_TYPES,\n  );\n\n  // Reset loader progress when the dataset has changed.\n  useEffect(() => {\n    resetReadyItems();\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  // Get data from loaders using the data hooks.\n  // eslint-disable-next-line no-unused-vars\n  const [raster, imageLayerLoaders, imageLayerMeta] = useRasterData(\n    loaders, dataset, setItemIsReady, () => { }, false,\n    { setSpatialRasterLayers: setRasterLayers },\n    { spatialRasterLayers: rasterLayers },\n  );\n\n  useCellsData(\n    loaders, dataset, setItemIsReady, () => {}, false,\n    { setSpatialCellsLayer: setCellsLayer },\n    { spatialCellsLayer: cellsLayer },\n  );\n  useMoleculesData(\n    loaders, dataset, setItemIsReady, () => {}, false,\n    { setSpatialMoleculesLayer: setMoleculesLayer },\n    { spatialMoleculesLayer: moleculesLayer },\n  );\n\n  // useCallback prevents new functions from propogating\n  // changes to the underlying component.\n  const handleImageAdd = useCallback(async (index) => {\n    const loader = imageLayerLoaders[index];\n    const newChannels = await initializeLayerChannels(\n      loader,\n      (rasterLayers[index] || {}).use3d,\n    );\n    const newLayer = {\n      index,\n      modelMatrix: imageLayerMeta[index]?.metadata?.transform?.matrix,\n      ...DEFAULT_RASTER_LAYER_PROPS,\n      channels: newChannels,\n      type: imageLayerMeta[index]?.metadata?.isBitmask ? 'bitmask' : 'raster',\n    };\n    const newLayers = [...rasterLayers, newLayer];\n    setRasterLayers(newLayers);\n  }, [imageLayerLoaders, imageLayerMeta, rasterLayers, setRasterLayers]);\n\n  const handleRasterLayerChange = useCallback((newLayer, i) => {\n    const newLayers = [...rasterLayers];\n    newLayers[i] = newLayer;\n    setRasterLayers(newLayers);\n  }, [rasterLayers, setRasterLayers]);\n\n  const handleRasterLayerRemove = useCallback((i) => {\n    const newLayers = [...rasterLayers];\n    newLayers.splice(i, 1);\n    setRasterLayers(newLayers);\n  }, [rasterLayers, setRasterLayers]);\n\n  const hasNoBitmask = (\n    imageLayerMeta.length ? imageLayerMeta : [{ metadata: { isBitmask: true } }]\n  ).every(l => !l?.metadata?.isBitmask);\n  // Only want to show vector cells controller if there is no bitmask\n  const canShowCellVecmask = hasNoBitmask;\n  const layerIs3DIndex = rasterLayers?.findIndex && rasterLayers.findIndex(layer => layer.use3d);\n  return (\n    <LayerControllerMemoized\n      ref={layerControllerRef}\n      title={title}\n      removeGridComponent={removeGridComponent}\n      theme={theme}\n      isReady={isReady}\n      moleculesLayer={moleculesLayer}\n      dataset={dataset}\n      setMoleculesLayer={setMoleculesLayer}\n      cellsLayer={cellsLayer}\n      canShowCellVecmask={canShowCellVecmask}\n      setCellsLayer={setCellsLayer}\n      rasterLayers={rasterLayers}\n      imageLayerLoaders={imageLayerLoaders}\n      imageLayerMeta={imageLayerMeta}\n      rasterLayersCallbacks={rasterLayersCallbacks}\n      setRasterLayersCallbacks={setRasterLayersCallbacks}\n      areLoadingRasterChannnels={areLoadingRasterChannnels}\n      setAreLoadingRasterChannnels={setAreLoadingRasterChannnels}\n      handleRasterLayerChange={handleRasterLayerChange}\n      handleRasterLayerRemove={handleRasterLayerRemove}\n      disable3d={disable3d}\n      globalDisable3d={globalDisable3d}\n      layerIs3DIndex={layerIs3DIndex}\n      disableChannelsIfRgbDetected={disableChannelsIfRgbDetected}\n      enableLayerButtonsWithOneLayer={enableLayerButtonsWithOneLayer}\n      setZoom={setZoom}\n      setTargetX={setTargetX}\n      setTargetY={setTargetY}\n      setTargetZ={setTargetZ}\n      setRotationX={setRotationX}\n      setRotationOrbit={setRotationOrbit}\n      // Fall back to window for height and width.\n      componentHeight={componentHeight || windowHeight}\n      componentWidth={componentWidth || windowWidth}\n      spatialLayout={spatialLayout}\n      handleImageAdd={handleImageAdd}\n    />\n  );\n}\n\nexport default LayerControllerSubscriber;\n","module.exports = require(\"@material-ui/icons/MoreVert\");","module.exports = require(\"@material-ui/icons/Lens\");","module.exports = require(\"@material-ui/core/ExpansionPanelSummary\");","module.exports = require(\"@material-ui/core/ExpansionPanelDetails\");","module.exports = require(\"@material-ui/icons/RemoveCircle\");","module.exports = require(\"@material-ui/core/Tabs\");","module.exports = require(\"@material-ui/core/ExpansionPanel\");","module.exports = require(\"@material-ui/icons/ExpandMore\");","module.exports = require(\"@material-ui/icons/Visibility\");","module.exports = require(\"@material-ui/icons/VisibilityOff\");","module.exports = require(\"@material-ui/core/FormControl\");","export { default as LayerControllerSubscriber } from './LayerControllerSubscriber';\nexport { default as LayerController } from './LayerController';\nexport { default as VectorLayerController } from './VectorLayerController';\n"],"sourceRoot":""}