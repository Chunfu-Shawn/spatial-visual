{"version":3,"sources":["../webpack/bootstrap","../external \"react\"","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","app/state/hooks.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js","utils.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js","layers/heatmap-constants.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js","components/utils.js","../external \"@luma.gl/constants\"","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/typeof.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits.js","../external \"lodash/isEqual\"","../external \"@material-ui/core/styles\"","components/sets/constants.js","components/hooks.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","../external \"@deck.gl/core\"","loaders/errors/LoaderValidationError.js","loaders/errors/LoaderNotFoundError.js","loaders/errors/index.js","../external \"@hms-dbmi/viv\"","components/sets/utils.js","components/sets/cell-set-utils.js","../external \"@material-ui/core/Grid\"","app/state/coordination.js","../external \"@material-ui/core/TableCell\"","components/data-hooks.js","components/classNames.js","components/spatial/constants.js","../external \"zustand\"","layers/constants.js","../external \"lodash/debounce\"","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","../external \"@deck.gl/layers\"","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","loaders/errors/AbstractLoaderError.js","components/LoadingIndicator.js","components/TitleInfo.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","../external \"@material-ui/core/IconButton\"","../external \"@material-ui/core/colors\"","../external \"@material-ui/core/Slider\"","../external \"@material-ui/core/TableRow\"","../external \"lodash/range\"","components/shared-mui/components.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","components/shared-plot-options/styles.js","../external \"d3-array\"","../external \"@material-ui/core/Paper\"","../external \"lodash/clamp\"","../external \"@material-ui/core/MenuItem\"","../external \"zustand/context\"","../external \"zustand/shallow\"","components/layer-controller/styles.js","../external \"mathjs\"","../external \"@material-ui/core/Popper\"","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/superPropBase.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/get.js","components/shared-mui/styles.js","../external \"math.gl\"","../external \"@material-ui/icons/ArrowDropDown\"","../external \"@material-ui/icons/ArrowDropUp\"","../external \"@turf/helpers\"","components/layer-controller/utils.js","../external \"uuid/v4\"","../external \"deck.gl\"","../external \"nebula.gl\"","../external \"@material-ui/core/Select\"","../external \"@luma.gl/core\"","../external \"@material-ui/core/Checkbox\"","components/shared-plot-options/OptionSelect.js","components/sets/io.js","layers/bitmask-layer-shaders.js","layers/BitmaskLayer.js","components/spatial/utils.js","../external \"@material-ui/icons/CloudDownload\"","../external \"@material-ui/core/Link\"","../external \"@material-ui/icons/Settings\"","../external \"@material-ui/icons/Close\"","../external \"@material-ui/core/CircularProgress\"","../external \"@material-ui/core/MenuList\"","../external \"@material-ui/core/ClickAwayListener\"","../external \"@material-ui/core/Fade\"","../external \"fast-deep-equal\"","../external \"lodash/isNil\"","../external \"tinycolor2\"","components/tooltip/Tooltip2D.js","components/tooltip/TooltipContent.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js","../external \"zarr\"","components/shared-plot-options/OptionsContainer.js","../external \"ajv\"","components/tooltip/styles.js","components/tooltip/Tooltip.js","components/vega/ReactVega.js","components/vega/VegaPlot.js","components/vega/utils.js","components/vega/index.js","components/interpolate-colors.js","../external \"@turf/centroid\"","../external \"concaveman\"","../external \"@nebula.gl/edit-modes\"","layers/HeatmapCompositeTextLayer.js","layers/PixelatedBitmapLayer.js","layers/heatmap-bitmap-layer-shaders.js","layers/HeatmapBitmapLayer.js","../external \"@material-ui/core/InputLabel\"","../external \"classnames\"","../external \"@material-ui/core/Button\"","../external \"d3-quadtree\"","layer-extensions/ScaledExpressionExtension/shader-module.js","layer-extensions/ScaledExpressionExtension/ScaledExpressionExtension.js","layer-extensions/ScaledExpressionExtension/index.js","layer-extensions/SelectionExtension/shader-module.js","layer-extensions/SelectionExtension/SelectionExtension.js","layer-extensions/SelectionExtension/index.js","layer-extensions/index.js","../external \"@material-ui/core/Box\"","../external \"@material-ui/core/Table\"","../external \"@material-ui/core/TableBody\"","../external \"@material-ui/core/TableContainer\"","components/layer-controller/constants.js","../external \"@material-ui/core/Typography\"","components/shared-spatial-scatterplot/quadtree.js","components/shared-plot-options/CellColorEncodingOption.js","assets/tools/near_me.svg","assets/tools/selection_rectangle.svg","assets/tools/selection_lasso.svg","components/shared-spatial-scatterplot/ToolMenu.js","components/shared-spatial-scatterplot/cursor.js","components/shared-spatial-scatterplot/AbstractSpatialOrScatterplot.js","layers/SelectionLayer.js","layers/selection-utils.js","layers/index.js","components/heatmap/utils.js","Pool.js","components/heatmap/HeatmapWorkerPool.js","components/heatmap/Heatmap.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js","components/spatial/Spatial.js","components/shared-spatial-scatterplot/force-collide-rects.js","components/scatterplot/Scatterplot.js","../external \"rc-tree\"","components/layer-controller/VectorLayerController.js","../external \"@material-ui/icons/Add\"","../external \"@deck.gl/extensions\"","../external \"@turf/boolean-within\"","../external \"@turf/boolean-contains\"","../external \"@turf/boolean-overlap\"","../external \"@turf/boolean-point-in-polygon\"","../external \"@nebula.gl/layers\"","../external \"short-number\"","../external \"regenerator-runtime\"","components/scatterplot/ScatterplotTooltipSubscriber.js","components/scatterplot/ScatterplotOptions.js","components/shared-spatial-scatterplot/dynamic-opacity.js","components/scatterplot/ScatterplotSubscriber.js","components/heatmap/HeatmapTooltipSubscriber.js","components/heatmap/HeatmapOptions.js","components/heatmap/HeatmapSubscriber.js","components/spatial/SpatialOptions.js","components/spatial/SpatialTooltipSubscriber.js","components/spatial/SpatialSubscriber.js","components/status/Status.js","components/sets/CellSetSizesPlot.js","components/sets/Tree.js","components/sets/HelpTooltip.js","components/sets/Popover.js","components/sets/PopoverMenu.js","assets/menu.svg","components/sets/TreeNode.js","assets/sets/union.svg","assets/sets/intersection.svg","assets/sets/complement.svg","components/sets/SetsManagerButtons.js","components/sets/SetsManager.js","components/selectable-table/SelectableTable.js","components/genes/Genes.js","components/layer-controller/LayerOptions.js","components/layer-controller/VolumeOptions.js","components/layer-controller/LayerController.js","../external \"react-virtualized\"","../external \"@material-ui/core/Tab\"","../external \"react-vega\"","components/status/StatusSubscriber.js","components/genes/GenesSubscriber.js","components/sets/CellSetsManagerSubscriber.js","components/sets/CellSetSizesPlotSubscriber.js","components/layer-controller/ColorPalette.js","components/layer-controller/ChannelOptions.js","components/layer-controller/shared-channel-controls.js","components/layer-controller/RasterChannelController.js","components/layer-controller/BitmaskChannelController.js","components/layer-controller/ImageAddButton.js","components/layer-controller/LayerControllerSubscriber.js","components/heatmap/heatmap.worker.js","../external \"d3-force\"","../external \"d3-dsv\"","../external \"json2csv\"","../external \"lodash/union\"","../external \"lodash/difference\"","../external \"clsx\"","../external \"rc-tree/es/util\"","../external \"react-color\"","../external \"rc-tooltip\"","../external \"@material-ui/icons/MoreVert\"","../external \"@material-ui/icons/Lens\"","../external \"@material-ui/core/ExpansionPanelSummary\"","../external \"@material-ui/core/ExpansionPanelDetails\"","../external \"@material-ui/icons/RemoveCircle\"","../external \"@material-ui/core/Tabs\"","../external \"@material-ui/core/ExpansionPanel\"","../external \"@material-ui/icons/ExpandMore\"","../external \"@material-ui/icons/Visibility\"","../external \"@material-ui/icons/VisibilityOff\"","../external \"@material-ui/core/FormControl\"","../external \"vega-tooltip\"","../external \"lodash/cloneDeep\"","components/heatmap/index.js","components/spatial/index.js","components/scatterplot/index.js","../node_modules/worker-loader/dist/workers/InlineWorker.js","../external \"react-grid-layout\"","../external \"higlass-zarr-datafetchers\"","../external \"lz-string\"","../external \"internmap\"","../external \"react-dom\"","../external \"dynamic-import-polyfill\"","../external \"higlass-register\"","../external \"bowser\"","css/index.scss","../node_modules/react-grid-layout/css/styles.css","../node_modules/react-resizable/css/styles.css","app/vitessce-grid-layout/layout-utils.js","app/vitessce-grid-layout/VitessceGridLayout.js","loaders/AbstractLoader.js","loaders/AbstractTwoStepLoader.js","loaders/LoaderResult.js","loaders/JsonLoader.js","loaders/MatrixZarrLoader.js","loaders/GenesJsonAsMatrixZarrLoader.js","loaders/ClustersJsonAsMatrixZarrLoader.js","loaders/RasterJsonLoader.js","loaders/OmeZarrLoader.js","loaders/CellSetsJsonLoader.js","loaders/anndata-loaders/CellSetsZarrLoader.js","loaders/anndata-loaders/CellsZarrLoader.js","loaders/anndata-loaders/MatrixZarrLoader.js","loaders/anndata-loaders/index.js","loaders/GenomicProfilesZarrLoader.js","loaders/data-sources/ZarrDataSource.js","loaders/data-sources/AnnDataSource.js","loaders/errors/DataSourceFetchError.js","loaders/data-sources/JsonSource.js","loaders/types.js","app/vitessce-grid-utils.js","app/VitessceGrid.js","app/api.js","app/Welcome.js","app/Warning.js","app/view-config-upgraders.js","app/view-config-versions.js","app/CallbackPublisher.js","components/description/Description.js","components/description/DescriptionSubscriber.js","components/higlass/HiGlassLazy.js","components/higlass/HiGlassSubscriber.js","components/higlass/GenomicProfilesSubscriber.js","components/genes/ExpressionHistogram.js","components/genes/ExpressionHistogramSubscriber.js","components/sets/hooks.js","components/sets/CellSetExpressionPlotOptions.js","components/sets/CellSetExpressionPlot.js","components/sets/CellSetExpressionPlotSubscriber.js","app/component-registry.js","app/view-config-utils.js","app/Vitessce.js","app/app.js","app/export-utils.js","api/VitessceConfig.js","index.js"],"names":["createContext","ViewConfigProviderLocal","Provider","useViewConfigStoreLocal","useStore","useViewConfigStoreApiLocal","useStoreApi","ViewConfigProvider","useViewConfigStore","useViewConfigStoreApi","AuxiliaryProviderLocal","useAuxiliaryStoreLocal","AuxiliaryProvider","useAuxiliaryStore","createViewConfigStore","create","set","viewConfig","loaders","setViewConfig","setLoaders","setCoordinationValue","parameter","scope","value","state","coordinationSpace","removeComponent","i","newLayout","layout","slice","splice","changeLayout","newComponentProps","forEach","newProps","useComponentLayout","component","scopes","coordinationScopes","filter","l","every","createAuxiliaryStore","auxiliaryStore","useHoverStore","componentHover","setComponentHover","useWarnStore","warning","setWarning","useViewInfoStore","viewInfo","setComponentViewInfo","uuid","useGridSizeStore","resizeCount","incrementResizeCount","useCoordination","parameters","values","fromEntries","map","undefined","shallow","setters","useMemo","setterName","capitalize","setterFunc","AUXILIARY_COORDINATION_TYPES_MAP","spatialRasterLayers","mapCoordinationScopes","newCoordinationScopes","Object","keys","key","newCoordinationTypes","coordinationType","mapParameters","Boolean","flat","useAuxiliaryCoordination","mappedCoordinationScopes","mappedParameters","useLoaders","useLayout","useRemoveComponent","useChangeLayout","useSetLoaders","useSetViewConfig","viewConfigStoreApi","setViewConfigRef","useRef","getState","current","useComponentHover","useSetComponentHover","useWarning","useSetWarning","useComponentViewInfo","useCallback","useSetComponentViewInfo","setViewInfoRef","useGridResize","useEmitGridResize","iterable","reduce","obj","val","assign","range","length","Array","pluralize","singular","plural","count","word","charAt","toUpperCase","getNextScope","prevScopes","chars","nextCharIndices","next","r","charIndex","unshift","increment","push","join","nextScope","includes","getSourceFromLoader","loader","level","data","source","isArray","isRgb","shape","dtype","labels","channelSize","indexOf","TILE_SIZE","MIN_ROW_AGG","MAX_ROW_AGG","COLOR_BAR_SIZE","AXIS_LABEL_TEXT_SIZE","AXIS_TITLE_TEXT_SIZE","AXIS_MIN_SIZE","AXIS_MAX_SIZE","AXIS_MARGIN","THEME_TO_TEXT_COLOR","dark","light","AXIS_FONT_FAMILY","PIXELATED_TEXTURE_PARAMETERS","GL","TEXTURE_MIN_FILTER","NEAREST","TEXTURE_MAG_FILTER","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","makeCellStatusMessage","cellInfoFactors","entries","factor","cellLayerDefaultProps","cells","updateStatus","setCellHighlight","coordinateSystem","COORDINATE_SYSTEM","CARTESIAN","pickable","autoHighlight","stroked","filled","getElevation","onHover","info","object","cellId","cellInfo","factors","DEFAULT_DARK_COLOR","DEFAULT_LIGHT_COLOR","getDefaultColor","theme","PALETTE","VIEWER_PALETTE","COLORMAP_OPTIONS","DEFAULT_GL_OPTIONS","webgl2","createDefaultUpdateStatus","componentName","message","console","warn","createDefaultUpdateCellsSelection","cellsSelection","createDefaultUpdateCellsHover","hoverInfo","createDefaultUpdateGenesHover","geneId","createDefaultUpdateViewInfo","createDefaultClearPleaseWait","copyUint8Array","arr","newBuffer","ArrayBuffer","buffer","byteLength","newArr","Uint8Array","getNextNumberedNodeName","nodes","prefix","find","n","name","setCellSelection","cellSelection","additionalCellSets","cellSetColor","setCellSetSelection","setAdditionalCellSets","setCellSetColor","setCellColorEncoding","CELL_SELECTIONS_LEVEL_ZERO_NAME","selectionsLevelZeroNode","tree","nextAdditionalCellSets","version","HIERARCHICAL_SCHEMAS","SETS_DATATYPE_CELL","latestVersion","datatype","nextName","children","colorIndex","d","nextPath","path","color","mergeCellSets","cellSets","createWarningComponent","props","title","PRIMARY_CARD","asEsModule","__esModule","default","formatBytes","bytes","decimals","k","dm","sizes","Math","floor","log","parseFloat","pow","toFixed","getStatsForResolution","resolution","height","width","depth","depthDownsampled","max","totalBytes","canLoadResolution","maxHeapSize","window","performance","memory","jsHeapSizeLimit","maxSize","FILE_EXTENSION_JSON","MIME_TYPE_JSON","FILE_EXTENSION_TABULAR","MIME_TYPE_TABULAR","SEPARATOR_TABULAR","NA_VALUE_TABULAR","cell","schema","cellSetsSchema","TABULAR_SCHEMAS","cellSetsTabularSchema","getWindowDimensions","innerWidth","innerHeight","useVitessceContainer","ref","closest","VITESSCE_CONTAINER","useWindowDimensions","useState","windowDimensions","setWindowDimensions","useEffect","handleResize","onResizeDebounced","debounce","trailing","addEventListener","removeEventListener","useGridItemSize","containerRef","setHeight","setWidth","onWindowResize","container","containerRect","getBoundingClientRect","useDeckCanvasSize","deckRef","canvas","deck","canvasRect","useReady","supportedItems","items","waiting","setWaiting","setItemIsReady","readyItem","waitingItems","nextWaitingItems","item","JSON","stringify","setItemIsNotReady","notReadyItem","resetReadyItems","isReady","useUrls","urls","setUrls","addUrl","url","prev","resetUrls","useClosestVitessceContainerSize","componentHeight","clientHeight","componentWidth","clientWidth","useExpressionValueGetter","attrs","expressionData","cellIdMap","result","rows","getExpressionValue","entry","cellIndex","LoaderValidationError","datasetType","datasetFileType","datasetUrl","reason","AbstractLoaderError","LoaderNotFoundError","callbackOnKeyPress","event","callback","preventDefault","colorArrayToString","rgbArray","tinycolor","g","b","toHexString","colorStringToArray","colorString","colorObj","toRgb","getLevelTooltipText","subs","j","repeat","isEqualOrPrefix","targetPath","testPath","isEqual","tryRenamePath","nextTargetPath","PATH_SEP","pathToKey","generateKey","uuidv4","nodeToSet","currNode","flatMap","c","nodeToHeight","newLevel","childrenHeights","getNodeLength","acc","curr","nodeFindNodeByNamePath","node","currLevelIndex","currNodeName","foundNodes","child","treeFindNodeByNamePath","currTree","targetNamePath","levelZeroNode","nodeTransform","predicate","transform","transformedPaths","currPath","newPath","concat","nodeTransformAll","newNode","nodeAppendChild","newChild","nodePrependChild","nodeInsertChild","insertIndex","newChildren","from","treeToUnion","checkedPaths","nodeSets","a","h","hEl","treeToIntersection","treeToComplement","primaryUnion","el","nodeToLevelDescendantNamePaths","prevPath","stopEarly","treeExport","treeExportLevelZeroNode","nodePath","cellSetColors","nodeWithColors","nPath","nodeColor","treeWithOneLevelZeroNode","treeToExport","nodeName","treeExportSet","setToExport","treeInitialize","nodeToRenderProps","nodeKey","size","isLeaf","colorMixWithUncertainty","originalColor","p","mixingColor","treeToCellColorsBySetNames","selectedNamePaths","cellColorsArray","setNamePath","nodeSet","prob","isNil","Map","treeToObjectsBySetNames","setColor","cellsArray","obsId","treeToCellPolygonsBySetNames","mapping","cellSetPolygons","cellPositions","mappings","points","turfFeatureCollection","turfPoint","concavity","Infinity","hullCoords","concaveman","centroidCoords","centroid","geometry","coordinates","hull","treeToSetSizesBySetNames","filterNode","filterPath","treeToExpectedCheckedLevel","lzn","levelZeroPath","levelIndex","levelNodePaths","treesConflict","testCellSets","paths","testPaths","hasConflict","getPaths","getTestPaths","initializeCellSetColor","nextCellSetColor","nodeCountPerTreePerLevel","fill","processNode","hierarchyLevel","treeIndex","index","getCellSetPolygons","params","cellSetSelection","COORDINATION_TYPES","DATASET","EMBEDDING_TYPE","EMBEDDING_ZOOM","EMBEDDING_ROTATION","EMBEDDING_TARGET_X","EMBEDDING_TARGET_Y","EMBEDDING_TARGET_Z","EMBEDDING_CELL_SET_POLYGONS_VISIBLE","EMBEDDING_CELL_SET_LABELS_VISIBLE","EMBEDDING_CELL_SET_LABEL_SIZE","EMBEDDING_CELL_RADIUS","EMBEDDING_CELL_OPACITY","EMBEDDING_CELL_RADIUS_MODE","EMBEDDING_CELL_OPACITY_MODE","SPATIAL_ZOOM","SPATIAL_ROTATION","SPATIAL_TARGET_X","SPATIAL_TARGET_Y","SPATIAL_TARGET_Z","SPATIAL_ROTATION_X","SPATIAL_ROTATION_Y","SPATIAL_ROTATION_Z","SPATIAL_ROTATION_ORBIT","SPATIAL_ORBIT_AXIS","SPATIAL_AXIS_FIXED","HEATMAP_ZOOM_X","HEATMAP_ZOOM_Y","HEATMAP_TARGET_X","HEATMAP_TARGET_Y","CELL_FILTER","CELL_HIGHLIGHT","CELL_SET_SELECTION","CELL_SET_HIGHLIGHT","CELL_SET_COLOR","GENE_FILTER","GENE_HIGHLIGHT","GENE_SELECTION","GENE_EXPRESSION_COLORMAP","GENE_EXPRESSION_TRANSFORM","GENE_EXPRESSION_COLORMAP_RANGE","CELL_COLOR_ENCODING","SPATIAL_RASTER_LAYERS","SPATIAL_CELLS_LAYER","SPATIAL_MOLECULES_LAYER","SPATIAL_NEIGHBORHOODS_LAYER","GENOMIC_ZOOM_X","GENOMIC_ZOOM_Y","GENOMIC_TARGET_X","GENOMIC_TARGET_Y","ADDITIONAL_CELL_SETS","MOLECULE_HIGHLIGHT","DEFAULT_COORDINATION_VALUES","AUTO_INDEPENDENT_COORDINATION_TYPES","COMPONENT_COORDINATION_TYPES","scatterplot","spatial","heatmap","cellSetSizes","cellSetExpression","status","genes","expressionHistogram","layerController","higlass","genomicProfiles","description","error","warnInConsole","initCoordinationSpace","initialValues","initialValue","shouldInit","equal","useDescription","dataset","setDescription","useCellsData","isRequired","coordinationSetters","initialCoordinationValues","setCells","cellsCount","setCellsCount","load","catch","e","then","payload","coordinationValues","coordinationValuesOrDefault","spatialCellsLayer","DEFAULT_CELLS_LAYER","useCellSetsData","setCellSets","useExpressionMatrixData","expressionMatrix","setExpressionMatrix","cols","matrix","useGeneSelection","selection","geneData","setGeneData","implementsGeneSelection","loadGeneSelection","expressionDataForSelection","sel","geneIndex","numGenes","numCells","useExpressionAttrs","setAttrs","implementsLoadAttrs","loadAttrs","useMoleculesData","molecules","setMolecules","moleculesCount","setMoleculesCount","locationsCount","setLocationsCount","spatialMoleculesLayer","DEFAULT_MOLECULES_LAYER","useNeighborhoodsData","neighborhoods","setNeighborhoods","spatialNeighborhoodsLayer","DEFAULT_NEIGHBORHOODS_LAYER","useRasterData","raster","setRaster","imageLayerLoaders","setImageLayerLoaders","imageLayerMeta","setImageLayerMeta","nextImageLoaders","nextImageMeta","meta","useGenomicProfilesData","genomicProfilesAttrs","setGenomicProfilesAttrs","TOOLTIP_ANCESTOR","CARD","SECONDARY_CARD","BLACK_CARD","TITLE_CARD","SCROLL_CARD","GLOBAL_LABELS","DEFAULT_RASTER_DOMAIN_TYPE","DEFAULT_RASTER_LAYER_PROPS","visible","colormap","opacity","domainType","transparentColor","renderingMode","RENDERING_MODES","ADDITIVE","use3d","radius","DEFAULT_LAYER_TYPE_ORDERING","GLSL_COLORMAPS","GLSL_COLORMAP_DEFAULT","COLORMAP_SHADER_PLACEHOLDER","Error","LoadingIndicator","useStyles","makeStyles","iconButton","border","marginLeft","background","palette","primaryForeground","paddingLeft","paddingRight","borderRadius","backgroundColor","primaryBackgroundLight","marginRight","verticalAlign","overflow","downloadLink","SettingsIconWithArrow","open","PlotOptions","options","setOpen","classes","CloudDownloadIconWithArrow","DownloadOptions","ClosePaneButton","removeGridComponent","TitleInfo","isScroll","isSpatial","childClassName","MuiSpan","styles","span","PopperMenu","buttonIcon","buttonClassName","anchorRef","handleClick","handleClose","id","getTooltipContainer","TransitionProps","paper","box","boxSizing","checkbox","padding","slider","minWidth","sliderValueLabel","primaryBackground","tableContainer","overflowX","labelCell","inputCell","select","fontSize","selectRoot","useSelectStyles","margin","useOptionStyles","withStyles","textAlign","colors","popper","zIndex","sharedControllerStyles","flexDirection","useControllerSectionStyles","root","StyledExpansionPanelDetails","ExpansionPanelDetails","StyledExpansionPanelSummary","content","expanded","marginBottom","spacing","top","expandIcon","ExpansionPanelSummary","StyledInputLabel","InputLabel","OverflowEllipsisGrid","whiteSpace","textOverflow","Grid","StyledSelectionSlider","marginTop","markActive","Slider","maxHeight","position","left","muiTheme","createMuiTheme","type","primary","grey","secondary","primaryBackgroundHighlight","primaryBackgroundInput","primaryBackgroundDim","primaryForegroundDim","primaryForegroundActive","secondaryBackground","secondaryBackgroundDim","secondaryForeground","MuiButtonBase","disableRipple","getSingleSelectionStats2D","getRaster","selectionStats","getChannelStats","domain","contrastLimits","getSingleSelectionStats3D","lowResSource","sizeZ","z","raster0","rasterMid","rasterTop","stats0","statsMid","statsTop","min","getSingleSelectionStats","getStats","getMultiSelectionStats","selections","Promise","all","stats","domains","stat","sliders","getPhysicalSizeScalingMatrix","physicalSizes","x","y","ratio","Matrix4","scale","identity","getBoundingCube","physicalSizeScalingMatrix","xSlice","ySlice","zSlice","abbreviateNumber","maxLength","maxNaiveDigits","Number","isInteger","naive","Intl","NumberFormat","maximumSignificantDigits","useGrouping","format","toExponential","OptionSelect","classesProp","tryUpgradeTreeToLatestSchema","validate","Ajv","compile","valid","failureReason","errors","itemId","handleImportJSON","importData","parse","handleImportTabular","dsvParser","dsvFormat","row","groupName","setName","predictionScore","treeToImport","uniqueGroupNames","Set","groupRows","uniqueSetNames","setRows","levelOneNode","handleExportJSON","jsonString","dataString","encodeURIComponent","handleExportTabular","exportData","csvString","json2csv","fields","delimiter","downloadForUser","fileName","downloadAnchorNode","document","createElement","setAttribute","body","appendChild","click","remove","vs","fs","padWithDefault","defaultValue","padWidth","defaultProps","hoveredCell","compare","cellColorData","BitmaskLayer","modules","project32","picking","defines","oldProps","changeFlags","setColorTexture","cellTexHeight","cellTexWidth","expressionTex","dataToTexture","setState","gl","context","model","delete","_getModel","getAttributeManager","invalidateAll","colorTex","Texture2D","mipmaps","RGB","dataFormat","UNSIGNED_BYTE","opts","uniforms","channelsVisible","colorScaleLo","colorScaleHi","isExpressionMode","textures","setUniforms","hovered","colorTexHeight","colorTexWidth","uColorScaleRange","uIsExpressionMode","draw","isWebGL2On","isWebGL2","Float32Array","R32F","LUMINANCE","RED","FLOAT","XRLayer","layerName","square","sortLayers","layers","sort","getDefaultGlobalSelection","globalIndices","dim","buildDefaultSelection","globalSelection","firstNonGlobalDimension","isInterleaved","lastDimSize","initializeLayerChannels","defaultSelection","channel","getMetaWithTransformMatrices","imageMeta","imageLoaders","sources","metadata","translate","some","minPhysicalSize","hasZPhyscialSize","unit","replace","imageMetaWithTransform","divide","newMeta","toArray","initializeRasterLayersAndChannels","rasterLayers","rasterRenderLayers","usePhysicalSizeScaling","nextImageMetaAndLayers","autoImageLayerDefPromises","layer","loaderCreator","layerIndex","autoImageLayerDefPromise","channels","resolve","isBitmask","modelMatrix","globalIndicesOfRenderLayers","imageName","findIndex","image","autoImageLayerDefs","makeSpatialSubtitle","observationsCount","observationsLabel","observationsPluralLabel","subobservationsCount","subobservationsLabel","subobservationsPluralLabel","parts","part","shortNumber","getInitialSpatialTargets","useRaster","initialTargetX","initialTargetY","initialTargetZ","initialZoom","zoomBackoff","cellValues","viewSize","getDefaultInitialViewState","target","newViewStateZoom","zoom","xy","cellCoordinates","xExtent","extent","yExtent","xRange","yRange","getViewExtentFromPolygonExtents","extents","polygonExtentsX","poly","polygonExtentsY","log2","getLayerLoaderTuple","VolumeLayer","Layer","MultiscaleImageLayer","ImageLayer","renderSubBitmaskLayers","tile","bbox","right","bottom","v","base","bounds","tileSize","channelData","tileId","Tooltip2D","parentUuid","sourceUuid","parentWidth","parentHeight","isTooltipVisible","crosshairWidth","TooltipContent","OptionsContainer","table","tooltipAnchor","pointerEvents","userSelect","tooltipContent","outline","borderCollapse","Tooltip","placementX","setPlacementX","placementY","setPlacementY","flipX","flipY","style","DATASET_NAME","isVega","spec","$schema","VegaPlot","partialSpec","signalListeners","vegaComponent","Handler","call","VEGA_THEMES","axis","domainColor","gridColor","tickColor","schemeRdBu","schemePlasma","rgbSpline","spline","t","basis","innerBasis","t1","v0","v1","v2","v3","t2","t3","interpolateRgbBasis","interpolateSequentialMulti","interpolateRdBu","interpolatePlasma","getCellColors","cellColorEncoding","expressionDataAttrs","geneExpColormap","cellColor","HeatmapCompositeTextLayer","axisTopLabelData","matrixLeft","matrixWidth","viewWidth","targetX","targetY","axisTopTitle","cellWidth","axisOffsetTop","scaleFactor","showAxisTopLabels","axisLabelTop","TextLayer","getText","getPosition","getTextAnchor","getColor","getSize","getAngle","fontFamily","updateTriggers","axisLeftLabelData","matrixTop","matrixHeight","viewHeight","axisLeftTitle","cellHeight","axisOffsetLeft","showAxisLeftLabels","axisLabelLeft","_renderAxisTopLayers","_renderAxisLeftLayers","CompositeLayer","BitmapLayer","async","desaturate","tintColor","PixelatedBitmapLayer","textureParameters","vertexShader","fragmentShader","aggSizeX","aggSizeY","HeatmapBitmapLayer","shaders","extensions","extension","_mergeShaders","getShaders","fragmentShaderWithColormap","_getShaders","args","loadTexture","bitmapTexture","uBitmapTexture","uTextureSize","uAggSize","inject","getSelectionState","ScaledExpressionExtension","module","models","topModel","sideModel","_getModels","attributeManager","getCurrentLayer","isComposite","add","expressionValue","transition","accessor","divisor","attributes","settings","m","LayerExtension","extensionName","SelectionExtension","isSelected","instanced","getDomains","needMin","DTYPE_VALUES","DOMAINS","createCellsQuadTree","cellsEntries","getCellCoords","quadtree","addAll","CellColorEncodingOption","observationsLabelNice","handleColorEncodingChange","IconButton","alt","onClick","isActive","inactive","active","ToolMenu","setActiveTool","activeTool","visibleTools","pan","selectRectangle","selectLasso","SELECTION_TYPE","RECTANGLE","POLYGON","getCursorWithTool","getCursor","interactionState","isDragging","AbstractSpatialOrScatterplot","tool","viewport","onViewStateChange","bind","onInitializeViewInfo","onWebGLInitialized","onToolChange","nextViewState","viewState","setViewState","spatialAxisFixed","onToolChangeProp","coordinate","sourceLayer","cellHighlight","hasBitmask","layerZoomScale","round","dataCoords","coords","hoverData","String","updateViewInfo","project","positionX","positionY","layerProps","getLayers","showCellSelectionTools","cellsLayer","showPanTool","useDevicePixels","OrbitView","controller","orbitAxis","OrthographicView","dragPan","PureComponent","EDIT_TYPE_ADD","EDIT_TYPE_CLEAR","ClickableDrawRectangleMode","onEdit","editType","DrawRectangleMode","ClickableDrawPolygonByDraggingMode","DrawPolygonByDraggingMode","MODE_MAP","selectionType","layerIds","onSelect","EMPTY_DATA","features","LAYER_ID_GEOJSON","PASS_THROUGH_PROPS","SelectionLayer","cellsQuadTree","flippedCoordinates","selectedPolygon","turfPolygon","pickingInfos","visit","x0","y0","x1","y1","nodePoints","nodePolygon","nodePolygonContainsSelectedPolygon","booleanContains","nodePolygonWithinSelectedPolygon","booleanWithin","nodePolygonOverlapsSelectedPolgyon","booleanOverlap","booleanPointInPolygon","mode","ViewMode","inheritedProps","EditableGeoJsonLayer","getSubLayerProps","modeConfig","dragToDraw","selectedFeatureIndexes","updatedData","_selectPolygonObjects","_subLayerProps","guides","pointType","ScatterplotLayer","radiusScale","getLineWidth","radiusMinPixels","radiusMaxPixels","getRadius","getBaseLayerId","layerId","getSelectedLayerId","getSelectionLayers","updateCellsSelection","cellBaseLayerId","editHandlePointRadius","cellIds","cellObj","getTentativeFillColor","getTentativeLineColor","getTentativeLineDashArray","lineWidthMinPixels","lineWidthMaxPixels","getEditHandlePointColor","getEditHandlePointRadius","editHandlePointRadiusScale","editHandlePointRadiusMinPixels","editHandlePointRadiusMaxPixels","overlayBaseProps","rest","overlay","getFillColor","getLineColor","getFilterValue","DataFilterExtension","filterSize","filterRange","getGeneByCellTile","view","tileI","tileJ","cellOrdering","tileData","offset","cellI","geneI","sortedCellI","tileSizeRange","getCellByGeneTile","layerFilter","startsWith","getAxisSizes","transpose","geneLabelMaxLength","cellLabelMaxLength","clamp","mouseToHeatmapPosition","mouseX","mouseY","offsetLeft","offsetTop","numRows","numCols","viewMouseX","viewMouseY","bboxTargetX","bboxTargetY","bboxLeft","bboxTop","zoomedOffsetLeft","zoomedOffsetTop","zoomedViewMouseX","zoomedViewMouseY","zoomedMouseX","zoomedMouseY","rowI","colI","heatmapToMousePosition","minY","maxY","totalHeight","minInViewY","maxInViewY","inViewHeight","normalizedRowY","globalRowY","minX","maxX","totalWidth","minInViewX","maxInViewX","inViewWidth","normalizedRowX","globalRowX","defaultPoolSize","navigator","hardwareConcurrency","Pool","Worker","workers","idleWorkers","waitQueue","decoder","w","idleWorker","pop","waiter","promise","currentWorker","terminate","HeatmapPool","waitForWorker","reject","onmessage","finishTask","onerror","postMessage","Heatmap","forwardRef","rawViewState","expression","cellColors","colormapRange","clearPleaseWait","setGeneHighlight","setIsRendering","variablesTitle","observationsTitle","minZoom","workerPool","HeatmapWorkerPool","tilesRef","dataRef","axisLeftLabels","setAxisLeftLabels","axisTopLabels","setAxisTopLabels","useReducer","tileIteration","incTileIteration","backlog","setBacklog","newCellOrdering","oldCellOrdering","matrixRight","matrixBottom","xTiles","ceil","yTiles","widthRatio","heightRatio","tileWidth","tileHeight","nextZoom","nextScaleFactor","minTargetX","maxTargetX","minTargetY","maxTargetY","nextTarget","promises","process","tiles","currWork","currIndex","heatmapLayers","getLayer","textLayers","cellColorsTiles","colorBarTileWidthPx","colorBarTileHeightPx","Uint8ClampedArray","tileY","get","rValue","gValue","bValue","ImageData","cellColorsLayers","offsetCenter","obsI","varI","varId","CELLS_LAYER_ID","MOLECULES_LAYER_ID","NEIGHBORHOODS_LAYER_ID","defaultGetCellCoords","makeDefaultGetCellPolygon","cellEntry","makeDefaultGetCellColors","makeDefaultGetCellIsSelected","cellSelectionSet","has","Spatial","moleculesEntries","moleculesLayer","neighborhoodsLayer","imageLayers","layerLoaderSelections","randomColorData","_","random","onUpdateCellsData","onUpdateCellsLayer","onUpdateMoleculesData","onUpdateMoleculesLayer","onUpdateNeighborhoodsData","onUpdateNeighborhoodsLayer","onUpdateImages","layerDef","cellFilter","getCellIsSelected","getCellColor","getCellPolygon","onCellClick","lineWidthScale","geneExpressionColormapRange","geneExpressionColormap","filteredCellsEntries","flipYTooltip","PolygonLayer","getPolygon","setMoleculeHighlight","getMoleculeColor","getMoleculePosition","getNeighborhoodPolygon","neighborhoodsEntry","neighborhood","neighborhoodsEntries","ScaleBarLayer","rawLayerDef","nextLoaderSelection","prevLoaderSelection","visibilities","renderSubLayers","excludeBackground","onViewportLoad","layerLoader","rasterLayersCallbacks","use3dIndex","createImageLayer","createScaleBarLayer","createSelectionLayers","createCellsLayer","molecule","createMoleculesLayer","createNeighborhoodsLayer","createImageLayers","prevProps","viewInfoDidUpdate","shallowDiff","propName","forceUpdate","onUpdateCellColors","onUpdateExpressionData","SpatialWrapper","constant","jiggle","forceCollideRects","masses","strength","iterations","xCenter","vx","yCenter","vy","prepare","quad","force","nodeSize","nodeMass","xi","yi","visitAfter","apply","xSize","ySize","xd","abs","yd","sqrt","iterate","initialize","LABEL_FONT_FAMILY","NUM_FORCE_SIMULATION_TICKS","LABEL_UPDATE_ZOOM_DELTA","makeDefaultGetCellPosition","available","s","mappedCell","makeDefaultGetCellCoords","Scatterplot","cellSetsForceSimulation","cellSetsLabelPrevZoom","cellSetsLayers","onUpdateCellSetsLayers","getCellPosition","cellRadius","cellOpacity","radiusUnits","cellSetPolygonsVisible","cellSetLabelsVisible","cellSetLabelSize","wireframe","label","collisionForce","forceSimulation","tick","getAlignmentBaseline","fontWeight","onlyViewStateChange","createCellSetsLayers","ScatterplotWrapper","VectorLayerController","layerType","handleLayerChange","isOn","handleSliderChange","handleCheckBoxChange","ScatterplotTooltipSubscriber","getCellInfo","ScatterplotOptions","setCellRadius","cellRadiusMode","setCellRadiusMode","setCellOpacity","cellOpacityMode","setCellOpacityMode","setCellSetLabelsVisible","setCellSetLabelSize","setCellSetPolygonsVisible","setGeneExpressionColormap","setGeneExpressionColormapRange","handleCellRadiusModeChange","handleCellOpacityModeChange","handleRadiusChange","handleOpacityChange","handleLabelVisibilityChange","checked","handleLabelSizeChange","handlePolygonVisibilityChange","handleGeneExpressionColormapChange","handleColormapRangeChange","handleColormapRangeChangeDebounced","valueLabel","cmap","getPointSizeDevicePixels","devicePixelRatio","pointSize","pointScreenSizeMax","pointScreenSizeMin","xAxisRange","yAxisRange","diagonalScreenSize","diagonalAxisRange","diagonalFraction","deviceSize","pointSizeDevicePixels","getPointOpacity","avgFillDensity","N","makeViewport","getBounds","X","Y","X0","Y0","W","H","rho","log10","alpha","pointOpacity","SCATTERPLOT_DATA_TYPES","ScatterplotSubscriber","disableTooltip","observationsLabelOverride","observationsPluralLabelOverride","titleOverride","averageFillDensity","embeddingZoom","embeddingTargetX","embeddingTargetY","targetZ","embeddingTargetZ","embeddingType","geneSelection","embeddingCellSetPolygonsVisible","embeddingCellSetLabelsVisible","embeddingCellSetLabelSize","cellRadiusFixed","embeddingCellRadius","embeddingCellRadiusMode","cellOpacityFixed","embeddingCellOpacity","embeddingCellOpacityMode","setZoom","setEmbeddingZoom","setTargetX","setEmbeddingTargetX","setTargetY","setEmbeddingTargetY","setTargetZ","setEmbeddingTargetZ","setCellFilter","setEmbeddingCellSetPolygonsVisible","setEmbeddingCellSetLabelsVisible","setEmbeddingCellSetLabelSize","setCellRadiusFixed","setEmbeddingCellRadius","setEmbeddingCellRadiusMode","setCellOpacityFixed","setEmbeddingCellOpacity","setEmbeddingCellOpacityMode","dynamicCellRadius","setDynamicCellRadius","dynamicCellOpacity","setDynamicCellOpacity","mergedCellSets","setCellSelectionProp","cellSetPolygonCache","setCellSetPolygonCache","cacheHas","cache","cacheGet","newCellSetPolygons","xE","yE","xR","yR","nextCellOpacityScale","newTargetX","newTargetY","newZoom","HeatmapTooltipSubscriber","getGeneInfo","geneHighlight","cellCoord","geneInfo","geneCoord","HeatmapOptions","HEATMAP_DATA_TYPES","HeatmapSubscriber","variablesLabelOverride","variablesLabel","variablesPluralLabelOverride","variablesPluralLabel","zoomX","heatmapZoomX","heatmapTargetX","heatmapTargetY","setZoomX","setHeatmapZoomX","setZoomY","setHeatmapZoomY","setHeatmapTargetX","setHeatmapTargetY","isRendering","genesCount","selectedCount","useToggleStyles","createStyles","cameraLabel","button","ToggleFixedAxisButton","setSpatialAxisFixed","SpatialOptions","canShowExpressionOptions","canShowColorEncodingOption","canShow3DOptions","SpatialTooltipSubscriber","SPATIAL_DATA_TYPES","SpatialSubscriber","subobservationsLabelOverride","subobservationsPluralLabelOverride","disable3d","globalDisable3d","spatialZoom","spatialTargetX","spatialTargetY","spatialTargetZ","rotationX","spatialRotationX","rotationY","spatialRotationY","rotationZ","spatialRotationZ","rotationOrbit","spatialRotationOrbit","spatialOrbitAxis","setSpatialZoom","setSpatialTargetX","setSpatialTargetY","setSpatialTargetZ","setRotationX","setSpatialRotationX","setRotationOrbit","setSpatialRotationOrbit","setOrbitAxis","setSpatialOrbitAxis","setRasterLayers","setSpatialRasterLayers","setCellsLayer","setSpatialCellsLayer","setMoleculesLayer","setSpatialMoleculesLayer","setNeighborhoodsLayer","setSpatialNeighborhoodsLayer","canPassInCellsLayer","shiftedExpressionDataForBitmask","maxId","newRotationX","newRotationOrbit","newOrbitAxis","subtitle","hasExpressionData","hasCellsData","canLoad3DLayers","res","Status","warnClass","messages","CellSetSizesPlot","rawData","keyLength","keyName","mark","encoding","field","labelExpr","legend","tooltip","config","Tree","React","prefixCls","className","showIcon","blockNode","checkable","classNames","virtual","HelpTooltip","overlayClassName","spanRef","placement","trigger","mouseEnterDelay","mouseLeaveDelay","Popover","PopoverMenuListButton","handler","handlerKey","confirm","isConfirming","setIsConfirming","handleOrRequireConfirm","titleWithConfirm","PopoverMenuList","menuConfig","handleColorChange","rgb","defaultPalette","PopoverMenu","setVisible","makeNodeViewMenuConfig","onCheckNode","onNodeRemove","onNodeSetIsEditing","onExportLevelZeroNodeJSON","onExportLevelZeroNodeTabular","onExportSetJSON","editable","exportable","NamedSetNodeStatic","isChecking","onNodeSetColor","onNodeView","onCheckLevel","checkedLevelPath","checkedLevelIndex","shouldCheckNextLevel","nextLevelToCheck","numberFormatter","niceSize","tooltipText","tooltipProps","popoverMenuConfig","NamedSetNodeEditing","onNodeSetName","onNodeCheckNewName","currentTitle","setCurrentTitle","hasConflicts","trySetName","NamedSetNode","isEditing","isCurrentSet","LevelsButtons","hasColorEncoding","onCheck","parseInt","isChecked","clsx","SwitcherIcon","isOpen","hexColor","TreeNode","renderSelector","onDragStartProp","onDragStart","rcTree","prefixClass","draggable","wrapClass","isDraggable","setSelectHandle","getNodeState","renderCheckbox","renderLevels","renderSwitcher","onNodeExpand","onNodeExpandWrapper","switcherClass","loading","dragOver","dragOverGapTop","dragOverGapBottom","selected","halfChecked","onDragEndProp","onDragEnd","expandable","otherProps","filterTreeNode","disabled","isDisabled","dataAndAriaAttributeProps","getDataAndAria","onDragEnter","onDragOver","onDragLeave","onDrop","renderChildren","RcTreeNode","PlusButton","onError","onImportTree","onCreateLevelZeroNode","importable","onImport","importHandler","mimeType","uploadInputNode","File","FileReader","FileList","Blob","files","reader","readAsText","SetOperationButtons","onUnion","onIntersection","onComplement","operatable","hasCheckedSetsToUnion","hasCheckedSetsToIntersect","hasCheckedSetsToComplement","processSets","sets","getAllKeys","SetsManager","additionalSets","checkedLevel","levelSelection","setSelection","setExpansion","onExpandNode","onDropNode","autoExpandParent","setIsDragging","isEditingNodeName","setIsEditingNodeName","processedSets","processedAdditionalSets","additionalSetKeys","allSetSelectionKeys","allSetExpansionKeys","setSelectionKeys","setExpansionKeys","additionalSetSelectionKeys","additionalSetExpansionKeys","renderTreeNodes","readOnly","checkedKeys","expandedKeys","dropKey","eventKey","dragKey","dragNode","dropToGap","dropPosition","SelectableTable","columns","onChange","idKey","valueKey","allowMultiple","allowUncheck","showTableHead","showTableInputs","testHeight","testWidth","selectedRows","setSelectedRows","onSelectRow","union","difference","handleInputChange","getDataFromIds","ids","initialSelectedRows","selectedRowData","inputUuid","hiddenInputsClass","rowRenderer","column","headerRowRenderer","Genes","geneList","geneFilter","setGeneSelection","searchTerm","setSearchTerm","searchResults","setSearchResults","results","gene","toLowerCase","localeCompare","handleChange","DOMAIN_OPTIONS","VolumeDropdown","loaderWithMeta","handleMultiPropertyChange","currResolution","setRasterLayerCallback","setAreAllChannelsLoading","spatialHeight","spatialWidth","shouldUse3D","propertiesChanged","ch","defaultViewState","newChannels","hasZStack","ColormapSelect","inputId","TransparentColorCheckbox","float","OpacitySlider","SliderDomainSelector","GlobalSelectionSlider","possibleValues","newValue","LayerOption","LayerOptions","handleColormapChange","handleTransparentColorChange","globalControlLabels","globalLabelValues","handleGlobalChannelsSelectionChange","handleDomainChange","disableChannelsIfRgbDetected","shouldShowTransparentColor","shouldShowDomain","shouldShowColormap","hasDimensionsAndChannels","hasViewableResolutions","useSlicerStyles","enabled","text","Slicer","handleSlicerSetting","xSliceInit","ySliceInit","zSliceInit","sliceValuesAndSetSliceFunctions","xSliceNew","ySliceNew","zSliceNew","Slicers","setVal","renderingOptions","RenderingModeSelect","handleRenderingModeChange","ReCenterButton","VolumeOptions","TabPanel","other","getDomainsAndSliders","buttonStyles","borderStyle","LayerController","handleLayerRemove","ChannelController","setAreLayerChannelsLoading","areLayerChannelsLoading","shouldShowRemoveLayerButton","channelRef","firstSelection","channelOptions","tab","setTab","handleTabChange","newTab","setDomainType","isExpanded","setIsExpanded","o","setGlobalLabelValues","setColormap","setOpacity","setChannels","setTransparentColor","setRenderingMode","setChannelsAndDomainType","newDomainType","setChannel","addChannel","removeChannel","newAreLayerChannelsLoading","handleChannelAdd","newChannelId","areLayerChannelsLoadingCallback","canUpdateChannels","newChannelsWithSelection","newChannelsWithSliders","channelControllers","channelLabel","channelId","setIsLoading","handleChannelPropertyChange","property","update","handleChannelRemove","handleIQRUpdate","loaderData","q1","q3","controllerSectionClasses","visibleSetting","Visibility","VisibilityIcon","VisibilityOffIcon","useVolumeTabs","FullController","MAX_CHANNELS","role","enter","stopPropagation","nextVisible","minHeight","StatusSubscriber","moleculeHighlight","infos","GENES_DATA_TYPES","GenesSubscriber","setGeneFilter","setGeneSelectionAndColorEncoding","newSelection","CELL_SETS_DATA_TYPES","CellSetsManagerSubscriber","cellSetExpansion","setCellSetExpansion","upgradedCellSets","allCellIds","setCellSetColorEncoding","levelZeroName","newCellSetSelection","targetKey","split","dropPath","dropNode","dropNodeLevel","dropNodeIsLevelZero","dragPath","dropParentNode","dropParentPath","dropNodeCurrIndex","hasSiblingNameConflict","dragNodeName","newDragPath","addChildFunction","checkPathFunction","newLevelZero","oldColors","newColors","newCellSetColor","prevNodeColor","nextNamePath","renameNode","nextCellSetSelection","nextCellSetExpansion","setsToView","viewNode","expandedPath","targetNode","newSet","importAutoSetColors","packageJson","CELL_SET_SIZES_DATA_TYPES","CellSetSizesPlotSubscriber","display","justifyContent","alignItems","flexWrap","icon","stroke","action","ColorPalette","menuButton","ChannelOptions","handlePropertyChange","handleColorSelect","handleRemove","ChannelSelectionDropdown","selectionIndex","opt","ChannelVisibilityCheckbox","toggle","toRgbUIString","on","ChannelSlider","handleChangeDebounced","step","RasterChannelController","visibility","dimName","colormapOn","isLoading","newUse3d","setDomain","setUse3d","rgbColor","mounted","hasDomainChanged","has3dChanged","hasSelectionChanged","newDomain","createSelection","BitmaskChannelController","disableOptions","addButton","ImageAddIcon","ImageAddButton","imageOptions","handleImageAdd","handleAdd","imgData","LAYER_CONTROLLER_DATA_TYPES","LayerControllerMemoized","memo","canShowCellVecmask","setRasterLayersCallbacks","areLoadingRasterChannnels","setAreLoadingRasterChannnels","handleRasterLayerChange","handleRasterLayerRemove","layerIs3DIndex","spatialLayout","enableLayerButtonsWithOneLayer","shouldShowImageLayerButton","layerMeta","isRaster","cb","newRasterLayersCallbacks","newAreLoadingRasterChannnels","LayerControllerSubscriber","layerControllerRef","windowHeight","windowWidth","newLayer","newLayers","hasNoBitmask","exports","require","COMPONENT_ID_PREFIX","sum","makeGridLayout","colXs","colLayout","colWs","getMaxRows","layouts","xywh","resolveLayout","breakpoints","components","positions","def","columnXs","columnCount","ResponsiveGridLayout","WidthProvider","Responsive","ResponsiveHeightGridLayout","VitessceGridLayout","getComponent","draggableHandle","reactGridLayoutProps","rowHeight","onRemoveComponent","onLayoutChangeProp","onLayoutChange","gridCols","gridLayouts","gridBreakpoints","gridComponents","maxRows","nextC","prevC","substring","nextProps","layoutChildren","Component","AbstractLoader","requestInit","subscriptions","subscriber","token","AbstractTwoStepLoader","dataSource","LoaderResult","typeToSchema","cellsSchema","moleculesSchema","neighborhoodsSchema","rasterSchema","JsonLoader","fileType","MatrixZarrLoader","getJson","store","openArray","getRaw","loadArr","GenesJsonAsMatrixZarrLoader","genesSchema","normalizedFlatMatrix","ClustersJsonAsMatrixZarrLoader","clustersSchema","normalizedMatrix","col","normalize","tNormalizedMatrix","initLoader","imageData","dimensions","isPyramid","metadataUrl","fetch","response","json","zarrMetadata","metaKey","arrMetaKeys","chunks","yChunk","xChunk","ZarrPixelSource","omeTiffOffsetsUrl","ok","offsets","loadOmeTiff","headers","Channels","Pixels","Name","RasterLoader","URL","createObjectURL","images","renderLayers","imagesWithLoaderCreators","autoImageCache","autoImages","autoImageLayers","hexToRgb","hex","exec","OmeZarrLoader","loadOmeZarr","fetchOptions","omero","rdefs","defaultT","defaultZ","start","end","CellSetsJsonLoader","upgradedData","newAutoSetSelectionParentName","newAutoSetSelections","newAutoSetColors","dataToCellSetsTree","cellNames","cellSetsTree","cellSetIds","levelSets","InternMap","levels","getNextLevelNames","levelSuffixes","nextLevelNames","getNode","parentLevelPrefixes","currLevelName","childLevelSuffixes","resultNode","shouldBeLeaf","nextLevelName","levelOneNodes","levelOneName","uniqueCellSetIds","clusters","cluster","CellSetsZarrLoader","cellSetZarrLocation","loadObsVariables","loadObsIndex","loadCellSetIds","CellsZarrLoader","loadNumeric","coordinationName","loadMappings","loadXy","loadPoly","loadFactors","dims","factorsObj","concatenateColumnVectors","BYTES_PER_ELEMENT","DataView","TypedArray","constructor","filteredGeneNames","geneFilterZarr","getFilterFn","getFlatArrDecompressed","loadVarIndex","filterZarr","loadFilteredGeneNames","geneNames","sparseArrays","_getGeneIndices","indices","_openSparseArrays","indptrArr","indexArr","cellXGeneArr","_getNumCells","startRowIndex","endRowIndex","isColumnAllZeros","rowIndices","cellXGeneData","rowIndex","_getNumGenes","_loadCSRSparseCellXGene","cellXGene","_sparseMatrix","cellXGeneMatrix","rowStart","rowEnd","colStart","colEnd","matrixGeneFilter","_matrixZattrs","encodingType","_loadCSCSparseCellXGene","_getFilteredGenes","filteredGenes","numGenesFiltered","cellXGeneMatrixFiltered","shouldNormalize","_loadCSCGeneSelection","_loadCSRGeneSelection","loadCellXGene","matrixGeneFilterZarr","GenomicProfilesZarrLoader","ZarrDataSource","supportedMethods","HTTPStore","getItem","buf","TextDecoder","decode","KeyError","readFloat32FromUint8","Int32Array","HEADER_LENGTH","parseVlenUtf8","dataEnd","output","AnnDataSource","obsPromises","obsPaths","obsPath","getObsCol","obsCol","obsPromise","_loadObsVariable","err","obs","categories","categoriesValues","obsArr","obsValues","mappedObsValues","parseAndMergeTextBytes","dbytes","mergeBytes","tmp","numRequests","requests","keyPrefix","compressor","dbytesArr","filters","obsIndex","_index","varIndex","DataSourceFetchError","JsonSource","_data","ANNDATA","fileTypeToLoaderAndSource","RasterJsonLoader","AnnDataLoaders","getSourceAndLoaderFromFileType","getNumRows","bottomY","len","getRowHeight","containerHeight","effectiveContainerHeight","useRowHeight","initialRowHeight","setContainerHeight","setRowHeight","newRowHeight","createLoaders","datasets","configDescription","dataSources","datasetLoaders","file","DataSourceClass","LoaderClass","fileId","uid","VitessceGrid","onResize","onResizeStop","urlPrefix","makeLayerNameToConfig","datasetPrefix","linnarssonLayerNames","linnarssonDescription","linnarssonBase","linnarssonBaseNoClusters","driesDescription","driesBase","wangDescription","wangBase","vanderbiltDescription","vanderbiltBase","configs","public","method","credentials","redirect","referrer","integrity","staticLayout","initStrategy","PCA","TSNE","A","UMAP","spatialLayers","vanderbilt","genomicZoomX","genomicZoomY","genomicTargetX","genomicTargetY","hgViewConfig","autocompleteSource","genomePositionSearchBox","autocompleteServer","autocompleteId","chromInfoServer","chromInfoId","chromInfoPath","tracks","tilesetUid","server","labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","geneAnnotationHeight","geneLabelPosition","geneStrandSpacing","showMousePosition","mousePositionColor","plusStrandColor","minusStrandColor","labelColor","trackBorderWidth","trackBorderColor","fontIsLeftAligned","center","contents","maxZoom","labelShowResolution","labelShowAssembly","labelTextOpacity","labelBackgroundColor","labelBackgroundOpacity","colorRange","colorbarBackgroundColor","colorbarBackgroundOpacity","colorbarPosition","heatmapValueScaling","showTooltip","zeroValueColor","scaleStartPercent","scaleEndPercent","transforms","whole","gallery","moved","static","profileTrackUidKey","spatialRotation","heatmapZoomY","cellSetHighlight","schemaVersion","listConfigs","showAll","getConfig","DatasetList","aClassName","links","Form","Info","branch","hash","date","Welcome","showBetaHeader","Warning","preformatted","unformatted","upgradeReplaceViewProp","prevZScopes","prevTXScopes","prevTYScopes","nextZScope","nextTXScope","nextTYScope","upgradeFrom0_1_0","datasetUid","componentDef","newComponentDef","newScopeValues","newDatasetUid","upgradeFrom1_0_0","replaceLayerType","typedLayers","newComponent","replaceCoordinationScope","upgradeFrom1_0_1","newConfig","cloneDeep","upgradeFrom1_0_2","upgradeFrom1_0_3","upgradeFrom1_0_4","LATEST_VERSION","SCHEMA_HANDLERS","configSchema0_1_0","addSchema","configSchema1_0_0","configSchema1_0_1","configSchema1_0_2","configSchema1_0_3","configSchema1_0_4","configSchema1_0_5","validateViewConfig","CallbackPublisher","onWarn","onConfigChange","onLoaderChange","validateOnConfigChange","subscribe","Description","metadataRecord","DESCRIPTION_DATA_TYPES","DescriptionSubscriber","descriptionOverride","PIXI_BUNDLE_VERSION","dependencies","HIGLASS_BUNDLE_VERSION","BUNDLE_FILE_EXT","PIXI_BUNDLE_URL","HIGLASS_BUNDLE_URL","dynamicImportPolyfill","register","dataFetcher","ZarrMultivecDataFetcher","pluginType","HiGlassComponent","lazy","ReactDOM","handleImportError","__import__","hglib","HG_SIZE","HiGlassLazy","hgViewConfigProp","hgOptionsProp","hgOptions","genomeSize","setGenomicZoomX","setGenomicZoomY","setGenomicTargetX","setGenomicTargetY","computedHeight","hgInstance","setHgInstance","isActiveRef","centerX","genomesPerUnitX","unitX","initialXDomain","centerY","genomesPerUnitY","unitY","initialYDomain","zoomFixed","trackSourceServers","exportViewUrl","views","zoomLocks","locksByViewUid","locksDict","locationLocks","valueScaleLocks","handleMouseEnter","handleMouseLeave","api","viewConfigString","xDomain","yDomain","nextGenomicZoomX","nextGenomicZoomY","nextGenomicTargetX","nextGenomicTargetY","off","bounded","pixelPreciseMarginPadding","containerPaddingX","containerPaddingY","sizeMode","HIGLASS_DATA_TYPES","HiGlassSubscriber","GENOMIC_PROFILES_DATA_TYPES","REFERENCE_TILESETS","hg38","chromosomes","hg19","mm9","mm10","GenomicProfilesSubscriber","profileTrackNameKey","higlassServer","assembly","foregroundColor","dimColor","referenceTracks","referenceTracksHeightSum","profileTracksHeightSum","profileTrackHeight","row_infos","profileTracks","rowInfo","trackUid","isPath","trackName","setInSelection","trackUidString","track","barFillColor","hgView","ExpressionHistogram","xTitle","bin","maxbins","aggregate","EXPRESSION_HISTOGRAM_DATA_TYPES","ExpressionHistogramSubscriber","firstGeneSelected","normValue","subarray","sumValue","useExpressionByCellSet","useGeneExpressionTransform","cellObjects","exprMax","cellIndices","exprValues","transformedValue","expressionArr","expressionMax","setArr","CellSetExpressionPlotOptions","toggleGeneExpressionTransform","handleGeneExpressionTransformChange","CellSetExpressionPlot","domainMax","maxCharactersForLabel","autoMarginBottom","colorScale","plotWidth","plotHeight","numBands","bandWidth","rectColor","axisBand","bandPosition","tickExtra","tickOffset","signals","groupby","bandwidth","ops","as","scales","signal","reverse","axes","orient","zindex","tickCount","labelAngle","labelAlign","marks","facet","encode","xc","band","expr","parent","y2","CELL_SET_EXPRESSION_DATA_TYPES","CellSetExpressionPlotSubscriber","geneExpressionTransform","setGeneExpressionTransform","registry","getExistingScopesForCoordinationType","spaceScopes","componentScopes","coordinateComponentsTogether","scopeValue","scopeName","coordinateComponentsIndependent","newScopes","initializeAuto","requiresCoordination","upgradeAndValidate","oldConfig","nextConfig","fromVersion","upgradeFunction","validateFunction","validLegacy","groupCollapsed","groupEnd","generateClassName","createGenerateClassName","disableGlobal","Vitessce","upgradedConfig","upgradeSuccess","initializedConfig","configOrWarning","success","AwaitResponse","responseRef","preformattedDetails","statusText","redirected","checkResponse","debug","validateTheme","createApp","urlParams","URLSearchParams","location","search","datasetId","responsePromise","CURRENT_VERSION","VITESSCE_CONF_QUERY_STRING","VERSION_QUERY_STRING","LENGTH_QUERY_STRING","sniffBrowser","Bowser","userAgent","browser","MAX_BROWSER_URL_LENGTHS","Chrome","Edge","Safari","Firefox","CompressedConfLengthError","encodeConfInUrl","conf","onOverMaximumUrlLength","compressedConf","compressToEncodedURIComponent","newParams","willWorkOn","decodeURLParamsToConf","queryString","compressedConfString","expectedConfLength","decompressFromEncodedURIComponent","VitessceConfigDatasetFile","dataType","VitessceConfigDataset","f","toJSON","VitessceConfigView","cScopes","cScope","cType","VitessceConfigViewHConcat","VitessceConfigViewVConcat","hconcat","vcvhc","vconcat","vcvvc","VitessceConfigCoordinationScope","cValue","VitessceConfig","prevDatasetUids","nextUid","newDataset","addCoordination","newScope","setValue","datasetMatches","datasetScope","newView","etScope","cTypes","cValues","viewConcat","layoutAux","xMin","xMax","yMin","yMax","setXYWH","numViews","cScopeName","vc","addDataset","addFile","cObj","cScopeValue"],"mappings":";;QAAA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;;QAGA;QACA;;;;;;;AClFA,kC;;;;;;;;;ACAe;AACf;AACA,C;;ACFe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA,6CAA6C,+BAA+B;AAC5E;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA,C;;;;;ACzBe;AACf;AACA,C;;ACFA;AAA8C;AACY;AACY;AACtB;AACjC;AACf,SAAS,eAAc,SAAS,qBAAoB,YAAY,qDAA0B,YAAY,gBAAe;AACrH,C;;;;;;;ACNA;AAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;;AAEA;AACA,C;;;;;;;ACbA;AAAA;AAA8C;;AAE9C;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;;AAEe;AACf,iBAAiB,sBAAsB;AACvC;;AAEA;AACA;AACA,QAAQ,uEAAc;AACtB,OAAO;AACP,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA,C;;;;;;;;;;;;AClCkD;AACnC;AACf,iCAAiC,2CAAgB;AACjD,C;;ACHe;AACf;AACA,C;;;;;ACFe;AACf;AACA,C;;ACFA;AAAoD;AA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","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"./\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 204);\n","module.exports = require(\"react\");","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithHoles from \"./arrayWithHoles\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nimport nonIterableRest from \"./nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import defineProperty from \"./defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}","import arrayLikeToArray from \"./arrayLikeToArray\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithoutHoles from \"./arrayWithoutHoles\";\nimport iterableToArray from \"./iterableToArray\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nimport nonIterableSpread from \"./nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import { useRef, useCallback, useMemo } from 'react';\nimport create from 'zustand';\nimport createContext from 'zustand/context';\nimport shallow from 'zustand/shallow';\nimport { fromEntries, capitalize } from '../../utils';\n\n// Reference: https://github.com/pmndrs/zustand#react-context\n// Reference: https://github.com/pmndrs/zustand/blob/e47ea03/tests/context.test.tsx#L60\nconst {\n  Provider: ViewConfigProviderLocal,\n  useStore: useViewConfigStoreLocal,\n  useStoreApi: useViewConfigStoreApiLocal,\n} = createContext();\n\nexport const ViewConfigProvider = ViewConfigProviderLocal;\nexport const useViewConfigStore = useViewConfigStoreLocal;\nexport const useViewConfigStoreApi = useViewConfigStoreApiLocal;\n\nconst {\n  Provider: AuxiliaryProviderLocal,\n  useStore: useAuxiliaryStoreLocal,\n} = createContext();\n\nexport const AuxiliaryProvider = AuxiliaryProviderLocal;\nexport const useAuxiliaryStore = useAuxiliaryStoreLocal;\n\n\n/**\n * The useViewConfigStore hook is initialized via the zustand\n * create() function, which sets up both the state variables\n * and the reducer-type functions.\n * Reference: https://github.com/react-spring/zustand\n * @returns {function} The useStore hook.\n */\nexport const createViewConfigStore = () => create(set => ({\n  // State:\n  // The viewConfig is an object which must conform to the schema\n  // found in src/schemas/config.schema.json.\n  viewConfig: null,\n  // The loaders object is a mapping from dataset ID to\n  // data type to loader object instance.\n  loaders: null,\n  // Reducer functions which update the state\n  // (although technically also part of state):\n  setViewConfig: viewConfig => set({ viewConfig }),\n  setLoaders: loaders => set({ loaders }),\n  setCoordinationValue: ({ parameter, scope, value }) => set(state => ({\n    viewConfig: {\n      ...state.viewConfig,\n      coordinationSpace: {\n        ...state.viewConfig.coordinationSpace,\n        [parameter]: {\n          ...state.viewConfig.coordinationSpace[parameter],\n          [scope]: value,\n        },\n      },\n    },\n  })),\n  removeComponent: i => set((state) => {\n    const newLayout = state.viewConfig.layout.slice();\n    newLayout.splice(i, 1);\n    return {\n      viewConfig: {\n        ...state.viewConfig,\n        layout: newLayout,\n      },\n    };\n  }),\n  changeLayout: newComponentProps => set((state) => {\n    const newLayout = state.viewConfig.layout.slice();\n    newComponentProps.forEach(([i, newProps]) => {\n      newLayout[i] = {\n        ...newLayout[i],\n        ...newProps,\n      };\n    });\n    return {\n      viewConfig: {\n        ...state.viewConfig,\n        layout: newLayout,\n      },\n    };\n  }),\n}));\n\n/**\n * Hook for getting components' layout from the view config based on\n * matching all coordination scopes.\n * @returns {Object} The components' layout.\n */\nexport const useComponentLayout = (component, scopes, coordinationScopes) => useViewConfigStore(\n  state => state.viewConfig.layout.filter(l => l.component === component).filter(\n    l => scopes.every(scope => l.coordinationScopes[scope]\n          === coordinationScopes[scope]),\n  ),\n);\n\n/**\n * The useAuxiliaryStore hook is initialized via the zustand\n * create() function, which sets up both the state variables\n * and the reducer-type functions.\n * Reference: https://github.com/react-spring/zustand\n * It is meant to be used for non-viewconfig-based coordination between components.\n * For example, as currently happens, the layer controller can coordinate\n * on-load callbacks with spatial view based on whether or not they are\n * coordinated via `spatialRasterLayers` - the callbacks are not part of the view config\n * though so they live here.\n * @returns {function} The useStore hook.\n */\nexport const createAuxiliaryStore = () => create(set => ({\n  auxiliaryStore: null,\n  setCoordinationValue: ({ parameter, scope, value }) => set(state => ({\n    auxiliaryStore: {\n      ...state.auxiliaryStore,\n      [parameter]: {\n        [scope]: value,\n      },\n    },\n  })),\n}));\n\n/**\n * The hover store can be used to store global state\n * related to which component is currently hovered,\n * which is required for tooltip / crossover elements.\n * @returns {function} The useStore hook.\n */\nconst useHoverStore = create(set => ({\n  // Components may need to know if they are the \"hover source\"\n  // for tooltip interactions. This value should be a unique\n  // component ID, such as its index in the view config layout.\n  componentHover: null,\n  setComponentHover: componentHover => set({ componentHover }),\n}));\n\n/**\n * The warning store can be used to store global state\n * related to app warning messages.\n * @returns {function} The useStore hook.\n */\nconst useWarnStore = create(set => ({\n  // Want a global state to collect warning messages\n  // that occur anywhere in the app.\n  warning: null,\n  setWarning: warning => set({ warning }),\n}));\n\n/**\n * The view info store can be used to store component-level\n * viewInfo objects,\n * which are required for tooltip / crossover elements.\n * @returns {function} The useStore hook.\n */\nconst useViewInfoStore = create(set => ({\n  // The viewInfo object is a mapping from\n  // component IDs to component view info objects.\n  // Each view info object must have a project() function.\n  viewInfo: {},\n  setComponentViewInfo: (uuid, viewInfo) => set(state => ({\n    viewInfo: {\n      ...state.viewInfo,\n      [uuid]: viewInfo,\n    },\n  })),\n}));\n\n/**\n * The grid size store can be used to store a\n * counter which updates on each window or react-grid-layout\n * resize event.\n * @returns {function} The useStore hook.\n */\nconst useGridSizeStore = create(set => ({\n  resizeCount: {},\n  incrementResizeCount: () => set(state => ({\n    resizeCount: state.resizeCount + 1,\n  })),\n}));\n\n/**\n * The useCoordination hook returns both the\n * values and setter functions for the coordination objects\n * in a particular coordination scope mapping.\n * This hook is intended to be used within the ___Subscriber\n * components to allow them to \"hook into\" only those coordination\n * objects and setter functions of relevance.\n * @param {string[]} parameters Array of coordination types.\n * @param {object} coordinationScopes Mapping of coordination types\n * to scope names.\n * @returns {array} Returns a tuple [values, setters]\n * where values is an object containing all coordination values,\n * and setters is an object containing all coordination setter\n * functions for the values in `values`, named with a \"set\"\n * prefix.\n */\nexport function useCoordination(parameters, coordinationScopes) {\n  const setCoordinationValue = useViewConfigStore(state => state.setCoordinationValue);\n\n  const values = useViewConfigStore((state) => {\n    const { coordinationSpace } = state.viewConfig;\n    return fromEntries(parameters.map((parameter) => {\n      if (coordinationSpace && coordinationSpace[parameter]) {\n        const value = coordinationSpace[parameter][coordinationScopes[parameter]];\n        return [parameter, value];\n      }\n      return [parameter, undefined];\n    }));\n  }, shallow);\n\n  const setters = useMemo(() => fromEntries(parameters.map((parameter) => {\n    const setterName = `set${capitalize(parameter)}`;\n    const setterFunc = value => setCoordinationValue({\n      parameter,\n      scope: coordinationScopes[parameter],\n      value,\n    });\n    return [setterName, setterFunc];\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  })), [parameters, coordinationScopes]);\n\n  return [values, setters];\n}\n\nconst AUXILIARY_COORDINATION_TYPES_MAP = {\n  spatialRasterLayers: ['rasterLayersCallbacks', 'areLoadingRasterChannnels'],\n};\n\n/**\n * The maps the coordination types of incoming scopes to new types\n * for the auxiliary store.\n * @param {object} coordinationScopes Mapping of coordination types\n * to scope names.\n * @returns {object} Mapping of coordination types\n * to new scope names for the auxiliary store.\n */\nconst mapCoordinationScopes = (coordinationScopes) => {\n  const newCoordinationScopes = {};\n  Object.keys(coordinationScopes).forEach((key) => {\n    const newCoordinationTypes = AUXILIARY_COORDINATION_TYPES_MAP[key] || [];\n    newCoordinationTypes.forEach((coordinationType) => {\n      newCoordinationScopes[coordinationType || key] = coordinationScopes[key];\n    });\n  });\n  return newCoordinationScopes;\n};\n\nconst mapParameters = parameters => parameters\n  .map(parameter => AUXILIARY_COORDINATION_TYPES_MAP[parameter]).filter(Boolean).flat();\n\n/**\n * The useAuxiliaryCoordination hook returns both the\n * values and setter functions for the auxiliary coordination objects\n * in a particular coordination scope mapping.\n * This hook is intended to be used within the ___Subscriber\n * components to allow them to \"hook into\" only those auxiliary coordination\n * objects and setter functions of relevance, for example \"on load\" callbacks.\n * @param {string[]} parameters Array of coordination types.\n * @param {object} coordinationScopes Mapping of coordination types\n * to scope names.\n * @returns {array} Returns a tuple [values, setters]\n * where values is an object containing all coordination values,\n * and setters is an object containing all coordination setter\n * functions for the values in `values`, named with a \"set\"\n * prefix.\n */\nexport function useAuxiliaryCoordination(parameters, coordinationScopes) {\n  const setCoordinationValue = useAuxiliaryStore(state => state.setCoordinationValue);\n  const mappedCoordinationScopes = mapCoordinationScopes(coordinationScopes);\n  const mappedParameters = mapParameters(parameters);\n  const values = useAuxiliaryStore((state) => {\n    const { auxiliaryStore } = state;\n    return fromEntries(mappedParameters.map((parameter) => {\n      if (auxiliaryStore && auxiliaryStore[parameter]) {\n        const value = auxiliaryStore[parameter][mappedCoordinationScopes[parameter]];\n        return [parameter, value];\n      }\n      return [parameter, undefined];\n    }));\n  }, shallow);\n  const setters = useMemo(() => fromEntries(mappedParameters.map((parameter) => {\n    const setterName = `set${capitalize(parameter)}`;\n    const setterFunc = value => setCoordinationValue({\n      parameter,\n      scope: mappedCoordinationScopes[parameter],\n      value,\n    });\n    return [setterName, setterFunc];\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  })), [parameters, coordinationScopes]);\n\n  return [values, setters];\n}\n\n/**\n * Obtain the loaders object from\n * the global app state.\n * @returns {object} The loaders object\n * in the `useViewConfigStore` store.\n */\nexport function useLoaders() {\n  return useViewConfigStore(state => state.loaders);\n}\n\n/**\n * Obtain the view config layout array from\n * the global app state.\n * @returns {object[]} The layout array\n * in the `useViewConfigStore` store.\n */\nexport function useLayout() {\n  return useViewConfigStore(state => state.viewConfig?.layout);\n}\n\n/**\n * Obtain the component removal function from\n * the global app state.\n * @returns {function} The remove component function\n * in the `useViewInfoStore` store.\n */\nexport function useRemoveComponent() {\n  return useViewConfigStore(state => state.removeComponent);\n}\n\n/**\n * Obtain the component prop setter function from\n * the global app state.\n * @returns {function} The set component props function\n * in the `useViewInfoStore` store.\n */\nexport function useChangeLayout() {\n  return useViewConfigStore(state => state.changeLayout);\n}\n\n/**\n * Obtain the loaders setter function from\n * the global app state.\n * @returns {function} The loaders setter function\n * in the `useViewConfigStore` store.\n */\nexport function useSetLoaders() {\n  return useViewConfigStore(state => state.setLoaders);\n}\n\n/**\n * Obtain the view config setter function from\n * the global app state.\n * @returns {function} The view config setter function\n * in the `useViewConfigStore` store.\n */\nexport function useSetViewConfig(viewConfigStoreApi) {\n  const setViewConfigRef = useRef(viewConfigStoreApi.getState().setViewConfig);\n  const setViewConfig = setViewConfigRef.current;\n  return setViewConfig;\n}\n\n/**\n * Obtain the component hover value from\n * the global app state.\n * @returns {number} The hovered component ID\n * in the `useHoverStore` store.\n */\nexport function useComponentHover() {\n  return useHoverStore(state => state.componentHover);\n}\n\n/**\n * Obtain the component hover setter function from\n * the global app state.\n * @returns {function} The component hover setter function\n * in the `useHoverStore` store.\n */\nexport function useSetComponentHover() {\n  return useHoverStore(state => state.setComponentHover);\n}\n\n/**\n * Obtain the warning message from\n * the global app state.\n * @returns {string} The warning message\n * in the `useWarnStore` store.\n */\nexport function useWarning() {\n  return useWarnStore(state => state.warning);\n}\n\n/**\n * Obtain the warning setter function from\n * the global app state.\n * @returns {function} The warning setter function\n * in the `useWarnStore` store.\n */\nexport function useSetWarning() {\n  return useWarnStore(state => state.setWarning);\n}\n\n/**\n * Obtain the component view info value from\n * the global app state.\n * @returns {object} The view info object for the component\n * in the `useViewInfoStore` store.\n */\nexport function useComponentViewInfo(uuid) {\n  return useViewInfoStore(useCallback(state => state.viewInfo[uuid], [uuid]));\n}\n\n/**\n * Obtain the component view info setter function from\n * the global app state.\n * @returns {function} The component view info setter function\n * in the `useViewInfoStore` store.\n */\nexport function useSetComponentViewInfo(uuid) {\n  const setViewInfoRef = useRef(useViewInfoStore.getState().setComponentViewInfo);\n  const setComponentViewInfo = viewInfo => setViewInfoRef.current(uuid, viewInfo);\n  return setComponentViewInfo;\n}\n\n/**\n * Obtain the grid resize count value\n * from the global app state.\n * @returns {number} The grid resize increment value.\n */\nexport function useGridResize() {\n  return useGridSizeStore(state => state.resizeCount);\n}\n\n/**\n * Obtain the grid resize count increment function\n * from the global app state.\n * @returns {function} The grid resize count increment\n * function.\n */\nexport function useEmitGridResize() {\n  return useGridSizeStore(state => state.incrementResizeCount);\n}\n","module.exports = require(\"regenerator-runtime\");\n","/* eslint-disable no-plusplus */\n\n// Adapted from https://github.com/feross/fromentries/blob/29b52a850bb3a47c390937631c2638edf3443942/index.js\nexport function fromEntries(iterable) {\n  return [...iterable]\n    .reduce((obj, { 0: key, 1: val }) => Object.assign(obj, { [key]: val }), {});\n}\n\nexport function range(length) {\n  return [...Array(length).keys()];\n}\n\n/**\n * Select between a singular and plural version of a word,\n * based on an item count.\n * @param {string} singular The singular version of the word.\n * @param {string} plural The plural version of the word.\n * @param {number} count The number of items.\n * @returns {string} Singular if count is one, else plural.\n */\nexport function pluralize(singular, plural, count) {\n  return (count === 1 ? singular : plural);\n}\n\n/**\n * Capitalize a the first letter of a string.\n * @param {string} word A string to capitalize.\n * @returns {string} The word parameter with the first letter capitalized.\n */\nexport function capitalize(word) {\n  return word.charAt(0).toUpperCase() + word.slice(1);\n}\n\n/**\n * Generate a new scope name which does not\n * conflict / overlap with a previous scope name.\n * Really these just need to be unique within the coordination object.\n * So in theory they could be String(Math.random()) or uuidv4() or something.\n * However it may be good to make them more human-readable and memorable\n * since eventually we will want to expose a UI to update the coordination.\n * @param {string[]} prevScopes Previous scope names.\n * @returns {string} The new scope name.\n */\nexport function getNextScope(prevScopes) {\n  // Keep an ordered list of valid characters.\n  const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';\n  // Store the value of the next character for each position\n  // in the new string.\n  // For example, [0] -> \"A\", [1] -> \"B\", [0, 1] -> \"AB\"\n  const nextCharIndices = [0];\n\n  // Generate a new scope name,\n  // potentially conflicting with an existing name.\n  // Reference: https://stackoverflow.com/a/12504061\n  function next() {\n    const r = [];\n    nextCharIndices.forEach((charIndex) => {\n      r.unshift(chars[charIndex]);\n    });\n    let increment = true;\n    for (let i = 0; i < nextCharIndices.length; i++) {\n      const val = ++nextCharIndices[i];\n      if (val >= chars.length) {\n        nextCharIndices[i] = 0;\n      } else {\n        increment = false;\n        break;\n      }\n    }\n    if (increment) {\n      nextCharIndices.push(0);\n    }\n    return r.join('');\n  }\n\n  let nextScope;\n  do {\n    nextScope = next();\n  } while (prevScopes.includes(nextScope));\n  return nextScope;\n}\n\n/**\n * Get a representative PixelSource from a loader object returned from\n * the Vitessce imaging loaders\n * @param {object} loader { data: (PixelSource[]|PixelSource), metadata, channels } object\n * @param {number=} level Level of the multiscale loader from which to get a PixelSource\n * @returns {object} PixelSource object\n */\nexport function getSourceFromLoader(loader, level) {\n  const { data } = loader;\n  const source = Array.isArray(data) ? data[(level || data.length - 1)] : data;\n  return source;\n}\n\n/*\n * Helper method to determine whether pixel data is interleaved and rgb or not.\n * @param {object} loader\n */\nexport function isRgb(loader) {\n  const source = getSourceFromLoader(loader);\n  const { shape, dtype, labels } = source;\n  const channelSize = shape[labels.indexOf('c')];\n  return (channelSize === 3) && dtype === 'Uint8';\n}\n","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","import GL from '@luma.gl/constants'; // eslint-disable-line import/no-extraneous-dependencies\n\nexport const TILE_SIZE = 2048;\nexport const MIN_ROW_AGG = 1;\nexport const MAX_ROW_AGG = 16;\n\nexport const COLOR_BAR_SIZE = 20;\nexport const AXIS_LABEL_TEXT_SIZE = 9;\nexport const AXIS_TITLE_TEXT_SIZE = 15;\nexport const AXIS_MIN_SIZE = 10;\nexport const AXIS_MAX_SIZE = 90;\nexport const AXIS_MARGIN = 3;\nexport const THEME_TO_TEXT_COLOR = {\n  dark: [224, 224, 224],\n  light: [64, 64, 64],\n};\nexport const AXIS_FONT_FAMILY = \"-apple-system, 'Helvetica Neue', Arial, sans-serif\";\n\nexport const PIXELATED_TEXTURE_PARAMETERS = {\n  // NEAREST for integer data to prevent interpolation.\n  [GL.TEXTURE_MIN_FILTER]: GL.NEAREST,\n  [GL.TEXTURE_MAG_FILTER]: GL.NEAREST,\n  // CLAMP_TO_EDGE to remove tile artifacts.\n  [GL.TEXTURE_WRAP_S]: GL.CLAMP_TO_EDGE,\n  [GL.TEXTURE_WRAP_T]: GL.CLAMP_TO_EDGE,\n};\n","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","import React from 'react';\nimport { COORDINATE_SYSTEM } from '@deck.gl/core'; // eslint-disable-line import/no-extraneous-dependencies\nimport {\n  SETS_DATATYPE_CELL,\n  HIERARCHICAL_SCHEMAS,\n} from './sets/constants';\nimport { PRIMARY_CARD } from './classNames';\n\nexport function makeCellStatusMessage(cellInfoFactors) {\n  return Object.entries(cellInfoFactors).map(\n    ([factor, value]) => `${factor}: ${value}`,\n  ).join('; ');\n}\n\nexport function cellLayerDefaultProps(cells, updateStatus, setCellHighlight, setComponentHover) {\n  return {\n    coordinateSystem: COORDINATE_SYSTEM.CARTESIAN,\n    data: cells,\n    pickable: true,\n    autoHighlight: true,\n    stroked: true,\n    filled: true,\n    getElevation: 0,\n    onHover: (info) => {\n      // Notify the parent component that its child component is\n      // the \"hover source\".\n      if (setComponentHover) {\n        setComponentHover();\n      }\n      if (info.object) {\n        const [cellId, cellInfo] = info.object;\n        const { factors = {} } = cellInfo;\n        if (updateStatus) {\n          updateStatus(makeCellStatusMessage(factors));\n        }\n        if (setCellHighlight) {\n          setCellHighlight(cellId);\n        }\n      } else if (setCellHighlight) {\n        // Clear the currently-hovered cell info by passing null.\n        setCellHighlight('');\n      }\n    },\n  };\n}\n\nexport const DEFAULT_DARK_COLOR = [50, 50, 50];\nexport const DEFAULT_LIGHT_COLOR = [200, 200, 200];\n\nexport function getDefaultColor(theme) {\n  return theme === 'dark' ? DEFAULT_DARK_COLOR : DEFAULT_LIGHT_COLOR;\n}\n\n// From https://personal.sron.nl/~pault/#sec:qualitative\nexport const PALETTE = [\n  [68, 119, 170],\n  [136, 204, 238],\n  [68, 170, 153],\n  [17, 119, 51],\n  [153, 153, 51],\n  [221, 204, 119],\n  [204, 102, 119],\n  [136, 34, 85],\n  [170, 68, 153],\n];\n\nexport const VIEWER_PALETTE = [\n  [0, 0, 255],\n  [0, 255, 0],\n  [255, 0, 255],\n  [255, 255, 0],\n  [0, 255, 255],\n  [255, 255, 255],\n  [255, 128, 0],\n  [255, 0, 0],\n];\n\nexport const COLORMAP_OPTIONS = [\n  'viridis',\n  'greys',\n  'magma',\n  'jet',\n  'hot',\n  'bone',\n  'copper',\n  'summer',\n  'density',\n  'inferno',\n];\n\nexport const DEFAULT_GL_OPTIONS = { webgl2: true };\n\nexport function createDefaultUpdateStatus(componentName) {\n  return message => console.warn(`${componentName} updateStatus: ${message}`);\n}\n\nexport function createDefaultUpdateCellsSelection(componentName) {\n  return cellsSelection => console.warn(`${componentName} updateCellsSelection: ${cellsSelection}`);\n}\n\nexport function createDefaultUpdateCellsHover(componentName) {\n  return hoverInfo => console.warn(`${componentName} updateCellsHover: ${hoverInfo.cellId}`);\n}\n\nexport function createDefaultUpdateGenesHover(componentName) {\n  return hoverInfo => console.warn(`${componentName} updateGenesHover: ${hoverInfo.geneId}`);\n}\n\nexport function createDefaultUpdateViewInfo(componentName) {\n  return viewInfo => console.warn(`${componentName} updateViewInfo: ${viewInfo}`);\n}\n\nexport function createDefaultClearPleaseWait() {\n  return () => {};\n}\n\n\n/**\n * Copy a typed array into a new array buffer.\n * @param {Uint8Array} arr The typed array to be copied.\n * @returns {Uint8Array} The copied array.\n */\nexport function copyUint8Array(arr) {\n  const newBuffer = new ArrayBuffer(arr.buffer.byteLength);\n  const newArr = new Uint8Array(newBuffer);\n  newArr.set(arr);\n  return newArr;\n}\n\nexport function getNextNumberedNodeName(nodes, prefix) {\n  let i = 1;\n  if (nodes) {\n    // eslint-disable-next-line no-loop-func\n    while (nodes.find(n => n.name === `${prefix}${i}`)) {\n      // eslint-disable-next-line no-plusplus\n      i++;\n    }\n  }\n  return `${prefix}${i}`;\n}\n\n/**\n * Create a new selected cell set based on a cell selection.\n * @param {string[]} cellSelection An array of cell IDs.\n * @param {object[]} additionalCellSets The previous array of user-defined cell sets.\n * @param {function} setCellSetSelection The setter function for cell set selections.\n * @param {function} setAdditionalCellSets The setter function for user-defined cell sets.\n */\nexport function setCellSelection(cellSelection, additionalCellSets, cellSetColor, setCellSetSelection, setAdditionalCellSets, setCellSetColor, setCellColorEncoding, prefix = 'Selection ') {\n  const CELL_SELECTIONS_LEVEL_ZERO_NAME = 'My Selections';\n\n  const selectionsLevelZeroNode = additionalCellSets?.tree.find(\n    n => n.name === CELL_SELECTIONS_LEVEL_ZERO_NAME,\n  );\n  const nextAdditionalCellSets = {\n    version: HIERARCHICAL_SCHEMAS[SETS_DATATYPE_CELL].latestVersion,\n    datatype: SETS_DATATYPE_CELL,\n    tree: [...(additionalCellSets ? additionalCellSets.tree : [])],\n  };\n\n  const nextName = getNextNumberedNodeName(selectionsLevelZeroNode?.children, prefix);\n  let colorIndex = 0;\n  if (selectionsLevelZeroNode) {\n    colorIndex = selectionsLevelZeroNode.children.length;\n    selectionsLevelZeroNode.children.push({\n      name: nextName,\n      set: cellSelection.map(d => [d, null]),\n    });\n  } else {\n    nextAdditionalCellSets.tree.push({\n      name: CELL_SELECTIONS_LEVEL_ZERO_NAME,\n      children: [\n        {\n          name: nextName,\n          set: cellSelection.map(d => [d, null]),\n        },\n      ],\n    });\n  }\n  setAdditionalCellSets(nextAdditionalCellSets);\n  const nextPath = ['My Selections', nextName];\n  setCellSetColor([\n    ...(cellSetColor || []),\n    {\n      path: nextPath,\n      color: PALETTE[colorIndex % PALETTE.length],\n    },\n  ]);\n  setCellSetSelection([nextPath]);\n  setCellColorEncoding('cellSetSelection');\n}\n\nexport function mergeCellSets(cellSets, additionalCellSets) {\n  return {\n    version: HIERARCHICAL_SCHEMAS[SETS_DATATYPE_CELL].latestVersion,\n    datatype: SETS_DATATYPE_CELL,\n    tree: [\n      ...(cellSets ? cellSets.tree : []),\n      ...(additionalCellSets ? additionalCellSets.tree : []),\n    ],\n  };\n}\n\nexport function createWarningComponent(props) {\n  return () => {\n    const {\n      title,\n      message,\n    } = props;\n    return (\n      <div className={PRIMARY_CARD}>\n        <h1>{title}</h1>\n        <div>{message}</div>\n      </div>\n    );\n  };\n}\n\nexport function asEsModule(component) {\n  return {\n    __esModule: true,\n    default: component,\n  };\n}\n\n\nexport function formatBytes(bytes, decimals = 2) {\n  if (bytes === 0) return '0 Bytes';\n\n  const k = 1024;\n  const dm = decimals < 0 ? 0 : decimals;\n  const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n\n  const i = Math.floor(Math.log(bytes) / Math.log(k));\n\n  // eslint-disable-next-line no-restricted-properties\n  return `${parseFloat((bytes / Math.pow(k, i)).toFixed(dm))} ${sizes[i]}`;\n}\n\nexport const getStatsForResolution = (loader, resolution) => {\n  const { shape, labels } = loader[resolution];\n  const height = shape[labels.indexOf('y')];\n  const width = shape[labels.indexOf('x')];\n  const depth = shape[labels.indexOf('z')];\n  // eslint-disable-next-line no-bitwise\n  const depthDownsampled = Math.max(1, depth >> resolution);\n  // Check memory allocation limits for Float32Array (used in XR3DLayer for rendering)\n  const totalBytes = 4 * height * width * depthDownsampled;\n  return {\n    height, width, depthDownsampled, totalBytes,\n  };\n};\n\nexport const canLoadResolution = (loader, resolution) => {\n  const {\n    totalBytes, height, width, depthDownsampled,\n  } = getStatsForResolution(\n    loader,\n    resolution,\n  );\n  const maxHeapSize = window.performance?.memory\n    && window.performance?.memory?.jsHeapSizeLimit / 2;\n  const maxSize = maxHeapSize || (2 ** 31) - 1;\n  // 2048 is a normal texture size limit although some browsers go larger.\n  return (\n    totalBytes < maxSize\n    && height <= 2048\n    && depthDownsampled <= 2048\n    && width <= 2048\n    && depthDownsampled > 1\n  );\n};\n","module.exports = require(\"@luma.gl/constants\");","export default function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}","import _typeof from \"../../helpers/esm/typeof\";\nimport assertThisInitialized from \"./assertThisInitialized\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}","import getPrototypeOf from \"./getPrototypeOf\";\nimport isNativeReflectConstruct from \"./isNativeReflectConstruct\";\nimport possibleConstructorReturn from \"./possibleConstructorReturn\";\nexport default function _createSuper(Derived) {\n  return function () {\n    var Super = getPrototypeOf(Derived),\n        result;\n\n    if (isNativeReflectConstruct()) {\n      var NewTarget = getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return possibleConstructorReturn(this, result);\n  };\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","module.exports = require(\"lodash/isEqual\");","module.exports = require(\"@material-ui/core/styles\");","import cellSetsSchema from '../../schemas/cell-sets.schema.json';\nimport cellSetsTabularSchema from '../../schemas/cell-sets-tabular.schema.json';\n\nexport const FILE_EXTENSION_JSON = 'json';\nexport const MIME_TYPE_JSON = 'application/json';\n\nexport const FILE_EXTENSION_TABULAR = 'csv';\nexport const MIME_TYPE_TABULAR = 'text/csv';\nexport const SEPARATOR_TABULAR = ',';\n// The NA value below corresponds to the allowed string enum\n// value \"NA\" in the cell-sets-tabular JSON schema.\nexport const NA_VALUE_TABULAR = 'NA';\n\nexport const SETS_DATATYPE_CELL = 'cell';\nexport const HIERARCHICAL_SCHEMAS = {\n  cell: {\n    latestVersion: '0.1.3',\n    schema: cellSetsSchema,\n  },\n};\n\nexport const TABULAR_SCHEMAS = {\n  cell: {\n    schema: cellSetsTabularSchema,\n  },\n};\n","import {\n  useRef, useState, useEffect, useCallback, useMemo,\n} from 'react';\nimport debounce from 'lodash/debounce';\nimport { useGridResize, useEmitGridResize } from '../app/state/hooks';\nimport { VITESSCE_CONTAINER } from './classNames';\n\nfunction getWindowDimensions() {\n  const { innerWidth: width, innerHeight: height } = window;\n  return {\n    width,\n    height,\n  };\n}\n\nexport function useVitessceContainer(ref) {\n  return useCallback(() => {\n    if (ref.current) {\n      return ref.current.closest(`.${VITESSCE_CONTAINER}`);\n    }\n    return null;\n  }, [ref]);\n}\n\n/**\n * Custom hook, gets the full window dimensions.\n * @returns {array} `[width, height]` where width and height\n * are numbers.\n */\nexport function useWindowDimensions() {\n  const [windowDimensions, setWindowDimensions] = useState(\n    getWindowDimensions(),\n  );\n\n  useEffect(() => {\n    function handleResize() {\n      setWindowDimensions(getWindowDimensions());\n    }\n    const onResizeDebounced = debounce(handleResize, 100, { trailing: true });\n\n    window.addEventListener('resize', onResizeDebounced);\n    return () => window.removeEventListener('resize', onResizeDebounced);\n  }, []);\n\n  return windowDimensions;\n}\n\n/**\n * Custom hook, subscribes to GRID_RESIZE and window resize events.\n * @returns {array} `[width, height, containerRef]` where width and height\n * are numbers and containerRef is a React ref.\n */\nexport function useGridItemSize() {\n  const containerRef = useRef();\n\n  const [height, setHeight] = useState();\n  const [width, setWidth] = useState();\n\n  const resizeCount = useGridResize();\n  const incrementResizeCount = useEmitGridResize();\n\n  // On window resize events, increment the grid resize count.\n  useEffect(() => {\n    function onWindowResize() {\n      incrementResizeCount();\n    }\n    const onResizeDebounced = debounce(onWindowResize, 100, { trailing: true });\n    window.addEventListener('resize', onResizeDebounced);\n    onWindowResize();\n    return () => {\n      window.removeEventListener('resize', onResizeDebounced);\n    };\n  }, [incrementResizeCount]);\n\n  // On new grid resize counts, re-compute the component\n  // width/height.\n  useEffect(() => {\n    if (!containerRef.current) return;\n    const container = containerRef.current;\n    const containerRect = container.getBoundingClientRect();\n    setHeight(containerRect.height);\n    setWidth(containerRect.width);\n  }, [resizeCount]);\n\n  return [width, height, containerRef];\n}\n\n/**\n * Custom hook, subscribes to GRID_RESIZE and window resize events.\n * @returns {array} `[width, height, deckRef]` where width and height\n * are numbers and deckRef is a React ref to be used with\n * a <DeckGL/> element (or a forwardRef to one).\n */\nexport function useDeckCanvasSize() {\n  const deckRef = useRef();\n\n  const [height, setHeight] = useState();\n  const [width, setWidth] = useState();\n\n  const resizeCount = useGridResize();\n  const incrementResizeCount = useEmitGridResize();\n\n  // On window resize events, increment the grid resize count.\n  useEffect(() => {\n    function onWindowResize() {\n      incrementResizeCount();\n    }\n    const onResizeDebounced = debounce(onWindowResize, 100, { trailing: true });\n    window.addEventListener('resize', onResizeDebounced);\n    onWindowResize();\n    return () => {\n      window.removeEventListener('resize', onResizeDebounced);\n    };\n  }, [incrementResizeCount]);\n\n  // On new grid resize counts, re-compute the DeckGL canvas\n  // width/height.\n  useEffect(() => {\n    if (!deckRef.current) return;\n    const { canvas } = deckRef.current.deck;\n    const canvasRect = canvas.getBoundingClientRect();\n    setHeight(canvasRect.height);\n    setWidth(canvasRect.width);\n  }, [resizeCount]);\n\n  return [width, height, deckRef];\n}\n\n/**\n * This hook handles a boolean isReady value,\n * which only returns true once every item in the\n * input list has been marked as \"ready\".\n * @param {string[]} items The items to wait on.\n * Should be defined as a constant\n * (outside a function component / render function),\n * otherwise strange bugs may occur.\n * @returns {array} An array\n * [isReady, setItemIsReady, setItemIsNotReady, resetReadyItems]\n * where isReady is the boolean value,\n * setItemIsReady marks one item as ready,\n * setItemIsNotReady marks one item as not ready,\n * and resetReadyItem marks all items as waiting.\n */\nexport function useReady(supportedItems) {\n  const items = supportedItems;\n  const [waiting, setWaiting] = useState(items);\n\n  const setItemIsReady = useCallback((readyItem) => {\n    setWaiting((waitingItems) => {\n      const nextWaitingItems = waitingItems.filter(item => item !== readyItem);\n      // eslint-disable-next-line no-console\n      console.log(`cleared ${readyItem}; waiting on ${nextWaitingItems.length}: ${JSON.stringify(nextWaitingItems)}`);\n      return nextWaitingItems;\n    });\n  }, [setWaiting]);\n\n  const setItemIsNotReady = useCallback((notReadyItem) => {\n    setWaiting((waitingItems) => {\n      const nextWaitingItems = [...waitingItems, notReadyItem];\n      // eslint-disable-next-line no-console\n      console.log(`waiting on ${nextWaitingItems.length}: ${JSON.stringify(nextWaitingItems)}`);\n      return nextWaitingItems;\n    });\n  }, [setWaiting]);\n\n  const resetReadyItems = useCallback(() => {\n    setWaiting(items);\n    // eslint-disable-next-line no-console\n    console.log(`waiting on ${items.length}: ${JSON.stringify(items)}`);\n  }, [setWaiting, items]);\n\n  const isReady = waiting.length === 0;\n\n  return [isReady, setItemIsReady, setItemIsNotReady, resetReadyItems];\n}\n\n/**\n * This hook manages a list of URLs,\n * with adding and resetting helpers.\n * @returns {array} An array\n * [urls, addUrl, resetUrls]\n * where urls is the array of URL objects,\n * addUrl is a function for adding a URL to the array,\n * resetUrls is a function that clears the array.\n */\nexport function useUrls() {\n  const [urls, setUrls] = useState([]);\n\n  const addUrl = useCallback((url, name) => {\n    if (url) {\n      setUrls(prev => ([...prev, { url, name }]));\n    }\n  }, [setUrls]);\n\n  const resetUrls = useCallback(() => {\n    setUrls([]);\n  }, [setUrls]);\n\n  return [urls, addUrl, resetUrls];\n}\n\n/**\n * Custom hook, subscribes to the width and height of the closest .vitessce-container\n * element and updates upon window resize events.\n * @param {Ref} ref A React ref object within the `.vitessce-container`.\n * @returns {array} `[width, height]` where width and height\n * are numbers.\n */\nexport function useClosestVitessceContainerSize(ref) {\n  const [height, setHeight] = useState();\n  const [width, setWidth] = useState();\n\n  useEffect(() => {\n    function onWindowResize() {\n      if (ref.current) {\n        const {\n          clientHeight: componentHeight, clientWidth: componentWidth,\n        } = ref.current.closest('.vitessce-container');\n        setWidth(componentWidth);\n        setHeight(componentHeight);\n      }\n    }\n    const onResizeDebounced = debounce(onWindowResize, 100, { trailing: true });\n    window.addEventListener('resize', onResizeDebounced);\n    onWindowResize();\n    return () => {\n      window.removeEventListener('resize', onResizeDebounced);\n    };\n  }, [ref]);\n\n  return [width, height];\n}\n\nexport function useExpressionValueGetter({ attrs, expressionData }) {\n  // Get a mapping from cell ID to row index in the gene expression matrix.\n  const cellIdMap = useMemo(() => {\n    const result = {};\n    if (attrs && attrs.rows) {\n      // eslint-disable-next-line no-plusplus\n      for (let i = 0; i < attrs.rows.length; i++) {\n        result[attrs.rows[i]] = i;\n      }\n    }\n    return result;\n  }, [attrs]);\n\n  // Set up a getter function for gene expression values, to be used\n  // by the DeckGL layer to obtain values for instanced attributes.\n  const getExpressionValue = useCallback((entry) => {\n    const cellId = entry[0];\n    if (cellIdMap && expressionData && expressionData[0]) {\n      const cellIndex = cellIdMap[cellId];\n      const val = expressionData[0][cellIndex];\n      return val;\n    }\n    return 0;\n  }, [cellIdMap, expressionData]);\n  return getExpressionValue;\n}\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","module.exports = require(\"@deck.gl/core\");","import AbstractLoaderError from './AbstractLoaderError';\n\nexport default class LoaderValidationError extends AbstractLoaderError {\n  constructor(datasetType, datasetFileType, datasetUrl, reason) {\n    super(`Error while validating ${datasetType}.`);\n    this.name = 'LoaderValidationError';\n\n    this.datasetType = datasetType;\n    this.datasetFileType = datasetFileType;\n    this.datasetUrl = datasetUrl;\n    this.reason = reason;\n  }\n\n  warnInConsole() {\n    const {\n      datasetType, datasetUrl, reason,\n    } = this;\n    console.warn(\n      `${datasetType} from ${datasetUrl}: validation failed`,\n      JSON.stringify(reason, null, 2),\n    );\n  }\n}\n","import AbstractLoaderError from './AbstractLoaderError';\n\nexport default class LoaderNotFoundError extends AbstractLoaderError {\n  constructor(datasetType, datasetFileType, datasetUrl) {\n    super(`Error finding loader for ${datasetType}.`);\n    this.name = 'LoaderNotFoundError';\n\n    this.datasetType = datasetType;\n    this.datasetFileType = datasetFileType;\n    this.datasetUrl = datasetUrl;\n  }\n\n  warnInConsole() {\n    const {\n      datasetType, datasetFileType, datasetUrl,\n    } = this;\n    if (datasetFileType && datasetUrl) {\n      console.warn(\n        `${datasetType} from ${datasetUrl}: unable to find loader for fileType ${datasetFileType}`,\n      );\n    } else {\n      console.warn(\n        `${datasetType}: unable to find loader`,\n      );\n    }\n  }\n}\n","export { default as AbstractLoaderError } from './AbstractLoaderError';\nexport { default as LoaderValidationError } from './LoaderValidationError';\nexport { default as LoaderNotFoundError } from './LoaderNotFoundError';\n","module.exports = require(\"@hms-dbmi/viv\");","import tinycolor from 'tinycolor2';\nimport isEqual from 'lodash/isEqual';\n\n/**\n * Execute a callback function based on a keypress event.\n * @param {object} event The event from onKeyPress\n * @param {string} key The key identifier to match.\n * @param {Function} callback The function to execute.\n */\nexport function callbackOnKeyPress(event, key, callback) {\n  if (event.key === key) {\n    event.preventDefault();\n    callback();\n  }\n}\n\n/**\n * Convert an array of [r, g, b] numbers to a hex color.\n * @param {number[]} rgbArray The color [r, g, b] array.\n * @returns {string} The hex color as a string.\n */\nexport function colorArrayToString(rgbArray) {\n  return tinycolor({ r: rgbArray[0], g: rgbArray[1], b: rgbArray[2] }).toHexString();\n}\n\n/**\n * Convert a string color representation to an array of [r,g,b].\n * @param {string} colorString The color as a string.\n * @returns {number[]} The color as an array.\n */\nexport function colorStringToArray(colorString) {\n  const colorObj = tinycolor(colorString).toRgb();\n  return [colorObj.r, colorObj.g, colorObj.b];\n}\n\n/**\n * Get a string of help text for coloring a particular hierarchy level.\n * @param {integer} i The level. 1 for cluster, 2 for subcluster, etc.\n * @returns {string} The tooltip text for coloring the level.\n */\nexport function getLevelTooltipText(i) {\n  if (i === 0) return 'Color by hierarchy';\n  if (i <= 2) {\n    const subs = j => ('sub'.repeat(j));\n    return `Color by ${subs(i - 1)}cluster`;\n  }\n  return `Color by cluster level ${i}`;\n}\n\nexport function isEqualOrPrefix(targetPath, testPath) {\n  if (targetPath.length <= testPath.length) {\n    return isEqual(targetPath, testPath.slice(0, targetPath.length));\n  }\n  return false;\n}\n\nexport function tryRenamePath(targetPath, testPath, nextTargetPath) {\n  if (isEqualOrPrefix(targetPath, testPath)) {\n    return [...nextTargetPath, ...testPath.slice(nextTargetPath.length)];\n  }\n  return testPath;\n}\n\nexport const PATH_SEP = '___';\n\nexport function pathToKey(path) {\n  return path.join(PATH_SEP);\n}\n","/* eslint-disable no-underscore-dangle */\nimport uuidv4 from 'uuid/v4';\nimport isNil from 'lodash/isNil';\nimport isEqual from 'lodash/isEqual';\nimport range from 'lodash/range';\nimport { featureCollection as turfFeatureCollection, point as turfPoint } from '@turf/helpers';\nimport centroid from '@turf/centroid';\nimport concaveman from 'concaveman';\nimport {\n  HIERARCHICAL_SCHEMAS,\n} from './constants';\nimport { getDefaultColor, PALETTE } from '../utils';\nimport { pathToKey } from './utils';\n\n/**\n * Alias for the uuidv4 function to make code more readable.\n * @returns {string} UUID.\n */\nfunction generateKey() {\n  return uuidv4();\n}\n\n/**\n * Get the set associated with a particular node.\n * Recursive.\n * @param {object} currNode A node object.\n * @returns {array} The array representing the set associated with the node.\n */\nexport function nodeToSet(currNode) {\n  if (!currNode) {\n    return [];\n  }\n  if (!currNode.children) {\n    return (currNode.set || []);\n  }\n  return currNode.children.flatMap(c => nodeToSet(c));\n}\n\n/**\n * Get the height of a node (the number of levels to reach a leaf).\n * @param {object} currNode A node object.\n * @param {number} level The level that the height will be computed relative to. By default, 0.\n * @returns {number} The height. If the node has a .children property,\n * then the minimum value returned is 1.\n */\nexport function nodeToHeight(currNode, level = 0) {\n  if (!currNode.children) {\n    return level;\n  }\n  const newLevel = level + 1;\n  const childrenHeights = currNode.children.map(c => nodeToHeight(c, newLevel));\n  return Math.max(...childrenHeights, newLevel);\n}\n\n/**\n * Get the size associated with a particular node.\n * Recursive.\n * @param {object} currNode A node object.\n * @returns {number} The length of all the node's children\n */\nexport function getNodeLength(currNode) {\n  if (!currNode) {\n    return 0;\n  }\n  if (!currNode.children) {\n    return (currNode.set?.length || 0);\n  }\n  return currNode.children.reduce((acc, curr) => acc + getNodeLength(curr), 0);\n}\n\n/**\n * Find a node with a matching name path, relative to a particular node.\n * @param {object} node A node object.\n * @param {string[]} path The name path for the node of interest.\n * @param {number} currLevelIndex The index of the current hierarchy level.\n * @returns {object|null} A matching node object, or null if none is found.\n */\nfunction nodeFindNodeByNamePath(node, path, currLevelIndex) {\n  const currNodeName = path[currLevelIndex];\n  if (node.name === currNodeName) {\n    if (currLevelIndex === path.length - 1) {\n      return node;\n    }\n    if (node.children) {\n      const foundNodes = node.children\n        .map(child => nodeFindNodeByNamePath(child, path, currLevelIndex + 1))\n        .filter(Boolean);\n      if (foundNodes.length === 1) {\n        return foundNodes[0];\n      }\n    }\n  }\n  return null;\n}\n\n/**\n * Find a node with a matching name path, relative to the whole tree.\n * @param {object} currTree A tree object.\n * @param {string[]} targetNamePath The name path for the node of interest.\n * @returns {object|null} A matching node object, or null if none is found.\n */\nexport function treeFindNodeByNamePath(currTree, targetNamePath) {\n  const foundNodes = currTree.tree\n    .map(levelZeroNode => nodeFindNodeByNamePath(levelZeroNode, targetNamePath, 0))\n    .filter(Boolean);\n  if (foundNodes.length === 1) {\n    return foundNodes[0];\n  }\n  return null;\n}\n\n/**\n * Transform a node object using a transform function.\n * @param {object} node A node object.\n * @param {function} predicate Returns true if a node matches a condition of interest.\n * @param {function} transform Takes the node matching the predicate as input, returns\n * a transformed version of the node.\n * @param {array} transformedPaths This array parameter is mutated. The path of\n * each transformed node is appended to this array.\n * @param {string[]} The current path of the node being updated, used internally\n * during recursion.\n * @returns {object} The updated node.\n */\nexport function nodeTransform(node, predicate, transform, transformedPaths, currPath) {\n  let newPath;\n  if (!currPath) {\n    newPath = [node.name];\n  } else {\n    newPath = [...currPath];\n  }\n  if (predicate(node, newPath)) {\n    transformedPaths.push(newPath);\n    return transform(node, newPath);\n  }\n  if (node.children) {\n    return {\n      ...node,\n      children: node.children.map(\n        child => nodeTransform(\n          child, predicate, transform, transformedPaths, newPath.concat([child.name]),\n        ),\n      ),\n    };\n  }\n  return node;\n}\n\n/**\n * Transform many node objects using a transform function.\n * @param {object} node A node object.\n * @param {function} predicate Returns true if a node matches a condition of interest.\n * @param {function} transform Takes the node matching the predicate as input, returns\n * a transformed version of the node.\n * @param {array} transformedPaths This array parameter is mutated. The path of\n * each transformed node is appended to this array.\n * @param {string[]} The current path of the node being updated, used internally\n * during recursion.\n * @returns {object} The updated node.\n */\nexport function nodeTransformAll(node, predicate, transform, transformedPaths, currPath) {\n  let newPath;\n  if (!currPath) {\n    newPath = [node.name];\n  } else {\n    newPath = [...currPath];\n  }\n  let newNode = node;\n  if (predicate(node, newPath)) {\n    transformedPaths.push(newPath);\n    newNode = transform(node, newPath);\n  }\n  if (node.children) {\n    return {\n      ...newNode,\n      children: newNode.children.map(\n        child => nodeTransformAll(\n          child, predicate, transform, transformedPaths, newPath.concat([child.name]),\n        ),\n      ),\n    };\n  }\n  return newNode;\n}\n\n/**\n * Append a child to a parent node.\n * @param {object} currNode A node object.\n * @param {object} newChild The child node object.\n * @returns {object} The updated node.\n */\nexport function nodeAppendChild(currNode, newChild) {\n  return {\n    ...currNode,\n    children: [...currNode.children, newChild],\n  };\n}\n\n/**\n * Prepend a child to a parent node.\n * @param {object} currNode A node object.\n * @param {object} newChild The child node object.\n * @returns {object} The updated node.\n */\nexport function nodePrependChild(currNode, newChild) {\n  return {\n    ...currNode,\n    children: [newChild, ...currNode.children],\n  };\n}\n\n/**\n * Insert a child to a parent node.\n * @param {object} currNode A node object.\n * @param {*} newChild The child node object.\n * @param {*} insertIndex The index at which to insert the child.\n * @returns {object} The updated node.\n */\nexport function nodeInsertChild(currNode, newChild, insertIndex) {\n  const newChildren = Array.from(currNode.children);\n  newChildren.splice(insertIndex, 0, newChild);\n  return {\n    ...currNode,\n    children: newChildren,\n  };\n}\n\n/**\n * Get an array representing the union of the sets of checked nodes.\n * @param {object} currTree A tree object.\n * @returns {array} An array representing the union of the sets of checked nodes.\n */\nexport function treeToUnion(currTree, checkedPaths) {\n  const nodes = checkedPaths.map(path => treeFindNodeByNamePath(currTree, path));\n  const nodeSets = nodes.map(node => nodeToSet(node).map(([cellId]) => cellId));\n  return nodeSets\n    .reduce((a, h) => a.concat(h.filter(hEl => !a.includes(hEl))), nodeSets[0] || []);\n}\n\n/**\n * Get an array representing the intersection of the sets of checked nodes.\n * @param {object} currTree A tree object.\n * @returns {array} An array representing the intersection of the sets of checked nodes.\n */\nexport function treeToIntersection(currTree, checkedPaths) {\n  const nodes = checkedPaths.map(path => treeFindNodeByNamePath(currTree, path));\n  const nodeSets = nodes.map(node => nodeToSet(node).map(([cellId]) => cellId));\n  return nodeSets\n    .reduce((a, h) => h.filter(hEl => a.includes(hEl)), nodeSets[0] || []);\n}\n\n/**\n * Get an array representing the complement of the union of the sets of checked nodes.\n * @param {object} currTree\n * @returns {array} An array representing the complement of the\n * union of the sets of checked nodes.\n */\nexport function treeToComplement(currTree, checkedPaths, items) {\n  const primaryUnion = treeToUnion(currTree, checkedPaths);\n  return items.filter(el => !primaryUnion.includes(el));\n}\n\n/**\n * Get an flattened array of descendants at a particular relative\n * level of interest.\n * @param {object} node A node object.\n * @param {number} level The relative level of interest.\n * 0 for this node's children, 1 for grandchildren, etc.\n * @param {boolean} stopEarly Should a node be returned early if no children exist?\n * @returns {object[]} An array of descendants at the specified level,\n * where the level is relative to the node.\n */\nexport function nodeToLevelDescendantNamePaths(node, level, prevPath, stopEarly = false) {\n  if (!node.children) {\n    if (!stopEarly) {\n      return null;\n    }\n    return [[...prevPath, node.name]];\n  }\n  if (level === 0) {\n    return [[...prevPath, node.name]];\n  }\n  return node.children\n    .flatMap(c => nodeToLevelDescendantNamePaths(c, level - 1, [...prevPath, node.name], stopEarly))\n    .filter(Boolean);\n}\n\n/**\n * Export the tree by clearing tree state and all node states.\n * @param {object} currTree A tree object.\n * @returns {object} Tree object with tree and node state removed.\n */\nexport function treeExport(currTree, datatype) {\n  return {\n    version: HIERARCHICAL_SCHEMAS[datatype].latestVersion,\n    datatype,\n    tree: currTree.tree,\n  };\n}\n\n/**\n * Export the tree by clearing tree state and all node states,\n * and filter so that only the level zero node of interest is included.\n * @param {object} currTree A tree object.\n * @param {string} nodePath The path of the node of interest.\n * @param {string} dataType Datatype (i.e cell sets)\n * @param {Array} cellSetColors Array of objects of cell set colors and paths\n * @param {string} theme \"light\" or \"dark\" for the vitessce theme\n * @returns {object} { treeToExport, nodeName }\n * Tree with one level zero node, and with state removed.\n */\nexport function treeExportLevelZeroNode(currTree, nodePath, datatype, cellSetColors, theme) {\n  const node = treeFindNodeByNamePath(currTree, nodePath);\n  const nodeWithColors = nodeTransformAll(node, () => true, (n, nPath) => {\n    const nodeColor = cellSetColors?.find(c => isEqual(c.path, nPath))?.color\n      ?? getDefaultColor(theme);\n    return {\n      ...n,\n      color: nodeColor.slice(0, 3),\n    };\n  }, []);\n  const treeWithOneLevelZeroNode = {\n    ...currTree,\n    tree: [nodeWithColors],\n  };\n  return {\n    treeToExport: treeExport(treeWithOneLevelZeroNode, datatype),\n    nodeName: node.name,\n  };\n}\n\n/**\n * Prepare the set of a node of interest for export.\n * @param {object} currTree A tree object.\n * @param {string} nodeKey The key of the node of interest.\n * @returns {object} { setToExport, nodeName } The set as an array.\n */\nexport function treeExportSet(currTree, nodePath) {\n  const node = treeFindNodeByNamePath(currTree, nodePath);\n  return { setToExport: nodeToSet(node), nodeName: node.name };\n}\n\n/**\n * Get an empty tree, with a default tree state.\n * @param {string} datatype The type of sets that this tree contains.\n * @returns {object} Empty tree.\n */\nexport function treeInitialize(datatype) {\n  return {\n    version: HIERARCHICAL_SCHEMAS[datatype].latestVersion,\n    datatype,\n    tree: [],\n  };\n}\n\n/**\n * For convenience, get an object with information required\n * to render a node as a component.\n * @param {object} node A node to be rendered.\n * @returns {object} An object containing properties required\n * by the TreeNode render functions.\n */\nexport function nodeToRenderProps(node, path, cellSetColor) {\n  const level = path.length - 1;\n  return {\n    title: node.name,\n    nodeKey: pathToKey(path),\n    path,\n    size: getNodeLength(node),\n    color: cellSetColor?.find(d => isEqual(d.path, path))?.color,\n    level,\n    isLeaf: (!node.children || node.children.length === 0) && Boolean(node.set),\n    height: nodeToHeight(node),\n  };\n}\n\n/**\n * Using a color and a probability, mix the color with an \"uncertainty\" color,\n * for example, gray.\n * Reference: https://github.com/bgrins/TinyColor/blob/80f7225029c428c0de0757f7d98ac15f497bee57/tinycolor.js#L701\n * @param {number[]} originalColor The color assignment for the class.\n * @param {number} p The mixing amount, or level certainty in the originalColor classification,\n * between 0 and 1.\n * @param {number[]} mixingColor The color with which to mix. By default, [128, 128, 128] gray.\n * @returns {number[]} Returns the color after mixing.\n */\nfunction colorMixWithUncertainty(originalColor, p, mixingColor = [128, 128, 128]) {\n  return [\n    ((originalColor[0] - mixingColor[0]) * p) + mixingColor[0],\n    ((originalColor[1] - mixingColor[1]) * p) + mixingColor[1],\n    ((originalColor[2] - mixingColor[2]) * p) + mixingColor[2],\n  ];\n}\n\n/**\n * Given a tree with state, get the cellIds and cellColors,\n * based on the nodes currently marked as \"visible\".\n * @param {object} currTree A tree object.\n *  @param {array} selectedNamePaths Array of arrays of strings,\n * representing set \"paths\".\n * @param {object[]} cellSetColor Array of objects with the\n * properties `path` and `color`.\n * @param {string} theme \"light\" or \"dark\" for the vitessce theme\n * @returns {array} Tuple of [cellIds, cellColors]\n * where cellIds is an array of strings,\n * and cellColors is an object mapping cellIds to color [r,g,b] arrays.\n */\nexport function treeToCellColorsBySetNames(currTree, selectedNamePaths, cellSetColor, theme) {\n  let cellColorsArray = [];\n  selectedNamePaths.forEach((setNamePath) => {\n    const node = treeFindNodeByNamePath(currTree, setNamePath);\n    if (node) {\n      const nodeSet = nodeToSet(node);\n      const nodeColor = (\n        cellSetColor?.find(d => isEqual(d.path, setNamePath))?.color\n        || getDefaultColor(theme)\n      );\n      cellColorsArray = [\n        ...cellColorsArray,\n        ...nodeSet.map(([cellId, prob]) => [\n          cellId,\n          (isNil(prob) ? nodeColor : colorMixWithUncertainty(nodeColor, prob)),\n        ]),\n      ];\n    }\n  });\n  return new Map(cellColorsArray);\n}\n\n/**\n * Given a tree with state, get an array of\n * objects with cellIds and cellColors,\n * based on the nodes currently marked as \"visible\".\n * @param {object} currTree A tree object.\n * @param {array} selectedNamePaths Array of arrays of strings,\n * representing set \"paths\".\n * @param {object[]} setColor Array of objects with the\n * properties `path` and `color`\n * @param {string} theme \"light\" or \"dark\" for the vitessce theme.\n * @returns {object[]} Array of objects with properties\n * `obsId`, `name`, and `color`.\n */\nexport function treeToObjectsBySetNames(currTree, selectedNamePaths, setColor, theme) {\n  let cellsArray = [];\n  for (let i = 0; i < selectedNamePaths.length; i += 1) {\n    const setNamePath = selectedNamePaths[i];\n    const node = treeFindNodeByNamePath(currTree, setNamePath);\n    if (node) {\n      const nodeSet = nodeToSet(node);\n      const nodeColor = (\n        setColor?.find(d => isEqual(d.path, setNamePath))?.color\n        || getDefaultColor(theme)\n      );\n      cellsArray = cellsArray.concat(nodeSet.map(([cellId]) => ({\n        obsId: cellId,\n        name: node.name,\n        color: nodeColor,\n      })));\n    }\n  }\n  return cellsArray;\n}\n\nexport function treeToCellPolygonsBySetNames(\n  currTree, cells, mapping, selectedNamePaths, cellSetColor, theme,\n) {\n  const cellSetPolygons = [];\n  selectedNamePaths.forEach((setNamePath) => {\n    const node = treeFindNodeByNamePath(currTree, setNamePath);\n    if (node) {\n      const nodeSet = nodeToSet(node);\n      const nodeColor = (\n        cellSetColor?.find(d => isEqual(d.path, setNamePath))?.color\n        || getDefaultColor(theme)\n      );\n      const cellPositions = nodeSet\n        .map(([cellId]) => ([\n          cells[cellId]?.mappings[mapping][0],\n          -cells[cellId]?.mappings[mapping][1],\n        ]))\n        .filter(cell => cell.every(i => typeof i === 'number'));\n\n      if (cellPositions.length > 2) {\n        const points = turfFeatureCollection(\n          cellPositions.map(turfPoint),\n        );\n        const concavity = Infinity;\n        const hullCoords = concaveman(cellPositions, concavity);\n        if (hullCoords) {\n          const centroidCoords = centroid(points).geometry.coordinates;\n          cellSetPolygons.push({\n            path: setNamePath,\n            name: setNamePath[setNamePath.length - 1],\n            hull: hullCoords,\n            color: nodeColor,\n            centroid: centroidCoords,\n          });\n        }\n      }\n    }\n  });\n  return cellSetPolygons;\n}\n\n/**\n * Given a tree with state, get the sizes of the\n * sets currently marked as \"visible\".\n * @param {object} currTree A tree object.\n * @param {array} selectedNamePaths Array of arrays of strings,\n * representing set \"paths\".\n * @param {object[]} setColor Array of objects with the\n * properties `path` and `color`.\n * @param {string} theme \"light\" or \"dark\" for the vitessce theme\n * @returns {object[]} Array of objects\n * with the properties `name`, `size`, `key`,\n * and `color`.\n */\nexport function treeToSetSizesBySetNames(currTree, selectedNamePaths, setColor, theme) {\n  const sizes = [];\n  selectedNamePaths.forEach((setNamePath) => {\n    const node = treeFindNodeByNamePath(currTree, setNamePath);\n    if (node) {\n      const nodeSet = nodeToSet(node);\n      const nodeColor = setColor.find(d => isEqual(d.path, setNamePath))?.color\n        || getDefaultColor(theme);\n      sizes.push({\n        key: generateKey(),\n        name: node.name,\n        size: nodeSet.length,\n        color: nodeColor,\n      });\n    }\n  });\n  return sizes;\n}\n\n/**\n * Find and remove a node from the descendants of the current node.\n * @param {object} node A node to search on.\n * @param {array} prevPath Path of the current node to be searched.\n * @param {array} filterPath The path sought.\n * @returns {object} A new node without a node at filterPath.\n */\nexport function filterNode(node, prevPath, filterPath) {\n  if (isEqual([...prevPath, node.name], filterPath)) {\n    return null;\n  }\n  if (!node.children) {\n    return node;\n  }\n  return {\n    ...node,\n    children: node.children.map(\n      c => filterNode(c, [...prevPath, node.name], filterPath),\n    ).filter(Boolean),\n  };\n}\n\nexport function treeToExpectedCheckedLevel(currTree, checkedPaths) {\n  let result = null;\n  if (currTree) {\n    currTree.tree.forEach((lzn) => {\n      const levelZeroPath = [lzn.name];\n      const height = nodeToHeight(lzn);\n      range(height).forEach((i) => {\n        const levelIndex = i + 1;\n        const levelNodePaths = nodeToLevelDescendantNamePaths(lzn, levelIndex, [], true);\n        if (isEqual(levelNodePaths, checkedPaths)) {\n          result = { levelZeroPath, levelIndex };\n        }\n      });\n    });\n  }\n  return result;\n}\n\nexport function treesConflict(cellSets, testCellSets) {\n  const paths = [];\n  const testPaths = [];\n  let hasConflict = false;\n\n  function getPaths(node, prevPath) {\n    paths.push([...prevPath, node.name]);\n    if (node.children) {\n      node.children.forEach(c => getPaths(c, [...prevPath, node.name]));\n    }\n  }\n  cellSets.tree.forEach(lzn => getPaths(lzn, []));\n\n  function getTestPaths(node, prevPath) {\n    testPaths.push([...prevPath, node.name]);\n    if (node.children) {\n      node.children.forEach(c => getPaths(c, [...prevPath, node.name]));\n    }\n  }\n  testCellSets.tree.forEach(lzn => getTestPaths(lzn, []));\n\n  testPaths.forEach((testPath) => {\n    if (paths.find(p => isEqual(p, testPath))) {\n      hasConflict = true;\n    }\n  });\n  return hasConflict;\n}\n\nexport function initializeCellSetColor(cellSets, cellSetColor) {\n  const nextCellSetColor = [...(cellSetColor || [])];\n  const nodeCountPerTreePerLevel = cellSets.tree.map(tree => Array\n    .from({\n      length: nodeToHeight(tree) + 1, // Need to add one because its an array.\n    }).fill(0));\n\n  function processNode(node, prevPath, hierarchyLevel, treeIndex) {\n    const index = nodeCountPerTreePerLevel[treeIndex][hierarchyLevel];\n    const nodePath = [...prevPath, node.name];\n\n    const nodeColor = nextCellSetColor.find(d => isEqual(d.path, nodePath));\n    if (!nodeColor) {\n      nextCellSetColor.push({\n        path: nodePath,\n        color: PALETTE[index % PALETTE.length],\n      });\n    }\n    nodeCountPerTreePerLevel[treeIndex][hierarchyLevel] += 1;\n    if (node.children) {\n      node.children.forEach(c => processNode(c, nodePath, hierarchyLevel + 1, treeIndex));\n    }\n  }\n\n  cellSets.tree.forEach((lzn, treeIndex) => processNode(lzn, [], 0, treeIndex));\n  return nextCellSetColor;\n}\n\nexport function getCellSetPolygons(params) {\n  const {\n    cells,\n    mapping,\n    cellSets,\n    cellSetSelection,\n    cellSetColor,\n    theme,\n  } = params;\n  if (cellSetSelection && cellSetSelection.length > 0 && cellSets && cells) {\n    return treeToCellPolygonsBySetNames(\n      cellSets, cells, mapping, cellSetSelection, cellSetColor, theme,\n    );\n  }\n  return [];\n}\n","module.exports = require(\"@material-ui/core/Grid\");","/**\n * Constants representing names of coordination types,\n * to help prevent typos.\n */\nexport const COORDINATION_TYPES = {\n  DATASET: 'dataset',\n  EMBEDDING_TYPE: 'embeddingType',\n  EMBEDDING_ZOOM: 'embeddingZoom',\n  EMBEDDING_ROTATION: 'embeddingRotation',\n  EMBEDDING_TARGET_X: 'embeddingTargetX',\n  EMBEDDING_TARGET_Y: 'embeddingTargetY',\n  EMBEDDING_TARGET_Z: 'embeddingTargetZ',\n  EMBEDDING_CELL_SET_POLYGONS_VISIBLE: 'embeddingCellSetPolygonsVisible',\n  EMBEDDING_CELL_SET_LABELS_VISIBLE: 'embeddingCellSetLabelsVisible',\n  EMBEDDING_CELL_SET_LABEL_SIZE: 'embeddingCellSetLabelSize',\n  EMBEDDING_CELL_RADIUS: 'embeddingCellRadius',\n  EMBEDDING_CELL_OPACITY: 'embeddingCellOpacity',\n  EMBEDDING_CELL_RADIUS_MODE: 'embeddingCellRadiusMode',\n  EMBEDDING_CELL_OPACITY_MODE: 'embeddingCellOpacityMode',\n  SPATIAL_ZOOM: 'spatialZoom',\n  SPATIAL_ROTATION: 'spatialRotation',\n  SPATIAL_TARGET_X: 'spatialTargetX',\n  SPATIAL_TARGET_Y: 'spatialTargetY',\n  SPATIAL_TARGET_Z: 'spatialTargetZ',\n  SPATIAL_ROTATION_X: 'spatialRotationX',\n  SPATIAL_ROTATION_Y: 'spatialRotationY',\n  SPATIAL_ROTATION_Z: 'spatialRotationZ',\n  SPATIAL_ROTATION_ORBIT: 'spatialRotationOrbit',\n  SPATIAL_ORBIT_AXIS: 'spatialOrbitAxis',\n  SPATIAL_AXIS_FIXED: 'spatialAxisFixed',\n  HEATMAP_ZOOM_X: 'heatmapZoomX',\n  HEATMAP_ZOOM_Y: 'heatmapZoomY',\n  HEATMAP_TARGET_X: 'heatmapTargetX',\n  HEATMAP_TARGET_Y: 'heatmapTargetY',\n  CELL_FILTER: 'cellFilter',\n  CELL_HIGHLIGHT: 'cellHighlight',\n  CELL_SET_SELECTION: 'cellSetSelection',\n  CELL_SET_HIGHLIGHT: 'cellSetHighlight',\n  CELL_SET_COLOR: 'cellSetColor',\n  GENE_FILTER: 'geneFilter',\n  GENE_HIGHLIGHT: 'geneHighlight',\n  GENE_SELECTION: 'geneSelection',\n  GENE_EXPRESSION_COLORMAP: 'geneExpressionColormap',\n  GENE_EXPRESSION_TRANSFORM: 'geneExpressionTransform',\n  GENE_EXPRESSION_COLORMAP_RANGE: 'geneExpressionColormapRange',\n  CELL_COLOR_ENCODING: 'cellColorEncoding',\n  SPATIAL_RASTER_LAYERS: 'spatialRasterLayers',\n  SPATIAL_CELLS_LAYER: 'spatialCellsLayer',\n  SPATIAL_MOLECULES_LAYER: 'spatialMoleculesLayer',\n  SPATIAL_NEIGHBORHOODS_LAYER: 'spatialNeighborhoodsLayer',\n  GENOMIC_ZOOM_X: 'genomicZoomX',\n  GENOMIC_ZOOM_Y: 'genomicZoomY',\n  GENOMIC_TARGET_X: 'genomicTargetX',\n  GENOMIC_TARGET_Y: 'genomicTargetY',\n  ADDITIONAL_CELL_SETS: 'additionalCellSets',\n  MOLECULE_HIGHLIGHT: 'moleculeHighlight',\n};\n\n/**\n * Coordination types may have default values,\n * which can be defined here, and used by the\n * auto initialization strategy.\n */\nexport const DEFAULT_COORDINATION_VALUES = {\n  [COORDINATION_TYPES.EMBEDDING_ZOOM]: null,\n  [COORDINATION_TYPES.EMBEDDING_ROTATION]: 0,\n  [COORDINATION_TYPES.EMBEDDING_TARGET_X]: null,\n  [COORDINATION_TYPES.EMBEDDING_TARGET_Y]: null,\n  [COORDINATION_TYPES.EMBEDDING_TARGET_Z]: 0,\n  [COORDINATION_TYPES.EMBEDDING_CELL_SET_POLYGONS_VISIBLE]: false,\n  [COORDINATION_TYPES.EMBEDDING_CELL_SET_LABELS_VISIBLE]: false,\n  [COORDINATION_TYPES.EMBEDDING_CELL_SET_LABEL_SIZE]: 14,\n  [COORDINATION_TYPES.EMBEDDING_CELL_RADIUS]: 1,\n  [COORDINATION_TYPES.EMBEDDING_CELL_RADIUS_MODE]: 'auto',\n  [COORDINATION_TYPES.EMBEDDING_CELL_OPACITY]: 1,\n  [COORDINATION_TYPES.EMBEDDING_CELL_OPACITY_MODE]: 'auto',\n  [COORDINATION_TYPES.SPATIAL_ZOOM]: null,\n  [COORDINATION_TYPES.SPATIAL_ROTATION]: 0,\n  [COORDINATION_TYPES.SPATIAL_TARGET_X]: null,\n  [COORDINATION_TYPES.SPATIAL_TARGET_Y]: null,\n  [COORDINATION_TYPES.SPATIAL_TARGET_Z]: null,\n  [COORDINATION_TYPES.SPATIAL_ROTATION_X]: null,\n  [COORDINATION_TYPES.SPATIAL_ROTATION_Y]: null,\n  [COORDINATION_TYPES.SPATIAL_ROTATION_Z]: null,\n  [COORDINATION_TYPES.SPATIAL_AXIS_FIXED]: false,\n  [COORDINATION_TYPES.SPATIAL_ROTATION_ORBIT]: 0,\n  [COORDINATION_TYPES.SPATIAL_ORBIT_AXIS]: 'Y',\n  [COORDINATION_TYPES.SPATIAL_RASTER_LAYERS]: null,\n  [COORDINATION_TYPES.SPATIAL_CELLS_LAYER]: null,\n  [COORDINATION_TYPES.SPATIAL_MOLECULES_LAYER]: null,\n  [COORDINATION_TYPES.SPATIAL_NEIGHBORHOODS_LAYER]: null,\n  [COORDINATION_TYPES.HEATMAP_ZOOM_X]: 0,\n  [COORDINATION_TYPES.HEATMAP_ZOOM_Y]: 0,\n  [COORDINATION_TYPES.HEATMAP_TARGET_X]: 0,\n  [COORDINATION_TYPES.HEATMAP_TARGET_Y]: 0,\n  [COORDINATION_TYPES.GENE_EXPRESSION_COLORMAP]: 'plasma',\n  [COORDINATION_TYPES.GENE_EXPRESSION_COLORMAP_RANGE]: [0.0, 1.0],\n  [COORDINATION_TYPES.GENE_EXPRESSION_TRANSFORM]: null,\n  [COORDINATION_TYPES.GENE_FILTER]: null,\n  [COORDINATION_TYPES.GENE_HIGHLIGHT]: null,\n  [COORDINATION_TYPES.GENE_SELECTION]: null,\n  [COORDINATION_TYPES.CELL_FILTER]: null,\n  [COORDINATION_TYPES.CELL_HIGHLIGHT]: null,\n  [COORDINATION_TYPES.CELL_SET_SELECTION]: null,\n  [COORDINATION_TYPES.CELL_SET_HIGHLIGHT]: null,\n  [COORDINATION_TYPES.CELL_SET_COLOR]: null,\n  [COORDINATION_TYPES.CELL_COLOR_ENCODING]: 'cellSetSelection',\n  [COORDINATION_TYPES.GENOMIC_ZOOM_X]: 0,\n  [COORDINATION_TYPES.GENOMIC_ZOOM_Y]: 0,\n  [COORDINATION_TYPES.GENOMIC_TARGET_X]: 1549999999.5,\n  [COORDINATION_TYPES.GENOMIC_TARGET_Y]: 1549999999.5,\n  [COORDINATION_TYPES.ADDITIONAL_CELL_SETS]: null,\n  [COORDINATION_TYPES.MOLECULE_HIGHLIGHT]: null,\n};\n\n// The following coordination types should be\n// initialized to independent scopes when\n// initialized automatically.\n// These make the resulting view config\n// (after auto-initialization) behave\n// like \"legacy\" Vitessce (pre-coordination model).\nexport const AUTO_INDEPENDENT_COORDINATION_TYPES = [\n  COORDINATION_TYPES.HEATMAP_ZOOM_X,\n  COORDINATION_TYPES.HEATMAP_ZOOM_Y,\n  COORDINATION_TYPES.HEATMAP_TARGET_X,\n  COORDINATION_TYPES.HEATMAP_TARGET_Y,\n  COORDINATION_TYPES.EMBEDDING_ZOOM,\n  COORDINATION_TYPES.EMBEDDING_TARGET_X,\n  COORDINATION_TYPES.EMBEDDING_TARGET_Y,\n  COORDINATION_TYPES.EMBEDDING_TARGET_Z,\n  COORDINATION_TYPES.EMBEDDING_CELL_SET_POLYGONS_VISIBLE,\n  COORDINATION_TYPES.EMBEDDING_CELL_SET_LABELS_VISIBLE,\n  COORDINATION_TYPES.EMBEDDING_CELL_SET_LABEL_SIZE,\n  COORDINATION_TYPES.EMBEDDING_CELL_RADIUS,\n  COORDINATION_TYPES.EMBEDDING_CELL_OPACITY,\n];\n\n/**\n   * Mapping from component type to\n   * supported coordination object types.\n   * This mapping can be used to determine\n   * which pieces of state that a component will\n   * need to get/set.\n   * Keys here are the component registry keys.\n   */\nexport const COMPONENT_COORDINATION_TYPES = {\n  scatterplot: [\n    COORDINATION_TYPES.DATASET,\n    COORDINATION_TYPES.EMBEDDING_TYPE,\n    COORDINATION_TYPES.EMBEDDING_ZOOM,\n    COORDINATION_TYPES.EMBEDDING_ROTATION,\n    COORDINATION_TYPES.EMBEDDING_TARGET_X,\n    COORDINATION_TYPES.EMBEDDING_TARGET_Y,\n    COORDINATION_TYPES.EMBEDDING_TARGET_Z,\n    COORDINATION_TYPES.EMBEDDING_CELL_SET_POLYGONS_VISIBLE,\n    COORDINATION_TYPES.EMBEDDING_CELL_SET_LABELS_VISIBLE,\n    COORDINATION_TYPES.EMBEDDING_CELL_SET_LABEL_SIZE,\n    COORDINATION_TYPES.EMBEDDING_CELL_RADIUS,\n    COORDINATION_TYPES.EMBEDDING_CELL_RADIUS_MODE,\n    COORDINATION_TYPES.EMBEDDING_CELL_OPACITY,\n    COORDINATION_TYPES.EMBEDDING_CELL_OPACITY_MODE,\n    COORDINATION_TYPES.CELL_FILTER,\n    COORDINATION_TYPES.CELL_HIGHLIGHT,\n    COORDINATION_TYPES.CELL_SET_SELECTION,\n    COORDINATION_TYPES.CELL_SET_HIGHLIGHT,\n    COORDINATION_TYPES.CELL_SET_COLOR,\n    COORDINATION_TYPES.GENE_HIGHLIGHT,\n    COORDINATION_TYPES.GENE_SELECTION,\n    COORDINATION_TYPES.GENE_EXPRESSION_COLORMAP,\n    COORDINATION_TYPES.GENE_EXPRESSION_COLORMAP_RANGE,\n    COORDINATION_TYPES.CELL_COLOR_ENCODING,\n    COORDINATION_TYPES.ADDITIONAL_CELL_SETS,\n  ],\n  spatial: [\n    COORDINATION_TYPES.DATASET,\n    COORDINATION_TYPES.SPATIAL_ZOOM,\n    COORDINATION_TYPES.SPATIAL_ROTATION,\n    COORDINATION_TYPES.SPATIAL_RASTER_LAYERS,\n    COORDINATION_TYPES.SPATIAL_CELLS_LAYER,\n    COORDINATION_TYPES.SPATIAL_MOLECULES_LAYER,\n    COORDINATION_TYPES.SPATIAL_NEIGHBORHOODS_LAYER,\n    COORDINATION_TYPES.SPATIAL_TARGET_X,\n    COORDINATION_TYPES.SPATIAL_TARGET_Y,\n    COORDINATION_TYPES.SPATIAL_TARGET_Z,\n    COORDINATION_TYPES.SPATIAL_ROTATION_X,\n    COORDINATION_TYPES.SPATIAL_ROTATION_Y,\n    COORDINATION_TYPES.SPATIAL_ROTATION_Z,\n    COORDINATION_TYPES.SPATIAL_ROTATION_ORBIT,\n    COORDINATION_TYPES.SPATIAL_ORBIT_AXIS,\n    COORDINATION_TYPES.SPATIAL_AXIS_FIXED,\n    COORDINATION_TYPES.CELL_FILTER,\n    COORDINATION_TYPES.CELL_HIGHLIGHT,\n    COORDINATION_TYPES.CELL_SET_SELECTION,\n    COORDINATION_TYPES.CELL_SET_HIGHLIGHT,\n    COORDINATION_TYPES.CELL_SET_COLOR,\n    COORDINATION_TYPES.GENE_HIGHLIGHT,\n    COORDINATION_TYPES.GENE_SELECTION,\n    COORDINATION_TYPES.GENE_EXPRESSION_COLORMAP,\n    COORDINATION_TYPES.GENE_EXPRESSION_COLORMAP_RANGE,\n    COORDINATION_TYPES.CELL_COLOR_ENCODING,\n    COORDINATION_TYPES.ADDITIONAL_CELL_SETS,\n    COORDINATION_TYPES.MOLECULE_HIGHLIGHT,\n  ],\n  heatmap: [\n    COORDINATION_TYPES.DATASET,\n    COORDINATION_TYPES.HEATMAP_ZOOM_X,\n    COORDINATION_TYPES.HEATMAP_ZOOM_Y,\n    COORDINATION_TYPES.HEATMAP_TARGET_X,\n    COORDINATION_TYPES.HEATMAP_TARGET_Y,\n    COORDINATION_TYPES.CELL_FILTER,\n    COORDINATION_TYPES.CELL_HIGHLIGHT,\n    COORDINATION_TYPES.CELL_SET_SELECTION,\n    COORDINATION_TYPES.CELL_SET_HIGHLIGHT,\n    COORDINATION_TYPES.CELL_SET_COLOR,\n    COORDINATION_TYPES.GENE_FILTER,\n    COORDINATION_TYPES.GENE_HIGHLIGHT,\n    COORDINATION_TYPES.GENE_SELECTION,\n    COORDINATION_TYPES.GENE_EXPRESSION_COLORMAP,\n    COORDINATION_TYPES.GENE_EXPRESSION_COLORMAP_RANGE,\n    COORDINATION_TYPES.CELL_COLOR_ENCODING,\n    COORDINATION_TYPES.ADDITIONAL_CELL_SETS,\n  ],\n  cellSets: [\n    COORDINATION_TYPES.DATASET,\n    COORDINATION_TYPES.CELL_SET_SELECTION,\n    COORDINATION_TYPES.CELL_SET_HIGHLIGHT,\n    COORDINATION_TYPES.CELL_SET_COLOR,\n    COORDINATION_TYPES.CELL_COLOR_ENCODING,\n    COORDINATION_TYPES.ADDITIONAL_CELL_SETS,\n  ],\n  cellSetSizes: [\n    COORDINATION_TYPES.DATASET,\n    COORDINATION_TYPES.CELL_SET_SELECTION,\n    COORDINATION_TYPES.CELL_SET_HIGHLIGHT,\n    COORDINATION_TYPES.CELL_SET_COLOR,\n    COORDINATION_TYPES.ADDITIONAL_CELL_SETS,\n  ],\n  cellSetExpression: [\n    COORDINATION_TYPES.DATASET,\n    COORDINATION_TYPES.GENE_SELECTION,\n    COORDINATION_TYPES.GENE_EXPRESSION_TRANSFORM,\n    COORDINATION_TYPES.CELL_SET_SELECTION,\n    COORDINATION_TYPES.CELL_SET_HIGHLIGHT,\n    COORDINATION_TYPES.CELL_SET_COLOR,\n    COORDINATION_TYPES.ADDITIONAL_CELL_SETS,\n  ],\n  status: [\n    COORDINATION_TYPES.DATASET,\n    COORDINATION_TYPES.CELL_HIGHLIGHT,\n    COORDINATION_TYPES.GENE_HIGHLIGHT,\n    COORDINATION_TYPES.CELL_SET_HIGHLIGHT,\n    COORDINATION_TYPES.MOLECULE_HIGHLIGHT,\n  ],\n  genes: [\n    COORDINATION_TYPES.DATASET,\n    COORDINATION_TYPES.GENE_FILTER,\n    COORDINATION_TYPES.GENE_HIGHLIGHT,\n    COORDINATION_TYPES.GENE_SELECTION,\n    COORDINATION_TYPES.CELL_COLOR_ENCODING,\n  ],\n  expressionHistogram: [\n    COORDINATION_TYPES.DATASET,\n    COORDINATION_TYPES.GENE_SELECTION,\n  ],\n  layerController: [\n    COORDINATION_TYPES.DATASET,\n    COORDINATION_TYPES.SPATIAL_RASTER_LAYERS,\n    COORDINATION_TYPES.SPATIAL_CELLS_LAYER,\n    COORDINATION_TYPES.SPATIAL_MOLECULES_LAYER,\n    COORDINATION_TYPES.SPATIAL_NEIGHBORHOODS_LAYER,\n    COORDINATION_TYPES.SPATIAL_ZOOM,\n    COORDINATION_TYPES.SPATIAL_TARGET_X,\n    COORDINATION_TYPES.SPATIAL_TARGET_Y,\n    COORDINATION_TYPES.SPATIAL_TARGET_Z,\n    COORDINATION_TYPES.SPATIAL_ROTATION_X,\n    COORDINATION_TYPES.SPATIAL_ROTATION_Y,\n    COORDINATION_TYPES.SPATIAL_ROTATION_Z,\n    COORDINATION_TYPES.SPATIAL_ROTATION_ORBIT,\n    COORDINATION_TYPES.SPATIAL_ORBIT_AXIS,\n  ],\n  higlass: [\n    COORDINATION_TYPES.DATASET,\n    COORDINATION_TYPES.GENOMIC_ZOOM_X,\n    COORDINATION_TYPES.GENOMIC_ZOOM_Y,\n    COORDINATION_TYPES.GENOMIC_TARGET_X,\n    COORDINATION_TYPES.GENOMIC_TARGET_Y,\n    COORDINATION_TYPES.GENE_FILTER,\n    COORDINATION_TYPES.GENE_HIGHLIGHT,\n    COORDINATION_TYPES.GENE_SELECTION,\n  ],\n  genomicProfiles: [\n    COORDINATION_TYPES.DATASET,\n    COORDINATION_TYPES.GENOMIC_ZOOM_X,\n    COORDINATION_TYPES.GENOMIC_ZOOM_Y,\n    COORDINATION_TYPES.GENOMIC_TARGET_X,\n    COORDINATION_TYPES.GENOMIC_TARGET_Y,\n    COORDINATION_TYPES.GENE_FILTER,\n    COORDINATION_TYPES.GENE_HIGHLIGHT,\n    COORDINATION_TYPES.GENE_SELECTION,\n    COORDINATION_TYPES.CELL_SET_SELECTION,\n    COORDINATION_TYPES.CELL_SET_HIGHLIGHT,\n    COORDINATION_TYPES.CELL_SET_COLOR,\n    COORDINATION_TYPES.ADDITIONAL_CELL_SETS,\n  ],\n  description: [\n    COORDINATION_TYPES.DATASET,\n    COORDINATION_TYPES.SPATIAL_RASTER_LAYERS,\n  ],\n};\n","module.exports = require(\"@material-ui/core/TableCell\");","import { useState, useEffect } from 'react';\nimport equal from 'fast-deep-equal';\nimport { capitalize } from '../utils';\nimport { useSetWarning } from '../app/state/hooks';\nimport {\n  AbstractLoaderError,\n  LoaderNotFoundError,\n} from '../loaders/errors/index';\nimport {\n  DEFAULT_MOLECULES_LAYER,\n  DEFAULT_CELLS_LAYER,\n  DEFAULT_NEIGHBORHOODS_LAYER,\n} from './spatial/constants';\nimport { DEFAULT_COORDINATION_VALUES } from '../app/state/coordination';\n\n/**\n * Warn via publishing to the console\n * and to the global warning store.\n * @param {AbstractLoaderError} error An error instance.\n */\nfunction warn(error, setWarning) {\n  setWarning(error.message);\n  console.warn(error.message);\n  if (error instanceof AbstractLoaderError) {\n    error.warnInConsole();\n  }\n}\n\n/**\n * Initialize values in the coordination space.\n * @param {object} values Object where\n * keys are coordination type names,\n * values are initial coordination values.\n * @param {object} setters Object where\n * keys are coordination type names with the prefix 'set',\n * values are coordination setter functions.\n * @param {object} initialValues Object where\n * keys are coordination type names and keys are values.\n */\nfunction initCoordinationSpace(values, setters, initialValues) {\n  if (!values || !setters) {\n    return;\n  }\n  Object.entries(values).forEach(([coordinationType, value]) => {\n    const setterName = `set${capitalize(coordinationType)}`;\n    const setterFunc = setters[setterName];\n    const initialValue = initialValues && initialValues[coordinationType];\n    const shouldInit = equal(initialValue, DEFAULT_COORDINATION_VALUES[coordinationType]);\n    if (shouldInit && setterFunc) {\n      setterFunc(value);\n    }\n  });\n}\n\n/**\n * Get the dataset description string.\n * @param {object} loaders The object mapping\n * datasets and data types to loader instances.\n * @param {string} dataset The key for a dataset,\n * used to identify which loader to use.\n * @returns {array} [description] where\n * description is a string.\n */\nexport function useDescription(loaders, dataset) {\n  const [description, setDescription] = useState();\n\n  useEffect(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n\n    if (loaders[dataset].description) {\n      setDescription(loaders[dataset].description);\n    } else {\n      setDescription(null);\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  return [description];\n}\n\n/**\n * Get data from a cells data type loader,\n * updating \"ready\" and URL state appropriately.\n * Throw warnings if the data is marked as required.\n * Subscribe to loader updates.\n * @param {object} loaders The object mapping\n * datasets and data types to loader instances.\n * @param {string} dataset The key for a dataset,\n * used to identify which loader to use.\n * @param {function} setItemIsReady A function to call\n * when done loading.\n * @param {function} addUrl A function to call to update\n * the URL list.\n * @param {boolean} isRequired Should a warning be thrown if\n * loading is unsuccessful?\n * @param {object} coordinationSetters Object where\n * keys are coordination type names with the prefix 'set',\n * values are coordination setter functions.\n * @param {object} initialCoordinationValues Object where\n * keys are coordination type names with the prefix 'initialize',\n * values are initialization preferences as boolean values.\n * @returns {array} [cells, cellsCount] where\n * cells is an object and cellsCount is the\n * number of items in the cells object.\n */\nexport function useCellsData(\n  loaders, dataset, setItemIsReady, addUrl, isRequired,\n  coordinationSetters, initialCoordinationValues,\n) {\n  const [cells, setCells] = useState({});\n  const [cellsCount, setCellsCount] = useState(0);\n\n  const setWarning = useSetWarning();\n\n  useEffect(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n\n    if (loaders[dataset].loaders.cells) {\n      loaders[dataset].loaders.cells.load().catch(e => warn(e, setWarning)).then((payload) => {\n        if (!payload) return;\n        const { data, url, coordinationValues } = payload;\n        setCells(data);\n        setCellsCount(Object.keys(data).length);\n        addUrl(url, 'Cells');\n        // This dataset has cells, so set up the\n        // spatial cells layer coordination value\n        // using the cell layer singleton.\n        const coordinationValuesOrDefault = {\n          spatialCellsLayer: DEFAULT_CELLS_LAYER,\n          ...coordinationValues,\n        };\n        initCoordinationSpace(\n          coordinationValuesOrDefault,\n          coordinationSetters, initialCoordinationValues,\n        );\n        setItemIsReady('cells');\n      });\n    } else {\n      setCells({});\n      setCellsCount(0);\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, 'cells', null, null), setWarning);\n      } else {\n        setItemIsReady('cells');\n      }\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  return [cells, cellsCount];\n}\n\n/**\n * Get data from a cell sets data type loader,\n * updating \"ready\" and URL state appropriately.\n * Throw warnings if the data is marked as required.\n * Subscribe to loader updates.\n * @param {object} loaders The object mapping\n * datasets and data types to loader instances.\n * @param {string} dataset The key for a dataset,\n * used to identify which loader to use.\n * @param {function} setItemIsReady A function to call\n * when done loading.\n * @param {function} addUrl A function to call to update\n * the URL list.\n * @param {boolean} isRequired Should a warning be thrown if\n * loading is unsuccessful?\n * @param {object} coordinationSetters Object where\n * keys are coordination type names with the prefix 'set',\n * values are coordination setter functions.\n * @param {object} initialCoordinationValues Object where\n * keys are coordination type names and values are the current values.\n * @returns {array} [cellSets] where\n * cellSets is a sets tree object.\n */\nexport function useCellSetsData(\n  loaders, dataset, setItemIsReady, addUrl, isRequired,\n  coordinationSetters, initialCoordinationValues,\n) {\n  const [cellSets, setCellSets] = useState();\n\n  const setWarning = useSetWarning();\n\n  useEffect(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n\n    if (loaders[dataset].loaders['cell-sets']) {\n      // Load the data initially.\n      loaders[dataset].loaders['cell-sets'].load().catch(e => warn(e, setWarning)).then((payload) => {\n        if (!payload) return;\n        const { data, url, coordinationValues } = payload;\n        setCellSets(data);\n        addUrl(url, 'Cell Sets');\n        initCoordinationSpace(\n          coordinationValues,\n          coordinationSetters,\n          initialCoordinationValues,\n        );\n        setItemIsReady('cell-sets');\n      });\n    } else {\n      setCellSets(null);\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, 'cell-sets', null, null), setWarning);\n      } else {\n        setItemIsReady('cell-sets');\n      }\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  return [cellSets];\n}\n\n/**\n * Get (potentially filtered) data from an expression matrix data type loader,\n * updating \"ready\" and URL state appropriately.\n * Throw warnings if the data is marked as required.\n * Subscribe to loader updates.  Should not be used in conjunction (called in the same component)\n * with useExpressionAttrs as this returns a potentially filtered set of attributes\n * specifically for the returned expression data.\n * @param {object} loaders The object mapping\n * datasets and data types to loader instances.\n * @param {string} dataset The key for a dataset,\n * used to identify which loader to use.\n * @param {function} setItemIsReady A function to call\n * when done loading.\n * @param {function} addUrl A function to call to update\n * the URL list.\n * @param {boolean} isRequired Should a warning be thrown if\n * loading is unsuccessful?\n * @param {object} coordinationSetters Object where\n * keys are coordination type names with the prefix 'set',\n * values are coordination setter functions.\n * @param {object} initialCoordinationValues Object where\n * keys are coordination type names with the prefix 'initialize',\n * values are initialization preferences as boolean values.\n * @returns {array} [expressionMatrix] where\n * expressionMatrix is an object with\n * shape { cols, rows, matrix }.\n */\nexport function useExpressionMatrixData(\n  loaders, dataset, setItemIsReady, addUrl, isRequired,\n  coordinationSetters, initialCoordinationValues,\n) {\n  const [expressionMatrix, setExpressionMatrix] = useState();\n\n  const setWarning = useSetWarning();\n\n  useEffect(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n\n    if (loaders[dataset].loaders['expression-matrix']) {\n      loaders[dataset].loaders['expression-matrix'].load().catch(e => warn(e, setWarning)).then((payload) => {\n        if (!payload) return;\n        const { data, url, coordinationValues } = payload;\n        const [attrs, arr] = data;\n        setExpressionMatrix({\n          cols: attrs.cols,\n          rows: attrs.rows,\n          matrix: arr.data,\n        });\n        addUrl(url, 'Expression Matrix');\n        initCoordinationSpace(\n          coordinationValues,\n          coordinationSetters,\n          initialCoordinationValues,\n        );\n        setItemIsReady('expression-matrix');\n      });\n    } else {\n      setExpressionMatrix(null);\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, 'expression-matrix', null, null), setWarning);\n      } else {\n        setItemIsReady('expression-matrix');\n      }\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  return [expressionMatrix];\n}\n\n/**\n * Get data from the expression matrix data type loader for a given gene selection.\n * Throw warnings if the data is marked as required.\n * Subscribe to loader updates.\n * @param {object} loaders The object mapping\n * datasets and data types to loader instances.\n * @param {string} dataset The key for a dataset,\n * used to identify which loader to use.\n * @param {function} setItemIsReady A function to call\n * when done loading.\n * @param {boolean} isRequired Should a warning be thrown if\n * loading is unsuccessful?\n * @param {boolean} selection A list of gene names to get expression data for.\n * @returns {array} [geneData] where geneData is an array [Uint8Array, ..., Uint8Array]\n * for however many genes are in the selection.\n */\nexport function useGeneSelection(\n  loaders,\n  dataset,\n  setItemIsReady,\n  isRequired,\n  selection,\n  setItemIsNotReady,\n) {\n  const [geneData, setGeneData] = useState();\n\n  const setWarning = useSetWarning();\n\n  useEffect(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n    if (!selection) {\n      setItemIsReady('expression-matrix');\n      return;\n    }\n    const loader = loaders[dataset].loaders['expression-matrix'];\n    if (loader) {\n      setItemIsNotReady('expression-matrix');\n      const implementsGeneSelection = typeof loader.loadGeneSelection === 'function';\n      if (implementsGeneSelection) {\n        loaders[dataset].loaders['expression-matrix']\n          .loadGeneSelection({ selection })\n          .catch(e => warn(e, setWarning))\n          .then((payload) => {\n            if (!payload) return;\n            const { data } = payload;\n            setGeneData(data);\n            setItemIsReady('expression-matrix');\n          });\n      } else {\n        loader.load().catch(e => warn(e, setWarning)).then((payload) => {\n          if (!payload) return;\n          const { data } = payload;\n          const [attrs, { data: matrix }] = data;\n          const expressionDataForSelection = selection.map((sel) => {\n            const geneIndex = attrs.cols.indexOf(sel);\n            const numGenes = attrs.cols.length;\n            const numCells = attrs.rows.length;\n            const expressionData = new Uint8Array(numCells);\n            for (let cellIndex = 0; cellIndex < numCells; cellIndex += 1) {\n              expressionData[cellIndex] = matrix[cellIndex * numGenes + geneIndex];\n            }\n            return expressionData;\n          });\n          setGeneData(expressionDataForSelection);\n          setItemIsReady('expression-matrix');\n        });\n      }\n    } else {\n      setGeneData(null);\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, 'expression-matrix', null, null), setWarning);\n      } else {\n        setItemIsReady('expression-matrix');\n      }\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset, selection]);\n\n  return [geneData];\n}\n\n/**\n * Get the attributes for the expression matrix data type loader,\n * i.e names of cells and genes.\n * Throw warnings if the data is marked as required.\n * Subscribe to loader updates.  Should not be used in conjunction (called in the same component)\n * with useExpressionMatrixData.\n * @param {object} loaders The object mapping\n * datasets and data types to loader instances.\n * @param {string} dataset The key for a dataset,\n * used to identify which loader to use.\n * @param {function} setItemIsReady A function to call\n * when done loading.\n * @param {function} addUrl A function to call to update\n * the URL list.\n * @param {boolean} isRequired Should a warning be thrown if\n * loading is unsuccessful?\n * @returns {object} [attrs] { rows, cols } object containing cell and gene names.\n */\nexport function useExpressionAttrs(loaders, dataset, setItemIsReady, addUrl, isRequired) {\n  const [attrs, setAttrs] = useState();\n\n  const setWarning = useSetWarning();\n\n  useEffect(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n    const loader = loaders[dataset].loaders['expression-matrix'];\n    if (loader) {\n      const implementsLoadAttrs = typeof loader.loadAttrs === 'function';\n      if (implementsLoadAttrs) {\n        loader.loadAttrs().catch(e => warn(e, setWarning)).then((payload) => {\n          if (!payload) return;\n          const { data, url } = payload;\n          setAttrs(data);\n          addUrl(url, 'Expression Matrix');\n          setItemIsReady('expression-matrix');\n        });\n      } else {\n        loader.load().catch(e => warn(e, setWarning)).then((payload) => {\n          if (!payload) return;\n          const { data, url } = payload;\n          setAttrs(data[0]);\n          addUrl(url, 'Expression Matrix');\n          setItemIsReady('expression-matrix');\n        });\n      }\n    } else {\n      setAttrs(null);\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, 'expression-matrix', null, null), setWarning);\n      } else {\n        setItemIsReady('expression-matrix');\n      }\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  return [attrs];\n}\n\n/**\n * Get data from a molecules data type loader,\n * updating \"ready\" and URL state appropriately.\n * Throw warnings if the data is marked as required.\n * Subscribe to loader updates.\n * @param {object} loaders The object mapping\n * datasets and data types to loader instances.\n * @param {string} dataset The key for a dataset,\n * used to identify which loader to use.\n * @param {function} setItemIsReady A function to call\n * when done loading.\n * @param {function} addUrl A function to call to update\n * the URL list.\n * @param {boolean} isRequired Should a warning be thrown if\n * loading is unsuccessful?\n * @param {object} coordinationSetters Object where\n * keys are coordination type names with the prefix 'set',\n * values are coordination setter functions.\n * @param {object} initialCoordinationValues Object where\n * keys are coordination type names with the prefix 'initialize',\n * values are initialization preferences as boolean values.\n * @returns {array} [molecules, moleculesCount, locationsCount] where\n * molecules is an object,\n * moleculesCount is the number of unique molecule types, and\n * locationsCount is the number of molecules.\n */\nexport function useMoleculesData(\n  loaders, dataset, setItemIsReady, addUrl, isRequired,\n  coordinationSetters, initialCoordinationValues,\n) {\n  const [molecules, setMolecules] = useState();\n  const [moleculesCount, setMoleculesCount] = useState(0);\n  const [locationsCount, setLocationsCount] = useState(0);\n\n  const setWarning = useSetWarning();\n\n  useEffect(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n\n    if (loaders[dataset].loaders.molecules) {\n      loaders[dataset].loaders.molecules.load().catch(e => warn(e, setWarning)).then((payload) => {\n        if (!payload) return;\n        const { data, url, coordinationValues } = payload;\n        setMolecules(data);\n        setMoleculesCount(Object.keys(data).length);\n        setLocationsCount(Object.values(data)\n          .map(l => l.length)\n          .reduce((a, b) => a + b, 0));\n        addUrl(url, 'Molecules');\n        const coordinationValuesOrDefault = {\n          spatialMoleculesLayer: DEFAULT_MOLECULES_LAYER,\n          ...coordinationValues,\n        };\n        initCoordinationSpace(\n          coordinationValuesOrDefault,\n          coordinationSetters,\n          initialCoordinationValues,\n        );\n        setItemIsReady('molecules');\n      });\n    } else {\n      setMolecules({});\n      setMoleculesCount(0);\n      setLocationsCount(0);\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, 'molecules', null, null), setWarning);\n      } else {\n        setItemIsReady('molecules');\n      }\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  return [molecules, moleculesCount, locationsCount];\n}\n\n/**\n * Get data from a neighborhoods data type loader,\n * updating \"ready\" and URL state appropriately.\n * Throw warnings if the data is marked as required.\n * Subscribe to loader updates.\n * @param {object} loaders The object mapping\n * datasets and data types to loader instances.\n * @param {string} dataset The key for a dataset,\n * used to identify which loader to use.\n * @param {function} setItemIsReady A function to call\n * when done loading.\n * @param {function} addUrl A function to call to update\n * the URL list.\n * @param {boolean} isRequired Should a warning be thrown if\n * loading is unsuccessful?\n * @param {object} coordinationSetters Object where\n * keys are coordination type names with the prefix 'set',\n * values are coordination setter functions.\n * @param {object} initialCoordinationValues Object where\n * keys are coordination type names with the prefix 'initialize',\n * values are initialization preferences as boolean values.\n * @returns {array} [neighborhoods] where\n * neighborhoods is an object.\n */\nexport function useNeighborhoodsData(\n  loaders, dataset, setItemIsReady, addUrl, isRequired,\n  coordinationSetters, initialCoordinationValues,\n) {\n  const [neighborhoods, setNeighborhoods] = useState();\n\n  const setWarning = useSetWarning();\n\n  useEffect(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n\n    if (loaders[dataset].loaders.neighborhoods) {\n      loaders[dataset].loaders.neighborhoods.load().catch(e => warn(e, setWarning))\n        .then((payload) => {\n          if (!payload) return;\n          const { data, url, coordinationValues } = payload;\n          setNeighborhoods(data);\n          addUrl(url, 'Neighborhoods');\n          const coordinationValuesOrDefault = {\n            spatialNeighborhoodsLayer: DEFAULT_NEIGHBORHOODS_LAYER,\n            ...coordinationValues,\n          };\n          initCoordinationSpace(\n            coordinationValuesOrDefault,\n            coordinationSetters,\n            initialCoordinationValues,\n          );\n          setItemIsReady('neighborhoods');\n        });\n    } else {\n      setNeighborhoods({});\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, 'neighborhoods', null, null), setWarning);\n      } else {\n        setItemIsReady('neighborhoods');\n      }\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  return [neighborhoods];\n}\n\n/**\n * Get data from a raster data type loader,\n * updating \"ready\" and URL state appropriately.\n * Throw warnings if the data is marked as required.\n * Subscribe to loader updates.\n * @param {object} loaders The object mapping\n * datasets and data types to loader instances.\n * @param {string} dataset The key for a dataset,\n * used to identify which loader to use.\n * @param {function} setItemIsReady A function to call\n * when done loading.\n * @param {function} addUrl A function to call to update\n * the URL list.\n * @param {boolean} isRequired Should a warning be thrown if\n * loading is unsuccessful?\n * @param {object} coordinationSetters Object where\n * keys are coordination type names with the prefix 'set',\n * values are coordination setter functions.\n * @param {object} initialCoordinationValues Object where\n * keys are coordination type names with the prefix 'initialize',\n * values are initialization preferences as boolean values.\n * @returns {array} [raster, imageLayerLoaders, imageLayerMeta] where\n * raster is an object,\n * imageLayerLoaders is an object, and\n * imageLayerMeta is an object.\n */\nexport function useRasterData(\n  loaders, dataset, setItemIsReady, addUrl, isRequired,\n  coordinationSetters, initialCoordinationValues,\n) {\n  const [raster, setRaster] = useState();\n  // Since we want the image layer / channel definitions to come from the\n  // coordination space stored as JSON in the view config,\n  // we need to set up a separate state variable here to store the\n  // non-JSON objects, such as layer loader instances.\n  const [imageLayerLoaders, setImageLayerLoaders] = useState([]);\n  const [imageLayerMeta, setImageLayerMeta] = useState([]);\n\n  const setWarning = useSetWarning();\n\n  useEffect(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n\n    if (loaders[dataset].loaders.raster) {\n      loaders[dataset].loaders.raster.load().catch(e => warn(e, setWarning)).then((payload) => {\n        if (!payload) return;\n        const { data, url: urls, coordinationValues } = payload;\n        setRaster(data);\n        urls.forEach(([url, name]) => {\n          addUrl(url, name);\n        });\n        const { loaders: nextImageLoaders, meta: nextImageMeta } = data;\n        setImageLayerLoaders(nextImageLoaders);\n        setImageLayerMeta(nextImageMeta);\n        initCoordinationSpace(\n          coordinationValues,\n          coordinationSetters,\n          initialCoordinationValues,\n        );\n        setItemIsReady('raster');\n      });\n    } else {\n      // There was no raster loader for this dataset,\n      // and raster should be optional.\n      setImageLayerLoaders([]);\n      setImageLayerMeta([]);\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, 'raster', null, null), setWarning);\n      } else {\n        setItemIsReady('raster');\n      }\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n  return [raster, imageLayerLoaders, imageLayerMeta];\n}\n\n/**\n * Get data from a genomic-profiles data type loader,\n * updating \"ready\" and URL state appropriately.\n * Throw warnings if the data is marked as required.\n * Subscribe to loader updates.\n * @param {object} loaders The object mapping\n * datasets and data types to loader instances.\n * @param {string} dataset The key for a dataset,\n * used to identify which loader to use.\n * @param {function} setItemIsReady A function to call\n * when done loading.\n * @param {function} addUrl A function to call to update\n * the URL list.\n * @param {boolean} isRequired Should a warning be thrown if\n * loading is unsuccessful?\n * @param {object} coordinationSetters Object where\n * keys are coordination type names with the prefix 'set',\n * values are coordination setter functions.\n * @param {object} initialCoordinationValues Object where\n * keys are coordination type names with the prefix 'initialize',\n * values are initialization preferences as boolean values.\n * @returns {array} [neighborhoods] where\n * neighborhoods is an object.\n */\nexport function useGenomicProfilesData(\n  loaders, dataset, setItemIsReady, addUrl, isRequired,\n  coordinationSetters, initialCoordinationValues,\n) {\n  const [genomicProfilesAttrs, setGenomicProfilesAttrs] = useState();\n\n  const setWarning = useSetWarning();\n\n  useEffect(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n\n    if (loaders[dataset].loaders['genomic-profiles']) {\n      loaders[dataset].loaders['genomic-profiles'].load().catch(e => warn(e, setWarning))\n        .then((payload) => {\n          if (!payload) return;\n          const { data, url, coordinationValues } = payload;\n          setGenomicProfilesAttrs(data);\n          addUrl(url);\n          initCoordinationSpace(\n            coordinationValues,\n            coordinationSetters,\n            initialCoordinationValues,\n          );\n          setItemIsReady('genomic-profiles');\n        });\n    } else {\n      setGenomicProfilesAttrs(null);\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, 'genomic-profiles', null, null), setWarning);\n      } else {\n        setItemIsReady('genomic-profiles');\n      }\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  return [genomicProfilesAttrs];\n}\n","export const TOOLTIP_ANCESTOR = 'tooltip-ancestor';\nconst CARD = `card card-body my-2 ${TOOLTIP_ANCESTOR}`;\nexport const PRIMARY_CARD = `${CARD} bg-primary`;\nexport const SECONDARY_CARD = `${CARD} bg-secondary`;\nexport const BLACK_CARD = `${CARD} bg-black`;\nexport const TITLE_CARD = 'title';\nexport const SCROLL_CARD = `${PRIMARY_CARD} scroll`;\nexport const VITESSCE_CONTAINER = 'vitessce-container';\n","import { RENDERING_MODES } from '@hms-dbmi/viv';\n\nexport const GLOBAL_LABELS = ['z', 't'];\n\nexport const DEFAULT_RASTER_DOMAIN_TYPE = 'Min/Max';\n\nexport const DEFAULT_RASTER_LAYER_PROPS = {\n  visible: true,\n  colormap: null,\n  opacity: 1,\n  domainType: DEFAULT_RASTER_DOMAIN_TYPE,\n  transparentColor: [0, 0, 0],\n  renderingMode: RENDERING_MODES.ADDITIVE,\n  use3d: false,\n};\n\nexport const DEFAULT_MOLECULES_LAYER = {\n  opacity: 1, radius: 20, visible: true,\n};\nexport const DEFAULT_CELLS_LAYER = {\n  opacity: 1, radius: 50, visible: true, stroked: false,\n};\nexport const DEFAULT_NEIGHBORHOODS_LAYER = {\n  visible: false,\n};\n\nexport const DEFAULT_LAYER_TYPE_ORDERING = [\n  'molecules',\n  'cells',\n  'neighborhoods',\n  'raster',\n];\n","module.exports = require(\"zustand\");","// List of the GLSL colormaps available,\n// to validate against before string replacing.\nexport const GLSL_COLORMAPS = [\n  'plasma',\n  'viridis',\n  'jet',\n];\nexport const GLSL_COLORMAP_DEFAULT = 'plasma';\nexport const COLORMAP_SHADER_PLACEHOLDER = 'COLORMAP_FUNC';\n","module.exports = require(\"lodash/debounce\");","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","module.exports = require(\"@deck.gl/layers\");","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","/**\n * A loader error ancestor class containing a default constructor\n * and a stub for the required warnInConsole() method.\n */\nexport default class AbstractLoaderError {\n  constructor(message) {\n    this.message = message;\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  warnInConsole() {\n    throw new Error('The warnInConsole() method has not been implemented.');\n  }\n}\n","import React from 'react';\nimport CircularProgress from '@material-ui/core/CircularProgress';\n\nexport default function LoadingIndicator() {\n  return (\n    <div className=\"loading-indicator-backdrop\">\n      <div className=\"loading-indicator-container\">\n        <CircularProgress />\n      </div>\n    </div>\n  );\n}\n","import React, { useState } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport CloudDownloadIcon from '@material-ui/icons/CloudDownload';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport IconButton from '@material-ui/core/IconButton';\nimport Link from '@material-ui/core/Link';\nimport ArrowDropDownIcon from '@material-ui/icons/ArrowDropDown';\nimport ArrowDropUpIcon from '@material-ui/icons/ArrowDropUp';\nimport SettingsIcon from '@material-ui/icons/Settings';\nimport CloseIcon from '@material-ui/icons/Close';\n\nimport { SCROLL_CARD, BLACK_CARD, SECONDARY_CARD } from './classNames';\nimport LoadingIndicator from './LoadingIndicator';\nimport { PopperMenu } from './shared-mui/components';\n\nconst useStyles = makeStyles(theme => ({\n  iconButton: {\n    border: 'none',\n    marginLeft: 0,\n    background: 'none',\n    color: theme.palette.primaryForeground,\n    paddingLeft: '0.25em',\n    paddingRight: '0.25em',\n    borderRadius: '2px',\n    '&:hover': {\n      backgroundColor: theme.palette.primaryBackgroundLight,\n    },\n    '&:first-child': {\n      marginLeft: '0.25em',\n    },\n    '&:last-child': {\n      marginRight: '0.25em',\n    },\n    '& svg': {\n      width: '0.7em',\n      height: '0.7em',\n      verticalAlign: 'middle',\n      overflow: 'visible',\n    },\n  },\n  downloadLink: {\n    color: theme.palette.primaryForeground,\n  },\n}));\n\nfunction SettingsIconWithArrow({ open }) {\n  return (\n    <>\n      <SettingsIcon />\n      {open ? <ArrowDropUpIcon /> : <ArrowDropDownIcon />}\n    </>\n  );\n}\n\nfunction PlotOptions(props) {\n  const { options } = props;\n  const [open, setOpen] = useState(false);\n  const classes = useStyles();\n  return (\n    <PopperMenu\n      open={open}\n      setOpen={setOpen}\n      buttonIcon={<SettingsIconWithArrow open={open} />}\n      buttonClassName={classes.iconButton}\n      placement=\"bottom-end\"\n    >\n      {options}\n    </PopperMenu>\n  );\n}\n\nfunction CloudDownloadIconWithArrow({ open }) {\n  return (\n    <>\n      <CloudDownloadIcon />\n      {open ? <ArrowDropUpIcon /> : <ArrowDropDownIcon />}\n    </>\n  );\n}\n\nfunction DownloadOptions(props) {\n  const { urls } = props;\n  const [open, setOpen] = useState(false);\n  const classes = useStyles();\n  return (\n    <PopperMenu\n      open={open}\n      setOpen={setOpen}\n      buttonIcon={<CloudDownloadIconWithArrow open={open} />}\n      buttonClassName={classes.iconButton}\n      placement=\"bottom-end\"\n    >\n      {urls.map(({ url, name }) => (\n        <MenuItem dense key={url}>\n          <Link underline=\"none\" href={url} target=\"_blank\" rel=\"noopener\" className={classes.downloadLink}>\n            Download {name}\n          </Link>\n        </MenuItem>\n      ))}\n    </PopperMenu>\n  );\n}\n\nfunction ClosePaneButton(props) {\n  const { removeGridComponent } = props;\n  const classes = useStyles();\n  return (\n    <IconButton\n      onClick={removeGridComponent}\n      size=\"small\"\n      className={classes.iconButton}\n      title=\"close\"\n    >\n      <CloseIcon />\n    </IconButton>\n  );\n}\n\nexport default function TitleInfo(props) {\n  const {\n    title, info, children, isScroll, isSpatial, removeGridComponent, urls,\n    isReady, options,\n  } = props;\n  // eslint-disable-next-line no-nested-ternary\n  const childClassName = isScroll ? SCROLL_CARD : (isSpatial ? BLACK_CARD : SECONDARY_CARD);\n  return (\n    // d-flex without wrapping div is not always full height; I don't understand the root cause.\n    <>\n      <div className=\"title\">\n        <div className=\"title-left\">\n          {title}\n        </div>\n        <div className=\"title-info\" title={info}>\n          {info}\n        </div>\n        <div className=\"title-buttons\">\n          { options && (\n            <PlotOptions\n              options={options}\n            />\n          ) }\n          {urls && urls.length > 0 && (\n            <DownloadOptions\n              urls={urls}\n            />\n          )}\n          <ClosePaneButton\n            removeGridComponent={removeGridComponent}\n          />\n        </div>\n      </div>\n      <div className={childClassName}>\n        { !isReady && <LoadingIndicator /> }\n        {children}\n      </div>\n    </>\n    // \"pl-2\" only matters when the window is very narrow.\n  );\n}\n","import arrayLikeToArray from \"./arrayLikeToArray\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(n);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","module.exports = require(\"@material-ui/core/IconButton\");","module.exports = require(\"@material-ui/core/colors\");","module.exports = require(\"@material-ui/core/Slider\");","module.exports = require(\"@material-ui/core/TableRow\");","module.exports = require(\"lodash/range\");","import React, { useRef } from 'react';\nimport Paper from '@material-ui/core/Paper';\nimport Popper from '@material-ui/core/Popper';\nimport IconButton from '@material-ui/core/IconButton';\nimport MenuList from '@material-ui/core/MenuList';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport Fade from '@material-ui/core/Fade';\nimport { useVitessceContainer } from '../hooks';\nimport { styles } from './styles';\n\nexport function MuiSpan(props) {\n  const { children } = props;\n  const classes = styles();\n  return <span className={classes.span}>{children}</span>;\n}\n\nexport function PopperMenu(props) {\n  const {\n    buttonIcon,\n    open,\n    setOpen,\n    children,\n    buttonClassName,\n  } = props;\n  const classes = styles();\n\n  const anchorRef = useRef();\n\n  const handleClick = () => {\n    setOpen(prev => !prev);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  const id = open ? 'v-popover-menu' : undefined;\n\n  const getTooltipContainer = useVitessceContainer(anchorRef);\n\n  return (\n    <div ref={anchorRef} className={classes.container}>\n      <IconButton\n        aria-describedby={id}\n        onClick={handleClick}\n        size=\"small\"\n        className={buttonClassName}\n      >\n        {buttonIcon}\n      </IconButton>\n      <Popper\n        id={id}\n        open={open}\n        anchorEl={anchorRef && anchorRef.current}\n        container={getTooltipContainer}\n        onClose={handleClose}\n        placement=\"bottom-end\"\n        transition\n      >\n        {({ TransitionProps }) => (\n          <ClickAwayListener onClickAway={handleClose}>\n            <Fade {...TransitionProps} timeout={100}>\n              <Paper elevation={4} className={classes.paper}>\n                <MenuList>{children}</MenuList>\n              </Paper>\n            </Fade>\n          </ClickAwayListener>\n        )}\n      </Popper>\n    </div>\n  );\n}\n","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","import { makeStyles } from '@material-ui/core/styles';\n\nexport const useStyles = makeStyles(theme => ({\n  box: {\n    boxSizing: 'border-box',\n  },\n  checkbox: {\n    padding: '3px',\n    color: theme.palette.primaryForeground,\n    '&:checked': {\n      color: theme.palette.primaryForeground,\n    },\n    '& input': {\n      height: '100%',\n    },\n  },\n  slider: {\n    color: theme.palette.primaryForeground,\n    minWidth: '60px',\n    padding: '10px 0 10px 0',\n  },\n  sliderValueLabel: {\n    '& span': {\n      '& span': {\n        color: theme.palette.primaryBackground,\n      },\n    },\n  },\n  tableContainer: {\n    overflow: 'hidden',\n    overflowX: 'hidden !important',\n  },\n  labelCell: {\n    padding: '2px 8px 2px 16px',\n  },\n  inputCell: {\n    padding: '2px 16px 2px 8px',\n    overflow: 'visible',\n  },\n  select: {\n    '& select': {\n      fontSize: '.875rem',\n    },\n  },\n  selectRoot: {\n    padding: 0,\n    height: 'auto',\n  },\n}));\n","module.exports = require(\"d3-array\");","module.exports = require(\"@material-ui/core/Paper\");","module.exports = require(\"lodash/clamp\");","module.exports = require(\"@material-ui/core/MenuItem\");","module.exports = require(\"zustand/context\");","module.exports = require(\"zustand/shallow\");","import { makeStyles, withStyles } from '@material-ui/core/styles';\nimport ExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary';\nimport ExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport Slider from '@material-ui/core/Slider';\nimport Grid from '@material-ui/core/Grid';\n\nexport const useSelectStyles = makeStyles(() => ({\n  selectRoot: {\n    padding: 0,\n    height: 'auto',\n    margin: '4px 0',\n  },\n}));\n\nexport const useOptionStyles = withStyles(theme => ({\n  paper: {\n    backgroundColor: theme.palette.background.paper,\n  },\n  span: {\n    width: '70px',\n    textAlign: 'center',\n    paddingLeft: '2px',\n    paddingRight: '2px',\n  },\n  colors: {\n    '&:hover': {\n      backgroundColor: 'transparent',\n    },\n    paddingLeft: '2px',\n    paddingRight: '2px',\n  },\n  popper: {\n    zIndex: 4,\n  },\n}));\n\nconst sharedControllerStyles = {\n  width: '100%',\n  flexDirection: 'column',\n};\n\nexport const useControllerSectionStyles = makeStyles(() => ({\n  root: {\n    ...sharedControllerStyles,\n    padding: '0px 8px',\n  },\n}));\n\nexport const StyledExpansionPanelDetails = withStyles(() => ({\n  root: {\n    ...sharedControllerStyles,\n    padding: '8px 8px 24px 8px',\n  },\n}))(ExpansionPanelDetails);\n\nexport const StyledExpansionPanelSummary = withStyles(theme => ({\n  root: {\n    padding: '0px 8px',\n  },\n  content: {\n    margin: '4px 0px',\n    minWidth: '0px',\n  },\n  expanded: {\n    marginBottom: theme.spacing(-3),\n    top: theme.spacing(-1),\n  },\n  expandIcon: {\n    '&$expanded': {\n      top: theme.spacing(-1.3),\n    },\n  },\n}))(ExpansionPanelSummary);\n\nexport const StyledInputLabel = withStyles(() => ({\n  root: {\n    fontSize: '14px',\n  },\n}))(InputLabel);\n\nexport const OverflowEllipsisGrid = withStyles(() => ({\n  item: {\n    width: '100%',\n    overflow: 'hidden',\n    whiteSpace: 'nowrap',\n    textOverflow: 'ellipsis',\n  },\n}))(Grid);\n\nexport const StyledSelectionSlider = withStyles(() => ({\n  root: {\n    marginTop: '7px',\n  },\n  markActive: {\n    backgroundColor: 'rgba(128, 128, 128, 0.7)',\n  },\n}))(Slider);\n","module.exports = require(\"mathjs\");","module.exports = require(\"@material-ui/core/Popper\");","import getPrototypeOf from \"./getPrototypeOf\";\nexport default function _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}","import superPropBase from \"./superPropBase\";\nexport default function _get(target, property, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    _get = Reflect.get;\n  } else {\n    _get = function _get(target, property, receiver) {\n      var base = superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}","import { makeStyles, createMuiTheme } from '@material-ui/core/styles';\nimport { grey } from '@material-ui/core/colors';\n\nexport const styles = makeStyles(() => ({\n  paper: {\n    maxHeight: 200,\n    overflow: 'auto',\n  },\n  container: {\n    position: 'relative',\n    left: 0,\n    top: 0,\n  },\n  span: {\n    width: '70px',\n    textAlign: 'center',\n    paddingLeft: '2px',\n    paddingRight: '2px',\n  },\n}));\n\nexport const muiTheme = {\n  dark: createMuiTheme({\n    palette: {\n      type: 'dark',\n      primary: grey,\n      secondary: grey,\n      primaryBackground: '#222222',\n      primaryBackgroundHighlight: '#000000',\n      primaryBackgroundInput: '#D3D3D3',\n      primaryBackgroundDim: '#333333',\n      primaryBackgroundLight: '#757575',\n      primaryForeground: '#D3D3D3',\n      primaryForegroundDim: '#000000',\n      primaryForegroundActive: '#9bb7d6',\n      secondaryBackground: '#000000',\n      secondaryBackgroundDim: '#444444',\n      secondaryForeground: '#D3D3D3',\n    },\n    props: {\n      MuiButtonBase: {\n        disableRipple: true,\n      },\n    },\n  }),\n  light: createMuiTheme({\n    palette: {\n      type: 'light',\n      primary: grey,\n      secondary: grey,\n      primaryBackground: '#F1F1F1',\n      primaryBackgroundHighlight: '#FFFFFF',\n      primaryBackgroundInput: '#FFFFFF',\n      primaryBackgroundDim: '#8A8A8A',\n      primaryBackgroundLight: '#e0e0e0',\n      primaryForeground: '#333333',\n      primaryForegroundDim: '#808080',\n      primaryForegroundActive: '#0074D9',\n      secondaryBackground: '#F1F1F1',\n      secondaryBackgroundDim: '#C0C0C0',\n      secondaryForeground: '#222222',\n    },\n    props: {\n      MuiButtonBase: {\n        disableRipple: true,\n      },\n    },\n  }),\n};\n","module.exports = require(\"math.gl\");","module.exports = require(\"@material-ui/icons/ArrowDropDown\");","module.exports = require(\"@material-ui/icons/ArrowDropUp\");","module.exports = require(\"@turf/helpers\");","import { getChannelStats } from '@hms-dbmi/viv';\nimport { Matrix4 } from 'math.gl';\n\nasync function getSingleSelectionStats2D({ loader, selection }) {\n  const data = Array.isArray(loader) ? loader[loader.length - 1] : loader;\n  const raster = await data.getRaster({ selection });\n  const selectionStats = getChannelStats(raster.data);\n  const { domain, contrastLimits: slider } = selectionStats;\n  return { domain, slider };\n}\n\nasync function getSingleSelectionStats3D({ loader, selection }) {\n  const lowResSource = loader[loader.length - 1];\n  const { shape, labels } = lowResSource;\n  // eslint-disable-next-line no-bitwise\n  const sizeZ = shape[labels.indexOf('z')] >> (loader.length - 1);\n  const raster0 = await lowResSource.getRaster({\n    selection: { ...selection, z: 0 },\n  });\n  const rasterMid = await lowResSource.getRaster({\n    selection: { ...selection, z: Math.floor(sizeZ / 2) },\n  });\n  const rasterTop = await lowResSource.getRaster({\n    selection: { ...selection, z: Math.max(0, sizeZ - 1) },\n  });\n  const stats0 = getChannelStats(raster0.data);\n  const statsMid = getChannelStats(rasterMid.data);\n  const statsTop = getChannelStats(rasterTop.data);\n  return {\n    domain: [\n      Math.min(stats0.domain[0], statsMid.domain[0], statsTop.domain[0]),\n      Math.max(stats0.domain[1], statsMid.domain[1], statsTop.domain[1]),\n    ],\n    slider: [\n      Math.min(\n        stats0.contrastLimits[0],\n        statsMid.contrastLimits[0],\n        statsTop.contrastLimits[0],\n      ),\n      Math.max(\n        stats0.contrastLimits[1],\n        statsMid.contrastLimits[1],\n        statsTop.contrastLimits[1],\n      ),\n    ],\n  };\n}\n\n/**\n * Get bounding cube for a given loader i.e [[0, width], [0, height], [0, depth]]\n * @param {Object} loader PixelSource|PixelSource[]\n * @param {[]} selection Selection for stats.\n * @param {boolean} use3d Whether or not to get 3d stats.\n * @returns {Object} { domains, sliders }\n */\nexport const getSingleSelectionStats = async ({ loader, selection, use3d }) => {\n  const getStats = use3d\n    ? getSingleSelectionStats3D\n    : getSingleSelectionStats2D;\n  return getStats({ loader, selection });\n};\n\nexport const getMultiSelectionStats = async ({ loader, selections, use3d }) => {\n  const stats = await Promise.all(\n    selections.map(selection => getSingleSelectionStats({ loader, selection, use3d })),\n  );\n  const domains = stats.map(stat => stat.domain);\n  const sliders = stats.map(stat => stat.slider);\n  return { domains, sliders };\n};\n\n/**\n * Get physical size scaling Matrix4\n * @param {Object} loader PixelSource\n * @returns {Object} matrix\n */\nexport function getPhysicalSizeScalingMatrix(loader) {\n  const { x, y, z } = loader?.meta?.physicalSizes ?? {};\n  if (x?.size && y?.size && z?.size) {\n    const min = Math.min(z.size, x.size, y.size);\n    const ratio = [x.size / min, y.size / min, z.size / min];\n    return new Matrix4().scale(ratio);\n  }\n  return new Matrix4().identity();\n}\n\n/**\n * Get bounding cube for a given loader\n * @param {Object} loader PixelSource|PixelSource[]\n * @returns {Array} [0, width], [0, height], [0, depth]]\n */\nexport function getBoundingCube(loader) {\n  const source = Array.isArray(loader) ? loader[0] : loader;\n  const { shape, labels } = source;\n  const physicalSizeScalingMatrix = getPhysicalSizeScalingMatrix(source);\n  const xSlice = [0, physicalSizeScalingMatrix[0] * shape[labels.indexOf('x')]];\n  const ySlice = [0, physicalSizeScalingMatrix[5] * shape[labels.indexOf('y')]];\n  const zSlice = [\n    0,\n    physicalSizeScalingMatrix[10] * shape[labels.indexOf('z')],\n  ];\n  return [xSlice, ySlice, zSlice];\n}\n\nexport function abbreviateNumber(value) {\n  // Return an abbreviated representation of value, in 5 characters or less.\n\n  const maxLength = 5;\n  let maxNaiveDigits = maxLength;\n\n  /* eslint-disable no-plusplus */\n  if (!Number.isInteger(value)) {\n    --maxNaiveDigits;\n  } // Wasted on \".\"\n  if (value < 1) {\n    --maxNaiveDigits;\n  } // Wasted on \"0.\"\n  /* eslint-disable no-plusplus */\n\n  const naive = Intl.NumberFormat('en-US', {\n    maximumSignificantDigits: maxNaiveDigits,\n    useGrouping: false,\n  }).format(value);\n  if (naive.length <= maxLength) return naive;\n\n  // \"e+9\" consumes 3 characters, so if we even had two significant digits,\n  // it would take take us to six characters, including the decimal point.\n  return value.toExponential(0);\n}\n","module.exports = require(\"uuid/v4\");","module.exports = require(\"deck.gl\");","module.exports = require(\"nebula.gl\");","module.exports = require(\"@material-ui/core/Select\");","module.exports = require(\"@luma.gl/core\");","module.exports = require(\"@material-ui/core/Checkbox\");","import React from 'react';\nimport Select from '@material-ui/core/Select';\nimport { useStyles } from './styles';\n\nexport default function OptionSelect(props) {\n  const { classes: classesProp = {} } = props;\n  const classes = useStyles();\n  return (\n    <Select\n      native\n      disableUnderline\n      {...props}\n      classes={{\n        root: classes.selectRoot,\n        ...classesProp,\n      }}\n    />\n  );\n}\n","import Ajv from 'ajv';\nimport isNil from 'lodash/isNil';\nimport { dsvFormat } from 'd3-dsv';\nimport { parse as json2csv } from 'json2csv';\nimport { colorArrayToString, colorStringToArray } from './utils';\nimport { nodeTransform } from './cell-set-utils';\nimport { getDefaultColor } from '../utils';\nimport {\n  HIERARCHICAL_SCHEMAS, TABULAR_SCHEMAS,\n  MIME_TYPE_JSON, MIME_TYPE_TABULAR,\n  SEPARATOR_TABULAR, NA_VALUE_TABULAR,\n} from './constants';\n\n/**\n * Check if an imported tree has an old schema version that we know how to\n * \"upgrade\" to the latest schema version.  Validate against the schema.\n * @param {object} currTree A hierarchical tree object with a .version property,\n * which has already passed schema validation, but may not have the latest schema version.\n * @param {string} datatype The data type of the items in the schema.\n */\nexport function tryUpgradeTreeToLatestSchema(currTree, datatype) {\n  const validate = new Ajv().compile(HIERARCHICAL_SCHEMAS[datatype].schema);\n  const valid = validate(currTree);\n  if (!valid) {\n    const failureReason = JSON.stringify(validate.errors, null, 2);\n    throw new Error(`Tree validation failed: ${failureReason}`);\n  } else if (currTree.datatype !== datatype) {\n    throw new Error(\n      `The data type does not match the expected data type of '${datatype}'.`,\n    );\n  }\n  if (currTree.version === '0.1.2') {\n    // To upgrade from cell-sets schema 0.1.2 to 0.1.3,\n    // add a confidence value of null for each cell ID.\n    return {\n      ...currTree,\n      version: HIERARCHICAL_SCHEMAS[datatype].latestVersion,\n      tree: currTree.tree.map(levelZeroNode => nodeTransform(\n        levelZeroNode,\n        n => !n.children && Array.isArray(n.set),\n        n => ({ ...n, set: n.set.map(itemId => ([itemId, null])) }), [],\n      )),\n    };\n  }\n  return currTree;\n}\n\n/**\n * Handler for JSON imports. Validates and upgrades against the hierarchical sets schema.\n * @param {string} result The data passed from the FileReader as a string.\n * @param {string} datatype The data type to validate against.\n * @param {string} theme \"light\" or \"dark\" for the vitessce theme\n * @returns {object} The imported tree object.\n * @throws {Error} Throws error if validation fails or if the datatype does not match.\n */\n// eslint-disable-next-line no-unused-vars\nexport function handleImportJSON(result, datatype, theme) {\n  let importData = JSON.parse(result);\n  // Validate the imported file.\n  importData = tryUpgradeTreeToLatestSchema(importData, datatype);\n  return importData;\n}\n\n/**\n * Handler for tabular imports. Validates against the tabular sets schema.\n * @param {string} result The data passed from the FileReader as a string.\n * @param {string} datatype The data type to validate against.\n * @param {string} theme \"light\" or \"dark\" for the vitessce theme\n * @returns {object} The imported tree object.\n * @throws {Error} Throws error if validation fails or if the datatype does not match.\n */\nexport function handleImportTabular(result, datatype, theme) {\n  const dsvParser = dsvFormat(SEPARATOR_TABULAR);\n  const importData = dsvParser.parse(result, row => ({\n    groupName: row.groupName,\n    setName: row.setName,\n    setColor: (row.setColor ? colorStringToArray(row.setColor) : getDefaultColor(theme)),\n    obsId: row.obsId,\n    predictionScore: (\n      (\n        isNil(row.predictionScore)\n        || row.predictionScore === NA_VALUE_TABULAR\n      )\n        ? null\n        : +row.predictionScore\n    ),\n  }));\n  // Validate the imported file.\n  const validate = new Ajv().compile(TABULAR_SCHEMAS[datatype].schema);\n  const valid = validate(importData);\n  if (!valid) {\n    const failureReason = JSON.stringify(validate.errors, null, 2);\n    throw new Error(`Import validation failed: ${failureReason}`);\n  } else {\n    // Convert the validated array to a tree representation.\n    const treeToImport = {\n      version: HIERARCHICAL_SCHEMAS[datatype].latestVersion,\n      datatype,\n      tree: [],\n    };\n    const uniqueGroupNames = Array.from(new Set(importData.map(d => d.groupName)));\n    uniqueGroupNames.forEach((groupName) => {\n      const levelZeroNode = {\n        name: groupName,\n        children: [],\n      };\n      const groupRows = importData.filter(d => d.groupName === groupName);\n      const uniqueSetNames = Array.from(new Set(groupRows.map(d => d.setName)));\n      uniqueSetNames.forEach((setName) => {\n        const setRows = groupRows.filter(d => d.setName === setName);\n        const { setColor } = setRows[0];\n        const levelOneNode = {\n          name: setName,\n          color: setColor,\n          set: setRows.map(d => ([d.obsId, d.predictionScore])),\n        };\n        levelZeroNode.children.push(levelOneNode);\n      });\n      treeToImport.tree.push(levelZeroNode);\n    });\n    return treeToImport;\n  }\n}\n\n/**\n * Convert a tree object to a JSON representation.\n * @param {object} result The object to export.\n * @returns {string} The data in a string representation.\n */\nexport function handleExportJSON(result) {\n  const jsonString = JSON.stringify(result);\n  const dataString = `data:${MIME_TYPE_JSON};charset=utf-8,${encodeURIComponent(jsonString)}`;\n  return dataString;\n}\n\n/**\n * Convert a tree object with one level (height === 1) to a tabular representation.\n * @param {object} result The object to export.\n * @returns {string} The data in a string representation.\n */\nexport function handleExportTabular(result) {\n  // Convert a tree object to an array of JSON objects.\n  const exportData = [];\n  result.tree.forEach((levelZeroNode) => {\n    levelZeroNode.children.forEach((levelOneNode) => {\n      if (levelOneNode.set) {\n        levelOneNode.set.forEach(([obsId, prob]) => {\n          exportData.push({\n            groupName: levelZeroNode.name,\n            setName: levelOneNode.name,\n            setColor: colorArrayToString(levelOneNode.color),\n            obsId,\n            predictionScore: isNil(prob) ? NA_VALUE_TABULAR : prob,\n          });\n        });\n      }\n    });\n  });\n  const csvString = json2csv(exportData, {\n    fields: ['groupName', 'setName', 'setColor', 'obsId', 'predictionScore'],\n    delimiter: SEPARATOR_TABULAR,\n  });\n  const dataString = `data:${MIME_TYPE_TABULAR};charset=utf-8,${encodeURIComponent(csvString)}`;\n  return dataString;\n}\n\n/**\n * Download a file. Appends and removes an anchor node in the DOM.\n * @param {string} dataString The function that converts the data to a string.\n * @param {string} fileName The name of the file to be downloaded.\n */\nexport function downloadForUser(dataString, fileName) {\n  const downloadAnchorNode = document.createElement('a');\n  downloadAnchorNode.setAttribute('href', dataString);\n  downloadAnchorNode.setAttribute('download', fileName);\n  document.body.appendChild(downloadAnchorNode); // required for firefox\n  downloadAnchorNode.click();\n  downloadAnchorNode.remove();\n}\n","import glsl from 'glslify';\n\nexport const vs = glsl`\n#define SHADER_NAME bitmask-layer-vertex-shader\n\nattribute vec2 texCoords;\nattribute vec3 positions;\nattribute vec3 positions64Low;\nattribute vec3 instancePickingColors;\n\nvarying vec2 vTexCoord;\n\nvoid main(void) {\n  geometry.worldPosition = positions;\n  geometry.uv = texCoords;\n  geometry.pickingColor = instancePickingColors;\n  gl_Position = project_position_to_clipspace(positions, positions64Low, vec3(0.0), geometry.position);\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  vTexCoord = texCoords;\n  vec4 color = vec4(0.0);\n  DECKGL_FILTER_COLOR(color, geometry);\n}\n`;\n\nexport const fs = glsl`\n#define SHADER_NAME bitmask-layer-fragment-shader\nprecision highp float;\n\n#pragma glslify: plasma = require(\"glsl-colormap/plasma\")\n#pragma glslify: viridis = require(\"glsl-colormap/viridis\")\n#pragma glslify: greys = require(\"glsl-colormap/greys\")\n#pragma glslify: magma = require(\"glsl-colormap/magma\")\n#pragma glslify: jet = require(\"glsl-colormap/jet\")\n#pragma glslify: bone = require(\"glsl-colormap/bone\")\n#pragma glslify: copper = require(\"glsl-colormap/copper\")\n#pragma glslify: density = require(\"glsl-colormap/density\")\n#pragma glslify: inferno = require(\"glsl-colormap/inferno\")\n#pragma glslify: cool = require(\"glsl-colormap/cool\")\n#pragma glslify: hot = require(\"glsl-colormap/hot\")\n#pragma glslify: spring = require(\"glsl-colormap/spring\")\n#pragma glslify: summer = require(\"glsl-colormap/summer\")\n#pragma glslify: autumn = require(\"glsl-colormap/autumn\")\n#pragma glslify: winter = require(\"glsl-colormap/winter\")\n\n// Data (mask) texture\nuniform sampler2D channel0;\nuniform sampler2D channel1;\nuniform sampler2D channel2;\nuniform sampler2D channel3;\nuniform sampler2D channel4;\nuniform sampler2D channel5;\n\n// Color texture\nuniform sampler2D colorTex;\nuniform float colorTexHeight;\nuniform float colorTexWidth;\nuniform float hovered;\n// range\nuniform bool channelsVisible[6];\n\n// Expression mapping\nuniform vec2 uColorScaleRange;\nuniform bool uIsExpressionMode;\nuniform sampler2D expressionTex;\n\n// opacity\nuniform float opacity;\n\nvarying vec2 vTexCoord;\n\nvec4 sampleAndGetColor(sampler2D dataTex, vec2 coord, bool isOn){\n  float sampledData = texture(dataTex, coord).r;\n  vec4 hoveredColor = float(sampledData == hovered && sampledData > 0. && hovered > 0.) * vec4(0., 0., 1., 1.);\n  // Colors are laid out corresponding to ids in row-major order in the texture.  So if width of the texture is 10, and you want ID 25,\n  // you need coordinate (1, 4) (i.e 2 rows down, and 5 columns over indexed from 0 for a total of 25 units covered in row major order).\n  vec2 colorTexCoord = vec2(mod(sampledData, colorTexWidth) / colorTexWidth, floor(sampledData / colorTexWidth) / (colorTexHeight - 1.));\n  float expressionValue = texture(expressionTex, colorTexCoord).r / 255.;\n  float scaledExpressionValue = (expressionValue - uColorScaleRange[0]) / max(0.005, (uColorScaleRange[1] - uColorScaleRange[0]));\n  vec4 sampledColor = float(uIsExpressionMode) * COLORMAP_FUNC(clamp(scaledExpressionValue, 0.0, 1.0)) +  (1. - float(uIsExpressionMode)) * vec4(texture(colorTex, colorTexCoord).rgb, 1.);\n  // Only return a color if the data is non-zero.\n  return max(0., min(sampledData, 1.)) * float(isOn) * (sampledColor + hoveredColor);\n}\n\nvoid main() {\n\n  gl_FragColor = sampleAndGetColor(channel0, vTexCoord, channelsVisible[0]);\n\n  // If the sampled color and the currently stored color (gl_FragColor) are identical, don't blend and use the sampled color,\n  // otherwise just use the currently stored color.  Repeat this for all channels.\n  vec4 sampledColor = sampleAndGetColor(channel1, vTexCoord, channelsVisible[1]);\n  gl_FragColor = (sampledColor == gl_FragColor || sampledColor == vec4(0.)) ? gl_FragColor : sampledColor;\n  sampledColor = sampleAndGetColor(channel2, vTexCoord, channelsVisible[2]);\n  gl_FragColor = (sampledColor == gl_FragColor || sampledColor == vec4(0.)) ? gl_FragColor : sampledColor;\n  sampledColor = sampleAndGetColor(channel3, vTexCoord, channelsVisible[3]);\n  gl_FragColor = (sampledColor == gl_FragColor || sampledColor == vec4(0.)) ? gl_FragColor : sampledColor;\n  sampledColor = sampleAndGetColor(channel4, vTexCoord, channelsVisible[4]);\n  gl_FragColor = (sampledColor == gl_FragColor || sampledColor == vec4(0.)) ? gl_FragColor : sampledColor;\n  sampledColor = sampleAndGetColor(channel5, vTexCoord, channelsVisible[5]);\n  gl_FragColor = (sampledColor == gl_FragColor || sampledColor == vec4(0.)) ? gl_FragColor : sampledColor;\n  // Apply the opacity if there is pixel data, and if the pixel data is empty i.e no segmentation, use 0 opacity.\n  gl_FragColor = vec4(gl_FragColor.rgb, (gl_FragColor.rgb == vec3(0., 0., 0.)) ? 0.0 : opacity);\n\n  geometry.uv = vTexCoord;\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n`;\n","import GL from '@luma.gl/constants'; // eslint-disable-line import/no-extraneous-dependencies\nimport { project32, picking } from '@deck.gl/core'; // eslint-disable-line import/no-extraneous-dependencies\nimport { Texture2D, isWebGL2 } from '@luma.gl/core';\nimport { XRLayer } from '@hms-dbmi/viv';\nimport { fs, vs } from './bitmask-layer-shaders';\nimport {\n  GLSL_COLORMAPS,\n  GLSL_COLORMAP_DEFAULT,\n  COLORMAP_SHADER_PLACEHOLDER,\n} from './constants';\n\nfunction padWithDefault(arr, defaultValue, padWidth) {\n  const newArr = [...arr];\n  for (let i = 0; i < padWidth; i += 1) {\n    newArr.push(defaultValue);\n  }\n  return newArr;\n}\n\nconst defaultProps = {\n  hoveredCell: { type: 'number', value: null, compare: true },\n  cellColorData: { type: 'object', value: null, compare: true },\n  colormap: { type: 'string', value: GLSL_COLORMAP_DEFAULT, compare: true },\n  expressionData: { type: 'object', value: null, compare: true },\n};\n\n/**\n * A BitmapLayer that performs aggregation in the fragment shader,\n * and renders its texture from a Uint8Array rather than an ImageData.\n */\nexport default class BitmaskLayer extends XRLayer {\n  // eslint-disable-next-line class-methods-use-this\n  getShaders() {\n    const { colormap } = this.props;\n    return {\n      fs,\n      vs,\n      modules: [project32, picking],\n      defines: {\n        [COLORMAP_SHADER_PLACEHOLDER]: GLSL_COLORMAPS.includes(colormap)\n          ? colormap\n          : GLSL_COLORMAP_DEFAULT,\n      },\n    };\n  }\n\n  updateState({ props, oldProps, changeFlags }) {\n    super.updateState({ props, oldProps, changeFlags });\n    if (props.cellColorData !== oldProps.cellColorData) {\n      this.setColorTexture();\n    }\n    if (props.expressionData !== oldProps.expressionData) {\n      const { expressionData, cellTexHeight, cellTexWidth } = this.props;\n      const expressionTex = this.dataToTexture(\n        expressionData,\n        cellTexWidth,\n        cellTexHeight,\n      );\n      this.setState({ expressionTex });\n    }\n    if (props.colormap !== oldProps.colormap) {\n      const { gl } = this.context;\n      if (this.state.model) {\n        this.state.model.delete();\n      }\n      // eslint-disable-next-line no-underscore-dangle\n      this.setState({ model: this._getModel(gl) });\n\n      this.getAttributeManager().invalidateAll();\n    }\n  }\n\n  setColorTexture() {\n    const {\n      cellColorData: data,\n      cellTexHeight: height,\n      cellTexWidth: width,\n    } = this.props;\n    const colorTex = new Texture2D(this.context.gl, {\n      width,\n      height,\n      // Only use Float32 so we don't have to write two shaders\n      data,\n      // we don't want or need mimaps\n      mipmaps: false,\n      parameters: {\n        // NEAREST for integer data\n        [GL.TEXTURE_MIN_FILTER]: GL.NEAREST,\n        [GL.TEXTURE_MAG_FILTER]: GL.NEAREST,\n        // CLAMP_TO_EDGE to remove tile artifacts\n        [GL.TEXTURE_WRAP_S]: GL.CLAMP_TO_EDGE,\n        [GL.TEXTURE_WRAP_T]: GL.CLAMP_TO_EDGE,\n      },\n      format: GL.RGB,\n      dataFormat: GL.RGB,\n      type: GL.UNSIGNED_BYTE,\n    });\n    this.setState({ colorTex });\n  }\n\n  draw(opts) {\n    const { uniforms } = opts;\n    const {\n      channelsVisible,\n      hoveredCell,\n      colorScaleLo,\n      colorScaleHi,\n      isExpressionMode,\n    } = this.props;\n    const {\n      textures, model, colorTex, expressionTex,\n    } = this.state;\n    // Render the image\n    if (textures && model && colorTex) {\n      model\n        .setUniforms(\n          Object.assign({}, uniforms, {\n            hovered: hoveredCell || 0,\n            colorTex,\n            expressionTex,\n            colorTexHeight: colorTex.height,\n            colorTexWidth: colorTex.width,\n            channelsVisible: padWithDefault(\n              channelsVisible,\n              false,\n              // There are six texture entries on the shaders\n              6 - channelsVisible.length,\n            ),\n            uColorScaleRange: [colorScaleLo, colorScaleHi],\n            uIsExpressionMode: isExpressionMode,\n            ...textures,\n          }),\n        )\n        .draw();\n    }\n  }\n\n  /**\n   * This function creates textures from the data\n   */\n  dataToTexture(data, width, height) {\n    const isWebGL2On = isWebGL2(this.context.gl);\n    return new Texture2D(this.context.gl, {\n      width,\n      height,\n      // Only use Float32 so we don't have to write two shaders\n      data: new Float32Array(data),\n      // we don't want or need mimaps\n      mipmaps: false,\n      parameters: {\n        // NEAREST for integer data\n        [GL.TEXTURE_MIN_FILTER]: GL.NEAREST,\n        [GL.TEXTURE_MAG_FILTER]: GL.NEAREST,\n        // CLAMP_TO_EDGE to remove tile artifacts\n        [GL.TEXTURE_WRAP_S]: GL.CLAMP_TO_EDGE,\n        [GL.TEXTURE_WRAP_T]: GL.CLAMP_TO_EDGE,\n      },\n      format: isWebGL2On ? GL.R32F : GL.LUMINANCE,\n      dataFormat: isWebGL2On ? GL.RED : GL.LUMINANCE,\n      type: GL.FLOAT,\n    });\n  }\n}\nBitmaskLayer.layerName = 'BitmaskLayer';\nBitmaskLayer.defaultProps = defaultProps;\n","/* eslint-disable no-plusplus */\nimport shortNumber from 'short-number';\nimport isEqual from 'lodash/isEqual';\nimport {\n  getDefaultInitialViewState,\n  MultiscaleImageLayer,\n  ImageLayer,\n  VolumeLayer,\n} from '@hms-dbmi/viv';\nimport { extent } from 'd3-array';\nimport { Matrix4 } from 'math.gl';\nimport { divide, compare, unit } from 'mathjs';\nimport { pluralize, getSourceFromLoader, isRgb } from '../../utils';\nimport { VIEWER_PALETTE } from '../utils';\nimport {\n  GLOBAL_LABELS,\n  DEFAULT_RASTER_LAYER_PROPS,\n  DEFAULT_LAYER_TYPE_ORDERING,\n} from './constants';\nimport BitmaskLayer from '../../layers/BitmaskLayer';\nimport { getMultiSelectionStats } from '../layer-controller/utils';\n\nexport function square(x, y, r) {\n  return [[x, y + r], [x + r, y], [x, y - r], [x - r, y]];\n}\n\n/**\n * Sort spatial layer definition array,\n * to keep the ordering in the layer controller\n * consistent.\n * Intended to be used with auto-initialized layer\n * definition arrays only, as a pre-defined layer array\n * should not be re-ordered.\n * @param {object[]} layers Array of layer definition objects.\n * Object must have a .type property.\n */\nexport function sortLayers(layers) {\n  return layers.sort((a, b) => (\n    DEFAULT_LAYER_TYPE_ORDERING.indexOf(a.type) - DEFAULT_LAYER_TYPE_ORDERING.indexOf(b.type)\n  ));\n}\n\n/**\n * Return the midpoint of the global dimensions.\n * @param {object} source PixelSource object from Viv\n * @returns {object} The selection.\n */\nfunction getDefaultGlobalSelection(source) {\n  const globalIndices = source.labels\n    .filter(dim => GLOBAL_LABELS.includes(dim));\n  const selection = {};\n  globalIndices.forEach((dim) => {\n    selection[dim] = Math.floor(\n      (source.shape[source.labels.indexOf(dim)] || 0) / 2,\n    );\n  });\n  return selection;\n}\n\n/**\n * Create a default selection using the midpoint of the available global dimensions,\n * and then the first four available selections from the first selectable channel.\n * @param {object} source PixelSource object from Viv\n * @returns {object} The selection.\n */\nfunction buildDefaultSelection(source) {\n  const selection = [];\n  const globalSelection = getDefaultGlobalSelection(source);\n  // First non-global dimension with some sort of selectable values\n  const firstNonGlobalDimension = source.labels.filter(\n    dim => !GLOBAL_LABELS.includes(dim)\n      && source.shape[source.labels.indexOf(dim)],\n  )[0];\n  for (let i = 0; i < Math.min(4, source.shape[\n    source.labels.indexOf(firstNonGlobalDimension)\n  ]); i += 1) {\n    selection.push(\n      {\n        [firstNonGlobalDimension]: i,\n        ...globalSelection,\n      },\n    );\n  }\n  return selection;\n}\n\n/**\n * @param {Array.<number>} shape loader shape\n */\nexport function isInterleaved(shape) {\n  const lastDimSize = shape[shape.length - 1];\n  return lastDimSize === 3 || lastDimSize === 4;\n}\n\n/**\n * Initialize the channel selections for an individual layer.\n * @param {object} loader A viv loader instance with channel names appended by Vitessce loaders\n * of the form { data: (PixelSource[]|PixelSource), metadata: Object, channels }\n * @returns {object[]} An array of selected channels with default\n * domain/slider settings.\n */\nexport async function initializeLayerChannels(loader, use3d) {\n  const result = [];\n  const source = getSourceFromLoader(loader);\n  // Add channel automatically as the first avaialable value for each dimension.\n  let defaultSelection = buildDefaultSelection(source);\n  defaultSelection = isInterleaved(source.shape)\n    ? [{ ...defaultSelection[0], c: 0 }] : defaultSelection;\n  const stats = await getMultiSelectionStats({\n    loader: loader.data, selections: defaultSelection, use3d,\n  });\n\n  const domains = isRgb(loader)\n    ? [[0, 255], [0, 255], [0, 255]]\n    : stats.domains;\n  const colors = isRgb(loader)\n    ? [[255, 0, 0], [0, 255, 0], [0, 0, 255]]\n    : null;\n  const sliders = isRgb(loader)\n    ? [[0, 255], [0, 255], [0, 255]]\n    : stats.sliders;\n\n  defaultSelection.forEach((selection, i) => {\n    const domain = domains[i];\n    const slider = sliders[i];\n    const channel = {\n      selection,\n      // eslint-disable-next-line no-nested-ternary\n      color: colors ? colors[i]\n        : defaultSelection.length !== 1\n          ? VIEWER_PALETTE[i] : [255, 255, 255],\n      visible: true,\n      slider: slider || domain,\n    };\n    result.push(channel);\n  });\n  return result;\n}\n\nfunction getMetaWithTransformMatrices(imageMeta, imageLoaders) {\n  // Do not fill in transformation matrices if any of the layers specify one.\n  const sources = imageLoaders.map(loader => getSourceFromLoader(loader));\n  if (\n    imageMeta.map(meta => meta?.metadata?.transform?.matrix\n      || meta?.metadata?.transform?.scale\n      || meta?.metadata?.transform?.translate).some(Boolean)\n    || sources.every(\n      source => !source.meta?.physicalSizes?.x || !source.meta?.physicalSizes?.y,\n    )\n  ) {\n    return imageMeta;\n  }\n  // Get the minimum physical among all the current images.\n  const minPhysicalSize = sources.reduce((acc, source) => {\n    const hasZPhyscialSize = source.meta?.physicalSizes?.z?.size;\n    const sizes = [\n      unit(`${source.meta?.physicalSizes.x.size} ${source.meta?.physicalSizes.x.unit}`.replace('µ', 'u')),\n      unit(`${source.meta?.physicalSizes.y.size} ${source.meta?.physicalSizes.y.unit}`.replace('µ', 'u')),\n    ];\n    if (hasZPhyscialSize) {\n      sizes.push(unit(`${source.meta?.physicalSizes.z.size} ${source.meta?.physicalSizes.z.unit}`.replace('µ', 'u')));\n    }\n    acc[0] = (acc[0] === undefined || compare(sizes[0], acc[0]) === -1) ? sizes[0] : acc[0];\n    acc[1] = (acc[1] === undefined || compare(sizes[1], acc[1]) === -1) ? sizes[1] : acc[1];\n    acc[2] = (acc[2] === undefined || compare(sizes[2], acc[2]) === -1) ? sizes[2] : acc[2];\n    return acc;\n  }, []);\n  const imageMetaWithTransform = imageMeta.map((meta, j) => {\n    const source = sources[j];\n    const hasZPhyscialSize = source.meta?.physicalSizes?.z?.size;\n    const sizes = [\n      unit(`${source.meta?.physicalSizes.x.size} ${source.meta?.physicalSizes.x.unit}`.replace('µ', 'u')),\n      unit(`${source.meta?.physicalSizes.y.size} ${source.meta?.physicalSizes.y.unit}`.replace('µ', 'u')),\n    ];\n    if (hasZPhyscialSize) {\n      sizes.push(unit(`${source.meta?.physicalSizes.z.size} ${source.meta?.physicalSizes.z.unit}`.replace('µ', 'u')));\n    }\n    // Find the ratio of the sizes to get the scaling factor.\n    const scale = sizes.map((i, k) => divide(i, minPhysicalSize[k]));\n    // Add in z dimension needed for Matrix4 scale API.\n    if (!scale[2]) {\n      scale[2] = 1;\n    }\n    // no need to store/use identity scaling\n    if (isEqual(scale, [1, 1, 1])) {\n      return meta;\n    }\n    // Make sure to scale the z direction by one.\n    const matrix = new Matrix4().scale([...scale]);\n    const newMeta = { ...meta };\n    newMeta.metadata = {\n      ...newMeta.metadata,\n      // We don't want to store matrix objects in the view config.\n      transform: { matrix: matrix.toArray() },\n    };\n    return newMeta;\n  });\n  return imageMetaWithTransform;\n}\n\n/**\n * Given a set of image layer loader creator functions,\n * create loader objects for an initial layer or set of layers,\n * which will be selected based on default values predefined in\n * the image data file or otherwise by a heuristic\n * (the midpoint of the layers array).\n * @param {object[]} rasterLayers A list of layer metadata objects with\n * shape { name, type, url, createLoader }.\n * @param {(string[]|null)} rasterRenderLayers A list of default raster layers. Optional.\n */\nexport async function initializeRasterLayersAndChannels(\n  rasterLayers,\n  rasterRenderLayers,\n  usePhysicalSizeScaling,\n) {\n  const nextImageLoaders = [];\n  let nextImageMetaAndLayers = [];\n  const autoImageLayerDefPromises = [];\n\n  // Start all loader creators immediately.\n  // Reference: https://eslint.org/docs/rules/no-await-in-loop\n  const loaders = await Promise.all(rasterLayers.map(layer => layer.loaderCreator()));\n\n  for (let i = 0; i < rasterLayers.length; i++) {\n    const layer = rasterLayers[i];\n    const loader = loaders[i];\n    nextImageLoaders[i] = loader;\n    nextImageMetaAndLayers[i] = layer;\n  }\n  if (usePhysicalSizeScaling) {\n    nextImageMetaAndLayers = getMetaWithTransformMatrices(nextImageMetaAndLayers, nextImageLoaders);\n  }\n  // No layers were pre-defined so set up the default image layers.\n  if (!rasterRenderLayers) {\n    // Midpoint of images list as default image to show.\n    const layerIndex = Math.floor(rasterLayers.length / 2);\n    const loader = nextImageLoaders[layerIndex];\n    const autoImageLayerDefPromise = initializeLayerChannels(loader)\n      .then(channels => Promise.resolve({\n        type: nextImageMetaAndLayers[layerIndex]?.metadata?.isBitmask ? 'bitmask' : 'raster',\n        index: layerIndex,\n        ...DEFAULT_RASTER_LAYER_PROPS,\n        channels: channels.map((channel, j) => ({\n          ...channel,\n          ...(nextImageMetaAndLayers[layerIndex].channels\n            ? nextImageMetaAndLayers[layerIndex].channels[j] : []),\n        })),\n        modelMatrix: nextImageMetaAndLayers[layerIndex]?.metadata?.transform?.matrix,\n        transparentColor: layerIndex > 0 ? [0, 0, 0] : null,\n      }));\n    autoImageLayerDefPromises.push(autoImageLayerDefPromise);\n  } else {\n    // The renderLayers parameter is a list of layer names to show by default.\n    const globalIndicesOfRenderLayers = rasterRenderLayers\n      .map(imageName => rasterLayers.findIndex(image => image.name === imageName));\n    for (let i = 0; i < globalIndicesOfRenderLayers.length; i++) {\n      const layerIndex = globalIndicesOfRenderLayers[i];\n      const loader = nextImageLoaders[layerIndex];\n      const autoImageLayerDefPromise = initializeLayerChannels(loader)\n        // eslint-disable-next-line no-loop-func\n        .then(channels => Promise.resolve({\n          type: nextImageMetaAndLayers[layerIndex]?.metadata?.isBitmask ? 'bitmask' : 'raster',\n          index: layerIndex,\n          ...DEFAULT_RASTER_LAYER_PROPS,\n          channels: channels.map((channel, j) => ({\n            ...channel,\n            ...(nextImageMetaAndLayers[layerIndex].channels\n              ? nextImageMetaAndLayers[layerIndex].channels[j] : []),\n          })),\n          domainType: 'Min/Max',\n          modelMatrix: nextImageMetaAndLayers[layerIndex]?.metadata?.transform?.matrix,\n          transparentColor: i > 0 ? [0, 0, 0] : null,\n        }));\n      autoImageLayerDefPromises.push(autoImageLayerDefPromise);\n    }\n  }\n\n  const autoImageLayerDefs = await Promise.all(autoImageLayerDefPromises);\n  return [autoImageLayerDefs, nextImageLoaders, nextImageMetaAndLayers];\n}\n\n/**\n * Make a subtitle for the spatial component.\n * @param {object} params\n * @param {number} params.observationsCount\n * @param {string} params.observationsLabel\n * @param {string} params.observationsPluralLabel\n * @param {number} params.subobservationsCount\n * @param {string} params.subobservationsLabel\n * @param {string} params.subobservationsPluralLabel\n * @param {number} params.locationsCount\n * @returns {string} The subtitle string,\n * with info about items with zero counts omitted.\n */\nexport function makeSpatialSubtitle({\n  observationsCount, observationsLabel, observationsPluralLabel,\n  subobservationsCount, subobservationsLabel, subobservationsPluralLabel,\n  locationsCount,\n}) {\n  const parts = [];\n  if (subobservationsCount > 0) {\n    let part = `${subobservationsCount} ${pluralize(subobservationsLabel, subobservationsPluralLabel, subobservationsCount)}`;\n    if (locationsCount > 0) {\n      part += ` at ${shortNumber(locationsCount)} locations`;\n    }\n    parts.push(part);\n  }\n  if (observationsCount > 0) {\n    parts.push(`${observationsCount} ${pluralize(observationsLabel, observationsPluralLabel, observationsCount)}`);\n  }\n  return parts.join(', ');\n}\n\nexport function getInitialSpatialTargets({\n  width,\n  height,\n  cells,\n  imageLayerLoaders,\n  useRaster,\n  use3d,\n}) {\n  let initialTargetX = -Infinity;\n  let initialTargetY = -Infinity;\n  let initialTargetZ = -Infinity;\n  let initialZoom = -Infinity;\n  // Some backoff from completely filling the screen.\n  const zoomBackoff = use3d ? 1.5 : 0.1;\n  const cellValues = Object.values(cells);\n  if (imageLayerLoaders.length > 0 && useRaster) {\n    for (let i = 0; i < imageLayerLoaders.length; i += 1) {\n      const viewSize = { height, width };\n      const { target, zoom: newViewStateZoom } = getDefaultInitialViewState(\n        imageLayerLoaders[i].data,\n        viewSize,\n        zoomBackoff,\n        use3d,\n      );\n      if (target[0] > initialTargetX) {\n        // eslint-disable-next-line prefer-destructuring\n        initialTargetX = target[0];\n        initialZoom = newViewStateZoom;\n      }\n      if (target[1] > initialTargetY) {\n        // eslint-disable-next-line prefer-destructuring\n        initialTargetY = target[1];\n        initialZoom = newViewStateZoom;\n      }\n      if (target[2] > initialTargetZ) {\n        // eslint-disable-next-line prefer-destructuring\n        initialTargetZ = target[2];\n        initialZoom = newViewStateZoom;\n      } else {\n        initialTargetZ = null;\n      }\n    }\n  } else if (cellValues.length > 0\n    // Only use cellValues in quadtree calculation if there is\n    // centroid data in the cells (i.e not just ids).\n    && cellValues[0].xy\n    && !useRaster) {\n    const cellCoordinates = cellValues.map(c => c.xy);\n    let xExtent = extent(cellCoordinates, c => c[0]);\n    let yExtent = extent(cellCoordinates, c => c[1]);\n    let xRange = xExtent[1] - xExtent[0];\n    let yRange = yExtent[1] - yExtent[0];\n    const getViewExtentFromPolygonExtents = extents => [\n      Math.min(...extents.map(i => i[0])),\n      Math.max(...extents.map(i => i[1])),\n    ];\n    if (xRange === 0) {\n      // The fall back is the cells' polygon coordinates, if the original range\n      // is 0 i.e the centroids are all on the same axis.\n      const polygonExtentsX = cellValues.map(cell => extent(cell.poly, i => i[0]));\n      xExtent = getViewExtentFromPolygonExtents(polygonExtentsX);\n      xRange = xExtent[1] - xExtent[0];\n    }\n    if (yRange === 0) {\n      // The fall back is the first cells' polygon coordinates, if the original range\n      // is 0 i.e the centroids are all on the same axis.\n      const polygonExtentsY = cellValues.map(cell => extent(cell.poly, i => i[1]));\n      yExtent = getViewExtentFromPolygonExtents(polygonExtentsY);\n      yRange = yExtent[1] - yExtent[0];\n    }\n    initialTargetX = xExtent[0] + xRange / 2;\n    initialTargetY = yExtent[0] + yRange / 2;\n    initialTargetZ = null;\n    initialZoom = Math.log2(Math.min(width / xRange, height / yRange)) - zoomBackoff;\n  } else {\n    return {\n      initialTargetX: null, initialTargetY: null, initialTargetZ: null, initialZoom: null,\n    };\n  }\n  return {\n    initialTargetX, initialTargetY, initialZoom, initialTargetZ,\n  };\n}\n\n/**\n * Make a subtitle for the spatial component.\n * @param {object} data PixelSource | PixelSource[]\n * @returns {Array} [Layer, PixelSource | PixelSource[]] tuple.\n */\nexport function getLayerLoaderTuple(data, use3d) {\n  const loader = ((Array.isArray(data) && data.length > 1) || !Array.isArray(data))\n    ? data : data[0];\n  if (use3d) {\n    return [VolumeLayer, Array.isArray(loader) ? loader : [loader]];\n  }\n  const Layer = (Array.isArray(data) && data.length > 1) ? MultiscaleImageLayer : ImageLayer;\n  return [Layer, loader];\n}\n\n\nexport function renderSubBitmaskLayers(props) {\n  const {\n    bbox: {\n      left, top, right, bottom,\n    },\n    x,\n    y,\n    z,\n  } = props.tile;\n  const {\n    data, id, loader,\n  } = props;\n  // Only render in positive coorinate system\n  if ([left, bottom, right, top].some(v => v < 0) || !data) {\n    return null;\n  }\n  const base = loader[0];\n  const [height, width] = loader[0].shape.slice(-2);\n  // Tiles are exactly fitted to have height and width such that their bounds\n  // match that of the actual image (not some padded version).\n  // Thus the right/bottom given by deck.gl are incorrect since\n  // they assume tiles are of uniform sizes, which is not the case for us.\n  const bounds = [\n    left,\n    data.height < base.tileSize ? height : bottom,\n    data.width < base.tileSize ? width : right,\n    top,\n  ];\n  return new BitmaskLayer(props, {\n    channelData: data,\n    // Uncomment to help debugging - shades the tile being hovered over.\n    // autoHighlight: true,\n    // highlightColor: [80, 80, 80, 50],\n    // Shared props with BitmapLayer:\n    bounds,\n    id: `sub-layer-${bounds}-${id}`,\n    tileId: { x, y, z },\n  });\n}\n","module.exports = require(\"@material-ui/icons/CloudDownload\");","module.exports = require(\"@material-ui/core/Link\");","module.exports = require(\"@material-ui/icons/Settings\");","module.exports = require(\"@material-ui/icons/Close\");","module.exports = require(\"@material-ui/core/CircularProgress\");","module.exports = require(\"@material-ui/core/MenuList\");","module.exports = require(\"@material-ui/core/ClickAwayListener\");","module.exports = require(\"@material-ui/core/Fade\");","module.exports = require(\"fast-deep-equal\");","module.exports = require(\"lodash/isNil\");","module.exports = require(\"tinycolor2\");","import React from 'react';\nimport Tooltip from './Tooltip';\n\n/**\n * A tooltip component that also incorporates a crosshair element.\n * @param {object} props\n * @param {string} props.parentUuid A unique identifier corresponding to the plot\n * with which this scatterplot is associated.\n * @param {string} props.sourceUuid A unique identifier corresponding to the plot\n * from which this tooltip originated.\n * @param {number} props.x The x coordinate for the tooltip.\n * @param {number} props.y The y coordinate for the tooltip.\n * @param {number} props.parentWidth The width of the parent plot container element.\n * @param {number} props.parentHeight The height of the parent plot container element.\n * @param {React.Component} props.children The tooltip contents as a react component.\n */\nexport default function Tooltip2D(props) {\n  const {\n    parentUuid,\n    sourceUuid,\n    x,\n    y,\n    parentWidth,\n    parentHeight,\n    children,\n  } = props;\n  // Check if out of bounds.\n  if (x < 0 || x > parentWidth || y < 0 || y > parentHeight) {\n    return null;\n  }\n  // Show tooltip or crosshair?\n  const isTooltipVisible = (parentUuid === sourceUuid);\n  const crosshairWidth = 1;\n  return (\n    <>\n      {isTooltipVisible ? (\n        <Tooltip\n          x={x}\n          y={y}\n          parentWidth={parentWidth}\n          parentHeight={parentHeight}\n        >\n          {children}\n        </Tooltip>\n      ) : (\n        <>\n          {x !== null ? (\n            <div\n              className=\"cell-emphasis-crosshair\"\n              style={{\n                left: `${x - crosshairWidth / 2}px`,\n                top: 0,\n                width: `${crosshairWidth}px`,\n                height: `${parentHeight}px`,\n              }}\n            />\n          ) : null}\n          {y !== null ? (\n            <div\n              className=\"cell-emphasis-crosshair\"\n              style={{\n                left: 0,\n                top: `${y - crosshairWidth / 2}px`,\n                width: `${parentWidth}px`,\n                height: `${crosshairWidth}px`,\n              }}\n            />\n          ) : null}\n        </>\n      )}\n    </>\n  );\n}\n","import React from 'react';\n\nexport default function TooltipContent(props) {\n  const {\n    info,\n  } = props;\n\n  return (\n    <table>\n      <tbody>\n        {Object.entries(info).map(([key, value]) => (\n          <tr key={key}>\n            <th>{key}</th>\n            <td>{value}</td>\n          </tr>\n        ))}\n      </tbody>\n    </table>\n  );\n}\n","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}","import objectWithoutPropertiesLoose from \"./objectWithoutPropertiesLoose\";\nexport default function _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}","module.exports = require(\"zarr\");","import React from 'react';\nimport Box from '@material-ui/core/Box';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport { useStyles } from './styles';\n\nexport default function OptionsContainer(props) {\n  const {\n    children,\n  } = props;\n\n  const classes = useStyles();\n\n  return (\n    <Box className={classes.box}>\n      <TableContainer className={classes.tableContainer}>\n        <Table className={classes.table} size=\"small\">\n          <TableBody>\n            {children}\n          </TableBody>\n        </Table>\n      </TableContainer>\n    </Box>\n  );\n}\n","module.exports = require(\"ajv\");","import { makeStyles } from '@material-ui/core/styles';\n\nexport const styles = makeStyles(() => ({\n  tooltipAnchor: {\n    position: 'relative',\n    width: '0px',\n    height: '0px',\n    pointerEvents: 'none',\n    userSelect: 'none',\n  },\n  tooltipContent: {\n    opacity: 0.9,\n    padding: '5px',\n    pointerEvents: 'none',\n    '& table > tbody > tr > th, & table > tbody > tr > td': {\n      fontSize: '80%',\n      opacity: 0.8,\n      outline: 0,\n      padding: '0 2px',\n    },\n    '& table': {\n      borderCollapse: 'collapse',\n    },\n  },\n}));\n","import React, { useEffect, useRef, useState } from 'react';\nimport Paper from '@material-ui/core/Paper';\nimport Popper from '@material-ui/core/Popper';\nimport { useVitessceContainer } from '../hooks';\nimport { styles } from './styles';\n\nexport default function Tooltip(props) {\n  const {\n    x,\n    y,\n    parentWidth,\n    parentHeight,\n    children,\n  } = props;\n  const ref = useRef();\n  const classes = styles();\n  const [placementX, setPlacementX] = useState('start');\n  const [placementY, setPlacementY] = useState('bottom');\n\n  const getTooltipContainer = useVitessceContainer(ref);\n\n  // Do collision detection based on the bounds of the tooltip ancestor element.\n  useEffect(() => {\n    if (ref && ref.current) {\n      const flipX = (x > parentWidth / 2);\n      const flipY = (y > parentHeight / 2);\n      setPlacementX(flipX ? 'end' : 'start');\n      setPlacementY(flipY ? 'top' : 'bottom');\n      ref.current.style.left = `${x + (flipX ? -20 : 5)}px`;\n      ref.current.style.top = `${y + (flipY ? -20 : 5)}px`;\n    }\n  }, [x, y, parentWidth, parentHeight]);\n\n  return (\n    <div\n      ref={ref}\n      className={classes.tooltipAnchor}\n    >\n      {ref && ref.current ? (\n        <Popper\n          open\n          anchorEl={ref.current}\n          container={getTooltipContainer}\n          transition\n          placement={`${placementY}-${placementX}`}\n        >\n          <Paper elevation={4} className={classes.tooltipContent}>\n            {children}\n          </Paper>\n        </Popper>\n      ) : null}\n    </div>\n  );\n}\n","// See https://reactjs.org/docs/code-splitting.html#named-exports\nexport { Vega as default } from 'react-vega';\n","import React, { Suspense, useMemo } from 'react';\nimport { Handler } from 'vega-tooltip';\nimport ReactVega from './ReactVega';\n\n// TODO: React.lazy is not working with Vitessce in the portal-ui.\n// For now, we can work around this by not using React.lazy,\n// but for performance benefits that come with lazy-loading\n// we should eventually try to resolve this issue.\n// const ReactVega = React.lazy(() => import('./ReactVega'));\n\nexport const DATASET_NAME = 'table';\n\nfunction isVega(spec) {\n  return spec.$schema === 'https://vega.github.io/schema/vega/v5.json';\n}\n\n/**\n * A wrapper around the react-vega Vega component.\n * @param {object} props\n * @param {object} spec A vega or vega-lite spec.\n * @param {object[]} data The plot data as an array of objects.\n * @param {object} signalListeners Vega signal listeners. Optional.\n */\nexport default function VegaPlot(props) {\n  const {\n    spec: partialSpec,\n    data,\n    signalListeners,\n  } = props;\n\n  const spec = {\n    ...partialSpec,\n    data: (isVega(partialSpec)\n      ? [\n        { name: DATASET_NAME },\n        ...partialSpec.data,\n      ]\n      : { name: DATASET_NAME }\n    ),\n  };\n\n  const vegaComponent = useMemo(() => (\n    <ReactVega\n      spec={spec}\n      data={{\n        [DATASET_NAME]: data,\n      }}\n      signalListeners={signalListeners}\n      tooltip={new Handler().call}\n      renderer=\"canvas\"\n      scaleFactor={3}\n    />\n  ), [spec, data, signalListeners]);\n\n  return (\n    spec && data && data.length > 0 ? (\n      <Suspense fallback={<div>Loading...</div>}>\n        {vegaComponent}\n      </Suspense>\n    ) : null\n  );\n}\n","/**\n * Vega-Lite themes that can be passed to the `config` property\n * of the vega-lite spec.\n */\nexport const VEGA_THEMES = {\n  dark: {\n    // The vega-themes dark theme.\n    // Reference: https://github.com/vega/vega-themes/blob/master/src/theme-dark.ts\n    background: null,\n    title: { color: '#fff' },\n    style: {\n      'guide-label': {\n        fill: '#fff',\n      },\n      'guide-title': {\n        fill: '#fff',\n      },\n    },\n    axis: {\n      domainColor: '#fff',\n      gridColor: '#888',\n      tickColor: '#fff',\n    },\n  },\n  light: {\n    // The default vega theme.\n    background: null,\n  },\n};\n","export { default as VegaPlot, DATASET_NAME } from './VegaPlot';\nexport { VEGA_THEMES } from './utils';\n","/* eslint-disable no-nested-ternary */\n/* eslint-disable no-param-reassign */\nimport { treeToCellColorsBySetNames } from './sets/cell-set-utils';\n\n// The functions defined here have been adapted from d3-interpolate,\n// d3-color, and d3-scale-chromatic.\n// Color string \"rgb(r,g,b)\" representations are replaced by color array [r, g, b]\n// representations, to allow them to work nicely with deck.gl,\n// without the need to converting back and forth between string and array formats.\n\n// Reference: https://github.com/d3/d3-scale-chromatic/blob/431d21da776f97c632f53a855bd822edfbbcd56e/src/diverging/RdBu.js\n// eslint-disable-next-line max-len\nconst schemeRdBu = [[103, 0, 31], [178, 24, 43], [214, 96, 77], [244, 165, 130], [253, 219, 199], [247, 247, 247], [209, 229, 240], [146, 197, 222], [67, 147, 195], [33, 102, 172], [5, 48, 97]];\n// eslint-disable-next-line max-len\nconst schemePlasma = [[13, 8, 135], [16, 7, 136], [19, 7, 137], [22, 7, 138], [25, 6, 140], [27, 6, 141], [29, 6, 142], [32, 6, 143], [34, 6, 144], [36, 6, 145], [38, 5, 145], [40, 5, 146], [42, 5, 147], [44, 5, 148], [46, 5, 149], [47, 5, 150], [49, 5, 151], [51, 5, 151], [53, 4, 152], [55, 4, 153], [56, 4, 154], [58, 4, 154], [60, 4, 155], [62, 4, 156], [63, 4, 156], [65, 4, 157], [67, 3, 158], [68, 3, 158], [70, 3, 159], [72, 3, 159], [73, 3, 160], [75, 3, 161], [76, 2, 161], [78, 2, 162], [80, 2, 162], [81, 2, 163], [83, 2, 163], [85, 2, 164], [86, 1, 164], [88, 1, 164], [89, 1, 165], [91, 1, 165], [92, 1, 166], [94, 1, 166], [96, 1, 166], [97, 0, 167], [99, 0, 167], [100, 0, 167], [102, 0, 167], [103, 0, 168], [105, 0, 168], [106, 0, 168], [108, 0, 168], [110, 0, 168], [111, 0, 168], [113, 0, 168], [114, 1, 168], [116, 1, 168], [117, 1, 168], [119, 1, 168], [120, 1, 168], [122, 2, 168], [123, 2, 168], [125, 3, 168], [126, 3, 168], [128, 4, 168], [129, 4, 167], [131, 5, 167], [132, 5, 167], [134, 6, 166], [135, 7, 166], [136, 8, 166], [138, 9, 165], [139, 10, 165], [141, 11, 165], [142, 12, 164], [143, 13, 164], [145, 14, 163], [146, 15, 163], [148, 16, 162], [149, 17, 161], [150, 19, 161], [152, 20, 160], [153, 21, 159], [154, 22, 159], [156, 23, 158], [157, 24, 157], [158, 25, 157], [160, 26, 156], [161, 27, 155], [162, 29, 154], [163, 30, 154], [165, 31, 153], [166, 32, 152], [167, 33, 151], [168, 34, 150], [170, 35, 149], [171, 36, 148], [172, 38, 148], [173, 39, 147], [174, 40, 146], [176, 41, 145], [177, 42, 144], [178, 43, 143], [179, 44, 142], [180, 46, 141], [181, 47, 140], [182, 48, 139], [183, 49, 138], [184, 50, 137], [186, 51, 136], [187, 52, 136], [188, 53, 135], [189, 55, 134], [190, 56, 133], [191, 57, 132], [192, 58, 131], [193, 59, 130], [194, 60, 129], [195, 61, 128], [196, 62, 127], [197, 64, 126], [198, 65, 125], [199, 66, 124], [200, 67, 123], [201, 68, 122], [202, 69, 122], [203, 70, 121], [204, 71, 120], [204, 73, 119], [205, 74, 118], [206, 75, 117], [207, 76, 116], [208, 77, 115], [209, 78, 114], [210, 79, 113], [211, 81, 113], [212, 82, 112], [213, 83, 111], [213, 84, 110], [214, 85, 109], [215, 86, 108], [216, 87, 107], [217, 88, 106], [218, 90, 106], [218, 91, 105], [219, 92, 104], [220, 93, 103], [221, 94, 102], [222, 95, 101], [222, 97, 100], [223, 98, 99], [224, 99, 99], [225, 100, 98], [226, 101, 97], [226, 102, 96], [227, 104, 95], [228, 105, 94], [229, 106, 93], [229, 107, 93], [230, 108, 92], [231, 110, 91], [231, 111, 90], [232, 112, 89], [233, 113, 88], [233, 114, 87], [234, 116, 87], [235, 117, 86], [235, 118, 85], [236, 119, 84], [237, 121, 83], [237, 122, 82], [238, 123, 81], [239, 124, 81], [239, 126, 80], [240, 127, 79], [240, 128, 78], [241, 129, 77], [241, 131, 76], [242, 132, 75], [243, 133, 75], [243, 135, 74], [244, 136, 73], [244, 137, 72], [245, 139, 71], [245, 140, 70], [246, 141, 69], [246, 143, 68], [247, 144, 68], [247, 145, 67], [247, 147, 66], [248, 148, 65], [248, 149, 64], [249, 151, 63], [249, 152, 62], [249, 154, 62], [250, 155, 61], [250, 156, 60], [250, 158, 59], [251, 159, 58], [251, 161, 57], [251, 162, 56], [252, 163, 56], [252, 165, 55], [252, 166, 54], [252, 168, 53], [252, 169, 52], [253, 171, 51], [253, 172, 51], [253, 174, 50], [253, 175, 49], [253, 177, 48], [253, 178, 47], [253, 180, 47], [253, 181, 46], [254, 183, 45], [254, 184, 44], [254, 186, 44], [254, 187, 43], [254, 189, 42], [254, 190, 42], [254, 192, 41], [253, 194, 41], [253, 195, 40], [253, 197, 39], [253, 198, 39], [253, 200, 39], [253, 202, 38], [253, 203, 38], [252, 205, 37], [252, 206, 37], [252, 208, 37], [252, 210, 37], [251, 211, 36], [251, 213, 36], [251, 215, 36], [250, 216, 36], [250, 218, 36], [249, 220, 36], [249, 221, 37], [248, 223, 37], [248, 225, 37], [247, 226, 37], [247, 228, 37], [246, 230, 38], [246, 232, 38], [245, 233, 38], [245, 235, 39], [244, 237, 39], [243, 238, 39], [243, 240, 39], [242, 242, 39], [241, 244, 38], [241, 245, 37], [240, 247, 36], [240, 249, 33]];\n\n// Reference: https://github.com/d3/d3-interpolate/blob/96d54051d1c2fec55f240edd0ec5401715b10390/src/rgb.js\nfunction rgbSpline(spline) {\n  return (colors) => {\n    const n = colors.length;\n    let r = new Array(n);\n    let g = new Array(n);\n    let b = new Array(n);\n    let i; let\n      color;\n    // eslint-disable-next-line no-plusplus\n    for (i = 0; i < n; ++i) {\n      color = [colors[i][0], colors[i][1], colors[i][2]];\n      r[i] = color[0] || 0;\n      g[i] = color[1] || 0;\n      b[i] = color[2] || 0;\n    }\n    r = spline(r);\n    g = spline(g);\n    b = spline(b);\n    return t => [r(t), g(t), b(t)];\n  };\n}\n\n// Reference: https://github.com/d3/d3-interpolate/blob/594a32af1fe1118812b439012c2cb742e907c0c0/src/basis.js\nfunction basis(values) {\n  function innerBasis(t1, v0, v1, v2, v3) {\n    const t2 = t1 * t1; const\n      t3 = t2 * t1;\n    return ((1 - 3 * t1 + 3 * t2 - t3) * v0\n          + (4 - 6 * t2 + 3 * t3) * v1\n          + (1 + 3 * t1 + 3 * t2 - 3 * t3) * v2\n          + t3 * v3) / 6;\n  }\n\n  const n = values.length - 1;\n  return (t) => {\n    const i = t <= 0 ? (t = 0) : t >= 1 ? (t = 1, n - 1) : Math.floor(t * n);\n    const v1 = values[i];\n    const v2 = values[i + 1];\n    const v0 = i > 0 ? values[i - 1] : 2 * v1 - v2;\n    const v3 = i < n - 1 ? values[i + 2] : 2 * v2 - v1;\n    return innerBasis((t - i / n) * n, v0, v1, v2, v3);\n  };\n}\n\n\n// Reference: https://github.com/d3/d3-scale-chromatic/blob/ade54c13e8dfdb9807801a794eaec1a37f926b8a/src/ramp.js\nconst interpolateRgbBasis = rgbSpline(basis);\n\nfunction interpolateSequentialMulti(range) {\n  const n = range.length;\n  return t => range[Math.max(0, Math.min(n - 1, Math.floor(t * n)))];\n}\n\nexport const interpolateRdBu = interpolateRgbBasis(schemeRdBu);\nexport const interpolatePlasma = interpolateSequentialMulti(schemePlasma);\n\n\n/**\n * Get a mapping of cell IDs to cell colors based on\n * gene / cell set selection coordination state.\n * @param {object} params\n * @param {object} params.expressionMatrix { rows, cols, matrix }\n * @param {array} params.geneSelection Array of selected gene IDs.\n * @param {object} params.cellSets The cell sets tree.\n * @param {object} params.cellSetSelection Selected cell sets.\n * @param {string} params.cellColorEncoding Which to use for\n * coloring: gene expression or cell sets?\n * @returns {Map} Mapping from cell IDs to [r, g, b] color arrays.\n */\nexport function getCellColors(params) {\n  const {\n    cellColorEncoding,\n    expressionData,\n    cellSets, cellSetSelection,\n    cellSetColor,\n    expressionDataAttrs,\n    theme,\n  } = params;\n  if (cellColorEncoding === 'geneSelection' && expressionData && expressionDataAttrs) {\n    // TODO: allow other color maps.\n    const geneExpColormap = interpolatePlasma;\n    const colors = new Map();\n    for (let i = 0; i < expressionData.length; i += 1) {\n      const value = expressionData[i];\n      const cellColor = geneExpColormap(value / 255);\n      colors.set(expressionDataAttrs.rows[i], cellColor);\n    }\n    return colors;\n  } if (cellColorEncoding === 'cellSetSelection' && cellSetSelection && cellSets) {\n    // Cell sets can potentially lack set colors since the color property\n    // is not a required part of the schema.\n    // The `initializeSets` function fills in any empty colors\n    // with defaults and returns the processed tree object.\n    return treeToCellColorsBySetNames(cellSets, cellSetSelection, cellSetColor, theme);\n  }\n  return new Map();\n}\n","module.exports = require(\"@turf/centroid\");","module.exports = require(\"concaveman\");","module.exports = require(\"@nebula.gl/edit-modes\");","/* eslint-disable no-underscore-dangle */\nimport { COORDINATE_SYSTEM, CompositeLayer } from '@deck.gl/core'; // eslint-disable-line import/no-extraneous-dependencies\nimport { TextLayer } from '@deck.gl/layers'; // eslint-disable-line import/no-extraneous-dependencies\nimport {\n  AXIS_LABEL_TEXT_SIZE,\n  AXIS_TITLE_TEXT_SIZE,\n  AXIS_MARGIN,\n  THEME_TO_TEXT_COLOR,\n  AXIS_FONT_FAMILY,\n} from './heatmap-constants';\n\nexport default class HeatmapCompositeTextLayer extends CompositeLayer {\n  _renderAxisTopLayers() {\n    const {\n      axisTopLabelData, matrixLeft, width, matrixWidth, viewWidth, theme,\n      targetX, targetY, axisTopTitle, cellWidth, axisOffsetTop, scaleFactor,\n    } = this.props;\n    const showAxisTopLabels = cellWidth >= AXIS_LABEL_TEXT_SIZE;\n    const axisLabelTop = targetY + (axisOffsetTop - AXIS_MARGIN) / 2 / scaleFactor;\n    return [\n      new TextLayer({\n        id: 'axisTopLabels',\n        coordinateSystem: COORDINATE_SYSTEM.CARTESIAN,\n        data: axisTopLabelData,\n        getText: d => d[1],\n        getPosition: d => [matrixLeft + ((d[0] + 0.5) / width) * matrixWidth, axisLabelTop],\n        getTextAnchor: 'start',\n        getColor: () => THEME_TO_TEXT_COLOR[theme],\n        getSize: (showAxisTopLabels ? AXIS_LABEL_TEXT_SIZE : 0),\n        getAngle: 75,\n        fontFamily: AXIS_FONT_FAMILY,\n        updateTriggers: {\n          getPosition: [axisLabelTop, matrixLeft, matrixWidth, viewWidth],\n          getSize: [showAxisTopLabels],\n          getColor: [theme],\n        },\n      }),\n      new TextLayer({\n        id: 'axisTopTitle',\n        coordinateSystem: COORDINATE_SYSTEM.CARTESIAN,\n        data: [{ title: axisTopTitle }],\n        getText: d => d.title,\n        getPosition: [targetX, targetY],\n        getTextAnchor: 'middle',\n        getColor: () => THEME_TO_TEXT_COLOR[theme],\n        getSize: (!showAxisTopLabels ? AXIS_TITLE_TEXT_SIZE : 0),\n        getAngle: 0,\n        fontFamily: AXIS_FONT_FAMILY,\n        updateTriggers: {\n          getSize: [showAxisTopLabels],\n          getColor: [theme],\n        },\n      }),\n    ];\n  }\n\n  _renderAxisLeftLayers() {\n    const {\n      axisLeftLabelData, matrixTop, height, matrixHeight,\n      viewHeight, theme, axisLeftTitle, targetX, targetY, cellHeight, axisOffsetLeft,\n      scaleFactor,\n    } = this.props;\n    const showAxisLeftLabels = cellHeight >= AXIS_LABEL_TEXT_SIZE;\n    const axisLabelLeft = targetX + (axisOffsetLeft - AXIS_MARGIN) / 2 / scaleFactor;\n    return [\n      new TextLayer({\n        id: 'axisLeftLabels',\n        coordinateSystem: COORDINATE_SYSTEM.CARTESIAN,\n        data: axisLeftLabelData,\n        getText: d => d[1],\n        getPosition: d => [axisLabelLeft, matrixTop + ((d[0] + 0.5) / height) * matrixHeight],\n        getTextAnchor: 'end',\n        getColor: () => THEME_TO_TEXT_COLOR[theme],\n        getSize: (showAxisLeftLabels ? AXIS_LABEL_TEXT_SIZE : 0),\n        getAngle: 0,\n        fontFamily: AXIS_FONT_FAMILY,\n        updateTriggers: {\n          getPosition: [axisLabelLeft, matrixTop, matrixHeight, viewHeight],\n          getSize: [showAxisLeftLabels],\n          getColor: [theme],\n        },\n      }),\n      new TextLayer({\n        id: 'axisLeftTitle',\n        coordinateSystem: COORDINATE_SYSTEM.CARTESIAN,\n        data: [{ title: axisLeftTitle }],\n        getText: d => d.title,\n        getPosition: [targetX, targetY],\n        getTextAnchor: 'middle',\n        getColor: () => THEME_TO_TEXT_COLOR[theme],\n        getSize: (!showAxisLeftLabels ? AXIS_TITLE_TEXT_SIZE : 0),\n        getAngle: 90,\n        fontFamily: AXIS_FONT_FAMILY,\n        updateTriggers: {\n          getSize: [showAxisLeftLabels],\n          getColor: [theme],\n        },\n      }),\n    ];\n  }\n\n  renderLayers() {\n    return [\n      this._renderAxisTopLayers(),\n      this._renderAxisLeftLayers(),\n    ];\n  }\n}\n\nHeatmapCompositeTextLayer.layerName = 'HeatmapCompositeTextLayer';\n","import { BitmapLayer } from '@deck.gl/layers'; // eslint-disable-line import/no-extraneous-dependencies\nimport { CompositeLayer } from '@deck.gl/core'; // eslint-disable-line import/no-extraneous-dependencies\nimport { PIXELATED_TEXTURE_PARAMETERS } from './heatmap-constants';\n\n\n// These are the same defaultProps as for BitmapLayer.\nconst defaultProps = {\n  ...BitmapLayer.defaultProps,\n  image: { type: 'object', value: null, async: true },\n  bounds: { type: 'array', value: [1, 0, 0, 1], compare: true },\n  desaturate: {\n    type: 'number', min: 0, max: 1, value: 0,\n  },\n  transparentColor: { type: 'color', value: [0, 0, 0, 0] },\n  tintColor: { type: 'color', value: [255, 255, 255] },\n};\n\nexport default class PixelatedBitmapLayer extends CompositeLayer {\n  renderLayers() {\n    const { image } = this.props;\n    return new BitmapLayer(this.props, {\n      id: `${this.props.id}-wrapped`,\n      image,\n      textureParameters: PIXELATED_TEXTURE_PARAMETERS,\n    });\n  }\n}\n\nPixelatedBitmapLayer.layerName = 'PixelatedBitmapLayer';\nPixelatedBitmapLayer.defaultProps = defaultProps;\n","import glsl from 'glslify';\n\n/**\n * No change to the vertex shader from the base BitmapLayer.\n * Reference: https://github.com/visgl/deck.gl/blob/8.2-release/modules/layers/src/bitmap-layer/bitmap-layer-vertex.js\n */\nexport const vertexShader = glsl`\n#define SHADER_NAME heatmap-bitmap-layer-vertex-shader\n\nattribute vec2 texCoords;\nattribute vec3 positions;\nattribute vec3 positions64Low;\n\nvarying vec2 vTexCoord;\n\nconst vec3 pickingColor = vec3(1.0, 0.0, 0.0);\n\nvoid main(void) {\n  geometry.worldPosition = positions;\n  geometry.uv = texCoords;\n  geometry.pickingColor = pickingColor;\n\n  gl_Position = project_position_to_clipspace(positions, positions64Low, vec3(0.0), geometry.position);\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  vTexCoord = texCoords;\n\n  vec4 color = vec4(0.0);\n  DECKGL_FILTER_COLOR(color, geometry);\n}\n`;\n\n/**\n * Fragment shader adapted to perform aggregation and\n * take color scale functions + sliders into account.\n * Reference: https://github.com/visgl/deck.gl/blob/8.2-release/modules/layers/src/bitmap-layer/bitmap-layer-fragment.js\n * Reference: https://github.com/hms-dbmi/viv/blob/06231ae02cac1ff57ba458c71e9bc59ed2fc4f8b/src/layers/XRLayer/xr-layer-fragment-colormap.webgl1.glsl\n */\nexport const fragmentShader = glsl`\n#define SHADER_NAME heatmap-bitmap-layer-fragment-shader\n\n#ifdef GL_ES\nprecision mediump float;\n#endif\n\n#pragma glslify: rdbu = require(\"glsl-colormap/rdbu\")\n#pragma glslify: plasma = require(\"glsl-colormap/plasma\")\n#pragma glslify: viridis = require(\"glsl-colormap/viridis\")\n#pragma glslify: greys = require(\"glsl-colormap/greys\")\n#pragma glslify: magma = require(\"glsl-colormap/magma\")\n#pragma glslify: jet = require(\"glsl-colormap/jet\")\n#pragma glslify: bone = require(\"glsl-colormap/bone\")\n#pragma glslify: copper = require(\"glsl-colormap/copper\")\n#pragma glslify: density = require(\"glsl-colormap/density\")\n#pragma glslify: inferno = require(\"glsl-colormap/inferno\")\n#pragma glslify: cool = require(\"glsl-colormap/cool\")\n#pragma glslify: hot = require(\"glsl-colormap/hot\")\n#pragma glslify: spring = require(\"glsl-colormap/spring\")\n#pragma glslify: summer = require(\"glsl-colormap/summer\")\n#pragma glslify: autumn = require(\"glsl-colormap/autumn\")\n#pragma glslify: winter = require(\"glsl-colormap/winter\")\n\n// The texture (GL.LUMINANCE & Uint8Array).\nuniform sampler2D uBitmapTexture;\n\n// What are the dimensions of the texture (width, height)?\nuniform vec2 uTextureSize;\n\n// How many consecutive pixels should be aggregated together along each axis?\nuniform vec2 uAggSize;\n\n// What are the values of the color scale sliders?\nuniform vec2 uColorScaleRange;\n\n// The texture coordinate, varying (interpolated between values set by the vertex shader).\nvarying vec2 vTexCoord;\n\nvoid main(void) {\n  // Compute 1 pixel in texture coordinates\n  vec2 onePixel = vec2(1.0, 1.0) / uTextureSize;\n  \n  vec2 viewCoord = vec2(floor(vTexCoord.x * uTextureSize.x), floor(vTexCoord.y * uTextureSize.y));\n\n  // Compute (x % aggSizeX, y % aggSizeY).\n  // These values will be the number of values to the left / above the current position to consider.\n  vec2 modAggSize = vec2(-1.0 * mod(viewCoord.x, uAggSize.x), -1.0 * mod(viewCoord.y, uAggSize.y));\n\n  // Take the sum of values along each axis.\n  float intensitySum = 0.0;\n  vec2 offsetPixels = vec2(0.0, 0.0);\n\n  for(int i = 0; i < 16; i++) {\n    // Check to break outer loop early.\n    // Uniforms cannot be used as conditions in GLSL for loops.\n    if(float(i) >= uAggSize.y) {\n      // Done in the y direction.\n      break;\n    }\n\n    offsetPixels = vec2(offsetPixels.x, (modAggSize.y + float(i)) * onePixel.y);\n\n    for(int j = 0; j < 16; j++) {\n      // Check to break inner loop early.\n      // Uniforms cannot be used as conditions in GLSL for loops.\n      if(float(j) >= uAggSize.x) {\n        // Done in the x direction.\n        break;\n      }\n\n      offsetPixels = vec2((modAggSize.x + float(j)) * onePixel.x, offsetPixels.y);\n      intensitySum += texture2D(uBitmapTexture, vTexCoord + offsetPixels).r;\n    }\n  }\n  \n  // Compute the mean value.\n  float intensityMean = intensitySum / (uAggSize.x * uAggSize.y);\n  \n  // Re-scale using the color scale slider values.\n  float scaledIntensityMean = (intensityMean - uColorScaleRange[0]) / max(0.005, (uColorScaleRange[1] - uColorScaleRange[0]));\n\n  gl_FragColor = COLORMAP_FUNC(clamp(scaledIntensityMean, 0.0, 1.0));\n\n  geometry.uv = vTexCoord;\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n`;\n","/* eslint-disable no-underscore-dangle */\nimport GL from '@luma.gl/constants'; // eslint-disable-line import/no-extraneous-dependencies\nimport { _mergeShaders, project32, picking } from '@deck.gl/core'; // eslint-disable-line import/no-extraneous-dependencies\nimport { BitmapLayer } from '@deck.gl/layers'; // eslint-disable-line import/no-extraneous-dependencies\nimport { Texture2D } from '@luma.gl/core';\nimport { PIXELATED_TEXTURE_PARAMETERS, TILE_SIZE } from './heatmap-constants';\nimport { GLSL_COLORMAPS, GLSL_COLORMAP_DEFAULT, COLORMAP_SHADER_PLACEHOLDER } from './constants';\nimport { vertexShader, fragmentShader } from './heatmap-bitmap-layer-shaders';\n\nconst defaultProps = {\n  image: { type: 'object', value: null, async: true },\n  colormap: { type: 'string', value: GLSL_COLORMAP_DEFAULT, compare: true },\n  bounds: { type: 'array', value: [1, 0, 0, 1], compare: true },\n  aggSizeX: { type: 'number', value: 8.0, compare: true },\n  aggSizeY: { type: 'number', value: 8.0, compare: true },\n  colorScaleLo: { type: 'number', value: 0.0, compare: true },\n  colorScaleHi: { type: 'number', value: 1.0, compare: true },\n};\n\n/**\n * A BitmapLayer that performs aggregation in the fragment shader,\n * and renders its texture from a Uint8Array rather than an ImageData.\n */\nexport default class HeatmapBitmapLayer extends BitmapLayer {\n  /**\n   * Copy of getShaders from Layer (grandparent, parent of BitmapLayer).\n   * Reference: https://github.com/visgl/deck.gl/blob/0afd4e99a6199aeec979989e0c361c97e6c17a16/modules/core/src/lib/layer.js#L302\n   * @param {object} shaders\n   * @returns {object} Merged shaders.\n   */\n  _getShaders(shaders) {\n    this.props.extensions.forEach((extension) => {\n      // eslint-disable-next-line no-param-reassign\n      shaders = _mergeShaders(shaders, extension.getShaders.call(this, extension));\n    });\n    return shaders;\n  }\n\n  /**\n   * Need to override to provide custom shaders.\n   */\n  getShaders() {\n    const { colormap } = this.props;\n    const fragmentShaderWithColormap = (GLSL_COLORMAPS.includes(colormap)\n      ? fragmentShader.replace(COLORMAP_SHADER_PLACEHOLDER, colormap)\n      : fragmentShader.replace(COLORMAP_SHADER_PLACEHOLDER, GLSL_COLORMAP_DEFAULT)\n    );\n    return this._getShaders({\n      vs: vertexShader,\n      fs: fragmentShaderWithColormap,\n      modules: [project32, picking],\n    });\n  }\n\n  updateState(args) {\n    super.updateState(args);\n    this.loadTexture(this.props.image);\n    const { props, oldProps } = args;\n    if (props.colormap !== oldProps.colormap) {\n      const { gl } = this.context;\n      // eslint-disable-next-line no-unused-expressions\n      this.state.model?.delete();\n      this.state.model = this._getModel(gl);\n      this.getAttributeManager().invalidateAll();\n    }\n  }\n\n  /**\n   * Need to override to provide additional uniform values.\n   * Simplified by removing video-related code.\n   * Reference: https://github.com/visgl/deck.gl/blob/0afd4e99a6199aeec979989e0c361c97e6c17a16/modules/layers/src/bitmap-layer/bitmap-layer.js#L173\n   * @param {*} opts\n   */\n  draw(opts) {\n    const { uniforms } = opts;\n    const { bitmapTexture, model } = this.state;\n    const {\n      aggSizeX,\n      aggSizeY,\n      colorScaleLo,\n      colorScaleHi,\n    } = this.props;\n\n    // Render the image\n    if (bitmapTexture && model) {\n      model\n        .setUniforms(\n          Object.assign({}, uniforms, {\n            uBitmapTexture: bitmapTexture,\n            uTextureSize: [TILE_SIZE, TILE_SIZE],\n            uAggSize: [aggSizeX, aggSizeY],\n            uColorScaleRange: [colorScaleLo, colorScaleHi],\n          }),\n        )\n        .draw();\n    }\n  }\n\n  /**\n   * Need to override to provide the custom DEFAULT_TEXTURE_PARAMETERS\n   * object.\n   * Simplified by removing video-related code.\n   * Reference: https://github.com/visgl/deck.gl/blob/0afd4e99a6199aeec979989e0c361c97e6c17a16/modules/layers/src/bitmap-layer/bitmap-layer.js#L218\n   * @param {Uint8Array} image\n   */\n  loadTexture(image) {\n    const { gl } = this.context;\n\n    if (this.state.bitmapTexture) {\n      this.state.bitmapTexture.delete();\n    }\n\n    if (image instanceof Texture2D) {\n      this.setState({\n        bitmapTexture: image,\n      });\n    } else if (image) {\n      this.setState({\n        bitmapTexture: new Texture2D(gl, {\n          data: image,\n          mipmaps: false,\n          parameters: PIXELATED_TEXTURE_PARAMETERS,\n          // Each color contains a single luminance value.\n          // When sampled, rgb are all set to this luminance, alpha is 1.0.\n          // Reference: https://luma.gl/docs/api-reference/webgl/texture#texture-formats\n          format: GL.LUMINANCE,\n          dataFormat: GL.LUMINANCE,\n          type: GL.UNSIGNED_BYTE,\n          width: TILE_SIZE,\n          height: TILE_SIZE,\n        }),\n      });\n    }\n  }\n}\nHeatmapBitmapLayer.layerName = 'HeatmapBitmapLayer';\nHeatmapBitmapLayer.defaultProps = defaultProps;\n","module.exports = require(\"@material-ui/core/InputLabel\");","module.exports = require(\"classnames\");","module.exports = require(\"@material-ui/core/Button\");","module.exports = require(\"d3-quadtree\");","import glsl from 'glslify';\n\n/**\n *\n * Reference: https://github.com/visgl/deck.gl/blob/8.4-release/modules/layers/src/scatterplot-layer/scatterplot-layer-vertex.glsl.js\n * Reference: https://observablehq.com/@rreusser/selecting-the-right-opacity-for-2d-point-clouds\n * Reference: https://github.com/flekschas/regl-scatterplot/blob/5e3b03e/src/point.vs\n */\nconst vs = glsl`\n#pragma glslify: plasma = require(\"glsl-colormap/plasma\")\n#pragma glslify: viridis = require(\"glsl-colormap/viridis\")\n#pragma glslify: greys = require(\"glsl-colormap/greys\")\n#pragma glslify: magma = require(\"glsl-colormap/magma\")\n#pragma glslify: jet = require(\"glsl-colormap/jet\")\n#pragma glslify: bone = require(\"glsl-colormap/bone\")\n#pragma glslify: copper = require(\"glsl-colormap/copper\")\n#pragma glslify: density = require(\"glsl-colormap/density\")\n#pragma glslify: inferno = require(\"glsl-colormap/inferno\")\n#pragma glslify: cool = require(\"glsl-colormap/cool\")\n#pragma glslify: hot = require(\"glsl-colormap/hot\")\n#pragma glslify: spring = require(\"glsl-colormap/spring\")\n#pragma glslify: summer = require(\"glsl-colormap/summer\")\n#pragma glslify: autumn = require(\"glsl-colormap/autumn\")\n#pragma glslify: winter = require(\"glsl-colormap/winter\")\n\n// Custom attributes for Vitessce:\nattribute float expressionValue;\n\n// Custom uniforms for Vitessce:\nuniform vec2 uColorScaleRange;\nuniform bool uIsExpressionMode;\n\n`;\n\nconst inject = {\n  'vs:DECKGL_FILTER_COLOR': `\n    if(uIsExpressionMode) {\n      float normalizedExpressionValue = expressionValue / 255.0;\n      float scaledExpressionValue = (normalizedExpressionValue - uColorScaleRange[0]) / max(0.005, (uColorScaleRange[1] - uColorScaleRange[0]));\n      color.rgb = COLORMAP_FUNC(clamp(scaledExpressionValue, 0.0, 1.0)).rgb;\n    }\n  `,\n};\n\nexport default {\n  name: 'scaled-expression',\n  vs,\n  inject,\n};\n","/* eslint-disable no-underscore-dangle */\n/* eslint-disable import/no-extraneous-dependencies */\nimport GL from '@luma.gl/constants';\nimport { LayerExtension } from '@deck.gl/core';\nimport { GLSL_COLORMAPS, GLSL_COLORMAP_DEFAULT, COLORMAP_SHADER_PLACEHOLDER } from '../../layers/constants';\nimport module from './shader-module';\n\nconst defaultProps = {\n  colormap: { type: 'string', value: GLSL_COLORMAP_DEFAULT, compare: true },\n  colorScaleLo: { type: 'number', value: 0.0, compare: true },\n  colorScaleHi: { type: 'number', value: 1.0, compare: true },\n  isExpressionMode: false,\n  getExpressionValue: { type: 'accessor', value: 0 },\n  getSelectionState: { type: 'accessor', value: 0.0 },\n};\n\nexport default class ScaledExpressionExtension extends LayerExtension {\n  getShaders() {\n    const { colormap } = this.props;\n    return {\n      modules: [module],\n      defines: {\n        [COLORMAP_SHADER_PLACEHOLDER]: GLSL_COLORMAPS.includes(colormap)\n          ? colormap\n          : GLSL_COLORMAP_DEFAULT,\n      },\n    };\n  }\n\n  updateState({ props, oldProps }) {\n    if (props.colormap !== oldProps.colormap) {\n      const { gl } = this.context;\n      // Normal single model layers, like ScatterplotLayer\n      if (this.state.model) {\n        // eslint-disable-next-line no-unused-expressions\n        this.state.model?.delete();\n        this.state.model = this._getModel(gl);\n      } else {\n        // Special handling for PolygonLayer sublayer models.\n        if (this.state.models) {\n          // eslint-disable-next-line no-unused-expressions\n          this.state.models?.forEach(model => model?.delete());\n        }\n        if (this.state.topModel) {\n           // eslint-disable-next-line no-unused-expressions\n           this.state.topModel?.delete();\n        }\n        if (this.state.sideModel) {\n           // eslint-disable-next-line no-unused-expressions\n           this.state.sideModel?.delete();\n        }\n        if (this._getModels) {\n          this.setState(this._getModels(this.context.gl));\n        }\n      }\n      const attributeManager = this.getAttributeManager();\n      if (attributeManager) {\n        this.getAttributeManager().invalidateAll();\n      }\n    }\n  }\n\n  initializeState() {\n    const layer = this.getCurrentLayer();\n    // No need to run this on layers that don't have a `draw` call.\n    if (layer.isComposite) {\n      return;\n    }\n    const attributeManager = this.getAttributeManager();\n    if (attributeManager) {\n      // This attributes is the array of expression data needed for\n      // coloring cells against the colormap.\n      attributeManager.add({\n        expressionValue: {\n          type: GL.FLOAT,\n          size: 1,\n          transition: true,\n          accessor: 'getExpressionValue',\n          defaultValue: 1,\n          // PolygonLayer fill needs not-intsanced attribute but\n          // ScatterplotLayer and the PolygonLayer stroke needs instanced.\n          // So use another attribute's divisor property as a proxy for this divisor.\n          divisor: Object.values(attributeManager.attributes)[0].settings.divisor,\n        },\n      });\n    }\n  }\n\n  draw() {\n    const {\n      colorScaleLo,\n      colorScaleHi,\n      isExpressionMode,\n    } = this.props;\n    const {\n      topModel, sideModel, models, model,\n    } = this.state;\n    const uniforms = {\n      uColorScaleRange: [colorScaleLo, colorScaleHi],\n      uIsExpressionMode: isExpressionMode,\n    };\n    // ScatterplotLayer model\n    // eslint-disable-next-line no-unused-expressions\n    model?.setUniforms(uniforms);\n\n    // PolygonLayer models from sublayers\n    // eslint-disable-next-line no-unused-expressions\n    models?.forEach(m => m.setUniforms(uniforms));\n    // eslint-disable-next-line no-unused-expressions\n    topModel?.setUniforms(uniforms);\n    // eslint-disable-next-line no-unused-expressions\n    sideModel?.setUniforms(uniforms);\n  }\n}\n\nScaledExpressionExtension.extensionName = 'ScaledExpressionExtension';\nScaledExpressionExtension.defaultProps = defaultProps;\n","import ScaledExpressionExtension from './ScaledExpressionExtension';\n\nexport default ScaledExpressionExtension;\n","import glsl from 'glslify';\n\nconst vs = glsl`\nattribute float isSelected;\n`;\n\nconst inject = {\n  'vs:DECKGL_FILTER_GL_POSITION': `\n    position.z += (1. - isSelected) * .00005; // Add a small z offset for unselected points in the positive direction i.e into the screen.\n  `,\n  'fs:#main-start': ` // Gets rid of bad border effects (active after deck.gl 8.5): https://github.com/visgl/deck.gl/pull/6081\n    float distToCenterNew = length(unitPosition) * outerRadiusPixels;\n    float inCircleNew = step(distToCenterNew, outerRadiusPixels);\n    if (inCircleNew == 0.0) {\n      discard;\n    }\n  `,\n};\n\nexport default {\n  name: 'selection',\n  vs,\n  inject,\n};\n","/* eslint-disable no-underscore-dangle */\n/* eslint-disable import/no-extraneous-dependencies */\nimport GL from '@luma.gl/constants';\nimport { LayerExtension } from '@deck.gl/core';\nimport module from './shader-module';\n\nexport default class SelectionExtension extends LayerExtension {\n  // eslint-disable-next-line class-methods-use-this\n  getShaders() {\n    return {\n      modules: [module],\n    };\n  }\n\n  initializeState(context, extension) {\n    const attributeManager = this.getAttributeManager();\n    if (attributeManager) {\n      attributeManager.add({\n        isSelected: {\n          type: GL.FLOAT,\n          size: 1,\n          transition: true,\n          accessor: 'getCellIsSelected',\n          defaultValue: 1,\n          // PolygonLayer needs not-intsanced attribute but\n          // ScatterplotLayer needs instanced.\n          divisor: Number(extension.opts.instanced),\n        },\n      });\n    }\n  }\n}\n\nSelectionExtension.extensionName = 'SelectionExtension';\n","import SelectionExtension from './SelectionExtension';\n\nexport default SelectionExtension;\n","export { default as ScaledExpressionExtension } from './ScaledExpressionExtension';\nexport { default as SelectionExtension } from './SelectionExtension';\n","module.exports = require(\"@material-ui/core/Box\");","module.exports = require(\"@material-ui/core/Table\");","module.exports = require(\"@material-ui/core/TableBody\");","module.exports = require(\"@material-ui/core/TableContainer\");","import { DTYPE_VALUES } from '@hms-dbmi/viv';\n\nfunction getDomains() {\n  const domains = {};\n  const needMin = ['Int8', 'Int16', 'Int32'];\n  Object.keys(DTYPE_VALUES).forEach((dtype) => {\n    const { max } = DTYPE_VALUES[dtype];\n    const min = needMin.includes(dtype) ? -(max + 1) : 0;\n    domains[dtype] = [min, max];\n  });\n  return domains;\n}\n\nexport const DOMAINS = getDomains();\n","module.exports = require(\"@material-ui/core/Typography\");","import { quadtree } from 'd3-quadtree';\n\n/**\n * Create a d3-quadtree object for cells data points.\n * @param {array} cellsEntries Array of [cellId, cell] tuples,\n * resulting from running Object.entries on the cells object.\n * @param {function} getCellCoords Given a cell object, return the\n * spatial/scatterplot coordinates [x, y].\n * @returns {object} Quadtree instance.\n */\nexport function createCellsQuadTree(cellsEntries, getCellCoords) {\n  // Use the cellsEntries variable since it is already\n  // an array, converted by Object.entries().\n  // Only use cellsEntries in quadtree calculation if there is\n  // centroid data in the cells (i.e not just ids).\n  // eslint-disable-next-line no-unused-vars\n  if (!cellsEntries || !cellsEntries.length || !getCellCoords(cellsEntries[0][1])) {\n    // Abort if the cells data is not yet available.\n    return null;\n  }\n  const tree = quadtree()\n    .x(d => getCellCoords(d[1])[0])\n    .y(d => getCellCoords(d[1])[1])\n    .addAll(cellsEntries);\n  return tree;\n}\n","import React from 'react';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\nimport { capitalize } from '../../utils';\nimport OptionSelect from './OptionSelect';\nimport { useStyles } from './styles';\n\nexport default function CellColorEncodingOption(props) {\n  const {\n    observationsLabel,\n    cellColorEncoding,\n    setCellColorEncoding,\n  } = props;\n\n  const classes = useStyles();\n\n  const observationsLabelNice = capitalize(observationsLabel);\n\n  function handleColorEncodingChange(event) {\n    setCellColorEncoding(event.target.value);\n  }\n\n  return (\n    <TableRow>\n      <TableCell className={classes.labelCell} htmlFor=\"cell-color-encoding-select\">\n        {observationsLabelNice} Color Encoding\n      </TableCell>\n      <TableCell className={classes.inputCell}>\n        <OptionSelect\n          className={classes.select}\n          value={cellColorEncoding}\n          onChange={handleColorEncodingChange}\n          inputProps={{\n            id: 'cell-color-encoding-select',\n          }}\n        >\n          <option value=\"cellSetSelection\">Cell Sets</option>\n          <option value=\"geneSelection\">Gene Expression</option>\n        </OptionSelect>\n      </TableCell>\n    </TableRow>\n  );\n}\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  fill: \"none\",\n  d: \"M0 0h24v24H0V0z\"\n});\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M21 3L3 10.53v.98l6.84 2.65L12.48 21h.98L21 3z\"\n});\n\nfunction SvgNearMe(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2, _ref3);\n}\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgNearMe, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/near_me.2a308adc.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"       M19 19h2v2h-2v-2zm0-2h2v-2h-2v2z       M3 13h2v-2H3v2zm0 4h2v-2H3v2z       m0-8h2V7H3v2zm0-4h2V3H3v2z       m4 0h2V3H7v2zm8 16h2v-2h-2v2z       m-4 0h2v-2h-2v2z       m4 0h2v-2h-2v2z       m-8 0h2v-2H7v2z       m-4 0h2v-2H3v2z       M11 5h2v-2h-2v2z       M15 5h2v-2h-2v2z       M19 5h2v-2h-2v2z       M19 9h2v-2h-2v2z       M19 13h2v-2h-2v2z     \"\n});\n\nfunction SvgSelectionRectangle(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2);\n}\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgSelectionRectangle, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/selection_rectangle.aa477261.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgSelectionLasso(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"g\", {\n    transform: \"translate(0,3)\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    style: {\n      strokeWidth: 0.343565\n    },\n    d: \"M 23.942314,4.6958443 C 23.446206,1.8868581 19.727461,0 14.687364,0 13.437819,0 12.150138,0.11543779 10.859708,0.34287772 4.1629423,1.5250844 -0.58168816,5.2884937 0.05768601,8.911385 c 0.25355086,1.439193 1.35605049,2.63583 3.04638949,3.461072 -0.2569865,0.387198 -0.4074679,0.826617 -0.4074679,1.29524 0,1.337498 1.1863293,2.457176 2.7639791,2.728248 l -1.3615475,2.333149 c -0.1576963,0.271073 -0.066308,0.61876 0.2047647,0.776457 0.090014,0.05291 0.1886171,0.07799 0.2858459,0.07799 0.1951448,0 0.3851362,-0.100665 0.4912977,-0.281723 l 1.6803757,-2.88148 C 8.41868,16.20561 9.6895264,15.063601 9.6998333,13.683844 c 6.872e-4,-0.0055 0.00137,-0.01065 0.00137,-0.01615 0,-0.02336 -0.00344,-0.04569 -0.00481,-0.06837 1.1292977,-0.0213 2.2847067,-0.130211 3.4435507,-0.334975 6.69711,-1.181863 11.44174,-4.9456164 10.802366,-8.5685077 z M 3.83312,13.667353 c 0,-0.30749 0.1281497,-0.59849 0.3470005,-0.848261 0.1219655,0.04295 0.2456489,0.08383 0.3717372,0.123339 l 1.2234344,2.352045 C 4.6865351,15.149835 3.83312,14.46408 3.83312,13.667353 Z M 7.0141869,15.216144 6.0223152,13.309702 5.4008064,12.114097 c 0.121622,-0.03161 0.2477103,-0.05634 0.3772342,-0.07387 0.1367388,-0.0189 0.2772568,-0.02886 0.420867,-0.02886 0.5067581,0 0.980534,0.11956 1.3701366,0.317454 0.5696305,0.289968 0.9554538,0.750345 0.9904974,1.262944 0.00137,0.02542 0.0055,0.05016 0.0055,0.07593 0,0.698124 -0.6562089,1.310356 -1.5508518,1.548447 z m 5.9185921,-3.126441 c -1.217251,0.214728 -2.429691,0.323982 -3.6060571,0.324669 -0.5765018,-0.911821 -1.7614569,-1.53917 -3.1278143,-1.53917 -0.4717146,0 -0.921441,0.07593 -1.332001,0.211292 -0.3061162,0.100665 -0.5878394,0.237403 -0.8427645,0.39991 C 2.4598914,10.828133 1.4360682,9.8579062 1.2319907,8.7035283 0.72660678,5.8381974 5.2307418,2.5475333 11.067221,1.5175259 c 1.222061,-0.2161023 2.439998,-0.3246688 3.620143,-0.3246688 4.371863,0 7.694479,1.5250844 8.080645,3.7101568 0.505041,2.8653309 -3.998751,6.1566821 -9.83523,7.1866891 z\",\n    id: \"path10\"\n  })));\n}\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgSelectionLasso, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/selection_lasso.00e80a33.svg\";\nexport { ForwardRef as ReactComponent };","import React from 'react';\nimport { SELECTION_TYPE } from 'nebula.gl';\nimport { ReactComponent as PointerIconSVG } from '../../assets/tools/near_me.svg';\nimport { ReactComponent as SelectRectangleIconSVG } from '../../assets/tools/selection_rectangle.svg';\nimport { ReactComponent as SelectLassoIconSVG } from '../../assets/tools/selection_lasso.svg';\n\nexport function IconButton(props) {\n  const {\n    alt, onClick, isActive, children,\n  } = props;\n  const inactive = 'btn btn-outline-secondary mr-2 icon';\n  const active = `${inactive} active`;\n  return (\n    <button\n      className={isActive ? active : inactive}\n      onClick={onClick}\n      type=\"button\"\n      title={alt}\n    >\n      {children}\n    </button>\n  );\n}\n\nexport default function ToolMenu(props) {\n  const {\n    setActiveTool,\n    activeTool,\n    visibleTools = { pan: true, selectRectangle: true, selectLasso: true },\n  } = props;\n  return (\n    <div className=\"tool\">\n      {visibleTools.pan && (\n      <IconButton\n        alt=\"pointer tool\"\n        onClick={() => setActiveTool(null)}\n        isActive={activeTool === null}\n      ><PointerIconSVG />\n      </IconButton>\n      )}\n      {visibleTools.selectRectangle ? (\n        <IconButton\n          alt=\"select rectangle\"\n          onClick={() => setActiveTool(SELECTION_TYPE.RECTANGLE)}\n          isActive={activeTool === SELECTION_TYPE.RECTANGLE}\n        ><SelectRectangleIconSVG />\n        </IconButton>\n      ) : null}\n      {visibleTools.selectLasso ? (\n        <IconButton\n          alt=\"select lasso\"\n          onClick={() => setActiveTool(SELECTION_TYPE.POLYGON)}\n          isActive={activeTool === SELECTION_TYPE.POLYGON}\n        ><SelectLassoIconSVG />\n        </IconButton>\n      ) : null}\n    </div>\n  );\n}\n","export const getCursorWithTool = () => 'crosshair';\nexport const getCursor = interactionState => (interactionState.isDragging\n  ? 'grabbing' : 'default'\n);\n","import React, { PureComponent } from 'react';\nimport DeckGL, { OrthographicView, OrbitView } from 'deck.gl';\nimport ToolMenu from './ToolMenu';\nimport { DEFAULT_GL_OPTIONS } from '../utils';\nimport { getCursor, getCursorWithTool } from './cursor';\n\n/**\n * Abstract class component intended to be inherited by\n * the Spatial and Scatterplot class components.\n * Contains a common constructor, common DeckGL callbacks,\n * and common render function.\n */\nexport default class AbstractSpatialOrScatterplot extends PureComponent {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      gl: null,\n      tool: null,\n    };\n\n    this.viewport = null;\n\n    this.onViewStateChange = this.onViewStateChange.bind(this);\n    this.onInitializeViewInfo = this.onInitializeViewInfo.bind(this);\n    this.onWebGLInitialized = this.onWebGLInitialized.bind(this);\n    this.onToolChange = this.onToolChange.bind(this);\n    this.onHover = this.onHover.bind(this);\n  }\n\n  /**\n   * Called by DeckGL upon a viewState change,\n   * for example zoom or pan interaction.\n   * Emit the new viewState to the `setViewState`\n   * handler prop.\n   * @param {object} params\n   * @param {object} params.viewState The next deck.gl viewState.\n   */\n  onViewStateChange({ viewState: nextViewState }) {\n    const {\n      setViewState, viewState, layers, spatialAxisFixed,\n    } = this.props;\n    const use3d = layers?.some(l => l.use3d);\n    setViewState({\n      ...nextViewState,\n      // If the axis is fixed, just use the current target in state i.e don't change target.\n      target: spatialAxisFixed && use3d ? viewState.target : nextViewState.target,\n    });\n  }\n\n  /**\n   * Called by DeckGL upon viewport\n   * initialization.\n   * @param {object} viewState\n   * @param {object} viewState.viewport\n   */\n  onInitializeViewInfo({ viewport }) {\n    this.viewport = viewport;\n  }\n\n  /**\n   * Called by DeckGL upon initialization,\n   * helps to understand when to pass layers\n   * to the DeckGL component.\n   * @param {object} gl The WebGL context object.\n   */\n  onWebGLInitialized(gl) {\n    this.setState({ gl });\n  }\n\n  /**\n   * Called by the ToolMenu buttons.\n   * Emits the new tool value to the\n   * `onToolChange` prop.\n   * @param {string} tool Name of tool.\n   */\n  onToolChange(tool) {\n    const { onToolChange: onToolChangeProp } = this.props;\n    this.setState({ tool });\n    if (onToolChangeProp) {\n      onToolChangeProp(tool);\n    }\n  }\n\n  /**\n   * Create the DeckGL layers.\n   * @returns {object[]} Array of\n   * DeckGL layer objects.\n   * Intended to be overriden by descendants.\n   */\n  // eslint-disable-next-line class-methods-use-this\n  getLayers() {\n    return [];\n  }\n\n  // eslint-disable-next-line consistent-return\n  onHover(info) {\n    const {\n      coordinate, sourceLayer: layer, tile,\n    } = info;\n    const {\n      setCellHighlight, cellHighlight, setComponentHover, layers,\n    } = this.props;\n    const hasBitmask = (layers || []).some(l => l.type === 'bitmask');\n    if (!setCellHighlight || !tile) {\n      return null;\n    }\n    if (!layer || !coordinate) {\n      if (cellHighlight && hasBitmask) {\n        setCellHighlight(null);\n      }\n      return null;\n    }\n    const { content, bbox, z } = tile;\n    if (!content) {\n      if (cellHighlight && hasBitmask) {\n        setCellHighlight(null);\n      }\n      return null;\n    }\n    const { data, width, height } = content;\n    const {\n      left, right, top, bottom,\n    } = bbox;\n    const bounds = [\n      left,\n      data.height < layer.tileSize ? height : bottom,\n      data.width < layer.tileSize ? width : right,\n      top,\n    ];\n    if (!data) {\n      if (cellHighlight && hasBitmask) {\n        setCellHighlight(null);\n      }\n      return null;\n    }\n    // Tiled layer needs a custom layerZoomScale.\n    if (layer.id.includes('bitmask')) {\n      // The zoomed out layer needs to use the fixed zoom at which it is rendered.\n      const layerZoomScale = Math.max(\n        1,\n        2 ** Math.round(-z),\n      );\n      const dataCoords = [\n        Math.floor((coordinate[0] - bounds[0]) / layerZoomScale),\n        Math.floor((coordinate[1] - bounds[3]) / layerZoomScale),\n      ];\n      const coords = dataCoords[1] * width + dataCoords[0];\n      const hoverData = data.map(d => d[coords]);\n      const cellId = hoverData.find(i => i > 0);\n      if (cellId !== Number(cellHighlight)) {\n        if (setComponentHover) {\n          setComponentHover();\n        }\n        // eslint-disable-next-line no-unused-expressions\n        setCellHighlight(cellId ? String(cellId) : null);\n      }\n    }\n  }\n\n  /**\n   * Emits a function to project from the\n   * cell ID space to the scatterplot or\n   * spatial coordinate space, via the\n   * `updateViewInfo` prop.\n   */\n  viewInfoDidUpdate(getCellCoords) {\n    const { updateViewInfo, cells, uuid } = this.props;\n    const { viewport } = this;\n    if (updateViewInfo && viewport) {\n      updateViewInfo({\n        uuid,\n        project: (cellId) => {\n          const cell = cells[cellId];\n          try {\n            const [positionX, positionY] = getCellCoords(cell);\n            return viewport.project([positionX, positionY]);\n          } catch (e) {\n            return [null, null];\n          }\n        },\n      });\n    }\n  }\n\n  /**\n   * Intended to be overriden by descendants.\n   */\n  componentDidUpdate() {\n\n  }\n\n  /**\n   * A common render function for both Spatial\n   * and Scatterplot components.\n   */\n  render() {\n    const {\n      deckRef, viewState, uuid, layers: layerProps,\n    } = this.props;\n    const { gl, tool } = this.state;\n    const layers = this.getLayers();\n    const use3d = (layerProps || []).some(l => l.use3d);\n\n    const showCellSelectionTools = this.cellsLayer !== null\n      || (this.cellsEntries.length && this.cellsEntries[0][1].xy);\n    const showPanTool = this.cellsLayer !== null || layerProps.findIndex(l => l.type === 'bitmask' || l.type === 'raster') >= 0;\n    // For large datasets or ray casting, the visual quality takes only a small\n    // hit in exchange for much better performance by setting this to false:\n    // https://deck.gl/docs/api-reference/core/deck#usedevicepixels\n    const useDevicePixels = this.cellsEntries.length < 100000 && !use3d;\n\n    return (\n      <>\n        <ToolMenu\n          activeTool={tool}\n          setActiveTool={this.onToolChange}\n          visibleTools={{\n            pan: showPanTool,\n            selectRectangle: showCellSelectionTools,\n            selectLasso: showCellSelectionTools,\n          }}\n        />\n        <DeckGL\n          id={`deckgl-overlay-${uuid}`}\n          ref={deckRef}\n          views={[\n            use3d\n              ? new OrbitView({ id: 'orbit', controller: true, orbitAxis: 'Y' })\n              : new OrthographicView({\n                id: 'ortho',\n              }),\n          ]} // id is a fix for https://github.com/uber/deck.gl/issues/3259\n          layers={\n            gl && viewState.target.slice(0, 2).every(i => typeof i === 'number')\n              ? layers\n              : []\n          }\n          glOptions={DEFAULT_GL_OPTIONS}\n          onWebGLInitialized={this.onWebGLInitialized}\n          onViewStateChange={this.onViewStateChange}\n          viewState={viewState}\n          useDevicePixels={useDevicePixels}\n          controller={tool ? { dragPan: false } : true}\n          getCursor={tool ? getCursorWithTool : getCursor}\n          onHover={this.onHover}\n        >\n          {this.onInitializeViewInfo}\n        </DeckGL>\n      </>\n    );\n  }\n}\n","/* eslint-disable import/no-extraneous-dependencies */\n/* eslint-disable no-underscore-dangle */\n// File adopted from nebula.gl's SelectionLayer\n// https://github.com/uber/nebula.gl/blob/8e9c2ec8d7cf4ca7050909ed826eb847d5e2cd9c/modules/layers/src/layers/selection-layer.js\nimport { CompositeLayer } from 'deck.gl';\nimport { polygon as turfPolygon, point as turfPoint } from '@turf/helpers';\nimport booleanWithin from '@turf/boolean-within';\nimport booleanContains from '@turf/boolean-contains';\nimport booleanOverlap from '@turf/boolean-overlap';\nimport booleanPointInPolygon from '@turf/boolean-point-in-polygon';\nimport { ScatterplotLayer } from '@deck.gl/layers';\nimport { SELECTION_TYPE } from 'nebula.gl';\nimport { EditableGeoJsonLayer } from '@nebula.gl/layers';\nimport { DrawRectangleMode, DrawPolygonByDraggingMode, ViewMode } from '@nebula.gl/edit-modes';\n\nconst EDIT_TYPE_ADD = 'addFeature';\nconst EDIT_TYPE_CLEAR = 'clearFeatures';\n\n// Customize the click handlers for the rectangle and polygon tools,\n// so that clicking triggers the `onEdit` callback.\nclass ClickableDrawRectangleMode extends DrawRectangleMode {\n  // eslint-disable-next-line class-methods-use-this\n  handleClick(event, props) {\n    props.onEdit({ editType: EDIT_TYPE_CLEAR });\n  }\n}\n\nclass ClickableDrawPolygonByDraggingMode extends DrawPolygonByDraggingMode {\n  // eslint-disable-next-line class-methods-use-this\n  handleClick(event, props) {\n    props.onEdit({ editType: EDIT_TYPE_CLEAR });\n  }\n}\n\nconst MODE_MAP = {\n  [SELECTION_TYPE.RECTANGLE]: ClickableDrawRectangleMode,\n  [SELECTION_TYPE.POLYGON]: ClickableDrawPolygonByDraggingMode,\n};\n\nconst defaultProps = {\n  selectionType: SELECTION_TYPE.RECTANGLE,\n  layerIds: [],\n  onSelect: () => {},\n};\n\nconst EMPTY_DATA = {\n  type: 'FeatureCollection',\n  features: [],\n};\n\nconst LAYER_ID_GEOJSON = 'selection-geojson';\n\nconst PASS_THROUGH_PROPS = [\n  'lineWidthScale',\n  'lineWidthMinPixels',\n  'lineWidthMaxPixels',\n  'lineWidthUnits',\n  'lineJointRounded',\n  'lineMiterLimit',\n  'pointRadiusScale',\n  'pointRadiusMinPixels',\n  'pointRadiusMaxPixels',\n  'lineDashJustified',\n  'getLineColor',\n  'getFillColor',\n  'getRadius',\n  'getLineWidth',\n  'getLineDashArray',\n  'getTentativeLineDashArray',\n  'getTentativeLineColor',\n  'getTentativeFillColor',\n  'getTentativeLineWidth',\n  'editHandlePointRadiusScale',\n  'editHandlePointRadiusMinPixels',\n  'editHandlePointRadiusMaxPixels',\n  'getEditHandlePointColor',\n  'getEditHandlePointRadius',\n  'modeHandlers',\n];\n\nexport default class SelectionLayer extends CompositeLayer {\n  _selectPolygonObjects(coordinates) {\n    const {\n      onSelect,\n      getCellCoords,\n      cellsQuadTree,\n      flipY,\n    } = this.props;\n\n    const flippedCoordinates = (flipY\n      ? coordinates.map(poly => poly.map(p => ([p[0], -p[1]])))\n      : coordinates);\n\n    // Convert the selection to a turf polygon object.\n    const selectedPolygon = turfPolygon(flippedCoordinates);\n\n    // Create an array to store the results.\n    const pickingInfos = [];\n\n    // quadtree.visit() takes a callback that returns a boolean:\n    // If true returned, then the children of the node are _not_ visited.\n    // If false returned, then the children of the node are visited.\n    // Reference: https://github.com/d3/d3-quadtree#quadtree_visit\n    cellsQuadTree.visit((node, x0, y0, x1, y1) => {\n      const nodePoints = [[[x0, y0], [x1, y0], [x1, y1], [x0, y1], [x0, y0]]];\n      const nodePolygon = turfPolygon(nodePoints);\n\n      const nodePolygonContainsSelectedPolygon = booleanContains(nodePolygon, selectedPolygon);\n      const nodePolygonWithinSelectedPolygon = booleanWithin(nodePolygon, selectedPolygon);\n      const nodePolygonOverlapsSelectedPolgyon = booleanOverlap(nodePolygon, selectedPolygon);\n\n      if (!nodePolygonContainsSelectedPolygon\n        && !nodePolygonWithinSelectedPolygon\n        && !nodePolygonOverlapsSelectedPolgyon) {\n        // We are not interested in anything below this node,\n        // so return true because we are done with this node.\n        return true;\n      }\n\n      // This node made it past the above return statement, so it must either\n      // contain, be within, or overlap with the selected polygon.\n\n      // Check if this is a leaf node.\n      if (node.data\n        && booleanPointInPolygon(turfPoint(getCellCoords(node.data[1])), selectedPolygon)) {\n        // This node has data, so it is a leaf node representing one data point,\n        // and we have verified that the point is in the selected polygon.\n        pickingInfos.push(node.data);\n      }\n\n      // Return false because we are not done.\n      // We want to visit the children of this node.\n      return false;\n    });\n\n    onSelect({ pickingInfos });\n  }\n\n  renderLayers() {\n    const { onSelect } = this.props;\n    const mode = MODE_MAP[this.props.selectionType] || ViewMode;\n\n    const inheritedProps = {};\n    PASS_THROUGH_PROPS.forEach((p) => {\n      if (this.props[p] !== undefined) inheritedProps[p] = this.props[p];\n    });\n    const layers = [\n      new EditableGeoJsonLayer(\n        this.getSubLayerProps({\n          id: LAYER_ID_GEOJSON,\n          pickable: true,\n          mode,\n          modeConfig: {\n            dragToDraw: true,\n          },\n          selectedFeatureIndexes: [],\n          data: EMPTY_DATA,\n          onEdit: ({ updatedData, editType }) => {\n            if (editType === EDIT_TYPE_ADD) {\n              const { coordinates } = updatedData.features[0].geometry;\n              this._selectPolygonObjects(coordinates);\n            } else if (editType === EDIT_TYPE_CLEAR) {\n              // We want to select an empty array to clear any previous selection.\n              onSelect({ pickingInfos: [] });\n            }\n          },\n          _subLayerProps: {\n            guides: {\n              pointType: 'circle',\n              _subLayerProps: {\n                'points-circle': {\n                  // Styling for editHandles goes here.\n                  // Reference: https://github.com/uber/nebula.gl/issues/618#issuecomment-898466319\n                  type: ScatterplotLayer,\n                  radiusScale: 1,\n                  stroked: true,\n                  getLineWidth: 1,\n                  radiusMinPixels: 1,\n                  radiusMaxPixels: 3,\n                  getRadius: 2,\n                },\n              },\n            },\n          },\n          ...inheritedProps,\n        }),\n      ),\n    ];\n\n    return layers;\n  }\n}\n\nSelectionLayer.layerName = 'SelectionLayer';\nSelectionLayer.defaultProps = defaultProps;\n","import { COORDINATE_SYSTEM } from '@deck.gl/core'; // eslint-disable-line import/no-extraneous-dependencies\nimport { DataFilterExtension } from '@deck.gl/extensions'; // eslint-disable-line import/no-extraneous-dependencies\nimport SelectionLayer from './SelectionLayer';\n\n/**\n * Convert a DeckGL layer ID to a \"base\" layer ID for selection.\n * @param {string} layerId The layer ID to convert.\n * @returns {string} The base layer ID.\n */\nfunction getBaseLayerId(layerId) {\n  return `base-${layerId}`;\n}\n\n/**\n * Convert a DeckGL layer ID to a \"selected\" layer ID for selection.\n * @param {string} layerId The layer ID to convert.\n * @returns {string} The base layer ID.\n */\nfunction getSelectedLayerId(layerId) {\n  return `selected-${layerId}`;\n}\n\n/**\n * Construct DeckGL selection layers.\n * @param {string} tool\n * @param {number} zoom\n * @param {string} cellBaseLayerId\n * @param {function} getCellCoords\n * @param {function} updateCellsSelection\n * @returns {object[]} The array of DeckGL selection layers.\n */\nexport function getSelectionLayers(\n  tool,\n  zoom,\n  layerId,\n  getCellCoords,\n  updateCellsSelection,\n  cellsQuadTree,\n  flipY = false,\n) {\n  if (!tool) {\n    return [];\n  }\n\n  const cellBaseLayerId = getBaseLayerId(layerId);\n  const editHandlePointRadius = 5 / (zoom + 16);\n\n  return [new SelectionLayer({\n    id: 'selection',\n    flipY,\n    cellsQuadTree,\n    getCellCoords,\n    coordinateSystem: COORDINATE_SYSTEM.CARTESIAN,\n    selectionType: tool,\n    onSelect: ({ pickingInfos }) => {\n      const cellIds = pickingInfos.map(cellObj => cellObj[0]);\n      if (updateCellsSelection) {\n        updateCellsSelection(cellIds);\n      }\n    },\n    layerIds: [cellBaseLayerId],\n    getTentativeFillColor: () => [255, 255, 255, 95],\n    getTentativeLineColor: () => [143, 143, 143, 255],\n    getTentativeLineDashArray: () => [7, 4],\n    lineWidthMinPixels: 2,\n    lineWidthMaxPixels: 2,\n    getEditHandlePointColor: () => [0xff, 0xff, 0xff, 0xff],\n    getEditHandlePointRadius: () => editHandlePointRadius,\n    editHandlePointRadiusScale: 1,\n    editHandlePointRadiusMinPixels: editHandlePointRadius,\n    editHandlePointRadiusMaxPixels: 2 * editHandlePointRadius,\n  })];\n}\n\n/**\n * Get deck.gl layer props for selection overlays.\n * @param {object} props\n * @returns {object} Object with two properties,\n * overlay: overlayProps, base: baseProps,\n * where the values are deck.gl layer props.\n */\nexport function overlayBaseProps(props) {\n  const {\n    id, getColor, data, isSelected, ...rest\n  } = props;\n  return {\n    overlay: {\n      id: getSelectedLayerId(id),\n      getFillColor: getColor,\n      getLineColor: getColor,\n      data,\n      getFilterValue: isSelected,\n      extensions: [new DataFilterExtension({ filterSize: 1 })],\n      filterRange: [1, 1],\n      ...rest,\n    },\n    base: {\n      id: getBaseLayerId(id),\n      getLineColor: getColor,\n      getFillColor: getColor,\n      // Alternatively: contrast outlines with solids:\n      // getLineColor: getColor,\n      // getFillColor: [255, 255, 255],\n      data: data.slice(),\n      ...rest,\n    },\n  };\n}\n","// Selection Layers\nexport { getSelectionLayers } from './selection-utils';\n\n// Heatmap Layers\nexport { default as HeatmapBitmapLayer } from './HeatmapBitmapLayer';\nexport { default as PixelatedBitmapLayer } from './PixelatedBitmapLayer';\nexport { default as HeatmapCompositeTextLayer } from './HeatmapCompositeTextLayer';\n","import clamp from 'lodash/clamp';\nimport range from 'lodash/range';\n\nimport {\n  AXIS_LABEL_TEXT_SIZE,\n  AXIS_MIN_SIZE,\n  AXIS_MAX_SIZE,\n} from '../../layers/heatmap-constants';\n\nexport function getGeneByCellTile(view, {\n  tileSize, tileI, tileJ, numCells, numGenes, cellOrdering, cells,\n}) {\n  const tileData = new Uint8Array(tileSize * tileSize);\n  let offset;\n  let value;\n  let cellI;\n  let geneI;\n  let sortedCellI;\n\n  const tileSizeRange = range(tileSize);\n\n  tileSizeRange.forEach((j) => {\n    // Need to iterate over cells in the outer loop.\n    cellI = (tileJ * tileSize) + j;\n    if (cellI < numCells) {\n      sortedCellI = cells.indexOf(cellOrdering[cellI]);\n      if (sortedCellI >= -1) {\n        tileSizeRange.forEach((i) => {\n          geneI = (tileI * tileSize) + i;\n          value = view[sortedCellI * numGenes + geneI];\n          offset = ((tileSize - i - 1) * tileSize + j);\n          tileData[offset] = value;\n        });\n      }\n    }\n  });\n  return tileData;\n}\n\nexport function getCellByGeneTile(view, {\n  tileSize, tileI, tileJ, numCells, numGenes, cellOrdering, cells,\n}) {\n  const tileData = new Uint8Array(tileSize * tileSize);\n  let offset;\n  let value;\n  let cellI;\n  let geneI;\n  let sortedCellI;\n\n  const tileSizeRange = range(tileSize);\n\n  tileSizeRange.forEach((i) => {\n    // Need to iterate over cells in the outer loop.\n    cellI = (tileI * tileSize) + i;\n    if (cellI < numCells) {\n      sortedCellI = cells.indexOf(cellOrdering[cellI]);\n      if (sortedCellI >= -1) {\n        tileSizeRange.forEach((j) => {\n          geneI = (tileJ * tileSize) + j;\n          if (geneI < numGenes) {\n            value = view[sortedCellI * numGenes + geneI];\n          } else {\n            value = 0;\n          }\n          offset = ((tileSize - i - 1) * tileSize + j);\n          tileData[offset] = value;\n        });\n      }\n    }\n  });\n\n  return tileData;\n}\n\n/**\n * Called before a layer is drawn to determine whether it should be rendered.\n * Reference: https://deck.gl/docs/api-reference/core/deck#layerfilter\n * @param {object} params A viewport, layer pair.\n * @param {object} params.layer The layer to check.\n * @param {object} params.viewport The viewport to check.\n * @returns {boolean} Should this layer be rendered in this viewport?\n */\nexport function layerFilter({ layer, viewport }) {\n  if (viewport.id === 'axisLeft') {\n    return layer.id.startsWith('axisLeft');\n  } if (viewport.id === 'axisTop') {\n    return layer.id.startsWith('axisTop');\n  } if (viewport.id === 'heatmap') {\n    return layer.id.startsWith('heatmap');\n  } if (viewport.id === 'colorsLeft') {\n    return layer.id.startsWith('colorsLeft');\n  } if (viewport.id === 'colorsTop') {\n    return layer.id.startsWith('colorsTop');\n  }\n  return false;\n}\n\n/**\n * Get the size of the left and top heatmap axes,\n * taking into account the maximum label string lengths.\n * @param {boolean} transpose Is the heatmap transposed?\n * @param {number} geneLabelMaxLength What is the maximum length gene label?\n * @param {number} cellLabelMaxLength What is the maximum length cell label?\n * @returns {number[]} [axisOffsetLeft, axisOffsetTop]\n */\nexport function getAxisSizes(transpose, geneLabelMaxLength, cellLabelMaxLength) {\n  const axisOffsetLeft = clamp(\n    (transpose ? geneLabelMaxLength : cellLabelMaxLength) * AXIS_LABEL_TEXT_SIZE,\n    AXIS_MIN_SIZE,\n    AXIS_MAX_SIZE,\n  );\n  const axisOffsetTop = clamp(\n    (transpose ? cellLabelMaxLength : geneLabelMaxLength) * AXIS_LABEL_TEXT_SIZE,\n    AXIS_MIN_SIZE,\n    AXIS_MAX_SIZE,\n  );\n  return [axisOffsetLeft, axisOffsetTop];\n}\n\n/**\n * Convert a mouse coordinate (x, y) to a heatmap coordinate (col index, row index).\n * @param {number} mouseX The mouse X of interest.\n * @param {number} mouseY The mouse Y of interest.\n * @param {object} param2 An object containing current sizes and scale factors.\n * @returns {number[]} [colI, rowI]\n */\nexport function mouseToHeatmapPosition(mouseX, mouseY, {\n  offsetLeft, offsetTop, targetX, targetY, scaleFactor, matrixWidth, matrixHeight, numRows, numCols,\n}) {\n  // TODO: use linear algebra\n  const viewMouseX = mouseX - offsetLeft;\n  const viewMouseY = mouseY - offsetTop;\n\n  if (viewMouseX < 0 || viewMouseY < 0) {\n    // The mouse is outside the heatmap.\n    return [null, null];\n  }\n\n  // Determine the rowI and colI values based on the current viewState.\n  const bboxTargetX = targetX * scaleFactor + matrixWidth * scaleFactor / 2;\n  const bboxTargetY = targetY * scaleFactor + matrixHeight * scaleFactor / 2;\n\n  const bboxLeft = bboxTargetX - matrixWidth / 2;\n  const bboxTop = bboxTargetY - matrixHeight / 2;\n\n  const zoomedOffsetLeft = bboxLeft / (matrixWidth * scaleFactor);\n  const zoomedOffsetTop = bboxTop / (matrixHeight * scaleFactor);\n\n  const zoomedViewMouseX = viewMouseX / (matrixWidth * scaleFactor);\n  const zoomedViewMouseY = viewMouseY / (matrixHeight * scaleFactor);\n\n  const zoomedMouseX = zoomedOffsetLeft + zoomedViewMouseX;\n  const zoomedMouseY = zoomedOffsetTop + zoomedViewMouseY;\n\n  const rowI = Math.floor(zoomedMouseY * numRows);\n  const colI = Math.floor(zoomedMouseX * numCols);\n  return [colI, rowI];\n}\n\n/**\n * Convert a heatmap coordinate (col index, row index) to a mouse coordinate (x, y).\n * @param {number} colI The column index of interest.\n * @param {number} rowI The row index of interest.\n * @param {object} param2 An object containing current sizes and scale factors.\n * @returns {number[]} [x, y]\n */\nexport function heatmapToMousePosition(colI, rowI, {\n  offsetLeft, offsetTop, targetX, targetY, scaleFactor, matrixWidth, matrixHeight, numRows, numCols,\n}) {\n  // TODO: use linear algebra\n  let zoomedMouseY = null;\n  let zoomedMouseX = null;\n\n  if (rowI !== null) {\n    const minY = -matrixHeight * scaleFactor / 2;\n    const maxY = matrixHeight * scaleFactor / 2;\n    const totalHeight = maxY - minY;\n\n    const minInViewY = (targetY * scaleFactor) - (matrixHeight / 2);\n    const maxInViewY = (targetY * scaleFactor) + (matrixHeight / 2);\n    const inViewHeight = maxInViewY - minInViewY;\n\n    const normalizedRowY = (rowI + 0.5) / numRows;\n    const globalRowY = minY + (normalizedRowY * totalHeight);\n\n    if (minInViewY <= globalRowY && globalRowY <= maxInViewY) {\n      zoomedMouseY = offsetTop + ((globalRowY - minInViewY) / inViewHeight) * matrixHeight;\n    }\n  }\n  if (colI !== null) {\n    const minX = -matrixWidth * scaleFactor / 2;\n    const maxX = matrixWidth * scaleFactor / 2;\n    const totalWidth = maxX - minX;\n\n    const minInViewX = (targetX * scaleFactor) - (matrixWidth / 2);\n    const maxInViewX = (targetX * scaleFactor) + (matrixWidth / 2);\n    const inViewWidth = maxInViewX - minInViewX;\n\n    const normalizedRowX = (colI + 0.5) / numCols;\n    const globalRowX = minX + (normalizedRowX * totalWidth);\n\n    if (minInViewX <= globalRowX && globalRowX <= maxInViewX) {\n      zoomedMouseX = offsetLeft + ((globalRowX - minInViewX) / inViewWidth) * matrixWidth;\n    }\n  }\n  return [zoomedMouseX, zoomedMouseY];\n}\n","// https://developer.mozilla.org/en-US/docs/Web/API/NavigatorConcurrentHardware/hardwareConcurrency\n// We need to give a different way of getting this for safari, so 4 is probably a safe bet\n// for parallel processing in the meantime.  More can't really hurt since they'll just block\n// each other and not the UI thread, which is the real benefit.\nconst defaultPoolSize = typeof navigator !== 'undefined' ? navigator.hardwareConcurrency || 4 : null;\n\n/**\n * Pool for workers to decode chunks of the images.\n * This is a line-for-line copy of GeoTIFFs old implementation: https://github.com/geotiffjs/geotiff.js/blob/v1.0.0-beta.6/src/pool.js\n */\nexport default class Pool {\n  /**\n   * @constructor\n   * @param {object} Worker The worker class to be used for processing.\n   */\n  constructor(Worker) {\n    this.workers = [];\n    this.idleWorkers = [];\n    this.waitQueue = [];\n    this.decoder = null;\n\n    // eslint-disable-next-line no-plusplus\n    for (let i = 0; i < defaultPoolSize; ++i) {\n      const w = new Worker();\n      this.workers.push(w);\n      this.idleWorkers.push(w);\n    }\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  async process() {\n    throw new Error('Pool needs to implement \"process\" method');\n  }\n\n  async waitForWorker() {\n    const idleWorker = this.idleWorkers.pop();\n    if (idleWorker) {\n      return idleWorker;\n    }\n    const waiter = {};\n    const promise = new Promise((resolve) => {\n      waiter.resolve = resolve;\n    });\n\n    this.waitQueue.push(waiter);\n    return promise;\n  }\n\n  async finishTask(currentWorker) {\n    const waiter = this.waitQueue.pop();\n    if (waiter) {\n      waiter.resolve(currentWorker);\n    } else {\n      this.idleWorkers.push(currentWorker);\n    }\n  }\n\n  destroy() {\n    // eslint-disable-next-line no-plusplus\n    for (let i = 0; i < this.workers.length; ++i) {\n      this.workers[i].terminate();\n    }\n  }\n}\n","import Worker from './heatmap.worker'; // eslint-disable-line import/no-unresolved\nimport Pool from '../../Pool';\n\n/**\n * Pool for workers to decode chunks of the images.\n * This is a line-for-line copy of GeoTIFFs old implementation: https://github.com/geotiffjs/geotiff.js/blob/v1.0.0-beta.6/src/pool.js\n */\nexport default class HeatmapPool extends Pool {\n  constructor() {\n    super(Worker);\n  }\n\n  /**\n   * Process each heatmap tile\n   * @param {object} params The arguments passed to the heatmap worker.\n   * @param {string} params.curr The current task uuid.\n   * @param {number} params.xTiles How many tiles required in the x direction?\n   * @param {number} params.yTiles How many tiles required in the y direction?\n   * @param {number} params.tileSize How many entries along each tile axis?\n   * @param {string[]} params.cellOrdering The current ordering of cells.\n   * @param {string[]} params.rows The name of each row (cell ID).\n   * Does not take transpose into account (always cells).\n   * @param {string[]} params.cols The name of each column (gene ID).\n   * Does not take transpose into account (always genes).\n   * @param {ArrayBuffer} params.data The array buffer.\n   * Need to transfer back to main thread when done.\n   * @param {boolean} params.transpose Is the heatmap transposed?\n   * @returns {array} [message, transfers]\n   * @returns {Promise.<ArrayBuffer>} the decoded result as a `Promise`\n   */\n  async process(args) {\n    const currentWorker = await this.waitForWorker();\n    return new Promise((resolve, reject) => {\n      currentWorker.onmessage = (event) => {\n        // this.workers.push(currentWorker);\n        this.finishTask(currentWorker);\n        resolve(event.data);\n      };\n      currentWorker.onerror = (error) => {\n        // this.workers.push(currentWorker);\n        this.finishTask(currentWorker);\n        reject(error);\n      };\n      currentWorker.postMessage(['getTile', args], [args.data]);\n    });\n  }\n}\n","import React, {\n  useRef, useState, useCallback, useMemo, useEffect, useReducer, forwardRef,\n} from 'react';\nimport uuidv4 from 'uuid/v4';\nimport DeckGL from 'deck.gl';\nimport { OrthographicView } from '@deck.gl/core'; // eslint-disable-line import/no-extraneous-dependencies\nimport range from 'lodash/range';\nimport clamp from 'lodash/clamp';\nimport isEqual from 'lodash/isEqual';\nimport { max } from 'd3-array';\nimport HeatmapCompositeTextLayer from '../../layers/HeatmapCompositeTextLayer';\nimport PixelatedBitmapLayer from '../../layers/PixelatedBitmapLayer';\nimport HeatmapBitmapLayer from '../../layers/HeatmapBitmapLayer';\nimport {\n  DEFAULT_GL_OPTIONS,\n  createDefaultUpdateCellsHover,\n  createDefaultUpdateGenesHover,\n  createDefaultUpdateViewInfo,\n  copyUint8Array,\n} from '../utils';\nimport {\n  layerFilter,\n  getAxisSizes,\n  mouseToHeatmapPosition,\n  heatmapToMousePosition,\n} from './utils';\nimport {\n  TILE_SIZE, MAX_ROW_AGG, MIN_ROW_AGG,\n  COLOR_BAR_SIZE,\n  AXIS_MARGIN,\n} from '../../layers/heatmap-constants';\nimport HeatmapWorkerPool from './HeatmapWorkerPool';\n/**\n * A heatmap component for cell x gene matrices.\n * @param {object} props\n * @param {string} props.uuid The uuid of this component,\n * used by tooltips to determine whether to render a tooltip or\n * a crosshair.\n * @param {string} props.theme The current theme name.\n * @param {object} props.initialViewState The initial viewState for\n * DeckGL.\n * @param {number} props.width The width of the canvas.\n * @param {number} props.height The height of the canvas.\n * @param {object} props.expressionMatrix An object { rows, cols, matrix },\n * where matrix is a flat Uint8Array, rows is a list of cell ID strings,\n * and cols is a list of gene ID strings.\n * @param {Map} props.cellColors Map of cell ID to color. Optional.\n * If defined, the key ordering is used to order the cell axis of the heatmap.\n * @param {function} props.clearPleaseWait The clear please wait callback,\n * called when the expression matrix has loaded (is not null).\n * @param {function} props.setCellHighlight Callback function called on\n * hover with the cell ID. Optional.\n * @param {function} props.setGeneHighlight Callback function called on\n * hover with the gene ID. Optional.\n * @param {function} props.updateViewInfo Callback function that gets called with an\n * object { uuid, project() } where project is a function that maps (cellId, geneId)\n * to canvas (x,y) coordinates. Used to show tooltips. Optional.\n * @param {boolean} props.transpose By default, false.\n * @param {string} props.variablesTitle By default, 'Genes'.\n * @param {string} props.observationsTitle By default, 'Cells'.\n * @param {string} props.colormap The name of the colormap function to use.\n * @param {array} props.colormapRange A tuple [lower, upper] to adjust the color scale.\n * @param {function} props.setColormapRange The setter function for colormapRange.\n */\nconst Heatmap = forwardRef((props, deckRef) => {\n  const {\n    uuid,\n    theme,\n    viewState: rawViewState,\n    setViewState,\n    width: viewWidth,\n    height: viewHeight,\n    expressionMatrix: expression,\n    cellColors,\n    colormap,\n    colormapRange,\n    clearPleaseWait,\n    setComponentHover,\n    setCellHighlight = createDefaultUpdateCellsHover('Heatmap'),\n    setGeneHighlight = createDefaultUpdateGenesHover('Heatmap'),\n    updateViewInfo = createDefaultUpdateViewInfo('Heatmap'),\n    setIsRendering = () => {},\n    transpose = false,\n    variablesTitle = 'Genes',\n    observationsTitle = 'Cells',\n  } = props;\n\n  const viewState = {\n    ...rawViewState,\n    target: (transpose ? [rawViewState.target[1], rawViewState.target[0]] : rawViewState.target),\n    minZoom: 0,\n  };\n\n  const axisLeftTitle = (transpose ? variablesTitle : observationsTitle);\n  const axisTopTitle = (transpose ? observationsTitle : variablesTitle);\n\n  const workerPool = useMemo(() => new HeatmapWorkerPool(), []);\n\n  useEffect(() => {\n    if (clearPleaseWait && expression) {\n      clearPleaseWait('expression-matrix');\n    }\n  }, [clearPleaseWait, expression]);\n\n  const tilesRef = useRef();\n  const dataRef = useRef();\n  const [axisLeftLabels, setAxisLeftLabels] = useState([]);\n  const [axisTopLabels, setAxisTopLabels] = useState([]);\n\n\n  // Since we are storing the tile data in a ref,\n  // and updating it asynchronously when the worker finishes,\n  // we need to tie it to a piece of state through this iteration value.\n  const [tileIteration, incTileIteration] = useReducer(i => i + 1, 0);\n\n  // We need to keep a backlog of the tasks for the worker thread,\n  // since the array buffer can only be held by one thread at a time.\n  const [backlog, setBacklog] = useState([]);\n\n  // Store a reference to the matrix Uint8Array in the dataRef,\n  // since we need to access its array buffer to transfer\n  // it back and forth from the worker thread.\n  useEffect(() => {\n    // Store the expression matrix Uint8Array in the dataRef.\n    if (expression && expression.matrix) {\n      dataRef.current = copyUint8Array(expression.matrix);\n    }\n  }, [dataRef, expression]);\n\n  // Check if the ordering of axis labels needs to be changed,\n  // for example if the cells \"selected\" (technically just colored)\n  // have changed.\n  useEffect(() => {\n    if (!expression) {\n      return;\n    }\n    const newCellOrdering = (!cellColors || cellColors.size === 0\n      ? expression.rows\n      : Array.from(cellColors.keys())\n    );\n    const oldCellOrdering = (transpose ? axisTopLabels : axisLeftLabels);\n\n    if (!isEqual(oldCellOrdering, newCellOrdering)) {\n      if (transpose) {\n        setAxisTopLabels(newCellOrdering);\n      } else {\n        setAxisLeftLabels(newCellOrdering);\n      }\n    }\n  }, [expression, cellColors, axisTopLabels, axisLeftLabels, transpose]);\n\n  // Set the genes ordering.\n  useEffect(() => {\n    if (!expression) {\n      return;\n    }\n    if (transpose) {\n      setAxisLeftLabels(expression.cols);\n    } else {\n      setAxisTopLabels(expression.cols);\n    }\n  }, [expression, transpose]);\n\n  const [cellLabelMaxLength, geneLabelMaxLength] = useMemo(() => {\n    if (!expression) {\n      return [0, 0];\n    }\n    return [\n      max(expression.rows.map(cellId => cellId.length)),\n      max(expression.cols.map(geneId => geneId.length)),\n    ];\n  }, [expression]);\n\n  const width = axisTopLabels.length;\n  const height = axisLeftLabels.length;\n\n  const [axisOffsetLeft, axisOffsetTop] = getAxisSizes(\n    transpose, geneLabelMaxLength, cellLabelMaxLength,\n  );\n\n  const offsetTop = axisOffsetTop + COLOR_BAR_SIZE;\n  const offsetLeft = axisOffsetLeft + COLOR_BAR_SIZE;\n\n  const matrixWidth = viewWidth - offsetLeft;\n  const matrixHeight = viewHeight - offsetTop;\n\n  const matrixLeft = -matrixWidth / 2;\n  const matrixRight = matrixWidth / 2;\n  const matrixTop = -matrixHeight / 2;\n  const matrixBottom = matrixHeight / 2;\n\n  const xTiles = Math.ceil(width / TILE_SIZE);\n  const yTiles = Math.ceil(height / TILE_SIZE);\n\n  const widthRatio = 1 - (TILE_SIZE - (width % TILE_SIZE)) / (xTiles * TILE_SIZE);\n  const heightRatio = 1 - (TILE_SIZE - (height % TILE_SIZE)) / (yTiles * TILE_SIZE);\n\n  const tileWidth = (matrixWidth / widthRatio) / (xTiles);\n  const tileHeight = (matrixHeight / heightRatio) / (yTiles);\n\n  const scaleFactor = 2 ** viewState.zoom;\n  const cellHeight = (matrixHeight * scaleFactor) / height;\n  const cellWidth = (matrixWidth * scaleFactor) / width;\n\n  // Get power of 2 between 1 and 16,\n  // for number of cells to aggregate together in each direction.\n  const aggSizeX = clamp(2 ** Math.ceil(Math.log2(1 / cellWidth)), MIN_ROW_AGG, MAX_ROW_AGG);\n  const aggSizeY = clamp(2 ** Math.ceil(Math.log2(1 / cellHeight)), MIN_ROW_AGG, MAX_ROW_AGG);\n\n  const [targetX, targetY] = viewState.target;\n\n  // Emit the viewInfo object on viewState updates\n  // (used by tooltips / crosshair elements).\n  useEffect(() => {\n    updateViewInfo({\n      uuid,\n      project: (cellId, geneId) => {\n        const colI = transpose ? axisTopLabels.indexOf(cellId) : axisTopLabels.indexOf(geneId);\n        const rowI = transpose ? axisLeftLabels.indexOf(geneId) : axisLeftLabels.indexOf(cellId);\n        return heatmapToMousePosition(\n          colI, rowI, {\n            offsetLeft,\n            offsetTop,\n            targetX: viewState.target[0],\n            targetY: viewState.target[1],\n            scaleFactor,\n            matrixWidth,\n            matrixHeight,\n            numRows: height,\n            numCols: width,\n          },\n        );\n      },\n    });\n  }, [uuid, updateViewInfo, transpose, axisTopLabels, axisLeftLabels, offsetLeft,\n    offsetTop, viewState, scaleFactor, matrixWidth, matrixHeight, height, width]);\n\n\n  // Listen for viewState changes.\n  // Do not allow the user to zoom and pan outside of the initial window.\n  const onViewStateChange = useCallback(({ viewState: nextViewState }) => {\n    const { zoom: nextZoom } = nextViewState;\n    const nextScaleFactor = 2 ** nextZoom;\n\n    const minTargetX = nextZoom === 0 ? 0 : -(matrixRight - (matrixRight / nextScaleFactor));\n    const maxTargetX = -1 * minTargetX;\n\n    const minTargetY = nextZoom === 0 ? 0 : -(matrixBottom - (matrixBottom / nextScaleFactor));\n    const maxTargetY = -1 * minTargetY;\n\n    // Manipulate view state if necessary to keep the user in the window.\n    const nextTarget = [\n      clamp(nextViewState.target[0], minTargetX, maxTargetX),\n      clamp(nextViewState.target[1], minTargetY, maxTargetY),\n    ];\n\n    setViewState({\n      zoom: nextZoom,\n      target: (transpose ? [nextTarget[1], nextTarget[0]] : nextTarget),\n    });\n  }, [matrixRight, matrixBottom, transpose, setViewState]);\n\n  // If `expression` or `cellOrdering` have changed,\n  // then new tiles need to be generated,\n  // so add a new task to the backlog.\n  useEffect(() => {\n    if (!expression) {\n      return;\n    }\n    // Use a uuid to give the task a unique ID,\n    // to help identify where in the list it is located\n    // after the worker thread asynchronously sends the data back\n    // to this thread.\n    if (\n      axisTopLabels && axisLeftLabels && xTiles && yTiles\n    ) {\n      setBacklog(prev => [...prev, uuidv4()]);\n    }\n  }, [dataRef, expression, axisTopLabels, axisLeftLabels, xTiles, yTiles]);\n\n  // When the backlog has updated, a new worker job can be submitted if:\n  // - the backlog has length >= 1 (at least one job is waiting), and\n  // - buffer.byteLength is not zero, so the worker does not currently \"own\" the buffer.\n  useEffect(() => {\n    if (backlog.length < 1) {\n      return;\n    }\n    const curr = backlog[backlog.length - 1];\n    if (dataRef.current && dataRef.current.buffer.byteLength) {\n      const { rows, cols, matrix } = expression;\n      const promises = range(yTiles).map(i => range(xTiles).map(async j => workerPool.process({\n        curr,\n        tileI: i,\n        tileJ: j,\n        tileSize: TILE_SIZE,\n        cellOrdering: transpose ? axisTopLabels : axisLeftLabels,\n        rows,\n        cols,\n        transpose,\n        data: matrix.buffer.slice(),\n      })));\n      const process = async () => {\n        const tiles = await Promise.all(promises.flat());\n        tilesRef.current = tiles.map(i => i.tile);\n        incTileIteration();\n        dataRef.current = new Uint8Array(tiles[0].buffer);\n        const { curr: currWork } = tiles[0];\n        setBacklog((prev) => {\n          const currIndex = prev.indexOf(currWork);\n          return prev.slice(currIndex + 1, prev.length);\n        });\n      };\n      process();\n    }\n  }, [axisLeftLabels, axisTopLabels, backlog, expression, transpose, xTiles, yTiles, workerPool]);\n\n  useEffect(() => {\n    setIsRendering(backlog.length > 0);\n  }, [backlog, setIsRendering]);\n\n  // Update the heatmap tiles if:\n  // - new tiles are available (`tileIteration` has changed), or\n  // - the matrix bounds have changed, or\n  // - the `aggSizeX` or `aggSizeY` have changed, or\n  // - the cell ordering has changed.\n  const heatmapLayers = useMemo(() => {\n    if (!tilesRef.current || backlog.length) {\n      return [];\n    }\n    function getLayer(i, j, tile) {\n      return new HeatmapBitmapLayer({\n        id: `heatmapLayer-${tileIteration}-${i}-${j}`,\n        image: tile,\n        bounds: [\n          matrixLeft + j * tileWidth,\n          matrixTop + i * tileHeight,\n          matrixLeft + (j + 1) * tileWidth,\n          matrixTop + (i + 1) * tileHeight,\n        ],\n        aggSizeX,\n        aggSizeY,\n        colormap,\n        colorScaleLo: colormapRange[0],\n        colorScaleHi: colormapRange[1],\n        updateTriggers: {\n          image: [axisLeftLabels, axisTopLabels],\n          bounds: [tileHeight, tileWidth],\n        },\n      });\n    }\n    const layers = tilesRef\n      .current.map((tile, index) => getLayer(Math.floor(index / xTiles), index % xTiles, tile));\n    return layers;\n  }, [backlog, tileIteration, matrixLeft, tileWidth, matrixTop, tileHeight,\n    aggSizeX, aggSizeY, colormap, colormapRange,\n    axisLeftLabels, axisTopLabels, xTiles]);\n\n\n  // Map cell and gene names to arrays with indices,\n  // to prepare to render the names in TextLayers.\n  const axisTopLabelData = useMemo(() => axisTopLabels.map((d, i) => [i, d]), [axisTopLabels]);\n  const axisLeftLabelData = useMemo(() => axisLeftLabels.map((d, i) => [i, d]), [axisLeftLabels]);\n\n  // Generate the axis label, axis title, and loading indicator text layers.\n  const textLayers = [\n    new HeatmapCompositeTextLayer({\n      targetX,\n      targetY,\n      scaleFactor,\n      axisLeftLabelData,\n      matrixTop,\n      height,\n      matrixHeight,\n      cellHeight,\n      cellWidth,\n      axisTopLabelData,\n      matrixLeft,\n      width,\n      matrixWidth,\n      viewHeight,\n      viewWidth,\n      theme,\n      axisLeftTitle,\n      axisTopTitle,\n      axisOffsetLeft,\n      axisOffsetTop,\n    }),\n  ];\n\n  // Create the left color bar with a BitmapLayer.\n  // TODO: find a way to do aggregation for this as well.\n  const cellColorsTiles = useMemo(() => {\n    if (!cellColors) {\n      return null;\n    }\n\n    let cellId;\n    let offset;\n    let color;\n    let rowI;\n\n    const cellOrdering = (transpose ? axisTopLabels : axisLeftLabels);\n    const colorBarTileWidthPx = (transpose ? TILE_SIZE : 1);\n    const colorBarTileHeightPx = (transpose ? 1 : TILE_SIZE);\n\n    const result = range((transpose ? xTiles : yTiles)).map((i) => {\n      const tileData = new Uint8ClampedArray(TILE_SIZE * 1 * 4);\n\n      range(TILE_SIZE).forEach((tileY) => {\n        rowI = (i * TILE_SIZE) + tileY; // the row / cell index\n        if (rowI < cellOrdering.length) {\n          cellId = cellOrdering[rowI];\n          color = cellColors.get(cellId);\n          offset = (transpose ? tileY : (TILE_SIZE - tileY - 1)) * 4;\n          if (color) {\n            const [rValue, gValue, bValue] = color;\n            tileData[offset + 0] = rValue;\n            tileData[offset + 1] = gValue;\n            tileData[offset + 2] = bValue;\n            tileData[offset + 3] = 255;\n          }\n        }\n      });\n\n      return new ImageData(tileData, colorBarTileWidthPx, colorBarTileHeightPx);\n    });\n\n    return result;\n  }, [cellColors, transpose, axisTopLabels, axisLeftLabels, xTiles, yTiles]);\n\n  const cellColorsLayers = useMemo(() => (cellColorsTiles\n    ? cellColorsTiles\n      .map((tile, i) => new PixelatedBitmapLayer({\n        id: `${(transpose ? 'colorsTopLayer' : 'colorsLeftLayer')}-${i}-${uuidv4()}`,\n        image: tile,\n        bounds: (transpose ? [\n          matrixLeft + i * tileWidth,\n          -matrixHeight / 2,\n          matrixLeft + (i + 1) * tileWidth,\n          matrixHeight / 2,\n        ] : [\n          -matrixWidth / 2,\n          matrixTop + i * tileHeight,\n          matrixWidth / 2,\n          matrixTop + (i + 1) * tileHeight,\n        ]),\n      }))\n    : []), [cellColorsTiles, matrixTop, matrixLeft, matrixHeight,\n    matrixWidth, tileWidth, tileHeight, transpose]);\n\n  const layers = heatmapLayers\n    .concat(textLayers)\n    .concat(cellColorsLayers);\n\n  // Set up the onHover function.\n  function onHover(info, event) {\n    if (!expression) {\n      return;\n    }\n    const { x: mouseX, y: mouseY } = event.offsetCenter;\n    const [colI, rowI] = mouseToHeatmapPosition(mouseX, mouseY, {\n      offsetLeft,\n      offsetTop,\n      targetX,\n      targetY,\n      scaleFactor,\n      matrixWidth,\n      matrixHeight,\n      numRows: height,\n      numCols: width,\n    });\n\n    if (colI === null) {\n      if (transpose) {\n        setCellHighlight(null);\n      } else {\n        setGeneHighlight(null);\n      }\n    }\n\n    if (rowI === null) {\n      if (transpose) {\n        setGeneHighlight(null);\n      } else {\n        setCellHighlight(null);\n      }\n    }\n\n    const obsI = expression.rows.indexOf(transpose\n      ? axisTopLabels[colI]\n      : axisLeftLabels[rowI]);\n    const varI = expression.cols.indexOf(transpose\n      ? axisLeftLabels[rowI]\n      : axisTopLabels[colI]);\n\n    const obsId = expression.rows[obsI];\n    const varId = expression.cols[varI];\n    if (setComponentHover) {\n      setComponentHover();\n    }\n    setCellHighlight(obsId || null);\n    setGeneHighlight(varId || null);\n  }\n\n  return (\n    <DeckGL\n      id={`deckgl-overlay-${uuid}`}\n      ref={deckRef}\n      views={[\n        // Note that there are multiple views here,\n        // but only one viewState.\n        new OrthographicView({\n          id: 'heatmap',\n          controller: true,\n          x: offsetLeft,\n          y: offsetTop,\n          width: matrixWidth,\n          height: matrixHeight,\n        }),\n        new OrthographicView({\n          id: 'axisLeft',\n          controller: false,\n          x: (transpose ? COLOR_BAR_SIZE : 0),\n          y: offsetTop,\n          width: axisOffsetLeft,\n          height: matrixHeight,\n        }),\n        new OrthographicView({\n          id: 'axisTop',\n          controller: false,\n          x: offsetLeft,\n          y: (transpose ? 0 : COLOR_BAR_SIZE),\n          width: matrixWidth,\n          height: axisOffsetTop,\n        }),\n        new OrthographicView({\n          id: 'colorsLeft',\n          controller: false,\n          x: axisOffsetLeft,\n          y: offsetTop,\n          width: COLOR_BAR_SIZE - AXIS_MARGIN,\n          height: matrixHeight,\n        }),\n        new OrthographicView({\n          id: 'colorsTop',\n          controller: false,\n          x: offsetLeft,\n          y: axisOffsetTop,\n          width: matrixWidth,\n          height: COLOR_BAR_SIZE - AXIS_MARGIN,\n        }),\n      ]}\n      layers={layers}\n      layerFilter={layerFilter}\n      getCursor={interactionState => (interactionState.isDragging ? 'grabbing' : 'default')}\n      glOptions={DEFAULT_GL_OPTIONS}\n      onViewStateChange={onViewStateChange}\n      viewState={viewState}\n      onHover={onHover}\n    />\n  );\n});\n\nexport default Heatmap;\n","import unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nexport default function _createForOfIteratorHelper(o) {\n  if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) {\n    if (Array.isArray(o) || (o = unsupportedIterableToArray(o))) {\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var it,\n      normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = o[Symbol.iterator]();\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}","import React, { forwardRef } from 'react';\nimport isEqual from 'lodash/isEqual';\nimport { COORDINATE_SYSTEM } from '@deck.gl/core'; // eslint-disable-line import/no-extraneous-dependencies\nimport { PolygonLayer, ScatterplotLayer } from '@deck.gl/layers'; // eslint-disable-line import/no-extraneous-dependencies\nimport { Matrix4 } from 'math.gl';\nimport { ScaleBarLayer, MultiscaleImageLayer } from '@hms-dbmi/viv';\nimport { getSelectionLayers } from '../../layers';\nimport { cellLayerDefaultProps, PALETTE, getDefaultColor } from '../utils';\nimport { getSourceFromLoader } from '../../utils';\nimport { square, getLayerLoaderTuple, renderSubBitmaskLayers } from './utils';\nimport AbstractSpatialOrScatterplot from '../shared-spatial-scatterplot/AbstractSpatialOrScatterplot';\nimport { createCellsQuadTree } from '../shared-spatial-scatterplot/quadtree';\nimport { ScaledExpressionExtension } from '../../layer-extensions';\n\nconst CELLS_LAYER_ID = 'cells-layer';\nconst MOLECULES_LAYER_ID = 'molecules-layer';\nconst NEIGHBORHOODS_LAYER_ID = 'neighborhoods-layer';\n\n// Default getter function props.\nconst defaultGetCellCoords = cell => cell.xy;\nconst makeDefaultGetCellPolygon = radius => (cellEntry) => {\n  const cell = cellEntry[1];\n  return cell.poly?.length ? cell.poly : square(cell.xy[0], cell.xy[1], radius);\n};\nconst makeDefaultGetCellColors = (cellColors, theme) => (cellEntry) => {\n  const [r, g, b, a] = (cellColors && cellColors.get(cellEntry[0])) || getDefaultColor(theme);\n  return [r, g, b, 255 * (a || 1)];\n};\nconst makeDefaultGetCellIsSelected = (cellSelection) => {\n  if (cellSelection) {\n    // For performance, convert the Array to a Set instance.\n    // Set.has() is faster than Array.includes().\n    const cellSelectionSet = new Set(cellSelection);\n    return cellEntry => (cellSelectionSet.has(cellEntry[0]) ? 1.0 : 0.0);\n  }\n  return () => 0.0;\n};\n\n/**\n * React component which expresses the spatial relationships between cells and molecules.\n * @param {object} props\n * @param {string} props.uuid A unique identifier for this component,\n * used to determine when to show tooltips vs. crosshairs.\n * @param {number} props.height Height of the DeckGL canvas, used when\n * rendering the scale bar layer.\n * @param {number} props.width Width of the DeckGL canvas, used when\n * rendering the scale bar layer.\n * @param {object} props.viewState The DeckGL viewState object.\n * @param {function} props.setViewState A handler for updating the DeckGL\n * viewState object.\n * @param {object} props.molecules Molecules data.\n * @param {object} props.cells Cells data.\n * @param {object} props.neighborhoods Neighborhoods data.\n * @param {number} props.lineWidthScale Width of cell border in view space (deck.gl).\n * @param {number} props.lineWidthMaxPixels Max width of the cell border in pixels (deck.gl).\n * @param {object} props.imageLayerLoaders An object mapping raster layer index to Viv loader\n * instances.\n * @param {object} props.cellColors Map from cell IDs to colors [r, g, b].\n * @param {function} props.getCellCoords Getter function for cell coordinates\n * (used by the selection layer).\n * @param {function} props.getCellColor Getter function for cell color as [r, g, b] array.\n * @param {function} props.getCellPolygon Getter function for cell polygons.\n * @param {function} props.getCellIsSelected Getter function for cell layer isSelected.\n * @param {function} props.getMoleculeColor\n * @param {function} props.getMoleculePosition\n * @param {function} props.getNeighborhoodPolygon\n * @param {function} props.updateViewInfo Handler for DeckGL viewport updates,\n * used when rendering tooltips and crosshairs.\n * @param {function} props.onCellClick Getter function for cell layer onClick.\n * @param {string} props.theme \"light\" or \"dark\" for the vitessce theme\n */\nclass Spatial extends AbstractSpatialOrScatterplot {\n  constructor(props) {\n    super(props);\n\n    // To avoid storing large arrays/objects\n    // in React state, this component\n    // uses instance variables.\n    // All instance variables used in this class:\n    this.cellsEntries = [];\n    this.moleculesEntries = [];\n    this.cellsQuadTree = null;\n    this.cellsLayer = null;\n    this.moleculesLayer = null;\n    this.neighborhoodsLayer = null;\n    this.imageLayers = [];\n    this.layerLoaderSelections = {};\n    // Better for the bitmask layer when there is no color data to use this.\n    // 2048 is best for performance and for stability (4096 texture size is not always supported).\n    this.randomColorData = {\n      data: new Uint8Array(2048 * 2048 * 3)\n        .map((_, j) => (j < 4 ? 0 : Math.round(255 * Math.random()))),\n      // This buffer should be able to hold colors for 2048 x 2048 ~ 4 million cells.\n      height: 2048,\n      width: 2048,\n    };\n    this.color = { ...this.randomColorData };\n    this.expression = {\n      data: new Uint8Array(2048 * 2048),\n      // This buffer should be able to hold colors for 2048 x 2048 ~ 4 million cells.\n      height: 2048,\n      width: 2048,\n    };\n\n    // Initialize data and layers.\n    this.onUpdateCellsData();\n    this.onUpdateCellsLayer();\n    this.onUpdateMoleculesData();\n    this.onUpdateMoleculesLayer();\n    this.onUpdateNeighborhoodsData();\n    this.onUpdateNeighborhoodsLayer();\n    this.onUpdateImages();\n  }\n\n  createCellsLayer(layerDef) {\n    const {\n      radius, stroked, visible, opacity,\n    } = layerDef;\n    const { cellsEntries } = this;\n    const {\n      theme,\n      cellFilter,\n      cellSelection,\n      setCellHighlight,\n      setComponentHover,\n      getCellIsSelected = makeDefaultGetCellIsSelected(\n        cellsEntries.length === cellSelection.length ? null : cellSelection,\n      ),\n      cellColors,\n      getCellColor = makeDefaultGetCellColors(cellColors, theme),\n      getCellPolygon = makeDefaultGetCellPolygon(radius),\n      onCellClick,\n      lineWidthScale = 10,\n      lineWidthMaxPixels = 2,\n      geneExpressionColormapRange,\n      cellColorEncoding,\n      getExpressionValue,\n      geneExpressionColormap,\n    } = this.props;\n    const filteredCellsEntries = cellFilter\n      ? cellsEntries.filter(cellEntry => cellFilter.includes(cellEntry[0]))\n      : cellsEntries;\n\n    // Graphics rendering has the y-axis positive going south,\n    // so we need to flip it for rendering tooltips.\n    const flipYTooltip = true;\n\n    return new PolygonLayer({\n      id: CELLS_LAYER_ID,\n      backgroundColor: [0, 0, 0],\n      isSelected: getCellIsSelected,\n      getPolygon: getCellPolygon,\n      updateTriggers: {\n        getLineWidth: [stroked],\n        isSelected: cellSelection,\n        getExpressionValue,\n        getFillColor: [opacity, cellColorEncoding, cellSelection, cellColors],\n        getLineColor: [cellColorEncoding, cellSelection, cellColors],\n      },\n      getFillColor: (cellEntry) => {\n        const color = getCellColor(cellEntry);\n        color[3] = opacity * 255;\n        return color;\n      },\n      getLineColor: (cellEntry) => {\n        const color = getCellColor(cellEntry);\n        color[3] = 255;\n        return color;\n      },\n      onClick: (info) => {\n        if (onCellClick) {\n          onCellClick(info);\n        }\n      },\n      visible,\n      getLineWidth: stroked ? 1 : 0,\n      lineWidthScale,\n      lineWidthMaxPixels,\n      getExpressionValue,\n      extensions: [new ScaledExpressionExtension()],\n      colorScaleLo: geneExpressionColormapRange[0],\n      colorScaleHi: geneExpressionColormapRange[1],\n      isExpressionMode: cellColorEncoding === 'geneSelection',\n      colormap: geneExpressionColormap,\n      ...cellLayerDefaultProps(\n        filteredCellsEntries,\n        undefined,\n        setCellHighlight,\n        setComponentHover,\n        flipYTooltip,\n      ),\n    });\n  }\n\n  createMoleculesLayer(layerDef) {\n    const {\n      setMoleculeHighlight,\n      getMoleculeColor = d => PALETTE[d[2] % PALETTE.length],\n      getMoleculePosition = d => [d[0], d[1], 0],\n    } = this.props;\n    const { moleculesEntries } = this;\n\n    return new ScatterplotLayer({\n      id: MOLECULES_LAYER_ID,\n      coordinateSystem: COORDINATE_SYSTEM.CARTESIAN,\n      data: moleculesEntries,\n      pickable: true,\n      autoHighlight: true,\n      radiusMaxPixels: 3,\n      opacity: layerDef.opacity,\n      visible: layerDef.visible,\n      getRadius: layerDef.radius,\n      getPosition: getMoleculePosition,\n      getLineColor: getMoleculeColor,\n      getFillColor: getMoleculeColor,\n      onHover: (info) => {\n        if (setMoleculeHighlight) {\n          if (info.object) {\n            setMoleculeHighlight(info.object[3]);\n          } else {\n            setMoleculeHighlight(null);\n          }\n        }\n      },\n    });\n  }\n\n  createNeighborhoodsLayer(layerDef) {\n    const {\n      getNeighborhoodPolygon = (neighborhoodsEntry) => {\n        const neighborhood = neighborhoodsEntry[1];\n        return neighborhood.poly;\n      },\n    } = this.props;\n    const { neighborhoodsEntries } = this;\n\n    return new PolygonLayer({\n      id: NEIGHBORHOODS_LAYER_ID,\n      getPolygon: getNeighborhoodPolygon,\n      coordinateSystem: COORDINATE_SYSTEM.CARTESIAN,\n      data: neighborhoodsEntries,\n      pickable: true,\n      autoHighlight: true,\n      stroked: true,\n      filled: false,\n      getElevation: 0,\n      getLineWidth: 10,\n      visible: layerDef.visible,\n    });\n  }\n\n  createSelectionLayers() {\n    const {\n      viewState,\n      getCellCoords = defaultGetCellCoords,\n      setCellSelection,\n    } = this.props;\n    const { tool } = this.state;\n    const { cellsQuadTree } = this;\n    return getSelectionLayers(\n      tool,\n      viewState.zoom,\n      CELLS_LAYER_ID,\n      getCellCoords,\n      setCellSelection,\n      cellsQuadTree,\n    );\n  }\n\n  createScaleBarLayer() {\n    const {\n      viewState,\n      width,\n      height,\n      imageLayerLoaders = {},\n      layers,\n    } = this.props;\n    const use3d = (layers || []).some(i => i.use3d);\n    // Just get the first layer/loader since they should all be spatially\n    // resolved and therefore have the same unit size scale.\n    const loaders = Object.values(imageLayerLoaders);\n    if (!viewState || !width || !height || loaders.length < 1) return null;\n    const loader = loaders[0];\n    if (!loader) return null;\n    const source = getSourceFromLoader(loader);\n    if (!source.meta) return null;\n    const { physicalSizes } = source.meta;\n    if (physicalSizes && !use3d) {\n      const { x } = physicalSizes;\n      const { unit, size } = x;\n      if (unit && size) {\n        return new ScaleBarLayer({\n          id: 'scalebar-layer',\n          unit,\n          size,\n          viewState: { ...viewState, width, height },\n        });\n      }\n      return null;\n    }\n    return null;\n  }\n\n  createImageLayer(rawLayerDef, loader, i) {\n    const layerDef = {\n      ...rawLayerDef,\n      channels: rawLayerDef.channels.filter(\n        channel => channel.selection && channel.color && channel.slider,\n      ),\n    };\n\n    // We need to keep the same selections array reference,\n    // otherwise the Viv layer will not be re-used as we want it to,\n    // since selections is one of its `updateTriggers`.\n    // Reference: https://github.com/hms-dbmi/viv/blob/ad86d0f/src/layers/MultiscaleImageLayer/MultiscaleImageLayer.js#L127\n    let selections;\n    const nextLoaderSelection = layerDef.channels.map(c => c.selection);\n    const prevLoaderSelection = this.layerLoaderSelections[layerDef.index];\n    if (isEqual(prevLoaderSelection, nextLoaderSelection)) {\n      selections = prevLoaderSelection;\n    } else {\n      selections = nextLoaderSelection;\n      this.layerLoaderSelections[layerDef.index] = nextLoaderSelection;\n    }\n    const layerProps = {\n      colormap: layerDef.colormap,\n      opacity: layerDef.opacity,\n      transparentColor: layerDef.transparentColor,\n      colors: layerDef.channels.map(c => c.color),\n      sliders: layerDef.channels.map(c => c.slider),\n      resolution: layerDef.resolution,\n      renderingMode: layerDef.renderingMode,\n      xSlice: layerDef.xSlice,\n      ySlice: layerDef.ySlice,\n      zSlice: layerDef.zSlice,\n      callback: layerDef.callback,\n      visibilities: layerDef.channels.map(c => (!layerDef.visible && typeof layerDef.visible === 'boolean'\n        ? false\n        : c.visible)),\n    };\n\n    if (!loader || !layerProps) return null;\n    const {\n      metadata: { transform },\n      data,\n    } = loader;\n    let modelMatrix;\n    if (transform) {\n      const { scale, translate } = transform;\n      modelMatrix = new Matrix4()\n        .translate([translate.x, translate.y, 0])\n        .scale(scale);\n    } else if (layerDef.modelMatrix) {\n      // eslint-disable-next-line prefer-destructuring\n      modelMatrix = new Matrix4(layerDef.modelMatrix);\n    }\n    if (rawLayerDef.type === 'bitmask') {\n      const {\n        geneExpressionColormap,\n        geneExpressionColormapRange = [0.0, 1.0],\n        cellColorEncoding,\n      } = this.props;\n      return new MultiscaleImageLayer({\n        // `bitmask` is used by the AbstractSpatialOrScatterplot\n        // https://github.com/vitessce/vitessce/pull/927/files#diff-9cab35a2ca0c5b6d9754b177810d25079a30ca91efa062d5795181360bc3ff2cR111\n        id: `bitmask-layer-${layerDef.index}-${i}`,\n        channelsVisible: layerProps.visibilities,\n        opacity: layerProps.opacity,\n        modelMatrix,\n        hoveredCell: Number(this.props.cellHighlight),\n        renderSubLayers: renderSubBitmaskLayers,\n        loader: data,\n        selections,\n        // For some reason, deck.gl doesn't recognize the prop diffing\n        // unless these are separated out.  I don't think it's a bug, just\n        // has to do with the fact that we don't have it in the `defaultProps`,\n        // could be wrong though.\n        cellColorData: this.color.data,\n        cellTexHeight: this.color.height,\n        cellTexWidth: this.color.width,\n        excludeBackground: true,\n        onViewportLoad: layerProps.callback,\n        colorScaleLo: geneExpressionColormapRange[0],\n        colorScaleHi: geneExpressionColormapRange[1],\n        isExpressionMode: cellColorEncoding === 'geneSelection',\n        colormap: geneExpressionColormap,\n        expressionData: this.expression.data,\n      });\n    }\n    const [Layer, layerLoader] = getLayerLoaderTuple(data, layerDef.use3d);\n\n    return new Layer({\n      loader: layerLoader,\n      id: `${layerDef.use3d ? 'volume' : 'image'}-layer-${layerDef.index}-${i}`,\n      colors: layerProps.colors,\n      contrastLimits: layerProps.sliders,\n      selections,\n      channelsVisible: layerProps.visibilities,\n      opacity: layerProps.opacity,\n      colormap: layerProps.colormap,\n      modelMatrix,\n      transparentColor: layerProps.transparentColor,\n      resolution: layerProps.resolution,\n      renderingMode: layerProps.renderingMode,\n      pickable: false,\n      xSlice: layerProps.xSlice,\n      ySlice: layerProps.ySlice,\n      zSlice: layerProps.zSlice,\n      onViewportLoad: layerProps.callback,\n    });\n  }\n\n  createImageLayers() {\n    const {\n      layers,\n      imageLayerLoaders = {},\n      rasterLayersCallbacks = [],\n    } = this.props;\n    const use3d = (layers || []).some(i => i.use3d);\n    const use3dIndex = (layers || []).findIndex(i => i.use3d);\n    return (layers || [])\n      .filter(layer => layer.type === 'raster' || layer.type === 'bitmask')\n      .filter(layer => (use3d ? layer.use3d === use3d : true))\n      .map((layer, i) => this.createImageLayer(\n        { ...layer, callback: rasterLayersCallbacks[use3d ? use3dIndex : i] },\n        imageLayerLoaders[layer.index],\n        i,\n      ));\n  }\n\n  getLayers() {\n    const {\n      imageLayers, cellsLayer, neighborhoodsLayer, moleculesLayer,\n    } = this;\n    return [\n      ...imageLayers,\n      cellsLayer,\n      neighborhoodsLayer,\n      moleculesLayer,\n      this.createScaleBarLayer(),\n      ...this.createSelectionLayers(),\n    ];\n  }\n\n  onUpdateCellsData() {\n    const { cells = {}, getCellCoords = defaultGetCellCoords } = this.props;\n    const cellsEntries = Object.entries(cells);\n    this.cellsEntries = cellsEntries;\n    this.cellsQuadTree = createCellsQuadTree(cellsEntries, getCellCoords);\n  }\n\n  onUpdateCellsLayer() {\n    const { layers } = this.props;\n    const layerDef = (layers || []).find(layer => layer.type === 'cells');\n    if (layerDef) {\n      this.cellsLayer = this.createCellsLayer(layerDef);\n    } else {\n      this.cellsLayer = null;\n    }\n  }\n\n  onUpdateCellColors() {\n    const color = this.randomColorData;\n    const { size } = this.props.cellColors;\n    if (typeof size === 'number') {\n      const cellIds = this.props.cellColors.keys();\n      color.data = new Uint8Array(color.height * color.width * 3).fill(\n        getDefaultColor(this.props.theme)[0],\n      );\n      // 0th cell id is the empty space of the image i.e black color.\n      color.data[0] = 0;\n      color.data[1] = 0;\n      color.data[2] = 0;\n      // eslint-disable-next-line no-restricted-syntax\n      for (const id of cellIds) {\n        if (id > 0) {\n          const cellColor = this.props.cellColors.get(id);\n          if (cellColor) {\n            color.data.set(cellColor.slice(0, 3), Number(id) * 3);\n          }\n        }\n      }\n    }\n    this.color = color;\n  }\n\n  onUpdateExpressionData() {\n    const { expressionData } = this.props;\n    if (expressionData[0]?.length) {\n      this.expression.data = new Uint8Array(\n        this.expression.height * this.expression.width,\n      );\n      this.expression.data.set(expressionData[0]);\n    }\n  }\n\n  onUpdateMoleculesData() {\n    const { molecules = {} } = this.props;\n    const moleculesEntries = Object.entries(molecules).flatMap(\n      ([molecule, coords], index) => coords.map(([x, y]) => [x, y, index, molecule]),\n    );\n    this.moleculesEntries = moleculesEntries;\n  }\n\n  onUpdateMoleculesLayer() {\n    const { layers } = this.props;\n    const layerDef = (layers || []).find(layer => layer.type === 'molecules');\n    if (layerDef) {\n      this.moleculesLayer = this.createMoleculesLayer(layerDef);\n    } else {\n      this.moleculesLayer = null;\n    }\n  }\n\n  onUpdateNeighborhoodsData() {\n    const { neighborhoods = {} } = this.props;\n    const neighborhoodsEntries = Object.entries(neighborhoods);\n    this.neighborhoodsEntries = neighborhoodsEntries;\n  }\n\n  onUpdateNeighborhoodsLayer() {\n    const { layers } = this.props;\n    const layerDef = (layers || []).find(\n      layer => layer.type === 'neighborhoods',\n    );\n    if (layerDef) {\n      this.neighborhoodsLayer = this.createNeighborhoodsLayer(layerDef);\n    } else {\n      this.neighborhoodsLayer = null;\n    }\n  }\n\n  onUpdateImages() {\n    this.imageLayers = this.createImageLayers();\n  }\n\n  viewInfoDidUpdate() {\n    const { getCellCoords = defaultGetCellCoords } = this.props;\n    super.viewInfoDidUpdate(getCellCoords);\n  }\n\n  /**\n   * Here, asynchronously check whether props have\n   * updated which require re-computing memoized variables,\n   * followed by a re-render.\n   * This function does not follow React conventions or paradigms,\n   * it is only implemented this way to try to squeeze out\n   * performance.\n   * @param {object} prevProps The previous props to diff against.\n   */\n  componentDidUpdate(prevProps) {\n    this.viewInfoDidUpdate();\n\n    const shallowDiff = propName => prevProps[propName] !== this.props[propName];\n    if (['cells'].some(shallowDiff)) {\n      // Cells data changed.\n      this.onUpdateCellsData();\n      this.forceUpdate();\n    }\n\n    if (\n      [\n        'layers',\n        'cells',\n        'cellFilter',\n        'cellSelection',\n        'cellColors',\n        'geneExpressionColormapRange',\n        'cellColorEncoding',\n        'geneExpressionColormap',\n      ].some(shallowDiff)\n    ) {\n      // Cells layer props changed.\n      this.onUpdateCellsLayer();\n      this.forceUpdate();\n    }\n\n    if (['cellColors'].some(shallowDiff)) {\n      // Cells Color layer props changed.\n      this.onUpdateCellColors();\n      this.forceUpdate();\n    }\n\n    if (['expressionData'].some(shallowDiff)) {\n      // Expression data prop changed.\n      this.onUpdateExpressionData();\n      this.forceUpdate();\n    }\n\n    if (['molecules'].some(shallowDiff)) {\n      // Molecules data changed.\n      this.onUpdateMoleculesData();\n      this.forceUpdate();\n    }\n\n    if (['layers', 'molecules'].some(shallowDiff)) {\n      // Molecules layer props changed.\n      this.onUpdateMoleculesLayer();\n      this.forceUpdate();\n    }\n\n    if (['neighborhoods'].some(shallowDiff)) {\n      // Neighborhoods data changed.\n      this.onUpdateNeighborhoodsData();\n      this.forceUpdate();\n    }\n\n    if (['layers', 'neighborhoods'].some(shallowDiff)) {\n      // Neighborhoods layer props changed.\n      this.onUpdateNeighborhoodsLayer();\n      this.forceUpdate();\n    }\n\n    if (\n      [\n        'layers',\n        'imageLayerLoaders',\n        'cellColors',\n        'cellHighlight',\n        'geneExpressionColormapRange',\n        'expressionData',\n        'rasterLayersCallbacks',\n        'geneExpressionColormap',\n      ].some(shallowDiff)\n    ) {\n      // Image layers changed.\n      this.onUpdateImages();\n      this.forceUpdate();\n    }\n  }\n\n  // render() is implemented in the abstract parent class.\n}\n\n/**\n * Need this wrapper function here,\n * since we want to pass a forwardRef\n * so that outer components can\n * access the grandchild DeckGL ref,\n * but we are using a class component.\n */\nconst SpatialWrapper = forwardRef((props, deckRef) => (\n  <Spatial {...props} deckRef={deckRef} />\n));\nexport default SpatialWrapper;\n","/* eslint-disable no-plusplus */\n/* eslint-disable no-param-reassign */\nimport { quadtree } from 'd3-quadtree';\n\n/**\n * Returns a closure that returns a constant value.\n */\nfunction constant(v) {\n  return (() => v);\n}\n\n/**\n * Adds a tiny bit of randomness to a number.\n */\nfunction jiggle(v) {\n  return v + (Math.random() - 0.5) * 1e-6;\n}\n\n/**\n * A force function to be used with d3.forceSimulation.\n * This has been adapted for use here, with comments explaining each part.\n * Reference: https://bl.ocks.org/cmgiven/547658968d365bcc324f3e62e175709b\n */\nexport function forceCollideRects() {\n  // D3 implements things with function prototypes rather than classes.\n  // Pretend these variables are the \"instance members\" of a class.\n  // Note that this function actually returns the internal force() function,\n  // but that the force() function is a closure with access to these instance members.\n\n  let nodes;\n  let masses;\n  let strength = 1;\n  let iterations = 1;\n\n  let sizes;\n  let size = constant([0, 0]);\n\n  // Given a node, return the center point along the x-axis.\n  function xCenter(d) {\n    return d.x + d.vx + sizes[d.index][0] / 2;\n  }\n\n  // Given a node, return the center point along the y-axis.\n  function yCenter(d) {\n    return d.y + d.vy + sizes[d.index][1] / 2;\n  }\n\n  // Given a quadtree node, initialize its .size property.\n  function prepare(quad) {\n    if (quad.data) {\n      // This is a leaf node, so we set quad.size to the node's size.\n      // (No need to compute the max of internal nodes,\n      // since leaf nodes do not have any internal nodes).\n      quad.size = sizes[quad.data.index];\n    } else {\n      quad.size = [0, 0];\n      // Internal nodes of the quadtree are represented\n      // as four-element arrays in left-to-right, top-to-bottom order.\n      // Here, we are setting quad.size to [maxWidth, maxHeight]\n      // among the internal nodes of this current `quad` node.\n      for (let i = 0; i < 4; i++) {\n        if (quad[i] && quad[i].size) {\n          quad.size[0] = Math.max(quad.size[0], quad[i].size[0]);\n          quad.size[1] = Math.max(quad.size[1], quad[i].size[1]);\n        }\n      }\n    }\n  }\n\n  function force() {\n    let node;\n    let nodeSize;\n    let nodeMass;\n    let xi;\n    let yi;\n\n    // Create a quadtree based on node center points.\n    // Initialize each quadtree node's .size property by calling\n    // the prepare() function on each quadtree node.\n    const tree = quadtree(nodes, xCenter, yCenter).visitAfter(prepare);\n\n    // Update the .vx and .vy properties of both `node` and `data`\n    // (the current node pair).\n    function apply(quad, x0, y0, x1, y1) {\n      // `quad` is a quadtree node.\n      const { data } = quad;\n      const xSize = (nodeSize[0] + quad.size[0]) / 2;\n      const ySize = (nodeSize[1] + quad.size[1]) / 2;\n\n      if (data && data.index > node.index) {\n        // This is a leaf node because `data` is defined.\n        // `x` is the difference in x centers between `node` and `data`.\n        // `y` is the difference in y centers between `node` and `data`.\n        let x = jiggle(xi - xCenter(data));\n        let y = jiggle(yi - yCenter(data));\n        const xd = Math.abs(x) - xSize;\n        const yd = Math.abs(y) - ySize;\n\n        // If `xd` and `yd` is less than zero,\n        // then there is an overlap between the two nodes.\n        if (xd < 0 && yd < 0) {\n          const l = Math.sqrt(x * x + y * y);\n          const m = masses[data.index] / (nodeMass + masses[data.index]);\n\n          // We move the nodes either in the x or y direction.\n          // Nodes are moved proportionally to:\n          // their distance apart (`l`), their amount of overlap (`xd` or `yd`), their masses (`m`),\n          // and the strength parameter (`strength`).\n          if (Math.abs(xd) < Math.abs(yd)) {\n            node.vx -= (x *= xd / l * strength) * m;\n            data.vx += x * (1 - m);\n          } else {\n            node.vy -= (y *= yd / l * strength) * m;\n            data.vy += y * (1 - m);\n          }\n        }\n        // When the quadtree.visit callback returns _true_ for a node,\n        // then the node's children will _not_ be visited.\n        return x0 > xi + xSize || x1 < xi - xSize || y0 > yi + ySize || y1 < yi - ySize;\n      }\n      return false;\n    }\n\n    function iterate() {\n      // On every iteration, use the `apply` function to visit every node\n      // which has an index greater than the current node's index,\n      // (visiting every node pair).\n      for (let j = 0; j < nodes.length; j++) {\n        node = nodes[j];\n        nodeSize = sizes[j];\n        nodeMass = masses[j];\n        xi = xCenter(node);\n        yi = yCenter(node);\n\n        tree.visit(apply);\n      }\n    }\n\n    // Do the specified number of iterations.\n    for (let i = 0; i < iterations; i++) {\n      iterate();\n    }\n  }\n\n  // The \"constructor\".\n  // Takes a list of nodes as input.\n  force.initialize = (v) => {\n    nodes = v;\n    // Get the size [w, h] of each node using the size getter function.\n    sizes = nodes.map(size);\n    // Get the mass of each node,\n    // which is the sum of its horizontal and vertical edge lengths.\n    masses = sizes.map(d => d[0] + d[1]);\n  };\n\n  // Set the number of iterations.\n  // If no value is provided as a parameter, this acts as a getter function.\n  force.iterations = (...v) => {\n    if (v.length) {\n      iterations = +v[0];\n      return force;\n    }\n    return iterations;\n  };\n\n  // Set the strength value.\n  // If no value is provided as a parameter, this acts as a getter function.\n  force.strength = (...v) => {\n    if (v.length) {\n      strength = +v[0];\n      return force;\n    }\n    return strength;\n  };\n\n  // Set the size function.\n  // The size function takes a node as a parameter and returns its size.\n  // If no size function is provided as a parameter, this acts as a getter function.\n  force.size = (...v) => {\n    if (v.length) {\n      size = (typeof v[0] === 'function' ? v[0] : constant(v[0]));\n      return force;\n    }\n    return size;\n  };\n\n  // Returns the force closure.\n  return force;\n}\n","import React, { forwardRef } from 'react';\nimport { PolygonLayer, TextLayer, ScatterplotLayer } from '@deck.gl/layers'; // eslint-disable-line import/no-extraneous-dependencies\nimport { forceSimulation } from 'd3-force';\nimport { getSelectionLayers } from '../../layers';\nimport { cellLayerDefaultProps, getDefaultColor } from '../utils';\nimport {\n  createCellsQuadTree,\n} from '../shared-spatial-scatterplot/quadtree';\nimport AbstractSpatialOrScatterplot from '../shared-spatial-scatterplot/AbstractSpatialOrScatterplot';\nimport { forceCollideRects } from '../shared-spatial-scatterplot/force-collide-rects';\nimport { ScaledExpressionExtension, SelectionExtension } from '../../layer-extensions';\n\nconst CELLS_LAYER_ID = 'scatterplot';\nconst LABEL_FONT_FAMILY = \"-apple-system, 'Helvetica Neue', Arial, sans-serif\";\nconst NUM_FORCE_SIMULATION_TICKS = 100;\nconst LABEL_UPDATE_ZOOM_DELTA = 0.25;\n\n// Default getter function props.\nconst makeDefaultGetCellPosition = mapping => (cellEntry) => {\n  const { mappings } = cellEntry[1];\n  if (!(mapping in mappings)) {\n    const available = Object.keys(mappings).map(s => `\"${s}\"`).join(', ');\n    throw new Error(`Expected to find \"${mapping}\", but available mappings are: ${available}`);\n  }\n  const mappedCell = mappings[mapping];\n  // The negative applied to the y-axis is because\n  // graphics rendering has the y-axis positive going south.\n  return [mappedCell[0], -mappedCell[1], 0];\n};\nconst makeDefaultGetCellCoords = mapping => cell => cell.mappings[mapping];\nconst makeDefaultGetCellColors = (cellColors, theme) => (cellEntry) => {\n  const [r, g, b, a] = (cellColors && cellColors.get(cellEntry[0])) || getDefaultColor(theme);\n  return [r, g, b, 255 * (a || 1)];\n};\n\n/**\n * React component which renders a scatterplot from cell data, typically tSNE or PCA.\n * @param {object} props\n * @param {string} props.uuid A unique identifier for this component.\n * @param {string} props.theme The current vitessce theme.\n * @param {object} props.viewState The deck.gl view state.\n * @param {function} props.setViewState Function to call to update the deck.gl view state.\n * @param {object} props.cells\n * @param {string} props.mapping The name of the coordinate mapping field,\n * for each cell, for example \"PCA\" or \"t-SNE\".\n * @param {Map} props.cellColors Mapping of cell IDs to colors.\n * @param {array} props.cellSelection Array of selected cell IDs.\n * @param {array} props.cellFilter Array of filtered cell IDs. By default, null.\n * @param {number} props.cellRadius The value for `radiusScale` to pass\n * to the deck.gl cells ScatterplotLayer.\n * @param {number} props.cellOpacity The value for `opacity` to pass\n * to the deck.gl cells ScatterplotLayer.\n * @param {function} props.getCellCoords Getter function for cell coordinates\n * (used by the selection layer).\n * @param {function} props.getCellPosition Getter function for cell [x, y, z] position.\n * @param {function} props.getCellColor Getter function for cell color as [r, g, b] array.\n * @param {function} props.getCellIsSelected Getter function for cell layer isSelected.\n * @param {function} props.setCellSelection\n * @param {function} props.setCellHighlight\n * @param {function} props.updateViewInfo\n * @param {function} props.onToolChange Callback for tool changes\n * (lasso/pan/rectangle selection tools).\n * @param {function} props.onCellClick Getter function for cell layer onClick.\n */\nclass Scatterplot extends AbstractSpatialOrScatterplot {\n  constructor(props) {\n    super(props);\n\n    // To avoid storing large arrays/objects\n    // in React state, this component\n    // uses instance variables.\n    // All instance variables used in this class:\n    this.cellsEntries = [];\n    this.cellsQuadTree = null;\n    this.cellsLayer = null;\n    this.cellSetsForceSimulation = forceCollideRects();\n    this.cellSetsLabelPrevZoom = null;\n    this.cellSetsLayers = [];\n\n    // Initialize data and layers.\n    this.onUpdateCellsData();\n    this.onUpdateCellsLayer();\n    this.onUpdateCellSetsLayers();\n  }\n\n  createCellsLayer() {\n    const { cellsEntries } = this;\n    const {\n      theme,\n      mapping,\n      getCellPosition = makeDefaultGetCellPosition(mapping),\n      cellRadius = 1.0,\n      cellOpacity = 1.0,\n      cellFilter,\n      cellSelection,\n      setCellHighlight,\n      setComponentHover,\n      getCellIsSelected,\n      cellColors,\n      getCellColor = makeDefaultGetCellColors(cellColors, theme),\n      getExpressionValue,\n      onCellClick,\n      geneExpressionColormap,\n      geneExpressionColormapRange = [0.0, 1.0],\n      cellColorEncoding,\n    } = this.props;\n    const filteredCellsEntries = (cellFilter\n      ? cellsEntries.filter(cellEntry => cellFilter.includes(cellEntry[0]))\n      : cellsEntries);\n    return new ScatterplotLayer({\n      id: CELLS_LAYER_ID,\n      backgroundColor: (theme === 'dark' ? [0, 0, 0] : [241, 241, 241]),\n      getCellIsSelected,\n      opacity: cellOpacity,\n      radiusScale: cellRadius,\n      radiusMinPixels: 1,\n      radiusMaxPixels: 30,\n      // Our radius pixel setters measure in pixels.\n      radiusUnits: 'pixels',\n      getPosition: getCellPosition,\n      getFillColor: getCellColor,\n      getLineColor: getCellColor,\n      getRadius: 1,\n      getExpressionValue,\n      getLineWidth: 0,\n      extensions: [\n        new ScaledExpressionExtension(),\n        new SelectionExtension({ instanced: true }),\n      ],\n      colorScaleLo: geneExpressionColormapRange[0],\n      colorScaleHi: geneExpressionColormapRange[1],\n      isExpressionMode: (cellColorEncoding === 'geneSelection'),\n      colormap: geneExpressionColormap,\n      onClick: (info) => {\n        if (onCellClick) {\n          onCellClick(info);\n        }\n      },\n      updateTriggers: {\n        getExpressionValue,\n        getFillColor: [cellColorEncoding, cellSelection, cellColors],\n        getLineColor: [cellColorEncoding, cellSelection, cellColors],\n        getCellIsSelected,\n      },\n      ...cellLayerDefaultProps(\n        filteredCellsEntries, undefined, setCellHighlight, setComponentHover,\n      ),\n      stroked: 0,\n    });\n  }\n\n  createCellSetsLayers() {\n    const {\n      theme,\n      cellSetPolygons,\n      viewState,\n      cellSetPolygonsVisible,\n      cellSetLabelsVisible,\n      cellSetLabelSize,\n    } = this.props;\n\n    const result = [];\n\n    if (cellSetPolygonsVisible) {\n      result.push(new PolygonLayer({\n        id: 'cell-sets-polygon-layer',\n        data: cellSetPolygons,\n        stroked: true,\n        filled: false,\n        wireframe: true,\n        lineWidthMaxPixels: 1,\n        getPolygon: d => d.hull,\n        getLineColor: d => d.color,\n        getLineWidth: 1,\n      }));\n    }\n\n    if (cellSetLabelsVisible) {\n      const { zoom } = viewState;\n      const nodes = cellSetPolygons.map(p => ({\n        x: p.centroid[0],\n        y: p.centroid[1],\n        label: p.name,\n      }));\n\n      const collisionForce = this.cellSetsForceSimulation\n        .size(d => ([\n          cellSetLabelSize * 1 / (2 ** zoom) * 4 * d.label.length,\n          cellSetLabelSize * 1 / (2 ** zoom) * 1.5,\n        ]));\n\n      forceSimulation()\n        .nodes(nodes)\n        .force('collision', collisionForce)\n        .tick(NUM_FORCE_SIMULATION_TICKS);\n\n      result.push(new TextLayer({\n        id: 'cell-sets-text-layer',\n        data: nodes,\n        getPosition: d => ([d.x, d.y]),\n        getText: d => d.label,\n        getColor: (theme === 'dark' ? [255, 255, 255] : [0, 0, 0]),\n        getSize: cellSetLabelSize,\n        getAngle: 0,\n        getTextAnchor: 'middle',\n        getAlignmentBaseline: 'center',\n        fontFamily: LABEL_FONT_FAMILY,\n        fontWeight: 'normal',\n      }));\n    }\n\n    return result;\n  }\n\n  createSelectionLayers() {\n    const {\n      viewState,\n      mapping,\n      getCellCoords = makeDefaultGetCellCoords(mapping),\n      setCellSelection,\n    } = this.props;\n    const { tool } = this.state;\n    const { cellsQuadTree } = this;\n    const flipYTooltip = true;\n    return getSelectionLayers(\n      tool,\n      viewState.zoom,\n      CELLS_LAYER_ID,\n      getCellCoords,\n      setCellSelection,\n      cellsQuadTree,\n      flipYTooltip,\n    );\n  }\n\n  getLayers() {\n    const {\n      cellsLayer,\n      cellSetsLayers,\n    } = this;\n    return [\n      cellsLayer,\n      ...cellSetsLayers,\n      ...this.createSelectionLayers(),\n    ];\n  }\n\n  onUpdateCellsData() {\n    const {\n      cells = {},\n      mapping,\n      getCellCoords = makeDefaultGetCellCoords(mapping),\n    } = this.props;\n    const cellsEntries = Object.entries(cells);\n    this.cellsEntries = cellsEntries;\n    this.cellsQuadTree = createCellsQuadTree(cellsEntries, getCellCoords);\n  }\n\n  onUpdateCellsLayer() {\n    this.cellsLayer = this.createCellsLayer();\n  }\n\n  onUpdateCellSetsLayers(onlyViewStateChange) {\n    // Because the label sizes for the force simulation depend on the zoom level,\n    // we _could_ run the simulation every time the zoom level changes.\n    // However, this has a performance impact in firefox.\n    if (onlyViewStateChange) {\n      const { viewState, cellSetLabelsVisible } = this.props;\n      const { zoom } = viewState;\n      const { cellSetsLabelPrevZoom } = this;\n      // Instead, we can just check if the zoom level has changed\n      // by some relatively large delta, to be more conservative\n      // about re-running the force simulation.\n      if (cellSetLabelsVisible\n        && (\n          cellSetsLabelPrevZoom === null\n          || Math.abs(cellSetsLabelPrevZoom - zoom) > LABEL_UPDATE_ZOOM_DELTA\n        )\n      ) {\n        this.cellSetsLayers = this.createCellSetsLayers();\n        this.cellSetsLabelPrevZoom = zoom;\n      }\n    } else {\n      // Otherwise, something more substantial than just\n      // the viewState has changed, such as the label array\n      // itself, so we always want to update the layer\n      // in this case.\n      this.cellSetsLayers = this.createCellSetsLayers();\n    }\n  }\n\n  viewInfoDidUpdate() {\n    const {\n      mapping,\n      getCellPosition = makeDefaultGetCellPosition(mapping),\n    } = this.props;\n    super.viewInfoDidUpdate(cell => getCellPosition([null, cell]));\n  }\n\n  /**\n   * Here, asynchronously check whether props have\n   * updated which require re-computing memoized variables,\n   * followed by a re-render.\n   * This function does not follow React conventions or paradigms,\n   * it is only implemented this way to try to squeeze out\n   * performance.\n   * @param {object} prevProps The previous props to diff against.\n   */\n  componentDidUpdate(prevProps) {\n    this.viewInfoDidUpdate();\n\n    const shallowDiff = propName => (prevProps[propName] !== this.props[propName]);\n    if (['cells'].some(shallowDiff)) {\n      // Cells data changed.\n      this.onUpdateCellsData();\n      this.forceUpdate();\n    }\n\n    if ([\n      'cells', 'cellFilter', 'cellSelection', 'cellColors',\n      'cellRadius', 'cellOpacity', 'cellRadiusMode', 'geneExpressionColormap',\n      'geneExpressionColormapRange', 'geneSelection', 'cellColorEncoding',\n    ].some(shallowDiff)) {\n      // Cells layer props changed.\n      this.onUpdateCellsLayer();\n      this.forceUpdate();\n    }\n    if ([\n      'cellSetPolygons', 'cellSetPolygonsVisible',\n      'cellSetLabelsVisible', 'cellSetLabelSize',\n    ].some(shallowDiff)) {\n      // Cell sets layer props changed.\n      this.onUpdateCellSetsLayers(false);\n      this.forceUpdate();\n    }\n    if (shallowDiff('viewState')) {\n      // The viewState prop has changed (due to zoom or pan).\n      this.onUpdateCellSetsLayers(true);\n      this.forceUpdate();\n    }\n  }\n\n  // render() is implemented in the abstract parent class.\n}\n\n/**\n * Need this wrapper function here,\n * since we want to pass a forwardRef\n * so that outer components can\n * access the grandchild DeckGL ref,\n * but we are using a class component.\n */\nconst ScatterplotWrapper = forwardRef((props, deckRef) => (\n  <Scatterplot\n    {...props}\n    deckRef={deckRef}\n  />\n));\nexport default ScatterplotWrapper;\n","module.exports = require(\"rc-tree\");","import React from 'react';\n\nimport Grid from '@material-ui/core/Grid';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport Slider from '@material-ui/core/Slider';\nimport { useControllerSectionStyles } from './styles';\n\nexport default function VectorLayerController(props) {\n  const {\n    label,\n    layer,\n    layerType,\n    handleLayerChange,\n  } = props;\n\n  const slider = layer.opacity;\n  const isOn = layer.visible;\n\n  function handleSliderChange(v) {\n    if (layerType === 'cells') {\n      const stroked = v < 0.7;\n      handleLayerChange({ ...layer, opacity: v, stroked });\n    } else {\n      handleLayerChange({ ...layer, opacity: v });\n    }\n  }\n\n  function handleCheckBoxChange(v) {\n    handleLayerChange({ ...layer, visible: v });\n  }\n\n  const classes = useControllerSectionStyles();\n  return (\n    <Grid item style={{ marginTop: '10px' }}>\n      <Paper className={classes.root}>\n        <Typography\n          style={{\n            padding: '15px 8px 0px 8px',\n            marginBottom: '-5px',\n          }}\n        >\n          {label}\n        </Typography>\n        <Grid container direction=\"row\" justify=\"space-between\">\n          <Grid item xs={2}>\n            <Checkbox color=\"primary\" checked={isOn} onChange={(e, v) => handleCheckBoxChange(v)} />\n          </Grid>\n          <Grid item xs={9} style={{ paddingRight: '8px' }}>\n            <Slider\n              value={slider}\n              min={0}\n              max={1}\n              step={0.001}\n              onChange={(e, v) => handleSliderChange(v)}\n              style={{ marginTop: '7px' }}\n              orientation=\"horizontal\"\n            />\n          </Grid>\n        </Grid>\n      </Paper>\n    </Grid>\n  );\n}\n","module.exports = require(\"@material-ui/icons/Add\");","module.exports = require(\"@deck.gl/extensions\");","module.exports = require(\"@turf/boolean-within\");","module.exports = require(\"@turf/boolean-contains\");","module.exports = require(\"@turf/boolean-overlap\");","module.exports = require(\"@turf/boolean-point-in-polygon\");","module.exports = require(\"@nebula.gl/layers\");","module.exports = require(\"short-number\");","module.exports = require(\"regenerator-runtime\");","import React from 'react';\nimport Tooltip2D from '../tooltip/Tooltip2D';\nimport TooltipContent from '../tooltip/TooltipContent';\nimport { useComponentHover, useComponentViewInfo } from '../../app/state/hooks';\n\nexport default function ScatterplotTooltipSubscriber(props) {\n  const {\n    parentUuid,\n    cellHighlight,\n    width,\n    height,\n    getCellInfo,\n  } = props;\n\n  const sourceUuid = useComponentHover();\n  const viewInfo = useComponentViewInfo(parentUuid);\n\n  const [cellInfo, x, y] = (cellHighlight && getCellInfo ? (\n    [\n      getCellInfo(cellHighlight),\n      ...(viewInfo && viewInfo.project ? viewInfo.project(cellHighlight) : [null, null]),\n    ]\n  ) : ([null, null, null]));\n\n  return (\n    (cellInfo ? (\n      <Tooltip2D\n        x={x}\n        y={y}\n        parentUuid={parentUuid}\n        sourceUuid={sourceUuid}\n        parentWidth={width}\n        parentHeight={height}\n      >\n        <TooltipContent info={cellInfo} />\n      </Tooltip2D>\n    ) : null)\n  );\n}\n","import React, { useCallback } from 'react';\nimport debounce from 'lodash/debounce';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Slider from '@material-ui/core/Slider';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\nimport { capitalize } from '../../utils';\nimport { useStyles } from '../shared-plot-options/styles';\nimport OptionsContainer from '../shared-plot-options/OptionsContainer';\nimport OptionSelect from '../shared-plot-options/OptionSelect';\nimport CellColorEncodingOption from '../shared-plot-options/CellColorEncodingOption';\nimport { GLSL_COLORMAPS } from '../../layers/constants';\n\nexport default function ScatterplotOptions(props) {\n  const {\n    observationsLabel,\n    cellRadius,\n    setCellRadius,\n    cellRadiusMode,\n    setCellRadiusMode,\n    cellOpacity,\n    setCellOpacity,\n    cellOpacityMode,\n    setCellOpacityMode,\n    cellSetLabelsVisible,\n    setCellSetLabelsVisible,\n    cellSetLabelSize,\n    setCellSetLabelSize,\n    cellSetPolygonsVisible,\n    setCellSetPolygonsVisible,\n    cellColorEncoding,\n    setCellColorEncoding,\n    geneExpressionColormap,\n    setGeneExpressionColormap,\n    geneExpressionColormapRange,\n    setGeneExpressionColormapRange,\n  } = props;\n\n  const observationsLabelNice = capitalize(observationsLabel);\n\n  const classes = useStyles();\n\n  function handleCellRadiusModeChange(event) {\n    setCellRadiusMode(event.target.value);\n  }\n\n  function handleCellOpacityModeChange(event) {\n    setCellOpacityMode(event.target.value);\n  }\n\n  function handleRadiusChange(event, value) {\n    setCellRadius(value);\n  }\n\n  function handleOpacityChange(event, value) {\n    setCellOpacity(value);\n  }\n\n  function handleLabelVisibilityChange(event) {\n    setCellSetLabelsVisible(event.target.checked);\n  }\n\n  function handleLabelSizeChange(event, value) {\n    setCellSetLabelSize(value);\n  }\n\n  function handlePolygonVisibilityChange(event) {\n    setCellSetPolygonsVisible(event.target.checked);\n  }\n\n  function handleGeneExpressionColormapChange(event) {\n    setGeneExpressionColormap(event.target.value);\n  }\n\n  function handleColormapRangeChange(event, value) {\n    setGeneExpressionColormapRange(value);\n  }\n  const handleColormapRangeChangeDebounced = useCallback(\n    debounce(handleColormapRangeChange, 5, { trailing: true }),\n    [handleColormapRangeChange],\n  );\n\n  return (\n    <OptionsContainer>\n      <CellColorEncodingOption\n        observationsLabel={observationsLabel}\n        cellColorEncoding={cellColorEncoding}\n        setCellColorEncoding={setCellColorEncoding}\n      />\n      <TableRow>\n        <TableCell className={classes.labelCell}>\n          {observationsLabelNice} Set Labels Visible\n        </TableCell>\n        <TableCell className={classes.inputCell}>\n          <Checkbox\n            className={classes.checkbox}\n            checked={cellSetLabelsVisible}\n            onChange={handleLabelVisibilityChange}\n            name=\"scatterplot-option-cell-set-labels\"\n            color=\"default\"\n          />\n        </TableCell>\n      </TableRow>\n      <TableRow>\n        <TableCell className={classes.labelCell}>\n          {observationsLabelNice} Set Label Size\n        </TableCell>\n        <TableCell className={classes.inputCell}>\n          <Slider\n            disabled={!cellSetLabelsVisible}\n            classes={{ root: classes.slider, valueLabel: classes.sliderValueLabel }}\n            value={cellSetLabelSize}\n            onChange={handleLabelSizeChange}\n            aria-labelledby=\"cell-set-label-size-slider\"\n            valueLabelDisplay=\"auto\"\n            step={1}\n            min={8}\n            max={36}\n          />\n        </TableCell>\n      </TableRow>\n      <TableRow>\n        <TableCell className={classes.labelCell}>\n          {observationsLabelNice} Set Polygons Visible\n        </TableCell>\n        <TableCell className={classes.inputCell}>\n          <Checkbox\n            className={classes.checkbox}\n            checked={cellSetPolygonsVisible}\n            onChange={handlePolygonVisibilityChange}\n            name=\"scatterplot-option-cell-set-polygons\"\n            color=\"default\"\n          />\n        </TableCell>\n      </TableRow>\n      <TableRow>\n        <TableCell className={classes.labelCell} htmlFor=\"cell-radius-mode-select\">\n          {observationsLabelNice} Radius Mode\n        </TableCell>\n        <TableCell className={classes.inputCell}>\n          <OptionSelect\n            className={classes.select}\n            value={cellRadiusMode}\n            onChange={handleCellRadiusModeChange}\n            inputProps={{\n              id: 'cell-radius-mode-select',\n            }}\n          >\n            <option value=\"auto\">Auto</option>\n            <option value=\"manual\">Manual</option>\n          </OptionSelect>\n        </TableCell>\n      </TableRow>\n      <TableRow>\n        <TableCell className={classes.labelCell}>\n          {observationsLabelNice} Radius\n        </TableCell>\n        <TableCell className={classes.inputCell}>\n          <Slider\n            disabled={cellRadiusMode !== 'manual'}\n            classes={{ root: classes.slider, valueLabel: classes.sliderValueLabel }}\n            value={cellRadius}\n            onChange={handleRadiusChange}\n            aria-labelledby=\"cell-radius-slider\"\n            valueLabelDisplay=\"auto\"\n            step={0.01}\n            min={0.01}\n            max={10}\n          />\n        </TableCell>\n      </TableRow>\n      <TableRow>\n        <TableCell className={classes.labelCell} htmlFor=\"cell-opacity-mode-select\">\n          {observationsLabelNice} Opacity Mode\n        </TableCell>\n        <TableCell className={classes.inputCell}>\n          <OptionSelect\n            className={classes.select}\n            value={cellOpacityMode}\n            onChange={handleCellOpacityModeChange}\n            inputProps={{\n              id: 'cell-opacity-mode-select',\n            }}\n          >\n            <option value=\"auto\">Auto</option>\n            <option value=\"manual\">Manual</option>\n          </OptionSelect>\n        </TableCell>\n      </TableRow>\n      <TableRow>\n        <TableCell className={classes.labelCell}>\n          {observationsLabelNice} Opacity\n        </TableCell>\n        <TableCell className={classes.inputCell}>\n          <Slider\n            disabled={cellOpacityMode !== 'manual'}\n            classes={{ root: classes.slider, valueLabel: classes.sliderValueLabel }}\n            value={cellOpacity}\n            onChange={handleOpacityChange}\n            aria-labelledby=\"cell-opacity-slider\"\n            valueLabelDisplay=\"auto\"\n            step={0.05}\n            min={0.0}\n            max={1.0}\n          />\n        </TableCell>\n      </TableRow>\n      <TableRow>\n        <TableCell className={classes.labelCell} htmlFor=\"gene-expression-colormap-select\">\n          Gene Expression Colormap\n        </TableCell>\n        <TableCell className={classes.inputCell}>\n          <OptionSelect\n            className={classes.select}\n            value={geneExpressionColormap}\n            onChange={handleGeneExpressionColormapChange}\n            inputProps={{\n              id: 'gene-expression-colormap-select',\n            }}\n          >\n            {GLSL_COLORMAPS.map(cmap => (\n              <option key={cmap} value={cmap}>{cmap}</option>\n            ))}\n          </OptionSelect>\n        </TableCell>\n      </TableRow>\n      <TableRow>\n        <TableCell className={classes.labelCell}>\n          Gene Expression Colormap Range\n        </TableCell>\n        <TableCell className={classes.inputCell}>\n          <Slider\n            classes={{ root: classes.slider, valueLabel: classes.sliderValueLabel }}\n            value={geneExpressionColormapRange}\n            onChange={handleColormapRangeChangeDebounced}\n            aria-labelledby=\"gene-expression-colormap-range-slider\"\n            valueLabelDisplay=\"auto\"\n            step={0.005}\n            min={0.0}\n            max={1.0}\n          />\n        </TableCell>\n      </TableRow>\n    </OptionsContainer>\n  );\n}\n","import { OrthographicView } from 'deck.gl';\nimport clamp from 'lodash/clamp';\n\n// Reference: https://observablehq.com/@rreusser/selecting-the-right-opacity-for-2d-point-clouds\n// Reference: https://observablehq.com/@bmschmidt/dot-density-election-maps-with-webgl\nexport function getPointSizeDevicePixels(devicePixelRatio, zoom, xRange, yRange, width, height) {\n  // Size of a point, in units of the diagonal axis.\n  const pointSize = 0.001;\n  // Point size maximum, in screen pixels.\n  const pointScreenSizeMax = 10;\n\n  // Point size minimum, in screen pixels.\n  const pointScreenSizeMin = 1 / devicePixelRatio;\n\n  const scaleFactor = 2 ** zoom;\n  const xAxisRange = 2.0 / ((xRange * scaleFactor) / width);\n  const yAxisRange = 2.0 / ((yRange * scaleFactor) / height);\n\n  // The diagonal screen size as a fraction of the current diagonal axis range,\n  // then converted to device pixels.\n  const diagonalScreenSize = Math.sqrt((width ** 2) + (height ** 2));\n  const diagonalAxisRange = Math.sqrt((xAxisRange ** 2) + (yAxisRange ** 2));\n  const diagonalFraction = pointSize / diagonalAxisRange;\n  const deviceSize = diagonalFraction * diagonalScreenSize;\n\n  const pointSizeDevicePixels = clamp(\n    deviceSize,\n    pointScreenSizeMin,\n    pointScreenSizeMax,\n  );\n  return pointSizeDevicePixels;\n}\n\n// Reference: https://observablehq.com/@rreusser/selecting-the-right-opacity-for-2d-point-clouds\nexport function getPointOpacity(zoom, xRange, yRange, width, height, numCells, avgFillDensity) {\n  const N = numCells;\n  const [minX, minY, maxX, maxY] = new OrthographicView({ zoom }).makeViewport({\n    height,\n    width,\n    viewState: { zoom, target: [0, 0, 0] },\n  }).getBounds();\n  const X = maxY - minY;\n  const Y = maxX - minX;\n  const X0 = xRange;\n  const Y0 = yRange;\n  const W = width;\n  const H = height;\n\n  let rho = avgFillDensity;\n  if (!rho) {\n    rho = Math.min(1, 1 / (10 ** (Math.log10(N) - 3)));\n  }\n  // p in the calculation is the pixel length/width of a given point, which for us is 1\n  // so it does not factor into our calculation here.\n  const alpha = ((rho * W * H) / N) * (Y0 / Y) * (X0 / X);\n  const pointOpacity = clamp(alpha, 1.01 / 255, 1.0);\n  return pointOpacity;\n}\n","import React, {\n  useState, useEffect, useCallback, useMemo,\n} from 'react';\nimport { extent } from 'd3-array';\nimport isEqual from 'lodash/isEqual';\nimport TitleInfo from '../TitleInfo';\nimport { pluralize, capitalize } from '../../utils';\nimport {\n  useDeckCanvasSize, useReady, useUrls, useExpressionValueGetter,\n} from '../hooks';\nimport { setCellSelection, mergeCellSets } from '../utils';\nimport { getCellSetPolygons } from '../sets/cell-set-utils';\nimport {\n  useCellsData,\n  useCellSetsData,\n  useGeneSelection,\n  useExpressionAttrs,\n} from '../data-hooks';\nimport { getCellColors } from '../interpolate-colors';\nimport Scatterplot from './Scatterplot';\nimport ScatterplotTooltipSubscriber from './ScatterplotTooltipSubscriber';\nimport ScatterplotOptions from './ScatterplotOptions';\nimport {\n  useCoordination,\n  useLoaders,\n  useSetComponentHover,\n  useSetComponentViewInfo,\n} from '../../app/state/hooks';\nimport {\n  getPointSizeDevicePixels,\n  getPointOpacity,\n} from '../shared-spatial-scatterplot/dynamic-opacity';\nimport { COMPONENT_COORDINATION_TYPES } from '../../app/state/coordination';\n\nconst SCATTERPLOT_DATA_TYPES = ['cells', 'expression-matrix', 'cell-sets'];\n\n/**\n * A subscriber component for the scatterplot.\n * @param {object} props\n * @param {number} props.uuid The unique identifier for this component.\n * @param {string} props.theme The current theme name.\n * @param {object} props.coordinationScopes The mapping from coordination types to coordination\n * scopes.\n * @param {boolean} props.disableTooltip Should the tooltip be disabled?\n * @param {function} props.removeGridComponent The callback function to pass to TitleInfo,\n * to call when the component has been removed from the grid.\n * @param {string} props.title An override value for the component title.\n * @param {number} props.averageFillDensity Override the average fill density calculation\n * when using dynamic opacity mode.\n */\nexport default function ScatterplotSubscriber(props) {\n  const {\n    uuid,\n    coordinationScopes,\n    removeGridComponent,\n    theme,\n    disableTooltip = false,\n    observationsLabelOverride: observationsLabel = 'cell',\n    observationsPluralLabelOverride: observationsPluralLabel = `${observationsLabel}s`,\n    title: titleOverride,\n    // Average fill density for dynamic opacity calculation.\n    averageFillDensity,\n  } = props;\n\n  const loaders = useLoaders();\n  const setComponentHover = useSetComponentHover();\n  const setComponentViewInfo = useSetComponentViewInfo(uuid);\n\n  // Get \"props\" from the coordination space.\n  const [{\n    dataset,\n    embeddingZoom: zoom,\n    embeddingTargetX: targetX,\n    embeddingTargetY: targetY,\n    embeddingTargetZ: targetZ,\n    embeddingType: mapping,\n    cellFilter,\n    cellHighlight,\n    geneSelection,\n    cellSetSelection,\n    cellSetColor,\n    cellColorEncoding,\n    additionalCellSets,\n    embeddingCellSetPolygonsVisible: cellSetPolygonsVisible,\n    embeddingCellSetLabelsVisible: cellSetLabelsVisible,\n    embeddingCellSetLabelSize: cellSetLabelSize,\n    embeddingCellRadius: cellRadiusFixed,\n    embeddingCellRadiusMode: cellRadiusMode,\n    embeddingCellOpacity: cellOpacityFixed,\n    embeddingCellOpacityMode: cellOpacityMode,\n    geneExpressionColormap,\n    geneExpressionColormapRange,\n  }, {\n    setEmbeddingZoom: setZoom,\n    setEmbeddingTargetX: setTargetX,\n    setEmbeddingTargetY: setTargetY,\n    setEmbeddingTargetZ: setTargetZ,\n    setCellFilter,\n    setCellSetSelection,\n    setCellHighlight,\n    setCellSetColor,\n    setCellColorEncoding,\n    setAdditionalCellSets,\n    setEmbeddingCellSetPolygonsVisible: setCellSetPolygonsVisible,\n    setEmbeddingCellSetLabelsVisible: setCellSetLabelsVisible,\n    setEmbeddingCellSetLabelSize: setCellSetLabelSize,\n    setEmbeddingCellRadius: setCellRadiusFixed,\n    setEmbeddingCellRadiusMode: setCellRadiusMode,\n    setEmbeddingCellOpacity: setCellOpacityFixed,\n    setEmbeddingCellOpacityMode: setCellOpacityMode,\n    setGeneExpressionColormap,\n    setGeneExpressionColormapRange,\n  }] = useCoordination(COMPONENT_COORDINATION_TYPES.scatterplot, coordinationScopes);\n\n  const [urls, addUrl, resetUrls] = useUrls();\n  const [width, height, deckRef] = useDeckCanvasSize();\n  const [\n    isReady,\n    setItemIsReady,\n    setItemIsNotReady, // eslint-disable-line no-unused-vars\n    resetReadyItems,\n  ] = useReady(\n    SCATTERPLOT_DATA_TYPES,\n  );\n\n  const title = titleOverride || `Scatterplot (${mapping})`;\n\n  // Reset file URLs and loader progress when the dataset has changed.\n  useEffect(() => {\n    resetUrls();\n    resetReadyItems();\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  // Get data from loaders using the data hooks.\n  const [cells, cellsCount] = useCellsData(loaders, dataset, setItemIsReady, addUrl, true);\n  const [cellSets] = useCellSetsData(\n    loaders,\n    dataset,\n    setItemIsReady,\n    addUrl,\n    false,\n    { setCellSetSelection, setCellSetColor },\n    { cellSetSelection, cellSetColor },\n  );\n  const [expressionData] = useGeneSelection(\n    loaders, dataset, setItemIsReady, false, geneSelection, setItemIsNotReady,\n  );\n  const [attrs] = useExpressionAttrs(\n    loaders, dataset, setItemIsReady, addUrl, false,\n  );\n\n  const [dynamicCellRadius, setDynamicCellRadius] = useState(cellRadiusFixed);\n  const [dynamicCellOpacity, setDynamicCellOpacity] = useState(cellOpacityFixed);\n\n  const mergedCellSets = useMemo(() => mergeCellSets(\n    cellSets, additionalCellSets,\n  ), [cellSets, additionalCellSets]);\n\n  const setCellSelectionProp = useCallback((v) => {\n    setCellSelection(\n      v, additionalCellSets, cellSetColor,\n      setCellSetSelection, setAdditionalCellSets, setCellSetColor,\n      setCellColorEncoding,\n    );\n  }, [additionalCellSets, cellSetColor, setCellColorEncoding,\n    setAdditionalCellSets, setCellSetColor, setCellSetSelection]);\n\n  const cellColors = useMemo(() => getCellColors({\n    cellColorEncoding,\n    expressionData: expressionData && expressionData[0],\n    geneSelection,\n    cellSets: mergedCellSets,\n    cellSetSelection,\n    cellSetColor,\n    expressionDataAttrs: attrs,\n    theme,\n  }), [cellColorEncoding, geneSelection, mergedCellSets, theme,\n    cellSetSelection, cellSetColor, expressionData, attrs]);\n\n  // cellSetPolygonCache is an array of tuples like [(key0, val0), (key1, val1), ...],\n  // where the keys are cellSetSelection arrays.\n  const [cellSetPolygonCache, setCellSetPolygonCache] = useState([]);\n  const cacheHas = (cache, key) => cache.findIndex(el => isEqual(el[0], key)) !== -1;\n  const cacheGet = (cache, key) => cache.find(el => isEqual(el[0], key))?.[1];\n  const cellSetPolygons = useMemo(() => {\n    if ((cellSetLabelsVisible || cellSetPolygonsVisible)\n      && !cacheHas(cellSetPolygonCache, cellSetSelection)\n      && mergedCellSets?.tree?.length\n      && Object.values(cells).length\n      && cellSetColor?.length) {\n      const newCellSetPolygons = getCellSetPolygons({\n        cells,\n        mapping,\n        cellSets: mergedCellSets,\n        cellSetSelection,\n        cellSetColor,\n        theme,\n      });\n      setCellSetPolygonCache(cache => [...cache, [cellSetSelection, newCellSetPolygons]]);\n      return newCellSetPolygons;\n    }\n    return cacheGet(cellSetPolygonCache, cellSetSelection) || [];\n  }, [cellSetPolygonsVisible, cellSetPolygonCache, cellSetLabelsVisible, theme,\n    cells, mapping, mergedCellSets, cellSetSelection, cellSetColor]);\n\n\n  const cellSelection = useMemo(() => Array.from(cellColors.keys()), [cellColors]);\n\n  const [xRange, yRange, xExtent, yExtent, numCells] = useMemo(() => {\n    const cellValues = cells && Object.values(cells);\n    if (cellValues?.length) {\n      const cellCoordinates = Object.values(cells)\n        .map(c => c.mappings[mapping]);\n      const xE = extent(cellCoordinates, c => c[0]);\n      const yE = extent(cellCoordinates, c => c[1]);\n      const xR = xE[1] - xE[0];\n      const yR = yE[1] - yE[0];\n      return [xR, yR, xE, yE, cellValues.length];\n    }\n    return [null, null, null, null, null];\n  }, [cells, mapping]);\n\n  // After cells have loaded or changed,\n  // compute the cell radius scale based on the\n  // extents of the cell coordinates on the x/y axes.\n  useEffect(() => {\n    if (xRange && yRange) {\n      const pointSizeDevicePixels = getPointSizeDevicePixels(\n        window.devicePixelRatio, zoom, xRange, yRange, width, height,\n      );\n      setDynamicCellRadius(pointSizeDevicePixels);\n\n      const nextCellOpacityScale = getPointOpacity(\n        zoom, xRange, yRange, width, height, numCells, averageFillDensity,\n      );\n      setDynamicCellOpacity(nextCellOpacityScale);\n\n      if (typeof targetX !== 'number' || typeof targetY !== 'number') {\n        const newTargetX = xExtent[0] + xRange / 2;\n        const newTargetY = yExtent[0] + yRange / 2;\n        const newZoom = Math.log2(Math.min(width / xRange, height / yRange));\n        setTargetX(newTargetX);\n        // Graphics rendering has the y-axis going south so we need to multiply by negative one.\n        setTargetY(-newTargetY);\n        setZoom(newZoom);\n      }\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [xRange, yRange, xExtent, yExtent, numCells, cells, mapping,\n    width, height, zoom, averageFillDensity]);\n\n  const getCellInfo = useCallback((cellId) => {\n    const cellInfo = cells[cellId];\n    return {\n      [`${capitalize(observationsLabel)} ID`]: cellId,\n      ...(cellInfo ? cellInfo.factors : {}),\n    };\n  }, [cells, observationsLabel]);\n\n  const cellSelectionSet = useMemo(() => new Set(cellSelection), [cellSelection]);\n  const getCellIsSelected = useCallback(cellEntry => (\n    (cellSelectionSet || new Set([])).has(cellEntry[0]) ? 1.0 : 0.0), [cellSelectionSet]);\n\n  const cellRadius = (cellRadiusMode === 'manual' ? cellRadiusFixed : dynamicCellRadius);\n  const cellOpacity = (cellOpacityMode === 'manual' ? cellOpacityFixed : dynamicCellOpacity);\n\n  // Set up a getter function for gene expression values, to be used\n  // by the DeckGL layer to obtain values for instanced attributes.\n  const getExpressionValue = useExpressionValueGetter({ attrs, expressionData });\n\n  return (\n    <TitleInfo\n      title={title}\n      info={`${cellsCount} ${pluralize(observationsLabel, observationsPluralLabel, cellsCount)}`}\n      removeGridComponent={removeGridComponent}\n      urls={urls}\n      theme={theme}\n      isReady={isReady}\n      options={(\n        <ScatterplotOptions\n          observationsLabel={observationsLabel}\n          cellRadius={cellRadiusFixed}\n          setCellRadius={setCellRadiusFixed}\n          cellRadiusMode={cellRadiusMode}\n          setCellRadiusMode={setCellRadiusMode}\n          cellOpacity={cellOpacityFixed}\n          setCellOpacity={setCellOpacityFixed}\n          cellOpacityMode={cellOpacityMode}\n          setCellOpacityMode={setCellOpacityMode}\n          cellSetLabelsVisible={cellSetLabelsVisible}\n          setCellSetLabelsVisible={setCellSetLabelsVisible}\n          cellSetLabelSize={cellSetLabelSize}\n          setCellSetLabelSize={setCellSetLabelSize}\n          cellSetPolygonsVisible={cellSetPolygonsVisible}\n          setCellSetPolygonsVisible={setCellSetPolygonsVisible}\n          cellColorEncoding={cellColorEncoding}\n          setCellColorEncoding={setCellColorEncoding}\n          geneExpressionColormap={geneExpressionColormap}\n          setGeneExpressionColormap={setGeneExpressionColormap}\n          geneExpressionColormapRange={geneExpressionColormapRange}\n          setGeneExpressionColormapRange={setGeneExpressionColormapRange}\n        />\n      )}\n    >\n      <Scatterplot\n        ref={deckRef}\n        uuid={uuid}\n        theme={theme}\n        viewState={{ zoom, target: [targetX, targetY, targetZ] }}\n        setViewState={({ zoom: newZoom, target }) => {\n          setZoom(newZoom);\n          setTargetX(target[0]);\n          setTargetY(target[1]);\n          setTargetZ(target[2] || 0);\n        }}\n        cells={cells}\n        mapping={mapping}\n        cellFilter={cellFilter}\n        cellSelection={cellSelection}\n        cellHighlight={cellHighlight}\n        cellColors={cellColors}\n        cellSetPolygons={cellSetPolygons}\n        cellSetLabelSize={cellSetLabelSize}\n        cellSetLabelsVisible={cellSetLabelsVisible}\n        cellSetPolygonsVisible={cellSetPolygonsVisible}\n        setCellFilter={setCellFilter}\n        setCellSelection={setCellSelectionProp}\n        setCellHighlight={setCellHighlight}\n        cellRadius={cellRadius}\n        cellOpacity={cellOpacity}\n        cellColorEncoding={cellColorEncoding}\n        geneExpressionColormap={geneExpressionColormap}\n        geneExpressionColormapRange={geneExpressionColormapRange}\n        setComponentHover={() => {\n          setComponentHover(uuid);\n        }}\n        updateViewInfo={setComponentViewInfo}\n        getExpressionValue={getExpressionValue}\n        getCellIsSelected={getCellIsSelected}\n\n      />\n      {!disableTooltip && (\n      <ScatterplotTooltipSubscriber\n        parentUuid={uuid}\n        cellHighlight={cellHighlight}\n        width={width}\n        height={height}\n        getCellInfo={getCellInfo}\n      />\n      )}\n    </TitleInfo>\n  );\n}\n","import React from 'react';\nimport Tooltip2D from '../tooltip/Tooltip2D';\nimport TooltipContent from '../tooltip/TooltipContent';\nimport { useComponentHover, useComponentViewInfo } from '../../app/state/hooks';\n\nexport default function HeatmapTooltipSubscriber(props) {\n  const {\n    parentUuid,\n    width, height, transpose,\n    getCellInfo, getGeneInfo,\n    cellHighlight, geneHighlight,\n  } = props;\n\n  const sourceUuid = useComponentHover();\n  const viewInfo = useComponentViewInfo(parentUuid);\n\n  const [cellInfo, cellCoord] = (cellHighlight && getCellInfo ? (\n    [\n      getCellInfo(cellHighlight),\n      (viewInfo && viewInfo.project\n        ? viewInfo.project(cellHighlight, null)[(transpose ? 0 : 1)]\n        : null),\n    ]\n  ) : ([null, null]));\n\n  const [geneInfo, geneCoord] = (geneHighlight && getGeneInfo ? (\n    [\n      getGeneInfo(geneHighlight),\n      (viewInfo && viewInfo.project\n        ? viewInfo.project(null, geneHighlight)[(transpose ? 1 : 0)]\n        : null),\n    ]\n  ) : ([null, null]));\n\n  const x = (transpose ? cellCoord : geneCoord);\n  const y = (transpose ? geneCoord : cellCoord);\n\n  return (\n    (cellInfo || geneInfo ? (\n      <Tooltip2D\n        x={x}\n        y={y}\n        parentUuid={parentUuid}\n        parentWidth={width}\n        parentHeight={height}\n        sourceUuid={sourceUuid}\n      >\n        <TooltipContent info={{ ...geneInfo, ...cellInfo }} />\n      </Tooltip2D>\n    ) : null)\n  );\n}\n","import React, { useCallback } from 'react';\nimport debounce from 'lodash/debounce';\nimport Slider from '@material-ui/core/Slider';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\nimport { useStyles } from '../shared-plot-options/styles';\nimport OptionsContainer from '../shared-plot-options/OptionsContainer';\nimport OptionSelect from '../shared-plot-options/OptionSelect';\nimport { GLSL_COLORMAPS } from '../../layers/constants';\n\nexport default function HeatmapOptions(props) {\n  const {\n    geneExpressionColormap,\n    setGeneExpressionColormap,\n    geneExpressionColormapRange,\n    setGeneExpressionColormapRange,\n  } = props;\n\n  const classes = useStyles();\n\n  function handleGeneExpressionColormapChange(event) {\n    setGeneExpressionColormap(event.target.value);\n  }\n\n  function handleColormapRangeChange(event, value) {\n    setGeneExpressionColormapRange(value);\n  }\n  const handleColormapRangeChangeDebounced = useCallback(\n    debounce(handleColormapRangeChange, 5, { trailing: true }),\n    [handleColormapRangeChange],\n  );\n\n  return (\n    <OptionsContainer>\n      <TableRow>\n        <TableCell className={classes.labelCell} htmlFor=\"gene-expression-colormap-select\">\n          Gene Expression Colormap\n        </TableCell>\n        <TableCell className={classes.inputCell}>\n          <OptionSelect\n            className={classes.select}\n            value={geneExpressionColormap}\n            onChange={handleGeneExpressionColormapChange}\n            inputProps={{\n              id: 'gene-expression-colormap-select',\n            }}\n          >\n            {GLSL_COLORMAPS.map(cmap => (\n              <option key={cmap} value={cmap}>{cmap}</option>\n            ))}\n          </OptionSelect>\n        </TableCell>\n      </TableRow>\n      <TableRow>\n        <TableCell className={classes.labelCell}>\n          Gene Expression Colormap Range\n        </TableCell>\n        <TableCell className={classes.inputCell}>\n          <Slider\n            classes={{ root: classes.slider, valueLabel: classes.sliderValueLabel }}\n            value={geneExpressionColormapRange}\n            onChange={handleColormapRangeChangeDebounced}\n            aria-labelledby=\"gene-expression-colormap-range-slider\"\n            valueLabelDisplay=\"auto\"\n            step={0.005}\n            min={0.0}\n            max={1.0}\n          />\n        </TableCell>\n      </TableRow>\n    </OptionsContainer>\n  );\n}\n","import React, {\n  useEffect, useState, useCallback, useMemo,\n} from 'react';\nimport TitleInfo from '../TitleInfo';\nimport { pluralize, capitalize } from '../../utils';\nimport { useDeckCanvasSize, useReady, useUrls } from '../hooks';\nimport { mergeCellSets } from '../utils';\nimport {\n  useCellsData,\n  useCellSetsData,\n  useExpressionMatrixData,\n} from '../data-hooks';\nimport { getCellColors } from '../interpolate-colors';\nimport {\n  useCoordination, useLoaders,\n  useSetComponentHover, useSetComponentViewInfo,\n} from '../../app/state/hooks';\nimport {\n  COMPONENT_COORDINATION_TYPES,\n} from '../../app/state/coordination';\nimport Heatmap from './Heatmap';\nimport HeatmapTooltipSubscriber from './HeatmapTooltipSubscriber';\nimport HeatmapOptions from './HeatmapOptions';\n\nconst HEATMAP_DATA_TYPES = ['cells', 'cell-sets', 'expression-matrix'];\n\n/**\n * @param {object} props\n * @param {number} props.uuid The unique identifier for this component.\n * @param {object} props.coordinationScopes The mapping from coordination types to coordination\n * scopes.\n * @param {function} props.removeGridComponent The callback function to pass to TitleInfo,\n * to call when the component has been removed from the grid.\n * @param {string} props.title The component title.\n * @param {boolean} props.transpose Whether to\n * render as cell-by-gene or gene-by-cell.\n * @param {string} props.observationsLabelOverride The singular\n * form of the name of the observation.\n * @param {string} props.observationsPluralLabelOverride The\n * plural form of the name of the observation.\n * @param {string} props.variablesLabelOverride The singular\n * form of the name of the variable.\n * @param {string} props.variablesPluralLabelOverride The plural\n * form of the name of the variable.\n * @param {boolean} props.disableTooltip Whether to disable the\n * tooltip on mouse hover.\n */\nexport default function HeatmapSubscriber(props) {\n  const {\n    uuid,\n    coordinationScopes,\n    removeGridComponent, theme, transpose,\n    observationsLabelOverride: observationsLabel = 'cell',\n    observationsPluralLabelOverride: observationsPluralLabel = `${observationsLabel}s`,\n    variablesLabelOverride: variablesLabel = 'gene',\n    variablesPluralLabelOverride: variablesPluralLabel = `${variablesLabel}s`,\n    disableTooltip = false,\n    title = 'Heatmap',\n  } = props;\n\n  const loaders = useLoaders();\n  const setComponentHover = useSetComponentHover();\n  const setComponentViewInfo = useSetComponentViewInfo(uuid);\n\n  // Get \"props\" from the coordination space.\n  const [{\n    dataset,\n    heatmapZoomX: zoomX,\n    heatmapTargetX: targetX,\n    heatmapTargetY: targetY,\n    geneSelection,\n    cellHighlight,\n    geneHighlight,\n    cellSetSelection,\n    cellSetColor,\n    additionalCellSets,\n    geneExpressionColormap,\n    geneExpressionColormapRange,\n  }, {\n    setHeatmapZoomX: setZoomX,\n    setHeatmapZoomY: setZoomY,\n    setHeatmapTargetX: setTargetX,\n    setHeatmapTargetY: setTargetY,\n    setCellHighlight,\n    setGeneHighlight,\n    setCellSetSelection,\n    setCellSetColor,\n    setGeneExpressionColormapRange,\n    setGeneExpressionColormap,\n  }] = useCoordination(COMPONENT_COORDINATION_TYPES.heatmap, coordinationScopes);\n\n  const observationsTitle = capitalize(observationsPluralLabel);\n  const variablesTitle = capitalize(variablesPluralLabel);\n\n  const [isRendering, setIsRendering] = useState(false);\n  const [\n    isReady,\n    setItemIsReady,\n    setItemIsNotReady, // eslint-disable-line no-unused-vars\n    resetReadyItems,\n  ] = useReady(\n    HEATMAP_DATA_TYPES,\n  );\n  const [urls, addUrl, resetUrls] = useUrls();\n  const [width, height, deckRef] = useDeckCanvasSize();\n\n  // Reset file URLs and loader progress when the dataset has changed.\n  useEffect(() => {\n    resetUrls();\n    resetReadyItems();\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  // Get data from loaders using the data hooks.\n  const [cells] = useCellsData(loaders, dataset, setItemIsReady, addUrl, true);\n  const [expressionMatrix] = useExpressionMatrixData(\n    loaders, dataset, setItemIsReady, addUrl, true,\n  );\n  const [cellSets] = useCellSetsData(\n    loaders, dataset, setItemIsReady, addUrl, false,\n    { setCellSetSelection, setCellSetColor },\n    { cellSetSelection, cellSetColor },\n  );\n\n  const mergedCellSets = useMemo(() => mergeCellSets(\n    cellSets, additionalCellSets,\n  ), [cellSets, additionalCellSets]);\n\n  const cellColors = useMemo(() => getCellColors({\n    // Only show cell set selection on heatmap labels.\n    cellColorEncoding: 'cellSetSelection',\n    geneSelection,\n    cellSets: mergedCellSets,\n    cellSetSelection,\n    cellSetColor,\n    expressionDataAttrs: expressionMatrix,\n    theme,\n  }), [mergedCellSets, geneSelection, theme,\n    cellSetColor, cellSetSelection, expressionMatrix]);\n\n  const getCellInfo = useCallback((cellId) => {\n    if (cellId) {\n      const cellInfo = cells[cellId];\n      return {\n        [`${capitalize(observationsLabel)} ID`]: cellId,\n        ...(cellInfo ? cellInfo.factors : {}),\n      };\n    }\n    return null;\n  }, [cells, observationsLabel]);\n\n  const getGeneInfo = useCallback((geneId) => {\n    if (geneId) {\n      return { [`${capitalize(variablesLabel)} ID`]: geneId };\n    }\n    return null;\n  }, [variablesLabel]);\n\n  const cellsCount = expressionMatrix && expressionMatrix.rows\n    ? expressionMatrix.rows.length : 0;\n  const genesCount = expressionMatrix && expressionMatrix.cols\n    ? expressionMatrix.cols.length : 0;\n  const selectedCount = cellColors.size;\n  return (\n    <TitleInfo\n      title={title}\n      info={`${cellsCount} ${pluralize(observationsLabel, observationsPluralLabel, cellsCount)} × ${genesCount} ${pluralize(variablesLabel, variablesPluralLabel, genesCount)},\n             with ${selectedCount} ${pluralize(observationsLabel, observationsPluralLabel, selectedCount)} selected`}\n      urls={urls}\n      theme={theme}\n      removeGridComponent={removeGridComponent}\n      isReady={isReady && !isRendering}\n      options={(\n        <HeatmapOptions\n          geneExpressionColormap={geneExpressionColormap}\n          setGeneExpressionColormap={setGeneExpressionColormap}\n          geneExpressionColormapRange={geneExpressionColormapRange}\n          setGeneExpressionColormapRange={setGeneExpressionColormapRange}\n        />\n      )}\n    >\n      <Heatmap\n        ref={deckRef}\n        transpose={transpose}\n        viewState={{ zoom: zoomX, target: [targetX, targetY] }}\n        setViewState={({ zoom, target }) => {\n          setZoomX(zoom);\n          setZoomY(zoom);\n          setTargetX(target[0]);\n          setTargetY(target[1]);\n        }}\n        colormapRange={geneExpressionColormapRange}\n        setColormapRange={setGeneExpressionColormapRange}\n        height={height}\n        width={width}\n        theme={theme}\n        uuid={uuid}\n        expressionMatrix={expressionMatrix}\n        cellColors={cellColors}\n        colormap={geneExpressionColormap}\n        setIsRendering={setIsRendering}\n        setCellHighlight={setCellHighlight}\n        setGeneHighlight={setGeneHighlight}\n        setComponentHover={() => {\n          setComponentHover(uuid);\n        }}\n        updateViewInfo={setComponentViewInfo}\n        observationsTitle={observationsTitle}\n        variablesTitle={variablesTitle}\n      />\n      {!disableTooltip && (\n      <HeatmapTooltipSubscriber\n        parentUuid={uuid}\n        width={width}\n        height={height}\n        transpose={transpose}\n        getCellInfo={getCellInfo}\n        getGeneInfo={getGeneInfo}\n        cellHighlight={cellHighlight}\n        geneHighlight={geneHighlight}\n      />\n      )}\n    </TitleInfo>\n  );\n}\n","import React, { useCallback } from 'react';\nimport debounce from 'lodash/debounce';\n\nimport Checkbox from '@material-ui/core/Checkbox';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\nimport Slider from '@material-ui/core/Slider';\nimport { makeStyles, createStyles } from '@material-ui/core/styles';\nimport { useStyles } from '../shared-plot-options/styles';\nimport OptionsContainer from '../shared-plot-options/OptionsContainer';\nimport CellColorEncodingOption from '../shared-plot-options/CellColorEncodingOption';\nimport OptionSelect from '../shared-plot-options/OptionSelect';\nimport { GLSL_COLORMAPS } from '../../layers/constants';\n\nconst useToggleStyles = makeStyles(() => createStyles({\n  cameraLabel: {\n    padding: '0px 0px 0px 16px',\n  },\n  box: {\n    padding: '0px',\n  },\n  button: {\n    padding: '0px 0px 0px 8px',\n  },\n}));\n\nconst ToggleFixedAxisButton = ({\n  setSpatialAxisFixed,\n  spatialAxisFixed,\n  use3d,\n}) => {\n  const classes = useToggleStyles();\n  return (\n    <TableRow>\n      <TableCell className={classes.cameraLabel}>\n      Fix Camera Axis\n      </TableCell>\n      <TableCell className={classes.box}>\n        <Checkbox\n          onClick={() => setSpatialAxisFixed(!spatialAxisFixed)}\n          disabled={!use3d}\n          checked={Boolean(spatialAxisFixed)}\n        />\n      </TableCell>\n    </TableRow>\n  );\n};\n\nexport default function SpatialOptions(props) {\n  const {\n    observationsLabel,\n    cellColorEncoding,\n    setCellColorEncoding,\n    setSpatialAxisFixed,\n    spatialAxisFixed,\n    use3d,\n    geneExpressionColormap,\n    setGeneExpressionColormap,\n    geneExpressionColormapRange,\n    setGeneExpressionColormapRange,\n    canShowExpressionOptions,\n    canShowColorEncodingOption,\n    canShow3DOptions,\n  } = props;\n\n  function handleGeneExpressionColormapChange(event) {\n    setGeneExpressionColormap(event.target.value);\n  }\n\n  function handleColormapRangeChange(event, value) {\n    setGeneExpressionColormapRange(value);\n  }\n  const handleColormapRangeChangeDebounced = useCallback(\n    debounce(handleColormapRangeChange, 5, { trailing: true }),\n    [handleColormapRangeChange],\n  );\n\n  const classes = useStyles();\n\n  return (\n    <OptionsContainer>\n      {canShowColorEncodingOption ? (\n        <CellColorEncodingOption\n          observationsLabel={observationsLabel}\n          cellColorEncoding={cellColorEncoding}\n          setCellColorEncoding={setCellColorEncoding}\n        />\n      ) : null}\n      {canShow3DOptions ? (\n        <ToggleFixedAxisButton\n          setSpatialAxisFixed={setSpatialAxisFixed}\n          spatialAxisFixed={spatialAxisFixed}\n          use3d={use3d}\n        />\n      ) : null}\n      {canShowExpressionOptions ? (\n        <>\n          <TableRow>\n            <TableCell className={classes.labelCell} htmlFor=\"gene-expression-colormap-select\">\n          Gene Expression Colormap\n            </TableCell>\n            <TableCell className={classes.inputCell}>\n              <OptionSelect\n                className={classes.select}\n                value={geneExpressionColormap}\n                onChange={handleGeneExpressionColormapChange}\n                inputProps={{\n                  id: 'gene-expression-colormap-select',\n                }}\n              >\n                {GLSL_COLORMAPS.map(cmap => (\n                  <option key={cmap} value={cmap}>{cmap}</option>\n                ))}\n              </OptionSelect>\n            </TableCell>\n          </TableRow>\n          <TableRow>\n            <TableCell className={classes.labelCell}>\n          Gene Expression Colormap Range\n            </TableCell>\n            <TableCell className={classes.inputCell}>\n              <Slider\n                classes={{ root: classes.slider, valueLabel: classes.sliderValueLabel }}\n                value={geneExpressionColormapRange}\n                onChange={handleColormapRangeChangeDebounced}\n                aria-labelledby=\"gene-expression-colormap-range-slider\"\n                valueLabelDisplay=\"auto\"\n                step={0.005}\n                min={0.0}\n                max={1.0}\n              />\n            </TableCell>\n          </TableRow>\n        </>\n      ) : null}\n    </OptionsContainer>\n  );\n}\n","import React from 'react';\nimport Tooltip2D from '../tooltip/Tooltip2D';\nimport TooltipContent from '../tooltip/TooltipContent';\nimport { useComponentHover, useComponentViewInfo } from '../../app/state/hooks';\n\nexport default function SpatialTooltipSubscriber(props) {\n  const {\n    parentUuid,\n    cellHighlight,\n    width,\n    height,\n    getCellInfo,\n  } = props;\n\n  const sourceUuid = useComponentHover();\n  const viewInfo = useComponentViewInfo(parentUuid);\n\n  const [cellInfo, x, y] = (cellHighlight && getCellInfo ? (\n    [\n      getCellInfo(cellHighlight),\n      ...(viewInfo && viewInfo.project ? viewInfo.project(cellHighlight) : [null, null]),\n    ]\n  ) : ([null, null, null]));\n\n  return (\n    (cellInfo ? (\n      <Tooltip2D\n        x={x}\n        y={y}\n        parentUuid={parentUuid}\n        sourceUuid={sourceUuid}\n        parentWidth={width}\n        parentHeight={height}\n      >\n        <TooltipContent info={cellInfo} />\n      </Tooltip2D>\n    ) : null)\n  );\n}\n","import React, { useEffect, useMemo, useCallback } from 'react';\nimport TitleInfo from '../TitleInfo';\nimport { capitalize } from '../../utils';\nimport {\n  useDeckCanvasSize, useReady, useUrls, useExpressionValueGetter,\n} from '../hooks';\nimport { setCellSelection, mergeCellSets, canLoadResolution } from '../utils';\nimport {\n  useCellsData,\n  useCellSetsData,\n  useGeneSelection,\n  useMoleculesData,\n  useNeighborhoodsData,\n  useRasterData,\n  useExpressionAttrs,\n} from '../data-hooks';\nimport { getCellColors } from '../interpolate-colors';\nimport Spatial from './Spatial';\nimport SpatialOptions from './SpatialOptions';\nimport SpatialTooltipSubscriber from './SpatialTooltipSubscriber';\nimport { makeSpatialSubtitle, getInitialSpatialTargets } from './utils';\nimport {\n  useCoordination,\n  useLoaders,\n  useSetComponentHover,\n  useSetComponentViewInfo,\n  useAuxiliaryCoordination,\n} from '../../app/state/hooks';\nimport { COMPONENT_COORDINATION_TYPES } from '../../app/state/coordination';\n\nconst SPATIAL_DATA_TYPES = [\n  'cells', 'molecules', 'raster', 'cell-sets', 'expression-matrix',\n];\n\n/**\n * A subscriber component for the spatial plot.\n * @param {object} props\n * @param {string} props.theme The current theme name.\n * @param {object} props.coordinationScopes The mapping from coordination types to coordination\n * scopes.\n * @param {function} props.removeGridComponent The callback function to pass to TitleInfo,\n * to call when the component has been removed from the grid.\n * @param {string} props.title The component title.\n */\nexport default function SpatialSubscriber(props) {\n  const {\n    uuid,\n    coordinationScopes,\n    removeGridComponent,\n    observationsLabelOverride: observationsLabel = 'cell',\n    observationsPluralLabelOverride: observationsPluralLabel = `${observationsLabel}s`,\n    subobservationsLabelOverride: subobservationsLabel = 'molecule',\n    subobservationsPluralLabelOverride: subobservationsPluralLabel = `${subobservationsLabel}s`,\n    theme,\n    disableTooltip = false,\n    title = 'Spatial',\n    disable3d,\n    globalDisable3d,\n  } = props;\n\n  const loaders = useLoaders();\n  const setComponentHover = useSetComponentHover();\n  const setComponentViewInfo = useSetComponentViewInfo(uuid);\n\n  // Get \"props\" from the coordination space.\n  const [{\n    dataset,\n    spatialZoom: zoom,\n    spatialTargetX: targetX,\n    spatialTargetY: targetY,\n    spatialTargetZ: targetZ,\n    spatialRotationX: rotationX,\n    spatialRotationY: rotationY,\n    spatialRotationZ: rotationZ,\n    spatialRotationOrbit: rotationOrbit,\n    spatialOrbitAxis: orbitAxis,\n    spatialRasterLayers: rasterLayers,\n    spatialCellsLayer: cellsLayer,\n    spatialMoleculesLayer: moleculesLayer,\n    spatialNeighborhoodsLayer: neighborhoodsLayer,\n    cellFilter,\n    cellHighlight,\n    geneSelection,\n    cellSetSelection,\n    cellSetColor,\n    cellColorEncoding,\n    additionalCellSets,\n    spatialAxisFixed,\n    geneExpressionColormap,\n    geneExpressionColormapRange,\n  }, {\n    setSpatialZoom: setZoom,\n    setSpatialTargetX: setTargetX,\n    setSpatialTargetY: setTargetY,\n    setSpatialTargetZ: setTargetZ,\n    setSpatialRotationX: setRotationX,\n    setSpatialRotationOrbit: setRotationOrbit,\n    setSpatialOrbitAxis: setOrbitAxis,\n    setSpatialRasterLayers: setRasterLayers,\n    setSpatialCellsLayer: setCellsLayer,\n    setSpatialMoleculesLayer: setMoleculesLayer,\n    setSpatialNeighborhoodsLayer: setNeighborhoodsLayer,\n    setCellFilter,\n    setCellSetSelection,\n    setCellHighlight,\n    setCellSetColor,\n    setCellColorEncoding,\n    setAdditionalCellSets,\n    setMoleculeHighlight,\n    setSpatialAxisFixed,\n    setGeneExpressionColormap,\n    setGeneExpressionColormapRange,\n  }] = useCoordination(COMPONENT_COORDINATION_TYPES.spatial, coordinationScopes);\n\n  const [\n    {\n      rasterLayersCallbacks,\n    },\n  ] = useAuxiliaryCoordination(\n    COMPONENT_COORDINATION_TYPES.layerController,\n    coordinationScopes,\n  );\n\n  const use3d = rasterLayers?.some(l => l.use3d);\n\n  const [urls, addUrl, resetUrls] = useUrls();\n  const [\n    isReady,\n    setItemIsReady,\n    setItemIsNotReady,\n    resetReadyItems,\n  ] = useReady(\n    SPATIAL_DATA_TYPES,\n  );\n  const [width, height, deckRef] = useDeckCanvasSize();\n\n  // Reset file URLs and loader progress when the dataset has changed.\n  // Also clear the array of automatically-initialized layers.\n  useEffect(() => {\n    resetUrls();\n    resetReadyItems();\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  // Get data from loaders using the data hooks.\n  const [cells, cellsCount] = useCellsData(\n    loaders, dataset, setItemIsReady, addUrl, false,\n    { setSpatialCellsLayer: setCellsLayer },\n    { spatialCellsLayer: cellsLayer },\n  );\n  const [molecules, moleculesCount, locationsCount] = useMoleculesData(\n    loaders, dataset, setItemIsReady, addUrl, false,\n    { setSpatialMoleculesLayer: setMoleculesLayer },\n    { spatialMoleculesLayer: moleculesLayer },\n  );\n  const [neighborhoods] = useNeighborhoodsData(\n    loaders, dataset, setItemIsReady, addUrl, false,\n    { setSpatialNeighborhoodsLayer: setNeighborhoodsLayer },\n    { spatialNeighborhoodsLayer: neighborhoodsLayer },\n  );\n  const [cellSets] = useCellSetsData(\n    loaders, dataset, setItemIsReady, addUrl, false,\n    { setCellSetSelection, setCellSetColor },\n    { cellSetSelection, cellSetColor },\n  );\n  const [expressionData] = useGeneSelection(\n    loaders, dataset, setItemIsReady, false, geneSelection, setItemIsNotReady,\n  );\n  const [attrs] = useExpressionAttrs(\n    loaders, dataset, setItemIsReady, addUrl, false,\n  );\n  // eslint-disable-next-line no-unused-vars\n  const [raster, imageLayerLoaders, imageLayerMeta] = useRasterData(\n    loaders, dataset, setItemIsReady, addUrl, false,\n    { setSpatialRasterLayers: setRasterLayers },\n    { spatialRasterLayers: rasterLayers },\n  );\n\n  const layers = useMemo(() => {\n    // Only want to pass in cells layer once if there is not `bitmask`.\n    // We pass in the cells data regardless because it is needed for selection,\n    // but the rendering layer itself is not needed.\n    const canPassInCellsLayer = !imageLayerMeta.some(l => l?.metadata?.isBitmask);\n    return [\n      ...(moleculesLayer ? [{ ...moleculesLayer, type: 'molecules' }] : []),\n      ...((cellsLayer && canPassInCellsLayer) ? [{ ...cellsLayer, type: 'cells' }] : []),\n      ...(neighborhoodsLayer ? [{ ...neighborhoodsLayer, type: 'neighborhoods' }] : []),\n      ...(rasterLayers ? rasterLayers.map(l => ({ ...l, type: (l.type && ['raster', 'bitmask'].includes(l.type) ? l.type : 'raster') })) : []),\n    ];\n  }, [cellsLayer, moleculesLayer, neighborhoodsLayer, rasterLayers, imageLayerMeta]);\n\n  useEffect(() => {\n    if ((typeof targetX !== 'number' || typeof targetY !== 'number')) {\n      const {\n        initialTargetX, initialTargetY, initialTargetZ, initialZoom,\n      } = getInitialSpatialTargets({\n        width,\n        height,\n        cells,\n        imageLayerLoaders,\n        useRaster: Boolean(loaders[dataset].loaders.raster),\n        use3d,\n      });\n      setTargetX(initialTargetX);\n      setTargetY(initialTargetY);\n      setTargetZ(initialTargetZ);\n      setZoom(initialZoom);\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [imageLayerLoaders, cells, targetX, targetY, setTargetX, setTargetY, setZoom, use3d]);\n\n  const mergedCellSets = useMemo(() => mergeCellSets(\n    cellSets, additionalCellSets,\n  ), [cellSets, additionalCellSets]);\n\n  const setCellSelectionProp = useCallback((v) => {\n    setCellSelection(\n      v, additionalCellSets, cellSetColor,\n      setCellSetSelection, setAdditionalCellSets, setCellSetColor,\n      setCellColorEncoding,\n    );\n  }, [additionalCellSets, cellSetColor, setCellColorEncoding,\n    setAdditionalCellSets, setCellSetColor, setCellSetSelection]);\n\n  const cellColors = useMemo(() => getCellColors({\n    cellColorEncoding,\n    expressionData: expressionData && expressionData[0],\n    geneSelection,\n    cellSets: mergedCellSets,\n    cellSetSelection,\n    cellSetColor,\n    expressionDataAttrs: attrs,\n    theme,\n  }), [cellColorEncoding, geneSelection, mergedCellSets, theme,\n    cellSetColor, cellSetSelection, expressionData, attrs]);\n\n  // The bitmask layer needs access to a array (i.e a texture) lookup of cell -> expression value\n  // where each cell id indexes into the array.\n  // Cell ids in `attrs.rows` do not necessaryily correspond to indices in that array, though,\n  // so we create a \"shifted\" array where this is the case.\n  const shiftedExpressionDataForBitmask = useMemo(() => {\n    const hasBitmask = imageLayerMeta.some(l => l?.metadata?.isBitmask);\n    if (attrs?.rows && expressionData && hasBitmask) {\n      const maxId = attrs.rows.reduce((max, curr) => Math.max(max, Number(curr)));\n      const result = new Uint8Array(maxId + 1);\n      // eslint-disable-next-line no-plusplus\n      for (let i = 0; i < attrs.rows.length; i++) {\n        const id = attrs.rows[i];\n        result.set(expressionData[0].slice(i, i + 1), Number(id));\n      }\n      return [result];\n    } return [new Uint8Array()];\n  }, [attrs, expressionData, imageLayerMeta]);\n\n  const cellSelection = useMemo(() => Array.from(cellColors.keys()), [cellColors]);\n\n  const getCellInfo = (cellId) => {\n    const cell = cells[cellId];\n    if (cell) {\n      return {\n        [`${capitalize(observationsLabel)} ID`]: cellId,\n        ...cell.factors,\n      };\n    }\n    return null;\n  };\n\n  const setViewState = ({\n    zoom: newZoom,\n    target,\n    rotationX: newRotationX,\n    rotationOrbit: newRotationOrbit,\n    orbitAxis: newOrbitAxis,\n  }) => {\n    setZoom(newZoom);\n    setTargetX(target[0]);\n    setTargetY(target[1]);\n    setTargetZ(target[2] || null);\n    setRotationX(newRotationX);\n    setRotationOrbit(newRotationOrbit);\n    setOrbitAxis(newOrbitAxis || null);\n  };\n\n  const subtitle = makeSpatialSubtitle({\n    observationsCount: cellsCount,\n    observationsLabel,\n    observationsPluralLabel,\n    subobservationsCount: moleculesCount,\n    subobservationsLabel,\n    subobservationsPluralLabel,\n    locationsCount,\n  });\n\n  // Set up a getter function for gene expression values, to be used\n  // by the DeckGL layer to obtain values for instanced attributes.\n  const getExpressionValue = useExpressionValueGetter({ attrs, expressionData });\n  const hasExpressionData = loaders[dataset].loaders['expression-matrix'];\n  const hasCellsData = loaders[dataset].loaders.cells\n    || imageLayerMeta.some(l => l?.metadata?.isBitmask);\n  const canLoad3DLayers = imageLayerLoaders.some(loader => Boolean(\n    Array.from({\n      length: loader.data.length,\n    }).filter((_, res) => canLoadResolution(loader.data, res)).length,\n  ));\n  // Only show 3D options if we can theoretically load the data and it is allowed to be loaded.\n  const canShow3DOptions = canLoad3DLayers\n    && !(disable3d?.length === imageLayerLoaders.length) && !globalDisable3d;\n\n  return (\n    <TitleInfo\n      title={title}\n      info={subtitle}\n      isSpatial\n      urls={urls}\n      theme={theme}\n      removeGridComponent={removeGridComponent}\n      isReady={isReady}\n      options={\n        // Only show button if there is expression or 3D data because only cells data\n        // does not have any options (i.e for color encoding, you need to switch to expression data)\n        canShow3DOptions || hasExpressionData ? (\n          <SpatialOptions\n            observationsLabel={observationsLabel}\n            cellColorEncoding={cellColorEncoding}\n            setCellColorEncoding={setCellColorEncoding}\n            setSpatialAxisFixed={setSpatialAxisFixed}\n            spatialAxisFixed={spatialAxisFixed}\n            use3d={use3d}\n            geneExpressionColormap={geneExpressionColormap}\n            setGeneExpressionColormap={setGeneExpressionColormap}\n            geneExpressionColormapRange={geneExpressionColormapRange}\n            setGeneExpressionColormapRange={setGeneExpressionColormapRange}\n            canShowExpressionOptions={hasExpressionData}\n            canShowColorEncodingOption={hasCellsData && hasExpressionData}\n            canShow3DOptions={canShow3DOptions}\n          />\n        ) : null\n      }\n    >\n      <Spatial\n        ref={deckRef}\n        uuid={uuid}\n        width={width}\n        height={height}\n        viewState={{\n          zoom,\n          target: [targetX, targetY, targetZ],\n          rotationX,\n          rotationY,\n          rotationZ,\n          rotationOrbit,\n          orbitAxis,\n        }}\n        setViewState={setViewState}\n        layers={layers}\n        cells={cells}\n        cellFilter={cellFilter}\n        cellSelection={cellSelection}\n        cellHighlight={cellHighlight}\n        cellColors={cellColors}\n        molecules={molecules}\n        neighborhoods={neighborhoods}\n        imageLayerLoaders={imageLayerLoaders}\n        setCellFilter={setCellFilter}\n        setCellSelection={setCellSelectionProp}\n        setCellHighlight={setCellHighlight}\n        setMoleculeHighlight={setMoleculeHighlight}\n        setComponentHover={() => {\n          setComponentHover(uuid);\n        }}\n        updateViewInfo={setComponentViewInfo}\n        rasterLayersCallbacks={rasterLayersCallbacks}\n        spatialAxisFixed={spatialAxisFixed}\n        geneExpressionColormap={geneExpressionColormap}\n        geneExpressionColormapRange={geneExpressionColormapRange}\n        expressionData={shiftedExpressionDataForBitmask}\n        cellColorEncoding={cellColorEncoding}\n        getExpressionValue={getExpressionValue}\n        theme={theme}\n      />\n      {!disableTooltip && (\n        <SpatialTooltipSubscriber\n          parentUuid={uuid}\n          cellHighlight={cellHighlight}\n          width={width}\n          height={height}\n          getCellInfo={getCellInfo}\n        />\n      )}\n    </TitleInfo>\n  );\n}\n","import React from 'react';\n\nexport default function Status(props) {\n  const warnClass = 'alert alert-warning my-0 details';\n  const { info, warn } = props;\n  const messages = [];\n  if (info) {\n    messages.push(<p className=\"details\" key=\"info\">{info}</p>);\n  }\n  if (warn) {\n    messages.push(<p className={warnClass} key=\"warn\">{warn}</p>);\n  }\n  return (\n    messages\n  );\n}\n","import React from 'react';\nimport clamp from 'lodash/clamp';\nimport { VegaPlot, VEGA_THEMES } from '../vega';\nimport { colorArrayToString } from './utils';\n\n/**\n * Cell set sizes displayed as a bar chart,\n * implemented with the VegaPlot component.\n * @param {object} props\n * @param {object[]} props.data The set size data, an array\n * of objects with properties `name`, `key`, `color`, and `size`.\n * @param {string} props.theme The name of the current Vitessce theme.\n * @param {number} props.width The container width.\n * @param {number} props.height The container height.\n * @param {number} props.marginRight The size of the margin\n * on the right side of the plot, to account for the vega menu button.\n * By default, 90.\n * @param {number} props.marginBottom The size of the margin\n * on the bottom of the plot, to account for long x-axis labels.\n * By default, 120.\n * @param {number} props.keyLength The length of the `key` property of\n * each data point. Assumes all key strings have the same length.\n * By default, 36.\n */\nexport default function CellSetSizesPlot(props) {\n  const {\n    data: rawData,\n    theme,\n    width,\n    height,\n    marginRight = 90,\n    marginBottom = 120,\n    keyLength = 36,\n  } = props;\n\n  // Add a property `keyName` which concatenates the key and the name,\n  // which is both unique and can easily be converted\n  // back to the name by taking a substring.\n  // Add a property `colorString` which contains the `[r, g, b]` color\n  // after converting to a color hex string.\n  const data = rawData.map(d => ({\n    ...d,\n    keyName: d.key + d.name,\n    colorString: colorArrayToString(d.color),\n  }));\n\n  // Manually set the color scale so that Vega-Lite does\n  // not choose the colors automatically.\n  const colors = {\n    domain: data.map(d => d.key),\n    range: data.map(d => d.colorString),\n  };\n\n  // Get an array of keys for sorting purposes.\n  const keys = data.map(d => d.keyName);\n\n  const spec = {\n    mark: { type: 'bar' },\n    encoding: {\n      x: {\n        field: 'keyName',\n        type: 'nominal',\n        axis: { labelExpr: `substring(datum.label, ${keyLength})` },\n        title: 'Cell Set',\n        sort: keys,\n      },\n      y: {\n        field: 'size',\n        type: 'quantitative',\n        title: 'Cell Set Size',\n      },\n      color: {\n        field: 'key',\n        type: 'nominal',\n        scale: colors,\n        legend: null,\n      },\n      tooltip: {\n        field: 'size',\n        type: 'quantitative',\n      },\n    },\n    width: clamp(width - marginRight, 10, Infinity),\n    height: clamp(height - marginBottom, 10, Infinity),\n    config: VEGA_THEMES[theme],\n  };\n\n  return (\n    <VegaPlot\n      data={data}\n      spec={spec}\n    />\n  );\n}\n","import React from 'react';\nimport RcTree from 'rc-tree';\nimport classNames from 'classnames';\n\n/**\n * A helper component around the rc-tree\n * library's tree component, to set\n * default props.\n */\nconst Tree = React.forwardRef((props, ref) => {\n  const {\n    prefixCls,\n    className,\n    showIcon,\n    blockNode,\n    children,\n    checkable,\n  } = props;\n  return (\n    <RcTree\n      itemHeight={32}\n      ref={ref}\n      {...props}\n      className={classNames(className, {\n        [`${prefixCls}-icon-hide`]: !showIcon,\n        [`${prefixCls}-block-node`]: blockNode,\n      })}\n      checkable={checkable ? <span className={`${prefixCls}-checkbox-inner`} /> : checkable}\n    >\n      {children}\n    </RcTree>\n  );\n});\n\nTree.defaultProps = {\n  virtual: false,\n  checkable: false,\n  showIcon: false,\n  blockNode: true,\n  prefixCls: 'rc-tree',\n};\n\nexport default Tree;\n","import React, { useRef } from 'react';\nimport RcTooltip from 'rc-tooltip';\nimport { useVitessceContainer } from '../hooks';\n\n/**\n * This is a small wrapper around the Tooltip component from the rc-tooltip library,\n * which is required to be able to apply theme styles to the tooltip.\n * The default `getTooltipContainer` function used by rc-tooltip\n * just returns `document.body` (see https://github.com/react-component/tooltip#props),\n * We want theme styles to be applied relative to the closest `.vitessce-container`\n * ancestor element.\n * https://github.com/vitessce/vitessce/pull/494#discussion_r395957914\n * @param {object} props Props are passed through to the <RcTooltip/> from the library.\n */\nexport default function HelpTooltip(props) {\n  const { title, content, overlayClassName } = props;\n  const spanRef = useRef();\n  const getTooltipContainer = useVitessceContainer(spanRef);\n\n  const overlay = title || content;\n\n  return (\n    <>\n      <span ref={spanRef} />\n      <RcTooltip\n        getTooltipContainer={getTooltipContainer}\n        overlayClassName={overlayClassName}\n        overlay={overlay}\n        {...props}\n      />\n    </>\n  );\n}\n\nHelpTooltip.defaultProps = {\n  overlayClassName: 'help-tooltip',\n  placement: 'top',\n  trigger: 'hover',\n  mouseEnterDelay: 0.2,\n  mouseLeaveDelay: 0,\n};\n","import React from 'react';\nimport HelpTooltip from './HelpTooltip';\n\n/**\n * This is a wrapper around the HelpTooltip component, to style it as a popover,\n * and change the trigger to \"click\" rather than \"hover\".\n * @param {*} props Props are passed through to the HelpTooltip component.\n */\nexport default function Popover(props) {\n  return (\n    <HelpTooltip {...props} />\n  );\n}\n\nPopover.defaultProps = {\n  overlayClassName: 'popover',\n  placement: 'top',\n  trigger: 'click',\n  mouseEnterDelay: 0,\n  mouseLeaveDelay: 0,\n};\n","import React, { useState, useEffect } from 'react';\nimport { TwitterPicker } from 'react-color';\nimport { colorArrayToString, callbackOnKeyPress } from './utils';\nimport { PALETTE } from '../utils';\nimport Popover from './Popover';\n\n/**\n * Wrapper around a button element that supports asking for confirmation.\n * @param {object} props\n * @param {string} props.title The main button text.\n * @param {string} props.subtitle Smaller text on a line beneath the main text. Optional.\n * @param {function} props.onClick A \"clean up\" handler passed from the parent,\n * to alert the parent Popover component that it should close the popover after the button has\n * fired its handler.\n * @param {function} props.handler A function to call on button click (or after confirmation).\n * @param {string} props.handlerKey A key associated with the button, to support accessibility.\n * @param {boolean} props.confirm Does the user need to press the button again to confirm?\n * By default, false.\n * @param {boolean} props.visible The visibility state from the parent popover,\n * so that on visibility change, the button can clear its confirmation state.\n */\nfunction PopoverMenuListButton(props) {\n  const {\n    title, subtitle, onClick, handler, handlerKey, confirm,\n    visible,\n  } = props;\n\n  const [isConfirming, setIsConfirming] = useState(false);\n\n  useEffect(() => {\n    // Want to clear the \"confirming\",\n    // state if the user hides the popover.\n    setIsConfirming(false);\n  }, [visible]);\n\n  function handleOrRequireConfirm() {\n    if (!confirm || isConfirming) {\n      onClick();\n      handler();\n    } else {\n      setIsConfirming(true);\n    }\n  }\n\n  const titleWithConfirm = `${isConfirming ? 'Confirm ' : ''}${title}`;\n\n  return (\n    <button\n      title={titleWithConfirm}\n      type=\"button\"\n      onClick={handleOrRequireConfirm}\n      onKeyPress={e => callbackOnKeyPress(e, handlerKey, handleOrRequireConfirm)}\n    >{titleWithConfirm}\n      {subtitle && (<><br /><span className=\"small\">{subtitle}</span></>)}\n    </button>\n  );\n}\n\n/**\n * Helper component to create a list of buttons for the body of a popover.\n * If the color, setColor, and palette props are provided then a color picker\n * will be rendered at the top of the button list.\n * @param {object} props\n * @param {object[]} props.menuConfig The list of button definition objects.\n * `{ title, subtitle, confirm, handler, handlerKey }`\n * @param {function} props.onClick A \"clean up\" handler passed from the parent,\n * to alert the parent Popover component that it should close the popover after the button has\n * fired its handler.\n * @param {number[]} props.color The current color. Optional.\n * @param {string} props.palette The color palette for the color picker. Optional.\n * @param {boolean} props.setColor The handler to call when a color has been selected. Optional.\n * @param {boolean} props.visible The visibility state from the parent popover,\n * so that on visibility change, buttons can clear confirmation states.\n */\nfunction PopoverMenuList(props) {\n  const {\n    menuConfig,\n    onClick,\n    color = null,\n    palette = null,\n    setColor = null,\n    visible,\n  } = props;\n\n  function handleColorChange({ rgb }) {\n    if (rgb && setColor) {\n      setColor([rgb.r, rgb.g, rgb.b]);\n    }\n  }\n\n  const defaultPalette = palette\n    ? palette.map(colorArrayToString)\n    : PALETTE.concat([[255, 255, 255], [128, 128, 128], [0, 0, 0]]).map(colorArrayToString);\n\n  return (\n    <div>\n      {color && setColor && defaultPalette && (\n        <TwitterPicker\n          className=\"popover-menu-color\"\n          disableAlpha\n          width={108}\n          triangle=\"hide\"\n          colors={defaultPalette}\n          color={colorArrayToString(color)}\n          onChangeComplete={handleColorChange}\n        />\n      )}\n      <ul className=\"popover-menu-list\">\n        {menuConfig.map(item => (\n          <li key={item.title + item.subtitle}>\n            <PopoverMenuListButton\n              {...item}\n              onClick={onClick}\n              visible={visible}\n            />\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n}\n\n/**\n * Helper component to create a popover component with a list of buttons.\n * If the color, setColor, and palette props are provided then a color picker\n * will be rendered at the top of the button list.\n * @param {object} props\n * @param {object[]} props.menuConfig The list of button definition objects.\n * `{ title, subtitle, confirm, handler, handlerKey }`\n * @param {string} placement Where to place the popover (top, bottom, left, right).\n * @param {number[]} props.color The current color. Optional.\n * @param {string} props.palette The color palette for the color picker. Optional.\n * @param {boolean} props.setColor The handler to call when a color has been selected. Optional.\n * @param {Element|React.Component} props.children Children to render,\n * which will trigger the popover on click.\n */\nexport default function PopoverMenu(props) {\n  const {\n    menuConfig, placement, children,\n    color = null, setColor = null, palette = null,\n  } = props;\n\n  const [visible, setVisible] = useState(false);\n\n  return (\n    <Popover\n      content={(\n        <PopoverMenuList\n          menuConfig={menuConfig}\n          onClick={() => setVisible(false)}\n          color={color}\n          setColor={setColor}\n          palette={palette}\n          visible={visible}\n        />\n)}\n      placement={placement}\n      visible={visible}\n      onVisibleChange={setVisible}\n    >\n      {children}\n    </Popover>\n  );\n}\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M12 18c1.657 0 3 1.343 3 3s-1.343 3-3 3-3-1.343-3-3 1.343-3 3-3zm0-9c1.657 0 3 1.343 3 3s-1.343 3-3 3-3-1.343-3-3 1.343-3 3-3zm0-9c1.657 0 3 1.343 3 3s-1.343 3-3 3-3-1.343-3-3 1.343-3 3-3z\"\n});\n\nfunction SvgMenu(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2);\n}\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgMenu, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/menu.bc56e94a.svg\";\nexport { ForwardRef as ReactComponent };","import React, { useState } from 'react';\nimport clsx from 'clsx';\nimport { TreeNode as RcTreeNode } from 'rc-tree';\nimport { getDataAndAria } from 'rc-tree/es/util';\nimport classNames from 'classnames';\nimport range from 'lodash/range';\nimport isEqual from 'lodash/isEqual';\nimport PopoverMenu from './PopoverMenu';\nimport HelpTooltip from './HelpTooltip';\nimport { callbackOnKeyPress, colorArrayToString, getLevelTooltipText } from './utils';\nimport { ReactComponent as MenuSVG } from '../../assets/menu.svg';\nimport { getDefaultColor } from '../utils';\n\n\n/**\n * Construct a `menuConfig` array for the PopoverMenu component.\n * @param {object} props The props for the TreeNode component.\n * @returns {object[]} An array of menu items to pass to PopoverMenu.\n */\nfunction makeNodeViewMenuConfig(props) {\n  const {\n    path,\n    level,\n    height,\n    onCheckNode,\n    onNodeRemove,\n    onNodeSetIsEditing,\n    onExportLevelZeroNodeJSON,\n    onExportLevelZeroNodeTabular,\n    onExportSetJSON,\n    checkable,\n    editable,\n    exportable,\n    checked,\n  } = props;\n\n  return [\n    ...(editable ? [\n      {\n        title: 'Rename',\n        handler: () => { onNodeSetIsEditing(path, true); },\n        handlerKey: 'r',\n      },\n      {\n        title: 'Delete',\n        confirm: true,\n        handler: () => { onNodeRemove(path); },\n        handlerKey: 'd',\n      },\n    ] : []),\n    ...(level === 0 && exportable ? [\n      {\n        title: 'Export hierarchy',\n        subtitle: '(to JSON file)',\n        handler: () => { onExportLevelZeroNodeJSON(path); },\n        handlerKey: 'j',\n      },\n      ...(height <= 1 ? [\n        {\n          title: 'Export hierarchy',\n          subtitle: '(to CSV file)',\n          handler: () => { onExportLevelZeroNodeTabular(path); },\n          handlerKey: 't',\n        },\n      ] : []),\n    ] : []),\n    ...(level > 0 ? [\n      ...(checkable ? [\n        {\n          title: (checked ? 'Uncheck' : 'Check'),\n          handler: () => { onCheckNode(path, !checked); },\n          handlerKey: 's',\n        },\n      ] : []),\n      ...(exportable ? [\n        {\n          title: 'Export set',\n          subtitle: '(to JSON file)',\n          handler: () => { onExportSetJSON(path); },\n          handlerKey: 'e',\n        },\n      ] : []),\n    ] : []),\n  ];\n}\n\n/**\n * The \"static\" node component to render when the user is not renaming.\n * @param {object} props The props for the TreeNode component.\n */\nfunction NamedSetNodeStatic(props) {\n  const {\n    title,\n    path,\n    nodeKey,\n    level,\n    height,\n    color,\n    checkbox,\n    isChecking,\n    isLeaf,\n    onNodeSetColor,\n    onNodeView,\n    expanded,\n    onCheckLevel,\n    checkedLevelPath,\n    checkedLevelIndex,\n    disableTooltip,\n    size,\n    datatype,\n    editable,\n    theme,\n  } = props;\n  const shouldCheckNextLevel = (level === 0 && !expanded);\n  const nextLevelToCheck = (\n    (checkedLevelIndex && isEqual(path, checkedLevelPath) && checkedLevelIndex < height)\n      ? checkedLevelIndex + 1\n      : 1\n  );\n  const numberFormatter = new Intl.NumberFormat('en-US');\n  const niceSize = numberFormatter.format(size);\n  let tooltipText;\n  if (shouldCheckNextLevel) {\n    tooltipText = getLevelTooltipText(nextLevelToCheck);\n  } else if (isLeaf || !expanded) {\n    tooltipText = `Color individual set (${niceSize} ${datatype}${(size === 1 ? '' : 's')})`;\n  } else {\n    tooltipText = 'Color by expanded descendants';\n  }\n  // If this is a level zero node and is _not_ expanded, then upon click,\n  // the behavior should be to color by the first or next cluster level.\n  // If this is a level zero node and _is_ expanded, or if any other node,\n  // click should trigger onNodeView.\n  const onClick = (level === 0 && !expanded\n    ? () => onCheckLevel(nodeKey, nextLevelToCheck)\n    : () => onNodeView(path)\n  );\n  const tooltipProps = (disableTooltip ? { visible: false } : {});\n  const popoverMenuConfig = makeNodeViewMenuConfig(props);\n  return (\n    <span>\n      <HelpTooltip title={tooltipText} {...tooltipProps}>\n        <button\n          type=\"button\"\n          onClick={onClick}\n          onKeyPress={e => callbackOnKeyPress(e, 'v', () => onNodeView(path))}\n          className=\"title-button\"\n        >\n          {title}\n        </button>\n      </HelpTooltip>\n      {popoverMenuConfig.length > 0 ? (\n        <PopoverMenu\n          menuConfig={makeNodeViewMenuConfig(props)}\n          color={level > 0 && editable ? (color || getDefaultColor(theme)) : null}\n          setColor={c => onNodeSetColor(path, c)}\n        >\n          <MenuSVG className=\"node-menu-icon\" />\n        </PopoverMenu>\n      ) : null}\n      {level > 0 && isChecking ? checkbox : null}\n      {level > 0 && (<span className=\"node-size-label\">{niceSize}</span>)}\n    </span>\n  );\n}\n\n/**\n * The \"editing\" node component to render when the user is renaming,\n * containing a text input field and a save button.\n * @param {object} props The props for the TreeNode component.\n */\nfunction NamedSetNodeEditing(props) {\n  const {\n    title,\n    path,\n    onNodeSetName,\n    onNodeCheckNewName,\n  } = props;\n  const [currentTitle, setCurrentTitle] = useState(title);\n\n  // Do not allow the user to save a potential name if it conflicts with\n  // another name in the hierarchy.\n  const hasConflicts = onNodeCheckNewName(path, currentTitle);\n  function trySetName() {\n    if (!hasConflicts) {\n      onNodeSetName(path, currentTitle, true);\n    }\n  }\n  return (\n    <span className=\"title-button-with-input\">\n      <input\n        // eslint-disable-next-line jsx-a11y/no-autofocus\n        autoFocus\n        className=\"title-input\"\n        type=\"text\"\n        value={currentTitle}\n        onChange={(e) => { setCurrentTitle(e.target.value); }}\n        onKeyPress={e => callbackOnKeyPress(\n          e,\n          'Enter',\n          trySetName,\n        )}\n        onFocus={e => e.target.select()}\n      />\n      {!hasConflicts && (\n        <button\n          type=\"button\"\n          className=\"title-save-button\"\n          onClick={trySetName}\n        >\n          Save\n        </button>\n      )}\n    </span>\n  );\n}\n\n/**\n * A \"delegation\" component, to decide whether to render\n * an \"editing\" vs. \"static\" node component.\n * @param {object} props The props for the TreeNode component.\n */\nfunction NamedSetNode(props) {\n  const {\n    isEditing,\n    isCurrentSet,\n  } = props;\n  return (\n    (isEditing || isCurrentSet)\n      ? (<NamedSetNodeEditing {...props} />)\n      : (<NamedSetNodeStatic {...props} />)\n  );\n}\n\n/**\n * Buttons for viewing each hierarchy level,\n * rendered below collapsed level zero nodes.\n * @param {object} props The props for the (level zero) TreeNode component.\n */\nfunction LevelsButtons(props) {\n  const {\n    nodeKey,\n    path,\n    height,\n    onCheckLevel,\n    checkedLevelPath,\n    checkedLevelIndex,\n    hasColorEncoding,\n  } = props;\n  function onCheck(event) {\n    if (event.target.checked) {\n      const newLevel = parseInt(event.target.value, 10);\n      onCheckLevel(nodeKey, newLevel);\n    }\n  }\n  return (\n    <div className=\"level-buttons-container\">\n      {range(1, height + 1).map((i) => {\n        const isChecked = isEqual(path, checkedLevelPath) && i === checkedLevelIndex;\n        return (\n          <div className=\"level-buttons\" key={i}>\n            <HelpTooltip title={getLevelTooltipText(i)}>\n              <input\n                className={clsx('level-radio-button', { checked: isChecked && !hasColorEncoding })}\n                type=\"checkbox\"\n                value={i}\n                checked={isChecked && hasColorEncoding}\n                onChange={onCheck}\n              />\n            </HelpTooltip>\n          </div>\n        );\n      })}\n    </div>\n  );\n}\n\n/**\n * Render the \"switcher\" icon.\n * Arrow for collapsed/expanded non-leaf nodes,\n * or square for leaf nodes.\n * @param {object} props The props for the TreeNode component.\n */\nfunction SwitcherIcon(props) {\n  const {\n    isLeaf, isOpen, color,\n  } = props;\n  const hexColor = (color ? colorArrayToString(color) : undefined);\n  if (isLeaf) {\n    return (\n      <i\n        className=\"anticon anticon-circle rc-tree-switcher-icon\"\n      >\n        <svg\n          viewBox=\"0 0 1024 1024\"\n          focusable=\"false\"\n          data-icon=\"caret-down\"\n          width=\"1em\"\n          height=\"1em\"\n          aria-hidden=\"true\"\n        >\n          <rect fill={hexColor} x={600 / 2} y={600 / 2} width={1024 - 600} height={1024 - 600} />\n        </svg>\n      </i>\n    );\n  }\n  return (\n    <i\n      className=\"anticon anticon-caret-down rc-tree-switcher-icon\"\n    >\n      <svg\n        viewBox=\"0 0 1024 1024\"\n        focusable=\"false\"\n        data-icon=\"caret-down\"\n        width=\"1em\"\n        height=\"1em\"\n        aria-hidden=\"true\"\n      >\n        <path\n          fill={(isOpen ? '#444' : hexColor)}\n          d=\"M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z\"\n        />\n      </svg>\n    </i>\n  );\n}\n\n/**\n * A custom TreeNode component.\n * @extends {RcTreeNode} TreeNode from the rc-tree library.\n */\nexport default class TreeNode extends RcTreeNode {\n  /**\n   * Override the main node text elements.\n   */\n  renderSelector = () => {\n    const {\n      title,\n      isCurrentSet,\n      isSelected,\n      isEditing,\n      onDragStart: onDragStartProp,\n    } = this.props;\n    const {\n      rcTree: {\n        prefixCls: prefixClass,\n        draggable,\n      },\n    } = this.context;\n\n    const onDragStart = (e) => {\n      onDragStartProp();\n      this.onDragStart(e);\n    };\n\n    const wrapClass = `${prefixClass}-node-content-wrapper`;\n    const isDraggable = (!isCurrentSet && !isEditing && draggable);\n    return (\n      <span\n        ref={this.setSelectHandle}\n        title={title}\n        className={classNames(\n          wrapClass,\n          `${wrapClass}-${this.getNodeState() || 'normal'}`,\n          isSelected && `${prefixClass}-node-selected`,\n          isDraggable && 'draggable',\n        )}\n        draggable={isDraggable}\n        aria-grabbed={isDraggable}\n        onDragStart={isDraggable ? onDragStart : undefined}\n      >\n        <NamedSetNode\n          {...this.props}\n          prefixClass={prefixClass}\n          checkbox={this.renderCheckbox()}\n        />\n        {this.renderLevels()}\n      </span>\n    );\n  };\n\n  /**\n   * Render the LevelsButtons component if this node\n   * is a collapsed level zero node.\n   */\n  renderLevels = () => {\n    const { level, expanded } = this.props;\n    if (level !== 0 || expanded) {\n      return null;\n    }\n    return (\n      <LevelsButtons\n        {...this.props}\n      />\n    );\n  }\n\n  /**\n   * Override the switcher element.\n   */\n  renderSwitcher = () => {\n    const { expanded, isLeaf, color } = this.props;\n    const {\n      rcTree: {\n        prefixCls: prefixClass,\n        onNodeExpand,\n      },\n    } = this.context;\n\n    const onNodeExpandWrapper = (e) => {\n      // Do not call onNodeExpand if the node is a leaf node.\n      if (!isLeaf) {\n        onNodeExpand(e, this);\n      }\n    };\n\n    const switcherClass = classNames(\n      `${prefixClass}-switcher`,\n      { [`${prefixClass}-switcher_${(expanded ? 'open' : 'close')}`]: !isLeaf },\n    );\n    return (\n      <span\n        className={switcherClass}\n        onClick={onNodeExpandWrapper}\n        onKeyPress={e => callbackOnKeyPress(e, 'd', onNodeExpandWrapper)}\n        role=\"button\"\n        tabIndex=\"0\"\n      >\n        <SwitcherIcon\n          isLeaf={isLeaf}\n          isOpen={expanded}\n          color={color}\n        />\n      </span>\n    );\n  };\n\n  /**\n   * Override main render function,\n   * to enable overriding the sub-render functions\n   * for switcher, selector, etc.\n   */\n  render() {\n    const {\n      style, loading, level,\n      dragOver, dragOverGapTop, dragOverGapBottom,\n      isLeaf,\n      expanded, selected, checked, halfChecked,\n      onDragEnd: onDragEndProp,\n      expandable,\n      ...otherProps\n    } = this.props;\n    const {\n      rcTree: {\n        prefixCls: prefixClass,\n        filterTreeNode,\n        draggable,\n      },\n    } = this.context;\n    const disabled = this.isDisabled();\n    const dataAndAriaAttributeProps = getDataAndAria(otherProps);\n\n    const onDragEnd = (e) => {\n      onDragEndProp();\n      this.onDragEnd(e);\n    };\n\n    return (\n      <li\n        className={classNames('rc-tree-treenode', `level-${level}-treenode`, {\n          [`${prefixClass}-treenode-disabled`]: disabled,\n          [`${prefixClass}-treenode-switcher-${expanded ? 'open' : 'close'}`]: !isLeaf,\n          [`${prefixClass}-treenode-checkbox-checked`]: checked,\n          [`${prefixClass}-treenode-checkbox-indeterminate`]: halfChecked,\n          [`${prefixClass}-treenode-selected`]: selected,\n          [`${prefixClass}-treenode-loading`]: loading,\n\n          'drag-over': !disabled && dragOver,\n          'drag-over-gap-top': !disabled && dragOverGapTop,\n          'drag-over-gap-bottom': !disabled && dragOverGapBottom,\n          'filter-node': filterTreeNode && filterTreeNode(this),\n        })}\n        style={style}\n        role=\"treeitem\"\n        onDragEnter={draggable ? this.onDragEnter : undefined}\n        onDragOver={draggable ? this.onDragOver : undefined}\n        onDragLeave={draggable ? this.onDragLeave : undefined}\n        onDrop={draggable ? this.onDrop.bind(this) : undefined}\n        onDragEnd={draggable ? onDragEnd : undefined}\n        {...dataAndAriaAttributeProps}\n      >\n        {expandable ? this.renderSwitcher() : null}\n        {this.renderSelector()}\n        {this.renderChildren()}\n      </li>\n    );\n  }\n}\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgUnion(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 16.433999 10.234\",\n    height: 12,\n    width: 18,\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"g\", {\n    transform: \"translate(0.117,-2.883)\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"m 11.467471,11.811278 c 0.198237,-0.322177 0.508,-1.011333 0.653661,-1.454255 0.659343,-2.0049141 0.44323,-4.2620847 -0.577734,-6.0340822 l -0.168844,-0.2930481 0.105744,0.017887 c 0.759902,0.1285441 1.368762,0.3699553 1.856675,0.7361658 1.988296,1.4923476 2.192477,4.3353549 0.434717,6.0529895 -0.641216,0.626581 -1.299647,0.94683 -2.294136,1.115833 l -0.108488,0.01844 z M 4.3162122,11.919169 C 1.9278944,11.487872 0.46692382,9.0323123 1.234873,6.7401372 1.5621727,5.763213 2.2610593,4.9489746 3.1840041,4.4693005 3.5978035,4.2542401 3.9427842,4.145371 4.5197023,4.0477802 L 4.6254464,4.0298927 4.4571836,4.3223069 C 3.4332707,6.1017061 3.2180432,8.3476022 3.878868,10.357023 c 0.1458466,0.443487 0.4554716,1.132155 0.6542959,1.455285 0.054471,0.08853 0.087814,0.159599 0.074096,0.157937 -0.013718,-0.0017 -0.1446898,-0.02465 -0.2910477,-0.05108 z M 5.0000001,3 C 2.2,3 0,5.2 0,8 c 0,2.8 2.2,5 5.0000001,5 0.6,0 1.1,-0.1 1.6,-0.3 C 5.3000001,11.6 4.5,9.7999998 4.5,8 4.5,6.2 5.3000001,4.5 6.6000001,3.3 c -0.5,-0.2 -1,-0.3 -1.6,-0.3 z M 4.65,4.02 C 3.92,5.17 3.51,6.54 3.51,8 c 0,1.4599998 0.42,2.83 1.14,3.98 C 2.61,11.8 1.01,10.08 1.01,8 1.01,5.92 2.61,4.2 4.65,4.02 Z M 8,4 C 6.8,4.9 6,6.4 6,8 6,9.6 6.8,11.1 8,12 9.2,11.1 10,9.7 10,8 10,6.3 9.2,4.9 8,4 Z m 3,-1 c 2.8,0 5,2.2 5,5 0,2.8 -2.2,5 -5,5 C 10.4,13 9.9,12.9 9.4,12.7 10.7,11.6 11.5,9.8 11.5,8 11.5,6.2 10.7,4.5 9.4,3.3 9.9,3.1 10.4,3 11,3 Z m 0.35,1.02 c 0.73,1.15 1.14,2.52 1.14,3.98 0,1.46 -0.42,2.83 -1.14,3.98 2.04,-0.18 3.64,-1.9 3.64,-3.98 0,-2.08 -1.6,-3.8 -3.64,-3.98 z\",\n    style: {\n      strokeWidth: 0.234,\n      strokeMiterlimit: 4,\n      strokeDasharray: \"none\",\n      strokeOpacity: 1\n    }\n  })));\n}\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgUnion, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/union.de5168c6.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgIntersection(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 18,\n    height: 12,\n    viewBox: \"0 0 16 10\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"g\", {\n    transform: \"translate(0,-3)\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M 5.0000001,3 C 2.2,3 0,5.2 0,8 c 0,2.8 2.2,5 5.0000001,5 0.6,0 1.1,-0.1 1.6,-0.3 C 5.3000001,11.6 4.5,9.7999998 4.5,8 4.5,6.2 5.3000001,4.5 6.6000001,3.3 c -0.5,-0.2 -1,-0.3 -1.6,-0.3 z M 4.65,4.02 C 3.92,5.17 3.51,6.54 3.51,8 c 0,1.4599998 0.42,2.83 1.14,3.98 C 2.61,11.8 1.01,10.08 1.01,8 1.01,5.92 2.61,4.2 4.65,4.02 Z M 8,4 C 6.8,4.9 6,6.4 6,8 6,9.6 6.8,11.1 8,12 9.2,11.1 10,9.7 10,8 10,6.3 9.2,4.9 8,4 Z m 3,-1 c 2.8,0 5,2.2 5,5 0,2.8 -2.2,5 -5,5 C 10.4,13 9.9,12.9 9.4,12.7 10.7,11.6 11.5,9.8 11.5,8 11.5,6.2 10.7,4.5 9.4,3.3 9.9,3.1 10.4,3 11,3 Z m 0.35,1.02 c 0.73,1.15 1.14,2.52 1.14,3.98 0,1.46 -0.42,2.83 -1.14,3.98 2.04,-0.18 3.64,-1.9 3.64,-3.98 0,-2.08 -1.6,-3.8 -3.64,-3.98 z\",\n    style: {\n      strokeWidth: 0.234,\n      strokeMiterlimit: 4,\n      strokeDasharray: \"none\",\n      strokeOpacity: 1\n    }\n  })));\n}\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgIntersection, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/intersection.b0003109.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"rect\", {\n  x: \"5%\",\n  width: \"90%\",\n  height: \"100%\",\n  fill: \"white\"\n});\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"rect\", {\n  x: 0,\n  y: 0,\n  width: 25.3804963846,\n  height: 16,\n  mask: \"url(#union-mask)\"\n}));\n\nfunction SvgComplement(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    id: \"svg14\",\n    viewBox: \"0 0 25.3804963846 16\",\n    height: 16,\n    width: 25.3804963846,\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"defs\", null, /*#__PURE__*/React.createElement(\"mask\", {\n    id: \"union-mask\",\n    x: 0,\n    y: 0,\n    width: 25.3804963846,\n    height: 16\n  }, _ref2, /*#__PURE__*/React.createElement(\"g\", {\n    transform: \"translate(4.69,0)\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"m 11.467471,11.811278 c 0.198237,-0.322177 0.508,-1.011333 0.653661,-1.454255 0.659343,-2.0049141 0.44323,-4.2620847 -0.577734,-6.0340822 l -0.168844,-0.2930481 0.105744,0.017887 c 0.759902,0.1285441 1.368762,0.3699553 1.856675,0.7361658 1.988296,1.4923476 2.192477,4.3353549 0.434717,6.0529895 -0.641216,0.626581 -1.299647,0.94683 -2.294136,1.115833 l -0.108488,0.01844 z M 4.3162122,11.919169 C 1.9278944,11.487872 0.46692382,9.0323123 1.234873,6.7401372 1.5621727,5.763213 2.2610593,4.9489746 3.1840041,4.4693005 3.5978035,4.2542401 3.9427842,4.145371 4.5197023,4.0477802 L 4.6254464,4.0298927 4.4571836,4.3223069 C 3.4332707,6.1017061 3.2180432,8.3476022 3.878868,10.357023 c 0.1458466,0.443487 0.4554716,1.132155 0.6542959,1.455285 0.054471,0.08853 0.087814,0.159599 0.074096,0.157937 -0.013718,-0.0017 -0.1446898,-0.02465 -0.2910477,-0.05108 z M 5.0000001,3 C 2.2,3 0,5.2 0,8 c 0,2.8 2.2,5 5.0000001,5 0.6,0 1.1,-0.1 1.6,-0.3 C 5.3000001,11.6 4.5,9.7999998 4.5,8 4.5,6.2 5.3000001,4.5 6.6000001,3.3 c -0.5,-0.2 -1,-0.3 -1.6,-0.3 z M 4.65,4.02 C 3.92,5.17 3.51,6.54 3.51,8 c 0,1.4599998 0.42,2.83 1.14,3.98 C 2.61,11.8 1.01,10.08 1.01,8 1.01,5.92 2.61,4.2 4.65,4.02 Z M 8,4 C 6.8,4.9 6,6.4 6,8 6,9.6 6.8,11.1 8,12 9.2,11.1 10,9.7 10,8 10,6.3 9.2,4.9 8,4 Z m 3,-1 c 2.8,0 5,2.2 5,5 0,2.8 -2.2,5 -5,5 C 10.4,13 9.9,12.9 9.4,12.7 10.7,11.6 11.5,9.8 11.5,8 11.5,6.2 10.7,4.5 9.4,3.3 9.9,3.1 10.4,3 11,3 Z m 0.35,1.02 c 0.73,1.15 1.14,2.52 1.14,3.98 0,1.46 -0.42,2.83 -1.14,3.98 2.04,-0.18 3.64,-1.9 3.64,-3.98 0,-2.08 -1.6,-3.8 -3.64,-3.98 z\",\n    style: {\n      strokeWidth: 0.234,\n      strokeMiterlimit: 4,\n      strokeDasharray: \"none\",\n      strokeOpacity: 1\n    },\n    fill: \"black\"\n  })))), _ref3);\n}\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgComplement, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/complement.c220ca8c.svg\";\nexport { ForwardRef as ReactComponent };","import React, { useCallback } from 'react';\nimport PopoverMenu from './PopoverMenu';\nimport {\n  handleImportJSON,\n  handleImportTabular,\n} from './io';\nimport {\n  MIME_TYPE_JSON,\n  MIME_TYPE_TABULAR,\n} from './constants';\n\nimport { ReactComponent as SetUnionSVG } from '../../assets/sets/union.svg';\nimport { ReactComponent as SetIntersectionSVG } from '../../assets/sets/intersection.svg';\nimport { ReactComponent as SetComplementSVG } from '../../assets/sets/complement.svg';\n\n/**\n * A plus button for creating or importing set hierarchies.\n * @param {object} props\n * @param {string} props.datatype The data type to validate imported hierarchies against.\n * @param {function} props.onError A callback to pass error message strings.\n * @param {function} props.onImportTree A callback to pass successfully-validated tree objects.\n * @param {function} props.onCreateLevelZeroNode A callback to create a new empty\n * level zero node.\n * @param {boolean} props.importable Is importing allowed?\n * If not, the import button will not be rendered.\n * @param {boolean} props.editable Is editing allowed?\n * If not, the create button will not be rendered.\n */\nexport function PlusButton(props) {\n  const {\n    datatype, onError, onImportTree, onCreateLevelZeroNode,\n    importable, editable,\n  } = props;\n\n  /**\n   * Import a file, then process the imported data via the supplied handler function.\n   * @param {Function} importHandler The function to process the imported data.\n   * @param {string} mimeType The accepted mime type for the file upload input.\n   * @returns {Function} An import function corresponding to the supplied parameters.\n   */\n  const onImport = useCallback((importHandler, mimeType) => () => {\n    const uploadInputNode = document.createElement('input');\n    uploadInputNode.setAttribute('type', 'file');\n    uploadInputNode.setAttribute('accept', mimeType);\n    document.body.appendChild(uploadInputNode); // required for firefox\n    uploadInputNode.click();\n    uploadInputNode.addEventListener('change', (event) => {\n      if (!(window.File && window.FileReader && window.FileList && window.Blob)) {\n        onError('Local file reading APIs are not fully supported in this browser.');\n        return;\n      }\n      const { files } = event.target;\n      if (!files || files.length !== 1) {\n        onError('Incorrect number of files selected.');\n        return;\n      }\n      const reader = new FileReader();\n      reader.addEventListener('load', () => {\n        const { result } = reader;\n        try {\n          const treeToImport = importHandler(result, datatype);\n          onError(false); // Clear any previous import error.\n          onImportTree(treeToImport);\n        } catch (e) {\n          onError(e.message);\n        }\n      }, false);\n      reader.readAsText(files[0]);\n    });\n    uploadInputNode.remove();\n  }, [datatype, onError, onImportTree]);\n\n  const menuConfig = [\n    ...(editable ? [\n      {\n        title: 'Create hierarchy',\n        handler: onCreateLevelZeroNode,\n        handlerKey: 'n',\n      },\n    ] : []),\n    ...(importable ? [\n      {\n        title: 'Import hierarchy',\n        subtitle: '(from CSV file)',\n        handler: onImport(handleImportTabular, MIME_TYPE_TABULAR),\n        handlerKey: 'c',\n      },\n      {\n        title: 'Import hierarchy',\n        subtitle: '(from JSON file)',\n        handler: onImport(handleImportJSON, MIME_TYPE_JSON),\n        handlerKey: 'j',\n      },\n    ] : []),\n  ];\n\n  return (menuConfig.length > 0 ? (\n    <PopoverMenu\n      menuConfig={menuConfig}\n    >\n      <button className=\"plus-button\" type=\"submit\">+</button>\n    </PopoverMenu>\n  ) : null);\n}\n\n/**\n * Set operations buttons (union, intersection, complement)\n * and a view checked sets button.\n * @param {object} props\n * @param {function} props.onUnion A callback for the union button.\n * @param {function} props.onIntersection A callback for the intersection button.\n * @param {function} props.onComplement A callback for the complement button.\n * @param {boolean} props.operatable Are set operations allowed?\n * If not, the union, intersection, and complement buttons will not be rendered.\n */\nexport function SetOperationButtons(props) {\n  const {\n    onUnion,\n    onIntersection,\n    onComplement,\n    operatable,\n    hasCheckedSetsToUnion,\n    hasCheckedSetsToIntersect,\n    hasCheckedSetsToComplement,\n  } = props;\n\n  return (\n    <>\n      {operatable && (\n        <>\n          <button\n            onClick={onUnion}\n            title=\"New set from union of checked sets\"\n            type=\"submit\"\n            disabled={!hasCheckedSetsToUnion}\n          >\n            <SetUnionSVG />\n          </button>\n          <button\n            onClick={onIntersection}\n            title=\"New set from intersection of checked sets\"\n            type=\"submit\"\n            disabled={!hasCheckedSetsToIntersect}\n          >\n            <SetIntersectionSVG />\n          </button>\n          <button\n            onClick={onComplement}\n            title=\"New set from complement of checked sets\"\n            type=\"submit\"\n            disabled={!hasCheckedSetsToComplement}\n          >\n            <SetComplementSVG />\n          </button>\n        </>\n      )}\n    </>\n  );\n}\n","/* eslint-disable no-underscore-dangle */\nimport React, { useState, useMemo } from 'react';\nimport isEqual from 'lodash/isEqual';\nimport Tree from './Tree';\nimport TreeNode from './TreeNode';\nimport { PlusButton, SetOperationButtons } from './SetsManagerButtons';\nimport { nodeToRenderProps } from './cell-set-utils';\nimport { getDefaultColor } from '../utils';\nimport { pathToKey } from './utils';\n\nfunction processNode(node, prevPath, setColor, theme) {\n  const nodePath = [...prevPath, node.name];\n  return {\n    ...node,\n    ...(node.children ? ({\n      children: node.children\n        .map(c => processNode(c, nodePath, setColor)),\n    }) : {}),\n    color: setColor?.find(d => isEqual(d.path, nodePath))?.color || getDefaultColor(theme),\n  };\n}\n\nfunction processSets(sets, setColor, theme) {\n  return {\n    ...sets,\n    tree: sets ? sets.tree.map(lzn => processNode(lzn, [], setColor, theme)) : [],\n  };\n}\n\nfunction getAllKeys(node, path = []) {\n  if (!node) {\n    return null;\n  }\n  const newPath = [...path, node.name];\n  if (node.children) {\n    return [pathToKey(newPath), ...node.children.flatMap(v => getAllKeys(v, newPath))];\n  }\n  return pathToKey(newPath);\n}\n\n/**\n * A generic hierarchical set manager component.\n * @prop {object} tree An object representing set hierarchies.\n * @prop {string} datatype The data type for sets (e.g. \"cell\")\n * @prop {function} clearPleaseWait A callback to signal that loading is complete.\n * @prop {boolean} draggable Whether tree nodes can be rearranged via drag-and-drop.\n * By default, true.\n * @prop {boolean} checkable Whether to show the \"Check\" menu button\n * and checkboxes for selecting multiple sets. By default, true.\n * @prop {boolean} editable Whether to show rename, delete, color, or create options.\n * By default, true.\n * @prop {boolean} expandable Whether to allow hierarchies to be expanded\n * to show the list or tree of sets contained. By default, true.\n * @prop {boolean} operatable Whether to enable union, intersection,\n * and complement operations on checked sets. By default, true.\n * @prop {boolean} exportable Whether to enable exporting hierarchies and sets to files.\n * By default, true.\n * @prop {boolean} importable Whether to enable importing hierarchies from files.\n * By default, true.\n * @prop {function} onError Function to call with error messages (failed import validation, etc).\n * @prop {function} onCheckNode Function to call when a single node has been checked or un-checked.\n * @prop {function} onExpandNode Function to call when a node has been expanded.\n * @prop {function} onDropNode Function to call when a node has been dragged-and-dropped.\n * @prop {function} onCheckLevel Function to call when an entire hierarchy level has been selected,\n * via the \"Color by cluster\" and \"Color by subcluster\" buttons below collapsed level zero nodes.\n * @prop {function} onNodeSetColor Function to call when a new node color has been selected.\n * @prop {function} onNodeSetName Function to call when a node has been renamed.\n * @prop {function} onNodeRemove Function to call when the user clicks the \"Delete\" menu button\n * to remove a node.\n * @prop {function} onNodeView Function to call when the user wants to view the set associated\n * with a particular node.\n * @prop {function} onImportTree Function to call when a tree has been imported\n * using the \"plus\" button.\n * @prop {function} onCreateLevelZeroNode Function to call when a user clicks the \"Create hierarchy\"\n * menu option using the \"plus\" button.\n * @prop {function} onExportLevelZeroNode Function to call when a user wants to\n * export an entire hierarchy via the \"Export hierarchy\" menu button for a\n * particular level zero node.\n * @prop {function} onExportSet Function to call when a user wants to export a set associated with\n * a particular node via the \"Export set\" menu button.\n * @prop {function} onUnion Function to call when a user wants to create a new set from the union\n * of the sets associated with the currently-checked nodes.\n * @prop {function} onIntersection Function to call when a user wants to create a new set from the\n * intersection of the sets associated with the currently-checked nodes.\n * @prop {function} onComplement Function to call when a user wants to create a new set from the\n * complement of the (union of the) sets associated with the currently-checked nodes.\n * @prop {function} onView Function to call when a user wants to view the sets\n * associated with the currently-checked nodes.\n * @prop {string} theme \"light\" or \"dark\" for the vitessce theme\n */\nexport default function SetsManager(props) {\n  const {\n    theme,\n    sets,\n    additionalSets,\n    setColor, // TODO: use this\n    levelSelection: checkedLevel,\n    setSelection,\n    setExpansion,\n    hasColorEncoding,\n    datatype,\n    draggable = true,\n    checkable = true,\n    editable = true,\n    expandable = true,\n    operatable = true,\n    exportable = true,\n    importable = true,\n    onError,\n    onCheckNode,\n    onExpandNode,\n    onDropNode,\n    onCheckLevel,\n    onNodeSetColor,\n    onNodeSetName,\n    onNodeCheckNewName,\n    onNodeRemove,\n    onNodeView,\n    onImportTree,\n    onCreateLevelZeroNode,\n    onExportLevelZeroNodeJSON,\n    onExportLevelZeroNodeTabular,\n    onExportSetJSON,\n    onUnion,\n    onIntersection,\n    onComplement,\n    hasCheckedSetsToUnion,\n    hasCheckedSetsToIntersect,\n    hasCheckedSetsToComplement,\n  } = props;\n\n  const isChecking = true;\n  const autoExpandParent = true;\n  const [isDragging, setIsDragging] = useState(false);\n  const [isEditingNodeName, setIsEditingNodeName] = useState(null);\n\n  const processedSets = useMemo(() => processSets(\n    sets, setColor, theme,\n  ), [sets, setColor, theme]);\n  const processedAdditionalSets = useMemo(() => processSets(\n    additionalSets, setColor, theme,\n  ), [additionalSets, setColor, theme]);\n\n  const additionalSetKeys = (processedAdditionalSets\n    ? processedAdditionalSets.tree.flatMap(v => getAllKeys(v, []))\n    : []\n  );\n\n  const allSetSelectionKeys = (setSelection || []).map(pathToKey);\n  const allSetExpansionKeys = (setExpansion || []).map(pathToKey);\n\n  const setSelectionKeys = allSetSelectionKeys.filter(k => !additionalSetKeys.includes(k));\n  const setExpansionKeys = allSetExpansionKeys.filter(k => !additionalSetKeys.includes(k));\n\n  const additionalSetSelectionKeys = allSetSelectionKeys.filter(k => additionalSetKeys.includes(k));\n  const additionalSetExpansionKeys = allSetExpansionKeys.filter(k => additionalSetKeys.includes(k));\n\n  /**\n   * Recursively render TreeNode components.\n   * @param {object[]} nodes An array of node objects.\n   * @returns {TreeNode[]|null} Array of TreeNode components or null.\n   */\n  function renderTreeNodes(nodes, readOnly, currPath) {\n    if (!nodes) {\n      return null;\n    }\n    return nodes.map((node) => {\n      const newPath = [...currPath, node.name];\n      return (\n        <TreeNode\n          theme={theme}\n          key={pathToKey(newPath)}\n          {...nodeToRenderProps(node, newPath, setColor)}\n\n          isEditing={isEqual(isEditingNodeName, newPath)}\n\n          datatype={datatype}\n          draggable={draggable && !readOnly}\n          editable={editable && !readOnly}\n          checkable={checkable}\n          expandable={expandable}\n          exportable={exportable}\n\n          hasColorEncoding={hasColorEncoding}\n          isChecking={isChecking}\n          checkedLevelPath={checkedLevel ? checkedLevel.levelZeroPath : null}\n          checkedLevelIndex={checkedLevel ? checkedLevel.levelIndex : null}\n\n          onCheckNode={onCheckNode}\n          onCheckLevel={onCheckLevel}\n          onNodeView={onNodeView}\n          onNodeSetColor={onNodeSetColor}\n          onNodeSetName={(targetPath, name) => {\n            onNodeSetName(targetPath, name);\n            setIsEditingNodeName(null);\n          }}\n          onNodeCheckNewName={onNodeCheckNewName}\n          onNodeSetIsEditing={setIsEditingNodeName}\n          onNodeRemove={onNodeRemove}\n          onExportLevelZeroNodeJSON={onExportLevelZeroNodeJSON}\n          onExportLevelZeroNodeTabular={onExportLevelZeroNodeTabular}\n          onExportSetJSON={onExportSetJSON}\n\n          disableTooltip={isDragging}\n          onDragStart={() => setIsDragging(true)}\n          onDragEnd={() => setIsDragging(false)}\n        >\n          {renderTreeNodes(node.children, readOnly, newPath, theme)}\n        </TreeNode>\n      );\n    });\n  }\n\n  return (\n    <div className=\"sets-manager\">\n      <div className=\"sets-manager-tree\">\n        <Tree\n          draggable={false}\n          checkable={checkable}\n\n          checkedKeys={setSelectionKeys}\n          expandedKeys={setExpansionKeys}\n          autoExpandParent={autoExpandParent}\n\n          onCheck={(checkedKeys, info) => onCheckNode(\n            info.node.props.nodeKey,\n            info.checked,\n          )}\n          onExpand={(expandedKeys, info) => onExpandNode(\n            expandedKeys,\n            info.node.props.nodeKey,\n            info.expanded,\n          )}\n        >\n          {renderTreeNodes(processedSets.tree, true, [], theme)}\n        </Tree>\n        <Tree\n          draggable /* TODO */\n          checkable={checkable}\n\n          checkedKeys={additionalSetSelectionKeys}\n          expandedKeys={additionalSetExpansionKeys}\n          autoExpandParent={autoExpandParent}\n\n          onCheck={(checkedKeys, info) => onCheckNode(\n            info.node.props.nodeKey,\n            info.checked,\n          )}\n          onExpand={(expandedKeys, info) => onExpandNode(\n            expandedKeys,\n            info.node.props.nodeKey,\n            info.expanded,\n          )}\n          onDrop={(info) => {\n            const { eventKey: dropKey } = info.node.props;\n            const { eventKey: dragKey } = info.dragNode.props;\n            const { dropToGap, dropPosition } = info;\n            onDropNode(dropKey, dragKey, dropPosition, dropToGap);\n          }}\n        >\n          {renderTreeNodes(processedAdditionalSets.tree, false, [], theme)}\n        </Tree>\n\n        <PlusButton\n          datatype={datatype}\n          onError={onError}\n          onImportTree={onImportTree}\n          onCreateLevelZeroNode={onCreateLevelZeroNode}\n          importable={importable}\n          editable={editable}\n        />\n      </div>\n      {isChecking ? (\n        <div className=\"set-operation-buttons\">\n          <SetOperationButtons\n            onUnion={onUnion}\n            onIntersection={onIntersection}\n            onComplement={onComplement}\n            operatable={operatable}\n\n            hasCheckedSetsToUnion={hasCheckedSetsToUnion}\n            hasCheckedSetsToIntersect={hasCheckedSetsToIntersect}\n            hasCheckedSetsToComplement={hasCheckedSetsToComplement}\n          />\n        </div>\n      ) : null}\n    </div>\n  );\n}\n","/* eslint-disable jsx-a11y/no-noninteractive-element-to-interactive-role */\n/* eslint-disable jsx-a11y/click-events-have-key-events */\nimport React, { useEffect, useCallback, useState } from 'react';\nimport { Table, AutoSizer } from 'react-virtualized';\nimport uuidv4 from 'uuid/v4';\nimport union from 'lodash/union';\nimport difference from 'lodash/difference';\nimport isEqual from 'lodash/isEqual';\n\n/**\n * A table with \"selectable\" rows.\n * @prop {string[]} columns An array of column names, corresponding to data object properties.\n * @prop {object[]} data An array of data objects used to populate table rows.\n * @prop {function} onChange Callback function,\n * passed a selection object when `allowMultiple` is false (and `null` if `allowUncheck` is true),\n * or passed an array of selection objects when `allowMultiple` is true.\n * @prop {string} idKey The key for a unique identifier property of `data` objects.\n * @prop {string} valueKey If initially-selected rows are required,\n * this key specifies a boolean property of the `data` objects\n * indicating those rows that should be initially selected.\n * @prop {boolean} allowMultiple Whether to allow multiple rows to be selected. By default, false.\n * @prop {boolean} allowUncheck Whether to allow selected rows to be un-checked. By default, false.\n * @prop {boolean} showTableHead Whether to show the table header element. By default, true.\n * @prop {boolean} showTableInputs Whether to show the table input elements for each row.\n * By default, false.\n */\nexport default function SelectableTable(props) {\n  const {\n    hasColorEncoding,\n    columns,\n    data,\n    onChange,\n    idKey = 'id',\n    valueKey = 'value',\n    allowMultiple = false,\n    allowUncheck = false,\n    showTableHead = true,\n    showTableInputs = false,\n    testHeight = undefined,\n    testWidth = undefined,\n  } = props;\n\n  const [selectedRows, setSelectedRows] = useState(null);\n\n  // Callback function to update the `selectedRows` state.\n  const onSelectRow = useCallback((value, checked) => {\n    if (checked || allowUncheck) {\n      if (!allowMultiple) {\n        setSelectedRows(checked ? [value] : []);\n      } else {\n        setSelectedRows(\n          checked\n            ? union(selectedRows || [], [value])\n            : difference(selectedRows || [], [value]),\n        );\n      }\n    }\n  }, [allowMultiple, allowUncheck, selectedRows]);\n\n  // Handler for checkbox input elements.\n  const handleInputChange = useCallback((event) => {\n    const { target } = event;\n    const { checked } = target;\n    const { value } = target;\n    onSelectRow(value, checked);\n  }, [onSelectRow]);\n\n  // Function to map row IDs to corresponding objects\n  // to pass to the `onChange` callback.\n  const getDataFromIds = useCallback(ids => ids.map(id => ({\n    [idKey]: id,\n    data: data.find(item => item[idKey] === id),\n  })), [data, idKey]);\n\n  // Function to check if a row ID has been selected.\n  const isSelected = useCallback(id => (\n    Array.isArray(selectedRows) && selectedRows.includes(id)\n  ), [selectedRows]);\n\n  /* eslint-disable react-hooks/exhaustive-deps */\n  useEffect(() => {\n    // Check whether an initial set of rows should be selected.\n    const initialSelectedRows = data\n      .map((d) => {\n        if (d[valueKey]) {\n          return d[idKey];\n        }\n        return null;\n      })\n      .filter(Boolean);\n    if (!isEqual(initialSelectedRows, selectedRows)) {\n      if (initialSelectedRows.length > 0) {\n        setSelectedRows(initialSelectedRows);\n      } else {\n        setSelectedRows(null);\n      }\n    }\n  }, [data, idKey, valueKey]);\n\n  /* eslint-disable react-hooks/exhaustive-deps */\n  useEffect(() => {\n    // Call the `onChange` prop function with an updated row or set of rows.\n    if (!onChange || !selectedRows) {\n      return;\n    }\n    const selectedRowData = getDataFromIds(selectedRows);\n    if (allowMultiple) {\n      onChange(selectedRowData);\n    } else if (selectedRows.length === 1) {\n      onChange(selectedRowData[0]);\n    } else if (selectedRows.length === 0) {\n      onChange(null);\n    }\n  }, [selectedRows]);\n\n  // Generate a unique ID to use in (for, id) label-input pairs.\n  const inputUuid = uuidv4();\n\n  // Class for first column of inputs, to hide them if desired.\n  const hiddenInputsClass = (showTableInputs ? '' : 'hidden-input-column');\n\n  const rowRenderer = ({ index, style }) => (\n    // eslint-disable-next-line jsx-a11y/interactive-supports-focus\n    <div\n      key={data[index][idKey]}\n      className={`table-item table-row ${isSelected(data[index][idKey]) ? 'row-checked ' : ''}`}\n      style={style}\n      role=\"button\"\n      onClick={() => onSelectRow(\n        data[index][idKey],\n        !isSelected(data[index][idKey]) || !hasColorEncoding,\n      )}\n    >\n      <div className={`input-container ${hiddenInputsClass} table-cell`}>\n        <label htmlFor={`${inputUuid}_${data[index][idKey]}`}>\n          <input\n            id={`${inputUuid}_${data[index][idKey]}`}\n            type=\"checkbox\"\n            className={(allowMultiple ? 'checkbox' : 'radio')}\n            name={inputUuid}\n            value={data[index][idKey]}\n            onChange={handleInputChange}\n            checked={isSelected(data[index][idKey])}\n          />\n        </label>\n      </div>\n      {columns.map(column => (\n        <div\n          className=\"table-cell\"\n          key={column}\n        >\n          {data[index][column]}\n        </div>\n      ))}\n    </div>\n  );\n\n  const headerRowRenderer = ({ style }) => (\n    <div className={`${hiddenInputsClass} table-row`} style={style}>\n      {columns.map(column => (\n        <div key={column}>{column}</div>\n      ))}\n    </div>\n  );\n\n  return (\n    <div className=\"selectable-table\">\n      <AutoSizer>\n        {({ width, height }) => (\n          <Table\n            height={testHeight || height}\n            gridStyle={{ outline: 'none' }}\n            rowCount={data.length}\n            // 24 is 1 em + padding in either direction (see _selectable_table.scss).\n            rowHeight={24}\n            headerHeight={showTableHead ? 24 : undefined}\n            rowRenderer={rowRenderer}\n            width={testWidth || width}\n            headerRowRenderer={showTableHead ? headerRowRenderer : undefined}\n            rowGetter={({ index }) => data[index]}\n          />\n        )}\n      </AutoSizer>\n    </div>\n  );\n}\n","import React, { useEffect, useState } from 'react';\nimport { SelectableTable } from '../selectable-table/index';\n\nexport default function Genes(props) {\n  const {\n    hasColorEncoding,\n    geneList = [],\n    geneSelection = [],\n    geneFilter = null,\n    setGeneSelection,\n  } = props;\n\n  const [searchTerm, setSearchTerm] = useState('');\n  const [searchResults, setSearchResults] = useState(geneList);\n\n  useEffect(() => {\n    const results = geneList\n      .filter(gene => gene.toLowerCase().includes(searchTerm.toLowerCase()));\n    setSearchResults(results);\n  }, [searchTerm, geneList]);\n\n  function onChange(selection) {\n    if (setGeneSelection && selection && selection.name) {\n      setGeneSelection([selection.name]);\n    }\n  }\n\n  const data = searchResults\n    .filter(gene => (geneFilter ? geneFilter.includes(gene) : true))\n    .sort((a, b) => a.localeCompare(b))\n    .map(\n      gene => ({ name: gene, value: (geneSelection ? geneSelection.includes(gene) : false) }),\n    );\n\n  const handleChange = (event) => {\n    setSearchTerm(event.target.value);\n  };\n\n  return (\n    <>\n      <input\n        className=\"search-bar\"\n        type=\"text\"\n        placeholder=\"Search\"\n        value={searchTerm}\n        onChange={handleChange}\n      />\n      <SelectableTable\n        columns={['name']}\n        data={data}\n        hasColorEncoding={hasColorEncoding}\n        idKey=\"name\"\n        valueKey=\"value\"\n        onChange={onChange}\n        allowUncheck={false}\n        showTableHead={false}\n      />\n    </>\n  );\n}\n","import React from 'react';\nimport range from 'lodash/range';\nimport { Matrix4 } from 'math.gl';\nimport Grid from '@material-ui/core/Grid';\nimport Slider from '@material-ui/core/Slider';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport Select from '@material-ui/core/Select';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport { getDefaultInitialViewState } from '@hms-dbmi/viv';\n\nimport {\n  getBoundingCube, getMultiSelectionStats,\n} from './utils';\nimport {\n  COLORMAP_OPTIONS,\n  canLoadResolution,\n  formatBytes,\n  getStatsForResolution,\n} from '../utils';\nimport { DEFAULT_RASTER_DOMAIN_TYPE } from '../spatial/constants';\nimport { StyledSelectionSlider, useSelectStyles } from './styles';\n\nconst DOMAIN_OPTIONS = ['Full', 'Min/Max'];\n\n/**\n * Wrapper for the dropdown that selects a colormap (None, viridis, magma, etc.).\n * @prop {Object} loader Loader object with metadata.\n * @prop {function} handleMultiPropertyChange Function to propgate multiple layer changes at once.\n * This prevents updates from overridding each other.\n * @prop {number} resolution Current 3D resolution.\n * @prop {boolean} disable3d Whether or not to enable 3D selection\n * @prop {function} setRasterLayerCallback Setter for callbacks that fire after raster/volume loads.\n * @prop {function} setAreAllChannelsLoading Setter for whether or not a given channel is loading.\n * @prop {Object} setViewState Setter for the current view state.\n * @prop {number} spatialHeight Height of the spatial component.\n * @prop {number} spatialWidth Width of the spatial component.\n * @prop {object} channels Channels object.\n * @prop {boolean} use3d Whether or not 3D is enabled for this layer.\n */\nfunction VolumeDropdown({\n  loader: loaderWithMeta,\n  handleMultiPropertyChange,\n  resolution: currResolution,\n  disable3d,\n  setRasterLayerCallback,\n  setAreAllChannelsLoading,\n  setViewState,\n  spatialHeight,\n  spatialWidth,\n  channels,\n  use3d,\n  modelMatrix,\n}) {\n  const classes = useSelectStyles();\n  const selections = channels.map(i => i.selection);\n  const { data: loader } = loaderWithMeta;\n  const handleChange = async (val) => {\n    // val is the resolution - null indicates 2D\n    const shouldUse3D = typeof val === 'number';\n    setAreAllChannelsLoading(true);\n    setRasterLayerCallback(() => {\n      setAreAllChannelsLoading(false);\n      setRasterLayerCallback(null);\n    });\n    if (shouldUse3D) {\n      const [xSlice, ySlice, zSlice] = getBoundingCube(loader);\n      const propertiesChanged = {\n        resolution: val,\n        xSlice,\n        ySlice,\n        zSlice,\n        use3d: shouldUse3D,\n      };\n      // Only make the fetch if needed i.e if the 3d was just being turned on.\n      if (!use3d) {\n        const { sliders } = await getMultiSelectionStats({\n          loader,\n          selections,\n          use3d: shouldUse3D,\n        });\n        propertiesChanged.channels = [...channels];\n        propertiesChanged.channels.forEach((ch, i) => {\n          // eslint-disable-next-line no-param-reassign\n          ch.slider = sliders[i];\n        });\n      }\n      // Update all properties at once to avoid overriding calls.\n      handleMultiPropertyChange(propertiesChanged);\n      const defaultViewState = getDefaultInitialViewState(loader,\n        { height: spatialHeight, width: spatialWidth }, 1.5, true, new Matrix4(modelMatrix));\n      setViewState({\n        ...defaultViewState,\n        rotationX: 0,\n        rotationOrbit: 0,\n      });\n    } else {\n      const { sliders } = await getMultiSelectionStats({\n        loader, selections, use3d: shouldUse3D,\n      });\n      const newChannels = [...channels];\n      newChannels.forEach((ch, i) => {\n        // eslint-disable-next-line no-param-reassign\n        ch.slider = sliders[i];\n      });\n      // Update all properties at once to avoid overriding calls.\n      handleMultiPropertyChange({\n        resolution: val,\n        use3d: shouldUse3D,\n        spatialAxisFixed: false,\n        channels: newChannels,\n      });\n      const defaultViewState = getDefaultInitialViewState(loader,\n        { height: spatialHeight, width: spatialWidth }, 0.5, false, new Matrix4(modelMatrix));\n      setViewState({\n        ...defaultViewState,\n        rotationX: null,\n        rotationOrbit: null,\n        orbitAxis: null,\n      });\n    }\n  };\n  const { labels, shape } = Array.isArray(loader) ? loader[0] : loader;\n  const hasZStack = shape[labels.indexOf('z')] > 1;\n  return (\n    <>\n      <Select\n        native\n        value={currResolution}\n        onChange={e => handleChange(\n          e.target.value === '2D' ? e.target.value : Number(e.target.value),\n        )\n        }\n        classes={{ root: classes.selectRoot }}\n      >\n        {\n          <option key=\"2D\" value=\"2D\">\n            2D Visualization\n          </option>\n        }\n        {Array.from({ length: loader.length })\n          .fill(0)\n          // eslint-disable-next-line no-unused-vars\n          .map((_, resolution) => {\n            if (loader) {\n              if (canLoadResolution(loader, resolution)) {\n                const {\n                  height,\n                  width,\n                  depthDownsampled,\n                  totalBytes,\n                } = getStatsForResolution(loader, resolution);\n                return (\n                  <option\n                    key={`(${height}, ${width}, ${depthDownsampled})`}\n                    value={resolution}\n                    disabled={\n                      disable3d\n                      || !hasZStack\n                    }\n                  >\n                    {`3D: ${resolution}x Downsampled, ~${formatBytes(\n                      totalBytes,\n                    )} per channel, (${height}, ${width}, ${depthDownsampled})`}\n                  </option>\n                );\n              }\n            }\n            return null;\n          })}\n      </Select>\n    </>\n  );\n}\n\n\n/**\n * Wrapper for the dropdown that selects a colormap (None, viridis, magma, etc.).\n * @prop {string} value Currently selected value for the colormap.\n * @prop {string} inputId Css id.\n * @prop {function} handleChange Callback for every change in colormap.\n */\nfunction ColormapSelect({ value, inputId, handleChange }) {\n  const classes = useSelectStyles();\n  return (\n    <Select\n      native\n      onChange={e => handleChange(e.target.value === '' ? null : e.target.value)}\n      value={value}\n      inputProps={{ name: 'colormap', id: inputId }}\n      style={{ width: '100%' }}\n      classes={{ root: classes.selectRoot }}\n    >\n      <option aria-label=\"None\" value=\"\">None</option>\n      {COLORMAP_OPTIONS.map(name => (\n        <option key={name} value={name}>\n          {name}\n        </option>\n      ))}\n    </Select>\n  );\n}\n\nfunction TransparentColorCheckbox({ value, handleChange }) {\n  return (\n    <Checkbox\n      style={{ float: 'left', padding: 0 }}\n      color=\"default\"\n      onChange={() => {\n        if (value) {\n          handleChange(null);\n        } else {\n          handleChange([0, 0, 0]);\n        }\n      }}\n      checked={Boolean(value)}\n    />\n  );\n}\n\n/**\n * Wrapper for the slider that updates opacity.\n * @prop {string} value Currently selected value between 0 and 1.\n * @prop {function} handleChange Callback for every change in opacity.\n */\nfunction OpacitySlider({ value, handleChange }) {\n  return (\n    <Slider\n      value={value}\n      onChange={(e, v) => handleChange(v)}\n      valueLabelDisplay=\"auto\"\n      getAriaLabel={() => 'opacity slider'}\n      min={0}\n      max={1}\n      step={0.01}\n      orientation=\"horizontal\"\n      style={{ marginTop: '7px' }}\n    />\n  );\n}\n\n/**\n * Wrapper for the dropdown that chooses the domain type.\n * @prop {string} value Currently selected value (i.e 'Max/Min').\n * @prop {string} inputId Css id.\n * @prop {function} handleChange Callback for every change in domain.\n */\nfunction SliderDomainSelector({ value, inputId, handleChange }) {\n  const classes = useSelectStyles();\n  return (\n    <Select\n      native\n      onChange={e => handleChange(e.target.value)}\n      value={value}\n      inputProps={{ name: 'domain-selector', id: inputId }}\n      style={{ width: '100%' }}\n      classes={{ root: classes.selectRoot }}\n    >\n      {DOMAIN_OPTIONS.map(name => (\n        <option key={name} value={name}>\n          {name}\n        </option>\n      ))}\n    </Select>\n  );\n}\n\n/**\n * Wrapper for the slider that chooses global selections (z, t etc.).\n * @prop {string} field The dimension this selects for (z, t etc.).\n * @prop {number} value Currently selected index (1, 4, etc.).\n * @prop {function} handleChange Callback for every change in selection.\n * @prop {function} possibleValues All available values for the field.\n */\nfunction GlobalSelectionSlider({\n  field,\n  value,\n  handleChange,\n  possibleValues,\n}) {\n  return (\n    <StyledSelectionSlider\n      value={value}\n      // See https://github.com/hms-dbmi/viv/issues/176 for why\n      // we have the two handlers.\n      onChange={\n        (event, newValue) => {\n          handleChange({ selection: { [field]: newValue }, event });\n        }\n      }\n      onChangeCommitted={\n        (event, newValue) => {\n          handleChange({ selection: { [field]: newValue }, event });\n        }\n      }\n      valueLabelDisplay=\"auto\"\n      getAriaLabel={() => `${field} slider`}\n      marks={possibleValues.map(val => ({ value: val }))}\n      min={Number(possibleValues[0])}\n      max={Number(possibleValues.slice(-1))}\n      orientation=\"horizontal\"\n      step={null}\n    />\n  );\n}\n\n/**\n * Wrapper for each of the options to show its name and then its UI component.\n * @prop {string} name Display name for option.\n * @prop {number} opacity Current opacity value.\n * @prop {string} inputId An id for css.\n * @prop {object} children Components to be rendered next to the name (slider, dropdown etc.).\n */\nfunction LayerOption({ name, inputId, children }) {\n  return (\n    <Grid container direction=\"row\" alignItems=\"center\" justify=\"center\">\n      <Grid item xs={6}>\n        <InputLabel htmlFor={inputId}>{name}:</InputLabel>\n      </Grid>\n      <Grid item xs={6}>\n        {children}\n      </Grid>\n    </Grid>\n  );\n}\n\n/**\n * Gloabl options for all channels (opacity, colormap, etc.).\n * @prop {string} colormap What colormap is currently selected (None, viridis etc.).\n * @prop {number} opacity Current opacity value.\n * @prop {function} handleColormapChange Callback for when colormap changes.\n * @prop {function} handleOpacityChange Callback for when opacity changes.\n * @prop {object} globalControlLabels All available options for global control (z and t).\n * @prop {function} handleGlobalChannelsSelectionChange Callback for global selection changes.\n * @prop {function} handleDomainChange Callback for domain type changes (full or min/max).\n * @prop {array} channels Current channel object for inferring the current global selection.\n * @prop {array} dimensions Currently available dimensions (channel, z, t etc.).\n * @prop {string} domainType One of Max/Min or Full (soon presets as well).\n * @prop {boolean} disableChannelsIfRgbDetected Whether or not we need colormap controllers if RGB.\n */\nfunction LayerOptions({\n  colormap,\n  opacity,\n  handleColormapChange,\n  handleOpacityChange,\n  handleTransparentColorChange,\n  globalControlLabels,\n  globalLabelValues,\n  handleGlobalChannelsSelectionChange,\n  handleSliderChange,\n  handleDomainChange,\n  transparentColor,\n  channels,\n  domainType,\n  disableChannelsIfRgbDetected,\n  shouldShowTransparentColor,\n  shouldShowDomain,\n  shouldShowColormap,\n  use3d,\n  loader,\n  handleMultiPropertyChange,\n  resolution,\n  disable3d,\n  setRasterLayerCallback,\n  setAreAllChannelsLoading,\n  setViewState,\n  spatialHeight,\n  spatialWidth,\n  modelMatrix,\n}) {\n  const { labels, shape } = Array.isArray(loader.data) ? loader.data[0] : loader.data;\n  const hasDimensionsAndChannels = labels.length > 0 && channels.length > 0;\n  const hasZStack = shape[labels.indexOf('z')] > 1;\n  // Only show volume button if we can actually view resolutions.\n  const hasViewableResolutions = Boolean(Array.from({\n    length: loader.data.length,\n  }).filter((_, res) => canLoadResolution(loader.data, res)).length);\n  return (\n    <Grid container direction=\"column\" style={{ width: '100%' }}>\n      {hasZStack\n        && !disable3d\n        && hasViewableResolutions\n        && (\n        <VolumeDropdown\n          loader={loader}\n          handleSliderChange={handleSliderChange}\n          handleDomainChange={handleDomainChange}\n          channels={channels}\n          handleMultiPropertyChange={handleMultiPropertyChange}\n          resolution={resolution}\n          disable3d={disable3d}\n          setRasterLayerCallback={setRasterLayerCallback}\n          setAreAllChannelsLoading={setAreAllChannelsLoading}\n          setViewState={setViewState}\n          spatialHeight={spatialHeight}\n          spatialWidth={spatialWidth}\n          use3d={use3d}\n          modelMatrix={modelMatrix}\n        />\n        )\n      }\n      {hasDimensionsAndChannels\n        && !use3d\n        && globalControlLabels.map(\n          field => shape[labels.indexOf(field)] > 1 && (\n          <LayerOption name={field} inputId={`${field}-slider`} key={field}>\n            <GlobalSelectionSlider\n              field={field}\n              value={globalLabelValues[field]}\n              handleChange={handleGlobalChannelsSelectionChange}\n              possibleValues={range(shape[labels.indexOf(field)])}\n            />\n          </LayerOption>\n          ),\n        )}\n      {!disableChannelsIfRgbDetected ? (\n        <>\n          {shouldShowColormap && (\n            <Grid item>\n              <LayerOption name=\"Colormap\" inputId=\"colormap-select\">\n                <ColormapSelect\n                  value={colormap || ''}\n                  inputId=\"colormap-select\"\n                  handleChange={handleColormapChange}\n                />\n              </LayerOption>\n            </Grid>\n          )}\n          {shouldShowDomain && (\n            <Grid item>\n              <LayerOption name=\"Domain\" inputId=\"domain-selector\">\n                <SliderDomainSelector\n                  value={domainType || DEFAULT_RASTER_DOMAIN_TYPE}\n                  handleChange={(value) => {\n                    handleDomainChange(value);\n                  }}\n                />\n              </LayerOption>\n            </Grid>\n          )}\n        </>\n      ) : null}\n      {!use3d && (\n        <Grid item>\n          <LayerOption name=\"Opacity\" inputId=\"opacity-slider\">\n            <OpacitySlider value={opacity} handleChange={handleOpacityChange} />\n          </LayerOption>\n        </Grid>\n      )}\n      {shouldShowTransparentColor && !use3d && (\n        <Grid item>\n          <LayerOption\n            name=\"Zero Transparent\"\n            inputId=\"transparent-color-selector\"\n          >\n            <TransparentColorCheckbox\n              value={transparentColor}\n              handleChange={handleTransparentColorChange}\n            />\n          </LayerOption>\n        </Grid>\n      )}\n    </Grid>\n  );\n}\n\nexport default LayerOptions;\n","import React from 'react';\nimport { Matrix4 } from 'math.gl';\nimport Grid from '@material-ui/core/Grid';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport { makeStyles, createStyles } from '@material-ui/core/styles';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport Slider from '@material-ui/core/Slider';\nimport { RENDERING_MODES, getDefaultInitialViewState } from '@hms-dbmi/viv';\nimport { abbreviateNumber, getBoundingCube } from './utils';\nimport { useSelectStyles } from './styles';\n\nconst useSlicerStyles = makeStyles(theme => createStyles({\n  enabled: {},\n  disabled: {\n    color: theme.palette.text.disabled,\n    // Because of the .5 opacity of the disabled color in the theme, and the fact\n    // that there are multiple overlaid parts to the slider,\n    // this needs to be set manually for the desired effect.\n    '& .MuiSlider-thumb': {\n      color: 'rgb(100, 100, 100, 1.0)',\n    },\n    '&  .MuiSlider-track': {\n      color: 'rgb(100, 100, 100, 1.0)',\n    },\n  },\n}));\n\nconst Slicer = ({\n  xSlice,\n  ySlice,\n  zSlice,\n  handleSlicerSetting,\n  loader,\n  use3d,\n}) => {\n  const [xSliceInit, ySliceInit, zSliceInit] = getBoundingCube(loader.data);\n  const sliceValuesAndSetSliceFunctions = [\n    [\n      xSlice,\n      xSliceNew => handleSlicerSetting('x', xSliceNew),\n      'x',\n      xSliceInit,\n    ],\n    [\n      ySlice,\n      ySliceNew => handleSlicerSetting('y', ySliceNew),\n      'y',\n      ySliceInit,\n    ],\n    [\n      zSlice,\n      zSliceNew => handleSlicerSetting('z', zSliceNew),\n      'z',\n      zSliceInit,\n    ],\n  ];\n  const classes = useSlicerStyles();\n  const Slicers = sliceValuesAndSetSliceFunctions.map(\n    ([val, setVal, label, [min, max]]) => (\n      <Grid\n        container\n        direction=\"row\"\n        justify=\"flex-start\"\n        alignItems=\"center\"\n        key={label}\n      >\n        <Grid item xs={1}>\n          <Typography\n            className={!use3d ? classes.disabled : classes.enabled}\n            style={{ marginBottom: 0 }}\n          >\n            {label}:\n          </Typography>\n        </Grid>\n        <Grid item xs={11}>\n          <Slider\n            disabled={!use3d}\n            className={!use3d ? classes.disabled : classes.enabled}\n            value={val}\n            onChange={(e, v) => setVal(v)}\n            valueLabelDisplay=\"auto\"\n            valueLabelFormat={v => abbreviateNumber(v)}\n            getAriaLabel={() => `${label} slider`}\n            min={min}\n            max={max}\n            step={0.005}\n            orientation=\"horizontal\"\n          />\n        </Grid>\n      </Grid>\n    ),\n  );\n  return (\n    <>\n      <Typography\n        className={!use3d ? classes.disabled : classes.enabled}\n        style={{ marginTop: 16, marginBottom: 0 }}\n      >\n        Clipping Planes:{' '}\n      </Typography>{' '}\n      {Slicers}\n    </>\n  );\n};\n\nconst renderingOptions = Object.values(RENDERING_MODES);\n\nfunction RenderingModeSelect({\n  handleRenderingModeChange,\n  renderingMode,\n  use3d,\n}) {\n  const classes = useSelectStyles();\n  // Empty option allows for displaying the title of the dropdown fully in the UI.\n  const options = !use3d ? [...renderingOptions, ''] : renderingOptions;\n  return (\n    <FormControl fullWidth>\n      <InputLabel htmlFor=\"rendering-mode-select\">Rendering Mode</InputLabel>\n      <Select\n        native\n        onChange={e => handleRenderingModeChange(e.target.value)}\n        value={use3d ? renderingMode : ''}\n        inputProps={{\n          name: 'rendering-mode',\n          id: 'rendering-mode-select',\n        }}\n        disabled={!use3d}\n        classes={{ root: classes.selectRoot }}\n      >\n        {options.map(name => (\n          <option key={name} value={name}>\n            {name}\n          </option>\n        ))}\n      </Select>\n    </FormControl>\n  );\n}\n\nconst ReCenterButton = ({\n  setViewState,\n  use3d,\n  spatialHeight,\n  spatialWidth,\n  loader,\n  modelMatrix,\n}) => (\n  <Grid item xs=\"auto\" key=\"recenter\">\n    <Button\n      onClick={() => {\n        const defaultViewState = getDefaultInitialViewState(\n          loader.data,\n          { height: spatialHeight, width: spatialWidth },\n          1.5,\n          use3d,\n          new Matrix4(modelMatrix),\n        );\n        setViewState({\n          ...defaultViewState,\n          rotationX: 0,\n          rotationOrbit: 0,\n        });\n      }\n        }\n      disabled={!use3d}\n      style={{\n        padding: 0,\n        marginBottom: 6,\n      }}\n    >\n        Re-Center\n    </Button>\n  </Grid>\n);\n\nconst VolumeOptions = ({\n  handleSlicerSetting,\n  handleRenderingModeChange,\n  renderingMode,\n  xSlice,\n  ySlice,\n  zSlice,\n  use3d,\n  loader,\n  setViewState,\n  spatialHeight,\n  spatialWidth,\n  modelMatrix,\n}) => (\n  <>\n    <RenderingModeSelect\n      handleRenderingModeChange={handleRenderingModeChange}\n      renderingMode={renderingMode}\n      use3d={use3d}\n    />\n    <Slicer\n      xSlice={xSlice}\n      ySlice={ySlice}\n      zSlice={zSlice}\n      handleSlicerSetting={handleSlicerSetting}\n      use3d={use3d}\n      loader={loader}\n    />\n    <ReCenterButton\n      setViewState={setViewState}\n      use3d={use3d}\n      spatialHeight={spatialHeight}\n      spatialWidth={spatialWidth}\n      loader={loader}\n      modelMatrix={modelMatrix}\n    />\n  </>\n);\n\nexport default VolumeOptions;\n","import React, { useState, useRef, useEffect } from 'react';\nimport { MAX_CHANNELS, getChannelStats } from '@hms-dbmi/viv';\n\nimport Grid from '@material-ui/core/Grid';\nimport Button from '@material-ui/core/Button';\nimport AddIcon from '@material-ui/icons/Add';\nimport Slider from '@material-ui/core/Slider';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\n\nimport ExpansionPanel from '@material-ui/core/ExpansionPanel';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport VisibilityIcon from '@material-ui/icons/Visibility';\nimport VisibilityOffIcon from '@material-ui/icons/VisibilityOff';\n\nimport LayerOptions from './LayerOptions';\nimport VolumeOptions from './VolumeOptions';\nimport {\n  useControllerSectionStyles,\n  StyledExpansionPanelDetails,\n  StyledExpansionPanelSummary,\n  StyledInputLabel,\n  OverflowEllipsisGrid,\n} from './styles';\nimport { getMultiSelectionStats } from './utils';\n\nimport { GLOBAL_LABELS } from '../spatial/constants';\nimport { getSourceFromLoader, isRgb } from '../../utils';\nimport { canLoadResolution } from '../utils';\nimport { DOMAINS } from './constants';\n\nfunction TabPanel(props) {\n  const {\n    children, value, index, ...other\n  } = props;\n\n  return (\n    <div\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`simple-tabpanel-${index}`}\n      aria-labelledby={`simple-tab-${index}`}\n      {...other}\n    >\n      {value === index && children}\n    </div>\n  );\n}\n\n// Set the domain of the sliders based on either a full range or min/max.\nasync function getDomainsAndSliders(loader, selections, domainType, use3d) {\n  let domains;\n  const stats = await getMultiSelectionStats({\n    loader: loader.data,\n    selections,\n    use3d,\n  });\n  const { sliders } = stats;\n  if (domainType === 'Min/Max') {\n    // eslint-disable-next-line prefer-destructuring\n    domains = stats.domains;\n  }\n  if (domainType === 'Full') {\n    const source = getSourceFromLoader(loader);\n    domains = selections.map(() => DOMAINS[source.dtype]);\n  }\n  return { domains, sliders };\n}\n\nconst buttonStyles = {\n  borderStyle: 'dashed',\n  marginTop: '10px',\n  fontWeight: 400,\n};\n\n/**\n * Controller for the various imaging options (color, opactiy, sliders etc.)\n * @prop {object} imageData Image config object, one of the `images` in the raster schema.\n * @prop {object} layerId Randomly generated id for the image layer that this controller handles.\n * @prop {function} handleLayerRemove Callback for handling the removal of a layer.\n * @prop {object} loader Loader object for the current imaging layer.\n * @prop {function} handleLayerChange Callback for handling the changing of layer properties.\n */\nexport default function LayerController(props) {\n  const {\n    layer,\n    name,\n    loader,\n    theme,\n    handleLayerRemove,\n    handleLayerChange,\n    shouldShowTransparentColor,\n    shouldShowDomain,\n    shouldShowColormap,\n    ChannelController,\n    setViewState,\n    disable3d,\n    setRasterLayerCallback,\n    setAreLayerChannelsLoading,\n    areLayerChannelsLoading,\n    disabled,\n    spatialHeight,\n    spatialWidth,\n    disableChannelsIfRgbDetected,\n    shouldShowRemoveLayerButton,\n  } = props;\n\n  const {\n    colormap,\n    opacity,\n    channels,\n    transparentColor,\n    renderingMode,\n    xSlice,\n    ySlice,\n    zSlice,\n    resolution,\n    use3d,\n    modelMatrix,\n  } = layer;\n  // Channels are used in a lot of callbacks and change handlers\n  // so ensuring they have an up to date copy of the data ensures consistency.\n  // See: https://github.com/vitessce/vitessce/issues/1036\n  const channelRef = useRef(channels);\n  useEffect(() => {\n    channelRef.current = channels;\n    return undefined;\n  }, [channels]);\n\n  const firstSelection = channels[0]?.selection || {};\n\n  const { data, channels: channelOptions } = loader;\n  const [tab, setTab] = useState(0);\n\n  const handleTabChange = (event, newTab) => {\n    setTab(newTab);\n  };\n  const { labels, shape } = Array.isArray(data) ? data[data.length - 1] : data;\n  const [domainType, setDomainType] = useState(layer.domainType);\n  const [isExpanded, setIsExpanded] = useState(true);\n  const [globalLabelValues, setGlobalLabelValues] = useState(\n    GLOBAL_LABELS.filter(\n      field => typeof firstSelection[field] === 'number',\n    ).reduce((o, key) => ({ ...o, [key]: firstSelection[key] }), {}),\n  );\n\n  function setVisible(v) {\n    handleLayerChange({ ...layer, visible: v });\n  }\n\n  function setColormap(v) {\n    handleLayerChange({ ...layer, colormap: v });\n  }\n\n  function setOpacity(v) {\n    handleLayerChange({ ...layer, opacity: v });\n  }\n\n  function setChannels(v) {\n    handleLayerChange({ ...layer, channels: v });\n  }\n  function setTransparentColor(v) {\n    handleLayerChange({ ...layer, transparentColor: v });\n  }\n  function setRenderingMode(v) {\n    handleLayerChange({ ...layer, renderingMode: v });\n  }\n\n  function handleMultiPropertyChange(obj) {\n    handleLayerChange({ ...layer, ...obj });\n  }\n\n  function handleSlicerSetting(slice, val) {\n    handleLayerChange({ ...layer, [`${slice}Slice`]: val });\n  }\n\n  function setChannelsAndDomainType(newChannels, newDomainType) {\n    handleLayerChange({\n      ...layer,\n      channels: newChannels,\n      domainType: newDomainType,\n    });\n  }\n\n  function setChannel(v, i) {\n    const newChannels = [...channelRef.current];\n    newChannels[i] = v;\n    handleLayerChange({ ...layer, channels: newChannels });\n  }\n\n  function addChannel(v) {\n    const newChannels = [...channelRef.current, v];\n    handleLayerChange({ ...layer, channels: newChannels });\n  }\n\n  function removeChannel(i) {\n    const newChannels = [...channelRef.current];\n    newChannels.splice(i, 1);\n    handleLayerChange({ ...layer, channels: newChannels });\n  }\n\n  const setAreAllChannelsLoading = (val) => {\n    const newAreLayerChannelsLoading = channelRef.current.map(() => val);\n    setAreLayerChannelsLoading(newAreLayerChannelsLoading);\n  };\n\n  // Handles adding a channel, creating a default selection\n  // for the current global settings and domain type.\n  const handleChannelAdd = async () => {\n    const selection = {};\n    labels.forEach((label) => {\n      // Set new image to default selection for non-global selections (0)\n      // and use current global selection otherwise.\n      selection[label] = GLOBAL_LABELS.includes(label)\n        ? globalLabelValues[label] || 0\n        : 0;\n    });\n    const { domains, sliders } = await getDomainsAndSliders(\n      loader,\n      [selection],\n      domainType,\n      use3d,\n    );\n    const domain = domains[0];\n    const slider = domain;\n    const color = [255, 255, 255];\n    const visible = true;\n    const newChannelId = channels.length;\n    const newAreLayerChannelsLoading = [...areLayerChannelsLoading];\n    newAreLayerChannelsLoading[newChannelId] = true;\n    setAreLayerChannelsLoading(newAreLayerChannelsLoading);\n    const channel = {\n      selection,\n      slider,\n      visible,\n      color,\n    };\n    setRasterLayerCallback(() => {\n      setChannel({ ...channel, slider: sliders[0] }, newChannelId);\n      const areLayerChannelsLoadingCallback = [...newAreLayerChannelsLoading];\n      areLayerChannelsLoadingCallback[newChannelId] = false;\n      setAreLayerChannelsLoading(areLayerChannelsLoadingCallback);\n      setRasterLayerCallback(null);\n    });\n    addChannel(channel);\n  };\n\n  const handleDomainChange = async (value) => {\n    setDomainType(value);\n    const selections = channels.map(channel => channel.selection);\n    let sliders = channels.map(channel => channel.slider);\n    const { domains } = await getDomainsAndSliders(\n      loader,\n      selections,\n      value,\n      use3d,\n    );\n\n    // If it's the right-most slider, we take the minimum of that and the new value.\n    // Otherwise, we use the maximum of the left-hand side and the new value.\n    sliders = sliders.map((slider, i) => {\n      const [left, right] = slider;\n      return [Math.max(left, domains[i][0]), Math.min(right, domains[i][1])];\n    });\n\n    const newChannels = channels.map((c, i) => ({ ...c, slider: sliders[i] }));\n    setChannelsAndDomainType(newChannels, value);\n  };\n\n  // This call updates all channel selections with new global selection from the UI.\n  const handleGlobalChannelsSelectionChange = async ({ selection, event }) => {\n    const selections = channels.map(channel => ({\n      ...channel.selection,\n      ...selection,\n    }));\n    const canUpdateChannels = event.type === 'mouseup' || event.type === 'keydown';\n    // Only update domains on a mouseup event for the same reason as above.\n    if (canUpdateChannels) {\n      setAreAllChannelsLoading(true);\n      getDomainsAndSliders(loader, selections, domainType, use3d).then(\n        ({ sliders }) => {\n          const newChannelsWithSelection = channels.map(c => ({\n            ...c,\n            selection: { ...c.selection, ...selection },\n          }));\n          // Set the callback before changing the selection\n          // so the callback is used when the layer (re)loads its data.\n          setRasterLayerCallback(() => {\n            setRasterLayerCallback(null);\n            setAreAllChannelsLoading(false);\n            const newChannelsWithSliders = [...newChannelsWithSelection].map(\n              (c, i) => ({\n                ...c,\n                slider: sliders[i],\n              }),\n            );\n            setChannels(newChannelsWithSliders);\n          });\n          setChannels(newChannelsWithSelection);\n        },\n      );\n    }\n    setGlobalLabelValues(prev => ({ ...prev, ...selection }));\n  };\n\n  let channelControllers = [];\n  if (labels.length > 0) {\n    const channelLabel = labels.find(c => c === 'channel' || c === 'c') || labels[0];\n    // Create the channel controllers for each channel.\n    channelControllers = channels.map(\n      // c is an object like { color, selection, slider, visible }.\n      (c, channelId) => {\n        // Update the auxiliary store with the current loading state of a channel.\n        const setIsLoading = (val) => {\n          const newAreLayerChannelsLoading = [...areLayerChannelsLoading];\n          newAreLayerChannelsLoading[channelId] = val;\n          setAreLayerChannelsLoading(newAreLayerChannelsLoading);\n        };\n        // Change one property of a channel (for now - soon\n        // nested structures allowing for multiple z/t selecitons at once, for example).\n        const handleChannelPropertyChange = (property, value) => {\n          // property is something like \"selection\" or \"slider.\"\n          // value is the actual change, like { channel: \"DAPI\" }.\n          const update = { [property]: value };\n          if (property === 'selection') {\n            // Channel is loading until the layer callback is called\n            // by the layer, which fetches the raster data.\n            setIsLoading(true);\n            update.selection = {\n              ...globalLabelValues,\n              ...update.selection,\n            };\n            setChannel({ ...c, ...update }, channelId);\n            // Call back for raster layer handles update of UI\n            // like sliders and the loading state of the channel.\n            setRasterLayerCallback(async () => {\n              const selections = [\n                { ...channels[channelId][property], ...value },\n              ];\n              const { sliders } = await getDomainsAndSliders(\n                loader,\n                selections,\n                domainType,\n                use3d,\n              );\n              [update.slider] = sliders;\n              setChannel({ ...c, ...update }, channelId);\n              setRasterLayerCallback(null);\n              setIsLoading(false);\n            });\n          } else {\n            setChannel({ ...c, ...update }, channelId);\n          }\n        };\n        const handleChannelRemove = () => {\n          removeChannel(channelId);\n        };\n        const handleIQRUpdate = async () => {\n          const { data: loaderData } = loader;\n          const source = Array.isArray(loaderData)\n            ? loaderData[loaderData.length - 1]\n            : loaderData;\n          const raster = await source.getRaster({\n            selection: channels[channelId].selection,\n          });\n          const stats = getChannelStats(raster.data);\n          const { q1, q3 } = stats;\n          setChannel({ ...c, slider: [q1, q3] }, channelId);\n        };\n        return (\n          <ChannelController\n            // eslint-disable-next-line react/no-array-index-key\n            key={`channel-controller-${channelId}`}\n            dimName={channelLabel}\n            visibility={c.visible}\n            selectionIndex={c.selection[channelLabel]}\n            slider={c.slider}\n            color={c.color}\n            channels={channels}\n            channelId={channelId}\n            domainType={domainType}\n            loader={loader}\n            globalLabelValues={globalLabelValues}\n            theme={theme}\n            channelOptions={channelOptions}\n            colormapOn={Boolean(colormap)}\n            handlePropertyChange={handleChannelPropertyChange}\n            handleChannelRemove={handleChannelRemove}\n            handleIQRUpdate={handleIQRUpdate}\n            setRasterLayerCallback={setRasterLayerCallback}\n            isLoading={areLayerChannelsLoading[channelId]}\n            use3d={use3d}\n          />\n        );\n      },\n    );\n  }\n\n  const controllerSectionClasses = useControllerSectionStyles();\n\n  const { visible } = layer;\n  const visibleSetting = typeof visible === 'boolean' ? visible : true;\n  const Visibility = visibleSetting ? VisibilityIcon : VisibilityOffIcon;\n  // Only show Volume tabs if 3D is available.\n  const hasViewableResolutions = Boolean(\n    Array.from({\n      length: loader.data.length,\n    }).filter((_, res) => canLoadResolution(loader.data, res)).length,\n  );\n  const useVolumeTabs = !disable3d && shape[labels.indexOf('z')] > 1 && hasViewableResolutions;\n  const FullController = (\n    <>\n      <LayerOptions\n        channels={channels}\n        opacity={opacity}\n        colormap={colormap}\n        transparentColor={transparentColor}\n        domainType={domainType}\n        // Only allow for global dimension controllers that\n        // exist in the `dimensions` part of the loader.\n        globalControlLabels={labels.filter(label => GLOBAL_LABELS.includes(label))}\n        globalLabelValues={globalLabelValues}\n        handleOpacityChange={setOpacity}\n        handleColormapChange={setColormap}\n        handleGlobalChannelsSelectionChange={\n          handleGlobalChannelsSelectionChange\n        }\n        handleTransparentColorChange={setTransparentColor}\n        disableChannelsIfRgbDetected={\n          isRgb(loader) && disableChannelsIfRgbDetected\n        }\n        handleDomainChange={handleDomainChange}\n        shouldShowTransparentColor={shouldShowTransparentColor}\n        shouldShowDomain={shouldShowDomain}\n        shouldShowColormap={shouldShowColormap}\n        use3d={use3d}\n        loader={loader}\n        handleMultiPropertyChange={handleMultiPropertyChange}\n        resolution={resolution}\n        disable3d={disable3d}\n        setRasterLayerCallback={setRasterLayerCallback}\n        setAreAllChannelsLoading={setAreAllChannelsLoading}\n        setViewState={setViewState}\n        spatialHeight={spatialHeight}\n        spatialWidth={spatialWidth}\n        modelMatrix={modelMatrix}\n      />\n      {isRgb(loader) && disableChannelsIfRgbDetected\n        ? null\n        : channelControllers}\n      {isRgb(loader) && disableChannelsIfRgbDetected ? null : (\n        <Button\n          disabled={channels.length === MAX_CHANNELS}\n          onClick={handleChannelAdd}\n          fullWidth\n          variant=\"outlined\"\n          style={buttonStyles}\n          startIcon={<AddIcon />}\n          size=\"small\"\n        >\n          Add Channel\n        </Button>\n      )}\n    </>\n  );\n  return (\n    <ExpansionPanel\n      className={controllerSectionClasses.root}\n      onChange={(e, expanded) => !disabled\n        && setIsExpanded(\n          expanded && e?.target?.attributes?.role?.value === 'presentation',\n        )\n      }\n      TransitionProps={{ enter: false }}\n      expanded={!disabled && isExpanded}\n    >\n      <StyledExpansionPanelSummary\n        expandIcon={<ExpandMoreIcon />}\n        aria-controls={`layer-${name}-controls`}\n      >\n        <Grid container direction=\"column\" m={1} justify=\"center\">\n          <OverflowEllipsisGrid item>\n            <Button\n              onClick={(e) => {\n                if (!disabled) {\n                  // Needed to prevent affecting the expansion panel from changing\n                  e.stopPropagation();\n                  const nextVisible = typeof visible === 'boolean' ? !visible : false;\n                  setVisible(nextVisible);\n                }\n              }}\n              style={{\n                marginRight: 8,\n                marginBottom: 2,\n                padding: 0,\n                minWidth: 0,\n              }}\n            >\n              <Visibility />\n            </Button>\n            {name}\n          </OverflowEllipsisGrid>\n          {!disabled && !isExpanded && !use3d && (\n            <Grid\n              container\n              direction=\"row\"\n              alignItems=\"center\"\n              justify=\"center\"\n            >\n              <Grid item xs={6}>\n                <StyledInputLabel htmlFor={`layer-${name}-opacity-closed`}>\n                  Opacity:\n                </StyledInputLabel>\n              </Grid>\n              <Grid item xs={6}>\n                <Slider\n                  id={`layer-${name}-opacity-closed`}\n                  value={opacity}\n                  onChange={(e, v) => setOpacity(v)}\n                  valueLabelDisplay=\"auto\"\n                  getAriaLabel={() => 'opacity slider'}\n                  min={0}\n                  max={1}\n                  step={0.01}\n                  orientation=\"horizontal\"\n                />\n              </Grid>\n            </Grid>\n          )}\n        </Grid>\n      </StyledExpansionPanelSummary>\n      <StyledExpansionPanelDetails>\n        {useVolumeTabs ? (\n          <>\n            <Tabs\n              value={tab}\n              onChange={handleTabChange}\n              aria-label=\"simple tabs example\"\n              style={{ height: '24px', minHeight: '24px' }}\n            >\n              <Tab\n                label=\"Channels\"\n                style={{\n                  fontSize: '.75rem',\n                  bottom: 12,\n                  width: '50%',\n                  minWidth: '50%',\n                }}\n                disableRipple\n              />\n              <Tab\n                label=\"Volume\"\n                style={{\n                  fontSize: '.75rem',\n                  bottom: 12,\n                  width: '50%',\n                  minWidth: '50%',\n                }}\n              />\n            </Tabs>\n            <TabPanel value={tab} index={0}>\n              {FullController}\n            </TabPanel>\n            <TabPanel value={tab} index={1} style={{ marginTop: 4 }}>\n              <VolumeOptions\n                loader={loader}\n                handleSlicerSetting={handleSlicerSetting}\n                handleRenderingModeChange={setRenderingMode}\n                renderingMode={renderingMode}\n                xSlice={xSlice}\n                ySlice={ySlice}\n                zSlice={zSlice}\n                use3d={use3d}\n                setViewState={setViewState}\n                spatialHeight={spatialHeight}\n                spatialWidth={spatialWidth}\n                modelMatrix={modelMatrix}\n              />\n            </TabPanel>\n          </>\n        ) : (\n          FullController\n        )}\n        {shouldShowRemoveLayerButton ? (\n          <Button\n            onClick={handleLayerRemove}\n            fullWidth\n            variant=\"outlined\"\n            style={buttonStyles}\n            size=\"small\"\n          >\n            Remove Image Layer\n          </Button>\n        ) : null}\n      </StyledExpansionPanelDetails>\n    </ExpansionPanel>\n  );\n}\n","module.exports = require(\"react-virtualized\");","module.exports = require(\"@material-ui/core/Tab\");","module.exports = require(\"react-vega\");","import React from 'react';\nimport { useCoordination, useWarning } from '../../app/state/hooks';\nimport { COMPONENT_COORDINATION_TYPES } from '../../app/state/coordination';\nimport TitleInfo from '../TitleInfo';\nimport Status from './Status';\n\n/**\n * A subscriber component for the status component,\n * which renders hovered cell/gene/molecule information\n * as well as schema validation and data loading errors.\n * @param {object} props\n * @param {string} props.theme The current theme name.\n * @param {object} props.coordinationScopes The mapping from coordination types to coordination\n * scopes.\n * @param {function} props.removeGridComponent The callback function to pass to TitleInfo,\n * to call when the component has been removed from the grid.\n * @param {string} props.title The component title.\n */\nexport default function StatusSubscriber(props) {\n  const {\n    coordinationScopes,\n    removeGridComponent,\n    theme,\n    title = 'Status',\n  } = props;\n\n  // Get \"props\" from the coordination space.\n  const [{\n    cellHighlight,\n    geneHighlight,\n    moleculeHighlight,\n  }] = useCoordination(COMPONENT_COORDINATION_TYPES.status, coordinationScopes);\n\n  const warn = useWarning();\n\n  const infos = [\n    ...(cellHighlight\n      ? [`Hovered cell ${cellHighlight}`]\n      : []\n    ),\n    ...(geneHighlight\n      ? [`Hovered gene ${geneHighlight}`]\n      : []\n    ),\n    ...(moleculeHighlight\n      ? [`Hovered gene ${moleculeHighlight}`]\n      : []\n    ),\n  ];\n  const info = infos.join('; ');\n\n  return (\n    <TitleInfo\n      title={title}\n      theme={theme}\n      removeGridComponent={removeGridComponent}\n      isScroll\n      isReady\n    >\n      <Status warn={warn} info={info} />\n    </TitleInfo>\n  );\n}\n","import React, { useEffect } from 'react';\nimport { pluralize } from '../../utils';\nimport { useReady, useUrls } from '../hooks';\nimport { useExpressionAttrs } from '../data-hooks';\nimport { useCoordination, useLoaders } from '../../app/state/hooks';\nimport { COMPONENT_COORDINATION_TYPES } from '../../app/state/coordination';\n\nimport TitleInfo from '../TitleInfo';\nimport Genes from './Genes';\n\nconst GENES_DATA_TYPES = ['expression-matrix'];\n\n/**\n * A subscriber component for a gene listing component.\n * @param {object} props\n * @param {string} props.theme The current theme name.\n * @param {object} props.coordinationScopes The mapping from coordination types to coordination\n * scopes.\n * @param {function} props.removeGridComponent The callback function to pass to TitleInfo,\n * to call when the component has been removed from the grid.\n * @param {string} props.title The component title.\n * @param {string} props.variablesLabelOverride The singular form\n * of the name of the variable.\n * @param {string} props.variablesPluralLabelOverride The plural\n * form of the name of the variable.\n */\nexport default function GenesSubscriber(props) {\n  const {\n    coordinationScopes,\n    removeGridComponent,\n    variablesLabelOverride: variablesLabel = 'gene',\n    variablesPluralLabelOverride: variablesPluralLabel = `${variablesLabel}s`,\n    theme,\n    title = 'Expression Levels',\n  } = props;\n\n  const loaders = useLoaders();\n\n  // Get \"props\" from the coordination space.\n  const [{\n    dataset,\n    geneSelection,\n    geneFilter,\n    cellColorEncoding,\n  }, {\n    setGeneSelection,\n    setGeneFilter,\n    setGeneHighlight,\n    setCellColorEncoding,\n  }] = useCoordination(COMPONENT_COORDINATION_TYPES.genes, coordinationScopes);\n\n  const [urls, addUrl, resetUrls] = useUrls();\n  const [\n    isReady,\n    setItemIsReady,\n    setItemIsNotReady, // eslint-disable-line no-unused-vars\n    resetReadyItems,\n  ] = useReady(\n    GENES_DATA_TYPES,\n  );\n\n  // Reset file URLs and loader progress when the dataset has changed.\n  useEffect(() => {\n    resetUrls();\n    resetReadyItems();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  // Get data from loaders using the data hooks.\n  const [attrs] = useExpressionAttrs(\n    loaders, dataset, setItemIsReady, addUrl, true,\n  );\n  const geneList = attrs ? attrs.cols : [];\n  const numGenes = geneList.length;\n\n  function setGeneSelectionAndColorEncoding(newSelection) {\n    setGeneSelection(newSelection);\n    setCellColorEncoding('geneSelection');\n  }\n\n  return (\n    <TitleInfo\n      title={title}\n      info={`${numGenes} ${pluralize(variablesLabel, variablesPluralLabel, numGenes)}`}\n      theme={theme}\n      // Virtual scroll is used but this allows for the same styling as a scroll component\n      // even though this no longer uses the TitleInfo component's\n      // scroll css (SelectableTable is virtual scroll).\n      isScroll\n      removeGridComponent={removeGridComponent}\n      isReady={isReady}\n      urls={urls}\n    >\n      <Genes\n        hasColorEncoding={cellColorEncoding === 'geneSelection'}\n        geneList={geneList}\n        geneSelection={geneSelection}\n        geneFilter={geneFilter}\n        setGeneSelection={setGeneSelectionAndColorEncoding}\n        setGeneFilter={setGeneFilter}\n        setGeneHighlight={setGeneHighlight}\n      />\n    </TitleInfo>\n  );\n}\n","import React, {\n  useEffect,\n  useState,\n  useMemo,\n} from 'react';\nimport isEqual from 'lodash/isEqual';\nimport packageJson from '../../../package.json';\nimport {\n  useCoordination,\n  useLoaders,\n  useSetWarning,\n} from '../../app/state/hooks';\nimport { COMPONENT_COORDINATION_TYPES } from '../../app/state/coordination';\nimport SetsManager from './SetsManager';\nimport TitleInfo from '../TitleInfo';\nimport {\n  treeExportLevelZeroNode,\n  treeExportSet,\n  treeToExpectedCheckedLevel,\n  nodeToLevelDescendantNamePaths,\n  treeToIntersection,\n  treeToUnion,\n  treeToComplement,\n  treeFindNodeByNamePath,\n  treesConflict,\n  nodeTransform,\n  nodeAppendChild,\n  nodePrependChild,\n  nodeInsertChild,\n  filterNode,\n  treeInitialize,\n  initializeCellSetColor,\n} from './cell-set-utils';\nimport {\n  isEqualOrPrefix,\n  tryRenamePath,\n  PATH_SEP,\n} from './utils';\nimport {\n  downloadForUser,\n  handleExportJSON,\n  handleExportTabular,\n  tryUpgradeTreeToLatestSchema,\n} from './io';\nimport {\n  FILE_EXTENSION_JSON,\n  FILE_EXTENSION_TABULAR,\n  SETS_DATATYPE_CELL,\n} from './constants';\nimport { useUrls, useReady } from '../hooks';\nimport {\n  setCellSelection,\n  mergeCellSets,\n  getNextNumberedNodeName,\n} from '../utils';\nimport { useCellsData, useCellSetsData } from '../data-hooks';\n\nconst CELL_SETS_DATA_TYPES = ['cells', 'cell-sets'];\n\n/**\n * A subscriber wrapper around the SetsManager component\n * for the 'cell' datatype.\n * @param {object} props\n * @param {string} props.theme The current theme name.\n * @param {object} props.coordinationScopes The mapping from coordination types to coordination\n * scopes.\n * @param {function} props.removeGridComponent The callback function to pass to TitleInfo,\n * to call when the component has been removed from the grid.\n * @param {string} props.title The component title.\n */\nexport default function CellSetsManagerSubscriber(props) {\n  const {\n    coordinationScopes,\n    removeGridComponent,\n    theme,\n    title = 'Cell Sets',\n  } = props;\n\n  const loaders = useLoaders();\n  const setWarning = useSetWarning();\n\n  // Get \"props\" from the coordination space.\n  const [{\n    dataset,\n    cellSetSelection,\n    cellSetColor,\n    additionalCellSets,\n    cellColorEncoding,\n  }, {\n    setCellSetSelection,\n    setCellColorEncoding,\n    setCellSetColor,\n    setAdditionalCellSets,\n  }] = useCoordination(COMPONENT_COORDINATION_TYPES.cellSets, coordinationScopes);\n\n  const [urls, addUrl, resetUrls] = useUrls();\n  const [\n    isReady,\n    setItemIsReady,\n    setItemIsNotReady, // eslint-disable-line no-unused-vars\n    resetReadyItems,\n  ] = useReady(\n    CELL_SETS_DATA_TYPES,\n  );\n\n  const [cellSetExpansion, setCellSetExpansion] = useState([]);\n\n  // Reset file URLs and loader progress when the dataset has changed.\n  useEffect(() => {\n    resetUrls();\n    resetReadyItems();\n    setCellSetExpansion([]);\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  // Get data from loaders using the data hooks.\n  const [cells] = useCellsData(loaders, dataset, setItemIsReady, addUrl, true);\n  const [cellSets] = useCellSetsData(\n    loaders, dataset, setItemIsReady, addUrl, true,\n    { setCellSetSelection, setCellSetColor },\n    { cellSetSelection, cellSetColor },\n  );\n\n  // Validate and upgrade the additionalCellSets.\n  useEffect(() => {\n    if (additionalCellSets) {\n      let upgradedCellSets;\n      try {\n        upgradedCellSets = tryUpgradeTreeToLatestSchema(additionalCellSets, SETS_DATATYPE_CELL);\n      } catch (e) {\n        setWarning(e.message);\n        return;\n      }\n      setAdditionalCellSets(upgradedCellSets);\n    }\n  }, [additionalCellSets, setAdditionalCellSets, setWarning]);\n\n  // Get an array of all cell IDs to use for set complement operations.\n  const allCellIds = useMemo(() => (cells ? Object.keys(cells) : []), [cells]);\n\n  // A helper function for updating the encoding for cell colors,\n  // which may have previously been set to 'geneSelection'.\n  function setCellSetColorEncoding() {\n    setCellColorEncoding('cellSetSelection');\n  }\n\n  // Merged cell sets are only to be used for convenience when reading\n  // (if writing: update either `cellSets` _or_ `additionalCellSets`).\n  const mergedCellSets = useMemo(\n    () => mergeCellSets(cellSets, additionalCellSets),\n    [cellSets, additionalCellSets],\n  );\n\n  // Infer the state of the \"checked level\" radio button based on the selected cell sets.\n  const checkedLevel = useMemo(() => {\n    if (cellSetSelection && cellSetSelection.length > 0\n    && mergedCellSets && mergedCellSets.tree.length > 0) {\n      return treeToExpectedCheckedLevel(mergedCellSets, cellSetSelection);\n    }\n    return null;\n  }, [cellSetSelection, mergedCellSets]);\n\n  // Callback functions\n\n  // The user wants to select all nodes at a particular hierarchy level.\n  function onCheckLevel(levelZeroName, levelIndex) {\n    const lzn = mergedCellSets.tree.find(n => n.name === levelZeroName);\n    if (lzn) {\n      const newCellSetSelection = nodeToLevelDescendantNamePaths(lzn, levelIndex, [], true);\n      setCellSetSelection(newCellSetSelection);\n      setCellSetColorEncoding();\n    }\n  }\n\n  // The user wants to check or uncheck a cell set node.\n  function onCheckNode(targetKey, checked) {\n    const targetPath = (Array.isArray(targetKey) ? targetKey : targetKey.split(PATH_SEP));\n    if (!targetKey) {\n      return;\n    }\n    if (checked) {\n      setCellSetSelection([...cellSetSelection, targetPath]);\n    } else {\n      setCellSetSelection(cellSetSelection.filter(d => !isEqual(d, targetPath)));\n    }\n    setCellSetColorEncoding();\n  }\n\n  // The user wants to expand or collapse a node in the tree.\n  function onExpandNode(expandedKeys, targetKey, expanded) {\n    if (expanded) {\n      setCellSetExpansion(prev => ([...prev, targetKey.split(PATH_SEP)]));\n    } else {\n      setCellSetExpansion(prev => prev.filter(d => !isEqual(d, targetKey.split(PATH_SEP))));\n    }\n  }\n\n  // The user dragged a tree node and dropped it somewhere else in the tree\n  // to re-arrange or re-order the nodes.\n  // We need to verify that their drop target is valid, and if so, complete\n  // the tree re-arrangement.\n  function onDropNode(dropKey, dragKey, dropPosition, dropToGap) {\n    const dropPath = dropKey.split(PATH_SEP);\n    const dropNode = treeFindNodeByNamePath(additionalCellSets, dropPath);\n    if (!dropNode.children && !dropToGap) {\n      // Do not allow a node with a set (i.e. leaf) to become a child of another node with a set,\n      // as this will result in an internal node having a set, which we do not allow.\n      return;\n    }\n    const dropNodeLevel = dropPath.length - 1;\n    const dropNodeIsLevelZero = dropNodeLevel === 0;\n\n    // Get drag node.\n    const dragPath = dragKey.split(PATH_SEP);\n    const dragNode = treeFindNodeByNamePath(additionalCellSets, dragPath);\n\n    if (dropNodeIsLevelZero && dropToGap && !dragNode.children) {\n      // Do not allow a leaf node to become a level zero node.\n      return;\n    }\n\n    let dropParentNode;\n    let dropParentPath;\n    let dropNodeCurrIndex;\n    if (!dropNodeIsLevelZero) {\n      dropParentPath = dropPath.slice(0, -1);\n      dropParentNode = treeFindNodeByNamePath(additionalCellSets, dropParentPath);\n      dropNodeCurrIndex = dropParentNode.children.findIndex(c => c.name === dropNode.name);\n    } else {\n      dropNodeCurrIndex = additionalCellSets.tree.findIndex(\n        lzn => lzn.name === dropNode.name,\n      );\n    }\n    // Further, only allow dragging if the dragged node will have a unique\n    // name among its new siblings.\n    let hasSiblingNameConflict;\n    const dragNodeName = dragNode.name;\n    if (!dropNodeIsLevelZero && dropToGap) {\n      hasSiblingNameConflict = dropParentNode.children\n        .find(c => c !== dragNode && c.name === dragNodeName);\n    } else if (!dropToGap) {\n      hasSiblingNameConflict = dropNode.children\n        .find(c => c !== dragNode && c.name === dragNodeName);\n    } else {\n      hasSiblingNameConflict = additionalCellSets.tree\n        .find(lzn => lzn !== dragNode && lzn.name === dragNodeName);\n    }\n\n    if (hasSiblingNameConflict) {\n      return;\n    }\n\n    // Remove the dragged object from its current position.\n    // Recursively check whether each node path\n    // matches the path of the node to delete.\n    // If so, return null, and then always use\n    // .filter(Boolean) to eliminate any null array elements.\n    const nextAdditionalCellSets = {\n      ...additionalCellSets,\n      tree: additionalCellSets.tree.map(lzn => filterNode(lzn, [], dragPath)).filter(Boolean),\n    };\n\n    // Update index values after temporarily removing the dragged node.\n    // Names are unique as children of their parents.\n    if (!dropNodeIsLevelZero) {\n      dropNodeCurrIndex = dropParentNode.children.findIndex(c => c.name === dropNode.name);\n    } else {\n      dropNodeCurrIndex = nextAdditionalCellSets.tree.findIndex(\n        lzn => lzn.name === dropNode.name,\n      );\n    }\n    let newDragPath = [];\n    if (!dropToGap || !dropNodeIsLevelZero) {\n      let addChildFunction;\n      let checkPathFunction;\n      const newPath = [];\n      if (!dropToGap) {\n        // Append the dragNode to dropNode's children if dropping _onto_ the dropNode.\n        // Set dragNode as the last child of dropNode.\n        addChildFunction = n => nodeAppendChild(n, dragNode);\n        checkPathFunction = path => isEqual(path, dropPath);\n      } else if (!dropNodeIsLevelZero) {\n        // Prepend or insert the dragNode if dropping _between_ (above or below dropNode).\n        // The dropNode is at a level greater than zero,\n        // so it has a parent.\n        checkPathFunction = path => isEqual(path, dropParentPath);\n        if (dropPosition === -1) {\n          // Set dragNode as first child of dropParentNode.\n          addChildFunction = n => nodePrependChild(n, dragNode);\n        } else {\n          // Set dragNode before or after dropNode.\n          const insertIndex = dropNodeCurrIndex + (dropPosition > dropNodeCurrIndex ? 1 : 0);\n          addChildFunction = n => nodeInsertChild(n, dragNode, insertIndex);\n        }\n      }\n      nextAdditionalCellSets.tree = nextAdditionalCellSets.tree.map(\n        node => nodeTransform(\n          node,\n          (n, path) => checkPathFunction(path),\n          (n) => {\n            const newNode = addChildFunction(n);\n            return newNode;\n          },\n          newPath,\n        ),\n      );\n      // Done\n      setAdditionalCellSets(nextAdditionalCellSets);\n      newDragPath = [...newPath[0], dragNode.name];\n      setCellSetSelection([newDragPath]);\n    } else if (dropPosition === -1) {\n      // We need to drop the dragNode to level zero,\n      // and level zero nodes do not have parents.\n      // Set dragNode as first level zero node of the tree.\n      nextAdditionalCellSets.tree.unshift(dragNode);\n      setAdditionalCellSets(nextAdditionalCellSets);\n      newDragPath = [dragNode.name];\n      setCellSetSelection([newDragPath]);\n    } else {\n      // Set dragNode before or after dropNode in level zero.\n      const insertIndex = dropNodeCurrIndex + (dropPosition > dropNodeCurrIndex ? 1 : 0);\n      const newLevelZero = Array.from(nextAdditionalCellSets.tree);\n      newLevelZero.splice(insertIndex, 0, dragNode);\n      nextAdditionalCellSets.tree = newLevelZero;\n      setAdditionalCellSets(nextAdditionalCellSets);\n      newDragPath = [dragNode.name];\n      setCellSetSelection([newDragPath]);\n    }\n    const oldColors = cellSetColor.filter(\n      i => isEqualOrPrefix(dragPath, i.path),\n    );\n    const newColors = oldColors.map(\n      i => (\n        {\n          ...i,\n          path: !isEqual(i.path, dragPath)\n            ? newDragPath.concat(i.path.slice(dragPath.length))\n            : newDragPath,\n        }\n      ),\n    );\n    const newCellSetColor = cellSetColor.filter(\n      i => !isEqualOrPrefix(dragPath, i.path),\n    );\n    newCellSetColor.push(...newColors);\n    setCellSetColor(newCellSetColor);\n  }\n\n  // The user wants to change the color of a cell set node.\n  function onNodeSetColor(targetPath, color) {\n    // Replace the color if an array element for this path already exists.\n    const prevNodeColor = cellSetColor?.find(d => isEqual(d.path, targetPath));\n    if (!prevNodeColor) {\n      setCellSetColor([\n        ...(cellSetColor || []),\n        {\n          path: targetPath,\n          color,\n        },\n      ]);\n    } else {\n      setCellSetColor([\n        ...cellSetColor.filter(d => !isEqual(d.path, targetPath)),\n        {\n          path: targetPath,\n          color,\n        },\n      ]);\n    }\n  }\n\n  // The user wants to change the name of a cell set node.\n  function onNodeSetName(targetPath, name) {\n    const nextNamePath = [...targetPath];\n    nextNamePath.pop();\n    nextNamePath.push(name);\n\n    // Recursively check whether each node path\n    // matches the path or a prefix of the path of the node to rename.\n    // If so, rename the node using the new path.\n    function renameNode(node, prevPath) {\n      if (isEqual([...prevPath, node.name], targetPath)) {\n        return {\n          ...node,\n          name,\n        };\n      }\n      if (!node.children) {\n        return node;\n      }\n      return {\n        ...node,\n        children: node.children.map(c => renameNode(c, [...prevPath, node.name])),\n      };\n    }\n    const nextAdditionalCellSets = {\n      ...additionalCellSets,\n      tree: additionalCellSets.tree.map(lzn => renameNode(lzn, [])),\n    };\n    // Change all paths that have this node as a prefix (i.e. descendants).\n    const nextCellSetColor = cellSetColor.map(d => ({\n      path: tryRenamePath(targetPath, d.path, nextNamePath),\n      color: d.color,\n    }));\n    const nextCellSetSelection = cellSetSelection.map(d => (\n      tryRenamePath(targetPath, d, nextNamePath)\n    ));\n    const nextCellSetExpansion = cellSetExpansion.map(d => (\n      tryRenamePath(targetPath, d, nextNamePath)\n    ));\n    // Need to update the node path everywhere it may be present.\n    setAdditionalCellSets(nextAdditionalCellSets);\n    setCellSetColor(nextCellSetColor);\n    setCellSetSelection(nextCellSetSelection);\n    setCellSetExpansion(nextCellSetExpansion);\n  }\n\n  // Each time the user types while renaming a cell set node,\n  // we need to check whether the potential new name conflicts\n  // with any existing cell set node names.\n  // If there are conflicts, we want to disable the \"Save\" button.\n  function onNodeCheckNewName(targetPath, name) {\n    const nextNamePath = [...targetPath];\n    nextNamePath.pop();\n    nextNamePath.push(name);\n    const hasConflicts = (\n      !isEqual(targetPath, nextNamePath)\n      && treeFindNodeByNamePath(additionalCellSets, nextNamePath)\n    );\n    return hasConflicts;\n  }\n\n  // The user wants to delete a cell set node, and has confirmed their choice.\n  function onNodeRemove(targetPath) {\n    // Recursively check whether each node path\n    // matches the path of the node to delete.\n    // If so, return null, and then always use\n    // .filter(Boolean) to eliminate any null array elements.\n    const nextAdditionalCellSets = {\n      ...additionalCellSets,\n      tree: additionalCellSets.tree.map(lzn => filterNode(lzn, [], targetPath)).filter(Boolean),\n    };\n    // Delete state for all paths that have this node\n    // path as a prefix (i.e. delete all descendents).\n    const nextCellSetColor = cellSetColor.filter(d => !isEqualOrPrefix(targetPath, d.path));\n    const nextCellSetSelection = cellSetSelection.filter(d => !isEqualOrPrefix(targetPath, d));\n    const nextCellSetExpansion = cellSetExpansion.filter(d => !isEqualOrPrefix(targetPath, d));\n    setAdditionalCellSets(nextAdditionalCellSets);\n    setCellSetColor(nextCellSetColor);\n    setCellSetSelection(nextCellSetSelection);\n    setCellSetExpansion(nextCellSetExpansion);\n  }\n\n  // The user wants to view (i.e. select) a particular node,\n  // or its expanded descendents.\n  function onNodeView(targetPath) {\n    // If parent node is clicked, and if it is expanded,\n    // then select the expanded descendent nodes.\n    const setsToView = [];\n    // Recursively determine which descendent nodes are currently expanded.\n    function viewNode(node, nodePath) {\n      if (cellSetExpansion.find(expandedPath => isEqual(nodePath, expandedPath))) {\n        if (node.children) {\n          node.children.forEach((c) => {\n            viewNode(c, [...nodePath, c.name]);\n          });\n        } else {\n          setsToView.push(nodePath);\n        }\n      } else {\n        setsToView.push(nodePath);\n      }\n    }\n    const targetNode = treeFindNodeByNamePath(mergedCellSets, targetPath);\n    viewNode(targetNode, targetPath);\n    setCellSetSelection(setsToView);\n    setCellSetColorEncoding();\n  }\n\n  // The user wants to create a new level zero node.\n  function onCreateLevelZeroNode() {\n    const nextName = getNextNumberedNodeName(additionalCellSets?.tree, 'My hierarchy ');\n    setAdditionalCellSets({\n      ...(additionalCellSets || treeInitialize(SETS_DATATYPE_CELL)),\n      tree: [\n        ...(additionalCellSets ? additionalCellSets.tree : []),\n        {\n          name: nextName,\n          children: [],\n        },\n      ],\n    });\n  }\n\n  // The user wants to create a new node corresponding to\n  // the union of the selected sets.\n  function onUnion() {\n    const newSet = treeToUnion(mergedCellSets, cellSetSelection);\n    setCellSelection(\n      newSet, additionalCellSets, cellSetColor,\n      setCellSetSelection, setAdditionalCellSets, setCellSetColor,\n      setCellColorEncoding,\n      'Union ',\n    );\n  }\n\n  // The user wants to create a new node corresponding to\n  // the intersection of the selected sets.\n  function onIntersection() {\n    const newSet = treeToIntersection(mergedCellSets, cellSetSelection);\n    setCellSelection(\n      newSet, additionalCellSets, cellSetColor,\n      setCellSetSelection, setAdditionalCellSets, setCellSetColor,\n      setCellColorEncoding,\n      'Intersection ',\n    );\n  }\n\n  // The user wants to create a new node corresponding to\n  // the complement of the selected sets.\n  function onComplement() {\n    const newSet = treeToComplement(mergedCellSets, cellSetSelection, allCellIds);\n    setCellSelection(\n      newSet, additionalCellSets, cellSetColor,\n      setCellSetSelection, setAdditionalCellSets, setCellSetColor,\n      setCellColorEncoding,\n      'Complement ',\n    );\n  }\n\n  // The user wants to import a cell set hierarchy,\n  // probably from a CSV or JSON file.\n  function onImportTree(treeToImport) {\n    // Check for any naming conflicts with the current sets\n    // (both user-defined and dataset-defined) before importing.\n    const hasConflict = treesConflict(mergedCellSets, treeToImport);\n    if (!hasConflict) {\n      setAdditionalCellSets({\n        ...(additionalCellSets || treeInitialize(SETS_DATATYPE_CELL)),\n        tree: [\n          ...(additionalCellSets ? additionalCellSets.tree : []),\n          ...treeToImport.tree,\n        ],\n      });\n      // Automatically initialize set colors for the imported sets.\n      const importAutoSetColors = initializeCellSetColor(treeToImport, cellSetColor);\n      setCellSetColor([\n        ...cellSetColor,\n        ...importAutoSetColors,\n      ]);\n    }\n  }\n\n  // The user wants to download a particular hierarchy to a JSON file.\n  function onExportLevelZeroNodeJSON(nodePath) {\n    const {\n      treeToExport, nodeName,\n    } = treeExportLevelZeroNode(mergedCellSets, nodePath, SETS_DATATYPE_CELL, cellSetColor, theme);\n    downloadForUser(\n      handleExportJSON(treeToExport),\n      `${nodeName}_${packageJson.name}-${SETS_DATATYPE_CELL}-hierarchy.${FILE_EXTENSION_JSON}`,\n    );\n  }\n\n  // The user wants to download a particular hierarchy to a CSV file.\n  function onExportLevelZeroNodeTabular(nodePath) {\n    const {\n      treeToExport, nodeName,\n    } = treeExportLevelZeroNode(mergedCellSets, nodePath, SETS_DATATYPE_CELL, cellSetColor, theme);\n    downloadForUser(\n      handleExportTabular(treeToExport),\n      `${nodeName}_${packageJson.name}-${SETS_DATATYPE_CELL}-hierarchy.${FILE_EXTENSION_TABULAR}`,\n    );\n  }\n\n  // The user wants to download a particular set to a JSON file.\n  function onExportSetJSON(nodePath) {\n    const { setToExport, nodeName } = treeExportSet(mergedCellSets, nodePath);\n    downloadForUser(\n      handleExportJSON(setToExport),\n      `${nodeName}_${packageJson.name}-${SETS_DATATYPE_CELL}-set.${FILE_EXTENSION_JSON}`,\n      FILE_EXTENSION_JSON,\n    );\n  }\n  return (\n    <TitleInfo\n      title={title}\n      isScroll\n      removeGridComponent={removeGridComponent}\n      urls={urls}\n      theme={theme}\n      isReady={isReady}\n    >\n      <SetsManager\n        setColor={cellSetColor}\n        sets={cellSets}\n        additionalSets={additionalCellSets}\n        levelSelection={checkedLevel}\n        setSelection={cellSetSelection}\n        setExpansion={cellSetExpansion}\n        hasColorEncoding={cellColorEncoding === 'cellSetSelection'}\n        draggable\n        datatype={SETS_DATATYPE_CELL}\n        onError={setWarning}\n        onCheckNode={onCheckNode}\n        onExpandNode={onExpandNode}\n        onDropNode={onDropNode}\n        onCheckLevel={onCheckLevel}\n        onNodeSetColor={onNodeSetColor}\n        onNodeSetName={onNodeSetName}\n        onNodeCheckNewName={onNodeCheckNewName}\n        onNodeRemove={onNodeRemove}\n        onNodeView={onNodeView}\n        onImportTree={onImportTree}\n        onCreateLevelZeroNode={onCreateLevelZeroNode}\n        onExportLevelZeroNodeJSON={onExportLevelZeroNodeJSON}\n        onExportLevelZeroNodeTabular={onExportLevelZeroNodeTabular}\n        onExportSetJSON={onExportSetJSON}\n        onUnion={onUnion}\n        onIntersection={onIntersection}\n        onComplement={onComplement}\n        hasCheckedSetsToUnion={cellSetSelection?.length > 1}\n        hasCheckedSetsToIntersect={cellSetSelection?.length > 1}\n        hasCheckedSetsToComplement={cellSetSelection?.length > 0}\n        theme={theme}\n      />\n    </TitleInfo>\n  );\n}\n","import React, { useMemo, useEffect } from 'react';\nimport TitleInfo from '../TitleInfo';\nimport { useCoordination, useLoaders } from '../../app/state/hooks';\nimport { COMPONENT_COORDINATION_TYPES } from '../../app/state/coordination';\nimport { useUrls, useReady, useGridItemSize } from '../hooks';\nimport { mergeCellSets } from '../utils';\nimport { useCellSetsData } from '../data-hooks';\nimport { treeToSetSizesBySetNames } from './cell-set-utils';\nimport CellSetSizesPlot from './CellSetSizesPlot';\n\nconst CELL_SET_SIZES_DATA_TYPES = ['cell-sets'];\n\n/**\n * A subscriber component for `CellSetSizePlot`,\n * which listens for cell sets data updates and\n * `GRID_RESIZE` events.\n * @param {object} props\n * @param {function} props.removeGridComponent The grid component removal function.\n * @param {function} props.onReady The function to call when the subscriptions\n * have been made.\n * @param {string} props.theme The name of the current Vitessce theme.\n * @param {string} props.title The component title.\n */\nexport default function CellSetSizesPlotSubscriber(props) {\n  const {\n    coordinationScopes,\n    removeGridComponent,\n    theme,\n    title = 'Cell Set Sizes',\n  } = props;\n\n  const loaders = useLoaders();\n\n  // Get \"props\" from the coordination space.\n  const [{\n    dataset,\n    cellSetSelection,\n    cellSetColor,\n    additionalCellSets,\n  }, {\n    setCellSetSelection,\n    setCellSetColor,\n  }] = useCoordination(COMPONENT_COORDINATION_TYPES.cellSetSizes, coordinationScopes);\n\n  const [width, height, containerRef] = useGridItemSize();\n  const [urls, addUrl, resetUrls] = useUrls();\n  const [\n    isReady,\n    setItemIsReady,\n    setItemIsNotReady, // eslint-disable-line no-unused-vars\n    resetReadyItems,\n  ] = useReady(\n    CELL_SET_SIZES_DATA_TYPES,\n  );\n\n  // Reset file URLs and loader progress when the dataset has changed.\n  useEffect(() => {\n    resetUrls();\n    resetReadyItems();\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  // Get data from loaders using the data hooks.\n  const [cellSets] = useCellSetsData(\n    loaders, dataset, setItemIsReady, addUrl, true,\n    { setCellSetSelection, setCellSetColor },\n    { cellSetSelection, cellSetColor },\n  );\n\n  const mergedCellSets = useMemo(\n    () => mergeCellSets(cellSets, additionalCellSets),\n    [cellSets, additionalCellSets],\n  );\n\n  // From the cell sets hierarchy and the list of selected cell sets,\n  // generate the array of set sizes data points for the bar plot.\n  const data = useMemo(() => (mergedCellSets && cellSetSelection && cellSetColor\n    ? treeToSetSizesBySetNames(mergedCellSets, cellSetSelection, cellSetColor, theme)\n    : []\n  ), [mergedCellSets, cellSetSelection, cellSetColor, theme]);\n\n  return (\n    <TitleInfo\n      title={title}\n      removeGridComponent={removeGridComponent}\n      urls={urls}\n      theme={theme}\n      isReady={isReady}\n    >\n      <div ref={containerRef} className=\"vega-container\">\n        <CellSetSizesPlot\n          data={data}\n          theme={theme}\n          width={width}\n          height={height}\n        />\n      </div>\n    </TitleInfo>\n  );\n}\n","import React from 'react';\nimport IconButton from '@material-ui/core/IconButton';\nimport LensIcon from '@material-ui/icons/Lens';\nimport { makeStyles } from '@material-ui/core/styles';\n\n\nimport { VIEWER_PALETTE } from '../utils';\n\nconst useStyles = makeStyles(theme => ({\n  container: {\n    width: '70px',\n    height: '40px',\n    display: 'flex',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    flexWrap: 'wrap',\n  },\n  button: {\n    padding: '3px',\n    width: '16px',\n  },\n  icon: {\n    width: '17px',\n    height: '17px',\n    stroke: theme.palette.action.selected,\n    'stroke-width': '1px',\n  },\n}));\n\nconst ColorPalette = ({ handleChange }) => {\n  const classes = useStyles();\n  return (\n    <div className={classes.container} aria-label=\"color-swatch\">\n      {VIEWER_PALETTE.map(color => (\n        <IconButton\n          className={classes.button}\n          key={color}\n          onClick={() => handleChange(color)}\n        >\n          <LensIcon\n            fontSize=\"small\"\n            style={{ color: `rgb(${color})` }}\n            className={classes.icon}\n          />\n        </IconButton>\n      ))}\n    </div>\n  );\n};\n\nexport default ColorPalette;\n","import React, { useState } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport { PopperMenu, MuiSpan } from '../shared-mui/components';\n\nimport ColorPalette from './ColorPalette';\n\nconst useStyles = makeStyles(() => ({\n  menuButton: {\n    backgroundColor: 'transparent',\n  },\n  colors: {\n    '&:hover': {\n      backgroundColor: 'transparent',\n    },\n    paddingLeft: '2px',\n    paddingRight: '2px',\n  },\n}));\n\n/**\n * Dropdown for options for a channel on the three dots button.\n * @prop {function} handlePropertyChange Callback for changing property (color, IQR of sliders).\n * @prop {function} handleChannelRemove Callback for channel removal.\n * @prop {function} handleIQRUpdate Callback for IQR slider update.\n */\nfunction ChannelOptions({ handlePropertyChange, handleChannelRemove, handleIQRUpdate }) {\n  const [open, setOpen] = useState(false);\n\n  const classes = useStyles();\n\n  const handleColorSelect = (color) => {\n    handlePropertyChange('color', color);\n  };\n\n  const handleRemove = () => {\n    setOpen(false);\n    handleChannelRemove();\n  };\n\n  return (\n    <PopperMenu\n      open={open}\n      setOpen={setOpen}\n      buttonIcon={<MoreVertIcon fontSize=\"small\" />}\n      buttonClassName={classes.menuButton}\n    >\n      <MenuItem dense disableGutters onClick={handleRemove}>\n        <MuiSpan>Remove</MuiSpan>\n      </MenuItem>\n      <MenuItem dense disableGutters onClick={handleIQRUpdate}>\n        <MuiSpan>Use IQR</MuiSpan>\n      </MenuItem>\n      <MenuItem dense disableGutters className={classes.colors}>\n        <ColorPalette handleChange={handleColorSelect} />\n      </MenuItem>\n    </PopperMenu>\n  );\n}\n\nexport default ChannelOptions;\n","import React from 'react';\n\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Select from '@material-ui/core/Select';\nimport { useSelectStyles } from './styles';\n\n/**\n * Dropdown for selecting a channel.\n * @prop {function} handleChange Callback for each new selection.\n * @prop {array} channelOptions List of available selections, like ['DAPI', 'FITC', ...].\n * @prop {boolean} disabled Whether or not the component is disabled.\n * @prop {number} selectionIndex Current numeric index of a selection.\n */\nexport function ChannelSelectionDropdown({\n  handleChange,\n  disabled,\n  channelOptions,\n  selectionIndex,\n}) {\n  const classes = useSelectStyles();\n  return (\n    <Select\n      classes={{ root: classes.selectRoot }}\n      native\n      value={selectionIndex}\n      onChange={e => handleChange(Number(e.target.value))}\n    >\n      {channelOptions.map((opt, i) => (\n        <option disabled={disabled} key={opt} value={i}>\n          {opt}\n        </option>\n      ))}\n    </Select>\n  );\n}\n\n/**\n * Checkbox for toggling on/off of a channel.\n * @prop {string} color Current color for this channel.\n * @prop {boolean} checked Whether or not this channel is \"on\".\n * @prop {boolean} disabled Whether or not the component is disabled.\n * @prop {function} toggle Callback for toggling on/off.\n */\nexport function ChannelVisibilityCheckbox({\n  color, checked, toggle, disabled,\n}) {\n  return (\n    <Checkbox\n      onChange={toggle}\n      checked={checked}\n      disabled={disabled}\n      style={{ color, '&$checked': { color } }}\n    />\n  );\n}\n","import React, { useCallback, useState, useEffect } from 'react';\n\nimport Grid from '@material-ui/core/Grid';\nimport Slider from '@material-ui/core/Slider';\nimport debounce from 'lodash/debounce';\nimport isEqual from 'lodash/isEqual';\n\nimport ChannelOptions from './ChannelOptions';\nimport { DOMAINS } from './constants';\nimport { getSourceFromLoader } from '../../utils';\nimport { getMultiSelectionStats } from './utils';\nimport {\n  ChannelSelectionDropdown,\n  ChannelVisibilityCheckbox,\n} from './shared-channel-controls';\n\n// Returns an rgb string for display, and changes the color (arr)\n// to use a grey for light theme + white color or if the colormap is on.\nexport const toRgbUIString = (on, arr, theme) => {\n  const color = on || (theme === 'light' && arr.every(i => i === 255))\n    ? [220, 220, 220]\n    : arr;\n  return `rgb(${color})`;\n};\n\nfunction abbreviateNumber(value) {\n  // Return an abbreviated representation of value, in 5 characters or less.\n\n  const maxLength = 5;\n  let maxNaiveDigits = maxLength;\n\n  /* eslint-disable no-plusplus */\n  if (!Number.isInteger(value)) {\n    --maxNaiveDigits;\n  } // Wasted on \".\"\n  if (value < 1) {\n    --maxNaiveDigits;\n  } // Wasted on \"0.\"\n  /* eslint-disable no-plusplus */\n\n  const naive = Intl.NumberFormat('en-US', {\n    maximumSignificantDigits: maxNaiveDigits,\n    useGrouping: false,\n  }).format(value);\n  if (naive.length <= maxLength) return naive;\n\n  // \"e+9\" consumes 3 characters, so if we even had two significant digits,\n  // it would take take us to six characters, including the decimal point.\n  return value.toExponential(0);\n}\n\n/**\n * Slider for controlling current colormap.\n * @prop {string} color Current color for this channel.\n * @prop {arry} slider Current value of the slider.\n * @prop {function} handleChange Callback for each slider change.\n * @prop {array} domain Current max/min allowable slider values.\n */\nfunction ChannelSlider({\n  color,\n  slider = [0, 0],\n  handleChange,\n  domain = [0, 0],\n  dtype,\n  disabled,\n}) {\n  const [min, max] = domain;\n  const handleChangeDebounced = useCallback(\n    debounce(handleChange, 3, { trailing: true }),\n    [handleChange],\n  );\n  const step = max - min < 500 && dtype === 'Float32' ? (max - min) / 500 : 1;\n  return (\n    <Slider\n      value={slider}\n      valueLabelFormat={abbreviateNumber}\n      onChange={(e, v) => handleChangeDebounced(v)}\n      valueLabelDisplay=\"auto\"\n      getAriaLabel={() => `${color}-${slider}`}\n      min={min}\n      max={max}\n      step={step}\n      orientation=\"horizontal\"\n      style={{ color, marginTop: '7px' }}\n      disabled={disabled}\n    />\n  );\n}\n\n/**\n * Controller for the handling the colormapping sliders.\n * @prop {boolean} visibility Whether or not this channel is \"on\"\n * @prop {array} slider Current slider range.\n * @prop {array} color Current color for this channel.\n * @prop {array} domain Current max/min for this channel.\n * @prop {string} dimName Name of the dimensions this slider controls (usually \"channel\").\n * @prop {boolean} colormapOn Whether or not the colormap (viridis, magma etc.) is on.\n * @prop {object} channelOptions All available options for this dimension (i.e channel names).\n * @prop {function} handlePropertyChange Callback for when a property (color, slider etc.) changes.\n * @prop {function} handleChannelRemove When a channel is removed, this is called.\n * @prop {function} handleIQRUpdate When the IQR button is clicked, this is called.\n * @prop {number} selectionIndex The current numeric index of the selection.\n */\nfunction RasterChannelController({\n  visibility = false,\n  slider,\n  color,\n  channels,\n  channelId,\n  domainType: newDomainType,\n  dimName,\n  theme,\n  loader,\n  colormapOn,\n  channelOptions,\n  handlePropertyChange,\n  handleChannelRemove,\n  handleIQRUpdate,\n  selectionIndex,\n  isLoading,\n  use3d: newUse3d,\n}) {\n  const { dtype } = getSourceFromLoader(loader);\n  const [domain, setDomain] = useState(null);\n  const [domainType, setDomainType] = useState(null);\n  const [use3d, setUse3d] = useState(null);\n  const [selection, setSelection] = useState([\n    { ...channels[channelId].selection },\n  ]);\n  const rgbColor = toRgbUIString(colormapOn, color, theme);\n\n  useEffect(() => {\n    // Use mounted to prevent state updates/re-renders after the component has been unmounted.\n    // All state updates should happen within the mounted check.\n    let mounted = true;\n    if (dtype && loader && channels) {\n      const selections = [{ ...channels[channelId].selection }];\n      let domains;\n      const hasDomainChanged = newDomainType !== domainType;\n      const has3dChanged = use3d !== newUse3d;\n      const hasSelectionChanged = !isEqual(selections, selection);\n      if (hasDomainChanged || hasSelectionChanged || has3dChanged) {\n        if (newDomainType === 'Full') {\n          domains = [DOMAINS[dtype]];\n          const [newDomain] = domains;\n          if (mounted) {\n            setDomain(newDomain);\n            setDomainType(newDomainType);\n            if (hasSelectionChanged) {\n              setSelection(selections);\n            }\n            if (has3dChanged) {\n              setUse3d(newUse3d);\n            }\n          }\n        } else {\n          getMultiSelectionStats({\n            loader: loader.data,\n            selections,\n            use3d: newUse3d,\n          }).then((stats) => {\n            // eslint-disable-next-line prefer-destructuring\n            domains = stats.domains;\n            const [newDomain] = domains;\n            if (mounted) {\n              setDomain(newDomain);\n              setDomainType(newDomainType);\n              if (hasSelectionChanged) {\n                setSelection(selections);\n              }\n              if (has3dChanged) {\n                setUse3d(newUse3d);\n              }\n            }\n          });\n        }\n      }\n    }\n    return () => {\n      mounted = false;\n    };\n  }, [\n    domainType,\n    channels,\n    channelId,\n    loader,\n    dtype,\n    newDomainType,\n    selection,\n    newUse3d,\n    use3d,\n  ]);\n  /* A valid selection is defined by an object where the keys are\n   *  the name of a dimension of the data, and the values are the\n   *  index of the image along that particular dimension.\n   *\n   *  Since we currently only support making a selection along one\n   *  addtional dimension (i.e. the dropdown just has channels or mz)\n   *  we have a helper function to create the selection.\n   *\n   *  e.g { channel: 2 } // channel dimension, third channel\n   */\n  const createSelection = index => ({ [dimName]: index });\n  return (\n    <Grid container direction=\"column\" m={1} justify=\"center\">\n      <Grid container direction=\"row\" justify=\"space-between\">\n        <Grid item xs={10}>\n          <ChannelSelectionDropdown\n            handleChange={v => handlePropertyChange('selection', createSelection(v))\n            }\n            selectionIndex={selectionIndex}\n            channelOptions={channelOptions}\n            disabled={isLoading}\n          />\n        </Grid>\n        <Grid item xs={1} style={{ marginTop: '4px' }}>\n          <ChannelOptions\n            handlePropertyChange={handlePropertyChange}\n            handleChannelRemove={handleChannelRemove}\n            handleIQRUpdate={handleIQRUpdate}\n            disabled={isLoading}\n          />\n        </Grid>\n      </Grid>\n      <Grid container direction=\"row\" justify=\"space-between\">\n        <Grid item xs={2}>\n          <ChannelVisibilityCheckbox\n            color={rgbColor}\n            checked={visibility}\n            toggle={() => handlePropertyChange('visible', !visibility)}\n            disabled={isLoading}\n          />\n        </Grid>\n        <Grid item xs={9}>\n          <ChannelSlider\n            color={rgbColor}\n            slider={slider}\n            domain={domain || DOMAINS[dtype]}\n            dtype={dtype}\n            handleChange={v => handlePropertyChange('slider', v)}\n            disabled={isLoading}\n          />\n        </Grid>\n      </Grid>\n    </Grid>\n  );\n}\n\nexport default RasterChannelController;\n","import React from 'react';\n\nimport RemoveCircleIcon from '@material-ui/icons/RemoveCircle';\nimport IconButton from '@material-ui/core/IconButton';\n\nimport Grid from '@material-ui/core/Grid';\n\nimport { ChannelSelectionDropdown, ChannelVisibilityCheckbox } from './shared-channel-controls';\n\n/**\n * Controller for the handling the bitmask channels.\n * @prop {boolean} visibility Whether or not this channel is \"on\"\n * @prop {string} dimName Name of the dimensions this slider controls (usually \"channel\").\n * @prop {object} channelOptions All available options for this dimension (i.e channel names).\n * @prop {function} handlePropertyChange Callback for when a property (color, slider etc.) changes.\n * @prop {function} handleChannelRemove When a channel is removed, this is called.\n * @prop {number} selectionIndex The current numeric index of the selection.\n * @prop {boolean} disableOptions Whether or not channel options are be disabled (default: false).\n */\nfunction BitmaskChannelController({\n  visibility = false,\n  dimName,\n  channelOptions,\n  handlePropertyChange,\n  handleChannelRemove,\n  selectionIndex,\n  disableOptions = false,\n}) {\n  /* A valid selection is defined by an object where the keys are\n  *  the name of a dimension of the data, and the values are the\n  *  index of the image along that particular dimension.\n  *\n  *  Since we currently only support making a selection along one\n  *  addtional dimension (i.e. the dropdown just has channels or mz)\n  *  we have a helper function to create the selection.\n  *\n  *  e.g { channel: 2 } // channel dimension, third channel\n  */\n  const createSelection = index => ({ [dimName]: index });\n  return (\n    <Grid container direction=\"row\" justify=\"space-between\">\n      <Grid item xs={2}>\n        <ChannelVisibilityCheckbox\n          color={[220, 220, 220]}\n          checked={visibility}\n          toggle={() => handlePropertyChange('visible', !visibility)}\n        />\n      </Grid>\n      <Grid item xs={9}>\n        <ChannelSelectionDropdown\n          handleChange={v => handlePropertyChange('selection', createSelection(v))}\n          selectionIndex={selectionIndex}\n          disableOptions={disableOptions}\n          channelOptions={channelOptions}\n        />\n      </Grid>\n      <Grid item xs={1}>\n        <IconButton onClick={handleChannelRemove} style={{ padding: '6px 6px 6px 0px' }}>\n          <RemoveCircleIcon />\n        </IconButton>\n      </Grid>\n    </Grid>\n  );\n}\n\nexport default BitmaskChannelController;\n","import React, { useState } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport AddIcon from '@material-ui/icons/Add';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport { PopperMenu } from '../shared-mui/components';\n\nconst useStyles = makeStyles(() => ({\n  addButton: {\n    marginTop: '10px',\n    marginBottom: '10px',\n    fontWeight: 400,\n  },\n}));\n\nfunction ImageAddIcon() {\n  return (\n    <>\n      <AddIcon />\n      Add Image Layer\n    </>\n  );\n}\n\nfunction ImageAddButton({ imageOptions, handleImageAdd }) {\n  const [open, setOpen] = useState(false);\n  const classes = useStyles();\n\n  const handleAdd = (imgData) => {\n    setOpen(prev => !prev);\n    handleImageAdd(imgData);\n  };\n\n  if (!imageOptions) return null;\n  return (\n    <PopperMenu\n      open={open}\n      setOpen={setOpen}\n      buttonIcon={<ImageAddIcon />}\n      buttonClassName={classes.addButton}\n    >\n      {imageOptions.map((imgData, i) => (\n        <MenuItem dense key={imgData.name} onClick={() => handleAdd(i)}>\n          <span>{imgData.name}</span>\n        </MenuItem>\n      ))}\n    </PopperMenu>\n  );\n}\n\nexport default ImageAddButton;\n","/* eslint-disable dot-notation */\nimport React, {\n  useEffect, useCallback, useRef, forwardRef,\n} from 'react';\nimport Grid from '@material-ui/core/Grid';\nimport TitleInfo from '../TitleInfo';\nimport RasterChannelController from './RasterChannelController';\nimport BitmaskChannelController from './BitmaskChannelController';\nimport VectorLayerController from './VectorLayerController';\nimport LayerController from './LayerController';\nimport ImageAddButton from './ImageAddButton';\nimport { useReady, useClosestVitessceContainerSize, useWindowDimensions } from '../hooks';\nimport { useCellsData, useMoleculesData, useRasterData } from '../data-hooks';\nimport {\n  useCoordination,\n  useLoaders,\n  useAuxiliaryCoordination,\n  useComponentLayout,\n} from '../../app/state/hooks';\nimport { COMPONENT_COORDINATION_TYPES } from '../../app/state/coordination';\nimport { initializeLayerChannels } from '../spatial/utils';\nimport { DEFAULT_RASTER_LAYER_PROPS } from '../spatial/constants';\n\nconst LAYER_CONTROLLER_DATA_TYPES = ['raster'];\n\n// LayerController is memoized to prevent updates from prop changes that\n// are caused by view state updates i.e zooming and panning within\n// the actual Spatial component.  Re-rendering this component is very\n// expensive so we have to be careful with props in this file in general.\nconst LayerControllerMemoized = React.memo(\n  forwardRef((props, ref) => {\n    const {\n      title,\n      removeGridComponent,\n      theme,\n      isReady,\n      moleculesLayer,\n      dataset,\n      setMoleculesLayer,\n      cellsLayer,\n      canShowCellVecmask,\n      setCellsLayer,\n      rasterLayers,\n      imageLayerLoaders,\n      imageLayerMeta,\n      rasterLayersCallbacks,\n      setRasterLayersCallbacks,\n      areLoadingRasterChannnels,\n      setAreLoadingRasterChannnels,\n      handleRasterLayerChange,\n      handleRasterLayerRemove,\n      disable3d,\n      globalDisable3d,\n      disableChannelsIfRgbDetected,\n      layerIs3DIndex,\n      setZoom,\n      setTargetX,\n      setTargetY,\n      setTargetZ,\n      setRotationX,\n      setRotationOrbit,\n      componentHeight,\n      componentWidth,\n      spatialLayout,\n      handleImageAdd,\n      enableLayerButtonsWithOneLayer,\n    } = props;\n    const shouldShowImageLayerButton = Boolean(\n      enableLayerButtonsWithOneLayer || imageLayerLoaders?.length > 1,\n    );\n    return (\n      <TitleInfo\n        title={title}\n        isScroll\n        removeGridComponent={removeGridComponent}\n        theme={theme}\n        isReady={isReady}\n      >\n        <div className=\"layer-controller-container\" ref={ref}>\n          {moleculesLayer && (\n            <VectorLayerController\n              key={`${dataset}-molecules`}\n              label=\"Molecules\"\n              layerType=\"molecules\"\n              layer={moleculesLayer}\n              handleLayerChange={setMoleculesLayer}\n            />\n          )}\n          {cellsLayer && canShowCellVecmask && (\n            <VectorLayerController\n              key={`${dataset}-cells`}\n              label=\"Cell Segmentations\"\n              layerType=\"cells\"\n              layer={cellsLayer}\n              handleLayerChange={setCellsLayer}\n            />\n          )}\n          {rasterLayers\n            && rasterLayers.map((layer, i) => {\n              const { index } = layer;\n              const loader = imageLayerLoaders[index];\n              const layerMeta = imageLayerMeta[index];\n              // Could also be bitmask at the moment.\n              const isRaster = !layerMeta?.metadata?.isBitmask;\n              const ChannelController = isRaster\n                ? RasterChannelController\n                : BitmaskChannelController;\n              // Set up the call back mechanism so that each layer manages\n              // callbacks/loading state for itself and its channels.\n              const setRasterLayerCallback = (cb) => {\n                const newRasterLayersCallbacks = [\n                  ...(rasterLayersCallbacks || []),\n                ];\n                newRasterLayersCallbacks[i] = cb;\n                setRasterLayersCallbacks(newRasterLayersCallbacks);\n              };\n              const areLayerChannelsLoading = (areLoadingRasterChannnels || [])[i] || [];\n              const setAreLayerChannelsLoading = (v) => {\n                const newAreLoadingRasterChannnels = [\n                  ...(areLoadingRasterChannnels || []),\n                ];\n                newAreLoadingRasterChannnels[i] = v;\n                setAreLoadingRasterChannnels(newAreLoadingRasterChannnels);\n              };\n              return loader && layerMeta ? (\n                <Grid\n                  // eslint-disable-next-line react/no-array-index-key\n                  key={`${dataset}-raster-${index}-${i}`}\n                  item\n                  style={{ marginTop: '10px' }}\n                >\n                  <LayerController\n                    name={layerMeta.name}\n                    layer={layer}\n                    loader={loader}\n                    theme={theme}\n                    handleLayerChange={v => handleRasterLayerChange(v, i)}\n                    handleLayerRemove={() => handleRasterLayerRemove(i)}\n                    ChannelController={ChannelController}\n                    shouldShowTransparentColor={isRaster}\n                    shouldShowDomain={isRaster}\n                    shouldShowColormap={isRaster}\n                    // Disable 3D if given explicit instructions to do so\n                    // or if another layer is using 3D mode.\n                    disable3d={\n                      globalDisable3d\n                      || (disable3d || []).indexOf(layerMeta.name) >= 0\n                      || (typeof layerIs3DIndex === 'number'\n                        && layerIs3DIndex !== -1\n                        && layerIs3DIndex !== i)\n                    }\n                    disabled={\n                      typeof layerIs3DIndex === 'number'\n                      && layerIs3DIndex !== -1\n                      && layerIs3DIndex !== i\n                    }\n                    disableChannelsIfRgbDetected={disableChannelsIfRgbDetected}\n                    rasterLayersCallbacks={rasterLayersCallbacks}\n                    setRasterLayerCallback={setRasterLayerCallback}\n                    setViewState={({\n                      zoom: newZoom,\n                      target,\n                      rotationX: newRotationX,\n                      rotationOrbit: newRotationOrbit,\n                    }) => {\n                      setZoom(newZoom);\n                      setTargetX(target[0]);\n                      setTargetY(target[1]);\n                      setTargetZ(target[2]);\n                      setRotationX(newRotationX);\n                      setRotationOrbit(newRotationOrbit);\n                    }}\n                    setAreLayerChannelsLoading={setAreLayerChannelsLoading}\n                    areLayerChannelsLoading={areLayerChannelsLoading}\n                    spatialHeight={(componentHeight * (spatialLayout ? spatialLayout.h : 1)) / 12}\n                    spatialWidth={(componentWidth * (spatialLayout ? spatialLayout.w : 1)) / 12}\n                    shouldShowRemoveLayerButton={shouldShowImageLayerButton}\n                  />\n                </Grid>\n              ) : null;\n            })}\n          {shouldShowImageLayerButton\n            ? (\n              <Grid item>\n                <ImageAddButton\n                  imageOptions={imageLayerMeta}\n                  handleImageAdd={handleImageAdd}\n                />\n              </Grid>\n            ) : null}\n        </div>\n      </TitleInfo>\n    );\n  }),\n);\n\n/**\n * A subscriber component for the spatial layer controller.\n * @param {object} props\n * @param {string} props.theme The current theme name.\n * @param {object} props.coordinationScopes The mapping from coordination types to coordination\n * scopes.\n * @param {function} props.removeGridComponent The callback function to pass to TitleInfo,\n * to call when the component has been removed from the grid.\n * @param {string} props.title The component title.\n * @param {Object} props.disable3d Which layers should have 3D disabled (from `raster.json` names).\n * @param {boolean} props.globalDisable3d Disable 3D for all layers. Overrides the `disable3d` prop.\n * @param {boolean} props.disableChannelsIfRgbDetected Disable channel controls if an\n * RGB image is detected i.e 3 channel 8 bit.\n * @param {boolean} props.enableLayerButtonsWithOneLayer If there is only one layer,\n * show the the layer add/remove buttons.\n */\nfunction LayerControllerSubscriber(props) {\n  const {\n    coordinationScopes,\n    removeGridComponent,\n    theme,\n    title = 'Spatial Layers',\n    disable3d,\n    globalDisable3d,\n    disableChannelsIfRgbDetected,\n    enableLayerButtonsWithOneLayer,\n  } = props;\n\n  const loaders = useLoaders();\n\n  // Get \"props\" from the coordination space.\n  const [\n    {\n      dataset,\n      spatialRasterLayers: rasterLayers,\n      spatialCellsLayer: cellsLayer,\n      spatialMoleculesLayer: moleculesLayer,\n    },\n    {\n      setSpatialRasterLayers: setRasterLayers,\n      setSpatialCellsLayer: setCellsLayer,\n      setSpatialMoleculesLayer: setMoleculesLayer,\n      setSpatialTargetX: setTargetX,\n      setSpatialTargetY: setTargetY,\n      setSpatialTargetZ: setTargetZ,\n      setSpatialRotationX: setRotationX,\n      setSpatialRotationOrbit: setRotationOrbit,\n      setSpatialZoom: setZoom,\n    },\n  ] = useCoordination(\n    COMPONENT_COORDINATION_TYPES.layerController,\n    coordinationScopes,\n  );\n\n  const [\n    {\n      rasterLayersCallbacks,\n      areLoadingRasterChannnels,\n    },\n    {\n      setRasterLayersCallbacks,\n      setAreLoadingRasterChannnels,\n    },\n  ] = useAuxiliaryCoordination(\n    COMPONENT_COORDINATION_TYPES.layerController,\n    coordinationScopes,\n  );\n  // Spatial layout + window size is needed for the \"re-center\" button to work properly.\n  // Dimensions of the Spatial component can be inferred and used for resetting view state to\n  // a nice, centered view.\n  const [spatialLayout] = useComponentLayout('spatial', ['spatialRasterLayers'], coordinationScopes);\n  const layerControllerRef = useRef();\n  const [componentWidth, componentHeight] = useClosestVitessceContainerSize(layerControllerRef);\n  const { height: windowHeight, width: windowWidth } = useWindowDimensions();\n\n  const [\n    isReady,\n    setItemIsReady,\n    setItemIsNotReady, // eslint-disable-line no-unused-vars\n    resetReadyItems,\n  ] = useReady(\n    LAYER_CONTROLLER_DATA_TYPES,\n  );\n\n  // Reset loader progress when the dataset has changed.\n  useEffect(() => {\n    resetReadyItems();\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  // Get data from loaders using the data hooks.\n  // eslint-disable-next-line no-unused-vars\n  const [raster, imageLayerLoaders, imageLayerMeta] = useRasterData(\n    loaders, dataset, setItemIsReady, () => { }, false,\n    { setSpatialRasterLayers: setRasterLayers },\n    { spatialRasterLayers: rasterLayers },\n  );\n\n  useCellsData(\n    loaders, dataset, setItemIsReady, () => {}, false,\n    { setSpatialCellsLayer: setCellsLayer },\n    { spatialCellsLayer: cellsLayer },\n  );\n  useMoleculesData(\n    loaders, dataset, setItemIsReady, () => {}, false,\n    { setSpatialMoleculesLayer: setMoleculesLayer },\n    { spatialMoleculesLayer: moleculesLayer },\n  );\n\n  // useCallback prevents new functions from propogating\n  // changes to the underlying component.\n  const handleImageAdd = useCallback(async (index) => {\n    const loader = imageLayerLoaders[index];\n    const newChannels = await initializeLayerChannels(\n      loader,\n      (rasterLayers[index] || {}).use3d,\n    );\n    const newLayer = {\n      index,\n      modelMatrix: imageLayerMeta[index]?.metadata?.transform?.matrix,\n      ...DEFAULT_RASTER_LAYER_PROPS,\n      channels: newChannels,\n      type: imageLayerMeta[index]?.metadata?.isBitmask ? 'bitmask' : 'raster',\n    };\n    const newLayers = [...rasterLayers, newLayer];\n    setRasterLayers(newLayers);\n  }, [imageLayerLoaders, imageLayerMeta, rasterLayers, setRasterLayers]);\n\n  const handleRasterLayerChange = useCallback((newLayer, i) => {\n    const newLayers = [...rasterLayers];\n    newLayers[i] = newLayer;\n    setRasterLayers(newLayers);\n  }, [rasterLayers, setRasterLayers]);\n\n  const handleRasterLayerRemove = useCallback((i) => {\n    const newLayers = [...rasterLayers];\n    newLayers.splice(i, 1);\n    setRasterLayers(newLayers);\n  }, [rasterLayers, setRasterLayers]);\n\n  const hasNoBitmask = (\n    imageLayerMeta.length ? imageLayerMeta : [{ metadata: { isBitmask: true } }]\n  ).every(l => !l?.metadata?.isBitmask);\n  // Only want to show vector cells controller if there is no bitmask\n  const canShowCellVecmask = hasNoBitmask;\n  const layerIs3DIndex = rasterLayers?.findIndex && rasterLayers.findIndex(layer => layer.use3d);\n  return (\n    <LayerControllerMemoized\n      ref={layerControllerRef}\n      title={title}\n      removeGridComponent={removeGridComponent}\n      theme={theme}\n      isReady={isReady}\n      moleculesLayer={moleculesLayer}\n      dataset={dataset}\n      setMoleculesLayer={setMoleculesLayer}\n      cellsLayer={cellsLayer}\n      canShowCellVecmask={canShowCellVecmask}\n      setCellsLayer={setCellsLayer}\n      rasterLayers={rasterLayers}\n      imageLayerLoaders={imageLayerLoaders}\n      imageLayerMeta={imageLayerMeta}\n      rasterLayersCallbacks={rasterLayersCallbacks}\n      setRasterLayersCallbacks={setRasterLayersCallbacks}\n      areLoadingRasterChannnels={areLoadingRasterChannnels}\n      setAreLoadingRasterChannnels={setAreLoadingRasterChannnels}\n      handleRasterLayerChange={handleRasterLayerChange}\n      handleRasterLayerRemove={handleRasterLayerRemove}\n      disable3d={disable3d}\n      globalDisable3d={globalDisable3d}\n      layerIs3DIndex={layerIs3DIndex}\n      disableChannelsIfRgbDetected={disableChannelsIfRgbDetected}\n      enableLayerButtonsWithOneLayer={enableLayerButtonsWithOneLayer}\n      setZoom={setZoom}\n      setTargetX={setTargetX}\n      setTargetY={setTargetY}\n      setTargetZ={setTargetZ}\n      setRotationX={setRotationX}\n      setRotationOrbit={setRotationOrbit}\n      // Fall back to window for height and width.\n      componentHeight={componentHeight || windowHeight}\n      componentWidth={componentWidth || windowWidth}\n      spatialLayout={spatialLayout}\n      handleImageAdd={handleImageAdd}\n    />\n  );\n}\n\nexport default LayerControllerSubscriber;\n","module.exports = function() {\n  return require(\"!!/home/runner/work/vitessce/vitessce/node_modules/worker-loader/dist/workers/InlineWorker.js\")(\"/******/ (function(modules) { // webpackBootstrap\\n/******/ \\t// The module cache\\n/******/ \\tvar installedModules = {};\\n/******/\\n/******/ \\t// The require function\\n/******/ \\tfunction __webpack_require__(moduleId) {\\n/******/\\n/******/ \\t\\t// Check if module is in cache\\n/******/ \\t\\tif(installedModules[moduleId]) {\\n/******/ \\t\\t\\treturn installedModules[moduleId].exports;\\n/******/ \\t\\t}\\n/******/ \\t\\t// Create a new module (and put it into the cache)\\n/******/ \\t\\tvar module = installedModules[moduleId] = {\\n/******/ \\t\\t\\ti: moduleId,\\n/******/ \\t\\t\\tl: false,\\n/******/ \\t\\t\\texports: {}\\n/******/ \\t\\t};\\n/******/\\n/******/ \\t\\t// Execute the module function\\n/******/ \\t\\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\\n/******/\\n/******/ \\t\\t// Flag the module as loaded\\n/******/ \\t\\tmodule.l = true;\\n/******/\\n/******/ \\t\\t// Return the exports of the module\\n/******/ \\t\\treturn module.exports;\\n/******/ \\t}\\n/******/\\n/******/\\n/******/ \\t// expose the modules object (__webpack_modules__)\\n/******/ \\t__webpack_require__.m = modules;\\n/******/\\n/******/ \\t// expose the module cache\\n/******/ \\t__webpack_require__.c = installedModules;\\n/******/\\n/******/ \\t// define getter function for harmony exports\\n/******/ \\t__webpack_require__.d = function(exports, name, getter) {\\n/******/ \\t\\tif(!__webpack_require__.o(exports, name)) {\\n/******/ \\t\\t\\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\\n/******/ \\t\\t}\\n/******/ \\t};\\n/******/\\n/******/ \\t// define __esModule on exports\\n/******/ \\t__webpack_require__.r = function(exports) {\\n/******/ \\t\\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\\n/******/ \\t\\t\\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\\n/******/ \\t\\t}\\n/******/ \\t\\tObject.defineProperty(exports, '__esModule', { value: true });\\n/******/ \\t};\\n/******/\\n/******/ \\t// create a fake namespace object\\n/******/ \\t// mode & 1: value is a module id, require it\\n/******/ \\t// mode & 2: merge all properties of value into the ns\\n/******/ \\t// mode & 4: return value when already ns object\\n/******/ \\t// mode & 8|1: behave like require\\n/******/ \\t__webpack_require__.t = function(value, mode) {\\n/******/ \\t\\tif(mode & 1) value = __webpack_require__(value);\\n/******/ \\t\\tif(mode & 8) return value;\\n/******/ \\t\\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\\n/******/ \\t\\tvar ns = Object.create(null);\\n/******/ \\t\\t__webpack_require__.r(ns);\\n/******/ \\t\\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\\n/******/ \\t\\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\\n/******/ \\t\\treturn ns;\\n/******/ \\t};\\n/******/\\n/******/ \\t// getDefaultExport function for compatibility with non-harmony modules\\n/******/ \\t__webpack_require__.n = function(module) {\\n/******/ \\t\\tvar getter = module && module.__esModule ?\\n/******/ \\t\\t\\tfunction getDefault() { return module['default']; } :\\n/******/ \\t\\t\\tfunction getModuleExports() { return module; };\\n/******/ \\t\\t__webpack_require__.d(getter, 'a', getter);\\n/******/ \\t\\treturn getter;\\n/******/ \\t};\\n/******/\\n/******/ \\t// Object.prototype.hasOwnProperty.call\\n/******/ \\t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\\n/******/\\n/******/ \\t// __webpack_public_path__\\n/******/ \\t__webpack_require__.p = \\\"./\\\";\\n/******/\\n/******/\\n/******/ \\t// Load entry module and return exports\\n/******/ \\treturn __webpack_require__(__webpack_require__.s = 23);\\n/******/ })\\n/************************************************************************/\\n/******/ ([\\n/* 0 */\\n/***/ (function(module, exports) {\\n\\n/**\\n * Checks if `value` is the\\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\\n *\\n * @static\\n * @memberOf _\\n * @since 0.1.0\\n * @category Lang\\n * @param {*} value The value to check.\\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\\n * @example\\n *\\n * _.isObject({});\\n * // => true\\n *\\n * _.isObject([1, 2, 3]);\\n * // => true\\n *\\n * _.isObject(_.noop);\\n * // => true\\n *\\n * _.isObject(null);\\n * // => false\\n */\\nfunction isObject(value) {\\n  var type = typeof value;\\n  return value != null && (type == 'object' || type == 'function');\\n}\\n\\nmodule.exports = isObject;\\n\\n/***/ }),\\n/* 1 */\\n/***/ (function(module, exports, __webpack_require__) {\\n\\nvar baseClamp = __webpack_require__(6),\\n    toNumber = __webpack_require__(3);\\n/**\\n * Clamps `number` within the inclusive `lower` and `upper` bounds.\\n *\\n * @static\\n * @memberOf _\\n * @since 4.0.0\\n * @category Number\\n * @param {number} number The number to clamp.\\n * @param {number} [lower] The lower bound.\\n * @param {number} upper The upper bound.\\n * @returns {number} Returns the clamped number.\\n * @example\\n *\\n * _.clamp(-10, -5, 5);\\n * // => -5\\n *\\n * _.clamp(10, -5, 5);\\n * // => 5\\n */\\n\\n\\nfunction clamp(number, lower, upper) {\\n  if (upper === undefined) {\\n    upper = lower;\\n    lower = undefined;\\n  }\\n\\n  if (upper !== undefined) {\\n    upper = toNumber(upper);\\n    upper = upper === upper ? upper : 0;\\n  }\\n\\n  if (lower !== undefined) {\\n    lower = toNumber(lower);\\n    lower = lower === lower ? lower : 0;\\n  }\\n\\n  return baseClamp(toNumber(number), lower, upper);\\n}\\n\\nmodule.exports = clamp;\\n\\n/***/ }),\\n/* 2 */\\n/***/ (function(module, exports, __webpack_require__) {\\n\\nvar createRange = __webpack_require__(14);\\n/**\\n * Creates an array of numbers (positive and/or negative) progressing from\\n * `start` up to, but not including, `end`. A step of `-1` is used if a negative\\n * `start` is specified without an `end` or `step`. If `end` is not specified,\\n * it's set to `start` with `start` then set to `0`.\\n *\\n * **Note:** JavaScript follows the IEEE-754 standard for resolving\\n * floating-point values which can produce unexpected results.\\n *\\n * @static\\n * @since 0.1.0\\n * @memberOf _\\n * @category Util\\n * @param {number} [start=0] The start of the range.\\n * @param {number} end The end of the range.\\n * @param {number} [step=1] The value to increment or decrement by.\\n * @returns {Array} Returns the range of numbers.\\n * @see _.inRange, _.rangeRight\\n * @example\\n *\\n * _.range(4);\\n * // => [0, 1, 2, 3]\\n *\\n * _.range(-4);\\n * // => [0, -1, -2, -3]\\n *\\n * _.range(1, 5);\\n * // => [1, 2, 3, 4]\\n *\\n * _.range(0, 20, 5);\\n * // => [0, 5, 10, 15]\\n *\\n * _.range(0, -4, -1);\\n * // => [0, -1, -2, -3]\\n *\\n * _.range(1, 4, 0);\\n * // => [1, 1, 1]\\n *\\n * _.range(0);\\n * // => []\\n */\\n\\n\\nvar range = createRange();\\nmodule.exports = range;\\n\\n/***/ }),\\n/* 3 */\\n/***/ (function(module, exports, __webpack_require__) {\\n\\nvar isObject = __webpack_require__(0),\\n    isSymbol = __webpack_require__(7);\\n/** Used as references for various `Number` constants. */\\n\\n\\nvar NAN = 0 / 0;\\n/** Used to match leading and trailing whitespace. */\\n\\nvar reTrim = /^\\\\s+|\\\\s+$/g;\\n/** Used to detect bad signed hexadecimal string values. */\\n\\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\\n/** Used to detect binary string values. */\\n\\nvar reIsBinary = /^0b[01]+$/i;\\n/** Used to detect octal string values. */\\n\\nvar reIsOctal = /^0o[0-7]+$/i;\\n/** Built-in method references without a dependency on `root`. */\\n\\nvar freeParseInt = parseInt;\\n/**\\n * Converts `value` to a number.\\n *\\n * @static\\n * @memberOf _\\n * @since 4.0.0\\n * @category Lang\\n * @param {*} value The value to process.\\n * @returns {number} Returns the number.\\n * @example\\n *\\n * _.toNumber(3.2);\\n * // => 3.2\\n *\\n * _.toNumber(Number.MIN_VALUE);\\n * // => 5e-324\\n *\\n * _.toNumber(Infinity);\\n * // => Infinity\\n *\\n * _.toNumber('3.2');\\n * // => 3.2\\n */\\n\\nfunction toNumber(value) {\\n  if (typeof value == 'number') {\\n    return value;\\n  }\\n\\n  if (isSymbol(value)) {\\n    return NAN;\\n  }\\n\\n  if (isObject(value)) {\\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\\n    value = isObject(other) ? other + '' : other;\\n  }\\n\\n  if (typeof value != 'string') {\\n    return value === 0 ? value : +value;\\n  }\\n\\n  value = value.replace(reTrim, '');\\n  var isBinary = reIsBinary.test(value);\\n  return isBinary || reIsOctal.test(value) ? freeParseInt(value.slice(2), isBinary ? 2 : 8) : reIsBadHex.test(value) ? NAN : +value;\\n}\\n\\nmodule.exports = toNumber;\\n\\n/***/ }),\\n/* 4 */\\n/***/ (function(module, exports, __webpack_require__) {\\n\\nvar Symbol = __webpack_require__(5),\\n    getRawTag = __webpack_require__(11),\\n    objectToString = __webpack_require__(12);\\n/** `Object#toString` result references. */\\n\\n\\nvar nullTag = '[object Null]',\\n    undefinedTag = '[object Undefined]';\\n/** Built-in value references. */\\n\\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\\n/**\\n * The base implementation of `getTag` without fallbacks for buggy environments.\\n *\\n * @private\\n * @param {*} value The value to query.\\n * @returns {string} Returns the `toStringTag`.\\n */\\n\\nfunction baseGetTag(value) {\\n  if (value == null) {\\n    return value === undefined ? undefinedTag : nullTag;\\n  }\\n\\n  return symToStringTag && symToStringTag in Object(value) ? getRawTag(value) : objectToString(value);\\n}\\n\\nmodule.exports = baseGetTag;\\n\\n/***/ }),\\n/* 5 */\\n/***/ (function(module, exports, __webpack_require__) {\\n\\nvar root = __webpack_require__(8);\\n/** Built-in value references. */\\n\\n\\nvar Symbol = root.Symbol;\\nmodule.exports = Symbol;\\n\\n/***/ }),\\n/* 6 */\\n/***/ (function(module, exports) {\\n\\n/**\\n * The base implementation of `_.clamp` which doesn't coerce arguments.\\n *\\n * @private\\n * @param {number} number The number to clamp.\\n * @param {number} [lower] The lower bound.\\n * @param {number} upper The upper bound.\\n * @returns {number} Returns the clamped number.\\n */\\nfunction baseClamp(number, lower, upper) {\\n  if (number === number) {\\n    if (upper !== undefined) {\\n      number = number <= upper ? number : upper;\\n    }\\n\\n    if (lower !== undefined) {\\n      number = number >= lower ? number : lower;\\n    }\\n  }\\n\\n  return number;\\n}\\n\\nmodule.exports = baseClamp;\\n\\n/***/ }),\\n/* 7 */\\n/***/ (function(module, exports, __webpack_require__) {\\n\\nvar baseGetTag = __webpack_require__(4),\\n    isObjectLike = __webpack_require__(13);\\n/** `Object#toString` result references. */\\n\\n\\nvar symbolTag = '[object Symbol]';\\n/**\\n * Checks if `value` is classified as a `Symbol` primitive or object.\\n *\\n * @static\\n * @memberOf _\\n * @since 4.0.0\\n * @category Lang\\n * @param {*} value The value to check.\\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\\n * @example\\n *\\n * _.isSymbol(Symbol.iterator);\\n * // => true\\n *\\n * _.isSymbol('abc');\\n * // => false\\n */\\n\\nfunction isSymbol(value) {\\n  return typeof value == 'symbol' || isObjectLike(value) && baseGetTag(value) == symbolTag;\\n}\\n\\nmodule.exports = isSymbol;\\n\\n/***/ }),\\n/* 8 */\\n/***/ (function(module, exports, __webpack_require__) {\\n\\nvar freeGlobal = __webpack_require__(9);\\n/** Detect free variable `self`. */\\n\\n\\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\\n/** Used as a reference to the global object. */\\n\\nvar root = freeGlobal || freeSelf || Function('return this')();\\nmodule.exports = root;\\n\\n/***/ }),\\n/* 9 */\\n/***/ (function(module, exports, __webpack_require__) {\\n\\n/* WEBPACK VAR INJECTION */(function(global) {/** Detect free variable `global` from Node.js. */\\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\\nmodule.exports = freeGlobal;\\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(10)))\\n\\n/***/ }),\\n/* 10 */\\n/***/ (function(module, exports) {\\n\\nvar g; // This works in non-strict mode\\n\\ng = function () {\\n  return this;\\n}();\\n\\ntry {\\n  // This works if eval is allowed (see CSP)\\n  g = g || new Function(\\\"return this\\\")();\\n} catch (e) {\\n  // This works if the window reference is available\\n  if (typeof window === \\\"object\\\") g = window;\\n} // g can still be undefined, but nothing to do about it...\\n// We return undefined, instead of nothing here, so it's\\n// easier to handle this case. if(!global) { ...}\\n\\n\\nmodule.exports = g;\\n\\n/***/ }),\\n/* 11 */\\n/***/ (function(module, exports, __webpack_require__) {\\n\\nvar Symbol = __webpack_require__(5);\\n/** Used for built-in method references. */\\n\\n\\nvar objectProto = Object.prototype;\\n/** Used to check objects for own properties. */\\n\\nvar hasOwnProperty = objectProto.hasOwnProperty;\\n/**\\n * Used to resolve the\\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\\n * of values.\\n */\\n\\nvar nativeObjectToString = objectProto.toString;\\n/** Built-in value references. */\\n\\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\\n/**\\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\\n *\\n * @private\\n * @param {*} value The value to query.\\n * @returns {string} Returns the raw `toStringTag`.\\n */\\n\\nfunction getRawTag(value) {\\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\\n      tag = value[symToStringTag];\\n\\n  try {\\n    value[symToStringTag] = undefined;\\n    var unmasked = true;\\n  } catch (e) {}\\n\\n  var result = nativeObjectToString.call(value);\\n\\n  if (unmasked) {\\n    if (isOwn) {\\n      value[symToStringTag] = tag;\\n    } else {\\n      delete value[symToStringTag];\\n    }\\n  }\\n\\n  return result;\\n}\\n\\nmodule.exports = getRawTag;\\n\\n/***/ }),\\n/* 12 */\\n/***/ (function(module, exports) {\\n\\n/** Used for built-in method references. */\\nvar objectProto = Object.prototype;\\n/**\\n * Used to resolve the\\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\\n * of values.\\n */\\n\\nvar nativeObjectToString = objectProto.toString;\\n/**\\n * Converts `value` to a string using `Object.prototype.toString`.\\n *\\n * @private\\n * @param {*} value The value to convert.\\n * @returns {string} Returns the converted string.\\n */\\n\\nfunction objectToString(value) {\\n  return nativeObjectToString.call(value);\\n}\\n\\nmodule.exports = objectToString;\\n\\n/***/ }),\\n/* 13 */\\n/***/ (function(module, exports) {\\n\\n/**\\n * Checks if `value` is object-like. A value is object-like if it's not `null`\\n * and has a `typeof` result of \\\"object\\\".\\n *\\n * @static\\n * @memberOf _\\n * @since 4.0.0\\n * @category Lang\\n * @param {*} value The value to check.\\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\\n * @example\\n *\\n * _.isObjectLike({});\\n * // => true\\n *\\n * _.isObjectLike([1, 2, 3]);\\n * // => true\\n *\\n * _.isObjectLike(_.noop);\\n * // => false\\n *\\n * _.isObjectLike(null);\\n * // => false\\n */\\nfunction isObjectLike(value) {\\n  return value != null && typeof value == 'object';\\n}\\n\\nmodule.exports = isObjectLike;\\n\\n/***/ }),\\n/* 14 */\\n/***/ (function(module, exports, __webpack_require__) {\\n\\nvar baseRange = __webpack_require__(15),\\n    isIterateeCall = __webpack_require__(16),\\n    toFinite = __webpack_require__(22);\\n/**\\n * Creates a `_.range` or `_.rangeRight` function.\\n *\\n * @private\\n * @param {boolean} [fromRight] Specify iterating from right to left.\\n * @returns {Function} Returns the new range function.\\n */\\n\\n\\nfunction createRange(fromRight) {\\n  return function (start, end, step) {\\n    if (step && typeof step != 'number' && isIterateeCall(start, end, step)) {\\n      end = step = undefined;\\n    } // Ensure the sign of `-0` is preserved.\\n\\n\\n    start = toFinite(start);\\n\\n    if (end === undefined) {\\n      end = start;\\n      start = 0;\\n    } else {\\n      end = toFinite(end);\\n    }\\n\\n    step = step === undefined ? start < end ? 1 : -1 : toFinite(step);\\n    return baseRange(start, end, step, fromRight);\\n  };\\n}\\n\\nmodule.exports = createRange;\\n\\n/***/ }),\\n/* 15 */\\n/***/ (function(module, exports) {\\n\\n/* Built-in method references for those with the same name as other `lodash` methods. */\\nvar nativeCeil = Math.ceil,\\n    nativeMax = Math.max;\\n/**\\n * The base implementation of `_.range` and `_.rangeRight` which doesn't\\n * coerce arguments.\\n *\\n * @private\\n * @param {number} start The start of the range.\\n * @param {number} end The end of the range.\\n * @param {number} step The value to increment or decrement by.\\n * @param {boolean} [fromRight] Specify iterating from right to left.\\n * @returns {Array} Returns the range of numbers.\\n */\\n\\nfunction baseRange(start, end, step, fromRight) {\\n  var index = -1,\\n      length = nativeMax(nativeCeil((end - start) / (step || 1)), 0),\\n      result = Array(length);\\n\\n  while (length--) {\\n    result[fromRight ? length : ++index] = start;\\n    start += step;\\n  }\\n\\n  return result;\\n}\\n\\nmodule.exports = baseRange;\\n\\n/***/ }),\\n/* 16 */\\n/***/ (function(module, exports, __webpack_require__) {\\n\\nvar eq = __webpack_require__(17),\\n    isArrayLike = __webpack_require__(18),\\n    isIndex = __webpack_require__(21),\\n    isObject = __webpack_require__(0);\\n/**\\n * Checks if the given arguments are from an iteratee call.\\n *\\n * @private\\n * @param {*} value The potential iteratee value argument.\\n * @param {*} index The potential iteratee index or key argument.\\n * @param {*} object The potential iteratee object argument.\\n * @returns {boolean} Returns `true` if the arguments are from an iteratee call,\\n *  else `false`.\\n */\\n\\n\\nfunction isIterateeCall(value, index, object) {\\n  if (!isObject(object)) {\\n    return false;\\n  }\\n\\n  var type = typeof index;\\n\\n  if (type == 'number' ? isArrayLike(object) && isIndex(index, object.length) : type == 'string' && index in object) {\\n    return eq(object[index], value);\\n  }\\n\\n  return false;\\n}\\n\\nmodule.exports = isIterateeCall;\\n\\n/***/ }),\\n/* 17 */\\n/***/ (function(module, exports) {\\n\\n/**\\n * Performs a\\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\\n * comparison between two values to determine if they are equivalent.\\n *\\n * @static\\n * @memberOf _\\n * @since 4.0.0\\n * @category Lang\\n * @param {*} value The value to compare.\\n * @param {*} other The other value to compare.\\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\\n * @example\\n *\\n * var object = { 'a': 1 };\\n * var other = { 'a': 1 };\\n *\\n * _.eq(object, object);\\n * // => true\\n *\\n * _.eq(object, other);\\n * // => false\\n *\\n * _.eq('a', 'a');\\n * // => true\\n *\\n * _.eq('a', Object('a'));\\n * // => false\\n *\\n * _.eq(NaN, NaN);\\n * // => true\\n */\\nfunction eq(value, other) {\\n  return value === other || value !== value && other !== other;\\n}\\n\\nmodule.exports = eq;\\n\\n/***/ }),\\n/* 18 */\\n/***/ (function(module, exports, __webpack_require__) {\\n\\nvar isFunction = __webpack_require__(19),\\n    isLength = __webpack_require__(20);\\n/**\\n * Checks if `value` is array-like. A value is considered array-like if it's\\n * not a function and has a `value.length` that's an integer greater than or\\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\\n *\\n * @static\\n * @memberOf _\\n * @since 4.0.0\\n * @category Lang\\n * @param {*} value The value to check.\\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\\n * @example\\n *\\n * _.isArrayLike([1, 2, 3]);\\n * // => true\\n *\\n * _.isArrayLike(document.body.children);\\n * // => true\\n *\\n * _.isArrayLike('abc');\\n * // => true\\n *\\n * _.isArrayLike(_.noop);\\n * // => false\\n */\\n\\n\\nfunction isArrayLike(value) {\\n  return value != null && isLength(value.length) && !isFunction(value);\\n}\\n\\nmodule.exports = isArrayLike;\\n\\n/***/ }),\\n/* 19 */\\n/***/ (function(module, exports, __webpack_require__) {\\n\\nvar baseGetTag = __webpack_require__(4),\\n    isObject = __webpack_require__(0);\\n/** `Object#toString` result references. */\\n\\n\\nvar asyncTag = '[object AsyncFunction]',\\n    funcTag = '[object Function]',\\n    genTag = '[object GeneratorFunction]',\\n    proxyTag = '[object Proxy]';\\n/**\\n * Checks if `value` is classified as a `Function` object.\\n *\\n * @static\\n * @memberOf _\\n * @since 0.1.0\\n * @category Lang\\n * @param {*} value The value to check.\\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\\n * @example\\n *\\n * _.isFunction(_);\\n * // => true\\n *\\n * _.isFunction(/abc/);\\n * // => false\\n */\\n\\nfunction isFunction(value) {\\n  if (!isObject(value)) {\\n    return false;\\n  } // The use of `Object#toString` avoids issues with the `typeof` operator\\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\\n\\n\\n  var tag = baseGetTag(value);\\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\\n}\\n\\nmodule.exports = isFunction;\\n\\n/***/ }),\\n/* 20 */\\n/***/ (function(module, exports) {\\n\\n/** Used as references for various `Number` constants. */\\nvar MAX_SAFE_INTEGER = 9007199254740991;\\n/**\\n * Checks if `value` is a valid array-like length.\\n *\\n * **Note:** This method is loosely based on\\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\\n *\\n * @static\\n * @memberOf _\\n * @since 4.0.0\\n * @category Lang\\n * @param {*} value The value to check.\\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\\n * @example\\n *\\n * _.isLength(3);\\n * // => true\\n *\\n * _.isLength(Number.MIN_VALUE);\\n * // => false\\n *\\n * _.isLength(Infinity);\\n * // => false\\n *\\n * _.isLength('3');\\n * // => false\\n */\\n\\nfunction isLength(value) {\\n  return typeof value == 'number' && value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\\n}\\n\\nmodule.exports = isLength;\\n\\n/***/ }),\\n/* 21 */\\n/***/ (function(module, exports) {\\n\\n/** Used as references for various `Number` constants. */\\nvar MAX_SAFE_INTEGER = 9007199254740991;\\n/** Used to detect unsigned integer values. */\\n\\nvar reIsUint = /^(?:0|[1-9]\\\\d*)$/;\\n/**\\n * Checks if `value` is a valid array-like index.\\n *\\n * @private\\n * @param {*} value The value to check.\\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\\n */\\n\\nfunction isIndex(value, length) {\\n  var type = typeof value;\\n  length = length == null ? MAX_SAFE_INTEGER : length;\\n  return !!length && (type == 'number' || type != 'symbol' && reIsUint.test(value)) && value > -1 && value % 1 == 0 && value < length;\\n}\\n\\nmodule.exports = isIndex;\\n\\n/***/ }),\\n/* 22 */\\n/***/ (function(module, exports, __webpack_require__) {\\n\\nvar toNumber = __webpack_require__(3);\\n/** Used as references for various `Number` constants. */\\n\\n\\nvar INFINITY = 1 / 0,\\n    MAX_INTEGER = 1.7976931348623157e+308;\\n/**\\n * Converts `value` to a finite number.\\n *\\n * @static\\n * @memberOf _\\n * @since 4.12.0\\n * @category Lang\\n * @param {*} value The value to convert.\\n * @returns {number} Returns the converted number.\\n * @example\\n *\\n * _.toFinite(3.2);\\n * // => 3.2\\n *\\n * _.toFinite(Number.MIN_VALUE);\\n * // => 5e-324\\n *\\n * _.toFinite(Infinity);\\n * // => 1.7976931348623157e+308\\n *\\n * _.toFinite('3.2');\\n * // => 3.2\\n */\\n\\nfunction toFinite(value) {\\n  if (!value) {\\n    return value === 0 ? value : 0;\\n  }\\n\\n  value = toNumber(value);\\n\\n  if (value === INFINITY || value === -INFINITY) {\\n    var sign = value < 0 ? -1 : 1;\\n    return sign * MAX_INTEGER;\\n  }\\n\\n  return value === value ? value : 0;\\n}\\n\\nmodule.exports = toFinite;\\n\\n/***/ }),\\n/* 23 */\\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\\n\\n\\\"use strict\\\";\\n__webpack_require__.r(__webpack_exports__);\\n\\n// EXTERNAL MODULE: ./node_modules/lodash/clamp.js\\nvar clamp = __webpack_require__(1);\\nvar clamp_default = /*#__PURE__*/__webpack_require__.n(clamp);\\n\\n// EXTERNAL MODULE: ./node_modules/lodash/range.js\\nvar range = __webpack_require__(2);\\nvar range_default = /*#__PURE__*/__webpack_require__.n(range);\\n\\n// CONCATENATED MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js\\nfunction _defineProperty(obj, key, value) {\\n  if (key in obj) {\\n    Object.defineProperty(obj, key, {\\n      value: value,\\n      enumerable: true,\\n      configurable: true,\\n      writable: true\\n    });\\n  } else {\\n    obj[key] = value;\\n  }\\n\\n  return obj;\\n}\\n// CONCATENATED MODULE: ./node_modules/@luma.gl/constants/dist/esm/index.js\\n/* harmony default export */ var esm = ({\\n  DEPTH_BUFFER_BIT: 0x00000100,\\n  STENCIL_BUFFER_BIT: 0x00000400,\\n  COLOR_BUFFER_BIT: 0x00004000,\\n  POINTS: 0x0000,\\n  LINES: 0x0001,\\n  LINE_LOOP: 0x0002,\\n  LINE_STRIP: 0x0003,\\n  TRIANGLES: 0x0004,\\n  TRIANGLE_STRIP: 0x0005,\\n  TRIANGLE_FAN: 0x0006,\\n  ZERO: 0,\\n  ONE: 1,\\n  SRC_COLOR: 0x0300,\\n  ONE_MINUS_SRC_COLOR: 0x0301,\\n  SRC_ALPHA: 0x0302,\\n  ONE_MINUS_SRC_ALPHA: 0x0303,\\n  DST_ALPHA: 0x0304,\\n  ONE_MINUS_DST_ALPHA: 0x0305,\\n  DST_COLOR: 0x0306,\\n  ONE_MINUS_DST_COLOR: 0x0307,\\n  SRC_ALPHA_SATURATE: 0x0308,\\n  CONSTANT_COLOR: 0x8001,\\n  ONE_MINUS_CONSTANT_COLOR: 0x8002,\\n  CONSTANT_ALPHA: 0x8003,\\n  ONE_MINUS_CONSTANT_ALPHA: 0x8004,\\n  FUNC_ADD: 0x8006,\\n  FUNC_SUBTRACT: 0x800a,\\n  FUNC_REVERSE_SUBTRACT: 0x800b,\\n  BLEND_EQUATION: 0x8009,\\n  BLEND_EQUATION_RGB: 0x8009,\\n  BLEND_EQUATION_ALPHA: 0x883d,\\n  BLEND_DST_RGB: 0x80c8,\\n  BLEND_SRC_RGB: 0x80c9,\\n  BLEND_DST_ALPHA: 0x80ca,\\n  BLEND_SRC_ALPHA: 0x80cb,\\n  BLEND_COLOR: 0x8005,\\n  ARRAY_BUFFER_BINDING: 0x8894,\\n  ELEMENT_ARRAY_BUFFER_BINDING: 0x8895,\\n  LINE_WIDTH: 0x0b21,\\n  ALIASED_POINT_SIZE_RANGE: 0x846d,\\n  ALIASED_LINE_WIDTH_RANGE: 0x846e,\\n  CULL_FACE_MODE: 0x0b45,\\n  FRONT_FACE: 0x0b46,\\n  DEPTH_RANGE: 0x0b70,\\n  DEPTH_WRITEMASK: 0x0b72,\\n  DEPTH_CLEAR_VALUE: 0x0b73,\\n  DEPTH_FUNC: 0x0b74,\\n  STENCIL_CLEAR_VALUE: 0x0b91,\\n  STENCIL_FUNC: 0x0b92,\\n  STENCIL_FAIL: 0x0b94,\\n  STENCIL_PASS_DEPTH_FAIL: 0x0b95,\\n  STENCIL_PASS_DEPTH_PASS: 0x0b96,\\n  STENCIL_REF: 0x0b97,\\n  STENCIL_VALUE_MASK: 0x0b93,\\n  STENCIL_WRITEMASK: 0x0b98,\\n  STENCIL_BACK_FUNC: 0x8800,\\n  STENCIL_BACK_FAIL: 0x8801,\\n  STENCIL_BACK_PASS_DEPTH_FAIL: 0x8802,\\n  STENCIL_BACK_PASS_DEPTH_PASS: 0x8803,\\n  STENCIL_BACK_REF: 0x8ca3,\\n  STENCIL_BACK_VALUE_MASK: 0x8ca4,\\n  STENCIL_BACK_WRITEMASK: 0x8ca5,\\n  VIEWPORT: 0x0ba2,\\n  SCISSOR_BOX: 0x0c10,\\n  COLOR_CLEAR_VALUE: 0x0c22,\\n  COLOR_WRITEMASK: 0x0c23,\\n  UNPACK_ALIGNMENT: 0x0cf5,\\n  PACK_ALIGNMENT: 0x0d05,\\n  MAX_TEXTURE_SIZE: 0x0d33,\\n  MAX_VIEWPORT_DIMS: 0x0d3a,\\n  SUBPIXEL_BITS: 0x0d50,\\n  RED_BITS: 0x0d52,\\n  GREEN_BITS: 0x0d53,\\n  BLUE_BITS: 0x0d54,\\n  ALPHA_BITS: 0x0d55,\\n  DEPTH_BITS: 0x0d56,\\n  STENCIL_BITS: 0x0d57,\\n  POLYGON_OFFSET_UNITS: 0x2a00,\\n  POLYGON_OFFSET_FACTOR: 0x8038,\\n  TEXTURE_BINDING_2D: 0x8069,\\n  SAMPLE_BUFFERS: 0x80a8,\\n  SAMPLES: 0x80a9,\\n  SAMPLE_COVERAGE_VALUE: 0x80aa,\\n  SAMPLE_COVERAGE_INVERT: 0x80ab,\\n  COMPRESSED_TEXTURE_FORMATS: 0x86a3,\\n  VENDOR: 0x1f00,\\n  RENDERER: 0x1f01,\\n  VERSION: 0x1f02,\\n  IMPLEMENTATION_COLOR_READ_TYPE: 0x8b9a,\\n  IMPLEMENTATION_COLOR_READ_FORMAT: 0x8b9b,\\n  BROWSER_DEFAULT_WEBGL: 0x9244,\\n  STATIC_DRAW: 0x88e4,\\n  STREAM_DRAW: 0x88e0,\\n  DYNAMIC_DRAW: 0x88e8,\\n  ARRAY_BUFFER: 0x8892,\\n  ELEMENT_ARRAY_BUFFER: 0x8893,\\n  BUFFER_SIZE: 0x8764,\\n  BUFFER_USAGE: 0x8765,\\n  CURRENT_VERTEX_ATTRIB: 0x8626,\\n  VERTEX_ATTRIB_ARRAY_ENABLED: 0x8622,\\n  VERTEX_ATTRIB_ARRAY_SIZE: 0x8623,\\n  VERTEX_ATTRIB_ARRAY_STRIDE: 0x8624,\\n  VERTEX_ATTRIB_ARRAY_TYPE: 0x8625,\\n  VERTEX_ATTRIB_ARRAY_NORMALIZED: 0x886a,\\n  VERTEX_ATTRIB_ARRAY_POINTER: 0x8645,\\n  VERTEX_ATTRIB_ARRAY_BUFFER_BINDING: 0x889f,\\n  CULL_FACE: 0x0b44,\\n  FRONT: 0x0404,\\n  BACK: 0x0405,\\n  FRONT_AND_BACK: 0x0408,\\n  BLEND: 0x0be2,\\n  DEPTH_TEST: 0x0b71,\\n  DITHER: 0x0bd0,\\n  POLYGON_OFFSET_FILL: 0x8037,\\n  SAMPLE_ALPHA_TO_COVERAGE: 0x809e,\\n  SAMPLE_COVERAGE: 0x80a0,\\n  SCISSOR_TEST: 0x0c11,\\n  STENCIL_TEST: 0x0b90,\\n  NO_ERROR: 0,\\n  INVALID_ENUM: 0x0500,\\n  INVALID_VALUE: 0x0501,\\n  INVALID_OPERATION: 0x0502,\\n  OUT_OF_MEMORY: 0x0505,\\n  CONTEXT_LOST_WEBGL: 0x9242,\\n  CW: 0x0900,\\n  CCW: 0x0901,\\n  DONT_CARE: 0x1100,\\n  FASTEST: 0x1101,\\n  NICEST: 0x1102,\\n  GENERATE_MIPMAP_HINT: 0x8192,\\n  BYTE: 0x1400,\\n  UNSIGNED_BYTE: 0x1401,\\n  SHORT: 0x1402,\\n  UNSIGNED_SHORT: 0x1403,\\n  INT: 0x1404,\\n  UNSIGNED_INT: 0x1405,\\n  FLOAT: 0x1406,\\n  DOUBLE: 0x140a,\\n  DEPTH_COMPONENT: 0x1902,\\n  ALPHA: 0x1906,\\n  RGB: 0x1907,\\n  RGBA: 0x1908,\\n  LUMINANCE: 0x1909,\\n  LUMINANCE_ALPHA: 0x190a,\\n  UNSIGNED_SHORT_4_4_4_4: 0x8033,\\n  UNSIGNED_SHORT_5_5_5_1: 0x8034,\\n  UNSIGNED_SHORT_5_6_5: 0x8363,\\n  FRAGMENT_SHADER: 0x8b30,\\n  VERTEX_SHADER: 0x8b31,\\n  COMPILE_STATUS: 0x8b81,\\n  DELETE_STATUS: 0x8b80,\\n  LINK_STATUS: 0x8b82,\\n  VALIDATE_STATUS: 0x8b83,\\n  ATTACHED_SHADERS: 0x8b85,\\n  ACTIVE_ATTRIBUTES: 0x8b89,\\n  ACTIVE_UNIFORMS: 0x8b86,\\n  MAX_VERTEX_ATTRIBS: 0x8869,\\n  MAX_VERTEX_UNIFORM_VECTORS: 0x8dfb,\\n  MAX_VARYING_VECTORS: 0x8dfc,\\n  MAX_COMBINED_TEXTURE_IMAGE_UNITS: 0x8b4d,\\n  MAX_VERTEX_TEXTURE_IMAGE_UNITS: 0x8b4c,\\n  MAX_TEXTURE_IMAGE_UNITS: 0x8872,\\n  MAX_FRAGMENT_UNIFORM_VECTORS: 0x8dfd,\\n  SHADER_TYPE: 0x8b4f,\\n  SHADING_LANGUAGE_VERSION: 0x8b8c,\\n  CURRENT_PROGRAM: 0x8b8d,\\n  NEVER: 0x0200,\\n  ALWAYS: 0x0207,\\n  LESS: 0x0201,\\n  EQUAL: 0x0202,\\n  LEQUAL: 0x0203,\\n  GREATER: 0x0204,\\n  GEQUAL: 0x0206,\\n  NOTEQUAL: 0x0205,\\n  KEEP: 0x1e00,\\n  REPLACE: 0x1e01,\\n  INCR: 0x1e02,\\n  DECR: 0x1e03,\\n  INVERT: 0x150a,\\n  INCR_WRAP: 0x8507,\\n  DECR_WRAP: 0x8508,\\n  NEAREST: 0x2600,\\n  LINEAR: 0x2601,\\n  NEAREST_MIPMAP_NEAREST: 0x2700,\\n  LINEAR_MIPMAP_NEAREST: 0x2701,\\n  NEAREST_MIPMAP_LINEAR: 0x2702,\\n  LINEAR_MIPMAP_LINEAR: 0x2703,\\n  TEXTURE_MAG_FILTER: 0x2800,\\n  TEXTURE_MIN_FILTER: 0x2801,\\n  TEXTURE_WRAP_S: 0x2802,\\n  TEXTURE_WRAP_T: 0x2803,\\n  TEXTURE_2D: 0x0de1,\\n  TEXTURE: 0x1702,\\n  TEXTURE_CUBE_MAP: 0x8513,\\n  TEXTURE_BINDING_CUBE_MAP: 0x8514,\\n  TEXTURE_CUBE_MAP_POSITIVE_X: 0x8515,\\n  TEXTURE_CUBE_MAP_NEGATIVE_X: 0x8516,\\n  TEXTURE_CUBE_MAP_POSITIVE_Y: 0x8517,\\n  TEXTURE_CUBE_MAP_NEGATIVE_Y: 0x8518,\\n  TEXTURE_CUBE_MAP_POSITIVE_Z: 0x8519,\\n  TEXTURE_CUBE_MAP_NEGATIVE_Z: 0x851a,\\n  MAX_CUBE_MAP_TEXTURE_SIZE: 0x851c,\\n  TEXTURE0: 0x84c0,\\n  ACTIVE_TEXTURE: 0x84e0,\\n  REPEAT: 0x2901,\\n  CLAMP_TO_EDGE: 0x812f,\\n  MIRRORED_REPEAT: 0x8370,\\n  TEXTURE_WIDTH: 0x1000,\\n  TEXTURE_HEIGHT: 0x1001,\\n  FLOAT_VEC2: 0x8b50,\\n  FLOAT_VEC3: 0x8b51,\\n  FLOAT_VEC4: 0x8b52,\\n  INT_VEC2: 0x8b53,\\n  INT_VEC3: 0x8b54,\\n  INT_VEC4: 0x8b55,\\n  BOOL: 0x8b56,\\n  BOOL_VEC2: 0x8b57,\\n  BOOL_VEC3: 0x8b58,\\n  BOOL_VEC4: 0x8b59,\\n  FLOAT_MAT2: 0x8b5a,\\n  FLOAT_MAT3: 0x8b5b,\\n  FLOAT_MAT4: 0x8b5c,\\n  SAMPLER_2D: 0x8b5e,\\n  SAMPLER_CUBE: 0x8b60,\\n  LOW_FLOAT: 0x8df0,\\n  MEDIUM_FLOAT: 0x8df1,\\n  HIGH_FLOAT: 0x8df2,\\n  LOW_INT: 0x8df3,\\n  MEDIUM_INT: 0x8df4,\\n  HIGH_INT: 0x8df5,\\n  FRAMEBUFFER: 0x8d40,\\n  RENDERBUFFER: 0x8d41,\\n  RGBA4: 0x8056,\\n  RGB5_A1: 0x8057,\\n  RGB565: 0x8d62,\\n  DEPTH_COMPONENT16: 0x81a5,\\n  STENCIL_INDEX: 0x1901,\\n  STENCIL_INDEX8: 0x8d48,\\n  DEPTH_STENCIL: 0x84f9,\\n  RENDERBUFFER_WIDTH: 0x8d42,\\n  RENDERBUFFER_HEIGHT: 0x8d43,\\n  RENDERBUFFER_INTERNAL_FORMAT: 0x8d44,\\n  RENDERBUFFER_RED_SIZE: 0x8d50,\\n  RENDERBUFFER_GREEN_SIZE: 0x8d51,\\n  RENDERBUFFER_BLUE_SIZE: 0x8d52,\\n  RENDERBUFFER_ALPHA_SIZE: 0x8d53,\\n  RENDERBUFFER_DEPTH_SIZE: 0x8d54,\\n  RENDERBUFFER_STENCIL_SIZE: 0x8d55,\\n  FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE: 0x8cd0,\\n  FRAMEBUFFER_ATTACHMENT_OBJECT_NAME: 0x8cd1,\\n  FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL: 0x8cd2,\\n  FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE: 0x8cd3,\\n  COLOR_ATTACHMENT0: 0x8ce0,\\n  DEPTH_ATTACHMENT: 0x8d00,\\n  STENCIL_ATTACHMENT: 0x8d20,\\n  DEPTH_STENCIL_ATTACHMENT: 0x821a,\\n  NONE: 0,\\n  FRAMEBUFFER_COMPLETE: 0x8cd5,\\n  FRAMEBUFFER_INCOMPLETE_ATTACHMENT: 0x8cd6,\\n  FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT: 0x8cd7,\\n  FRAMEBUFFER_INCOMPLETE_DIMENSIONS: 0x8cd9,\\n  FRAMEBUFFER_UNSUPPORTED: 0x8cdd,\\n  FRAMEBUFFER_BINDING: 0x8ca6,\\n  RENDERBUFFER_BINDING: 0x8ca7,\\n  READ_FRAMEBUFFER: 0x8ca8,\\n  DRAW_FRAMEBUFFER: 0x8ca9,\\n  MAX_RENDERBUFFER_SIZE: 0x84e8,\\n  INVALID_FRAMEBUFFER_OPERATION: 0x0506,\\n  UNPACK_FLIP_Y_WEBGL: 0x9240,\\n  UNPACK_PREMULTIPLY_ALPHA_WEBGL: 0x9241,\\n  UNPACK_COLORSPACE_CONVERSION_WEBGL: 0x9243,\\n  READ_BUFFER: 0x0c02,\\n  UNPACK_ROW_LENGTH: 0x0cf2,\\n  UNPACK_SKIP_ROWS: 0x0cf3,\\n  UNPACK_SKIP_PIXELS: 0x0cf4,\\n  PACK_ROW_LENGTH: 0x0d02,\\n  PACK_SKIP_ROWS: 0x0d03,\\n  PACK_SKIP_PIXELS: 0x0d04,\\n  TEXTURE_BINDING_3D: 0x806a,\\n  UNPACK_SKIP_IMAGES: 0x806d,\\n  UNPACK_IMAGE_HEIGHT: 0x806e,\\n  MAX_3D_TEXTURE_SIZE: 0x8073,\\n  MAX_ELEMENTS_VERTICES: 0x80e8,\\n  MAX_ELEMENTS_INDICES: 0x80e9,\\n  MAX_TEXTURE_LOD_BIAS: 0x84fd,\\n  MAX_FRAGMENT_UNIFORM_COMPONENTS: 0x8b49,\\n  MAX_VERTEX_UNIFORM_COMPONENTS: 0x8b4a,\\n  MAX_ARRAY_TEXTURE_LAYERS: 0x88ff,\\n  MIN_PROGRAM_TEXEL_OFFSET: 0x8904,\\n  MAX_PROGRAM_TEXEL_OFFSET: 0x8905,\\n  MAX_VARYING_COMPONENTS: 0x8b4b,\\n  FRAGMENT_SHADER_DERIVATIVE_HINT: 0x8b8b,\\n  RASTERIZER_DISCARD: 0x8c89,\\n  VERTEX_ARRAY_BINDING: 0x85b5,\\n  MAX_VERTEX_OUTPUT_COMPONENTS: 0x9122,\\n  MAX_FRAGMENT_INPUT_COMPONENTS: 0x9125,\\n  MAX_SERVER_WAIT_TIMEOUT: 0x9111,\\n  MAX_ELEMENT_INDEX: 0x8d6b,\\n  RED: 0x1903,\\n  RGB8: 0x8051,\\n  RGBA8: 0x8058,\\n  RGB10_A2: 0x8059,\\n  TEXTURE_3D: 0x806f,\\n  TEXTURE_WRAP_R: 0x8072,\\n  TEXTURE_MIN_LOD: 0x813a,\\n  TEXTURE_MAX_LOD: 0x813b,\\n  TEXTURE_BASE_LEVEL: 0x813c,\\n  TEXTURE_MAX_LEVEL: 0x813d,\\n  TEXTURE_COMPARE_MODE: 0x884c,\\n  TEXTURE_COMPARE_FUNC: 0x884d,\\n  SRGB: 0x8c40,\\n  SRGB8: 0x8c41,\\n  SRGB8_ALPHA8: 0x8c43,\\n  COMPARE_REF_TO_TEXTURE: 0x884e,\\n  RGBA32F: 0x8814,\\n  RGB32F: 0x8815,\\n  RGBA16F: 0x881a,\\n  RGB16F: 0x881b,\\n  TEXTURE_2D_ARRAY: 0x8c1a,\\n  TEXTURE_BINDING_2D_ARRAY: 0x8c1d,\\n  R11F_G11F_B10F: 0x8c3a,\\n  RGB9_E5: 0x8c3d,\\n  RGBA32UI: 0x8d70,\\n  RGB32UI: 0x8d71,\\n  RGBA16UI: 0x8d76,\\n  RGB16UI: 0x8d77,\\n  RGBA8UI: 0x8d7c,\\n  RGB8UI: 0x8d7d,\\n  RGBA32I: 0x8d82,\\n  RGB32I: 0x8d83,\\n  RGBA16I: 0x8d88,\\n  RGB16I: 0x8d89,\\n  RGBA8I: 0x8d8e,\\n  RGB8I: 0x8d8f,\\n  RED_INTEGER: 0x8d94,\\n  RGB_INTEGER: 0x8d98,\\n  RGBA_INTEGER: 0x8d99,\\n  R8: 0x8229,\\n  RG8: 0x822b,\\n  R16F: 0x822d,\\n  R32F: 0x822e,\\n  RG16F: 0x822f,\\n  RG32F: 0x8230,\\n  R8I: 0x8231,\\n  R8UI: 0x8232,\\n  R16I: 0x8233,\\n  R16UI: 0x8234,\\n  R32I: 0x8235,\\n  R32UI: 0x8236,\\n  RG8I: 0x8237,\\n  RG8UI: 0x8238,\\n  RG16I: 0x8239,\\n  RG16UI: 0x823a,\\n  RG32I: 0x823b,\\n  RG32UI: 0x823c,\\n  R8_SNORM: 0x8f94,\\n  RG8_SNORM: 0x8f95,\\n  RGB8_SNORM: 0x8f96,\\n  RGBA8_SNORM: 0x8f97,\\n  RGB10_A2UI: 0x906f,\\n  TEXTURE_IMMUTABLE_FORMAT: 0x912f,\\n  TEXTURE_IMMUTABLE_LEVELS: 0x82df,\\n  UNSIGNED_INT_2_10_10_10_REV: 0x8368,\\n  UNSIGNED_INT_10F_11F_11F_REV: 0x8c3b,\\n  UNSIGNED_INT_5_9_9_9_REV: 0x8c3e,\\n  FLOAT_32_UNSIGNED_INT_24_8_REV: 0x8dad,\\n  UNSIGNED_INT_24_8: 0x84fa,\\n  HALF_FLOAT: 0x140b,\\n  RG: 0x8227,\\n  RG_INTEGER: 0x8228,\\n  INT_2_10_10_10_REV: 0x8d9f,\\n  CURRENT_QUERY: 0x8865,\\n  QUERY_RESULT: 0x8866,\\n  QUERY_RESULT_AVAILABLE: 0x8867,\\n  ANY_SAMPLES_PASSED: 0x8c2f,\\n  ANY_SAMPLES_PASSED_CONSERVATIVE: 0x8d6a,\\n  MAX_DRAW_BUFFERS: 0x8824,\\n  DRAW_BUFFER0: 0x8825,\\n  DRAW_BUFFER1: 0x8826,\\n  DRAW_BUFFER2: 0x8827,\\n  DRAW_BUFFER3: 0x8828,\\n  DRAW_BUFFER4: 0x8829,\\n  DRAW_BUFFER5: 0x882a,\\n  DRAW_BUFFER6: 0x882b,\\n  DRAW_BUFFER7: 0x882c,\\n  DRAW_BUFFER8: 0x882d,\\n  DRAW_BUFFER9: 0x882e,\\n  DRAW_BUFFER10: 0x882f,\\n  DRAW_BUFFER11: 0x8830,\\n  DRAW_BUFFER12: 0x8831,\\n  DRAW_BUFFER13: 0x8832,\\n  DRAW_BUFFER14: 0x8833,\\n  DRAW_BUFFER15: 0x8834,\\n  MAX_COLOR_ATTACHMENTS: 0x8cdf,\\n  COLOR_ATTACHMENT1: 0x8ce1,\\n  COLOR_ATTACHMENT2: 0x8ce2,\\n  COLOR_ATTACHMENT3: 0x8ce3,\\n  COLOR_ATTACHMENT4: 0x8ce4,\\n  COLOR_ATTACHMENT5: 0x8ce5,\\n  COLOR_ATTACHMENT6: 0x8ce6,\\n  COLOR_ATTACHMENT7: 0x8ce7,\\n  COLOR_ATTACHMENT8: 0x8ce8,\\n  COLOR_ATTACHMENT9: 0x8ce9,\\n  COLOR_ATTACHMENT10: 0x8cea,\\n  COLOR_ATTACHMENT11: 0x8ceb,\\n  COLOR_ATTACHMENT12: 0x8cec,\\n  COLOR_ATTACHMENT13: 0x8ced,\\n  COLOR_ATTACHMENT14: 0x8cee,\\n  COLOR_ATTACHMENT15: 0x8cef,\\n  SAMPLER_3D: 0x8b5f,\\n  SAMPLER_2D_SHADOW: 0x8b62,\\n  SAMPLER_2D_ARRAY: 0x8dc1,\\n  SAMPLER_2D_ARRAY_SHADOW: 0x8dc4,\\n  SAMPLER_CUBE_SHADOW: 0x8dc5,\\n  INT_SAMPLER_2D: 0x8dca,\\n  INT_SAMPLER_3D: 0x8dcb,\\n  INT_SAMPLER_CUBE: 0x8dcc,\\n  INT_SAMPLER_2D_ARRAY: 0x8dcf,\\n  UNSIGNED_INT_SAMPLER_2D: 0x8dd2,\\n  UNSIGNED_INT_SAMPLER_3D: 0x8dd3,\\n  UNSIGNED_INT_SAMPLER_CUBE: 0x8dd4,\\n  UNSIGNED_INT_SAMPLER_2D_ARRAY: 0x8dd7,\\n  MAX_SAMPLES: 0x8d57,\\n  SAMPLER_BINDING: 0x8919,\\n  PIXEL_PACK_BUFFER: 0x88eb,\\n  PIXEL_UNPACK_BUFFER: 0x88ec,\\n  PIXEL_PACK_BUFFER_BINDING: 0x88ed,\\n  PIXEL_UNPACK_BUFFER_BINDING: 0x88ef,\\n  COPY_READ_BUFFER: 0x8f36,\\n  COPY_WRITE_BUFFER: 0x8f37,\\n  COPY_READ_BUFFER_BINDING: 0x8f36,\\n  COPY_WRITE_BUFFER_BINDING: 0x8f37,\\n  FLOAT_MAT2x3: 0x8b65,\\n  FLOAT_MAT2x4: 0x8b66,\\n  FLOAT_MAT3x2: 0x8b67,\\n  FLOAT_MAT3x4: 0x8b68,\\n  FLOAT_MAT4x2: 0x8b69,\\n  FLOAT_MAT4x3: 0x8b6a,\\n  UNSIGNED_INT_VEC2: 0x8dc6,\\n  UNSIGNED_INT_VEC3: 0x8dc7,\\n  UNSIGNED_INT_VEC4: 0x8dc8,\\n  UNSIGNED_NORMALIZED: 0x8c17,\\n  SIGNED_NORMALIZED: 0x8f9c,\\n  VERTEX_ATTRIB_ARRAY_INTEGER: 0x88fd,\\n  VERTEX_ATTRIB_ARRAY_DIVISOR: 0x88fe,\\n  TRANSFORM_FEEDBACK_BUFFER_MODE: 0x8c7f,\\n  MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS: 0x8c80,\\n  TRANSFORM_FEEDBACK_VARYINGS: 0x8c83,\\n  TRANSFORM_FEEDBACK_BUFFER_START: 0x8c84,\\n  TRANSFORM_FEEDBACK_BUFFER_SIZE: 0x8c85,\\n  TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN: 0x8c88,\\n  MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS: 0x8c8a,\\n  MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS: 0x8c8b,\\n  INTERLEAVED_ATTRIBS: 0x8c8c,\\n  SEPARATE_ATTRIBS: 0x8c8d,\\n  TRANSFORM_FEEDBACK_BUFFER: 0x8c8e,\\n  TRANSFORM_FEEDBACK_BUFFER_BINDING: 0x8c8f,\\n  TRANSFORM_FEEDBACK: 0x8e22,\\n  TRANSFORM_FEEDBACK_PAUSED: 0x8e23,\\n  TRANSFORM_FEEDBACK_ACTIVE: 0x8e24,\\n  TRANSFORM_FEEDBACK_BINDING: 0x8e25,\\n  FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING: 0x8210,\\n  FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE: 0x8211,\\n  FRAMEBUFFER_ATTACHMENT_RED_SIZE: 0x8212,\\n  FRAMEBUFFER_ATTACHMENT_GREEN_SIZE: 0x8213,\\n  FRAMEBUFFER_ATTACHMENT_BLUE_SIZE: 0x8214,\\n  FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE: 0x8215,\\n  FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE: 0x8216,\\n  FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE: 0x8217,\\n  FRAMEBUFFER_DEFAULT: 0x8218,\\n  DEPTH24_STENCIL8: 0x88f0,\\n  DRAW_FRAMEBUFFER_BINDING: 0x8ca6,\\n  READ_FRAMEBUFFER_BINDING: 0x8caa,\\n  RENDERBUFFER_SAMPLES: 0x8cab,\\n  FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER: 0x8cd4,\\n  FRAMEBUFFER_INCOMPLETE_MULTISAMPLE: 0x8d56,\\n  UNIFORM_BUFFER: 0x8a11,\\n  UNIFORM_BUFFER_BINDING: 0x8a28,\\n  UNIFORM_BUFFER_START: 0x8a29,\\n  UNIFORM_BUFFER_SIZE: 0x8a2a,\\n  MAX_VERTEX_UNIFORM_BLOCKS: 0x8a2b,\\n  MAX_FRAGMENT_UNIFORM_BLOCKS: 0x8a2d,\\n  MAX_COMBINED_UNIFORM_BLOCKS: 0x8a2e,\\n  MAX_UNIFORM_BUFFER_BINDINGS: 0x8a2f,\\n  MAX_UNIFORM_BLOCK_SIZE: 0x8a30,\\n  MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS: 0x8a31,\\n  MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS: 0x8a33,\\n  UNIFORM_BUFFER_OFFSET_ALIGNMENT: 0x8a34,\\n  ACTIVE_UNIFORM_BLOCKS: 0x8a36,\\n  UNIFORM_TYPE: 0x8a37,\\n  UNIFORM_SIZE: 0x8a38,\\n  UNIFORM_BLOCK_INDEX: 0x8a3a,\\n  UNIFORM_OFFSET: 0x8a3b,\\n  UNIFORM_ARRAY_STRIDE: 0x8a3c,\\n  UNIFORM_MATRIX_STRIDE: 0x8a3d,\\n  UNIFORM_IS_ROW_MAJOR: 0x8a3e,\\n  UNIFORM_BLOCK_BINDING: 0x8a3f,\\n  UNIFORM_BLOCK_DATA_SIZE: 0x8a40,\\n  UNIFORM_BLOCK_ACTIVE_UNIFORMS: 0x8a42,\\n  UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES: 0x8a43,\\n  UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER: 0x8a44,\\n  UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER: 0x8a46,\\n  OBJECT_TYPE: 0x9112,\\n  SYNC_CONDITION: 0x9113,\\n  SYNC_STATUS: 0x9114,\\n  SYNC_FLAGS: 0x9115,\\n  SYNC_FENCE: 0x9116,\\n  SYNC_GPU_COMMANDS_COMPLETE: 0x9117,\\n  UNSIGNALED: 0x9118,\\n  SIGNALED: 0x9119,\\n  ALREADY_SIGNALED: 0x911a,\\n  TIMEOUT_EXPIRED: 0x911b,\\n  CONDITION_SATISFIED: 0x911c,\\n  WAIT_FAILED: 0x911d,\\n  SYNC_FLUSH_COMMANDS_BIT: 0x00000001,\\n  COLOR: 0x1800,\\n  DEPTH: 0x1801,\\n  STENCIL: 0x1802,\\n  MIN: 0x8007,\\n  MAX: 0x8008,\\n  DEPTH_COMPONENT24: 0x81a6,\\n  STREAM_READ: 0x88e1,\\n  STREAM_COPY: 0x88e2,\\n  STATIC_READ: 0x88e5,\\n  STATIC_COPY: 0x88e6,\\n  DYNAMIC_READ: 0x88e9,\\n  DYNAMIC_COPY: 0x88ea,\\n  DEPTH_COMPONENT32F: 0x8cac,\\n  DEPTH32F_STENCIL8: 0x8cad,\\n  INVALID_INDEX: 0xffffffff,\\n  TIMEOUT_IGNORED: -1,\\n  MAX_CLIENT_WAIT_TIMEOUT_WEBGL: 0x9247,\\n  VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE: 0x88fe,\\n  UNMASKED_VENDOR_WEBGL: 0x9245,\\n  UNMASKED_RENDERER_WEBGL: 0x9246,\\n  MAX_TEXTURE_MAX_ANISOTROPY_EXT: 0x84ff,\\n  TEXTURE_MAX_ANISOTROPY_EXT: 0x84fe,\\n  COMPRESSED_RGB_S3TC_DXT1_EXT: 0x83f0,\\n  COMPRESSED_RGBA_S3TC_DXT1_EXT: 0x83f1,\\n  COMPRESSED_RGBA_S3TC_DXT3_EXT: 0x83f2,\\n  COMPRESSED_RGBA_S3TC_DXT5_EXT: 0x83f3,\\n  COMPRESSED_R11_EAC: 0x9270,\\n  COMPRESSED_SIGNED_R11_EAC: 0x9271,\\n  COMPRESSED_RG11_EAC: 0x9272,\\n  COMPRESSED_SIGNED_RG11_EAC: 0x9273,\\n  COMPRESSED_RGB8_ETC2: 0x9274,\\n  COMPRESSED_RGBA8_ETC2_EAC: 0x9275,\\n  COMPRESSED_SRGB8_ETC2: 0x9276,\\n  COMPRESSED_SRGB8_ALPHA8_ETC2_EAC: 0x9277,\\n  COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2: 0x9278,\\n  COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2: 0x9279,\\n  COMPRESSED_RGB_PVRTC_4BPPV1_IMG: 0x8c00,\\n  COMPRESSED_RGBA_PVRTC_4BPPV1_IMG: 0x8c02,\\n  COMPRESSED_RGB_PVRTC_2BPPV1_IMG: 0x8c01,\\n  COMPRESSED_RGBA_PVRTC_2BPPV1_IMG: 0x8c03,\\n  COMPRESSED_RGB_ETC1_WEBGL: 0x8d64,\\n  COMPRESSED_RGB_ATC_WEBGL: 0x8c92,\\n  COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL: 0x8c92,\\n  COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL: 0x87ee,\\n  UNSIGNED_INT_24_8_WEBGL: 0x84fa,\\n  HALF_FLOAT_OES: 0x8d61,\\n  RGBA32F_EXT: 0x8814,\\n  RGB32F_EXT: 0x8815,\\n  FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT: 0x8211,\\n  UNSIGNED_NORMALIZED_EXT: 0x8c17,\\n  MIN_EXT: 0x8007,\\n  MAX_EXT: 0x8008,\\n  SRGB_EXT: 0x8c40,\\n  SRGB_ALPHA_EXT: 0x8c42,\\n  SRGB8_ALPHA8_EXT: 0x8c43,\\n  FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT: 0x8210,\\n  FRAGMENT_SHADER_DERIVATIVE_HINT_OES: 0x8b8b,\\n  COLOR_ATTACHMENT0_WEBGL: 0x8ce0,\\n  COLOR_ATTACHMENT1_WEBGL: 0x8ce1,\\n  COLOR_ATTACHMENT2_WEBGL: 0x8ce2,\\n  COLOR_ATTACHMENT3_WEBGL: 0x8ce3,\\n  COLOR_ATTACHMENT4_WEBGL: 0x8ce4,\\n  COLOR_ATTACHMENT5_WEBGL: 0x8ce5,\\n  COLOR_ATTACHMENT6_WEBGL: 0x8ce6,\\n  COLOR_ATTACHMENT7_WEBGL: 0x8ce7,\\n  COLOR_ATTACHMENT8_WEBGL: 0x8ce8,\\n  COLOR_ATTACHMENT9_WEBGL: 0x8ce9,\\n  COLOR_ATTACHMENT10_WEBGL: 0x8cea,\\n  COLOR_ATTACHMENT11_WEBGL: 0x8ceb,\\n  COLOR_ATTACHMENT12_WEBGL: 0x8cec,\\n  COLOR_ATTACHMENT13_WEBGL: 0x8ced,\\n  COLOR_ATTACHMENT14_WEBGL: 0x8cee,\\n  COLOR_ATTACHMENT15_WEBGL: 0x8cef,\\n  DRAW_BUFFER0_WEBGL: 0x8825,\\n  DRAW_BUFFER1_WEBGL: 0x8826,\\n  DRAW_BUFFER2_WEBGL: 0x8827,\\n  DRAW_BUFFER3_WEBGL: 0x8828,\\n  DRAW_BUFFER4_WEBGL: 0x8829,\\n  DRAW_BUFFER5_WEBGL: 0x882a,\\n  DRAW_BUFFER6_WEBGL: 0x882b,\\n  DRAW_BUFFER7_WEBGL: 0x882c,\\n  DRAW_BUFFER8_WEBGL: 0x882d,\\n  DRAW_BUFFER9_WEBGL: 0x882e,\\n  DRAW_BUFFER10_WEBGL: 0x882f,\\n  DRAW_BUFFER11_WEBGL: 0x8830,\\n  DRAW_BUFFER12_WEBGL: 0x8831,\\n  DRAW_BUFFER13_WEBGL: 0x8832,\\n  DRAW_BUFFER14_WEBGL: 0x8833,\\n  DRAW_BUFFER15_WEBGL: 0x8834,\\n  MAX_COLOR_ATTACHMENTS_WEBGL: 0x8cdf,\\n  MAX_DRAW_BUFFERS_WEBGL: 0x8824,\\n  VERTEX_ARRAY_BINDING_OES: 0x85b5,\\n  QUERY_COUNTER_BITS_EXT: 0x8864,\\n  CURRENT_QUERY_EXT: 0x8865,\\n  QUERY_RESULT_EXT: 0x8866,\\n  QUERY_RESULT_AVAILABLE_EXT: 0x8867,\\n  TIME_ELAPSED_EXT: 0x88bf,\\n  TIMESTAMP_EXT: 0x8e28,\\n  GPU_DISJOINT_EXT: 0x8fbb\\n});\\n// CONCATENATED MODULE: ./src/layers/heatmap-constants.js\\nvar _PIXELATED_TEXTURE_PA;// eslint-disable-line import/no-extraneous-dependencies\\nvar TILE_SIZE=2048;var MIN_ROW_AGG=1;var MAX_ROW_AGG=16;var COLOR_BAR_SIZE=20;var AXIS_LABEL_TEXT_SIZE=9;var AXIS_TITLE_TEXT_SIZE=15;var AXIS_MIN_SIZE=10;var AXIS_MAX_SIZE=90;var AXIS_MARGIN=3;var THEME_TO_TEXT_COLOR={dark:[224,224,224],light:[64,64,64]};var AXIS_FONT_FAMILY=\\\"-apple-system, 'Helvetica Neue', Arial, sans-serif\\\";var PIXELATED_TEXTURE_PARAMETERS=(_PIXELATED_TEXTURE_PA={},_defineProperty(_PIXELATED_TEXTURE_PA,esm.TEXTURE_MIN_FILTER,esm.NEAREST),_defineProperty(_PIXELATED_TEXTURE_PA,esm.TEXTURE_MAG_FILTER,esm.NEAREST),_defineProperty(_PIXELATED_TEXTURE_PA,esm.TEXTURE_WRAP_S,esm.CLAMP_TO_EDGE),_defineProperty(_PIXELATED_TEXTURE_PA,esm.TEXTURE_WRAP_T,esm.CLAMP_TO_EDGE),_PIXELATED_TEXTURE_PA);\\n// CONCATENATED MODULE: ./src/components/heatmap/utils.js\\nfunction getGeneByCellTile(view,_ref){var tileSize=_ref.tileSize,tileI=_ref.tileI,tileJ=_ref.tileJ,numCells=_ref.numCells,numGenes=_ref.numGenes,cellOrdering=_ref.cellOrdering,cells=_ref.cells;var tileData=new Uint8Array(tileSize*tileSize);var offset;var value;var cellI;var geneI;var sortedCellI;var tileSizeRange=range_default()(tileSize);tileSizeRange.forEach(function(j){// Need to iterate over cells in the outer loop.\\ncellI=tileJ*tileSize+j;if(cellI<numCells){sortedCellI=cells.indexOf(cellOrdering[cellI]);if(sortedCellI>=-1){tileSizeRange.forEach(function(i){geneI=tileI*tileSize+i;value=view[sortedCellI*numGenes+geneI];offset=(tileSize-i-1)*tileSize+j;tileData[offset]=value;});}}});return tileData;}function getCellByGeneTile(view,_ref2){var tileSize=_ref2.tileSize,tileI=_ref2.tileI,tileJ=_ref2.tileJ,numCells=_ref2.numCells,numGenes=_ref2.numGenes,cellOrdering=_ref2.cellOrdering,cells=_ref2.cells;var tileData=new Uint8Array(tileSize*tileSize);var offset;var value;var cellI;var geneI;var sortedCellI;var tileSizeRange=range_default()(tileSize);tileSizeRange.forEach(function(i){// Need to iterate over cells in the outer loop.\\ncellI=tileI*tileSize+i;if(cellI<numCells){sortedCellI=cells.indexOf(cellOrdering[cellI]);if(sortedCellI>=-1){tileSizeRange.forEach(function(j){geneI=tileJ*tileSize+j;if(geneI<numGenes){value=view[sortedCellI*numGenes+geneI];}else{value=0;}offset=(tileSize-i-1)*tileSize+j;tileData[offset]=value;});}}});return tileData;}/**\\n * Called before a layer is drawn to determine whether it should be rendered.\\n * Reference: https://deck.gl/docs/api-reference/core/deck#layerfilter\\n * @param {object} params A viewport, layer pair.\\n * @param {object} params.layer The layer to check.\\n * @param {object} params.viewport The viewport to check.\\n * @returns {boolean} Should this layer be rendered in this viewport?\\n */function layerFilter(_ref3){var layer=_ref3.layer,viewport=_ref3.viewport;if(viewport.id==='axisLeft'){return layer.id.startsWith('axisLeft');}if(viewport.id==='axisTop'){return layer.id.startsWith('axisTop');}if(viewport.id==='heatmap'){return layer.id.startsWith('heatmap');}if(viewport.id==='colorsLeft'){return layer.id.startsWith('colorsLeft');}if(viewport.id==='colorsTop'){return layer.id.startsWith('colorsTop');}return false;}/**\\n * Get the size of the left and top heatmap axes,\\n * taking into account the maximum label string lengths.\\n * @param {boolean} transpose Is the heatmap transposed?\\n * @param {number} geneLabelMaxLength What is the maximum length gene label?\\n * @param {number} cellLabelMaxLength What is the maximum length cell label?\\n * @returns {number[]} [axisOffsetLeft, axisOffsetTop]\\n */function getAxisSizes(transpose,geneLabelMaxLength,cellLabelMaxLength){var axisOffsetLeft=clamp_default()((transpose?geneLabelMaxLength:cellLabelMaxLength)*AXIS_LABEL_TEXT_SIZE,AXIS_MIN_SIZE,AXIS_MAX_SIZE);var axisOffsetTop=clamp_default()((transpose?cellLabelMaxLength:geneLabelMaxLength)*AXIS_LABEL_TEXT_SIZE,AXIS_MIN_SIZE,AXIS_MAX_SIZE);return[axisOffsetLeft,axisOffsetTop];}/**\\n * Convert a mouse coordinate (x, y) to a heatmap coordinate (col index, row index).\\n * @param {number} mouseX The mouse X of interest.\\n * @param {number} mouseY The mouse Y of interest.\\n * @param {object} param2 An object containing current sizes and scale factors.\\n * @returns {number[]} [colI, rowI]\\n */function mouseToHeatmapPosition(mouseX,mouseY,_ref4){var offsetLeft=_ref4.offsetLeft,offsetTop=_ref4.offsetTop,targetX=_ref4.targetX,targetY=_ref4.targetY,scaleFactor=_ref4.scaleFactor,matrixWidth=_ref4.matrixWidth,matrixHeight=_ref4.matrixHeight,numRows=_ref4.numRows,numCols=_ref4.numCols;// TODO: use linear algebra\\nvar viewMouseX=mouseX-offsetLeft;var viewMouseY=mouseY-offsetTop;if(viewMouseX<0||viewMouseY<0){// The mouse is outside the heatmap.\\nreturn[null,null];}// Determine the rowI and colI values based on the current viewState.\\nvar bboxTargetX=targetX*scaleFactor+matrixWidth*scaleFactor/2;var bboxTargetY=targetY*scaleFactor+matrixHeight*scaleFactor/2;var bboxLeft=bboxTargetX-matrixWidth/2;var bboxTop=bboxTargetY-matrixHeight/2;var zoomedOffsetLeft=bboxLeft/(matrixWidth*scaleFactor);var zoomedOffsetTop=bboxTop/(matrixHeight*scaleFactor);var zoomedViewMouseX=viewMouseX/(matrixWidth*scaleFactor);var zoomedViewMouseY=viewMouseY/(matrixHeight*scaleFactor);var zoomedMouseX=zoomedOffsetLeft+zoomedViewMouseX;var zoomedMouseY=zoomedOffsetTop+zoomedViewMouseY;var rowI=Math.floor(zoomedMouseY*numRows);var colI=Math.floor(zoomedMouseX*numCols);return[colI,rowI];}/**\\n * Convert a heatmap coordinate (col index, row index) to a mouse coordinate (x, y).\\n * @param {number} colI The column index of interest.\\n * @param {number} rowI The row index of interest.\\n * @param {object} param2 An object containing current sizes and scale factors.\\n * @returns {number[]} [x, y]\\n */function heatmapToMousePosition(colI,rowI,_ref5){var offsetLeft=_ref5.offsetLeft,offsetTop=_ref5.offsetTop,targetX=_ref5.targetX,targetY=_ref5.targetY,scaleFactor=_ref5.scaleFactor,matrixWidth=_ref5.matrixWidth,matrixHeight=_ref5.matrixHeight,numRows=_ref5.numRows,numCols=_ref5.numCols;// TODO: use linear algebra\\nvar zoomedMouseY=null;var zoomedMouseX=null;if(rowI!==null){var minY=-matrixHeight*scaleFactor/2;var maxY=matrixHeight*scaleFactor/2;var totalHeight=maxY-minY;var minInViewY=targetY*scaleFactor-matrixHeight/2;var maxInViewY=targetY*scaleFactor+matrixHeight/2;var inViewHeight=maxInViewY-minInViewY;var normalizedRowY=(rowI+0.5)/numRows;var globalRowY=minY+normalizedRowY*totalHeight;if(minInViewY<=globalRowY&&globalRowY<=maxInViewY){zoomedMouseY=offsetTop+(globalRowY-minInViewY)/inViewHeight*matrixHeight;}}if(colI!==null){var minX=-matrixWidth*scaleFactor/2;var maxX=matrixWidth*scaleFactor/2;var totalWidth=maxX-minX;var minInViewX=targetX*scaleFactor-matrixWidth/2;var maxInViewX=targetX*scaleFactor+matrixWidth/2;var inViewWidth=maxInViewX-minInViewX;var normalizedRowX=(colI+0.5)/numCols;var globalRowX=minX+normalizedRowX*totalWidth;if(minInViewX<=globalRowX&&globalRowX<=maxInViewX){zoomedMouseX=offsetLeft+(globalRowX-minInViewX)/inViewWidth*matrixWidth;}}return[zoomedMouseX,zoomedMouseY];}\\n// CONCATENATED MODULE: ./node_modules/eslint-loader/dist/cjs.js??ref--5-0!./src/components/heatmap/heatmap.worker.js\\n/* eslint-disable no-restricted-globals */\\n\\n\\n/**\\n * Map a gene expression matrix onto multiple square array tiles,\\n * taking into account the ordering/selection of cells.\\n * @param {object} params\\n * @param {string} params.curr The current task uuid.\\n * @param {number} params.xTiles How many tiles required in the x direction?\\n * @param {number} params.yTiles How many tiles required in the y direction?\\n * @param {number} params.tileSize How many entries along each tile axis?\\n * @param {string[]} params.cellOrdering The current ordering of cells.\\n * @param {string[]} params.rows The name of each row (cell ID).\\n * Does not take transpose into account (always cells).\\n * @param {string[]} params.cols The name of each column (gene ID).\\n * Does not take transpose into account (always genes).\\n * @param {ArrayBuffer} params.data The array buffer.\\n * Need to transfer back to main thread when done.\\n * @param {boolean} params.transpose Is the heatmap transposed?\\n * @returns {array} [message, transfers]\\n */\\nfunction getTile({\\n  curr,\\n  tileI,\\n  tileJ,\\n  tileSize,\\n  cellOrdering,\\n  rows,\\n  cols,\\n  data,\\n  transpose,\\n}) {\\n  const view = new Uint8Array(data);\\n\\n  const numGenes = cols.length;\\n  const numCells = cellOrdering.length;\\n\\n  const getTileFunction = (transpose ? getGeneByCellTile : getCellByGeneTile);\\n\\n  const result = getTileFunction(\\n    view,\\n    {\\n      tileSize,\\n      tileI,\\n      tileJ,\\n      numCells,\\n      numGenes,\\n      cellOrdering,\\n      cells: rows,\\n    },\\n  );\\n  return [{ tile: result, buffer: data, curr }, [data]];\\n}\\n\\n/**\\n * Worker message passing logic.\\n */\\nif (typeof self !== 'undefined') {\\n  const nameToFunction = {\\n    getTile,\\n  };\\n\\n  self.addEventListener('message', (event) => {\\n    try {\\n      const [name, args] = event.data;\\n      const [message, transfers] = nameToFunction[name](args);\\n      self.postMessage(message, transfers);\\n    } catch (e) {\\n      console.warn(e);\\n    }\\n  });\\n}\\n\\n\\n/***/ })\\n/******/ ]);\\n//# sourceMappingURL=6eb13c7b1b880fe64362.worker.js.map\", null);\n};","module.exports = require(\"d3-force\");","module.exports = require(\"d3-dsv\");","module.exports = require(\"json2csv\");","module.exports = require(\"lodash/union\");","module.exports = require(\"lodash/difference\");","module.exports = require(\"clsx\");","module.exports = require(\"rc-tree/es/util\");","module.exports = require(\"react-color\");","module.exports = require(\"rc-tooltip\");","module.exports = require(\"@material-ui/icons/MoreVert\");","module.exports = require(\"@material-ui/icons/Lens\");","module.exports = require(\"@material-ui/core/ExpansionPanelSummary\");","module.exports = require(\"@material-ui/core/ExpansionPanelDetails\");","module.exports = require(\"@material-ui/icons/RemoveCircle\");","module.exports = require(\"@material-ui/core/Tabs\");","module.exports = require(\"@material-ui/core/ExpansionPanel\");","module.exports = require(\"@material-ui/icons/ExpandMore\");","module.exports = require(\"@material-ui/icons/Visibility\");","module.exports = require(\"@material-ui/icons/VisibilityOff\");","module.exports = require(\"@material-ui/core/FormControl\");","module.exports = require(\"vega-tooltip\");","module.exports = require(\"lodash/cloneDeep\");","export { default as HeatmapSubscriber } from './HeatmapSubscriber';\nexport { default as Heatmap } from './Heatmap';\n","export { default as SpatialSubscriber } from './SpatialSubscriber';\nexport { default as Spatial } from './Spatial';\n","export { default as ScatterplotSubscriber } from './ScatterplotSubscriber';\nexport { default as Scatterplot } from './Scatterplot';\n","'use strict';\n\n// http://stackoverflow.com/questions/10343913/how-to-create-a-web-worker-from-a-string\n\nvar URL = window.URL || window.webkitURL;\n\nmodule.exports = function (content, url) {\n  try {\n    try {\n      var blob;\n\n      try {\n        // BlobBuilder = Deprecated, but widely implemented\n        var BlobBuilder = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder || window.MSBlobBuilder;\n\n        blob = new BlobBuilder();\n\n        blob.append(content);\n\n        blob = blob.getBlob();\n      } catch (e) {\n        // The proposed API\n        blob = new Blob([content]);\n      }\n\n      return new Worker(URL.createObjectURL(blob));\n    } catch (e) {\n      return new Worker('data:application/javascript,' + encodeURIComponent(content));\n    }\n  } catch (e) {\n    if (!url) {\n      throw Error('Inline worker is not supported');\n    }\n\n    return new Worker(url);\n  }\n};","module.exports = require(\"react-grid-layout\");","module.exports = require(\"higlass-zarr-datafetchers\");","module.exports = require(\"lz-string\");","module.exports = require(\"internmap\");","module.exports = require(\"react-dom\");","module.exports = require(\"dynamic-import-polyfill\");","module.exports = require(\"higlass-register\");","module.exports = require(\"bowser\");","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","import { range } from '../../utils';\n\nexport const COMPONENT_ID_PREFIX = 'i';\n\nfunction sum(a) {\n  return a.reduce((x, y) => x + y, 0);\n}\n\nexport function makeGridLayout(colXs, colLayout) {\n  const colWs = [];\n  for (let i = 0; i < colXs.length; i++) { // eslint-disable-line no-plusplus\n    colWs.push(colXs[i + 1] - colXs[i]);\n  }\n  return Object.entries(colLayout).map(([id, spec]) => ({\n    i: id,\n    y: spec.y,\n    h: spec.h || 1,\n    x: colXs[spec.x],\n    w: sum(colWs.slice(spec.x, spec.x + (spec.w || 1))),\n  }));\n}\n\nexport function getMaxRows(layouts) {\n  return Math.max(\n    ...Object.values(layouts).map(\n      layout => Math.max(\n        ...layout.map(xywh => xywh.y + xywh.h),\n      ),\n    ),\n  );\n}\n\nexport function resolveLayout(layout) {\n  const cols = {};\n  const layouts = {};\n  const breakpoints = {};\n  const components = {};\n  const positions = {};\n\n  (('components' in layout) ? layout.components : layout).forEach(\n    (def, i) => {\n      const id = `${COMPONENT_ID_PREFIX}${i}`;\n      components[id] = {\n        component: def.component,\n        props: def.props || {},\n        coordinationScopes: def.coordinationScopes || {},\n      };\n      positions[id] = {\n        id, x: def.x, y: def.y, w: def.w, h: def.h,\n      };\n    },\n  );\n\n  if ('components' in layout) {\n    Object.entries(layout.columns).forEach(\n      ([width, columnXs]) => {\n        cols[width] = columnXs[columnXs.length - 1];\n        layouts[width] = makeGridLayout(columnXs, positions);\n        breakpoints[width] = width;\n      },\n    );\n  } else {\n    // static layout\n    const id = 'ID';\n    const columnCount = 12;\n    cols[id] = columnCount;\n    layouts[id] = makeGridLayout(range(columnCount + 1), positions);\n    breakpoints[id] = 1000;\n    // Default has different numbers of columns at different widths,\n    // so we do need to override that to ensure the same number of columns,\n    // regardless of window width.\n  }\n  return {\n    cols, layouts, breakpoints, components,\n  };\n}\n","import React from 'react';\nimport { Responsive, WidthProvider } from 'react-grid-layout';\nimport isEqual from 'lodash/isEqual';\nimport { getMaxRows, resolveLayout, COMPONENT_ID_PREFIX } from './layout-utils';\n\nconst ResponsiveGridLayout = WidthProvider(Responsive);\n\nclass ResponsiveHeightGridLayout extends ResponsiveGridLayout {\n  componentDidUpdate(prevProps) {\n    if (this.props.height !== prevProps.height) {\n      this.onWindowResize();\n    }\n  }\n}\n\nexport default function VitessceGridLayout(props) {\n  const {\n    layout,\n    getComponent, padding, margin, draggableHandle,\n    reactGridLayoutProps, rowHeight, theme, height,\n    onRemoveComponent, onLayoutChange: onLayoutChangeProp,\n  } = props;\n\n  // If layout changes, update grid components.\n  const {\n    cols: gridCols, layouts: gridLayouts, breakpoints: gridBreakpoints, components: gridComponents,\n  } = resolveLayout(layout);\n\n  const maxRows = getMaxRows(gridLayouts);\n\n  // Inline CSS is generally avoided, but this saves the end-user a little work,\n  // and prevents class names from getting out of sync.\n  const style = (\n    <style>\n      {`\n        ${draggableHandle} {\n          cursor: grab;\n        }\n        ${draggableHandle}:active {\n          cursor: grabbing;\n        }\n     `}\n    </style>\n  );\n\n  const onLayoutChange = (newLayout) => {\n    if (newLayout.length === Object.entries(gridComponents).length) {\n      const newComponentProps = [];\n      newLayout.forEach((nextC) => {\n        const id = nextC.i;\n        const prevC = gridComponents[id];\n        if (prevC) {\n          const i = parseInt(id.substring(id.indexOf(COMPONENT_ID_PREFIX) + 1), 10);\n          const nextProps = {\n            x: nextC.x, y: nextC.y, w: nextC.w, h: nextC.h,\n          };\n          const prevProps = {\n            x: prevC.x, y: prevC.y, w: prevC.w, h: prevC.h,\n          };\n          if (!isEqual(nextProps, prevProps)) {\n            newComponentProps.push([i, nextProps]);\n          }\n        }\n      });\n      if (newComponentProps.length > 0) {\n        onLayoutChangeProp(newComponentProps);\n      }\n    }\n  };\n\n  const layoutChildren = Object.entries(gridComponents).map(([k, v], i) => {\n    const Component = getComponent(v.component);\n\n    const removeGridComponent = () => {\n      onRemoveComponent(i);\n    };\n\n    return (\n      <div key={k}>\n        <Component\n          {... v.props}\n          uuid={i}\n          coordinationScopes={v.coordinationScopes}\n          theme={theme}\n          removeGridComponent={removeGridComponent}\n        />\n      </div>\n    );\n  });\n  return (gridLayouts && gridComponents && gridBreakpoints && gridCols) && (\n    <>\n      {style}\n      <ResponsiveHeightGridLayout\n        className=\"layout\"\n        cols={gridCols}\n        layouts={gridLayouts}\n        breakpoints={gridBreakpoints}\n        height={height}\n        rowHeight={\n          rowHeight\n          || (\n            (window.innerHeight - 2 * padding - (maxRows - 1) * margin)\n            / maxRows\n          )}\n        containerPadding={[padding, padding]}\n        margin={[margin, margin]}\n        draggableHandle={draggableHandle}\n        onLayoutChange={onLayoutChange}\n        {... reactGridLayoutProps}\n      >\n        {layoutChildren}\n      </ResponsiveHeightGridLayout>\n    </>\n  );\n}\n\nVitessceGridLayout.defaultProps = {\n  padding: 10,\n  margin: 10,\n};\n","import uuidv4 from 'uuid/v4';\n\n/**\n * A loader ancestor class containing a default constructor\n * and a stub for the required load() method.\n */\nexport default class AbstractLoader {\n  constructor({\n    type, url, requestInit, options,\n  }) {\n    this.type = type;\n    this.url = url;\n    this.requestInit = requestInit;\n    this.options = options;\n\n    this.subscriptions = {};\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  load() {\n    throw new Error('The load() method has not been implemented.');\n  }\n\n  subscribe(subscriber) {\n    const token = uuidv4();\n    this.subscriptions[token] = subscriber;\n    return token;\n  }\n\n  unsubscribe(token) {\n    delete this.subscriptions[token];\n  }\n\n  publish(data) {\n    Object.values(this.subscriptions).forEach((subscriber) => {\n      subscriber(data);\n    });\n  }\n}\n","import AbstractLoader from './AbstractLoader';\n\nexport default class AbstractTwoStepLoader extends AbstractLoader {\n  constructor(dataSource, params) {\n    super(params);\n    this.dataSource = dataSource;\n  }\n}\n","\n\nexport default class LoaderResult {\n  constructor(data, url, coordinationValues = null) {\n    this.data = data;\n    this.url = url;\n    this.coordinationValues = coordinationValues;\n  }\n}\n","import Ajv from 'ajv';\nimport AbstractTwoStepLoader from './AbstractTwoStepLoader';\nimport { LoaderValidationError, AbstractLoaderError } from './errors/index';\nimport LoaderResult from './LoaderResult';\n\nimport cellsSchema from '../schemas/cells.schema.json';\nimport moleculesSchema from '../schemas/molecules.schema.json';\nimport neighborhoodsSchema from '../schemas/neighborhoods.schema.json';\nimport rasterSchema from '../schemas/raster.schema.json';\nimport cellSetsSchema from '../schemas/cell-sets.schema.json';\n\nconst typeToSchema = {\n  cells: cellsSchema,\n  molecules: moleculesSchema,\n  neighborhoods: neighborhoodsSchema,\n  raster: rasterSchema,\n  'cell-sets': cellSetsSchema,\n};\n\nexport default class JsonLoader extends AbstractTwoStepLoader {\n  constructor(dataSource, params) {\n    super(dataSource, params);\n\n    const { type } = params;\n    this.schema = typeToSchema[type];\n  }\n\n  load() {\n    const {\n      url, type, fileType,\n    } = this;\n    if (this.data) {\n      return this.data;\n    }\n    this.data = this.dataSource.data\n      .then((data) => {\n        if (data instanceof AbstractLoaderError) {\n          return Promise.reject(data);\n        }\n        const [valid, reason] = this.validate(data);\n        if (valid) {\n          return Promise.resolve(new LoaderResult(data, url));\n        }\n        return Promise.reject(new LoaderValidationError(type, fileType, url, reason));\n      });\n    return this.data;\n  }\n\n  validate(data) {\n    const { schema, type } = this;\n    if (!schema) {\n      throw Error(`No schema for ${type}`);\n    }\n    const validate = new Ajv().compile(schema);\n    const valid = validate(data);\n    let failureReason;\n    if (!valid) {\n      failureReason = validate.errors;\n    }\n    return [valid, failureReason];\n  }\n}\n","import { openArray } from 'zarr';\nimport AbstractTwoStepLoader from './AbstractTwoStepLoader';\nimport LoaderResult from './LoaderResult';\n\nexport default class MatrixZarrLoader extends AbstractTwoStepLoader {\n  loadAttrs() {\n    if (this.attrs) {\n      return this.attrs;\n    }\n    this.attrs = this.dataSource.getJson('.zattrs');\n    return this.attrs;\n  }\n\n  loadArr() {\n    const { store } = this.dataSource;\n    if (this.arr) {\n      return this.arr;\n    }\n    this.arr = openArray({ store, path: '/', mode: 'r' }).then(z => new Promise((resolve) => {\n      z.getRaw([null, null])\n        .then(resolve);\n    }));\n    return this.arr;\n  }\n\n  load() {\n    return Promise\n      .all([this.loadAttrs(), this.loadArr()])\n      .then(data => Promise.resolve(new LoaderResult(data, null)));\n  }\n}\n","import genesSchema from '../schemas/genes.schema.json';\nimport JsonLoader from './JsonLoader';\nimport { AbstractLoaderError } from './errors';\nimport LoaderResult from './LoaderResult';\n\nexport default class GenesJsonAsMatrixZarrLoader extends JsonLoader {\n  constructor(dataSource, params) {\n    super(dataSource, params);\n\n    this.schema = genesSchema;\n  }\n\n  async load() {\n    const payload = await super.load().catch(reason => Promise.resolve(reason));\n    if (payload instanceof AbstractLoaderError) {\n      return Promise.reject(payload);\n    }\n    const { data, url } = payload;\n    const cols = Object.keys(data);\n    const rows = (cols.length > 0 ? Object.keys(data[cols[0]].cells) : []);\n    const attrs = { rows, cols };\n\n    const normalizedFlatMatrix = rows\n      .flatMap(cellId => cols.map(\n        geneId => (data[geneId].cells[cellId] / data[geneId].max) * 255,\n      ));\n    // Need to wrap the NestedArray to mock the HTTPStore-based array\n    // which returns promises.\n    const arr = { data: Uint8Array.from(normalizedFlatMatrix) };\n    return Promise.resolve(new LoaderResult([attrs, arr], url));\n  }\n}\n","import { extent } from 'd3-array';\nimport range from 'lodash/range';\nimport clustersSchema from '../schemas/clusters.schema.json';\nimport JsonLoader from './JsonLoader';\nimport { AbstractLoaderError } from './errors';\nimport LoaderResult from './LoaderResult';\n\nexport default class ClustersJsonAsMatrixZarrLoader extends JsonLoader {\n  constructor(dataSource, params) {\n    super(dataSource, params);\n\n    this.schema = clustersSchema;\n  }\n\n  async load() {\n    const payload = await super.load().catch(reason => Promise.resolve(reason));\n    if (payload instanceof AbstractLoaderError) {\n      return Promise.reject(payload);\n    }\n    const { data, url } = payload;\n    const { rows, cols, matrix } = data;\n    const attrs = {\n      rows: cols,\n      cols: rows,\n    };\n    const shape = [attrs.rows.length, attrs.cols.length];\n    // Normalize values by converting to one-byte integers.\n    // Normalize for each gene (column) independently.\n    const normalizedMatrix = matrix.map((col) => {\n      const [min, max] = extent(col);\n      const normalize = d => Math.floor(((d - min) / (max - min)) * 255);\n      return col.map(normalize);\n    });\n    // Transpose the normalized matrix.\n    const tNormalizedMatrix = range(shape[0])\n      .map(i => range(shape[1]).map(j => normalizedMatrix[j][i]));\n    // Flatten the transposed matrix.\n    const normalizedFlatMatrix = tNormalizedMatrix.flat();\n    // Need to wrap the NestedArray to mock the HTTPStore-based array\n    // which returns promises.\n    const arr = { data: Uint8Array.from(normalizedFlatMatrix) };\n    return Promise.resolve(new LoaderResult([attrs, arr], url));\n  }\n}\n","import { ZarrPixelSource, loadOmeTiff } from '@hms-dbmi/viv';\nimport { openArray } from 'zarr';\nimport rasterSchema from '../schemas/raster.schema.json';\nimport JsonLoader from './JsonLoader';\nimport { AbstractLoaderError } from './errors';\nimport LoaderResult from './LoaderResult';\n\nimport { initializeRasterLayersAndChannels } from '../components/spatial/utils';\n\nasync function initLoader(imageData) {\n  const {\n    type, url, metadata, requestInit,\n  } = imageData;\n  switch (type) {\n    case ('zarr'): {\n      const {\n        dimensions, isPyramid, transform,\n      } = metadata || {};\n      const labels = dimensions.map(d => d.field);\n      let source;\n      if (isPyramid) {\n        const metadataUrl = `${url}${\n          url.slice(-1) === '/' ? '' : '/'\n        }.zmetadata`;\n        const response = await fetch(metadataUrl);\n        const { metadata: zarrMetadata } = await response.json();\n        const paths = Object.keys(zarrMetadata)\n          .filter(metaKey => metaKey.includes('.zarray'))\n          .map(arrMetaKeys => arrMetaKeys.slice(0, -7));\n        const data = await Promise.all(\n          paths.map(path => openArray({ store: url, path })),\n        );\n        const [yChunk, xChunk] = data[0].chunks.slice(-2);\n        const size = Math.min(yChunk, xChunk);\n        // deck.gl requirement for power-of-two tile size.\n        const tileSize = 2 ** Math.floor(Math.log2(size));\n        source = data.map(d => new ZarrPixelSource(d, labels, tileSize));\n      } else {\n        const data = await openArray({ store: url });\n        source = new ZarrPixelSource(data, labels);\n      }\n      return { data: source, metadata: { dimensions, transform }, channels: (dimensions.find(d => d.field === 'channel') || dimensions[0]).values };\n    }\n    case ('ome-tiff'): {\n      let loader;\n      // Fetch offsets for ome-tiff if needed.\n      if (metadata && 'omeTiffOffsetsUrl' in metadata) {\n        const { omeTiffOffsetsUrl } = metadata;\n        const res = await fetch(omeTiffOffsetsUrl, (requestInit || {}));\n        if (res.ok) {\n          const offsets = await res.json();\n          loader = await loadOmeTiff(\n            url,\n            {\n              offsets,\n              headers: requestInit?.headers,\n            },\n          );\n        } else {\n          throw new Error('Offsets not found but provided.');\n        }\n      } else {\n        loader = await loadOmeTiff(url, { headers: requestInit?.headers });\n      }\n      const { Pixels: { Channels } } = loader.metadata;\n      const channels = Array.isArray(Channels)\n        ? Channels.map((channel, i) => channel.Name || `Channel ${i}`)\n        : [Channels.Name || `Channel ${0}`];\n      return { ...loader, channels };\n    }\n    default: {\n      throw Error(`Image type (${type}) is not supported`);\n    }\n  }\n}\n\nexport default class RasterLoader extends JsonLoader {\n  constructor(dataSource, params) {\n    const { url, options } = params;\n    if (!url && options) {\n      // eslint-disable-next-line no-param-reassign\n      dataSource.url = URL.createObjectURL(new Blob([JSON.stringify(options)]));\n    }\n    super(dataSource, params);\n    this.schema = rasterSchema;\n  }\n\n  async load() {\n    const payload = await super.load().catch(reason => Promise.resolve(reason));\n    if (payload instanceof AbstractLoaderError) {\n      return Promise.reject(payload);\n    }\n    const { data: raster } = payload;\n    const { images, renderLayers, usePhysicalSizeScaling = false } = raster;\n\n    // Get image name and URL tuples.\n    const urls = images\n      .filter(image => !image.url.includes('zarr'))\n      .map(image => ([image.url, image.name]));\n\n    // Add a loaderCreator function for each image layer.\n    const imagesWithLoaderCreators = images.map(image => ({\n      ...image,\n      loaderCreator: async () => initLoader(image),\n    }));\n\n    // TODO: use options for initial selection of channels\n    // which omit domain/slider ranges.\n    if (!this.autoImageCache) {\n      this.autoImageCache = initializeRasterLayersAndChannels(\n        imagesWithLoaderCreators,\n        renderLayers,\n        usePhysicalSizeScaling,\n      );\n    }\n\n    return this.autoImageCache.then((autoImages) => {\n      const [autoImageLayers, imageLayerLoaders, imageLayerMeta] = autoImages;\n\n      const coordinationValues = {\n        spatialRasterLayers: autoImageLayers,\n      };\n      return new LoaderResult(\n        { loaders: imageLayerLoaders, meta: imageLayerMeta },\n        urls,\n        coordinationValues,\n      );\n    });\n  }\n}\n","import { loadOmeZarr } from '@hms-dbmi/viv';\nimport { AbstractLoaderError } from './errors';\nimport LoaderResult from './LoaderResult';\n\nimport { initializeRasterLayersAndChannels } from '../components/spatial/utils';\nimport AbstractTwoStepLoader from './AbstractTwoStepLoader';\n\nfunction hexToRgb(hex) {\n  const result = /^#?([A-F\\d]{2})([A-F\\d]{2})([A-F\\d]{2})$/i.exec(hex);\n  return [\n    parseInt(result[1].toLowerCase(), 16),\n    parseInt(result[2].toLowerCase(), 16),\n    parseInt(result[3].toLowerCase(), 16),\n  ];\n}\n\nexport default class OmeZarrLoader extends AbstractTwoStepLoader {\n  async load() {\n    const payload = await this.dataSource.getJson('.zattrs').catch(reason => Promise.resolve(reason));\n    if (payload instanceof AbstractLoaderError) {\n      return Promise.reject(payload);\n    }\n\n    const loader = await loadOmeZarr(this.url, { fetchOptions: this.requestInit, type: 'multiscales' });\n    const { metadata } = loader;\n\n    const { omero } = metadata;\n\n    if (!omero) {\n      console.error('Path for image not valid');\n      return Promise.reject(payload);\n    }\n\n    const { rdefs, channels } = omero;\n\n    const t = rdefs.defaultT ?? 0;\n    const z = rdefs.defaultZ ?? 0;\n\n    const imagesWithLoaderCreators = [\n      {\n        name: omero.name,\n        channels: channels.map((channel, i) => ({\n          selection: { z, t, c: i },\n          slider: [channel.window.start, channel.window.end],\n          color: hexToRgb(channel.color),\n        })),\n        loaderCreator: async () => ({ ...loader, channels: channels.map(c => c.label) }),\n      },\n    ];\n\n    // TODO: use options for initial selection of channels\n    // which omit domain/slider ranges.\n    const [\n      autoImageLayers, imageLayerLoaders, imageLayerMeta,\n    ] = await initializeRasterLayersAndChannels(\n      imagesWithLoaderCreators, undefined,\n    );\n\n    const coordinationValues = {\n      spatialRasterLayers: autoImageLayers,\n    };\n    return Promise.resolve(new LoaderResult(\n      { loaders: imageLayerLoaders, meta: imageLayerMeta },\n      [],\n      coordinationValues,\n    ));\n  }\n}\n","import cellSetsSchema from '../schemas/cell-sets.schema.json';\nimport JsonLoader from './JsonLoader';\nimport { tryUpgradeTreeToLatestSchema } from '../components/sets/io';\nimport { AbstractLoaderError } from './errors';\nimport LoaderResult from './LoaderResult';\n\nimport { initializeCellSetColor } from '../components/sets/cell-set-utils';\n\nexport default class CellSetsJsonLoader extends JsonLoader {\n  constructor(dataSource, params) {\n    super(dataSource, params);\n\n    this.schema = cellSetsSchema;\n  }\n\n  async load() {\n    const payload = await super.load().catch(reason => Promise.resolve(reason));\n    if (payload instanceof AbstractLoaderError) {\n      return Promise.reject(payload);\n    }\n    const { data: rawData, url } = payload;\n    const upgradedData = tryUpgradeTreeToLatestSchema(rawData, 'cell');\n\n    const coordinationValues = {\n      cellSetSelection: [],\n      cellSetColor: [],\n    };\n\n    // Set up the initial coordination values.\n    if (upgradedData && upgradedData.tree.length >= 1) {\n      const { tree } = upgradedData;\n      const newAutoSetSelectionParentName = tree[0].name;\n      // Create a list of set paths to initally select.\n      const newAutoSetSelections = tree[0].children\n        .map(node => ([newAutoSetSelectionParentName, node.name]));\n      // Create a list of cell set objects with color mappings.\n      const newAutoSetColors = initializeCellSetColor(upgradedData, []);\n      coordinationValues.cellSetSelection = newAutoSetSelections;\n      coordinationValues.cellSetColor = newAutoSetColors;\n    }\n    return Promise.resolve(new LoaderResult(upgradedData, url, coordinationValues));\n  }\n}\n","/* eslint-disable no-control-regex */\nimport { InternMap } from 'internmap';\nimport {\n  treeInitialize,\n  nodeAppendChild,\n  initializeCellSetColor,\n} from '../../components/sets/cell-set-utils';\nimport {\n  SETS_DATATYPE_CELL,\n} from '../../components/sets/constants';\nimport AbstractTwoStepLoader from '../AbstractTwoStepLoader';\nimport LoaderResult from '../LoaderResult';\n\nexport function dataToCellSetsTree(data, options) {\n  const [cellNames, cellSets] = data;\n  const cellSetsTree = treeInitialize(SETS_DATATYPE_CELL);\n  cellSets.forEach((cellSetIds, j) => {\n    const name = options[j].groupName;\n    let levelZeroNode = {\n      name,\n      children: [],\n    };\n    if (cellSetIds.length > 0 && Array.isArray(cellSetIds[0])) {\n      // Multi-level case.\n      const levelSets = new InternMap([], JSON.stringify);\n\n      cellNames.forEach((id, i) => {\n        const classes = cellSetIds.map(col => col[i]);\n        if (levelSets.has(classes)) {\n          levelSets.get(classes).push([id, null]);\n        } else {\n          levelSets.set(classes, [[id, null]]);\n        }\n      });\n\n      const levels = Array.from(levelSets.keys());\n\n      const getNextLevelNames = (levelSuffixes) => {\n        const nextLevelNames = Array.from(new Set(levelSuffixes.map(l => l[0])));\n        return nextLevelNames.sort((a, b) => a.localeCompare(b));\n      };\n\n      // Recursive function to create nodes.\n      const getNode = (parentLevelPrefixes, currLevelName, childLevelSuffixes) => {\n        const isLeaf = childLevelSuffixes.length === 0;\n        const resultNode = {\n          name: currLevelName,\n        };\n        if (isLeaf) {\n          // Base case: this is a leaf node.\n          resultNode.set = levelSets.get([...parentLevelPrefixes, currLevelName]);\n        } else {\n          // Are the remaining suffices redundant?\n          // Consider [\"Parent\", \"Child\", \"Child\"]\n          // where parentLevelPrefixes is [\"Parent\"] and currLevelName is \"Child\".\n          const shouldBeLeaf = (\n            childLevelSuffixes.length === 1\n            && currLevelName === childLevelSuffixes[0][childLevelSuffixes[0].length - 1]\n          );\n          if (shouldBeLeaf) {\n            resultNode.set = levelSets.get(\n              [...parentLevelPrefixes, currLevelName, ...childLevelSuffixes[0]],\n            );\n          } else {\n            // Recursion, run getNode() on each of the unique names at the next level.\n            const nextLevelNames = getNextLevelNames(childLevelSuffixes);\n\n            resultNode.children = nextLevelNames\n              .map(nextLevelName => getNode(\n                [...parentLevelPrefixes, currLevelName],\n                nextLevelName,\n                childLevelSuffixes\n                  .filter(l => l[0] === nextLevelName)\n                  .map(l => l.slice(1))\n                  .filter(v => v.length > 0),\n              ));\n          }\n        }\n        return resultNode;\n      };\n      // Start the recursion.\n      const levelOneNodes = getNextLevelNames(levels)\n        .map(levelOneName => getNode(\n          [],\n          levelOneName,\n          levels.filter(l => l[0] === levelOneName).map(l => l.slice(1)),\n        ));\n\n      levelZeroNode.children = levelOneNodes;\n    } else {\n      // Single-level case.\n      const uniqueCellSetIds = Array.from(new Set(cellSetIds)).sort();\n      const clusters = {};\n      // eslint-disable-next-line no-return-assign\n      uniqueCellSetIds.forEach(id => (clusters[id] = { name: id, set: [] }));\n      cellSetIds.forEach((id, i) => clusters[id].set.push([cellNames[i], null]));\n      Object.values(clusters).forEach(\n        // eslint-disable-next-line no-return-assign\n        cluster => (levelZeroNode = nodeAppendChild(levelZeroNode, cluster)),\n      );\n    }\n    cellSetsTree.tree.push(levelZeroNode);\n  });\n  return cellSetsTree;\n}\n\n/**\n * Loader for converting zarr into the cell sets json schema.\n */\nexport default class CellSetsZarrLoader extends AbstractTwoStepLoader {\n  loadCellSetIds() {\n    const { options } = this;\n    const cellSetZarrLocation = options.map(({ setName }) => setName);\n    return this.dataSource.loadObsVariables(cellSetZarrLocation);\n  }\n\n  async load() {\n    if (!this.cellSetsTree) {\n      const { options } = this;\n      this.cellSetsTree = Promise.all([\n        this.dataSource.loadObsIndex(),\n        this.loadCellSetIds(),\n      ]).then(data => dataToCellSetsTree(data, options));\n    }\n    const cellSetsTree = await this.cellSetsTree;\n    const coordinationValues = {};\n    const { tree } = cellSetsTree;\n    const newAutoSetSelectionParentName = tree[0].name;\n    // Create a list of set paths to initally select.\n    const newAutoSetSelections = tree[0].children.map(node => [\n      newAutoSetSelectionParentName,\n      node.name,\n    ]);\n    // Create a list of cell set objects with color mappings.\n    const newAutoSetColors = initializeCellSetColor(cellSetsTree, []);\n    coordinationValues.cellSetSelection = newAutoSetSelections;\n    coordinationValues.cellSetColor = newAutoSetColors;\n    return Promise.resolve(\n      new LoaderResult(cellSetsTree, null, coordinationValues),\n    );\n  }\n}\n","import LoaderResult from '../LoaderResult';\nimport AbstractTwoStepLoader from '../AbstractTwoStepLoader';\n\n/**\n * Loader for converting zarr into the cell json schema.\n */\nexport default class CellsZarrLoader extends AbstractTwoStepLoader {\n  /**\n   * Class method for loading spatial cell centroids.\n   * @returns {Promise} A promise for an array of tuples/triples for cell centroids.\n   */\n  loadXy() {\n    const { xy } = (this.options || {});\n    if (this.xy) {\n      return this.xy;\n    }\n    if (!this.xy && xy) {\n      this.xy = this.dataSource.loadNumeric(xy);\n      return this.xy;\n    }\n    this.xy = Promise.resolve(null);\n    return this.xy;\n  }\n\n  /**\n   * Class method for loading spatial cell polygons.\n   * @returns {Promise} A promise for an array of arrays for cell polygons.\n   */\n  loadPoly() {\n    const { poly } = (this.options || {});\n    if (this.poly) {\n      return this.poly;\n    }\n    if (!this.poly && poly) {\n      this.poly = this.dataSource.loadNumeric(poly);\n      return this.poly;\n    }\n    this.poly = Promise.resolve(null);\n    return this.poly;\n  }\n\n  /**\n   * Class method for loading various mappings, like UMAP or tSNE cooridnates.\n   * @returns {Promise} A promise for an array of tuples of coordinates.\n   */\n  loadMappings() {\n    const { mappings } = (this.options || {});\n    if (this.mappings) {\n      return this.mappings;\n    }\n    if (!this.mappings && mappings) {\n      this.mappings = Promise.all(\n        Object.keys(mappings).map(async (coordinationName) => {\n          const { key } = mappings[coordinationName];\n          return { coordinationName, arr: await this.dataSource.loadNumeric(key) };\n        }),\n      );\n      return this.mappings;\n    }\n    this.mappings = Promise.resolve(null);\n    return this.mappings;\n  }\n\n  /**\n   * Class method for loading factors, which are cell set ids.\n   * @returns {Promise} A promise for an array of an array of strings of ids,\n   * where subarray is a clustering/factor.\n   */\n  loadFactors() {\n    const { factors } = (this.options || {});\n    if (factors) {\n      return this.dataSource.loadObsVariables(factors);\n    }\n    return Promise.resolve(null);\n  }\n\n  async load() {\n    if (!this.cells) {\n      this.cells = Promise.all([\n        this.loadMappings(),\n        this.loadXy(),\n        this.loadPoly(),\n        this.dataSource.loadObsIndex(),\n        this.loadFactors(),\n      ]).then(([mappings, xy, poly, cellNames, factors]) => {\n        const cells = {};\n        cellNames.forEach((name, i) => {\n          cells[name] = {};\n          if (mappings) {\n            mappings.forEach(({ coordinationName, arr }) => {\n              if (!cells[name].mappings) {\n                cells[name].mappings = {};\n              }\n              const { dims } = this.options.mappings[coordinationName];\n              cells[name].mappings[coordinationName] = dims.map(\n                dim => arr.data[i][dim],\n              );\n            });\n          }\n          if (xy) {\n            cells[name].xy = xy.data[i];\n          }\n          if (poly) {\n            cells[name].poly = poly.data[i];\n          }\n          if (factors) {\n            const factorsObj = {};\n            factors.forEach(\n              // eslint-disable-next-line no-return-assign\n              (factor, j) => (factorsObj[this.options.factors[j].split('/').slice(-1)] = factor[i]),\n            );\n            cells[name].factors = factorsObj;\n          }\n        });\n        return cells;\n      });\n    }\n    return Promise.resolve(new LoaderResult(await this.cells, null));\n  }\n}\n","/* eslint-disable no-underscore-dangle */\nimport { openArray, slice } from 'zarr';\nimport { extent } from 'd3-array';\nimport LoaderResult from '../LoaderResult';\nimport AbstractTwoStepLoader from '../AbstractTwoStepLoader';\n\nconst normalize = (arr) => {\n  const [min, max] = extent(arr);\n  const ratio = 255 / (max - min);\n  const data = new Uint8Array(\n    arr.map(i => Math.floor((i - min) * ratio)),\n  );\n  return { data };\n};\n\nconst concatenateColumnVectors = (arr) => {\n  const numCols = arr.length;\n  const numRows = arr[0].length;\n  const { BYTES_PER_ELEMENT } = arr[0];\n  const view = new DataView(new ArrayBuffer(numCols * numRows * BYTES_PER_ELEMENT));\n  const TypedArray = arr[0].constructor;\n  const dtype = TypedArray.name.replace('Array', '');\n  for (let i = 0; i < numCols; i += 1) {\n    for (let j = 0; j < numRows; j += 1) {\n      view[`set${dtype}`](BYTES_PER_ELEMENT * (j * numCols + i), arr[i][j], true);\n    }\n  }\n  return new TypedArray(view.buffer);\n};\n\n/**\n * Loader for converting zarr into the a cell x gene matrix for use in Genes/Heatmap components.\n */\nexport default class MatrixZarrLoader extends AbstractTwoStepLoader {\n  /**\n   * Class method for loading the genes list from AnnData.var,\n   * filtered if a there is a `geneFilterZarr` present in the view config.\n   * @returns {Promise} A promise for the zarr array contianing the gene names.\n   */\n  async loadFilteredGeneNames() {\n    if (this.filteredGeneNames) {\n      return this.filteredGeneNames;\n    }\n    const { geneFilter: geneFilterZarr } = this.options;\n    const getFilterFn = async () => {\n      if (!geneFilterZarr) return data => data;\n      const geneFilter = await this.dataSource.getFlatArrDecompressed(geneFilterZarr);\n      return data => data.filter((_, j) => geneFilter[j]);\n    };\n\n    this.filteredGeneNames = Promise\n      .all([this.dataSource.loadVarIndex(), getFilterFn()])\n      .then(([data, filter]) => filter(data));\n    return this.filteredGeneNames;\n  }\n\n  /**\n   * Class method for loading a filtered subset of the genes list\n   * @param {String} filterZarr A location in the zarr store to fetch a boolean array from.\n   * @returns {Array} A list of filtered genes.\n   */\n  async _getFilteredGenes(filterZarr) {\n    const filter = await this.dataSource.getFlatArrDecompressed(filterZarr);\n    const geneNames = await this.loadFilteredGeneNames();\n    const genes = geneNames.filter((_, i) => filter[i]);\n    return genes;\n  }\n\n  /**\n   * Class method for getting the integer indices of a selection of genes within a list.\n   * @param {Array} selection A list of gene names.\n   * @returns {Array} A list of integer indices.\n   */\n  async _getGeneIndices(selection) {\n    const geneNames = await this.loadFilteredGeneNames();\n    return selection.map(gene => geneNames.indexOf(gene));\n  }\n\n  /**\n   * Class method for getting the number of cells i.e entries in `obs`.\n   * @returns {Number} The number of cells.\n   */\n  async _getNumCells() {\n    const cells = await this.dataSource.loadObsIndex();\n    return cells.length;\n  }\n\n  /**\n   * Class method for getting the number of genes i.e entries in `var`,\n   * potentially filtered by `genesFilter`.\n   * @returns {Number} The number of genes.\n   */\n  async _getNumGenes() {\n    const genes = await this.loadFilteredGeneNames();\n    return genes.length;\n  }\n\n  /**\n   * Class method for opening the sparse matrix arrays in zarr.\n   * @returns {Array} A list of promises pointing to the indptr, indices, and data of the matrix.\n   */\n  async _openSparseArrays() {\n    const { options: { matrix } } = this;\n    const { store } = this.dataSource;\n    if (this.sparseArrays) {\n      return this.sparseArrays;\n    }\n    this.sparseArrays = Promise.all(\n      ['indptr', 'indices', 'data'].map(name => openArray({ store, path: `${matrix}/${name}`, mode: 'r' })),\n    );\n    return this.sparseArrays;\n  }\n\n  /**\n   * Class method for loading a gene selection from a CSC matrix.\n   * @param {Array} selection A list of gene names whose data should be fetched.\n   * @returns {Promise} A Promise.all array of promises containing Uint8Arrays, one per selection.\n   */\n  async _loadCSCGeneSelection(selection) {\n    const indices = await this._getGeneIndices(selection);\n    const [indptrArr, indexArr, cellXGeneArr] = await this._openSparseArrays();\n    const numCells = await this._getNumCells();\n    const { data: cols } = await indptrArr.getRaw(null);\n    // If there is not change in the column indexer, then the data is all zeros\n    return Promise.all(\n      indices.map(async (index) => {\n        const startRowIndex = cols[index];\n        const endRowIndex = cols[index + 1];\n        const isColumnAllZeros = startRowIndex === endRowIndex;\n        const geneData = new Float32Array(numCells).fill(0);\n        if (isColumnAllZeros) {\n          return geneData;\n        }\n        const { data: rowIndices } = await indexArr.get([\n          slice(startRowIndex, endRowIndex),\n        ]);\n        const { data: cellXGeneData } = await cellXGeneArr.get([\n          slice(startRowIndex, endRowIndex),\n        ]);\n        for (let rowIndex = 0; rowIndex < rowIndices.length; rowIndex += 1) {\n          geneData[rowIndices[rowIndex]] = cellXGeneData[rowIndex];\n        }\n        return geneData;\n      }),\n    );\n  }\n\n  /**\n   * Class method for loading a gene selection from a CSR matrix.\n   * @param {Array} selection A list of gene names whose data should be fetched.\n   * @returns {Promise} A Promise.all array of promises containing Uint8Arrays, one per selection.\n   */\n  async _loadCSRGeneSelection(selection) {\n    const indices = await this._getGeneIndices(selection);\n    const numGenes = await this._getNumGenes();\n    const numCells = await this._getNumCells();\n    const cellXGene = await this._loadCSRSparseCellXGene();\n    return indices.map((index) => {\n      const geneData = new Float32Array(numCells).fill(0);\n      for (let i = 0; i < numCells; i += 1) {\n        geneData[i] = cellXGene[i * numGenes + index];\n      }\n      return geneData;\n    });\n  }\n\n  /**\n   * Class method for loading row oriented (CSR) sparse data from zarr.\n   *\n   * @returns {Object} A { data: Float32Array } contianing the CellXGene matrix.\n   */\n  async _loadCSRSparseCellXGene() {\n    if (this._sparseMatrix) {\n      return this._sparseMatrix;\n    }\n    this._sparseMatrix = this._openSparseArrays().then(async (sparseArrays) => {\n      const { options: { matrix } } = this;\n      const { shape } = await this.dataSource.getJson(`${matrix}/.zattrs`);\n      const [rows, cols, cellXGene] = await Promise.all(\n        sparseArrays.map(async (arr) => {\n          const { data } = await arr.getRaw(null);\n          return data;\n        }),\n      );\n      const cellXGeneMatrix = new Float32Array(shape[0] * shape[1]).fill(0);\n      let row = 0;\n      rows.forEach((_, index) => {\n        const rowStart = rows[index];\n        const rowEnd = rows[index + 1];\n        for (let i = rowStart; i < rowEnd; i += 1) {\n          const val = cellXGene[i];\n          const col = cols[i];\n          cellXGeneMatrix[row * shape[1] + col] = val;\n        }\n        row += 1;\n      });\n      return cellXGeneMatrix;\n    });\n    return this._sparseMatrix;\n  }\n\n  /**\n   * Class method for loading column oriented (CSC) sparse data from zarr.\n   * @returns {Object} A { data: Float32Array } contianing the CellXGene matrix.\n   */\n  async _loadCSCSparseCellXGene() {\n    if (this._sparseMatrix) {\n      return this._sparseMatrix;\n    }\n    this._sparseMatrix = this._openSparseArrays().then(async (sparseArrays) => {\n      const { options: { matrix } } = this;\n      const { shape } = await this.dataSource.getJson(`${matrix}/.zattrs`);\n      const [cols, rows, cellXGene] = await Promise.all(\n        sparseArrays.map(async (arr) => {\n          const { data } = await arr.getRaw(null);\n          return data;\n        }),\n      );\n      const cellXGeneMatrix = new Float32Array(shape[0] * shape[1]).fill(0);\n      let col = 0;\n      cols.forEach((_, index) => {\n        const colStart = cols[index];\n        const colEnd = cols[index + 1];\n        for (let i = colStart; i < colEnd; i += 1) {\n          const val = cellXGene[i];\n          const row = rows[i];\n          cellXGeneMatrix[row * shape[1] + col] = val;\n        }\n        col += 1;\n      });\n      return cellXGeneMatrix;\n    });\n    return this._sparseMatrix;\n  }\n\n  /**\n   * Class method for loading the cell x gene matrix.\n   * @returns {Promise} A promise for the zarr array contianing the cell x gene data.\n   */\n  async loadCellXGene() {\n    const { store } = this.dataSource;\n    if (this.cellXGene) {\n      return this.cellXGene;\n    }\n    const { options: { matrix, matrixGeneFilter } } = this;\n    if (!this._matrixZattrs) {\n      this._matrixZattrs = await this.dataSource.getJson(`${matrix}/.zattrs`);\n    }\n    const encodingType = this._matrixZattrs['encoding-type'];\n    if (!matrixGeneFilter) {\n      if (encodingType === 'csr_matrix') {\n        this.cellXGene = this._loadCSRSparseCellXGene().then(data => normalize(data));\n      } else if (encodingType === 'csc_matrix') {\n        this.cellXGene = this._loadCSCSparseCellXGene().then(data => normalize(data));\n      } else {\n        if (!this.arr) {\n          this.arr = openArray({ store, path: matrix, mode: 'r' });\n        }\n        this.cellXGene = this.arr.then(z => z.getRaw(null).then(({ data }) => normalize(data)));\n      }\n    } else if (encodingType === 'csr_matrix') {\n      this.cellXGene = this._loadCSRSparseCellXGene().then(\n        async (cellXGene) => {\n          const filteredGenes = await this._getFilteredGenes(matrixGeneFilter);\n          const numGenesFiltered = filteredGenes.length;\n          const geneNames = await this.loadFilteredGeneNames();\n          const numGenes = geneNames.length;\n          const numCells = await this._getNumCells();\n          const cellXGeneMatrixFiltered = new Float32Array(\n            numCells * numGenesFiltered,\n          ).fill(0);\n          for (let i = 0; i < numGenesFiltered; i += 1) {\n            const index = geneNames.indexOf(filteredGenes[i]);\n            for (let j = 0; j < numCells; j += 1) {\n              cellXGeneMatrixFiltered[j * numGenesFiltered + i] = cellXGene[j * numGenes + index];\n            }\n          }\n          return normalize(cellXGeneMatrixFiltered);\n        },\n      );\n    } else {\n      const genes = await this._getFilteredGenes(matrixGeneFilter);\n      this.cellXGene = this.loadGeneSelection({ selection: genes, shouldNormalize: false })\n        .then(({ data }) => (normalize(concatenateColumnVectors(data))));\n    }\n    return this.cellXGene;\n  }\n\n  /**\n   * Class method for loading a gene selection.\n   * @param {Object} args\n   * @param {Array} args.selection A list of gene names whose data should be fetched.\n   * @param {Boolean} args.shouldNormalize A list of gene names whose data should be fetched.\n   * @returns {Object} { data } containing an array of gene expression data.\n   */\n  async loadGeneSelection({ selection, shouldNormalize = true }) {\n    const { options: { matrix } } = this;\n    const { store } = this.dataSource;\n    if (!this._matrixZattrs) {\n      this._matrixZattrs = await this.dataSource.getJson(`${matrix}/.zattrs`);\n    }\n    const encodingType = this._matrixZattrs['encoding-type'];\n    let genes;\n    if (encodingType === 'csc_matrix') {\n      genes = await this._loadCSCGeneSelection(selection);\n    } else if (encodingType === 'csr_matrix') {\n      genes = await this._loadCSRGeneSelection(selection);\n    } else {\n      if (!this.arr) {\n        this.arr = openArray({ store, path: matrix, mode: 'r' });\n      }\n      const indices = await this._getGeneIndices(selection);\n      // We can index directly into a normal dense array zarr store via `get`.\n      genes = await Promise.all(\n        indices.map(index => this.arr.then(z => z.get([null, index])).then(({ data }) => data)),\n      );\n    }\n    return { data: genes.map(i => (shouldNormalize ? normalize(i).data : i)), url: null };\n  }\n\n  /**\n   * Class method for loading only attributes i.e rows and columns\n   * @param {Array} selection A list of gene names whose data should be fetched.\n   * @returns {Object} { data: { rows, cols }, url } containing row and col labels for the matrix.\n   */\n  loadAttrs() {\n    return Promise.all([this.dataSource.loadObsIndex(), this.loadFilteredGeneNames()])\n      .then((d) => {\n        const [cellNames, geneNames] = d;\n        const attrs = { rows: cellNames, cols: geneNames };\n        return {\n          data: attrs,\n          url: null,\n        };\n      });\n  }\n\n  load() {\n    return Promise.all([this.loadAttrs(), this.loadCellXGene()]).then(\n      async (d) => {\n        const [{ data: attrs }, cellXGene] = d;\n        const {\n          options: { matrixGeneFilter: matrixGeneFilterZarr },\n        } = this;\n        // In order to return the correct gene list with the heatmap data,\n        // we need to filter the columns of attrs so it matches the cellXGene data.\n        if (matrixGeneFilterZarr) {\n          const matrixGeneFilter = await this.dataSource.getFlatArrDecompressed(\n            matrixGeneFilterZarr,\n          );\n          attrs.cols = attrs.cols.filter((_, i) => matrixGeneFilter[i]);\n        }\n        return Promise.resolve(new LoaderResult([attrs, cellXGene], null));\n      },\n    );\n  }\n}\n","import CellSetsZarrLoader from './CellSetsZarrLoader';\nimport CellsZarrLoader from './CellsZarrLoader';\nimport MatrixZarrLoader from './MatrixZarrLoader';\n\nexport default { CellSetsZarrLoader, CellsZarrLoader, MatrixZarrLoader };\n","import AbstractTwoStepLoader from './AbstractTwoStepLoader';\nimport LoaderResult from './LoaderResult';\n\nexport default class GenomicProfilesZarrLoader extends AbstractTwoStepLoader {\n  loadAttrs() {\n    if (this.attrs) {\n      return this.attrs;\n    }\n    this.attrs = this.dataSource.getJson('.zattrs');\n    return this.attrs;\n  }\n\n  load() {\n    const { url } = this;\n    return this.loadAttrs()\n      .then(attrs => Promise.resolve(new LoaderResult(attrs, url)));\n  }\n}\n","import { HTTPStore, KeyError } from 'zarr';\n\n/**\n * A loader ancestor class containing a default constructor\n * and a stub for the required load() method.\n */\nexport default class ZarrDataSource {\n  constructor({ url, requestInit }) {\n    // TODO: We should probably add a way of allowing HEAD requests as well:\n    // https://github.com/gzuidhof/zarr.js/blob/375ce0c299469a970da6bb5653513564e25806bb/docs/getting-started/remote-data.md#stores\n    const supportedMethods = ['GET'];\n    this.store = new HTTPStore(url, {\n      supportedMethods, fetchOptions: requestInit,\n    });\n  }\n\n  /**\n   * Class method for decoding json from the store.\n   * @param {string} key A path to the item.\n   * @returns {Promise} This async function returns a promise\n   * that resolves to the parsed JSON if successful.\n   * @throws This may throw an error.\n   */\n  async getJson(key) {\n    try {\n      const buf = await this.store.getItem(key);\n      const text = new TextDecoder('utf-8').decode(buf);\n      return JSON.parse(text);\n    } catch (err) {\n      if (err instanceof KeyError) {\n        return {};\n      }\n      throw err;\n    }\n  }\n}\n","/* eslint-disable no-underscore-dangle */\nimport { openArray } from 'zarr';\nimport range from 'lodash/range';\nimport ZarrDataSource from './ZarrDataSource';\n\nconst readFloat32FromUint8 = (bytes) => {\n  if (bytes.length !== 4) {\n    throw new Error('readFloat32 only takes in length 4 byte buffers');\n  }\n  return new Int32Array(bytes.buffer)[0];\n};\n\nconst HEADER_LENGTH = 4;\n\n/**\n   * Method for decoding text arrays from zarr.\n   * Largerly a port of https://github.com/zarr-developers/numcodecs/blob/2c1aff98e965c3c4747d9881d8b8d4aad91adb3a/numcodecs/vlen.pyx#L135-L178\n   * @returns {string[]} An array of strings.\n   */\nfunction parseVlenUtf8(buffer) {\n  const decoder = new TextDecoder();\n  let data = 0;\n  const dataEnd = data + buffer.length;\n  const length = readFloat32FromUint8(buffer.slice(data, HEADER_LENGTH));\n  if (buffer.length < HEADER_LENGTH) {\n    throw new Error('corrupt buffer, missing or truncated header');\n  }\n  data += HEADER_LENGTH;\n  const output = new Array(length);\n  for (let i = 0; i < length; i += 1) {\n    if (data + 4 > dataEnd) {\n      throw new Error('corrupt buffer, data seem truncated');\n    }\n    const l = readFloat32FromUint8(buffer.slice(data, data + 4));\n    data += 4;\n    if (data + l > dataEnd) {\n      throw new Error('corrupt buffer, data seem truncated');\n    }\n    output[i] = decoder.decode(buffer.slice(data, data + l));\n    data += l;\n  }\n  return output;\n}\n\n/**\n * A base AnnData loader which has all shared methods for more comlpex laoders,\n * like loading cell names and ids. It inherits from AbstractLoader.\n */\nexport default class AnnDataSource extends ZarrDataSource {\n  constructor(...args) {\n    super(...args);\n    /** @type {Map<string, Promise<string[]>} */\n    this.obsPromises = new Map();\n  }\n\n  /**\n   * Class method for loading obs variables.\n   * Takes the location as an argument because this is shared across objects,\n   * which have different ways of specifying location.\n   * @param {string[]} obsPaths An array of strings like \"obs/leiden\" or \"obs/bulk_labels.\"\n   * @returns {Promise} A promise for an array of ids with one per cell.\n   */\n  loadObsVariables(obsPaths) {\n    const obsPromises = obsPaths.map((obsPath) => {\n      const getObsCol = (obsCol) => {\n        if (!this.obsPromises.has(obsCol)) {\n          const obsPromise = this._loadObsVariable(obsCol).catch((err) => {\n            // clear from cache if promise rejects\n            this.obsPromises.delete(obsCol);\n            // propagate error\n            throw err;\n          });\n          this.obsPromises.set(obsCol, obsPromise);\n        }\n        return this.obsPromises.get(obsCol);\n      };\n      if (Array.isArray(obsPath)) {\n        return Promise.resolve(Promise.all(obsPath.map(getObsCol)));\n      }\n      return getObsCol(obsPath);\n    });\n    return Promise.all(obsPromises);\n  }\n\n  async _loadObsVariable(obs) {\n    const { store } = this;\n    const { categories } = await this.getJson(`${obs}/.zattrs`);\n    let categoriesValues;\n    if (categories) {\n      const { dtype } = await this.getJson(`/obs/${categories}/.zarray`);\n      if (dtype === '|O') {\n        categoriesValues = await this.getFlatArrDecompressed(`/obs/${categories}`);\n      }\n    }\n    const obsArr = await openArray({ store, path: obs, mode: 'r' });\n    const obsValues = await obsArr.get();\n    const { data } = obsValues;\n    const mappedObsValues = Array.from(data).map(\n      i => (!categoriesValues ? String(i) : categoriesValues[i]),\n    );\n    return mappedObsValues;\n  }\n\n  /**\n   * Class method for loading general numeric arrays.\n   * @param {string} path A string like obsm.X_pca.\n   * @returns {Promise} A promise for a zarr array containing the data.\n   */\n  loadNumeric(path) {\n    const { store } = this;\n    return openArray({\n      store,\n      path,\n      mode: 'r',\n    }).then(arr => arr.get());\n  }\n\n  /**\n   * A common method for loading flattened data\n   * i.e that which has shape [n] where n is a natural number.\n   * @param {string} path A path to a flat array location, like obs/_index\n   * @returns {Array} The data from the zarr array.\n   */\n  getFlatArrDecompressed(path) {\n    const { store } = this;\n    return openArray({\n      store,\n      path,\n      mode: 'r',\n    }).then(async (z) => {\n      let data;\n      const parseAndMergeTextBytes = (dbytes) => {\n        const text = parseVlenUtf8(dbytes);\n        if (!data) {\n          data = text;\n        } else {\n          data = data.concat(text);\n        }\n      };\n      const mergeBytes = (dbytes) => {\n        if (!data) {\n          data = dbytes;\n        } else {\n          const tmp = new Uint8Array(dbytes.buffer.byteLength + data.buffer.byteLength);\n          tmp.set(new Uint8Array(data.buffer), 0);\n          tmp.set(dbytes, data.buffer.byteLength);\n          data = tmp;\n        }\n      };\n      const numRequests = Math.ceil(z.meta.shape[0] / z.meta.chunks[0]);\n      const requests = range(numRequests).map(async item => store.getItem(`${z.keyPrefix}${String(item)}`)\n        .then(buf => z.compressor.then(compressor => compressor.decode(buf))));\n      const dbytesArr = await Promise.all(requests);\n      dbytesArr.forEach((dbytes) => {\n        // Use vlenutf-8 decoding if necessary and merge `data` as a normal array.\n        if (Array.isArray(z.meta.filters) && z.meta.filters[0].id === 'vlen-utf8') {\n          parseAndMergeTextBytes(dbytes);\n          // Otherwise just merge the bytes as a typed array.\n        } else {\n          mergeBytes(dbytes);\n        }\n      });\n      const {\n        meta: {\n          shape: [length],\n        },\n      } = z;\n      // truncate the filled in values\n      return data.slice(0, length);\n    });\n  }\n\n  /**\n   * Class method for loading the obs index.\n   * @returns {Promise} An promise for a zarr array containing the indices.\n   */\n  loadObsIndex() {\n    if (this.obsIndex) {\n      return this.obsIndex;\n    }\n    this.obsIndex = this.getJson('obs/.zattrs')\n      .then(({ _index }) => this.getFlatArrDecompressed(`/obs/${_index}`));\n    return this.obsIndex;\n  }\n\n  /**\n   * Class method for loading the var index.\n   * @returns {Promise} An promise for a zarr array containing the indices.\n   */\n  loadVarIndex() {\n    if (this.varIndex) {\n      return this.varIndex;\n    }\n    this.varIndex = this.getJson('var/.zattrs')\n      .then(({ _index }) => this.getFlatArrDecompressed(`/var/${_index}`));\n    return this.varIndex;\n  }\n}\n","import AbstractLoaderError from './AbstractLoaderError';\n\nexport default class DataSourceFetchError extends AbstractLoaderError {\n  constructor(source, url, headers) {\n    super(`${source} Error HTTP Status fetching from ${url}`);\n    this.source = source;\n    this.url = url;\n    this.headers = headers;\n  }\n\n  warnInConsole() {\n    const { source, url, headers } = this;\n    console.warn(`${source} failed to fetch from ${url} with headers ${headers}`);\n  }\n}\n","/* eslint-disable no-underscore-dangle */\nimport DataSourceFetchError from '../errors/DataSourceFetchError';\n\nexport default class JsonSource {\n  constructor({ url, requestInit }) {\n    this.url = url;\n    this.requestInit = requestInit;\n  }\n\n  get data() {\n    if (this._data) return this._data;\n    this._data = fetch(this.url, this.requestInit).then((response) => {\n      if (!response.ok) {\n        return Promise.reject(new DataSourceFetchError('JsonSource', this.url, response.headers));\n      }\n      return response.json();\n    // eslint-disable-next-line no-console\n    }).catch(() => Promise.reject(new DataSourceFetchError('JsonSource', this.url, {})));\n    return this._data;\n  }\n}\n","import JsonLoader from './JsonLoader';\nimport MatrixZarrLoader from './MatrixZarrLoader';\nimport GenesJsonAsMatrixZarrLoader from './GenesJsonAsMatrixZarrLoader';\nimport ClustersJsonAsMatrixZarrLoader from './ClustersJsonAsMatrixZarrLoader';\nimport RasterJsonLoader from './RasterJsonLoader';\nimport OmeZarrLoader from './OmeZarrLoader';\nimport CellSetsJsonLoader from './CellSetsJsonLoader';\nimport AnnDataLoaders from './anndata-loaders';\nimport GenomicProfilesZarrLoader from './GenomicProfilesZarrLoader';\n\nimport { AnnDataSource, ZarrDataSource, JsonSource } from './data-sources';\n\nconst ANNDATA = 'anndata';\n\nconst fileTypeToLoaderAndSource = {\n  'expression-matrix.zarr': [ZarrDataSource, MatrixZarrLoader],\n  'clusters.json': [JsonSource, ClustersJsonAsMatrixZarrLoader],\n  'genes.json': [JsonSource, GenesJsonAsMatrixZarrLoader],\n  'cells.json': [JsonSource, JsonLoader],\n  'molecules.json': [JsonSource, JsonLoader],\n  'neighborhoods.json': [JsonSource, JsonLoader],\n  'raster.json': [JsonSource, RasterJsonLoader],\n  'raster.ome-zarr': [ZarrDataSource, OmeZarrLoader],\n  'cell-sets.json': [JsonSource, CellSetsJsonLoader],\n  [`${ANNDATA}-cell-sets.zarr`]: [AnnDataSource, AnnDataLoaders.CellSetsZarrLoader],\n  [`${ANNDATA}-cells.zarr`]: [AnnDataSource, AnnDataLoaders.CellsZarrLoader],\n  [`${ANNDATA}-expression-matrix.zarr`]: [AnnDataSource, AnnDataLoaders.MatrixZarrLoader],\n  'genomic-profiles.zarr': [ZarrDataSource, GenomicProfilesZarrLoader],\n};\n\nexport function getSourceAndLoaderFromFileType(type) {\n  return fileTypeToLoaderAndSource[type] || [JsonSource, JsonLoader];\n}\n","import {\n  useState, useEffect, useRef,\n} from 'react';\nimport { getSourceAndLoaderFromFileType } from '../loaders/types';\n\n/**\n * Return the bottom coordinate of the layout.\n * https://github.com/STRML/react-grid-layout/blob/20dac73f91274526034c00968b5bedb9c2ed36b9/lib/utils.js#L82\n * @param  {array} layout react-grid-layout layout array.\n * @returns {number} Bottom coordinate.\n */\nfunction getNumRows(layout) {\n  let max = 0;\n  let bottomY;\n  // eslint-disable-next-line no-plusplus\n  for (let i = 0, len = layout.length; i < len; i++) {\n    bottomY = layout[i].y + layout[i].h;\n    if (bottomY > max) max = bottomY;\n  }\n  return max;\n}\n\n/**\n * Compute the row height based on the container height, number of rows,\n * and margin/padding. Basically the reverse of the react-grid-layout's\n * `.containerHeight()` function.\n * https://github.com/STRML/react-grid-layout/blob/83251e5e682abfa3252ff89d4bacf47fdc1f4270/lib/ReactGridLayout.jsx#L223\n * @param {number} containerHeight The height of the .vitessce-container element.\n * @param {number} numRows The number of rows in the layout.\n * @param {number} margin The margin value that will be passed to VitessceGrid.\n * @param {number} padding The padding value that will be passed to VitessceGrid.\n * @returns {number} The new row height value.\n */\nfunction getRowHeight(containerHeight, numRows, margin, padding) {\n  const effectiveContainerHeight = containerHeight - 2 * padding - (numRows - 1) * margin;\n  return effectiveContainerHeight / numRows;\n}\n\nexport function useRowHeight(config, initialRowHeight, height, margin, padding) {\n  const [containerHeight, setContainerHeight] = useState(height);\n  const [rowHeight, setRowHeight] = useState(initialRowHeight);\n  const containerRef = useRef();\n\n  // Detect when the `config` or `containerHeight` variables\n  // have changed, and update `rowHeight` in response.\n  useEffect(() => {\n    const numRows = getNumRows(config.layout);\n    const newRowHeight = getRowHeight(containerHeight, numRows, margin, padding);\n    setRowHeight(newRowHeight);\n  }, [containerHeight, config, margin, padding]);\n\n  // Update the `containerHeight` state when the `height` prop has changed.\n  useEffect(() => {\n    if (height !== null && height !== undefined) {\n      setContainerHeight(height);\n    }\n  }, [height]);\n\n  // If no height prop has been provided, set the `containerHeight`\n  // using height of the `.vitessce-container` element.\n  // Check the container element height whenever the window has been\n  // resized, as it may change if `.vitessce-container` should be\n  // sized relative to its parent (and by extension, potentially the window).\n  useEffect(() => {\n    if (height !== null && height !== undefined) {\n      // eslint will complain if the return value is inconsistent,\n      // so return a no-op function.\n      return () => {};\n    }\n    function onWindowResize() {\n      if (!containerRef.current) return;\n      const containerRect = containerRef.current.getBoundingClientRect();\n      setContainerHeight(containerRect.height);\n    }\n    window.addEventListener('resize', onWindowResize);\n    onWindowResize();\n    return () => {\n      window.removeEventListener('resize', onWindowResize);\n    };\n  }, [containerRef, height]);\n\n\n  return [rowHeight, containerRef];\n}\n\n/**\n * Create a mapping from dataset ID to loader objects by data type.\n * @param {object[]} datasets The datasets array from the view config.\n * @param {string} configDescription The top-level description in the\n * view config.\n * @returns {object} Mapping from dataset ID to data type to loader\n * instance.\n */\nexport function createLoaders(datasets, configDescription) {\n  const result = {};\n  const dataSources = {};\n  datasets.forEach((dataset) => {\n    const datasetLoaders = {\n      name: dataset.name,\n      description: dataset.description || configDescription,\n      loaders: {},\n    };\n    dataset.files.forEach((file) => {\n      const [DataSourceClass, LoaderClass] = getSourceAndLoaderFromFileType(file.fileType);\n      // Create _one_ DataSourceClass instance per URL. Derived loaders share this object.\n      const { url, options, requestInit } = file;\n      const fileId = url || JSON.stringify(options);\n      if (!(fileId in dataSources)) {\n        dataSources[fileId] = new DataSourceClass({ url, requestInit });\n      }\n      const loader = new LoaderClass(dataSources[fileId], file);\n      datasetLoaders.loaders[file.type] = loader;\n    });\n    result[dataset.uid] = datasetLoaders;\n  });\n  return result;\n}\n","import React, {\n  useEffect,\n} from 'react';\nimport { VitessceGridLayout } from './vitessce-grid-layout';\nimport { useRowHeight, createLoaders } from './vitessce-grid-utils';\nimport {\n  useViewConfigStoreApi,\n  useSetViewConfig,\n  useSetLoaders,\n  useEmitGridResize,\n  useRemoveComponent,\n  useChangeLayout,\n  useLayout,\n} from './state/hooks';\n\nconst padding = 10;\nconst margin = 5;\n\n/**\n * The wrapper for the VitessceGrid and LoadingIndicator components.\n * @param {object} props\n * @param {number} props.rowHeight The height of each grid row. Optional.\n * @param {object} props.config The view config.\n * @param {function} props.getComponent A function that maps component names to their\n * React counterparts.\n * @param {string} props.theme The theme name.\n * @param {number} props.height Total height for grid. Optional.\n * @param {function} props.onWarn A callback for warning messages. Optional.\n */\nexport default function VitessceGrid(props) {\n  const {\n    rowHeight: initialRowHeight,\n    config,\n    getComponent,\n    theme,\n    height,\n  } = props;\n\n  const [rowHeight, containerRef] = useRowHeight(config, initialRowHeight, height, margin, padding);\n  const onResize = useEmitGridResize();\n\n  // When the row height has changed, publish a GRID_RESIZE event.\n  useEffect(() => {\n    onResize();\n  }, [rowHeight, onResize]);\n\n  const viewConfigStoreApi = useViewConfigStoreApi();\n  const setViewConfig = useSetViewConfig(viewConfigStoreApi);\n  const setLoaders = useSetLoaders();\n  const removeComponent = useRemoveComponent();\n  const changeLayout = useChangeLayout();\n  const layout = useLayout();\n\n  // Update the view config and loaders in the global state.\n  useEffect(() => {\n    if (config) {\n      setViewConfig(config);\n      const loaders = createLoaders(config.datasets, config.description);\n      setLoaders(loaders);\n    } else {\n      // No config found, so clear the loaders.\n      setLoaders({});\n    }\n  }, [config, setViewConfig, setLoaders]);\n\n  return (\n    <div\n      ref={containerRef}\n      className={`vitessce-container vitessce-theme-${theme}`}\n    >\n      {layout && (\n        <VitessceGridLayout\n          layout={layout}\n          height={height}\n          rowHeight={rowHeight}\n          theme={theme}\n          getComponent={getComponent}\n          draggableHandle=\".title\"\n          margin={margin}\n          padding={padding}\n          onRemoveComponent={removeComponent}\n          onLayoutChange={changeLayout}\n          reactGridLayoutProps={{\n            onResize,\n            onResizeStop: onResize,\n          }}\n        />\n      )}\n    </div>\n  );\n}\n","// Exported because used by the cypress tests: They route API requests to the fixtures instead.\nexport const urlPrefix = 'https://s3.amazonaws.com/vitessce-data/0.0.31/master_release';\n\nfunction makeLayerNameToConfig(datasetPrefix) {\n  return name => ({\n    name,\n    type: name.toUpperCase(),\n    fileType: `${name}.json`,\n    url: `${urlPrefix}/${datasetPrefix}/${datasetPrefix}.${name}.json`,\n  });\n}\n\nconst linnarssonLayerNames = [\n  'cells',\n  'cell-sets',\n  'raster',\n  'molecules',\n  'neighborhoods',\n];\nconst linnarssonDescription = 'Spatial organization of the somatosensory cortex revealed by cyclic smFISH';\nconst linnarssonBase = {\n  description: linnarssonDescription,\n  layers: [\n    ...linnarssonLayerNames.map(makeLayerNameToConfig('linnarsson')),\n    {\n      // TODO: remove this temporary override when the\n      // clusters.json file has been converted to expression-matrix.zarr format.\n      ...makeLayerNameToConfig('linnarsson')('clusters'),\n      type: 'EXPRESSION-MATRIX',\n    },\n  ],\n};\nconst linnarssonBaseNoClusters = {\n  description: linnarssonDescription,\n  layers: linnarssonLayerNames.filter(name => name !== 'clusters')\n    .map(makeLayerNameToConfig('linnarsson')),\n};\n\nconst driesDescription = 'Giotto, a pipeline for integrative analysis and visualization of single-cell spatial transcriptomic data';\nconst driesBase = {\n  description: driesDescription,\n  layers: [\n    'cells',\n    'cell-sets',\n  ].map(makeLayerNameToConfig('dries')),\n};\n\nconst wangDescription = 'Multiplexed imaging of high-density libraries of RNAs with MERFISH and expansion microscopy';\nconst wangBase = {\n  description: wangDescription,\n  layers: [\n    ...['cells', 'molecules'].map(makeLayerNameToConfig('wang')),\n    {\n      // TODO: remove this temporary override when the\n      // genes.json file has been converted to expression-matrix.zarr format.\n      ...makeLayerNameToConfig('wang')('genes'),\n      name: 'expression-matrix',\n      type: 'EXPRESSION-MATRIX',\n    },\n  ],\n};\n\nconst vanderbiltDescription = 'High Bit Depth (uint16) Multiplex Immunofluorescence Imaging';\nconst vanderbiltBase = {\n  description: vanderbiltDescription,\n  layers: [\n    'raster',\n  ].map(makeLayerNameToConfig('spraggins')),\n};\n\n/* eslint-disable object-property-newline */\n/* eslint-disable object-curly-newline */\n// Note that the ordering of the components in the staticLayout\n// can affect the z-index of plot tooltips due to the\n// resulting ordering of elements in the DOM.\nexport const configs = {\n  'just-scatter': {\n    version: '0.1.0',\n    public: false,\n    layers: [\n      {\n        name: 'cells',\n        type: 'CELLS',\n        fileType: 'cells.json',\n        url: `${urlPrefix}/linnarsson/linnarsson.cells.json`,\n        requestInit: {\n          // Where the client checks that the value is from an enumeration,\n          // I've chosen one of the allowed values,\n          // but nothing on our S3 actually needs any of these.\n          method: 'GET',\n          headers: { 'x-foo': 'FAKE' },\n          mode: 'cors',\n          credentials: 'omit',\n          cache: 'no-store',\n          redirect: 'error',\n          referrer: 'FAKE',\n          integrity: 'FAKE',\n        },\n      },\n    ],\n    name: 'Linnarsson, just scatterplot',\n    staticLayout: [\n      {\n        component: 'scatterplot',\n        props: {\n          mapping: 't-SNE',\n          view: {\n            zoom: 0.75,\n            target: [0, 0, 0],\n          },\n        },\n        x: 0, y: 0, w: 12, h: 2,\n      },\n    ],\n  },\n  'just-scatter-expression': {\n    version: '0.1.0',\n    public: false,\n    layers: [\n      {\n        name: 'cells',\n        type: 'CELLS',\n        url: 'https://s3.amazonaws.com/vitessce-data/0.0.20/master_release/linnarsson/linnarsson.cells.json',\n      },\n      {\n        name: 'genes',\n        type: 'GENES',\n        url: 'https://s3.amazonaws.com/vitessce-data/0.0.20/master_release/linnarsson/linnarsson.genes.json',\n      },\n    ],\n    name: 'Linnarsson, just scatterplot and expression',\n    staticLayout: [\n      {\n        component: 'scatterplot',\n        props: {\n          mapping: 't-SNE',\n          view: {\n            zoom: 0.75,\n            target: [0, 0, 0],\n          },\n        },\n        x: 0, y: 0, w: 8, h: 2,\n      },\n      {\n        component: 'genes',\n        x: 8, y: 2, w: 4, h: 2,\n      },\n    ],\n  },\n  'linnarsson-2018': {\n    name: 'Linnarsson',\n    version: '1.0.0',\n    description: linnarssonDescription,\n    public: true,\n    datasets: [\n      {\n        uid: 'linnarsson-2018',\n        name: 'Linnarsson 2018',\n        description: `Linnarsson: ${linnarssonDescription}`,\n        files: linnarssonBase.layers.map(file => ({\n          type: file.type.toLowerCase(),\n          fileType: file.fileType,\n          url: file.url,\n        })),\n      },\n    ],\n    initStrategy: 'auto',\n    coordinationSpace: {\n      embeddingZoom: {\n        PCA: 0,\n        TSNE: 0.75,\n      },\n      embeddingType: {\n        PCA: 'PCA',\n        TSNE: 't-SNE',\n      },\n      spatialZoom: {\n        A: -5.5,\n      },\n      spatialTargetX: {\n        A: 16000,\n      },\n      spatialTargetY: {\n        A: 20000,\n      },\n    },\n    layout: [\n      { component: 'description',\n        x: 0, y: 0, w: 2, h: 1 },\n      { component: 'layerController',\n        x: 0, y: 1, w: 2, h: 4,\n      },\n      { component: 'status',\n        x: 0, y: 5, w: 2, h: 1 },\n      { component: 'spatial',\n        coordinationScopes: {\n          spatialZoom: 'A',\n          spatialTargetX: 'A',\n          spatialTargetY: 'A',\n        },\n        x: 2, y: 0, w: 4, h: 4 },\n      { component: 'genes',\n        x: 9, y: 0, w: 3, h: 2 },\n      { component: 'cellSets',\n        x: 9, y: 3, w: 3, h: 2 },\n      { component: 'heatmap',\n        props: {\n          transpose: true,\n        },\n        x: 2, y: 4, w: 5, h: 2 },\n      { component: 'cellSetExpression',\n        x: 7, y: 4, w: 3, h: 2 },\n      { component: 'expressionHistogram',\n        x: 10, y: 4, w: 2, h: 2 },\n      { component: 'scatterplot',\n        coordinationScopes: {\n          embeddingType: 'PCA',\n          embeddingZoom: 'PCA',\n        },\n        x: 6, y: 0, w: 3, h: 2 },\n      { component: 'scatterplot',\n        coordinationScopes: {\n          embeddingType: 'TSNE',\n          embeddingZoom: 'TSNE',\n        },\n        x: 6, y: 2, w: 3, h: 2 },\n    ],\n  },\n  'linnarsson-2018-two-spatial': {\n    ...linnarssonBase,\n    version: '0.1.0',\n    name: 'Linnarsson (two spatial)',\n    staticLayout: [\n      { component: 'spatial',\n        props: {\n          view: {\n            zoom: -8,\n            target: [18000, 18000, 0],\n          },\n        },\n        x: 0, y: 0, w: 5, h: 2 },\n      { component: 'scatterplot',\n        props: { mapping: 't-SNE' },\n        x: 0, y: 2, w: 5, h: 2 },\n      { component: 'spatial',\n        props: {\n          view: {\n            zoom: -6,\n            target: [18000, 18000, 0],\n          },\n        },\n        x: 5, y: 0, w: 5, h: 2 },\n      { component: 'scatterplot',\n        props: { mapping: 'PCA' },\n        x: 5, y: 2, w: 5, h: 2 },\n      { component: 'genes',\n        x: 10, y: 2, w: 2, h: 2 },\n      { component: 'heatmap',\n        x: 0, y: 4, w: 12 },\n    ],\n  },\n  'linnarsson-2018-just-spatial': {\n    ...linnarssonBaseNoClusters,\n    version: '0.1.0',\n    name: 'Linnarsson (just spatial)',\n    staticLayout: [\n      { component: 'spatial',\n        props: {\n          view: {\n            zoom: -6.5,\n            target: [18000, 18000, 0],\n          },\n        },\n        x: 0, y: 0, w: 10, h: 2 },\n      { component: 'genes',\n        x: 10, y: 1, w: 2, h: 1 },\n    ],\n  },\n  'linnarsson-2018-static': {\n    ...linnarssonBase,\n    version: '0.1.0',\n    name: 'Linnarsson (static layout)',\n    staticLayout: [\n      { component: 'description',\n        props: {\n          description: `Linnarsson (static layout): ${linnarssonDescription}`,\n        },\n        x: 0, y: 0, w: 3, h: 1 },\n      { component: 'scatterplot',\n        props: { mapping: 't-SNE' },\n        x: 0, y: 2, w: 3, h: 2 },\n      { component: 'spatial',\n        props: {\n          view: {\n            zoom: -6.5,\n            target: [18000, 18000, 0],\n          },\n        },\n        x: 3, y: 0, w: 6, h: 4 },\n      { component: 'genes',\n        x: 9, y: 2, w: 3, h: 2 },\n      { component: 'heatmap',\n        x: 0, y: 4, w: 12, h: 1 },\n    ],\n  },\n  'linnarsson-2018-dozen': {\n    ...linnarssonBase,\n    version: '0.1.0',\n    name: 'Linnarsson (static layout, redundant components for performance testing)',\n    staticLayout: [\n      { component: 'spatial',\n        props: {\n          view: {\n            zoom: -6.5,\n            target: [18000, 18000, 0],\n          },\n        },\n        x: 0, y: 0, w: 4, h: 1 },\n      { component: 'spatial',\n        props: {\n          view: {\n            zoom: -6.5,\n            target: [18000, 18000, 0],\n          },\n        },\n        x: 0, y: 1, w: 4, h: 1 },\n      { component: 'spatial',\n        props: {\n          view: {\n            zoom: -6.5,\n            target: [18000, 18000, 0],\n          },\n        },\n        x: 4, y: 0, w: 4, h: 1 },\n      { component: 'spatial',\n        props: {\n          view: {\n            zoom: -6.5,\n            target: [18000, 18000, 0],\n          },\n        },\n        x: 4, y: 1, w: 4, h: 1 },\n      { component: 'scatterplot',\n        props: { mapping: 't-SNE' },\n        x: 0, y: 2, w: 4, h: 1 },\n      { component: 'scatterplot',\n        props: { mapping: 't-SNE' },\n        x: 0, y: 3, w: 4, h: 1 },\n      { component: 'scatterplot',\n        props: { mapping: 't-SNE' },\n        x: 0, y: 4, w: 4, h: 1 },\n      { component: 'scatterplot',\n        props: { mapping: 't-SNE' },\n        x: 0, y: 5, w: 4, h: 1 },\n      { component: 'scatterplot',\n        props: { mapping: 'PCA' },\n        x: 4, y: 2, w: 4, h: 1 },\n      { component: 'scatterplot',\n        props: { mapping: 'PCA' },\n        x: 4, y: 3, w: 4, h: 1 },\n      { component: 'scatterplot',\n        props: { mapping: 'PCA' },\n        x: 4, y: 4, w: 4, h: 1 },\n      { component: 'scatterplot',\n        props: { mapping: 'PCA' },\n        x: 4, y: 5, w: 4, h: 1 },\n      { component: 'genes',\n        x: 8, y: 2, w: 4, h: 2 },\n      { component: 'heatmap',\n        x: 8, y: 4, w: 4, h: 2 },\n    ],\n  },\n  'dries-2019': {\n    name: 'Dries',\n    version: '1.0.0',\n    description: driesDescription,\n    public: true,\n    datasets: [\n      {\n        uid: 'dries-2019',\n        name: 'Dries 2019',\n        files: driesBase.layers.map(file => ({\n          type: file.type.toLowerCase(),\n          fileType: file.fileType,\n          url: file.url,\n        })),\n      },\n    ],\n    initStrategy: 'auto',\n    coordinationSpace: {\n      embeddingType: {\n        TSNE: 't-SNE',\n        UMAP: 'UMAP',\n      },\n      embeddingCellSetPolygonsVisible: {\n        A: false,\n      },\n      embeddingCellSetLabelsVisible: {\n        A: true,\n      },\n      embeddingCellSetLabelSize: {\n        A: 16,\n      },\n      embeddingCellRadius: {\n        A: 1,\n      },\n      embeddingZoom: {\n        TSNE: 3,\n        UMAP: 3,\n      },\n      spatialZoom: {\n        A: -4.4,\n      },\n      spatialTargetX: {\n        A: 3800,\n      },\n      spatialTargetY: {\n        A: -900,\n      },\n    },\n    layout: [\n      { component: 'description',\n        x: 9, y: 0, w: 3, h: 2 },\n      { component: 'status',\n        x: 9, y: 2, w: 3, h: 2 },\n      { component: 'cellSets',\n        x: 9, y: 4, w: 3, h: 4 },\n      { component: 'cellSetSizes',\n        x: 5, y: 4, w: 4, h: 4 },\n      { component: 'scatterplot',\n        coordinationScopes: {\n          embeddingType: 'TSNE',\n          embeddingZoom: 'TSNE',\n          embeddingCellSetLabelsVisible: 'A',\n          embeddingCellSetLabelSize: 'A',\n          embeddingCellSetPolygonsVisible: 'A',\n          embeddingCellRadius: 'A',\n        },\n        x: 0, y: 2, w: 5, h: 4 },\n      { component: 'spatial',\n        props: {\n          cellRadius: 50,\n        },\n        coordinationScopes: {\n          spatialZoom: 'A',\n          spatialTargetX: 'A',\n          spatialTargetY: 'A',\n        },\n        x: 5, y: 0, w: 4, h: 4 },\n      { component: 'scatterplot',\n        coordinationScopes: {\n          embeddingType: 'UMAP',\n          embeddingZoom: 'UMAP',\n          embeddingCellSetLabelsVisible: 'A',\n          embeddingCellSetLabelSize: 'A',\n          embeddingCellSetPolygonsVisible: 'A',\n          embeddingCellRadius: 'A',\n        },\n        x: 0, y: 0, w: 5, h: 4 },\n    ],\n  },\n  'wang-2019': {\n    name: 'Wang',\n    version: '1.0.0',\n    description: wangDescription,\n    public: true,\n    datasets: [\n      {\n        uid: 'wang-2019',\n        name: 'Wang 2019',\n        files: wangBase.layers.map(file => ({\n          type: file.type.toLowerCase(),\n          fileType: file.fileType,\n          url: file.url,\n        })),\n      },\n    ],\n    initStrategy: 'auto',\n    coordinationSpace: {\n      spatialZoom: {\n        A: -1,\n      },\n      spatialLayers: {\n        A: [\n          {\n            type: 'molecules', radius: 2, opacity: 1, visible: true,\n          },\n          {\n            type: 'cells', opacity: 1, radius: 50, visible: true, stroked: false,\n          },\n        ],\n      },\n    },\n    layout: [\n      { component: 'spatial',\n        coordinationScopes: {\n          spatialZoom: 'A',\n          spatialLayers: 'A',\n        },\n        props: {},\n        x: 0, y: 0, w: 10, h: 2 },\n      { component: 'genes',\n        x: 10, y: 0, w: 2, h: 4 },\n      { component: 'expressionHistogram',\n        x: 0, y: 2, w: 10, h: 2 },\n    ],\n  },\n\n  vanderbilt: {\n    ...vanderbiltBase,\n    version: '0.1.0',\n    name: 'Spraggins',\n    public: true,\n    staticLayout: [\n      { component: 'spatial',\n        props: {\n          view: {\n            zoom: -6.5,\n            target: [20000, 20000, 0],\n          },\n        },\n        x: 0, y: 0, w: 9, h: 2 },\n      { component: 'layerController',\n        x: 9, y: 0, w: 3, h: 2 },\n    ],\n  },\n  'just-higlass': {\n    public: false,\n    initStrategy: 'auto',\n    version: '1.0.0',\n    datasets: [\n      {\n        uid: 'higlass-dataset',\n        name: 'HiGlass Dataset',\n        files: [],\n      },\n    ],\n    name: 'HiGlass demo',\n    coordinationSpace: {\n      genomicZoomX: {\n        A: 0,\n      },\n      genomicZoomY: {\n        A: 0,\n      },\n      genomicTargetX: {\n        A: 1549999999.5,\n      },\n      genomicTargetY: {\n        A: 1549999999.5,\n      },\n    },\n    layout: [\n      {\n        component: 'higlass',\n        coordinationScopes: {\n          genomicZoomX: 'A',\n          genomicZoomY: 'A',\n          genomicTargetX: 'A',\n          genomicTargetY: 'A',\n        },\n        props: {\n          hgViewConfig: {\n            uid: 'aa',\n            autocompleteSource: '/api/v1/suggest/?d=OHJakQICQD6gTD7skx4EWA&',\n            genomePositionSearchBox: {\n              autocompleteServer: '//higlass.io/api/v1',\n              autocompleteId: 'OHJakQICQD6gTD7skx4EWA',\n              chromInfoServer: '//higlass.io/api/v1',\n              chromInfoId: 'hg19',\n              visible: true,\n            },\n            chromInfoPath: '//s3.amazonaws.com/pkerp/data/hg19/chromSizes.tsv',\n            tracks: {\n              top: [\n                {\n                  type: 'horizontal-gene-annotations',\n                  height: 60,\n                  tilesetUid: 'OHJakQICQD6gTD7skx4EWA',\n                  server: '//higlass.io/api/v1',\n                  uid: 'OHJakQICQD6gTD7skx4EWA',\n                  options: {\n                    name: 'Gene Annotations (hg19)',\n                    fontSize: 10,\n                    labelPosition: 'hidden',\n                    labelLeftMargin: 0,\n                    labelRightMargin: 0,\n                    labelTopMargin: 0,\n                    labelBottomMargin: 0,\n                    minHeight: 24,\n                    geneAnnotationHeight: 16,\n                    geneLabelPosition: 'outside',\n                    geneStrandSpacing: 4,\n                    showMousePosition: true,\n                    mousePositionColor: '#ff00ff',\n                    plusStrandColor: '#fdff54',\n                    minusStrandColor: '#68bf30',\n                    labelColor: 'black',\n                    trackBorderWidth: 0,\n                    trackBorderColor: 'black',\n                  },\n                },\n                {\n                  chromInfoPath: '//s3.amazonaws.com/pkerp/data/hg19/chromSizes.tsv',\n                  type: 'horizontal-chromosome-labels',\n                  height: 30,\n                  uid: 'X4e_1DKiQHmyghDa6lLMVA',\n                  options: {\n                    color: '#808080',\n                    stroke: 'black',\n                    fontSize: 12,\n                    fontIsLeftAligned: false,\n                    showMousePosition: true,\n                    mousePositionColor: '#ff00ff',\n                  },\n                },\n              ],\n              left: [\n                {\n                  type: 'vertical-gene-annotations',\n                  width: 60,\n                  tilesetUid: 'OHJakQICQD6gTD7skx4EWA',\n                  server: '//higlass.io/api/v1',\n                  options: {\n                    labelPosition: 'bottomRight',\n                    name: 'Gene Annotations (hg19)',\n                    fontSize: 10,\n                    labelLeftMargin: 0,\n                    labelRightMargin: 0,\n                    labelTopMargin: 0,\n                    labelBottomMargin: 0,\n                    minWidth: 24,\n                    geneAnnotationHeight: 16,\n                    geneLabelPosition: 'outside',\n                    geneStrandSpacing: 4,\n                    showMousePosition: true,\n                    mousePositionColor: '#ff00ff',\n                    plusStrandColor: '#fdff54',\n                    minusStrandColor: '#68bf30',\n                    labelColor: 'black',\n                    trackBorderWidth: 0,\n                    trackBorderColor: 'black',\n                  },\n                  uid: 'dqBTMH78Rn6DeSyDBoAEXw',\n                },\n                {\n                  chromInfoPath: '//s3.amazonaws.com/pkerp/data/hg19/chromSizes.tsv',\n                  type: 'vertical-chromosome-labels',\n                  width: 30,\n                  uid: 'RHdQK4IRQ7yJeDmKWb7Pcg',\n                  options: {\n                    color: '#777777',\n                    stroke: 'black',\n                    fontSize: 12,\n                    fontIsLeftAligned: false,\n                    minWidth: 35,\n                    showMousePosition: true,\n                    mousePositionColor: '#ff00ff',\n                  },\n                },\n              ],\n              center: [\n                {\n                  uid: 'c1',\n                  type: 'combined',\n                  height: 600,\n                  contents: [\n                    {\n                      server: '//higlass.io/api/v1',\n                      tilesetUid: 'CQMd6V_cRw6iCI_-Unl3PQ',\n                      type: 'heatmap',\n                      options: {\n                        maxZoom: null,\n                        labelPosition: 'bottomRight',\n                        name: 'Rao et al. (2014) GM12878 MboI (allreps) 1kb',\n                        backgroundColor: 'black',\n                        labelLeftMargin: 0,\n                        labelRightMargin: 0,\n                        labelTopMargin: 0,\n                        labelBottomMargin: 0,\n                        labelShowResolution: true,\n                        labelShowAssembly: true,\n                        labelColor: '#ffffff',\n                        labelTextOpacity: 0.5,\n                        labelBackgroundColor: 'black',\n                        labelBackgroundOpacity: 0.01,\n                        colorRange: [\n                          '#000000',\n                          '#222e54',\n                          '#448db2',\n                          '#68bf30',\n                          '#fdff54',\n                          '#FFFFFF',\n                        ],\n                        colorbarBackgroundColor: 'black',\n                        colorbarBackgroundOpacity: 0.01,\n                        colorbarPosition: 'topRight',\n                        trackBorderWidth: 0,\n                        trackBorderColor: 'black',\n                        heatmapValueScaling: 'log',\n                        showMousePosition: true,\n                        mousePositionColor: '#ff00ff',\n                        showTooltip: false,\n                        extent: 'full',\n                        zeroValueColor: null,\n                        scaleStartPercent: '0.00000',\n                        scaleEndPercent: '1.00000',\n                      },\n                      height: 500,\n                      uid: 'GjuZed1ySGW1IzZZqFB9BA',\n                      transforms: [\n                        {\n                          name: 'ICE',\n                          value: 'weight',\n                        },\n                      ],\n                    },\n                  ],\n                  options: {},\n                },\n              ],\n              right: [],\n              bottom: [],\n              whole: [],\n              gallery: [],\n            },\n            layout: {\n              w: 12,\n              h: 12,\n              x: 0,\n              y: 0,\n              moved: false,\n              static: false,\n            },\n          },\n        },\n        x: 0, y: 0, w: 8, h: 2,\n      },\n      {\n        component: 'higlass',\n        coordinationScopes: {\n          genomicZoomX: 'A',\n          genomicZoomY: 'A',\n          genomicTargetX: 'A',\n          genomicTargetY: 'A',\n        },\n        props: {\n          hgViewConfig: {\n            uid: 'aa',\n            autocompleteSource: '/api/v1/suggest/?d=OHJakQICQD6gTD7skx4EWA&',\n            genomePositionSearchBox: {\n              autocompleteServer: '//higlass.io/api/v1',\n              autocompleteId: 'OHJakQICQD6gTD7skx4EWA',\n              chromInfoServer: '//higlass.io/api/v1',\n              chromInfoId: 'hg19',\n              visible: true,\n            },\n            chromInfoPath: '//s3.amazonaws.com/pkerp/data/hg19/chromSizes.tsv',\n            tracks: {\n              top: [\n                {\n                  type: 'horizontal-gene-annotations',\n                  height: 60,\n                  tilesetUid: 'OHJakQICQD6gTD7skx4EWA',\n                  server: '//higlass.io/api/v1',\n                  uid: 'OHJakQICQD6gTD7skx4EWA',\n                  options: {\n                    name: 'Gene Annotations (hg19)',\n                    fontSize: 10,\n                    labelPosition: 'hidden',\n                    labelLeftMargin: 0,\n                    labelRightMargin: 0,\n                    labelTopMargin: 0,\n                    labelBottomMargin: 0,\n                    minHeight: 24,\n                    geneAnnotationHeight: 16,\n                    geneLabelPosition: 'outside',\n                    geneStrandSpacing: 4,\n                    showMousePosition: true,\n                    mousePositionColor: '#ff00ff',\n                    plusStrandColor: '#fdff54',\n                    minusStrandColor: '#68bf30',\n                    labelColor: 'black',\n                    trackBorderWidth: 0,\n                    trackBorderColor: 'black',\n                  },\n                },\n                {\n                  chromInfoPath: '//s3.amazonaws.com/pkerp/data/hg19/chromSizes.tsv',\n                  type: 'horizontal-chromosome-labels',\n                  height: 30,\n                  uid: 'X4e_1DKiQHmyghDa6lLMVA',\n                  options: {\n                    color: '#808080',\n                    stroke: 'black',\n                    fontSize: 12,\n                    fontIsLeftAligned: false,\n                    showMousePosition: true,\n                    mousePositionColor: '#ff00ff',\n                  },\n                },\n              ],\n              left: [\n                {\n                  type: 'vertical-gene-annotations',\n                  width: 60,\n                  tilesetUid: 'OHJakQICQD6gTD7skx4EWA',\n                  server: '//higlass.io/api/v1',\n                  options: {\n                    labelPosition: 'bottomRight',\n                    name: 'Gene Annotations (hg19)',\n                    fontSize: 10,\n                    labelLeftMargin: 0,\n                    labelRightMargin: 0,\n                    labelTopMargin: 0,\n                    labelBottomMargin: 0,\n                    minWidth: 24,\n                    geneAnnotationHeight: 16,\n                    geneLabelPosition: 'outside',\n                    geneStrandSpacing: 4,\n                    showMousePosition: true,\n                    mousePositionColor: '#ff00ff',\n                    plusStrandColor: '#fdff54',\n                    minusStrandColor: '#68bf30',\n                    labelColor: 'black',\n                    trackBorderWidth: 0,\n                    trackBorderColor: 'black',\n                  },\n                  uid: 'dqBTMH78Rn6DeSyDBoAEXw',\n                },\n                {\n                  chromInfoPath: '//s3.amazonaws.com/pkerp/data/hg19/chromSizes.tsv',\n                  type: 'vertical-chromosome-labels',\n                  width: 30,\n                  uid: 'RHdQK4IRQ7yJeDmKWb7Pcg',\n                  options: {\n                    color: '#777777',\n                    stroke: 'black',\n                    fontSize: 12,\n                    fontIsLeftAligned: false,\n                    minWidth: 35,\n                    showMousePosition: true,\n                    mousePositionColor: '#ff00ff',\n                  },\n                },\n              ],\n              center: [\n                {\n                  uid: 'c1',\n                  type: 'combined',\n                  height: 600,\n                  contents: [\n                    {\n                      server: '//higlass.io/api/v1',\n                      tilesetUid: 'CQMd6V_cRw6iCI_-Unl3PQ',\n                      type: 'heatmap',\n                      options: {\n                        maxZoom: null,\n                        labelPosition: 'bottomRight',\n                        name: 'Rao et al. (2014) GM12878 MboI (allreps) 1kb',\n                        backgroundColor: 'black',\n                        labelLeftMargin: 0,\n                        labelRightMargin: 0,\n                        labelTopMargin: 0,\n                        labelBottomMargin: 0,\n                        labelShowResolution: true,\n                        labelShowAssembly: true,\n                        labelColor: '#ffffff',\n                        labelTextOpacity: 0.5,\n                        labelBackgroundColor: 'black',\n                        labelBackgroundOpacity: 0.01,\n                        colorRange: [\n                          '#000000',\n                          '#222e54',\n                          '#448db2',\n                          '#68bf30',\n                          '#fdff54',\n                          '#FFFFFF',\n                        ],\n                        colorbarBackgroundColor: 'black',\n                        colorbarBackgroundOpacity: 0.01,\n                        colorbarPosition: 'topRight',\n                        trackBorderWidth: 0,\n                        trackBorderColor: 'black',\n                        heatmapValueScaling: 'log',\n                        showMousePosition: true,\n                        mousePositionColor: '#ff00ff',\n                        showTooltip: false,\n                        extent: 'full',\n                        zeroValueColor: null,\n                        scaleStartPercent: '0.00000',\n                        scaleEndPercent: '1.00000',\n                      },\n                      height: 500,\n                      uid: 'GjuZed1ySGW1IzZZqFB9BA',\n                      transforms: [\n                        {\n                          name: 'ICE',\n                          value: 'weight',\n                        },\n                      ],\n                    },\n                  ],\n                  options: {},\n                },\n              ],\n              right: [],\n              bottom: [],\n              whole: [],\n              gallery: [],\n            },\n            layout: {\n              w: 12,\n              h: 12,\n              x: 0,\n              y: 0,\n              moved: false,\n              static: false,\n            },\n          },\n        },\n        x: 8, y: 0, w: 4, h: 2,\n      },\n    ],\n  },\n  'sc-atac-seq-10x-genomics-pbmc': {\n    version: '1.0.0',\n    name: 'HiGlass serverless demo with 10x Genomics scATAC-seq 5k PBMC dataset',\n    datasets: [\n      {\n        uid: '10x-genomics-pbmc',\n        name: '10x Genomics PBMC',\n        files: [\n          {\n            type: 'genomic-profiles',\n            fileType: 'genomic-profiles.zarr',\n            url: 'http://higlass-serverless.s3.amazonaws.com/multivec/pbmc_10x_peaks_by_cluster.zarr',\n          },\n        ],\n      },\n    ],\n    layout: [\n      { component: 'genomicProfiles',\n        props: {\n          profileTrackUidKey: 'file',\n        },\n        x: 0, y: 0, w: 8, h: 2,\n      },\n      { component: 'description',\n        props: {\n          description: '10x Genomics scATAC-seq of 5k PBMCs. Note: the Zarr HiGlass Plugin Datafetcher is not yet optimized. Please be patient while the HiGlass tracks load.',\n        },\n        x: 8, y: 0, w: 4, h: 2 },\n    ],\n    initStrategy: 'auto',\n  },\n  'portal-ui-featured': {\n    coordinationSpace: {\n      dataset: {\n        A: 'A',\n      },\n      spatialZoom: {\n        A: 0.6219962674826599,\n      },\n      spatialRotation: {\n        A: 0,\n      },\n      spatialTargetX: {\n        A: 550.9755273834661,\n      },\n      spatialTargetY: {\n        A: 418.2987491735642,\n      },\n      spatialTargetZ: {\n        A: 6.252776074688882e-13,\n      },\n      heatmapZoomX: {\n        A: 0,\n      },\n      heatmapZoomY: {\n        A: 0,\n      },\n      heatmapTargetX: {\n        A: 0,\n      },\n      heatmapTargetY: {\n        A: 0,\n      },\n      cellFilter: {\n        A: null,\n      },\n      cellHighlight: {\n        A: '761',\n      },\n      cellSetSelection: {\n        A: [\n          [\n            'K-Means [Mean] Expression',\n            'Cluster 1',\n          ],\n          [\n            'K-Means [Mean] Expression',\n            'Cluster 2',\n          ],\n          [\n            'K-Means [Mean] Expression',\n            'Cluster 3',\n          ],\n          [\n            'K-Means [Mean] Expression',\n            'Cluster 4',\n          ],\n          [\n            'K-Means [Mean] Expression',\n            'Cluster 5',\n          ],\n          [\n            'K-Means [Mean] Expression',\n            'Cluster 6',\n          ],\n        ],\n      },\n      cellSetHighlight: {\n        A: null,\n      },\n      cellSetColor: {\n        A: [\n          {\n            path: [\n              'K-Means [Mean] Expression',\n            ],\n            color: [\n              68,\n              119,\n              170,\n              255,\n            ],\n          },\n          {\n            path: [\n              'K-Means [Mean] Expression',\n              'Cluster 1',\n            ],\n            color: [\n              68,\n              119,\n              170,\n              255,\n            ],\n          },\n          {\n            path: [\n              'K-Means [Mean] Expression',\n              'Cluster 2',\n            ],\n            color: [\n              136,\n              204,\n              238,\n              255,\n            ],\n          },\n          {\n            path: [\n              'K-Means [Mean] Expression',\n              'Cluster 3',\n            ],\n            color: [\n              68,\n              170,\n              153,\n              255,\n            ],\n          },\n          {\n            path: [\n              'K-Means [Mean] Expression',\n              'Cluster 4',\n            ],\n            color: [\n              17,\n              119,\n              51,\n              255,\n            ],\n          },\n          {\n            path: [\n              'K-Means [Mean] Expression',\n              'Cluster 5',\n            ],\n            color: [\n              153,\n              153,\n              51,\n              255,\n            ],\n          },\n          {\n            path: [\n              'K-Means [Mean] Expression',\n              'Cluster 6',\n            ],\n            color: [\n              221,\n              204,\n              119,\n              255,\n            ],\n          },\n          {\n            path: [\n              'K-Means [Covariance] Expression',\n            ],\n            color: [\n              68,\n              119,\n              170,\n              255,\n            ],\n          },\n          {\n            path: [\n              'K-Means [Covariance] Expression',\n              'Cluster 1',\n            ],\n            color: [\n              68,\n              119,\n              170,\n              255,\n            ],\n          },\n          {\n            path: [\n              'K-Means [Covariance] Expression',\n              'Cluster 2',\n            ],\n            color: [\n              136,\n              204,\n              238,\n              255,\n            ],\n          },\n          {\n            path: [\n              'K-Means [Covariance] Expression',\n              'Cluster 3',\n            ],\n            color: [\n              68,\n              170,\n              153,\n              255,\n            ],\n          },\n          {\n            path: [\n              'K-Means [Covariance] Expression',\n              'Cluster 4',\n            ],\n            color: [\n              17,\n              119,\n              51,\n              255,\n            ],\n          },\n          {\n            path: [\n              'K-Means [Covariance] Expression',\n              'Cluster 5',\n            ],\n            color: [\n              153,\n              153,\n              51,\n              255,\n            ],\n          },\n          {\n            path: [\n              'K-Means [Covariance] Expression',\n              'Cluster 6',\n            ],\n            color: [\n              221,\n              204,\n              119,\n              255,\n            ],\n          },\n          {\n            path: [\n              'K-Means [Total] Expression',\n            ],\n            color: [\n              68,\n              119,\n              170,\n              255,\n            ],\n          },\n          {\n            path: [\n              'K-Means [Total] Expression',\n              'Cluster 1',\n            ],\n            color: [\n              68,\n              119,\n              170,\n              255,\n            ],\n          },\n          {\n            path: [\n              'K-Means [Total] Expression',\n              'Cluster 2',\n            ],\n            color: [\n              136,\n              204,\n              238,\n              255,\n            ],\n          },\n          {\n            path: [\n              'K-Means [Total] Expression',\n              'Cluster 3',\n            ],\n            color: [\n              68,\n              170,\n              153,\n              255,\n            ],\n          },\n          {\n            path: [\n              'K-Means [Total] Expression',\n              'Cluster 4',\n            ],\n            color: [\n              17,\n              119,\n              51,\n              255,\n            ],\n          },\n          {\n            path: [\n              'K-Means [Total] Expression',\n              'Cluster 5',\n            ],\n            color: [\n              153,\n              153,\n              51,\n              255,\n            ],\n          },\n          {\n            path: [\n              'K-Means [Total] Expression',\n              'Cluster 6',\n            ],\n            color: [\n              221,\n              204,\n              119,\n              255,\n            ],\n          },\n          {\n            path: [\n              'K-Means [Mean-All-SubRegions] Expression',\n            ],\n            color: [\n              68,\n              119,\n              170,\n              255,\n            ],\n          },\n          {\n            path: [\n              'K-Means [Mean-All-SubRegions] Expression',\n              'Cluster 1',\n            ],\n            color: [\n              68,\n              119,\n              170,\n              255,\n            ],\n          },\n          {\n            path: [\n              'K-Means [Mean-All-SubRegions] Expression',\n              'Cluster 2',\n            ],\n            color: [\n              136,\n              204,\n              238,\n              255,\n            ],\n          },\n          {\n            path: [\n              'K-Means [Mean-All-SubRegions] Expression',\n              'Cluster 3',\n            ],\n            color: [\n              68,\n              170,\n              153,\n              255,\n            ],\n          },\n          {\n            path: [\n              'K-Means [Mean-All-SubRegions] Expression',\n              'Cluster 4',\n            ],\n            color: [\n              17,\n              119,\n              51,\n              255,\n            ],\n          },\n          {\n            path: [\n              'K-Means [Mean-All-SubRegions] Expression',\n              'Cluster 5',\n            ],\n            color: [\n              153,\n              153,\n              51,\n              255,\n            ],\n          },\n          {\n            path: [\n              'K-Means [Mean-All-SubRegions] Expression',\n              'Cluster 6',\n            ],\n            color: [\n              221,\n              204,\n              119,\n              255,\n            ],\n          },\n          {\n            path: [\n              'K-Means [Shape-Vectors]',\n            ],\n            color: [\n              68,\n              119,\n              170,\n              255,\n            ],\n          },\n          {\n            path: [\n              'K-Means [Shape-Vectors]',\n              'Cluster 1',\n            ],\n            color: [\n              68,\n              119,\n              170,\n              255,\n            ],\n          },\n          {\n            path: [\n              'K-Means [Shape-Vectors]',\n              'Cluster 2',\n            ],\n            color: [\n              136,\n              204,\n              238,\n              255,\n            ],\n          },\n          {\n            path: [\n              'K-Means [Shape-Vectors]',\n              'Cluster 3',\n            ],\n            color: [\n              68,\n              170,\n              153,\n              255,\n            ],\n          },\n        ],\n      },\n      geneFilter: {\n        A: null,\n      },\n      geneHighlight: {\n        A: null,\n      },\n      geneSelection: {\n        A: null,\n      },\n      geneExpressionColormap: {\n        A: 'plasma',\n      },\n      geneExpressionColormapRange: {\n        A: [\n          0.065,\n          0.435,\n        ],\n      },\n      cellColorEncoding: {\n        A: 'cellSetSelection',\n      },\n      spatialRasterLayers: {\n        A: [\n          {\n            type: 't',\n            index: 0,\n            colormap: null,\n            opacity: 1,\n            domainType: 'Min/Max',\n            transparentColor: null,\n            channels: [\n              {\n                selection: {\n                  z: 5,\n                  t: 0,\n                  c: 10,\n                },\n                color: [\n                  0,\n                  0,\n                  255,\n                ],\n                visible: true,\n                slider: [\n                  1,\n                  14906,\n                ],\n              },\n              {\n                selection: {\n                  z: 5,\n                  t: 0,\n                  c: 15,\n                },\n                color: [\n                  0,\n                  255,\n                  0,\n                ],\n                visible: true,\n                slider: [\n                  2313,\n                  31611,\n                ],\n              },\n              {\n                selection: {\n                  z: 5,\n                  t: 0,\n                  c: 45,\n                },\n                color: [\n                  255,\n                  0,\n                  255,\n                ],\n                visible: true,\n                slider: [\n                  2570,\n                  21074,\n                ],\n              },\n              {\n                selection: {\n                  z: 5,\n                  t: 0,\n                  c: 20,\n                },\n                color: [\n                  255,\n                  255,\n                  0,\n                ],\n                visible: true,\n                slider: [\n                  2827,\n                  11565,\n                ],\n              },\n              {\n                selection: {\n                  z: 5,\n                  t: 0,\n                  c: 31,\n                },\n                slider: [\n                  5658,\n                  17479,\n                ],\n                visible: true,\n                color: [\n                  255,\n                  128,\n                  0,\n                ],\n              },\n              {\n                selection: {\n                  z: 5,\n                  t: 0,\n                  c: 39,\n                },\n                slider: [\n                  1767,\n                  11735,\n                ],\n                visible: true,\n                color: [\n                  255,\n                  255,\n                  255,\n                ],\n              },\n            ],\n          },\n        ],\n      },\n      spatialCellsLayer: {\n        A: {\n          opacity: 0,\n          radius: 50,\n          visible: true,\n          stroked: true,\n        },\n      },\n      spatialMoleculesLayer: {\n        A: null,\n      },\n      spatialNeighborhoodsLayer: {\n        A: null,\n      },\n      additionalCellSets: {\n        A: null,\n      },\n      moleculeHighlight: {\n        A: null,\n      },\n    },\n    datasets: [\n      {\n        files: [\n          {\n            fileType: 'cells.json',\n            type: 'cells',\n            url: 'https://assets.hubmapconsortium.org/ca3016d836d8ee50bef1b93f339c9679/output_json/R002_X002_Y007.cells.json?token=',\n          },\n          {\n            fileType: 'cell-sets.json',\n            type: 'cell-sets',\n            url: 'https://assets.hubmapconsortium.org/ca3016d836d8ee50bef1b93f339c9679/output_json/R002_X002_Y007.cell-sets.json?token=',\n          },\n          {\n            fileType: 'clusters.json',\n            type: 'expression-matrix',\n            url: 'https://assets.hubmapconsortium.org/ca3016d836d8ee50bef1b93f339c9679/output_json/R002_X002_Y007.clusters.json?token=',\n          },\n          {\n            fileType: 'raster.json',\n            options: {\n              images: [\n                {\n                  metadata: {\n                    omeTiffOffsetsUrl: 'https://assets.hubmapconsortium.org/ca3016d836d8ee50bef1b93f339c9679/output_offsets/R002_X002_Y007.offsets.json?token=',\n                  },\n                  name: 'R002_X002_Y007',\n                  type: 'ome-tiff',\n                  url: 'https://assets.hubmapconsortium.org/ca3016d836d8ee50bef1b93f339c9679/output/extract/expressions/ome-tiff/R002_X002_Y007.ome.tiff?token=',\n                },\n              ],\n              schemaVersion: '0.0.2',\n            },\n            type: 'raster',\n          },\n        ],\n        name: 'SPRM',\n        uid: 'A',\n      },\n    ],\n    description: '',\n    initStrategy: 'auto',\n    layout: [\n      {\n        component: 'spatial',\n        coordinationScopes: {\n          dataset: 'A',\n          spatialZoom: 'A',\n          spatialRotation: 'A',\n          spatialTargetX: 'A',\n          spatialTargetY: 'A',\n          spatialTargetZ: 'A',\n          cellFilter: 'A',\n          cellHighlight: 'A',\n          cellSetSelection: 'A',\n          cellSetHighlight: 'A',\n          cellSetColor: 'A',\n          geneHighlight: 'A',\n          geneSelection: 'A',\n          geneExpressionColormap: 'A',\n          geneExpressionColormapRange: 'A',\n          cellColorEncoding: 'A',\n          spatialRasterLayers: 'A',\n          spatialCellsLayer: 'A',\n          spatialMoleculesLayer: 'A',\n          spatialNeighborhoodsLayer: 'A',\n          additionalCellSets: 'A',\n          moleculeHighlight: 'A',\n        },\n        h: 8,\n        w: 7,\n        x: 3,\n        y: 0,\n      },\n      {\n        component: 'description',\n        coordinationScopes: {\n          dataset: 'A',\n          spatialRasterLayers: 'A',\n        },\n        h: 2,\n        w: 2,\n        x: 10,\n        y: 10,\n      },\n      {\n        component: 'layerController',\n        coordinationScopes: {\n          dataset: 'A',\n          spatialRasterLayers: 'A',\n          spatialCellsLayer: 'A',\n          spatialMoleculesLayer: 'A',\n          spatialNeighborhoodsLayer: 'A',\n        },\n        h: 8,\n        w: 3,\n        x: 0,\n        y: 0,\n      },\n      {\n        component: 'cellSets',\n        coordinationScopes: {\n          dataset: 'A',\n          cellSetSelection: 'A',\n          cellSetHighlight: 'A',\n          cellSetColor: 'A',\n          cellColorEncoding: 'A',\n          additionalCellSets: 'A',\n        },\n        h: 5,\n        w: 2,\n        x: 10,\n        y: 5,\n      },\n      {\n        component: 'genes',\n        coordinationScopes: {\n          dataset: 'A',\n          geneFilter: 'A',\n          geneHighlight: 'A',\n          geneSelection: 'A',\n          cellColorEncoding: 'A',\n        },\n        h: 5,\n        props: {\n          variablesLabelOverride: 'antigen',\n        },\n        w: 2,\n        x: 10,\n        y: 0,\n      },\n      {\n        component: 'heatmap',\n        coordinationScopes: {\n          dataset: 'A',\n          heatmapZoomX: 'A',\n          heatmapZoomY: 'A',\n          heatmapTargetX: 'A',\n          heatmapTargetY: 'A',\n          cellFilter: 'A',\n          cellHighlight: 'A',\n          cellSetSelection: 'A',\n          cellSetHighlight: 'A',\n          cellSetColor: 'A',\n          geneFilter: 'A',\n          geneHighlight: 'A',\n          geneSelection: 'A',\n          geneExpressionColormap: 'A',\n          geneExpressionColormapRange: 'A',\n          cellColorEncoding: 'A',\n          additionalCellSets: 'A',\n        },\n        h: 4,\n        props: {\n          transpose: true,\n          variablesLabelOverride: 'antigen',\n        },\n        w: 10,\n        x: 0,\n        y: 8,\n      },\n    ],\n    name: 'R002_X002_Y007',\n    version: '1.0.1',\n  },\n};\n/* eslint-enable */\n\nexport function listConfigs(showAll) {\n  return Object.entries(configs).filter(\n    entry => showAll || entry[1].public,\n  ).map(\n    ([id, config]) => ({\n      id,\n      name: config.name,\n      description: config.description,\n    }),\n  );\n}\n\nexport function getConfig(id) {\n  return configs[id];\n}\n","import React from 'react';\n\nimport version from '../version.json';\n\nfunction DatasetList(props) {\n  const { configs, theme } = props;\n  const aClassName = 'list-group-item list-group-item-action flex-column align-items-start bg-secondary';\n  const links = configs.map(\n    ({ id, name, description }) => (\n      <div className={aClassName} key={id}>\n        <a\n          href={`?dataset=${id}&theme=${theme}`}\n          key={id}\n        >\n          <h5>{name}</h5>\n          <p>{description}</p>\n        </a>\n        <a\n          href={`?dataset=${id}&theme=${theme}&small`}\n          style={{ fontSize: '75%' }}\n        >\n          {name} as component\n        </a>\n      </div>\n    ),\n  );\n  return (\n    <div className=\"list-group\">\n      {links}\n    </div>\n  );\n}\n\nfunction Form(props) {\n  const { configs, theme } = props;\n  return (\n    <form method=\"GET\">\n      <h1>Vitessce</h1>\n      <div>Select a dataset:</div>\n      <DatasetList configs={configs} theme={theme} />\n\n      <br />\n      <div>Or specify URL of configuration:</div>\n      <div className=\"input-group mb-3\">\n        <input type=\"text\" name=\"url\" className=\"form-control\" />\n        <input type=\"hidden\" name=\"theme\" value={theme} />\n        <div className=\"input-group-append\">\n          <button className=\"btn btn-outline-secondary\" type=\"submit\">Load</button>\n        </div>\n      </div>\n    </form>\n  );\n}\n\nfunction Info() {\n  return (\n    <>\n      <p className=\"info-paragraph\">\n        Vitessce is a visual integration tool for exploration of spatial single cell experiments.\n        Its modular design is optimized for scalable, linked visualizations that support the\n        spatial and non-spatial representation of tissue-, cell- and molecule-level data.\n        Vitessce integrates the <a href=\"https://github.com/hms-dbmi/viv\">Viv library</a> to visualize\n        highly multiplexed, high-resolution, high-bit depth image data directly from\n        OME-TIFF files and Bio-Formats-compatible Zarr stores.\n      </p>\n      <h5 className=\"info-section-text\">\n        Contributors\n      </h5>\n      <ul>\n        <li><a href=\"https://github.com/keller-mark\">Mark Keller</a></li>\n        <li><a href=\"https://github.com/mccalluc\">Chuck McCallum</a></li>\n        <li><a href=\"https://github.com/ilan-gold\">Ilan Gold</a></li>\n        <li><a href=\"https://github.com/manzt\">Trevor Manz</a></li>\n        <li><a href=\"https://github.com/thomaslchan\">Tos Chan</a></li>\n        <li><a href=\"https://github.com/jkmarx\">Jennifer Marx</a></li>\n        <li><a href=\"https://github.com/pkharchenko\">Peter Kharchenko</a></li>\n        <li><a href=\"https://github.com/ngehlenborg\">Nils Gehlenborg</a></li>\n      </ul>\n      <h5 className=\"info-section-text\">\n        Source Code\n      </h5>\n      <ul>\n        <li><a href=\"https://github.com/vitessce/vitessce\">GitHub</a></li>\n        <li><a href=\"https://www.npmjs.com/package/vitessce\">NPM</a></li>\n      </ul>\n      <h5 className=\"info-section-text\">\n        Funding\n      </h5>\n      <ul>\n        <li>\n          NIH/OD Human BioMolecular Atlas Program (HuBMAP)\n          (OT2OD026677, PI: Nils Gehlenborg).\n        </li>\n        <li>\n          NIH/NLM Biomedical Informatics and Data Science Research Training Program\n          (T15LM007092, PI: Nils Gehlenborg)\n        </li>\n        <li>Harvard Stem Cell Institute (CF-0014-17-03, PI: Nils Gehlenborg)</li>\n      </ul>\n      <p className=\"info-section-text\">\n        This deployment: branch={version.branch} | hash={version.hash} | date={version.date}\n      </p>\n    </>\n  );\n}\n\nexport default function Welcome(props) {\n  const { configs, theme, showBetaHeader } = props;\n  return (\n    <div className={`vitessce-container vitessce-theme-${theme} welcome-container`}>\n      {showBetaHeader && (\n        <div className=\"welcome-beta-header\">\n          <p>Visit <a href=\"http://beta.vitessce.io\">beta.vitessce.io</a> to view the next version of the Vitessce home page and documentation!</p>\n        </div>\n      )}\n      <div className=\"react-grid-layout container-fluid\" style={{ height: 'max(100vh, 100%)' }}>\n        <div className=\"row\">\n          <div className=\"welcome-col-left\">\n            <div className=\"card card-body bg-primary\">\n              <Form configs={configs} theme={theme} />\n            </div>\n          </div>\n          <div className=\"welcome-col-right\">\n            <div className=\"card card-body bg-primary\">\n              <Info />\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React from 'react';\nimport { PRIMARY_CARD } from '../components/classNames';\n\nexport default function Warning(props) {\n  const {\n    title,\n    preformatted,\n    unformatted,\n    theme,\n  } = props;\n  return (\n    <div className={`vitessce-container vitessce-theme-${theme}`}>\n      <div className=\"warning-layout container-fluid\">\n        <div className=\"row\">\n          <div className=\"col-12\">\n            <div className={PRIMARY_CARD}>\n              <h1>{title}</h1>\n              <pre>{preformatted}</pre>\n              <div>{unformatted}</div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","/* eslint-disable camelcase */\nimport uuidv4 from 'uuid/v4';\nimport cloneDeep from 'lodash/cloneDeep';\nimport { getNextScope, capitalize } from '../utils';\nimport {\n  COMPONENT_COORDINATION_TYPES,\n} from './state/coordination';\n\n/**\n * A helper function for the `upgrade()` function,\n * which helps convert `props.view` (for scatterplot and spatial),\n * into new coordination scopes, setting their values\n * in the coordination space and returning the new scope mappings.\n * This function does mutate the `coordinationSpace` parameter.\n * @param {string} prefix The coordination type prefix,\n * either 'embedding' or 'spatial'.\n * @param {object} view The view prop object containing\n * the properties `.target` and `.zoom`.\n * @param {object} coordinationSpace The coordination space.\n * @returns {object} The new coordination scope names.\n */\nfunction upgradeReplaceViewProp(prefix, view, coordinationSpace) {\n  const prevZScopes = Object.keys(coordinationSpace[`${prefix}Zoom`]);\n  const prevTXScopes = Object.keys(coordinationSpace[`${prefix}TargetX`]);\n  const prevTYScopes = Object.keys(coordinationSpace[`${prefix}TargetY`]);\n\n  const nextZScope = getNextScope(prevZScopes);\n  const nextTXScope = getNextScope(prevTXScopes);\n  const nextTYScope = getNextScope(prevTYScopes);\n\n  const { zoom, target: [targetX, targetY] } = view;\n  // eslint-disable-next-line no-param-reassign\n  coordinationSpace[`${prefix}Zoom`][nextZScope] = zoom;\n  // eslint-disable-next-line no-param-reassign\n  coordinationSpace[`${prefix}TargetX`][nextTXScope] = targetX;\n  // eslint-disable-next-line no-param-reassign\n  coordinationSpace[`${prefix}TargetY`][nextTYScope] = targetY;\n  return {\n    [`${prefix}Zoom`]: nextZScope,\n    [`${prefix}TargetX`]: nextTXScope,\n    [`${prefix}TargetY`]: nextTYScope,\n  };\n}\n\n/**\n * Convert an older view config to a newer view config.\n * @param {object} config A v0.1.0 \"legacy\" view config.\n * @returns {object} A v1.0.0 \"upgraded\" view config.\n */\nexport function upgradeFrom0_1_0(config, datasetUid = null) {\n  const coordinationSpace = {\n    embeddingType: {},\n    embeddingZoom: {},\n    embeddingTargetX: {},\n    embeddingTargetY: {},\n    spatialZoom: {},\n    spatialTargetX: {},\n    spatialTargetY: {},\n  };\n\n  const layout = [];\n  config.staticLayout.forEach((componentDef) => {\n    let newComponentDef = {\n      ...componentDef,\n      coordinationScopes: {},\n    };\n    if (componentDef.component === 'scatterplot') {\n      // Need to set up the coordinationSpace\n      // with embeddingType to replace scatterplot\n      // component prop \"mapping\".\n      if (componentDef.props.mapping) {\n        coordinationSpace.embeddingType[componentDef.props.mapping] = componentDef.props.mapping;\n        newComponentDef = {\n          ...newComponentDef,\n          coordinationScopes: {\n            ...newComponentDef.coordinationScopes,\n            embeddingType: componentDef.props.mapping,\n          },\n        };\n      }\n      // Need to set up the coordinationSpace\n      // with embeddingZoom / embeddingTargetX/Y to replace scatterplot\n      // component prop \"view\" ({ zoom, target }).\n      if (componentDef.props.view) {\n        // Note that the below function does mutate the coordinationSpace param.\n        const newScopeValues = upgradeReplaceViewProp(\n          'embedding', componentDef.props.view, coordinationSpace,\n        );\n        newComponentDef = {\n          ...newComponentDef,\n          coordinationScopes: {\n            ...newComponentDef.coordinationScopes,\n            ...newScopeValues,\n          },\n        };\n      }\n    }\n    if (componentDef.component === 'spatial') {\n      // Need to set up the coordinationSpace\n      // with spatialZoom / spatialTargetX/Y to replace spatial\n      // component prop \"view\" ({ zoom, target }).\n      if (componentDef?.props?.view) {\n        // Note that the below function does mutate the coordinationSpace param.\n        const newScopeValues = upgradeReplaceViewProp(\n          'spatial', componentDef.props.view, coordinationSpace,\n        );\n        newComponentDef = {\n          ...newComponentDef,\n          coordinationScopes: {\n            ...newComponentDef.coordinationScopes,\n            ...newScopeValues,\n          },\n        };\n      }\n    }\n    layout.push(newComponentDef);\n  });\n\n  // Use a random dataset ID when initializing automatically,\n  // so that it changes with each new v0.1.0 view config.\n  // However, check if the `datasetUid` parameter was passed,\n  // which allows for unit testing.\n  const newDatasetUid = datasetUid || uuidv4();\n\n  return {\n    version: '1.0.1',\n    name: config.name,\n    description: config.description,\n    public: config.public,\n    datasets: [\n      {\n        uid: newDatasetUid,\n        name: newDatasetUid,\n        files: config.layers.map(layer => ({\n          type: layer.type.toLowerCase(),\n          fileType: layer.fileType,\n          url: layer.url,\n        })),\n      },\n    ],\n    initStrategy: 'auto',\n    coordinationSpace,\n    layout,\n  };\n}\n\nexport function upgradeFrom1_0_0(config) {\n  const coordinationSpace = { ...config.coordinationSpace };\n\n  function replaceLayerType(layerType) {\n    // Layer type could be one of a few things, bitmask or raster at the moment.\n    const isRaster = layerType === 'raster';\n    coordinationSpace[`spatial${capitalize(layerType)}Layer${isRaster ? 's' : ''}`] = {};\n    Object.entries(coordinationSpace.spatialLayers).forEach(([scope, layers]) => {\n      if (Array.isArray(layers) && layers.find(layer => layer.type === layerType)) {\n        const typedLayers = layers\n          .filter(layer => layer.type === layerType)\n          .map((layer) => {\n            const newLayer = { ...layer };\n            delete newLayer.type;\n            return newLayer;\n          });\n        coordinationSpace[`spatial${capitalize(layerType)}Layer${isRaster ? 's' : ''}`][scope] = isRaster ? typedLayers : typedLayers[0];\n      } else {\n        coordinationSpace[`spatial${capitalize(layerType)}Layer${isRaster ? 's' : ''}`][scope] = null;\n      }\n    });\n  }\n\n  if (coordinationSpace.spatialLayers) {\n    replaceLayerType('raster');\n    replaceLayerType('cells');\n    replaceLayerType('molecules');\n    replaceLayerType('neighborhoods');\n    delete coordinationSpace.spatialLayers;\n  }\n\n  const layout = config.layout.map((component) => {\n    const newComponent = { ...component };\n\n    function replaceCoordinationScope(layerType) {\n      const isRaster = layerType === 'raster';\n      if (COMPONENT_COORDINATION_TYPES[newComponent.component].includes(`spatial${capitalize(layerType)}Layer${isRaster ? 's' : ''}`)) {\n        newComponent.coordinationScopes[`spatial${capitalize(layerType)}Layer${isRaster ? 's' : ''}`] = newComponent.coordinationScopes.spatialLayers;\n      }\n    }\n\n    if (newComponent.coordinationScopes && newComponent.coordinationScopes.spatialLayers) {\n      replaceCoordinationScope('raster');\n      replaceCoordinationScope('cells');\n      replaceCoordinationScope('molecules');\n      replaceCoordinationScope('neighborhoods');\n      delete newComponent.coordinationScopes.spatialLayers;\n    }\n    return newComponent;\n  });\n\n  return {\n    ...config,\n    coordinationSpace,\n    layout,\n    version: '1.0.1',\n  };\n}\n\n\nexport function upgradeFrom1_0_1(config) {\n  // Need to add the globalDisable3d prop to any layer controller views,\n  // to match the previous lack of 3D auto-detection behavior.\n\n  const layout = config.layout.map((component) => {\n    const newComponent = { ...component };\n    if (newComponent.component === 'layerController') {\n      newComponent.props = {\n        ...newComponent.props,\n        globalDisable3d: true,\n      };\n    }\n    return newComponent;\n  });\n\n  // Enforce bitmask or raster as spatial raster layer type, defaulting\n  // to raster layer if it is not one of bitmask or raster from the old config.\n\n  const newConfig = cloneDeep(config);\n  Object.keys((newConfig?.coordinationSpace?.spatialRasterLayers || {})).forEach((key) => {\n    if (newConfig.coordinationSpace.spatialRasterLayers[key]) {\n      newConfig.coordinationSpace.spatialRasterLayers[key].forEach((layer, index) => {\n        newConfig.coordinationSpace.spatialRasterLayers[key][index].type = ['bitmask', 'raster'].includes(layer.type) ? layer.type : 'raster';\n      });\n    }\n  });\n\n  return {\n    ...newConfig,\n    layout,\n    version: '1.0.2',\n  };\n}\n\nexport function upgradeFrom1_0_2(config) {\n  // Need to add the globalDisable3d prop to any layer controller views,\n  // to match the previous lack of 3D auto-detection behavior.\n\n  const layout = config.layout.map((component) => {\n    const newComponent = { ...component };\n    if (newComponent.component === 'layerController') {\n      newComponent.props = {\n        ...newComponent.props,\n        disableChannelsIfRgbDetected: true,\n      };\n    }\n    return newComponent;\n  });\n\n  // Enforce bitmask or raster as spatial raster layer type, defaulting\n  // to raster layer if it is not one of bitmask or raster from the old config.\n\n  const newConfig = cloneDeep(config);\n\n  return {\n    ...newConfig,\n    layout,\n    version: '1.0.3',\n  };\n}\n\nexport function upgradeFrom1_0_3(config) {\n  const newConfig = cloneDeep(config);\n\n  return {\n    ...newConfig,\n    version: '1.0.4',\n  };\n}\n\n// Added in version 1.0.5:\n// - Support for an array of strings in the setName property within options array items\n//   for the anndata-cell-sets.zarr file type.\nexport function upgradeFrom1_0_4(config) {\n  const newConfig = cloneDeep(config);\n\n  return {\n    ...newConfig,\n    version: '1.0.5',\n  };\n}\n","/* eslint-disable camelcase */\nimport Ajv from 'ajv';\nimport configSchema0_1_0 from '../schemas/config-0.1.0.schema.json';\nimport configSchema1_0_0 from '../schemas/config-1.0.0.schema.json';\nimport configSchema1_0_1 from '../schemas/config-1.0.1.schema.json';\nimport configSchema1_0_2 from '../schemas/config-1.0.2.schema.json';\nimport configSchema1_0_3 from '../schemas/config-1.0.3.schema.json';\nimport configSchema1_0_4 from '../schemas/config-1.0.4.schema.json';\nimport configSchema1_0_5 from '../schemas/config-1.0.5.schema.json';\nimport cellSetsSchema from '../schemas/cell-sets.schema.json';\nimport rasterSchema from '../schemas/raster.schema.json';\nimport {\n  upgradeFrom0_1_0,\n  upgradeFrom1_0_0,\n  upgradeFrom1_0_1,\n  upgradeFrom1_0_2,\n  upgradeFrom1_0_3,\n  upgradeFrom1_0_4,\n} from './view-config-upgraders';\n\n/**\n * Mapping from view config versions to view config schemas and upgrade functions.\n * Add a new schema and upgrade function here when bumping the view config version.\n * The latest view config version should always have a null value instead of an upgrade function.\n */\nexport const LATEST_VERSION = '1.0.5';\nexport const SCHEMA_HANDLERS = {\n  '0.1.0': [new Ajv().compile(configSchema0_1_0), upgradeFrom0_1_0],\n  '1.0.0': [new Ajv().addSchema(cellSetsSchema).addSchema(rasterSchema).compile(configSchema1_0_0), upgradeFrom1_0_0],\n  '1.0.1': [new Ajv().addSchema(cellSetsSchema).addSchema(rasterSchema).compile(configSchema1_0_1), upgradeFrom1_0_1],\n  '1.0.2': [new Ajv().addSchema(cellSetsSchema).addSchema(rasterSchema).compile(configSchema1_0_2), upgradeFrom1_0_2],\n  '1.0.3': [new Ajv().addSchema(cellSetsSchema).addSchema(rasterSchema).compile(configSchema1_0_3), upgradeFrom1_0_3],\n  '1.0.4': [new Ajv().addSchema(cellSetsSchema).addSchema(rasterSchema).compile(configSchema1_0_4), upgradeFrom1_0_4],\n  '1.0.5': [new Ajv().addSchema(cellSetsSchema).addSchema(rasterSchema).compile(configSchema1_0_5), null],\n};\n","import { useEffect } from 'react';\nimport { SCHEMA_HANDLERS, LATEST_VERSION } from './view-config-versions';\nimport { useViewConfigStoreApi, useLoaders, useWarning } from './state/hooks';\n\nfunction validateViewConfig(viewConfig) {\n  // Need the try-catch here since Zustand will actually\n  // just catch and ignore errors in its subscription callbacks.\n  try {\n    const validate = SCHEMA_HANDLERS[LATEST_VERSION][0];\n    const valid = validate(viewConfig);\n    if (!valid) {\n      const failureReason = JSON.stringify(validate.errors, null, 2);\n      throw new Error(`Config validation failed: ${failureReason}`);\n    }\n  } catch (e) {\n    console.error(e);\n  }\n  // Do nothing if successful.\n}\n\n/**\n * This is a dummy component which handles\n * publishing new view configs and loaders to\n * the provided callbacks on changes.\n * @param {object} props\n * @param {function} props.onConfigChange A callback function\n * to execute on each change of the Vitessce view config.\n * @param {function} props.onLoaderChange A callback function\n * to execute on each change of the loaders object.\n * @param {boolean} props.validateOnConfigChange Whether to validate\n * against the view config schema when publishing changes.\n */\nexport default function CallbackPublisher(props) {\n  const {\n    onWarn,\n    onConfigChange,\n    onLoaderChange,\n    validateOnConfigChange,\n  } = props;\n\n  const warning = useWarning();\n  const loaders = useLoaders();\n\n  const viewConfigStoreApi = useViewConfigStoreApi();\n\n  // View config updates are often-occurring, so\n  // we want to use the \"transient update\" approach\n  // to subscribe to view config changes.\n  // Reference: https://github.com/react-spring/zustand#transient-updates-for-often-occuring-state-changes\n  useEffect(() => viewConfigStoreApi.subscribe(\n    // The function to run on each publish.\n    (viewConfig) => {\n      if (validateOnConfigChange && viewConfig) {\n        validateViewConfig(viewConfig);\n      }\n      if (onConfigChange && viewConfig) {\n        onConfigChange(viewConfig);\n      }\n    },\n    // The function to specify which part of the store\n    // we want to subscribe to.\n    state => state.viewConfig,\n  ), [onConfigChange, validateOnConfigChange, viewConfigStoreApi]);\n\n  // Emit updates to the warning message.\n  useEffect(() => {\n    if (onWarn && warning) {\n      onWarn(warning);\n    }\n  }, [warning, onWarn]);\n\n  // Emit updates to the loaders.\n  useEffect(() => {\n    if (onLoaderChange && loaders) {\n      onLoaderChange(loaders);\n    }\n  }, [loaders, onLoaderChange]);\n\n  // Render nothing.\n  return null;\n}\n","import React from 'react';\n\nexport default function Description(props) {\n  const { description, metadata } = props;\n\n  return (\n    <div className=\"description\">\n      <p>{description}</p>\n\n      {metadata && Array.from(metadata.entries())\n        .map(([layerIndex, { name: layerName, metadata: metadataRecord }]) => (\n          metadataRecord && Object.entries(metadataRecord).length > 0 ? (\n            <details key={layerIndex}>\n              <summary>{layerName}</summary>\n              <div className=\"metadata-container\">\n                <table>\n                  <tbody>\n                    {Object.entries(metadataRecord)\n                      .map(([key, value]) => (\n                        <tr key={key}>\n                          <th title={key}>{key}</th>\n                          <td title={value}>{value}</td>\n                        </tr>\n                      ))}\n                  </tbody>\n                </table>\n              </div>\n            </details>\n          ) : null))}\n    </div>\n  );\n}\n","import React, { useEffect, useMemo } from 'react';\nimport { useReady } from '../hooks';\nimport { useDescription, useRasterData } from '../data-hooks';\nimport { useCoordination, useLoaders } from '../../app/state/hooks';\nimport { COMPONENT_COORDINATION_TYPES } from '../../app/state/coordination';\nimport TitleInfo from '../TitleInfo';\nimport Description from './Description';\n\nconst DESCRIPTION_DATA_TYPES = ['raster'];\n\n/**\n * A subscriber component for a text description component.\n * Also renders a table containing image metadata.\n * @param {object} props\n * @param {string} props.theme The current theme name.\n * @param {object} props.coordinationScopes The mapping from coordination types to coordination\n * scopes.\n * @param {function} props.removeGridComponent The callback function to pass to TitleInfo,\n * to call when the component has been removed from the grid.\n * @param {string} props.title The component title.\n */\nexport default function DescriptionSubscriber(props) {\n  const {\n    coordinationScopes,\n    description: descriptionOverride,\n    removeGridComponent,\n    theme,\n    title = 'Data Set',\n  } = props;\n\n  const loaders = useLoaders();\n\n  // Get \"props\" from the coordination space.\n  const [{\n    dataset,\n    spatialRasterLayers: rasterLayers,\n  }] = useCoordination(COMPONENT_COORDINATION_TYPES.description, coordinationScopes);\n\n  const [\n    isReady,\n    setItemIsReady,\n    setItemIsNotReady, // eslint-disable-line no-unused-vars\n    resetReadyItems,\n  ] = useReady(\n    DESCRIPTION_DATA_TYPES,\n  );\n\n  // Reset loader progress when the dataset has changed.\n  useEffect(() => {\n    resetReadyItems();\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  // Get data from loaders using the data hooks.\n  const [description] = useDescription(loaders, dataset);\n  const [raster, imageLayerLoaders, imageLayerMeta] = useRasterData(\n    loaders, dataset, setItemIsReady, () => {}, false,\n  );\n\n  const metadata = useMemo(() => {\n    const result = new Map();\n    if (rasterLayers && rasterLayers.length > 0 && raster && imageLayerMeta && imageLayerLoaders) {\n      rasterLayers.forEach((layer) => {\n        if (imageLayerMeta[layer.index]) {\n          // Want to ensure that layer index is a string.\n          const { format } = imageLayerLoaders[layer.index].metadata;\n          result.set(`${layer.index}`, {\n            name: raster.meta[layer.index].name,\n            metadata: format && format(),\n          });\n        }\n      });\n    }\n    return result;\n  }, [raster, rasterLayers, imageLayerMeta, imageLayerLoaders]);\n\n  return (\n    <TitleInfo\n      title={title}\n      removeGridComponent={removeGridComponent}\n      isScroll\n      theme={theme}\n      isReady={isReady}\n    >\n      <Description\n        description={descriptionOverride || description}\n        metadata={metadata}\n      />\n    </TitleInfo>\n  );\n}\n","import React, {\n  useMemo, useEffect, useRef, Suspense, useState,\n} from 'react';\nimport ReactDOM from 'react-dom';\nimport dynamicImportPolyfill from 'dynamic-import-polyfill';\nimport register from 'higlass-register';\nimport { ZarrMultivecDataFetcher } from 'higlass-zarr-datafetchers';\nimport packageJson from '../../../package.json';\nimport { createWarningComponent, asEsModule } from '../utils';\nimport { useGridItemSize } from '../hooks';\nimport {\n  useCoordination,\n} from '../../app/state/hooks';\nimport { COMPONENT_COORDINATION_TYPES } from '../../app/state/coordination';\n\nconst PIXI_BUNDLE_VERSION = packageJson.dependencies['window-pixi'];\nconst HIGLASS_BUNDLE_VERSION = packageJson.dependencies.higlass;\nconst BUNDLE_FILE_EXT = process.env.NODE_ENV === 'development' ? 'js' : 'min.js';\nconst PIXI_BUNDLE_URL = `https://unpkg.com/window-pixi@${PIXI_BUNDLE_VERSION}/dist/pixi.${BUNDLE_FILE_EXT}`;\nconst HIGLASS_BUNDLE_URL = `https://unpkg.com/higlass@${HIGLASS_BUNDLE_VERSION}/dist/hglib.${BUNDLE_FILE_EXT}`;\n\n\n// Initialize the dynamic __import__() function.\ndynamicImportPolyfill.initialize();\n\n// Register the zarr-multivec plugin data fetcher.\n// References:\n// https://github.com/higlass/higlass-register\n// https://github.com/higlass/higlass-zarr-datafetchers\nregister(\n  { dataFetcher: ZarrMultivecDataFetcher, config: ZarrMultivecDataFetcher.config },\n  { pluginType: 'dataFetcher' },\n);\n\n// Lazy load the HiGlass React component,\n// using dynamic imports with absolute URLs.\nconst HiGlassComponent = React.lazy(() => {\n  if (!window.React) {\n    window.React = React;\n  }\n  if (!window.ReactDOM) {\n    window.ReactDOM = ReactDOM;\n  }\n  return new Promise((resolve) => {\n    const handleImportError = (e) => {\n      console.warn(e);\n      resolve(asEsModule(createWarningComponent({\n        title: 'Could not load HiGlass',\n        message: 'The HiGlass scripts could not be dynamically imported.',\n      })));\n    };\n      // eslint-disable-next-line no-undef\n    __import__(PIXI_BUNDLE_URL).then(() => {\n      // eslint-disable-next-line no-undef\n      __import__(HIGLASS_BUNDLE_URL).then(() => {\n        // React.lazy promise must return an ES module with the\n        // component as the default export.\n        resolve(asEsModule(window.hglib.HiGlassComponent));\n      }).catch(handleImportError);\n    }).catch(handleImportError);\n  });\n});\n\n// Use an arbitrary size for normalization of the zoom level.\n// (800 means 800 px width for the full genome)\nconst HG_SIZE = 800;\n\n/**\n   * A wrapper around HiGlass (http://higlass.io/).\n   * The HiGlassComponent react component is loaded lazily.\n   * @prop {object} hgViewConfig A HiGlass viewconfig object to pass\n   * to the HiGlassComponent viewConfig prop.\n   * @prop {object} hgOptions An optional HiGlass object to pass\n   * to the HiGlassComponent hgOptions prop.\n   * @prop {function} removeGridComponent A grid component removal handler\n   * to pass to the TitleInfo component.\n   * @prop {function} onReady A callback function to signal that the component is ready.\n   */\nexport default function HiGlassLazy(props) {\n  const {\n    coordinationScopes,\n    theme,\n    hgViewConfig: hgViewConfigProp,\n    hgOptions: hgOptionsProp,\n    genomeSize,\n    height,\n  } = props;\n\n  // Get \"props\" from the coordination space.\n  const [{\n    genomicZoomX,\n    genomicZoomY,\n    genomicTargetX,\n    genomicTargetY,\n  }, {\n    setGenomicZoomX,\n    setGenomicZoomY,\n    setGenomicTargetX,\n    setGenomicTargetY,\n  }] = useCoordination(COMPONENT_COORDINATION_TYPES.higlass, coordinationScopes);\n\n  // eslint-disable-next-line no-unused-vars\n  const [width, computedHeight, containerRef] = useGridItemSize();\n  const [hgInstance, setHgInstance] = useState();\n  const isActiveRef = useRef();\n\n  const hgOptions = useMemo(() => ({\n    ...hgOptionsProp,\n    theme,\n  }), [hgOptionsProp, theme]);\n\n  const hgViewConfig = useMemo(() => {\n    // HiGlass needs the start and end absolute genome coordinates\n    const centerX = genomicTargetX;\n    const genomesPerUnitX = genomeSize / (2 ** genomicZoomX);\n    const unitX = width / HG_SIZE;\n    const initialXDomain = [\n      centerX - genomesPerUnitX * unitX / 2,\n      centerX + genomesPerUnitX * unitX / 2,\n    ];\n    const centerY = genomicTargetY;\n    const genomesPerUnitY = genomeSize / (2 ** genomicZoomY);\n    const unitY = height / HG_SIZE;\n    const initialYDomain = [\n      centerY - genomesPerUnitY * unitY / 2,\n      centerY + genomesPerUnitY * unitY / 2,\n    ];\n    return {\n      editable: false,\n      zoomFixed: false,\n      trackSourceServers: [\n        '//higlass.io/api/v1',\n      ],\n      exportViewUrl: '//higlass.io/api/v1/viewconfs',\n      views: [\n        {\n          uid: 'main',\n          ...hgViewConfigProp,\n          initialXDomain,\n          initialYDomain,\n        },\n      ],\n      zoomLocks: {\n        locksByViewUid: {},\n        locksDict: {},\n      },\n      locationLocks: {\n        locksByViewUid: {},\n        locksDict: {},\n      },\n      valueScaleLocks: {\n        locksByViewUid: {},\n        locksDict: {},\n      },\n    };\n  }, [genomicTargetX, genomeSize, genomicZoomX, width, genomicTargetY,\n    genomicZoomY, height, hgViewConfigProp]);\n\n  useEffect(() => {\n    const handleMouseEnter = () => {\n      isActiveRef.current = true;\n    };\n    const handleMouseLeave = () => {\n      isActiveRef.current = false;\n    };\n    const container = containerRef.current;\n    container.addEventListener('mouseenter', handleMouseEnter);\n    container.addEventListener('mouseleave', handleMouseLeave);\n    return () => {\n      container.removeEventListener('mouseenter', handleMouseEnter);\n      container.removeEventListener('mouseenter', handleMouseLeave);\n    };\n  }, [containerRef]);\n\n\n  useEffect(() => {\n    if (!hgInstance) {\n      return () => {};\n    }\n    hgInstance.api.on('viewConfig', (viewConfigString) => {\n      // Only set if the user mouse is over this component (\"is active\").\n      // Otherwise, this could be an initial on viewConfig change callback from a sibling,\n      // which will cause an infinite loop.\n      if (!isActiveRef.current) {\n        return;\n      }\n      const viewConfig = JSON.parse(viewConfigString);\n      const xDomain = viewConfig.views[0].initialXDomain;\n      const yDomain = viewConfig.views[0].initialYDomain;\n\n      const nextGenomicZoomX = Math.log2(\n        genomeSize / ((xDomain[1] - xDomain[0]) * (HG_SIZE / width)),\n      );\n      const nextGenomicZoomY = Math.log2(\n        genomeSize / ((yDomain[1] - yDomain[0]) * (HG_SIZE / height)),\n      );\n      const nextGenomicTargetX = xDomain[0] + (xDomain[1] - xDomain[0]) / 2;\n      const nextGenomicTargetY = yDomain[0] + (yDomain[1] - yDomain[0]) / 2;\n      setGenomicZoomX(nextGenomicZoomX);\n      setGenomicZoomY(nextGenomicZoomY);\n      setGenomicTargetX(nextGenomicTargetX);\n      setGenomicTargetY(nextGenomicTargetY);\n    });\n    return () => hgInstance.api.off('viewConfig');\n  }, [hgInstance, genomeSize, width, height, setGenomicZoomX, setGenomicZoomY,\n    setGenomicTargetX, setGenomicTargetY]);\n\n  return (\n    <div className=\"higlass-wrapper-parent\">\n      <div className=\"higlass-wrapper\" ref={containerRef} style={{ height: `${height}px` }}>\n        <Suspense fallback={<div>Loading...</div>}>\n          <HiGlassComponent\n            ref={setHgInstance}\n            zoomFixed={false}\n            viewConfig={hgViewConfig}\n            options={hgOptions}\n          />\n        </Suspense>\n      </div>\n    </div>\n  );\n}\n\nHiGlassLazy.defaultProps = {\n  hgOptions: {\n    bounded: true,\n    pixelPreciseMarginPadding: true,\n    containerPaddingX: 0,\n    containerPaddingY: 0,\n    sizeMode: 'default',\n  },\n  genomeSize: 3100000000,\n};\n","import React from 'react';\nimport TitleInfo from '../TitleInfo';\nimport { useReady, useUrls, useGridItemSize } from '../hooks';\nimport HiGlassLazy from './HiGlassLazy';\n\nconst HIGLASS_DATA_TYPES = [];\n\n/**\n * A wrapper around HiGlass (http://higlass.io/).\n * The HiGlassComponent react component is loaded lazily.\n * @prop {object} hgViewConfig A HiGlass viewconfig object to pass\n * to the HiGlassComponent viewConfig prop.\n * @prop {object} hgOptions An optional HiGlass object to pass\n * to the HiGlassComponent hgOptions prop.\n * @prop {function} removeGridComponent A grid component removal handler\n * to pass to the TitleInfo component.\n * @prop {function} onReady A callback function to signal that the component is ready.\n */\nexport default function HiGlassSubscriber(props) {\n  const {\n    coordinationScopes,\n    theme,\n    hgViewConfig,\n    removeGridComponent,\n  } = props;\n\n  // eslint-disable-next-line no-unused-vars\n  const [width, height, containerRef] = useGridItemSize();\n\n  const [\n    isReady,\n    setItemIsReady, // eslint-disable-line no-unused-vars\n    setItemIsNotReady, // eslint-disable-line no-unused-vars\n    resetReadyItems, // eslint-disable-line no-unused-vars\n  ] = useReady(\n    HIGLASS_DATA_TYPES,\n  );\n  // eslint-disable-next-line no-unused-vars\n  const [urls, addUrl, resetUrls] = useUrls();\n\n  return (\n    <div className=\"higlass-title-wrapper\">\n      <TitleInfo\n        title=\"HiGlass\"\n        removeGridComponent={removeGridComponent}\n        theme={theme}\n        isReady={isReady}\n        urls={urls}\n      >\n        <div className=\"higlass-lazy-wrapper\" ref={containerRef}>\n          <HiGlassLazy\n            coordinationScopes={coordinationScopes}\n            theme={theme}\n            hgViewConfig={hgViewConfig}\n            height={height}\n          />\n        </div>\n      </TitleInfo>\n    </div>\n  );\n}\n","import React, {\n  useMemo, useEffect,\n} from 'react';\nimport isEqual from 'lodash/isEqual';\nimport { sum } from 'd3-array';\nimport TitleInfo from '../TitleInfo';\nimport { useReady, useUrls, useGridItemSize } from '../hooks';\nimport {\n  useCoordination, useLoaders,\n} from '../../app/state/hooks';\nimport { COMPONENT_COORDINATION_TYPES } from '../../app/state/coordination';\nimport { useGenomicProfilesData } from '../data-hooks';\nimport HiGlassLazy from './HiGlassLazy';\n\nconst GENOMIC_PROFILES_DATA_TYPES = ['genomic-profiles'];\n\nconst REFERENCE_TILESETS = {\n  hg38: {\n    chromosomes: 'NyITQvZsS_mOFNlz5C2LJg',\n    genes: 'P0PLbQMwTYGy-5uPIQid7A',\n  },\n  hg19: {\n    chromosomes: 'N12wVGG9SPiTkk03yUayUw',\n    genes: 'OHJakQICQD6gTD7skx4EWA',\n  },\n  mm9: {\n    chromosomes: 'WAVhNHYxQVueq6KulwgWiQ',\n    genes: 'GUm5aBiLRCyz2PsBea7Yzg',\n  },\n  mm10: {\n    chromosomes: 'EtrWT0VtScixmsmwFSd7zg',\n    genes: 'QDutvmyiSrec5nX4pA5WGQ',\n  },\n};\n\n/**\n * A component for visualization of genomic profiles\n * with genome-wide bar plots.\n * @param {object} props The component props.\n * @param {string} props.theme The current theme name.\n * @param {object} props.coordinationScopes The mapping from coordination types to coordination\n * scopes.\n * @param {function} props.removeGridComponent The callback function to pass to TitleInfo,\n * to call when the component has been removed from the grid.\n * @param {string} props.profileTrackUidKey The key in the genomic profiles row_info that identifies\n * each track. By default, 'path'.\n * @param {string} props.profileTrackNameKey The key in the genomic profiles row_info that\n * gives a name for each track. By default, null. When null is provided, uses the\n * profileTrackUidKey for both UID and name. If UID values are path arrays,\n * they will be converted to name strings.\n * @param {string} props.higlassServer The URL for the higlass server used to retreive\n * reference tilesets for the chromosome and gene annotations.\n * @param {string} props.assembly The genome assembly to use for the reference\n * tilesets for the chromosome and gene annotations.\n * @param {string} props.title The title of the component.\n */\nexport default function GenomicProfilesSubscriber(props) {\n  const {\n    coordinationScopes,\n    theme,\n    removeGridComponent,\n    profileTrackUidKey = 'path',\n    profileTrackNameKey = null,\n    higlassServer = 'https://higlass.io/api/v1',\n    assembly = 'hg38',\n    title = 'Genomic Profiles',\n  } = props;\n\n  // eslint-disable-next-line no-unused-vars\n  const [width, height, containerRef] = useGridItemSize();\n  const loaders = useLoaders();\n\n  // Get \"props\" from the coordination space.\n  const [{\n    dataset,\n    cellSetColor,\n    cellSetSelection,\n  }] = useCoordination(\n    COMPONENT_COORDINATION_TYPES.genomicProfiles,\n    coordinationScopes,\n  );\n\n  // eslint-disable-next-line no-unused-vars\n  const [\n    isReady,\n    setItemIsReady,\n    setItemIsNotReady, // eslint-disable-line no-unused-vars\n    resetReadyItems,\n  ] = useReady(\n    GENOMIC_PROFILES_DATA_TYPES,\n  );\n    // eslint-disable-next-line no-unused-vars\n  const [urls, addUrl, resetUrls] = useUrls();\n\n  const [genomicProfilesAttrs] = useGenomicProfilesData(\n    loaders, dataset, setItemIsReady, addUrl, true,\n  );\n\n  const hgViewConfig = useMemo(() => {\n    if (!genomicProfilesAttrs || urls.length !== 1) {\n      return null;\n    }\n    // Get the URL to the data file from the downloadable URLs array.\n    const { url } = urls[0];\n\n    // Set up the colors to use in the HiGlass view config based on the current theme.\n    const foregroundColor = (theme === 'dark' ? '#C0C0C0' : '#000000');\n    const backgroundColor = (theme === 'dark' ? '#000000' : '#f1f1f1');\n    const dimColor = (theme === 'dark' ? 'dimgray' : 'silver');\n\n    // Define the \"reference tracks\" for chromosome labels and gene annotations.\n    const referenceTracks = [\n      {\n        type: 'horizontal-chromosome-labels',\n        server: higlassServer,\n        tilesetUid: REFERENCE_TILESETS[assembly].chromosomes,\n        uid: 'chromosome-labels',\n        options: {\n          color: foregroundColor,\n          fontSize: 12,\n          fontIsLeftAligned: false,\n          showMousePosition: true,\n          mousePositionColor: foregroundColor,\n        },\n        height: 30,\n      },\n      {\n        type: 'horizontal-gene-annotations',\n        server: higlassServer,\n        tilesetUid: REFERENCE_TILESETS[assembly].genes,\n        uid: 'gene-annotations',\n        options: {\n          name: 'Gene Annotations (hg38)',\n          fontSize: 10,\n          labelPosition: 'hidden',\n          labelLeftMargin: 0,\n          labelRightMargin: 0,\n          labelTopMargin: 0,\n          labelBottomMargin: 0,\n          minHeight: 24,\n          geneAnnotationHeight: 16,\n          geneLabelPosition: 'outside',\n          geneStrandSpacing: 4,\n          showMousePosition: true,\n          mousePositionColor: foregroundColor,\n          plusStrandColor: foregroundColor,\n          minusStrandColor: foregroundColor,\n          labelColor: 'black',\n          labelBackgroundColor: backgroundColor,\n          trackBorderWidth: 0,\n          trackBorderColor: 'black',\n        },\n        height: 70,\n      },\n    ];\n    // Determine the heights of each profile track by subtracting the\n    // reference track heights from the component height, then\n    // dividing by the number of profiles.\n    const referenceTracksHeightSum = sum(referenceTracks.map(t => t.height));\n    const profileTracksHeightSum = height - referenceTracksHeightSum - 10;\n    const profileTrackHeight = profileTracksHeightSum / genomicProfilesAttrs.row_infos.length;\n    const profileTracks = genomicProfilesAttrs.row_infos.map((rowInfo, i) => {\n      // Get the uid for the HiGlass track.\n      const trackUid = rowInfo[profileTrackUidKey];\n      // When profiles correspond to cell sets, the profile UID will be the cell set path array.\n      const isPath = Array.isArray(trackUid);\n      // Get the name for the HiGlass track: try the name key first,\n      // then try the tail of the path, and otherwise the track UID.\n      // eslint-disable-next-line no-nested-ternary\n      const trackName = profileTrackNameKey\n        ? rowInfo[profileTrackNameKey]\n        : (isPath ? trackUid[trackUid.length - 1] : trackUid);\n      // If the uid is a path, then try to get the corresponding cell set's color,\n      // if it is currently selected.\n      const setInSelection = isPath ? cellSetSelection?.find(s => isEqual(s, trackUid)) : false;\n      const setColor = isPath ? cellSetColor?.find(s => isEqual(s.path, trackUid))?.color : null;\n      // Get the track UID as a string before passing to HiGlass.\n      const trackUidString = isPath ? trackUid.join('__') : trackUid;\n      // Create the HiGlass track definition for this profile.\n      const track = {\n        type: 'horizontal-bar',\n        uid: `bar-track-${trackUidString}`,\n        data: {\n          type: 'zarr-multivec',\n          url,\n          row: i,\n        },\n        options: {\n          name: trackName,\n          showMousePosition: true,\n          mousePositionColor: foregroundColor,\n          labelColor: (theme === 'dark' ? 'white' : 'black'),\n          labelBackgroundColor: (theme === 'dark' ? 'black' : 'white'),\n          labelShowAssembly: false,\n        },\n        height: profileTrackHeight,\n      };\n      // Set the track color if it is available.\n      if (setColor && setInSelection) {\n        const c = setColor;\n        track.options.barFillColor = `rgb(${c[0]},${c[1]},${c[2]})`;\n      } else {\n        track.options.barFillColor = dimColor;\n      }\n      return track;\n    });\n\n    // Create the higlass view.\n    // The HiGlassLazy component will fill in the fields 'uid',\n    // 'initialXDomain', and 'initialYDomain'.\n    const hgView = {\n      tracks: {\n        top: [\n          ...referenceTracks,\n          ...profileTracks,\n        ],\n        left: [],\n        center: [],\n        right: [],\n        bottom: [],\n        whole: [],\n        gallery: [],\n      },\n      layout: {\n        w: 12,\n        h: 12,\n        x: 0,\n        y: 0,\n        static: false,\n      },\n    };\n    return hgView;\n  }, [genomicProfilesAttrs, urls, theme, height, profileTrackUidKey,\n    profileTrackNameKey, cellSetSelection, cellSetColor,\n    higlassServer, assembly]);\n\n  // Reset file URLs and loader progress when the dataset has changed.\n  useEffect(() => {\n    resetUrls();\n    resetReadyItems();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  return (\n    <div className=\"higlass-title-wrapper\">\n      <TitleInfo\n        title={title}\n        removeGridComponent={removeGridComponent}\n        theme={theme}\n        isReady={isReady}\n        urls={urls}\n      >\n        <div className=\"higlass-lazy-wrapper\" ref={containerRef}>\n          {hgViewConfig ? (\n            <HiGlassLazy\n              coordinationScopes={coordinationScopes}\n              theme={theme}\n              hgViewConfig={hgViewConfig}\n              height={height}\n            />\n          ) : null}\n        </div>\n      </TitleInfo>\n    </div>\n  );\n}\n","import React from 'react';\nimport clamp from 'lodash/clamp';\nimport { VegaPlot, VEGA_THEMES } from '../vega';\n\n/**\n * Gene expression histogram displayed as a bar chart,\n * implemented with the VegaPlot component.\n * @param {object} props\n * @param {string[]} props.geneSelection The list of genes\n * currently selected.\n * @param {object[]} props.data The expression data, an array\n * of objects with properties `value` and `gene`.\n * @param {string} props.theme The name of the current Vitessce theme.\n * @param {number} props.width The container width.\n * @param {number} props.height The container height.\n * @param {number} props.marginRight The size of the margin\n * on the right side of the plot, to account for the vega menu button.\n * By default, 90.\n * @param {number} props.marginBottom The size of the margin\n * on the bottom of the plot, to account for long x-axis labels.\n * By default, 50.\n */\nexport default function ExpressionHistogram(props) {\n  const {\n    geneSelection,\n    data,\n    theme,\n    width,\n    height,\n    marginRight = 90,\n    marginBottom = 50,\n  } = props;\n\n  const xTitle = geneSelection && geneSelection.length >= 1\n    ? 'Normalized Expression Value'\n    : 'Total Normalized Transcript Count';\n\n  const spec = {\n    mark: { type: 'bar' },\n    encoding: {\n      x: {\n        field: 'value',\n        type: 'quantitative',\n        bin: { maxbins: 50 },\n        title: xTitle,\n      },\n      y: {\n        type: 'quantitative',\n        aggregate: 'count',\n        title: 'Number of Cells',\n      },\n      color: { value: 'gray' },\n    },\n    width: clamp(width - marginRight, 10, Infinity),\n    height: clamp(height - marginBottom, 10, Infinity),\n    config: VEGA_THEMES[theme],\n  };\n\n  return (\n    <VegaPlot\n      data={data}\n      spec={spec}\n    />\n  );\n}\n","import React, { useMemo, useEffect } from 'react';\nimport { sum } from 'd3-array';\n\nimport TitleInfo from '../TitleInfo';\nimport { useCoordination, useLoaders } from '../../app/state/hooks';\nimport { COMPONENT_COORDINATION_TYPES } from '../../app/state/coordination';\nimport { useUrls, useReady, useGridItemSize } from '../hooks';\nimport { useExpressionMatrixData, useGeneSelection } from '../data-hooks';\nimport ExpressionHistogram from './ExpressionHistogram';\n\nconst EXPRESSION_HISTOGRAM_DATA_TYPES = ['expression-matrix'];\n\n/**\n * A subscriber component for `ExpressionHistogram`,\n * which listens for gene selection updates and\n * `GRID_RESIZE` events.\n * @param {object} props\n * @param {function} props.removeGridComponent The grid component removal function.\n * @param {object} props.coordinationScopes An object mapping coordination\n * types to coordination scopes.\n * @param {string} props.theme The name of the current Vitessce theme.\n */\nexport default function ExpressionHistogramSubscriber(props) {\n  const {\n    coordinationScopes,\n    removeGridComponent,\n    theme,\n  } = props;\n\n  const loaders = useLoaders();\n\n  // Get \"props\" from the coordination space.\n  const [{\n    dataset,\n    geneSelection,\n  }] = useCoordination(COMPONENT_COORDINATION_TYPES.expressionHistogram, coordinationScopes);\n\n  const [width, height, containerRef] = useGridItemSize();\n  const [urls, addUrl, resetUrls] = useUrls();\n  const [\n    isReady,\n    setItemIsReady,\n    setItemIsNotReady, // eslint-disable-line no-unused-vars\n    resetReadyItems,\n  ] = useReady(\n    EXPRESSION_HISTOGRAM_DATA_TYPES,\n  );\n\n  // Reset file URLs and loader progress when the dataset has changed.\n  useEffect(() => {\n    resetUrls();\n    resetReadyItems();\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  // Get data from loaders using the data hooks.\n  const [expressionMatrix] = useExpressionMatrixData(\n    loaders, dataset, setItemIsReady, addUrl, true,\n  );\n  // Get data from loaders using the data hooks.\n  const [expressionData] = useGeneSelection(\n    loaders, dataset, setItemIsReady, false, geneSelection, setItemIsNotReady,\n  );\n\n  const firstGeneSelected = geneSelection && geneSelection.length >= 1\n    ? geneSelection[0]\n    : null;\n\n  // From the expression matrix and the list of selected genes,\n  // generate the array of data points for the histogram.\n  const data = useMemo(() => {\n    if (firstGeneSelected && expressionMatrix && expressionData) {\n      // Create new cellColors map based on the selected gene.\n      return Array.from(expressionData[0]).map((_, index) => {\n        const value = expressionData[0][index];\n        const normValue = value * 100 / 255;\n        return { value: normValue, gene: firstGeneSelected };\n      });\n    }\n    if (expressionMatrix) {\n      const numGenes = expressionMatrix.cols.length;\n      return expressionMatrix.rows.map((cellId, cellIndex) => {\n        const values = expressionMatrix.matrix\n          .subarray(cellIndex * numGenes, (cellIndex + 1) * numGenes);\n        const sumValue = sum(values) * 100 / 255;\n        return { value: sumValue, gene: null };\n      });\n    }\n    return null;\n  }, [expressionMatrix, firstGeneSelected, expressionData]);\n\n  return (\n    <TitleInfo\n      title={`Expression Histogram${(firstGeneSelected ? ` (${firstGeneSelected})` : '')}`}\n      removeGridComponent={removeGridComponent}\n      urls={urls}\n      theme={theme}\n      isReady={isReady}\n    >\n      <div ref={containerRef} className=\"vega-container\">\n        <ExpressionHistogram\n          geneSelection={geneSelection}\n          data={data}\n          theme={theme}\n          width={width}\n          height={height}\n        />\n      </div>\n    </TitleInfo>\n  );\n}\n","import { useMemo } from 'react';\nimport { mergeCellSets } from '../utils';\nimport { treeToObjectsBySetNames, treeToSetSizesBySetNames } from './cell-set-utils';\n\n/**\n * Get expression data for the cells\n * in the selected cell sets.\n * @param {object} expressionMatrix\n * @param {string[]} expressionMatrix.rows Cell IDs.\n * @param {string[]} expressionMatrix.cols Gene names.\n * @param {Uint8Array} expressionMatrix.matrix The\n * flattened expression matrix as a typed array.\n * @param {object} cellSets The cell sets from the dataset.\n * @param {object} additionalCellSets The user-defined cell sets\n * from the coordination space.\n * @param {array} geneSelection Array of selected genes.\n * @param {array} cellSetSelection Array of selected cell set paths.\n * @param {object[]} cellSetColor Array of objects with properties\n * @param {string} theme \"light\" or \"dark\" for the vitessce theme\n * `path` and `color`.\n */\nexport function useExpressionByCellSet(\n  expressionData, expressionDataAttrs, cellSets, additionalCellSets,\n  geneSelection, cellSetSelection, cellSetColor, useGeneExpressionTransform,\n  theme,\n) {\n  const mergedCellSets = useMemo(\n    () => mergeCellSets(cellSets, additionalCellSets),\n    [cellSets, additionalCellSets],\n  );\n\n  // From the expression matrix and the list of selected genes / cell sets,\n  // generate the array of data points for the plot.\n  const [expressionArr, expressionMax] = useMemo(() => {\n    if (mergedCellSets && cellSetSelection\n        && geneSelection && geneSelection.length >= 1\n        && expressionData\n    ) {\n      const cellObjects = treeToObjectsBySetNames(\n        mergedCellSets, cellSetSelection, cellSetColor, theme,\n      );\n\n      const firstGeneSelected = geneSelection[0];\n      // Create new cellColors map based on the selected gene.\n      let exprMax = -Infinity;\n      const cellIndices = {};\n      for (let i = 0; i < expressionDataAttrs.rows.length; i += 1) {\n        cellIndices[expressionDataAttrs.rows[i]] = i;\n      }\n      const exprValues = cellObjects.map((cell) => {\n        const cellIndex = cellIndices[cell.obsId];\n        const value = expressionData[0][cellIndex];\n        const normValue = value * 100 / 255;\n        const transformedValue = useGeneExpressionTransform ? Math.log(1 + normValue) : normValue;\n        exprMax = Math.max(transformedValue, exprMax);\n        return { value: transformedValue, gene: firstGeneSelected, set: cell.name };\n      });\n      return [exprValues, exprMax];\n    }\n    return [null, null];\n  }, [expressionData, expressionDataAttrs, geneSelection, theme,\n    mergedCellSets, cellSetSelection, cellSetColor, useGeneExpressionTransform]);\n\n  // From the cell sets hierarchy and the list of selected cell sets,\n  // generate the array of set sizes data points for the bar plot.\n  const setArr = useMemo(() => (mergedCellSets && cellSetSelection && cellSetColor\n    ? treeToSetSizesBySetNames(mergedCellSets, cellSetSelection, cellSetColor, theme)\n    : []\n  ), [mergedCellSets, cellSetSelection, cellSetColor, theme]);\n\n  return [expressionArr, setArr, expressionMax];\n}\n","import React from 'react';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\nimport { useStyles } from '../shared-plot-options/styles';\nimport OptionsContainer from '../shared-plot-options/OptionsContainer';\n\nexport default function CellSetExpressionPlotOptions(props) {\n  const { toggleGeneExpressionTransform, useGeneExpressionTransform } = props;\n  const classes = useStyles();\n\n  function handleGeneExpressionTransformChange() {\n    toggleGeneExpressionTransform();\n  }\n\n  return (\n    <OptionsContainer>\n      <TableRow>\n        <TableCell className={classes.labelCell}>Log Transform</TableCell>\n        <TableCell className={classes.inputCell}>\n          <Checkbox\n            className={classes.checkbox}\n            checked={Boolean(useGeneExpressionTransform)}\n            onChange={handleGeneExpressionTransformChange}\n            name=\"scatterplot-option-cell-set-labels\"\n            color=\"default\"\n          />\n        </TableCell>\n      </TableRow>\n    </OptionsContainer>\n  );\n}\n","import React from 'react';\nimport clamp from 'lodash/clamp';\nimport { VegaPlot, VEGA_THEMES, DATASET_NAME } from '../vega';\nimport { colorArrayToString } from './utils';\n\n/**\n * Gene expression histogram displayed as a bar chart,\n * implemented with the VegaPlot component.\n * @param {object} props\n * @param {object[]} props.data The expression data, an array\n * of objects with properties `value`, `gene`, and `set`.\n * @param {number} props.domainMax The maximum gene expression value.\n * @param {object[]} props.colors An object for each\n * cell set, with properties `name` and `color`.\n * @param {string} props.theme The name of the current Vitessce theme.\n * @param {number} props.width The container width.\n * @param {number} props.height The container height.\n * @param {number} props.marginRight The size of the margin\n * on the right side of the plot, to account for the vega menu button.\n * By default, 90.\n * @param {number} props.marginBottom The size of the margin\n * on the bottom of the plot, to account for long x-axis labels.\n * Default is allowing the component to automatically determine the margin.\n * @param {boolean} props.useGeneExpressionTransform Boolean representing\n * whether or not the expression values are log-transformed.\n */\nexport default function CellSetExpressionPlot(props) {\n  const {\n    domainMax = 100,\n    colors,\n    data,\n    theme,\n    width,\n    height,\n    marginRight = 90,\n    marginBottom,\n    useGeneExpressionTransform,\n  } = props;\n  // Get the max characters in an axis label for autsizing the bottom margin.\n  const maxCharactersForLabel = data.reduce((acc, val) => {\n    // eslint-disable-next-line no-param-reassign\n    acc = acc === undefined || val.set.length > acc ? val.set.length : acc;\n    return acc;\n  }, 0);\n  // Use a square-root term because the angle of the labels is 45 degrees (see below)\n  // so the perpendicular distance to the bottom of the labels is proportional to the\n  // square root of the length of the labels along the imaginary hypotenuse.\n  // 30 is an estimate of the pixel size of a given character and seems to work well.\n  const autoMarginBottom = marginBottom\n    || 30 + Math.sqrt(maxCharactersForLabel / 2) * 30;\n  // Manually set the color scale so that Vega-Lite does\n  // not choose the colors automatically.\n  const colorScale = {\n    domain: colors.map(d => d.name),\n    range: colors.map(d => colorArrayToString(d.color)),\n  };\n\n  const plotWidth = clamp(width - marginRight, 10, Infinity);\n  const plotHeight = clamp(height - autoMarginBottom, 10, Infinity);\n\n  const numBands = colors.length;\n  const bandWidth = plotWidth / numBands;\n\n  const rectColor = (theme === 'dark' ? 'white' : 'black');\n\n  const spec = {\n    $schema: 'https://vega.github.io/schema/vega/v5.json',\n    description: 'A violin plot showing distributions of expression levels for selected cell sets.',\n    width: plotWidth,\n    height: plotHeight,\n    config: {\n      ...VEGA_THEMES[theme],\n      axisBand: {\n        bandPosition: 1,\n        tickExtra: true,\n        tickOffset: 0,\n      },\n    },\n\n    signals: [\n      { name: 'bandWidth', value: bandWidth },\n      { name: 'width', value: plotWidth },\n      { name: 'height', value: plotHeight },\n      { name: 'trim', value: true },\n    ],\n\n    data: [\n      {\n        name: 'density',\n        source: DATASET_NAME,\n        transform: [\n          {\n            type: 'kde',\n            field: 'value',\n            groupby: ['set'],\n            bandwidth: 0,\n            extent: [0, domainMax],\n          },\n        ],\n      },\n      {\n        name: 'stats',\n        source: DATASET_NAME,\n        transform: [\n          {\n            type: 'aggregate',\n            groupby: ['set'],\n            fields: ['value', 'value', 'value'],\n            ops: ['q1', 'median', 'q3'],\n            as: ['q1', 'median', 'q3'],\n          },\n        ],\n      },\n    ],\n\n    scales: [\n      {\n        name: 'layout',\n        type: 'band',\n        range: 'width',\n        domain: { data: DATASET_NAME, field: 'set' },\n      },\n      {\n        name: 'yscale',\n        type: 'linear',\n        range: 'height',\n        domain: [0, domainMax],\n      },\n      {\n        name: 'wscale',\n        type: 'linear',\n        range: [0, { signal: 'bandWidth' }],\n        domain: { data: 'density', field: 'density' },\n      },\n      {\n        name: 'wscaleReversed',\n        type: 'linear',\n        reverse: true,\n        range: [0, { signal: 'bandWidth' }],\n        domain: { data: 'density', field: 'density' },\n      },\n      {\n        name: 'color',\n        type: 'ordinal',\n        ...colorScale,\n      },\n    ],\n\n    axes: [\n      {\n        orient: 'left',\n        scale: 'yscale',\n        zindex: 1,\n        // title: useGeneExpressionTransform\n        //   ? 'Log-Normalized Expression Values' : 'Normalized Expression Values',\n        title: useGeneExpressionTransform\n          ? ['Log-Transformed', 'Normalized Expression Values']\n          : 'Normalized Expression Values',\n      },\n      {\n        orient: 'bottom',\n        scale: 'layout',\n        tickCount: 5,\n        zindex: 1,\n        title: 'Cell Set',\n        labelAngle: -45,\n        labelAlign: 'right',\n      },\n    ],\n\n    marks: [\n      {\n        type: 'group',\n        from: {\n          facet: {\n            data: 'density',\n            name: 'violin',\n            groupby: 'set',\n          },\n        },\n\n        encode: {\n          enter: {\n            xc: { scale: 'layout', field: 'set', band: 0.5 },\n            width: { signal: 'bandWidth' },\n            height: { signal: 'height' },\n          },\n        },\n\n        data: [\n          {\n            name: 'summary',\n            source: 'stats',\n            transform: [\n              {\n                type: 'filter',\n                expr: 'datum.set === parent.set',\n              },\n            ],\n          },\n        ],\n\n        marks: [\n          {\n            type: 'area',\n            orient: 'vertical',\n            from: { data: 'violin' },\n            encode: {\n              enter: {\n                fill: { scale: 'color', field: { parent: 'set' } },\n              },\n              update: {\n                width: { scale: 'wscale', field: 'density' },\n                xc: { signal: 'bandWidth / 2' },\n                y2: { scale: 'yscale', field: 'value' },\n                y: { scale: 'yscale', value: 0 },\n              },\n            },\n          },\n          {\n            type: 'area',\n            orient: 'vertical',\n            from: { data: 'violin' },\n            encode: {\n              enter: {\n                fill: { scale: 'color', field: { parent: 'set' } },\n              },\n              update: {\n                width: { scale: 'wscaleReversed', field: 'density' },\n                xc: { signal: 'bandWidth' },\n                y2: { scale: 'yscale', field: 'value' },\n                y: { scale: 'yscale', value: 0 },\n              },\n            },\n          },\n          {\n            type: 'rect',\n            from: { data: 'summary' },\n            encode: {\n              enter: {\n                fill: { value: rectColor },\n                width: { value: 2 },\n              },\n              update: {\n                y: { scale: 'yscale', field: 'q1' },\n                y2: { scale: 'yscale', field: 'q3' },\n                xc: { signal: 'bandWidth / 2' },\n              },\n            },\n          },\n          {\n            type: 'rect',\n            from: { data: 'summary' },\n            encode: {\n              enter: {\n                fill: { value: rectColor },\n                height: { value: 2 },\n                width: { value: 8 },\n              },\n              update: {\n                y: { scale: 'yscale', field: 'median' },\n                xc: { signal: 'bandWidth / 2' },\n              },\n            },\n          },\n        ],\n      },\n    ],\n  };\n\n  return (\n    <VegaPlot\n      data={data}\n      spec={spec}\n    />\n  );\n}\n","import React, { useEffect, useReducer } from 'react';\nimport TitleInfo from '../TitleInfo';\nimport { useCoordination, useLoaders } from '../../app/state/hooks';\nimport { COMPONENT_COORDINATION_TYPES } from '../../app/state/coordination';\nimport { useUrls, useReady, useGridItemSize } from '../hooks';\nimport { useGeneSelection, useExpressionAttrs, useCellSetsData } from '../data-hooks';\nimport { useExpressionByCellSet } from './hooks';\nimport CellSetExpressionPlotOptions from './CellSetExpressionPlotOptions';\n\nimport CellSetExpressionPlot from './CellSetExpressionPlot';\n\nconst CELL_SET_EXPRESSION_DATA_TYPES = ['cell-sets', 'expression-matrix'];\n\n/**\n * A subscriber component for `CellSetExpressionPlot`,\n * which listens for gene selection updates and\n * `GRID_RESIZE` events.\n * @param {object} props\n * @param {function} props.removeGridComponent The grid component removal function.\n * @param {object} props.coordinationScopes An object mapping coordination\n * types to coordination scopes.\n * @param {string} props.theme The name of the current Vitessce theme.\n */\nexport default function CellSetExpressionPlotSubscriber(props) {\n  const {\n    coordinationScopes,\n    removeGridComponent,\n    theme,\n  } = props;\n\n  const loaders = useLoaders();\n\n  // Get \"props\" from the coordination space.\n  const [{\n    dataset,\n    geneSelection,\n    geneExpressionTransform,\n    cellSetSelection,\n    cellSetColor,\n    additionalCellSets,\n  }, {\n    setGeneExpressionTransform,\n  }] = useCoordination(COMPONENT_COORDINATION_TYPES.cellSetExpression, coordinationScopes);\n\n  const [width, height, containerRef] = useGridItemSize();\n  const [urls, addUrl, resetUrls] = useUrls();\n  const [\n    isReady,\n    setItemIsReady,\n    setItemIsNotReady, // eslint-disable-line no-unused-vars\n    resetReadyItems,\n  ] = useReady(\n    CELL_SET_EXPRESSION_DATA_TYPES,\n  );\n\n  const [useGeneExpressionTransform, toggleGeneExpressionTransform] = useReducer((v) => {\n    const newValue = !v;\n    setGeneExpressionTransform(newValue ? 'log1p' : null);\n    return newValue;\n  }, geneExpressionTransform);\n\n  // Reset file URLs and loader progress when the dataset has changed.\n  useEffect(() => {\n    resetUrls();\n    resetReadyItems();\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  // Get data from loaders using the data hooks.\n  const [expressionData] = useGeneSelection(\n    loaders, dataset, setItemIsReady, false, geneSelection, setItemIsNotReady,\n  );\n  const [attrs] = useExpressionAttrs(\n    loaders, dataset, setItemIsReady, addUrl, false,\n  );\n  const [cellSets] = useCellSetsData(\n    loaders, dataset, setItemIsReady, addUrl, true,\n  );\n\n  const [expressionArr, setArr, expressionMax] = useExpressionByCellSet(\n    expressionData, attrs, cellSets, additionalCellSets,\n    geneSelection, cellSetSelection, cellSetColor, useGeneExpressionTransform,\n    theme,\n  );\n\n  const firstGeneSelected = geneSelection && geneSelection.length >= 1\n    ? geneSelection[0]\n    : null;\n  return (\n    <TitleInfo\n      title={`Expression by Cell Set${(firstGeneSelected ? ` (${firstGeneSelected})` : '')}`}\n      removeGridComponent={removeGridComponent}\n      urls={urls}\n      theme={theme}\n      isReady={isReady}\n      options={(\n        <CellSetExpressionPlotOptions\n          useGeneExpressionTransform={useGeneExpressionTransform}\n          toggleGeneExpressionTransform={toggleGeneExpressionTransform}\n        />\n      )}\n    >\n      <div ref={containerRef} className=\"vega-container\">\n        {expressionArr ? (\n          <CellSetExpressionPlot\n            domainMax={expressionMax}\n            colors={setArr}\n            data={expressionArr}\n            theme={theme}\n            width={width}\n            height={height}\n            useGeneExpressionTransform={useGeneExpressionTransform}\n          />\n        ) : (\n          <span>Select a gene.</span>\n        )}\n      </div>\n    </TitleInfo>\n  );\n}\n","import DescriptionSubscriber from '../components/description/DescriptionSubscriber';\nimport StatusSubscriber from '../components/status/StatusSubscriber';\nimport GenesSubscriber from '../components/genes/GenesSubscriber';\nimport CellSetsManagerSubscriber from '../components/sets/CellSetsManagerSubscriber';\nimport ScatterplotSubscriber from '../components/scatterplot/ScatterplotSubscriber';\nimport SpatialSubscriber from '../components/spatial/SpatialSubscriber';\nimport HeatmapSubscriber from '../components/heatmap/HeatmapSubscriber';\nimport LayerControllerSubscriber from '../components/layer-controller/LayerControllerSubscriber';\nimport HiGlassSubscriber from '../components/higlass/HiGlassSubscriber';\nimport CellSetSizesPlotSubscriber from '../components/sets/CellSetSizesPlotSubscriber';\nimport GenomicProfilesSubscriber from '../components/higlass/GenomicProfilesSubscriber';\nimport ExpressionHistogramSubscriber from '../components/genes/ExpressionHistogramSubscriber';\nimport CellSetExpressionPlotSubscriber from '../components/sets/CellSetExpressionPlotSubscriber';\n\nconst registry = {\n  description: DescriptionSubscriber,\n  status: StatusSubscriber,\n  genes: GenesSubscriber,\n  cellSets: CellSetsManagerSubscriber,\n  scatterplot: ScatterplotSubscriber,\n  spatial: SpatialSubscriber,\n  heatmap: HeatmapSubscriber,\n  layerController: LayerControllerSubscriber,\n  cellSetSizes: CellSetSizesPlotSubscriber,\n  expressionHistogram: ExpressionHistogramSubscriber,\n  genomicProfiles: GenomicProfilesSubscriber,\n  cellSetExpression: CellSetExpressionPlotSubscriber,\n  // The plain higlass component does not abstract away the HiGlass view config,\n  // so we probably want to avoid documenting it, only use it for development purposes.\n  higlass: HiGlassSubscriber,\n};\n\nexport function getComponent(name) {\n  const component = registry[name];\n  if (component === undefined) {\n    throw new Error(`Could not find definition for \"${name}\" in registry.`);\n  }\n  return registry[name];\n}\n","/* eslint-disable no-plusplus */\nimport packageJson from '../../package.json';\nimport { getNextScope } from '../utils';\nimport {\n  COORDINATION_TYPES,\n  DEFAULT_COORDINATION_VALUES,\n  COMPONENT_COORDINATION_TYPES,\n  AUTO_INDEPENDENT_COORDINATION_TYPES,\n} from './state/coordination';\nimport { SCHEMA_HANDLERS } from './view-config-versions';\n\n/**\n * Get a list of all unique scope names for a\n * particular coordination type, which exist in\n * a particular view config.\n * @param {object} config A view config object.\n * @param {string} coordinationType A coordination type,\n * for example 'spatialZoom' or 'dataset'.\n * @returns {string[]} Array of existing coordination scope names.\n */\nexport function getExistingScopesForCoordinationType(config, coordinationType) {\n  const spaceScopes = Object.keys(config?.coordinationSpace?.[coordinationType] || {});\n  const componentScopes = config.layout.map(c => c.coordinationScopes?.[coordinationType]);\n  return Array.from(new Set([...spaceScopes, ...componentScopes]));\n}\n\n/**\n * Give each component the same scope name for this coordination type.\n * @param {object} config A view config object.\n * @param {string} coordinationType A coordination type,\n * for example 'spatialZoom' or 'dataset'.\n * @param {*} scopeValue The initial value for the coordination scope,\n * to set in the coordination space.\n * @returns {object} The new view config.\n */\nfunction coordinateComponentsTogether(config, coordinationType, scopeValue) {\n  const scopeName = getNextScope(getExistingScopesForCoordinationType(config, coordinationType));\n  const newConfig = {\n    ...config,\n    coordinationSpace: {\n      ...config.coordinationSpace,\n      [coordinationType]: {\n        ...config?.coordinationSpace?.[coordinationType],\n        // Add the new scope name and value to the coordination space.\n        [scopeName]: scopeValue,\n      },\n    },\n    layout: config.layout.map(component => ({\n      ...component,\n      coordinationScopes: {\n        ...component.coordinationScopes,\n        // Only set the coordination scope if this component uses this coordination type,\n        // and the component is missing a coordination scope for this coordination type.\n        ...((\n          COMPONENT_COORDINATION_TYPES[component.component].includes(coordinationType)\n          && !component.coordinationScopes?.[coordinationType]\n        ) ? {\n          // Only set the new scope name if the scope name\n          // for this component and coordination type is currently undefined.\n            [coordinationType]: scopeName,\n          } : {}),\n      },\n    })),\n  };\n  return newConfig;\n}\n\n/**\n * Give each component a different scope name for this coordination type.\n * @param {object} config A view config object.\n * @param {string} coordinationType A coordination type,\n * for example 'spatialZoom' or 'dataset'.\n * @param {*} scopeValue The initial value for the coordination scope,\n * to set in the coordination space.\n * @returns {object} The new view config.\n */\nfunction coordinateComponentsIndependent(config, coordinationType, scopeValue) {\n  const newConfig = {\n    ...config,\n    layout: [...config.layout],\n  };\n  const newScopes = {};\n  newConfig.layout.forEach((component, i) => {\n    // Only set the coordination scope if this component uses this coordination type,\n    // and the component is missing a coordination scope for this coordination type.\n    if (COMPONENT_COORDINATION_TYPES[component.component].includes(coordinationType)\n      && !component.coordinationScopes?.[coordinationType]\n    ) {\n      const scopeName = getNextScope([\n        ...getExistingScopesForCoordinationType(config, coordinationType),\n        ...Object.keys(newScopes),\n      ]);\n      newScopes[scopeName] = scopeValue;\n      newConfig.layout[i] = {\n        ...component,\n        coordinationScopes: {\n          ...component.coordinationScopes,\n          [coordinationType]: scopeName,\n        },\n      };\n    }\n  });\n  newConfig.coordinationSpace = {\n    ...newConfig.coordinationSpace,\n    [coordinationType]: {\n      ...newConfig.coordinationSpace[coordinationType],\n      // Add the new scope name and value to the coordination space.\n      ...newScopes,\n    },\n  };\n  return newConfig;\n}\n\nfunction initializeAuto(config) {\n  let newConfig = config;\n  const { layout, datasets } = newConfig;\n\n  // For each coordination type, check whether it requires initialization.\n  Object.values(COORDINATION_TYPES).forEach((coordinationType) => {\n    // A coordination type requires coordination if at least one component is missing\n    // a (coordination type, coordination scope) tuple.\n    // Components may only use a subset of all coordination types.\n    const requiresCoordination = !layout\n      .every(c => (\n        !COMPONENT_COORDINATION_TYPES[c.component].includes(coordinationType)\n                || c.coordinationScopes?.[coordinationType]\n      ));\n    if (requiresCoordination) {\n      // Note that the default value may be undefined.\n      let defaultValue = DEFAULT_COORDINATION_VALUES[coordinationType];\n      // Check whether this is the special 'dataset' coordination type.\n      if (coordinationType === 'dataset' && datasets.length >= 1) {\n        // Use the first dataset ID as the default\n        // if there is at least one dataset.\n        defaultValue = datasets[0].uid;\n      }\n      // Use the list of \"independent\" coordination types\n      // to determine whether a particular coordination type\n      // should be initialized to\n      // a unique scope for every component (\"independent\")\n      // vs. the same scope for every component (\"together\").\n      if (AUTO_INDEPENDENT_COORDINATION_TYPES.includes(coordinationType)) {\n        newConfig = coordinateComponentsIndependent(newConfig, coordinationType, defaultValue);\n      } else {\n        newConfig = coordinateComponentsTogether(newConfig, coordinationType, defaultValue);\n      }\n    }\n  });\n\n  return newConfig;\n}\n\n\n/**\n * Initialize the view config:\n * - Fill in missing coordination objects with default values.\n * - Fill in missing component coordination scope mappings.\n *   based on the `initStrategy` specified in the view config.\n * Should be \"stable\": if run on the same view config twice, the return value the second\n * time should be identical to the return value the first time.\n * @param {object} config The view config prop.\n */\nexport function initialize(config) {\n  if (config.initStrategy === 'auto') {\n    return initializeAuto(config);\n  }\n  return config;\n}\n\nexport function upgradeAndValidate(oldConfig) {\n  // oldConfig object must have a `version` property.\n  let nextConfig = oldConfig;\n  let fromVersion;\n  let upgradeFunction; let\n    validateFunction;\n\n  do {\n    fromVersion = nextConfig.version;\n\n    if (!Object.keys(SCHEMA_HANDLERS).includes(fromVersion)) {\n      return [{\n        title: 'Config validation failed',\n        preformatted: 'Unknown config version.',\n      }, false];\n    }\n\n    [validateFunction, upgradeFunction] = SCHEMA_HANDLERS[fromVersion];\n\n    // Validate under the legacy schema before upgrading.\n    const validLegacy = validateFunction(nextConfig);\n    if (!validLegacy) {\n      const failureReason = JSON.stringify(validateFunction.errors, null, 2);\n      return [{\n        title: 'Config validation failed',\n        preformatted: failureReason,\n      }, false];\n    }\n\n    if (upgradeFunction) {\n      nextConfig = upgradeFunction(nextConfig);\n    }\n  } while (upgradeFunction);\n\n  // NOTE: Remove when a view config viewer/editor is available in UI.\n  console.groupCollapsed(`🚄 Vitessce (${packageJson.version}) view configuration`);\n  console.info(`data:,${JSON.stringify(nextConfig)}`);\n  console.info(JSON.stringify(nextConfig, null, 2));\n  console.groupEnd();\n\n  return [nextConfig, true];\n}\n","/* eslint-disable camelcase */\nimport React, { useEffect, useMemo } from 'react';\nimport {\n  ThemeProvider, StylesProvider,\n  createGenerateClassName,\n} from '@material-ui/core/styles';\nimport isEqual from 'lodash/isEqual';\nimport { muiTheme } from '../components/shared-mui/styles';\nimport {\n  ViewConfigProvider, createViewConfigStore,\n  AuxiliaryProvider, createAuxiliaryStore,\n} from './state/hooks';\n\nimport VitessceGrid from './VitessceGrid';\nimport Warning from './Warning';\nimport CallbackPublisher from './CallbackPublisher';\nimport { getComponent } from './component-registry';\nimport { initialize, upgradeAndValidate } from './view-config-utils';\n\nconst generateClassName = createGenerateClassName({\n  disableGlobal: true,\n});\n\n/**\n * The Vitessce component.\n * @param {object} props\n * @param {object} props.config A Vitessce view config.\n * If the config is valid, the VitessceGrid will be rendered as a child.\n * If the config is invalid, a Warning will be rendered instead.\n * @param {number} props.rowHeight Row height for grid layout. Optional.\n * @param {number} props.height Total height for grid layout. Optional.\n * @param {string} props.theme The theme, used for styling as\n * light or dark. Optional. By default, \"dark\"\n * @param {function} props.onWarn A callback for warning messages. Optional.\n * @param {function} props.onConfigChange A callback for view config\n * updates. Optional.\n * @param {function} props.onLoaderChange A callback for loader\n * updates. Optional.\n * @param {boolean} props.validateOnConfigChange Whether to validate\n * against the view config schema when publishing changes. Use for debugging\n * purposes, as this may have a performance impact. By default, false.\n */\nexport default function Vitessce(props) {\n  const {\n    config,\n    rowHeight,\n    height,\n    theme,\n    onWarn,\n    onConfigChange,\n    onLoaderChange,\n    validateOnConfigChange = false,\n  } = props;\n\n  // Process the view config and memoize the result:\n  // - Validate.\n  // - Upgrade, if legacy schema.\n  // - Validate after upgrade, if legacy schema.\n  // - Initialize (based on initStrategy).\n  const [configOrWarning, success] = useMemo(() => {\n    // If the config value is undefined, show a warning message.\n    if (!config) {\n      return [{\n        title: 'No such dataset',\n        unformatted: 'The dataset configuration could not be found.',\n      }, false];\n    }\n    // If the view config is missing a version, show a warning message.\n    if (!config.version) {\n      return [{\n        title: 'Missing version',\n        unformatted: 'The dataset configuration is missing a version, preventing validation.',\n      }, false];\n    }\n    // Check if this is a \"legacy\" view config.\n    const [upgradedConfig, upgradeSuccess] = upgradeAndValidate(config);\n    if (upgradeSuccess) {\n      // Initialize the view config according to the initStrategy.\n      const initializedConfig = initialize(upgradedConfig);\n      return [initializedConfig, true];\n    }\n    return [upgradedConfig, false];\n  }, [config]);\n\n  // Emit the upgraded/initialized view config\n  // to onConfigChange if necessary.\n  useEffect(() => {\n    if (success && !isEqual(configOrWarning, config) && onConfigChange) {\n      onConfigChange(configOrWarning);\n    }\n  }, [success, config, configOrWarning, onConfigChange]);\n\n  return success ? (\n    <StylesProvider generateClassName={generateClassName}>\n      <ThemeProvider theme={muiTheme[theme]}>\n        <ViewConfigProvider createStore={createViewConfigStore}>\n          <AuxiliaryProvider createStore={createAuxiliaryStore}>\n            <VitessceGrid\n              config={configOrWarning}\n              getComponent={getComponent}\n              rowHeight={rowHeight}\n              height={height}\n              theme={theme}\n            />\n            <CallbackPublisher\n              onWarn={onWarn}\n              onConfigChange={onConfigChange}\n              onLoaderChange={onLoaderChange}\n              validateOnConfigChange={validateOnConfigChange}\n            />\n          </AuxiliaryProvider>\n        </ViewConfigProvider>\n      </ThemeProvider>\n    </StylesProvider>\n  ) : (\n    <Warning\n      theme={theme}\n      {...configOrWarning}\n    />\n  );\n}\n","import React, { useEffect, useRef, useState } from 'react';\nimport { getConfig, listConfigs } from './api';\nimport Welcome from './Welcome';\nimport Warning from './Warning';\nimport Vitessce from './Vitessce';\n\nimport '../css/index.scss';\nimport '../../node_modules/react-grid-layout/css/styles.css';\nimport '../../node_modules/react-resizable/css/styles.css';\n\nfunction AwaitResponse(props) {\n  const {\n    response,\n    theme,\n  } = props;\n  const [isLoading, setIsLoading] = useState(true);\n  const responseRef = useRef();\n  useEffect(() => {\n    response.then((c) => {\n      responseRef.current = c;\n      setIsLoading(false);\n    });\n  }, [response]);\n  return (!isLoading ? React.createElement(responseRef.current) : <Warning title=\"Loading...\" theme={theme} />);\n}\n\nfunction preformattedDetails(response) {\n  return `\n    ok: ${response.ok}\n    status: ${response.status}\n    statusText: ${response.statusText}\n    redirected: ${response.redirected}\n    type: ${response.type}\n    url: ${response.url}`; // TODO: headers\n}\n\n\nfunction checkResponse(response, theme, debug) {\n  if (!response.ok) {\n    return Promise.resolve(\n      () => (\n        <Warning\n          title=\"Fetch response not OK\"\n          preformatted={preformattedDetails(response)}\n          theme={theme}\n        />\n      ),\n    );\n  }\n  return response.text().then((text) => {\n    try {\n      const config = JSON.parse(text);\n      return Promise.resolve(() => (\n        <Vitessce\n          config={config}\n          theme={theme}\n          // eslint-disable-next-line no-console\n          onConfigChange={debug ? console.log : undefined}\n          validateOnConfigChange={debug}\n        />\n      ));\n    } catch (e) {\n      return Promise.resolve(() => (\n        <Warning\n          title=\"Error parsing JSON\"\n          preformatted={preformattedDetails(response)}\n          unformatted={`${e.message}: ${text}`}\n          theme={theme}\n        />\n      ));\n    }\n  });\n}\n\n/**\n * Use the theme provided if it is valid, otherwise fall back to the 'dark' theme.\n * @param {string} theme A potentially invalid theme name.\n * @returns {string} A valid theme name.\n */\nfunction validateTheme(theme) {\n  return (['light', 'dark'].includes(theme) ? theme : 'dark');\n}\n\n/**\n * Convenience function for creating the minimal Vitessce demo and demo listing\n * components based on the current URL parameters.\n * @param {object} params\n * @param {number|null} params.rowHeight The row height to pass to the Vitessce grid.\n * Optional. By default, null.\n * @param {boolean} showBetaHeader Should the header which links to the beta documentation\n * website be rendered? Optional. By default, false.\n * @returns A component, either <Welcome/> or <Vitessce/> depending on the URL params.\n */\nexport function createApp(params) {\n  const { rowHeight = null, showBetaHeader = false } = params;\n  const urlParams = new URLSearchParams(window.location.search);\n  const datasetId = urlParams.get('dataset');\n  const debug = urlParams.get('debug') === 'true';\n  const datasetUrl = urlParams.get('url');\n  const showAll = urlParams.get('show') === 'all';\n  const theme = validateTheme(urlParams.get('theme'));\n\n  if (datasetId) {\n    const config = getConfig(datasetId);\n    return (\n      <Vitessce\n        config={config}\n        rowHeight={rowHeight}\n        theme={theme}\n        // eslint-disable-next-line no-console\n        onConfigChange={(debug ? console.log : undefined)}\n        validateOnConfigChange={debug}\n      />\n    );\n  }\n  if (datasetUrl) {\n    const responsePromise = fetch(datasetUrl)\n      .then(response => checkResponse(response, theme, debug))\n      .catch(error => Promise.resolve(() => (\n        <Warning\n          title=\"Error fetching\"\n          unformatted={error.message}\n          theme={theme}\n        />\n      )));\n    return (\n      <AwaitResponse response={responsePromise} theme={theme} />\n    );\n  }\n  const configs = listConfigs(showAll);\n  return (<Welcome configs={configs} theme={theme} showBetaHeader={showBetaHeader} />);\n}\n","import Bowser from 'bowser';\nimport { compressToEncodedURIComponent, decompressFromEncodedURIComponent } from 'lz-string';\n\nconst CURRENT_VERSION = '0.0.1';\nconst VITESSCE_CONF_QUERY_STRING = 'vitessce_conf';\nconst VERSION_QUERY_STRING = 'vitessce_conf_version';\nconst LENGTH_QUERY_STRING = 'vitessce_conf_length';\n\nfunction sniffBrowser() {\n  const { browser } = Bowser.parse(window.navigator.userAgent);\n  return browser.name;\n}\n\n// https://stackoverflow.com/questions/417142/what-is-the-maximum-length-of-a-url-in-different-browsers\nconst MAX_BROWSER_URL_LENGTHS = {\n  Chrome: 32779,\n  'Internet Explorer': 2047,\n  Edge: 2047,\n  Safari: 65000,\n  Firefox: 65000,\n};\n\nexport default class CompressedConfLengthError {\n  constructor(message) {\n    this.message = message;\n  }\n}\n\n/**\n * Encode a configuration as url params with a version and an lz-compressed conf.\n * @param {Object} params\n * @param {Object} params.conf Previous scope names.\n * @param {function} params.onOverMaximumUrlLength Callback for when new url\n * is over max length for your browser - takes two arguments: { message, willWorkOn }\n * for the error message and the browsers for which the url will work (optional).\n * @returns {string} The new params like\n * vitessce_conf_length=10&vitessce_conf_version=0.0.1&vitessce_conf=fksdfasdfjkl\n */\nexport function encodeConfInUrl({\n  conf,\n  onOverMaximumUrlLength = () => { },\n}) {\n  const compressedConf = compressToEncodedURIComponent(JSON.stringify(conf));\n  const newParams = `${LENGTH_QUERY_STRING}=${compressedConf.length}&${VERSION_QUERY_STRING}=${CURRENT_VERSION}&${VITESSCE_CONF_QUERY_STRING}=${compressedConf}`;\n  const browser = sniffBrowser();\n  const maxLength = MAX_BROWSER_URL_LENGTHS[browser];\n  if (newParams.length > maxLength) {\n    const willWorkOn = Object.entries(MAX_BROWSER_URL_LENGTHS)\n      .filter(entry => entry[1] > newParams.length)\n      .map(entry => entry[0]);\n    const message = `Configuration is ${compressedConf.length} characters; max URL for ${browser} is ${maxLength}: it will work on ${willWorkOn.join(', ') || 'no browser'}.`;\n    console.error(message);\n    onOverMaximumUrlLength({ message, willWorkOn });\n  }\n  return newParams;\n}\n\n/**\n * Decode URL params to a Vitessce configuration.\n * The URL params must have version and vitessce_conf params,\n * like vitessce_conf_length=10&vitessce_conf_version=0.0.1&vitessce_conf=fksdfasdfjkl.\n * @param {Object} queryString The URL params,\n * like vitessce_conf_length=10&vitessce_conf_version=0.0.1&vitessce_conf=fksdfasdfjkl.\n * @returns {string} A vitessce configuration.\n */\nexport function decodeURLParamsToConf(queryString) {\n  const params = new URLSearchParams(queryString.replace('#', '&'));\n  const compressedConfString = params.get(VITESSCE_CONF_QUERY_STRING);\n  const expectedConfLength = Number(params.get(LENGTH_QUERY_STRING));\n  if (expectedConfLength !== compressedConfString.length) {\n    throw new CompressedConfLengthError(`Compressed conf length (${compressedConfString.length}) != expected (${expectedConfLength}). URL truncated?`);\n  }\n  const version = params.get(VERSION_QUERY_STRING);\n  if (version === CURRENT_VERSION) {\n    const conf = JSON.parse(decompressFromEncodedURIComponent(compressedConfString));\n    return conf;\n  }\n  throw new Error('Unrecognized URL Param Version');\n}\n","import { getNextScope, fromEntries } from '../utils';\nimport { COORDINATION_TYPES } from '../app/state/coordination';\n\n\n/**\n * Class representing a file within a Vitessce config dataset.\n */\nexport class VitessceConfigDatasetFile {\n  /**\n   * Construct a new file definition instance.\n   * @param {string} url The URL to the file.\n   * @param {string} dataType The type of data contained in the file.\n   * @param {string} fileType The file type.\n   */\n  constructor(url, dataType, fileType) {\n    this.file = {\n      url,\n      type: dataType,\n      fileType,\n    };\n  }\n\n  /**\n   * @returns {object} This dataset file as a JSON object.\n   */\n  toJSON() {\n    return this.file;\n  }\n}\n\n/**\n * Class representing a dataset within a Vitessce config.\n */\nexport class VitessceConfigDataset {\n  /**\n   * Construct a new dataset definition instance.\n   * @param {string} uid The unique ID for the dataset.\n   * @param {string} name The name of the dataset.\n   * @param {string} description A description for the dataset.\n   */\n  constructor(uid, name, description) {\n    this.dataset = {\n      uid,\n      name,\n      description,\n      files: [],\n    };\n  }\n\n  /**\n   * Add a file definition to the dataset.\n   * @param {string} url The URL to the file.\n   * @param {string} dataType The type of data contained in the file.\n   * @param {string} fileType The file type.\n   * @returns {VitessceConfigDataset} This, to allow chaining.\n   */\n  addFile(url, dataType, fileType) {\n    this.dataset.files.push(new VitessceConfigDatasetFile(url, dataType, fileType));\n    return this;\n  }\n\n  /**\n   * @returns {object} This dataset as a JSON object.\n   */\n  toJSON() {\n    return {\n      ...this.dataset,\n      files: this.dataset.files.map(f => f.toJSON()),\n    };\n  }\n}\n\n/**\n * Class representing a view within a Vitessce layout.\n */\nexport class VitessceConfigView {\n  /**\n   * Construct a new view instance.\n   * @param {string} component The name of the Vitessce component type.\n   * @param {object} coordinationScopes A mapping from coordination type\n   * names to coordination scope names.\n   * @param {number} x The x-coordinate of the view in the layout.\n   * @param {number} y The y-coordinate of the view in the layout.\n   * @param {number} w The width of the view in the layout.\n   * @param {number} h The height of the view in the layout.\n   */\n  constructor(component, coordinationScopes, x, y, w, h) {\n    this.view = {\n      component,\n      coordinationScopes,\n      x,\n      y,\n      w,\n      h,\n    };\n  }\n\n  /**\n   * Attach coordination scopes to this view.\n   * @param  {...VitessceConfigCoordinationScope} args A variable number of\n   * coordination scope instances.\n   * @returns {VitessceConfigView} This, to allow chaining.\n   */\n  useCoordination(...args) {\n    const cScopes = args;\n    cScopes.forEach((cScope) => {\n      this.view.coordinationScopes[cScope.cType] = cScope.cScope;\n    });\n    return this;\n  }\n\n  /**\n    * Set the x, y, w, h values for this view.\n    * @param {number} x The x-coordinate of the view in the layout.\n    * @param {number} y The y-coordinate of the view in the layout.\n    * @param {number} w The width of the view in the layout.\n    * @param {number} h The height of the view in the layout.\n    */\n  setXYWH(x, y, w, h) {\n    this.view.x = x;\n    this.view.y = y;\n    this.view.w = w;\n    this.view.h = h;\n  }\n\n  /**\n   * @returns {object} This view as a JSON object.\n   */\n  toJSON() {\n    return this.view;\n  }\n}\n\n/**\n * Class representing a horizontal concatenation of views.\n */\nexport class VitessceConfigViewHConcat {\n  constructor(views) {\n    this.views = views;\n  }\n}\n\n/**\n * Class representing a vertical concatenation of views.\n */\nexport class VitessceConfigViewVConcat {\n  constructor(views) {\n    this.views = views;\n  }\n}\n\n/**\n * A helper function to create a horizontal concatenation of views.\n * @param  {...(VitessceConfigView|VitessceConfigViewHConcat|VitessceConfigViewVConcat)} views A\n * variable number of views or view concatenations.\n * @returns {VitessceConfigViewHConcat} A new horizontal view concatenation instance.\n */\nexport function hconcat(...views) {\n  const vcvhc = new VitessceConfigViewHConcat(views);\n  return vcvhc;\n}\n\n/**\n * A helper function to create a vertical concatenation of views.\n * @param  {...(VitessceConfigView|VitessceConfigViewHConcat|VitessceConfigViewVConcat)} views A\n * variable number of views or view concatenations.\n * @returns {VitessceConfigViewVConcat} A new vertical view concatenation instance.\n */\nexport function vconcat(...views) {\n  const vcvvc = new VitessceConfigViewVConcat(views);\n  return vcvvc;\n}\n\n/**\n * Class representing a coordination scope in the coordination space.\n */\nexport class VitessceConfigCoordinationScope {\n  /**\n   * Construct a new coordination scope instance.\n   * @param {string} cType The coordination type for this coordination scope.\n   * @param {string} cScope The name of the coordination scope.\n   */\n  constructor(cType, cScope) {\n    this.cType = cType;\n    this.cScope = cScope;\n    this.cValue = null;\n  }\n\n  /**\n   * Set the coordination value of the coordination scope.\n   * @param {any} cValue The value to set.\n   * @returns {VitessceConfigCoordinationScope} This, to allow chaining.\n   */\n  setValue(cValue) {\n    this.cValue = cValue;\n    return this;\n  }\n}\n\n/**\n * Class representing a Vitessce view config.\n */\nexport class VitessceConfig {\n  /**\n   * Construct a new view config instance.\n   * @param {string} name A name for the config. Optional.\n   * @param {string} description A description for the config. Optional.\n   */\n  constructor(name = undefined, description = undefined) {\n    this.config = {\n      version: '1.0.0',\n      name,\n      description,\n      datasets: [],\n      coordinationSpace: {},\n      layout: [],\n      initStrategy: 'auto',\n    };\n  }\n\n  /**\n   * Add a new dataset to the config.\n   * @param {string} name A name for the dataset. Optional.\n   * @param {string} description A description for the dataset. Optional.\n   * @param {object} options Extra parameters to be used internally. Optional.\n   * @param {string} options.uid Override the automatically-generated dataset ID.\n   * Intended for internal usage by the VitessceConfig.fromJSON code.\n   * @returns {VitessceConfigDataset} A new dataset instance.\n   */\n  addDataset(name = undefined, description = undefined, options = undefined) {\n    const { uid } = options || {};\n    const prevDatasetUids = this.config.datasets.map(d => d.dataset.uid);\n    const nextUid = (uid || getNextScope(prevDatasetUids));\n    const newDataset = new VitessceConfigDataset(nextUid, name, description);\n    this.config.datasets.push(newDataset);\n    const [newScope] = this.addCoordination(COORDINATION_TYPES.DATASET);\n    newScope.setValue(nextUid);\n    return newDataset;\n  }\n\n  /**\n   * Add a new view to the config.\n   * @param {VitessceConfigDataset} dataset The dataset instance which defines the data\n   * that will be displayed in the view.\n   * @param {string} component A component name, such as \"scatterplot\" or \"spatial\".\n   * @param {object} options Extra options for the component.\n   * @param {number} options.x The x-coordinate for the view in the grid layout.\n   * @param {number} options.y The y-coordinate for the view in the grid layout.\n   * @param {number} options.w The width for the view in the grid layout.\n   * @param {number} options.h The height for the view in the grid layout.\n   * @param {number} options.mapping A convenience parameter for setting the EMBEDDING_TYPE\n   * coordination value. Only applicable if the component is \"scatterplot\".\n   * @returns {VitessceConfigView} A new view instance.\n   */\n  addView(dataset, component, options) {\n    const {\n      x = 0,\n      y = 0,\n      w = 1,\n      h = 1,\n      mapping = null,\n    } = options || {};\n    const datasetMatches = (\n      this.config.coordinationSpace[COORDINATION_TYPES.DATASET]\n        ? Object.entries(this.config.coordinationSpace[COORDINATION_TYPES.DATASET])\n        // eslint-disable-next-line no-unused-vars\n          .filter(([scopeName, datasetScope]) => datasetScope.cValue === dataset.dataset.uid)\n          .map(([scopeName]) => scopeName)\n        : []\n    );\n    let datasetScope;\n    if (datasetMatches.length === 1) {\n      [datasetScope] = datasetMatches;\n    } else {\n      throw new Error('No coordination scope matching the dataset parameter could be found in the coordination space.');\n    }\n    const coordinationScopes = {\n      [COORDINATION_TYPES.DATASET]: datasetScope,\n    };\n    const newView = new VitessceConfigView(component, coordinationScopes, x, y, w, h);\n    if (mapping) {\n      const [etScope] = this.addCoordination(COORDINATION_TYPES.EMBEDDING_TYPE);\n      etScope.setValue(mapping);\n      newView.useCoordination(etScope);\n    }\n    this.config.layout.push(newView);\n    return newView;\n  }\n\n  /**\n   * Get an array of new coordination scope instances corresponding to coordination types\n   * of interest.\n   * @param {...string} args A variable number of coordination type names.\n   * @returns {VitessceConfigCoordinationScope[]} An array of coordination scope instances.\n   */\n  addCoordination(...args) {\n    const cTypes = args;\n    const result = [];\n    cTypes.forEach((cType) => {\n      const prevScopes = (\n        this.config.coordinationSpace[cType]\n          ? Object.keys(this.config.coordinationSpace[cType])\n          : []\n      );\n      const scope = new VitessceConfigCoordinationScope(cType, getNextScope(prevScopes));\n      if (!this.config.coordinationSpace[scope.cType]) {\n        this.config.coordinationSpace[scope.cType] = {};\n      }\n      this.config.coordinationSpace[scope.cType][scope.cScope] = scope;\n      result.push(scope);\n    });\n    return result;\n  }\n\n  /**\n   * A convenience function for setting up new coordination scopes across a set of views.\n   * @param {VitessceConfigView[]} views An array of view objects to link together.\n   * @param {string[]} cTypes The coordination types on which to coordinate the views.\n   * @param {any[]} cValues Initial values corresponding to each coordination type.\n   * Should have the same length as the cTypes array. Optional.\n   * @returns {VitessceConfig} This, to allow chaining.\n   */\n  linkViews(views, cTypes, cValues = null) {\n    const cScopes = this.addCoordination(...cTypes);\n    views.forEach((view) => {\n      cScopes.forEach((cScope) => {\n        view.useCoordination(cScope);\n      });\n    });\n    if (Array.isArray(cValues) && cValues.length === cTypes.length) {\n      cScopes.forEach((cScope, i) => {\n        cScope.setValue(cValues[i]);\n      });\n    }\n    return this;\n  }\n\n  /**\n   * Set the layout of views.\n   * @param {VitessceConfigView|VitessceConfigViewHConcat|VitessceConfigViewVConcat} viewConcat A\n   * view or a concatenation of views.\n   * @returns {VitessceConfig} This, to allow chaining.\n   */\n  layout(viewConcat) {\n    function layoutAux(obj, xMin, xMax, yMin, yMax) {\n      const w = xMax - xMin;\n      const h = yMax - yMin;\n      if (obj instanceof VitessceConfigView) {\n        obj.setXYWH(xMin, yMin, w, h);\n      } else if (obj instanceof VitessceConfigViewHConcat) {\n        const { views } = obj;\n        const numViews = views.length;\n        views.forEach((view, i) => {\n          layoutAux(view, xMin + (w / numViews) * i, xMin + (w / numViews) * (i + 1), yMin, yMax);\n        });\n      } else if (obj instanceof VitessceConfigViewVConcat) {\n        const { views } = obj;\n        const numViews = views.length;\n        views.forEach((view, i) => {\n          layoutAux(view, xMin, xMax, yMin + (h / numViews) * i, yMin + (h / numViews) * (i + 1));\n        });\n      }\n    }\n\n    layoutAux(viewConcat, 0, 12, 0, 12);\n\n    return this;\n  }\n\n  /**\n   * Convert this instance to a JSON object that can be passed to the Vitessce component.\n   * @returns {object} The view config as a JSON object.\n   */\n  toJSON() {\n    return {\n      ...this.config,\n      datasets: this.config.datasets.map(d => d.toJSON()),\n      coordinationSpace: fromEntries(\n        Object.entries(this.config.coordinationSpace).map(([cType, cScopes]) => ([\n          cType,\n          fromEntries(\n            Object.entries(cScopes).map(([cScopeName, cScope]) => ([\n              cScopeName,\n              cScope.cValue,\n            ])),\n          ),\n        ])),\n      ),\n      layout: this.config.layout.map(c => c.toJSON()),\n    };\n  }\n\n  /**\n   * Create a VitessceConfig instance from an existing view config, to enable\n   * manipulation with the JavaScript API.\n   * @param {object} config An existing Vitessce view config as a JSON object.\n   * @returns {VitessceConfig} A new config instance, with values set to match\n   * the config parameter.\n   */\n  static fromJSON(config) {\n    const { name, description } = config;\n    const vc = new VitessceConfig(name, description);\n    config.datasets.forEach((d) => {\n      const newDataset = vc.addDataset(d.name, d.description, { uid: d.uid });\n      d.files.forEach((f) => {\n        newDataset.addFile(\n          f.url,\n          f.type,\n          f.fileType,\n        );\n      });\n    });\n    Object.keys(config.coordinationSpace).forEach((cType) => {\n      if (cType !== COORDINATION_TYPES.DATASET) {\n        const cObj = config.coordinationSpace[cType];\n        vc.config.coordinationSpace[cType] = {};\n        Object.entries(cObj).forEach(([cScopeName, cScopeValue]) => {\n          const scope = new VitessceConfigCoordinationScope(cType, cScopeName);\n          scope.setValue(cScopeValue);\n          vc.config.coordinationSpace[cType][cScopeName] = scope;\n        });\n      }\n    });\n    config.layout.forEach((c) => {\n      const newView = new VitessceConfigView(c.component, c.coordinationScopes, c.x, c.y, c.w, c.h);\n      vc.config.layout.push(newView);\n    });\n    return vc;\n  }\n}\n","import { Heatmap } from './components/heatmap';\nimport { Spatial } from './components/spatial';\nimport { Scatterplot } from './components/scatterplot';\nimport VitessceGrid from './app/VitessceGrid';\nimport {\n  createApp,\n  Vitessce,\n  encodeConfInUrl,\n  decodeURLParamsToConf,\n} from './app';\nimport {\n  VitessceConfig,\n  hconcat,\n  vconcat,\n} from './api';\n\nexport {\n  Heatmap,\n  Spatial,\n  Scatterplot,\n  VitessceGrid,\n  createApp,\n  Vitessce,\n  encodeConfInUrl,\n  decodeURLParamsToConf,\n  VitessceConfig,\n  hconcat,\n  vconcat,\n};\n"],"sourceRoot":""}